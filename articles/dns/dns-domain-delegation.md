---
title: "aaaAzure DNS 委派概觀 |Microsoft 文件"
description: "了解如何 toochange 網域委派和使用 Azure DNS 名稱伺服器 tooprovide 網域裝載。"
services: dns
documentationcenter: na
author: georgewallace
manager: timlt
ms.assetid: 257da6ec-d6e2-4b6f-ad76-ee2dde4efbcc
ms.service: dns
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/12/2017
ms.author: gwallace
ms.openlocfilehash: eaf2d2e345004b4d631e8d81d548b8ca23277d05
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="delegation-of-dns-zones-with-azure-dns"></a><span data-ttu-id="e4adc-103">使用 Azure DNS 的 DNS 區域委派</span><span class="sxs-lookup"><span data-stu-id="e4adc-103">Delegation of DNS zones with Azure DNS</span></span>

<span data-ttu-id="e4adc-104">Azure DNS 可讓您 toohost DNS 區域，並管理網域，以在 Azure 中的 hello DNS 記錄。</span><span class="sxs-lookup"><span data-stu-id="e4adc-104">Azure DNS allows you toohost a DNS zone and manage hello DNS records for a domain in Azure.</span></span> <span data-ttu-id="e4adc-105">為了讓網域 tooreach Azure DNS 的 DNS 查詢，hello 網域有 toobe 從 hello 父系網域委派 tooAzure DNS。</span><span class="sxs-lookup"><span data-stu-id="e4adc-105">In order for DNS queries for a domain tooreach Azure DNS, hello domain has toobe delegated tooAzure DNS from hello parent domain.</span></span> <span data-ttu-id="e4adc-106">請記住 Azure DNS 不 hello 網域註冊機構。</span><span class="sxs-lookup"><span data-stu-id="e4adc-106">Keep in mind Azure DNS is not hello domain registrar.</span></span> <span data-ttu-id="e4adc-107">本文件說明網域委派的運作方式以及 toodelegate 網域 tooAzure DNS。</span><span class="sxs-lookup"><span data-stu-id="e4adc-107">This article explains how domain delegation works and how toodelegate domains tooAzure DNS.</span></span>

## <a name="how-dns-delegation-works"></a><span data-ttu-id="e4adc-108">DNS 委派的運作方式</span><span class="sxs-lookup"><span data-stu-id="e4adc-108">How DNS delegation works</span></span>

### <a name="domains-and-zones"></a><span data-ttu-id="e4adc-109">網域和區域</span><span class="sxs-lookup"><span data-stu-id="e4adc-109">Domains and zones</span></span>

<span data-ttu-id="e4adc-110">hello 網域名稱系統是網域的階層。</span><span class="sxs-lookup"><span data-stu-id="e4adc-110">hello Domain Name System is a hierarchy of domains.</span></span> <span data-ttu-id="e4adc-111">hello 階層是從 hello 'root' 網域，其名稱只是開始 '**。**'。</span><span class="sxs-lookup"><span data-stu-id="e4adc-111">hello hierarchy starts from hello 'root' domain, whose name is simply '**.**'.</span></span>  <span data-ttu-id="e4adc-112">下面接著最上層網域，例如 'com'、'net'、'org'、'uk' 或 'jp'。</span><span class="sxs-lookup"><span data-stu-id="e4adc-112">Below this come top-level domains, such as 'com', 'net', 'org', 'uk' or 'jp'.</span></span>  <span data-ttu-id="e4adc-113">最上層網域下面是第二層網域，例如 'org.uk' 或 'co.jp'。</span><span class="sxs-lookup"><span data-stu-id="e4adc-113">Below these top-level domains are second-level domains, such as 'org.uk' or 'co.jp'.</span></span>  <span data-ttu-id="e4adc-114">依此類推。</span><span class="sxs-lookup"><span data-stu-id="e4adc-114">And so on.</span></span> <span data-ttu-id="e4adc-115">hello DNS 階層中的 hello 網域裝載使用不同的 DNS 區域。</span><span class="sxs-lookup"><span data-stu-id="e4adc-115">hello domains in hello DNS hierarchy are hosted using separate DNS zones.</span></span> <span data-ttu-id="e4adc-116">全域發佈這些區域，hello 世界各地的 DNS 名稱伺服器所裝載。</span><span class="sxs-lookup"><span data-stu-id="e4adc-116">These zones are globally distributed, hosted by DNS name servers around hello world.</span></span>

<span data-ttu-id="e4adc-117">**DNS 區域**-網域是在網域名稱系統，例如 'contoso.com' hello 的唯一名稱。</span><span class="sxs-lookup"><span data-stu-id="e4adc-117">**DNS zone** - A domain is a unique name in hello Domain Name System, for example 'contoso.com'.</span></span> <span data-ttu-id="e4adc-118">DNS 區域是使用的 toohost hello 針對特定網域的 DNS 記錄。</span><span class="sxs-lookup"><span data-stu-id="e4adc-118">A DNS zone is used toohost hello DNS records for a particular domain.</span></span> <span data-ttu-id="e4adc-119">例如，hello 網域 'contoso.com' 可能會包含數個 DNS 記錄，例如 （郵件伺服器） 的 ' mail.contoso.com' 和 'www.contoso.com' （適用於網站）。</span><span class="sxs-lookup"><span data-stu-id="e4adc-119">For example, hello domain 'contoso.com' may contain several DNS records such as 'mail.contoso.com' (for a mail server) and 'www.contoso.com' (for a website).</span></span>

<span data-ttu-id="e4adc-120">**網域註冊機構** - 網域註冊機構是指可以提供網際網路網域名稱的公司。</span><span class="sxs-lookup"><span data-stu-id="e4adc-120">**Domain registrar** - A domain registrar is a company who can provide Internet domain names.</span></span> <span data-ttu-id="e4adc-121">如果您想要的 hello 的網際網路網域 toouse 而且 toopurchase 可讓您確認它。</span><span class="sxs-lookup"><span data-stu-id="e4adc-121">They verify if hello Internet domain you want toouse is available and allow you toopurchase it.</span></span> <span data-ttu-id="e4adc-122">Hello 網域名稱註冊後，會是合法 hello hello 網域名稱擁有者。</span><span class="sxs-lookup"><span data-stu-id="e4adc-122">Once hello domain name is registered, you are hello legal owner for hello domain name.</span></span> <span data-ttu-id="e4adc-123">如果您已經有網際網路網域，您將使用 hello 目前網域註冊機構 toodelegate tooAzure DNS。</span><span class="sxs-lookup"><span data-stu-id="e4adc-123">If you already have an Internet domain, you will use hello current domain registrar toodelegate tooAzure DNS.</span></span>

<span data-ttu-id="e4adc-124">誰擁有指定的網域名稱，或如需詳細資訊的詳細資訊的 toofind toobuy 網域，請參閱[Azure AD 中的網際網路網域管理](https://msdn.microsoft.com/library/azure/hh969248.aspx)。</span><span class="sxs-lookup"><span data-stu-id="e4adc-124">toofind out more information on who owns a given domain name, or for information on how toobuy a domain, see [Internet domain management in Azure AD](https://msdn.microsoft.com/library/azure/hh969248.aspx).</span></span>

### <a name="resolution-and-delegation"></a><span data-ttu-id="e4adc-125">解析和委派</span><span class="sxs-lookup"><span data-stu-id="e4adc-125">Resolution and delegation</span></span>

<span data-ttu-id="e4adc-126">有兩種類型的 DNS 伺服器：</span><span class="sxs-lookup"><span data-stu-id="e4adc-126">There are two types of DNS servers:</span></span>

* <span data-ttu-id="e4adc-127">*授權* DNS 伺服器裝載 DNS 區域。</span><span class="sxs-lookup"><span data-stu-id="e4adc-127">An *authoritative* DNS server hosts DNS zones.</span></span> <span data-ttu-id="e4adc-128">它只會回答這些區域中的 DNS 記錄查詢。</span><span class="sxs-lookup"><span data-stu-id="e4adc-128">It answers DNS queries for records in those zones only.</span></span>
* <span data-ttu-id="e4adc-129">*遞迴* DNS 伺服器不裝載 DNS 區域。</span><span class="sxs-lookup"><span data-stu-id="e4adc-129">A *recursive* DNS server does not host DNS zones.</span></span> <span data-ttu-id="e4adc-130">它會藉由呼叫授權 DNS 伺服器 toogather hello 資料需要回答所有 DNS 查詢。</span><span class="sxs-lookup"><span data-stu-id="e4adc-130">It answers all DNS queries by calling authoritative DNS servers toogather hello data it needs.</span></span>

<span data-ttu-id="e4adc-131">Azure DNS 提供具權威性的 DNS 服務。</span><span class="sxs-lookup"><span data-stu-id="e4adc-131">Azure DNS provides an authoritative DNS service.</span></span>  <span data-ttu-id="e4adc-132">它不提供遞迴 DNS 服務。</span><span class="sxs-lookup"><span data-stu-id="e4adc-132">It does not provide a recursive DNS service.</span></span> <span data-ttu-id="e4adc-133">雲端服務和 Azure 中的 Vm 會自動設定的 toouse 個別提供做為 Azure 基礎結構一部分的遞迴 DNS 服務。</span><span class="sxs-lookup"><span data-stu-id="e4adc-133">Cloud Services and VMs in Azure are automatically configured toouse a recursive DNS service that is provided separately as part of Azure's infrastructure.</span></span> <span data-ttu-id="e4adc-134">如需有關如何 toochange 這些 DNS 設定，請參閱詳細[在 Azure 中的名稱解析](../virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server)。</span><span class="sxs-lookup"><span data-stu-id="e4adc-134">For information on how toochange these DNS settings, see [Name Resolution in Azure](../virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server).</span></span>

<span data-ttu-id="e4adc-135">DNS 用戶端電腦或行動裝置通常呼叫遞迴 DNS 伺服器 tooperform hello 用戶端應用程式需要任何 DNS 查詢。</span><span class="sxs-lookup"><span data-stu-id="e4adc-135">DNS clients in PCs or mobile devices typically call a recursive DNS server tooperform any DNS queries hello client applications need.</span></span>

<span data-ttu-id="e4adc-136">當遞迴 DNS 伺服器收到的查詢，例如 'www.contoso.com' DNS 記錄時，就必須 toofind hello 名稱伺服器主控 hello 區域 hello 'contoso.com' 網域。</span><span class="sxs-lookup"><span data-stu-id="e4adc-136">When a recursive DNS server receives a query for a DNS record such as 'www.contoso.com', it first needs toofind hello name server hosting hello zone for hello 'contoso.com' domain.</span></span> <span data-ttu-id="e4adc-137">toofind hello 名稱伺服器，它會從 hello 根名稱伺服器，然後從那裡找到 hello 裝載 hello 'com' 區域的名稱伺服器。</span><span class="sxs-lookup"><span data-stu-id="e4adc-137">toofind hello name server, it starts at hello root name servers, and from there finds hello name servers hosting hello 'com' zone.</span></span> <span data-ttu-id="e4adc-138">然後，它會查詢 hello 'com' 名稱伺服器 toofind hello 名稱伺服器裝載 hello 'contoso.com' 區域。</span><span class="sxs-lookup"><span data-stu-id="e4adc-138">It then queries hello 'com' name servers toofind hello name servers hosting hello 'contoso.com' zone.</span></span>  <span data-ttu-id="e4adc-139">最後，它是無法 tooquery 這些名稱伺服器 'www.contoso.com'。</span><span class="sxs-lookup"><span data-stu-id="e4adc-139">Finally, it is able tooquery these name servers for 'www.contoso.com'.</span></span>

<span data-ttu-id="e4adc-140">此程序稱為 hello DNS 名稱解析。</span><span class="sxs-lookup"><span data-stu-id="e4adc-140">This procedure is called resolving hello DNS name.</span></span> <span data-ttu-id="e4adc-141">嚴格來說，DNS 解析包含額外的步驟，例如下列 Cname，但這不是重要 toounderstanding DNS 委派的運作方式。</span><span class="sxs-lookup"><span data-stu-id="e4adc-141">Strictly speaking, DNS resolution includes additional steps such as following CNAMEs, but that's not important toounderstanding how DNS delegation works.</span></span>

<span data-ttu-id="e4adc-142">如何沒有上層區域 '點' toohello 子區域的名稱伺服器？</span><span class="sxs-lookup"><span data-stu-id="e4adc-142">How does a parent zone 'point' toohello name servers for a child zone?</span></span> <span data-ttu-id="e4adc-143">作法是使用一種特殊的 DNS 記錄，稱為 NS 記錄 (NS 代表「名稱伺服器」)。</span><span class="sxs-lookup"><span data-stu-id="e4adc-143">It does this using a special type of DNS record called an NS record (NS stands for 'name server').</span></span> <span data-ttu-id="e4adc-144">例如，hello 根區域包含 'com' NS 記錄，並顯示 hello hello 'com' 區域的名稱伺服器。</span><span class="sxs-lookup"><span data-stu-id="e4adc-144">For example, hello root zone contains NS records for 'com' and shows hello name servers for hello 'com' zone.</span></span> <span data-ttu-id="e4adc-145">接著，hello 'com' 區域包含 'contoso.com'，其中顯示 hello hello 'contoso.com' 區域的名稱伺服器 NS 記錄。</span><span class="sxs-lookup"><span data-stu-id="e4adc-145">In turn, hello 'com' zone contains NS records for 'contoso.com', which shows hello name servers for hello 'contoso.com' zone.</span></span> <span data-ttu-id="e4adc-146">設定子區域的上層區域中的 hello NS 記錄，會呼叫委派 hello 網域。</span><span class="sxs-lookup"><span data-stu-id="e4adc-146">Setting up hello NS records for a child zone in a parent zone is called delegating hello domain.</span></span>

<span data-ttu-id="e4adc-147">hello 下列影像顯示的範例 DNS 查詢。</span><span class="sxs-lookup"><span data-stu-id="e4adc-147">hello following image shows an example DNS query.</span></span> <span data-ttu-id="e4adc-148">hello contoso.net 和 partners.contoso.net 是 Azure DNS 區域。</span><span class="sxs-lookup"><span data-stu-id="e4adc-148">hello contoso.net and partners.contoso.net are Azure DNS zones.</span></span>

![Dns-nameserver](./media/dns-domain-delegation/image1.png)

1. <span data-ttu-id="e4adc-150">hello 用戶端要求`www.partners.contoso.net`從其本機 DNS 伺服器。</span><span class="sxs-lookup"><span data-stu-id="e4adc-150">hello client requests `www.partners.contoso.net` from their local DNS server.</span></span>
1. <span data-ttu-id="e4adc-151">hello 本機 DNS 伺服器沒有 hello 記錄，因此它會建立要求 tootheir 根名稱伺服器。</span><span class="sxs-lookup"><span data-stu-id="e4adc-151">hello local DNS server does not have hello record so it makes a request tootheir root name server.</span></span>
1. <span data-ttu-id="e4adc-152">hello 根名稱伺服器沒有 hello 記錄，但知道 hello hello 位址`.net`名稱伺服器，它會提供該位址 toohello DNS 伺服器</span><span class="sxs-lookup"><span data-stu-id="e4adc-152">hello root name server does not have hello record, but knows hello address of hello `.net` name server, it provides that address toohello DNS server</span></span>
1. <span data-ttu-id="e4adc-153">hello DNS 傳送嗨要求 toohello`.net`名稱伺服器，它並沒有 hello 記錄但不會知道 hello hello contoso.net 名稱伺服器位址。</span><span class="sxs-lookup"><span data-stu-id="e4adc-153">hello DNS sends hello request toohello `.net` name server, it does not have hello record but does know hello address of hello contoso.net name server.</span></span> <span data-ttu-id="e4adc-154">在此情況下，這是在 Azure DNS 中託管的 DNS 區域。</span><span class="sxs-lookup"><span data-stu-id="e4adc-154">In this case it is a DNS zone hosted in Azure DNS.</span></span>
1. <span data-ttu-id="e4adc-155">hello 區域`contoso.net`沒有 hello 記錄，但知道 hello 名稱伺服器`partners.contoso.net`並與回應。</span><span class="sxs-lookup"><span data-stu-id="e4adc-155">hello zone `contoso.net` does not have hello record but knows hello name server for `partners.contoso.net` and responds with that.</span></span> <span data-ttu-id="e4adc-156">在此情況下，這是在 Azure DNS 中託管的 DNS 區域。</span><span class="sxs-lookup"><span data-stu-id="e4adc-156">In this case it is a DNS zone hosted in Azure DNS.</span></span>
1. <span data-ttu-id="e4adc-157">hello DNS 伺服器要求 hello IP 位址`partners.contoso.net`從 hello`partners.contoso.net`區域。</span><span class="sxs-lookup"><span data-stu-id="e4adc-157">hello DNS server requests hello IP address of `partners.contoso.net` from hello `partners.contoso.net` zone.</span></span> <span data-ttu-id="e4adc-158">它包含 hello A 記錄，然後會回應 hello IP 位址。</span><span class="sxs-lookup"><span data-stu-id="e4adc-158">It contains hello A record and responds with hello IP address.</span></span>
1. <span data-ttu-id="e4adc-159">hello DNS 伺服器提供 IP 位址 toohello 用戶端 hello</span><span class="sxs-lookup"><span data-stu-id="e4adc-159">hello DNS server provides hello IP address toohello client</span></span>
1. <span data-ttu-id="e4adc-160">hello 用戶端連線 toohello 網站`www.partners.contoso.net`。</span><span class="sxs-lookup"><span data-stu-id="e4adc-160">hello client connects toohello website `www.partners.contoso.net`.</span></span>

<span data-ttu-id="e4adc-161">每個委派實際上有兩個複本的 hello NS 記錄。其中一個指向 toohello 子網域與另一個本身 hello 子區域中的 hello 上層區域中。</span><span class="sxs-lookup"><span data-stu-id="e4adc-161">Each delegation actually has two copies of hello NS records; one in hello parent zone pointing toohello child, and another in hello child zone itself.</span></span> <span data-ttu-id="e4adc-162">hello 'contoso.net' 含有 'contoso.net' hello NS 記錄 （在 'net' 中的加法 toohello NS 記錄）。</span><span class="sxs-lookup"><span data-stu-id="e4adc-162">hello 'contoso.net' zone contains hello NS records for 'contoso.net' (in addition toohello NS records in 'net').</span></span> <span data-ttu-id="e4adc-163">這些記錄稱為權威 NS 記錄和它們的位置可以在 hello 區域的 hello 子區域的 apex。</span><span class="sxs-lookup"><span data-stu-id="e4adc-163">These records are called authoritative NS records and they sit at hello apex of hello child zone.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e4adc-164">後續步驟</span><span class="sxs-lookup"><span data-stu-id="e4adc-164">Next steps</span></span>

<span data-ttu-id="e4adc-165">了解如何太[委派您網域 tooAzure DNS](dns-delegate-domain-azure-dns.md)</span><span class="sxs-lookup"><span data-stu-id="e4adc-165">Learn how too[delegate your domain tooAzure DNS](dns-delegate-domain-azure-dns.md)</span></span>

