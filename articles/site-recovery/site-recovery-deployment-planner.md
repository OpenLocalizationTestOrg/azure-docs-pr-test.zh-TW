---
title: "VMware 到 Azure 的 Azure Site Recovery Deployment Planner | Microsoft Docs"
description: "這是 Azure Site Recovery Deployment Planner 使用者指南。"
services: site-recovery
documentationcenter: 
author: nsoneji
manager: garavd
editor: 
ms.assetid: 
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: hero-article
ms.date: 08/28/2017
ms.author: nisoneji
ms.openlocfilehash: 60b0641076c2fa8ed2feb5c64e7b119519f46cf4
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/29/2017
---
# <a name="azure-site-recovery-deployment-planner"></a><span data-ttu-id="d3fe5-103">Azure Site Recovery Deployment Planner</span><span class="sxs-lookup"><span data-stu-id="d3fe5-103">Azure Site Recovery deployment planner</span></span>
<span data-ttu-id="d3fe5-104">本文是 VMware 到 Azure 生產部署的 Azure Site Recovery Deployment Planner 使用者指南。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-104">This article is the Azure Site Recovery Deployment Planner user guide for VMware-to-Azure production deployments.</span></span>

## <a name="overview"></a><span data-ttu-id="d3fe5-105">概觀</span><span class="sxs-lookup"><span data-stu-id="d3fe5-105">Overview</span></span>

<span data-ttu-id="d3fe5-106">使用 Site Recovery 開始保護任何 VMware 虛擬機器之前，請根據每日資料變化率來配置足夠的頻寬，以符合您所需的復原點目標 (RPO)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-106">Before you begin protecting any VMware virtual machines (VMs) by using Site Recovery, allocate sufficient bandwidth, based on your daily data-change rate, to meet your desired recovery point objective (RPO).</span></span> <span data-ttu-id="d3fe5-107">務必在內部部署環境中部署適當的組態伺服器和處理序伺服器數目。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-107">Be sure to deploy the right number of configuration servers and process servers on-premises.</span></span>

<span data-ttu-id="d3fe5-108">您也需要建立正確的目標 Azure 儲存體帳戶類型和數目。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-108">You also need to create the right type and number of target Azure storage accounts.</span></span> <span data-ttu-id="d3fe5-109">您可建立標準或進階儲存體帳戶，將使用量隨時間增加所造成的來源生產伺服器成長納入考量。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-109">You create either standard or premium storage accounts, factoring in growth on your source production servers because of increased usage over time.</span></span> <span data-ttu-id="d3fe5-110">您可以根據工作負載特性 (例如，每秒的讀/寫 I/O 作業 [IOPS]，或資料變換) 和 Site Recovery 限制，選擇每部 VM 的儲存體類型。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-110">You choose the storage type per VM, based on workload characteristics (for example, read/write I/O operations per second [IOPS], or data churn) and Site Recovery limits.</span></span>

<span data-ttu-id="d3fe5-111">Site Recovery Deployment Planner 公開預覽版本是一項命令列工具，目前僅適用於 VMware 到 Azure 案例。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-111">The Site Recovery deployment planner public preview is a command-line tool that's currently available only for the VMware-to-Azure scenario.</span></span> <span data-ttu-id="d3fe5-112">您可以使用此工具從遠端剖析 VMware VM (完全不影響實際運作)，以了解成功複寫與測試容錯移轉的頻寬和 Azure 儲存體需求。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-112">You can remotely profile your VMware VMs by using this tool (with no production impact whatsoever) to understand the bandwidth and Azure Storage requirements for successful replication and test failover.</span></span> <span data-ttu-id="d3fe5-113">您不需安裝任何 Site Recovery 內部部署元件，即可執行此工具。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-113">You can run the tool without installing any Site Recovery components on-premises.</span></span> <span data-ttu-id="d3fe5-114">然而，若要取得精確的已達成輸送量結果，建議在以下 Windows Server 上執行 Planner：符合您在生產環境部署的前幾個步驟中最終需要部署之 Site Recovery 組態伺服器的最低需求。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-114">However, to get accurate achieved throughput results, we recommend that you run the planner on a Windows Server that meets the minimum requirements of the Site Recovery configuration server that you would eventually need to deploy as one of the first steps in production deployment.</span></span>

<span data-ttu-id="d3fe5-115">此工具提供下列詳細資料︰</span><span class="sxs-lookup"><span data-stu-id="d3fe5-115">The tool provides the following details:</span></span>

<span data-ttu-id="d3fe5-116">**相容性評估**</span><span class="sxs-lookup"><span data-stu-id="d3fe5-116">**Compatibility assessment**</span></span>

* <span data-ttu-id="d3fe5-117">以磁碟數目、磁碟大小、IOPS、變換和開機類型 (EFI/BIOS) 為基礎的 VM 合適性評估</span><span class="sxs-lookup"><span data-stu-id="d3fe5-117">A VM eligibility assessment, based on number of disks, disk size, IOPS, churn and boot type(EFI/BIOS)</span></span>
* <span data-ttu-id="d3fe5-118">差異複寫所需的預估網路頻寬</span><span class="sxs-lookup"><span data-stu-id="d3fe5-118">The estimated network bandwidth that's required for delta replication</span></span>

<span data-ttu-id="d3fe5-119">**網路頻寬需求與 RPO 評估**</span><span class="sxs-lookup"><span data-stu-id="d3fe5-119">**Network bandwidth need versus RPO assessment**</span></span>

* <span data-ttu-id="d3fe5-120">差異複寫所需的預估網路頻寬</span><span class="sxs-lookup"><span data-stu-id="d3fe5-120">The estimated network bandwidth that's required for delta replication</span></span>
* <span data-ttu-id="d3fe5-121">Site Recovery 可以從內部部署至 Azure 取得的輸送量</span><span class="sxs-lookup"><span data-stu-id="d3fe5-121">The throughput that Site Recovery can get from on-premises to Azure</span></span>
* <span data-ttu-id="d3fe5-122">根據在給定時間量內完成初始複寫所需的預估頻寬，要劃分批次的 VM 數目</span><span class="sxs-lookup"><span data-stu-id="d3fe5-122">The number of VMs to batch, based on the estimated bandwidth to complete initial replication in a given amount of time</span></span>

<span data-ttu-id="d3fe5-123">**Azure 基礎結構需求**</span><span class="sxs-lookup"><span data-stu-id="d3fe5-123">**Azure infrastructure requirements**</span></span>

* <span data-ttu-id="d3fe5-124">每部 VM 的儲存體類型 (標準或進階儲存體帳戶) 需求</span><span class="sxs-lookup"><span data-stu-id="d3fe5-124">The storage type (standard or premium storage account) requirement for each VM</span></span>
* <span data-ttu-id="d3fe5-125">為了複寫所要設定的標準和進階儲存體帳戶總數</span><span class="sxs-lookup"><span data-stu-id="d3fe5-125">The total number of standard and premium storage accounts to be set up for replication</span></span>
* <span data-ttu-id="d3fe5-126">以 Azure 儲存體指引為基礎的儲存體帳戶命名建議</span><span class="sxs-lookup"><span data-stu-id="d3fe5-126">Storage-account naming suggestions, based on Azure Storage guidance</span></span>
* <span data-ttu-id="d3fe5-127">所有 VM 的儲存體帳戶放置</span><span class="sxs-lookup"><span data-stu-id="d3fe5-127">The storage-account placement for all VMs</span></span>
* <span data-ttu-id="d3fe5-128">在訂用帳戶上進行測試容錯移轉或容錯移轉之前所要設定的 Azure 核心數目</span><span class="sxs-lookup"><span data-stu-id="d3fe5-128">The number of Azure cores to be set up before test failover or failover on the subscription</span></span>
* <span data-ttu-id="d3fe5-129">每個內部部署 VM 的 Azure VM 建議大小</span><span class="sxs-lookup"><span data-stu-id="d3fe5-129">The Azure VM-recommended size for each on-premises VM</span></span>

<span data-ttu-id="d3fe5-130">**內部部署基礎結構需求**</span><span class="sxs-lookup"><span data-stu-id="d3fe5-130">**On-premises infrastructure requirements**</span></span>
* <span data-ttu-id="d3fe5-131">要在內部部署環境中部署的必要組態伺服器和處理序伺服器數目</span><span class="sxs-lookup"><span data-stu-id="d3fe5-131">The required number of configuration servers and process servers to be deployed on-premises</span></span>

>[!IMPORTANT]
>
><span data-ttu-id="d3fe5-132">因為使用量可能會隨時間增加，所以執行所有上述工具計算時，假設工作負載特性中的成長因子為 30%，並使用所有剖析計量 (讀/寫 IOPS、 變換等等) 的第 95 個百分位數值。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-132">Because usage is likely to increase over time, all the preceding tool calculations are performed assuming a 30 percent growth factor in  workload characteristics, and using a 95th percentile value of all the profiling metrics (read/write IOPS, churn, and so forth).</span></span> <span data-ttu-id="d3fe5-133">這兩個元素 (成長因子和百分位數計算) 皆可設定。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-133">Both of these elements (growth factor and percentile calculation) are configurable.</span></span> <span data-ttu-id="d3fe5-134">若要深入了解成長因子，請參閱「成長因子考量」一節。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-134">To learn more about growth factor, see the "Growth-factor considerations" section.</span></span> <span data-ttu-id="d3fe5-135">若要深入了解百分位數值，請參閱「用於計算的百分位數值」一節。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-135">To learn more about  percentile value, see the "Percentile value used for the calculation" section.</span></span>
>

## <a name="requirements"></a><span data-ttu-id="d3fe5-136">需求</span><span class="sxs-lookup"><span data-stu-id="d3fe5-136">Requirements</span></span>
<span data-ttu-id="d3fe5-137">此工具有兩個主要階段：剖析和報告產生。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-137">The tool has two main phases: profiling and report generation.</span></span> <span data-ttu-id="d3fe5-138">另外還有第三個選項：只計算輸送量。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-138">There is also a third option to calculate throughput only.</span></span> <span data-ttu-id="d3fe5-139">下表列出起始剖析 / 輸送量測量之伺服器的需求：</span><span class="sxs-lookup"><span data-stu-id="d3fe5-139">The requirements for the server from which the profiling and throughput measurement is initiated are presented in the following table:</span></span>

| <span data-ttu-id="d3fe5-140">伺服器需求</span><span class="sxs-lookup"><span data-stu-id="d3fe5-140">Server requirement</span></span> | <span data-ttu-id="d3fe5-141">說明</span><span class="sxs-lookup"><span data-stu-id="d3fe5-141">Description</span></span>|
|---|---|
|<span data-ttu-id="d3fe5-142">剖析和輸送量測量</span><span class="sxs-lookup"><span data-stu-id="d3fe5-142">Profiling and throughput measurement</span></span>| <ul><li><span data-ttu-id="d3fe5-143">作業系統：Microsoft Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="d3fe5-143">Operating system: Microsoft Windows Server 2012 R2</span></span><br><span data-ttu-id="d3fe5-144">(最好至少符合[組態伺服器的大小建議](https://aka.ms/asr-v2a-on-prem-components))</span><span class="sxs-lookup"><span data-stu-id="d3fe5-144">(ideally matching at least the [size recommendations for the configuration server](https://aka.ms/asr-v2a-on-prem-components))</span></span></li><li><span data-ttu-id="d3fe5-145">機器組態︰8 個 vCPU、16 GB RAM、300 GB HDD</span><span class="sxs-lookup"><span data-stu-id="d3fe5-145">Machine configuration: 8 vCPUs, 16 GB RAM, 300 GB HDD</span></span></li><li>[<span data-ttu-id="d3fe5-146">Microsoft .NET Framework 4.5</span><span class="sxs-lookup"><span data-stu-id="d3fe5-146">Microsoft .NET Framework 4.5</span></span>](https://aka.ms/dotnet-framework-45)</li><li>[<span data-ttu-id="d3fe5-147">VMware vSphere PowerCLI 6.0 R3</span><span class="sxs-lookup"><span data-stu-id="d3fe5-147">VMware vSphere PowerCLI 6.0 R3</span></span>](https://aka.ms/download_powercli)</li><li>[<span data-ttu-id="d3fe5-148">適用於 Visual Studio 2012 的 Microsoft Visual C++ 可轉散發套件</span><span class="sxs-lookup"><span data-stu-id="d3fe5-148">Microsoft Visual C++ Redistributable for Visual Studio 2012</span></span>](https://aka.ms/vcplusplus-redistributable)</li><li><span data-ttu-id="d3fe5-149">透過網際網路從這部伺服器存取 Azure</span><span class="sxs-lookup"><span data-stu-id="d3fe5-149">Internet access to Azure from this server</span></span></li><li><span data-ttu-id="d3fe5-150">Azure 儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="d3fe5-150">Azure storage account</span></span></li><li><span data-ttu-id="d3fe5-151">伺服器的系統管理員存取權</span><span class="sxs-lookup"><span data-stu-id="d3fe5-151">Administrator access on the server</span></span></li><li><span data-ttu-id="d3fe5-152">100 GB 的可用磁碟空間下限 (假設剖析平均各有 3 個磁碟的 1000 部 VM 30 天)</span><span class="sxs-lookup"><span data-stu-id="d3fe5-152">Minimum 100 GB of free disk space (assuming 1000 VMs with an average of three disks each, profiled for 30 days)</span></span></li><li><span data-ttu-id="d3fe5-153">VMware vCenter 統計資料層級設定應該設定為 2 或高層級</span><span class="sxs-lookup"><span data-stu-id="d3fe5-153">VMware vCenter statistics level settings should be set to 2 or high level</span></span></li><li><span data-ttu-id="d3fe5-154">允許連接埠 443：ASR 部署規劃工具使用此連接埠來連線至 vCenter 伺服器/ESXi 主機</span><span class="sxs-lookup"><span data-stu-id="d3fe5-154">Allow 443 port: ASR Deployment Planner uses this port to connect to vCenter server/ESXi host</span></span></ul></ul>|
| <span data-ttu-id="d3fe5-155">報告產生</span><span class="sxs-lookup"><span data-stu-id="d3fe5-155">Report generation</span></span> | <span data-ttu-id="d3fe5-156">具有 Microsoft Excel 2013 和更新版本的 Windows PC 或 Windows Server</span><span class="sxs-lookup"><span data-stu-id="d3fe5-156">A Windows PC or Windows Server with Microsoft Excel 2013 or later</span></span> |
| <span data-ttu-id="d3fe5-157">使用者權限</span><span class="sxs-lookup"><span data-stu-id="d3fe5-157">User permissions</span></span> | <span data-ttu-id="d3fe5-158">使用者帳戶的唯讀權限，在剖析期間用來存取 VMware vCenter Server/VMware vSphere ESXi 主機</span><span class="sxs-lookup"><span data-stu-id="d3fe5-158">Read-only permission for the user account that's used to access the VMware vCenter server/VMware vSphere ESXi host during profiling</span></span> |

> [!NOTE]
>
><span data-ttu-id="d3fe5-159">此工具只能剖析具有 VMDK 和 RDM 磁碟的 VM。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-159">The tool can profile only VMs with VMDK and RDM disks.</span></span> <span data-ttu-id="d3fe5-160">不能剖析具有 iSCSI 或 NFS 磁碟的 VM。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-160">It cannot profile VMs with iSCSI or NFS disks.</span></span> <span data-ttu-id="d3fe5-161">Site Recovery 支援 VMware 伺服器適用的 iSCSI 和 NFS 磁碟，但因為部署規劃工具不在客體內，而且只使用 vCenter 效能計數器進行剖析，所以此工具看不見這些磁碟類型。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-161">Site Recovery does support iSCSI and NFS disks for VMware servers but, because the deployment planner is not inside the guest and it profiles only by using vCenter performance counters, the tool does not have visibility into these disk types.</span></span>
>

## <a name="download-and-extract-the-public-preview"></a><span data-ttu-id="d3fe5-162">下載並解壓縮公開預覽版本</span><span class="sxs-lookup"><span data-stu-id="d3fe5-162">Download and extract the public preview</span></span>
1. <span data-ttu-id="d3fe5-163">下載最新版的 [Site Recovery Deployment Planner 公開預覽版本](https://aka.ms/asr-deployment-planner)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-163">Download the latest version of the [Site Recovery deployment planner public preview](https://aka.ms/asr-deployment-planner).</span></span>  
<span data-ttu-id="d3fe5-164">此工具封裝在 .zip 資料夾中。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-164">The tool is packaged in a .zip folder.</span></span> <span data-ttu-id="d3fe5-165">目前的工具版本僅支援 VMware 到 Azure 案例。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-165">The current version of the tool supports only the VMware-to-Azure scenario.</span></span>

2. <span data-ttu-id="d3fe5-166">從您要執行工具的位置，將 .zip 資料夾複製到 Windows Server。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-166">Copy the .zip folder to the Windows server from which you want to run the tool.</span></span>  
<span data-ttu-id="d3fe5-167">如果伺服器可存取網路以連線到保存要剖析之 VM 的 vCenter Server/vSphere ESXi 主機，您可以從 Windows Server 2012 R2 執行此工具。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-167">You can run the tool from Windows Server 2012 R2 if the server has network access to connect to the vCenter server/vSphere ESXi host that holds the VMs to be profiled.</span></span> <span data-ttu-id="d3fe5-168">不過，我們建議您在硬體設定符合[組態伺服器調整大小方針](https://aka.ms/asr-v2a-on-prem-components)的伺服器上執行此工具。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-168">However, we recommend that you run the tool on a server whose hardware configuration meets the [configuration server sizing guideline](https://aka.ms/asr-v2a-on-prem-components).</span></span> <span data-ttu-id="d3fe5-169">如果您已在內部部署環境部署 Site Recovery 元件，請從組態伺服器執行此工具。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-169">If you have already deployed Site Recovery components on-premises, run the tool from the configuration server.</span></span>

 <span data-ttu-id="d3fe5-170">我們建議執行此工具的伺服器具有與組態伺服器 (具備內建處理序伺服器) 相同的硬體組態。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-170">We recommend that you have the same hardware configuration as the configuration server (which has an in-built process server) on the server where you run the tool.</span></span> <span data-ttu-id="d3fe5-171">這種組態可確保工具報告的達成輸送量符合 Site Recovery 在複寫期間可達到的實際輸送量。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-171">Such a configuration ensures that the achieved throughput that the tool reports matches the actual throughput that Site Recovery can achieve during replication.</span></span> <span data-ttu-id="d3fe5-172">輸送量計算取決於伺服器可用的網路頻寬和伺服器的硬體組態 (CPU、儲存體等等)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-172">The throughput calculation depends on available network bandwidth on the server and hardware configuration (CPU, storage, and so forth) of the server.</span></span> <span data-ttu-id="d3fe5-173">如果您從任何其他伺服器執行此工具，則會計算從該伺服器至 Microsoft Azure 的輸送量。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-173">If you run the tool from any other server, the throughput is calculated from that server to Microsoft Azure.</span></span> <span data-ttu-id="d3fe5-174">此外，因為該伺服器的硬體組態可能會與組態伺服器不同，因為工具報告的達成輸送量可能不正確。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-174">Also, because the hardware configuration of the server might differ from that of the configuration server, the achieved throughput that the tool reports might be inaccurate.</span></span>

3. <span data-ttu-id="d3fe5-175">將 .zip 資料夾解壓縮。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-175">Extract the .zip folder.</span></span>  
<span data-ttu-id="d3fe5-176">此資料夾包含多個檔案和子資料夾。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-176">The folder contains multiple files and subfolders.</span></span> <span data-ttu-id="d3fe5-177">可執行檔是父資料夾中的 ASRDeploymentPlanner.exe。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-177">The executable file is ASRDeploymentPlanner.exe in the parent folder.</span></span>

    <span data-ttu-id="d3fe5-178">範例：</span><span class="sxs-lookup"><span data-stu-id="d3fe5-178">Example:</span></span>  
    <span data-ttu-id="d3fe5-179">將 .zip 檔案複製到 E:\ 磁碟機並將它解壓縮。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-179">Copy the .zip file to E:\ drive and extract it.</span></span>
   <span data-ttu-id="d3fe5-180">E:\ASR Deployment Planner-Preview_v1.2.zip</span><span class="sxs-lookup"><span data-stu-id="d3fe5-180">E:\ASR Deployment Planner-Preview_v1.2.zip</span></span>

    <span data-ttu-id="d3fe5-181">E:\ASR Deployment Planner-Preview_v1.2\ ASR Deployment Planner-Preview_v1.2\ ASRDeploymentPlanner.exe</span><span class="sxs-lookup"><span data-stu-id="d3fe5-181">E:\ASR Deployment Planner-Preview_v1.2\ ASR Deployment Planner-Preview_v1.2\ ASRDeploymentPlanner.exe</span></span>

## <a name="capabilities"></a><span data-ttu-id="d3fe5-182">功能</span><span class="sxs-lookup"><span data-stu-id="d3fe5-182">Capabilities</span></span>
<span data-ttu-id="d3fe5-183">您可以在下列任何模式 (共三種) 中執行命令列工具 (ASRDeploymentPlanner.exe)：</span><span class="sxs-lookup"><span data-stu-id="d3fe5-183">You can run the command-line tool (ASRDeploymentPlanner.exe) in any of the following three modes:</span></span>

1. <span data-ttu-id="d3fe5-184">剖析</span><span class="sxs-lookup"><span data-stu-id="d3fe5-184">Profiling</span></span>  
2. <span data-ttu-id="d3fe5-185">報告產生</span><span class="sxs-lookup"><span data-stu-id="d3fe5-185">Report generation</span></span>
3. <span data-ttu-id="d3fe5-186">取得輸送量</span><span class="sxs-lookup"><span data-stu-id="d3fe5-186">Get throughput</span></span>

<span data-ttu-id="d3fe5-187">首先，在剖析模式中執行此工具，以蒐集 VM 資料變換和 IOPS。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-187">First, run the tool in profiling mode to gather VM data churn and IOPS.</span></span> <span data-ttu-id="d3fe5-188">接著，執行此工具來產生報告，以找出網路頻寬和儲存體需求。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-188">Next, run the tool to generate the report to find the network bandwidth and storage requirements.</span></span>

## <a name="profiling"></a><span data-ttu-id="d3fe5-189">剖析</span><span class="sxs-lookup"><span data-stu-id="d3fe5-189">Profiling</span></span>
<span data-ttu-id="d3fe5-190">在剖析模式中，Deployment Planner 工具會連接到 vCenter Server/vSphere ESXi 主機，以收集有關 VM 的效能資料。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-190">In profiling mode, the deployment planner tool connects to the vCenter server/vSphere ESXi host to collect performance data about the VM.</span></span>

* <span data-ttu-id="d3fe5-191">剖析作業不會直接連線到生產 VM，所以不會影響其效能。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-191">Profiling does not affect the performance of the production VMs, because no direct connection is made to them.</span></span> <span data-ttu-id="d3fe5-192">所有效能資料都是從 vCenter Server/vSphere ESXi 主機收集而來。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-192">All performance data is collected from the vCenter server/vSphere ESXi host.</span></span>
* <span data-ttu-id="d3fe5-193">為了確保剖析對伺服器造成的影響微不足道，工具會每隔 15 分鐘查詢一次 VCenter Server/vSphere EXSi 主機。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-193">To ensure that there is a negligible impact on the server because of profiling, the tool queries the vCenter server/vSphere ESXi host once every 15 minutes.</span></span> <span data-ttu-id="d3fe5-194">此查詢間隔並不會損及剖析精確度，因為此工具會儲存每分鐘的效能計數器資料。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-194">This query interval does not compromise profiling accuracy, because the tool stores every minute’s performance counter data.</span></span>

### <a name="create-a-list-of-vms-to-profile"></a><span data-ttu-id="d3fe5-195">建立要剖析的 VM 清單</span><span class="sxs-lookup"><span data-stu-id="d3fe5-195">Create a list of VMs to profile</span></span>
<span data-ttu-id="d3fe5-196">首先，您需有要分析的 VM 清單。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-196">First, you need a list of the VMs to be profiled.</span></span> <span data-ttu-id="d3fe5-197">您可以在下列程序中使用 VMware vSphere PowerCLI 命令，取得 vCenter Server 或 vSphere ESXi 主機上的所有 VM 名稱。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-197">You can get all the names of VMs on a vCenter server/vSphere ESXi host by using the VMware vSphere PowerCLI commands in the following procedure.</span></span> <span data-ttu-id="d3fe5-198">或者，您可以列出您想要以手動方式剖析的好記 VM 名稱 / IP 位址。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-198">Alternatively, you can list in a file the friendly names or IP addresses of the VMs that you want to profile manually.</span></span>

1. <span data-ttu-id="d3fe5-199">登入已安裝 VMware vSphere PowerCLI 的 VM。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-199">Sign in to the VM that VMware vSphere PowerCLI is installed in.</span></span>
2. <span data-ttu-id="d3fe5-200">開啟 VMware vSphere PowerCLI 主控台。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-200">Open the VMware vSphere PowerCLI console.</span></span>
3. <span data-ttu-id="d3fe5-201">確保已啟用指令碼的執行原則。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-201">Ensure that the execution policy is enabled for the script.</span></span> <span data-ttu-id="d3fe5-202">如果已停用，請在系統管理員模式中啟動 VMware vSphere PowerCLI 主控台，然後執行下列命令來啟用它︰</span><span class="sxs-lookup"><span data-stu-id="d3fe5-202">If it is disabled, launch the VMware vSphere PowerCLI console in administrator mode, and then enable it by running the following command:</span></span>

            Set-ExecutionPolicy –ExecutionPolicy AllSigned

4. <span data-ttu-id="d3fe5-203">如果 Connect-VIServer 無法辨識為 Cmdlet 名稱，您可能需要執行下列命令。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-203">You may optionly need to run the following command if Connect-VIServer is not recognized as the name of cmdlet.</span></span>
 
            Add-PSSnapin VMware.VimAutomation.Core 

5. <span data-ttu-id="d3fe5-204">若要取得 vCenter Server/vSphere ESXi 主機的所有 VM 名稱並將此清單儲存在 .txt 檔案中，請執行此處所列的兩個命令。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-204">To get all the names of VMs on a vCenter server/vSphere ESXi host and store the list in a .txt file, run the two commands listed here.</span></span>
<span data-ttu-id="d3fe5-205">以您的輸入取代 &lsaquo;server name&rsaquo;、&lsaquo;user name&rsaquo;、&lsaquo;password&rsaquo;、&lsaquo;outputfile.txt&rsaquo;。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-205">Replace &lsaquo;server name&rsaquo;, &lsaquo;user name&rsaquo;, &lsaquo;password&rsaquo;, &lsaquo;outputfile.txt&rsaquo;; with your inputs.</span></span>

            Connect-VIServer -Server <server name> -User <user name> -Password <password>

            Get-VM |  Select Name | Sort-Object -Property Name >  <outputfile.txt>

6. <span data-ttu-id="d3fe5-206">在「記事本」中開啟輸出檔案，然後將您要剖析的所有 VM 名稱複製到另一個檔案 (例如 ProfileVMList.txt)，每一行一個 VM 名稱。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-206">Open the output file in Notepad, and then copy the names of all VMs that you want to profile to another file (for example, ProfileVMList.txt), one VM name per line.</span></span> <span data-ttu-id="d3fe5-207">此檔案可做為命令列工具之 -VMListFile 參數的輸入。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-207">This file is used as input to the *-VMListFile* parameter of the command-line tool.</span></span>

    ![Deployment Planner 中的 VM 名稱清單](./media/site-recovery-deployment-planner/profile-vm-list.png)

### <a name="start-profiling"></a><span data-ttu-id="d3fe5-209">開始剖析</span><span class="sxs-lookup"><span data-stu-id="d3fe5-209">Start profiling</span></span>
<span data-ttu-id="d3fe5-210">取得要剖析的 VM 清單之後，您可以在剖析模式中執行此工具。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-210">After you have the list of VMs to be profiled, you can run the tool in profiling mode.</span></span> <span data-ttu-id="d3fe5-211">以下是要在剖析模式中執行之工具的必要和選擇性參數清單。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-211">Here is the list of mandatory and optional parameters of the tool to run in profiling mode.</span></span>

<span data-ttu-id="d3fe5-212">ASRDeploymentPlanner.exe -Operation StartProfiling /?</span><span class="sxs-lookup"><span data-stu-id="d3fe5-212">ASRDeploymentPlanner.exe -Operation StartProfiling /?</span></span>

| <span data-ttu-id="d3fe5-213">參數名稱</span><span class="sxs-lookup"><span data-stu-id="d3fe5-213">Parameter name</span></span> | <span data-ttu-id="d3fe5-214">說明</span><span class="sxs-lookup"><span data-stu-id="d3fe5-214">Description</span></span> |
|---|---|
| <span data-ttu-id="d3fe5-215">-Operation</span><span class="sxs-lookup"><span data-stu-id="d3fe5-215">-Operation</span></span> | <span data-ttu-id="d3fe5-216">StartProfiling</span><span class="sxs-lookup"><span data-stu-id="d3fe5-216">StartProfiling</span></span> |
| <span data-ttu-id="d3fe5-217">-Server</span><span class="sxs-lookup"><span data-stu-id="d3fe5-217">-Server</span></span> | <span data-ttu-id="d3fe5-218">要剖析其 VM 之 vCenter Server/vSphere ESXi 主機的完整網域名稱或 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-218">The fully qualified domain name or IP address of the vCenter server/vSphere ESXi host whose VMs are to be profiled.</span></span>|
| <span data-ttu-id="d3fe5-219">-User</span><span class="sxs-lookup"><span data-stu-id="d3fe5-219">-User</span></span> | <span data-ttu-id="d3fe5-220">用於連線至 vCenter Server/vSphere ESXi 主機的使用者名稱。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-220">The user name to connect to the vCenter server/vSphere ESXi host.</span></span> <span data-ttu-id="d3fe5-221">使用者必須至少具備唯讀存取權限。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-221">The user needs to have read-only access, at minimum.</span></span>|
| <span data-ttu-id="d3fe5-222">-VMListFile</span><span class="sxs-lookup"><span data-stu-id="d3fe5-222">-VMListFile</span></span> | <span data-ttu-id="d3fe5-223">包含要剖析之 VM 清單的檔案。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-223">The file that contains the list of VMs to be profiled.</span></span> <span data-ttu-id="d3fe5-224">此檔案路徑可以是絕對或相對路徑。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-224">The file path can be absolute or relative.</span></span> <span data-ttu-id="d3fe5-225">此檔案的每一行應包含一個 VM 名稱/IP 位址。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-225">The file should contain one VM name/IP address per line.</span></span> <span data-ttu-id="d3fe5-226">檔案中指定的虛擬機器名稱應該與 vCenter Server/vSphere ESXi 主機上的 VM 名稱相同。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-226">Virtual machine name specified in the file should be the same as the VM name on the vCenter server/vSphere ESXi host.</span></span><br><span data-ttu-id="d3fe5-227">例如，VMList.txt 檔案包含下列 VM︰</span><span class="sxs-lookup"><span data-stu-id="d3fe5-227">For example, the file VMList.txt contains the following VMs:</span></span><ul><li><span data-ttu-id="d3fe5-228">virtual_machine_A</span><span class="sxs-lookup"><span data-stu-id="d3fe5-228">virtual_machine_A</span></span></li><li><span data-ttu-id="d3fe5-229">10.150.29.110</span><span class="sxs-lookup"><span data-stu-id="d3fe5-229">10.150.29.110</span></span></li><li><span data-ttu-id="d3fe5-230">virtual_machine_B</span><span class="sxs-lookup"><span data-stu-id="d3fe5-230">virtual_machine_B</span></span></li><ul> |
| <span data-ttu-id="d3fe5-231">-NoOfDaysToProfile</span><span class="sxs-lookup"><span data-stu-id="d3fe5-231">-NoOfDaysToProfile</span></span> | <span data-ttu-id="d3fe5-232">要執行剖析的天數。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-232">The number of days for which profiling is to be run.</span></span> <span data-ttu-id="d3fe5-233">建議您執行剖析 15 天以上，以確保觀察到指定期間內您環境中的工作負載模式，並用來提供精確的建議。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-233">We recommend that you run profiling for more than 15 days to ensure that the workload pattern in your environment over the specified period is observed and used to provide an accurate recommendation.</span></span> |
| <span data-ttu-id="d3fe5-234">-Directory</span><span class="sxs-lookup"><span data-stu-id="d3fe5-234">-Directory</span></span> | <span data-ttu-id="d3fe5-235">(選用) 用來儲存剖析期間所產生之剖析資料的通用命名慣例 (UNC) 或本機目錄路徑。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-235">(Optional) The universal naming convention (UNC) or local directory path to store profiling data generated during profiling.</span></span> <span data-ttu-id="d3fe5-236">如果未指定目錄名稱，目前路徑下名為 'ProfiledData' 的目錄將會做為預設目錄。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-236">If a directory name is not given, the directory named ‘ProfiledData’ under the current path will be used as the default directory.</span></span> |
| <span data-ttu-id="d3fe5-237">-Password</span><span class="sxs-lookup"><span data-stu-id="d3fe5-237">-Password</span></span> | <span data-ttu-id="d3fe5-238">(選用) 用來連線至 vCenter Server/vSphere ESXi 主機的密碼。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-238">(Optional) The password to use to connect to the vCenter server/vSphere ESXi host.</span></span> <span data-ttu-id="d3fe5-239">如果現在未指定密碼，系統將會在命令執行時提示您輸入密碼。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-239">If you do not specify one now, you will be prompted for it when the command is executed.</span></span>|
| <span data-ttu-id="d3fe5-240">-StorageAccountName</span><span class="sxs-lookup"><span data-stu-id="d3fe5-240">-StorageAccountName</span></span> | <span data-ttu-id="d3fe5-241">(選用) 儲存體帳戶名稱，用於找出從內部部署至 Azure 的資料複寫可達成的輸送量。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-241">(Optional) The storage-account name that's used to find the throughput achievable for replication of data from on-premises to Azure.</span></span> <span data-ttu-id="d3fe5-242">此工具會將測試資料上傳到此儲存體帳戶，以計算輸送量。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-242">The tool uploads test data to this storage account to calculate throughput.</span></span>|
| <span data-ttu-id="d3fe5-243">-StorageAccountKey</span><span class="sxs-lookup"><span data-stu-id="d3fe5-243">-StorageAccountKey</span></span> | <span data-ttu-id="d3fe5-244">(選用) 用來存取儲存體帳戶的儲存體帳戶金鑰。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-244">(Optional) The storage-account key that's used to access the storage account.</span></span> <span data-ttu-id="d3fe5-245">移至 Azure 入口網站 > 儲存體帳戶 > <儲存體帳戶名稱> > 設定 > 存取金鑰 > Key1 (或傳統儲存體帳戶的主要存取金鑰)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-245">Go to the Azure portal > Storage accounts > <*Storage account name*> > Settings > Access Keys > Key1 (or primary access key for classic storage account).</span></span> |
| <span data-ttu-id="d3fe5-246">-Environment</span><span class="sxs-lookup"><span data-stu-id="d3fe5-246">-Environment</span></span> | <span data-ttu-id="d3fe5-247">(選擇性) 這是您的目標 Azure 儲存體帳戶環境。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-247">(optional) This is your target Azure Storage account environment.</span></span> <span data-ttu-id="d3fe5-248">可以是下列三個值之一 - AzureCloud、AzureUSGovernment、AzureChinaCloud。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-248">This can be one of three values - AzureCloud,AzureUSGovernment, AzureChinaCloud.</span></span> <span data-ttu-id="d3fe5-249">預設值為 AzureCloud。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-249">Default is AzureCloud.</span></span> <span data-ttu-id="d3fe5-250">當目標 Azure 區域是 Azure US Government 或 Azure China 雲端時，請使用此參數。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-250">Use the parameter when your target Azure region is either Azure US Government or Azure China clouds.</span></span> |


<span data-ttu-id="d3fe5-251">我們建議至少剖析您的 VM 15 到 30 天。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-251">We recommend that you profile your VMs for at least 15 to 30 days.</span></span> <span data-ttu-id="d3fe5-252">在剖析期間，ASRDeploymentPlanner.exe 會持續執行。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-252">During the profiling period, ASRDeploymentPlanner.exe keeps running.</span></span> <span data-ttu-id="d3fe5-253">此工具會採用剖析階段輸入 (以天為單位)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-253">The tool takes profiling time input in days.</span></span> <span data-ttu-id="d3fe5-254">如果您想要剖析數小時或數分鐘的時間，以便進行工具的快速測試，在公開預覽版本中，您必須將時間轉換成相等的天數量值。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-254">If you want to profile for few hours or minutes for a quick test of the tool, in the public preview, you will need to convert the time into the equivalent measure of days.</span></span> <span data-ttu-id="d3fe5-255">例如，若要剖析 30 分鐘，輸入必須是 30/(60*24) = 0.021 天。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-255">For example, to profile for 30 minutes, the input must be 30/(60*24) = 0.021 days.</span></span> <span data-ttu-id="d3fe5-256">允許的最小剖析時間為 30 分鐘。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-256">The minimum allowed profiling time is 30 minutes.</span></span>

<span data-ttu-id="d3fe5-257">在剖析期間，您可以選擇性地傳送儲存體帳戶名稱和金鑰，以尋找 Site Recovery 可在從組態伺服器或處理序伺服器複寫至 Azure 時達成的輸送量。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-257">During profiling, you can optionally pass a storage-account name and key to find the throughput that Site Recovery can achieve at the time of replication from the configuration server or process server to Azure.</span></span> <span data-ttu-id="d3fe5-258">如果未在剖析期間傳送儲存體帳戶名稱和金鑰，此工具就不會計算可達成的輸送量。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-258">If the storage-account name and key are not passed during profiling, the tool does not calculate achievable throughput.</span></span>

<span data-ttu-id="d3fe5-259">您可以針對不同組的 VM 執行多個工具執行個體。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-259">You can run multiple instances of the tool for various sets of VMs.</span></span> <span data-ttu-id="d3fe5-260">確保 VM 名稱不會在任何剖析集中重複出現。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-260">Ensure that the VM names are not repeated in any of the profiling sets.</span></span> <span data-ttu-id="d3fe5-261">例如，若已剖析 10 部 VM (VM1 到 VM10)，而在幾天後您想要剖析另外 5 部 VM (VM11 到 VM15)，您可以針對第二組的 VM (VM11 到 VM15) 從另一個命令列主控台執行此工具。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-261">For example, if you have profiled ten VMs (VM1 through VM10) and after few days you want to profile another five VMs (VM11 through VM15), you can run the tool from another command-line console for the second set of VMs (VM11 through VM15).</span></span> <span data-ttu-id="d3fe5-262">確保第二組的 VM 沒有任何來自第一個剖析執行個體的 VM 名稱，或您使用不同的輸出目錄進行第二次執行。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-262">Ensure that the second set of VMs do not have any VM names from the first profiling instance or you use a different output directory for the second run.</span></span> <span data-ttu-id="d3fe5-263">如有兩個工具執行個體用於剖析相同的 VM 並使用相同的輸出目錄，所產生的報告則會不正確。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-263">If two instances of the tool are used for profiling the same VMs and use the same output directory, the generated report will be incorrect.</span></span>

<span data-ttu-id="d3fe5-264">在剖析作業開始時會擷取一次 VM 組態，並儲存在名為 VMDetailList.xml 的檔案。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-264">VM configurations are captured once at the beginning of the profiling operation and stored in a file called VMDetailList.xml.</span></span> <span data-ttu-id="d3fe5-265">產生報告時會使用此資訊。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-265">This information is used when the report is generated.</span></span> <span data-ttu-id="d3fe5-266">從剖析開始到結尾，不會擷取任何 VM 組態變更 (例如，增加的核心、磁碟或 NIC 數目)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-266">Any change in VM configuration (for example, an increased number of cores, disks, or NICs) from the beginning to the end of profiling is not captured.</span></span> <span data-ttu-id="d3fe5-267">如果有剖析的 VM 組態在剖析過程中發生變更，在公開預覽版本中，以下是在產生報告時取得最新 VM 詳細資料的因應措施：</span><span class="sxs-lookup"><span data-stu-id="d3fe5-267">If a profiled VM configuration has changed during the course of profiling, in the public preview, here is the workaround to get latest VM details when generating the report:</span></span>

* <span data-ttu-id="d3fe5-268">備份 VMdetailList.xml，然後從其目前的位置刪除此檔案。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-268">Back up VMdetailList.xml, and delete the file from its current location.</span></span>
* <span data-ttu-id="d3fe5-269">在報告產生時傳遞 -User 和 -Password 引數。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-269">Pass -User and -Password arguments at the time of report generation.</span></span>

<span data-ttu-id="d3fe5-270">剖析命令會在剖析目錄中產生數個檔案。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-270">The profiling command generates several files in the profiling directory.</span></span> <span data-ttu-id="d3fe5-271">請勿刪除任何檔案，因為這麼做會影響報告產生。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-271">Do not delete any of the files, because doing so affects report generation.</span></span>

#### <a name="example-1-profile-vms-for-30-days-and-find-the-throughput-from-on-premises-to-azure"></a><span data-ttu-id="d3fe5-272">範例 1︰剖析 VM 30 天，並找出從內部部署至 Azure 的輸送量</span><span class="sxs-lookup"><span data-stu-id="d3fe5-272">Example 1: Profile VMs for 30 days, and find the throughput from on-premises to Azure</span></span>
```
ASRDeploymentPlanner.exe -Operation StartProfiling -Directory “E:\vCenter1_ProfiledData” -Server vCenter1.contoso.com -VMListFile “E:\vCenter1_ProfiledData\ProfileVMList1.txt”  -NoOfDaysToProfile  30  -User vCenterUser1 -StorageAccountName  asrspfarm1 -StorageAccountKey Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==
```

#### <a name="example-2-profile-vms-for-15-days"></a><span data-ttu-id="d3fe5-273">範例 2︰剖析 VM 15 天</span><span class="sxs-lookup"><span data-stu-id="d3fe5-273">Example 2: Profile VMs for 15 days</span></span>

```
ASRDeploymentPlanner.exe -Operation StartProfiling -Directory “E:\vCenter1_ProfiledData” -Server vCenter1.contoso.com -VMListFile “E:\vCenter1_ProfiledData\ProfileVMList1.txt”  -NoOfDaysToProfile  15  -User vCenterUser1
```

#### <a name="example-3-profile-vms-for-1-hour-for-a-quick-test-of-the-tool"></a><span data-ttu-id="d3fe5-274">範例 3：剖析 VM 1 小時以便快速測試工具</span><span class="sxs-lookup"><span data-stu-id="d3fe5-274">Example 3: Profile VMs for 1 hour for a quick test of the tool</span></span>
```
ASRDeploymentPlanner.exe -Operation StartProfiling -Directory “E:\vCenter1_ProfiledData” -Server vCenter1.contoso.com -VMListFile “E:\vCenter1_ProfiledData\ProfileVMList1.txt”  -NoOfDaysToProfile  0.04  -User vCenterUser1
```

>[!NOTE]
>
>* <span data-ttu-id="d3fe5-275">如果此工具執行所在的伺服器已重新啟動或已當機，或如果您使用 Ctrl + C 關閉工具，則會保留剖析的資料。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-275">If the server that the tool is running on is rebooted or has crashed, or if you close the tool by using Ctrl + C, the profiled data is preserved.</span></span> <span data-ttu-id="d3fe5-276">不過，過去 15 分鐘的剖析資料有可能會遺失。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-276">However, there is a chance of missing the last 15 minutes of profiled data.</span></span> <span data-ttu-id="d3fe5-277">在這種情況下，請在伺服器開始備份之後，於剖析模式中重新執行此工具。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-277">In such an instance, rerun the tool in profiling mode after the server restarts.</span></span>
>* <span data-ttu-id="d3fe5-278">傳遞儲存體帳戶名稱和金鑰時，此工具會在剖析的最後一個步驟測量輸送量。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-278">When the storage-account name and key are passed, the tool measures the throughput at the last step of profiling.</span></span> <span data-ttu-id="d3fe5-279">如果此工具在剖析完成前關閉，則不會計算輸送量。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-279">If the tool is closed before profiling is completed, the throughput is not calculated.</span></span> <span data-ttu-id="d3fe5-280">若要在產生報告之前找到輸送量，您可以從命令列主控台執行 GetThroughput 作業。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-280">To find the throughput before generating the report, you can run the GetThroughput operation from the command-line console.</span></span> <span data-ttu-id="d3fe5-281">否則，產生的報告不會包含輸送量資訊。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-281">Otherwise, the generated report will not contain the throughput information.</span></span>


## <a name="generate-a-report"></a><span data-ttu-id="d3fe5-282">產生報告</span><span class="sxs-lookup"><span data-stu-id="d3fe5-282">Generate a report</span></span>
<span data-ttu-id="d3fe5-283">此工具會產生啟用巨集的 Microsoft Excel 檔案 (XLSM) 做為報告輸出，其中摘要說明所有的部署建議。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-283">The tool generates a macro-enabled Microsoft Excel file (XLSM file) as the report output, which summarizes all the deployment recommendations.</span></span> <span data-ttu-id="d3fe5-284">此報告的名稱為 DeploymentPlannerReport_<唯一數值識別碼>.xlsm 且置於指定的目錄中。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-284">The report is named DeploymentPlannerReport_<*unique numeric identifier*>.xlsm and placed in the specified directory.</span></span>

<span data-ttu-id="d3fe5-285">剖析完成後，您可以在報告產生模式中執行工具。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-285">After profiling is complete, you can run the tool in report-generation mode.</span></span> <span data-ttu-id="d3fe5-286">下表包含要在報告產生模式中執行之必要和選用工具參數的清單。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-286">The following table contains a list of mandatory and optional tool parameters to run in report-generation mode.</span></span>

`ASRDeploymentPlanner.exe -Operation GenerateReport /?`

|<span data-ttu-id="d3fe5-287">參數名稱</span><span class="sxs-lookup"><span data-stu-id="d3fe5-287">Parameter name</span></span> | <span data-ttu-id="d3fe5-288">說明</span><span class="sxs-lookup"><span data-stu-id="d3fe5-288">Description</span></span> |
|-|-|
| <span data-ttu-id="d3fe5-289">-Operation</span><span class="sxs-lookup"><span data-stu-id="d3fe5-289">-Operation</span></span> | <span data-ttu-id="d3fe5-290">GenerateReport</span><span class="sxs-lookup"><span data-stu-id="d3fe5-290">GenerateReport</span></span> |
| <span data-ttu-id="d3fe5-291">-Server</span><span class="sxs-lookup"><span data-stu-id="d3fe5-291">-Server</span></span> |  <span data-ttu-id="d3fe5-292">將產生報告之已剖析 VM 所在的 vCenter/vSphere Server 完整網域名稱或 IP 位址 (使用您在剖析時所用的相同名稱或 IP 位址)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-292">The vCenter/vSphere server fully qualified domain name or IP address (use the same name or IP address that you used at the time of profiling) where the profiled VMs whose report is to be generated are located.</span></span> <span data-ttu-id="d3fe5-293">請注意，如果您在剖析時使用 vCenter Server，則無法使用 vSphere Server 產生報告，反之亦然。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-293">Note that if you used a vCenter server at the time of profiling, you cannot use a vSphere server for report generation, and vice-versa.</span></span>|
| <span data-ttu-id="d3fe5-294">-VMListFile</span><span class="sxs-lookup"><span data-stu-id="d3fe5-294">-VMListFile</span></span> | <span data-ttu-id="d3fe5-295">包含要產生報告之已剖析 VM 清單的檔案。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-295">The file that contains the list of profiled VMs that the report is to be generated for.</span></span> <span data-ttu-id="d3fe5-296">此檔案路徑可以是絕對或相對路徑。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-296">The file path can be absolute or relative.</span></span> <span data-ttu-id="d3fe5-297">此檔案的每一行應包含一個 VM 名稱或 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-297">The file should contain one VM name or IP address per line.</span></span> <span data-ttu-id="d3fe5-298">檔案中指定的 VM 名稱應該與 vCenter Server/vSphere ESXi 主機上的 VM 名稱相同，並符合剖析期間所用的名稱。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-298">The VM names that are specified in the file should be the same as the VM names on the vCenter server/vSphere ESXi host, and match what was used during profiling.</span></span>|
| <span data-ttu-id="d3fe5-299">-Directory</span><span class="sxs-lookup"><span data-stu-id="d3fe5-299">-Directory</span></span> | <span data-ttu-id="d3fe5-300">(選用) 儲存剖析資料 (剖析期間產生的檔案) 的 UNC 或本機目錄路徑。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-300">(Optional) The UNC or local directory path where the profiled data (files generated during profiling) is stored.</span></span> <span data-ttu-id="d3fe5-301">產生報告時需要這項資料。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-301">This data is required for generating the report.</span></span> <span data-ttu-id="d3fe5-302">如未指定，將會使用 ‘ProfiledData’ 目錄。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-302">If a name isn't specified, ‘ProfiledData’ directory will be used.</span></span> |
| <span data-ttu-id="d3fe5-303">-GoalToCompleteIR</span><span class="sxs-lookup"><span data-stu-id="d3fe5-303">-GoalToCompleteIR</span></span> | <span data-ttu-id="d3fe5-304">(選用) 必須完成已剖析 VM 之初始複寫的時數。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-304">(Optional) The number of hours in which the initial replication of the profiled VMs needs to be completed.</span></span> <span data-ttu-id="d3fe5-305">所產生的報告會提供可以在指定的時間內完成初始複寫的 VM 數目。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-305">The generated report provides the number of VMs for which initial replication can be completed in the specified time.</span></span> <span data-ttu-id="d3fe5-306">預設值為 72 小時。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-306">The default is 72 hours.</span></span> |
| <span data-ttu-id="d3fe5-307">-User</span><span class="sxs-lookup"><span data-stu-id="d3fe5-307">-User</span></span> | <span data-ttu-id="d3fe5-308">(選用) 用於連線至 vCenter/vSphere Server 的使用者名稱。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-308">(Optional) The user name to use to connect to the vCenter/vSphere server.</span></span> <span data-ttu-id="d3fe5-309">此名稱用來擷取 VM 的最新組態資訊，例如磁碟數目、核心數目和 NIC 數目)，以使用於報告中。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-309">The name is used to fetch the latest configuration information of the VMs, such as the number of disks, number of cores, and number of NICs, to use in the report.</span></span> <span data-ttu-id="d3fe5-310">如未提供此名稱，則會使用在剖析開始時收集的組態資訊。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-310">If the name isn't provided, the configuration information collected at the beginning of the profiling kickoff is used.</span></span> |
| <span data-ttu-id="d3fe5-311">-Password</span><span class="sxs-lookup"><span data-stu-id="d3fe5-311">-Password</span></span> | <span data-ttu-id="d3fe5-312">(選用) 用來連線至 vCenter Server/vSphere ESXi 主機的密碼。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-312">(Optional) The password to use to connect to the vCenter server/vSphere ESXi host.</span></span> <span data-ttu-id="d3fe5-313">如果未將此密碼指定為一個參數，系統將會在命令執行時提示您稍後輸入密碼。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-313">If the password isn't specified as a parameter, you will be prompted for it later when the command is executed.</span></span> |
| <span data-ttu-id="d3fe5-314">-DesiredRPO</span><span class="sxs-lookup"><span data-stu-id="d3fe5-314">-DesiredRPO</span></span> | <span data-ttu-id="d3fe5-315">(選用) 以分鐘為單位的所需復原點目標。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-315">(Optional) The desired recovery point objective, in minutes.</span></span> <span data-ttu-id="d3fe5-316">預設值是 15 分鐘。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-316">The default is 15 minutes.</span></span>|
| <span data-ttu-id="d3fe5-317">-Bandwidth</span><span class="sxs-lookup"><span data-stu-id="d3fe5-317">-Bandwidth</span></span> | <span data-ttu-id="d3fe5-318">頻寬 (以 Mbps 為單位)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-318">Bandwidth in Mbps.</span></span> <span data-ttu-id="d3fe5-319">此參數用來計算指定的頻寬可達成的 RPO。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-319">The parameter to use to calculate the RPO that can be achieved for the specified bandwidth.</span></span> |
| <span data-ttu-id="d3fe5-320">-StartDate</span><span class="sxs-lookup"><span data-stu-id="d3fe5-320">-StartDate</span></span> | <span data-ttu-id="d3fe5-321">(選用) 採用 MM-DD-YYYY:HH:MM 格式 (24 小時制) 的開始日期和時間。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-321">(Optional) The start date and time in MM-DD-YYYY:HH:MM (24-hour format).</span></span> <span data-ttu-id="d3fe5-322">StartDate 必須與 EndDate 一起指定。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-322">*StartDate* must be specified along with *EndDate*.</span></span> <span data-ttu-id="d3fe5-323">若已指定 StartDate，則會針對在 StartDate 與 EndDate 之間收集的剖析資料產生報告。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-323">When StartDate is specified, the report is generated for the profiled data that's collected between StartDate and EndDate.</span></span> |
| <span data-ttu-id="d3fe5-324">-EndDate</span><span class="sxs-lookup"><span data-stu-id="d3fe5-324">-EndDate</span></span> | <span data-ttu-id="d3fe5-325">(選用) 採用 MM-DD-YYYY:HH:MM 格式 (24 小時制) 的結束日期和時間。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-325">(Optional) The end date and time in MM-DD-YYYY:HH:MM (24-hour format).</span></span> <span data-ttu-id="d3fe5-326">EndDate 必須與 StartDate 一起指定。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-326">*EndDate* must be specified along with *StartDate*.</span></span> <span data-ttu-id="d3fe5-327">若已指定 EndDate，則會針對在 StartDate 與 EndDate 之間收集的剖析資料產生報告。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-327">When EndDate is specified, the report is generated for the profiled data that's collected between StartDate and EndDate.</span></span> |
| <span data-ttu-id="d3fe5-328">-GrowthFactor</span><span class="sxs-lookup"><span data-stu-id="d3fe5-328">-GrowthFactor</span></span> | <span data-ttu-id="d3fe5-329">(選用) 以百分比表示的成長因子。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-329">(Optional) The growth factor, expressed as a percentage.</span></span> <span data-ttu-id="d3fe5-330">預設值為 30%。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-330">The default is 30 percent.</span></span> |
| <span data-ttu-id="d3fe5-331">-UseManagedDisks</span><span class="sxs-lookup"><span data-stu-id="d3fe5-331">-UseManagedDisks</span></span> | <span data-ttu-id="d3fe5-332">(選擇性) UseManagedDisks - 是/否。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-332">(Optional) UseManagedDisks - Yes/No.</span></span> <span data-ttu-id="d3fe5-333">預設值為 [是]。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-333">Default is Yes.</span></span> <span data-ttu-id="d3fe5-334">計算可以放入單一儲存體帳戶的虛擬機器數目時，請考慮在受控磁碟而不是非受控磁碟上進行虛擬機器的容錯移轉/測試容錯移轉。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-334">The number of virtual machines that can be placed into a single storage account is calculated considering whether Failover/Test failover of virtual machines is done on managed disk instead of unmanaged disk.</span></span> |

#### <a name="example-1-generate-a-report-with-default-values-when-the-profiled-data-is-on-the-local-drive"></a><span data-ttu-id="d3fe5-335">範例 1︰當剖析的資料位於本機磁碟機時，使用預設值來產生報告</span><span class="sxs-lookup"><span data-stu-id="d3fe5-335">Example 1: Generate a report with default values when the profiled data is on the local drive</span></span>
```
ASRDeploymentPlanner.exe -Operation GenerateReport -Server vCenter1.contoso.com -Directory “\\PS1-W2K12R2\vCenter1_ProfiledData” -VMListFile “\\PS1-W2K12R2\vCenter1_ProfiledData\ProfileVMList1.txt”
```

#### <a name="example-2-generate-a-report-when-the-profiled-data-is-on-a-remote-server"></a><span data-ttu-id="d3fe5-336">範例 2︰當剖析的資料位於遠端伺服器時產生報告</span><span class="sxs-lookup"><span data-stu-id="d3fe5-336">Example 2: Generate a report when the profiled data is on a remote server</span></span>
<span data-ttu-id="d3fe5-337">您應具備遠端目錄的讀取/寫入存取權。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-337">You should have read/write access on the remote directory.</span></span>
```
ASRDeploymentPlanner.exe -Operation GenerateReport -Server vCenter1.contoso.com -Directory “\\PS1-W2K12R2\vCenter1_ProfiledData” -VMListFile “\\PS1-W2K12R2\vCenter1_ProfiledData\ProfileVMList1.txt”
```

#### <a name="example-3-generate-a-report-with-a-specific-bandwidth-and-goal-to-complete-ir-within-specified-time"></a><span data-ttu-id="d3fe5-338">範例 3︰使用特定頻寬和目標來產生報告，以在指定的時間內完成 IR</span><span class="sxs-lookup"><span data-stu-id="d3fe5-338">Example 3: Generate a report with a specific bandwidth and goal to complete IR within specified time</span></span>
```
ASRDeploymentPlanner.exe -Operation GenerateReport -Server vCenter1.contoso.com -Directory “E:\vCenter1_ProfiledData” -VMListFile “E:\vCenter1_ProfiledData\ProfileVMList1.txt” -Bandwidth 100 -GoalToCompleteIR 24
```

#### <a name="example-4-generate-a-report-with-a-5-percent-growth-factor-instead-of-the-default-30-percent"></a><span data-ttu-id="d3fe5-339">範例 4︰使用 5% (而非預設值 30%) 的成長因子來產生報告</span><span class="sxs-lookup"><span data-stu-id="d3fe5-339">Example 4: Generate a report with a 5 percent growth factor instead of the default 30 percent</span></span>
```
ASRDeploymentPlanner.exe -Operation GenerateReport -Server vCenter1.contoso.com -Directory “E:\vCenter1_ProfiledData” -VMListFile “E:\vCenter1_ProfiledData\ProfileVMList1.txt” -GrowthFactor 5
```

#### <a name="example-5-generate-a-report-with-a-subset-of-profiled-data"></a><span data-ttu-id="d3fe5-340">範例 5︰使用剖析資料子集來產生報告</span><span class="sxs-lookup"><span data-stu-id="d3fe5-340">Example 5: Generate a report with a subset of profiled data</span></span>
<span data-ttu-id="d3fe5-341">例如，您有 30 天的剖析資料，而只想要產生 20 天的報告。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-341">For example, you have 30 days of profiled data and want to generate a report for only 20 days.</span></span>
```
ASRDeploymentPlanner.exe -Operation GenerateReport -Server vCenter1.contoso.com -Directory “E:\vCenter1_ProfiledData” -VMListFile “E:\vCenter1_ProfiledData\ProfileVMList1.txt” -StartDate  01-10-2017:12:30 -EndDate 01-19-2017:12:30
```

#### <a name="example-6-generate-a-report-for-5-minute-rpo"></a><span data-ttu-id="d3fe5-342">範例 6：針對 5 分鐘 RPO 產生報告</span><span class="sxs-lookup"><span data-stu-id="d3fe5-342">Example 6: Generate a report for 5-minute RPO</span></span>
```
ASRDeploymentPlanner.exe -Operation GenerateReport -Server vCenter1.contoso.com -Directory “E:\vCenter1_ProfiledData” -VMListFile “E:\vCenter1_ProfiledData\ProfileVMList1.txt”  -DesiredRPO 5
```

## <a name="percentile-value-used-for-the-calculation"></a><span data-ttu-id="d3fe5-343">用來計算的百分位數值</span><span class="sxs-lookup"><span data-stu-id="d3fe5-343">Percentile value used for the calculation</span></span>
<span data-ttu-id="d3fe5-344">**工具在產生報告時，會使用剖析期間所收集之效能計量的哪些預設百分位數值？**</span><span class="sxs-lookup"><span data-stu-id="d3fe5-344">**What default percentile value of the performance metrics collected during profiling does the tool use when it generates a report?**</span></span>

<span data-ttu-id="d3fe5-345">此工具預設為在所有 VM 的剖析期間收集之讀/寫 IOPS、寫入 IOPS 及資料變換的第 95 個百分位數值。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-345">The tool defaults to the 95th percentile values of read/write IOPS, write IOPS, and data churn that are collected during profiling of all the VMs.</span></span> <span data-ttu-id="d3fe5-346">此計量可確保您的 VM 可以看到第 100 個百分位數尖峰，因為暫存事件不會用來判斷您的目標儲存體帳戶和來源頻寬需求。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-346">This metric ensures that the 100th percentile spike your VMs might see because of temporary events is not used to determine your target storage-account and source-bandwidth requirements.</span></span> <span data-ttu-id="d3fe5-347">例如，暫存事件可能是一天執行一次的備份作業、定期資料庫檢索或分析報告產生活動，或其他類似的短期時間點事件。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-347">For example, a temporary event might be a backup job running once a day, a periodic database indexing or analytics report-generation activity, or other similar short-lived, point-in-time events.</span></span>

<span data-ttu-id="d3fe5-348">使用第 95 個百分位數值可提供實際工作負載特性的真實情況，並且讓您在 Azure 上執行這些工作負載時獲得最佳效能。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-348">Using 95th percentile values gives a true picture of real workload characteristics, and it gives you the best performance when the workloads are running on Azure.</span></span> <span data-ttu-id="d3fe5-349">我們不希望您會需要變更這個數字。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-349">We do not anticipate that you would need to change this number.</span></span> <span data-ttu-id="d3fe5-350">如果您變更此數字 (例如，變更為第 90 個百分位數)，您可以更新預設資料夾中的組態檔 ASRDeploymentPlanner.exe.config 並加以儲存，以產生現有剖析資料的新報告。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-350">If you do change the value (to the 90th percentile, for example), you can update the configuration file *ASRDeploymentPlanner.exe.config* in the default folder and save it to generate a new report on the existing profiled data.</span></span>
```
<add key="WriteIOPSPercentile" value="95" />      
<add key="ReadWriteIOPSPercentile" value="95" />      
<add key="DataChurnPercentile" value="95" />
```

## <a name="growth-factor-considerations"></a><span data-ttu-id="d3fe5-351">成長因子考量</span><span class="sxs-lookup"><span data-stu-id="d3fe5-351">Growth-factor considerations</span></span>
<span data-ttu-id="d3fe5-352">**規劃部署時為何應考量成長因子？**</span><span class="sxs-lookup"><span data-stu-id="d3fe5-352">**Why should I consider growth factor when I plan deployments?**</span></span>

<span data-ttu-id="d3fe5-353">假設使用量可能會隨著時間增加，請務必考量您的工作負載特性成長。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-353">It is critical to account for growth in your workload characteristics, assuming a potential increase in usage over time.</span></span> <span data-ttu-id="d3fe5-354">防護就緒之後，如果工作負載特性變更，在未停用並重新啟用保護的情況下，您無法切換到不同的儲存體帳戶進行保護。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-354">After protection is in place, if your workload characteristics change, you cannot switch to a different storage account for protection without disabling and re-enabling the protection.</span></span>

<span data-ttu-id="d3fe5-355">例如，假設您的 VM 位於置於標準儲存體複寫帳戶中。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-355">For example, let's say that today your VM fits in a standard storage replication account.</span></span> <span data-ttu-id="d3fe5-356">接下來的三個月，可能會發生幾項變更︰</span><span class="sxs-lookup"><span data-stu-id="d3fe5-356">Over the next three months, several changes are likely to occur:</span></span>

* <span data-ttu-id="d3fe5-357">在 VM 上執行之應用程式的使用者數目會增加。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-357">The number of users of the application that runs on the VM will increase.</span></span>
* <span data-ttu-id="d3fe5-358">結果在 VM 上增加的變換會要求 VM 移至進階儲存體，Site Recovery 複寫才可以保持一致。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-358">The resulting increased churn on the VM will require the VM to go to premium storage so that Site Recovery replication can keep pace.</span></span>
* <span data-ttu-id="d3fe5-359">因此，您必須對進階儲存體帳戶停用並重新啟用保護。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-359">Consequently, you will have to disable and re-enable protection to a premium storage account.</span></span>

<span data-ttu-id="d3fe5-360">強烈建議您在規劃部署期間規劃成長，而預設值為 30%。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-360">We strongly recommend that you plan for growth during deployment planning and while the default value is 30 percent.</span></span> <span data-ttu-id="d3fe5-361">您最瞭解您的應用程式使用量模式和成長預測，而且可以在產生報告時相應變更此數字。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-361">You are the expert on your application usage pattern and growth projections, and you can change this number accordingly while generating a report.</span></span> <span data-ttu-id="d3fe5-362">此外，您可以使用不同的成長因子，針對相同的剖析資料產生多份報告，判斷哪些目標儲存體和來源頻寬建議最適合您。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-362">Moreover, you can  generate multiple reports with various growth factors with the same profiled data and determine what target storage and source bandwidth recommendations work best for you.</span></span>

<span data-ttu-id="d3fe5-363">產生的 Microsoft Excel 報告包含下列資訊：</span><span class="sxs-lookup"><span data-stu-id="d3fe5-363">The generated Microsoft Excel report contains the following information:</span></span>

* [<span data-ttu-id="d3fe5-364">輸入</span><span class="sxs-lookup"><span data-stu-id="d3fe5-364">Input</span></span>](site-recovery-deployment-planner.md#input)
* [<span data-ttu-id="d3fe5-365">建議</span><span class="sxs-lookup"><span data-stu-id="d3fe5-365">Recommendations</span></span>](site-recovery-deployment-planner.md#recommendations-with-desired-rpo-as-input)
* [<span data-ttu-id="d3fe5-366">建議頻寬輸入</span><span class="sxs-lookup"><span data-stu-id="d3fe5-366">Recommendations-Bandwidth Input</span></span>](site-recovery-deployment-planner.md#recommendations-with-available-bandwidth-as-input)
* [<span data-ttu-id="d3fe5-367">VM<->儲存體放置</span><span class="sxs-lookup"><span data-stu-id="d3fe5-367">VM<->Storage Placement</span></span>](site-recovery-deployment-planner.md#vm-storage-placement)
* [<span data-ttu-id="d3fe5-368">相容的 VM</span><span class="sxs-lookup"><span data-stu-id="d3fe5-368">Compatible VMs</span></span>](site-recovery-deployment-planner.md#compatible-vms)
* [<span data-ttu-id="d3fe5-369">不相容的 VM</span><span class="sxs-lookup"><span data-stu-id="d3fe5-369">Incompatible VMs</span></span>](site-recovery-deployment-planner.md#incompatible-vms)

![Deployment Planner](./media/site-recovery-deployment-planner/dp-report.png)

## <a name="get-throughput"></a><span data-ttu-id="d3fe5-371">取得輸送量</span><span class="sxs-lookup"><span data-stu-id="d3fe5-371">Get throughput</span></span>

<span data-ttu-id="d3fe5-372">若要預估 Site Recovery 在複寫期間可以達成的輸送量 (從內部部署至 Azure)，請以 GetThroughput 模式執行工具。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-372">To estimate the throughput that Site Recovery can achieve from on-premises to Azure during replication, run the tool in GetThroughput mode.</span></span> <span data-ttu-id="d3fe5-373">此工具會計算來自工具執行所在伺服器的輸送量。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-373">The tool calculates the throughput from the server that the tool is running on.</span></span> <span data-ttu-id="d3fe5-374">在理想情況下，此伺服器是以組態伺服器調整大小指南為基礎。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-374">Ideally, this server is based on the configuration server sizing guide.</span></span> <span data-ttu-id="d3fe5-375">如果您已在內部部署環境部署 Site Recovery 基礎結構元件，請在組態伺服器上執行此工具。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-375">If you have already deployed Site Recovery infrastructure components on-premises, run the tool on the configuration server.</span></span>

<span data-ttu-id="d3fe5-376">開啟命令列主控台，然後移至 Site Recovery 部署規劃工具資料夾。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-376">Open a command-line console, and go to the Site Recovery deployment planning tool folder.</span></span> <span data-ttu-id="d3fe5-377">使用下列參數執行 ASRDeploymentPlanner.exe。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-377">Run ASRDeploymentPlanner.exe with following parameters.</span></span>

`ASRDeploymentPlanner.exe -Operation GetThroughput /?`

|<span data-ttu-id="d3fe5-378">參數名稱</span><span class="sxs-lookup"><span data-stu-id="d3fe5-378">Parameter name</span></span> | <span data-ttu-id="d3fe5-379">說明</span><span class="sxs-lookup"><span data-stu-id="d3fe5-379">Description</span></span> |
|-|-|
| <span data-ttu-id="d3fe5-380">-Operation</span><span class="sxs-lookup"><span data-stu-id="d3fe5-380">-Operation</span></span> | <span data-ttu-id="d3fe5-381">GetThroughput</span><span class="sxs-lookup"><span data-stu-id="d3fe5-381">GetThroughput</span></span> |
| <span data-ttu-id="d3fe5-382">-Directory</span><span class="sxs-lookup"><span data-stu-id="d3fe5-382">-Directory</span></span> | <span data-ttu-id="d3fe5-383">(選用) 儲存剖析資料 (剖析期間產生的檔案) 的 UNC 或本機目錄路徑。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-383">(Optional) The UNC or local directory path where the profiled data (files generated during profiling) is stored.</span></span> <span data-ttu-id="d3fe5-384">產生報告時需要這項資料。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-384">This data is required for generating the report.</span></span> <span data-ttu-id="d3fe5-385">如未指定目錄，則會使用 ‘ProfiledData’ 目錄。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-385">If a directory name is not specified, ‘ProfiledData’ directory is used.</span></span> |
| <span data-ttu-id="d3fe5-386">-StorageAccountName</span><span class="sxs-lookup"><span data-stu-id="d3fe5-386">-StorageAccountName</span></span> | <span data-ttu-id="d3fe5-387">儲存體帳戶名稱，用於找出從內部部署至 Azure 的資料複寫所耗用的頻寬。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-387">The storage-account name that's used to find the bandwidth consumed for replication of data from on-premises to Azure.</span></span> <span data-ttu-id="d3fe5-388">此工具會將測試資料上傳到此儲存體帳戶，以找出所耗用的頻寬。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-388">The tool uploads test data to this storage account to find the bandwidth consumed.</span></span> |
| <span data-ttu-id="d3fe5-389">-StorageAccountKey</span><span class="sxs-lookup"><span data-stu-id="d3fe5-389">-StorageAccountKey</span></span> | <span data-ttu-id="d3fe5-390">用來存取儲存體帳戶的儲存體帳戶金鑰。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-390">The storage-account key that's used to access the storage account.</span></span> <span data-ttu-id="d3fe5-391">移至 Azure 入口網站 > 儲存體帳戶 > <儲存體帳戶名稱> > 設定 > 存取金鑰 > Key1 (或傳統儲存體帳戶的主要存取金鑰)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-391">Go to the Azure portal > Storage accounts > <*Storage account name*> > Settings > Access Keys > Key1 (or a primary access key for a classic storage account).</span></span> |
| <span data-ttu-id="d3fe5-392">-VMListFile</span><span class="sxs-lookup"><span data-stu-id="d3fe5-392">-VMListFile</span></span> | <span data-ttu-id="d3fe5-393">包含要剖析之 VM 清單的檔案，以便計算所耗用的頻寬。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-393">The file that contains the list of VMs to be profiled for calculating the bandwidth consumed.</span></span> <span data-ttu-id="d3fe5-394">此檔案路徑可以是絕對或相對路徑。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-394">The file path can be absolute or relative.</span></span> <span data-ttu-id="d3fe5-395">此檔案的每一行應包含一個 VM 名稱/IP 位址。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-395">The file should contain one VM name/IP address per line.</span></span> <span data-ttu-id="d3fe5-396">檔案中指定的 VM 名稱應該與 vCenter Server/vSphere ESXi 主機上的 VM 名稱相同。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-396">The VM names specified in the file should be the same as the VM names on the vCenter server/vSphere ESXi host.</span></span><br><span data-ttu-id="d3fe5-397">例如，VMList.txt 檔案包含下列 VM︰</span><span class="sxs-lookup"><span data-stu-id="d3fe5-397">For example, the file VMList.txt contains the following VMs:</span></span><ul><li><span data-ttu-id="d3fe5-398">VM_A</span><span class="sxs-lookup"><span data-stu-id="d3fe5-398">VM_A</span></span></li><li><span data-ttu-id="d3fe5-399">10.150.29.110</span><span class="sxs-lookup"><span data-stu-id="d3fe5-399">10.150.29.110</span></span></li><li><span data-ttu-id="d3fe5-400">VM_B</span><span class="sxs-lookup"><span data-stu-id="d3fe5-400">VM_B</span></span></li></ul>|
| <span data-ttu-id="d3fe5-401">-Environment</span><span class="sxs-lookup"><span data-stu-id="d3fe5-401">-Environment</span></span> | <span data-ttu-id="d3fe5-402">(選擇性) 這是您的目標 Azure 儲存體帳戶環境。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-402">(optional) This is your target Azure Storage account environment.</span></span> <span data-ttu-id="d3fe5-403">可以是下列三個值之一 - AzureCloud、AzureUSGovernment、AzureChinaCloud。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-403">This can be one of three values - AzureCloud,AzureUSGovernment, AzureChinaCloud.</span></span> <span data-ttu-id="d3fe5-404">預設值為 AzureCloud。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-404">Default is AzureCloud.</span></span> <span data-ttu-id="d3fe5-405">當目標 Azure 區域是 Azure US Government 或 Azure China 雲端時，請使用此參數。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-405">Use the parameter when your target Azure region is either Azure US Government or Azure China clouds.</span></span> |

<span data-ttu-id="d3fe5-406">此工具會在指定的目錄中建立數個 64MB asrvhdfile<#>.vhd 檔案 (其中 # 是檔案數目)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-406">The tool creates several 64-MB asrvhdfile<#>.vhd files (where "#" is the number of files) on the specified directory.</span></span> <span data-ttu-id="d3fe5-407">此工具會將這些檔案上傳至儲存體帳戶，以找出輸送量。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-407">The tool uploads the files to the storage account to find the throughput.</span></span> <span data-ttu-id="d3fe5-408">測量輸送量之後，此工具會從儲存體帳戶和本機伺服器中刪除所有這類檔案。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-408">After the throughput is measured, the tool deletes all the files from the storage account and from the local server.</span></span> <span data-ttu-id="d3fe5-409">如果此工具在計算輸送量時因為任何原因而終止，它不會從儲存體或本機伺服器中刪除檔案。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-409">If the tool is terminated for any reason while it is calculating throughput, it doesn't delete the files from the storage or from the local server.</span></span> <span data-ttu-id="d3fe5-410">您必須手動加以刪除。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-410">You will have to delete them manually.</span></span>

<span data-ttu-id="d3fe5-411">輸送量會在指定的時間點進行測量，而這是 Site Recovery 可以在複寫期間內達成的最大輸送量 (前提是所有其他因子維持不變)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-411">The throughput is measured at a specified point in time, and it is the maximum throughput that Site Recovery can achieve during replication, provided that all other factors remain the same.</span></span> <span data-ttu-id="d3fe5-412">例如，如果任何應用程式開始在相同網路上耗用更多頻寬，則複寫期間的實際輸送量會有所不同。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-412">For example, if any application starts consuming more bandwidth on the same network, the actual throughput varies during replication.</span></span> <span data-ttu-id="d3fe5-413">如果您是從組態伺服器執行 GetThroughput 命令，此工具不會留意任何受保護的 VM 和進行中的複寫作業。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-413">If you are running the GetThroughput command from a configuration server, the tool is unaware of any protected VMs and ongoing replication.</span></span> <span data-ttu-id="d3fe5-414">如果 GetThroughput 作業在受保護的 VM 有高度資料變換時執行，則測量的輸送量結果會不同。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-414">The result of the measured throughput is different if the GetThroughput operation is run when the protected VMs have high data churn.</span></span> <span data-ttu-id="d3fe5-415">建議在剖析期間的各種時間點執行此工具，以了解可在不同時間達成的輸送量等級。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-415">We recommend that you run the tool at various points in time during profiling to understand what throughput levels can be achieved at various times.</span></span> <span data-ttu-id="d3fe5-416">在報告中，此工具會顯示最後測量的輸送量。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-416">In the report, the tool shows the last measured throughput.</span></span>

### <a name="example"></a><span data-ttu-id="d3fe5-417">範例</span><span class="sxs-lookup"><span data-stu-id="d3fe5-417">Example</span></span>
```
ASRDeploymentPlanner.exe -Operation GetThroughput -Directory  E:\vCenter1_ProfiledData -VMListFile E:\vCenter1_ProfiledData\ProfileVMList1.txt  -StorageAccountName  asrspfarm1 -StorageAccountKey by8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==
```

>[!NOTE]
>
> <span data-ttu-id="d3fe5-418">在具有與組態伺服器相同之儲存體和 CPU 特性的伺服器上執行此工具。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-418">Run the tool on a server that has the same storage and CPU characteristics as the configuration server.</span></span>
>
> <span data-ttu-id="d3fe5-419">如需複寫，請設定建議的頻寬，以符合當時的 100% RPO。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-419">For replication, set the recommended bandwidth to meet the RPO 100 percent of the time.</span></span> <span data-ttu-id="d3fe5-420">在設定適當的頻寬之後，如果您未看到此工具所報告的達成輸送量有任何增加，請執行下列作業︰</span><span class="sxs-lookup"><span data-stu-id="d3fe5-420">After you set the right bandwidth, if you don’t see an increase in the achieved throughput reported by the tool, do the following:</span></span>
>
>  1. <span data-ttu-id="d3fe5-421">檢查以判斷是否有任何網路服務品質 (QoS) 會限制 Site Recovery 輸送量。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-421">Check to determine whether there is any network Quality of Service (QoS) that is limiting Site Recovery throughput.</span></span>
>
>  2. <span data-ttu-id="d3fe5-422">檢查以判斷 Site Recovery 保存庫是否位於支援的最近實體 Microsoft Azure 區域，以縮小網路延遲。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-422">Check to determine whether your Site Recovery vault is in the nearest physically supported Microsoft Azure region to minimize network latency.</span></span>
>
>  3. <span data-ttu-id="d3fe5-423">檢查本機儲存體特性，以判斷是否可以改善硬體 (例如 HDD 變成 SSD)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-423">Check your local storage characteristics to determine whether you can improve the hardware (for example, HDD to SSD).</span></span>
>
>  4. <span data-ttu-id="d3fe5-424">變更處理序伺服器中的 Site Recovery 設定，以[增加用於複寫的網路頻寬](./site-recovery-plan-capacity-vmware.md#control-network-bandwidth)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-424">Change the Site Recovery settings in the process server to [increase the amount of network bandwidth used for replication](./site-recovery-plan-capacity-vmware.md#control-network-bandwidth).</span></span>

## <a name="recommendations-with-desired-rpo-as-input"></a><span data-ttu-id="d3fe5-425">建議以所需的 RPO 做為輸入</span><span class="sxs-lookup"><span data-stu-id="d3fe5-425">Recommendations with desired RPO as input</span></span>

### <a name="profiled-data"></a><span data-ttu-id="d3fe5-426">剖析的資料</span><span class="sxs-lookup"><span data-stu-id="d3fe5-426">Profiled data</span></span>

![Deployment Planner 中已剖析的資料檢視](./media/site-recovery-deployment-planner/profiled-data-period.png)

<span data-ttu-id="d3fe5-428">**剖析的資料期間**：執行剖析的期間。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-428">**Profiled data period**: The period during which the profiling was run.</span></span> <span data-ttu-id="d3fe5-429">根據預設，此工具會在計算中包含所有剖析的資料，除非在報告產生期間使用 StartDate 和 EndDate 選項來針對特定期間產生此報告。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-429">By default, the tool includes all profiled data in the calculation, unless it generates the report for a specific period by using StartDate and EndDate options during report generation.</span></span>

<span data-ttu-id="d3fe5-430">**伺服器名稱**：為其產生 VM 報告之 VMware vCenter 或 ESXi 主機的名稱或 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-430">**Server Name**: The name or IP address of the VMware vCenter or ESXi host whose VMs’ report is generated.</span></span>

<span data-ttu-id="d3fe5-431">**所需的 RPO**：您部署的復原點目標。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-431">**Desired RPO**: The recovery point objective for your deployment.</span></span> <span data-ttu-id="d3fe5-432">預設會計算 RPO 值 15、30 和 60 分鐘所需的網路頻寬。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-432">By default, the required network bandwidth is calculated for RPO values of 15, 30, and 60 minutes.</span></span> <span data-ttu-id="d3fe5-433">根據選取項目，在工作表上更新受影響的值。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-433">Based on the selection, the affected values are updated on the sheet.</span></span> <span data-ttu-id="d3fe5-434">如果您在產生報告時使用了 DesiredRPOinMin 參數，該值會顯示於所需 RPO 結果中。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-434">If you have used the *DesiredRPOinMin* parameter while generating the report, that value is shown in the Desired RPO result.</span></span>

### <a name="profiling-overview"></a><span data-ttu-id="d3fe5-435">剖析概觀</span><span class="sxs-lookup"><span data-stu-id="d3fe5-435">Profiling overview</span></span>

![Deployment Planner 中的剖析結果](./media/site-recovery-deployment-planner/profiling-overview.png)

<span data-ttu-id="d3fe5-437">**剖析的虛擬機器總數**：可取得其剖析資料的 VM 總數。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-437">**Total Profiled Virtual Machines**: The total number of VMs whose profiled data is available.</span></span> <span data-ttu-id="d3fe5-438">如果 VMListFile 包含任何未剖析的 VM 名稱，則這些 VM 不會納入報告產生考量並從剖析的 VM 總計數中排除。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-438">If the VMListFile has names of any VMs which were not profiled, those VMs are not considered in the report generation and are excluded from the total profiled VMs count.</span></span>

<span data-ttu-id="d3fe5-439">**相容的虛擬機器**：可以使用 Site Recovery 受 Azure 保護的 VM 數目。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-439">**Compatible Virtual Machines**: The number of VMs that can be protected to Azure by using Site Recovery.</span></span> <span data-ttu-id="d3fe5-440">這是相容的 VM 總數，系統會計算其所需的網路頻寬、儲存體帳戶數目、Azure 核心數目以及組態伺服器和額外處理序伺服器數目。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-440">It is the total number of compatible VMs for which the required network bandwidth, number of storage accounts, number of Azure cores, and number of configuration servers and additional process servers are calculated.</span></span> <span data-ttu-id="d3fe5-441">在 [相容 VM] 區段中可取得每部相容 VM 的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-441">The details of every compatible VM are available in the "Compatible VMs" section.</span></span>

<span data-ttu-id="d3fe5-442">**不相容的虛擬機器**：可使用 Site recovery 保護之不相容的剖析 VM 數目。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-442">**Incompatible Virtual Machines**: The number of profiled VMs that are incompatible for protection with Site Recovery.</span></span> <span data-ttu-id="d3fe5-443">「不相容的 VM」一節會提到不相容的原因。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-443">The reasons for incompatibility are noted in the "Incompatible VMs" section.</span></span> <span data-ttu-id="d3fe5-444">如果 VMListFile 包含任何未剖析 VM 的名稱，則這些 VM 會從不相容的 VM 計數中排除。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-444">If the VMListFile has names of any VMs that were not profiled, those VMs are excluded from the incompatible VMs count.</span></span> <span data-ttu-id="d3fe5-445">這些 VM 會在「不相容的 VM」區段結尾列為「找不到資料」。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-445">These VMs are listed as "Data not found" at the end of the "Incompatible VMs" section.</span></span>

<span data-ttu-id="d3fe5-446">**所需 RPO**：以分鐘為單位的所需復原點目標。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-446">**Desired RPO**: Your desired recovery point objective, in minutes.</span></span> <span data-ttu-id="d3fe5-447">此報告會針對三個 RPO 值而產生：15 (預設值)、30 和 60 分鐘。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-447">The report is generated for three RPO values: 15 (default), 30, and 60 minutes.</span></span> <span data-ttu-id="d3fe5-448">報告中的頻寬建議會隨著您在工作表右上方的 [所需的 RPO] 下拉式清單中選取的項目變更。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-448">The bandwidth recommendation in the report is changed based on your selection in the Desired RPO drop-down list at the top right of the sheet.</span></span> <span data-ttu-id="d3fe5-449">如果您已使用 -DesiredRPO 參數以自訂值產生報告，這個自訂值將會顯示為 [所需的 RPO] 下拉式清單中的預設值。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-449">If you have generated the report by using the *-DesiredRPO* parameter with a custom value, this custom value will show as the default in the Desired RPO drop-down list.</span></span>

### <a name="required-network-bandwidth-mbps"></a><span data-ttu-id="d3fe5-450">所需的網路頻寬 (Mbps)</span><span class="sxs-lookup"><span data-stu-id="d3fe5-450">Required network bandwidth (Mbps)</span></span>

![Deployment Planner 中所需的網路頻寬](./media/site-recovery-deployment-planner/required-network-bandwidth.png)

<span data-ttu-id="d3fe5-452">**符合當時的 100% RPO︰**所要配置的建議頻寬 (以 Mbps 為單位)，以符合當時所需的 100% RPO。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-452">**To meet RPO 100 percent of the time:** The recommended bandwidth in Mbps to be allocated to meet your desired RPO 100 percent of the time.</span></span> <span data-ttu-id="d3fe5-453">此頻寬量必須專用於您所有相容 VM 的穩定狀態差異複寫，以避免任何 RPO 違規。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-453">This amount of bandwidth must be dedicated for steady-state delta replication of all your compatible VMs to avoid any RPO violations.</span></span>

<span data-ttu-id="d3fe5-454">**符合當時的 90% RPO**︰如果因為寬頻價格或任何其他原因，您無法設定符合當時所需 100% RPO 所需的頻寬，您可以選擇設定較低的頻寬，以符合當時所需的 90% RPO。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-454">**To meet RPO 90 percent of the time**: Because of broadband pricing or for any other reason, if you cannot set the bandwidth needed to meet your desired RPO 100 percent of the time, you can choose to go with a lower bandwidth setting that can meet your desired RPO 90 percent of the time.</span></span> <span data-ttu-id="d3fe5-455">若要了解設定此低頻寬的含意，報告提供了可預期之 RPO 違規次數和持續時間的假設分析。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-455">To understand the implications of setting this lower bandwidth, the report provides a what-if analysis on the number and duration of RPO violations to expect.</span></span>

<span data-ttu-id="d3fe5-456">**達成的輸送量**：來自您已對儲存體帳戶所在 Microsoft Azure 區域執行 GetThroughput 命令之伺服器的輸送量。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-456">**Achieved Throughput:** The throughput from the server on which you have run the GetThroughput command to the Microsoft Azure region where the storage account is located.</span></span> <span data-ttu-id="d3fe5-457">此輸送量指出當您使用 Site Recovery 保護相容 VM 時可達成的預估等級，前提是您的組態伺服器或處理序伺服器儲存體和網路特性仍與您執行此工具的伺服器相同。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-457">This throughput number indicates the estimated level that you can achieve when you protect the compatible VMs by using Site Recovery, provided that your configuration server or process server storage and network characteristics remain the same as that of the server from which you have run the tool.</span></span>

<span data-ttu-id="d3fe5-458">如需複寫，您應該設定建議的頻寬，以符合當時的 100% RPO。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-458">For replication, you should set the recommended bandwidth to meet the RPO 100 percent of the time.</span></span> <span data-ttu-id="d3fe5-459">在設定頻寬之後，如果您未看到此工具所報告的達成輸送量有任何增加，請執行下列作業︰</span><span class="sxs-lookup"><span data-stu-id="d3fe5-459">After you set the bandwidth, if you don’t see any increase in the achieved throughput, as reported by the tool, do the following:</span></span>

1. <span data-ttu-id="d3fe5-460">查看是否有任何網路服務品質 (QoS) 會限制 Site Recovery 輸送量。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-460">Check to see whether there is any network Quality of Service (QoS) that is limiting Site Recovery throughput.</span></span>

2. <span data-ttu-id="d3fe5-461">查看 Site Recovery 保存庫是否位於支援的最近實體 Microsoft Azure 區域，以縮小網路延遲。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-461">Check to see whether your Site Recovery vault is in the nearest physically supported Microsoft Azure region to minimize network latency.</span></span>

3. <span data-ttu-id="d3fe5-462">檢查本機儲存體特性，以判斷是否可以改善硬體 (例如 HDD 變成 SSD)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-462">Check your local storage characteristics to determine whether you can improve the hardware (for example, HDD to SSD).</span></span>

4. <span data-ttu-id="d3fe5-463">變更處理序伺服器中的 Site Recovery 設定，以[增加用於複寫的網路頻寬](./site-recovery-plan-capacity-vmware.md#control-network-bandwidth)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-463">Change the Site Recovery settings in the process server to [increase the amount network bandwidth used for replication](./site-recovery-plan-capacity-vmware.md#control-network-bandwidth).</span></span>

<span data-ttu-id="d3fe5-464">如果您在已有受保護 VM 的組態伺服器或處理序伺服器上執行此工具，請執行此工具數次。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-464">If you are running the tool on a configuration server or process server that already has protected VMs, run the tool a few times.</span></span> <span data-ttu-id="d3fe5-465">視當時正在處理的變換數量而定，達成的輸送量數字會隨之改變。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-465">The achieved throughput number changes depending on the amount of churn being processed at that point in time.</span></span>

<span data-ttu-id="d3fe5-466">對於所有企業 Site Recovery 部署，建議使用 [ExpressRoute](https://aka.ms/expressroute)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-466">For all enterprise Site Recovery deployments, we recommend that you use [ExpressRoute](https://aka.ms/expressroute).</span></span>

### <a name="required-storage-accounts"></a><span data-ttu-id="d3fe5-467">所需的儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="d3fe5-467">Required storage accounts</span></span>
<span data-ttu-id="d3fe5-468">下列圖表顯示保護所有相容 VM 所需的儲存體帳戶 (標準和進階) 總數。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-468">The following chart shows the total number of storage accounts (standard and premium) that are required to protect all the compatible VMs.</span></span> <span data-ttu-id="d3fe5-469">若要了解每個 VM 所要使用的儲存體帳戶，請參閱「VM 儲存體放置」一節。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-469">To learn which storage account to use for each VM, see the "VM-storage placement" section.</span></span>

![Deployment Planner 中所需的儲存體帳戶](./media/site-recovery-deployment-planner/required-azure-storage-accounts.png)

### <a name="required-number-of-azure-cores"></a><span data-ttu-id="d3fe5-471">所需的 Azure 核心數目</span><span class="sxs-lookup"><span data-stu-id="d3fe5-471">Required number of Azure cores</span></span>
<span data-ttu-id="d3fe5-472">此結果是在所有相容 VM 的容錯移轉或測試容錯移轉之前所要設定的核心總數。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-472">This result is the total number of cores to be set up before failover or test failover of all the compatible VMs.</span></span> <span data-ttu-id="d3fe5-473">如果訂用帳戶中可用的核心太少，Site Recovery 便無法在測試容錯移轉或容錯移轉時建立 VM。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-473">If too few cores are available in the subscription, Site Recovery fails to create VMs at the time of test failover or failover.</span></span>

![Deployment Planner 中所需的 Azure 核心數目](./media/site-recovery-deployment-planner/required-number-of-azure-cores.png)

### <a name="required-on-premises-infrastructure"></a><span data-ttu-id="d3fe5-475">所需的內部部署基礎結構</span><span class="sxs-lookup"><span data-stu-id="d3fe5-475">Required on-premises infrastructure</span></span>
<span data-ttu-id="d3fe5-476">此數字是為了足以保護所有相容的 VM，所要設定的組態伺服器與額外處理序伺服器總數。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-476">This figure is the total number of configuration servers and additional process servers to be configured that would suffice to protect all the compatible VMs.</span></span> <span data-ttu-id="d3fe5-477">視支援的[組態伺服器大小建議](https://aka.ms/asr-v2a-on-prem-components)而定，此工具可能會建議額外的伺服器。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-477">Depending on the supported [size recommendations for the configuration server](https://aka.ms/asr-v2a-on-prem-components), the tool might recommend additional servers.</span></span> <span data-ttu-id="d3fe5-478">建議是以每日變換或受保護 VM 數目上限中的較大者為基礎 (假設每部 VM 平均有三個磁碟)，無論在組態伺服器或額外處理序伺服器上何者先達到。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-478">The recommendation is based on the larger of either the per-day churn or the maximum number of protected VMs (assuming an average of three disks per VM), whichever is hit first on the configuration server or the additional process server.</span></span> <span data-ttu-id="d3fe5-479">您可在「輸入」一節中找到每日變換總計和受保護磁碟總數的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-479">You'll find the details of total churn per day and total number of protected disks in the "Input" section.</span></span>

![Deployment Planner 中所需的內部部署基礎結構](./media/site-recovery-deployment-planner/required-on-premises-infrastructure.png)

### <a name="what-if-analysis"></a><span data-ttu-id="d3fe5-481">假設分析</span><span class="sxs-lookup"><span data-stu-id="d3fe5-481">What-if analysis</span></span>
<span data-ttu-id="d3fe5-482">此分析概述當您設定較低的頻寬，讓所需的 RPO 只符合當時的 90% 時，在剖析期間可發生多少次違規。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-482">This analysis outlines how many violations could occur during the profiling period when you set a lower bandwidth for the desired RPO to be met only 90 percent of the time.</span></span> <span data-ttu-id="d3fe5-483">任何指定的日期都可能發生一或多個 RPO 違規。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-483">One or more RPO violations can occur on any given day.</span></span> <span data-ttu-id="d3fe5-484">此圖會顯示當天的尖峰 RPO。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-484">The graph shows the peak RPO of the day.</span></span>
<span data-ttu-id="d3fe5-485">根據這項分析，您可以判斷指定的較低頻寬是否可接受所有天數的 RPO 違規次數和每日的尖峰 RPO 目標達成。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-485">Based on this analysis, you can decide if the number of RPO violations across all days and peak RPO hit per day is acceptable with the specified lower bandwidth.</span></span> <span data-ttu-id="d3fe5-486">如果可接受，您可以配置較低的頻寬進行複寫，否則依照建議配置較高的頻寬，以符合當時所需的 100% RPO。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-486">If it is acceptable, you can allocate the lower bandwidth for replication, else allocate the higher bandwidth as suggested to meet the desired RPO 100 percent of the time.</span></span>

![Deployment Planner 中的假設分析](./media/site-recovery-deployment-planner/what-if-analysis.png)

### <a name="recommended-vm-batch-size-for-initial-replication"></a><span data-ttu-id="d3fe5-488">初始複寫的建議 VM 批次大小</span><span class="sxs-lookup"><span data-stu-id="d3fe5-488">Recommended VM batch size for initial replication</span></span>
<span data-ttu-id="d3fe5-489">在這一節中，我們會建議可平行保護的 VM 數目，以使用建議的頻寬在 72 小時內完成初始複寫，進而符合設定階段所需的 100% RPO。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-489">In this section, we recommend the number of VMs that can be protected in parallel to complete the initial replication within 72 hours with the suggested bandwidth to meet desired RPO 100 percent of the time being set.</span></span> <span data-ttu-id="d3fe5-490">此值是可設定的值。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-490">This value is configurable value.</span></span> <span data-ttu-id="d3fe5-491">若要在產生報告階段變更此值，請使用 *GoalToCompleteIR* 參數。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-491">To change it at report-generation time, use the *GoalToCompleteIR* parameter.</span></span>

<span data-ttu-id="d3fe5-492">下面的圖形顯示各種頻寬值和計算的 VM 批次大小計數，以根據在所有相容 VM 中偵測到的平均 VM 大小，在 72 小時內完成初始複寫。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-492">The graph here shows a range of bandwidth values and a calculated VM batch size count to complete initial replication in 72 hours, based on the average detected VM size across all the compatible VMs.</span></span>

<span data-ttu-id="d3fe5-493">在公開預覽版本中，報告不會指定哪些 VM 應包含在某個批次中。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-493">In the public preview, the report does not specify which VMs should be included in a batch.</span></span> <span data-ttu-id="d3fe5-494">您可以使用「相容的 VM」區段中顯示的磁碟大小，找出每部 VM 的大小並選取某個批次的 VM，或根據已知的工作負載特性選取 VM。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-494">You can use the disk size shown in the "Compatible VMs" section to find each VM’s size and select them for a batch, or you can select the VMs based on known workload characteristics.</span></span> <span data-ttu-id="d3fe5-495">初始複寫的完成時間會根據實際 VM 磁碟大小、已用的磁碟空間和可用的網路輸送量按比例變更。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-495">The completion time of the initial replication changes proportionally, based on the actual VM disk size, used disk space, and available network throughput.</span></span>

![建議的 VM 批次大小](./media/site-recovery-deployment-planner/recommended-vm-batch-size.png)

### <a name="growth-factor-and-percentile-values-used"></a><span data-ttu-id="d3fe5-497">使用的成長因子和百分位數值</span><span class="sxs-lookup"><span data-stu-id="d3fe5-497">Growth factor and percentile values used</span></span>
<span data-ttu-id="d3fe5-498">位於工作表底部的這個區段會顯示用於剖析 VM 之所有效能計數器的百分位數值 (預設值為第 95 個百分位數)，以及所有計算中使用的成長因子 (預設值為 30%)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-498">This section at the bottom of the sheet shows the percentile value used for all the performance counters of the profiled VMs (default is 95th percentile), and the growth factor (default is 30 percent) that's used in all the calculations.</span></span>

![使用的成長因子和百分位數值](./media/site-recovery-deployment-planner/max-iops-and-data-churn-setting.png)

## <a name="recommendations-with-available-bandwidth-as-input"></a><span data-ttu-id="d3fe5-500">以可用頻寬做為輸入的建議</span><span class="sxs-lookup"><span data-stu-id="d3fe5-500">Recommendations with available bandwidth as input</span></span>

![以可用頻寬做為輸入的建議](./media/site-recovery-deployment-planner/profiling-overview-bandwidth-input.png)

<span data-ttu-id="d3fe5-502">您可能會遇到一下情況：您知道無法針對 Site Recovery 複寫設定超過 x Mbps 的頻寬。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-502">You might have a situation where you know that you cannot set a bandwidth of more than x Mbps for Site Recovery replication.</span></span> <span data-ttu-id="d3fe5-503">此工具可讓您輸入可用的頻寬 (在報告產生期間使用 -Bandwidth 參數)，並取得可達成的 RPO (以分鐘為單位)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-503">The tool allows you to input available bandwidth (using the -Bandwidth parameter during report generation) and get the achievable RPO in minutes.</span></span> <span data-ttu-id="d3fe5-504">使用此可達成的 RPO 值，您可以決定是否需要設定額外的頻寬，或可接受具有此 RPO 的災害復原解決方案。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-504">With this achievable RPO value, you can decide whether you need to set up additional bandwidth or you are OK with having a disaster recovery solution with this RPO.</span></span>

![500 Mbps 頻寬可達成的 RPO](./media/site-recovery-deployment-planner/achievable-rpos.png)

## <a name="input"></a><span data-ttu-id="d3fe5-506">輸入</span><span class="sxs-lookup"><span data-stu-id="d3fe5-506">Input</span></span>
<span data-ttu-id="d3fe5-507">[輸入] 工作表提供已剖析的 VMware 環境概觀。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-507">The Input worksheet provides an overview of the profiled VMware environment.</span></span>

![已剖析的 VMware 環境概觀](./media/site-recovery-deployment-planner/Input.png)

<span data-ttu-id="d3fe5-509">[開始日期] 和 [結束日期]：考慮用於產生報告之剖析資料的開始和結束日期。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-509">**Start Date** and **End Date**: The start and end dates of the profiling data considered for report generation.</span></span> <span data-ttu-id="d3fe5-510">根據預設，開始日期是剖析開始的日期，而結束日期是剖析停止的日期。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-510">By default, the start date is the date when profiling starts, and the end date is the date when profiling stops.</span></span> <span data-ttu-id="d3fe5-511">如果使用這些參數產生報告，這可以是 'StartDate' 和 'EndDate' 值。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-511">This can be the ‘StartDate’ and ‘EndDate’ values if the report is generated with these parameters.</span></span>

<span data-ttu-id="d3fe5-512">**剖析總天數**：為其產生報告之開始和結束日期之間的剖析總天數。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-512">**Total number of profiling days**: The total number of days of profiling between the start and end dates for which the report is generated.</span></span>

<span data-ttu-id="d3fe5-513">**相同的虛擬機器數目**：相容的 VM 總數，系統會計算其所需的網路頻寬、所需的儲存體帳戶、Microsoft Azure 核心及組態伺服器和額外處理序伺服器的數目。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-513">**Number of compatible virtual machines**: The total number of compatible VMs for which the required network bandwidth, required number of storage accounts, Microsoft Azure cores, configuration servers and additional process servers are calculated.</span></span>

<span data-ttu-id="d3fe5-514">**所有相容虛擬機器的磁碟總數**：此數字可做為其中一個輸入值，以決定部署中所要使用的組態伺服器與額外處理序伺服器數目。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-514">**Total number of disks across all compatible virtual machines**: The number that's used as one of the inputs to decide the number of configuration servers and additional process servers to be used in the deployment.</span></span>

<span data-ttu-id="d3fe5-515">**每部相容虛擬機器的平均磁碟數**：在所有相容 VM 中計算的平均磁碟數。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-515">**Average number of disks per compatible virtual machine**: The average number of disks calculated across all compatible VMs.</span></span>

<span data-ttu-id="d3fe5-516">**平均磁碟大小 (GB)**：在所有相容 VM 中計算的平均磁碟大小。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-516">**Average disk size (GB)**: The average disk size calculated across all compatible VMs.</span></span>

<span data-ttu-id="d3fe5-517">**所需的 RPO (分鐘)**：預設復原點目標，或在產生報告時針對 'DesiredRPO' 參數所傳遞的值，用來估計所需的頻寬。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-517">**Desired RPO (minutes)**: Either the default recovery point objective or the value passed for the ‘DesiredRPO’ parameter at the time of report generation to estimate required bandwidth.</span></span>

<span data-ttu-id="d3fe5-518">**所需的頻寬 (Mbps)**：在產生報告時針對 ‘Bandwidth’ 參數所傳遞的值，用來估計可用的 RPO。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-518">**Desired bandwidth (Mbps)**: The value that you have passed for the ‘Bandwidth’ parameter at the time of report generation to estimate achievable RPO.</span></span>

<span data-ttu-id="d3fe5-519">**每日觀察到的典型資料變換 (GB)**：在所有剖析天數中觀察到的平均資料變換。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-519">**Observed typical data churn per day (GB)**: The average data churn observed across all profiling days.</span></span> <span data-ttu-id="d3fe5-520">此數字可做為其中一個輸入值，以決定部署中所要使用的組態伺服器與額外處理序伺服器數目。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-520">This number is used as one of the inputs to decide the number of configuration servers and additional process servers to be used in the deployment.</span></span>


## <a name="vm-storage-placement"></a><span data-ttu-id="d3fe5-521">VM 儲存體放置</span><span class="sxs-lookup"><span data-stu-id="d3fe5-521">VM-storage placement</span></span>

![VM 儲存體放置](./media/site-recovery-deployment-planner/vm-storage-placement.png)

<span data-ttu-id="d3fe5-523">**磁碟儲存體類型**：標準或進階儲存體帳戶，用來複寫 [要放置的 VM] 資料行中提到的所有對應 VM。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-523">**Disk Storage Type**: Either a standard or premium storage account, which is used to replicate all the corresponding VMs mentioned in the **VMs to Place** column.</span></span>

<span data-ttu-id="d3fe5-524">**建議的前置詞**：建議的三個字元前置詞，可用來命名儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-524">**Suggested Prefix**: The suggested three-character prefix that can be used for naming the storage account.</span></span> <span data-ttu-id="d3fe5-525">您可以使用自己的前置詞，但工具的建議會遵循[儲存體帳戶的磁碟分割命名慣例](https://aka.ms/storage-performance-checklist)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-525">You can use your own prefix, but the tool's suggestion follows the [partition naming convention for storage accounts](https://aka.ms/storage-performance-checklist).</span></span>

<span data-ttu-id="d3fe5-526">**建議的帳戶名稱**：在您包含建議前置詞後的儲存體帳戶名稱。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-526">**Suggested Account Name**: The storage-account name after you include the suggested prefix.</span></span> <span data-ttu-id="d3fe5-527">以您的自訂輸入取代括弧內的名稱 (< 和 >)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-527">Replace the name within the angle brackets (< and >) with your custom input.</span></span>

<span data-ttu-id="d3fe5-528">**記錄儲存體帳戶**︰所有複寫記錄都會儲存在標準儲存體帳戶中。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-528">**Log Storage Account**: All the replication logs are stored in a standard storage account.</span></span> <span data-ttu-id="d3fe5-529">對於複寫至進階儲存體帳戶的 VM，請針對記錄儲存體設定額外的標準儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-529">For VMs that replicate to a premium storage account, set up an additional standard storage account for log storage.</span></span> <span data-ttu-id="d3fe5-530">多個進階複寫儲存體帳戶可以使用單一標準記錄儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-530">A single standard log-storage account can be used by multiple premium replication storage accounts.</span></span> <span data-ttu-id="d3fe5-531">複寫到標準儲存體帳戶的 VM 會對記錄使用相同的儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-531">VMs that are replicated to standard storage accounts use the same storage account for logs.</span></span>

<span data-ttu-id="d3fe5-532">**建議的記錄帳戶名稱**：在您包含建議前置詞後的儲存體記錄帳戶名稱。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-532">**Suggested Log Account Name**: Your storage log account name after you include the suggested prefix.</span></span> <span data-ttu-id="d3fe5-533">以您的自訂輸入取代括弧內的名稱 (< 和 >)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-533">Replace the name within the angle brackets (< and >) with your custom input.</span></span>

<span data-ttu-id="d3fe5-534">**放置摘要**：提供在複寫和測試容錯移轉或容錯移轉時，儲存體帳戶上載入的 VM 總數摘要。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-534">**Placement Summary**: A summary of the total VMs' load on the storage account at the time of replication and test failover or failover.</span></span> <span data-ttu-id="d3fe5-535">其中包含對應到儲存體帳戶的 VM 總數、置於此儲存體帳戶中所有 VM 的讀/寫 IOPS 總計、寫入 (複寫) IOPS 總計、所有磁碟的設定大小總計，以及磁碟總數。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-535">It includes the total number of VMs mapped to the storage account, total read/write IOPS across all VMs being placed in this storage account, total write (replication) IOPS, total setup size across all disks, and total number of disks.</span></span>

<span data-ttu-id="d3fe5-536">**要放置的虛擬機器**：應置於指定之儲存體帳戶的所有 VM 清單，以提供最佳效能和使用情況。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-536">**Virtual Machines to Place**: A list of all the VMs that should be placed on the given storage account for optimal performance and use.</span></span>

## <a name="compatible-vms"></a><span data-ttu-id="d3fe5-537">相容的 VM</span><span class="sxs-lookup"><span data-stu-id="d3fe5-537">Compatible VMs</span></span>
![相容 VM 的 Excel 試算表](./media/site-recovery-deployment-planner/compatible-vms.png)

<span data-ttu-id="d3fe5-539">**VM 名稱**：產生報告時，使用於 VMListFile 的 VM 名稱或 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-539">**VM Name**: The VM name or IP address that's used in the VMListFile when a report is generated.</span></span> <span data-ttu-id="d3fe5-540">此資料行也會列出連結至 VM 的磁碟 (VMDK)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-540">This column also lists the disks (VMDKs) that are attached to the VMs.</span></span> <span data-ttu-id="d3fe5-541">為了區分具有重複名稱或 IP 位址的 vCenter VM，名稱中包含 ESXi 主機名稱。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-541">To distinguish vCenter VMs with duplicate names or IP addresses, the names include the ESXi host name.</span></span> <span data-ttu-id="d3fe5-542">所列的 ESXi 主機是此工具在剖析期間探索到 VM 時其所在位置的主機。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-542">The listed ESXi host is the one where the VM was placed when the tool discovered during the profiling period.</span></span>

<span data-ttu-id="d3fe5-543">**VM 相容性**：值為 [是] 和 [是\*]。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-543">**VM Compatibility**: Values are **Yes** and **Yes**\*.</span></span> <span data-ttu-id="d3fe5-544">**[是\*]** 適用於 VM 適合於 [Azure 進階儲存體](https://aka.ms/premium-storage-workload)的情況。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-544">**Yes**\* is for instances in which the VM is a fit for [Azure Premium Storage](https://aka.ms/premium-storage-workload).</span></span> <span data-ttu-id="d3fe5-545">在此情況下，剖析的高變換 / IOPS 磁碟符合 P20 或 P30 類別，但磁碟大小會導致它向下對應至 P10 或 P20。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-545">Here, the profiled high-churn or IOPS disk fits in the P20 or P30 category, but the size of the disk causes it to be mapped down to a P10 or P20.</span></span> <span data-ttu-id="d3fe5-546">儲存體帳戶會根據磁碟大小，決定磁碟所要對應至的進階儲存體大小類型。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-546">The storage account decides which premium storage disk type to map a disk to, based on its size.</span></span> <span data-ttu-id="d3fe5-547">例如：</span><span class="sxs-lookup"><span data-stu-id="d3fe5-547">For example:</span></span>
* <span data-ttu-id="d3fe5-548"><128 GB 為 P10。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-548"><128 GB is a P10.</span></span>
* <span data-ttu-id="d3fe5-549">128 GB 至 512 GB 為 P20。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-549">128 GB to 512 GB is a P20.</span></span>
* <span data-ttu-id="d3fe5-550">512 GB 至 1024 GB 為 P30。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-550">512 GB to 1024 GB is a P30.</span></span>
* <span data-ttu-id="d3fe5-551">1025 GB 至 2048 GB 為 P40。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-551">1025 GB to 2048 GB is a P40.</span></span>
* <span data-ttu-id="d3fe5-552">2049 GB 至 4095 GB 為 P50。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-552">2049 GB to 4095 GB is a P50.</span></span>

<span data-ttu-id="d3fe5-553">如果磁碟的工作負載特性讓它放在 P20 或 P30 類別中，但大小會將它對應到較低的進階儲存體磁碟類型，此工具會將該 VM 標示為 [是\*]。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-553">If the workload characteristics of a disk put it in the P20 or P30 category, but the size maps it down to a lower premium storage disk type, the tool marks that VM as **Yes**\*.</span></span> <span data-ttu-id="d3fe5-554">此工具也建議您變更來源磁碟大小，以符合建議的進階儲存體磁碟類型，或變更容錯移轉後的目標磁碟類型。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-554">The tool also recommends that you either change the source disk size to fit into the recommended premium storage disk type or change the target disk type post-failover.</span></span>

<span data-ttu-id="d3fe5-555">**儲存體類型**：標準或進階。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-555">**Storage Type**: Standard or premium.</span></span>

<span data-ttu-id="d3fe5-556">**建議的前置詞**：三個字元的儲存體帳戶前置詞。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-556">**Suggested Prefix**: The three-character storage-account prefix.</span></span>

<span data-ttu-id="d3fe5-557">**儲存體帳戶**︰使用建議儲存體帳戶前置詞的名稱。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-557">**Storage Account**: The name that uses the suggested storage-account prefix.</span></span>

<span data-ttu-id="d3fe5-558">**R/W IOPS (含成長因子)**：磁碟上的尖峰工作負載讀/寫 IOPS (預設值為第 95 個百分位數)，包括未來的成長因子 (預設值為 30%)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-558">**R/W IOPS (with Growth Factor)**: The peak workload read/write IOPS on the disk (default is 95th percentile), including the future growth factor (default is 30 percent).</span></span> <span data-ttu-id="d3fe5-559">請注意，VM 的讀/寫 IOPS 總計不一定是 VM 個別磁碟的讀/寫 IOPS 總和，因為 VM 的尖峰讀/寫 IOPS 是其個別磁碟在剖析期間內每一分鐘之讀/寫 IOPS 總和的尖峰。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-559">Note that the total read/write IOPS of a VM is not always the sum of the VM’s individual disks’ read/write IOPS, because the peak read/write IOPS of the VM is the peak of the sum of its individual disks' read/write IOPS during every minute of the profiling period.</span></span>

<span data-ttu-id="d3fe5-560">**資料變換 (Mbps) (含成長因子)**：磁碟上的尖峰變換率 (預設值為第 95 個百分位數)，包括未來的成長因子 (預設值為 30%)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-560">**Data Churn in Mbps (with Growth Factor)**: The peak churn rate on the disk (default is 95th percentile), including the future growth factor (default is 30 percent).</span></span> <span data-ttu-id="d3fe5-561">請注意，VM 的資料變換總計不一定是 VM 個別磁碟的資料變換總和，因為 VM 的尖峰資料變換是其個別磁碟在剖析期間每一分鐘之變換總和的尖峰。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-561">Note that the total data churn of the VM is not always the sum of the VM’s individual disks’ data churn, because the peak data churn of the VM is the peak of the sum of its individual disks' churn during every minute of the profiling period.</span></span>

<span data-ttu-id="d3fe5-562">**Azure VM 大小**：此內部部署 VM 理想的對應 Azure 雲端服務虛擬機器大小。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-562">**Azure VM Size**: The ideal mapped Azure Cloud Services virtual-machine size for this on-premises VM.</span></span> <span data-ttu-id="d3fe5-563">對應是以內部部署 VM 的記憶體、磁碟/核心/NIC 數目和讀/寫 IOPS 為基礎。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-563">The mapping is based on the on-premises VM’s memory, number of disks/cores/NICs, and read/write IOPS.</span></span> <span data-ttu-id="d3fe5-564">建議一律是符合所有內部部署 VM 特性的最低 Azure VM 大小。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-564">The recommendation is always the lowest Azure VM size that matches all of the on-premises VM characteristics.</span></span>

<span data-ttu-id="d3fe5-565">**磁碟數目**：VM 上的虛擬機器磁碟 (VMDK) 總數。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-565">**Number of Disks**: The total number of virtual machine disks (VMDKs) on the VM.</span></span>

<span data-ttu-id="d3fe5-566">**磁碟大小 (GB)**：VM 之所有磁碟的總設定大小。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-566">**Disk size (GB)**: The total setup size of all disks of the VM.</span></span> <span data-ttu-id="d3fe5-567">此工具也會顯示 VM 中個別磁碟的磁碟大小。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-567">The tool also shows the disk size for the individual disks in the VM.</span></span>

<span data-ttu-id="d3fe5-568">**核心**：VM 上的 CPU 核心數目。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-568">**Cores**: The number of CPU cores on the VM.</span></span>

<span data-ttu-id="d3fe5-569">**記憶體 (MB)**：VM 上的 RAM。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-569">**Memory (MB)**: The RAM on the VM.</span></span>

<span data-ttu-id="d3fe5-570">**NIC**：VM 上的 NIC 數目。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-570">**NICs**: The number of NICs on the VM.</span></span>

<span data-ttu-id="d3fe5-571">**開機類型**︰這是 VM 的開機類型。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-571">**Boot Type**: It is boot type of the VM.</span></span> <span data-ttu-id="d3fe5-572">可以是 BIOS 或 EFI。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-572">It can be either BIOS or EFI.</span></span> <span data-ttu-id="d3fe5-573">Azure Site Recovery 目前僅支援 BIOS 開機類型。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-573">Currently Azure Site Recovery supports only BIOS boot type.</span></span> <span data-ttu-id="d3fe5-574">EFI 開機類型的所有虛擬機器會列在不相容的 VM 工作表中。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-574">All the virtual machines of EFI boot type are listed in Incompatible VMs worksheet.</span></span>

<span data-ttu-id="d3fe5-575">**OS 類型**：這是 VM 的 OS 類型。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-575">**OS Type**: The is OS type of the VM.</span></span> <span data-ttu-id="d3fe5-576">可以是 Windows 或 Linux 或其他。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-576">It can be either Windows or Linux or other.</span></span>

## <a name="incompatible-vms"></a><span data-ttu-id="d3fe5-577">不相容的 VM</span><span class="sxs-lookup"><span data-stu-id="d3fe5-577">Incompatible VMs</span></span>

![不相容 VM 的 Excel 試算表](./media/site-recovery-deployment-planner/incompatible-vms.png)

<span data-ttu-id="d3fe5-579">**VM 名稱**：產生報告時，使用於 VMListFile 的 VM 名稱或 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-579">**VM Name**: The VM name or IP address that's used in the VMListFile when a report is generated.</span></span> <span data-ttu-id="d3fe5-580">此資料行也會列出連結至 VM 的磁 VMDK。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-580">This column also lists the VMDKs that are attached to the VMs.</span></span> <span data-ttu-id="d3fe5-581">為了區分具有重複名稱或 IP 位址的 vCenter VM，名稱中包含 ESXi 主機名稱。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-581">To distinguish vCenter VMs with duplicate names or IP addresses, the names include the ESXi host name.</span></span> <span data-ttu-id="d3fe5-582">所列的 ESXi 主機是此工具在剖析期間探索到 VM 時其所在位置的主機。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-582">The listed ESXi host is the one where the VM was placed when the tool discovered during the profiling period.</span></span>

<span data-ttu-id="d3fe5-583">**VM 相容性**：指出為何指定的 VM 不適合與 Site Recovery 搭配使用。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-583">**VM Compatibility**: Indicates why the given VM is incompatible for use with Site Recovery.</span></span> <span data-ttu-id="d3fe5-584">相關原因會針對 VM 的每個不相容磁碟進行說明，且根據發佈的[儲存體限制](https://aka.ms/azure-storage-scalbility-performance)，原因可能是下列其中一項：</span><span class="sxs-lookup"><span data-stu-id="d3fe5-584">The reasons are described for each incompatible disk of the VM and, based on published [storage limits](https://aka.ms/azure-storage-scalbility-performance), can be any of the following:</span></span>

* <span data-ttu-id="d3fe5-585">磁碟大小 >4095 GB。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-585">Disk size is >4095 GB.</span></span> <span data-ttu-id="d3fe5-586">Azure 儲存體目前不支援大於 4095 GB 的資料磁碟大小。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-586">Azure Storage currently does not support data disk sizes greater than 4095 GB.</span></span>
* <span data-ttu-id="d3fe5-587">OS 磁碟 >2048 GB。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-587">OS disk is >2048 GB.</span></span> <span data-ttu-id="d3fe5-588">Azure 儲存體目前不支援大於 2048 GB 的 OS 磁碟大小。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-588">Azure Storage currently does not support OS disk size greater than 2048 GB.</span></span>
* <span data-ttu-id="d3fe5-589">啟動類型為 EFI。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-589">Boot type is EFI.</span></span> <span data-ttu-id="d3fe5-590">Azure Site Recovery 目前僅支援 BIOS 開機類型虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-590">Azure Site Recovery currently supports only BIOS boot type virtual machine.</span></span>

* <span data-ttu-id="d3fe5-591">VM 大小總計 (複寫 + TFO) 超過支援的儲存體帳戶大小限制 (35 TB)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-591">Total VM size (replication + TFO) exceeds the supported storage-account size limit (35 TB).</span></span> <span data-ttu-id="d3fe5-592">當 VM 中單一磁碟的效能特性超過標準儲存體支援的最大 Azure 或 Site Recovery 限制，通常會發生此不相容情況。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-592">This incompatibility usually occurs when a single disk in the VM has a performance characteristic that exceeds the maximum supported Azure or Site Recovery limits for standard storage.</span></span> <span data-ttu-id="d3fe5-593">這類情況會將 VM 推送到進階儲存體區域中。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-593">Such an instance pushes the VM into the premium storage zone.</span></span> <span data-ttu-id="d3fe5-594">不過，進階儲存體帳戶支援的大小上限為 35 TB，而單一的受保護 VM 無法跨多個儲存體帳戶受到保護。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-594">However, the maximum supported size of a premium storage account is 35 TB, and a single protected VM cannot be protected across multiple storage accounts.</span></span> <span data-ttu-id="d3fe5-595">也請注意，在受保護的 VM 上執行測試容錯移轉時，它會在正在進行複寫的相同儲存體帳戶中執行。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-595">Also note that when a test failover is executed on a protected VM, it runs in the same storage account where replication is progressing.</span></span> <span data-ttu-id="d3fe5-596">在此例中，設定 2 倍的磁碟大小，以便進行複寫並以平行方式繼續進行測試容錯移轉。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-596">In this instance, set up 2x the size of the disk for replication to progress and test failover to succeed in parallel.</span></span>
* <span data-ttu-id="d3fe5-597">來源 IOPS 超過支援的儲存體 IOPS 限制 (每個磁碟 5000)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-597">Source IOPS exceeds supported storage IOPS limit of 5000 per disk.</span></span>
* <span data-ttu-id="d3fe5-598">來源 IOPS 超過支援的儲存體 IOPS 限制 (每個 VM 80,000)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-598">Source IOPS exceeds supported storage IOPS limit of 80,000 per VM.</span></span>
* <span data-ttu-id="d3fe5-599">平均資料變換超出磁碟平均 IO 大小支援的 Site Recovery 資料變換限制 10 MBps。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-599">Average data churn exceeds supported Site Recovery data churn limit of 10 MBps for average I/O size for the disk.</span></span>
* <span data-ttu-id="d3fe5-600">VM 上所有磁碟的資料變換總計超過每個 VM 支援的 Site Recovery 資料變換限制 54 MBps。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-600">Total data churn across all disks on the VM exceeds the maximum supported Site Recovery data churn limit of 54 MBps per VM.</span></span>
* <span data-ttu-id="d3fe5-601">磁碟的平均有效寫入 IOPS 超過支援的 Site Recovery IOPS 限制 840。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-601">Average effective write IOPS exceeds the supported Site Recovery IOPS limit of 840 for disk.</span></span>
* <span data-ttu-id="d3fe5-602">計算的快照集儲存體超過支援的快照集儲存體限制 10 TB。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-602">Calculated snapshot storage exceeds the supported snapshot storage limit of 10 TB.</span></span>

<span data-ttu-id="d3fe5-603">**R/W IOPS (含成長因子)**：磁碟上的尖峰工作負載 IOPS (預設值為第 95 個百分位數)，包括未來的成長因子 (預設值為 30%)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-603">**R/W IOPS (with Growth Factor)**: The peak workload IOPS on the disk (default is 95th percentile), including the future growth factor (default is 30 percent).</span></span> <span data-ttu-id="d3fe5-604">請注意，VM 的讀/寫 IOPS 總計不一定是 VM 個別磁碟的讀/寫 IOPS 總和，因為 VM 的尖峰讀/寫 IOPS 是其個別磁碟在剖析期間內每一分鐘之讀/寫 IOPS 總和的尖峰。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-604">Note that the total read/write IOPS of the VM is not always the sum of the VM’s individual disks’ read/write IOPS, because the peak read/write IOPS of the VM is the peak of the sum of its individual disks' read/write IOPS during every minute of the profiling period.</span></span>

<span data-ttu-id="d3fe5-605">**資料變換 (Mbps) (含成長因子)**：磁碟上的尖峰變換率 (預設值為第 95 個百分位數)，包括未來的成長因子 (預設值為 30%)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-605">**Data Churn in Mbps (with Growth Factor)**: The peak churn rate on the disk (default 95th percentile) including the future growth factor (default 30 percent).</span></span> <span data-ttu-id="d3fe5-606">請注意，VM 的資料變換總計不一定是 VM 個別磁碟的資料變換總和，因為 VM 的尖峰資料變換是其個別磁碟在剖析期間每一分鐘之變換總和的尖峰。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-606">Note that the total data churn of the VM is not always the sum of the VM’s individual disks’ data churn, because the peak data churn of the VM is the peak of the sum of its individual disks' churn during every minute of the profiling period.</span></span>

<span data-ttu-id="d3fe5-607">**磁碟數目**：VM 上的 VMDK 總數。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-607">**Number of Disks**: The total number of VMDKs on the VM.</span></span>

<span data-ttu-id="d3fe5-608">**磁碟大小 (GB)**：VM 之所有磁碟的總設定大小。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-608">**Disk size (GB)**: The total setup size of all disks of the VM.</span></span> <span data-ttu-id="d3fe5-609">此工具也會顯示 VM 中個別磁碟的磁碟大小。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-609">The tool also shows the disk size for the individual disks in the VM.</span></span>

<span data-ttu-id="d3fe5-610">**核心**：VM 上的 CPU 核心數目。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-610">**Cores**: The number of CPU cores on the VM.</span></span>

<span data-ttu-id="d3fe5-611">**記憶體 (MB)**：VM 上的 RAM 數量。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-611">**Memory (MB)**: The amount of RAM on the VM.</span></span>

<span data-ttu-id="d3fe5-612">**NIC**：VM 上的 NIC 數目。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-612">**NICs**: The number of NICs on the VM.</span></span>

<span data-ttu-id="d3fe5-613">**開機類型**︰這是 VM 的開機類型。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-613">**Boot Type**: It is boot type of the VM.</span></span> <span data-ttu-id="d3fe5-614">可以是 BIOS 或 EFI。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-614">It can be either BIOS or EFI.</span></span> <span data-ttu-id="d3fe5-615">Azure Site Recovery 目前僅支援 BIOS 開機類型。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-615">Currently Azure Site Recovery supports only BIOS boot type.</span></span> <span data-ttu-id="d3fe5-616">EFI 開機類型的所有虛擬機器會列在不相容的 VM 工作表中。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-616">All the virtual machines of EFI boot type are listed in Incompatible VMs worksheet.</span></span>

<span data-ttu-id="d3fe5-617">**OS 類型**：這是 VM 的 OS 類型。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-617">**OS Type**: The is OS type of the VM.</span></span> <span data-ttu-id="d3fe5-618">可以是 Windows 或 Linux 或其他。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-618">It can be either Windows or Linux or other.</span></span>


## <a name="site-recovery-limits"></a><span data-ttu-id="d3fe5-619">Site Recovery 限制</span><span class="sxs-lookup"><span data-stu-id="d3fe5-619">Site Recovery limits</span></span>

<span data-ttu-id="d3fe5-620">**複寫儲存體目標**</span><span class="sxs-lookup"><span data-stu-id="d3fe5-620">**Replication storage target**</span></span> | <span data-ttu-id="d3fe5-621">**平均來源磁碟 I/O 大小**</span><span class="sxs-lookup"><span data-stu-id="d3fe5-621">**Average source disk I/O size**</span></span> |<span data-ttu-id="d3fe5-622">**平均來源磁碟資料變換**</span><span class="sxs-lookup"><span data-stu-id="d3fe5-622">**Average source disk data churn**</span></span> | <span data-ttu-id="d3fe5-623">**每日的來源磁碟資料變換總計**</span><span class="sxs-lookup"><span data-stu-id="d3fe5-623">**Total source disk data churn per day**</span></span>
---|---|---|---
<span data-ttu-id="d3fe5-624">標準儲存體</span><span class="sxs-lookup"><span data-stu-id="d3fe5-624">Standard storage</span></span> | <span data-ttu-id="d3fe5-625">8 KB</span><span class="sxs-lookup"><span data-stu-id="d3fe5-625">8 KB</span></span> | <span data-ttu-id="d3fe5-626">2 MBps</span><span class="sxs-lookup"><span data-stu-id="d3fe5-626">2 MBps</span></span> | <span data-ttu-id="d3fe5-627">每個磁碟 168 GB</span><span class="sxs-lookup"><span data-stu-id="d3fe5-627">168 GB per disk</span></span>
<span data-ttu-id="d3fe5-628">進階 P10 磁碟</span><span class="sxs-lookup"><span data-stu-id="d3fe5-628">Premium P10 disk</span></span> | <span data-ttu-id="d3fe5-629">8 KB</span><span class="sxs-lookup"><span data-stu-id="d3fe5-629">8 KB</span></span> | <span data-ttu-id="d3fe5-630">2 MBps</span><span class="sxs-lookup"><span data-stu-id="d3fe5-630">2 MBps</span></span> | <span data-ttu-id="d3fe5-631">每個磁碟 168 GB</span><span class="sxs-lookup"><span data-stu-id="d3fe5-631">168 GB per disk</span></span>
<span data-ttu-id="d3fe5-632">進階 P10 磁碟</span><span class="sxs-lookup"><span data-stu-id="d3fe5-632">Premium P10 disk</span></span> | <span data-ttu-id="d3fe5-633">16 KB</span><span class="sxs-lookup"><span data-stu-id="d3fe5-633">16 KB</span></span> | <span data-ttu-id="d3fe5-634">4 MBps</span><span class="sxs-lookup"><span data-stu-id="d3fe5-634">4 MBps</span></span> | <span data-ttu-id="d3fe5-635">每個磁碟 336 GB</span><span class="sxs-lookup"><span data-stu-id="d3fe5-635">336 GB per disk</span></span>
<span data-ttu-id="d3fe5-636">進階 P10 磁碟</span><span class="sxs-lookup"><span data-stu-id="d3fe5-636">Premium P10 disk</span></span> | <span data-ttu-id="d3fe5-637">32 KB 或更大</span><span class="sxs-lookup"><span data-stu-id="d3fe5-637">32 KB or greater</span></span> | <span data-ttu-id="d3fe5-638">8 MBps</span><span class="sxs-lookup"><span data-stu-id="d3fe5-638">8 MBps</span></span> | <span data-ttu-id="d3fe5-639">每個磁碟 672 GB</span><span class="sxs-lookup"><span data-stu-id="d3fe5-639">672 GB per disk</span></span>
<span data-ttu-id="d3fe5-640">進階 P20 或 P30 磁碟</span><span class="sxs-lookup"><span data-stu-id="d3fe5-640">Premium P20 or P30 disk</span></span> | <span data-ttu-id="d3fe5-641">8 KB</span><span class="sxs-lookup"><span data-stu-id="d3fe5-641">8 KB</span></span>  | <span data-ttu-id="d3fe5-642">5 MBps</span><span class="sxs-lookup"><span data-stu-id="d3fe5-642">5 MBps</span></span> | <span data-ttu-id="d3fe5-643">每個磁碟 421 GB</span><span class="sxs-lookup"><span data-stu-id="d3fe5-643">421 GB per disk</span></span>
<span data-ttu-id="d3fe5-644">進階 P20 或 P30 磁碟</span><span class="sxs-lookup"><span data-stu-id="d3fe5-644">Premium P20 or P30 disk</span></span> | <span data-ttu-id="d3fe5-645">16 KB 或更大</span><span class="sxs-lookup"><span data-stu-id="d3fe5-645">16 KB or greater</span></span> |<span data-ttu-id="d3fe5-646">10 MBps</span><span class="sxs-lookup"><span data-stu-id="d3fe5-646">10 MBps</span></span> | <span data-ttu-id="d3fe5-647">每個磁碟 842 GB</span><span class="sxs-lookup"><span data-stu-id="d3fe5-647">842 GB per disk</span></span>

<span data-ttu-id="d3fe5-648">以上是採用 30% I/O 重疊時的平均數字。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-648">These are average numbers assuming a 30 percent I/O overlap.</span></span> <span data-ttu-id="d3fe5-649">Site Recovery 能夠處理更高的輸送量 (以重疊比為基礎)、較大的寫入大小和實際工作負載 I/O 行為。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-649">Site Recovery is capable of handling higher throughput based on overlap ratio, larger write sizes, and actual workload I/O behavior.</span></span> <span data-ttu-id="d3fe5-650">先前數字採用大約五分鐘的典型積壓。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-650">The preceding numbers assume a typical backlog of approximately five minutes.</span></span> <span data-ttu-id="d3fe5-651">也就是說，資料上傳之後，便會進行處理並在五分鐘內建立復原點。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-651">That is, after data is uploaded, it is processed and a recovery point is created within five minutes.</span></span>

<span data-ttu-id="d3fe5-652">上述限制是以我們的測試為基礎，但無法涵蓋所有可能的應用程式 I/O 組合。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-652">These limits are based on our tests, but they cannot cover all possible application I/O combinations.</span></span> <span data-ttu-id="d3fe5-653">實際的結果會隨著您的應用程式 I/O 混合而有所不同。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-653">Actual results can vary based on your application I/O mix.</span></span> <span data-ttu-id="d3fe5-654">為了獲得最佳結果，即使在部署規劃之後，仍一律建議使用測試容錯移轉來執行廣泛的應用程式測試，以了解真正的效能情況。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-654">For best results, even after deployment planning, we always recommend that you perform extensive application testing by using a test failover to get the true performance picture.</span></span>

## <a name="updating-the-deployment-planner"></a><span data-ttu-id="d3fe5-655">更新 Deployment Planner</span><span class="sxs-lookup"><span data-stu-id="d3fe5-655">Updating the deployment planner</span></span>
<span data-ttu-id="d3fe5-656">若要更新 Deployment Planner，請執行下列作業︰</span><span class="sxs-lookup"><span data-stu-id="d3fe5-656">To update the deployment planner, do the following:</span></span>

1. <span data-ttu-id="d3fe5-657">下載最新版的 [Azure Site Recovery Deployment Planner](https://aka.ms/asr-deployment-planner)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-657">Download the latest version of the [Azure Site Recovery deployment planner](https://aka.ms/asr-deployment-planner).</span></span>

2. <span data-ttu-id="d3fe5-658">將 .zip 資料夾複製到您要執行所在的伺服器。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-658">Copy the .zip folder to a server that you want to run it on.</span></span>

3. <span data-ttu-id="d3fe5-659">將 .zip 資料夾解壓縮。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-659">Extract the .zip folder.</span></span>

4. <span data-ttu-id="d3fe5-660">執行下列其中一個動作：</span><span class="sxs-lookup"><span data-stu-id="d3fe5-660">Do either of the following:</span></span>
 * <span data-ttu-id="d3fe5-661">如果最新版本不包含剖析修正程式，並已在您目前的規劃工具版本上進行剖析，則會繼續執行剖析。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-661">If the latest version doesn't contain a profiling fix and profiling is already in progress on your current version of the planner, continue the profiling.</span></span>
 * <span data-ttu-id="d3fe5-662">如果最新版本包含剖析修正程式，則建議您在目前的版本上停止剖析，並使用新版本重新開始剖析。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-662">If the latest version does contain a profiling fix, we recommended that you stop profiling on your current version and restart the profiling with the new version.</span></span>

  >[!NOTE]
  >
  ><span data-ttu-id="d3fe5-663">當您開始使用新版本進行剖析時，請傳遞相同的輸出目錄路徑，以便工具在現有檔案上附加剖析資料。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-663">When you start profiling with the new version, pass the same output directory path so that the tool appends profile data on the existing files.</span></span> <span data-ttu-id="d3fe5-664">將使用一組完整的剖析資料來產生報告。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-664">A complete set of profiled data will be used to generate the report.</span></span> <span data-ttu-id="d3fe5-665">如果您傳遞不同的輸出目錄，則會建立新檔案，舊的剖析資料不會用來產生報告。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-665">If you pass a different output directory, new files are created, and old profiled data is not used to generate the report.</span></span>
  >
  ><span data-ttu-id="d3fe5-666">每個新的 Deployment Planner 都是 .zip 檔的累積更新。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-666">Each new deployment planner is a cumulative update of the .zip file.</span></span> <span data-ttu-id="d3fe5-667">您不需要將最新的檔案複製到先前的資料夾。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-667">You don't need to copy the newest files to the previous  folder.</span></span> <span data-ttu-id="d3fe5-668">您可以建立及使用新的資料夾。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-668">You can create and use a new folder.</span></span>


## <a name="version-history"></a><span data-ttu-id="d3fe5-669">版本歷程記錄</span><span class="sxs-lookup"><span data-stu-id="d3fe5-669">Version history</span></span>

### <a name="131"></a><span data-ttu-id="d3fe5-670">1.3.1</span><span class="sxs-lookup"><span data-stu-id="d3fe5-670">1.3.1</span></span>
<span data-ttu-id="d3fe5-671">更新日期：2017 年 7 月 19 日</span><span class="sxs-lookup"><span data-stu-id="d3fe5-671">Updated: July 19, 2017</span></span>

<span data-ttu-id="d3fe5-672">已新增下列新功能︰</span><span class="sxs-lookup"><span data-stu-id="d3fe5-672">Following new feature is added:</span></span>

* <span data-ttu-id="d3fe5-673">在報告產生階段新增了大型磁碟 (> 1TB) 的支援。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-673">Added support for large disks (> 1TB) in report generation.</span></span> <span data-ttu-id="d3fe5-674">您現在可以使用部署規劃工具，規劃磁碟大小大於 1 TB (最多 4095 GB) 之虛擬機器的複寫。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-674">Now you can use deployment planner to plan replication for virtual machines that have disk sizes greater than 1 TB (upto 4095 GB).</span></span>
<span data-ttu-id="d3fe5-675">深入了解 [Azure Site Recovery 中的大型磁碟支援](https://azure.microsoft.com/en-us/blog/azure-site-recovery-large-disks/)</span><span class="sxs-lookup"><span data-stu-id="d3fe5-675">Read more about [Large disk support in Azure Site Recovery](https://azure.microsoft.com/en-us/blog/azure-site-recovery-large-disks/)</span></span>


### <a name="13"></a><span data-ttu-id="d3fe5-676">1.3</span><span class="sxs-lookup"><span data-stu-id="d3fe5-676">1.3</span></span>
<span data-ttu-id="d3fe5-677">更新日期：2017 年 5 月 9 日</span><span class="sxs-lookup"><span data-stu-id="d3fe5-677">Updated: May 9, 2017</span></span>

<span data-ttu-id="d3fe5-678">已新增下列新功能︰</span><span class="sxs-lookup"><span data-stu-id="d3fe5-678">Following new feature is added:</span></span>

* <span data-ttu-id="d3fe5-679">在產生報告中新增了受控磁碟支援。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-679">Added Managed Disk support in report generation.</span></span> <span data-ttu-id="d3fe5-680">根據是否已針對容錯移轉/測試容錯移轉選取受控磁碟，計算可以放到單一儲存體帳戶的虛擬機器數目。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-680">The number of virtual machines can be placed to a single storage account is calcuated based on if managed disk is selected for Failover/Test failover.</span></span>        


### <a name="12"></a><span data-ttu-id="d3fe5-681">1.2</span><span class="sxs-lookup"><span data-stu-id="d3fe5-681">1.2</span></span>
<span data-ttu-id="d3fe5-682">更新日期：2017 年 4 月 7 日</span><span class="sxs-lookup"><span data-stu-id="d3fe5-682">Updated: April 7, 2017</span></span>

<span data-ttu-id="d3fe5-683">已新增下列修正程式︰</span><span class="sxs-lookup"><span data-stu-id="d3fe5-683">Added following fixes:</span></span>

* <span data-ttu-id="d3fe5-684">已新增每部虛擬機器的開機類型 (BIOS 或 EFI) 檢查，用以判斷虛擬機器是否與保護相容。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-684">Added boot type( BIOS or EFI) check for each virtual machine to determine if the virtual machine is compatible or incompatible for the protection.</span></span>
* <span data-ttu-id="d3fe5-685">已在相容的 VM 和不相容的 VM 工作表中新增每部虛擬機器的 OS 類型資訊。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-685">Added OS type information for each virtual machine in the Compatible VMs  and Incompatible VMs worksheets.</span></span>
* <span data-ttu-id="d3fe5-686">US Government 和 China Microsoft Azure 區域現在支援 GetThroughput 作業。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-686">The GetThroughput operation is now supported in the US Government and China Microsoft Azure regions.</span></span>
* <span data-ttu-id="d3fe5-687">已針對 vCenter 和 ESXi 伺服器新增更多必要條件檢查。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-687">Added few more prerequisite checks for vCenter and ESXi Server.</span></span>
* <span data-ttu-id="d3fe5-688">地區設定若為非英文，則會產生不正確的報告。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-688">Incorrect report was getting generated when locale settings is set to non-English.</span></span>


### <a name="11"></a><span data-ttu-id="d3fe5-689">1.1</span><span class="sxs-lookup"><span data-stu-id="d3fe5-689">1.1</span></span>
<span data-ttu-id="d3fe5-690">更新日期：2017 年 3 月 9 日</span><span class="sxs-lookup"><span data-stu-id="d3fe5-690">Updated: March 9, 2017</span></span>

<span data-ttu-id="d3fe5-691">修正下列問題：</span><span class="sxs-lookup"><span data-stu-id="d3fe5-691">Fixed the following issues:</span></span>

* <span data-ttu-id="d3fe5-692">如果 vCenter 在各種 ESXi 主機上有兩部或多部 VM 具有相同的名稱或 IP 位址，此工具就無法剖析 VM。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-692">The tool cannot profile VMs if the vCenter has two or more VMs with the same name or IP address across various ESXi hosts.</span></span>
* <span data-ttu-id="d3fe5-693">「相容的 VM」和「不相容的 VM」工作表已停用複製和搜尋。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-693">Copy and search is disabled for the Compatible VMs and Incompatible VMs worksheets.</span></span>

### <a name="10"></a><span data-ttu-id="d3fe5-694">1.0</span><span class="sxs-lookup"><span data-stu-id="d3fe5-694">1.0</span></span>
<span data-ttu-id="d3fe5-695">更新日期：2017 年 2 月 23 日</span><span class="sxs-lookup"><span data-stu-id="d3fe5-695">Updated: February 23, 2017</span></span>

<span data-ttu-id="d3fe5-696">Azure Site Recovery Deployment Planner 公開預覽版本 1.0 具有下列已知問題 (將會在即將推出的更新中獲得解決)：</span><span class="sxs-lookup"><span data-stu-id="d3fe5-696">Azure Site Recovery Deployment Planner public preview 1.0 has the following known issues (to be addressed in upcoming updates):</span></span>

* <span data-ttu-id="d3fe5-697">此工具僅適用於 VMware 到 Azure 案例，而不適用於 Hyper-V 到 Azure 部署。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-697">The tool works only for VMware-to-Azure scenarios, not for Hyper-V-to-Azure deployments.</span></span> <span data-ttu-id="d3fe5-698">對於 Hyper-V 到 Azure 案例，使用 [Hyper-V 容量規劃工具](./site-recovery-capacity-planning-for-hyper-v-replication.md)。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-698">For Hyper-V-to-Azure scenarios, use the [Hyper-V capacity planner tool](./site-recovery-capacity-planning-for-hyper-v-replication.md).</span></span>
* <span data-ttu-id="d3fe5-699">美國政府和中國 Microsoft Azure 區域不支援 GetThroughput 作業。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-699">The GetThroughput operation is not supported in the US Government and China Microsoft Azure regions.</span></span>
* <span data-ttu-id="d3fe5-700">如果 vCenter Server 在各種 ESXi 主機上有兩部或多部 VM 具有相同的名稱或 IP 位址，此工具就無法剖析 VM。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-700">The tool cannot profile VMs if the vCenter server has two or more VMs with the same name or IP address across various ESXi hosts.</span></span> <span data-ttu-id="d3fe5-701">在此版本中，此工具會略過 VMListFile 中重複 VM 名稱或 IP 位址的剖析。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-701">In this version, the tool skips profiling for duplicate VM names or IP addresses in the VMListFile.</span></span> <span data-ttu-id="d3fe5-702">因應措施是使用 ESXi 主機 (而非 vCenter Server) 剖析 VM。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-702">The workaround is to profile the VMs by using an ESXi host instead of the vCenter server.</span></span> <span data-ttu-id="d3fe5-703">您必須為每部 ESXi 主機執行一個執行個體。</span><span class="sxs-lookup"><span data-stu-id="d3fe5-703">You must run one instance for each ESXi host.</span></span>
