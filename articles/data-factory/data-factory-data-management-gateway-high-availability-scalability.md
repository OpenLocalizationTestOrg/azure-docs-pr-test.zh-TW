---
title: "使用 Azure Data Factory 中的資料管理閘道器的 aaaHigh 可用性 |Microsoft 文件"
description: "本文說明如何藉由新增更多節點來相應放大資料管理閘道，以及藉由增加節點中可以並行執行的作業數來相應增加。"
services: data-factory
documentationcenter: 
author: nabhishek
manager: jhubbard
editor: 
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: abnarain
ms.openlocfilehash: 925f63728e23596bca2655636f6535b509fce0b1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="data-management-gateway---high-availability-and-scalability-preview"></a><span data-ttu-id="4e0ac-103">資料管理閘道 - 高可用性和延展性 (預覽)</span><span class="sxs-lookup"><span data-stu-id="4e0ac-103">Data Management Gateway - high availability and scalability (Preview)</span></span>
<span data-ttu-id="4e0ac-104">本文可協助您使用資料管理閘道來設定高可用性和延展性解決方案。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-104">This article helps you configure high availability and scalability solution with Data Management Gateway.</span></span>    

> [!NOTE]
> <span data-ttu-id="4e0ac-105">本文假設您已熟悉資料管理閘道的基本概念。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-105">This article assumes that you are already familiar with basics of Data Management Gateway.</span></span> <span data-ttu-id="4e0ac-106">如果您並不熟悉，請參閱[資料管理閘道](data-factory-data-management-gateway.md)。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-106">If you are not, see [Data Management Gateway](data-factory-data-management-gateway.md).</span></span>

><span data-ttu-id="4e0ac-107">**資料管理閘道版本 2.12.xxxx.x 和更新版本正式支援此預覽功能**。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-107">**This preview feature is officially supported on Data Management Gateway version 2.12.xxxx.x and above**.</span></span> <span data-ttu-id="4e0ac-108">請確定您使用版本 2.12.xxxx.x 或更新版本。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-108">Please make sure you are using version 2.12.xxxx.x or above.</span></span> <span data-ttu-id="4e0ac-109">下載 hello 最新版本的資料管理閘道器[這裡](https://www.microsoft.com/download/details.aspx?id=39717)。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-109">Download hello latest version of Data Management Gateway [here](https://www.microsoft.com/download/details.aspx?id=39717).</span></span>

## <a name="overview"></a><span data-ttu-id="4e0ac-110">概觀</span><span class="sxs-lookup"><span data-stu-id="4e0ac-110">Overview</span></span>
<span data-ttu-id="4e0ac-111">您可以將從 hello 入口網站的單一邏輯閘道的多部在內部部署電腦上安裝資料管理閘道器產生關聯。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-111">You can associate data management gateways that are installed on multiple on-premises machines with a single logical gateway from hello portal.</span></span> <span data-ttu-id="4e0ac-112">這些機器稱為**節點**。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-112">These machines are called **nodes**.</span></span> <span data-ttu-id="4e0ac-113">您最多可以有太**四個節點**邏輯閘道相關聯。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-113">You can have up too**four nodes** associated with a logical gateway.</span></span> <span data-ttu-id="4e0ac-114">邏輯閘道會有多個節點 （在內部部署機器以安裝閘道器） 的 hello 優點為：</span><span class="sxs-lookup"><span data-stu-id="4e0ac-114">hello benefits of having multiple nodes (on-premises machines with gateway installed) for a logical gateway are:</span></span>  

- <span data-ttu-id="4e0ac-115">提升內部部署機器和雲端資料存放區之間的資料移動效能。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-115">Improve performance of data movement between on-premises and cloud data stores.</span></span>  
- <span data-ttu-id="4e0ac-116">如果其中一個 hello 節點關閉基於某些原因，其他節點是移動 hello 資料仍然可用。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-116">If one of hello nodes goes down for some reason, other nodes are still available for moving hello data.</span></span> 
- <span data-ttu-id="4e0ac-117">如果其中一個 hello 節點需要 toobe 離線進行維護時，其他節點是移動 hello 資料仍然可用。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-117">If one of hello nodes need toobe taken offline for maintenance, other nodes are still available for moving hello data.</span></span>

<span data-ttu-id="4e0ac-118">您也可以設定 hello 數目**並行資料移動作業**可以執行於節點 tooscale hello 功能，在內部部署和雲端之間移動資料的資料存放區。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-118">You can also configure hello number of **concurrent data movement jobs** that can run on a node tooscale up hello capability of moving data between on-premises and cloud data stores.</span></span> 

<span data-ttu-id="4e0ac-119">使用 hello Azure 入口網站，您可以監視 hello 狀態這些節點，可幫助您決定是否 tooadd 或從 hello 邏輯閘道移除節點。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-119">Using hello Azure portal, you can monitor hello status of these nodes, which helps you decide whether tooadd or remove a node from hello logical gateway.</span></span> 

## <a name="architecture"></a><span data-ttu-id="4e0ac-120">架構</span><span class="sxs-lookup"><span data-stu-id="4e0ac-120">Architecture</span></span> 
<span data-ttu-id="4e0ac-121">hello 下列圖表提供 hello 架構概觀的延展性和可用性功能的 hello 資料管理閘道器：</span><span class="sxs-lookup"><span data-stu-id="4e0ac-121">hello following diagram provides hello architecture overview of scalability and availability feature of hello Data Management Gateway:</span></span> 

![資料管理閘道 - 高可用性和延展性](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-high-availability-and-scalability.png)

<span data-ttu-id="4e0ac-123">A**邏輯閘道**是您加入 tooa 資料 factory hello Azure 入口網站中的 hello 閘道。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-123">A **logical gateway** is hello gateway you add tooa data factory in hello Azure portal.</span></span> <span data-ttu-id="4e0ac-124">以前，您只能將一個內部部署 Windows 機器關聯到安裝了邏輯閘道的資料管理閘道。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-124">Earlier, you could associate only one on-premises Windows machine with Data Management Gateway installed with a logical gateway.</span></span> <span data-ttu-id="4e0ac-125">這個內部部署閘道機器稱為節點。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-125">This on-premises gateway machine is called a node.</span></span> <span data-ttu-id="4e0ac-126">現在，您可以將關聯設定太**四個實體節點**與邏輯的閘道。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-126">Now, you can associate up too**four physical nodes** with a logical gateway.</span></span> <span data-ttu-id="4e0ac-127">具有多個節點的邏輯閘道稱為**多節點閘道**。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-127">A logical gateway with multiple nodes is called a **multi-node gateway**.</span></span>  

<span data-ttu-id="4e0ac-128">而這些節點全都是**作用中**狀態。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-128">All these nodes are **active**.</span></span> <span data-ttu-id="4e0ac-129">它們都可以處理資料移動作業 toomove 資料在內部部署和雲端之間的資料存放區。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-129">They all can process data movement jobs toomove data between on-premises and cloud data stores.</span></span> <span data-ttu-id="4e0ac-130">其中一個 hello 節點做為發送器和背景工作。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-130">One of hello nodes act as both dispatcher and worker.</span></span> <span data-ttu-id="4e0ac-131">Hello 群組中的其他節點是背景工作節點。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-131">Other nodes in hello groups are worker nodes.</span></span> <span data-ttu-id="4e0ac-132">A**發送器**節點提取的資料移動工作/作業從 hello 雲端服務，並將其分派 tooworker 節點 （包括本身）。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-132">A **dispatcher** node pulls data movement tasks/jobs from hello cloud service and dispatches them tooworker nodes (including itself).</span></span> <span data-ttu-id="4e0ac-133">A**工作者**節點執行內部部署與雲端之間資料移動作業 toomove 資料資料存放區。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-133">A **worker** node executes data movement jobs toomove data between on-premises and cloud data stores.</span></span> <span data-ttu-id="4e0ac-134">所有節點都是背景工作節點。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-134">All nodes are workers.</span></span> <span data-ttu-id="4e0ac-135">只有一個節點可以既是發送器節點，又是背景工作節點。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-135">Only one node can be both dispatch and worker.</span></span>    

<span data-ttu-id="4e0ac-136">您通常可以與一個節點開始，**向外延展**tooadd 為 hello 現有的節點上的多個節點爆 hello 資料移動負載。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-136">You may typically start with one node and **scale out** tooadd more nodes as hello existing node(s) are overwhelmed with hello data movement load.</span></span> <span data-ttu-id="4e0ac-137">您也可以**向上延展**hello 閘道節點的資料移動功能藉由增加 hello 所允許 toorun hello 節點的並行工作數。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-137">You can also **scale up** hello data movement capability of a gateway node by increasing hello number of concurrent jobs that are allowed toorun on hello node.</span></span> <span data-ttu-id="4e0ac-138">這項功能也可與單一節點閘道 （即使未啟用 hello 延展性和可用性功能）。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-138">This capability is also available with a single-node gateway (even when hello scalability and availability feature is not enabled).</span></span> 

<span data-ttu-id="4e0ac-139">閘道具有多個節點會保留 hello 資料存放區認證同步的所有節點。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-139">A gateway with multiple nodes keeps hello data store credentials in sync across all nodes.</span></span> <span data-ttu-id="4e0ac-140">如果沒有節點的連線問題，hello 認證可能不同步。當您將使用閘道的內部部署資料存放區的認證時，它會將認證儲存在 hello 發送器/背景工作節點上。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-140">If there is a node-to-node connectivity issue, hello credentials may be out of sync. When you set credentials for an on-premises data store that uses a gateway, it saves credentials on hello dispatcher/worker node.</span></span> <span data-ttu-id="4e0ac-141">與其他背景工作角色節點的 hello 發送器節點同步。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-141">hello dispatcher node syncs with other worker nodes.</span></span> <span data-ttu-id="4e0ac-142">這個程序稱為**認證同步**。 可以是 hello 節點之間的通訊通道**加密**所公開的 SSL/TLS 憑證。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-142">This process is known as **credentials sync**. hello communication channel between nodes can be **encrypted** by a public SSL/TLS certificate.</span></span> 

## <a name="set-up-a-multi-node-gateway"></a><span data-ttu-id="4e0ac-143">設定多節點閘道</span><span class="sxs-lookup"><span data-stu-id="4e0ac-143">Set up a multi-node gateway</span></span>
<span data-ttu-id="4e0ac-144">本節假設您已經透過下列兩個發行項或熟悉的概念，這些文章中的 hello:</span><span class="sxs-lookup"><span data-stu-id="4e0ac-144">This section assumes that you have gone through hello following two articles or familiar with concepts in these articles:</span></span> 

- <span data-ttu-id="4e0ac-145">[資料管理閘道器](data-factory-data-management-gateway.md)-提供 hello 閘道的詳細的概觀。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-145">[Data Management Gateway](data-factory-data-management-gateway.md) - provides a detailed overview of hello gateway.</span></span>
- <span data-ttu-id="4e0ac-146">[在內部部署和雲端資料存放區之間移動資料](data-factory-move-data-between-onprem-and-cloud.md) - 包含如何使用具有單一節點之閘道的逐步指示。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-146">[Move data between on-premises and cloud data stores](data-factory-move-data-between-onprem-and-cloud.md) - contains a walkthrough with step-by-step instructions for using a gateway with a single node.</span></span>  

> [!NOTE]
> <span data-ttu-id="4e0ac-147">在內部部署 Windows 電腦上安裝資料管理閘道器之前，請參閱中所列必要條件[hello 主要文章](data-factory-data-management-gateway.md#prerequisites)。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-147">Before you install a data management gateway on an on-premises Windows machine, see prerequisites listed in [hello main article](data-factory-data-management-gateway.md#prerequisites).</span></span>

1. <span data-ttu-id="4e0ac-148">在 hello[逐步解說](data-factory-move-data-between-onprem-and-cloud.md#create-gateway)，在建立邏輯閘道時，啟用 hello**高可用性和延展性**功能。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-148">In hello [walkthrough](data-factory-move-data-between-onprem-and-cloud.md#create-gateway), while creating a logical gateway, enable hello **High Availability & Scalability** feature.</span></span> 

    ![資料管理閘道 - 啟用高可用性和延展性](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-enable-high-availability-scalability.png)
2. <span data-ttu-id="4e0ac-150">在 hello**設定**頁面上，使用**Express 安裝程式**或**手動安裝**連結 tooinstall hello 第一個節點 （在內部部署 Windows 電腦） 上的閘道。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-150">In hello **Configure** page, use either **Express Setup** or **Manual Setup** link tooinstall a gateway on hello first node (an on-premises Windows machine).</span></span>

    ![資料管理閘道 - 快速設定或手動設定](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-express-manual-setup.png)

    > [!NOTE]
    > <span data-ttu-id="4e0ac-152">如果您使用 hello 快速安裝選項，而且不會加密完成 hello 節點對節點通訊。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-152">If you use hello express setup option, hello node-to-node communication is done without encryption.</span></span> <span data-ttu-id="4e0ac-153">hello 節點名稱為與 hello 電腦名稱相同。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-153">hello node name is same as hello machine name.</span></span> <span data-ttu-id="4e0ac-154">如果 hello 節點通訊需要 toobe 加密，或是您想 toospecify 您選擇的節點名稱，請使用手動安裝。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-154">Use manual setup if hello node-node communication needs toobe encrypted or you want toospecify a node name of your choice.</span></span> <span data-ttu-id="4e0ac-155">您之後就無法編輯節點名稱。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-155">Node names cannot be edited later.</span></span>
3. <span data-ttu-id="4e0ac-156">如果您選擇 [快速設定]</span><span class="sxs-lookup"><span data-stu-id="4e0ac-156">If you choose **express setup**</span></span>
    1. <span data-ttu-id="4e0ac-157">您會看到 hello hello 閘道的安裝成功之後，下列訊息：</span><span class="sxs-lookup"><span data-stu-id="4e0ac-157">You see hello following message after hello gateway is successfully installed:</span></span>

        ![資料管理閘道 - 快速設定成功](media/data-factory-data-management-gateway-high-availability-scalability/express-setup-success.png)
    2. <span data-ttu-id="4e0ac-159">啟動資料管理 Configuration Manager hello 閘道，依照[這些指示](data-factory-data-management-gateway.md#configuration-manager)。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-159">Launch Data Management Configuration Manager for hello gateway by following [these instructions](data-factory-data-management-gateway.md#configuration-manager).</span></span> <span data-ttu-id="4e0ac-160">您會看到 hello 閘道名稱、 節點名稱、 狀態、 等等。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-160">You see hello gateway name, node name, status, etc.</span></span>

        ![資料管理閘道 - 安裝成功](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-installation-success.png)
4. <span data-ttu-id="4e0ac-162">如果您選擇 [手動設定]：</span><span class="sxs-lookup"><span data-stu-id="4e0ac-162">If you choose **manual setup**:</span></span>
    1. <span data-ttu-id="4e0ac-163">從 hello Microsoft Download Center 下載 hello 安裝封裝，您的電腦上執行 tooinstall 閘道。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-163">Download hello installation package from hello Microsoft Download Center, run it tooinstall gateway on your machine.</span></span>
    2. <span data-ttu-id="4e0ac-164">使用 hello**驗證金鑰**從 hello**設定**頁面 tooregister hello 閘道。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-164">Use hello **authentication key** from hello **Configure** page tooregister hello gateway.</span></span>
    
        ![資料管理閘道 - 安裝成功](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-authentication-key.png)
    3. <span data-ttu-id="4e0ac-166">在 [hello**新的 gateway 節點**] 頁面上，您可以提供自訂**名稱**toohello 的 gateway 節點。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-166">In hello **New gateway node** page, you can provide a custom **name** toohello gateway node.</span></span> <span data-ttu-id="4e0ac-167">根據預設，節點名稱為與 hello 電腦名稱相同。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-167">By default, node name is same as hello machine name.</span></span>    

        ![資料管理閘道 - 指定名稱](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-name.png)
    4. <span data-ttu-id="4e0ac-169">在 hello 下一個頁面上，您可以選擇是否太**啟用節點對節點通訊的加密**。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-169">In hello next page, you can choose whether too**enable encryption for node-to-node communication**.</span></span> <span data-ttu-id="4e0ac-170">按一下**略過**toodisable 加密 （預設值）。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-170">Click **Skip** toodisable encryption (default).</span></span>

        ![資料管理閘道 - 啟用加密](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-node-encryption.png)  
    
        > [!NOTE]
        > <span data-ttu-id="4e0ac-172">才支援變更的加密模式，當您將單一閘道節點在 hello 邏輯閘道。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-172">Changing of encryption mode is only supported when you have a single gateway node in hello logical gateway.</span></span> <span data-ttu-id="4e0ac-173">toochange hello 加密模式時，閘道有多個節點，執行下列步驟 hello： 刪除所有除了一個節點的 hello 節點、 變更 hello 加密模式中，然後再將 hello 節點一次。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-173">toochange hello encryption mode when a gateway has multiple nodes, do hello following steps: delete all hello nodes except one node, change hello encryption mode, and then add hello nodes again.</span></span>
        > 
        > <span data-ttu-id="4e0ac-174">如需 TLS/SSL 憑證的使用需求清單，請參閱 [TLS/SSL 憑證需求](#tlsssl-certificate-requirements)一節。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-174">See [TLS/SSL certificate requirements](#tlsssl-certificate-requirements) section for a list of requirements for using an TLS/SSL certificate.</span></span> 
    5. <span data-ttu-id="4e0ac-175">已成功安裝 hello 閘道之後，請按一下 啟動 Configuration Manager:</span><span class="sxs-lookup"><span data-stu-id="4e0ac-175">After hello gateway is successfully installed, click Launch Configuration Manager:</span></span>
    
        ![手動設定 - 啟動組態管理員](media/data-factory-data-management-gateway-high-availability-scalability/manual-setup-launch-configuration-manager.png)   
    6. <span data-ttu-id="4e0ac-177">您在 hello 節點 （在內部部署 Windows 電腦），會顯示連線狀態，請參閱資料管理閘道組態管理員**閘道名稱**，和**節點名稱**。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-177">you see Data Management Gateway Configuration Manager on hello node (on-premises Windows machine), which shows connectivity status, **gateway name**, and **node name**.</span></span>  

        ![資料管理閘道 - 安裝成功](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-installation-success.png)

        > [!NOTE]
        > <span data-ttu-id="4e0ac-179">如果您要佈建 Azure VM 上的 hello 閘道，您可以使用[GitHub 上的此 Azure Resource Manager 範本](https://github.com/xiaoyingLJ/vms-with-multiple-data-management-gateway)。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-179">If you are provisioning hello gateway on an Azure VM, you can use [this Azure Resource Manager template on GitHub](https://github.com/xiaoyingLJ/vms-with-multiple-data-management-gateway).</span></span> <span data-ttu-id="4e0ac-180">此指令碼會建立邏輯閘道、 資料管理閘道已安裝軟體，以設定 Vm 並與 hello 邏輯閘道註冊它們。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-180">This script creates a logical gateway, sets up VMs with Data Management Gateway software installed, and registers them with hello logical gateway.</span></span> 
6. <span data-ttu-id="4e0ac-181">在 Azure 入口網站啟動 hello**閘道**頁面：</span><span class="sxs-lookup"><span data-stu-id="4e0ac-181">In Azure portal, launch hello **Gateway** page:</span></span> 
    1. <span data-ttu-id="4e0ac-182">Hello 資料 factory 首頁 hello 入口網站中，按一下**連結的服務**。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-182">On hello data factory home page in hello portal, click **Linked Services**.</span></span>
    
        ![Data Factory 首頁](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-home-page.png)
    2. <span data-ttu-id="4e0ac-184">選取 hello**閘道**toosee hello**閘道**頁面：</span><span class="sxs-lookup"><span data-stu-id="4e0ac-184">select hello **gateway** toosee hello **Gateway** page:</span></span>
    
        ![Data Factory 首頁](media/data-factory-data-management-gateway-high-availability-scalability/linked-services-gateway.png)
    4. <span data-ttu-id="4e0ac-186">您會看到 hello**閘道**頁面：</span><span class="sxs-lookup"><span data-stu-id="4e0ac-186">You see hello **Gateway** page:</span></span>   

        ![具有單一節點之閘道的檢視](media/data-factory-data-management-gateway-high-availability-scalability/gateway-first-node-portal-view.png) 
7. <span data-ttu-id="4e0ac-188">按一下**加入節點**hello 工具列 tooadd 節點 toohello 邏輯閘道上。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-188">Click **Add Node** on hello toolbar tooadd a node toohello logical gateway.</span></span> <span data-ttu-id="4e0ac-189">如果您計劃 toouse 快速安裝，請從 hello 將會新增為節點 toohello 閘道的內部部署機器執行此步驟。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-189">If you are planning toouse express setup, do this step from hello on-premises machine that will be added as a node toohello gateway.</span></span> 

    ![資料管理閘道 - 新增節點功能表](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-add-node-menu.png)
8. <span data-ttu-id="4e0ac-191">步驟都類似 toosetting hello 第一個節點。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-191">Steps are similar toosetting up hello first node.</span></span> <span data-ttu-id="4e0ac-192">Configuration Manager UI hello 可讓您設定 hello 節點名稱，如果您選擇 hello 手動安裝選項：</span><span class="sxs-lookup"><span data-stu-id="4e0ac-192">hello Configuration Manager UI lets you set hello node name if you choose hello manual installation option:</span></span> 

    ![組態管理員 - 安裝第二個閘道](media/data-factory-data-management-gateway-high-availability-scalability/install-second-gateway.png)
9. <span data-ttu-id="4e0ac-194">Hello 閘道 hello 節點上安裝成功之後，hello Configuration Manager 工具會顯示下列畫面 hello:</span><span class="sxs-lookup"><span data-stu-id="4e0ac-194">After hello gateway is installed successfully on hello node, hello Configuration Manager tool displays hello following screen:</span></span>  

    ![組態管理員 - 安裝第二個閘道成功](media/data-factory-data-management-gateway-high-availability-scalability/second-gateway-installation-successful.png)
10. <span data-ttu-id="4e0ac-196">如果您開啟 hello**閘道**頁面在 hello 入口網站中，您會看到兩個閘道節點現在：</span><span class="sxs-lookup"><span data-stu-id="4e0ac-196">If you open hello **Gateway** page in hello portal, you see two gateway nodes now:</span></span> 

    ![閘道與 hello 入口網站中的兩個節點](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring.png)
11. <span data-ttu-id="4e0ac-198">toodelete 閘道] 節點中，按一下**刪除節點**hello 在工具列上，選取 [hello 節點 toodelete，然後再按一下**刪除**從 hello 工具列。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-198">toodelete a gateway node, click **Delete Node** on hello toolbar, select hello node you want toodelete, and then click **Delete** from hello toolbar.</span></span> <span data-ttu-id="4e0ac-199">這個動作會刪除從 hello 群組 hello 選取的節點。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-199">This action deletes hello selected node from hello group.</span></span> <span data-ttu-id="4e0ac-200">請注意，此動作不會解除安裝 hello 資料管理閘道軟體從 hello 節點 （在內部部署 Windows 電腦）。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-200">Note that this action does not uninstall hello data management gateway software from hello node (on-premises Windows machine).</span></span> <span data-ttu-id="4e0ac-201">使用**新增或移除程式**hello 內部 toouninstall hello 閘道上的控制台 中。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-201">Use **Add or remove programs** in Control Panel on hello on-premises toouninstall hello gateway.</span></span> <span data-ttu-id="4e0ac-202">當您從 hello 節點解除安裝閘道時，便會自動刪除 hello 入口網站中。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-202">When you uninstall gateway from hello node, it's automatically deleted in hello portal.</span></span>   

## <a name="upgrade-an-existing-gateway"></a><span data-ttu-id="4e0ac-203">升級現有閘道</span><span class="sxs-lookup"><span data-stu-id="4e0ac-203">Upgrade an existing gateway</span></span>
<span data-ttu-id="4e0ac-204">您可以升級現有閘道 toouse hello 高可用性和延展性功能。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-204">You can upgrade an existing gateway toouse hello high availability and scalability feature.</span></span> <span data-ttu-id="4e0ac-205">這項功能僅適用於具有 hello 資料管理閘道器版本的節點 > = 2.12.xxxx。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-205">This feature works only with nodes that have hello data management gateway of version >= 2.12.xxxx.</span></span> <span data-ttu-id="4e0ac-206">您可以看到資料管理閘道器安裝在電腦中 hello hello 版本**協助**hello 資料管理閘道組態管理員 索引標籤。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-206">You can see hello version of data management gateway installed on a machine in hello **Help** tab of hello Data Management Gateway Configuration Manager.</span></span> 

1. <span data-ttu-id="4e0ac-207">更新 hello 閘道 hello 在內部部署機器 toohello 最新版本上遵循下載並執行的 MSI 安裝程式套件從 hello [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=39717)。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-207">Update hello gateway on hello on-premises machine toohello latest version by following by downloading and running an MSI setup package from hello [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=39717).</span></span> <span data-ttu-id="4e0ac-208">如需詳細資料，請參閱[安裝](data-factory-data-management-gateway.md#installation)一節。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-208">See [installation](data-factory-data-management-gateway.md#installation) section for details.</span></span>  
2. <span data-ttu-id="4e0ac-209">瀏覽 toohello Azure 入口網站。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-209">Navigate toohello Azure portal.</span></span> <span data-ttu-id="4e0ac-210">啟動 hello **Data Factory 頁面**data factory。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-210">Launch hello **Data Factory page** for your data factory.</span></span> <span data-ttu-id="4e0ac-211">按一下連結服務磚 toolaunch hello**連結的服務頁面**。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-211">Click Linked services tile toolaunch hello **linked services page**.</span></span> <span data-ttu-id="4e0ac-212">選取 hello 閘道 toolaunch hello**閘道頁面**。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-212">Select hello gateway toolaunch hello **gateway page**.</span></span> <span data-ttu-id="4e0ac-213">按一下並啟用**預覽功能**hello 下列影像所示：</span><span class="sxs-lookup"><span data-stu-id="4e0ac-213">Click and enable **Preview Feature** as shown in hello following image:</span></span> 

    ![資料管理閘道 - 啟用預覽功能](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-existing-gateway-enable-high-availability.png)   
2. <span data-ttu-id="4e0ac-215">一旦 hello 入口網站啟用 hello 預覽功能，請關閉所有頁面。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-215">Once hello preview feature is enabled in hello portal, close all pages.</span></span> <span data-ttu-id="4e0ac-216">重新開啟 hello**閘道頁面**toosee hello 新 preview 使用者介面 (UI)。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-216">Reopen hello **gateway page** toosee hello new preview user interface (UI).</span></span>
 
    ![資料管理閘道 - 啟用預覽功能成功](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-preview-success.png)

    ![資料管理閘道 - 預覽 UI](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-preview.png)

    > [!NOTE]
    > <span data-ttu-id="4e0ac-219">Hello 在升級期間，hello 第一個節點的名稱會是 hello hello 機器名稱。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-219">During hello upgrade, name of hello first node is hello name of hello machine.</span></span> 
3. <span data-ttu-id="4e0ac-220">現在，新增節點。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-220">Now, add a node.</span></span> <span data-ttu-id="4e0ac-221">在 hello**閘道**頁面上，按一下**加入節點**。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-221">In hello **Gateway** page, click **Add Node**.</span></span>  

    ![資料管理閘道 - 新增節點功能表](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-add-node-menu.png)

    <span data-ttu-id="4e0ac-223">請遵循指示 hello 前一個區段 tooset hello 節點。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-223">Follow instructions from hello previous section tooset up hello node.</span></span> 

### <a name="installation-best-practices"></a><span data-ttu-id="4e0ac-224">安裝最佳做法</span><span class="sxs-lookup"><span data-stu-id="4e0ac-224">Installation best practices</span></span>

- <span data-ttu-id="4e0ac-225">Hello hello 閘道的主機電腦上設定的電源計劃 hello 機器不休眠。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-225">Configure power plan on hello host machine for hello gateway so that hello machine does not hibernate.</span></span> <span data-ttu-id="4e0ac-226">如果 hello 主機電腦休眠，hello 閘道沒有回應 toodata 要求。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-226">If hello host machine hibernates, hello gateway does not respond toodata requests.</span></span>
- <span data-ttu-id="4e0ac-227">備份 hello 與 hello 閘道相關聯的憑證。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-227">Back up hello certificate associated with hello gateway.</span></span>
- <span data-ttu-id="4e0ac-228">確定所有節點都有類似的設定 (建議選項) 以獲得理想的效能。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-228">Ensure all nodes are of similar configuration (recommended) for ideal performance.</span></span> 
- <span data-ttu-id="4e0ac-229">加入兩個以上的節點 tooensure 高可用性。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-229">Add at least two nodes tooensure high availability.</span></span>  

### <a name="tlsssl-certificate-requirements"></a><span data-ttu-id="4e0ac-230">TLS/SSL 憑證需求</span><span class="sxs-lookup"><span data-stu-id="4e0ac-230">TLS/SSL certificate requirements</span></span>
<span data-ttu-id="4e0ac-231">以下是 hello TLS/SSL 憑證，用來保護通訊，閘道節點之間的 hello 需求：</span><span class="sxs-lookup"><span data-stu-id="4e0ac-231">Here are hello requirements for hello TLS/SSL certificate that is used for securing communications between gateway nodes:</span></span>

- <span data-ttu-id="4e0ac-232">hello 憑證必須是公用信任的 X509 v3 憑證。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-232">hello certificate must be a publicly trusted X509 v3 certificate.</span></span>
- <span data-ttu-id="4e0ac-233">所有閘道節點都必須信任此憑證。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-233">All gateway nodes must trust this certificate.</span></span> 
- <span data-ttu-id="4e0ac-234">建議您使用公開 (第三方) 憑證授權單位 (CA) 所發出的憑證。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-234">We recommend that you use certificates that are issued by a public (third-party) certification authority (CA).</span></span>
- <span data-ttu-id="4e0ac-235">支援 Windows Server 2012 R2 所支援的任何 SSL 憑證金鑰大小。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-235">Supports any key size supported by Windows Server 2012 R2 for SSL certificates.</span></span>
- <span data-ttu-id="4e0ac-236">不支援使用 CNG 金鑰的憑證。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-236">Does not support certificates that use CNG keys.</span></span>
- <span data-ttu-id="4e0ac-237">支援萬用字元憑證。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-237">Wild-card certificates are supported.</span></span> 


## <a name="monitor-a-multi-node-gateway"></a><span data-ttu-id="4e0ac-238">監視多節點閘道</span><span class="sxs-lookup"><span data-stu-id="4e0ac-238">Monitor a multi-node gateway</span></span>
### <a name="multi-node-gateway-monitoring"></a><span data-ttu-id="4e0ac-239">多節點閘道監視</span><span class="sxs-lookup"><span data-stu-id="4e0ac-239">Multi-node gateway monitoring</span></span>
<span data-ttu-id="4e0ac-240">在 hello Azure 入口網站，您可以檢視幾乎是即時的資源使用情況 （CPU、 記憶體、 network(in/out) 等） 的快照集，閘道節點的狀態以及每個節點上。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-240">In hello Azure portal, you can view near-real time snapshot of resource utilization (CPU, memory, network(in/out), etc.) on each node along with statuses of gateway nodes.</span></span> 

![資料管理閘道 - 多節點監視](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring.png)

<span data-ttu-id="4e0ac-242">您可以啟用**進階設定**在 hello**閘道**頁面 toosee 進階計量，例如**網路**（in/out）**角色 （& s) 認證狀態**，這是在偵錯閘道問題很有幫助和**並行作業**（執行 / Limit） 這可以已修改 / 據以變更期間的效能微調。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-242">You can enable **Advanced Settings** in hello **Gateway** page toosee advanced metrics like **Network**(in/out), **Role & Credential Status**, which is helpful in debugging gateway issues, and **Concurrent Jobs** (Running/ Limit) which can be modified/ changed accordingly during performance tuning.</span></span> <span data-ttu-id="4e0ac-243">hello 下表提供 hello 中的資料行的描述**閘道節點**清單：</span><span class="sxs-lookup"><span data-stu-id="4e0ac-243">hello following table provides descriptions of columns in hello **Gateway Nodes** list:</span></span>  

<span data-ttu-id="4e0ac-244">監視屬性</span><span class="sxs-lookup"><span data-stu-id="4e0ac-244">Monitoring Property</span></span> | <span data-ttu-id="4e0ac-245">說明</span><span class="sxs-lookup"><span data-stu-id="4e0ac-245">Description</span></span>
:------------------ | :---------- 
<span data-ttu-id="4e0ac-246">名稱</span><span class="sxs-lookup"><span data-stu-id="4e0ac-246">Name</span></span> | <span data-ttu-id="4e0ac-247">Hello 邏輯閘道和節點與 hello 閘道相關聯的名稱。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-247">Name of hello logical gateway and nodes associated with hello gateway.</span></span>  
<span data-ttu-id="4e0ac-248">狀態</span><span class="sxs-lookup"><span data-stu-id="4e0ac-248">Status</span></span> | <span data-ttu-id="4e0ac-249">Hello 邏輯閘道和 hello 閘道節點的狀態。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-249">Status of hello logical gateway and hello gateway nodes.</span></span> <span data-ttu-id="4e0ac-250">範例：線上/離線/受限制/等等。如需這些狀態的相關資訊，請參閱[閘道狀態](#gateway-status)一節。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-250">Example: Online/Offline/Limited/etc. For information about these statuses, See [Gateway status](#gateway-status) section.</span></span> 
<span data-ttu-id="4e0ac-251">版本</span><span class="sxs-lookup"><span data-stu-id="4e0ac-251">Version</span></span> | <span data-ttu-id="4e0ac-252">顯示 hello hello 邏輯閘道版本和每個閘道節點。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-252">Shows hello version of hello logical gateway and each gateway node.</span></span> <span data-ttu-id="4e0ac-253">hello hello 邏輯閘道版本取決於大部分的 hello 群組中的節點的版本。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-253">hello version of hello logical gateway is determined based on version of majority of nodes in hello group.</span></span> <span data-ttu-id="4e0ac-254">如果沒有節點具有 hello 邏輯閘道安裝程式中的不同版本，只有 hello 節點與 hello 正確為 hello 邏輯閘道函式相同的版本號碼。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-254">If there are nodes with different versions in hello logical gateway setup, only hello nodes with hello same version number as hello logical gateway function properly.</span></span> <span data-ttu-id="4e0ac-255">其他在 hello limited 模式下，需要 toobe 手動更新 （只有大小寫自動更新就會失敗）。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-255">Others are in hello limited mode and need toobe manually updated (only in case auto-update fails).</span></span> 
<span data-ttu-id="4e0ac-256">可用的記憶體</span><span class="sxs-lookup"><span data-stu-id="4e0ac-256">Available memory</span></span> | <span data-ttu-id="4e0ac-257">閘道節點上可用的記憶體。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-257">Available memory on a gateway node.</span></span> <span data-ttu-id="4e0ac-258">這個值是近乎即時的快照集。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-258">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="4e0ac-259">CPU 使用率</span><span class="sxs-lookup"><span data-stu-id="4e0ac-259">CPU utilization</span></span> | <span data-ttu-id="4e0ac-260">閘道節點的 CPU 使用率。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-260">CPU utilization of a gateway node.</span></span> <span data-ttu-id="4e0ac-261">這個值是近乎即時的快照集。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-261">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="4e0ac-262">網路功能 (輸入/輸出)</span><span class="sxs-lookup"><span data-stu-id="4e0ac-262">Networking (In/Out)</span></span> | <span data-ttu-id="4e0ac-263">閘道節點的網路使用率。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-263">Network utilization of a gateway node.</span></span> <span data-ttu-id="4e0ac-264">這個值是近乎即時的快照集。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-264">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="4e0ac-265">並行作業 (執行中/限制)</span><span class="sxs-lookup"><span data-stu-id="4e0ac-265">Concurrent Jobs (Running/ Limit)</span></span> | <span data-ttu-id="4e0ac-266">每個節點上執行的作業或工作數目。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-266">Number of jobs or tasks running on each node.</span></span> <span data-ttu-id="4e0ac-267">這個值是近乎即時的快照集。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-267">This value is a near real-time snapshot.</span></span> <span data-ttu-id="4e0ac-268">限制表示 hello 最大並行的工作的每個節點。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-268">Limit signifies hello maximum concurrent jobs for each node.</span></span> <span data-ttu-id="4e0ac-269">這個值是根據 hello 機器大小所定義。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-269">This value is defined based on hello machine size.</span></span> <span data-ttu-id="4e0ac-270">您可以增加並行工作執行，在進階案例中，向上的 hello 限制 tooscale 其中 CPU / 記憶體 / 網路使用率過低，但活動會逾時。這項功能也可與單一節點閘道 （即使未啟用 hello 延展性和可用性功能）。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-270">You can increase hello limit tooscale up concurrent job execution in advanced scenarios, where CPU/ memory/ network is under-utilized, but activities are timing out. This capability is also available with a single-node gateway (even when hello scalability and availability feature is not enabled).</span></span> <span data-ttu-id="4e0ac-271">如需詳細資訊，請參閱[調整考量](#scale-considerations)一節。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-271">For more information, see [scale considerations](#scale-considerations) section.</span></span> 
<span data-ttu-id="4e0ac-272">角色</span><span class="sxs-lookup"><span data-stu-id="4e0ac-272">Role</span></span> | <span data-ttu-id="4e0ac-273">有兩種角色 – 發送器和背景工作角色。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-273">There are two types of roles – Dispatcher and worker.</span></span> <span data-ttu-id="4e0ac-274">所有節點都都會背景工作，這表示它們都可以使用的 tooexecute 作業。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-274">All nodes are workers, which means they can all be used tooexecute jobs.</span></span> <span data-ttu-id="4e0ac-275">沒有只有一個發送器節點，其使用的 toopull 工作/作業從雲端服務，並分派 toodifferent 背景工作節點 （包括本身）。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-275">There is only one dispatcher node, which is used toopull tasks/jobs from cloud services and dispatch them toodifferent worker nodes (including itself).</span></span> 

![資料管理閘道 - 進階的多節點監視](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring-advanced.png)

### <a name="gateway-status"></a><span data-ttu-id="4e0ac-277">閘道狀態</span><span class="sxs-lookup"><span data-stu-id="4e0ac-277">Gateway status</span></span>

<span data-ttu-id="4e0ac-278">hello 下表提供可能的狀態的**閘道節點**:</span><span class="sxs-lookup"><span data-stu-id="4e0ac-278">hello following table provides possible statuses of a **gateway node**:</span></span> 

<span data-ttu-id="4e0ac-279">狀態</span><span class="sxs-lookup"><span data-stu-id="4e0ac-279">Status</span></span>  | <span data-ttu-id="4e0ac-280">註解/案例</span><span class="sxs-lookup"><span data-stu-id="4e0ac-280">Comments/Scenarios</span></span>
:------- | :------------------
<span data-ttu-id="4e0ac-281">線上</span><span class="sxs-lookup"><span data-stu-id="4e0ac-281">Online</span></span> | <span data-ttu-id="4e0ac-282">TooData Factory 服務連接的節點。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-282">Node connected tooData Factory service.</span></span>
<span data-ttu-id="4e0ac-283">離線</span><span class="sxs-lookup"><span data-stu-id="4e0ac-283">Offline</span></span> | <span data-ttu-id="4e0ac-284">節點已離線。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-284">Node is offline.</span></span>
<span data-ttu-id="4e0ac-285">升級中</span><span class="sxs-lookup"><span data-stu-id="4e0ac-285">Upgrading</span></span> | <span data-ttu-id="4e0ac-286">hello 節點正在自動更新。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-286">hello node is being auto-updated.</span></span>
<span data-ttu-id="4e0ac-287">限制</span><span class="sxs-lookup"><span data-stu-id="4e0ac-287">Limited</span></span> | <span data-ttu-id="4e0ac-288">由於 tooConnectivity 問題。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-288">Due tooConnectivity issue.</span></span> <span data-ttu-id="4e0ac-289">可能是由於在 tooHTTP 連接埠 8050 問題、 服務匯流排連線問題或認證同步處理問題。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-289">May be due tooHTTP port 8050 issue, service bus connectivity issue, or credential sync issue.</span></span> 
<span data-ttu-id="4e0ac-290">非使用中</span><span class="sxs-lookup"><span data-stu-id="4e0ac-290">Inactive</span></span> | <span data-ttu-id="4e0ac-291">節點位在不同於其他大多數節點 hello 組態設定。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-291">Node is in a configuration different from hello configuration of other majority nodes.</span></span><br/><br/> <span data-ttu-id="4e0ac-292">它無法連線 tooother 節點時，節點可以是作用中。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-292">A node can be inactive when it cannot connect tooother nodes.</span></span> 


<span data-ttu-id="4e0ac-293">hello 下表提供可能的狀態的**邏輯閘道**。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-293">hello following table provides possible statuses of a **logical gateway**.</span></span> <span data-ttu-id="4e0ac-294">hello 閘道狀態取決於 hello 閘道節點的狀態。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-294">hello gateway status depends on statuses of hello gateway nodes.</span></span> 

<span data-ttu-id="4e0ac-295">狀態</span><span class="sxs-lookup"><span data-stu-id="4e0ac-295">Status</span></span> | <span data-ttu-id="4e0ac-296">註解</span><span class="sxs-lookup"><span data-stu-id="4e0ac-296">Comments</span></span>
:----- | :-------
<span data-ttu-id="4e0ac-297">需要註冊</span><span class="sxs-lookup"><span data-stu-id="4e0ac-297">Needs Registration</span></span> | <span data-ttu-id="4e0ac-298">沒有節點尚未註冊的 toothis 邏輯閘道</span><span class="sxs-lookup"><span data-stu-id="4e0ac-298">No node is yet registered toothis logical gateway</span></span>
<span data-ttu-id="4e0ac-299">線上</span><span class="sxs-lookup"><span data-stu-id="4e0ac-299">Online</span></span> | <span data-ttu-id="4e0ac-300">閘道節點已連線</span><span class="sxs-lookup"><span data-stu-id="4e0ac-300">Gateway Nodes are online</span></span>
<span data-ttu-id="4e0ac-301">離線</span><span class="sxs-lookup"><span data-stu-id="4e0ac-301">Offline</span></span> | <span data-ttu-id="4e0ac-302">沒有處於線上狀態的節點。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-302">No node in online status.</span></span>
<span data-ttu-id="4e0ac-303">限制</span><span class="sxs-lookup"><span data-stu-id="4e0ac-303">Limited</span></span> | <span data-ttu-id="4e0ac-304">此閘道中的節點並非全都處於健康情況良好的狀態。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-304">Not all nodes in this gateway are in healthy state.</span></span> <span data-ttu-id="4e0ac-305">這個狀態是某些節點可能會關閉的警告！</span><span class="sxs-lookup"><span data-stu-id="4e0ac-305">This status is a warning that some node might be down!</span></span> <br/><br/><span data-ttu-id="4e0ac-306">可能是由於 toocredential 發送器/背景工作節點上的同步處理問題。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-306">Could be due toocredential sync issue on dispatcher/worker node.</span></span> 

### <a name="pipeline-activities-monitoring"></a><span data-ttu-id="4e0ac-307">管線/活動監視</span><span class="sxs-lookup"><span data-stu-id="4e0ac-307">Pipeline/ activities monitoring</span></span>
<span data-ttu-id="4e0ac-308">hello Azure 入口網站提供的監視體驗與更細微的節點層級詳細資料的管線。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-308">hello Azure portal provides a pipeline monitoring experience with granular node level details.</span></span> <span data-ttu-id="4e0ac-309">例如，它會顯示哪些活動在哪個節點上執行。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-309">For example, it shows which activities ran on which node.</span></span> <span data-ttu-id="4e0ac-310">此資訊可能有助於了解特定節點上，假設因為 toonetwork 節流的效能問題。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-310">This information can be helpful in understanding performance issues on a particular node, say due toonetwork throttling.</span></span> 

![資料管理閘道 - 管線的多節點監視](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring-pipelines.png)

![資料管理閘道 - 管線詳細資料](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-pipeline-details.png)

## <a name="scale-considerations"></a><span data-ttu-id="4e0ac-313">調整考量</span><span class="sxs-lookup"><span data-stu-id="4e0ac-313">Scale considerations</span></span>

### <a name="scale-out"></a><span data-ttu-id="4e0ac-314">相應放大</span><span class="sxs-lookup"><span data-stu-id="4e0ac-314">Scale out</span></span>
<span data-ttu-id="4e0ac-315">當 hello**可用記憶體偏低**和 hello **CPU 使用率偏高**，加入新節點可幫助跨機器的向外延展 hello 負載。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-315">When hello **available memory is low** and hello **CPU usage is high**, adding a new node helps scale out hello load across machines.</span></span> <span data-ttu-id="4e0ac-316">如果活動到期 tootime 外或閘道已離線的節點失敗，它加入節點 toohello 閘道可幫助。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-316">If activities are failing due tootime-out or gateway node being offline, it helps if you add a node toohello gateway.</span></span>
 
### <a name="scale-up"></a><span data-ttu-id="4e0ac-317">相應增加</span><span class="sxs-lookup"><span data-stu-id="4e0ac-317">Scale up</span></span>
<span data-ttu-id="4e0ac-318">當 hello 可用記憶體和 CPU 使用率不好，但 hello 閒置容量為 0 時，您應該調整藉由增加 hello 可以在節點執行的並行處理作業數目。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-318">When hello available memory and CPU are not utilized well, but hello idle capacity is 0, you should scale up by increasing hello number of concurrent jobs that can run on a node.</span></span> <span data-ttu-id="4e0ac-319">您也可以 tooscale 向上活動因為 hello 閘道多載會逾時。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-319">You may also want tooscale up when activities are timing out because hello gateway is overloaded.</span></span> <span data-ttu-id="4e0ac-320">Hello 下列影像所示，您可以增加 hello 節點的最大容量。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-320">As shown in hello following image, you can increase hello maximum capacity for a node.</span></span> <span data-ttu-id="4e0ac-321">我們建議使用 toostart 加倍。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-321">We suggest doubling it toostart with.</span></span>  

![資料管理閘道 - 調整考量](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-scale-considerations.png)


## <a name="known-issuesbreaking-changes"></a><span data-ttu-id="4e0ac-323">已知問題/重大變更</span><span class="sxs-lookup"><span data-stu-id="4e0ac-323">Known issues/breaking changes</span></span>

- <span data-ttu-id="4e0ac-324">目前，您可以向上 toofour 實體閘道節點的單一邏輯閘道。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-324">Currently, you can have up toofour physical gateway nodes for a single logical gateway.</span></span> <span data-ttu-id="4e0ac-325">如果您需要四個以上的節點，基於效能考量，傳送電子郵件太[DMGHelp@microsoft.com](mailto:DMGHelp@microsoft.com)。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-325">If you need more than four nodes for performance reasons, send an email too[DMGHelp@microsoft.com](mailto:DMGHelp@microsoft.com).</span></span>
- <span data-ttu-id="4e0ac-326">您無法重新將 hello 驗證金鑰，從另一個邏輯閘道 tooswitch 從 hello 目前邏輯閘道閘道節點向。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-326">You cannot re-register a gateway node with hello authentication key from another logical gateway tooswitch from hello current logical gateway.</span></span> <span data-ttu-id="4e0ac-327">toore 暫存器從 hello 節點解除安裝 hello 閘道、 重新安裝 hello 閘道和註冊的 hello hello 驗證金鑰，與其他邏輯的閘道。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-327">toore-register, uninstall hello gateway from hello node, reinstall hello gateway, and register it with hello authentication key for hello other logical gateway.</span></span> 
- <span data-ttu-id="4e0ac-328">如果您的所有閘道節點需要 HTTP proxy，diahost.exe.config 和 diawp.exe.config，設定 hello proxy，並使用 hello 伺服器管理員 toomake 確定所有節點擁有都 hello 相同 diahost.exe.config 和 diawip.exe.config。如需詳細資訊，請參閱[設定 Proxy 設定](data-factory-data-management-gateway.md#configure-proxy-server-settings)一節。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-328">If HTTP proxy is required for all your gateway nodes, set hello proxy in diahost.exe.config and diawp.exe.config, and use hello server manager toomake sure all nodes have hello same diahost.exe.config and diawip.exe.config. See [configure proxy settings](data-factory-data-management-gateway.md#configure-proxy-server-settings) section for details.</span></span> 
- <span data-ttu-id="4e0ac-329">toochange 加密模式的節點對節點通訊在閘道組態管理員中，刪除所有的 hello 節點，只保留一個 hello 入口網站中。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-329">toochange encryption mode for node-to-node communication in Gateway Configuration Manager, delete all hello nodes in hello portal except one.</span></span> <span data-ttu-id="4e0ac-330">然後，將節點加入之後變更 hello 加密模式。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-330">Then, add nodes back after changing hello encryption mode.</span></span>
- <span data-ttu-id="4e0ac-331">如果您選擇 tooencrypt hello 節點對節點通訊通道，請使用正式的 SSL 憑證。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-331">Use an official SSL certificate if you choose tooencrypt hello node-to-node communication channel.</span></span> <span data-ttu-id="4e0ac-332">自我簽署的憑證，可能會為相同的憑證不會受到信任在其他電腦上的憑證授權單位清單中的 hello 造成連線問題。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-332">Self-signed certificate may cause connectivity issues as hello same certificate may not be trusted in certifying authority list on other machines.</span></span> 
- <span data-ttu-id="4e0ac-333">Hello 節點版本低於 hello 邏輯的閘道器版本時，無法註冊閘道節點 tooa 邏輯閘道。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-333">You cannot register a gateway node tooa logical gateway when hello node version is lower than hello logical gateway version.</span></span> <span data-ttu-id="4e0ac-334">從入口網站刪除 hello 邏輯閘道的所有節點，以便您可以使用較低的版本 node(downgrade) 註冊它。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-334">Delete all nodes of hello logical gateway from portal so that you can register a lower version node(downgrade) it.</span></span> <span data-ttu-id="4e0ac-335">如果您刪除邏輯閘道的所有節點，手動安裝並註冊新節點 toothat 邏輯閘道。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-335">If you delete all nodes of a logical gateway, manually install and register new nodes toothat logical gateway.</span></span> <span data-ttu-id="4e0ac-336">在此情況下不支援快速設定。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-336">Express setup is not supported in this case.</span></span>
- <span data-ttu-id="4e0ac-337">您無法使用快速安裝 tooinstall 節點 tooan 現有邏輯閘道，仍在使用雲端認證。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-337">You cannot use express setup tooinstall nodes tooan existing logical gateway, which is still using cloud credentials.</span></span> <span data-ttu-id="4e0ac-338">您可以檢查 hello 認證從 hello 閘道器組態管理員 hello 設定 索引標籤上的儲存位置。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-338">You can check where hello credentials are stored from hello Gateway Configuration Manager on hello Settings tab.</span></span>
- <span data-ttu-id="4e0ac-339">您無法使用快速安裝 tooinstall 節點 tooan 現有邏輯閘道，其具有節點對節點加密已啟用。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-339">You cannot use express setup tooinstall nodes tooan existing logical gateway, which has node-to-node encryption enabled.</span></span> <span data-ttu-id="4e0ac-340">設定 hello 加密模式牽涉到手動新增憑證，因為快速安裝為沒有其他選項。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-340">As setting hello encryption mode involves manually adding certificates, express install is no more an option.</span></span> 
- <span data-ttu-id="4e0ac-341">若要從內部部署環境複製檔案，請勿再使用 \\localhost 或 C:\files，因為您可能無法透過所有節點存取 localhost 或本機磁碟機。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-341">For a file copy from on-premises environment, you should not use \\localhost or C:\files anymore since localhost or local drive might not be accessible via all nodes.</span></span> <span data-ttu-id="4e0ac-342">請改用\\ServerName\files toospecify 檔案的位置。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-342">Instead, use \\ServerName\files toospecify files’ location.</span></span>


## <a name="rolling-back-from-hello-preview"></a><span data-ttu-id="4e0ac-343">回復從 hello 預覽</span><span class="sxs-lookup"><span data-stu-id="4e0ac-343">Rolling back from hello preview</span></span> 
<span data-ttu-id="4e0ac-344">從 hello 預覽 tooroll 刪除一個節點以外的所有節點。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-344">tooroll back from hello preview, delete all nodes but one node.</span></span> <span data-ttu-id="4e0ac-345">無論您刪除，但請確定您在 hello 邏輯閘道有至少一個節點的節點。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-345">It doesn’t matter which nodes you delete, but ensure you have at least one node in hello logical gateway.</span></span> <span data-ttu-id="4e0ac-346">解除安裝 hello 機器上的閘道或使用 hello Azure 入口網站，您可以刪除節點。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-346">You can delete a node either by uninstalling gateway on hello machine or by using hello Azure portal.</span></span> <span data-ttu-id="4e0ac-347">在 Azure 入口網站中 hello hello **Data Factory**頁面上，按一下連結服務 toolaunch hello**連結的服務**頁面。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-347">In hello Azure portal, in hello **Data Factory** page, click Linked services toolaunch hello **Linked services** page.</span></span> <span data-ttu-id="4e0ac-348">選取 hello 閘道 toolaunch hello**閘道**頁面。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-348">Select hello gateway toolaunch hello **Gateway** page.</span></span> <span data-ttu-id="4e0ac-349">在 hello 閘道頁面上，您可以看到 hello 與 hello 閘道相關聯的節點。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-349">In hello Gateway page, you can see hello nodes associated with hello gateway.</span></span> <span data-ttu-id="4e0ac-350">hello 頁面可讓您從 hello 閘道刪除節點。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-350">hello page lets you delete a node from hello gateway.</span></span>
 
<span data-ttu-id="4e0ac-351">在刪除之後，按一下 **預覽功能**在 hello 相同的 Azure 入口網站頁面，並停用 hello 預覽功能。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-351">After deleting, click **preview features** in hello same Azure portal page, and disable hello preview feature.</span></span> <span data-ttu-id="4e0ac-352">您已經重設閘道 tooone 節點 GA （正式上市） 閘道。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-352">You have reset your gateway tooone node GA (general availability) gateway.</span></span>


## <a name="next-steps"></a><span data-ttu-id="4e0ac-353">後續步驟</span><span class="sxs-lookup"><span data-stu-id="4e0ac-353">Next steps</span></span>
<span data-ttu-id="4e0ac-354">檢閱下列文章 hello:</span><span class="sxs-lookup"><span data-stu-id="4e0ac-354">Review hello following articles:</span></span>
- <span data-ttu-id="4e0ac-355">[資料管理閘道器](data-factory-data-management-gateway.md)-提供 hello 閘道的詳細的概觀。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-355">[Data Management Gateway](data-factory-data-management-gateway.md) - provides a detailed overview of hello gateway.</span></span>
- <span data-ttu-id="4e0ac-356">[在內部部署和雲端資料存放區之間移動資料](data-factory-move-data-between-onprem-and-cloud.md) - 包含如何使用具有單一節點之閘道的逐步指示。</span><span class="sxs-lookup"><span data-stu-id="4e0ac-356">[Move data between on-premises and cloud data stores](data-factory-move-data-between-onprem-and-cloud.md) - contains a walkthrough with step-by-step instructions for using a gateway with a single node.</span></span> 
