---
title: "Azure Data Factory 中資料移動的安全性考量 | Microsoft Docs"
description: "了解如何在 Azure Data Factory 中保護資料移動。"
services: data-factory
documentationcenter: 
author: nabhishek
manager: jhubbard
editor: monicar
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/27/2017
ms.author: abnarain
ms.openlocfilehash: 4c39d71a2a2f9451531f0c0082c05fd6dc54fbd5
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/29/2017
---
# <a name="azure-data-factory---security-considerations-for-data-movement"></a><span data-ttu-id="c6476-103">Azure Data Factory - 資料移動的安全性考量</span><span class="sxs-lookup"><span data-stu-id="c6476-103">Azure Data Factory - Security considerations for data movement</span></span>
## <a name="introduction"></a><span data-ttu-id="c6476-104">簡介</span><span class="sxs-lookup"><span data-stu-id="c6476-104">Introduction</span></span>
<span data-ttu-id="c6476-105">本文說明 Azure Data Factory 中資料移動服務用來保護您資料的基本安全性基礎結構。</span><span class="sxs-lookup"><span data-stu-id="c6476-105">This article describes basic security infrastructure that data movement services in Azure Data Factory use to secure your data.</span></span> <span data-ttu-id="c6476-106">Azure Data Factory 管理資源建置在 Azure 安全性基礎結構上，並使用 Azure 提供的所有可能安全性措施。</span><span class="sxs-lookup"><span data-stu-id="c6476-106">Azure Data Factory management resources are built on Azure security infrastructure and use all possible security measures offered by Azure.</span></span>

<span data-ttu-id="c6476-107">在 Data Factory 方案中，您可以建立一或多個資料 [管線](data-factory-create-pipelines.md)。</span><span class="sxs-lookup"><span data-stu-id="c6476-107">In a Data Factory solution, you create one or more data [pipelines](data-factory-create-pipelines.md).</span></span> <span data-ttu-id="c6476-108">管線是一起執行某個工作的活動所組成的邏輯群組。</span><span class="sxs-lookup"><span data-stu-id="c6476-108">A pipeline is a logical grouping of activities that together perform a task.</span></span> <span data-ttu-id="c6476-109">這些管線位於建立 Data Factory 的區域中。</span><span class="sxs-lookup"><span data-stu-id="c6476-109">These pipelines reside in the region where the data factory was created.</span></span> 

<span data-ttu-id="c6476-110">雖然 Data Factory 只有在「美國西部」、「美國東部」及「北歐」區域才有提供，但[全球數個區域](data-factory-data-movement-activities.md#global)都有提供資料移動服務。</span><span class="sxs-lookup"><span data-stu-id="c6476-110">Even though Data Factory is available in only **West US**, **East US**, and **North Europe** regions, the data movement service is available [globally in several regions](data-factory-data-movement-activities.md#global).</span></span> <span data-ttu-id="c6476-111">Data Factory 服務可確保資料不會離開某個地區/區域，除非在資料移動服務尚未部署到該區域的情況下，您明確指示服務使用替代的區域。</span><span class="sxs-lookup"><span data-stu-id="c6476-111">Data Factory service ensures that data does not leave a geographical area/ region unless you explicitly instruct the service to use an alternate region if the data movement service is not yet deployed to that region.</span></span> 

<span data-ttu-id="c6476-112">Azure Data Factory 本身除了用於雲端資料存放區的已連結服務認證 (會使用憑證加密) 之外，並不會儲存任何資料。</span><span class="sxs-lookup"><span data-stu-id="c6476-112">Azure Data Factory itself does not store any data except for linked service credentials for cloud data stores, which are encrypted using certificates.</span></span> <span data-ttu-id="c6476-113">它可讓您建立資料導向工作流程，藉由使用其他區域或內部部署環境中的[計算服務](data-factory-compute-linked-services.md)，協調[所支援資料存放區](data-factory-data-movement-activities.md#supported-data-stores-and-formats)之間的資料移動和資料處理。</span><span class="sxs-lookup"><span data-stu-id="c6476-113">It lets you create data-driven workflows to orchestrate movement of data between [supported data stores](data-factory-data-movement-activities.md#supported-data-stores-and-formats) and processing of data using [compute services](data-factory-compute-linked-services.md) in other regions or in an on-premises environment.</span></span> <span data-ttu-id="c6476-114">它也可讓您使用程式設計方式和 UI 機制 [監視和管理工作流程](data-factory-monitor-manage-pipelines.md) 。</span><span class="sxs-lookup"><span data-stu-id="c6476-114">It also allows you to [monitor and manage workflows](data-factory-monitor-manage-pipelines.md) using both programmatic and UI mechanisms.</span></span>

<span data-ttu-id="c6476-115">使用 Azure Data Factory 進行的資料移動已通過下列各項規範的「認證」：</span><span class="sxs-lookup"><span data-stu-id="c6476-115">Data movement using Azure Data Factory has been **certified** for:</span></span>
-   [<span data-ttu-id="c6476-116">HIPAA/HITECH</span><span class="sxs-lookup"><span data-stu-id="c6476-116">HIPAA/HITECH</span></span>](https://www.microsoft.com/en-us/trustcenter/Compliance/HIPAA)  
-   [<span data-ttu-id="c6476-117">ISO/IEC 27001</span><span class="sxs-lookup"><span data-stu-id="c6476-117">ISO/IEC 27001</span></span>](https://www.microsoft.com/en-us/trustcenter/Compliance/ISO-IEC-27001)  
-   [<span data-ttu-id="c6476-118">ISO/IEC 27018</span><span class="sxs-lookup"><span data-stu-id="c6476-118">ISO/IEC 27018</span></span>](https://www.microsoft.com/en-us/trustcenter/Compliance/ISO-IEC-27018) 
-   [<span data-ttu-id="c6476-119">CSA STAR</span><span class="sxs-lookup"><span data-stu-id="c6476-119">CSA STAR</span></span>](https://www.microsoft.com/en-us/trustcenter/Compliance/CSA-STAR-Certification)
     
<span data-ttu-id="c6476-120">如果您對 Azure 法規遵循以及 Azure 如何保護其專屬基礎結構感興趣，請瀏覽 [Microsoft 信任中心](https://www.microsoft.com/TrustCenter/default.aspx)。</span><span class="sxs-lookup"><span data-stu-id="c6476-120">If you are interested in Azure compliance and how Azure secures its own infrastructure, visit the [Microsoft Trust Center](https://www.microsoft.com/TrustCenter/default.aspx).</span></span> 

<span data-ttu-id="c6476-121">在本文中，我們會檢閱下列兩個資料移動案例中的安全性考量︰</span><span class="sxs-lookup"><span data-stu-id="c6476-121">In this article, we review security considerations in the following two data movement scenarios:</span></span> 

- <span data-ttu-id="c6476-122">**雲端案例** - 在此案例中，可透過網際網路公開存取您的來源和目的地。</span><span class="sxs-lookup"><span data-stu-id="c6476-122">**Cloud scenario**- In this scenario, both your source and destination are publicly accessible through internet.</span></span> <span data-ttu-id="c6476-123">這些包括受管理的雲端儲存體服務 (例如「Azure 儲存體」、「Azure SQL 資料倉儲」、Azure SQL Database、Azure Data Lake Store、Amazon S3、Amazon Redshift)、SaaS 服務 (例如 Salesforce)，以及 Web 通訊協定 (例如 FTP 和 OData)。</span><span class="sxs-lookup"><span data-stu-id="c6476-123">These include managed cloud storage services like Azure Storage, Azure SQL Data Warehouse, Azure SQL Database, Azure Data Lake Store, Amazon S3, Amazon Redshift, SaaS services such as Salesforce, and web protocols such as FTP and OData.</span></span> <span data-ttu-id="c6476-124">如需完整的支援資料來源清單，請參閱[這裡](data-factory-data-movement-activities.md#supported-data-stores-and-formats)。</span><span class="sxs-lookup"><span data-stu-id="c6476-124">You can find a complete list of supported data sources [here](data-factory-data-movement-activities.md#supported-data-stores-and-formats).</span></span>
- <span data-ttu-id="c6476-125">**混合式案例**- 在此案例中，您的來源或目的地是在防火牆之後或在內部部署的公司網路內，或是資料存放區位於私人網路/虛擬網路中 (最常見的是來源) 而不可公開存取。</span><span class="sxs-lookup"><span data-stu-id="c6476-125">**Hybrid scenario**- In this scenario, either your source or destination is behind a firewall or inside an on-premises corporate network or the data store is in a private network/ virtual network (most often the source) and is not publicly accessible.</span></span> <span data-ttu-id="c6476-126">裝載在虛擬機器上的資料庫伺服器也屬於此案例的涵蓋範圍。</span><span class="sxs-lookup"><span data-stu-id="c6476-126">Database servers hosted on virtual machines also fall under this scenario.</span></span>

## <a name="cloud-scenarios"></a><span data-ttu-id="c6476-127">雲端案例</span><span class="sxs-lookup"><span data-stu-id="c6476-127">Cloud scenarios</span></span>
###<a name="securing-data-store-credentials"></a><span data-ttu-id="c6476-128">保護資料存放區認證</span><span class="sxs-lookup"><span data-stu-id="c6476-128">Securing data store credentials</span></span>
<span data-ttu-id="c6476-129">Azure Data Factory 可透過使用「受 Microsoft 管理的憑證」來「加密」資料存放區認證，為這些認證提供保護。</span><span class="sxs-lookup"><span data-stu-id="c6476-129">Azure Data Factory protects your data store credentials by **encrypting** them by using **certificates managed by Microsoft**.</span></span> <span data-ttu-id="c6476-130">這些憑證每隔「兩年」會輪替一次 (包括憑證更新和憑證移轉)。</span><span class="sxs-lookup"><span data-stu-id="c6476-130">These certificates are rotated every **two years** (which includes renewal of certificate and migration of credentials).</span></span> <span data-ttu-id="c6476-131">這些已加密的認證會安全地儲存在「受 Azure Data Factory 管理服務管理的 Azure 儲存體」中。</span><span class="sxs-lookup"><span data-stu-id="c6476-131">These encrypted credentials are securely stored in an **Azure Storage managed by Azure Data Factory management services**.</span></span> <span data-ttu-id="c6476-132">如需有關「Azure 儲存體」安全性的詳細資訊，請參閱 [Azure 儲存體安全性概觀](../security/security-storage-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="c6476-132">For more information about Azure Storage security, refer [Azure Storage Security Overview](../security/security-storage-overview.md).</span></span>

### <a name="data-encryption-in-transit"></a><span data-ttu-id="c6476-133">傳輸中資料加密</span><span class="sxs-lookup"><span data-stu-id="c6476-133">Data encryption in transit</span></span>
<span data-ttu-id="c6476-134">如果雲端資料存放區支援 HTTPS 或 TLS，則 Data Factory 中資料移動服務與雲端資料存放區之間的所有資料傳輸，都會透過安全通道 HTTPS 或 TLS。</span><span class="sxs-lookup"><span data-stu-id="c6476-134">If the cloud data store supports HTTPS or TLS, all data transfers between data movement services in Data Factory and a cloud data store are via secure channel HTTPS or TLS.</span></span>

> [!NOTE]
> <span data-ttu-id="c6476-135">所有連到 **Azure SQL Database** 和「Azure SQL 資料倉儲」的連線在資料透過傳輸進出資料庫時，一律都需要加密 (SSL/TLS)。</span><span class="sxs-lookup"><span data-stu-id="c6476-135">All connections to **Azure SQL Database** and **Azure SQL Data Warehouse** always require encryption (SSL/TLS) while data is in transit to and from the database.</span></span> <span data-ttu-id="c6476-136">使用 JSON 編輯器來編寫管線時，請在「連接字串」中新增 **encryption** 屬性並將它設定為 **true**。</span><span class="sxs-lookup"><span data-stu-id="c6476-136">While authoring a pipeline using a JSON editor, add the **encryption** property and set it to **true** in the **connection string**.</span></span> <span data-ttu-id="c6476-137">當您使用[複製精靈](data-factory-azure-copy-wizard.md)時，精靈預設會設定這個屬性。</span><span class="sxs-lookup"><span data-stu-id="c6476-137">When you use the [Copy Wizard](data-factory-azure-copy-wizard.md), the wizard sets this property by default.</span></span> <span data-ttu-id="c6476-138">針對「Azure 儲存體」，您可以在連接字串中使用 **HTTPS**。</span><span class="sxs-lookup"><span data-stu-id="c6476-138">For **Azure Storage**, you can use **HTTPS** in the connection string.</span></span>

### <a name="data-encryption-at-rest"></a><span data-ttu-id="c6476-139">待用資料加密</span><span class="sxs-lookup"><span data-stu-id="c6476-139">Data encryption at rest</span></span>
<span data-ttu-id="c6476-140">有些資料存放區支援待用資料加密。</span><span class="sxs-lookup"><span data-stu-id="c6476-140">Some data stores support encryption of data at rest.</span></span> <span data-ttu-id="c6476-141">建議您為這些資料存放區啟用資料加密機制。</span><span class="sxs-lookup"><span data-stu-id="c6476-141">We suggest that you enable data encryption mechanism for those data stores.</span></span> 

#### <a name="azure-sql-data-warehouse"></a><span data-ttu-id="c6476-142">Azure SQL 資料倉儲</span><span class="sxs-lookup"><span data-stu-id="c6476-142">Azure SQL Data Warehouse</span></span>
<span data-ttu-id="c6476-143">「Azure SQL 資料倉儲」中的「透明資料加密」(TDE) 可以對待用資料執行即時加密和解密，協助防止惡意活動的威脅。</span><span class="sxs-lookup"><span data-stu-id="c6476-143">Transparent Data Encryption (TDE) in Azure SQL Data Warehouse helps with protecting against the threat of malicious activity by performing real-time encryption and decryption of your data at rest.</span></span> <span data-ttu-id="c6476-144">用戶端並不會察覺到這個過程。</span><span class="sxs-lookup"><span data-stu-id="c6476-144">This behavior is transparent to the client.</span></span> <span data-ttu-id="c6476-145">如需詳細資訊，請參閱[保護 SQL 資料倉儲中的資料庫](../sql-data-warehouse/sql-data-warehouse-overview-manage-security.md)。</span><span class="sxs-lookup"><span data-stu-id="c6476-145">For more information, see [Secure a database in SQL Data Warehouse](../sql-data-warehouse/sql-data-warehouse-overview-manage-security.md).</span></span>

#### <a name="azure-sql-database"></a><span data-ttu-id="c6476-146">Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="c6476-146">Azure SQL Database</span></span>
<span data-ttu-id="c6476-147">Azure SQL Database 也支援透明資料加密 (TDE)，TDE 可在不需變更應用程式的情況下，對資料執行即時加密和解密，協助防止惡意活動的威脅。</span><span class="sxs-lookup"><span data-stu-id="c6476-147">Azure SQL Database also supports transparent data encryption (TDE), which helps with protecting against the threat of malicious activity by performing real-time encryption and decryption of the data without requiring changes to the application.</span></span> <span data-ttu-id="c6476-148">用戶端並不會察覺到這個過程。</span><span class="sxs-lookup"><span data-stu-id="c6476-148">This behavior is transparent to the client.</span></span> <span data-ttu-id="c6476-149">若要深入了解，請參閱 [Azure SQL Database 的透明資料加密](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-with-azure-sql-database)。</span><span class="sxs-lookup"><span data-stu-id="c6476-149">For more information, see [Transparent Data Encryption with Azure SQL Database](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-with-azure-sql-database).</span></span> 

#### <a name="azure-data-lake-store"></a><span data-ttu-id="c6476-150">Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="c6476-150">Azure Data Lake Store</span></span>
<span data-ttu-id="c6476-151">Azure Data Lake Store 也針對儲存在帳戶中的資料提供加密功能。</span><span class="sxs-lookup"><span data-stu-id="c6476-151">Azure Data Lake store also provides encryption for data stored in the account.</span></span> <span data-ttu-id="c6476-152">啟用加密功能時，Data Lake Store 會在保存資料之前先自動加密資料，並在擷取資料之前先解密資料，因此存取該資料的用戶端並不會察覺這個過程。</span><span class="sxs-lookup"><span data-stu-id="c6476-152">When enabled, Data Lake store automatically encrypts data before persisting and decrypts before retrieval, making it transparent to the client accessing the data.</span></span> <span data-ttu-id="c6476-153">如需詳細資訊，請參閱 [Azure Data Lake Store 安全性](../data-lake-store/data-lake-store-security-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="c6476-153">For more information, see [Security in Azure Data Lake Store](../data-lake-store/data-lake-store-security-overview.md).</span></span> 

#### <a name="azure-blob-storage-and-azure-table-storage"></a><span data-ttu-id="c6476-154">Azure Blob 儲存體和 Azure 資料表儲存體</span><span class="sxs-lookup"><span data-stu-id="c6476-154">Azure Blob Storage and Azure Table Storage</span></span>
<span data-ttu-id="c6476-155">「Azure Blob 儲存體」和「Azure 資料表儲存體」支援「儲存體服務加密」(SSE)，此功能會在將資料保存到儲存體之前先自動加密資料，並在擷取資料之前先解密資料。</span><span class="sxs-lookup"><span data-stu-id="c6476-155">Azure Blob Storage and Azure Table storage supports Storage Service Encryption (SSE), which automatically encrypts your data before persisting to storage and decrypts before retrieval.</span></span> <span data-ttu-id="c6476-156">如需詳細資訊，請參閱[待用資料的 Azure 儲存體服務加密](../storage/common/storage-service-encryption.md)。</span><span class="sxs-lookup"><span data-stu-id="c6476-156">For more information, see [Azure Storage Service Encryption for Data at Rest](../storage/common/storage-service-encryption.md).</span></span>

#### <a name="amazon-s3"></a><span data-ttu-id="c6476-157">Amazon S3</span><span class="sxs-lookup"><span data-stu-id="c6476-157">Amazon S3</span></span>
<span data-ttu-id="c6476-158">Amazon S3 同時支援用戶端和伺服器的待用資料加密。</span><span class="sxs-lookup"><span data-stu-id="c6476-158">Amazon S3 supports both client and server encryption of data at Rest.</span></span> <span data-ttu-id="c6476-159">如需詳細資訊，請參閱[使用加密來保護資料 (英文)](http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingEncryption.html)。</span><span class="sxs-lookup"><span data-stu-id="c6476-159">For more information, see [Protecting Data Using Encryption](http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingEncryption.html).</span></span> <span data-ttu-id="c6476-160">目前，Data Factory 並不支援虛擬私人雲端 (VPC) 內的 Amazon S3。</span><span class="sxs-lookup"><span data-stu-id="c6476-160">Currently, Data Factory does not support Amazon S3 inside a virtual private cloud (VPC).</span></span>

#### <a name="amazon-redshift"></a><span data-ttu-id="c6476-161">Amazon Redshift</span><span class="sxs-lookup"><span data-stu-id="c6476-161">Amazon Redshift</span></span>
<span data-ttu-id="c6476-162">Amazon Redshift 支援叢集待用資料加密。</span><span class="sxs-lookup"><span data-stu-id="c6476-162">Amazon Redshift supports cluster encryption for data at rest.</span></span> <span data-ttu-id="c6476-163">如需詳細資訊，請參閱 [Amazon Redshift 資料庫加密 (英文)](http://docs.aws.amazon.com/redshift/latest/mgmt/working-with-db-encryption.html)。</span><span class="sxs-lookup"><span data-stu-id="c6476-163">For more information, see [Amazon Redshift Database Encryption](http://docs.aws.amazon.com/redshift/latest/mgmt/working-with-db-encryption.html).</span></span> <span data-ttu-id="c6476-164">目前，Data Factory 並不支援 VPC 內的 Amazon Redshift。</span><span class="sxs-lookup"><span data-stu-id="c6476-164">Currently, Data Factory does not support Amazon Redshift inside a VPC.</span></span> 

#### <a name="salesforce"></a><span data-ttu-id="c6476-165">Salesforce</span><span class="sxs-lookup"><span data-stu-id="c6476-165">Salesforce</span></span>
<span data-ttu-id="c6476-166">Salesforce 支援「Shield 平台加密」，可加密所有檔案、附件、自訂欄位。</span><span class="sxs-lookup"><span data-stu-id="c6476-166">Salesforce supports Shield Platform Encryption that allows encryption of all files, attachments, custom fields.</span></span> <span data-ttu-id="c6476-167">如需詳細資訊，請參閱[了解 Web 伺服器 OAuth 驗證流程 (英文)](https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/intro_understanding_web_server_oauth_flow.htm)。</span><span class="sxs-lookup"><span data-stu-id="c6476-167">For more information, see [Understanding the Web Server OAuth Authentication Flow](https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/intro_understanding_web_server_oauth_flow.htm).</span></span>  

## <a name="hybrid-scenarios-using-data-management-gateway"></a><span data-ttu-id="c6476-168">混合式案例 (使用資料管理閘道)</span><span class="sxs-lookup"><span data-stu-id="c6476-168">Hybrid Scenarios (using Data Management Gateway)</span></span>
<span data-ttu-id="c6476-169">混合式案例需要您在內部部署網路中或是虛擬網路 (Azure) 或虛擬私人雲端 (Amazon) 內安裝「資料管理閘道」。</span><span class="sxs-lookup"><span data-stu-id="c6476-169">Hybrid scenarios require Data Management Gateway to be installed in an on-premises network or inside a virtual network (Azure) or a virtual private cloud (Amazon).</span></span> <span data-ttu-id="c6476-170">此閘道必須能夠存取本機資料存放區。</span><span class="sxs-lookup"><span data-stu-id="c6476-170">The gateway must be able to access the local data stores.</span></span> <span data-ttu-id="c6476-171">如需有關閘道的詳細資訊，請參閱[資料管理閘道](data-factory-data-management-gateway.md)。</span><span class="sxs-lookup"><span data-stu-id="c6476-171">For more information about the gateway, see [Data Management Gateway](data-factory-data-management-gateway.md).</span></span> 

![「資料管理閘道」的通道](media/data-factory-data-movement-security-considerations/data-management-gateway-channels.png)

<span data-ttu-id="c6476-173">「命令通道」可允許 Data Factory 中的資料移動服務與「資料管理閘道」之間進行通訊。</span><span class="sxs-lookup"><span data-stu-id="c6476-173">The **command channel** allows communication between data movement services in Data Factory and Data Management Gateway.</span></span> <span data-ttu-id="c6476-174">此通訊包含活動的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="c6476-174">The communication contains information related to the activity.</span></span> <span data-ttu-id="c6476-175">資料通道會用來在內部部署資料存放區與雲端資料存放區之間傳輸資料。</span><span class="sxs-lookup"><span data-stu-id="c6476-175">The data channel is used for transferring data between on-premises data stores and cloud data stores.</span></span>    

### <a name="on-premises-data-store-credentials"></a><span data-ttu-id="c6476-176">內部部署資料存放區認證</span><span class="sxs-lookup"><span data-stu-id="c6476-176">On-premises data store credentials</span></span>
<span data-ttu-id="c6476-177">內部部署資料存放區的認證會儲存在本機 (不是在雲端)。</span><span class="sxs-lookup"><span data-stu-id="c6476-177">The credentials for your on-premises data stores are stored locally (not in the cloud).</span></span> <span data-ttu-id="c6476-178">您可以透過三種不同的方式設定這些認證。</span><span class="sxs-lookup"><span data-stu-id="c6476-178">They can be set in three different ways.</span></span> 

- <span data-ttu-id="c6476-179">從「Azure 入口網站」/「複製精靈」透過 HTTPS 使用**純文字** (較不安全)。</span><span class="sxs-lookup"><span data-stu-id="c6476-179">Using **plain-text** (less secure) via HTTPS from Azure Portal/ Copy Wizard.</span></span> <span data-ttu-id="c6476-180">認證會以純文字形式傳送到內部部署閘道。</span><span class="sxs-lookup"><span data-stu-id="c6476-180">The credentials are passed in plain-text to the on-premises gateway.</span></span>
- <span data-ttu-id="c6476-181">**從複製精靈使用 JavaScript 密碼編譯程式庫**。</span><span class="sxs-lookup"><span data-stu-id="c6476-181">Using **JavaScript Cryptography library from Copy Wizard**.</span></span>
- <span data-ttu-id="c6476-182">使用 **Click-Once 型認證管理員應用程式**。</span><span class="sxs-lookup"><span data-stu-id="c6476-182">Using **click-once based credentials manager app**.</span></span> <span data-ttu-id="c6476-183">Click-Once 應用程式會在能夠存取閘道的內部部署電腦上執行，並為資料存放區設定認證。</span><span class="sxs-lookup"><span data-stu-id="c6476-183">The click-once application executes on the on-premises machine that has access to the gateway and sets credentials for the data store.</span></span> <span data-ttu-id="c6476-184">此選項及下一個選項是最安全的選項。</span><span class="sxs-lookup"><span data-stu-id="c6476-184">This option and the next one are the most secure options.</span></span> <span data-ttu-id="c6476-185">認證管理員應用程式預設會在具有閘道的電腦上使用連接埠 8050 來進行安全通訊。</span><span class="sxs-lookup"><span data-stu-id="c6476-185">The credential manager app, by default, uses the port 8050 on the machine with gateway for secure communication.</span></span>  
- <span data-ttu-id="c6476-186">使用 [New-AzureRmDataFactoryEncryptValue](/powershell/module/azurerm.datafactories/New-AzureRmDataFactoryEncryptValue) PowerShell Cmdlet 來加密認證。</span><span class="sxs-lookup"><span data-stu-id="c6476-186">Use [New-AzureRmDataFactoryEncryptValue](/powershell/module/azurerm.datafactories/New-AzureRmDataFactoryEncryptValue) PowerShell cmdlet to encrypt credentials.</span></span> <span data-ttu-id="c6476-187">此 cmdlet 會使用閘道器設定用來加密認證的憑證。</span><span class="sxs-lookup"><span data-stu-id="c6476-187">The cmdlet uses the certificate that gateway is configured to use to encrypt the credentials.</span></span> <span data-ttu-id="c6476-188">您可以使用此 Cmdlet 所傳回的已加密認證，並將它新增到與 [New-AzureRmDataFactoryLinkedService](/powershell/module/azurerm.datafactories/new-azurermdatafactorylinkedservice) Cmdlet 搭配使用之 JSON 檔案中 **connectionString** 的 **EncryptedCredential** 元素中，或新增到入口網站之「Data Factory 編輯器」的 JSON 程式碼片段中。</span><span class="sxs-lookup"><span data-stu-id="c6476-188">You can use the encrypted credentials returned by this cmdlet and add it to **EncryptedCredential** element of the **connectionString** in the JSON file that you use with the [New-AzureRmDataFactoryLinkedService](/powershell/module/azurerm.datafactories/new-azurermdatafactorylinkedservice) cmdlet or in the JSON snippet in the Data Factory Editor in the portal.</span></span> <span data-ttu-id="c6476-189">此選項及 Click-Once 應用程式是最安全的選項。</span><span class="sxs-lookup"><span data-stu-id="c6476-189">This option and the click-once application are the most secure options.</span></span> 

#### <a name="javascript-cryptography-library-based-encryption"></a><span data-ttu-id="c6476-190">JavaScript 密碼編譯程式庫型加密</span><span class="sxs-lookup"><span data-stu-id="c6476-190">JavaScript cryptography library-based encryption</span></span>
<span data-ttu-id="c6476-191">您可以從[複製精靈](data-factory-copy-wizard.md)使用 [JavaScript 密碼編譯程式庫](https://www.microsoft.com/download/details.aspx?id=52439)來加密資料存放區認證。</span><span class="sxs-lookup"><span data-stu-id="c6476-191">You can encrypt data store credentials using [JavaScript Cryptography library](https://www.microsoft.com/download/details.aspx?id=52439) from the [Copy Wizard](data-factory-copy-wizard.md).</span></span> <span data-ttu-id="c6476-192">當您選取此選項時，「複製精靈」會擷取閘道的公開金鑰，然後使用它來加密金鑰存放區認證。</span><span class="sxs-lookup"><span data-stu-id="c6476-192">When you select this option, the Copy Wizard retrieves the public key of gateway and uses it to encrypt the data store credentials.</span></span> <span data-ttu-id="c6476-193">這些認證會由閘道電腦解密，並受到 Windows [DPAPI](https://msdn.microsoft.com/library/ms995355.aspx) 保護。</span><span class="sxs-lookup"><span data-stu-id="c6476-193">The credentials are decrypted by the gateway machine and protected by Windows [DPAPI](https://msdn.microsoft.com/library/ms995355.aspx).</span></span>

<span data-ttu-id="c6476-194">**支援的瀏覽器：**IE8、IE9、IE10、IE11、Microsoft Edge，以及最新版 Firefox、Chrome、Opera、Safari 瀏覽器。</span><span class="sxs-lookup"><span data-stu-id="c6476-194">**Supported browsers:** IE8, IE9, IE10, IE11, Microsoft Edge, and latest Firefox, Chrome, Opera, Safari browsers.</span></span> 

#### <a name="click-once-credentials-manager-app"></a><span data-ttu-id="c6476-195">Click-Once 認證管理員應用程式</span><span class="sxs-lookup"><span data-stu-id="c6476-195">Click-once credentials manager app</span></span>
<span data-ttu-id="c6476-196">您可以在編寫管線時，從「Azure 入口網站」/「複製精靈」啟動 Click-Once 型認證管理員應用程式。</span><span class="sxs-lookup"><span data-stu-id="c6476-196">You can launch the click-once based credential manager app from Azure portal/Copy Wizard when authoring pipelines.</span></span> <span data-ttu-id="c6476-197">此應用程式可確保不會透過網路以純文字形式傳輸認證。</span><span class="sxs-lookup"><span data-stu-id="c6476-197">This application ensures that credentials are not transferred in plain text over the wire.</span></span> <span data-ttu-id="c6476-198">根據預設，它會在具有閘道的電腦上使用連接埠 **8050** 來進行安全通訊。</span><span class="sxs-lookup"><span data-stu-id="c6476-198">By default, it uses the port **8050** on the machine with gateway for secure communication.</span></span> <span data-ttu-id="c6476-199">您可以視需要變更此連接埠。</span><span class="sxs-lookup"><span data-stu-id="c6476-199">If necessary, this port can be changed.</span></span>  
  
![閘道的 HTTPS 連接埠](media/data-factory-data-movement-security-considerations/https-port-for-gateway.png)

<span data-ttu-id="c6476-201">「資料管理閘道」目前使用單一「憑證」。</span><span class="sxs-lookup"><span data-stu-id="c6476-201">Currently, Data Management Gateway uses a single **certificate**.</span></span> <span data-ttu-id="c6476-202">此憑證是在安裝閘道時所建立的憑證 (適用於在 2016 年 11 月以後建立及 2.4.xxxx.x 版或更新版本的「資料管理閘道」)。</span><span class="sxs-lookup"><span data-stu-id="c6476-202">This certificate is created during the gateway installation (applies to Data Management Gateway created after November 2016 and version 2.4.xxxx.x or later).</span></span> <span data-ttu-id="c6476-203">您可以使用自己的 SSL/TLS 憑證來取代此憑證。</span><span class="sxs-lookup"><span data-stu-id="c6476-203">You can replace this certificate with your own SSL/TLS certificate.</span></span> <span data-ttu-id="c6476-204">Click-Once 認證管理員應用程式會使用此憑證來安全地連接到閘道電腦，以設定資料存放區認證。</span><span class="sxs-lookup"><span data-stu-id="c6476-204">This certificate is used by the click-once credential manager application to securely connect to the gateway machine for setting data store credentials.</span></span> <span data-ttu-id="c6476-205">它會使用具有閘道之電腦上的 Windows [DPAPI](https://msdn.microsoft.com/library/ms995355.aspx)，將資料存放區認證安全地儲存在內部部署環境。</span><span class="sxs-lookup"><span data-stu-id="c6476-205">It stores data store credentials securely on-premises by using the Windows [DPAPI](https://msdn.microsoft.com/library/ms995355.aspx) on the machine with gateway.</span></span> 

> [!NOTE]
> <span data-ttu-id="c6476-206">舊版閘道如果是在 2016 年 11 月以前所安裝或版本為 2.3.xxxx.x，會繼續使用在雲端加密及儲存的認證。</span><span class="sxs-lookup"><span data-stu-id="c6476-206">Older gateways that were installed before November 2016 or of version 2.3.xxxx.x continue to use credentials encrypted and stored on cloud.</span></span> <span data-ttu-id="c6476-207">即使您將閘道升級到最新版本，這些認證也不會移轉到內部部署電腦上</span><span class="sxs-lookup"><span data-stu-id="c6476-207">Even if you upgrade the gateway to the latest version, the credentials are not migrated to an on-premises machine</span></span>    
  
| <span data-ttu-id="c6476-208">閘道版本 (建立時)</span><span class="sxs-lookup"><span data-stu-id="c6476-208">Gateway version (during creation)</span></span> | <span data-ttu-id="c6476-209">認證儲存位置</span><span class="sxs-lookup"><span data-stu-id="c6476-209">Credentials Stored</span></span> | <span data-ttu-id="c6476-210">認證加密/安全性</span><span class="sxs-lookup"><span data-stu-id="c6476-210">Credential encryption/ security</span></span> | 
| --------------------------------- | ------------------ | --------- |  
| <span data-ttu-id="c6476-211">低於或等於 2.3.xxxx.x</span><span class="sxs-lookup"><span data-stu-id="c6476-211">< = 2.3.xxxx.x</span></span> | <span data-ttu-id="c6476-212">雲端</span><span class="sxs-lookup"><span data-stu-id="c6476-212">On cloud</span></span> | <span data-ttu-id="c6476-213">使用憑證 (與認證管理員應用程式所使用的不同) 進行加密</span><span class="sxs-lookup"><span data-stu-id="c6476-213">Encrypted using certificate (different from the one used by Credential manager app)</span></span> | 
| <span data-ttu-id="c6476-214">高於或等於 2.4.xxxx.x</span><span class="sxs-lookup"><span data-stu-id="c6476-214">> = 2.4.xxxx.x</span></span> | <span data-ttu-id="c6476-215">內部部署</span><span class="sxs-lookup"><span data-stu-id="c6476-215">On premises</span></span> | <span data-ttu-id="c6476-216">透過 DPAPI 進行保護</span><span class="sxs-lookup"><span data-stu-id="c6476-216">Secured via DPAPI</span></span> | 
  

### <a name="encryption-in-transit"></a><span data-ttu-id="c6476-217">傳輸中加密</span><span class="sxs-lookup"><span data-stu-id="c6476-217">Encryption in transit</span></span>
<span data-ttu-id="c6476-218">與 Azure 服務進行通訊時，所有資料傳輸都會透過安全通道 **HTTPS** 和 **TLS over TCP**，以防止攔截式攻擊。</span><span class="sxs-lookup"><span data-stu-id="c6476-218">All data transfers are via secure channel **HTTPS** and **TLS over TCP** to prevent man-in-the-middle attacks during communication with Azure services.</span></span>
 
<span data-ttu-id="c6476-219">您也可以使用 [IPSec VPN](../vpn-gateway/vpn-gateway-about-vpn-devices.md) 或 [ExpressRoute](../expressroute/expressroute-introduction.md) 來進一步保護內部部署網路與 Azure 之間的通訊通道。</span><span class="sxs-lookup"><span data-stu-id="c6476-219">You can also use [IPSec VPN](../vpn-gateway/vpn-gateway-about-vpn-devices.md) or [Express Route](../expressroute/expressroute-introduction.md) to further secure the communication channel between your on-premises network and Azure.</span></span>

<span data-ttu-id="c6476-220">虛擬網路是您網路在雲端的邏輯呈現方式。</span><span class="sxs-lookup"><span data-stu-id="c6476-220">Virtual network is a logical representation of your network in the cloud.</span></span> <span data-ttu-id="c6476-221">您可以透過設定 IPSec VPN (站台對站台) 或 ExpressRoute (私用對等)，將內部部署網路連接到 Azure 虛擬網路 (VNet)</span><span class="sxs-lookup"><span data-stu-id="c6476-221">You can connect an on-premises network to your Azure virtual network (VNet) by setting up IPSec VPN (site-to-site) or Express Route (Private Peering)</span></span>     

<span data-ttu-id="c6476-222">下表根據混合式資料移動的不同來源和目的地位置組合，摘要說明網路和閘道組態的建議事項。</span><span class="sxs-lookup"><span data-stu-id="c6476-222">The following table summarizes the network and gateway configuration recommendations based on different combinations of source and destination locations for hybrid data movement.</span></span>

| <span data-ttu-id="c6476-223">來源</span><span class="sxs-lookup"><span data-stu-id="c6476-223">Source</span></span> | <span data-ttu-id="c6476-224">目的地</span><span class="sxs-lookup"><span data-stu-id="c6476-224">Destination</span></span> | <span data-ttu-id="c6476-225">網路組態</span><span class="sxs-lookup"><span data-stu-id="c6476-225">Network configuration</span></span> | <span data-ttu-id="c6476-226">閘道安裝</span><span class="sxs-lookup"><span data-stu-id="c6476-226">Gateway setup</span></span> |
| ------ | ----------- | --------------------- | ------------- | 
| <span data-ttu-id="c6476-227">內部部署</span><span class="sxs-lookup"><span data-stu-id="c6476-227">On-premises</span></span> | <span data-ttu-id="c6476-228">部署在虛擬網路中的虛擬機器和雲端服務</span><span class="sxs-lookup"><span data-stu-id="c6476-228">Virtual machines and cloud services deployed in virtual networks</span></span> | <span data-ttu-id="c6476-229">IPSec VPN (點對站或站台對站台)</span><span class="sxs-lookup"><span data-stu-id="c6476-229">IPSec VPN (point-to-site or site-to-site)</span></span> | <span data-ttu-id="c6476-230">閘道可以安裝在內部部署環境或 VNet 中的 Azure 虛擬機器 (VM) 上</span><span class="sxs-lookup"><span data-stu-id="c6476-230">Gateway can be installed either on-premises or on an Azure virtual machine (VM) in VNet</span></span> | 
| <span data-ttu-id="c6476-231">內部部署</span><span class="sxs-lookup"><span data-stu-id="c6476-231">On-premises</span></span> | <span data-ttu-id="c6476-232">部署在虛擬網路中的虛擬機器和雲端服務</span><span class="sxs-lookup"><span data-stu-id="c6476-232">Virtual machines and cloud services deployed in virtual networks</span></span> | <span data-ttu-id="c6476-233">ExpressRoute (私用對等)</span><span class="sxs-lookup"><span data-stu-id="c6476-233">ExpressRoute (Private Peering)</span></span> | <span data-ttu-id="c6476-234">閘道可以安裝在內部部署環境或 VNet 中的 Azure VM 上</span><span class="sxs-lookup"><span data-stu-id="c6476-234">Gateway can be installed either on-premises or on an Azure VM in VNet</span></span> | 
| <span data-ttu-id="c6476-235">內部部署</span><span class="sxs-lookup"><span data-stu-id="c6476-235">On-premises</span></span> | <span data-ttu-id="c6476-236">具有公用端點的 Azure 型服務</span><span class="sxs-lookup"><span data-stu-id="c6476-236">Azure-based services that have a public endpoint</span></span> | <span data-ttu-id="c6476-237">ExpressRoute (公用對等)</span><span class="sxs-lookup"><span data-stu-id="c6476-237">ExpressRoute (Public Peering)</span></span> | <span data-ttu-id="c6476-238">閘道必須安裝在內部部署環境</span><span class="sxs-lookup"><span data-stu-id="c6476-238">Gateway must be installed on-premises</span></span> | 

<span data-ttu-id="c6476-239">下列各圖說明在使用「資料管理閘道」的情況下，利用 ExpressRoute 和 IPSec VPN (搭配「虛擬網路」)，在內部部署資料庫與 Azure 服務之間移動資料：</span><span class="sxs-lookup"><span data-stu-id="c6476-239">The following images show the usage of Data Management Gateway for moving data between an on-premises database and Azure services using Express route and IPSec VPN (with Virtual Network):</span></span>

<span data-ttu-id="c6476-240">**ExpressRoute：**</span><span class="sxs-lookup"><span data-stu-id="c6476-240">**Express Route:**</span></span>
 
![使用 ExpressRoute 搭配閘道](media/data-factory-data-movement-security-considerations/express-route-for-gateway.png) 

<span data-ttu-id="c6476-242">**IPSec VPN：**</span><span class="sxs-lookup"><span data-stu-id="c6476-242">**IPSec VPN:**</span></span>

![IPSec VPN 搭配閘道](media/data-factory-data-movement-security-considerations/ipsec-vpn-for-gateway.png)

### <a name="firewall-configurations-and-whitelisting-ip-address-of-gateway"></a><span data-ttu-id="c6476-244">防火牆組態及將閘道的 IP 位址加入白名單</span><span class="sxs-lookup"><span data-stu-id="c6476-244">Firewall configurations and whitelisting IP address of gateway</span></span>

#### <a name="firewall-requirements-for-on-premisesprivate-network"></a><span data-ttu-id="c6476-245">內部部署/私人網路的防火牆需求</span><span class="sxs-lookup"><span data-stu-id="c6476-245">Firewall requirements for on-premises/private network</span></span>  
<span data-ttu-id="c6476-246">在企業中，「公司防火牆」會在組織的中央路由器上執行。</span><span class="sxs-lookup"><span data-stu-id="c6476-246">In an enterprise, a **corporate firewall** runs on the central router of the organization.</span></span> <span data-ttu-id="c6476-247">而「Windows 防火牆」則是在安裝閘道的本機電腦上以精靈的形式執行。</span><span class="sxs-lookup"><span data-stu-id="c6476-247">And, **Windows firewall** runs as a daemon on the local machine on which the gateway is installed.</span></span> 

<span data-ttu-id="c6476-248">下表提供「公司防火牆」的「輸出連接埠」和網域需求。</span><span class="sxs-lookup"><span data-stu-id="c6476-248">The following table provides **outbound port** and domain requirements for the **corporate firewall**.</span></span>

| <span data-ttu-id="c6476-249">網域名稱</span><span class="sxs-lookup"><span data-stu-id="c6476-249">Domain names</span></span> | <span data-ttu-id="c6476-250">輸出連接埠</span><span class="sxs-lookup"><span data-stu-id="c6476-250">Outbound ports</span></span> | <span data-ttu-id="c6476-251">說明</span><span class="sxs-lookup"><span data-stu-id="c6476-251">Description</span></span> |
| ------------ | -------------- | ----------- | 
| `*.servicebus.windows.net` | <span data-ttu-id="c6476-252">443、80</span><span class="sxs-lookup"><span data-stu-id="c6476-252">443, 80</span></span> | <span data-ttu-id="c6476-253">必須提供此資訊，閘道才能連接到 Data Factory 中的資料移動服務</span><span class="sxs-lookup"><span data-stu-id="c6476-253">Required by the gateway to connect to data movement services in Data Factory</span></span> |
| `*.core.windows.net` | <span data-ttu-id="c6476-254">443</span><span class="sxs-lookup"><span data-stu-id="c6476-254">443</span></span> | <span data-ttu-id="c6476-255">當您使用[分段複製](data-factory-copy-activity-performance.md#staged-copy)功能時，可供閘道用來連接到「Azure 儲存體帳戶」。</span><span class="sxs-lookup"><span data-stu-id="c6476-255">Used by the gateway to connect to Azure Storage Account when you use the [staged copy](data-factory-copy-activity-performance.md#staged-copy) feature.</span></span> | 
| `*.frontend.clouddatahub.net` | <span data-ttu-id="c6476-256">443</span><span class="sxs-lookup"><span data-stu-id="c6476-256">443</span></span> | <span data-ttu-id="c6476-257">必須提供此資訊，閘道才能連接到 Azure Data Factory 服務。</span><span class="sxs-lookup"><span data-stu-id="c6476-257">Required by the gateway to connect to the Azure Data Factory service.</span></span> | 
| `*.database.windows.net` | <span data-ttu-id="c6476-258">1433</span><span class="sxs-lookup"><span data-stu-id="c6476-258">1433</span></span>   | <span data-ttu-id="c6476-259">(選擇性) 當您的目的地是 Azure SQL Database/「Azure SQL 資料倉儲」時，需要提供此資訊。</span><span class="sxs-lookup"><span data-stu-id="c6476-259">(OPTIONAL) needed when your destination is Azure SQL Database/ Azure SQL Data Warehouse.</span></span> <span data-ttu-id="c6476-260">若要在不開啟連接埠 1433 的情況下，將資料複製到 Azure SQL Database/「Azure SQL 資料倉儲」，請使用分段複製功能。</span><span class="sxs-lookup"><span data-stu-id="c6476-260">Use the staged copy feature to copy data to Azure SQL Database/Azure SQL Data Warehouse without opening the port 1433.</span></span> | 
| `*.azuredatalakestore.net` | <span data-ttu-id="c6476-261">443</span><span class="sxs-lookup"><span data-stu-id="c6476-261">443</span></span> | <span data-ttu-id="c6476-262">(選擇性) 當您的目的地是 Azure Data Lake Store 時，需要提供此資訊。</span><span class="sxs-lookup"><span data-stu-id="c6476-262">(OPTIONAL) needed when your destination is Azure Data Lake store</span></span> | 

> [!NOTE] 
> <span data-ttu-id="c6476-263">您可能需要依個別資料來源所需，在公司防火牆層級管理連接埠/將網域加入白名單。</span><span class="sxs-lookup"><span data-stu-id="c6476-263">You may have to manage ports/ whitelisting domains at the corporate firewall level as required by respective data sources.</span></span> <span data-ttu-id="c6476-264">此表格僅使用 Azure SQL Database、「Azure SQL 資料倉儲」、Azure Data Lake Store 作為範例。</span><span class="sxs-lookup"><span data-stu-id="c6476-264">This table only uses Azure SQL Database, Azure SQL Data Warehouse, Azure Data Lake Store as examples.</span></span>   

<span data-ttu-id="c6476-265">下表提供「Windows 防火牆」的「輸入連接埠」需求。</span><span class="sxs-lookup"><span data-stu-id="c6476-265">The following table provides **inbound port** requirements for the **windows firewall**.</span></span>

| <span data-ttu-id="c6476-266">輸入連接埠</span><span class="sxs-lookup"><span data-stu-id="c6476-266">Inbound ports</span></span> | <span data-ttu-id="c6476-267">說明</span><span class="sxs-lookup"><span data-stu-id="c6476-267">Description</span></span> | 
| ------------- | ----------- | 
| <span data-ttu-id="c6476-268">8050 (TCP)</span><span class="sxs-lookup"><span data-stu-id="c6476-268">8050 (TCP)</span></span> | <span data-ttu-id="c6476-269">必須提供此資訊，認證管理員應用程式才能為閘道上的內部部署資料存放區安全地設定認證。</span><span class="sxs-lookup"><span data-stu-id="c6476-269">Required by the credential manager application to securely set credentials for on-premises data stores on the gateway.</span></span> | 

![閘道連接埠需求](media\data-factory-data-movement-security-considerations/gateway-port-requirements.png) 

#### <a name="ip-configurations-whitelisting-in-data-store"></a><span data-ttu-id="c6476-271">資料存放區中的 IP 組態/白名單設定</span><span class="sxs-lookup"><span data-stu-id="c6476-271">IP configurations/ whitelisting in data store</span></span>
<span data-ttu-id="c6476-272">有些雲端資料存放區也會要求必須將存取它們的電腦之 IP 位址加入白名單。</span><span class="sxs-lookup"><span data-stu-id="c6476-272">Some data stores in the cloud also require whitelisting of IP address of the machine accessing them.</span></span> <span data-ttu-id="c6476-273">請確定在防火牆中已將閘道電腦的 IP 位址正確地加入白名單並進行設定。</span><span class="sxs-lookup"><span data-stu-id="c6476-273">Ensure that the IP address of the gateway machine is whitelisted/ configured in firewall appropriately.</span></span>

<span data-ttu-id="c6476-274">下列雲端資料存放區會要求必須將閘道電腦的 IP 位址加入白名單。</span><span class="sxs-lookup"><span data-stu-id="c6476-274">The following cloud data stores require whitelisting of IP address of the gateway machine.</span></span> <span data-ttu-id="c6476-275">在這些資料存放區中，有些可能預設不會要求將 IP 位址加入白名單。</span><span class="sxs-lookup"><span data-stu-id="c6476-275">Some of these data stores, by default, may not require whitelisting of the IP address.</span></span> 

- [<span data-ttu-id="c6476-276">Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="c6476-276">Azure SQL Database</span></span>](../sql-database/sql-database-firewall-configure.md) 
- [<span data-ttu-id="c6476-277">Azure SQL 資料倉儲</span><span class="sxs-lookup"><span data-stu-id="c6476-277">Azure SQL Data Warehouse</span></span>](../sql-data-warehouse/sql-data-warehouse-get-started-provision.md#create-a-server-level-firewall-rule-in-the-azure-portal)
- [<span data-ttu-id="c6476-278">Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="c6476-278">Azure Data Lake Store</span></span>](../data-lake-store/data-lake-store-secure-data.md#set-ip-address-range-for-data-access)
- [<span data-ttu-id="c6476-279">Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="c6476-279">Azure Cosmos DB</span></span>](../documentdb/documentdb-firewall-support.md)
- [<span data-ttu-id="c6476-280">Amazon Redshift</span><span class="sxs-lookup"><span data-stu-id="c6476-280">Amazon Redshift</span></span>](http://docs.aws.amazon.com/redshift/latest/gsg/rs-gsg-authorize-cluster-access.html) 

## <a name="frequently-asked-questions"></a><span data-ttu-id="c6476-281">常見問題集</span><span class="sxs-lookup"><span data-stu-id="c6476-281">Frequently asked questions</span></span>

<span data-ttu-id="c6476-282">**問：**是否可以跨不同的 Data Factory 共用閘道？</span><span class="sxs-lookup"><span data-stu-id="c6476-282">**Question:** Can the Gateway be shared across different data factories?</span></span>
<span data-ttu-id="c6476-283">**答：**我們尚未支援這項功能。</span><span class="sxs-lookup"><span data-stu-id="c6476-283">**Answer:** We do not support this feature yet.</span></span> <span data-ttu-id="c6476-284">我們正積極處理這個問題。</span><span class="sxs-lookup"><span data-stu-id="c6476-284">We are actively working on it.</span></span>

<span data-ttu-id="c6476-285">**問：**閘道需要什麼連接埠才能運作？</span><span class="sxs-lookup"><span data-stu-id="c6476-285">**Question:** What are the port requirements for the gateway to work?</span></span>
<span data-ttu-id="c6476-286">**答：**閘道會建立 HTTP 型連線來開啟網際網路。</span><span class="sxs-lookup"><span data-stu-id="c6476-286">**Answer:** Gateway makes HTTP-based connections to open internet.</span></span> <span data-ttu-id="c6476-287">必須開啟**輸出連接埠 443 和 80**，閘道才能建立此連線。</span><span class="sxs-lookup"><span data-stu-id="c6476-287">The **outbound ports 443 and 80** must be opened for gateway to make this connection.</span></span> <span data-ttu-id="c6476-288">針對「認證管理員」應用程式，請只在電腦層級 (而非公司防火牆層級) 開啟**輸入連接埠 8050**。</span><span class="sxs-lookup"><span data-stu-id="c6476-288">Open **Inbound Port 8050** only at the machine level (not at corporate firewall level) for Credential Manager application.</span></span> <span data-ttu-id="c6476-289">如果使用 Azure SQL Database 或「Azure SQL 資料倉儲」作為來源/目的地，則也需要開啟 **1433** 連接埠。</span><span class="sxs-lookup"><span data-stu-id="c6476-289">If Azure SQL Database or Azure SQL Data Warehouse is used as source/ destination, then you need to open **1433** port as well.</span></span> <span data-ttu-id="c6476-290">如需詳細資訊，請參閱[防火牆組態及將 IP 位址加入白名單](#firewall-configurations-and-whitelisting-ip-address-of gateway)一節。</span><span class="sxs-lookup"><span data-stu-id="c6476-290">For more information, see [Firewall configurations and whitelisting IP addresses](#firewall-configurations-and-whitelisting-ip-address-of gateway) section.</span></span> 

<span data-ttu-id="c6476-291">**問：**閘道有什麼憑證需求？</span><span class="sxs-lookup"><span data-stu-id="c6476-291">**Question:** What are certificate requirements for Gateway?</span></span>
<span data-ttu-id="c6476-292">**答：**目前閘道必須要有認證管理員應用程式用來安全地設定資料存放區認證的憑證。</span><span class="sxs-lookup"><span data-stu-id="c6476-292">**Answer:** Current gateway requires a certificate that is used by the credential manager application for securely setting data store credentials.</span></span> <span data-ttu-id="c6476-293">此憑證是閘道安裝程式所建立並設定的自我簽署憑證。</span><span class="sxs-lookup"><span data-stu-id="c6476-293">This certificate is a self-signed certificate created and configured by the gateway setup.</span></span> <span data-ttu-id="c6476-294">您可以改用自己的 TLS/SSL 憑證。</span><span class="sxs-lookup"><span data-stu-id="c6476-294">You can use your own TLS/ SSL certificate instead.</span></span> <span data-ttu-id="c6476-295">如需詳細資訊，請參閱 [Click-Once 認證管理員應用程式](#click-once-credentials-manager-app)一節。</span><span class="sxs-lookup"><span data-stu-id="c6476-295">For more information, see [click-once credential manager application](#click-once-credentials-manager-app) section.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="c6476-296">後續步驟</span><span class="sxs-lookup"><span data-stu-id="c6476-296">Next steps</span></span>
<span data-ttu-id="c6476-297">如需有關複製活動效能的資訊，請參閱[複製活動的效能及微調指南](data-factory-copy-activity-performance.md)。</span><span class="sxs-lookup"><span data-stu-id="c6476-297">For information about performance of copy activity, see [Copy activity performance and tuning guide](data-factory-copy-activity-performance.md).</span></span>

 
