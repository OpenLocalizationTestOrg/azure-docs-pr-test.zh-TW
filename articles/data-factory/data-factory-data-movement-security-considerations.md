---
title: "Azure Data Factory 中的資料移動的 aaaSecurity 考量 |Microsoft 文件"
description: "了解如何在 Azure Data Factory 中保護資料移動。"
services: data-factory
documentationcenter: 
author: nabhishek
manager: jhubbard
editor: monicar
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/27/2017
ms.author: abnarain
ms.openlocfilehash: 4bfce8884df14ad5b94e28ad3dfcf7025e2130a3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="azure-data-factory---security-considerations-for-data-movement"></a><span data-ttu-id="2cdc9-103">Azure Data Factory - 資料移動的安全性考量</span><span class="sxs-lookup"><span data-stu-id="2cdc9-103">Azure Data Factory - Security considerations for data movement</span></span>
## <a name="introduction"></a><span data-ttu-id="2cdc9-104">簡介</span><span class="sxs-lookup"><span data-stu-id="2cdc9-104">Introduction</span></span>
<span data-ttu-id="2cdc9-105">這篇文章描述 Azure Data Factory 中的資料移動服務使用 toosecure 您資料的基本安全性基礎結構。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-105">This article describes basic security infrastructure that data movement services in Azure Data Factory use toosecure your data.</span></span> <span data-ttu-id="2cdc9-106">Azure Data Factory 管理資源建置在 Azure 安全性基礎結構上，並使用 Azure 提供的所有可能安全性措施。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-106">Azure Data Factory management resources are built on Azure security infrastructure and use all possible security measures offered by Azure.</span></span>

<span data-ttu-id="2cdc9-107">在 Data Factory 方案中，您可以建立一或多個資料 [管線](data-factory-create-pipelines.md)。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-107">In a Data Factory solution, you create one or more data [pipelines](data-factory-create-pipelines.md).</span></span> <span data-ttu-id="2cdc9-108">管線是一起執行某個工作的活動所組成的邏輯群組。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-108">A pipeline is a logical grouping of activities that together perform a task.</span></span> <span data-ttu-id="2cdc9-109">這些管線位於 hello hello 資料處理站建立所在的區域。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-109">These pipelines reside in hello region where hello data factory was created.</span></span> 

<span data-ttu-id="2cdc9-110">即使 Data Factory 僅提供**美國西部**，**美國東部**，和**北歐**區域，hello 資料移動服務可供使用[全域中數個區域](data-factory-data-movement-activities.md#global)。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-110">Even though Data Factory is available in only **West US**, **East US**, and **North Europe** regions, hello data movement service is available [globally in several regions](data-factory-data-movement-activities.md#global).</span></span> <span data-ttu-id="2cdc9-111">Data Factory 服務會確保資料不會離開地理區域，/ 區域除非您明確指示 hello 服務 toouse 替代地區如果 hello 資料移動服務不是尚未部署 toothat 區域。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-111">Data Factory service ensures that data does not leave a geographical area/ region unless you explicitly instruct hello service toouse an alternate region if hello data movement service is not yet deployed toothat region.</span></span> 

<span data-ttu-id="2cdc9-112">Azure Data Factory 本身除了用於雲端資料存放區的已連結服務認證 (會使用憑證加密) 之外，並不會儲存任何資料。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-112">Azure Data Factory itself does not store any data except for linked service credentials for cloud data stores, which are encrypted using certificates.</span></span> <span data-ttu-id="2cdc9-113">它可讓您建立資料驅動型工作流程 tooorchestrate 之間資料移動的[支援資料存放區](data-factory-data-movement-activities.md#supported-data-stores-and-formats)和處理的資料使用[計算服務](data-factory-compute-linked-services.md)內部或其他區域中環境。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-113">It lets you create data-driven workflows tooorchestrate movement of data between [supported data stores](data-factory-data-movement-activities.md#supported-data-stores-and-formats) and processing of data using [compute services](data-factory-compute-linked-services.md) in other regions or in an on-premises environment.</span></span> <span data-ttu-id="2cdc9-114">它也可讓您太[監視和管理工作流程](data-factory-monitor-manage-pipelines.md)同時以程式設計方式使用和 UI 機制。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-114">It also allows you too[monitor and manage workflows](data-factory-monitor-manage-pipelines.md) using both programmatic and UI mechanisms.</span></span>

<span data-ttu-id="2cdc9-115">使用 Azure Data Factory 進行的資料移動已通過下列各項規範的「認證」：</span><span class="sxs-lookup"><span data-stu-id="2cdc9-115">Data movement using Azure Data Factory has been **certified** for:</span></span>
-   [<span data-ttu-id="2cdc9-116">HIPAA/HITECH</span><span class="sxs-lookup"><span data-stu-id="2cdc9-116">HIPAA/HITECH</span></span>](https://www.microsoft.com/en-us/trustcenter/Compliance/HIPAA)  
-   [<span data-ttu-id="2cdc9-117">ISO/IEC 27001</span><span class="sxs-lookup"><span data-stu-id="2cdc9-117">ISO/IEC 27001</span></span>](https://www.microsoft.com/en-us/trustcenter/Compliance/ISO-IEC-27001)  
-   [<span data-ttu-id="2cdc9-118">ISO/IEC 27018</span><span class="sxs-lookup"><span data-stu-id="2cdc9-118">ISO/IEC 27018</span></span>](https://www.microsoft.com/en-us/trustcenter/Compliance/ISO-IEC-27018) 
-   [<span data-ttu-id="2cdc9-119">CSA STAR</span><span class="sxs-lookup"><span data-stu-id="2cdc9-119">CSA STAR</span></span>](https://www.microsoft.com/en-us/trustcenter/Compliance/CSA-STAR-Certification)
     
<span data-ttu-id="2cdc9-120">如果您想要在 Azure 的符合性與 Azure 保護本身的基礎結構的方式，請瀏覽 hello [Microsoft 信任中心](https://www.microsoft.com/TrustCenter/default.aspx)。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-120">If you are interested in Azure compliance and how Azure secures its own infrastructure, visit hello [Microsoft Trust Center](https://www.microsoft.com/TrustCenter/default.aspx).</span></span> 

<span data-ttu-id="2cdc9-121">在本文中，我們來檢閱 hello 下列兩個資料移動案例中的安全性考量：</span><span class="sxs-lookup"><span data-stu-id="2cdc9-121">In this article, we review security considerations in hello following two data movement scenarios:</span></span> 

- <span data-ttu-id="2cdc9-122">**雲端案例** - 在此案例中，可透過網際網路公開存取您的來源和目的地。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-122">**Cloud scenario**- In this scenario, both your source and destination are publicly accessible through internet.</span></span> <span data-ttu-id="2cdc9-123">這些包括受管理的雲端儲存體服務 (例如「Azure 儲存體」、「Azure SQL 資料倉儲」、Azure SQL Database、Azure Data Lake Store、Amazon S3、Amazon Redshift)、SaaS 服務 (例如 Salesforce)，以及 Web 通訊協定 (例如 FTP 和 OData)。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-123">These include managed cloud storage services like Azure Storage, Azure SQL Data Warehouse, Azure SQL Database, Azure Data Lake Store, Amazon S3, Amazon Redshift, SaaS services such as Salesforce, and web protocols such as FTP and OData.</span></span> <span data-ttu-id="2cdc9-124">如需完整的支援資料來源清單，請參閱[這裡](data-factory-data-movement-activities.md#supported-data-stores-and-formats)。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-124">You can find a complete list of supported data sources [here](data-factory-data-movement-activities.md#supported-data-stores-and-formats).</span></span>
- <span data-ttu-id="2cdc9-125">**混合式案例**-在此案例中，您的來源或目的地位於防火牆後方，或在內部部署公司網路或 hello 資料存放區是在私人網路 / 虛擬網路 （最常 hello 來源），而且不是可公開存取.</span><span class="sxs-lookup"><span data-stu-id="2cdc9-125">**Hybrid scenario**- In this scenario, either your source or destination is behind a firewall or inside an on-premises corporate network or hello data store is in a private network/ virtual network (most often hello source) and is not publicly accessible.</span></span> <span data-ttu-id="2cdc9-126">裝載在虛擬機器上的資料庫伺服器也屬於此案例的涵蓋範圍。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-126">Database servers hosted on virtual machines also fall under this scenario.</span></span>

## <a name="cloud-scenarios"></a><span data-ttu-id="2cdc9-127">雲端案例</span><span class="sxs-lookup"><span data-stu-id="2cdc9-127">Cloud scenarios</span></span>
###<a name="securing-data-store-credentials"></a><span data-ttu-id="2cdc9-128">保護資料存放區認證</span><span class="sxs-lookup"><span data-stu-id="2cdc9-128">Securing data store credentials</span></span>
<span data-ttu-id="2cdc9-129">Azure Data Factory 可透過使用「受 Microsoft 管理的憑證」來「加密」資料存放區認證，為這些認證提供保護。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-129">Azure Data Factory protects your data store credentials by **encrypting** them by using **certificates managed by Microsoft**.</span></span> <span data-ttu-id="2cdc9-130">這些憑證每隔「兩年」會輪替一次 (包括憑證更新和憑證移轉)。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-130">These certificates are rotated every **two years** (which includes renewal of certificate and migration of credentials).</span></span> <span data-ttu-id="2cdc9-131">這些已加密的認證會安全地儲存在「受 Azure Data Factory 管理服務管理的 Azure 儲存體」中。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-131">These encrypted credentials are securely stored in an **Azure Storage managed by Azure Data Factory management services**.</span></span> <span data-ttu-id="2cdc9-132">如需有關「Azure 儲存體」安全性的詳細資訊，請參閱 [Azure 儲存體安全性概觀](../security/security-storage-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-132">For more information about Azure Storage security, refer [Azure Storage Security Overview](../security/security-storage-overview.md).</span></span>

### <a name="data-encryption-in-transit"></a><span data-ttu-id="2cdc9-133">傳輸中資料加密</span><span class="sxs-lookup"><span data-stu-id="2cdc9-133">Data encryption in transit</span></span>
<span data-ttu-id="2cdc9-134">如果 hello 雲端資料存放區支援 HTTPS 或 TLS 時，Data Factory 中的資料移動服務之間的所有資料都傳輸和雲端資料存放區會透過 HTTPS 或 TLS 的安全通道。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-134">If hello cloud data store supports HTTPS or TLS, all data transfers between data movement services in Data Factory and a cloud data store are via secure channel HTTPS or TLS.</span></span>

> [!NOTE]
> <span data-ttu-id="2cdc9-135">所有連線太**Azure SQL Database**和**Azure SQL 資料倉儲**一律需要加密 (SSL/TLS)，資料傳輸 tooand 從 hello 資料庫時發生。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-135">All connections too**Azure SQL Database** and **Azure SQL Data Warehouse** always require encryption (SSL/TLS) while data is in transit tooand from hello database.</span></span> <span data-ttu-id="2cdc9-136">撰寫使用 JSON 編輯器的管線，時新增 hello**加密**屬性並將它設定太**true**在 hello**連接字串**。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-136">While authoring a pipeline using a JSON editor, add hello **encryption** property and set it too**true** in hello **connection string**.</span></span> <span data-ttu-id="2cdc9-137">當您使用 hello[複製精靈](data-factory-azure-copy-wizard.md)，hello 精靈預設會設定這個屬性。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-137">When you use hello [Copy Wizard](data-factory-azure-copy-wizard.md), hello wizard sets this property by default.</span></span> <span data-ttu-id="2cdc9-138">如**Azure 儲存體**，您可以使用**HTTPS** hello 連接字串中。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-138">For **Azure Storage**, you can use **HTTPS** in hello connection string.</span></span>

### <a name="data-encryption-at-rest"></a><span data-ttu-id="2cdc9-139">待用資料加密</span><span class="sxs-lookup"><span data-stu-id="2cdc9-139">Data encryption at rest</span></span>
<span data-ttu-id="2cdc9-140">有些資料存放區支援待用資料加密。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-140">Some data stores support encryption of data at rest.</span></span> <span data-ttu-id="2cdc9-141">建議您為這些資料存放區啟用資料加密機制。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-141">We suggest that you enable data encryption mechanism for those data stores.</span></span> 

#### <a name="azure-sql-data-warehouse"></a><span data-ttu-id="2cdc9-142">Azure SQL 資料倉儲</span><span class="sxs-lookup"><span data-stu-id="2cdc9-142">Azure SQL Data Warehouse</span></span>
<span data-ttu-id="2cdc9-143">Azure SQL 資料倉儲中的透明資料加密 (TDE) 會協助防範惡意活動的 hello 威脅所執行的即時加密與解密的靜止資料。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-143">Transparent Data Encryption (TDE) in Azure SQL Data Warehouse helps with protecting against hello threat of malicious activity by performing real-time encryption and decryption of your data at rest.</span></span> <span data-ttu-id="2cdc9-144">此行為是透明的 toohello 用戶端。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-144">This behavior is transparent toohello client.</span></span> <span data-ttu-id="2cdc9-145">如需詳細資訊，請參閱[保護 SQL 資料倉儲中的資料庫](../sql-data-warehouse/sql-data-warehouse-overview-manage-security.md)。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-145">For more information, see [Secure a database in SQL Data Warehouse](../sql-data-warehouse/sql-data-warehouse-overview-manage-security.md).</span></span>

#### <a name="azure-sql-database"></a><span data-ttu-id="2cdc9-146">Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="2cdc9-146">Azure SQL Database</span></span>
<span data-ttu-id="2cdc9-147">Azure SQL Database 也支援透明資料加密 (TDE)，協助防範惡意活動的 hello 威脅，藉由執行 hello 資料的即時加密與解密，而不需要變更 toohello 應用程式。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-147">Azure SQL Database also supports transparent data encryption (TDE), which helps with protecting against hello threat of malicious activity by performing real-time encryption and decryption of hello data without requiring changes toohello application.</span></span> <span data-ttu-id="2cdc9-148">此行為是透明的 toohello 用戶端。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-148">This behavior is transparent toohello client.</span></span> <span data-ttu-id="2cdc9-149">若要深入了解，請參閱 [Azure SQL Database 的透明資料加密](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-with-azure-sql-database)。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-149">For more information, see [Transparent Data Encryption with Azure SQL Database](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-with-azure-sql-database).</span></span> 

#### <a name="azure-data-lake-store"></a><span data-ttu-id="2cdc9-150">Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="2cdc9-150">Azure Data Lake Store</span></span>
<span data-ttu-id="2cdc9-151">Azure 資料湖存放區也會提供資料儲存在 hello 帳戶加密。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-151">Azure Data Lake store also provides encryption for data stored in hello account.</span></span> <span data-ttu-id="2cdc9-152">啟用時，資料湖存放區會自動保存之前加密資料，並擷取功能，讓透明 toohello 用戶端存取 hello 資料之前解密。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-152">When enabled, Data Lake store automatically encrypts data before persisting and decrypts before retrieval, making it transparent toohello client accessing hello data.</span></span> <span data-ttu-id="2cdc9-153">如需詳細資訊，請參閱 [Azure Data Lake Store 安全性](../data-lake-store/data-lake-store-security-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-153">For more information, see [Security in Azure Data Lake Store](../data-lake-store/data-lake-store-security-overview.md).</span></span> 

#### <a name="azure-blob-storage-and-azure-table-storage"></a><span data-ttu-id="2cdc9-154">Azure Blob 儲存體和 Azure 資料表儲存體</span><span class="sxs-lookup"><span data-stu-id="2cdc9-154">Azure Blob Storage and Azure Table Storage</span></span>
<span data-ttu-id="2cdc9-155">Azure Blob 儲存體和 Azure 資料表儲存體支援儲存體服務加密 (SSE) 中，可自動加密您的資料之前保存 toostorage 和之前擷取的解密。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-155">Azure Blob Storage and Azure Table storage supports Storage Service Encryption (SSE), which automatically encrypts your data before persisting toostorage and decrypts before retrieval.</span></span> <span data-ttu-id="2cdc9-156">如需詳細資訊，請參閱[待用資料的 Azure 儲存體服務加密](../storage/common/storage-service-encryption.md)。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-156">For more information, see [Azure Storage Service Encryption for Data at Rest](../storage/common/storage-service-encryption.md).</span></span>

#### <a name="amazon-s3"></a><span data-ttu-id="2cdc9-157">Amazon S3</span><span class="sxs-lookup"><span data-stu-id="2cdc9-157">Amazon S3</span></span>
<span data-ttu-id="2cdc9-158">Amazon S3 同時支援用戶端和伺服器的待用資料加密。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-158">Amazon S3 supports both client and server encryption of data at Rest.</span></span> <span data-ttu-id="2cdc9-159">如需詳細資訊，請參閱[使用加密來保護資料 (英文)](http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingEncryption.html)。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-159">For more information, see [Protecting Data Using Encryption](http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingEncryption.html).</span></span> <span data-ttu-id="2cdc9-160">目前，Data Factory 並不支援虛擬私人雲端 (VPC) 內的 Amazon S3。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-160">Currently, Data Factory does not support Amazon S3 inside a virtual private cloud (VPC).</span></span>

#### <a name="amazon-redshift"></a><span data-ttu-id="2cdc9-161">Amazon Redshift</span><span class="sxs-lookup"><span data-stu-id="2cdc9-161">Amazon Redshift</span></span>
<span data-ttu-id="2cdc9-162">Amazon Redshift 支援叢集待用資料加密。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-162">Amazon Redshift supports cluster encryption for data at rest.</span></span> <span data-ttu-id="2cdc9-163">如需詳細資訊，請參閱 [Amazon Redshift 資料庫加密 (英文)](http://docs.aws.amazon.com/redshift/latest/mgmt/working-with-db-encryption.html)。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-163">For more information, see [Amazon Redshift Database Encryption](http://docs.aws.amazon.com/redshift/latest/mgmt/working-with-db-encryption.html).</span></span> <span data-ttu-id="2cdc9-164">目前，Data Factory 並不支援 VPC 內的 Amazon Redshift。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-164">Currently, Data Factory does not support Amazon Redshift inside a VPC.</span></span> 

#### <a name="salesforce"></a><span data-ttu-id="2cdc9-165">Salesforce</span><span class="sxs-lookup"><span data-stu-id="2cdc9-165">Salesforce</span></span>
<span data-ttu-id="2cdc9-166">Salesforce 支援「Shield 平台加密」，可加密所有檔案、附件、自訂欄位。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-166">Salesforce supports Shield Platform Encryption that allows encryption of all files, attachments, custom fields.</span></span> <span data-ttu-id="2cdc9-167">如需詳細資訊，請參閱[Web 伺服器 OAuth 驗證流程的了解 hello](https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/intro_understanding_web_server_oauth_flow.htm)。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-167">For more information, see [Understanding hello Web Server OAuth Authentication Flow](https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/intro_understanding_web_server_oauth_flow.htm).</span></span>  

## <a name="hybrid-scenarios-using-data-management-gateway"></a><span data-ttu-id="2cdc9-168">混合式案例 (使用資料管理閘道)</span><span class="sxs-lookup"><span data-stu-id="2cdc9-168">Hybrid Scenarios (using Data Management Gateway)</span></span>
<span data-ttu-id="2cdc9-169">混合式案例需要安裝在與內部網路或虛擬網路 (Azure) 或是虛擬的私人雲端 (Amazon) 內的資料管理閘道器 toobe。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-169">Hybrid scenarios require Data Management Gateway toobe installed in an on-premises network or inside a virtual network (Azure) or a virtual private cloud (Amazon).</span></span> <span data-ttu-id="2cdc9-170">hello 閘道必須能夠 tooaccess hello 本機資料存放區。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-170">hello gateway must be able tooaccess hello local data stores.</span></span> <span data-ttu-id="2cdc9-171">如需 hello 閘道的詳細資訊，請參閱[資料管理閘道器](data-factory-data-management-gateway.md)。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-171">For more information about hello gateway, see [Data Management Gateway](data-factory-data-management-gateway.md).</span></span> 

![「資料管理閘道」的通道](media/data-factory-data-movement-security-considerations/data-management-gateway-channels.png)

<span data-ttu-id="2cdc9-173">hello**命令通道**可讓在 Data Factory 中的資料移動服務和資料管理閘道器之間的通訊。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-173">hello **command channel** allows communication between data movement services in Data Factory and Data Management Gateway.</span></span> <span data-ttu-id="2cdc9-174">hello 通訊包含資訊相關的 toohello 活動。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-174">hello communication contains information related toohello activity.</span></span> <span data-ttu-id="2cdc9-175">hello 資料通道會用於內部部署資料存放區和雲端資料存放區之間傳送資料。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-175">hello data channel is used for transferring data between on-premises data stores and cloud data stores.</span></span>    

### <a name="on-premises-data-store-credentials"></a><span data-ttu-id="2cdc9-176">內部部署資料存放區認證</span><span class="sxs-lookup"><span data-stu-id="2cdc9-176">On-premises data store credentials</span></span>
<span data-ttu-id="2cdc9-177">您在內部部署資料存放區的 hello 認證儲存在本機 （不在 hello 雲端）。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-177">hello credentials for your on-premises data stores are stored locally (not in hello cloud).</span></span> <span data-ttu-id="2cdc9-178">您可以透過三種不同的方式設定這些認證。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-178">They can be set in three different ways.</span></span> 

- <span data-ttu-id="2cdc9-179">從「Azure 入口網站」/「複製精靈」透過 HTTPS 使用**純文字** (較不安全)。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-179">Using **plain-text** (less secure) via HTTPS from Azure Portal/ Copy Wizard.</span></span> <span data-ttu-id="2cdc9-180">hello 認證會傳遞純文字 toohello 在內部部署閘道中。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-180">hello credentials are passed in plain-text toohello on-premises gateway.</span></span>
- <span data-ttu-id="2cdc9-181">**從複製精靈使用 JavaScript 密碼編譯程式庫**。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-181">Using **JavaScript Cryptography library from Copy Wizard**.</span></span>
- <span data-ttu-id="2cdc9-182">使用 **Click-Once 型認證管理員應用程式**。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-182">Using **click-once based credentials manager app**.</span></span> <span data-ttu-id="2cdc9-183">hello 按一下-一旦具有存取 toohello 閘道，並設定 hello 資料存放區認證 hello 在內部部署機器上執行應用程式。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-183">hello click-once application executes on hello on-premises machine that has access toohello gateway and sets credentials for hello data store.</span></span> <span data-ttu-id="2cdc9-184">此選項和下一個是 hello hello 最安全選項。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-184">This option and hello next one are hello most secure options.</span></span> <span data-ttu-id="2cdc9-185">hello 認證管理員應用程式，根據預設，hello 連接埠 8050 機器上使用 「 hello 與閘道進行安全通訊。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-185">hello credential manager app, by default, uses hello port 8050 on hello machine with gateway for secure communication.</span></span>  
- <span data-ttu-id="2cdc9-186">使用[新增 AzureRmDataFactoryEncryptValue](/powershell/module/azurerm.datafactories/New-AzureRmDataFactoryEncryptValue) PowerShell cmdlet tooencrypt 認證。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-186">Use [New-AzureRmDataFactoryEncryptValue](/powershell/module/azurerm.datafactories/New-AzureRmDataFactoryEncryptValue) PowerShell cmdlet tooencrypt credentials.</span></span> <span data-ttu-id="2cdc9-187">hello cmdlet 會使用該閘道是設定的 toouse tooencrypt hello 認證 hello 憑證。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-187">hello cmdlet uses hello certificate that gateway is configured toouse tooencrypt hello credentials.</span></span> <span data-ttu-id="2cdc9-188">您可以使用此 cmdlet 所傳回的 hello 加密認證並將它新增到太**EncryptedCredential** hello 的項目**connectionString** hello JSON 檔案中，您使用以 hello [新 AzureRmDataFactoryLinkedService](/powershell/module/azurerm.datafactories/new-azurermdatafactorylinkedservice) cmdlet 或在 hello 入口網站中的 hello Data Factory 編輯器中的 hello JSON 片段。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-188">You can use hello encrypted credentials returned by this cmdlet and add it too**EncryptedCredential** element of hello **connectionString** in hello JSON file that you use with hello [New-AzureRmDataFactoryLinkedService](/powershell/module/azurerm.datafactories/new-azurermdatafactorylinkedservice) cmdlet or in hello JSON snippet in hello Data Factory Editor in hello portal.</span></span> <span data-ttu-id="2cdc9-189">此選項與 hello 依序按一下-應用程式之後 hello 最安全選項。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-189">This option and hello click-once application are hello most secure options.</span></span> 

#### <a name="javascript-cryptography-library-based-encryption"></a><span data-ttu-id="2cdc9-190">JavaScript 密碼編譯程式庫型加密</span><span class="sxs-lookup"><span data-stu-id="2cdc9-190">JavaScript cryptography library-based encryption</span></span>
<span data-ttu-id="2cdc9-191">您可以加密資料存放區認證使用[JavaScript 密碼編譯程式庫](https://www.microsoft.com/download/details.aspx?id=52439)從 hello[複製精靈](data-factory-copy-wizard.md)。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-191">You can encrypt data store credentials using [JavaScript Cryptography library](https://www.microsoft.com/download/details.aspx?id=52439) from hello [Copy Wizard](data-factory-copy-wizard.md).</span></span> <span data-ttu-id="2cdc9-192">當您選取此選項時，hello 複製精靈會擷取 hello 閘道的公用金鑰，並使用它 tooencrypt hello 資料存放區認證。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-192">When you select this option, hello Copy Wizard retrieves hello public key of gateway and uses it tooencrypt hello data store credentials.</span></span> <span data-ttu-id="2cdc9-193">hello 認證會解密 hello 閘道電腦，再受到 Windows 的[DPAPI](https://msdn.microsoft.com/library/ms995355.aspx)。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-193">hello credentials are decrypted by hello gateway machine and protected by Windows [DPAPI](https://msdn.microsoft.com/library/ms995355.aspx).</span></span>

<span data-ttu-id="2cdc9-194">**支援的瀏覽器：**IE8、IE9、IE10、IE11、Microsoft Edge，以及最新版 Firefox、Chrome、Opera、Safari 瀏覽器。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-194">**Supported browsers:** IE8, IE9, IE10, IE11, Microsoft Edge, and latest Firefox, Chrome, Opera, Safari browsers.</span></span> 

#### <a name="click-once-credentials-manager-app"></a><span data-ttu-id="2cdc9-195">Click-Once 認證管理員應用程式</span><span class="sxs-lookup"><span data-stu-id="2cdc9-195">Click-once credentials manager app</span></span>
<span data-ttu-id="2cdc9-196">您可以啟動 hello 按一下-一旦基礎從 Azure 入口網站/複製精靈的 認證管理員應用程式中撰寫管線時。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-196">You can launch hello click-once based credential manager app from Azure portal/Copy Wizard when authoring pipelines.</span></span> <span data-ttu-id="2cdc9-197">此應用程式可確保您的認證不會以純文字透過傳送 hello 網路。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-197">This application ensures that credentials are not transferred in plain text over hello wire.</span></span> <span data-ttu-id="2cdc9-198">根據預設，它會使用 hello 連接埠**8050**上 hello 與閘道進行安全通訊。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-198">By default, it uses hello port **8050** on hello machine with gateway for secure communication.</span></span> <span data-ttu-id="2cdc9-199">您可以視需要變更此連接埠。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-199">If necessary, this port can be changed.</span></span>  
  
![Hello 閘道的 HTTPS 連接埠](media/data-factory-data-movement-security-considerations/https-port-for-gateway.png)

<span data-ttu-id="2cdc9-201">「資料管理閘道」目前使用單一「憑證」。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-201">Currently, Data Management Gateway uses a single **certificate**.</span></span> <span data-ttu-id="2cdc9-202">Hello 閘道安裝期間會建立此憑證 (適用於的 tooData 2016 年 11 月之後建立的管理閘道器和 2.4.xxxx.x 版本或更新版本)。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-202">This certificate is created during hello gateway installation (applies tooData Management Gateway created after November 2016 and version 2.4.xxxx.x or later).</span></span> <span data-ttu-id="2cdc9-203">您可以使用自己的 SSL/TLS 憑證來取代此憑證。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-203">You can replace this certificate with your own SSL/TLS certificate.</span></span> <span data-ttu-id="2cdc9-204">此憑證由 hello 按一下-一旦認證管理員應用程式 toosecurely 連接 toohello 閘道機器設定資料存放區認證。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-204">This certificate is used by hello click-once credential manager application toosecurely connect toohello gateway machine for setting data store credentials.</span></span> <span data-ttu-id="2cdc9-205">它會儲存資料存放區認證安全地在內部使用 hello Windows [DPAPI](https://msdn.microsoft.com/library/ms995355.aspx) hello 與閘道的電腦上。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-205">It stores data store credentials securely on-premises by using hello Windows [DPAPI](https://msdn.microsoft.com/library/ms995355.aspx) on hello machine with gateway.</span></span> 

> [!NOTE]
> <span data-ttu-id="2cdc9-206">較舊版本 2.3.xxxx.x 或 2016 年 11 月之前已安裝的閘道繼續 toouse 認證加密並儲存在雲端上。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-206">Older gateways that were installed before November 2016 or of version 2.3.xxxx.x continue toouse credentials encrypted and stored on cloud.</span></span> <span data-ttu-id="2cdc9-207">即使您升級 hello 閘道 toohello 最新版本，hello 認證也無法移轉的 tooan 在內部部署機器</span><span class="sxs-lookup"><span data-stu-id="2cdc9-207">Even if you upgrade hello gateway toohello latest version, hello credentials are not migrated tooan on-premises machine</span></span>    
  
| <span data-ttu-id="2cdc9-208">閘道版本 (建立時)</span><span class="sxs-lookup"><span data-stu-id="2cdc9-208">Gateway version (during creation)</span></span> | <span data-ttu-id="2cdc9-209">認證儲存位置</span><span class="sxs-lookup"><span data-stu-id="2cdc9-209">Credentials Stored</span></span> | <span data-ttu-id="2cdc9-210">認證加密/安全性</span><span class="sxs-lookup"><span data-stu-id="2cdc9-210">Credential encryption/ security</span></span> | 
| --------------------------------- | ------------------ | --------- |  
| <span data-ttu-id="2cdc9-211">低於或等於 2.3.xxxx.x</span><span class="sxs-lookup"><span data-stu-id="2cdc9-211">< = 2.3.xxxx.x</span></span> | <span data-ttu-id="2cdc9-212">雲端</span><span class="sxs-lookup"><span data-stu-id="2cdc9-212">On cloud</span></span> | <span data-ttu-id="2cdc9-213">使用憑證 （不同於其中一個認證管理員應用程式所使用的 hello） 進行加密</span><span class="sxs-lookup"><span data-stu-id="2cdc9-213">Encrypted using certificate (different from hello one used by Credential manager app)</span></span> | 
| <span data-ttu-id="2cdc9-214">高於或等於 2.4.xxxx.x</span><span class="sxs-lookup"><span data-stu-id="2cdc9-214">> = 2.4.xxxx.x</span></span> | <span data-ttu-id="2cdc9-215">內部部署</span><span class="sxs-lookup"><span data-stu-id="2cdc9-215">On premises</span></span> | <span data-ttu-id="2cdc9-216">透過 DPAPI 進行保護</span><span class="sxs-lookup"><span data-stu-id="2cdc9-216">Secured via DPAPI</span></span> | 
  

### <a name="encryption-in-transit"></a><span data-ttu-id="2cdc9-217">傳輸中加密</span><span class="sxs-lookup"><span data-stu-id="2cdc9-217">Encryption in transit</span></span>
<span data-ttu-id="2cdc9-218">所有的資料傳輸是透過安全通道**HTTPS**和**TLS over TCP** tooprevent 攔截攻擊與 Azure 服務進行通訊。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-218">All data transfers are via secure channel **HTTPS** and **TLS over TCP** tooprevent man-in-the-middle attacks during communication with Azure services.</span></span>
 
<span data-ttu-id="2cdc9-219">您也可以使用[IPSec VPN](../vpn-gateway/vpn-gateway-about-vpn-devices.md)或[Express Route](../expressroute/expressroute-introduction.md) toofurther hello 安全通訊通道，您在內部部署網路與 Azure 之間。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-219">You can also use [IPSec VPN](../vpn-gateway/vpn-gateway-about-vpn-devices.md) or [Express Route](../expressroute/expressroute-introduction.md) toofurther secure hello communication channel between your on-premises network and Azure.</span></span>

<span data-ttu-id="2cdc9-220">虛擬網路是網路的您 hello 雲端中的邏輯表示法。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-220">Virtual network is a logical representation of your network in hello cloud.</span></span> <span data-ttu-id="2cdc9-221">您可以藉由設定 IPSec VPN （站對站） 或 （私人互連） Express Route 連線在內部部署網路 tooyour Azure 虛擬網路 (VNet)</span><span class="sxs-lookup"><span data-stu-id="2cdc9-221">You can connect an on-premises network tooyour Azure virtual network (VNet) by setting up IPSec VPN (site-to-site) or Express Route (Private Peering)</span></span>       

<span data-ttu-id="2cdc9-222">hello 下表摘要說明 hello 網路和閘道設定建議的混合式資料移動的來源和目的地位置的不同組合為基礎。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-222">hello following table summarizes hello network and gateway configuration recommendations based on different combinations of source and destination locations for hybrid data movement.</span></span>

| <span data-ttu-id="2cdc9-223">來源</span><span class="sxs-lookup"><span data-stu-id="2cdc9-223">Source</span></span> | <span data-ttu-id="2cdc9-224">目的地</span><span class="sxs-lookup"><span data-stu-id="2cdc9-224">Destination</span></span> | <span data-ttu-id="2cdc9-225">網路組態</span><span class="sxs-lookup"><span data-stu-id="2cdc9-225">Network configuration</span></span> | <span data-ttu-id="2cdc9-226">閘道安裝</span><span class="sxs-lookup"><span data-stu-id="2cdc9-226">Gateway setup</span></span> |
| ------ | ----------- | --------------------- | ------------- | 
| <span data-ttu-id="2cdc9-227">內部部署</span><span class="sxs-lookup"><span data-stu-id="2cdc9-227">On-premises</span></span> | <span data-ttu-id="2cdc9-228">部署在虛擬網路中的虛擬機器和雲端服務</span><span class="sxs-lookup"><span data-stu-id="2cdc9-228">Virtual machines and cloud services deployed in virtual networks</span></span> | <span data-ttu-id="2cdc9-229">IPSec VPN (點對站或站台對站台)</span><span class="sxs-lookup"><span data-stu-id="2cdc9-229">IPSec VPN (point-to-site or site-to-site)</span></span> | <span data-ttu-id="2cdc9-230">閘道可以安裝在內部部署環境或 VNet 中的 Azure 虛擬機器 (VM) 上</span><span class="sxs-lookup"><span data-stu-id="2cdc9-230">Gateway can be installed either on-premises or on an Azure virtual machine (VM) in VNet</span></span> | 
| <span data-ttu-id="2cdc9-231">內部部署</span><span class="sxs-lookup"><span data-stu-id="2cdc9-231">On-premises</span></span> | <span data-ttu-id="2cdc9-232">部署在虛擬網路中的虛擬機器和雲端服務</span><span class="sxs-lookup"><span data-stu-id="2cdc9-232">Virtual machines and cloud services deployed in virtual networks</span></span> | <span data-ttu-id="2cdc9-233">ExpressRoute (私用對等)</span><span class="sxs-lookup"><span data-stu-id="2cdc9-233">ExpressRoute (Private Peering)</span></span> | <span data-ttu-id="2cdc9-234">閘道可以安裝在內部部署環境或 VNet 中的 Azure VM 上</span><span class="sxs-lookup"><span data-stu-id="2cdc9-234">Gateway can be installed either on-premises or on an Azure VM in VNet</span></span> | 
| <span data-ttu-id="2cdc9-235">內部部署</span><span class="sxs-lookup"><span data-stu-id="2cdc9-235">On-premises</span></span> | <span data-ttu-id="2cdc9-236">具有公用端點的 Azure 型服務</span><span class="sxs-lookup"><span data-stu-id="2cdc9-236">Azure-based services that have a public endpoint</span></span> | <span data-ttu-id="2cdc9-237">ExpressRoute (公用對等)</span><span class="sxs-lookup"><span data-stu-id="2cdc9-237">ExpressRoute (Public Peering)</span></span> | <span data-ttu-id="2cdc9-238">閘道必須安裝在內部部署環境</span><span class="sxs-lookup"><span data-stu-id="2cdc9-238">Gateway must be installed on-premises</span></span> | 

<span data-ttu-id="2cdc9-239">hello 下列影像顯示 hello 使用量資料管理閘道器的內部部署資料庫與 Azure 服務使用 Express route 和 IPSec VPN （使用虛擬網路） 之間移動資料：</span><span class="sxs-lookup"><span data-stu-id="2cdc9-239">hello following images show hello usage of Data Management Gateway for moving data between an on-premises database and Azure services using Express route and IPSec VPN (with Virtual Network):</span></span>

<span data-ttu-id="2cdc9-240">**ExpressRoute：**</span><span class="sxs-lookup"><span data-stu-id="2cdc9-240">**Express Route:**</span></span>
 
![使用 ExpressRoute 搭配閘道](media/data-factory-data-movement-security-considerations/express-route-for-gateway.png) 

<span data-ttu-id="2cdc9-242">**IPSec VPN：**</span><span class="sxs-lookup"><span data-stu-id="2cdc9-242">**IPSec VPN:**</span></span>

![IPSec VPN 搭配閘道](media/data-factory-data-movement-security-considerations/ipsec-vpn-for-gateway.png)

### <a name="firewall-configurations-and-whitelisting-ip-address-of-gateway"></a><span data-ttu-id="2cdc9-244">防火牆組態及將閘道的 IP 位址加入白名單</span><span class="sxs-lookup"><span data-stu-id="2cdc9-244">Firewall configurations and whitelisting IP address of gateway</span></span>

#### <a name="firewall-requirements-for-on-premisesprivate-network"></a><span data-ttu-id="2cdc9-245">內部部署/私人網路的防火牆需求</span><span class="sxs-lookup"><span data-stu-id="2cdc9-245">Firewall requirements for on-premises/private network</span></span>  
<span data-ttu-id="2cdc9-246">在企業中，**公司防火牆**hello 組織的 hello 中央路由器上執行。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-246">In an enterprise, a **corporate firewall** runs on hello central router of hello organization.</span></span> <span data-ttu-id="2cdc9-247">而且， **Windows 防火牆**hello 的 hello 閘道已安裝的本機電腦上執行精靈。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-247">And, **Windows firewall** runs as a daemon on hello local machine on which hello gateway is installed.</span></span> 

<span data-ttu-id="2cdc9-248">hello 欞礹怮薽**輸出連接埠**和網域需求 hello**公司防火牆**。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-248">hello following table provides **outbound port** and domain requirements for hello **corporate firewall**.</span></span>

| <span data-ttu-id="2cdc9-249">網域名稱</span><span class="sxs-lookup"><span data-stu-id="2cdc9-249">Domain names</span></span> | <span data-ttu-id="2cdc9-250">輸出連接埠</span><span class="sxs-lookup"><span data-stu-id="2cdc9-250">Outbound ports</span></span> | <span data-ttu-id="2cdc9-251">說明</span><span class="sxs-lookup"><span data-stu-id="2cdc9-251">Description</span></span> |
| ------------ | -------------- | ----------- | 
| `*.servicebus.windows.net` | <span data-ttu-id="2cdc9-252">443、80</span><span class="sxs-lookup"><span data-stu-id="2cdc9-252">443, 80</span></span> | <span data-ttu-id="2cdc9-253">Hello 閘道 tooconnect toodata 移動服務需 Data Factory 中</span><span class="sxs-lookup"><span data-stu-id="2cdc9-253">Required by hello gateway tooconnect toodata movement services in Data Factory</span></span> |
| `*.core.windows.net` | <span data-ttu-id="2cdc9-254">443</span><span class="sxs-lookup"><span data-stu-id="2cdc9-254">443</span></span> | <span data-ttu-id="2cdc9-255">由 hello 閘道 tooconnect tooAzure 儲存體帳戶，當您使用 hello[分段複製](data-factory-copy-activity-performance.md#staged-copy)功能。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-255">Used by hello gateway tooconnect tooAzure Storage Account when you use hello [staged copy](data-factory-copy-activity-performance.md#staged-copy) feature.</span></span> | 
| `*.frontend.clouddatahub.net` | <span data-ttu-id="2cdc9-256">443</span><span class="sxs-lookup"><span data-stu-id="2cdc9-256">443</span></span> | <span data-ttu-id="2cdc9-257">Hello 閘道 tooconnect toohello Azure Data Factory 服務所需。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-257">Required by hello gateway tooconnect toohello Azure Data Factory service.</span></span> | 
| `*.database.windows.net` | <span data-ttu-id="2cdc9-258">1433</span><span class="sxs-lookup"><span data-stu-id="2cdc9-258">1433</span></span>   | <span data-ttu-id="2cdc9-259">(選擇性) 當您的目的地是 Azure SQL Database/「Azure SQL 資料倉儲」時，需要提供此資訊。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-259">(OPTIONAL) needed when your destination is Azure SQL Database/ Azure SQL Data Warehouse.</span></span> <span data-ttu-id="2cdc9-260">使用 hello 分段複製功能 toocopy 資料 tooAzure SQL 資料庫/Azure SQL 資料倉儲，而不需要開啟 hello 通訊埠 1433年。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-260">Use hello staged copy feature toocopy data tooAzure SQL Database/Azure SQL Data Warehouse without opening hello port 1433.</span></span> | 
| `*.azuredatalakestore.net` | <span data-ttu-id="2cdc9-261">443</span><span class="sxs-lookup"><span data-stu-id="2cdc9-261">443</span></span> | <span data-ttu-id="2cdc9-262">(選擇性) 當您的目的地是 Azure Data Lake Store 時，需要提供此資訊。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-262">(OPTIONAL) needed when your destination is Azure Data Lake store</span></span> | 

> [!NOTE] 
> <span data-ttu-id="2cdc9-263">您可以有 toomanage 連接埠/允許清單網域在 hello 視需要個別的資料來源的公司防火牆層級。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-263">You may have toomanage ports/ whitelisting domains at hello corporate firewall level as required by respective data sources.</span></span> <span data-ttu-id="2cdc9-264">此表格僅使用 Azure SQL Database、「Azure SQL 資料倉儲」、Azure Data Lake Store 作為範例。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-264">This table only uses Azure SQL Database, Azure SQL Data Warehouse, Azure Data Lake Store as examples.</span></span>   

<span data-ttu-id="2cdc9-265">hello 欞礹怮薽**輸入連接埠**需求 hello **windows 防火牆**。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-265">hello following table provides **inbound port** requirements for hello **windows firewall**.</span></span>

| <span data-ttu-id="2cdc9-266">輸入連接埠</span><span class="sxs-lookup"><span data-stu-id="2cdc9-266">Inbound ports</span></span> | <span data-ttu-id="2cdc9-267">說明</span><span class="sxs-lookup"><span data-stu-id="2cdc9-267">Description</span></span> | 
| ------------- | ----------- | 
| <span data-ttu-id="2cdc9-268">8050 (TCP)</span><span class="sxs-lookup"><span data-stu-id="2cdc9-268">8050 (TCP)</span></span> | <span data-ttu-id="2cdc9-269">所需的 hello 認證管理員應用程式 toosecurely 組認證 hello 閘道上的內部部署資料存放區。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-269">Required by hello credential manager application toosecurely set credentials for on-premises data stores on hello gateway.</span></span> | 

![閘道連接埠需求](media\data-factory-data-movement-security-considerations/gateway-port-requirements.png) 

#### <a name="ip-configurations-whitelisting-in-data-store"></a><span data-ttu-id="2cdc9-271">資料存放區中的 IP 組態/白名單設定</span><span class="sxs-lookup"><span data-stu-id="2cdc9-271">IP configurations/ whitelisting in data store</span></span>
<span data-ttu-id="2cdc9-272">Hello 雲端中的某些資料存放區也需要存取它們的 hello 機器的 IP 位址的允許清單。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-272">Some data stores in hello cloud also require whitelisting of IP address of hello machine accessing them.</span></span> <span data-ttu-id="2cdc9-273">確定 hello 閘道機器 hello IP 位址在允許清單中適當設定防火牆。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-273">Ensure that hello IP address of hello gateway machine is whitelisted/ configured in firewall appropriately.</span></span>

<span data-ttu-id="2cdc9-274">hello 下列雲端資料存放區需要 hello 閘道機器的 IP 位址的允許清單。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-274">hello following cloud data stores require whitelisting of IP address of hello gateway machine.</span></span> <span data-ttu-id="2cdc9-275">根據預設，這些資料存放區，部分可能不需要 hello IP 位址的允許清單。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-275">Some of these data stores, by default, may not require whitelisting of hello IP address.</span></span> 

- [<span data-ttu-id="2cdc9-276">Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="2cdc9-276">Azure SQL Database</span></span>](../sql-database/sql-database-firewall-configure.md) 
- [<span data-ttu-id="2cdc9-277">Azure SQL 資料倉儲</span><span class="sxs-lookup"><span data-stu-id="2cdc9-277">Azure SQL Data Warehouse</span></span>](../sql-data-warehouse/sql-data-warehouse-get-started-provision.md#create-a-server-level-firewall-rule-in-the-azure-portal)
- [<span data-ttu-id="2cdc9-278">Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="2cdc9-278">Azure Data Lake Store</span></span>](../data-lake-store/data-lake-store-secure-data.md#set-ip-address-range-for-data-access)
- [<span data-ttu-id="2cdc9-279">Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="2cdc9-279">Azure Cosmos DB</span></span>](../documentdb/documentdb-firewall-support.md)
- [<span data-ttu-id="2cdc9-280">Amazon Redshift</span><span class="sxs-lookup"><span data-stu-id="2cdc9-280">Amazon Redshift</span></span>](http://docs.aws.amazon.com/redshift/latest/gsg/rs-gsg-authorize-cluster-access.html) 

## <a name="frequently-asked-questions"></a><span data-ttu-id="2cdc9-281">常見問題集</span><span class="sxs-lookup"><span data-stu-id="2cdc9-281">Frequently asked questions</span></span>

<span data-ttu-id="2cdc9-282">**問題：**可 hello 閘道之間共用不同的 data factory 嗎？</span><span class="sxs-lookup"><span data-stu-id="2cdc9-282">**Question:** Can hello Gateway be shared across different data factories?</span></span>
<span data-ttu-id="2cdc9-283">**答：**我們尚未支援這項功能。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-283">**Answer:** We do not support this feature yet.</span></span> <span data-ttu-id="2cdc9-284">我們正積極處理這個問題。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-284">We are actively working on it.</span></span>

<span data-ttu-id="2cdc9-285">**問題：** hello 閘道 toowork hello 連接埠需求為何？</span><span class="sxs-lookup"><span data-stu-id="2cdc9-285">**Question:** What are hello port requirements for hello gateway toowork?</span></span>
<span data-ttu-id="2cdc9-286">**回答：**閘道會以 HTTP 為基礎的連線 tooopen 網際網路。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-286">**Answer:** Gateway makes HTTP-based connections tooopen internet.</span></span> <span data-ttu-id="2cdc9-287">hello**輸出連接埠 443 和 80**必須針對閘道 toomake 開啟此連接。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-287">hello **outbound ports 443 and 80** must be opened for gateway toomake this connection.</span></span> <span data-ttu-id="2cdc9-288">開啟**輸入連接埠 8050**只能在 hello 機器層級 （不在公司防火牆層級） 的憑證管理員應用程式。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-288">Open **Inbound Port 8050** only at hello machine level (not at corporate firewall level) for Credential Manager application.</span></span> <span data-ttu-id="2cdc9-289">如果使用 Azure SQL Database 或 Azure SQL 資料倉儲做為來源 / 目的地，則您需要 tooopen **1433年**以及連接埠。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-289">If Azure SQL Database or Azure SQL Data Warehouse is used as source/ destination, then you need tooopen **1433** port as well.</span></span> <span data-ttu-id="2cdc9-290">如需詳細資訊，請參閱[防火牆組態及將 IP 位址加入白名單](#firewall-configurations-and-whitelisting-ip-address-of gateway)一節。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-290">For more information, see [Firewall configurations and whitelisting IP addresses](#firewall-configurations-and-whitelisting-ip-address-of gateway) section.</span></span> 

<span data-ttu-id="2cdc9-291">**問：**閘道有什麼憑證需求？</span><span class="sxs-lookup"><span data-stu-id="2cdc9-291">**Question:** What are certificate requirements for Gateway?</span></span>
<span data-ttu-id="2cdc9-292">**回答：**目前閘道需要憑證來安全地設定資料存放區認證供 hello 認證管理員應用程式。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-292">**Answer:** Current gateway requires a certificate that is used by hello credential manager application for securely setting data store credentials.</span></span> <span data-ttu-id="2cdc9-293">此憑證是自我簽署的憑證建立和設定的 hello 閘道安裝程式。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-293">This certificate is a self-signed certificate created and configured by hello gateway setup.</span></span> <span data-ttu-id="2cdc9-294">您可以改用自己的 TLS/SSL 憑證。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-294">You can use your own TLS/ SSL certificate instead.</span></span> <span data-ttu-id="2cdc9-295">如需詳細資訊，請參閱 [Click-Once 認證管理員應用程式](#click-once-credentials-manager-app)一節。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-295">For more information, see [click-once credential manager application](#click-once-credentials-manager-app) section.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="2cdc9-296">後續步驟</span><span class="sxs-lookup"><span data-stu-id="2cdc9-296">Next steps</span></span>
<span data-ttu-id="2cdc9-297">如需有關複製活動效能的資訊，請參閱[複製活動的效能及微調指南](data-factory-copy-activity-performance.md)。</span><span class="sxs-lookup"><span data-stu-id="2cdc9-297">For information about performance of copy activity, see [Copy activity performance and tuning guide](data-factory-copy-activity-performance.md).</span></span>

 
