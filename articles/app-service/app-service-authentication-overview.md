---
title: "aaaAuthentication 和 Azure App Service 中的授權 |Microsoft 文件"
description: "概念參考和概觀 hello 驗證 / 授權功能的 Azure 應用程式服務"
services: app-service
documentationcenter: 
author: mattchenderson
manager: erikre
editor: 
ms.assetid: b7151b57-09e5-4c77-a10c-375a262f17e5
ms.service: app-service
ms.workload: mobile
ms.tgt_pltfrm: na
ms.devlang: multiple
ms.topic: article
ms.date: 08/29/2016
ms.author: mahender
ms.openlocfilehash: dc2074b16cce47b72b78ea7afeda89dbc4832166
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="authentication-and-authorization-in-azure-app-service"></a><span data-ttu-id="f7856-103">Azure App Service 中的驗證與授權</span><span class="sxs-lookup"><span data-stu-id="f7856-103">Authentication and authorization in Azure App Service</span></span>
## <a name="what-is-app-service-authentication--authorization"></a><span data-ttu-id="f7856-104">什麼是 App Service 驗證 / 授權？</span><span class="sxs-lookup"><span data-stu-id="f7856-104">What is App Service Authentication / Authorization?</span></span>
<span data-ttu-id="f7856-105">應用程式服務驗證 / 授權是使用者在您的應用程式 toosign 提供一個方法，因此 hello 應用程式後端沒有 toochange 程式碼的功能。</span><span class="sxs-lookup"><span data-stu-id="f7856-105">App Service Authentication / Authorization is a feature that provides a way for your application toosign in users so that you don't have toochange code on hello app backend.</span></span> <span data-ttu-id="f7856-106">提供簡單的方式 tooprotect 應用程式和工作每個使用者資料。</span><span class="sxs-lookup"><span data-stu-id="f7856-106">It provides an easy way tooprotect your application and work with per-user data.</span></span>

<span data-ttu-id="f7856-107">App Service 使用同盟身分識別，由第三方識別提供者儲存帳戶並驗證使用者。</span><span class="sxs-lookup"><span data-stu-id="f7856-107">App Service uses federated identity, in which a third-party identity provider stores accounts and authenticates users.</span></span> <span data-ttu-id="f7856-108">hello 應用程式會依賴 hello 提供者的身分識別資訊，如此 hello 應用程式不需要 toostore 本身的資訊。</span><span class="sxs-lookup"><span data-stu-id="f7856-108">hello application relies on hello provider's identity information so that hello app doesn't have toostore that information itself.</span></span> <span data-ttu-id="f7856-109">應用程式服務支援 hello 現成的五個身分識別提供者： Azure Active Directory、 Facebook、 Google、 Microsoft 帳戶和 Twitter。</span><span class="sxs-lookup"><span data-stu-id="f7856-109">App Service supports five identity providers out of hello box: Azure Active Directory, Facebook, Google, Microsoft Account, and Twitter.</span></span> <span data-ttu-id="f7856-110">您的應用程式可以使用任何數目的這些身分識別提供者 tooprovide 使用者選項的方式登入。</span><span class="sxs-lookup"><span data-stu-id="f7856-110">Your app can use any number of these identity providers tooprovide your users with options for how they sign in.</span></span> <span data-ttu-id="f7856-111">tooexpand hello 內建支援，您可以整合其他身分識別提供者或[自己的自訂身分識別解決方案][custom-auth]。</span><span class="sxs-lookup"><span data-stu-id="f7856-111">tooexpand hello built-in support, you can integrate another identity provider or [your own custom identity solution][custom-auth].</span></span>

<span data-ttu-id="f7856-112">如果您想 tooget 立即開始，請參閱下列教學課程的 hello 的其中一個：</span><span class="sxs-lookup"><span data-stu-id="f7856-112">If you want tooget started right away, see one of hello following tutorials:</span></span>

* <span data-ttu-id="f7856-113">[新增驗證 tooyour iOS 應用程式][ iOS] (或[Android]， [Windows]， [Xamarin.iOS]， [Xamarin.Android]， [Xamarin.Forms]，或[Cordova])</span><span class="sxs-lookup"><span data-stu-id="f7856-113">[Add authentication tooyour iOS app][iOS] (or [Android], [Windows], [Xamarin.iOS], [Xamarin.Android], [Xamarin.Forms], or [Cordova])</span></span>
* <span data-ttu-id="f7856-114">[Azure App Service 中 API Apps 的使用者驗證][apia-user]</span><span class="sxs-lookup"><span data-stu-id="f7856-114">[User authentication for API Apps in Azure App Service][apia-user]</span></span>
* <span data-ttu-id="f7856-115">[開始使用 Azure App Service - 第 2 部分][web-getstarted]</span><span class="sxs-lookup"><span data-stu-id="f7856-115">[Get started with Azure App Service - Part 2][web-getstarted]</span></span>

## <a name="how-authentication-works-in-app-service"></a><span data-ttu-id="f7856-116">App Service 中驗證的運作方式</span><span class="sxs-lookup"><span data-stu-id="f7856-116">How authentication works in App Service</span></span>
<span data-ttu-id="f7856-117">在使用其中一種 hello 身分識別提供者順序 tooauthenticate，您必須先 tooconfigure hello 身分識別提供者 tooknow 有關您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="f7856-117">In order tooauthenticate by using one of hello identity providers, you first need tooconfigure hello identity provider tooknow about your application.</span></span> <span data-ttu-id="f7856-118">識別碼和機密資料，您必須提供 tooApp 服務，然後將提供 hello 身分識別提供者。</span><span class="sxs-lookup"><span data-stu-id="f7856-118">hello identity provider will then provide IDs and secrets that you provide tooApp Service.</span></span> <span data-ttu-id="f7856-119">如此即完成 hello 信任關係，讓應用程式服務可以驗證使用者的判斷提示，例如驗證語彙基元、 從 hello 身分識別提供者。</span><span class="sxs-lookup"><span data-stu-id="f7856-119">This completes hello trust relationship so that App Service can validate user assertions, such as authentication tokens, from hello identity provider.</span></span>

<span data-ttu-id="f7856-120">在使用這些提供者的其中一個使用者 toosign，hello 使用者必須登入使用者，該提供者的重新導向的 tooan 端點。</span><span class="sxs-lookup"><span data-stu-id="f7856-120">toosign in a user by using one of these providers, hello user must be redirected tooan endpoint that signs in users for that provider.</span></span> <span data-ttu-id="f7856-121">如果客戶使用網頁瀏覽器，您可以讓應用程式服務自動直接登入使用者的所有未經驗證的使用者 toohello 端點。</span><span class="sxs-lookup"><span data-stu-id="f7856-121">If customers are using a web browser, you can have App Service automatically direct all unauthenticated users toohello endpoint that signs in users.</span></span> <span data-ttu-id="f7856-122">否則，您將需要 toodirect 客戶太`{your App Service base URL}/.auth/login/<provider>`，其中`<provider>`是 hello 下列值之一： aad、 facebook、 google、 microsoft 或 twitter。</span><span class="sxs-lookup"><span data-stu-id="f7856-122">Otherwise, you will need toodirect your customers too`{your App Service base URL}/.auth/login/<provider>`, where `<provider>` is one of hello following values: aad, facebook, google, microsoft, or twitter.</span></span> <span data-ttu-id="f7856-123">在本文稍後各節說明行動和 API 的案例。</span><span class="sxs-lookup"><span data-stu-id="f7856-123">Mobile and API scenarios are explained in sections later in this article.</span></span>

<span data-ttu-id="f7856-124">透過網頁瀏覽器來與您的應用程式互動的使用者會設定 Cookie，以便在瀏覽您的應用程式時，能夠維持在已驗證的狀態。</span><span class="sxs-lookup"><span data-stu-id="f7856-124">Users who interact with your application through a web browser will have a cookie set so that they can remain authenticated as they browse your application.</span></span> <span data-ttu-id="f7856-125">其他的用戶端類型，例如行動裝置、 JSON web 權杖 (JWT)，這應該會看到在 hello`X-ZUMO-AUTH`標頭，將會發出 toohello 用戶端。</span><span class="sxs-lookup"><span data-stu-id="f7856-125">For other client types, such as mobile, a JSON web token (JWT), which should be presented in hello `X-ZUMO-AUTH` header, will be issued toohello client.</span></span> <span data-ttu-id="f7856-126">hello 行動應用程式用戶端 Sdk 將為您處理這。</span><span class="sxs-lookup"><span data-stu-id="f7856-126">hello Mobile Apps client SDKs will handle this for you.</span></span> <span data-ttu-id="f7856-127">或者，Azure Active Directory 識別權杖或存取權杖可能會直接包含在 hello`Authorization`標頭做為[持有人權杖](https://tools.ietf.org/html/rfc6750)。</span><span class="sxs-lookup"><span data-stu-id="f7856-127">Alternatively, an Azure Active Directory identity token or access token may be directly included in hello `Authorization` header as a [bearer token](https://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="f7856-128">應用程式服務將會驗證任何 cookie 或您的應用程式發出 tooauthenticate 使用者語彙基元。</span><span class="sxs-lookup"><span data-stu-id="f7856-128">App Service will validate any cookie or token that your application issues tooauthenticate users.</span></span> <span data-ttu-id="f7856-129">toorestrict 可以存取您的應用程式，請參閱 hello[授權](#authorization)本文中稍後的章節。</span><span class="sxs-lookup"><span data-stu-id="f7856-129">toorestrict who can access your application, see hello [Authorization](#authorization) section later in this article.</span></span>

### <a name="mobile-authentication-with-a-provider-sdk"></a><span data-ttu-id="f7856-130">使用提供者 SDK 的行動驗證</span><span class="sxs-lookup"><span data-stu-id="f7856-130">Mobile authentication with a provider SDK</span></span>
<span data-ttu-id="f7856-131">Hello 後端設定的所有項目之後，您可以修改行動用戶端 toosign 入應用程式服務。</span><span class="sxs-lookup"><span data-stu-id="f7856-131">After everything is configured on hello backend, you can modify mobile clients toosign in with App Service.</span></span> <span data-ttu-id="f7856-132">有以下兩種方法：</span><span class="sxs-lookup"><span data-stu-id="f7856-132">There are two approaches here:</span></span>

* <span data-ttu-id="f7856-133">使用指定的身分識別提供者發行 tooestablish 身分識別的 SDK 和便得以存取 tooApp 服務。</span><span class="sxs-lookup"><span data-stu-id="f7856-133">Use an SDK that a given identity provider publishes tooestablish identity and then gain access tooApp Service.</span></span>
* <span data-ttu-id="f7856-134">使用單行程式碼，讓該 hello 行動應用程式用戶端 SDK 可以登入使用者。</span><span class="sxs-lookup"><span data-stu-id="f7856-134">Use a single line of code so that hello Mobile Apps client SDK can sign in users.</span></span>

> [!TIP]
> <span data-ttu-id="f7856-135">大部分的應用程式應該使用提供者 SDK tooget 更一致的經驗使用者登入時，toouse 重新整理支援，以及 tooget 該 hello 提供者會指定其他優點。</span><span class="sxs-lookup"><span data-stu-id="f7856-135">Most applications should use a provider SDK tooget a more consistent experience when users sign in, toouse refresh support, and tooget other benefits that hello provider specifies.</span></span>
> 
> 

<span data-ttu-id="f7856-136">當您使用的提供者 SDK，使用者可以登入 tooan 體驗整合更緊密地與 hello 作業系統該 hello 應用程式上執行。</span><span class="sxs-lookup"><span data-stu-id="f7856-136">When you use a provider SDK, users can sign in tooan experience that integrates more tightly with hello operating system that hello app is running on.</span></span> <span data-ttu-id="f7856-137">這也會提供權杖提供者以及某些使用者有關 hello 用戶端，以讓您更容易 tooconsume graph Api 和自訂 hello 使用者經驗。</span><span class="sxs-lookup"><span data-stu-id="f7856-137">This also gives you a provider token and some user information on hello client, which makes it much easier tooconsume graph APIs and customize hello user experience.</span></span> <span data-ttu-id="f7856-138">有時候在部落格和論壇，您會看到此參照的 tooas hello 「 用戶端流程 」 或者 「 用戶端導向流程 」 因為 hello 用戶端上的程式碼登入使用者和 hello 用戶端程式碼擁有存取 tooa 提供者的語彙基元。</span><span class="sxs-lookup"><span data-stu-id="f7856-138">Occasionally on blogs and forums, you will see this referred tooas hello "client flow" or "client-directed flow" because code on hello client signs in users, and hello client code has access tooa provider token.</span></span>

<span data-ttu-id="f7856-139">取得提供者的語彙基元之後，它會需要 toobe 傳送 tooApp 服務進行驗證。</span><span class="sxs-lookup"><span data-stu-id="f7856-139">After a provider token is obtained, it needs toobe sent tooApp Service for validation.</span></span> <span data-ttu-id="f7856-140">應用程式服務會驗證 hello 語彙基元之後，應用程式服務會建立新的應用程式的服務權杖傳回 toohello 用戶端。</span><span class="sxs-lookup"><span data-stu-id="f7856-140">After App Service validates hello token, App Service creates a new App Service token that is returned toohello client.</span></span> <span data-ttu-id="f7856-141">hello 行動應用程式用戶端 SDK helper 方法 toomanage 此交換，而且會自動附加 hello 語彙基元 tooall 要求 toohello 應用程式後端。</span><span class="sxs-lookup"><span data-stu-id="f7856-141">hello Mobile Apps client SDK has helper methods toomanage this exchange and automatically attach hello token tooall requests toohello application backend.</span></span> <span data-ttu-id="f7856-142">如果選擇這樣做的話，開發人員也可以讓參考 toohello 提供者語彙基元。</span><span class="sxs-lookup"><span data-stu-id="f7856-142">Developers can also keep a reference toohello provider token if they so choose.</span></span>

### <a name="mobile-authentication-without-a-provider-sdk"></a><span data-ttu-id="f7856-143">不使用提供者 SDK 的行動驗證</span><span class="sxs-lookup"><span data-stu-id="f7856-143">Mobile authentication without a provider SDK</span></span>
<span data-ttu-id="f7856-144">若不想使用 tooset 設定的提供者 SDK，您可以為您允許在 Azure App Service toosign hello 行動應用程式功能。</span><span class="sxs-lookup"><span data-stu-id="f7856-144">If you do not want tooset up a provider SDK, you can allow hello Mobile Apps feature of Azure App Service toosign in for you.</span></span> <span data-ttu-id="f7856-145">hello 行動應用程式用戶端 SDK 將會開啟您所選擇的 toohello web 檢視提供者，並登入 hello 使用者。</span><span class="sxs-lookup"><span data-stu-id="f7856-145">hello Mobile Apps client SDK will open a web view toohello provider of your choosing and sign in hello user.</span></span> <span data-ttu-id="f7856-146">有時候在部落格和論壇，您會看到此參照的 tooas hello 「 伺服器流程 」 或 「 伺服器導向流程 」 hello 伺服器負責管理 hello 程序的登入的使用者，因此 hello client SDK 永遠不會收到 hello 提供者的語彙基元。</span><span class="sxs-lookup"><span data-stu-id="f7856-146">Occasionally on blogs and forums, you will see this referred tooas hello "server flow" or "server-directed flow" because hello server manages hello process that signs in users, and hello client SDK never receives hello provider token.</span></span>

<span data-ttu-id="f7856-147">程式碼的 toostart 此流程包含在 hello 驗證教學課程中的每個平台。</span><span class="sxs-lookup"><span data-stu-id="f7856-147">Code toostart this flow is included in hello authentication tutorial for each platform.</span></span> <span data-ttu-id="f7856-148">在 hello hello 流程結尾，hello client SDK 有應用程式服務的語彙基元，且 hello 權杖自動附加的 tooall 要求 toohello 應用程式後端。</span><span class="sxs-lookup"><span data-stu-id="f7856-148">At hello end of hello flow, hello client SDK has an App Service token, and hello token is automatically attached tooall requests toohello application backend.</span></span>

### <a name="service-to-service-authentication"></a><span data-ttu-id="f7856-149">服務對服務驗證</span><span class="sxs-lookup"><span data-stu-id="f7856-149">Service-to-service authentication</span></span>
<span data-ttu-id="f7856-150">雖然您可以授與使用者存取 tooyour 應用程式，您也可以信任其他應用程式 toocall 您自己的 API。</span><span class="sxs-lookup"><span data-stu-id="f7856-150">Although you can give users access tooyour application, you can also trust another application toocall your own API.</span></span> <span data-ttu-id="f7856-151">例如，您可以讓一個 Web 應用程式呼叫另一個 Web 應用程式中的 API。</span><span class="sxs-lookup"><span data-stu-id="f7856-151">For example, you could have one web app call an API in another web app.</span></span> <span data-ttu-id="f7856-152">在此案例中，您可以使用認證的服務帳戶，而不是使用者認證 tooget 語彙基元。</span><span class="sxs-lookup"><span data-stu-id="f7856-152">In this scenario, you use credentials for a service account instead of user credentials tooget a token.</span></span> <span data-ttu-id="f7856-153">在 Azure Active Directory 用語中，服務帳戶亦稱為 *服務主體* ，而使用這類帳戶的驗證又稱為「服務對服務案例」。</span><span class="sxs-lookup"><span data-stu-id="f7856-153">A service account is also known as a *service principal* in Azure Active Directory parlance, and authentication that uses such an account is also known as a service-to-service scenario.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f7856-154">由於行動應用程式是在客戶裝置上執行，因此行動應用程式「不算」是信任的應用程式，不應該使用服務主體流程。</span><span class="sxs-lookup"><span data-stu-id="f7856-154">Because mobile apps run on customer devices, mobile applications do *not* count as trusted applications and should not use a service principal flow.</span></span> <span data-ttu-id="f7856-155">反之，行動應用程式應該使用稍早詳述的使用者流程。</span><span class="sxs-lookup"><span data-stu-id="f7856-155">Instead, they should use a user flow that was detailed earlier.</span></span>
> 
> 

<span data-ttu-id="f7856-156">在服務對服務案例下，App Service 可以使用 Azure Active Directory 保護您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="f7856-156">For service-to-service scenarios, App Service can protect your application by using Azure Active Directory.</span></span> <span data-ttu-id="f7856-157">hello 呼叫的應用程式只需要 tooprovide 藉由提供 hello 用戶端識別碼和密碼從 Azure Active Directory 用戶端取得 Azure Active Directory 服務主體的授權權杖。</span><span class="sxs-lookup"><span data-stu-id="f7856-157">hello calling application just needs tooprovide an Azure Active Directory service principal authorization token that is obtained by providing hello client ID and client secret from Azure Active Directory.</span></span> <span data-ttu-id="f7856-158">此案例中，使用 ASP.NET 應用程式開發介面應用程式的範例會說明 hello 教學課程中，由[API 應用程式的服務主體驗證][apia-service]。</span><span class="sxs-lookup"><span data-stu-id="f7856-158">An example of this scenario that uses ASP.NET API apps is explained by hello tutorial, [Service principal authentication for API Apps][apia-service].</span></span>

<span data-ttu-id="f7856-159">如果您想 toouse 應用程式服務驗證 toohandle 服務對服務案例，您可以使用用戶端憑證驗證或基本驗證。</span><span class="sxs-lookup"><span data-stu-id="f7856-159">If you want toouse App Service authentication toohandle a service-to-service scenario, you can use client certificates or basic authentication.</span></span> <span data-ttu-id="f7856-160">在 Azure 中的用戶端憑證的相關資訊，請參閱[如何 tooConfigure TLS 相互驗證 Web 應用程式](../app-service-web/app-service-web-configure-tls-mutual-auth.md)。</span><span class="sxs-lookup"><span data-stu-id="f7856-160">For information about client certificates in Azure, see [How tooConfigure TLS Mutual Authentication for Web Apps](../app-service-web/app-service-web-configure-tls-mutual-auth.md).</span></span> <span data-ttu-id="f7856-161">如需 ASP.NET 中的基本驗證相關資訊，請參閱 [ASP.NET Web API 2 中的驗證篩選](http://www.asp.net/web-api/overview/security/authentication-filters)。</span><span class="sxs-lookup"><span data-stu-id="f7856-161">For information about basic authentication in ASP.NET, see [Authentication Filters in ASP.NET Web API 2](http://www.asp.net/web-api/overview/security/authentication-filters).</span></span>

<span data-ttu-id="f7856-162">從應用程式服務的邏輯應用程式 tooan API 應用程式的服務帳戶驗證是特殊案例中詳[使用您裝載邏輯應用程式的 App Service 上的自訂 API](../logic-apps/logic-apps-custom-hosted-api.md)。</span><span class="sxs-lookup"><span data-stu-id="f7856-162">Service account authentication from an App Service logic app tooan API app is a special case that is detailed in [Using your custom API hosted on App Service with Logic apps](../logic-apps/logic-apps-custom-hosted-api.md).</span></span>

## <span data-ttu-id="f7856-163"><a name="authorization"></a>App Service 中授權的運作方式</span><span class="sxs-lookup"><span data-stu-id="f7856-163"><a name="authorization"></a>How authorization works in App Service</span></span>
<span data-ttu-id="f7856-164">您擁有 hello 要求可以存取您的應用程式的完整控制權。</span><span class="sxs-lookup"><span data-stu-id="f7856-164">You have full control over hello requests that can access your application.</span></span> <span data-ttu-id="f7856-165">應用程式服務驗證 / 授權可以設定與任何 hello 下列行為：</span><span class="sxs-lookup"><span data-stu-id="f7856-165">App Service Authentication / Authorization can be configured with any of hello following behaviors:</span></span>

* <span data-ttu-id="f7856-166">只有已驗證的要求 tooreach 可讓您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="f7856-166">Allow only authenticated requests tooreach your application.</span></span>
  
    <span data-ttu-id="f7856-167">如果瀏覽器接收的匿名要求，應用程式服務會重新導向 tooa hello 身分識別提供者，您可以選擇，讓使用者可以登入頁面。</span><span class="sxs-lookup"><span data-stu-id="f7856-167">If a browser receives an anonymous request, App Service will redirect tooa page for hello identity provider that you choose so that users can sign in.</span></span> <span data-ttu-id="f7856-168">Hello hello 要求來自於行動裝置，如果傳回的回應是 HTTP *401 未授權*回應。</span><span class="sxs-lookup"><span data-stu-id="f7856-168">If hello request comes from a mobile device, hello returned response is an HTTP *401 Unauthorized* response.</span></span>
  
    <span data-ttu-id="f7856-169">使用此選項，您不需要 toowrite 任何驗證程式碼在應用程式中。</span><span class="sxs-lookup"><span data-stu-id="f7856-169">With this option, you don't need toowrite any authentication code at all in your app.</span></span> <span data-ttu-id="f7856-170">如果您需要更精細的授權，使用 tooyour 程式碼的相關 hello 使用者資訊。</span><span class="sxs-lookup"><span data-stu-id="f7856-170">If you need finer authorization, information about hello user is available tooyour code.</span></span>
* <span data-ttu-id="f7856-171">允許所有要求 tooreach 應用程式，但驗證已驗證的要求，並傳遞 hello HTTP 標頭中的驗證資訊。</span><span class="sxs-lookup"><span data-stu-id="f7856-171">Allow all requests tooreach your application, but validate authenticated requests, and pass along authentication information in hello HTTP headers.</span></span>
  
    <span data-ttu-id="f7856-172">此選項會延後的授權決策 tooyour 應用程式程式碼。</span><span class="sxs-lookup"><span data-stu-id="f7856-172">This option defers authorization decisions tooyour application code.</span></span> <span data-ttu-id="f7856-173">它提供更有彈性地處理匿名要求，但您有 toowrite 程式碼。</span><span class="sxs-lookup"><span data-stu-id="f7856-173">It provides more flexibility in handling anonymous requests, but you have toowrite code.</span></span>
* <span data-ttu-id="f7856-174">允許所有要求 tooreach 應用程式，並在 hello 要求中的驗證資訊採取任何動作。</span><span class="sxs-lookup"><span data-stu-id="f7856-174">Allow all requests tooreach your application, and take no action on authentication information in hello requests.</span></span>
  
    <span data-ttu-id="f7856-175">在此情況下，hello 驗證/授權功能已關閉。</span><span class="sxs-lookup"><span data-stu-id="f7856-175">In this case, hello Authentication / Authorization feature is off.</span></span> <span data-ttu-id="f7856-176">hello 工作的驗證和授權都已完全啟動 tooyour 應用程式程式碼。</span><span class="sxs-lookup"><span data-stu-id="f7856-176">hello tasks of authentication and authorization are entirely up tooyour application code.</span></span>

<span data-ttu-id="f7856-177">hello 先前的行為，皆受 hello**當要求未經驗證的動作 tootake** hello Azure 入口網站中的選項。</span><span class="sxs-lookup"><span data-stu-id="f7856-177">hello previous behaviors are controlled by hello **Action tootake when request is not authenticated** option in hello Azure portal.</span></span> <span data-ttu-id="f7856-178">如果您選擇 * * 登入的*提供者名稱** *，所有的要求有 toobe 驗證。</span><span class="sxs-lookup"><span data-stu-id="f7856-178">If you choose **Log in with *provider name* **, all requests have toobe authenticated.</span></span> <span data-ttu-id="f7856-179">**允許要求 （無動作）**會延遲 hello 授權決策 tooyour 程式碼，但它仍然會提供驗證資訊。</span><span class="sxs-lookup"><span data-stu-id="f7856-179">**Allow request (no action)** defers hello authorization decision tooyour code, but it still provides authentication information.</span></span> <span data-ttu-id="f7856-180">如果您想 toohave 您的程式碼處理的所有項目，您可以停用 hello 驗證 / 授權功能。</span><span class="sxs-lookup"><span data-stu-id="f7856-180">If you want toohave your code handle everything, you can disable hello Authentication / Authorization feature.</span></span>

## <a name="working-with-user-identities-in-your-application"></a><span data-ttu-id="f7856-181">在應用程式中使用您的使用者身分識別</span><span class="sxs-lookup"><span data-stu-id="f7856-181">Working with user identities in your application</span></span>
<span data-ttu-id="f7856-182">應用程式服務會使用特殊標頭中傳遞某些使用者資訊 tooyour 應用程式。</span><span class="sxs-lookup"><span data-stu-id="f7856-182">App Service passes some user information tooyour application by using special headers.</span></span> <span data-ttu-id="f7856-183">外部要求會禁止這些標頭，必須由 App Service 驗證/授權設定才會出現。</span><span class="sxs-lookup"><span data-stu-id="f7856-183">External requests prohibit these headers and will only be present if set by App Service Authentication / Authorization.</span></span> <span data-ttu-id="f7856-184">某些範例標頭包括︰</span><span class="sxs-lookup"><span data-stu-id="f7856-184">Some example headers include:</span></span>

* <span data-ttu-id="f7856-185">X-MS-CLIENT-PRINCIPAL-NAME</span><span class="sxs-lookup"><span data-stu-id="f7856-185">X-MS-CLIENT-PRINCIPAL-NAME</span></span>
* <span data-ttu-id="f7856-186">X-MS-CLIENT-PRINCIPAL-ID</span><span class="sxs-lookup"><span data-stu-id="f7856-186">X-MS-CLIENT-PRINCIPAL-ID</span></span>
* <span data-ttu-id="f7856-187">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span><span class="sxs-lookup"><span data-stu-id="f7856-187">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span></span>
* <span data-ttu-id="f7856-188">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span><span class="sxs-lookup"><span data-stu-id="f7856-188">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span></span>

<span data-ttu-id="f7856-189">以任何語言或 framework 撰寫的程式碼可以取得它所需要的 hello 資訊從這些標頭。</span><span class="sxs-lookup"><span data-stu-id="f7856-189">Code that is written in any language or framework can get hello information that it needs from these headers.</span></span> <span data-ttu-id="f7856-190">針對 ASP.NET 4.6 的應用程式，hello **ClaimsPrincipal**以 hello 適當的值會自動設定。</span><span class="sxs-lookup"><span data-stu-id="f7856-190">For ASP.NET 4.6 apps, hello **ClaimsPrincipal** is automatically set with hello appropriate values.</span></span>

<span data-ttu-id="f7856-191">您的應用程式也可以取得額外的使用者詳細資料，透過 HTTP GET 上 hello`/.auth/me`應用程式的端點。</span><span class="sxs-lookup"><span data-stu-id="f7856-191">Your application can also obtain additional user details through an HTTP GET on hello `/.auth/me` endpoint of your application.</span></span> <span data-ttu-id="f7856-192">有效的語彙基元，並包含的 hello 要求會傳回 JSON 裝載 hello 提供者所使用的相關詳細資料，請 hello 基礎提供者的語彙基元和其他使用者資訊。</span><span class="sxs-lookup"><span data-stu-id="f7856-192">A valid token that's included with hello request will return a JSON payload with details about hello provider that's being used, hello underlying provider token, and some other user information.</span></span> <span data-ttu-id="f7856-193">hello 行動應用程式伺服器的 Sdk 提供 helper 方法 toowork 使用此資料。</span><span class="sxs-lookup"><span data-stu-id="f7856-193">hello Mobile Apps server SDKs provide helper methods toowork with this data.</span></span> <span data-ttu-id="f7856-194">如需詳細資訊，請參閱[toouse 如何 hello Azure 行動應用程式 Node.js SDK](../app-service-mobile/app-service-mobile-node-backend-how-to-use-server-sdk.md#howto-tables-getidentity)，和[Azure 行動應用程式使用 hello.NET 後端伺服器 SDK](../app-service-mobile/app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#user-info)。</span><span class="sxs-lookup"><span data-stu-id="f7856-194">For more information, see [How toouse hello Azure Mobile Apps Node.js SDK](../app-service-mobile/app-service-mobile-node-backend-how-to-use-server-sdk.md#howto-tables-getidentity), and [Work with hello .NET backend server SDK for Azure Mobile Apps](../app-service-mobile/app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#user-info).</span></span>

## <a name="documentation-and-additional-resources"></a><span data-ttu-id="f7856-195">文件和其他資源</span><span class="sxs-lookup"><span data-stu-id="f7856-195">Documentation and additional resources</span></span>
### <a name="identity-providers"></a><span data-ttu-id="f7856-196">識別提供者</span><span class="sxs-lookup"><span data-stu-id="f7856-196">Identity providers</span></span>
<span data-ttu-id="f7856-197">hello 遵循教學課程顯示如何 tooconfigure App Service toouse 不同的驗證提供者：</span><span class="sxs-lookup"><span data-stu-id="f7856-197">hello following tutorials show how tooconfigure App Service toouse different authentication providers:</span></span>

* <span data-ttu-id="f7856-198">[如何 tooconfigure 您的應用程式 toouse Azure Active Directory 登入][AAD]</span><span class="sxs-lookup"><span data-stu-id="f7856-198">[How tooconfigure your app toouse Azure Active Directory login][AAD]</span></span>
* <span data-ttu-id="f7856-199">[如何 tooconfigure 應用程式 toouse Facebook 登入][Facebook]</span><span class="sxs-lookup"><span data-stu-id="f7856-199">[How tooconfigure your app toouse Facebook login][Facebook]</span></span>
* <span data-ttu-id="f7856-200">[如何 tooconfigure 應用程式 toouse Google 登入][Google]</span><span class="sxs-lookup"><span data-stu-id="f7856-200">[How tooconfigure your app toouse Google login][Google]</span></span>
* <span data-ttu-id="f7856-201">[如何 tooconfigure 應用程式 toouse Microsoft 帳戶登入][MSA]</span><span class="sxs-lookup"><span data-stu-id="f7856-201">[How tooconfigure your app toouse Microsoft Account login][MSA]</span></span>
* <span data-ttu-id="f7856-202">[如何 tooconfigure 您的應用程式 toouse Twitter 登入][Twitter]</span><span class="sxs-lookup"><span data-stu-id="f7856-202">[How tooconfigure your app toouse Twitter login][Twitter]</span></span>

<span data-ttu-id="f7856-203">如果您不想 toouse 識別系統在這裡，您也可以使用 hello 提供 hello 的[預覽 hello 行動應用程式的.NET server SDK 中的自訂驗證支援][custom-auth]，可以使用在 web 應用程式，行動應用程式或應用程式開發介面應用程式。</span><span class="sxs-lookup"><span data-stu-id="f7856-203">If you want toouse an identity system other than hello ones provided here, you can also use hello [preview custom authentication support in hello Mobile Apps .NET server SDK][custom-auth], which can be used in web apps, mobile apps, or API apps.</span></span>

### <a name="web-applications"></a><span data-ttu-id="f7856-204">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="f7856-204">Web applications</span></span>
<span data-ttu-id="f7856-205">hello 遵循教學課程顯示如何 tooadd 驗證 tooa web 應用程式：</span><span class="sxs-lookup"><span data-stu-id="f7856-205">hello following tutorials show how tooadd authentication tooa web application:</span></span>

* <span data-ttu-id="f7856-206">[開始使用 Azure App Service - 第 2 部分][web-getstarted]</span><span class="sxs-lookup"><span data-stu-id="f7856-206">[Get started with Azure App Service - Part 2][web-getstarted]</span></span>

### <a name="mobile-applications"></a><span data-ttu-id="f7856-207">行動應用程式</span><span class="sxs-lookup"><span data-stu-id="f7856-207">Mobile applications</span></span>
<span data-ttu-id="f7856-208">hello 遵循教學課程顯示如何 tooadd 驗證 tooyour 行動用戶端使用 hello 伺服器導向的流程：</span><span class="sxs-lookup"><span data-stu-id="f7856-208">hello following tutorials show how tooadd authentication tooyour mobile clients by using hello server-directed flow:</span></span>

* <span data-ttu-id="f7856-209">[新增驗證 tooyour iOS 應用程式][iOS]</span><span class="sxs-lookup"><span data-stu-id="f7856-209">[Add authentication tooyour iOS app][iOS]</span></span>
* <span data-ttu-id="f7856-210">[新增驗證 tooyour Android 應用程式][Android]</span><span class="sxs-lookup"><span data-stu-id="f7856-210">[Add Authentication tooyour Android app][Android]</span></span>
* <span data-ttu-id="f7856-211">[新增驗證 tooyour Windows 應用程式][Windows]</span><span class="sxs-lookup"><span data-stu-id="f7856-211">[Add Authentication tooyour Windows app][Windows]</span></span>
* <span data-ttu-id="f7856-212">[新增驗證 tooyour Xamarin.iOS 應用程式][Xamarin.iOS]</span><span class="sxs-lookup"><span data-stu-id="f7856-212">[Add authentication tooyour Xamarin.iOS app][Xamarin.iOS]</span></span>
* <span data-ttu-id="f7856-213">[新增驗證 tooyour Xamarin.Android 應用程式][Xamarin.Android]</span><span class="sxs-lookup"><span data-stu-id="f7856-213">[Add authentication tooyour Xamarin.Android app][Xamarin.Android]</span></span>
* <span data-ttu-id="f7856-214">[新增驗證 tooyour Xamarin.Forms 應用程式][Xamarin.Forms]</span><span class="sxs-lookup"><span data-stu-id="f7856-214">[Add authentication tooyour Xamarin.Forms app][Xamarin.Forms]</span></span>
* <span data-ttu-id="f7856-215">[新增驗證 tooyour Cordova 應用程式][Cordova]</span><span class="sxs-lookup"><span data-stu-id="f7856-215">[Add Authentication tooyour Cordova app][Cordova]</span></span>

<span data-ttu-id="f7856-216">使用下列資源，如果您想 toouse hello 用戶端導向流量的 Azure Active Directory 的 hello:</span><span class="sxs-lookup"><span data-stu-id="f7856-216">Use hello following resources if you want toouse hello client-directed flow for Azure Active Directory:</span></span>

* <span data-ttu-id="f7856-217">[使用適用於 iOS 的 hello Active Directory Authentication Library][ADAL-iOS]</span><span class="sxs-lookup"><span data-stu-id="f7856-217">[Use hello Active Directory Authentication Library for iOS][ADAL-iOS]</span></span>
* <span data-ttu-id="f7856-218">[使用適用於 Android 的 hello Active Directory Authentication Library][ADAL-Android]</span><span class="sxs-lookup"><span data-stu-id="f7856-218">[Use hello Active Directory Authentication Library for Android][ADAL-Android]</span></span>
* <span data-ttu-id="f7856-219">[使用 hello Active Directory 驗證程式庫適用於 Windows 及 Xamarin][ADAL-dotnet]</span><span class="sxs-lookup"><span data-stu-id="f7856-219">[Use hello Active Directory Authentication Library for Windows and Xamarin][ADAL-dotnet]</span></span>

<span data-ttu-id="f7856-220">使用下列資源，如果您想 toouse hello 用戶端導向流程 Facebook 的 hello:</span><span class="sxs-lookup"><span data-stu-id="f7856-220">Use hello following resources if you want toouse hello client-directed flow for Facebook:</span></span>

* [<span data-ttu-id="f7856-221">使用適用於 iOS 的 hello Facebook SDK</span><span class="sxs-lookup"><span data-stu-id="f7856-221">Use hello Facebook SDK for iOS</span></span>](../app-service-mobile/app-service-mobile-ios-how-to-use-client-library.md#facebook-sdk)

<span data-ttu-id="f7856-222">使用下列資源，如果您想 toouse hello 用戶端導向流程 Twitter hello:</span><span class="sxs-lookup"><span data-stu-id="f7856-222">Use hello following resources if you want toouse hello client-directed flow for Twitter:</span></span>

* [<span data-ttu-id="f7856-223">使用 Twitter Fabric for iOS</span><span class="sxs-lookup"><span data-stu-id="f7856-223">Use Twitter Fabric for iOS</span></span>](../app-service-mobile/app-service-mobile-ios-how-to-use-client-library.md#twitter-fabric)

<span data-ttu-id="f7856-224">使用下列資源，如果您想 toouse hello 用戶端導向流程 google hello:</span><span class="sxs-lookup"><span data-stu-id="f7856-224">Use hello following resources if you want toouse hello client-directed flow for Google:</span></span>

* [<span data-ttu-id="f7856-225">使用適用於 iOS 的 hello Google 登入 SDK</span><span class="sxs-lookup"><span data-stu-id="f7856-225">Use hello Google Sign-In SDK for iOS</span></span>](../app-service-mobile/app-service-mobile-ios-how-to-use-client-library.md#google-sdk)

### <a name="api-applications"></a><span data-ttu-id="f7856-226">API 應用程式</span><span class="sxs-lookup"><span data-stu-id="f7856-226">API applications</span></span>
<span data-ttu-id="f7856-227">hello 遵循教學課程顯示如何 tooprotect API 應用程式：</span><span class="sxs-lookup"><span data-stu-id="f7856-227">hello following tutorials show how tooprotect your API apps:</span></span>

* <span data-ttu-id="f7856-228">[Azure App Service 中 API Apps 的使用者驗證][apia-user]</span><span class="sxs-lookup"><span data-stu-id="f7856-228">[User authentication for API Apps in Azure App Service][apia-user]</span></span>
* <span data-ttu-id="f7856-229">[Azure App Service 中 API Apps 的服務主體驗證][apia-service]</span><span class="sxs-lookup"><span data-stu-id="f7856-229">[Service principal authentication for API Apps in Azure App Service][apia-service]</span></span>

[apia-user]: ../app-service-api/app-service-api-dotnet-user-principal-auth.md
[apia-service]: ../app-service-api/app-service-api-dotnet-service-principal-auth.md

[web-getstarted]: ../app-service-web/app-service-web-get-started-2.md#authenticate-your-users

[iOS]: ../app-service-mobile/app-service-mobile-ios-get-started-users.md
[Android]: ../app-service-mobile/app-service-mobile-android-get-started-users.md
[Xamarin.iOS]: ../app-service-mobile/app-service-mobile-xamarin-ios-get-started-users.md
[Xamarin.Android]: ../app-service-mobile/app-service-mobile-xamarin-android-get-started-users.md
[Xamarin.Forms]: ../app-service-mobile/app-service-mobile-xamarin-forms-get-started-users.md
[Windows]: ../app-service-mobile/app-service-mobile-windows-store-dotnet-get-started-users.md
[Cordova]: ../app-service-mobile/app-service-mobile-cordova-get-started-users.md

[AAD]: ../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md
[Facebook]: ../app-service-mobile/app-service-mobile-how-to-configure-facebook-authentication.md
[Google]: ../app-service-mobile/app-service-mobile-how-to-configure-google-authentication.md
[MSA]: ../app-service-mobile/app-service-mobile-how-to-configure-microsoft-authentication.md
[Twitter]: ../app-service-mobile/app-service-mobile-how-to-configure-twitter-authentication.md

[custom-auth]: ../app-service-mobile/app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#custom-auth

[ADAL-Android]: ../app-service-mobile/app-service-mobile-android-how-to-use-client-library.md#adal
[ADAL-iOS]: ../app-service-mobile/app-service-mobile-ios-how-to-use-client-library.md#adal
[ADAL-dotnet]: ../app-service-mobile/app-service-mobile-dotnet-how-to-use-client-library.md#adal
