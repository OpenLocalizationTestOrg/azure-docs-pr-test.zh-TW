---
<span data-ttu-id="58f78-101">標題： aaa"Azure Analysis Services 教學課程第 4 課： 建立關聯性 |Microsoft 文件"描述： 描述 toocreate 關聯性中的 hello Azure Analysis Services 教學課程專案的方式。</span><span class="sxs-lookup"><span data-stu-id="58f78-101">title: aaa"Azure Analysis Services tutorial lesson 4: Create relationships | Microsoft Docs" description: Describes how toocreate relationships in hello Azure Analysis Services tutorial project.</span></span> <span data-ttu-id="58f78-102">服務： analysis services documentationcenter: '作者： minewiskan 管理員： erikre 編輯器:' 標記: '</span><span class="sxs-lookup"><span data-stu-id="58f78-102">services: analysis-services documentationcenter: '' author: minewiskan manager: erikre editor: '' tags: ''</span></span>

<span data-ttu-id="58f78-103">ms.assetid: ms.service: analysis services ms.devlang: NA ms.topic: get 啟動文章 ms.tgt_pltfrm: NA ms.workload: na ms.date: 05/26/2017 ms.author: owend</span><span class="sxs-lookup"><span data-stu-id="58f78-103">ms.assetid: ms.service: analysis-services ms.devlang: NA ms.topic: get-started-article ms.tgt_pltfrm: NA ms.workload: na ms.date: 05/26/2017 ms.author: owend</span></span>
---
# <a name="lesson-4-create-relationships"></a><span data-ttu-id="58f78-104">第 4 課：建立關聯性</span><span class="sxs-lookup"><span data-stu-id="58f78-104">Lesson 4: Create relationships</span></span>

[!INCLUDE[analysis-services-appliesto-aas-sql2017-later](../../../includes/analysis-services-appliesto-aas-sql2017-later.md)]

<span data-ttu-id="58f78-105">在這一課，您可以驗證 hello 匯入資料時自動建立的關聯性，並加入不同資料表之間的新關聯性。</span><span class="sxs-lookup"><span data-stu-id="58f78-105">In this lesson, you verify hello relationships that were created automatically when you imported data and add new relationships between different tables.</span></span> <span data-ttu-id="58f78-106">關聯性是如何在這些資料表中的 hello 資料相互關聯的方式所建立的兩個資料表之間的連接。</span><span class="sxs-lookup"><span data-stu-id="58f78-106">A relationship is a connection between two tables that establishes how hello data in those tables should be correlated.</span></span> <span data-ttu-id="58f78-107">例如，hello DimProduct 資料表和 hello DimProductSubcategory 資料表有每項產品所屬 tooa 子類別目錄的 hello 事實為基礎的關聯性。</span><span class="sxs-lookup"><span data-stu-id="58f78-107">For example, hello DimProduct table and hello DimProductSubcategory table have a relationship based on hello fact that each product belongs tooa subcategory.</span></span> <span data-ttu-id="58f78-108">詳細資訊，請參閱 toolearn[關聯性](https://docs.microsoft.com/sql/analysis-services/tabular-models/relationships-ssas-tabular)。</span><span class="sxs-lookup"><span data-stu-id="58f78-108">toolearn more, see [Relationships](https://docs.microsoft.com/sql/analysis-services/tabular-models/relationships-ssas-tabular).</span></span>
  
<span data-ttu-id="58f78-109">本課程的估計時間 toocomplete: **10 分鐘**</span><span class="sxs-lookup"><span data-stu-id="58f78-109">Estimated time toocomplete this lesson: **10 minutes**</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="58f78-110">必要條件</span><span class="sxs-lookup"><span data-stu-id="58f78-110">Prerequisites</span></span>  
<span data-ttu-id="58f78-111">本主題是表格式模型教學課程的一部分，請依序完成。</span><span class="sxs-lookup"><span data-stu-id="58f78-111">This topic is part of a tabular modeling tutorial, which should be completed in order.</span></span> <span data-ttu-id="58f78-112">在執行之前 hello 工作在這一課，您應已完成上一課 hello:[第 3 課： 標記為日期資料表](../tutorials/aas-lesson-3-mark-as-date-table.md)。</span><span class="sxs-lookup"><span data-stu-id="58f78-112">Before performing hello tasks in this lesson, you should have completed hello previous lesson: [Lesson 3: Mark as Date Table](../tutorials/aas-lesson-3-mark-as-date-table.md).</span></span> 
  
## <a name="review-existing-relationships-and-add-new-relationships"></a><span data-ttu-id="58f78-113">檢閱現有的關聯性和新增關聯性</span><span class="sxs-lookup"><span data-stu-id="58f78-113">Review existing relationships and add new relationships</span></span>  
<span data-ttu-id="58f78-114">當您匯入資料時使用 取得資料時，您會從 hello AdventureWorksDW2014 資料庫了七個資料表。</span><span class="sxs-lookup"><span data-stu-id="58f78-114">When you imported data by using Get Data, you got seven tables from hello AdventureWorksDW2014 database.</span></span> <span data-ttu-id="58f78-115">一般而言，當您從關聯式來源匯入資料，會與 hello 資料一起自動匯入現有的關聯性。</span><span class="sxs-lookup"><span data-stu-id="58f78-115">Generally, when you import data from a relational source, existing relationships are automatically imported together with hello data.</span></span> <span data-ttu-id="58f78-116">不過，在繼續製作模型之前，您應該確認資料表之間的關聯性已正確建立。</span><span class="sxs-lookup"><span data-stu-id="58f78-116">However, before you proceed with authoring your model you should verify those relationships between tables were created properly.</span></span> <span data-ttu-id="58f78-117">本教學課程中，您會新增三個新的關聯性。</span><span class="sxs-lookup"><span data-stu-id="58f78-117">For this tutorial, you add three new relationships.</span></span>  
  
#### <a name="tooreview-existing-relationships"></a><span data-ttu-id="58f78-118">tooreview 現有的關聯性</span><span class="sxs-lookup"><span data-stu-id="58f78-118">tooreview existing relationships</span></span>  
  
1.  <span data-ttu-id="58f78-119">按一下 hello**模型**功能表 >**模型檢視** > **圖表檢視**。</span><span class="sxs-lookup"><span data-stu-id="58f78-119">Click hello **Model** menu > **Model View** > **Diagram View**.</span></span>  

    <span data-ttu-id="58f78-120">hello 模型設計師現在會出現在圖表檢視中，以圖形格式顯示所有 hello 資料表之間會線條您匯入。</span><span class="sxs-lookup"><span data-stu-id="58f78-120">hello model designer now appears in Diagram View, a graphical format displaying all hello tables you imported with lines between them.</span></span> <span data-ttu-id="58f78-121">資料表之間的 hello 線條表示匯入 hello 資料時自動建立的 hello 關聯性。</span><span class="sxs-lookup"><span data-stu-id="58f78-121">hello lines between tables indicate hello relationships that were automatically created when you imported hello data.</span></span>
    
    ![aas-lesson4-diagram](../tutorials/media/aas-lesson4-diagram.png)
  
    <span data-ttu-id="58f78-123">最大數量的 hello 資料表儘可能包含使用中的 hello 模型設計師中的 hello 右下角迷你地圖控制項。</span><span class="sxs-lookup"><span data-stu-id="58f78-123">Include as many of hello tables as possible by using minimap controls in hello lower-right corner of hello model designer.</span></span> <span data-ttu-id="58f78-124">您也可以按一下並拖曳資料表 toodifferent 位置，將資料表彼此更靠近結合在一起，或依照特定順序排列。</span><span class="sxs-lookup"><span data-stu-id="58f78-124">You can also click and drag tables toodifferent locations, bringing tables closer together, or putting them in a particular order.</span></span> <span data-ttu-id="58f78-125">移動資料表不會影響 hello 已經 hello 資料表之間的關聯性。</span><span class="sxs-lookup"><span data-stu-id="58f78-125">Moving tables does not affect hello relationships already between hello tables.</span></span> <span data-ttu-id="58f78-126">tooview 所有 hello 資料行在特定資料表中，按一下並拖曳資料表邊緣 tooexpand 或讓較小。</span><span class="sxs-lookup"><span data-stu-id="58f78-126">tooview all hello columns in a particular table, click and drag on a table edge tooexpand or make it smaller.</span></span>  
  
2.  <span data-ttu-id="58f78-127">按一下 hello 之間 hello 實線**DimCustomer**資料表和 hello **DimGeography**資料表。</span><span class="sxs-lookup"><span data-stu-id="58f78-127">Click hello solid line between hello **DimCustomer** table and hello **DimGeography** table.</span></span> <span data-ttu-id="58f78-128">這兩個資料表之間的 hello 實線顯示此關聯性為作用中，也就是說，它預設會使用計算 DAX 公式時。</span><span class="sxs-lookup"><span data-stu-id="58f78-128">hello solid line between these two tables shows this relationship is active, that is, it is used by default when calculating DAX formulas.</span></span>  
  
    <span data-ttu-id="58f78-129">請注意 hello **GeographyKey** hello 中的資料行**DimCustomer**資料表和 hello **GeographyKey** hello 中的資料行**DimGeography**資料表現在都出現的方塊內。</span><span class="sxs-lookup"><span data-stu-id="58f78-129">Notice hello **GeographyKey** column in hello **DimCustomer** table and hello **GeographyKey** column in hello **DimGeography** table now both each appear within a box.</span></span> <span data-ttu-id="58f78-130">Hello 關聯性中，會使用這些資料行。</span><span class="sxs-lookup"><span data-stu-id="58f78-130">These columns are used in hello relationship.</span></span> <span data-ttu-id="58f78-131">hello 關聯性的屬性現在也會出現在 hello**屬性**視窗。</span><span class="sxs-lookup"><span data-stu-id="58f78-131">hello relationship’s properties now also appear in hello **Properties** window.</span></span>  
  
    > [!TIP]  
    > <span data-ttu-id="58f78-132">此外 toousing hello 模型設計師圖表檢視中的，您也可以使用 hello 管理關聯性對話方塊方塊 tooshow hello 之間的關聯性的資料表中的所有資料表。</span><span class="sxs-lookup"><span data-stu-id="58f78-132">In addition toousing hello model designer in diagram view, you can also use hello Manage Relationships dialog box tooshow hello relationships between all tables in a table format.</span></span> <span data-ttu-id="58f78-133">在 [表格式模型總管] 中，以滑鼠右鍵按一下 [關聯性] > [管理關聯性]。</span><span class="sxs-lookup"><span data-stu-id="58f78-133">In Tabular Model Explorer, right-click **Relationships** > **Manage Relationships**.</span></span>
  
3.  <span data-ttu-id="58f78-134">請確認下列關聯性的 hello 時所建立的 hello 資料表的每個從 hello AdventureWorksDW 資料庫匯入：</span><span class="sxs-lookup"><span data-stu-id="58f78-134">Verify hello following relationships were created when each of hello tables were imported from hello AdventureWorksDW database:</span></span>  
  
    |<span data-ttu-id="58f78-135">Active</span><span class="sxs-lookup"><span data-stu-id="58f78-135">Active</span></span>|<span data-ttu-id="58f78-136">資料表</span><span class="sxs-lookup"><span data-stu-id="58f78-136">Table</span></span>|<span data-ttu-id="58f78-137">相關的查閱資料表</span><span class="sxs-lookup"><span data-stu-id="58f78-137">Related Lookup Table</span></span>|  
    |----------|---------|------------------------|  
    |<span data-ttu-id="58f78-138">是</span><span class="sxs-lookup"><span data-stu-id="58f78-138">Yes</span></span>|<span data-ttu-id="58f78-139">**DimCustomer [GeographyKey]**</span><span class="sxs-lookup"><span data-stu-id="58f78-139">**DimCustomer [GeographyKey]**</span></span>|<span data-ttu-id="58f78-140">**DimGeography [GeographyKey]**</span><span class="sxs-lookup"><span data-stu-id="58f78-140">**DimGeography [GeographyKey]**</span></span>|  
    |<span data-ttu-id="58f78-141">是</span><span class="sxs-lookup"><span data-stu-id="58f78-141">Yes</span></span>|<span data-ttu-id="58f78-142">**DimProduct [ProductSubcategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="58f78-142">**DimProduct [ProductSubcategoryKey]**</span></span>|<span data-ttu-id="58f78-143">**DimProductSubcategory [ProductSubcategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="58f78-143">**DimProductSubcategory [ProductSubcategoryKey]**</span></span>|  
    |<span data-ttu-id="58f78-144">是</span><span class="sxs-lookup"><span data-stu-id="58f78-144">Yes</span></span>|<span data-ttu-id="58f78-145">**DimProductSubcategory [ProductCategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="58f78-145">**DimProductSubcategory [ProductCategoryKey]**</span></span>|<span data-ttu-id="58f78-146">**DimProductCategory [ProductCategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="58f78-146">**DimProductCategory [ProductCategoryKey]**</span></span>|  
    |<span data-ttu-id="58f78-147">是</span><span class="sxs-lookup"><span data-stu-id="58f78-147">Yes</span></span>|<span data-ttu-id="58f78-148">**FactInternetSales [CustomerKey]**</span><span class="sxs-lookup"><span data-stu-id="58f78-148">**FactInternetSales [CustomerKey]**</span></span>|<span data-ttu-id="58f78-149">**DimCustomer [CustomerKey]**</span><span class="sxs-lookup"><span data-stu-id="58f78-149">**DimCustomer [CustomerKey]**</span></span>|  
    |<span data-ttu-id="58f78-150">是</span><span class="sxs-lookup"><span data-stu-id="58f78-150">Yes</span></span>|<span data-ttu-id="58f78-151">**FactInternetSales [ProductKey]**</span><span class="sxs-lookup"><span data-stu-id="58f78-151">**FactInternetSales [ProductKey]**</span></span>|<span data-ttu-id="58f78-152">**DimProduct [ProductKey]**</span><span class="sxs-lookup"><span data-stu-id="58f78-152">**DimProduct [ProductKey]**</span></span>|  
  
    <span data-ttu-id="58f78-153">如果遺漏任何 hello 關聯性，請確認您的模型包含下表中的 hello: DimCustomer、 DimDate、 DimGeography、 DimProduct、 DimProductCategory、 DimProductSubcategory 和 FactInternetSales。</span><span class="sxs-lookup"><span data-stu-id="58f78-153">If any of hello relationships are missing, verify that your model includes hello following tables: DimCustomer, DimDate, DimGeography, DimProduct, DimProductCategory, DimProductSubcategory, and FactInternetSales.</span></span> <span data-ttu-id="58f78-154">如果從相同資料來源連接會在匯入的 hello 資料表分隔時間，這些資料表之間的任何關聯性不會建立，並必須手動建立。</span><span class="sxs-lookup"><span data-stu-id="58f78-154">If tables from hello same data source connection are imported at separate times, any relationships between those tables are not be created and must be created manually.</span></span>  

### <a name="take-a-closer-look"></a><span data-ttu-id="58f78-155">進一步了解</span><span class="sxs-lookup"><span data-stu-id="58f78-155">Take a closer look</span></span>
<span data-ttu-id="58f78-156">在圖表檢視中，請注意箭號，星號，並且顯示 hello 資料表之間的關聯性的 hello 行上的數字。</span><span class="sxs-lookup"><span data-stu-id="58f78-156">In Diagram View, notice an arrow, an asterisk, and a number on hello lines that show hello relationship between tables.</span></span>

![aas-lesson4-line](../tutorials/media/aas-lesson4-line.png)

<span data-ttu-id="58f78-158">hello 箭號會顯示 hello 篩選方向。</span><span class="sxs-lookup"><span data-stu-id="58f78-158">hello arrow shows hello filter direction.</span></span> <span data-ttu-id="58f78-159">hello 星號顯示此資料表是 hello 多側中 hello 關聯性的基數和 hello 一個顯示此資料表是 hello hello 關聯性的一方。</span><span class="sxs-lookup"><span data-stu-id="58f78-159">hello asterisk shows this table is hello many side in hello relationship's cardinality, and hello one shows this table is hello one side of hello relationship.</span></span> <span data-ttu-id="58f78-160">如果您需要 tooedit 關聯性;例如，變更 hello 關聯性的基數或篩選方向中，按兩下 hello 關聯性線條 tooopen hello 編輯關聯性 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="58f78-160">If you need tooedit a relationship; for example, change hello relationship's filter direction or cardinality, double-click hello relationship line tooopen hello Edit Relationship dialog.</span></span>

![aas-lesson4-edit](../tutorials/media/aas-lesson4-edit.png)

<span data-ttu-id="58f78-162">這些功能是為了進階資料模型化，而且是本教學課程的 hello 範圍外。</span><span class="sxs-lookup"><span data-stu-id="58f78-162">These features are meant for advanced data modeling and are outside hello scope of this tutorial.</span></span> <span data-ttu-id="58f78-163">詳細資訊，請參閱 toolearn[雙向交叉篩選中 Analysis Services 表格式模型的](https://docs.microsoft.com/sql/analysis-services/tabular-models/bi-directional-cross-filters-tabular-models-analysis-services)。</span><span class="sxs-lookup"><span data-stu-id="58f78-163">toolearn more, see [Bi-directional cross filters for tabular models in Analysis Services](https://docs.microsoft.com/sql/analysis-services/tabular-models/bi-directional-cross-filters-tabular-models-analysis-services).</span></span>

<span data-ttu-id="58f78-164">在某些情況下，您可能需要特定的商務邏輯 toocreate 模型 toosupport 中資料表之間的其他關聯性。</span><span class="sxs-lookup"><span data-stu-id="58f78-164">In some cases, you may need toocreate additional relationships between tables in your model toosupport certain business logic.</span></span> <span data-ttu-id="58f78-165">此教學課程中，您需要 toocreate 三個額外之間的關聯性 hello FactInternetSales 資料表和 hello DimDate 資料表。</span><span class="sxs-lookup"><span data-stu-id="58f78-165">For this tutorial, you need toocreate three additional relationships between hello FactInternetSales table and hello DimDate table.</span></span>  
  
#### <a name="tooadd-new-relationships-between-tables"></a><span data-ttu-id="58f78-166">tooadd 資料表之間的新關聯性</span><span class="sxs-lookup"><span data-stu-id="58f78-166">tooadd new relationships between tables</span></span>  
  
1.  <span data-ttu-id="58f78-167">Hello 模型設計師，在 hello **FactInternetSales**資料表，按一下並按住 hello **OrderDate**資料行，然後拖曳 hello 游標 toohello**日期**hello中的資料行**DimDate**資料表，然後再放開。</span><span class="sxs-lookup"><span data-stu-id="58f78-167">In hello model designer, in hello **FactInternetSales** table, click, and hold on hello **OrderDate** column, then drag hello cursor toohello **Date** column in hello **DimDate** table, and then release.</span></span>  

    <span data-ttu-id="58f78-168">實線顯示您已建立作用中的關聯性之間 hello **OrderDate** hello 中的資料行**Internet Sales**資料表和 hello**日期**hello 中的資料行**日期**資料表。</span><span class="sxs-lookup"><span data-stu-id="58f78-168">A solid line appears showing you have created an active relationship between hello **OrderDate** column in hello **Internet Sales** table, and hello **Date** column in hello **Date** table.</span></span> 
  
      ![aas-lesson4-new](../tutorials/media/aas-lesson4-new.png) 
  
    > [!NOTE]  
    > <span data-ttu-id="58f78-170">在建立關聯性時，會自動選取 hello 主資料表與 hello 查閱相關的資料表之間的 hello 基數和篩選方向。</span><span class="sxs-lookup"><span data-stu-id="58f78-170">When creating relationships, hello cardinality and filter direction between hello primary table and hello related lookup table is automatically selected.</span></span>  
  
2.  <span data-ttu-id="58f78-171">在 hello **FactInternetSales**資料表、 按住 hello **DueDate**資料行，然後拖曳 hello 游標 toohello**日期**hello 中的資料行**DimDate**資料表，然後再放開。</span><span class="sxs-lookup"><span data-stu-id="58f78-171">In hello **FactInternetSales** table, click and hold on hello **DueDate** column, then drag hello cursor toohello **Date** column in hello **DimDate** table, and then release.</span></span>  
  
    <span data-ttu-id="58f78-172">此時會顯示您已建立 hello 之間的非使用中關聯性出現虛線**DueDate** hello 中的資料行**FactInternetSales**資料表和 hello**日期**中的資料行hello **DimDate**資料表。</span><span class="sxs-lookup"><span data-stu-id="58f78-172">A dotted line appears showing you have created an inactive relationship between hello **DueDate** column in hello **FactInternetSales** table, and hello **Date** column in hello **DimDate** table.</span></span> <span data-ttu-id="58f78-173">您在資料表之間可以有多個關聯性，但一次只能有一個關聯性是作用中。</span><span class="sxs-lookup"><span data-stu-id="58f78-173">You can have multiple relationships between tables, but only one relationship can be active at a time.</span></span> <span data-ttu-id="58f78-174">非使用中關聯性可以進行自訂的 DAX 運算式中 active tooperform 特殊的彙總。</span><span class="sxs-lookup"><span data-stu-id="58f78-174">Inactive relationships can be made active tooperform special aggregations in custom DAX expressions.</span></span>  
  
3.  <span data-ttu-id="58f78-175">最後，再建立一個關聯性。</span><span class="sxs-lookup"><span data-stu-id="58f78-175">Finally, create one more relationship.</span></span> <span data-ttu-id="58f78-176">在 hello **FactInternetSales**資料表、 按住 hello **ShipDate**資料行，然後拖曳 hello 游標 toohello**日期**hello 中的資料行**DimDate**資料表，然後再放開。</span><span class="sxs-lookup"><span data-stu-id="58f78-176">In hello **FactInternetSales** table, click and hold on hello **ShipDate** column, then drag hello cursor toohello **Date** column in hello **DimDate** table, and then release.</span></span>  
    
     ![aas-lesson4-newinactive](../tutorials/media/aas-lesson4-newinactive.png)
  
## <a name="whats-next"></a><span data-ttu-id="58f78-178">後續步驟</span><span class="sxs-lookup"><span data-stu-id="58f78-178">What's next?</span></span>
<span data-ttu-id="58f78-179">[第 5 課：建立計算結果欄](../tutorials/aas-lesson-5-create-calculated-columns.md)。</span><span class="sxs-lookup"><span data-stu-id="58f78-179">[Lesson 5: Create calculated columns](../tutorials/aas-lesson-5-create-calculated-columns.md).</span></span>
  
  
  
