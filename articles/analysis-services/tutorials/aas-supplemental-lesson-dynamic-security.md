---
<span data-ttu-id="8d982-101">標題： aaa"Azure Analysis Services 教學課程的補充課程： 動態安全性 |Microsoft 文件"描述： 描述如何使用資料列的 toouse 動態安全性篩選 hello Azure Analysis Services 教學課程中。</span><span class="sxs-lookup"><span data-stu-id="8d982-101">title: aaa"Azure Analysis Services tutorial supplemental lesson: Dynamic security | Microsoft Docs" description: Describes how toouse dynamic security by using row filters in hello Azure Analysis Services tutorial.</span></span>
<span data-ttu-id="8d982-102">服務： analysis services documentationcenter: '作者： minewiskan 管理員： erikre 編輯器:' 標記: '</span><span class="sxs-lookup"><span data-stu-id="8d982-102">services: analysis-services documentationcenter: '' author: minewiskan manager: erikre editor: '' tags: ''</span></span>

<span data-ttu-id="8d982-103">ms.assetid: ms.service: analysis services ms.devlang: NA ms.topic: get 啟動文章 ms.tgt_pltfrm: NA ms.workload: na ms.date: 05/26/2017 ms.author: owend</span><span class="sxs-lookup"><span data-stu-id="8d982-103">ms.assetid: ms.service: analysis-services ms.devlang: NA ms.topic: get-started-article ms.tgt_pltfrm: NA ms.workload: na ms.date: 05/26/2017 ms.author: owend</span></span>
---
# <a name="supplemental-lesson---dynamic-security"></a><span data-ttu-id="8d982-104">補充課程 - 動態安全性</span><span class="sxs-lookup"><span data-stu-id="8d982-104">Supplemental lesson - Dynamic security</span></span>

[!INCLUDE[analysis-services-appliesto-aas-sql2017-later](../../../includes/analysis-services-appliesto-aas-sql2017-later.md)]

<span data-ttu-id="8d982-105">在此補充課程中，您可以建立其他角色來實作動態安全性。</span><span class="sxs-lookup"><span data-stu-id="8d982-105">In this supplemental lesson, you create an additional role that implements dynamic security.</span></span> <span data-ttu-id="8d982-106">動態安全性提供根據 hello 使用者名稱或登入識別碼 hello 使用者目前登入的資料列層級安全性。</span><span class="sxs-lookup"><span data-stu-id="8d982-106">Dynamic security provides row-level security based on hello user name or login id of hello user currently logged on.</span></span> 
  
<span data-ttu-id="8d982-107">tooimplement 動態安全性，您可以加入包含這些使用者可以連接 toohello 模型並瀏覽模型物件和資料的 hello 使用者名稱的資料表 tooyour 模型。</span><span class="sxs-lookup"><span data-stu-id="8d982-107">tooimplement dynamic security, you add a table tooyour model containing hello user names of those users that can connect toohello model and browse model objects and data.</span></span> <span data-ttu-id="8d982-108">您使用本教學課程所建立的 hello 模型是 Adventure Works; hello 內容中不過，toocomplete 這課程，您必須加入資料表，包含從您自己的網域使用者。</span><span class="sxs-lookup"><span data-stu-id="8d982-108">hello model you create using this tutorial is in hello context of Adventure Works; however, toocomplete this lesson, you must add a table containing users from your own domain.</span></span> <span data-ttu-id="8d982-109">您不需要 hello 密碼的 hello 所加入的使用者名稱。</span><span class="sxs-lookup"><span data-stu-id="8d982-109">You do not need hello passwords for hello user names that are added.</span></span> <span data-ttu-id="8d982-110">toocreate EmployeeSecurity 表格，從您自己的網域使用者的一小部分的範例與您使用 hello 貼上功能，貼上的 Excel 試算表的員工資料。</span><span class="sxs-lookup"><span data-stu-id="8d982-110">toocreate an EmployeeSecurity table, with a small sample of users from your own domain, you use hello Paste feature, pasting employee data from an Excel spreadsheet.</span></span> <span data-ttu-id="8d982-111">在真實世界案例中，包含使用者名稱的 hello 資料表一般會實際的資料庫中的資料表做為資料來源;例如，實際的 DimEmployee 資料表。</span><span class="sxs-lookup"><span data-stu-id="8d982-111">In a real-world scenario, hello table containing user names would typically be a table from an actual database as a data source; for example, a real DimEmployee table.</span></span>  
  
<span data-ttu-id="8d982-112">tooimplement 動態安全性，您可以使用兩個 DAX 函數： [USERNAME 函數 (DAX)](http://msdn.microsoft.com/22dddc4b-1648-4c89-8c93-f1151162b93f)和[LOOKUPVALUE 函數 (DAX)](http://msdn.microsoft.com/73a51c4d-131c-4c33-a139-b1342d10caab)。</span><span class="sxs-lookup"><span data-stu-id="8d982-112">tooimplement dynamic security, you use two DAX functions: [USERNAME Function (DAX)](http://msdn.microsoft.com/22dddc4b-1648-4c89-8c93-f1151162b93f) and [LOOKUPVALUE Function (DAX)](http://msdn.microsoft.com/73a51c4d-131c-4c33-a139-b1342d10caab).</span></span> <span data-ttu-id="8d982-113">套用於資料列篩選公式的這些函式，會以新的角色定義。</span><span class="sxs-lookup"><span data-stu-id="8d982-113">These functions, applied in a row filter formula, are defined in a new role.</span></span> <span data-ttu-id="8d982-114">使用 hello LOOKUPVALUE 函數，hello 公式會指定 hello EmployeeSecurity 表中的值。</span><span class="sxs-lookup"><span data-stu-id="8d982-114">By using hello LOOKUPVALUE function, hello formula specifies a value from hello EmployeeSecurity table.</span></span> <span data-ttu-id="8d982-115">hello 公式然後將值 toohello USERNAME 函式，以指定 hello hello 登入的使用者的使用者名稱所屬 toothis 角色。</span><span class="sxs-lookup"><span data-stu-id="8d982-115">hello formula then passes that value toohello USERNAME function, which specifies hello user name of hello user logged on belongs toothis role.</span></span> <span data-ttu-id="8d982-116">hello 使用者然後瀏覽 hello 角色的資料列篩選器所指定的資料。</span><span class="sxs-lookup"><span data-stu-id="8d982-116">hello user can then browse only data specified by hello role’s row filters.</span></span> <span data-ttu-id="8d982-117">在此案例中，您指定的銷售員工只能瀏覽網際網路 hello 各銷售領域都是成員的銷售資料。</span><span class="sxs-lookup"><span data-stu-id="8d982-117">In this scenario, you specify that sales employees can only browse Internet sales data for hello sales territories in which they are a member.</span></span>  
  
<span data-ttu-id="8d982-118">這些工作是唯一 toothis Adventure Works 表格式模型案例中，但不一定適用於 tooa 真實世界的實例會識別在這種情況。</span><span class="sxs-lookup"><span data-stu-id="8d982-118">Those tasks that are unique toothis Adventure Works tabular model scenario, but would not necessarily apply tooa real-world scenario are identified as such.</span></span> <span data-ttu-id="8d982-119">每項工作包含描述 hello 目的 hello 工作的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="8d982-119">Each task includes additional information describing hello purpose of hello task.</span></span>  
  
<span data-ttu-id="8d982-120">本課程的估計時間 toocomplete: **30 分鐘**</span><span class="sxs-lookup"><span data-stu-id="8d982-120">Estimated time toocomplete this lesson: **30 minutes**</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="8d982-121">必要條件</span><span class="sxs-lookup"><span data-stu-id="8d982-121">Prerequisites</span></span>  
<span data-ttu-id="8d982-122">此補充課程主題是表格式模型教學課程的一部分，請依序完成。</span><span class="sxs-lookup"><span data-stu-id="8d982-122">This supplemental lesson topic is part of a tabular modeling tutorial, which should be completed in order.</span></span> <span data-ttu-id="8d982-123">在執行前 hello 工作這個補充課程，您應該已完成所有先前的課程。</span><span class="sxs-lookup"><span data-stu-id="8d982-123">Before performing hello tasks in this supplemental lesson, you should have completed all previous lessons.</span></span>  
  
## <a name="add-hello-dimsalesterritory-table-toohello-aw-internet-sales-tabular-model-project"></a><span data-ttu-id="8d982-124">新增 hello DimSalesTerritory 資料表 toohello AW Internet Sales 表格式模型專案</span><span class="sxs-lookup"><span data-stu-id="8d982-124">Add hello DimSalesTerritory table toohello AW Internet Sales Tabular Model Project</span></span>  
<span data-ttu-id="8d982-125">此 Adventure Works 案例 tooimplement 動態安全性，您必須加入兩個其他資料表 tooyour 模型。</span><span class="sxs-lookup"><span data-stu-id="8d982-125">tooimplement dynamic security for this Adventure Works scenario, you must add two additional tables tooyour model.</span></span> <span data-ttu-id="8d982-126">您加入 DimSalesTerritory （做為銷售地區） 從 hello 第一個資料表 hello 相同 AdventureWorksDW 資料庫。</span><span class="sxs-lookup"><span data-stu-id="8d982-126">hello first table you add is DimSalesTerritory (as Sales Territory) from hello same AdventureWorksDW database.</span></span> <span data-ttu-id="8d982-127">您稍後套用定義 hello 特定資料的資料列篩選器 toohello SalesTerritory 資料表 hello 登入的使用者可以瀏覽。</span><span class="sxs-lookup"><span data-stu-id="8d982-127">You later apply a row filter toohello SalesTerritory table that defines hello particular data hello logged on user can browse.</span></span>  
  
#### <a name="tooadd-hello-dimsalesterritory-table"></a><span data-ttu-id="8d982-128">tooadd hello DimSalesTerritory 資料表</span><span class="sxs-lookup"><span data-stu-id="8d982-128">tooadd hello DimSalesTerritory table</span></span>  
  
1.  <span data-ttu-id="8d982-129">在 表格式模型總管 > 資料來源 中，以滑鼠右鍵按一下您的連線，然後按一下匯入新資料表。</span><span class="sxs-lookup"><span data-stu-id="8d982-129">In Tabular Model Explorer > **Data Sources**, right-click your connection, and then click **Import New Tables**.</span></span>  

    <span data-ttu-id="8d982-130">如果 hello 模擬認證 對話方塊出現，請輸入所使用的模擬認證 hello 第 2 課： 加入資料。</span><span class="sxs-lookup"><span data-stu-id="8d982-130">If hello Impersonation Credentials dialog box appears, type hello impersonation credentials you used in Lesson 2: Add Data.</span></span>
  
2.  <span data-ttu-id="8d982-131">在導覽中，選取 hello **DimSalesTerritory**資料表，然後按一下**確定**。</span><span class="sxs-lookup"><span data-stu-id="8d982-131">In Navigator, select hello **DimSalesTerritory** table, and then click **OK**.</span></span>    
  
3.  <span data-ttu-id="8d982-132">在 [查詢編輯器] 中，按一下 hello **DimSalesTerritory**查詢，然後再移除**[salesterritoryalternatekey]**資料行。</span><span class="sxs-lookup"><span data-stu-id="8d982-132">In Query Editor, click hello **DimSalesTerritory** query, and then remove **SalesTerritoryAlternateKey** column.</span></span>  
  
7.  <span data-ttu-id="8d982-133">按一下 [匯入] 。</span><span class="sxs-lookup"><span data-stu-id="8d982-133">Click **Import**.</span></span>  
  
    <span data-ttu-id="8d982-134">hello 新資料表加入 toohello 模型工作空間。</span><span class="sxs-lookup"><span data-stu-id="8d982-134">hello new table is added toohello model workspace.</span></span> <span data-ttu-id="8d982-135">物件和資料從 hello 來源 DimSalesTerritory 資料表接著會匯入 AW Internet Sales 表格式模型中。</span><span class="sxs-lookup"><span data-stu-id="8d982-135">Objects and data from hello source DimSalesTerritory table are then imported into your AW Internet Sales Tabular Model.</span></span>  
  
9. <span data-ttu-id="8d982-136">已成功匯入 hello 資料表之後，請按一下**關閉**。</span><span class="sxs-lookup"><span data-stu-id="8d982-136">After hello table has been imported successfully, click **Close**.</span></span>  

## <a name="add-a-table-with-user-name-data"></a><span data-ttu-id="8d982-137">新增具有使用者名稱資料的資料表</span><span class="sxs-lookup"><span data-stu-id="8d982-137">Add a table with user name data</span></span>  
<span data-ttu-id="8d982-138">hello hello AdventureWorksDW 範例資料庫中的 DimEmployee 資料表包含來自 hello AdventureWorks 網域的使用者。</span><span class="sxs-lookup"><span data-stu-id="8d982-138">hello DimEmployee table in hello AdventureWorksDW sample database contains users from hello AdventureWorks domain.</span></span> <span data-ttu-id="8d982-139">這些使用者名稱不存在於您自己的環境中。</span><span class="sxs-lookup"><span data-stu-id="8d982-139">Those user names do not exist in your own environment.</span></span> <span data-ttu-id="8d982-140">您必須在您的模型中建立資料表，其中包含您組織中實際使用者 (至少三個) 的小型範例。</span><span class="sxs-lookup"><span data-stu-id="8d982-140">You must create a table in your model that contains a small sample (at least three) of actual users from your organization.</span></span> <span data-ttu-id="8d982-141">然後，您會加入這些使用者為成員 toohello 新角色。</span><span class="sxs-lookup"><span data-stu-id="8d982-141">You then add these users as members toohello new role.</span></span> <span data-ttu-id="8d982-142">您不需要 hello 密碼 hello 範例使用者名稱，但您需要實際的 Windows 使用者名稱從您自己的網域。</span><span class="sxs-lookup"><span data-stu-id="8d982-142">You do not need hello passwords for hello sample user names, but you do need actual Windows user names from your own domain.</span></span>  
  
#### <a name="tooadd-an-employeesecurity-table"></a><span data-ttu-id="8d982-143">tooadd EmployeeSecurity 資料表</span><span class="sxs-lookup"><span data-stu-id="8d982-143">tooadd an EmployeeSecurity table</span></span>  
  
1.  <span data-ttu-id="8d982-144">開啟 Microsoft Excel，並建立工作表。</span><span class="sxs-lookup"><span data-stu-id="8d982-144">Open Microsoft Excel, creating a worksheet.</span></span>  
  
2.  <span data-ttu-id="8d982-145">複製 hello 下表，包括 hello 標頭資料列，並貼到 hello 工作表。</span><span class="sxs-lookup"><span data-stu-id="8d982-145">Copy hello following table, including hello header row, and then paste it into hello worksheet.</span></span>  

    ```
      |EmployeeId|SalesTerritoryId|FirstName|LastName|LoginId|  
      |---------------|----------------------|--------------|-------------|------------|  
      |1|2|<user first name>|<user last name>|\<domain\username>|  
      |1|3|<user first name>|<user last name>|\<domain\username>|  
      |2|4|<user first name>|<user last name>|\<domain\username>|  
      |3|5|<user first name>|<user last name>|\<domain\username>|  
    ```

3.  <span data-ttu-id="8d982-146">Hello 名字、 姓氏和 domain\username 取代 hello 名稱與您組織中的三個使用者的登入識別碼。</span><span class="sxs-lookup"><span data-stu-id="8d982-146">Replace hello first name, last name, and domain\username with hello names and login ids of three users in your organization.</span></span> <span data-ttu-id="8d982-147">Put hello 在 hello 前兩個資料列，員工編號 1，顯示該使用者所屬銷售地區比 toomore 相同的使用者。</span><span class="sxs-lookup"><span data-stu-id="8d982-147">Put hello same user on hello first two rows, for EmployeeId 1, showing this user belongs toomore than one sales territory.</span></span> <span data-ttu-id="8d982-148">Hello EmployeeId 和 SalesTerritoryId 欄位保持不變。</span><span class="sxs-lookup"><span data-stu-id="8d982-148">Leave hello EmployeeId and SalesTerritoryId fields as they are.</span></span>  
  
4.  <span data-ttu-id="8d982-149">儲存 hello 的工作表**SampleEmployee**。</span><span class="sxs-lookup"><span data-stu-id="8d982-149">Save hello worksheet as **SampleEmployee**.</span></span>  
  
5.  <span data-ttu-id="8d982-150">Hello 工作表中選取所有 hello 資料格包含員工資料，包括 hello 標頭，然後以滑鼠右鍵按一下選取的 hello 資料，然後按一下**複製**。</span><span class="sxs-lookup"><span data-stu-id="8d982-150">In hello worksheet, select all hello cells with employee data, including hello headers, then right-click hello selected data, and then click **Copy**.</span></span>  
  
6.  <span data-ttu-id="8d982-151">在 SSDT 中，按一下 hello**編輯**功能表，然後再按一下**貼上**。</span><span class="sxs-lookup"><span data-stu-id="8d982-151">In SSDT, click hello **Edit** menu, and then click **Paste**.</span></span>  
  
    <span data-ttu-id="8d982-152">如果貼上呈現灰色時，按一下 hello 模型設計師視窗中的任何資料表中的任何資料行，並再試一次。</span><span class="sxs-lookup"><span data-stu-id="8d982-152">If Paste is grayed out, click any column in any table in hello model designer window, and try again.</span></span>  
  
7.  <span data-ttu-id="8d982-153">在 hello**貼上預覽**對話方塊中，於**資料表名稱**，型別**EmployeeSecurity**。</span><span class="sxs-lookup"><span data-stu-id="8d982-153">In hello **Paste Preview** dialog box, in **Table Name**, type **EmployeeSecurity**.</span></span>  
  
8.  <span data-ttu-id="8d982-154">在**貼上資料 toobe**，確認 hello 資料包含所有 hello 使用者資料和 hello SampleEmployee 工作表中的標頭。</span><span class="sxs-lookup"><span data-stu-id="8d982-154">In **Data toobe pasted**, verify hello data includes all hello user data and headers from hello SampleEmployee worksheet.</span></span>  
  
9. <span data-ttu-id="8d982-155">確認已核取 使用第一個資料列做為資料行標頭，然後按一下確定。</span><span class="sxs-lookup"><span data-stu-id="8d982-155">Verify **Use first row as column headers** is checked, and then click **Ok**.</span></span>  
  
    <span data-ttu-id="8d982-156">建立新的資料表，名為 EmployeeSecurity hello SampleEmployee 工作表複製的員工資料。</span><span class="sxs-lookup"><span data-stu-id="8d982-156">A new table named EmployeeSecurity with employee data copied from hello SampleEmployee worksheet is created.</span></span>  
  
## <a name="create-relationships-between-factinternetsales-dimgeography-and-dimsalesterritory-table"></a><span data-ttu-id="8d982-157">建立 FactInternetSales、DimGeography 和 DimSalesTerritory 資料表之間的關聯性</span><span class="sxs-lookup"><span data-stu-id="8d982-157">Create relationships between FactInternetSales, DimGeography, and DimSalesTerritory table</span></span>  
<span data-ttu-id="8d982-158">hello FactInternetSales、 DimGeography 和 DimSalesTerritory 資料表全都包含常用的資料行，SalesTerritoryId。</span><span class="sxs-lookup"><span data-stu-id="8d982-158">hello FactInternetSales, DimGeography, and DimSalesTerritory table all contain a common column, SalesTerritoryId.</span></span> <span data-ttu-id="8d982-159">hello DimSalesTerritory 資料表中的 hello SalesTerritoryId 資料行包含以每個銷售地區不同的識別碼值。</span><span class="sxs-lookup"><span data-stu-id="8d982-159">hello SalesTerritoryId column in hello DimSalesTerritory table contains values with a different Id for each sales territory.</span></span>  
  
#### <a name="toocreate-relationships-between-hello-factinternetsales-dimgeography-and-hello-dimsalesterritory-table"></a><span data-ttu-id="8d982-160">toocreate hello FactInternetSales、 DimGeography，與 hello DimSalesTerritory 資料表之間的關聯性</span><span class="sxs-lookup"><span data-stu-id="8d982-160">toocreate relationships between hello FactInternetSales, DimGeography, and hello DimSalesTerritory table</span></span>  
  
1.  <span data-ttu-id="8d982-161">在 圖表檢視中 hello **DimGeography**資料表，按一下並按住 hello **SalesTerritoryId**資料行，然後拖曳 hello 游標 toohello **SalesTerritoryId** hello 中的資料行**DimSalesTerritory**資料表，然後再放開。</span><span class="sxs-lookup"><span data-stu-id="8d982-161">In Diagram View, in hello **DimGeography** table, click, and hold on hello **SalesTerritoryId** column, then drag hello cursor toohello **SalesTerritoryId** column in hello **DimSalesTerritory** table, and then release.</span></span>  
  
2.  <span data-ttu-id="8d982-162">在 hello **FactInternetSales**資料表，按一下並按住 hello **SalesTerritoryId**資料行，然後拖曳 hello 游標 toohello **SalesTerritoryId** hello中的資料行**DimSalesTerritory**資料表，然後再放開。</span><span class="sxs-lookup"><span data-stu-id="8d982-162">In hello **FactInternetSales** table, click, and hold on hello **SalesTerritoryId** column, then drag hello cursor toohello **SalesTerritoryId** column in hello **DimSalesTerritory** table, and then release.</span></span>  
  
    <span data-ttu-id="8d982-163">請注意 hello 此關聯性的作用中 屬性為 False，亦即非使用中。</span><span class="sxs-lookup"><span data-stu-id="8d982-163">Notice hello Active property for this relationship is False, meaning it's inactive.</span></span> <span data-ttu-id="8d982-164">hello FactInternetSales 資料表已經有另一個使用中關聯性。</span><span class="sxs-lookup"><span data-stu-id="8d982-164">hello FactInternetSales table already has another active relationship.</span></span>  
  
## <a name="hide-hello-employeesecurity-table-from-client-applications"></a><span data-ttu-id="8d982-165">隱藏 hello EmployeeSecurity 資料表從用戶端應用程式</span><span class="sxs-lookup"><span data-stu-id="8d982-165">Hide hello EmployeeSecurity Table from client applications</span></span>  
<span data-ttu-id="8d982-166">在這個工作中，您隱藏 hello EmployeeSecurity 資料表，使其不會出現在用戶端應用程式欄位清單中。</span><span class="sxs-lookup"><span data-stu-id="8d982-166">In this task, you hide hello EmployeeSecurity table, keeping it from appearing in a client application’s field list.</span></span> <span data-ttu-id="8d982-167">請注意，隱藏資料表並不會保護它。</span><span class="sxs-lookup"><span data-stu-id="8d982-167">Keep in mind that hiding a table does not secure it.</span></span> <span data-ttu-id="8d982-168">使用者仍可查詢 EmployeeSecurity 資料表資料，但前提是他們知道方式。</span><span class="sxs-lookup"><span data-stu-id="8d982-168">Users can still query EmployeeSecurity table data if they know how.</span></span> <span data-ttu-id="8d982-169">toosecure hello EmployeeSecurity 資料表資料，防止使用者能夠 tooquery 其中任何資料、 套用篩選，以在稍後的工作。</span><span class="sxs-lookup"><span data-stu-id="8d982-169">toosecure hello EmployeeSecurity table data, preventing users from being able tooquery any of its data, you apply a filter in a later task.</span></span>  
  
#### <a name="toohide-hello-employeesecurity-table-from-client-applications"></a><span data-ttu-id="8d982-170">從用戶端應用程式的 toohide hello EmployeeSecurity 資料表</span><span class="sxs-lookup"><span data-stu-id="8d982-170">toohide hello EmployeeSecurity table from client applications</span></span>  
  
-   <span data-ttu-id="8d982-171">在 hello 模型設計師中，在圖表檢視中，以滑鼠右鍵按一下 hello**員工**資料表標題，然後再按一下**用戶端工具中隱藏**。</span><span class="sxs-lookup"><span data-stu-id="8d982-171">In hello model designer, in Diagram View, right-click hello **Employee** table heading, and then click **Hide from Client Tools**.</span></span>  
  
## <a name="create-a-sales-employees-by-territory-user-role"></a><span data-ttu-id="8d982-172">建立「銷售地區員工」使用者角色</span><span class="sxs-lookup"><span data-stu-id="8d982-172">Create a Sales Employees by Territory user role</span></span>  
<span data-ttu-id="8d982-173">在此工作中，您會建立使用者角色。</span><span class="sxs-lookup"><span data-stu-id="8d982-173">In this task, you create a user role.</span></span> <span data-ttu-id="8d982-174">這個角色包含定義 hello DimSalesTerritory 資料表的哪些資料列可見的 toousers 一個資料列篩選。</span><span class="sxs-lookup"><span data-stu-id="8d982-174">This role includes a row filter defining which rows of hello DimSalesTerritory table are visible toousers.</span></span> <span data-ttu-id="8d982-175">hello 篩選會套用在 hello 一對多關聯性方向 tooall 其他資料表相關的 tooDimSalesTerritory。</span><span class="sxs-lookup"><span data-stu-id="8d982-175">hello filter is then applied in hello one-to-many relationship direction tooall other tables related tooDimSalesTerritory.</span></span> <span data-ttu-id="8d982-176">您也可以套用篩選器，可保護從任何使用者 hello 角色的成員可以查詢 hello 整個 EmployeeSecurity 資料表。</span><span class="sxs-lookup"><span data-stu-id="8d982-176">You also apply a filter that secures hello entire EmployeeSecurity table from being queryable by any user that is a member of hello role.</span></span>  
  
> [!NOTE]  
> <span data-ttu-id="8d982-177">hello Sales Employees by Territory 角色，您在這一課中建立會限制成員 toobrowse （或查詢） 只的銷售資料所屬的 hello 銷售領域 toowhich。</span><span class="sxs-lookup"><span data-stu-id="8d982-177">hello Sales Employees by Territory role you create in this lesson restricts members toobrowse (or query) only sales data for hello sales territory toowhich they belong.</span></span> <span data-ttu-id="8d982-178">如果您將使用者新增為成員 toohello Sales Employees by Territory 角色同時存在於中角色的成員建立時在[第 11 課： 建立角色](../tutorials/aas-lesson-11-create-roles.md)，取得權限的組合。</span><span class="sxs-lookup"><span data-stu-id="8d982-178">If you add a user as a member toohello Sales Employees by Territory role that also exists as a member in a role created in [Lesson 11: Create Roles](../tutorials/aas-lesson-11-create-roles.md), you get a combination of permissions.</span></span> <span data-ttu-id="8d982-179">當使用者屬於多個角色、 hello 權限和每個角色定義的資料列篩選器會累計。</span><span class="sxs-lookup"><span data-stu-id="8d982-179">When a user is a member of multiple roles, hello permissions, and row filters defined for each role are cumulative.</span></span> <span data-ttu-id="8d982-180">也就是說，hello 使用者擁有 hello 大於權限取決於 hello 角色組合。</span><span class="sxs-lookup"><span data-stu-id="8d982-180">That is, hello user has hello greater permissions determined by hello combination of roles.</span></span>  
  
#### <a name="toocreate-a-sales-employees-by-territory-user-role"></a><span data-ttu-id="8d982-181">toocreate Sales Employees by Territory 使用者角色</span><span class="sxs-lookup"><span data-stu-id="8d982-181">toocreate a Sales Employees by Territory user role</span></span>  
  
1.  <span data-ttu-id="8d982-182">在 SSDT 中，按一下 hello**模型**功能表，然後再按一下**角色**。</span><span class="sxs-lookup"><span data-stu-id="8d982-182">In SSDT, click hello **Model** menu, and then click **Roles**.</span></span>  
  
2.  <span data-ttu-id="8d982-183">在 [角色管理員] 中，按一下 [新增]。</span><span class="sxs-lookup"><span data-stu-id="8d982-183">In **Role Manager**, click **New**.</span></span>  
  
    <span data-ttu-id="8d982-184">新的角色將任何權限是以 hello 新增 toohello 清單。</span><span class="sxs-lookup"><span data-stu-id="8d982-184">A new role with hello None permission is added toohello list.</span></span>  
  
3.  <span data-ttu-id="8d982-185">按一下 hello 新角色，然後在 hello**名稱**資料行，hello 角色重新命名過**Sales Employees by Territory**。</span><span class="sxs-lookup"><span data-stu-id="8d982-185">Click hello new role, and then in hello **Name** column, rename hello role too**Sales Employees by Territory**.</span></span>  
  
4.  <span data-ttu-id="8d982-186">在 hello**權限**資料行中，按一下 hello 下拉式清單中，然後選取 hello**讀取**權限。</span><span class="sxs-lookup"><span data-stu-id="8d982-186">In hello **Permissions** column, click hello dropdown list, and then select hello **Read** permission.</span></span>  
  
5.  <span data-ttu-id="8d982-187">按一下 hello**成員**索引標籤，然後再按一下**新增**。</span><span class="sxs-lookup"><span data-stu-id="8d982-187">Click hello **Members** tab, and then click **Add**.</span></span>  
  
6.  <span data-ttu-id="8d982-188">在 hello**選取使用者或群組**對話方塊中，於**名為 tooselect Enter hello 物件**，輸入 hello 第一個範例的使用者名稱建立 hello EmployeeSecurity 資料表時，您使用。</span><span class="sxs-lookup"><span data-stu-id="8d982-188">In hello **Select User or Group** dialog box, in **Enter hello object named tooselect**, type hello first sample user name you used when creating hello EmployeeSecurity table.</span></span> <span data-ttu-id="8d982-189">按一下**檢查名稱**tooverify hello 使用者名稱有效，然後再按一下**確定**。</span><span class="sxs-lookup"><span data-stu-id="8d982-189">Click **Check Names** tooverify hello user name is valid, and then click **Ok**.</span></span>  
  
    <span data-ttu-id="8d982-190">重複此步驟中，加入 hello 建立 hello EmployeeSecurity 資料表時，您使用其他範例使用者名稱。</span><span class="sxs-lookup"><span data-stu-id="8d982-190">Repeat this step, adding hello other sample user names you used when creating hello EmployeeSecurity table.</span></span>  
  
7.  <span data-ttu-id="8d982-191">按一下 hello**資料列篩選器** 索引標籤。</span><span class="sxs-lookup"><span data-stu-id="8d982-191">Click hello **Row Filters** tab.</span></span>  
  
8.  <span data-ttu-id="8d982-192">Hello **EmployeeSecurity**表格中的 hello **DAX 篩選**資料行中，下列公式的型別 hello:</span><span class="sxs-lookup"><span data-stu-id="8d982-192">For hello **EmployeeSecurity** table, in hello **DAX Filter** column, type hello following formula:</span></span>  
  
    ```
      =FALSE()  
    ```
  
    <span data-ttu-id="8d982-193">此公式會指定所有資料行解析 toohello false 布林條件。</span><span class="sxs-lookup"><span data-stu-id="8d982-193">This formula specifies that all columns resolve toohello false Boolean condition.</span></span> <span data-ttu-id="8d982-194">Hello Sales Employees by Territory 使用者角色的成員可以查詢 hello EmployeeSecurity 資料表沒有資料行。</span><span class="sxs-lookup"><span data-stu-id="8d982-194">No columns for hello EmployeeSecurity table can be queried by a member of hello Sales Employees by Territory user role.</span></span>  
  
9. <span data-ttu-id="8d982-195">Hello **DimSalesTerritory**資料表，下列公式的型別 hello:</span><span class="sxs-lookup"><span data-stu-id="8d982-195">For hello **DimSalesTerritory** table, type hello following formula:</span></span>  

    ```  
    ='Sales Territory'[Sales Territory Id]=LOOKUPVALUE('Employee Security'[Sales Territory Id], 
      'Employee Security'[Login Id], USERNAME(), 
      'Employee Security'[Sales Territory Id], 
      'Sales Territory'[Sales Territory Id]) 
    ```
  
    <span data-ttu-id="8d982-196">此公式，hello LOOKUPVALUE 函數傳回所有 hello DimEmployeeSecurity [SalesTerritoryId] 資料行值，其中 hello EmployeeSecurity [LoginId] 是 hello 相同為 hello 目前登入 Windows 使用者名稱和 EmployeeSecurity [SalesTerritoryId] 是 hello 與 hello DimSalesTerritory [SalesTerritoryId] 相同。</span><span class="sxs-lookup"><span data-stu-id="8d982-196">In this formula, hello LOOKUPVALUE function returns all values for hello DimEmployeeSecurity[SalesTerritoryId] column, where hello EmployeeSecurity[LoginId] is hello same as hello current logged on Windows user name, and EmployeeSecurity[SalesTerritoryId] is hello same as hello DimSalesTerritory[SalesTerritoryId].</span></span>  
  
    <span data-ttu-id="8d982-197">hello 組 LOOKUPVALUE 所傳回的銷售領域識別碼則使用的 toorestrict hello 顯示 hello DimSalesTerritory 資料表的資料列。</span><span class="sxs-lookup"><span data-stu-id="8d982-197">hello set of sales territory IDs returned by LOOKUPVALUE is then used toorestrict hello rows shown in hello DimSalesTerritory table.</span></span> <span data-ttu-id="8d982-198">只有其中 hello SalesTerritoryID hello 資料列是以 hello 組識別碼 hello LOOKUPVALUE 函數所傳回的資料列會顯示。</span><span class="sxs-lookup"><span data-stu-id="8d982-198">Only rows where hello SalesTerritoryID for hello row is in hello set of IDs returned by hello LOOKUPVALUE function are displayed.</span></span>  
  
10. <span data-ttu-id="8d982-199">在 [角色管理員] 中，按一下 [確定]。</span><span class="sxs-lookup"><span data-stu-id="8d982-199">In Role Manager, click **Ok**.</span></span>  
  
## <a name="test-hello-sales-employees-by-territory-user-role"></a><span data-ttu-id="8d982-200">測試 hello Sales Employees by Territory 使用者角色</span><span class="sxs-lookup"><span data-stu-id="8d982-200">Test hello Sales Employees by Territory User Role</span></span>  
<span data-ttu-id="8d982-201">在這項工作，您可以使用在 excel 中的 hello 分析中的 hello Sales Employees by Territory 使用者角色的 SSDT tootest hello 效率。</span><span class="sxs-lookup"><span data-stu-id="8d982-201">In this task, you use hello Analyze in Excel feature in SSDT tootest hello efficacy of hello Sales Employees by Territory user role.</span></span> <span data-ttu-id="8d982-202">您指定一個您要 toohello EmployeeSecurity 資料表加入 hello 使用者名稱和 hello 角色的成員。</span><span class="sxs-lookup"><span data-stu-id="8d982-202">You specify one of hello user names you added toohello EmployeeSecurity table and as a member of hello role.</span></span> <span data-ttu-id="8d982-203">建立 Excel 與 hello 模型之間的 hello 連接 hello 有效使用者名稱再使用這個使用者名稱。</span><span class="sxs-lookup"><span data-stu-id="8d982-203">This user name is then used as hello effective user name in hello connection created between Excel and hello model.</span></span>  
  
#### <a name="tootest-hello-sales-employees-by-territory-user-role"></a><span data-ttu-id="8d982-204">tootest hello Sales Employees by Territory 使用者角色</span><span class="sxs-lookup"><span data-stu-id="8d982-204">tootest hello Sales Employees by Territory user role</span></span>  
  
1.  <span data-ttu-id="8d982-205">在 SSDT 中，按一下 hello**模型**功能表，然後再按一下**在 Excel 中的進行分析**。</span><span class="sxs-lookup"><span data-stu-id="8d982-205">In SSDT, click hello **Model** menu, and then click **Analyze in Excel**.</span></span>  
  
2.  <span data-ttu-id="8d982-206">在 hello**在 Excel 中的進行分析**對話方塊中，於**指定 hello 使用者名稱或角色 toouse tooconnect toohello 模型**，選取**其他 Windows 使用者**，然後按一下 **瀏覽**。</span><span class="sxs-lookup"><span data-stu-id="8d982-206">In hello **Analyze in Excel** dialog box, in **Specify hello user name or role toouse tooconnect toohello model**, select **Other Windows User**, and then click **Browse**.</span></span>  
  
3.  <span data-ttu-id="8d982-207">在 hello**選取使用者或群組**對話方塊中，於**輸入 hello 物件名稱 tooselect**，輸入您在 hello EmployeeSecurity 資料表中，包含使用者名稱，然後按一下**檢查名稱**.</span><span class="sxs-lookup"><span data-stu-id="8d982-207">In hello **Select User or Group** dialog box, in **Enter hello object name tooselect**, type a user name you included in hello EmployeeSecurity table, and then click **Check Names**.</span></span>  
  
4.  <span data-ttu-id="8d982-208">按一下**確定**tooclose hello**選取使用者或群組**對話方塊，然後按一下**確定**tooclose hello**在 Excel 中的進行分析** 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="8d982-208">Click **Ok** tooclose hello **Select User or Group** dialog box, and then click **Ok** tooclose hello **Analyze in Excel** dialog box.</span></span>  
  
    <span data-ttu-id="8d982-209">Excel 會開啟新的活頁簿。</span><span class="sxs-lookup"><span data-stu-id="8d982-209">Excel opens with a new workbook.</span></span> <span data-ttu-id="8d982-210">將會自動建立樞紐分析表。</span><span class="sxs-lookup"><span data-stu-id="8d982-210">A PivotTable is automatically created.</span></span> <span data-ttu-id="8d982-211">hello 樞紐分析表欄位清單包含最新的模型中可用的 hello 資料欄位。</span><span class="sxs-lookup"><span data-stu-id="8d982-211">hello PivotTable Fields list includes most of hello data fields available in your new model.</span></span>  
  
    <span data-ttu-id="8d982-212">請注意 hello EmployeeSecurity 資料表不是 hello 樞紐分析表欄位清單中可見的。</span><span class="sxs-lookup"><span data-stu-id="8d982-212">Notice hello EmployeeSecurity table is not visible in hello PivotTable Fields list.</span></span> <span data-ttu-id="8d982-213">您於先前工作中在用戶端工具中隱藏此資料表。</span><span class="sxs-lookup"><span data-stu-id="8d982-213">You hid this table from client tools in a previous task.</span></span>  
  
5.  <span data-ttu-id="8d982-214">在 hello**欄位**清單中， **∑ Internet Sales** （量值），選取 hello **InternetTotalSales**量值。</span><span class="sxs-lookup"><span data-stu-id="8d982-214">In hello **Fields** list, in **∑ Internet Sales** (measures), select hello **InternetTotalSales** measure.</span></span> <span data-ttu-id="8d982-215">hello 量值輸入 hello**值**欄位。</span><span class="sxs-lookup"><span data-stu-id="8d982-215">hello measure is entered into hello **Values** fields.</span></span>  
  
6.  <span data-ttu-id="8d982-216">選取 hello **SalesTerritoryId**資料行從 hello **DimSalesTerritory**資料表。</span><span class="sxs-lookup"><span data-stu-id="8d982-216">Select hello **SalesTerritoryId** column from hello **DimSalesTerritory** table.</span></span> <span data-ttu-id="8d982-217">hello 資料行輸入 hello**資料列標籤**欄位。</span><span class="sxs-lookup"><span data-stu-id="8d982-217">hello column is entered into hello **Row Labels** fields.</span></span>  
  
    <span data-ttu-id="8d982-218">請注意網際網路銷售數字只會出現 hello 一個區域 toowhich hello 有效使用者名稱使用所屬。</span><span class="sxs-lookup"><span data-stu-id="8d982-218">Notice Internet sales figures appear only for hello one region toowhich hello effective user name you used belongs.</span></span> <span data-ttu-id="8d982-219">如果您選取另一個資料行，例如縣 （市） 從 hello DimGeography 資料表資料列標籤 欄位中，只有城市 hello 銷售領域 toowhich hello 有效使用者所屬會顯示。</span><span class="sxs-lookup"><span data-stu-id="8d982-219">If you select another column, like City from hello DimGeography table as Row Label field, only cities in hello sales territory toowhich hello effective user belongs are displayed.</span></span>  
  
    <span data-ttu-id="8d982-220">此使用者無法瀏覽或查詢以外 hello 一個其所屬的領域的任何網際網路銷售資料。</span><span class="sxs-lookup"><span data-stu-id="8d982-220">This user cannot browse or query any Internet sales data for territories other than hello one they belong to.</span></span> <span data-ttu-id="8d982-221">這項限制是因為 hello hello Sales Employees by Territory 使用者角色中的 hello DimSalesTerritory 資料表定義的資料列篩選器可保護資料的所有資料與相關 tooother 銷售領域。</span><span class="sxs-lookup"><span data-stu-id="8d982-221">This restriction is because hello row filter defined for hello DimSalesTerritory table, in hello Sales Employees by Territory user role, secures data for all data related tooother sales territories.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8d982-222">另請參閱</span><span class="sxs-lookup"><span data-stu-id="8d982-222">See Also</span></span>  
[<span data-ttu-id="8d982-223">USERNAME 函式 (DAX)</span><span class="sxs-lookup"><span data-stu-id="8d982-223">USERNAME Function (DAX)</span></span>](https://msdn.microsoft.com/library/hh230954.aspx)  
[<span data-ttu-id="8d982-224">LOOKUPVALUE 函式 (DAX)</span><span class="sxs-lookup"><span data-stu-id="8d982-224">LOOKUPVALUE Function (DAX)</span></span>](https://msdn.microsoft.com/library/gg492170.aspx)  
[<span data-ttu-id="8d982-225">CUSTOMDATA 函式 (DAX)</span><span class="sxs-lookup"><span data-stu-id="8d982-225">CUSTOMDATA Function (DAX)</span></span>](https://msdn.microsoft.com/library/hh213140.aspx)  