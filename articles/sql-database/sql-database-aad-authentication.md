---
title: "Azure Active Directory 驗證 - Azure SQL (概觀) | Microsoft Docs"
description: "了解如何利用 SQL Database 和 SQL 資料倉儲使用 Azure Active Directory 來驗證"
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: 7e2508a1-347e-4f15-b060-d46602c5ce7e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 08/11/2017
ms.author: rickbyh
ms.openlocfilehash: c83d482eaf476388a174dfb02ae6ef53ebe921bc
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/18/2017
---
# <a name="use-azure-active-directory-authentication-for-authentication-with-sql-database-or-sql-data-warehouse"></a><span data-ttu-id="adaa5-103">利用 SQL Database 和 SQL 資料倉儲使用 Azure Active Directory 驗證來驗證</span><span class="sxs-lookup"><span data-stu-id="adaa5-103">Use Azure Active Directory Authentication for authentication with SQL Database or SQL Data Warehouse</span></span>
<span data-ttu-id="adaa5-104">Azure Active Directory 驗證是 Azure Active Directory (Azure AD) 中使用身分識別連接到 Microsoft Azure SQL Database 和 [SQL 資料倉儲](../sql-data-warehouse/sql-data-warehouse-overview-what-is.md) 的機制。</span><span class="sxs-lookup"><span data-stu-id="adaa5-104">Azure Active Directory authentication is a mechanism of connecting to Microsoft Azure SQL Database and [SQL Data Warehouse](../sql-data-warehouse/sql-data-warehouse-overview-what-is.md) by using identities in Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="adaa5-105">您可以使用 Azure AD 驗證，在單一中央位置集中管理資料庫使用者和其他 Microsoft 服務的身分識別。</span><span class="sxs-lookup"><span data-stu-id="adaa5-105">With Azure AD authentication, you can centrally manage the identities of database users and other Microsoft services in one central location.</span></span> <span data-ttu-id="adaa5-106">中央識別碼管理提供單一位置以管理資料庫使用者並簡化權限管理。</span><span class="sxs-lookup"><span data-stu-id="adaa5-106">Central ID management provides a single place to manage database users and simplifies permission management.</span></span> <span data-ttu-id="adaa5-107">包括以下優點：</span><span class="sxs-lookup"><span data-stu-id="adaa5-107">Benefits include the following:</span></span>

* <span data-ttu-id="adaa5-108">它提供 SQL Server 驗證的替代方案。</span><span class="sxs-lookup"><span data-stu-id="adaa5-108">It provides an alternative to SQL Server authentication.</span></span>
* <span data-ttu-id="adaa5-109">協助停止跨資料庫伺服器使用過多的使用者身分識別。</span><span class="sxs-lookup"><span data-stu-id="adaa5-109">Helps stop the proliferation of user identities across database servers.</span></span>
* <span data-ttu-id="adaa5-110">允許在單一位置的密碼替換</span><span class="sxs-lookup"><span data-stu-id="adaa5-110">Allows password rotation in a single place</span></span>
* <span data-ttu-id="adaa5-111">客戶可以管理使用外部 (AAD) 群組的資料庫權限。</span><span class="sxs-lookup"><span data-stu-id="adaa5-111">Customers can manage database permissions using external (AAD) groups.</span></span>
* <span data-ttu-id="adaa5-112">它可以藉由啟用整合式 Windows 驗證和 Azure Active Directory 支援的其他形式驗證來避免儲存密碼。</span><span class="sxs-lookup"><span data-stu-id="adaa5-112">It can eliminate storing passwords by enabling integrated Windows authentication and other forms of authentication supported by Azure Active Directory.</span></span>
* <span data-ttu-id="adaa5-113">Azure AD 驗證會使用自主資料庫使用者，在資料庫層級驗證身分。</span><span class="sxs-lookup"><span data-stu-id="adaa5-113">Azure AD authentication uses contained database users to authenticate identities at the database level.</span></span>
* <span data-ttu-id="adaa5-114">Azure AD 針對連線到 SQL Database 的應用程式支援權杖型驗證。</span><span class="sxs-lookup"><span data-stu-id="adaa5-114">Azure AD supports token-based authentication for applications connecting to SQL Database.</span></span>
* <span data-ttu-id="adaa5-115">Azure AD 驗證本機 Azure Active Directory 的 ADFS (網域同盟) 或原生使用者/密碼驗證，而不需進行網域同步處理。</span><span class="sxs-lookup"><span data-stu-id="adaa5-115">Azure AD authentication supports ADFS (domain federation) or native user/password authentication for a local Azure Active Directory without domain synchronization.</span></span>  
* <span data-ttu-id="adaa5-116">Azure AD 支援來自 SQL Server Management Studio 的連線，其中使用包含 Multi-Factor Authentication (MFA) 的 Active Directory 通用驗證。</span><span class="sxs-lookup"><span data-stu-id="adaa5-116">Azure AD supports connections from SQL Server Management Studio that use Active Directory Universal Authentication, which includes Multi-Factor Authentication (MFA).</span></span>  <span data-ttu-id="adaa5-117">MFA 包含增強式驗證功能，其中提供一系列簡易的驗證選項，例如電話、簡訊、含有 PIN 的智慧卡或行動應用程式通知。</span><span class="sxs-lookup"><span data-stu-id="adaa5-117">MFA includes strong authentication with a range of easy verification options — phone call, text message, smart cards with pin, or mobile app notification.</span></span> <span data-ttu-id="adaa5-118">如需詳細資訊，請參閱 [適用於與 SQL Database 和 SQL 資料倉儲搭配使用之 Azure AD MFA 的 SSMS 支援](sql-database-ssms-mfa-authentication.md)。</span><span class="sxs-lookup"><span data-stu-id="adaa5-118">For more information, see [SSMS support for Azure AD MFA with SQL Database and SQL Data Warehouse](sql-database-ssms-mfa-authentication.md).</span></span>  

>  [!NOTE]  
>  <span data-ttu-id="adaa5-119">使用 Azure Active Directory 帳戶不支援連線到 Azure VM 上執行的 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="adaa5-119">Connecting to SQL Server running on an Azure VM is not supported using an Azure Active Directory account.</span></span> <span data-ttu-id="adaa5-120">請改用 Active Directory 網域帳戶。</span><span class="sxs-lookup"><span data-stu-id="adaa5-120">Use a domain Active Directory account instead.</span></span>  

<span data-ttu-id="adaa5-121">設定步驟包括以下設定和使用 Azure Active Directory 驗證的程序。</span><span class="sxs-lookup"><span data-stu-id="adaa5-121">The configuration steps include the following procedures to configure and use Azure Active Directory authentication.</span></span>

1. <span data-ttu-id="adaa5-122">建立和填入 Azure AD。</span><span class="sxs-lookup"><span data-stu-id="adaa5-122">Create and populate Azure AD.</span></span>
2. <span data-ttu-id="adaa5-123">選用：和目前與您的 Azure 訂用帳戶相關聯的 Active Directory 產生關聯並加以變更</span><span class="sxs-lookup"><span data-stu-id="adaa5-123">Optional: Associate or change the active directory that is currently associated with your Azure Subscription.</span></span>
3. <span data-ttu-id="adaa5-124">建立 Azure SQL 伺服器或 [Azure SQL 資料倉儲](https://azure.microsoft.com/services/sql-data-warehouse/)的 Azure Active Directory 系統管理員。</span><span class="sxs-lookup"><span data-stu-id="adaa5-124">Create an Azure Active Directory administrator for Azure SQL server or [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span></span>
4. <span data-ttu-id="adaa5-125">設定用戶端電腦。</span><span class="sxs-lookup"><span data-stu-id="adaa5-125">Configure your client computers.</span></span>
5. <span data-ttu-id="adaa5-126">在對應至 Azure AD 身分識別的資料庫中建立自主資料庫使用者。</span><span class="sxs-lookup"><span data-stu-id="adaa5-126">Create contained database users in your database mapped to Azure AD identities.</span></span>
6. <span data-ttu-id="adaa5-127">使用 Azure AD 身分識別連接到您的資料庫。</span><span class="sxs-lookup"><span data-stu-id="adaa5-127">Connect to your database by using Azure AD identities.</span></span>

> [!NOTE]
> <span data-ttu-id="adaa5-128">若要了解如何建立和填入 Azure AD，然後使用 Azure SQL Database 和 SQL 資料倉儲設定 Azure AD，請參閱[使用 Azure SQL Database 設定 Azure AD](sql-database-aad-authentication-configure.md)。</span><span class="sxs-lookup"><span data-stu-id="adaa5-128">To learn how to create and populate Azure AD, and then configure Azure AD with Azure SQL Database and SQL Data Warehouse, see [Configure Azure AD with Azure SQL Database](sql-database-aad-authentication-configure.md).</span></span>
>

## <a name="trust-architecture"></a><span data-ttu-id="adaa5-129">信認架構</span><span class="sxs-lookup"><span data-stu-id="adaa5-129">Trust architecture</span></span>
<span data-ttu-id="adaa5-130">下列高階圖表摘要說明搭配使用 Azure AD 驗證與 Azure SQL Database 的解決方案架構。</span><span class="sxs-lookup"><span data-stu-id="adaa5-130">The following high-level diagram summarizes the solution architecture of using Azure AD authentication with Azure SQL Database.</span></span> <span data-ttu-id="adaa5-131">相同的概念適用於 SQL 資料倉儲。</span><span class="sxs-lookup"><span data-stu-id="adaa5-131">The same concepts apply to SQL Data Warehouse.</span></span> <span data-ttu-id="adaa5-132">若要支援 Azure AD 原生使用者密碼，只會考慮雲端部分和 Azure AD/Azure SQL Database。</span><span class="sxs-lookup"><span data-stu-id="adaa5-132">To support Azure AD native user password, only the Cloud portion and Azure AD/Azure SQL Database is considered.</span></span> <span data-ttu-id="adaa5-133">若要支援同盟驗證 (或 Windows 認證的使用者/密碼)，需要與 ADFS 區塊進行通訊。</span><span class="sxs-lookup"><span data-stu-id="adaa5-133">To support Federated authentication (or user/password for Windows credentials), the communication with ADFS block is required.</span></span> <span data-ttu-id="adaa5-134">箭頭表示通訊路徑。</span><span class="sxs-lookup"><span data-stu-id="adaa5-134">The arrows indicate communication pathways.</span></span>

![aad 驗證圖表][1]

<span data-ttu-id="adaa5-136">下圖表示允許用戶端藉由提交權杖連線到資料庫的同盟、信任和主控關聯性。</span><span class="sxs-lookup"><span data-stu-id="adaa5-136">The following diagram indicates the federation, trust, and hosting relationships that allow a client to connect to a database by submitting a token.</span></span> <span data-ttu-id="adaa5-137">此權杖是由 Azure AD 所驗證，並受到資料庫信任。</span><span class="sxs-lookup"><span data-stu-id="adaa5-137">The token is authenticated by an Azure AD, and is trusted by the database.</span></span> <span data-ttu-id="adaa5-138">客戶 1 可以代表具有原生使用者的 Azure AD 或具有同盟使用者的 Azure Active Directory。</span><span class="sxs-lookup"><span data-stu-id="adaa5-138">Customer 1 can represent an Azure Active Directory with native users or an Azure AD with federated users.</span></span> <span data-ttu-id="adaa5-139">客戶 2 代表包含已匯入使用者的可能解決方案；在此範例中，來自同盟 Azure Active Directory 且 ADFS 正與 Azure Active Directory 進行同步處理。</span><span class="sxs-lookup"><span data-stu-id="adaa5-139">Customer 2 represents a possible solution including imported users; in this example coming from a federated Azure Active Directory with ADFS being synchronized with Azure Active Directory.</span></span> <span data-ttu-id="adaa5-140">請務必了解使用 Azure AD 驗證存取資料庫的必要條件是裝載訂用帳戶要與 Azure AD 相關聯。</span><span class="sxs-lookup"><span data-stu-id="adaa5-140">It's important to understand that access to a database using Azure AD authentication requires that the hosting subscription is associated to the Azure AD.</span></span> <span data-ttu-id="adaa5-141">您必須使用相同的訂用帳戶來建立裝載 Azure SQL Database 或 SQL 資料倉儲的 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="adaa5-141">The same subscription must be used to create the SQL Server hosting the Azure SQL Database or SQL Data Warehouse.</span></span>

![訂用帳戶關聯性][2]

## <a name="administrator-structure"></a><span data-ttu-id="adaa5-143">系統管理員結構</span><span class="sxs-lookup"><span data-stu-id="adaa5-143">Administrator structure</span></span>
<span data-ttu-id="adaa5-144">使用 Azure AD 驗證時，SQL Database 伺服器會有兩個系統管理員帳戶：原始的 SQL Server 系統管理員和 Azure AD 系統管理員。</span><span class="sxs-lookup"><span data-stu-id="adaa5-144">When using Azure AD authentication, there are two Administrator accounts for the SQL Database server; the original SQL Server administrator and the Azure AD administrator.</span></span> <span data-ttu-id="adaa5-145">相同的概念適用於 SQL 資料倉儲。</span><span class="sxs-lookup"><span data-stu-id="adaa5-145">The same concepts apply to SQL Data Warehouse.</span></span> <span data-ttu-id="adaa5-146">只有以 Azure AD 帳戶為基礎的系統管理員可以在使用者資料庫中建立第一個 Azure AD 自主資料庫使用者。</span><span class="sxs-lookup"><span data-stu-id="adaa5-146">Only the administrator based on an Azure AD account can create the first Azure AD contained database user in a user database.</span></span> <span data-ttu-id="adaa5-147">Azure AD 系統管理員登入可以是 Azure AD 使用者或 Azure AD 群組。</span><span class="sxs-lookup"><span data-stu-id="adaa5-147">The Azure AD administrator login can be an Azure AD user or an Azure AD group.</span></span> <span data-ttu-id="adaa5-148">當系統管理員是群組帳戶時，它可以供任何群組成員使用，啟用 SQL Server 執行個體的多個 Azure AD 系統管理員。</span><span class="sxs-lookup"><span data-stu-id="adaa5-148">When the administrator is a group account, it can be used by any group member, enabling multiple Azure AD administrators for the SQL Server instance.</span></span> <span data-ttu-id="adaa5-149">以系統管理員的身分使用群組帳戶，可讓您集中新增和移除 Azure AD 中的群組成員，而不需要變更 SQL Database 中的使用者或權限，藉以增強管理性。</span><span class="sxs-lookup"><span data-stu-id="adaa5-149">Using group account as an administrator enhances manageability by allowing you to centrally add and remove group members in Azure AD without changing the users or permissions in SQL Database.</span></span> <span data-ttu-id="adaa5-150">一律只能設定一個 Azure AD 系統管理員 (使用者或群組)。</span><span class="sxs-lookup"><span data-stu-id="adaa5-150">Only one Azure AD administrator (a user or group) can be configured at any time.</span></span>

![系統管理員結構][3]

## <a name="permissions"></a><span data-ttu-id="adaa5-152">權限</span><span class="sxs-lookup"><span data-stu-id="adaa5-152">Permissions</span></span>
<span data-ttu-id="adaa5-153">若要建立新的使用者，您必須具有資料庫中的 `ALTER ANY USER` 權限。</span><span class="sxs-lookup"><span data-stu-id="adaa5-153">To create new users, you must have the `ALTER ANY USER` permission in the database.</span></span> <span data-ttu-id="adaa5-154">任何資料庫使用者皆可授與 `ALTER ANY USER` 權限。</span><span class="sxs-lookup"><span data-stu-id="adaa5-154">The `ALTER ANY USER` permission can be granted to any database user.</span></span> <span data-ttu-id="adaa5-155">`ALTER ANY USER` 權限的擁有者還包括伺服器系統管理員帳戶、具備資料庫之 `CONTROL ON DATABASE` 或 `ALTER ON DATABASE` 權限的資料庫使用者，以及 `db_owner` 資料庫角色的成員。</span><span class="sxs-lookup"><span data-stu-id="adaa5-155">The `ALTER ANY USER` permission is also held by the server administrator accounts, and database users with the `CONTROL ON DATABASE` or `ALTER ON DATABASE` permission for that database, and by members of the `db_owner` database role.</span></span>

<span data-ttu-id="adaa5-156">若要在 Azure SQL Database 或 SQL 資料倉儲中建立自主資料庫使用者，您必須使用 Azure AD 身分識別連線到資料庫。</span><span class="sxs-lookup"><span data-stu-id="adaa5-156">To create a contained database user in Azure SQL Database or SQL Data Warehouse, you must connect to the database using an Azure AD identity.</span></span> <span data-ttu-id="adaa5-157">若要建立第一個自主資料庫使用者，您必須使用 Azure AD 系統管理員 (資料庫的擁有者) 連接到資料庫。</span><span class="sxs-lookup"><span data-stu-id="adaa5-157">To create the first contained database user, you must connect to the database by using an Azure AD administrator (who is the owner of the database).</span></span> <span data-ttu-id="adaa5-158">如以下步驟 4 和 5 所示。</span><span class="sxs-lookup"><span data-stu-id="adaa5-158">This is demonstrated in steps 4 and 5 below.</span></span> <span data-ttu-id="adaa5-159">只有針對 Azure SQL Database 或 SQL 資料倉儲伺服器建立 Azure AD 系統管理員後，才可能進行任何 Azure AD 驗證。</span><span class="sxs-lookup"><span data-stu-id="adaa5-159">Any Azure AD authentication is only possible if the Azure AD admin was created for Azure SQL Database or SQL Data Warehouse server.</span></span> <span data-ttu-id="adaa5-160">如果已從伺服器移除 Azure Active Directory 系統管理員，則先前在 SQL Server 內建立的現有 Azure Active Directory 使用者便無法再使用其 Azure Active Directory 認證連線到資料庫。</span><span class="sxs-lookup"><span data-stu-id="adaa5-160">If the Azure Active Directory admin was removed from the server, existing Azure Active Directory users created previously inside SQL Server can no longer connect to the database using their Azure Active Directory credentials.</span></span>

## <a name="azure-ad-features-and-limitations"></a><span data-ttu-id="adaa5-161">Azure AD 功能和限制</span><span class="sxs-lookup"><span data-stu-id="adaa5-161">Azure AD features and limitations</span></span>
<span data-ttu-id="adaa5-162">下列 Azure AD 的成員可在 Azure SQL 伺服器或 SQL 資料倉儲中佈建：</span><span class="sxs-lookup"><span data-stu-id="adaa5-162">The following members of Azure AD can be provisioned in Azure SQL server or SQL Data Warehouse:</span></span>

* <span data-ttu-id="adaa5-163">原生成員：在受管理網域或客戶網域的 Azure AD 中建立的成員。</span><span class="sxs-lookup"><span data-stu-id="adaa5-163">Native members: A member created in Azure AD in the managed domain or in a customer domain.</span></span> <span data-ttu-id="adaa5-164">如需詳細資訊，請參閱 [將您自己的網域名稱新增至 Azure AD](../active-directory/active-directory-add-domain.md)。</span><span class="sxs-lookup"><span data-stu-id="adaa5-164">For more information, see [Add your own domain name to Azure AD](../active-directory/active-directory-add-domain.md).</span></span>
* <span data-ttu-id="adaa5-165">同盟網域成員：利用同盟網域在 Azure AD 中建立的成員。</span><span class="sxs-lookup"><span data-stu-id="adaa5-165">Federated domain members: A member created in Azure AD with a federated domain.</span></span> <span data-ttu-id="adaa5-166">如需詳細資訊，請參閱 [Microsoft Azure 現在支援 Windows Server Active Directory 的同盟](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/)。</span><span class="sxs-lookup"><span data-stu-id="adaa5-166">For more information, see [Microsoft Azure now supports federation with Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/).</span></span>
* <span data-ttu-id="adaa5-167">從其他 Azure AD 匯入，且為原生網域或同盟網域成員者。</span><span class="sxs-lookup"><span data-stu-id="adaa5-167">Imported members from other Azure AD's who are native or federated domain members.</span></span>
* <span data-ttu-id="adaa5-168">建立 Active Directory 群組作為安全性群組。</span><span class="sxs-lookup"><span data-stu-id="adaa5-168">Active Directory groups created as security groups.</span></span>

<span data-ttu-id="adaa5-169">不支援 Microsoft 帳戶 (例如 outlook.com、hotmail.com、live.com) 或其他來賓帳戶 (例如 gmail.com、yahoo.com)。</span><span class="sxs-lookup"><span data-stu-id="adaa5-169">Microsoft accounts (for example outlook.com, hotmail.com, live.com) or other guest accounts (for example gmail.com, yahoo.com) are not supported.</span></span> <span data-ttu-id="adaa5-170">如果您可以使用帳戶和密碼登入 [https://login.live.com](https://login.live.com) ，則您就能使用 Azure SQL Database 或 Azure SQL 資料倉儲的 Azure AD 驗證不支援的 Microsoft 帳戶。</span><span class="sxs-lookup"><span data-stu-id="adaa5-170">If you can log in to [https://login.live.com](https://login.live.com) using the account and password, then you are using a Microsoft account, which is not supported for Azure AD authentication for Azure SQL Database or Azure SQL Data Warehouse.</span></span>

## <a name="connecting-using-azure-ad-identities"></a><span data-ttu-id="adaa5-171">使用 Azure AD 身分識別連接</span><span class="sxs-lookup"><span data-stu-id="adaa5-171">Connecting using Azure AD identities</span></span>

<span data-ttu-id="adaa5-172">Azure Active Directory 驗證支援下列方法，使用 Azure AD 身分識別連接至資料庫：</span><span class="sxs-lookup"><span data-stu-id="adaa5-172">Azure Active Directory authentication supports the following methods of connecting to a database using Azure AD identities:</span></span>

* <span data-ttu-id="adaa5-173">使用整合式 Windows 驗證</span><span class="sxs-lookup"><span data-stu-id="adaa5-173">Using integrated Windows authentication</span></span>
* <span data-ttu-id="adaa5-174">使用 Azure AD 主體名稱和密碼</span><span class="sxs-lookup"><span data-stu-id="adaa5-174">Using an Azure AD principal name and a password</span></span>
* <span data-ttu-id="adaa5-175">使用應用程式權杖驗證</span><span class="sxs-lookup"><span data-stu-id="adaa5-175">Using Application token authentication</span></span>

### <a name="additional-considerations"></a><span data-ttu-id="adaa5-176">其他考量</span><span class="sxs-lookup"><span data-stu-id="adaa5-176">Additional considerations</span></span>

* <span data-ttu-id="adaa5-177">若要增強管理性，建議您以系統管理員身分佈建專用的 Azure AD 群組。</span><span class="sxs-lookup"><span data-stu-id="adaa5-177">To enhance manageability, we recommended you provision a dedicated Azure AD group as an administrator.</span></span>   
* <span data-ttu-id="adaa5-178">一個 Azure SQL 伺服器或 Azure SQL 資料倉儲一律只能設定一個 Azure AD 系統管理員 (使用者或群組)。</span><span class="sxs-lookup"><span data-stu-id="adaa5-178">Only one Azure AD administrator (a user or group) can be configured for an Azure SQL server or Azure SQL Data Warehouse at any time.</span></span>   
* <span data-ttu-id="adaa5-179">只有 SQL Server 的 Azure AD 系統管理員可以一開始就使用 Azure Active Directory 帳戶連接到 Azure SQL 伺服器或 Azure SQL 資料倉儲。</span><span class="sxs-lookup"><span data-stu-id="adaa5-179">Only an Azure AD administrator for SQL Server can initially connect to the Azure SQL server or Azure SQL Data Warehouse using an Azure Active Directory account.</span></span> <span data-ttu-id="adaa5-180">Active Directory 系統管理員可以設定後續的 Azure AD 資料庫使用者。</span><span class="sxs-lookup"><span data-stu-id="adaa5-180">The Active Directory administrator can configure subsequent Azure AD database users.</span></span>   
* <span data-ttu-id="adaa5-181">建議將連接逾時設定為 30 秒。</span><span class="sxs-lookup"><span data-stu-id="adaa5-181">We recommend setting the connection timeout to 30 seconds.</span></span>   
* <span data-ttu-id="adaa5-182">SQL Server 2016 Management Studio 和 SQL Server Data Tools for Visual Studio 2015 (版本 14.0.60311.1 (2016 年 4 月) 或更新版本) 支援 Azure Active Directory 驗證。</span><span class="sxs-lookup"><span data-stu-id="adaa5-182">SQL Server 2016 Management Studio and SQL Server Data Tools for Visual Studio 2015 (version 14.0.60311.1April 2016 or later) support Azure Active Directory authentication.</span></span> <span data-ttu-id="adaa5-183">(**.NET Framework Data Provider for SqlServer** 支援 Azure AD 驗證，最低版本 .NET Framework 4.6)。</span><span class="sxs-lookup"><span data-stu-id="adaa5-183">(Azure AD authentication is supported by the **.NET Framework Data Provider for SqlServer**; at least version .NET Framework 4.6).</span></span> <span data-ttu-id="adaa5-184">因此，這些工具和資料層應用程式 (DAC 和 .bacpac) 的最新版本可以使用 Azure AD 驗證。</span><span class="sxs-lookup"><span data-stu-id="adaa5-184">Therefore the newest versions of these tools and data-tier applications (DAC and .bacpac) can use Azure AD authentication.</span></span>   
* <span data-ttu-id="adaa5-185">[ODBC 13.1 版](https://www.microsoft.com/download/details.aspx?id=53339)支援 Azure Active Directory 驗證，不過，`bcp.exe` 無法使用 Azure Active Directory 驗證進行連線，因為它們使用較舊的 ODBC 提供者。</span><span class="sxs-lookup"><span data-stu-id="adaa5-185">[ODBC version 13.1](https://www.microsoft.com/download/details.aspx?id=53339) supports Azure Active Directory authentication however `bcp.exe` cannot connect using Azure Active Directory authentication because it uses an older ODBC provider.</span></span>   
* <span data-ttu-id="adaa5-186">`sqlcmd` 從 13.1 版 (可從 [下載中心](http://go.microsoft.com/fwlink/?LinkID=825643)取得) 開始即支援 Azure Active Directory 驗證。</span><span class="sxs-lookup"><span data-stu-id="adaa5-186">`sqlcmd` supports Azure Active Directory authentication beginning with version 13.1 available from the [Download Center](http://go.microsoft.com/fwlink/?LinkID=825643).</span></span>   
* <span data-ttu-id="adaa5-187">SQL Server Data Tools for Visual Studio 2015 至少需要 2016 年 4 月版本的 Data Tools (版本 14.0.60311.1)。</span><span class="sxs-lookup"><span data-stu-id="adaa5-187">SQL Server Data Tools for Visual Studio 2015 requires at least the April 2016 version of the Data Tools (version 14.0.60311.1).</span></span> <span data-ttu-id="adaa5-188">Azure AD 使用者目前不會顯示在 SSDT 物件總管中。</span><span class="sxs-lookup"><span data-stu-id="adaa5-188">Currently Azure AD users are not shown in SSDT Object Explorer.</span></span> <span data-ttu-id="adaa5-189">解決方法是在 [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx) 中檢視使用者。</span><span class="sxs-lookup"><span data-stu-id="adaa5-189">As a workaround, view the users in [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx).</span></span>   
* <span data-ttu-id="adaa5-190">[Microsoft JDBC Driver 6.0 for SQL Server](https://www.microsoft.com/download/details.aspx?id=11774) 支援 Azure AD 驗證。</span><span class="sxs-lookup"><span data-stu-id="adaa5-190">[Microsoft JDBC Driver 6.0 for SQL Server](https://www.microsoft.com/download/details.aspx?id=11774) supports Azure AD authentication.</span></span> <span data-ttu-id="adaa5-191">此外，請參閱 [設定連接屬性](https://msdn.microsoft.com/library/ms378988.aspx)。</span><span class="sxs-lookup"><span data-stu-id="adaa5-191">Also, see [Setting the Connection Properties](https://msdn.microsoft.com/library/ms378988.aspx).</span></span>   
* <span data-ttu-id="adaa5-192">PolyBase 無法使用 Azure AD 驗證進行驗證。</span><span class="sxs-lookup"><span data-stu-id="adaa5-192">PolyBase cannot authenticate by using Azure AD authentication.</span></span>   
* <span data-ttu-id="adaa5-193">Azure 入口網站的 [匯入資料庫] 和 [匯出資料庫] 刀鋒視窗支援 SQL Database 的 AD 驗證。</span><span class="sxs-lookup"><span data-stu-id="adaa5-193">Azure AD authentication is supported for SQL Database by the Azure portal **Import Database** and **Export Database** blades.</span></span> <span data-ttu-id="adaa5-194">PowerShell 命令也支援使用 Azure AD 驗證的匯入和匯出。</span><span class="sxs-lookup"><span data-stu-id="adaa5-194">Import and export using Azure AD authentication is also supported from the PowerShell command.</span></span>   
* <span data-ttu-id="adaa5-195">SQL Database 和 SQL 資料倉儲 (使用 CLI) 支援 Azure AD 驗證。</span><span class="sxs-lookup"><span data-stu-id="adaa5-195">Azure AD authentication is supported for SQL Database and SQL Data Warehouse by use CLI.</span></span> <span data-ttu-id="adaa5-196">如需詳細資訊，請參閱[使用 SQL Database 或 SQL 資料倉儲設定和管理 Azure Active Directory 驗證](sql-database-aad-authentication-configure.md)和 [SQL Server - az sql server](https://docs.microsoft.com/en-us/cli/azure/sql/server)。</span><span class="sxs-lookup"><span data-stu-id="adaa5-196">For more information, see [Configure and manage Azure Active Directory authentication with SQL Database or SQL Data Warehouse](sql-database-aad-authentication-configure.md) and [SQL Server - az sql server](https://docs.microsoft.com/en-us/cli/azure/sql/server).</span></span>

## <a name="next-steps"></a><span data-ttu-id="adaa5-197">後續步驟</span><span class="sxs-lookup"><span data-stu-id="adaa5-197">Next steps</span></span>
- <span data-ttu-id="adaa5-198">若要了解如何建立和填入 Azure AD，然後使用 Azure SQL Database 或 Azure SQL 資料倉儲來設定 Azure AD，請參閱[使用 SQL Database 或 SQL 資料倉儲設定和管理 Azure Active Directory 驗證](sql-database-aad-authentication-configure.md)。</span><span class="sxs-lookup"><span data-stu-id="adaa5-198">To learn how to create and populate Azure AD, and then configure Azure AD with Azure SQL Database or Azure SQL Data Warehouse, see [Configure and manage Azure Active Directory authentication with SQL Database or SQL Data Warehouse](sql-database-aad-authentication-configure.md).</span></span>
- <span data-ttu-id="adaa5-199">如需 SQL Database 中存取權和控制權的概觀，請參閱 [SQL Database 的存取權和控制權](sql-database-control-access.md)。</span><span class="sxs-lookup"><span data-stu-id="adaa5-199">For an overview of access and control in SQL Database, see [SQL Database access and control](sql-database-control-access.md).</span></span>
- <span data-ttu-id="adaa5-200">如需 SQL Database 中登入、使用者和資料庫角色的概觀，請參閱[登入、使用者和資料庫角色](sql-database-manage-logins.md)。</span><span class="sxs-lookup"><span data-stu-id="adaa5-200">For an overview of logins, users, and database roles in SQL Database, see [Logins, users, and database roles](sql-database-manage-logins.md).</span></span>
- <span data-ttu-id="adaa5-201">如需資料庫主體的詳細資訊，請參閱[主體](https://msdn.microsoft.com/library/ms181127.aspx)。</span><span class="sxs-lookup"><span data-stu-id="adaa5-201">For more information about database principals, see [Principals](https://msdn.microsoft.com/library/ms181127.aspx).</span></span>
- <span data-ttu-id="adaa5-202">如需資料庫角色的詳細資訊，請參閱[資料庫角色](https://msdn.microsoft.com/library/ms189121.aspx)。</span><span class="sxs-lookup"><span data-stu-id="adaa5-202">For more information about database roles, see [Database roles](https://msdn.microsoft.com/library/ms189121.aspx).</span></span>
- <span data-ttu-id="adaa5-203">如需 SQL Database 中防火牆規則的詳細資訊，請參閱 [SQL Database 防火牆規則](sql-database-firewall-configure.md)。</span><span class="sxs-lookup"><span data-stu-id="adaa5-203">For more information about firewall rules in SQL Database, see [SQL Database firewall rules](sql-database-firewall-configure.md).</span></span>

<!--Image references-->

[1]: ./media/sql-database-aad-authentication/1aad-auth-diagram.png
[2]: ./media/sql-database-aad-authentication/2subscription-relationship.png
[3]: ./media/sql-database-aad-authentication/3admin-structure.png
[4]: ./media/sql-database-aad-authentication/4select-subscription.png
[5]: ./media/sql-database-aad-authentication/5ad-settings-portal.png
[6]: ./media/sql-database-aad-authentication/6edit-directory-select.png
[7]: ./media/sql-database-aad-authentication/7edit-directory-confirm.png
[8]: ./media/sql-database-aad-authentication/8choose-ad.png
[9]: ./media/sql-database-aad-authentication/9ad-settings.png
[10]: ./media/sql-database-aad-authentication/10choose-admin.png
[11]: ./media/sql-database-aad-authentication/11connect-using-int-auth.png
[12]: ./media/sql-database-aad-authentication/12connect-using-pw-auth.png
[13]: ./media/sql-database-aad-authentication/13connect-to-db.png

