---
title: "Azure SQL Database 自動、異地備援備份 | Microsoft Docs"
description: "SQL Database 每隔幾鐘會自動建立一個本機資料庫備份，並使用 Azure 讀取權限異地備援儲存體來進行異地備援。"
services: sql-database
documentationcenter: 
author: CarlRabeler
manager: jhubbard
editor: 
ms.assetid: 3ee3d49d-16fa-47cf-a3ab-7b22aa491a8d
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 07/05/2017
ms.author: carlrab
ms.openlocfilehash: 88ee5b5c4a57b67190f3da2ebc8aed0964b804d5
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/18/2017
---
# <a name="learn-about-automatic-sql-database-backups"></a><span data-ttu-id="e7bf7-103">了解自動 SQL Database 備份</span><span class="sxs-lookup"><span data-stu-id="e7bf7-103">Learn about automatic SQL Database backups</span></span>

<span data-ttu-id="e7bf7-104">SQL Database 會自動建立資料庫備份，並使用 Azure 讀取權限異地備援儲存體 (RA-GRS) 來提供異地備援。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-104">SQL Database automatically creates database backups and uses Azure read-access geo-redundant storage (RA-GRS) to provide geo-redundancy.</span></span> <span data-ttu-id="e7bf7-105">這些備份是自動建立的，且不需額外付費。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-105">These backups are created automatically and at no additional charge.</span></span> <span data-ttu-id="e7bf7-106">您不需要執行任何動作來建立備份。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-106">You don't need to do anything to make them happen.</span></span> <span data-ttu-id="e7bf7-107">資料庫備份可保護資料免於意外損毀或刪除，是商務持續性和災害復原策略中不可或缺的一部分。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-107">Database backups are an essential part of any business continuity and disaster recovery strategy because they protect your data from accidental corruption or deletion.</span></span> <span data-ttu-id="e7bf7-108">如果您想要在自己的儲存體容器中保留備份，您可以設定長期的備份保留原則。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-108">If you want to keep backups in your own storage container you can configure a long-term backup retention policy.</span></span> <span data-ttu-id="e7bf7-109">如需詳細資訊，請參閱[長期保存](sql-database-long-term-retention.md)。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-109">For more information, see [Long-term retention](sql-database-long-term-retention.md).</span></span>

## <a name="what-is-a-sql-database-backup"></a><span data-ttu-id="e7bf7-110">什麼是 SQL Database 備份？</span><span class="sxs-lookup"><span data-stu-id="e7bf7-110">What is a SQL Database backup?</span></span>

<span data-ttu-id="e7bf7-111">SQL Database 使用 SQL Server 技術來建立[完整](https://msdn.microsoft.com/library/ms186289.aspx)、[差異](https://msdn.microsoft.com/library/ms175526.aspx)，及[交易記錄](https://msdn.microsoft.com/library/ms191429.aspx)備份。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-111">SQL Database uses SQL Server technology to create [full](https://msdn.microsoft.com/library/ms186289.aspx), [differential](https://msdn.microsoft.com/library/ms175526.aspx), and [transaction log](https://msdn.microsoft.com/library/ms191429.aspx) backups.</span></span> <span data-ttu-id="e7bf7-112">交易記錄備份根據效能層級和資料庫活動量的頻率通常每隔 5-10 分鐘會進行一次。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-112">The transaction log backups generally happen every 5 - 10 minutes, with the frequency based on the performance level and amount of database activity.</span></span> <span data-ttu-id="e7bf7-113">具有完整和差異備份的交易記錄備份可讓您將資料庫還原到特定的時間點，至裝載資料庫相同的伺服器。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-113">Transaction log backups, with full and differential backups, allow you to restore a database to a specific point-in-time to the same server that hosts the database.</span></span> <span data-ttu-id="e7bf7-114">在您還原資料庫時，服務會判斷需要還原的完整、差異及交易記錄備份。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-114">When you restore a database, the service figures out which full, differential, and transaction log backups need to be restored.</span></span>


<span data-ttu-id="e7bf7-115">您可以使用這些備份︰</span><span class="sxs-lookup"><span data-stu-id="e7bf7-115">You can use these backups to:</span></span>

* <span data-ttu-id="e7bf7-116">將資料庫還原至保留期限內的某一個時間點。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-116">Restore a database to a point-in-time within the retention period.</span></span> <span data-ttu-id="e7bf7-117">這項作業將會在與原始資料庫相同的伺服器中建立新的資料庫。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-117">This operation will create a new database in the same server as the original database.</span></span>
* <span data-ttu-id="e7bf7-118">將已刪除的資料庫還原至其被刪除的時間，或保留期限內的任何時間。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-118">Restore a deleted database to the time it was deleted or any time within the retention period.</span></span> <span data-ttu-id="e7bf7-119">已刪除的資料庫只能在當中已建立原始資料庫的相同伺服器中還原。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-119">The deleted database can only be restored in the same server where the original database was created.</span></span>
* <span data-ttu-id="e7bf7-120">將資料庫還原到另一個地理區域。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-120">Restore a database to another geographical region.</span></span> <span data-ttu-id="e7bf7-121">這可讓您在無法存取您的伺服器和資料庫時，從地理災害中復原。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-121">This allows you to recover from a geographic disaster when you cannot access your server and database.</span></span> <span data-ttu-id="e7bf7-122">在世界各地任何現有的伺服器中建立新的資料庫。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-122">It creates a new database in any existing server anywhere in the world.</span></span> 
* <span data-ttu-id="e7bf7-123">從 Azure 復原服務保存庫中儲存的特定備份中還原資料庫。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-123">Restore a database from a specific backup stored in your Azure Recovery Services vault.</span></span> <span data-ttu-id="e7bf7-124">這可讓您還原舊版的資料庫來符合規範要求，或執行舊版的應用程式。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-124">This allows you to restore an old version of the database to satisfy a compliance request or to run an old version of the application.</span></span> <span data-ttu-id="e7bf7-125">請參閱[長期保留](sql-database-long-term-retention.md)。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-125">See [Long-term retention](sql-database-long-term-retention.md).</span></span>
* <span data-ttu-id="e7bf7-126">若要執行還原，請參閱[從備份還原資料庫](sql-database-recovery-using-backups.md)。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-126">To perform a restore, see [restore database from backups](sql-database-recovery-using-backups.md).</span></span>

> [!NOTE]
> <span data-ttu-id="e7bf7-127">在 Azure 儲存體中，「複寫」一詞指的是將檔案從某個位置複製到另一個位置。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-127">In Azure storage, the term *replication* refers to copying files from one location to another.</span></span> <span data-ttu-id="e7bf7-128">SQL 的「資料庫複寫」  指的是保持多個次要資料庫與主要資料庫同步。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-128">SQL's *database replication* refers to keeping to multiple secondary databases synchronized with a primary database.</span></span> 
> 

## <a name="how-much-backup-storage-is-included-at-no-cost"></a><span data-ttu-id="e7bf7-129">在免費情況下包含多少備份儲存體？</span><span class="sxs-lookup"><span data-stu-id="e7bf7-129">How much backup storage is included at no cost?</span></span>
<span data-ttu-id="e7bf7-130">SQL Database 提供高達 200% 的最大可佈建資料庫儲存體作為備份儲存體，且不須支付額外費用。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-130">SQL Database provides up to 200% of your maximum provisioned database storage as backup storage at no additional cost.</span></span> <span data-ttu-id="e7bf7-131">例如，如果您擁有可佈建 DB 大小為 250 GB 的標準 DB 執行個體，您就能免費獲得 500 GB 的備份儲存體。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-131">For example, if you have a Standard DB instance with a provisioned DB size of 250 GB, you have 500 GB of backup storage at no additional charge.</span></span> <span data-ttu-id="e7bf7-132">如果您的資料庫超過所提供的備份儲存體，您可以連絡 Azure 支援人員來選擇縮短保留期限。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-132">If your database exceeds the provided backup storage, you can choose to reduce the retention period by contacting Azure Support.</span></span> <span data-ttu-id="e7bf7-133">另一個選項是付費購買額外的備份儲存體，按讀取權限異地備援儲存體 (RA-GRS) 標準費率計費。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-133">Another option is to pay for extra backup storage that is billed at the standard Read-Access Geographically Redundant Storage (RA-GRS) rate.</span></span> 

## <a name="how-often-do-backups-happen"></a><span data-ttu-id="e7bf7-134">備份頻率是？</span><span class="sxs-lookup"><span data-stu-id="e7bf7-134">How often do backups happen?</span></span>
<span data-ttu-id="e7bf7-135">每週進行一次完整備份，通常每幾個小時進行一次差異資料庫備份，以及通常每隔 5 - 10 分鐘進行一次交易記錄備份。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-135">Full database backups happen weekly, differential database backups generally happen every few hours, and transaction log backups generally happen every 5 - 10 minutes.</span></span> <span data-ttu-id="e7bf7-136">建立資料庫之後，會立即排程第一次完整備份。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-136">The first full backup is scheduled immediately after a database is created.</span></span> <span data-ttu-id="e7bf7-137">通常會在 30 分鐘內完成，但如果資料庫很大，則時間可能更久。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-137">It usually completes within 30 minutes, but it can take longer when the database is of a significant size.</span></span> <span data-ttu-id="e7bf7-138">比方說，在還原的資料庫或資料庫複本上，初始備份可能需要較長的時間。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-138">For example, the initial backup can take longer on a restored database or a database copy.</span></span> <span data-ttu-id="e7bf7-139">第一次完整備份之後，將會自動排程進一步的備份，並在背景中以無訊息方式管理。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-139">After the first full backup, all further backups are scheduled automatically and managed silently in the background.</span></span> <span data-ttu-id="e7bf7-140">資料庫備份的確切時間，依 SQL Database 服務整體系統工作負載維持平衡而決定。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-140">The exact timing of all database backups is determined by the SQL Database service as it balances the overall system workload.</span></span> 

<span data-ttu-id="e7bf7-141">備份儲存體異地複寫是根據 Azure 儲存體複寫排程進行。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-141">The backup storage geo-replication occurs based on the Azure Storage replication schedule.</span></span>

## <a name="how-long-do-you-keep-my-backups"></a><span data-ttu-id="e7bf7-142">您會保留我的備份多久？</span><span class="sxs-lookup"><span data-stu-id="e7bf7-142">How long do you keep my backups?</span></span>
<span data-ttu-id="e7bf7-143">每個 SQL Database 備份都有一個保留期限，該期限是以資料庫的[服務層](sql-database-service-tiers.md)為依據。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-143">Each SQL Database backup has a retention period that is based on the [service-tier](sql-database-service-tiers.md) of the database.</span></span> <span data-ttu-id="e7bf7-144">資料庫保留期限如下：</span><span class="sxs-lookup"><span data-stu-id="e7bf7-144">The retention period for a database in the:</span></span>


* <span data-ttu-id="e7bf7-145">基本服務層為 7 天。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-145">Basic service tier is 7 days.</span></span>
* <span data-ttu-id="e7bf7-146">標準服務層為 35 天。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-146">Standard service tier is 35 days.</span></span>
* <span data-ttu-id="e7bf7-147">進階服務層為 35 天。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-147">Premium service tier is 35 days.</span></span>

<span data-ttu-id="e7bf7-148">如果您將資料庫從「標準」或「進階」服務層降級到「基本」服務層，備份就會保存 7 天。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-148">If you downgrade your database from the Standard or Premium service tiers to Basic, the backups are saved for seven days.</span></span> <span data-ttu-id="e7bf7-149">所有超過 7 天的現有備份都無法再使用。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-149">All existing backups older than seven days are no longer available.</span></span> 

<span data-ttu-id="e7bf7-150">如果您將資料庫從「基本」服務層升級到「標準」或「進階」服務層，SQL Database 就會將現有備份自其建立日期算起保存 35 天。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-150">If you upgrade your database from the Basic service tier to Standard or Premium, SQL Database keeps existing backups until they are 35 days old.</span></span> <span data-ttu-id="e7bf7-151">它也會將新的備份自其建立日期算起保存 35 天。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-151">It keeps new backups as they occur for 35 days.</span></span>

<span data-ttu-id="e7bf7-152">如果您刪除資料庫，SQL Database 會以和保存線上資料庫備份的相同方式保存備份。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-152">If you delete a database, SQL Database keeps the backups in the same way it would for an online database.</span></span> <span data-ttu-id="e7bf7-153">例如，假設您刪除保存期限為 7 天的「基本」資料庫。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-153">For example, suppose you delete a Basic database that has a retention period of seven days.</span></span> <span data-ttu-id="e7bf7-154">已保存 4 天的備份會再保存 3 天。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-154">A backup that is four days old is saved for three more days.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e7bf7-155">如果您刪除裝載 SQL Database 的 Azure SQL Server，所有屬於該伺服器的資料庫也會一併刪除且無法復原。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-155">If you delete the Azure SQL server that hosts SQL Databases, all databases that belong to the server are also deleted and cannot be recovered.</span></span> <span data-ttu-id="e7bf7-156">您無法還原已刪除的伺服器。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-156">You cannot restore a deleted server.</span></span>
> 

## <a name="how-to-extend-the-backup-retention-period"></a><span data-ttu-id="e7bf7-157">如何延長備份保留期限？</span><span class="sxs-lookup"><span data-stu-id="e7bf7-157">How to extend the backup retention period?</span></span>
<span data-ttu-id="e7bf7-158">如果您的應用程式需要較長時間可進行備份，您可以延長內建的保留期限，方法為設定個別資料庫的長期備份保留原則 (LTR 原則)。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-158">If your application requires that the backups are available for longer period of time you can extend the built-in retention period by configuring the Long-term backup retention policy for individual databases (LTR policy).</span></span> <span data-ttu-id="e7bf7-159">這可讓您將保留期限延長 35 天至多達 10 年。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-159">This allows you to extend the built-it retention period from 35 days to up to 10 years.</span></span> <span data-ttu-id="e7bf7-160">如需詳細資訊，請參閱[長期保存](sql-database-long-term-retention.md)。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-160">For more information, see [Long-term retention](sql-database-long-term-retention.md).</span></span>

<span data-ttu-id="e7bf7-161">一旦您使用 Azure 入口網站或 API 將 LTR 原則新增至資料庫後，每週的完整資料庫備份將會自動複製到您自己的 Azure 備份服務保存庫。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-161">Once you add the LTR policy to a database using Azure portal or API, the weekly full database backups will be automatically copied to your own Azure Backup Service Vault.</span></span> <span data-ttu-id="e7bf7-162">如果您的資料庫是使用 TDE 加密，則備份會自動加密靜止。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-162">If your database is encrypted with TDE the backups are automatically encrypted at rest.</span></span>  <span data-ttu-id="e7bf7-163">服務保存庫將自動刪除您過期的備份，根據其時間戳記和 LTR 原則。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-163">The Services Vault will automatically delete your expired backups based on their timestamp and the LTR policy.</span></span>  <span data-ttu-id="e7bf7-164">因此您不需要管理備份排程或擔心清理舊檔案的工作。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-164">So you don't need to manage the backup schedule or worry about the cleanup of the old files.</span></span> <span data-ttu-id="e7bf7-165">還原 API 支援保存庫中儲存的備份，只要保存庫在與您的 SQL Database 相同的訂用帳戶中。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-165">The restore API supports backups stored in the vault as long as the vault is in the same subscription as your SQL database.</span></span> <span data-ttu-id="e7bf7-166">您可使用 Azure 入口網站或 PowerShell 存取這些備份。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-166">You can use the Azure portal or PowerShell to access these backups.</span></span>

> [!TIP]
> <span data-ttu-id="e7bf7-167">如需作法指南，請參閱[設定 Azure SQL Database 長期備份保留並從中還原](sql-database-long-term-backup-retention-configure.md)</span><span class="sxs-lookup"><span data-stu-id="e7bf7-167">For a How-to guide, see [Configure and restore from Azure SQL Database long-term backup retention](sql-database-long-term-backup-retention-configure.md)</span></span>
>

## <a name="are-backups-encrypted"></a><span data-ttu-id="e7bf7-168">備份經過加密？</span><span class="sxs-lookup"><span data-stu-id="e7bf7-168">Are backups encrypted?</span></span>

<span data-ttu-id="e7bf7-169">Azure SQL 資料庫啟用 TDE 時，也會加密備份。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-169">When TDE is enabled for an Azure SQL database, backups are also encrypted.</span></span> <span data-ttu-id="e7bf7-170">所有新的 Azure SQL Database 預設都會設定為啟用 TDE。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-170">All new Azure SQL databases are configured with TDE enabled by default.</span></span> <span data-ttu-id="e7bf7-171">如需 TDE 的詳細資訊，請參閱 [Azure SQL Database 的透明資料加密](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-with-azure-sql-database)。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-171">For more information on TDE, see [Transparent Data Encryption with Azure SQL Database](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-with-azure-sql-database).</span></span>

## <a name="next-steps"></a><span data-ttu-id="e7bf7-172">後續步驟</span><span class="sxs-lookup"><span data-stu-id="e7bf7-172">Next steps</span></span>

- <span data-ttu-id="e7bf7-173">資料庫備份可保護資料免於意外損毀或刪除，是商務持續性和災害復原策略中不可或缺的一部分。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-173">Database backups are an essential part of any business continuity and disaster recovery strategy because they protect your data from accidental corruption or deletion.</span></span> <span data-ttu-id="e7bf7-174">若要深入了解其他 Azure SQL Database 業務持續性解決方案，請參閱[業務持續性概觀](sql-database-business-continuity.md)。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-174">To learn about the other Azure SQL Database business continuity solutions, see [Business continuity overview](sql-database-business-continuity.md).</span></span>
- <span data-ttu-id="e7bf7-175">若要使用 Azure 入口網站還原至某個時間點，請參閱[使用 Azure 入口網站將資料庫還原至時間點](sql-database-recovery-using-backups.md)。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-175">To restore to a point in time using the Azure portal, see [restore database to a point in time using the Azure portal](sql-database-recovery-using-backups.md).</span></span>
- <span data-ttu-id="e7bf7-176">若要使用 PowerShell 還原至某個時間點，請參閱[使用 PowerShell 將資料庫還原至時間點](scripts/sql-database-restore-database-powershell.md)。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-176">To restore to a point in time using PowerShell, see [restore database to a point in time using PowerShell](scripts/sql-database-restore-database-powershell.md).</span></span>
- <span data-ttu-id="e7bf7-177">若要使用 Azure 入口網站在「Azure 復原服務」保存庫中設定、管理自動備份的長期保留及從該保留還原，請參閱[使用 Azure 入口網站來管理長期備份保留 (英文)](sql-database-long-term-backup-retention-configure.md)。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-177">To configure, manage, and restore from long-term retention of automated backups in an Azure Recovery Services vault using the Azure portal, see [Manage long-term backup retention using the Azure portal](sql-database-long-term-backup-retention-configure.md).</span></span>
- <span data-ttu-id="e7bf7-178">若要使用 PowerShell 在「Azure 復原服務」保存庫中設定、管理自動備份的長期保留及從該保留還原，請參閱[使用 PowerShell 來管理長期備份保留 (英文)](sql-database-long-term-backup-retention-configure.md)。</span><span class="sxs-lookup"><span data-stu-id="e7bf7-178">To configure, manage, and restore from long-term retention of automated backups in an Azure Recovery Services vault using PowerShell, see [Manage long-term backup retention using PowerShell](sql-database-long-term-backup-retention-configure.md).</span></span>
