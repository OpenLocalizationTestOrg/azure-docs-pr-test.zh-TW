---
title: "aaaAzure SQL Database 的自動，異地備援備份 |Microsoft 文件"
description: "SQL Database 每隔幾鐘會自動建立一個本機資料庫備份，並使用 Azure 讀取權限異地備援儲存體來進行異地備援。"
services: sql-database
documentationcenter: 
author: CarlRabeler
manager: jhubbard
editor: 
ms.assetid: 3ee3d49d-16fa-47cf-a3ab-7b22aa491a8d
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 07/05/2017
ms.author: carlrab
ms.openlocfilehash: 8aff5356e8142707dd7cd2533a4aa5ea8fec866d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="learn-about-automatic-sql-database-backups"></a><span data-ttu-id="0f869-103">了解自動 SQL Database 備份</span><span class="sxs-lookup"><span data-stu-id="0f869-103">Learn about automatic SQL Database backups</span></span>

<span data-ttu-id="0f869-104">SQL Database 會自動建立資料庫備份，並使用 Azure 讀取存取異地備援儲存體 (RA-GRS) tooprovide 異地備援。</span><span class="sxs-lookup"><span data-stu-id="0f869-104">SQL Database automatically creates database backups and uses Azure read-access geo-redundant storage (RA-GRS) tooprovide geo-redundancy.</span></span> <span data-ttu-id="0f869-105">這些備份是自動建立的，且不需額外付費。</span><span class="sxs-lookup"><span data-stu-id="0f869-105">These backups are created automatically and at no additional charge.</span></span> <span data-ttu-id="0f869-106">您不需要 toodo 任何項目 toomake 它們就會發生的情況。</span><span class="sxs-lookup"><span data-stu-id="0f869-106">You don't need toodo anything toomake them happen.</span></span> <span data-ttu-id="0f869-107">資料庫備份可保護資料免於意外損毀或刪除，是商務持續性和災害復原策略中不可或缺的一部分。</span><span class="sxs-lookup"><span data-stu-id="0f869-107">Database backups are an essential part of any business continuity and disaster recovery strategy because they protect your data from accidental corruption or deletion.</span></span> <span data-ttu-id="0f869-108">如果您想 tookeep 備份您的儲存體容器中，您可以設定長期的備份保留原則。</span><span class="sxs-lookup"><span data-stu-id="0f869-108">If you want tookeep backups in your own storage container you can configure a long-term backup retention policy.</span></span> <span data-ttu-id="0f869-109">如需詳細資訊，請參閱[長期保存](sql-database-long-term-retention.md)。</span><span class="sxs-lookup"><span data-stu-id="0f869-109">For more information, see [Long-term retention](sql-database-long-term-retention.md).</span></span>

## <a name="what-is-a-sql-database-backup"></a><span data-ttu-id="0f869-110">什麼是 SQL Database 備份？</span><span class="sxs-lookup"><span data-stu-id="0f869-110">What is a SQL Database backup?</span></span>

<span data-ttu-id="0f869-111">SQL Database 會使用 SQL Server 技術 toocreate[完整](https://msdn.microsoft.com/library/ms186289.aspx)，[差異](https://msdn.microsoft.com/library/ms175526.aspx)，和[交易記錄檔](https://msdn.microsoft.com/library/ms191429.aspx)備份。</span><span class="sxs-lookup"><span data-stu-id="0f869-111">SQL Database uses SQL Server technology toocreate [full](https://msdn.microsoft.com/library/ms186289.aspx), [differential](https://msdn.microsoft.com/library/ms175526.aspx), and [transaction log](https://msdn.microsoft.com/library/ms191429.aspx) backups.</span></span> <span data-ttu-id="0f869-112">hello 交易記錄備份通常會每隔 5-10 分鐘，以根據 hello 效能層級和資料庫活動量的 hello 頻率發生問題。</span><span class="sxs-lookup"><span data-stu-id="0f869-112">hello transaction log backups generally happen every 5 - 10 minutes, with hello frequency based on hello performance level and amount of database activity.</span></span> <span data-ttu-id="0f869-113">交易記錄備份，使用完整和差異備份，可讓您 toorestore 資料庫 tooa 特定時間點 toohello 裝載 hello 資料庫的同一部伺服器。</span><span class="sxs-lookup"><span data-stu-id="0f869-113">Transaction log backups, with full and differential backups, allow you toorestore a database tooa specific point-in-time toohello same server that hosts hello database.</span></span> <span data-ttu-id="0f869-114">當您還原資料庫時，hello 服務的完整、 差異及交易記錄備份需要還原 toobe 的數字。</span><span class="sxs-lookup"><span data-stu-id="0f869-114">When you restore a database, hello service figures out which full, differential, and transaction log backups need toobe restored.</span></span>


<span data-ttu-id="0f869-115">您可以使用這些備份︰</span><span class="sxs-lookup"><span data-stu-id="0f869-115">You can use these backups to:</span></span>

* <span data-ttu-id="0f869-116">還原資料庫 tooa 在時間點 hello 保留期限內。</span><span class="sxs-lookup"><span data-stu-id="0f869-116">Restore a database tooa point-in-time within hello retention period.</span></span> <span data-ttu-id="0f869-117">這項作業會建立新的資料庫在 hello 與 hello 原始資料庫相同的伺服器。</span><span class="sxs-lookup"><span data-stu-id="0f869-117">This operation will create a new database in hello same server as hello original database.</span></span>
* <span data-ttu-id="0f869-118">還原已刪除的資料庫 toohello 時間或 hello 保留期限內的任何時間。</span><span class="sxs-lookup"><span data-stu-id="0f869-118">Restore a deleted database toohello time it was deleted or any time within hello retention period.</span></span> <span data-ttu-id="0f869-119">hello 刪除資料庫只能還原在 hello hello 原始資料庫建立所在的同一部伺服器。</span><span class="sxs-lookup"><span data-stu-id="0f869-119">hello deleted database can only be restored in hello same server where hello original database was created.</span></span>
* <span data-ttu-id="0f869-120">還原資料庫 tooanother 地理區域。</span><span class="sxs-lookup"><span data-stu-id="0f869-120">Restore a database tooanother geographical region.</span></span> <span data-ttu-id="0f869-121">這可讓您從地理災害 toorecover 時您無法存取您的伺服器和資料庫。</span><span class="sxs-lookup"><span data-stu-id="0f869-121">This allows you toorecover from a geographic disaster when you cannot access your server and database.</span></span> <span data-ttu-id="0f869-122">Hello 世界各地的任何現有伺服器建立新的資料庫。</span><span class="sxs-lookup"><span data-stu-id="0f869-122">It creates a new database in any existing server anywhere in hello world.</span></span> 
* <span data-ttu-id="0f869-123">從 Azure 復原服務保存庫中儲存的特定備份中還原資料庫。</span><span class="sxs-lookup"><span data-stu-id="0f869-123">Restore a database from a specific backup stored in your Azure Recovery Services vault.</span></span> <span data-ttu-id="0f869-124">這可讓您 toorestore 較舊版本的 hello 資料庫 toosatisfy 規範要求或 toorun hello 應用程式的舊版本。</span><span class="sxs-lookup"><span data-stu-id="0f869-124">This allows you toorestore an old version of hello database toosatisfy a compliance request or toorun an old version of hello application.</span></span> <span data-ttu-id="0f869-125">請參閱[長期保留](sql-database-long-term-retention.md)。</span><span class="sxs-lookup"><span data-stu-id="0f869-125">See [Long-term retention](sql-database-long-term-retention.md).</span></span>
* <span data-ttu-id="0f869-126">tooperform 還原，請參閱[從備份還原資料庫](sql-database-recovery-using-backups.md)。</span><span class="sxs-lookup"><span data-stu-id="0f869-126">tooperform a restore, see [restore database from backups](sql-database-recovery-using-backups.md).</span></span>

> [!NOTE]
> <span data-ttu-id="0f869-127">在 Azure 儲存體，hello 詞彙*複寫*參考從一個位置 tooanother toocopying 檔案。</span><span class="sxs-lookup"><span data-stu-id="0f869-127">In Azure storage, hello term *replication* refers toocopying files from one location tooanother.</span></span> <span data-ttu-id="0f869-128">SQL 的*資料庫複寫*參考 tookeeping toomultiple 次要資料庫與主要資料庫同步處理。</span><span class="sxs-lookup"><span data-stu-id="0f869-128">SQL's *database replication* refers tookeeping toomultiple secondary databases synchronized with a primary database.</span></span> 
> 

## <a name="how-much-backup-storage-is-included-at-no-cost"></a><span data-ttu-id="0f869-129">在免費情況下包含多少備份儲存體？</span><span class="sxs-lookup"><span data-stu-id="0f869-129">How much backup storage is included at no cost?</span></span>
<span data-ttu-id="0f869-130">SQL Database 提供最大佈建的資料庫儲存體 too200%做為備份儲存體不需要額外成本。</span><span class="sxs-lookup"><span data-stu-id="0f869-130">SQL Database provides up too200% of your maximum provisioned database storage as backup storage at no additional cost.</span></span> <span data-ttu-id="0f869-131">例如，如果您擁有可佈建 DB 大小為 250 GB 的標準 DB 執行個體，您就能免費獲得 500 GB 的備份儲存體。</span><span class="sxs-lookup"><span data-stu-id="0f869-131">For example, if you have a Standard DB instance with a provisioned DB size of 250 GB, you have 500 GB of backup storage at no additional charge.</span></span> <span data-ttu-id="0f869-132">如果您的資料庫超過 hello 提供備份儲存體，您可以透過連絡 Azure 支援人員選擇 tooreduce hello 保留期限。</span><span class="sxs-lookup"><span data-stu-id="0f869-132">If your database exceeds hello provided backup storage, you can choose tooreduce hello retention period by contacting Azure Support.</span></span> <span data-ttu-id="0f869-133">另一個選項是 toopay 計費費率 hello 標準讀取權限地理備援儲存體 (RA-GRS) 的額外備份存放區。</span><span class="sxs-lookup"><span data-stu-id="0f869-133">Another option is toopay for extra backup storage that is billed at hello standard Read-Access Geographically Redundant Storage (RA-GRS) rate.</span></span> 

## <a name="how-often-do-backups-happen"></a><span data-ttu-id="0f869-134">備份頻率是？</span><span class="sxs-lookup"><span data-stu-id="0f869-134">How often do backups happen?</span></span>
<span data-ttu-id="0f869-135">每週進行一次完整備份，通常每幾個小時進行一次差異資料庫備份，以及通常每隔 5 - 10 分鐘進行一次交易記錄備份。</span><span class="sxs-lookup"><span data-stu-id="0f869-135">Full database backups happen weekly, differential database backups generally happen every few hours, and transaction log backups generally happen every 5 - 10 minutes.</span></span> <span data-ttu-id="0f869-136">建立資料庫之後，立即排定 hello 的第一個完整備份。</span><span class="sxs-lookup"><span data-stu-id="0f869-136">hello first full backup is scheduled immediately after a database is created.</span></span> <span data-ttu-id="0f869-137">30 分鐘內，通常完成，但極大的 hello 資料庫時可能需要較長。</span><span class="sxs-lookup"><span data-stu-id="0f869-137">It usually completes within 30 minutes, but it can take longer when hello database is of a significant size.</span></span> <span data-ttu-id="0f869-138">比方說，hello 初始備份可能需要較長，已還原的資料庫或資料庫複本上。</span><span class="sxs-lookup"><span data-stu-id="0f869-138">For example, hello initial backup can take longer on a restored database or a database copy.</span></span> <span data-ttu-id="0f869-139">Hello 第一個完整備份之後，所有進一步的備份均已排程自動並 hello 背景中以無訊息方式管理。</span><span class="sxs-lookup"><span data-stu-id="0f869-139">After hello first full backup, all further backups are scheduled automatically and managed silently in hello background.</span></span> <span data-ttu-id="0f869-140">hello 確切的時間，所有的資料庫備份的由 hello SQL Database 服務，因為它平衡 hello 整體系統工作負載。</span><span class="sxs-lookup"><span data-stu-id="0f869-140">hello exact timing of all database backups is determined by hello SQL Database service as it balances hello overall system workload.</span></span> 

<span data-ttu-id="0f869-141">hello 備份儲存體地理複寫是根據 hello Azure 儲存體複寫排程。</span><span class="sxs-lookup"><span data-stu-id="0f869-141">hello backup storage geo-replication occurs based on hello Azure Storage replication schedule.</span></span>

## <a name="how-long-do-you-keep-my-backups"></a><span data-ttu-id="0f869-142">您會保留我的備份多久？</span><span class="sxs-lookup"><span data-stu-id="0f869-142">How long do you keep my backups?</span></span>
<span data-ttu-id="0f869-143">每個 SQL Database 備份具有保留期間，取決於 hello[服務層](sql-database-service-tiers.md)的 hello 資料庫。</span><span class="sxs-lookup"><span data-stu-id="0f869-143">Each SQL Database backup has a retention period that is based on hello [service-tier](sql-database-service-tiers.md) of hello database.</span></span> <span data-ttu-id="0f869-144">資料庫中的 hello 保留期限:</span><span class="sxs-lookup"><span data-stu-id="0f869-144">hello retention period for a database in the:</span></span>


* <span data-ttu-id="0f869-145">基本服務層為 7 天。</span><span class="sxs-lookup"><span data-stu-id="0f869-145">Basic service tier is 7 days.</span></span>
* <span data-ttu-id="0f869-146">標準服務層為 35 天。</span><span class="sxs-lookup"><span data-stu-id="0f869-146">Standard service tier is 35 days.</span></span>
* <span data-ttu-id="0f869-147">進階服務層為 35 天。</span><span class="sxs-lookup"><span data-stu-id="0f869-147">Premium service tier is 35 days.</span></span>

<span data-ttu-id="0f869-148">如果您降級 hello Standard 或 Premium 服務層 tooBasic 資料庫之後，hello 備份會儲存七天。</span><span class="sxs-lookup"><span data-stu-id="0f869-148">If you downgrade your database from hello Standard or Premium service tiers tooBasic, hello backups are saved for seven days.</span></span> <span data-ttu-id="0f869-149">所有超過 7 天的現有備份都無法再使用。</span><span class="sxs-lookup"><span data-stu-id="0f869-149">All existing backups older than seven days are no longer available.</span></span> 

<span data-ttu-id="0f869-150">如果您是從 hello 基本服務層 tooStandard 或 Premium 升級您的資料庫，SQL Database 會保留現有的備份前 35 天。</span><span class="sxs-lookup"><span data-stu-id="0f869-150">If you upgrade your database from hello Basic service tier tooStandard or Premium, SQL Database keeps existing backups until they are 35 days old.</span></span> <span data-ttu-id="0f869-151">它也會將新的備份自其建立日期算起保存 35 天。</span><span class="sxs-lookup"><span data-stu-id="0f869-151">It keeps new backups as they occur for 35 days.</span></span>

<span data-ttu-id="0f869-152">如果您刪除資料庫時，SQL Database 會保留 hello 的 hello 備份一樣線上資料庫的方式相同。</span><span class="sxs-lookup"><span data-stu-id="0f869-152">If you delete a database, SQL Database keeps hello backups in hello same way it would for an online database.</span></span> <span data-ttu-id="0f869-153">例如，假設您刪除保存期限為 7 天的「基本」資料庫。</span><span class="sxs-lookup"><span data-stu-id="0f869-153">For example, suppose you delete a Basic database that has a retention period of seven days.</span></span> <span data-ttu-id="0f869-154">已保存 4 天的備份會再保存 3 天。</span><span class="sxs-lookup"><span data-stu-id="0f869-154">A backup that is four days old is saved for three more days.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="0f869-155">如果您刪除 hello Azure SQL server 裝載 SQL 資料庫，也會一併刪除屬於 toohello 伺服器的所有資料庫，且無法復原。</span><span class="sxs-lookup"><span data-stu-id="0f869-155">If you delete hello Azure SQL server that hosts SQL Databases, all databases that belong toohello server are also deleted and cannot be recovered.</span></span> <span data-ttu-id="0f869-156">您無法還原已刪除的伺服器。</span><span class="sxs-lookup"><span data-stu-id="0f869-156">You cannot restore a deleted server.</span></span>
> 

## <a name="how-tooextend-hello-backup-retention-period"></a><span data-ttu-id="0f869-157">如何 tooextend hello 備份保留期限嗎？</span><span class="sxs-lookup"><span data-stu-id="0f869-157">How tooextend hello backup retention period?</span></span>
<span data-ttu-id="0f869-158">如果您的應用程式需要較長一段時間的 hello 備份可供使用您可以藉由設定個別資料庫 （LTR 原則） 的 hello 長期備份保留原則擴充 hello 內建的保留期限。</span><span class="sxs-lookup"><span data-stu-id="0f869-158">If your application requires that hello backups are available for longer period of time you can extend hello built-in retention period by configuring hello Long-term backup retention policy for individual databases (LTR policy).</span></span> <span data-ttu-id="0f869-159">這可讓您從 35 天 tooup too10 年的 tooextend hello 建置 it 保留期限。</span><span class="sxs-lookup"><span data-stu-id="0f869-159">This allows you tooextend hello built-it retention period from 35 days tooup too10 years.</span></span> <span data-ttu-id="0f869-160">如需詳細資訊，請參閱[長期保存](sql-database-long-term-retention.md)。</span><span class="sxs-lookup"><span data-stu-id="0f869-160">For more information, see [Long-term retention](sql-database-long-term-retention.md).</span></span>

<span data-ttu-id="0f869-161">一旦您加入 hello LTR 原則 tooa 資料庫使用 Azure 入口網站或應用程式開發介面，hello 每週的完整資料庫備份將不會自動複製的 tooyour 擁有 Azure 備份服務保存庫。</span><span class="sxs-lookup"><span data-stu-id="0f869-161">Once you add hello LTR policy tooa database using Azure portal or API, hello weekly full database backups will be automatically copied tooyour own Azure Backup Service Vault.</span></span> <span data-ttu-id="0f869-162">如果您的資料庫已加密與 TDE hello 備份會自動加密在靜止。</span><span class="sxs-lookup"><span data-stu-id="0f869-162">If your database is encrypted with TDE hello backups are automatically encrypted at rest.</span></span>  <span data-ttu-id="0f869-163">hello 服務保存庫會自動刪除您已過期的備份，根據其時間戳記和 hello LTR 原則。</span><span class="sxs-lookup"><span data-stu-id="0f869-163">hello Services Vault will automatically delete your expired backups based on their timestamp and hello LTR policy.</span></span>  <span data-ttu-id="0f869-164">因此您不需要 toomanage hello 備份排程或擔心 hello 清除 hello 舊的檔案。</span><span class="sxs-lookup"><span data-stu-id="0f869-164">So you don't need toomanage hello backup schedule or worry about hello cleanup of hello old files.</span></span> <span data-ttu-id="0f869-165">儲存在 hello 的備份保存庫，只要 hello 保存庫中的 hello 還原應用程式開發介面支援 hello 與您的 SQL 資料庫的相同訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="0f869-165">hello restore API supports backups stored in hello vault as long as hello vault is in hello same subscription as your SQL database.</span></span> <span data-ttu-id="0f869-166">您可以使用 hello Azure 入口網站或 PowerShell tooaccess 這些備份。</span><span class="sxs-lookup"><span data-stu-id="0f869-166">You can use hello Azure portal or PowerShell tooaccess these backups.</span></span>

> [!TIP]
> <span data-ttu-id="0f869-167">Tooguide 如何，請參閱[設定與還原自 Azure SQL Database 的長期備份保留](sql-database-long-term-backup-retention-configure.md)</span><span class="sxs-lookup"><span data-stu-id="0f869-167">For a How-tooguide, see [Configure and restore from Azure SQL Database long-term backup retention](sql-database-long-term-backup-retention-configure.md)</span></span>
>

## <a name="are-backups-encrypted"></a><span data-ttu-id="0f869-168">備份經過加密？</span><span class="sxs-lookup"><span data-stu-id="0f869-168">Are backups encrypted?</span></span>

<span data-ttu-id="0f869-169">Azure SQL 資料庫啟用 TDE 時，也會加密備份。</span><span class="sxs-lookup"><span data-stu-id="0f869-169">When TDE is enabled for an Azure SQL database, backups are also encrypted.</span></span> <span data-ttu-id="0f869-170">所有新的 Azure SQL Database 預設都會設定為啟用 TDE。</span><span class="sxs-lookup"><span data-stu-id="0f869-170">All new Azure SQL databases are configured with TDE enabled by default.</span></span> <span data-ttu-id="0f869-171">如需 TDE 的詳細資訊，請參閱 [Azure SQL Database 的透明資料加密](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-with-azure-sql-database)。</span><span class="sxs-lookup"><span data-stu-id="0f869-171">For more information on TDE, see [Transparent Data Encryption with Azure SQL Database](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-with-azure-sql-database).</span></span>

## <a name="next-steps"></a><span data-ttu-id="0f869-172">後續步驟</span><span class="sxs-lookup"><span data-stu-id="0f869-172">Next steps</span></span>

- <span data-ttu-id="0f869-173">資料庫備份可保護資料免於意外損毀或刪除，是商務持續性和災害復原策略中不可或缺的一部分。</span><span class="sxs-lookup"><span data-stu-id="0f869-173">Database backups are an essential part of any business continuity and disaster recovery strategy because they protect your data from accidental corruption or deletion.</span></span> <span data-ttu-id="0f869-174">toolearn hello 其他 Azure SQL Database 業務持續性解決方案，請參閱[商務持續性概觀](sql-database-business-continuity.md)。</span><span class="sxs-lookup"><span data-stu-id="0f869-174">toolearn about hello other Azure SQL Database business continuity solutions, see [Business continuity overview](sql-database-business-continuity.md).</span></span>
- <span data-ttu-id="0f869-175">toorestore tooa 的時間點使用 hello Azure 入口網站，請參閱[時間使用 hello Azure 入口網站中還原資料庫 tooa 點](sql-database-recovery-using-backups.md)。</span><span class="sxs-lookup"><span data-stu-id="0f869-175">toorestore tooa point in time using hello Azure portal, see [restore database tooa point in time using hello Azure portal](sql-database-recovery-using-backups.md).</span></span>
- <span data-ttu-id="0f869-176">toorestore tooa 的時間點使用 PowerShell，請參閱[還原時間使用 PowerShell 資料庫 tooa 點](scripts/sql-database-restore-database-powershell.md)。</span><span class="sxs-lookup"><span data-stu-id="0f869-176">toorestore tooa point in time using PowerShell, see [restore database tooa point in time using PowerShell](scripts/sql-database-restore-database-powershell.md).</span></span>
- <span data-ttu-id="0f869-177">tooconfigure，管理和還原的使用 hello Azure 復原服務保存庫中的自動備份的長期保存從 Azure 入口網站，請參閱[長期備份保留使用管理 hello Azure 入口網站](sql-database-long-term-backup-retention-configure.md)。</span><span class="sxs-lookup"><span data-stu-id="0f869-177">tooconfigure, manage, and restore from long-term retention of automated backups in an Azure Recovery Services vault using hello Azure portal, see [Manage long-term backup retention using hello Azure portal](sql-database-long-term-backup-retention-configure.md).</span></span>
- <span data-ttu-id="0f869-178">tooconfigure，管理，並從長期保存使用 PowerShell 的 Azure 復原服務保存庫中的自動備份的還原，請參閱[管理使用 PowerShell 的長期備份保留](sql-database-long-term-backup-retention-configure.md)。</span><span class="sxs-lookup"><span data-stu-id="0f869-178">tooconfigure, manage, and restore from long-term retention of automated backups in an Azure Recovery Services vault using PowerShell, see [Manage long-term backup retention using PowerShell](sql-database-long-term-backup-retention-configure.md).</span></span>
