---
title: "Azure SQL Database 安全性概觀 | Microsoft Docs"
description: "了解 Azure SQL Database 和 SQL Server 安全性，包括雲端和 SQL Server 內部部署之間在驗證、授權、連線安全性、加密和法規遵循等各方面的差異。"
services: sql-database
documentationcenter: 
author: tmullaney
manager: jhubbard
editor: 
ms.assetid: a012bb85-7fb4-4fde-a2fc-cf426c0a56bb
ms.service: sql-database
ms.custom: security
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-management
ms.date: 07/05/2017
ms.author: thmullan;jackr
ms.openlocfilehash: caac079989f5f1616fdbed880ec51ae6e0946b8e
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/11/2017
---
# <a name="securing-your-sql-database"></a><span data-ttu-id="71588-103">保護您的 SQL Database</span><span class="sxs-lookup"><span data-stu-id="71588-103">Securing your SQL Database</span></span>

<span data-ttu-id="71588-104">本篇文章逐步說明使用 Azure SQL Database 保護應用程式資料層的基本概念。</span><span class="sxs-lookup"><span data-stu-id="71588-104">This article walks through the basics of securing the data tier of an application using Azure SQL Database.</span></span> <span data-ttu-id="71588-105">本文尤其著重於協助您開始利用資源來保護資料、控制存取，以及進行主動式監視。</span><span class="sxs-lookup"><span data-stu-id="71588-105">In particular, this article will get you started with resources for protecting data, controlling access, and proactive monitoring.</span></span> 

<span data-ttu-id="71588-106">如需各種 SQL 上可用的完整安全性功能概觀，請參閱 [SQL Server Database Engine 和 Azure SQL Database 的資訊安全中心](https://msdn.microsoft.com/library/bb510589)。</span><span class="sxs-lookup"><span data-stu-id="71588-106">For a complete overview of security features available on all flavors of SQL, see the [Security Center for SQL Server Database Engine and Azure SQL Database](https://msdn.microsoft.com/library/bb510589).</span></span> <span data-ttu-id="71588-107">同時您也可於 [安全性和 Azure SQL Database 技術白皮書](https://download.microsoft.com/download/A/C/3/AC305059-2B3F-4B08-9952-34CDCA8115A9/Security_and_Azure_SQL_Database_White_paper.pdf) (PDF) 中取得其他資訊。</span><span class="sxs-lookup"><span data-stu-id="71588-107">Additional information is also available in the [Security and Azure SQL Database technical white paper](https://download.microsoft.com/download/A/C/3/AC305059-2B3F-4B08-9952-34CDCA8115A9/Security_and_Azure_SQL_Database_White_paper.pdf) (PDF).</span></span>

## <a name="protect-data"></a><span data-ttu-id="71588-108">保護資料</span><span class="sxs-lookup"><span data-stu-id="71588-108">Protect data</span></span>
<span data-ttu-id="71588-109">SQL Database 會使用[傳輸層安全性](https://support.microsoft.com/kb/3135244)為移動中的資料提供加密、使用[透明資料加密](http://go.microsoft.com/fwlink/?LinkId=526242)為待用資料提供加密，使用[一律加密](https://msdn.microsoft.com/library/mt163865.aspx)為使用中的資料提供加密，進而保護您的資料。</span><span class="sxs-lookup"><span data-stu-id="71588-109">SQL Database secures you data by providing encryption for data in motion using [Transport Layer Security](https://support.microsoft.com/kb/3135244), for data at rest using [Transparent Data Encryption](http://go.microsoft.com/fwlink/?LinkId=526242), and for data in use using [Always Encrypted](https://msdn.microsoft.com/library/mt163865.aspx).</span></span> 

> [!IMPORTANT]
><span data-ttu-id="71588-110">Azure SQL Database 的所有連線，也就是任何時候只要資料需要「傳輸」進出資料庫時，都需要加密 (SSL/TLS)。</span><span class="sxs-lookup"><span data-stu-id="71588-110">All connections to Azure SQL Database require encryption (SSL/TLS) at all times while data is "in transit" to and from the database.</span></span> <span data-ttu-id="71588-111">在您應用程式的連接字串中，您必須指定參數來加密連線，並且 *不要* 信任伺服器憑證 (這是為了如果您從 Azure 傳統入口網站將連接字串複製出去)，否則連線將不會驗證伺服器的身分識別，也可能會遭受到「攔截」攻擊。</span><span class="sxs-lookup"><span data-stu-id="71588-111">In your application's connection string, you must specify parameters to encrypt the connection and *not* to trust the server certificate (this is done for you if you copy your connection string out of the Azure Classic Portal), otherwise the connection will not verify the identity of the server and will be susceptible to "man-in-the-middle" attacks.</span></span> <span data-ttu-id="71588-112">例如對於 ADO.NET 驅動程式，這些連接字串參數是 **Encrypt=True** 和 **TrustServerCertificate=False**。</span><span class="sxs-lookup"><span data-stu-id="71588-112">For the ADO.NET driver, for instance, these connection string parameters are **Encrypt=True** and **TrustServerCertificate=False**.</span></span> 

<span data-ttu-id="71588-113">如需其他的資料加密方式，請考慮：</span><span class="sxs-lookup"><span data-stu-id="71588-113">For other ways to encrypt your data, consider:</span></span>

* <span data-ttu-id="71588-114">[儲存格層級加密](https://msdn.microsoft.com/library/ms179331.aspx) ，可利用不同的加密金鑰來加密特定的資料行或甚至是資料儲存格。</span><span class="sxs-lookup"><span data-stu-id="71588-114">[Cell-level encryption](https://msdn.microsoft.com/library/ms179331.aspx) to encrypt specific columns or even cells of data with different encryption keys.</span></span>
* <span data-ttu-id="71588-115">如果您需要硬體安全性模組或集中管理您的加密金鑰階層，請考慮 [在 Azure VM 中使用 Azure 金鑰保存庫搭配 SQL Server](http://blogs.technet.com/b/kv/archive/2015/01/12/using-the-key-vault-for-sql-server-encryption.aspx)。</span><span class="sxs-lookup"><span data-stu-id="71588-115">If you need a Hardware Security Module or central management of your encryption key hierarchy, consider using [Azure Key Vault with SQL Server in an Azure VM](http://blogs.technet.com/b/kv/archive/2015/01/12/using-the-key-vault-for-sql-server-encryption.aspx).</span></span>

## <a name="control-access"></a><span data-ttu-id="71588-116">控制存取</span><span class="sxs-lookup"><span data-stu-id="71588-116">Control access</span></span>
<span data-ttu-id="71588-117">SQL Database 使用防火牆規則、要求使用者證明其身分的驗證機制，以及透過角色型成員資格與權限和透過資料列層級安全性與動態資料遮罩的資料授權來限制資料庫的存取，進而保護您的資料。</span><span class="sxs-lookup"><span data-stu-id="71588-117">SQL Database secures your data by limiting access to your database using firewall rules, authentication mechanisms requiring users to prove their identity, and authorization to data through role-based memberships and permissions, as well as through row-level security and dynamic data masking.</span></span> <span data-ttu-id="71588-118">如需在 SQL Database 中使用存取控制功能的討論，請參閱[控制存取](sql-database-control-access.md)。</span><span class="sxs-lookup"><span data-stu-id="71588-118">For a discussion of the use of access control features in SQL Database, see [Control access](sql-database-control-access.md).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="71588-119">在 Azure 內管理資料庫和邏輯伺服器，是由入口網站使用者帳戶的角色指派所控制。</span><span class="sxs-lookup"><span data-stu-id="71588-119">Managing databases and logical servers within Azure is controlled by your portal user account's role assignments.</span></span> <span data-ttu-id="71588-120">如需有關此主題的詳細資訊，請參閱 [Azure 入口網站中的角色型存取控制](../active-directory/role-based-access-control-what-is.md)。</span><span class="sxs-lookup"><span data-stu-id="71588-120">For more information on this topic, see [Role-based access control in Azure Portal](../active-directory/role-based-access-control-what-is.md).</span></span>
>

### <a name="firewall-and-firewall-rules"></a><span data-ttu-id="71588-121">防火牆與防火牆規則</span><span class="sxs-lookup"><span data-stu-id="71588-121">Firewall and firewall rules</span></span>
<span data-ttu-id="71588-122">為了協助保護您的資料，防火牆會防止對您的資料庫伺服器的所有存取，直到您使用[防火牆規則](sql-database-firewall-configure.md)指定哪些電腦擁有權限。</span><span class="sxs-lookup"><span data-stu-id="71588-122">To help protect your data, firewalls prevent all access to your database server until you specify which computers have permission using [firewall rules](sql-database-firewall-configure.md).</span></span> <span data-ttu-id="71588-123">此防火牆會根據每一個要求的來源 IP 位址來授與資料庫存取權。</span><span class="sxs-lookup"><span data-stu-id="71588-123">The firewall grants access to databases based on the originating IP address of each request.</span></span>

### <a name="authentication"></a><span data-ttu-id="71588-124">驗證</span><span class="sxs-lookup"><span data-stu-id="71588-124">Authentication</span></span>
<span data-ttu-id="71588-125">SQL Database 驗證是指連線到資料庫時如何證明身分識別。</span><span class="sxs-lookup"><span data-stu-id="71588-125">SQL database authentication refers to how you prove your identity when connecting to the database.</span></span> <span data-ttu-id="71588-126">SQL Database 支援兩種驗證類型：</span><span class="sxs-lookup"><span data-stu-id="71588-126">SQL Database supports two types of authentication:</span></span>

* <span data-ttu-id="71588-127">**SQL 驗證**，其需要使用者名稱和密碼。</span><span class="sxs-lookup"><span data-stu-id="71588-127">**SQL Authentication**, which uses a username and password.</span></span> <span data-ttu-id="71588-128">當您為資料庫建立邏輯伺服器時，採取使用者名稱和密碼指定了「伺服器管理員」登入。</span><span class="sxs-lookup"><span data-stu-id="71588-128">When you created the logical server for your database, you specified a "server admin" login with a username and password.</span></span> <span data-ttu-id="71588-129">使用這些認證，您就可以使用資料庫擁有者或 "dbo" 的身分驗證該伺服器上的任何資料庫。</span><span class="sxs-lookup"><span data-stu-id="71588-129">Using these credentials, you can authenticate to any database on that server as the database owner, or "dbo."</span></span> 
* <span data-ttu-id="71588-130">**Azure Active Directory 驗證**，它會使用由 Azure Active Directory 管理的身分識別，並支援受管理和整合的網域。</span><span class="sxs-lookup"><span data-stu-id="71588-130">**Azure Active Directory Authentication**, which uses identities managed by Azure Active Directory and is supported for managed and integrated domains.</span></span> <span data-ttu-id="71588-131">[盡可能](https://msdn.microsoft.com/library/ms144284.aspx)使用 Active Directory 驗證 (整合式安全性)。</span><span class="sxs-lookup"><span data-stu-id="71588-131">Use Active Directory authentication (integrated security) [whenever possible](https://msdn.microsoft.com/library/ms144284.aspx).</span></span> <span data-ttu-id="71588-132">如果您想要使用 Azure Active Directory 驗證，就必須建立另一個名為「Azure AD 管理員」的伺服器管理員，其能夠管理 Azure AD 使用者和群組。</span><span class="sxs-lookup"><span data-stu-id="71588-132">If you want to use Azure Active Directory Authentication, you must create another server admin called the "Azure AD admin," which is allowed to administer Azure AD users and groups.</span></span> <span data-ttu-id="71588-133">此管理員也可以執行一般伺服器管理員可執行的所有作業。</span><span class="sxs-lookup"><span data-stu-id="71588-133">This admin can also perform all operations that a regular server admin can.</span></span> <span data-ttu-id="71588-134">如需如何建立 Azure AD 管理員以啟用 Azure Active Directory 驗證的逐步解說，請參閱 [使用 Azure Active Directory 驗證連線到 SQL Database](sql-database-aad-authentication.md) 。</span><span class="sxs-lookup"><span data-stu-id="71588-134">See [Connecting to SQL Database By Using Azure Active Directory Authentication](sql-database-aad-authentication.md) for a walkthrough of how to create an Azure AD admin to enable Azure Active Directory Authentication.</span></span>

### <a name="authorization"></a><span data-ttu-id="71588-135">Authorization</span><span class="sxs-lookup"><span data-stu-id="71588-135">Authorization</span></span>
<span data-ttu-id="71588-136">授權是指使用者可以在 Azure SQL Database 內執行的動作，這是由使用者帳戶的資料庫角色成員資格和物件層級權限所控制。</span><span class="sxs-lookup"><span data-stu-id="71588-136">Authorization refers to what a user can do within an Azure SQL Database, and this is controlled by your user account's database role memberships and object-level permissions.</span></span> <span data-ttu-id="71588-137">最好的作法是，您應該授與使用者所需的最低權限。</span><span class="sxs-lookup"><span data-stu-id="71588-137">As a best practice, you should grant users the least privileges necessary.</span></span> <span data-ttu-id="71588-138">您所連線的伺服器管理員帳戶是 db_owner 的成員，有權限在資料庫中執行任何動作。</span><span class="sxs-lookup"><span data-stu-id="71588-138">The server admin account you are connecting with is a member of db_owner, which has authority to do anything within the database.</span></span> <span data-ttu-id="71588-139">請儲存此帳戶，以便部署結構描述升級及其他管理作業。</span><span class="sxs-lookup"><span data-stu-id="71588-139">Save this account for deploying schema upgrades and other management operations.</span></span> <span data-ttu-id="71588-140">請使用具更多有限權限的 "ApplicationUser" 帳戶，從應用程式連線到具應用程式所需之最低權限的資料庫。</span><span class="sxs-lookup"><span data-stu-id="71588-140">Use the "ApplicationUser" account with more limited permissions to connect from your application to the database with the least privileges needed by your application.</span></span>

### <a name="row-level-security"></a><span data-ttu-id="71588-141">資料列層級安全性</span><span class="sxs-lookup"><span data-stu-id="71588-141">Row-level security</span></span>
<span data-ttu-id="71588-142">資料列層級安全性讓客戶能夠根據執行查詢之使用者的特性 (例如，群組成員資格或執行內容) 來控制資料庫資料表中的資料列存取。</span><span class="sxs-lookup"><span data-stu-id="71588-142">Row-Level Security enables customers to control access to rows in a database table based on the characteristics of the user executing a query (e.g., group membership or execution context).</span></span> <span data-ttu-id="71588-143">如需詳細資訊，請參閱[資料列層級安全性](https://msdn.microsoft.com/library/dn765131)。</span><span class="sxs-lookup"><span data-stu-id="71588-143">For more information, see [Row-Level security](https://msdn.microsoft.com/library/dn765131).</span></span>

### <a name="data-masking"></a><span data-ttu-id="71588-144">資料遮罩</span><span class="sxs-lookup"><span data-stu-id="71588-144">Data masking</span></span> 
<span data-ttu-id="71588-145">SQL Database 動態資料遮罩可藉由遮罩處理，使不具權限的使用者無法看見機密資料。</span><span class="sxs-lookup"><span data-stu-id="71588-145">SQL Database dynamic data masking limits sensitive data exposure by masking it to non-privileged users.</span></span> <span data-ttu-id="71588-146">動態資料遮罩會自動探索 Azure SQL Database 中的可能敏感性資料，並提供可動作的建議來為這些欄位加上遮罩，盡量避免對應用程式層造成影響。</span><span class="sxs-lookup"><span data-stu-id="71588-146">Dynamic data masking automatically discovers potentially sensitive data in Azure SQL Database and provides actionable recommendations to mask these fields, with minimal impact on the application layer.</span></span> <span data-ttu-id="71588-147">其運作方式為針對指定的資料庫欄位隱匿查詢結果集中的敏感性資料，而不變更資料庫中的資料。</span><span class="sxs-lookup"><span data-stu-id="71588-147">It works by obfuscating the sensitive data in the result set of a query over designated database fields, while the data in the database is not changed.</span></span> <span data-ttu-id="71588-148">如需詳細資訊，請參閱[開始使用 SQL Database 動態資料遮罩](sql-database-dynamic-data-masking-get-started.md)，其可以用來限制敏感性資料的公開。</span><span class="sxs-lookup"><span data-stu-id="71588-148">For more information, see [Get started with SQL Database dynamic data masking](sql-database-dynamic-data-masking-get-started.md) can be used to limit exposure of sensitive data.</span></span>

## <a name="proactive-monitoring"></a><span data-ttu-id="71588-149">主動監視</span><span class="sxs-lookup"><span data-stu-id="71588-149">Proactive monitoring</span></span>
<span data-ttu-id="71588-150">SQL Database 可藉由提供稽核和威脅偵測功能來保護您的資料。</span><span class="sxs-lookup"><span data-stu-id="71588-150">SQL Database secures your data by providing auditing and threat detection capabilities.</span></span> 

### <a name="auditing"></a><span data-ttu-id="71588-151">稽核</span><span class="sxs-lookup"><span data-stu-id="71588-151">Auditing</span></span>
<span data-ttu-id="71588-152">SQL Database 稽核會將資料庫事件記錄到 Azure 儲存體帳戶中的稽核記錄檔，藉此追蹤資料庫活動並協助您維護法規相符性。</span><span class="sxs-lookup"><span data-stu-id="71588-152">SQL Database Auditing tracks database activities and helps you to maintain regulatory compliance, by recording database events to an audit log in your Azure Storage account.</span></span> <span data-ttu-id="71588-153">稽核可讓您了解進行中的資料庫活動，以及分析和調查歷史活動，以找出潛在威脅或可疑的濫用和安全性違規。</span><span class="sxs-lookup"><span data-stu-id="71588-153">Auditing enables you to understand ongoing database activities, as well as analyze and investigate historical activity to identify potential threats or suspected abuse and security violations.</span></span> <span data-ttu-id="71588-154">如需其他資訊，請參閱[開始使用 SQL Database 稽核](sql-database-auditing.md)。</span><span class="sxs-lookup"><span data-stu-id="71588-154">For additional information, see [Get started with SQL Database Auditing](sql-database-auditing.md).</span></span>  

### <a name="threat-detection"></a><span data-ttu-id="71588-155">威脅偵測</span><span class="sxs-lookup"><span data-stu-id="71588-155">Threat detection</span></span>
<span data-ttu-id="71588-156">威脅偵測會提供 Azure SQL Database 服務內建的額外安全情報層，此情報層可偵測到不尋常且有危害的資料庫存取或攻擊動作，藉此補充稽核的不足之處。</span><span class="sxs-lookup"><span data-stu-id="71588-156">Threat Detection complements auditing, by providing an additional layer of security intelligence built into the Azure SQL Database service that detects unusual and potentially harmful attempts to access or exploit databases.</span></span> <span data-ttu-id="71588-157">系統會警示您有關可疑活動、潛在弱點、SQL 插入式攻擊和異常資料庫存取模式。</span><span class="sxs-lookup"><span data-stu-id="71588-157">You will be alerted about suspicious activities, potential vulnerabilities and SQL injection attacks, as well as anomalous database access patterns.</span></span> <span data-ttu-id="71588-158">您可以從 [Azure 資訊安全中心](https://azure.microsoft.com/services/security-center/)檢視威脅偵測警示，該警示會提供可疑活動的詳細資料，以及如何調查與降低威脅的建議。</span><span class="sxs-lookup"><span data-stu-id="71588-158">Threat Detection alerts can be viewed from [Azure Security Center](https://azure.microsoft.com/services/security-center/) and provide details of suspicious activity and recommend action on how to investigate and mitigate the threat.</span></span> <span data-ttu-id="71588-159">每部伺服器的威脅偵測費用為每個月 $15 元。</span><span class="sxs-lookup"><span data-stu-id="71588-159">Threat Detection costs $15/server/month.</span></span> <span data-ttu-id="71588-160">前 60 天免費。</span><span class="sxs-lookup"><span data-stu-id="71588-160">It will be free for the first 60 days.</span></span> <span data-ttu-id="71588-161">如需詳細資訊，請參閱 [開始使用 SQL Database 威脅偵測](sql-database-threat-detection.md)。</span><span class="sxs-lookup"><span data-stu-id="71588-161">For more information, see [Get started with SQL Database Threat Detection](sql-database-threat-detection.md).</span></span>
 
### <a name="data-masking"></a><span data-ttu-id="71588-162">資料遮罩</span><span class="sxs-lookup"><span data-stu-id="71588-162">Data Masking</span></span> 
<span data-ttu-id="71588-163">SQL Database 動態資料遮罩可藉由遮罩處理，使不具權限的使用者無法看見機密資料。</span><span class="sxs-lookup"><span data-stu-id="71588-163">SQL Database dynamic data masking limits sensitive data exposure by masking it to non-privileged users.</span></span> <span data-ttu-id="71588-164">動態資料遮罩會自動探索 Azure SQL Database 中的可能敏感性資料，並提供可動作的建議來為這些欄位加上遮罩，盡量避免對應用程式層造成影響。</span><span class="sxs-lookup"><span data-stu-id="71588-164">Dynamic data masking automatically discovers potentially sensitive data in Azure SQL Database and provides actionable recommendations to mask these fields, with minimal impact on the application layer.</span></span> <span data-ttu-id="71588-165">其運作方式為針對指定的資料庫欄位隱匿查詢結果集中的敏感性資料，而不變更資料庫中的資料。</span><span class="sxs-lookup"><span data-stu-id="71588-165">It works by obfuscating the sensitive data in the result set of a query over designated database fields, while the data in the database is not changed.</span></span> <span data-ttu-id="71588-166">如需詳細資訊，請參閱[開始使用 SQL Database 動態資料遮罩](sql-database-dynamic-data-masking-get-started.md)</span><span class="sxs-lookup"><span data-stu-id="71588-166">For more information, see Get started with [SQL Database dynamic data masking](sql-database-dynamic-data-masking-get-started.md)</span></span>
 
## <a name="compliance"></a><span data-ttu-id="71588-167">法規遵循</span><span class="sxs-lookup"><span data-stu-id="71588-167">Compliance</span></span>
<span data-ttu-id="71588-168">除了上述可協助您的應用程式符合各種安全性需求的特色和功能之外，Azure SQL Database 也定期參與稽核，並且經過認證符合許多法規標準。</span><span class="sxs-lookup"><span data-stu-id="71588-168">In addition to the above features and functionality that can help your application meet various security requirements, Azure SQL Database also participates in regular audits and has been certified against a number of compliance standards.</span></span> <span data-ttu-id="71588-169">如需詳細資訊，請參閱 [Microsoft Azure 信任中心](https://azure.microsoft.com/support/trust-center/)，您可以在當中找到 [SQL Database 法規認證](https://azure.microsoft.com/support/trust-center/services/)的最新清單。</span><span class="sxs-lookup"><span data-stu-id="71588-169">For more information, see the [Microsoft Azure Trust Center](https://azure.microsoft.com/support/trust-center/), where you can find the most current list of [SQL Database compliance certifications](https://azure.microsoft.com/support/trust-center/services/).</span></span>

## <a name="next-steps"></a><span data-ttu-id="71588-170">後續步驟</span><span class="sxs-lookup"><span data-stu-id="71588-170">Next steps</span></span>

- <span data-ttu-id="71588-171">如需在 SQL Database 中使用存取控制功能的討論，請參閱[控制存取](sql-database-control-access.md)。</span><span class="sxs-lookup"><span data-stu-id="71588-171">For a discussion of the use of access control features in SQL Database, see [Control access](sql-database-control-access.md).</span></span>
- <span data-ttu-id="71588-172">如需資料庫稽核的相關討論，請參閱 [SQL Database 稽核 (英文)](sql-database-auditing.md)。</span><span class="sxs-lookup"><span data-stu-id="71588-172">For a discussion of database auditing, see [SQL Database auditing](sql-database-auditing.md).</span></span>
- <span data-ttu-id="71588-173">如需威脅偵測的相關討論，請參閱 [SQL Database 威脅偵測](sql-database-threat-detection.md)。</span><span class="sxs-lookup"><span data-stu-id="71588-173">For a discussion of threat detection, see [SQL Database threat detection](sql-database-threat-detection.md).</span></span>
