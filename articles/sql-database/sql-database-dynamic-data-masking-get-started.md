---
title: "aaaAzure SQL Database 動態資料遮罩 |Microsoft 文件"
description: "SQL Database 動態資料遮罩會限制機密資料暴露它 toonon 權限的使用者"
services: sql-database
documentationcenter: 
author: ronitr
manager: jhubbard
editor: 
ms.assetid: 4b36d78e-7749-4f26-9774-eed1120a9182
ms.service: sql-database
ms.custom: security
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-services
ms.date: 03/09/2017
ms.author: ronitr; ronmat
ms.openlocfilehash: 68b55128dc096f7e3dd0e5ed1427b39da5d64736
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="sql-database-dynamic-data-masking"></a><span data-ttu-id="b74bc-103">SQL Database 動態資料遮罩</span><span class="sxs-lookup"><span data-stu-id="b74bc-103">SQL Database dynamic data masking</span></span>

<span data-ttu-id="b74bc-104">SQL Database 動態資料遮罩會限制機密資料暴露其 toonon 權限的使用者。</span><span class="sxs-lookup"><span data-stu-id="b74bc-104">SQL Database dynamic data masking limits sensitive data exposure by masking it toonon-privileged users.</span></span> 

<span data-ttu-id="b74bc-105">動態資料遮罩藉此協助防止未經授權的存取 toosensitive 資料啟用客戶 toodesignate 多少 hello 敏感性資料 tooreveal hello 應用程式層上的影響降至最低。</span><span class="sxs-lookup"><span data-stu-id="b74bc-105">Dynamic data masking helps prevent unauthorized access toosensitive data by enabling customers toodesignate how much of hello sensitive data tooreveal with minimal impact on hello application layer.</span></span> <span data-ttu-id="b74bc-106">這是 hello hello 查詢結果集內的機密資料隱藏在指定的資料庫欄位，而 hello 資料庫中的 hello 資料不會變更以原則為基礎的安全性功能。</span><span class="sxs-lookup"><span data-stu-id="b74bc-106">It’s a policy-based security feature that hides hello sensitive data in hello result set of a query over designated database fields, while hello data in hello database is not changed.</span></span>

<span data-ttu-id="b74bc-107">例如，撥接中心的服務代表可能會呼叫端識別其信用卡號碼其中幾個數字，但這些項目不應該是完整的資料公開 toohello 服務代表通話。</span><span class="sxs-lookup"><span data-stu-id="b74bc-107">For example, a service representative at a call center may identify callers by several digits of their credit card number, but those data items should not be fully exposed toohello service representative.</span></span> <span data-ttu-id="b74bc-108">所有遮罩但 hello 最後四位數的 hello 任何查詢結果集內任何信用卡號碼可以定義遮罩規則。</span><span class="sxs-lookup"><span data-stu-id="b74bc-108">A masking rule can be defined that masks all but hello last four digits of any credit card number in hello result set of any query.</span></span> <span data-ttu-id="b74bc-109">另舉一例，適當的資料遮罩可以是定義的 tooprotect 個人識別資訊 (PII) 資料，以便開發人員可以查詢生產環境，供疑難排解之用，而不會違反法務遵循規定。</span><span class="sxs-lookup"><span data-stu-id="b74bc-109">As another example, an appropriate data mask can be defined tooprotect personally identifiable information (PII) data, so that a developer can query production environments for troubleshooting purposes without violating compliance regulations.</span></span>

## <a name="sql-database-dynamic-data-masking-basics"></a><span data-ttu-id="b74bc-110">SQL Database 動態資料遮罩的基本概念</span><span class="sxs-lookup"><span data-stu-id="b74bc-110">SQL Database dynamic data masking basics</span></span>
<span data-ttu-id="b74bc-111">您設定的動態資料遮罩原則中 hello Azure 入口網站選取 hello 動態資料遮罩刀鋒視窗中設定 SQL 資料庫或設定 刀鋒視窗中的作業。</span><span class="sxs-lookup"><span data-stu-id="b74bc-111">You set up a dynamic data masking policy in hello Azure portal by selecting hello dynamic data masking operation in your SQL Database configuration blade or settings blade.</span></span>

### <a name="dynamic-data-masking-permissions"></a><span data-ttu-id="b74bc-112">動態資料遮罩權限</span><span class="sxs-lookup"><span data-stu-id="b74bc-112">Dynamic data masking permissions</span></span>
<span data-ttu-id="b74bc-113">Hello Azure 資料庫系統管理員、 伺服器管理員或安全性主管人員角色可以設定動態資料遮罩。</span><span class="sxs-lookup"><span data-stu-id="b74bc-113">Dynamic data masking can be configured by hello Azure Database admin, server admin, or security officer roles.</span></span>

### <a name="dynamic-data-masking-policy"></a><span data-ttu-id="b74bc-114">動態資料遮罩原則</span><span class="sxs-lookup"><span data-stu-id="b74bc-114">Dynamic data masking policy</span></span>
* <span data-ttu-id="b74bc-115">**從遮罩排除 SQL 使用者**-一組 SQL 使用者或 AAD 身分識別，讓未遮罩的資料 hello SQL 查詢的結果。</span><span class="sxs-lookup"><span data-stu-id="b74bc-115">**SQL users excluded from masking** - A set of SQL users or AAD identities that get unmasked data in hello SQL query results.</span></span> <span data-ttu-id="b74bc-116">系統管理員權限的使用者一律會從遮罩排除，請參閱 hello 原始資料，沒有任何遮罩。</span><span class="sxs-lookup"><span data-stu-id="b74bc-116">Users with administrator privileges are always excluded from masking, and see hello original data without any mask.</span></span>
* <span data-ttu-id="b74bc-117">**遮罩規則**-一組定義指定遮罩欄位 toobe hello 和 hello 遮罩函數所使用的規則。</span><span class="sxs-lookup"><span data-stu-id="b74bc-117">**Masking rules** - A set of rules that define hello designated fields toobe masked and hello masking function that is used.</span></span> <span data-ttu-id="b74bc-118">可以使用資料庫結構描述名稱、 資料表名稱，以及資料行名稱來定義指定欄位的 hello。</span><span class="sxs-lookup"><span data-stu-id="b74bc-118">hello designated fields can be defined using a database schema name, table name, and column name.</span></span>
* <span data-ttu-id="b74bc-119">**遮罩函數**-一組控制 hello 公開針對不同的案例資料的方法。</span><span class="sxs-lookup"><span data-stu-id="b74bc-119">**Masking functions** - A set of methods that control hello exposure of data for different scenarios.</span></span>

| <span data-ttu-id="b74bc-120">遮罩函數</span><span class="sxs-lookup"><span data-stu-id="b74bc-120">Masking Function</span></span> | <span data-ttu-id="b74bc-121">遮罩邏輯</span><span class="sxs-lookup"><span data-stu-id="b74bc-121">Masking Logic</span></span> |
| --- | --- |
| <span data-ttu-id="b74bc-122">**預設值**</span><span class="sxs-lookup"><span data-stu-id="b74bc-122">**Default**</span></span> |<span data-ttu-id="b74bc-123">**完整資料加上遮罩相應 toohello hello 的類型指定的欄位**</span><span class="sxs-lookup"><span data-stu-id="b74bc-123">**Full masking according toohello data types of hello designated fields**</span></span><br/><br/><span data-ttu-id="b74bc-124">• 使用 XXXX 或如果 hello hello 欄位大小少於 4 個字元的字串資料類型 （nchar、 ntext、 nvarchar） 較少的 x。</span><span class="sxs-lookup"><span data-stu-id="b74bc-124">• Use XXXX or fewer Xs if hello size of hello field is less than 4 characters for string data types (nchar, ntext, nvarchar).</span></span><br/><span data-ttu-id="b74bc-125">• 針對數值資料類型 (bigint、bit、decimal、int、money、numeric、smallint、smallmoney、tinyint、float、real)，使用零值。</span><span class="sxs-lookup"><span data-stu-id="b74bc-125">• Use a zero value for numeric data types (bigint, bit, decimal, int, money, numeric, smallint, smallmoney, tinyint, float, real).</span></span><br/><span data-ttu-id="b74bc-126">• 針對日期/時間資料類型 (date、datetime2、datetime、datetimeoffset、smalldatetime、time)，使用 01-01-1900 時間。</span><span class="sxs-lookup"><span data-stu-id="b74bc-126">• Use 01-01-1900 for date/time data types (date, datetime2, datetime, datetimeoffset, smalldatetime, time).</span></span><br/><span data-ttu-id="b74bc-127">• SQL variant，hello 型別的預設值 hello 目前會使用。</span><span class="sxs-lookup"><span data-stu-id="b74bc-127">• For SQL variant, hello default value of hello current type is used.</span></span><br/><span data-ttu-id="b74bc-128">• For XML hello 文件<masked/>用。</span><span class="sxs-lookup"><span data-stu-id="b74bc-128">• For XML hello document <masked/> is used.</span></span><br/><span data-ttu-id="b74bc-129">• 針對特殊資料類型 (時間戳記、資料表、hierarchyid、GUID、二進位值、影像、varbinary spatial 類型)，使用空值。</span><span class="sxs-lookup"><span data-stu-id="b74bc-129">• Use an empty value for special data types (timestamp table, hierarchyid, GUID, binary, image, varbinary spatial types).</span></span> |
| <span data-ttu-id="b74bc-130">**信用卡**</span><span class="sxs-lookup"><span data-stu-id="b74bc-130">**Credit card**</span></span> |<span data-ttu-id="b74bc-131">**此遮罩方法，可公開 hello 的最後 4 位數指定欄位的 hello** ，並加入做為前置詞的信用卡 hello 形式常數字串。</span><span class="sxs-lookup"><span data-stu-id="b74bc-131">**Masking method, which exposes hello last four digits of hello designated fields** and adds a constant string as a prefix in hello form of a credit card.</span></span><br/><br/><span data-ttu-id="b74bc-132">XXXX-XXXX-XXXX-1234</span><span class="sxs-lookup"><span data-stu-id="b74bc-132">XXXX-XXXX-XXXX-1234</span></span> |
| <span data-ttu-id="b74bc-133">**電子郵件**</span><span class="sxs-lookup"><span data-stu-id="b74bc-133">**Email**</span></span> |<span data-ttu-id="b74bc-134">**此遮罩方法，可 hello 第一個字母曝光，並以 XXX.com 取代 hello 網域**使用常數字串中的前置詞 hello 形式為電子郵件地址。</span><span class="sxs-lookup"><span data-stu-id="b74bc-134">**Masking method, which exposes hello first letter and replaces hello domain with XXX.com** using a constant string prefix in hello form of an email address.</span></span><br/><br/>aXX@XXXX.com |
| <span data-ttu-id="b74bc-135">**隨機數字**</span><span class="sxs-lookup"><span data-stu-id="b74bc-135">**Random number**</span></span> |<span data-ttu-id="b74bc-136">**此遮罩方法會產生一個隨機數字**toohello，根據選取的界限與實際的資料類型。</span><span class="sxs-lookup"><span data-stu-id="b74bc-136">**Masking method, which generates a random number** according toohello selected boundaries and actual data types.</span></span> <span data-ttu-id="b74bc-137">如果指定界限的 hello 相等，遮罩函數的 hello 是固定數目。</span><span class="sxs-lookup"><span data-stu-id="b74bc-137">If hello designated boundaries are equal, then hello masking function is a constant number.</span></span><br/><br/><span data-ttu-id="b74bc-138">![導覽窗格](./media/sql-database-dynamic-data-masking-get-started/1_DDM_Random_number.png)</span><span class="sxs-lookup"><span data-stu-id="b74bc-138">![Navigation pane](./media/sql-database-dynamic-data-masking-get-started/1_DDM_Random_number.png)</span></span> |
| <span data-ttu-id="b74bc-139">**自訂文字**</span><span class="sxs-lookup"><span data-stu-id="b74bc-139">**Custom text**</span></span> |<span data-ttu-id="b74bc-140">**此遮罩的方法，公開哪些先 hello 和最後一個字元**，並在 hello 中間加入自訂填補字串。</span><span class="sxs-lookup"><span data-stu-id="b74bc-140">**Masking method, which exposes hello first and last characters** and adds a custom padding string in hello middle.</span></span> <span data-ttu-id="b74bc-141">如果 hello 原始字串小於 hello 公開前置詞和後置詞，則會使用 hello 填補字串。</span><span class="sxs-lookup"><span data-stu-id="b74bc-141">If hello original string is shorter than hello exposed prefix and suffix, only hello padding string is used.</span></span> <br/><span data-ttu-id="b74bc-142">prefix[padding]suffix</span><span class="sxs-lookup"><span data-stu-id="b74bc-142">prefix[padding]suffix</span></span><br/><br/><span data-ttu-id="b74bc-143">![導覽窗格](./media/sql-database-dynamic-data-masking-get-started/2_DDM_Custom_text.png)</span><span class="sxs-lookup"><span data-stu-id="b74bc-143">![Navigation pane](./media/sql-database-dynamic-data-masking-get-started/2_DDM_Custom_text.png)</span></span> |

<a name="Anchor1"></a>

### <a name="recommended-fields-toomask"></a><span data-ttu-id="b74bc-144">建議的欄位 toomask</span><span class="sxs-lookup"><span data-stu-id="b74bc-144">Recommended fields toomask</span></span>
<span data-ttu-id="b74bc-145">hello DDM 建議引擎，加上旗標特定資料庫中的欄位做為可能含有機密欄位，可能是適合用來遮罩。</span><span class="sxs-lookup"><span data-stu-id="b74bc-145">hello DDM recommendations engine, flags certain fields from your database as potentially sensitive fields, which may be good candidates for masking.</span></span> <span data-ttu-id="b74bc-146">在 hello 動態資料遮罩刀鋒視窗中 hello 入口網站中，您會看到 hello 建議為您的資料庫資料行。</span><span class="sxs-lookup"><span data-stu-id="b74bc-146">In hello Dynamic Data Masking blade in hello portal, you will see hello recommended columns for your database.</span></span> <span data-ttu-id="b74bc-147">您只需要 toodo 是按一下**新增遮罩**一或多個資料行，然後**儲存**tooapply 遮罩這些欄位。</span><span class="sxs-lookup"><span data-stu-id="b74bc-147">All you need toodo is click **Add Mask** for one or more columns and then **Save** tooapply a mask for these fields.</span></span>

## <a name="set-up-dynamic-data-masking-for-your-database-using-powershell-cmdlets"></a><span data-ttu-id="b74bc-148">使用 PowerShell Cmdlet 為您的資料庫設定動態資料遮罩</span><span class="sxs-lookup"><span data-stu-id="b74bc-148">Set up dynamic data masking for your database using Powershell cmdlets</span></span>
<span data-ttu-id="b74bc-149">請參閱 [Azure SQL Database Cmdlet](https://msdn.microsoft.com/library/azure/mt574084.aspx)。</span><span class="sxs-lookup"><span data-stu-id="b74bc-149">See [Azure SQL Database Cmdlets](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span></span>

## <a name="set-up-dynamic-data-masking-for-your-database-using-rest-api"></a><span data-ttu-id="b74bc-150">使用 REST API 為您的資料庫設定動態資料遮罩</span><span class="sxs-lookup"><span data-stu-id="b74bc-150">Set up dynamic data masking for your database using REST API</span></span>
<span data-ttu-id="b74bc-151">請參閱 [Azure SQL Database 的作業](https://msdn.microsoft.com/library/dn505719.aspx)。</span><span class="sxs-lookup"><span data-stu-id="b74bc-151">See [Operations for Azure SQL Databases](https://msdn.microsoft.com/library/dn505719.aspx).</span></span>

