---
title: "aaaSQL 伺服器在 Azure 虛擬機器常見問題集 |Microsoft 文件"
description: "本文提供的解答 toofrequently 的 Azure Vm 上執行 SQL Server 相關常見問題。"
services: virtual-machines-windows
documentationcenter: 
author: v-shysun
manager: felixwu
editor: 
tags: azure-service-management
ms.assetid: 2fa5ee6b-51a6-4237-805f-518e6c57d11b
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 06/23/2017
ms.author: v-shysun
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 70a8777bf765dcc69f433aa1fb59eb94929caab7
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="frequently-asked-questions-for-sql-server-on-azure-virtual-machines"></a><span data-ttu-id="a627d-103">Azure 虛擬機器上 SQL Server 的常見問題集</span><span class="sxs-lookup"><span data-stu-id="a627d-103">Frequently asked questions for SQL Server on Azure Virtual Machines</span></span>
<span data-ttu-id="a627d-104">本主題提供的答案 toosome hello 的最常見的問題，需執行[Azure 虛擬機器上的 SQL Server](https://azure.microsoft.com/services/virtual-machines/sql-server/)。</span><span class="sxs-lookup"><span data-stu-id="a627d-104">This topic provides answers toosome of hello most common questions about running [SQL Server on Azure Virtual Machines](https://azure.microsoft.com/services/virtual-machines/sql-server/).</span></span>

[!INCLUDE [support-disclaimer](../../../../includes/support-disclaimer.md)]

## <a name="frequently-asked-questions"></a><span data-ttu-id="a627d-105">常見問題集</span><span class="sxs-lookup"><span data-stu-id="a627d-105">Frequently Asked Questions</span></span>

1. <span data-ttu-id="a627d-106">**如何使用 SQL Server 建立 Azure 虛擬機器？**</span><span class="sxs-lookup"><span data-stu-id="a627d-106">**How do I create an Azure virtual machine with SQL Server?**</span></span>

    <span data-ttu-id="a627d-107">hello 最簡單的解決方案是 toocreate 包含 SQL Server 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="a627d-107">hello easiest solution is toocreate a Virtual Machine that includes SQL Server.</span></span> <span data-ttu-id="a627d-108">如需註冊 Azure，並建立從 hello 入口網站的 SQL VM 的教學課程，請參閱[hello Azure 入口網站中的 SQL Server 虛擬機器佈建](virtual-machines-windows-portal-sql-server-provision.md)。</span><span class="sxs-lookup"><span data-stu-id="a627d-108">For a tutorial on signing up for Azure and creating a SQL VM from hello portal, see [Provision a SQL Server virtual machine in hello Azure Portal](virtual-machines-windows-portal-sql-server-provision.md).</span></span> <span data-ttu-id="a627d-109">您可以選取使用授權，支付每分鐘 SQL Server 的虛擬機器映像，或者您可以使用映像，可讓您 toobring 您自己的 SQL Server 授權。</span><span class="sxs-lookup"><span data-stu-id="a627d-109">You can select a virtual machine image that uses pay-per-minute SQL Server licensing, or you can use an image that allows you toobring your own SQL Server license.</span></span> <span data-ttu-id="a627d-110">您也可以手動在 VM 上安裝 SQL Server 和重複使用內部部署授權 hello 選項。</span><span class="sxs-lookup"><span data-stu-id="a627d-110">You also have hello option of manually installing SQL Server on a VM and reusing an on-premises license.</span></span> <span data-ttu-id="a627d-111">如果您自備授權，必須具備 [Azure 上透過軟體保證的授權流動性](https://azure.microsoft.com/pricing/license-mobility/)。</span><span class="sxs-lookup"><span data-stu-id="a627d-111">If you bring your own license, you must have [License Mobility through Software Assurance on Azure](https://azure.microsoft.com/pricing/license-mobility/).</span></span> <span data-ttu-id="a627d-112">如需詳細資訊，請參閱 [SQL Server Azure VM 的定價指導方針](virtual-machines-windows-sql-server-pricing-guidance.md)。</span><span class="sxs-lookup"><span data-stu-id="a627d-112">For more information, see [Pricing guidance for SQL Server Azure VMs](virtual-machines-windows-sql-server-pricing-guidance.md).</span></span>

1. <span data-ttu-id="a627d-113">**Hello SQL Vm 與 hello SQL Database 服務之間的差異為何？**</span><span class="sxs-lookup"><span data-stu-id="a627d-113">**What is hello difference between SQL VMs and hello SQL Database service?**</span></span>

    <span data-ttu-id="a627d-114">從概念上來說，在 Azure 虛擬機器上執行 SQL Server 與在遠端資料中心中執行 SQL Server 並沒什麼不同。</span><span class="sxs-lookup"><span data-stu-id="a627d-114">Conceptually, running SQL Server on an Azure virtual machine is not that different from running SQL Server in a remote datacenter.</span></span> <span data-ttu-id="a627d-115">對比之下， [SQL Database](../../../sql-database/sql-database-technical-overview.md) 可提供資料庫即服務的功能。</span><span class="sxs-lookup"><span data-stu-id="a627d-115">In contrast, [SQL Database](../../../sql-database/sql-database-technical-overview.md) offers database-as-a-service.</span></span> <span data-ttu-id="a627d-116">使用 SQL 資料庫時，您沒有存取 toohello 機器主控您的資料庫。</span><span class="sxs-lookup"><span data-stu-id="a627d-116">With SQL Database, you do not have access toohello machines that host your databases.</span></span> <span data-ttu-id="a627d-117">如需完整的比較，請參閱 [選擇雲端 SQL Server 選項：Azure SQL (PaaS) Database 或 Azure VM 上的 SQL Server (IaaS)](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md)。</span><span class="sxs-lookup"><span data-stu-id="a627d-117">For a full comparison, see [Choose a cloud SQL Server option: Azure SQL (PaaS) Database or SQL Server on Azure VMs (IaaS)](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md).</span></span>

1. <span data-ttu-id="a627d-118">**我要如何移轉我的內部部署 SQL Server 資料庫 toohello 雲端？**</span><span class="sxs-lookup"><span data-stu-id="a627d-118">**How can I migrate my on-premises SQL Server database toohello Cloud?**</span></span>

    <span data-ttu-id="a627d-119">首先，請使用 SQL Server 執行個體來建立 Azure 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="a627d-119">First create an Azure virtual machine with a SQL Server instance.</span></span> <span data-ttu-id="a627d-120">然後將移轉您的內部部署資料庫 toothat 執行個體。</span><span class="sxs-lookup"><span data-stu-id="a627d-120">Then migrate your on-premises databases toothat instance.</span></span> <span data-ttu-id="a627d-121">資料移轉策略，請參閱[移轉 Azure VM 中的伺服器的 SQL Server 資料庫 tooSQL](virtual-machines-windows-migrate-sql.md)。</span><span class="sxs-lookup"><span data-stu-id="a627d-121">For data migration strategies, see [Migrate a SQL Server database tooSQL Server in an Azure VM](virtual-machines-windows-migrate-sql.md).</span></span>

1. <span data-ttu-id="a627d-122">**可以安裝 SQL Server 的第二個執行個體上 hello 相同 VM？可以變更 hello 預設執行個體已安裝的功能嗎？**</span><span class="sxs-lookup"><span data-stu-id="a627d-122">**Can I install a second instance of SQL Server on hello same VM? Can I change installed features of hello default instance?**</span></span>

    <span data-ttu-id="a627d-123">是。</span><span class="sxs-lookup"><span data-stu-id="a627d-123">Yes.</span></span> <span data-ttu-id="a627d-124">hello SQL Server 安裝媒體位於 hello 上的資料夾中**C**磁碟機。</span><span class="sxs-lookup"><span data-stu-id="a627d-124">hello SQL Server installation media is located in a folder on hello **C** drive.</span></span> <span data-ttu-id="a627d-125">執行**Setup.exe**從該位置 tooadd 新 SQL Server 執行個體或 SQL Server 上 hello toochange 其他安裝功能。</span><span class="sxs-lookup"><span data-stu-id="a627d-125">Run **Setup.exe** from that location tooadd new SQL Server instances or toochange other installed features of SQL Server on hello machine.</span></span> <span data-ttu-id="a627d-126">請注意，某些功能，例如自動備份，自動修補和 Azure 金鑰保存庫整合，只對 hello 預設執行個體。</span><span class="sxs-lookup"><span data-stu-id="a627d-126">Note that some features, such as Automated Backup, Automated Patching, and Azure Key Vault Integration, only operate against hello default instance.</span></span>

1. <span data-ttu-id="a627d-127">**我可以解除安裝 SQL Server hello 預設執行個體嗎？**</span><span class="sxs-lookup"><span data-stu-id="a627d-127">**Can I uninstall hello default instance of SQL Server?**</span></span>

    <span data-ttu-id="a627d-128">是。</span><span class="sxs-lookup"><span data-stu-id="a627d-128">Yes.</span></span> <span data-ttu-id="a627d-129">但有一些考量。</span><span class="sxs-lookup"><span data-stu-id="a627d-129">But there are some considerations.</span></span> <span data-ttu-id="a627d-130">Hello 上一個答案，依賴 hello 功能中所述[SQL Server IaaS 代理程式延伸模組](virtual-machines-windows-sql-server-agent-extension.md)只 hello 預設執行個體上操作。</span><span class="sxs-lookup"><span data-stu-id="a627d-130">As stated in hello previous answer, features that rely on hello [SQL Server IaaS Agent Extension](virtual-machines-windows-sql-server-agent-extension.md) only operate on hello default instance.</span></span> <span data-ttu-id="a627d-131">如果您解除安裝 hello 預設執行個體，hello 延伸模組會持續 toolook，並可能會產生事件記錄檔錯誤。</span><span class="sxs-lookup"><span data-stu-id="a627d-131">If you uninstall hello default instance, hello extension continues toolook for it and may generate event log errors.</span></span> <span data-ttu-id="a627d-132">這些錯誤會從下列兩個來源的 hello: **Microsoft SQL Server 認證管理**和**Microsoft SQL Server IaaS Agent**。</span><span class="sxs-lookup"><span data-stu-id="a627d-132">These errors are from hello following two sources: **Microsoft SQL Server Credential Management** and **Microsoft SQL Server IaaS Agent**.</span></span> <span data-ttu-id="a627d-133">其中一個 hello 錯誤可能是類似 toohello 下列：</span><span class="sxs-lookup"><span data-stu-id="a627d-133">One of hello errors might be similar toohello following:</span></span>
    
        A network-related or instance-specific error occurred while establishing a connection tooSQL Server. hello server was not found or was not accessible. 
        
    <span data-ttu-id="a627d-134">如果您決定 toouninstall hello 預設執行個體，同時解除安裝 hello [SQL Server IaaS 代理程式延伸模組](virtual-machines-windows-sql-server-agent-extension.md)以及。</span><span class="sxs-lookup"><span data-stu-id="a627d-134">If you do decide toouninstall hello default instance, also uninstall hello [SQL Server IaaS Agent Extension](virtual-machines-windows-sql-server-agent-extension.md) as well.</span></span>

1. <span data-ttu-id="a627d-135">**如何升級 tooa 新版本/版的 hello Azure VM 中的 SQL Server？**</span><span class="sxs-lookup"><span data-stu-id="a627d-135">**How do I upgrade tooa new version/edition of hello SQL Server in an Azure VM?**</span></span>

    <span data-ttu-id="a627d-136">目前，在 Azure VM 中執行的 SQL Server 不提供任何就地升級。</span><span class="sxs-lookup"><span data-stu-id="a627d-136">Currently, there is no in-place upgrade for SQL Server running in an Azure VM.</span></span> <span data-ttu-id="a627d-137">使用所需的 hello SQL Server 版本/版時，建立新的 Azure 虛擬機器，然後再移轉資料庫 toohello 新的伺服器使用標準[資料移轉技術](virtual-machines-windows-migrate-sql.md)。</span><span class="sxs-lookup"><span data-stu-id="a627d-137">Create a new Azure virtual machine with hello desired SQL Server version/edition, and then migrate your databases toohello new server using standard [data migration techniques](virtual-machines-windows-migrate-sql.md).</span></span>

1. <span data-ttu-id="a627d-138">**如何在 Azure VM 上安裝 SQL Server 授權版本？**</span><span class="sxs-lookup"><span data-stu-id="a627d-138">**How can I install my licensed copy of SQL Server on an Azure VM?**</span></span>

    <span data-ttu-id="a627d-139">有兩種方式 toodo 這。</span><span class="sxs-lookup"><span data-stu-id="a627d-139">There are two ways toodo this.</span></span> <span data-ttu-id="a627d-140">您可以佈建一個 hello[支援授權的虛擬機器映像](virtual-machines-windows-sql-server-iaas-overview.md#BYOL)。</span><span class="sxs-lookup"><span data-stu-id="a627d-140">You can provision one of hello [virtual machine images that supports licenses](virtual-machines-windows-sql-server-iaas-overview.md#BYOL).</span></span> <span data-ttu-id="a627d-141">另一個選項是 toocopy hello SQL Server 安裝媒體 tooa Windows Server VM，，然後在 hello VM 上安裝 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="a627d-141">Another option is toocopy hello SQL Server installation media tooa Windows Server VM, and then install SQL Server on hello VM.</span></span> <span data-ttu-id="a627d-142">基於授權原因，您必須具備 [Azure 上透過軟體保證的授權流動性](https://azure.microsoft.com/pricing/license-mobility/)。</span><span class="sxs-lookup"><span data-stu-id="a627d-142">For licensing reasons, you must have [License Mobility through Software Assurance on Azure](https://azure.microsoft.com/pricing/license-mobility/).</span></span> <span data-ttu-id="a627d-143">如需詳細資訊，請參閱 [SQL Server Azure VM 的定價指導方針](virtual-machines-windows-sql-server-pricing-guidance.md)。</span><span class="sxs-lookup"><span data-stu-id="a627d-143">For more information, see [Pricing guidance for SQL Server Azure VMs](virtual-machines-windows-sql-server-pricing-guidance.md).</span></span>

1. <span data-ttu-id="a627d-144">**我可以變更 VM toouse 我自己的 SQL Server 授權如果所建立的其中一個 hello 隨用隨付圖庫映像嗎？**</span><span class="sxs-lookup"><span data-stu-id="a627d-144">**Can I change a VM toouse my own SQL Server license if it was created from one of hello pay-as-you-go gallery images?**</span></span>

    <span data-ttu-id="a627d-145">否。</span><span class="sxs-lookup"><span data-stu-id="a627d-145">No.</span></span> <span data-ttu-id="a627d-146">您可以切換支付每分鐘授權 toousing 從自己的授權。</span><span class="sxs-lookup"><span data-stu-id="a627d-146">You can not switch from pay-per-minute licensing toousing your own license.</span></span> <span data-ttu-id="a627d-147">建立新 Azure 虛擬機器使用其中一種 hello [BYOL 映像](virtual-machines-windows-sql-server-iaas-overview.md#BYOL)，然後再移轉資料庫 toohello 新的伺服器使用標準[資料移轉技術](virtual-machines-windows-migrate-sql.md)。</span><span class="sxs-lookup"><span data-stu-id="a627d-147">Create a new Azure virtual machine using one of hello [BYOL images](virtual-machines-windows-sql-server-iaas-overview.md#BYOL), and then migrate your databases toohello new server using standard [data migration techniques](virtual-machines-windows-migrate-sql.md).</span></span>

1. <span data-ttu-id="a627d-148">**Azure VM 上是否支援 SQL Server 容錯移轉叢集執行個體 (FCI)？**</span><span class="sxs-lookup"><span data-stu-id="a627d-148">**Are SQL Server Failover Cluster Instances (FCI) supported on Azure VMs?**</span></span>

   <span data-ttu-id="a627d-149">是。</span><span class="sxs-lookup"><span data-stu-id="a627d-149">Yes.</span></span> <span data-ttu-id="a627d-150">您可以[建立 Windows 容錯移轉叢集 Windows Server 2016 上](virtual-machines-windows-portal-sql-create-failover-cluster.md)及 hello 叢集存放區用於儲存空間直接存取 (S2D)。</span><span class="sxs-lookup"><span data-stu-id="a627d-150">You can [create a Windows Failover Cluster on Windows Server 2016](virtual-machines-windows-portal-sql-create-failover-cluster.md) and use Storage Spaces Direct (S2D) for hello cluster storage.</span></span> <span data-ttu-id="a627d-151">或者，您可以使用 [Azure 虛擬機器中的 SQL Server 的高可用性和災害復原](virtual-machines-windows-sql-high-availability-dr.md#azure-only-high-availability-solutions)中所述的協力廠商叢集或儲存體解決方案。</span><span class="sxs-lookup"><span data-stu-id="a627d-151">Alternatively, you can use third-party clustering or storage solutions as described in [High availability and disaster recovery for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-high-availability-dr.md#azure-only-high-availability-solutions).</span></span>

1. <span data-ttu-id="a627d-152">**如果只待命/容錯移轉使用是否有 toopay toolicense Azure VM 上的 SQL Server？**</span><span class="sxs-lookup"><span data-stu-id="a627d-152">**Do I have toopay toolicense SQL Server on an Azure VM if it is only being used for standby/failover?**</span></span>

    <span data-ttu-id="a627d-153">您不需要 toopay toolicense 一個 SQL Server 參與為被動的次要複本在 HA 部署中，如果您擁有軟體保證和中所述，使用的授權流動性[虛擬機器授權常見問題集](http://azure.microsoft.com/pricing/licensing-faq/)。</span><span class="sxs-lookup"><span data-stu-id="a627d-153">You do not have toopay toolicense one SQL Server participating as a passive secondary replica in an HA deployment, if you have Software Assurance and use License Mobility as described in [Virtual Machine Licensing FAQ](http://azure.microsoft.com/pricing/licensing-faq/).</span></span>

1. <span data-ttu-id="a627d-154">**如何將更新和 Service Pack 套用到 SQL Server VM 上？**</span><span class="sxs-lookup"><span data-stu-id="a627d-154">**How are updates and service packs applied on a SQL Server VM?**</span></span>

    <span data-ttu-id="a627d-155">虛擬機器可讓您控制 hello 主機電腦，包括何時及如何套用更新。</span><span class="sxs-lookup"><span data-stu-id="a627d-155">Virtual machines give you control over hello host machine, including when and how you apply updates.</span></span> <span data-ttu-id="a627d-156">Hello 作業系統，您可以手動套用 windows 更新，或者您可以啟用排程的服務呼叫[自動修補](virtual-machines-windows-sql-automated-patching.md)。</span><span class="sxs-lookup"><span data-stu-id="a627d-156">For hello operating system, you can manually apply windows updates, or you can enable a scheduling service called [Automated Patching](virtual-machines-windows-sql-automated-patching.md).</span></span> <span data-ttu-id="a627d-157">自動修補會安裝任何標示為重要的更新，包括該類別目錄中的 SQL Server 更新。</span><span class="sxs-lookup"><span data-stu-id="a627d-157">Automated Patching installs any updates that are marked important, including SQL Server updates in that category.</span></span> <span data-ttu-id="a627d-158">伺服器必須手動安裝其他選用的更新 tooSQL。</span><span class="sxs-lookup"><span data-stu-id="a627d-158">Other optional updates tooSQL Server must be installed manually.</span></span>

1. <span data-ttu-id="a627d-159">**它是不會顯示 hello （適用於 Windows 2008 R2 範例 + SQL Server 2012） 的虛擬機器映像庫中的組態設定可能 tooset 嗎？**</span><span class="sxs-lookup"><span data-stu-id="a627d-159">**Is it possible tooset up configurations not shown in hello virtual machine gallery (For example Windows 2008 R2 + SQL Server 2012)?**</span></span>

    <span data-ttu-id="a627d-160">否。</span><span class="sxs-lookup"><span data-stu-id="a627d-160">No.</span></span> <span data-ttu-id="a627d-161">針對包含 SQL Server 虛擬機器圖庫映像，您必須選取其中一個 hello 提供映像。</span><span class="sxs-lookup"><span data-stu-id="a627d-161">For virtual machine gallery images that include SQL Server, you must select one of hello provided images.</span></span>

1. <span data-ttu-id="a627d-162">**如何在 Azure VM 上安裝 SQL 資料工具？**</span><span class="sxs-lookup"><span data-stu-id="a627d-162">**How do I install SQL Data tools on my Azure VM?**</span></span>

     <span data-ttu-id="a627d-163">下載並安裝從 hello SQL Data tools [Microsoft SQL Server Data Tools-Business Intelligence for Visual Studio 2013](https://www.microsoft.com/en-us/download/details.aspx?id=42313)。</span><span class="sxs-lookup"><span data-stu-id="a627d-163">Download and install hello SQL Data tools from [Microsoft SQL Server Data Tools - Business Intelligence for Visual Studio 2013](https://www.microsoft.com/en-us/download/details.aspx?id=42313).</span></span>

## <a name="resources"></a><span data-ttu-id="a627d-164">資源</span><span class="sxs-lookup"><span data-stu-id="a627d-164">Resources</span></span>

<span data-ttu-id="a627d-165">如需 SQL Server 在 Azure 虛擬機器的概觀，請觀看影片，hello [Azure VM 是 SQL Server 2016 hello 最佳平台](https://channel9.msdn.com/Events/DataDriven/SQLServer2016/Azure-VM-is-the-best-platform-for-SQL-Server-2016)。</span><span class="sxs-lookup"><span data-stu-id="a627d-165">For an overview of SQL Server on Azure Virtual Machines, watch hello video [Azure VM is hello best platform for SQL Server 2016](https://channel9.msdn.com/Events/DataDriven/SQLServer2016/Azure-VM-is-the-best-platform-for-SQL-Server-2016).</span></span> <span data-ttu-id="a627d-166">您也可以在 hello 主題中，取得絕佳的簡介[Azure 虛擬機器上的 SQL Server](virtual-machines-windows-sql-server-iaas-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="a627d-166">You can also get a good introduction in hello topic, [SQL Server on Azure Virtual Machines overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

<span data-ttu-id="a627d-167">其他資源包括：</span><span class="sxs-lookup"><span data-stu-id="a627d-167">Other resources include:</span></span>

* [<span data-ttu-id="a627d-168">佈建 hello Azure 入口網站中的 SQL Server 虛擬機器</span><span class="sxs-lookup"><span data-stu-id="a627d-168">Provision a SQL Server virtual machine in hello Azure Portal</span></span>](virtual-machines-windows-portal-sql-server-provision.md)
* [<span data-ttu-id="a627d-169">移轉資料庫 tooSQL Azure VM 上的伺服器</span><span class="sxs-lookup"><span data-stu-id="a627d-169">Migrating a Database tooSQL Server on an Azure VM</span></span>](virtual-machines-windows-migrate-sql.md)
* [<span data-ttu-id="a627d-170">Azure 虛擬機器中的 SQL Server 高可用性和災害復原</span><span class="sxs-lookup"><span data-stu-id="a627d-170">High Availability and Disaster Recovery for SQL Server in Azure Virtual Machines</span></span>](virtual-machines-windows-sql-high-availability-dr.md)
* [<span data-ttu-id="a627d-171">Azure 虛擬機器中的 SQL Server 效能最佳做法</span><span class="sxs-lookup"><span data-stu-id="a627d-171">Performance best practices for SQL Server in Azure Virtual Machines</span></span>](virtual-machines-windows-sql-performance.md)
* [<span data-ttu-id="a627d-172">Azure 虛擬機器中的 SQL Server 應用程式模式和開發策略</span><span class="sxs-lookup"><span data-stu-id="a627d-172">Application Patterns and Development Strategies for SQL Server in Azure Virtual Machines</span></span>](virtual-machines-windows-sql-server-app-patterns-dev-strategies.md) 