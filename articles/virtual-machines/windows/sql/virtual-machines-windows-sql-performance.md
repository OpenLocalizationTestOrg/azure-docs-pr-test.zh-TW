---
title: "aaaPerformance Azure 中的 SQL Server 的最佳作法 |Microsoft 文件"
description: "提供將 Microsoft Azure VM 中 SQL Server 效能最佳化的最佳作法。"
services: virtual-machines-windows
documentationcenter: na
author: rothja
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: a0c85092-2113-4982-b73a-4e80160bac36
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 06/27/2017
ms.author: jroth
ms.openlocfilehash: 42ec9fbeb2dec3a654b93bbd08d666369835ee73
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="performance-best-practices-for-sql-server-in-azure-virtual-machines"></a><span data-ttu-id="6f8f7-103">Azure 虛擬機器中的 SQL Server 效能最佳做法</span><span class="sxs-lookup"><span data-stu-id="6f8f7-103">Performance best practices for SQL Server in Azure Virtual Machines</span></span>

## <a name="overview"></a><span data-ttu-id="6f8f7-104">Overview</span><span class="sxs-lookup"><span data-stu-id="6f8f7-104">Overview</span></span>

<span data-ttu-id="6f8f7-105">本主題提供將「Microsoft Azure 虛擬機器」中的 SQL Server 效能最佳化的最佳做法。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-105">This topic provides best practices for optimizing SQL Server performance in Microsoft Azure Virtual Machine.</span></span> <span data-ttu-id="6f8f7-106">在 Azure 虛擬機器中執行 SQL Server，我們建議您繼續使用 hello 相同資料庫效能微調適用 tooSQL 伺服器在內部部署伺服器環境中的選項。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-106">While running SQL Server in Azure Virtual Machines, we recommend that you continue using hello same database performance tuning options that are applicable tooSQL Server in on-premises server environment.</span></span> <span data-ttu-id="6f8f7-107">不過，在公用雲端中的關聯式資料庫的 hello 效能取決於許多因素，例如 hello 的虛擬機器和 hello 設定 hello 資料磁碟的大小。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-107">However, hello performance of a relational database in a public cloud depends on many factors such as hello size of a virtual machine, and hello configuration of hello data disks.</span></span>

<span data-ttu-id="6f8f7-108">建立 SQL Server 影像時[佈建 hello Azure 入口網站中的 Vm，請考慮](virtual-machines-windows-portal-sql-server-provision.md)。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-108">When creating SQL Server images, [consider provisioning your VMs in hello Azure portal](virtual-machines-windows-portal-sql-server-provision.md).</span></span> <span data-ttu-id="6f8f7-109">SQL Server Vm 佈建 hello 入口網站與資源管理員中實作所有這些最佳做法，包括 hello 存放裝置設定。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-109">SQL Server VMs provisioned in hello Portal with Resource Manager implement all these best practices, including hello storage configuration.</span></span>

<span data-ttu-id="6f8f7-110">本文著重於取得 hello*最佳*Azure Vm 上的 SQL Server 的效能。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-110">This article is focused on getting hello *best* performance for SQL Server on Azure VMs.</span></span> <span data-ttu-id="6f8f7-111">如果您的工作負載需求較低，可能就不需要採用下列每一項最佳化條件。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-111">If your workload is less demanding, you might not require every optimization listed below.</span></span> <span data-ttu-id="6f8f7-112">評估以下建議時，請考慮您的效能需求和工作負載模式。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-112">Consider your performance needs and workload patterns as you evaluate these recommendations.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="quick-check-list"></a><span data-ttu-id="6f8f7-113">快速檢查清單</span><span class="sxs-lookup"><span data-stu-id="6f8f7-113">Quick check list</span></span>

<span data-ttu-id="6f8f7-114">hello 以下是為了達到最佳效能的 Azure 虛擬機器上的 SQL Server 的快速檢查清單：</span><span class="sxs-lookup"><span data-stu-id="6f8f7-114">hello following is a quick check list for optimal performance of SQL Server on Azure Virtual Machines:</span></span>

| <span data-ttu-id="6f8f7-115">領域</span><span class="sxs-lookup"><span data-stu-id="6f8f7-115">Area</span></span> | <span data-ttu-id="6f8f7-116">最佳化</span><span class="sxs-lookup"><span data-stu-id="6f8f7-116">Optimizations</span></span> |
| --- | --- |
| [<span data-ttu-id="6f8f7-117">VM 大小</span><span class="sxs-lookup"><span data-stu-id="6f8f7-117">VM size</span></span>](#vm-size-guidance) |<span data-ttu-id="6f8f7-118">SQL Enterprise Edition 的 [DS3](../../virtual-machines-windows-sizes-memory.md) 或更高版本。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-118">[DS3](../../virtual-machines-windows-sizes-memory.md) or higher for SQL Enterprise edition.</span></span><br/><br/><span data-ttu-id="6f8f7-119">SQL Standard 和 Web Edition 的 [DS2](../../virtual-machines-windows-sizes-memory.md) 或更高版本。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-119">[DS2](../../virtual-machines-windows-sizes-memory.md) or higher for SQL Standard and Web editions.</span></span> |
| [<span data-ttu-id="6f8f7-120">儲存體</span><span class="sxs-lookup"><span data-stu-id="6f8f7-120">Storage</span></span>](#storage-guidance) |<span data-ttu-id="6f8f7-121">使用[進階儲存體](../../../storage/common/storage-premium-storage.md)。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-121">Use [Premium Storage](../../../storage/common/storage-premium-storage.md).</span></span> <span data-ttu-id="6f8f7-122">標準儲存體只建議用於開發/測試。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-122">Standard storage is only recommended for dev/test.</span></span><br/><br/><span data-ttu-id="6f8f7-123">保留 hello[儲存體帳戶](../../../storage/common/storage-create-storage-account.md)與 hello 中的 SQL Server VM 相同的區域。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-123">Keep hello [storage account](../../../storage/common/storage-create-storage-account.md) and SQL Server VM in hello same region.</span></span><br/><br/><span data-ttu-id="6f8f7-124">停用 Azure[地理備援儲存體](../../../storage/common/storage-redundancy.md)（地理複寫） hello 儲存體帳戶上。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-124">Disable Azure [geo-redundant storage](../../../storage/common/storage-redundancy.md) (geo-replication) on hello storage account.</span></span> |
| [<span data-ttu-id="6f8f7-125">磁碟</span><span class="sxs-lookup"><span data-stu-id="6f8f7-125">Disks</span></span>](#disks-guidance) |<span data-ttu-id="6f8f7-126">使用至少 2 個 [P30 磁碟](../../../storage/common/storage-premium-storage.md#scalability-and-performance-targets) (1 個用於儲存記錄檔案，另 1 個用於儲存資料檔案和存放 TempDB)。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-126">Use a minimum of 2 [P30 disks](../../../storage/common/storage-premium-storage.md#scalability-and-performance-targets) (1 for log files; 1 for data files and TempDB).</span></span><br/><br/><span data-ttu-id="6f8f7-127">避免使用作業系統或暫存磁碟作為資料儲存體或進行記錄。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-127">Avoid using operating system or temporary disks for database storage or logging.</span></span><br/><br/><span data-ttu-id="6f8f7-128">啟用 hello hello 資料檔和 TempDB 所裝載的磁碟上的讀取快取。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-128">Enable read caching on hello disk(s) hosting hello data files and TempDB.</span></span><br/><br/><span data-ttu-id="6f8f7-129">請勿啟用裝載 hello 記錄檔的磁碟上快取。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-129">Do not enable caching on disk(s) hosting hello log file.</span></span><br/><br/><span data-ttu-id="6f8f7-130">重要事項： 停止變更 hello Azure VM 磁碟的快取設定時的 hello SQL Server 服務。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-130">Important: Stop hello SQL Server service when changing hello cache settings for an Azure VM disk.</span></span><br/><br/><span data-ttu-id="6f8f7-131">等量分割多個 Azure 資料磁碟 tooget 提高 IO 輸送量。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-131">Stripe multiple Azure data disks tooget increased IO throughput.</span></span><br/><br/><span data-ttu-id="6f8f7-132">以文件上記載的配置大小格式化。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-132">Format with documented allocation sizes.</span></span> |
| [<span data-ttu-id="6f8f7-133">I/O</span><span class="sxs-lookup"><span data-stu-id="6f8f7-133">I/O</span></span>](#io-guidance) |<span data-ttu-id="6f8f7-134">啟用 [資料庫頁面壓縮] 功能　。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-134">Enable database page compression.</span></span><br/><br/><span data-ttu-id="6f8f7-135">針對資料檔案，啟用 [立即檔案初始化] 功能。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-135">Enable instant file initialization for data files.</span></span><br/><br/><span data-ttu-id="6f8f7-136">限制或停用 hello 資料庫上的自動成長。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-136">Limit or disable autogrow on hello database.</span></span><br/><br/><span data-ttu-id="6f8f7-137">停用 autoshrink hello 資料庫上。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-137">Disable autoshrink on hello database.</span></span><br/><br/><span data-ttu-id="6f8f7-138">移動所有資料庫 toodata 磁碟，包括系統資料庫。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-138">Move all databases toodata disks, including system databases.</span></span><br/><br/><span data-ttu-id="6f8f7-139">移動 SQL Server 錯誤記錄檔和追蹤檔案目錄 toodata 磁碟。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-139">Move SQL Server error log and trace file directories toodata disks.</span></span><br/><br/><span data-ttu-id="6f8f7-140">設定預設備份和資料庫檔案位置。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-140">Setup default backup and database file locations.</span></span><br/><br/><span data-ttu-id="6f8f7-141">啟用鎖定的頁面。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-141">Enable locked pages.</span></span><br/><br/><span data-ttu-id="6f8f7-142">套用 SQL Server 效能修正程式。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-142">Apply SQL Server performance fixes.</span></span> |
| [<span data-ttu-id="6f8f7-143">特定功能</span><span class="sxs-lookup"><span data-stu-id="6f8f7-143">Feature specific</span></span>](#feature-specific-guidance) |<span data-ttu-id="6f8f7-144">將備份直接 tooblob 儲存體。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-144">Back up directly tooblob storage.</span></span> |

<span data-ttu-id="6f8f7-145">如需有關*如何*和*為什麼*toomake 這些最佳化，請檢閱 hello 詳細資料和下列各節將提供的指引。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-145">For more information on *how* and *why* toomake these optimizations, please review hello details and guidance provided in following sections.</span></span>

## <a name="vm-size-guidance"></a><span data-ttu-id="6f8f7-146">VM 大小指引</span><span class="sxs-lookup"><span data-stu-id="6f8f7-146">VM size guidance</span></span>

<span data-ttu-id="6f8f7-147">對於效能敏感應用程式，建議您使用 hello 下列[虛擬機器大小](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json):</span><span class="sxs-lookup"><span data-stu-id="6f8f7-147">For performance sensitive applications, it’s recommended that you use hello following [virtual machines sizes](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json):</span></span>

* <span data-ttu-id="6f8f7-148">**SQL Server Enterprise Edition**：DS3 或更高版本</span><span class="sxs-lookup"><span data-stu-id="6f8f7-148">**SQL Server Enterprise Edition**: DS3 or higher</span></span>
* <span data-ttu-id="6f8f7-149">**SQL Server Standard 和 Web Edition**：DS2 或更高版本</span><span class="sxs-lookup"><span data-stu-id="6f8f7-149">**SQL Server Standard and Web Editions**: DS2 or higher</span></span>

## <a name="storage-guidance"></a><span data-ttu-id="6f8f7-150">儲存體指引</span><span class="sxs-lookup"><span data-stu-id="6f8f7-150">Storage guidance</span></span>

<span data-ttu-id="6f8f7-151">DS 系列 (以及 DSv2 系列和 GS 系列) VM 支援 [進階儲存體](../../../storage/common/storage-premium-storage.md)。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-151">DS-series (along with DSv2-series and GS-series) VMs support [Premium Storage](../../../storage/common/storage-premium-storage.md).</span></span> <span data-ttu-id="6f8f7-152">針對所有生產環境工作負載，建議使用進階儲存體。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-152">Premium Storage is recommended for all production workloads.</span></span>

> [!WARNING]
> <span data-ttu-id="6f8f7-153">標準儲存體具有不同的延遲和頻寬，並建議僅用於開發/測試工作負載。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-153">Standard Storage has varying latencies and bandwidth and is only recommended for dev/test workloads.</span></span> <span data-ttu-id="6f8f7-154">生產工作負載應該使用進階儲存體。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-154">Production workloads should use Premium Storage.</span></span>

<span data-ttu-id="6f8f7-155">此外，我們建議您建立 Azure 儲存體帳戶，在 hello 與 SQL Server 虛擬機器 tooreduce 傳輸延遲的相同資料中心。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-155">In addition, we recommend that you create your Azure storage account in hello same data center as your SQL Server virtual machines tooreduce transfer delays.</span></span> <span data-ttu-id="6f8f7-156">建立儲存體帳戶時，請停用 [異地複寫] 功能，因為跨多個磁碟時無法保證寫入順序一致。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-156">When creating a storage account, disable geo-replication as consistent write order across multiple disks is not guaranteed.</span></span> <span data-ttu-id="6f8f7-157">請考慮另一個方法，在兩個 Azure 資料中心之間設定 SQL Server 災害復原技術。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-157">Instead, consider configuring a SQL Server disaster recovery technology between two Azure data centers.</span></span> <span data-ttu-id="6f8f7-158">如需詳細資訊，請參閱 [Azure 虛擬機器中的 SQL Server 高可用性和災害復原](virtual-machines-windows-sql-high-availability-dr.md)。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-158">For more information, see [High Availability and Disaster Recovery for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-high-availability-dr.md).</span></span>

## <a name="disks-guidance"></a><span data-ttu-id="6f8f7-159">磁碟指引</span><span class="sxs-lookup"><span data-stu-id="6f8f7-159">Disks guidance</span></span>

<span data-ttu-id="6f8f7-160">Azure VM 上有三種主要的磁碟類型︰</span><span class="sxs-lookup"><span data-stu-id="6f8f7-160">There are three main disk types on an Azure VM:</span></span>

* <span data-ttu-id="6f8f7-161">**作業系統磁碟**: hello 平台當您建立 Azure 虛擬機器時，將連接至少一個磁碟 (標示為 「 hello **C**磁碟機) toohello VM 的作業系統磁碟。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-161">**OS disk**: When you create an Azure Virtual Machine, hello platform will attach at least one disk (labeled as hello **C** drive) toohello VM for your operating system disk.</span></span> <span data-ttu-id="6f8f7-162">此磁碟是以分頁 Blob 的形式儲存於儲存體的 VHD。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-162">This disk is a VHD stored as a page blob in storage.</span></span>
* <span data-ttu-id="6f8f7-163">**暫存磁碟**: Azure 虛擬機器包含稱為 hello 暫存磁碟的另一個磁碟 (標示為 「 hello **D**： 磁碟機)。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-163">**Temporary disk**: Azure Virtual Machines contain another disk called hello temporary disk (labeled as hello **D**: drive).</span></span> <span data-ttu-id="6f8f7-164">這是可用來塗銷空間的 hello 節點上的磁碟。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-164">This is a disk on hello node that can be used for scratch space.</span></span>
* <span data-ttu-id="6f8f7-165">**資料磁碟**： 您也可以附加額外的磁碟 tooyour 虛擬機器做為資料磁碟，而且這些將會儲存在儲存體中做為分頁 blob。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-165">**Data disks**: You can also attach additional disks tooyour virtual machine as data disks, and these will be stored in storage as page blobs.</span></span>

<span data-ttu-id="6f8f7-166">hello 下列章節說明使用這些不同的磁碟的建議。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-166">hello following sections describe recommendations for using these different disks.</span></span>

### <a name="operating-system-disk"></a><span data-ttu-id="6f8f7-167">作業系統磁碟</span><span class="sxs-lookup"><span data-stu-id="6f8f7-167">Operating system disk</span></span>

<span data-ttu-id="6f8f7-168">作業系統磁碟是指可開機，並掛接為執行的作業系統版本，且標示為 **C** 磁碟機的 VHD。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-168">An operating system disk is a VHD that you can boot and mount as a running version of an operating system and is labeled as **C** drive.</span></span>

<span data-ttu-id="6f8f7-169">快取原則 hello 作業系統磁碟上的預設值是**讀/寫**。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-169">Default caching policy on hello operating system disk is **Read/Write**.</span></span> <span data-ttu-id="6f8f7-170">對於效能敏感應用程式，我們建議您使用資料磁碟而非 hello 作業系統磁碟。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-170">For performance sensitive applications, we recommend that you use data disks instead of hello operating system disk.</span></span> <span data-ttu-id="6f8f7-171">請參閱以下的資料磁碟 hello 一節。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-171">See hello section on Data Disks below.</span></span>

### <a name="temporary-disk"></a><span data-ttu-id="6f8f7-172">暫存磁碟</span><span class="sxs-lookup"><span data-stu-id="6f8f7-172">Temporary disk</span></span>

<span data-ttu-id="6f8f7-173">hello 暫存磁碟機，標示為 「 hello **D**： 磁碟機，不是保存的 tooAzure blob 儲存體。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-173">hello temporary storage drive, labeled as hello **D**: drive, is not persisted tooAzure blob storage.</span></span> <span data-ttu-id="6f8f7-174">不會儲存您的使用者資料庫檔案或使用者交易記錄檔上 hello **D**： 磁碟機。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-174">Do not store your user database files or user transaction log files on hello **D**: drive.</span></span>

<span data-ttu-id="6f8f7-175">D 系列、 Dv2 系列和 G 系列 Vm，hello 這些 Vm 上的暫存磁碟機是以 SSD 為基礎。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-175">For D-series, Dv2-series, and G-series VMs, hello temporary drive on these VMs is SSD-based.</span></span> <span data-ttu-id="6f8f7-176">如果您的工作負載 （例如，用於暫存物件或複雜聯結），大量使用 TempDB 儲存 TempDB 上 hello **D**磁碟機可能會導致較高的 TempDB 輸送量並降低 TempDB 延遲。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-176">If your workload makes heavy use of TempDB (e.g. for temporary objects or complex joins), storing TempDB on hello **D** drive could result in higher TempDB throughput and lower TempDB latency.</span></span>

<span data-ttu-id="6f8f7-177">對於支援「進階儲存體」的 VM (DS 系列、DSv2 系列與 GS 系列)，建議您將 TempDB 儲存在支援「進階儲存體」且啟用讀取快取的磁碟上。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-177">For VMs that support Premium Storage (DS-series, DSv2-series, and GS-series), we recommend storing TempDB on a disk that supports Premium Storage with read caching enabled.</span></span> <span data-ttu-id="6f8f7-178">沒有例外狀況 toothis 建議的做法之一。如果 TempDB 使用量是密集寫入，您可以達到較高的效能 hello 本機上儲存 TempDB **D**磁碟機，這也是 ssd 這些機器的大小。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-178">There is one exception toothis recommendation; if your TempDB usage is write-intensive, you can achieve higher performance by storing TempDB on hello local **D** drive, which is also SSD-based on these machine sizes.</span></span>

### <a name="data-disks"></a><span data-ttu-id="6f8f7-179">資料磁碟</span><span class="sxs-lookup"><span data-stu-id="6f8f7-179">Data disks</span></span>

* <span data-ttu-id="6f8f7-180">**用於資料和記錄檔中的資料磁碟**： 最少使用 2 高階儲存體[P30 磁碟](../../../storage/common/storage-premium-storage.md#scalability-and-performance-targets)其中一個磁碟包含 hello 記錄檔，而其他 hello 包含 hello 資料和 TempDB 檔案。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-180">**Use data disks for data and log files**: At a minimum, use 2 Premium Storage [P30 disks](../../../storage/common/storage-premium-storage.md#scalability-and-performance-targets) where one disk contains hello log file(s) and hello other contains hello data and TempDB file(s).</span></span> <span data-ttu-id="6f8f7-181">每個高階儲存體磁碟提供許多 IOPs 與頻寬 (MB/s)，其大小，而定，hello 下列文章中所述：[使用進階儲存體磁碟](../../../storage/common/storage-premium-storage.md)。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-181">Each Premium Storage disk provides a number of IOPs and bandwidth (MB/s) depending on its size, as described in hello following article: [Using Premium Storage for Disks](../../../storage/common/storage-premium-storage.md).</span></span>

* <span data-ttu-id="6f8f7-182">**磁碟等量分割**︰如需更多的輸送量，您可以新增其他資料磁碟，並使用「磁碟等量分割」。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-182">**Disk Striping**: For more throughput, you can add additional data disks and use Disk Striping.</span></span> <span data-ttu-id="6f8f7-183">toodetermine hello 資料磁碟數目，您需要 IOPS 和您的記錄檔，以及您的資料和 TempDB 檔案所需的頻寬 tooanalyze hello 數目。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-183">toodetermine hello number of data disks, you need tooanalyze hello number of IOPS and bandwidth required for your log file(s), and for your data and TempDB file(s).</span></span> <span data-ttu-id="6f8f7-184">請注意，不同的 VM 大小就會有不同的限制之 IOPs 及支援頻寬的 hello 數目，請參閱上每個 IOPS hello 資料表[VM 大小](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-184">Notice that different VM sizes have different limits on hello number of IOPs and bandwidth supported, see hello tables on IOPS per [VM size](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span> <span data-ttu-id="6f8f7-185">使用下列指導方針的 hello:</span><span class="sxs-lookup"><span data-stu-id="6f8f7-185">Use hello following guidelines:</span></span>

  * <span data-ttu-id="6f8f7-186">對於 Windows 8/Windows Server 2012 或更新版本，使用[儲存空間](https://technet.microsoft.com/library/hh831739.aspx)以 hello 指導方針：</span><span class="sxs-lookup"><span data-stu-id="6f8f7-186">For Windows 8/Windows Server 2012 or later, use [Storage Spaces](https://technet.microsoft.com/library/hh831739.aspx) with hello following guidelines:</span></span>

      1. <span data-ttu-id="6f8f7-187">設定 hello 交錯 （等量磁碟區大小） too64 KB （65536 個位元組） 針對 OLTP 工作負載和資料倉儲工作負載 tooavoid 效能影響由於 toopartition 對齊錯誤 256 KB （262144 位元組為單位）。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-187">Set hello interleave (stripe size) too64 KB (65536 bytes) for OLTP workloads and 256 KB (262144 bytes) for data warehousing workloads tooavoid performance impact due toopartition misalignment.</span></span> <span data-ttu-id="6f8f7-188">必須使用 PowerShell 來設定。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-188">This must be set with PowerShell.</span></span>
      1. <span data-ttu-id="6f8f7-189">設定資料行數目 = 實體磁碟數量。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-189">Set column count = number of physical disks.</span></span> <span data-ttu-id="6f8f7-190">設定 8 個以上的磁碟 (不是伺服器管理員 UI) 時，使用 PowerShell。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-190">Use PowerShell when configuring more than 8 disks (not Server Manager UI).</span></span> 

    <span data-ttu-id="6f8f7-191">例如，下列 PowerShell hello 建立新儲存集區以 hello 交錯大小 too64 KB hello 數目及資料行 too2:</span><span class="sxs-lookup"><span data-stu-id="6f8f7-191">For example, hello following PowerShell creates a new storage pool with hello interleave size too64 KB and hello number of columns too2:</span></span>

    ```powershell
    $PoolCount = Get-PhysicalDisk -CanPool $True
    $PhysicalDisks = Get-PhysicalDisk | Where-Object {$_.FriendlyName -like "*2" -or $_.FriendlyName -like "*3"}

    New-StoragePool -FriendlyName "DataFiles" -StorageSubsystemFriendlyName "Storage Spaces*" -PhysicalDisks $PhysicalDisks | New-VirtualDisk -FriendlyName "DataFiles" -Interleave 65536 -NumberOfColumns 2 -ResiliencySettingName simple –UseMaximumSize |Initialize-Disk -PartitionStyle GPT -PassThru |New-Partition -AssignDriveLetter -UseMaximumSize |Format-Volume -FileSystem NTFS -NewFileSystemLabel "DataDisks" -AllocationUnitSize 65536 -Confirm:$false 
    ```

  * <span data-ttu-id="6f8f7-192">Windows 2008 R2 或更早版本，您可以使用動態磁碟 （OS 等量磁碟區），而且 hello 等量磁碟區大小一律是 64 KB。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-192">For Windows 2008 R2 or earlier, you can use dynamic disks (OS striped volumes) and hello stripe size is always 64 KB.</span></span> <span data-ttu-id="6f8f7-193">請注意，Windows 8/Windows Server 2012 已不再提供此選項。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-193">Note that this option is deprecated as of Windows 8/Windows Server 2012.</span></span> <span data-ttu-id="6f8f7-194">詳細資訊，請參閱 hello 支援聲明[虛擬磁碟服務正轉換 tooWindows 存放管理 API](https://msdn.microsoft.com/library/windows/desktop/hh848071.aspx)。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-194">For information, see hello support statement at [Virtual Disk Service is transitioning tooWindows Storage Management API](https://msdn.microsoft.com/library/windows/desktop/hh848071.aspx).</span></span>

  * <span data-ttu-id="6f8f7-195">如果您的工作負載不需大量記錄及，且不需專屬於 IOP，您可以只設定一個儲存體集區。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-195">If your workload is not log intensive and does not need dedicated IOPs, you can configure just one storage pool.</span></span> <span data-ttu-id="6f8f7-196">否則，建立兩個儲存集區，一個用於 hello 記錄檔，另一個儲存集區 hello 資料檔和 TempDB。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-196">Otherwise, create two storage pools, one for hello log file(s) and another storage pool for hello data file(s) and TempDB.</span></span> <span data-ttu-id="6f8f7-197">判斷 hello 根據您的負載預期每個儲存體集區相關聯的磁碟數目。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-197">Determine hello number of disks associated with each storage pool based on your load expectations.</span></span> <span data-ttu-id="6f8f7-198">請注意，各 VM 大小所允許連接的資料磁碟數量皆不同。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-198">Keep in mind that different VM sizes allow different numbers of attached data disks.</span></span> <span data-ttu-id="6f8f7-199">如需相關資訊，請參閱[虛擬機器的大小](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-199">For more information, see [Sizes for Virtual Machines](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

  * <span data-ttu-id="6f8f7-200">如果您不會使用進階儲存體 （開發/測試案例），hello 建議 tooadd hello 最大的資料磁碟數目受到您[VM 大小](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)並使用磁碟條狀配置。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-200">If you are not using Premium Storage (dev/test scenarios), hello recommendation is tooadd hello maximum number of data disks supported by your [VM size](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) and use Disk Striping.</span></span>

* <span data-ttu-id="6f8f7-201">**快取原則**： 進階儲存體的資料磁碟，可讓您啟用僅裝載您的資料檔和 TempDB hello 資料磁碟的讀取快取。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-201">**Caching policy**: For Premium Storage data disks, enable read caching on hello data disks hosting your data files and TempDB only.</span></span> <span data-ttu-id="6f8f7-202">如果您並非使用進階儲存體，請勿啟用任何資料磁碟上的任何快取功能。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-202">If you are not using Premium Storage, do not enable any caching on any data disks.</span></span> <span data-ttu-id="6f8f7-203">如需設定磁碟快取，指示，請參閱下列主題中的 hello: [Set-azureosdisk](https://msdn.microsoft.com/library/azure/jj152847)和[Set-azuredatadisk](https://msdn.microsoft.com/library/azure/jj152851.aspx)。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-203">For instructions on configuring disk caching, see hello following topics: [Set-AzureOSDisk](https://msdn.microsoft.com/library/azure/jj152847) and [Set-AzureDataDisk](https://msdn.microsoft.com/library/azure/jj152851.aspx).</span></span>

  > [!WARNING]
  > <span data-ttu-id="6f8f7-204">變更 Azure VM 的任何資料庫損毀磁碟 tooavoid hello 可能性 hello 快取設定，請停止 hello SQL Server 服務。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-204">Stop hello SQL Server service when changing hello cache setting of Azure VM disks tooavoid hello possibility of any database corruption.</span></span>

* <span data-ttu-id="6f8f7-205">**NTFS 配置單位大小**： 格式化時 hello 資料磁碟，建議您針對資料和記錄檔以及 TempDB 使用 64 KB 配置單位大小。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-205">**NTFS allocation unit size**: When formatting hello data disk, it is recommended that you use a 64-KB allocation unit size for data and log files as well as TempDB.</span></span>

* <span data-ttu-id="6f8f7-206">**磁碟管理的最佳作法**： 當移除資料磁碟或變更其快取的內容型別時，則在 hello 變更期間停止 hello SQL Server 服務。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-206">**Disk management best practices**: When removing a data disk or changing its cache type, stop hello SQL Server service during hello change.</span></span> <span data-ttu-id="6f8f7-207">Hello 快取設定時在 hello OS 磁碟上變更 Azure 停止 hello VM、 變更 hello 快取類型，並重新啟動 hello VM。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-207">When hello caching settings are changed on hello OS disk, Azure stops hello VM, changes hello cache type, and restarts hello VM.</span></span> <span data-ttu-id="6f8f7-208">當變更資料磁碟的 hello 快取設定時，未停止 hello VM，但 hello 資料磁碟中斷的 hello VM hello 期間變更，然後重新附加。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-208">When hello cache settings of a data disk are changed, hello VM is not stopped, but hello data disk is detached from hello VM during hello change and then reattached.</span></span>

  > [!WARNING]
  > <span data-ttu-id="6f8f7-209">失敗 toostop hello SQL Server 服務，這些作業期間可能會造成資料庫損毀。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-209">Failure toostop hello SQL Server service during these operations can cause database corruption.</span></span>

## <a name="io-guidance"></a><span data-ttu-id="6f8f7-210">I/O 指引</span><span class="sxs-lookup"><span data-stu-id="6f8f7-210">I/O guidance</span></span>

* <span data-ttu-id="6f8f7-211">當您將平行處理應用程式和要求時，可達到 hello 的進階儲存體最佳的結果。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-211">hello best results with Premium Storage are achieved when you parallelize your application and requests.</span></span> <span data-ttu-id="6f8f7-212">高階儲存體設計的情況下 hello IO 佇列深度大於 1，所以 （即使它們是需要大量的儲存體），您會看到單一執行緒序列的要求幾乎沒有任何效能提升。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-212">Premium Storage is designed for scenarios where hello IO queue depth is greater than 1, so you will see little or no performance gains for single-threaded serial requests (even if they are storage intensive).</span></span> <span data-ttu-id="6f8f7-213">比方說，這可能會影響效能分析工具，像是 SQLIO hello 單一執行緒測試結果。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-213">For example, this could impact hello single-threaded test results of performance analysis tools, such as SQLIO.</span></span>

* <span data-ttu-id="6f8f7-214">請考慮使用 [資料庫頁面壓縮](https://msdn.microsoft.com/library/cc280449.aspx) 功能，其有助於改善 I/O 密集型工作負載的效能。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-214">Consider using [database page compression](https://msdn.microsoft.com/library/cc280449.aspx) as it can help improve performance of I/O intensive workloads.</span></span> <span data-ttu-id="6f8f7-215">不過，hello 資料壓縮可能會增加 hello hello 資料庫伺服器上的 CPU 耗用量。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-215">However, hello data compression might increase hello CPU consumption on hello database server.</span></span>

* <span data-ttu-id="6f8f7-216">請考慮啟用立即檔案初始化 tooreduce hello 時間所需的初始檔案配置。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-216">Consider enabling instant file initialization tooreduce hello time that is required for initial file allocation.</span></span> <span data-ttu-id="6f8f7-217">tootake 利用立即檔案初始化的方法，您可以授與 hello SQL Server (MSSQLSERVER) 服務帳戶的 SE_MANAGE_VOLUME_NAME，並將它加入 toohello**執行磁碟區維護工作**安全性原則。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-217">tootake advantage of instant file initialization, you grant hello SQL Server (MSSQLSERVER) service account with SE_MANAGE_VOLUME_NAME and add it toohello **Perform Volume Maintenance Tasks** security policy.</span></span> <span data-ttu-id="6f8f7-218">如果您使用 azure 的 SQL Server 平台映像，hello 預設服務帳戶 (NT Service\MSSQLSERVER) 不會新增 toohello**執行磁碟區維護工作**安全性原則。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-218">If you are using a SQL Server platform image for Azure, hello default service account (NT Service\MSSQLSERVER) isn’t added toohello **Perform Volume Maintenance Tasks** security policy.</span></span> <span data-ttu-id="6f8f7-219">也就是說，SQL Server Azure 平台映像未啟用 [立即檔案初始化] 功能。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-219">In other words, instant file initialization is not enabled in a SQL Server Azure platform image.</span></span> <span data-ttu-id="6f8f7-220">加入 hello SQL Server 服務帳戶 toohello 之後**執行磁碟區維護工作**安全性原則、 重新啟動 hello SQL Server 服務。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-220">After adding hello SQL Server service account toohello **Perform Volume Maintenance Tasks** security policy, restart hello SQL Server service.</span></span> <span data-ttu-id="6f8f7-221">使用此功能時，可能有安全性考量。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-221">There could be security considerations for using this feature.</span></span> <span data-ttu-id="6f8f7-222">如需詳細資訊，請參閱 [資料庫檔案初始化](https://msdn.microsoft.com/library/ms175935.aspx)。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-222">For more information, see [Database File Initialization](https://msdn.microsoft.com/library/ms175935.aspx).</span></span>

* <span data-ttu-id="6f8f7-223">**自動成長**會被視為 toobe 只預期成長的偶發事件。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-223">**autogrow** is considered toobe merely a contingency for unexpected growth.</span></span> <span data-ttu-id="6f8f7-224">請勿每天使用「自動成長」功能，管理資料和記錄成長。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-224">Do not manage your data and log growth on a day-to-day basis with autogrow.</span></span> <span data-ttu-id="6f8f7-225">如果使用 autogrow，預先加大 hello 檔案使用 hello 大小參數。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-225">If autogrow is used, pre-grow hello file using hello Size switch.</span></span>

* <span data-ttu-id="6f8f7-226">請確定**autoshrink**是已停用的 tooavoid 不必要的負擔會嚴重影響效能。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-226">Make sure **autoshrink** is disabled tooavoid unnecessary overhead that can negatively affect performance.</span></span>

* <span data-ttu-id="6f8f7-227">移動所有資料庫 toodata 磁碟，包括系統資料庫。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-227">Move all databases toodata disks, including system databases.</span></span> <span data-ttu-id="6f8f7-228">如需詳細資訊，請參閱 [移動系統資料庫](https://msdn.microsoft.com/library/ms345408.aspx)。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-228">For more information, see [Move System Databases](https://msdn.microsoft.com/library/ms345408.aspx).</span></span>

* <span data-ttu-id="6f8f7-229">移動 SQL Server 錯誤記錄檔和追蹤檔案目錄 toodata 磁碟。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-229">Move SQL Server error log and trace file directories toodata disks.</span></span> <span data-ttu-id="6f8f7-230">在 SQL Server 組態管理員中，以滑鼠右鍵按一下您的 SQL Server 執行個體並選取內容，即可完成。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-230">This can be done in SQL Server Configuration Manager by right-clicking your SQL Server instance and selecting properties.</span></span> <span data-ttu-id="6f8f7-231">hello 錯誤記錄檔和追蹤檔案可變更設定中 hello**啟動參數**hello 中指定傾印目錄 索引標籤 hello**進階** 索引標籤 hello 下列螢幕擷取畫面顯示在哪裡的 toolookhello 錯誤記錄檔啟動參數。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-231">hello error log and trace file settings can be changed in hello **Startup Parameters** tab. hello Dump Directory is specified in hello **Advanced** tab. hello following screenshot shows where toolook for hello error log startup parameter.</span></span>

    ![SQL ErrorLog 螢幕擷取畫面](./media/virtual-machines-windows-sql-performance/sql_server_error_log_location.png)

* <span data-ttu-id="6f8f7-233">設定預設備份和資料庫檔案位置。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-233">Setup default backup and database file locations.</span></span> <span data-ttu-id="6f8f7-234">使用本主題中的 hello 建議，和 hello 伺服器屬性 視窗中的 hello 變更。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-234">Use hello recommendations in this topic, and make hello changes in hello Server properties window.</span></span> <span data-ttu-id="6f8f7-235">如需指示，請參閱[檢視或變更 hello 資料及記錄檔 (SQL Server Management Studio) 的預設位置](https://msdn.microsoft.com/library/dd206993.aspx)。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-235">For instructions, see [View or Change hello Default Locations for Data and Log Files (SQL Server Management Studio)](https://msdn.microsoft.com/library/dd206993.aspx).</span></span> <span data-ttu-id="6f8f7-236">hello 下列螢幕擷取畫面示範 where toomake 這些變更。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-236">hello following screenshot demonstrates where toomake these changes.</span></span>

    ![SQL 資料記錄和備份檔案](./media/virtual-machines-windows-sql-performance/sql_server_default_data_log_backup_locations.png)
* <span data-ttu-id="6f8f7-238">啟用鎖定頁面 tooreduce IO 和任何分頁活動。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-238">Enable locked pages tooreduce IO and any paging activities.</span></span> <span data-ttu-id="6f8f7-239">如需詳細資訊，請參閱[啟用 hello 鎖定記憶體分頁選項 (Windows)](https://msdn.microsoft.com/library/ms190730.aspx)。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-239">For more information, see [Enable hello Lock Pages in Memory Option (Windows)](https://msdn.microsoft.com/library/ms190730.aspx).</span></span>

* <span data-ttu-id="6f8f7-240">如果您執行的是 SQL Server 2012，請安裝 Service Pack 1 累計更新 10。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-240">If you are running SQL Server 2012, install Service Pack 1 Cumulative Update 10.</span></span> <span data-ttu-id="6f8f7-241">當您執行 select into temporary table 陳述式 SQL Server 2012 中，此更新包含 hello I/O 效能不佳的修正程式。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-241">This update contains hello fix for poor performance on I/O when you execute select into temporary table statement in SQL Server 2012.</span></span> <span data-ttu-id="6f8f7-242">如需相關資訊，請參閱此 [知識庫文章](http://support.microsoft.com/kb/2958012)。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-242">For information, see this [knowledge base article](http://support.microsoft.com/kb/2958012).</span></span>

* <span data-ttu-id="6f8f7-243">將資料檔案傳輸至 Azure，或從 Azure 往外傳輸時，請考慮先壓縮所有資料檔案。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-243">Consider compressing any data files when transferring in/out of Azure.</span></span>

## <a name="feature-specific-guidance"></a><span data-ttu-id="6f8f7-244">特定功能指引</span><span class="sxs-lookup"><span data-stu-id="6f8f7-244">Feature specific guidance</span></span>

<span data-ttu-id="6f8f7-245">有些部署作業可能會使用更進階的組態技術，提供額外的效能優點。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-245">Some deployments may achieve additional performance benefits using more advanced configuration techniques.</span></span> <span data-ttu-id="6f8f7-246">hello 下列清單強調一些可協助您 tooachieve 更佳的效能的 SQL Server 功能：</span><span class="sxs-lookup"><span data-stu-id="6f8f7-246">hello following list highlights some SQL Server features that can help you tooachieve better performance:</span></span>

* <span data-ttu-id="6f8f7-247">**備份 tooAzure 儲存**： 當執行備份的 Azure 虛擬機器中執行的 SQL Server，您可以使用[SQL Server 備份 tooURL](https://msdn.microsoft.com/library/dn435916.aspx)。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-247">**Backup tooAzure storage**: When performing backups for SQL Server running in Azure virtual machines, you can use [SQL Server Backup tooURL](https://msdn.microsoft.com/library/dn435916.aspx).</span></span> <span data-ttu-id="6f8f7-248">這項功能是開始可用之 SQL Server 2012 SP1 CU2 和備份 toohello 附加資料磁碟的建議。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-248">This feature is available starting with SQL Server 2012 SP1 CU2 and recommended for backing up toohello attached data disks.</span></span> <span data-ttu-id="6f8f7-249">當您備份/還原至/自 Azure 儲存體，請遵循所提供的 hello 建議[SQL Server Backup tooURL 最佳作法和疑難排解及還原的備份儲存在 Azure 儲存體](https://msdn.microsoft.com/library/jj919149.aspx)。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-249">When you backup/restore to/from Azure storage, follow hello recommendations provided at [SQL Server Backup tooURL Best Practices and Troubleshooting and Restoring from Backups Stored in Azure Storage](https://msdn.microsoft.com/library/jj919149.aspx).</span></span> <span data-ttu-id="6f8f7-250">您也可以使用 [Azure 虛擬機器中的 SQL Server 自動備份](virtual-machines-windows-sql-automated-backup.md)，自動執行這些備份作業。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-250">You can also automate these backups using [Automated Backup for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-automated-backup.md).</span></span>

    <span data-ttu-id="6f8f7-251">您可以使用先前 tooSQL Server 2012， [SQL Server 備份 tooAzure 工具](https://www.microsoft.com/download/details.aspx?id=40740)。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-251">Prior tooSQL Server 2012, you can use [SQL Server Backup tooAzure Tool](https://www.microsoft.com/download/details.aspx?id=40740).</span></span> <span data-ttu-id="6f8f7-252">此工具可協助使用多個備份等量磁碟區目標 tooincrease 備份輸送量。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-252">This tool can help tooincrease backup throughput using multiple backup stripe targets.</span></span>

* <span data-ttu-id="6f8f7-253">**Azure 中的 SQL Server 資料檔案**：從 SQL Server 2014 開始提供 [Azure 中的 SQL Server 資料檔](https://msdn.microsoft.com/library/dn385720.aspx)這項新功能。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-253">**SQL Server Data Files in Azure**: This new feature, [SQL Server Data Files in Azure](https://msdn.microsoft.com/library/dn385720.aspx), is available starting with SQL Server 2014.</span></span> <span data-ttu-id="6f8f7-254">在 Azure 中執行具有資料檔案的 SQL Server 的效能與使用 Azure 資料磁碟的效能特性相當。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-254">Running SQL Server with data files in Azure demonstrates comparable performance characteristics as using Azure data disks.</span></span>

## <a name="next-steps"></a><span data-ttu-id="6f8f7-255">後續步驟</span><span class="sxs-lookup"><span data-stu-id="6f8f7-255">Next Steps</span></span>

<span data-ttu-id="6f8f7-256">如需安全性的最佳作法，請參閱 [Azure 虛擬機器中的 SQL Server 安全性考量](virtual-machines-windows-sql-security.md)。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-256">For security best practices, see [Security Considerations for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-security.md).</span></span>

<span data-ttu-id="6f8f7-257">請檢閱 [Azure 虛擬機器上的 SQL Server 概觀](virtual-machines-windows-sql-server-iaas-overview.md)中的其他「SQL Server 虛擬機器」主題。</span><span class="sxs-lookup"><span data-stu-id="6f8f7-257">Review other SQL Server Virtual Machine topics at [SQL Server on Azure Virtual Machines Overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>
