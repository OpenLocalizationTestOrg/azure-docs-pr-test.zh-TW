---
title: "aaaSAP NetWeaver on Azure Vm – 的 DBMS 部署指南 |Microsoft 文件"
description: "Azure 虛擬機器 (VM) 上的 SAP NetWeaver - DBMS 部署指南"
services: virtual-machines-windows,virtual-network,storage
documentationcenter: 
author: MSSedusch
manager: timlt
editor: 
tags: azure-resource-manager
keywords: 
ms.assetid: e0e05b5e-47aa-4c1e-bf83-0d62ee8f614e
ms.service: virtual-machines-windows
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: infrastructure-services
ms.date: 11/08/2016
ms.author: sedusch
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: a56b8f6b3b26fa10e01a25a251a3e4a7bfc77e2b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="sap-netweaver-on-azure-windows-virtual-machines-vms--dbms-deployment-guide"></a><span data-ttu-id="05add-103">Azure Windows 虛擬機器 (VM) 上的 SAP NetWeaver - DBMS 部署指南</span><span class="sxs-lookup"><span data-stu-id="05add-103">SAP NetWeaver on Azure Windows Virtual Machines (VMs) – DBMS Deployment Guide</span></span>
[767598]:https://launchpad.support.sap.com/#/notes/767598
[773830]:https://launchpad.support.sap.com/#/notes/773830
[826037]:https://launchpad.support.sap.com/#/notes/826037
[965908]:https://launchpad.support.sap.com/#/notes/965908
[1031096]:https://launchpad.support.sap.com/#/notes/1031096
[1139904]:https://launchpad.support.sap.com/#/notes/1139904
[1173395]:https://launchpad.support.sap.com/#/notes/1173395
[1245200]:https://launchpad.support.sap.com/#/notes/1245200
[1409604]:https://launchpad.support.sap.com/#/notes/1409604
[1558958]:https://launchpad.support.sap.com/#/notes/1558958
[1585981]:https://launchpad.support.sap.com/#/notes/1585981
[1588316]:https://launchpad.support.sap.com/#/notes/1588316
[1590719]:https://launchpad.support.sap.com/#/notes/1590719
[1597355]:https://launchpad.support.sap.com/#/notes/1597355
[1605680]:https://launchpad.support.sap.com/#/notes/1605680
[1619720]:https://launchpad.support.sap.com/#/notes/1619720
[1619726]:https://launchpad.support.sap.com/#/notes/1619726
[1619967]:https://launchpad.support.sap.com/#/notes/1619967
[1750510]:https://launchpad.support.sap.com/#/notes/1750510
[1752266]:https://launchpad.support.sap.com/#/notes/1752266
[1757924]:https://launchpad.support.sap.com/#/notes/1757924
[1757928]:https://launchpad.support.sap.com/#/notes/1757928
[1758182]:https://launchpad.support.sap.com/#/notes/1758182
[1758496]:https://launchpad.support.sap.com/#/notes/1758496
[1772688]:https://launchpad.support.sap.com/#/notes/1772688
[1814258]:https://launchpad.support.sap.com/#/notes/1814258
[1882376]:https://launchpad.support.sap.com/#/notes/1882376
[1909114]:https://launchpad.support.sap.com/#/notes/1909114
[1922555]:https://launchpad.support.sap.com/#/notes/1922555
[1928533]:https://launchpad.support.sap.com/#/notes/1928533
[1941500]:https://launchpad.support.sap.com/#/notes/1941500
[1956005]:https://launchpad.support.sap.com/#/notes/1956005
[1973241]:https://launchpad.support.sap.com/#/notes/1973241
[1984787]:https://launchpad.support.sap.com/#/notes/1984787
[1999351]:https://launchpad.support.sap.com/#/notes/1999351
[2002167]:https://launchpad.support.sap.com/#/notes/2002167
[2015553]:https://launchpad.support.sap.com/#/notes/2015553
[2039619]:https://launchpad.support.sap.com/#/notes/2039619
[2121797]:https://launchpad.support.sap.com/#/notes/2121797
[2134316]:https://launchpad.support.sap.com/#/notes/2134316
[2178632]:https://launchpad.support.sap.com/#/notes/2178632
[2191498]:https://launchpad.support.sap.com/#/notes/2191498
[2233094]:https://launchpad.support.sap.com/#/notes/2233094
[2243692]:https://launchpad.support.sap.com/#/notes/2243692

[azure-cli]:../../cli-install-nodejs.md
[azure-portal]:https://portal.azure.com
[azure-ps]:/powershell/azureps-cmdlets-docs
[azure-quickstart-templates-github]:https://github.com/Azure/azure-quickstart-templates
[azure-script-ps]:https://go.microsoft.com/fwlink/p/?LinkID=395017
[azure-subscription-service-limits]:../../azure-subscription-service-limits.md
[azure-subscription-service-limits-subscription]:../../azure-subscription-service-limits.md#subscription-limits

[dbms-guide]:sap-dbms-guide.md 
[dbms-guide-2.1]:#c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f 
[dbms-guide-2.2]:#c8e566f9-21b7-4457-9f7f-126036971a91 
[dbms-guide-2.3]:#10b041ef-c177-498a-93ed-44b3441ab152 
[dbms-guide-2]:#65fa79d6-a85f-47ee-890b-22e794f51a64 
[dbms-guide-3]:#871dfc27-e509-4222-9370-ab1de77021c3 
[dbms-guide-5.5.1]:#0fef0e79-d3fe-4ae2-85af-73666a6f7268 
[dbms-guide-5.5.2]:#f9071eff-9d72-4f47-9da4-1852d782087b 
[dbms-guide-5.6]:#1b353e38-21b3-4310-aeb6-a77e7c8e81c8 
[dbms-guide-5.8]:#9053f720-6f3b-4483-904d-15dc54141e30 
[dbms-guide-5]:#3264829e-075e-4d25-966e-a49dad878737 
[dbms-guide-8.4.1]:#b48cfe3b-48e9-4f5b-a783-1d29155bd573 
[dbms-guide-8.4.2]:#23c78d3b-ca5a-4e72-8a24-645d141a3f5d 
[dbms-guide-8.4.3]:#77cd2fbb-307e-4cbf-a65f-745553f72d2c 
[dbms-guide-8.4.4]:#f77c1436-9ad8-44fb-a331-8671342de818 
[dbms-guide-900-sap-cache-server-on-premises]:#642f746c-e4d4-489d-bf63-73e80177a0a8

[dbms-guide-figure-100]:./media/virtual-machines-shared-sap-dbms-guide/100_storage_account_types.png
[dbms-guide-figure-200]:./media/virtual-machines-shared-sap-dbms-guide/200-ha-set-for-dbms-ha.png
[dbms-guide-figure-300]:./media/virtual-machines-shared-sap-dbms-guide/300-reference-config-iaas.png
[dbms-guide-figure-400]:./media/virtual-machines-shared-sap-dbms-guide/400-sql-2012-backup-to-blob-storage.png
[dbms-guide-figure-500]:./media/virtual-machines-shared-sap-dbms-guide/500-sql-2012-backup-to-blob-storage-different-containers.png
[dbms-guide-figure-600]:./media/virtual-machines-shared-sap-dbms-guide/600-iaas-maxdb.png
[dbms-guide-figure-700]:./media/virtual-machines-shared-sap-dbms-guide/700-livecach-prod.png
[dbms-guide-figure-800]:./media/virtual-machines-shared-sap-dbms-guide/800-azure-vm-sap-content-server.png
[dbms-guide-figure-900]:./media/virtual-machines-shared-sap-dbms-guide/900-sap-cache-server-on-premises.png

[deployment-guide]:sap-deployment-guide.md 
[deployment-guide-2.2]:sap-deployment-guide.md#42ee2bdb-1efc-4ec7-ab31-fe4c22769b94 
[deployment-guide-3.1.2]:sap-deployment-guide.md#3688666f-281f-425b-a312-a77e7db2dfab 
[deployment-guide-3.2]:sap-deployment-guide.md#db477013-9060-4602-9ad4-b0316f8bb281 
[deployment-guide-3.3]:sap-deployment-guide.md#54a1fc6d-24fd-4feb-9c57-ac588a55dff2 
[deployment-guide-3.4]:sap-deployment-guide.md#a9a60133-a763-4de8-8986-ac0fa33aa8c1
[deployment-guide-3]:sap-deployment-guide.md#b3253ee3-d63b-4d74-a49b-185e76c4088e 
[deployment-guide-4.1]:sap-deployment-guide.md#604bcec2-8b6e-48d2-a944-61b0f5dee2f7 
[deployment-guide-4.2]:sap-deployment-guide.md#7ccf6c3e-97ae-4a7a-9c75-e82c37beb18e
[deployment-guide-4.3]:sap-deployment-guide.md#31d9ecd6-b136-4c73-b61e-da4a29bbc9cc 
[deployment-guide-4.4.2]:sap-deployment-guide.md#6889ff12-eaaf-4f3c-97e1-7c9edc7f7542 
[deployment-guide-4.4]:sap-deployment-guide.md#c7cbb0dc-52a4-49db-8e03-83e7edc2927d 
[deployment-guide-4.5.1]:sap-deployment-guide.md#987cf279-d713-4b4c-8143-6b11589bb9d4 
[deployment-guide-4.5.2]:sap-deployment-guide.md#408f3779-f422-4413-82f8-c57a23b4fc2f 
[deployment-guide-4.5]:sap-deployment-guide.md#d98edcd3-f2a1-49f7-b26a-07448ceb60ca 
[deployment-guide-5.1]:sap-deployment-guide.md#bb61ce92-8c5c-461f-8c53-39f5e5ed91f2 
[deployment-guide-5.2]:sap-deployment-guide.md#e2d592ff-b4ea-4a53-a91a-e5521edb6cd1 
[deployment-guide-5.3]:sap-deployment-guide.md#fe25a7da-4e4e-4388-8907-8abc2d33cfd8 

[deployment-guide-configure-monitoring-scenario-1]:sap-deployment-guide.md#ec323ac3-1de9-4c3a-b770-4ff701def65b 
[deployment-guide-configure-proxy]:sap-deployment-guide.md#baccae00-6f79-4307-ade4-40292ce4e02d 
[deployment-guide-figure-100]:./media/virtual-machines-shared-sap-deployment-guide/100-deploy-vm-image.png
[deployment-guide-figure-1000]:./media/virtual-machines-shared-sap-deployment-guide/1000-service-properties.png
[deployment-guide-figure-11]:sap-deployment-guide.md#figure-11
[deployment-guide-figure-1100]:./media/virtual-machines-shared-sap-deployment-guide/1100-azperflib.png
[deployment-guide-figure-1200]:./media/virtual-machines-shared-sap-deployment-guide/1200-cmd-test-login.png
[deployment-guide-figure-1300]:./media/virtual-machines-shared-sap-deployment-guide/1300-cmd-test-executed.png
[deployment-guide-figure-14]:sap-deployment-guide.md#figure-14
[deployment-guide-figure-1400]:./media/virtual-machines-shared-sap-deployment-guide/1400-azperflib-error-servicenotstarted.png
[deployment-guide-figure-300]:./media/virtual-machines-shared-sap-deployment-guide/300-deploy-private-image.png
[deployment-guide-figure-400]:./media/virtual-machines-shared-sap-deployment-guide/400-deploy-using-disk.png
[deployment-guide-figure-5]:sap-deployment-guide.md#figure-5
[deployment-guide-figure-50]:./media/virtual-machines-shared-sap-deployment-guide/50-forced-tunneling-suse.png
[deployment-guide-figure-500]:./media/virtual-machines-shared-sap-deployment-guide/500-install-powershell.png
[deployment-guide-figure-6]:sap-deployment-guide.md#figure-6
[deployment-guide-figure-600]:./media/virtual-machines-shared-sap-deployment-guide/600-powershell-version.png
[deployment-guide-figure-7]:sap-deployment-guide.md#figure-7
[deployment-guide-figure-700]:./media/virtual-machines-shared-sap-deployment-guide/700-install-powershell-installed.png
[deployment-guide-figure-760]:./media/virtual-machines-shared-sap-deployment-guide/760-azure-cli-version.png
[deployment-guide-figure-900]:./media/virtual-machines-shared-sap-deployment-guide/900-cmd-update-executed.png
[deployment-guide-figure-azure-cli-installed]:sap-deployment-guide.md#402488e5-f9bb-4b29-8063-1c5f52a892d0
[deployment-guide-figure-azure-cli-version]:sap-deployment-guide.md#0ad010e6-f9b5-4c21-9c09-bb2e5efb3fda
[deployment-guide-install-vm-agent-windows]:sap-deployment-guide.md#b2db5c9a-a076-42c6-9835-16945868e866
[deployment-guide-troubleshooting-chapter]:sap-deployment-guide.md#564adb4f-5c95-4041-9616-6635e83a810b 

[deploy-template-cli]:../../resource-group-template-deploy-cli.md
[deploy-template-portal]:../../resource-group-template-deploy-portal.md
[deploy-template-powershell]:../../resource-group-template-deploy.md

[dr-guide-classic]:http://go.microsoft.com/fwlink/?LinkID=521971

[getting-started]:sap-get-started.md
[getting-started-dbms]:sap-get-started.md#1343ffe1-8021-4ce6-a08d-3a1553a4db82
[getting-started-deployment]:sap-get-started.md#6aadadd2-76b5-46d8-8713-e8d63630e955
[getting-started-planning]:sap-get-started.md#3da0389e-708b-4e82-b2a2-e92f132df89c

[getting-started-windows-classic]:../virtual-machines-windows-classic-sap-get-started.md
[getting-started-windows-classic-dbms]:../virtual-machines-windows-classic-sap-get-started.md#c5b77a14-f6b4-44e9-acab-4d28ff72a930
[getting-started-windows-classic-deployment]:../virtual-machines-windows-classic-sap-get-started.md#f84ea6ce-bbb4-41f7-9965-34d31b0098ea
[getting-started-windows-classic-dr]:../virtual-machines-windows-classic-sap-get-started.md#cff10b4a-01a5-4dc3-94b6-afb8e55757d3
[getting-started-windows-classic-ha-sios]:../virtual-machines-windows-classic-sap-get-started.md#4bb7512c-0fa0-4227-9853-4004281b1037
[getting-started-windows-classic-planning]:../virtual-machines-windows-classic-sap-get-started.md#f2a5e9d8-49e4-419e-9900-af783173481c

[ha-guide-classic]:http://go.microsoft.com/fwlink/?LinkId=613056

[ha-guide]:sap-high-availability-guide.md

[install-extension-cli]:virtual-machines-linux-enable-aem.md

[Logo_Linux]:./media/virtual-machines-shared-sap-shared/Linux.png
[Logo_Windows]:./media/virtual-machines-shared-sap-shared/Windows.png

[msdn-set-azurermvmaemextension]:https://msdn.microsoft.com/library/azure/mt670598.aspx

[planning-guide]:sap-planning-guide.md  
[planning-guide-1.2]:sap-planning-guide.md#e55d1e22-c2c8-460b-9897-64622a34fdff 
[planning-guide-11]:sap-planning-guide.md#7cf991a1-badd-40a9-944e-7baae842a058 
[planning-guide-11.4.1]:sap-planning-guide.md#5d9d36f9-9058-435d-8367-5ad05f00de77 
[planning-guide-11.5]:sap-planning-guide.md#4e165b58-74ca-474f-a7f4-5e695a93204f 
[planning-guide-2.1]:sap-planning-guide.md#1625df66-4cc6-4d60-9202-de8a0b77f803 
[planning-guide-2.2]:sap-planning-guide.md#f5b3b18c-302c-4bd8-9ab2-c388f1ab3d10
[planning-guide-3.1]:sap-planning-guide.md#be80d1b9-a463-4845-bd35-f4cebdb5424a 
[planning-guide-3.2.1]:sap-planning-guide.md#df49dc09-141b-4f34-a4a2-990913b30358 
[planning-guide-3.2.2]:sap-planning-guide.md#fc1ac8b2-e54a-487c-8581-d3cc6625e560 
[planning-guide-3.2.3]:sap-planning-guide.md#18810088-f9be-4c97-958a-27996255c665 
[planning-guide-3.2]:sap-planning-guide.md#8d8ad4b8-6093-4b91-ac36-ea56d80dbf77 
[planning-guide-3.3.2]:sap-planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92 
[planning-guide-5.1.1]:sap-planning-guide.md#4d175f1b-7353-4137-9d2f-817683c26e53 
[planning-guide-5.1.2]:sap-planning-guide.md#e18f7839-c0e2-4385-b1e6-4538453a285c 
[planning-guide-5.2.1]:sap-planning-guide.md#1b287330-944b-495d-9ea7-94b83aff73ef 
[planning-guide-5.2.2]:sap-planning-guide.md#57f32b1c-0cba-4e57-ab6e-c39fe22b6ec3 
[planning-guide-5.2]:sap-planning-guide.md#6ffb9f41-a292-40bf-9e70-8204448559e7 
[planning-guide-5.3.1]:sap-planning-guide.md#6e835de8-40b1-4b71-9f18-d45b20959b79 
[planning-guide-5.3.2]:sap-planning-guide.md#a43e40e6-1acc-4633-9816-8f095d5a7b6a 
[planning-guide-5.4.2]:sap-planning-guide.md#9789b076-2011-4afa-b2fe-b07a8aba58a1 
[planning-guide-5.5.1]:sap-planning-guide.md#4efec401-91e0-40c0-8e64-f2dceadff646 
[planning-guide-5.5.3]:sap-planning-guide.md#17e0d543-7e8c-4160-a7da-dd7117a1ad9d 
[planning-guide-7.1]:sap-planning-guide.md#3e9c3690-da67-421a-bc3f-12c520d99a30 
[planning-guide-7]:sap-planning-guide.md#96a77628-a05e-475d-9df3-fb82217e8f14 
[planning-guide-9.1]:sap-planning-guide.md#6f0a47f3-a289-4090-a053-2521618a28c3 
[planning-guide-azure-premium-storage]:sap-planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92 

[planning-guide-figure-100]:./media/virtual-machines-shared-sap-planning-guide/100-single-vm-in-azure.png
[planning-guide-figure-1300]:./media/virtual-machines-shared-sap-planning-guide/1300-ref-config-iaas-for-sap.png
[planning-guide-figure-1400]:./media/virtual-machines-shared-sap-planning-guide/1400-attach-detach-disks.png
[planning-guide-figure-1600]:./media/virtual-machines-shared-sap-planning-guide/1600-firewall-port-rule.png
[planning-guide-figure-1700]:./media/virtual-machines-shared-sap-planning-guide/1700-single-vm-demo.png
[planning-guide-figure-1900]:./media/virtual-machines-shared-sap-planning-guide/1900-vm-set-vnet.png
[planning-guide-figure-200]:./media/virtual-machines-shared-sap-planning-guide/200-multiple-vms-in-azure.png
[planning-guide-figure-2100]:./media/virtual-machines-shared-sap-planning-guide/2100-s2s.png
[planning-guide-figure-2200]:./media/virtual-machines-shared-sap-planning-guide/2200-network-printing.png
[planning-guide-figure-2300]:./media/virtual-machines-shared-sap-planning-guide/2300-sapgui-stms.png
[planning-guide-figure-2400]:./media/virtual-machines-shared-sap-planning-guide/2400-vm-extension-overview.png
[planning-guide-figure-2500]:./media/virtual-machines-shared-sap-planning-guide/2500-vm-extension-details.png
[planning-guide-figure-2600]:./media/virtual-machines-shared-sap-planning-guide/2600-sap-router-connection.png
[planning-guide-figure-2700]:./media/virtual-machines-shared-sap-planning-guide/2700-exposed-sap-portal.png
[planning-guide-figure-2800]:./media/virtual-machines-shared-sap-planning-guide/2800-endpoint-config.png
[planning-guide-figure-2900]:./media/virtual-machines-shared-sap-planning-guide/2900-azure-ha-sap-ha.png
[planning-guide-figure-300]:./media/virtual-machines-shared-sap-planning-guide/300-vpn-s2s.png
[planning-guide-figure-3000]:./media/virtual-machines-shared-sap-planning-guide/3000-sap-ha-on-azure.png
[planning-guide-figure-3200]:./media/virtual-machines-shared-sap-planning-guide/3200-sap-ha-with-sql.png
[planning-guide-figure-400]:./media/virtual-machines-shared-sap-planning-guide/400-vm-services.png
[planning-guide-figure-600]:./media/virtual-machines-shared-sap-planning-guide/600-s2s-details.png
[planning-guide-figure-700]:./media/virtual-machines-shared-sap-planning-guide/700-decision-tree-deploy-to-azure.png
[planning-guide-figure-800]:./media/virtual-machines-shared-sap-planning-guide/800-portal-vm-overview.png
[planning-guide-microsoft-azure-networking]:sap-planning-guide.md#61678387-8868-435d-9f8c-450b2424f5bd 
[planning-guide-storage-microsoft-azure-storage-and-data-disks]:sap-planning-guide.md#a72afa26-4bf4-4a25-8cf7-855d6032157f 

[powershell-install-configure]:/powershell/azureps-cmdlets-docs
[resource-group-authoring-templates]:../../resource-group-authoring-templates.md
[resource-group-overview]:../../azure-resource-manager/resource-group-overview.md
[resource-groups-networking]:../../virtual-network/resource-groups-networking.md
[sap-pam]:https://support.sap.com/pam 
[sap-templates-2-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-2-tier-os-disk]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-disk%2Fazuredeploy.json
[sap-templates-2-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-image%2Fazuredeploy.json
[sap-templates-3-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-3-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-user-image%2Fazuredeploy.json
[storage-azure-cli]:../../storage/storage-azure-cli.md
[storage-azure-cli-copy-blobs]:../../storage/storage-azure-cli.md#copy-blobs
[storage-introduction]:../../storage/storage-introduction.md
[storage-powershell-guide-full-copy-vhd]:../../storage/storage-powershell-guide-full.md#how-to-copy-blobs-from-one-storage-container-to-another
[storage-premium-storage-preview-portal]:../../storage/storage-premium-storage.md
[storage-redundancy]:../../storage/storage-redundancy.md
[storage-scalability-targets]:../../storage/storage-scalability-targets.md
[storage-use-azcopy]:../../storage/storage-use-azcopy.md
[template-201-vm-from-specialized-vhd]:https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-from-specialized-vhd
[templates-101-simple-windows-vm]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-simple-windows-vm
[templates-101-vm-from-user-image]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-from-user-image
[virtual-machines-linux-attach-disk-portal]:../linux/attach-disk-portal.md
[virtual-machines-azure-resource-manager-architecture]:../../resource-manager-deployment-model.md
[virtual-machines-azurerm-versus-azuresm]:../../resource-manager-deployment-model.md
[virtual-machines-windows-classic-configure-oracle-data-guard]:../virtual-machines-windows-classic-configure-oracle-data-guard.md
[virtual-machines-linux-cli-deploy-templates]:../linux/cli-deploy-templates.md (Deploy and manage virtual machines by using Azure Resource Manager templates and hello Azure CLI)
[virtual-machines-deploy-rmtemplates-powershell]:../virtual-machines-windows-ps-manage.md (Manage virtual machines using Azure Resource Manager and PowerShell)
[virtual-machines-linux-agent-user-guide]:../linux/agent-user-guide.md
[virtual-machines-linux-agent-user-guide-command-line-options]:../linux/agent-user-guide.md#command-line-options
[virtual-machines-linux-capture-image]:../linux/capture-image.md
[virtual-machines-linux-capture-image-resource-manager]:../linux/capture-image.md
[virtual-machines-linux-capture-image-resource-manager-capture]:../linux/capture-image.md#step-2-capture-the-vm
[virtual-machines-linux-configure-lvm]:../linux/configure-lvm.md
[virtual-machines-linux-configure-raid]:../linux/configure-raid.md
[virtual-machines-linux-classic-create-upload-vhd-step-1]:../virtual-machines-linux-classic-create-upload-vhd.md#step-1-prepare-the-image-to-be-uploaded
[virtual-machines-linux-create-upload-vhd-suse]:../linux/suse-create-upload-vhd.md
[virtual-machines-linux-redhat-create-upload-vhd]:../linux/redhat-create-upload-vhd.md
[virtual-machines-linux-how-to-attach-disk]:../linux/add-disk.md
[virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux]:../linux/add-disk.md#connect-to-the-linux-vm-to-mount-the-new-disk
[virtual-machines-linux-tutorial]:../linux/quick-create-cli.md
[virtual-machines-linux-update-agent]:../linux/update-agent.md
[virtual-machines-manage-availability]:../virtual-machines-windows-manage-availability.md
[virtual-machines-ps-create-preconfigure-windows-resource-manager-vms]:../virtual-machines-windows-ps-create.md
[virtual-machines-sizes]:sizes.md
[virtual-machines-windows-classic-ps-sql-alwayson-availability-groups]:classic/ps-sql-alwayson-availability-groups.md
[virtual-machines-windows-classic-ps-sql-int-listener]:classic/ps-sql-int-listener.md
[virtual-machines-sql-server-high-availability-and-disaster-recovery-solutions]:./sql/virtual-machines-windows-sql-high-availability-dr.md
[virtual-machines-sql-server-infrastructure-services]:./sql/virtual-machines-windows-sql-server-iaas-overview.md
[virtual-machines-sql-server-performance-best-practices]:./sql/virtual-machines-windows-sql-performance.md
[virtual-machines-upload-image-windows-resource-manager]:upload-image.md
[virtual-machines-windows-tutorial]:../virtual-machines-windows-hero-tutorial.md
[virtual-machines-workload-template-sql-alwayson]:https://azure.microsoft.com/documentation/templates/sql-server-2014-alwayson-dsc/
[virtual-network-deploy-multinic-arm-cli]:../../virtual-network/virtual-network-deploy-multinic-arm-cli.md
[virtual-network-deploy-multinic-arm-ps]:../../virtual-network/virtual-network-deploy-multinic-arm-ps.md
[virtual-network-deploy-multinic-arm-template]:../../virtual-network/virtual-network-deploy-multinic-arm-template.md
[virtual-networks-configure-vnet-to-vnet-connection]:../../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md
[virtual-networks-create-vnet-arm-pportal]:../../virtual-network/virtual-networks-create-vnet-arm-pportal.md
[virtual-networks-manage-dns-in-vnet]:../../virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances.md
[virtual-networks-multiple-nics]:../../virtual-network/virtual-networks-multiple-nics.md
[virtual-networks-nsg]:../../virtual-network/virtual-networks-nsg.md
[virtual-networks-reserved-private-ip]:../../virtual-network/virtual-networks-static-private-ip-arm-ps.md
[virtual-networks-static-private-ip-arm-pportal]:../../virtual-network/virtual-networks-static-private-ip-arm-pportal.md
[virtual-networks-udr-overview]:../../virtual-network/virtual-networks-udr-overview.md
[vpn-gateway-about-vpn-devices]:../../vpn-gateway/vpn-gateway-about-vpn-devices.md
[vpn-gateway-create-site-to-site-rm-powershell]:../../vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell.md
[vpn-gateway-cross-premises-options]:../../vpn-gateway/vpn-gateway-plan-design.md
[vpn-gateway-site-to-site-create]:../../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal.md
[vpn-gateway-vpn-faq]:../../vpn-gateway/vpn-gateway-vpn-faq.md
[xplat-cli]:../../cli-install-nodejs.md
[xplat-cli-azure-resource-manager]:../../xplat-cli-azure-resource-manager.md

<span data-ttu-id="05add-145">本指南是 hello 文件中實作及部署 Microsoft Azure 上的 hello SAP 軟體的一部分。</span><span class="sxs-lookup"><span data-stu-id="05add-145">This guide is part of hello documentation on implementing and deploying hello SAP software on Microsoft Azure.</span></span> <span data-ttu-id="05add-146">之後，再閱讀本指南，請閱讀 hello[計劃與實作指南][planning-guide]。</span><span class="sxs-lookup"><span data-stu-id="05add-146">Before reading this guide, please read hello [Planning and Implementation Guide][planning-guide].</span></span> <span data-ttu-id="05add-147">本文件涵蓋 hello 部署各種關聯式資料庫管理系統 (RDBMS) 和使用 hello Azure 基礎結構即服務 (IaaS) 功能搭配 Microsoft Azure 虛擬機器 (Vm) 上的 SAP 相關的產品。</span><span class="sxs-lookup"><span data-stu-id="05add-147">This document covers hello deployment of various Relational Database Management Systems (RDBMS) and related products in combination with SAP on Microsoft Azure Virtual Machines (VMs) using hello Azure Infrastructure as a Service (IaaS) capabilities.</span></span>

<span data-ttu-id="05add-148">指定平台 hello 紙張補充 hello SAP 安裝文件集和 SAP 附註 」 包含 hello 安裝和部署上的 SAP 軟體的主要資源</span><span class="sxs-lookup"><span data-stu-id="05add-148">hello paper complements hello SAP Installation Documentation and SAP Notes which represent hello primary resources for installations and deployments of SAP software on given platforms</span></span>

## <a name="general-considerations"></a><span data-ttu-id="05add-149">一般考量</span><span class="sxs-lookup"><span data-stu-id="05add-149">General considerations</span></span>
<span data-ttu-id="05add-150">本章將說明在 Azure VM 中執行 SAP 相關 DBMS 系統的考量。</span><span class="sxs-lookup"><span data-stu-id="05add-150">In this chapter, considerations of running SAP related DBMS systems in Azure VMs are introduced.</span></span> <span data-ttu-id="05add-151">有幾個參考 toospecific DBMS 系統在本章中。</span><span class="sxs-lookup"><span data-stu-id="05add-151">There are few references toospecific DBMS systems in this chapter.</span></span> <span data-ttu-id="05add-152">改為 hello 特定 DBMS 系統是由處理本文件，會在本章之後。</span><span class="sxs-lookup"><span data-stu-id="05add-152">Instead hello specific DBMS systems are handled within this paper, after this chapter.</span></span>

### <a name="definitions-upfront"></a><span data-ttu-id="05add-153">預先定義</span><span class="sxs-lookup"><span data-stu-id="05add-153">Definitions upfront</span></span>
<span data-ttu-id="05add-154">在 hello 文件中，我們將使用下列詞彙的 hello:</span><span class="sxs-lookup"><span data-stu-id="05add-154">Throughout hello document we will use hello following terms:</span></span>

* <span data-ttu-id="05add-155">IaaS：基礎結構即服務。</span><span class="sxs-lookup"><span data-stu-id="05add-155">IaaS: Infrastructure as a Service.</span></span>
* <span data-ttu-id="05add-156">PaaS：平台即服務。</span><span class="sxs-lookup"><span data-stu-id="05add-156">PaaS: Platform as a Service.</span></span>
* <span data-ttu-id="05add-157">SaaS：軟體即服務。</span><span class="sxs-lookup"><span data-stu-id="05add-157">SaaS: Software as a Service.</span></span>
* <span data-ttu-id="05add-158">SAP 元件︰個別的 SAP 應用程式，例如 ECC、BW、Solution Manager 或 EP。</span><span class="sxs-lookup"><span data-stu-id="05add-158">SAP Component: an individual SAP application such as ECC, BW, Solution Manager or EP.</span></span>  <span data-ttu-id="05add-159">SAP 元件可以傳統 ABAP 或 Java 技術為基礎，或以非 NetWeaver 應用程式 (例如商務物件) 為基礎。</span><span class="sxs-lookup"><span data-stu-id="05add-159">SAP components can be based on traditional ABAP or Java technologies or a non-NetWeaver based application such as Business Objects.</span></span>
* <span data-ttu-id="05add-160">SAP 環境： 一或多個 SAP 元件以邏輯方式分組 tooperform 商務功能，例如開發、 QAS、 訓練、 DR 或生產環境。</span><span class="sxs-lookup"><span data-stu-id="05add-160">SAP Environment: one or more SAP components logically grouped tooperform a business function such as Development, QAS, Training, DR or Production.</span></span>
* <span data-ttu-id="05add-161">SAP 版圖： 這是指 toohello 整個 SAP 資產中客戶的 IT 環境。</span><span class="sxs-lookup"><span data-stu-id="05add-161">SAP Landscape: This refers toohello entire SAP assets in a customer’s IT landscape.</span></span> <span data-ttu-id="05add-162">hello SAP 版圖包括所有生產和非生產環境。</span><span class="sxs-lookup"><span data-stu-id="05add-162">hello SAP landscape includes all production and non-production environments.</span></span>
* <span data-ttu-id="05add-163">SAP 系統： hello 組合的 DBMS 層和應用程式層，例如 SAP ERP 開發系統、 SAP BW 測試系統、 SAP CRM 生產系統等。在 Azure 中不支援的部署 toodivide 這些內部部署與 Azure 之間的兩個層級。</span><span class="sxs-lookup"><span data-stu-id="05add-163">SAP System: hello combination of DBMS layer and application layer of e.g. an SAP ERP development system, SAP BW test system, SAP CRM production system, etc. In Azure deployments it is not supported toodivide these two layers between on-premises and Azure.</span></span> <span data-ttu-id="05add-164">這表示 SAP 系統可以在內部部署或在 Azure 部署。</span><span class="sxs-lookup"><span data-stu-id="05add-164">This means an SAP system is either deployed on-premises or it is deployed in Azure.</span></span> <span data-ttu-id="05add-165">不過，您可以部署在 Azure 或內部部署 SAP 版圖的 hello 不同系統。</span><span class="sxs-lookup"><span data-stu-id="05add-165">However, you can deploy hello different systems of an SAP landscape in Azure or on-premises.</span></span> <span data-ttu-id="05add-166">例如，您可以部署 hello SAP CRM 開發和測試系統在 Azure 中的，但是 hello SAP CRM 生產系統在內部。</span><span class="sxs-lookup"><span data-stu-id="05add-166">For example, you could deploy hello SAP CRM development and test systems in Azure but hello SAP CRM production system on-premises.</span></span>
* <span data-ttu-id="05add-167">僅限雲端部署： 部署其中 hello Azure 訂用帳戶未連線透過網站的站台或 ExpressRoute 連線 toohello 內部部署網路基礎結構。</span><span class="sxs-lookup"><span data-stu-id="05add-167">Cloud-Only deployment: A deployment where hello Azure subscription is not connected via a site-to-site or ExpressRoute connection toohello on-premises network infrastructure.</span></span> <span data-ttu-id="05add-168">在一般 Azure 文件中，這類部署也會描述為「僅限雲端」的部署。</span><span class="sxs-lookup"><span data-stu-id="05add-168">In common Azure documentation these kinds of deployments are also described as ‘Cloud-Only’ deployments.</span></span> <span data-ttu-id="05add-169">採用這種方法部署的虛擬機器透過 hello 網際網路存取，而且公用網際網路端點指派 toohello Vm 在 Azure 中。</span><span class="sxs-lookup"><span data-stu-id="05add-169">Virtual Machines deployed with this method are accessed through hello Internet and public Internet endpoints assigned toohello VMs in Azure.</span></span> <span data-ttu-id="05add-170">hello 內部部署 Active Directory (AD) 和 DNS 未延伸 tooAzure 在這些類型的部署。</span><span class="sxs-lookup"><span data-stu-id="05add-170">hello on-premises Active Directory (AD) and DNS is not extended tooAzure in these types of deployments.</span></span> <span data-ttu-id="05add-171">因此 hello Vm 不屬於 hello 內部部署 Active Directory。</span><span class="sxs-lookup"><span data-stu-id="05add-171">Hence hello VMs are not part of hello on-premises Active Directory.</span></span> <span data-ttu-id="05add-172">附註：僅限雲端的部署在本文中定義為在 Azure 中以獨佔方式執行的完整 SAP 架構，不會將 Active Directory 或名稱解析從內部部署擴充到公用雲端。</span><span class="sxs-lookup"><span data-stu-id="05add-172">Note: Cloud-Only deployments in this document are defined as complete SAP landscapes which are running exclusively in Azure without extension of Active Directory or name resolution from on-premises into public cloud.</span></span> <span data-ttu-id="05add-173">針對實際執行 SAP 系統或 SAP STMS 或其他內部部署資源需要 toobe 裝載在 Azure 與位於內部部署資源上的 SAP 系統之間使用的組態不支援僅限雲端的組態。</span><span class="sxs-lookup"><span data-stu-id="05add-173">Cloud-Only configurations are not supported for production SAP systems or configurations where SAP STMS or other on-premises resources need toobe used between SAP systems hosted on Azure and resources residing on-premises.</span></span>
* <span data-ttu-id="05add-174">跨單位： 說明的案例，當 Vm 是已部署的 tooan Azure 訂用帳戶具有站台間，多站台或 ExpressRoute hello 在內部部署資料中心與 Azure 之間的連線能力。</span><span class="sxs-lookup"><span data-stu-id="05add-174">Cross-Premises: Describes a scenario where VMs are deployed tooan Azure subscription that has site-to-site, multi-site or ExpressRoute connectivity between hello on-premises datacenter(s) and Azure.</span></span> <span data-ttu-id="05add-175">在一般 Azure 文件中，這類部署也會描述為跨單位案例。</span><span class="sxs-lookup"><span data-stu-id="05add-175">In common Azure documentation, these kinds of deployments are also described as Cross-Premises scenarios.</span></span> <span data-ttu-id="05add-176">hello hello 連線的原因是 tooextend 在內部部署網域、 在內部部署 Active Directory 和內部部署 DNS 至 Azure。</span><span class="sxs-lookup"><span data-stu-id="05add-176">hello reason for hello connection is tooextend on-premises domains, on-premises Active Directory and on-premises DNS into Azure.</span></span> <span data-ttu-id="05add-177">hello 內部橫向是擴充的 toohello hello 訂用帳戶的 Azure 資產。</span><span class="sxs-lookup"><span data-stu-id="05add-177">hello on-premises landscape is extended toohello Azure assets of hello subscription.</span></span> <span data-ttu-id="05add-178">透過這樣延伸，hello Vm 可以是 hello 在內部部署網域的一部分。</span><span class="sxs-lookup"><span data-stu-id="05add-178">Having this extension, hello VMs can be part of hello on-premises domain.</span></span> <span data-ttu-id="05add-179">Hello 在內部部署網域的網域使用者可以存取 hello 伺服器，並且可以執行服務那些 Vm （例如 DBMS 服務）。</span><span class="sxs-lookup"><span data-stu-id="05add-179">Domain users of hello on-premises domain can access hello servers and can run services on those VMs (like DBMS services).</span></span> <span data-ttu-id="05add-180">您可以在內部部署的 VM 與 Azure 中部署的 VM 之間進行通訊與名稱解析。</span><span class="sxs-lookup"><span data-stu-id="05add-180">Communication and name resolution between VMs deployed on-premises and VMs deployed in Azure is possible.</span></span> <span data-ttu-id="05add-181">我們預期此 toobe hello 最常見的案例部署在 Azure 上的 SAP 資產。</span><span class="sxs-lookup"><span data-stu-id="05add-181">We expect this toobe hello most common scenario for deploying SAP assets on Azure.</span></span> <span data-ttu-id="05add-182">如需詳細資訊，請參閱[這篇文章][vpn-gateway-cross-premises-options]和[這個主題][vpn-gateway-site-to-site-create]。</span><span class="sxs-lookup"><span data-stu-id="05add-182">See [this][vpn-gateway-cross-premises-options] article and [this][vpn-gateway-site-to-site-create] for more information.</span></span>

> [!NOTE]
> <span data-ttu-id="05add-183">SAP 生產系統支援跨單位部署 SAP 系統，其中執行 SAP 系統的 Azure 虛擬機器是內部部署網域的成員。</span><span class="sxs-lookup"><span data-stu-id="05add-183">Cross-Premises deployments of SAP systems where Azure Virtual Machines running SAP systems are members of an on-premises domain are supported for production SAP systems.</span></span> <span data-ttu-id="05add-184">支援跨單位組態，以便將部分或完整的 SAP 架構部署到 Azure。</span><span class="sxs-lookup"><span data-stu-id="05add-184">Cross-Premises configurations are supported for deploying parts or complete SAP landscapes into Azure.</span></span> <span data-ttu-id="05add-185">即使在 Azure 中執行 hello 完整的 SAP 環境，則需要具有這些 Vm 屬於內部部署網域和廣告。</span><span class="sxs-lookup"><span data-stu-id="05add-185">Even running hello complete SAP landscape in Azure requires having those VMs being part of on-premises domain and ADS.</span></span> <span data-ttu-id="05add-186">Hello 文件的先前版本中我們剛才討論過混合式 IT 案例，其中 hello 詞彙 '混合' 已進行 root 破解 hello 事實會在內部部署與 Azure 之間的跨單位連線。</span><span class="sxs-lookup"><span data-stu-id="05add-186">In former versions of hello documentation we talked about Hybrid-IT scenarios, where hello term ‘Hybrid’ is rooted in hello fact that there is a cross-premises connectivity between on-premises and Azure.</span></span> <span data-ttu-id="05add-187">在此情況下 '混合' 也表示，在 Azure 中的 hello Vm 屬於 hello 內部部署 Active Directory。</span><span class="sxs-lookup"><span data-stu-id="05add-187">In this case ‘Hybrid’ also means that hello VMs in Azure are part of hello on-premises Active Directory.</span></span>
>
>

<span data-ttu-id="05add-188">有些 Microsoft 文件在描述跨單位案例時稍有不同，特別是針對 DBMS HA 組態。</span><span class="sxs-lookup"><span data-stu-id="05add-188">Some Microsoft documentation describes Cross-Premises scenarios a bit differently, especially for DBMS HA configurations.</span></span> <span data-ttu-id="05add-189">在 hello 的 hello SAP 案例相關的文件、 hello 跨內部部署案例只分布 toohaving 站對站或私人 (ExpressRoute) 連線和 toohello 事實 hello SAP 版圖分散在內部部署和 Azure。</span><span class="sxs-lookup"><span data-stu-id="05add-189">In hello case of hello SAP related documents, hello Cross-Premises scenario just boils down toohaving a site-to-site or private (ExpressRoute) connectivity and toohello fact that hello SAP landscape is distributed between on-premises and Azure.</span></span>

### <a name="resources"></a><span data-ttu-id="05add-190">資源</span><span class="sxs-lookup"><span data-stu-id="05add-190">Resources</span></span>
<span data-ttu-id="05add-191">hello 下列指南可供 Azure 上 SAP 部署的 hello 主題：</span><span class="sxs-lookup"><span data-stu-id="05add-191">hello following guides are available for hello topic of SAP deployments on Azure:</span></span>

* <span data-ttu-id="05add-192">[Azure 虛擬機器 (VM) 上的 SAP NetWeaver - 規劃和實作指南][planning-guide]</span><span class="sxs-lookup"><span data-stu-id="05add-192">[SAP NetWeaver on Azure Virtual Machines (VMs) – Planning and Implementation Guide][planning-guide]</span></span>
* <span data-ttu-id="05add-193">[Azure 虛擬機器 (VM) 上的 SAP NetWeaver - 部署指南][deployment-guide]</span><span class="sxs-lookup"><span data-stu-id="05add-193">[SAP NetWeaver on Azure Virtual Machines (VMs) – Deployment Guide][deployment-guide]</span></span>
* <span data-ttu-id="05add-194">[Azure 虛擬機器 (VM) 上的 SAP NetWeaver - DBMS 部署指南 (本文件)][dbms-guide]</span><span class="sxs-lookup"><span data-stu-id="05add-194">[SAP NetWeaver on Azure Virtual Machines (VMs) – DBMS Deployment Guide (this document)][dbms-guide]</span></span>
* <span data-ttu-id="05add-195">[Azure 虛擬機器 (VM) 上的 SAP NetWeaver - 高可用性部署指南][ha-guide]</span><span class="sxs-lookup"><span data-stu-id="05add-195">[SAP NetWeaver on Azure Virtual Machines (VMs) – High Availability Deployment Guide][ha-guide]</span></span>

<span data-ttu-id="05add-196">Azure 上的 SAP 相關的 toohello 主題 hello 遵循 SAP 附註︰</span><span class="sxs-lookup"><span data-stu-id="05add-196">hello following SAP Notes are related toohello topic of SAP on Azure:</span></span>

| <span data-ttu-id="05add-197">附註編號</span><span class="sxs-lookup"><span data-stu-id="05add-197">Note number</span></span> | <span data-ttu-id="05add-198">課程名稱</span><span class="sxs-lookup"><span data-stu-id="05add-198">Title</span></span> |
| --- | --- |
| <span data-ttu-id="05add-199">[1928533]</span><span class="sxs-lookup"><span data-stu-id="05add-199">[1928533]</span></span> |<span data-ttu-id="05add-200">Azure 上的 SAP 應用程式︰支援的產品和 Azure VM 類型</span><span class="sxs-lookup"><span data-stu-id="05add-200">SAP Applications on Azure: Supported Products and Azure VM types</span></span> |
| <span data-ttu-id="05add-201">[2015553]</span><span class="sxs-lookup"><span data-stu-id="05add-201">[2015553]</span></span> |<span data-ttu-id="05add-202">Microsoft Azure 上的 SAP：支援的必要條件</span><span class="sxs-lookup"><span data-stu-id="05add-202">SAP on Microsoft Azure: Support Prerequisites</span></span> |
| <span data-ttu-id="05add-203">[1999351]</span><span class="sxs-lookup"><span data-stu-id="05add-203">[1999351]</span></span> |<span data-ttu-id="05add-204">疑難排解適用於 SAP 且已強化的 Azure 監視功能</span><span class="sxs-lookup"><span data-stu-id="05add-204">Troubleshooting Enhanced Azure Monitoring for SAP</span></span> |
| <span data-ttu-id="05add-205">[2178632]</span><span class="sxs-lookup"><span data-stu-id="05add-205">[2178632]</span></span> |<span data-ttu-id="05add-206">Microsoft Azure 上的 SAP 主要監視度量</span><span class="sxs-lookup"><span data-stu-id="05add-206">Key Monitoring Metrics for SAP on Microsoft Azure</span></span> |
| <span data-ttu-id="05add-207">[1409604]</span><span class="sxs-lookup"><span data-stu-id="05add-207">[1409604]</span></span> |<span data-ttu-id="05add-208">Windows 上的虛擬化︰增強型監視功能</span><span class="sxs-lookup"><span data-stu-id="05add-208">Virtualization on Windows: Enhanced Monitoring</span></span> |
| <span data-ttu-id="05add-209">[2191498]</span><span class="sxs-lookup"><span data-stu-id="05add-209">[2191498]</span></span> |<span data-ttu-id="05add-210">Linux 和 Azure 上的 SAP：增強型監視功能</span><span class="sxs-lookup"><span data-stu-id="05add-210">SAP on Linux with Azure: Enhanced Monitoring</span></span> |
| <span data-ttu-id="05add-211">[2039619]</span><span class="sxs-lookup"><span data-stu-id="05add-211">[2039619]</span></span> |<span data-ttu-id="05add-212">使用 Microsoft Azure 的 SAP 應用程式 hello Oracle 資料庫： 支援的產品和版本</span><span class="sxs-lookup"><span data-stu-id="05add-212">SAP Applications on Microsoft Azure using hello Oracle Database: Supported Products and Versions</span></span> |
| <span data-ttu-id="05add-213">[2233094]</span><span class="sxs-lookup"><span data-stu-id="05add-213">[2233094]</span></span> |<span data-ttu-id="05add-214">DB6︰Azure 上使用 IBM DB2 for Linux, UNIX, and Windows 的應用程式 - 其他資訊</span><span class="sxs-lookup"><span data-stu-id="05add-214">DB6: SAP Applications on Azure Using IBM DB2 for Linux, UNIX, and Windows - Additional Information</span></span> |
| <span data-ttu-id="05add-215">[2243692]</span><span class="sxs-lookup"><span data-stu-id="05add-215">[2243692]</span></span> |<span data-ttu-id="05add-216">Microsoft Azure (IaaS) VM 上的 Linux：SAP 授權問題</span><span class="sxs-lookup"><span data-stu-id="05add-216">Linux on Microsoft Azure (IaaS) VM: SAP license issues</span></span> |
| <span data-ttu-id="05add-217">[1984787]</span><span class="sxs-lookup"><span data-stu-id="05add-217">[1984787]</span></span> |<span data-ttu-id="05add-218">SUSE LINUX Enterprise Server 12：安裝注意事項</span><span class="sxs-lookup"><span data-stu-id="05add-218">SUSE LINUX Enterprise Server 12: Installation notes</span></span> |
| <span data-ttu-id="05add-219">[2002167]</span><span class="sxs-lookup"><span data-stu-id="05add-219">[2002167]</span></span> |<span data-ttu-id="05add-220">Red Hat Enterprise Linux 7.x：安裝和升級</span><span class="sxs-lookup"><span data-stu-id="05add-220">Red Hat Enterprise Linux 7.x: Installation and Upgrade</span></span> |

<span data-ttu-id="05add-221">也請閱讀 hello [SCN Wiki](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) for Linux 包含所有 SAP 附註。</span><span class="sxs-lookup"><span data-stu-id="05add-221">Please also read hello [SCN Wiki](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) that contains all SAP Notes for Linux.</span></span>

<span data-ttu-id="05add-222">您應該使用 hello Microsoft Azure 架構與如何部署和操作 Microsoft Azure 虛擬機器的相關知識。</span><span class="sxs-lookup"><span data-stu-id="05add-222">You should have a working knowledge about hello Microsoft Azure Architecture and how Microsoft Azure Virtual Machines are deployed and operated.</span></span> <span data-ttu-id="05add-223">您可以在以下位置找到更多資訊：<https://azure.microsoft.com/documentation/></span><span class="sxs-lookup"><span data-stu-id="05add-223">You can find more information here <https://azure.microsoft.com/documentation/></span></span>

> [!NOTE]
> <span data-ttu-id="05add-224">我們**不**討論 Microsoft Azure 平台為 hello Microsoft Azure 平台的服務 (PaaS)。</span><span class="sxs-lookup"><span data-stu-id="05add-224">We are **not** discussing Microsoft Azure Platform as a Service (PaaS) offerings of hello Microsoft Azure Platform.</span></span> <span data-ttu-id="05add-225">這份文件會說明如何執行資料庫管理系統 (DBMS) 在 Microsoft Azure 虛擬機器 (IaaS)，就像您會在內部部署環境中執行 hello DBMS。</span><span class="sxs-lookup"><span data-stu-id="05add-225">This paper is about running a database management system (DBMS) in Microsoft Azure Virtual Machines (IaaS) just as you would run hello DBMS in your on-premises environment.</span></span> <span data-ttu-id="05add-226">這兩個產品之間所提供的資料庫性能與功能差異極大，不應混用彼此。</span><span class="sxs-lookup"><span data-stu-id="05add-226">Database capabilities and functionalities between these two offers are very different and should not be mixed up with each other.</span></span> <span data-ttu-id="05add-227">另請參閱︰<https://azure.microsoft.com/services/sql-database/></span><span class="sxs-lookup"><span data-stu-id="05add-227">See also: <https://azure.microsoft.com/services/sql-database/></span></span>
>
>

<span data-ttu-id="05add-228">因為我們討論的 IaaS，一般而言 hello Windows、 Linux 和 DBMS 的安裝和組態會基本上 hello 與任何虛擬機器或裸機機器會與內部部署安裝相同。</span><span class="sxs-lookup"><span data-stu-id="05add-228">Since we are discussing IaaS, in general hello Windows, Linux and DBMS installation and configuration are essentially hello same as any virtual machine or bare metal machine you would install on-premises.</span></span> <span data-ttu-id="05add-229">不過，有一些架構和系統管理實作決策會與使用 IaaS 時的不同。</span><span class="sxs-lookup"><span data-stu-id="05add-229">However, there are some architecture and system management implementation decisions which will be different when utilizing IaaS.</span></span> <span data-ttu-id="05add-230">本文件的 hello 目的是 tooexplain hello 特定架構和系統管理差異，您必須準備使用 IaaS 時。</span><span class="sxs-lookup"><span data-stu-id="05add-230">hello purpose of this document is tooexplain hello specific architectural and system management differences that you must be prepared for when using IaaS.</span></span>

<span data-ttu-id="05add-231">一般情況下，hello 的本文將討論的差異層面大致如下：</span><span class="sxs-lookup"><span data-stu-id="05add-231">In general, hello overall areas of difference that this paper will discuss are:</span></span>

* <span data-ttu-id="05add-232">規劃的 SAP 系統 tooensure hello 正確 VM/VHD 配置您擁有 hello 適當的資料檔案配置，並且用於您的工作負載時可以達成足夠的 IOPS。</span><span class="sxs-lookup"><span data-stu-id="05add-232">Planning hello proper VM/VHD layout of SAP systems tooensure you have hello proper data file layout and can achieve enough IOPS for your workload.</span></span>
* <span data-ttu-id="05add-233">使用 IaaS 時的網路功能考量。</span><span class="sxs-lookup"><span data-stu-id="05add-233">Networking considerations when using IaaS.</span></span>
* <span data-ttu-id="05add-234">特定的資料庫功能 toouse 順序 toooptimize hello 資料庫配置中。</span><span class="sxs-lookup"><span data-stu-id="05add-234">Specific database features toouse in order toooptimize hello database layout.</span></span>
* <span data-ttu-id="05add-235">IaaS 的備份和還原考量。</span><span class="sxs-lookup"><span data-stu-id="05add-235">Backup and restore considerations in IaaS.</span></span>
* <span data-ttu-id="05add-236">使用不同類型的映像進行部署。</span><span class="sxs-lookup"><span data-stu-id="05add-236">Utilizing different types of images for deployment.</span></span>
* <span data-ttu-id="05add-237">Azure IaaS 中的高可用性。</span><span class="sxs-lookup"><span data-stu-id="05add-237">High Availability in Azure IaaS.</span></span>

## <span data-ttu-id="05add-238"><a name="65fa79d6-a85f-47ee-890b-22e794f51a64"></a>RDBMS 部署結構</span><span class="sxs-lookup"><span data-stu-id="05add-238"><a name="65fa79d6-a85f-47ee-890b-22e794f51a64"></a>Structure of a RDBMS Deployment</span></span>
<span data-ttu-id="05add-239">為了遵循這一章，就什麼出示中必要 toounderstand[這][ deployment-guide-3] hello 一章[部署指南 》][deployment-guide]。</span><span class="sxs-lookup"><span data-stu-id="05add-239">In order follow this chapter, it is necessary toounderstand what was presented in [this][deployment-guide-3] chapter of hello [Deployment Guide][deployment-guide].</span></span> <span data-ttu-id="05add-240">相關知識 hello 不同的 VM 系列，其差異和 Azure 標準和高階儲存體的差異應該了解並已知再讀取這一章。</span><span class="sxs-lookup"><span data-stu-id="05add-240">Knowledge about hello different VM-Series and their differences and differences of Azure Standard and Premium Storage should be understood and known before reading this chapter.</span></span>

<span data-ttu-id="05add-241">2015 年 3 月中，直到 Azure Vhd 包含作業系統的有限的 too127 GB 的大小。</span><span class="sxs-lookup"><span data-stu-id="05add-241">Until March 2015, Azure VHDs which contain an operating system were limited too127 GB in size.</span></span> <span data-ttu-id="05add-242">這項限制在 2015 年 3 月解除 (如需詳細資訊，請參閱 <https://azure.microsoft.com/blog/2015/03/25/azure-vm-os-drive-limit-octupled/>)。</span><span class="sxs-lookup"><span data-stu-id="05add-242">This limitation got lifted in March 2015 (for more information check <https://azure.microsoft.com/blog/2015/03/25/azure-vm-os-drive-limit-octupled/> ).</span></span> <span data-ttu-id="05add-243">從該處 Vhd 上包含 hello 作業系統可以有 hello 相同的大小為任何其他 VHD。</span><span class="sxs-lookup"><span data-stu-id="05add-243">From there on VHDs containing hello operating system can have hello same size as any other VHD.</span></span> <span data-ttu-id="05add-244">不過，我們仍然偏好 hello 作業系統、 DBMS 和最終 SAP 二進位檔所在位置 hello 資料庫檔案不同的部署結構。</span><span class="sxs-lookup"><span data-stu-id="05add-244">Nevertheless, we still prefer a structure of deployment where hello operating system, DBMS and eventual SAP binaries are separate from hello database files.</span></span> <span data-ttu-id="05add-245">因此，我們預期 hello 基底 VM （或 VHD） 與 hello 作業系統一起安裝，資料庫管理系統可執行檔和 SAP 執行檔，都在 Azure 虛擬機器中執行的 SAP 系統。</span><span class="sxs-lookup"><span data-stu-id="05add-245">Therefore, we expect SAP systems running in Azure Virtual Machines will have hello base VM (or VHD) installed with hello operating system, database management system executables and SAP executables.</span></span> <span data-ttu-id="05add-246">hello DBMS 資料和記錄檔會儲存在 Azure 儲存體 （Standard 或 Premium 儲存體） 單獨的 VHD 檔案，並在附加為邏輯磁碟 toohello 原始 Azure 作業系統映像 VM。</span><span class="sxs-lookup"><span data-stu-id="05add-246">hello DBMS data and log files will be stored in Azure Storage (Standard or Premium Storage) in separate VHD files and attached as logical disks toohello original Azure operating system image VM.</span></span>

<span data-ttu-id="05add-247">取決於有 （例如藉由使用 hello DS 系列或 GS 系列 Vm） 利用 Azure 標準或高階儲存體是 Azure 中記載的其他配額[這裡][virtual-machines-sizes]。</span><span class="sxs-lookup"><span data-stu-id="05add-247">Dependent on leveraging Azure Standard or Premium Storage (e.g. by using hello DS-series or GS-series VMs) there are other quotas in Azure which are documented [here][virtual-machines-sizes].</span></span> <span data-ttu-id="05add-248">當計劃 Azure Vhd，您將需要 toofind hello 取得最佳平衡 hello 配額 hello 下列：</span><span class="sxs-lookup"><span data-stu-id="05add-248">When planning your Azure VHDs, you’ll need toofind hello best balance of hello quotas for hello following:</span></span>

* <span data-ttu-id="05add-249">hello 資料檔案數目。</span><span class="sxs-lookup"><span data-stu-id="05add-249">hello number of data files.</span></span>
* <span data-ttu-id="05add-250">hello 包含 hello 檔案的 Vhd 數目。</span><span class="sxs-lookup"><span data-stu-id="05add-250">hello number of VHDs which contain hello files.</span></span>
* <span data-ttu-id="05add-251">hello 單一 vhd 的 IOPS 配額。</span><span class="sxs-lookup"><span data-stu-id="05add-251">hello IOPS quotas of a single VHD.</span></span>
* <span data-ttu-id="05add-252">每個 VHD 的 hello 資料輸送量。</span><span class="sxs-lookup"><span data-stu-id="05add-252">hello data throughput per VHD.</span></span>
* <span data-ttu-id="05add-253">每個 VM 大小的額外 Vhd 可能的 hello 數目。</span><span class="sxs-lookup"><span data-stu-id="05add-253">hello number of additional VHDs possible per VM size.</span></span>
* <span data-ttu-id="05add-254">hello 整體儲存體輸送量 VM 可以提供。</span><span class="sxs-lookup"><span data-stu-id="05add-254">hello overall storage throughput a VM can provide.</span></span>

<span data-ttu-id="05add-255">Azure 將針對每個 VHD 磁碟機強制執行 IOPS 配額。</span><span class="sxs-lookup"><span data-stu-id="05add-255">Azure will enforce an IOPS quota per VHD drive.</span></span> <span data-ttu-id="05add-256">這些配額與 Azure 標準儲存體和進階儲存體上裝載的 VHD 不同。</span><span class="sxs-lookup"><span data-stu-id="05add-256">These quotas are different for VHDs hosted on Azure Standard Storage and Premium Storage.</span></span> <span data-ttu-id="05add-257">I/O 延遲也會提供更好的 I/O 延遲因素的進階儲存體 hello 兩個儲存體類型之間非常不同。</span><span class="sxs-lookup"><span data-stu-id="05add-257">I/O latencies will also be very different between hello two storage types with Premium Storage delivering factors better I/O latencies.</span></span> <span data-ttu-id="05add-258">每個 hello 不同 VM 類型具有有限的 Vhd，您都可以 tooattach 時。</span><span class="sxs-lookup"><span data-stu-id="05add-258">Each of hello different VM types have a limited number of VHDs that you are able tooattach.</span></span> <span data-ttu-id="05add-259">另一個限制是只有特定的 VM 類型可以利用 Azure 進階儲存體。</span><span class="sxs-lookup"><span data-stu-id="05add-259">Another restriction is that only certain VM types can leverage Azure Premium Storage.</span></span> <span data-ttu-id="05add-260">這表示使用某種 VM 類型的 hello 決策可能不只重點 hello CPU 和記憶體需求也的 hello IOPS、 延遲和磁碟輸送量需求通常與 hello Vhd 數目縮放或 hello 高階儲存體磁碟類型。</span><span class="sxs-lookup"><span data-stu-id="05add-260">This means hello decision for a certain VM type might not only be driven by hello CPU and memory requirements, but also by hello IOPS, latency and disk throughput requirements that usually are scaled with hello number of VHDs or hello type of Premium Storage disks.</span></span> <span data-ttu-id="05add-261">特別是在進階儲存體 hello 之 vhd 的大小也可能會取決於 hello IOPS 及輸送量需要 toobe 達成每個 VHD 數目。</span><span class="sxs-lookup"><span data-stu-id="05add-261">Especially with Premium Storage hello size of a VHD also might be dictated by hello number of IOPS and throughput that needs toobe achieved by each VHD.</span></span>

<span data-ttu-id="05add-262">hello 事實的 hello 整體 IOPS 速率、 hello 掛接的 Vhd 數目和 hello 的 hello VM 因素環環相扣，大小可能會導致不同於其內部部署 SAP 系統 toobe 的 Azure 組態。</span><span class="sxs-lookup"><span data-stu-id="05add-262">hello fact that hello overall IOPS rate, hello number of VHDs mounted, and hello size of hello VM are all tied together, might cause an Azure configuration of an SAP system toobe different than its on-premises deployment.</span></span> <span data-ttu-id="05add-263">每個 LUN 的 hello IOPS 限制是內部部署中通常可以設定。</span><span class="sxs-lookup"><span data-stu-id="05add-263">hello IOPS limits per LUN are usually configurable in on-premises deployments.</span></span> <span data-ttu-id="05add-264">而與 Azure 儲存體這些限制是固定的或如高階儲存體相依 hello 磁碟類型上所示。</span><span class="sxs-lookup"><span data-stu-id="05add-264">Whereas with Azure Storage those limits are fixed or as in Premium Storage dependent on hello disk type.</span></span> <span data-ttu-id="05add-265">因此，與內部部署我們看到客戶組態的資料庫伺服器使用許多不同的磁碟區的特殊的可執行檔，如 SAP 和 DBMS 或特殊磁碟區來存放暫存資料庫或資料表空間 hello。</span><span class="sxs-lookup"><span data-stu-id="05add-265">So with on-premises deployments we see customer configurations of database servers which are using many different volumes for special executables like SAP and hello DBMS or special volumes for temporary databases or table spaces.</span></span> <span data-ttu-id="05add-266">這類內部部署系統時移動的 tooAzure 時，可能會浪費 tooa IOPS 頻寬所浪費的可執行檔或資料庫不會執行任何或不大量 IOPS 的 VHD。</span><span class="sxs-lookup"><span data-stu-id="05add-266">When such an on-premises system is moved tooAzure it might lead tooa waste of potential IOPS bandwidth by wasting a VHD for executables or databases which do not perform any or not a lot of IOPS.</span></span> <span data-ttu-id="05add-267">因此，在 Azure Vm 中建議盡可能該 hello DBMS 和 SAP 執行檔安裝在 hello 作業系統磁碟。</span><span class="sxs-lookup"><span data-stu-id="05add-267">Therefore, in Azure VMs we recommend that hello DBMS and SAP executables be installed on hello OS disk if possible.</span></span>

<span data-ttu-id="05add-268">hello hello 資料庫檔案和記錄檔以及 hello 型別使用，Azure 儲存體的位置應該定義 IOPS、 延遲和輸送量需求。</span><span class="sxs-lookup"><span data-stu-id="05add-268">hello placement of hello database files and log files and hello type of Azure Storage used, should be defined by IOPS, latency and throughput requirements.</span></span> <span data-ttu-id="05add-269">在訂單 toohave 足夠的 IOPS 供 hello 交易記錄檔，您可能會強制的 tooleverage hello 交易記錄檔的多個 Vhd 檔案，或使用較大的進階儲存體磁碟。</span><span class="sxs-lookup"><span data-stu-id="05add-269">In order toohave enough IOPS for hello transaction log, you might be forced tooleverage multiple VHDs for hello transaction log file or use a larger Premium Storage disk.</span></span> <span data-ttu-id="05add-270">在這種情況下其中一項只會建置軟體會 RAID （例如 Windows 儲存體集區的 Windows 或 MDADM 和適用於 Linux LVM （邏輯磁碟區管理員）） 以 hello Vhd hello 交易記錄檔。</span><span class="sxs-lookup"><span data-stu-id="05add-270">In such a case one would simply build a software RAID (e.g. Windows Storage Pool for Windows or MDADM and LVM (Logical Volume Manager) for Linux) with hello VHDs which will contain hello transaction log.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="05add-272">Windows</span><span class="sxs-lookup"><span data-stu-id="05add-272">Windows</span></span>
>
> <span data-ttu-id="05add-273">在 Azure VM 的 D:\ 磁碟機是由某些本機的磁碟備份 hello Azure 計算節點非持續性磁碟機。</span><span class="sxs-lookup"><span data-stu-id="05add-273">Drive D:\ in an Azure VM is a non-persisted drive which is backed by some local disks on hello Azure compute node.</span></span> <span data-ttu-id="05add-274">由於非持續性，這表示 hello VM 重新開機時，在 hello D:\ 磁碟機上任何所做的變更 toohello 內容都會遺失。</span><span class="sxs-lookup"><span data-stu-id="05add-274">Because it is non-persisted, this means that any changes made toohello content on hello D:\ drive is lost when hello VM is rebooted.</span></span> <span data-ttu-id="05add-275">「任何變更」的意思是已儲存的檔案、已建立的目錄、已安裝的應用程式等。</span><span class="sxs-lookup"><span data-stu-id="05add-275">By "any changes", we mean saved files, directories created, applications installed, etc.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="05add-277">Linux</span><span class="sxs-lookup"><span data-stu-id="05add-277">Linux</span></span>
>
> <span data-ttu-id="05add-278">Linux 的 Azure Vm 中自動掛接磁碟機時 /mnt/resource 這是本機磁碟的 hello Azure 計算節點上支援非持續性磁碟機。</span><span class="sxs-lookup"><span data-stu-id="05add-278">Linux Azure VMs automatically mount a drive at /mnt/resource which is a non-persisted drive backed by local disks on hello Azure compute node.</span></span> <span data-ttu-id="05add-279">由於非持續性，這表示 hello VM 重新開機時，在 /mnt/resource 任何所做的變更 toocontent 都會遺失。</span><span class="sxs-lookup"><span data-stu-id="05add-279">Because it is non-persisted, this means that any changes made toocontent in /mnt/resource is lost when hello VM is rebooted.</span></span> <span data-ttu-id="05add-280">「任何變更」的意思是已儲存的檔案、已建立的目錄、已安裝的應用程式等。</span><span class="sxs-lookup"><span data-stu-id="05add-280">By any changes, we mean files saved, directories created, applications installed, etc.</span></span>
>
>

- - -
<span data-ttu-id="05add-281">相依於 hello Azure VM 系列，hello hello 上的本機磁碟計算節點顯示不同效能可以像分類：</span><span class="sxs-lookup"><span data-stu-id="05add-281">Dependent on hello Azure VM-series, hello local disks on hello compute node show different performance which can be categorized like:</span></span>

* <span data-ttu-id="05add-282">A0-A7︰非常有限的效能。</span><span class="sxs-lookup"><span data-stu-id="05add-282">A0-A7: Very limited performance.</span></span> <span data-ttu-id="05add-283">無法使用 Windows 分頁檔以外的項目</span><span class="sxs-lookup"><span data-stu-id="05add-283">Not usable for anything beyond windows page file</span></span>
* <span data-ttu-id="05add-284">A8-A11︰效能特性非常良好，有數萬個 IOPS 和 > 1 GB/秒的輸送量</span><span class="sxs-lookup"><span data-stu-id="05add-284">A8-A11: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="05add-285">D 系列︰效能特性非常良好，有數萬個 IOPS 和 > 1 GB/秒的輸送量</span><span class="sxs-lookup"><span data-stu-id="05add-285">D-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="05add-286">DS 系列︰效能特性非常良好，有數萬個 IOPS 和 > 1 GB/秒的輸送量</span><span class="sxs-lookup"><span data-stu-id="05add-286">DS-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="05add-287">G 系列︰效能特性非常良好，有數萬個 IOPS 和 > 1 GB/秒的輸送量</span><span class="sxs-lookup"><span data-stu-id="05add-287">G-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="05add-288">GS 系列︰效能特性非常良好，有數萬個 IOPS 和 > 1 GB/秒的輸送量</span><span class="sxs-lookup"><span data-stu-id="05add-288">GS-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>

<span data-ttu-id="05add-289">上述陳述式會套用 toohello 經過驗證和 SAP 的 VM 類型。</span><span class="sxs-lookup"><span data-stu-id="05add-289">Statements above are applying toohello VM types that are certified with SAP.</span></span> <span data-ttu-id="05add-290">絕佳的 IOPS 及輸送量與 hello VM 系列部分的 DBMS 功能，例如 tempdb 或暫存資料表空間限定的運用。</span><span class="sxs-lookup"><span data-stu-id="05add-290">hello VM-series with excellent IOPS and throughput qualify for leverage by some DBMS features, like tempdb or temporary table space.</span></span>

### <span data-ttu-id="05add-291"><a name="c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f"></a>VM 和 VHD 的快取</span><span class="sxs-lookup"><span data-stu-id="05add-291"><a name="c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f"></a>Caching for VMs and VHDs</span></span>
<span data-ttu-id="05add-292">當我們建立透過 hello 入口網站，或當掛接已上傳的 Vhd tooVMs 那些磁碟 /vhd 時，我們可以選擇是否要快取 hello VM 與 Azure 儲存體中那些 Vhd 間的 hello I/O 流量。</span><span class="sxs-lookup"><span data-stu-id="05add-292">When we create those disks/VHDs through hello portal or when we mount uploaded VHDs tooVMs, we can choose whether hello I/O traffic between hello VM and those VHDs located in Azure storage are cached.</span></span> <span data-ttu-id="05add-293">Azure 標準和進階儲存體會針對這種快取類型使用兩種不同技術。</span><span class="sxs-lookup"><span data-stu-id="05add-293">Azure Standard and Premium Storage use two different technologies for this type of cache.</span></span> <span data-ttu-id="05add-294">在這兩種情況下 hello 快取本身會在磁碟支援上使用相同的磁碟機的 hello hello 暫存磁碟 (Windows 上的 D:\) 或 /mnt/resource Linux 上的 hello VM。</span><span class="sxs-lookup"><span data-stu-id="05add-294">In both cases hello cache itself would be disk backed on hello same drives used by hello temporary disk (D:\ on Windows or /mnt/resource on Linux) of hello VM.</span></span>

<span data-ttu-id="05add-295">Azure 標準儲存體 hello 可能快取類型為：</span><span class="sxs-lookup"><span data-stu-id="05add-295">For Azure Standard Storage hello possible cache types are:</span></span>

* <span data-ttu-id="05add-296">無快取</span><span class="sxs-lookup"><span data-stu-id="05add-296">No caching</span></span>
* <span data-ttu-id="05add-297">讀取快取</span><span class="sxs-lookup"><span data-stu-id="05add-297">Read caching</span></span>
* <span data-ttu-id="05add-298">讀取和寫入快取</span><span class="sxs-lookup"><span data-stu-id="05add-298">Read and Write caching</span></span>

<span data-ttu-id="05add-299">順序 tooget 一致且具有決定性效能，您應該設定 hello 快取 Azure 標準儲存體上的所有 Vhd 包含**DBMS 相關資料檔案、 記錄檔和資料表空間 too'NONE'**。</span><span class="sxs-lookup"><span data-stu-id="05add-299">In order tooget consistent and deterministic performance, you should set hello caching on Azure Standard Storage for all VHDs containing **DBMS related data files, log files and table space too'NONE'**.</span></span> <span data-ttu-id="05add-300">hello 快取的 hello VM 仍可使用 hello 預設值。</span><span class="sxs-lookup"><span data-stu-id="05add-300">hello caching of hello VM can remain with hello default.</span></span>

<span data-ttu-id="05add-301">Azure 高階儲存體 hello 下列快取的選項有：</span><span class="sxs-lookup"><span data-stu-id="05add-301">For Azure Premium Storage hello following caching options exist:</span></span>

* <span data-ttu-id="05add-302">無快取</span><span class="sxs-lookup"><span data-stu-id="05add-302">No caching</span></span>
* <span data-ttu-id="05add-303">讀取快取</span><span class="sxs-lookup"><span data-stu-id="05add-303">Read caching</span></span>

<span data-ttu-id="05add-304">建議 Azure 高階儲存體是 tooleverage**讀取資料檔的快取**的 hello SAP 資料庫，並選擇**hello VHD(s) 記錄檔的無快取**。</span><span class="sxs-lookup"><span data-stu-id="05add-304">Recommendation for Azure Premium Storage is tooleverage **Read caching for data files** of hello SAP database and chose **No caching for hello VHD(s) of log file(s)**.</span></span>

### <span data-ttu-id="05add-305"><a name="c8e566f9-21b7-4457-9f7f-126036971a91"></a>軟體 RAID</span><span class="sxs-lookup"><span data-stu-id="05add-305"><a name="c8e566f9-21b7-4457-9f7f-126036971a91"></a>Software RAID</span></span>
<span data-ttu-id="05add-306">所述之已上方，您需要 IOPS 的 toobalance hello 數目所需 hello 資料庫檔案，您可以設定的 Vhd 和 hello hello 數目之間的最大 IOPS Azure VM 將會提供每個 VHD 或 Premium 儲存體磁碟類型。</span><span class="sxs-lookup"><span data-stu-id="05add-306">As already stated above, you will need toobalance hello number of IOPS needed for hello database files across hello number of VHDs you can configure and hello maximum IOPS an Azure VM will provide per VHD or Premium Storage disk type.</span></span> <span data-ttu-id="05add-307">最簡單的方法以載入到 Vhd 的 IOPS 的 hello toodeal 位於 toobuild 軟體 RAID hello 不同 Vhd。</span><span class="sxs-lookup"><span data-stu-id="05add-307">Easiest way toodeal with hello IOPS load over VHDs is toobuild a software RAID over hello different VHDs.</span></span> <span data-ttu-id="05add-308">然後置於的 hello LUN 劃分出 hello 軟體 RAID 的 hello SAP DBMS 的資料檔案數目。</span><span class="sxs-lookup"><span data-stu-id="05add-308">Then place a number of data files of hello SAP DBMS on hello LUNS carved out of hello software RAID.</span></span> <span data-ttu-id="05add-309">相依於 hello 需求，您可能會想 tooconsider hello 使用量的進階儲存體以及自兩個 hello 三個不同的進階儲存體磁碟提供更高版本比標準儲存體為基礎的 Vhd 的 IOPS 配額。</span><span class="sxs-lookup"><span data-stu-id="05add-309">Dependent on hello requirements you might want tooconsider hello usage of Premium Storage as well since two of hello three different Premium Storage disks provide higher IOPS quota than VHDs based on Standard Storage.</span></span> <span data-ttu-id="05add-310">除了 hello 重大 I/O 延遲 Azure 高階儲存體所提供的更好。</span><span class="sxs-lookup"><span data-stu-id="05add-310">Besides hello significant better I/O latency provided by Azure Premium Storage.</span></span>

<span data-ttu-id="05add-311">這同樣適不同 DBMS 系統 hello toohello 交易記錄的檔。</span><span class="sxs-lookup"><span data-stu-id="05add-311">Same applies toohello transaction log of hello different DBMS systems.</span></span> <span data-ttu-id="05add-312">具有大量它們只要加入更多 Tlog 檔案不會協助因為 hello DBMS 系統一次只能寫入一個 hello 檔案。</span><span class="sxs-lookup"><span data-stu-id="05add-312">With a lot of them just adding more Tlog files does not help since hello DBMS systems write into one of hello files at a time only.</span></span> <span data-ttu-id="05add-313">如果需要更高 IOPS 速率比單一標準儲存體為基礎 VHD 可以傳遞，您可以等量分割至多個標準儲存體的 Vhd 或您可以使用較大的進階儲存體磁碟類型，高 IOPS 速率超過也提供低延遲因素 hello 寫入我 /Os 到 hello 交易記錄檔。</span><span class="sxs-lookup"><span data-stu-id="05add-313">If higher IOPS rates are needed than a single Standard Storage based VHD can deliver, you can stripe over multiple Standard Storage VHDs or you can use a larger Premium Storage disk type that beyond higher IOPS rates also delivers factors lower latency for hello write I/Os into hello transaction log.</span></span>

<span data-ttu-id="05add-314">以下是在 Azure 部署中使用優先軟體 RAID 時所遇到的情況：</span><span class="sxs-lookup"><span data-stu-id="05add-314">Situations experienced in Azure deployments which would favor using a software RAID are:</span></span>

* <span data-ttu-id="05add-315">交易記錄/重做記錄需要的 IOPS 數目比 Azure 針對單一 VHD 所提供的還多。</span><span class="sxs-lookup"><span data-stu-id="05add-315">Transaction Log/Redo Log require more IOPS than Azure provides for a single VHD.</span></span> <span data-ttu-id="05add-316">如前所述，解決此問題的方式是在多個 VHD上使用軟體 RAID 來建置 LUN。</span><span class="sxs-lookup"><span data-stu-id="05add-316">As mentioned above this can be solved by building a LUN over multiple VHDs using a software RAID.</span></span>
* <span data-ttu-id="05add-317">I/O 工作負載透過 hello 不同資料檔案的分配 hello SAP 資料庫。</span><span class="sxs-lookup"><span data-stu-id="05add-317">Uneven I/O workload distribution over hello different data files of hello SAP database.</span></span> <span data-ttu-id="05add-318">在此情況下一個可能會遇到一個資料檔，而是會經常遇到 hello 配額。</span><span class="sxs-lookup"><span data-stu-id="05add-318">In such cases one can experience one data file hitting hello quota rather often.</span></span> <span data-ttu-id="05add-319">而其他資料檔案甚至不會進行關閉 toohello 單一 vhd 的 IOPS 配額。</span><span class="sxs-lookup"><span data-stu-id="05add-319">Whereas other data files are not even getting close toohello IOPS quota of a single VHD.</span></span> <span data-ttu-id="05add-320">在這種情況下 hello 最簡單的解決方案是一個 toobuild 使用軟體 RAID 的多個 Vhd 上的 LUN。</span><span class="sxs-lookup"><span data-stu-id="05add-320">In such cases hello easiest solution is toobuild one LUN over multiple VHDs using a software RAID.</span></span>
* <span data-ttu-id="05add-321">您不知道哪些 hello 確切的 I/O 工作負載每個資料檔案且只大致了解什麼 hello 整體 IOPS hello DBMS 工作負載會。</span><span class="sxs-lookup"><span data-stu-id="05add-321">You don’t know what hello exact I/O workload per data file is and only roughly know what hello overall IOPS workload against hello DBMS is.</span></span> <span data-ttu-id="05add-322">最簡單的 toodo 是軟體的的 toobuild hello 與一個 LUN 協助 RAID。</span><span class="sxs-lookup"><span data-stu-id="05add-322">Easiest toodo is toobuild one LUN with hello help of a software RAID.</span></span> <span data-ttu-id="05add-323">這個 LUN 背後的多個 Vhd 的配額 hello 總和然後應該滿足 hello 已知 IOPS 速率。</span><span class="sxs-lookup"><span data-stu-id="05add-323">hello sum of quotas of multiple VHDs behind this LUN should then fulfill hello known IOPS rate.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="05add-325">Windows</span><span class="sxs-lookup"><span data-stu-id="05add-325">Windows</span></span>
>
> <span data-ttu-id="05add-326">最好使用 Windows Server 2012 或更高的儲存空間，因為它比舊版 Windows 的 Windows 等量更有效率。</span><span class="sxs-lookup"><span data-stu-id="05add-326">Usage of Windows Server 2012 or higher Storage Spaces is preferable since it is more efficient than Windows Striping of earlier Windows versions.</span></span> <span data-ttu-id="05add-327">請注意，您可能需要 toocreate hello Windows 儲存集區和儲存空間的 PowerShell 命令時使用 Windows Server 2012 做為作業系統。</span><span class="sxs-lookup"><span data-stu-id="05add-327">Please be aware that you might need toocreate hello Windows Storage Pools and Storage Spaces by PowerShell commands when using Windows Server 2012 as Operating System.</span></span> <span data-ttu-id="05add-328">hello PowerShell 命令可以在這裡找到<https://technet.microsoft.com/library/jj851254.aspx></span><span class="sxs-lookup"><span data-stu-id="05add-328">hello PowerShell commands can be found here <https://technet.microsoft.com/library/jj851254.aspx></span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="05add-330">Linux</span><span class="sxs-lookup"><span data-stu-id="05add-330">Linux</span></span>
>
> <span data-ttu-id="05add-331">只有 MDADM 和 LVM （邏輯磁碟區管理員） 是支援的 toobuild RAID Linux 上的軟體。</span><span class="sxs-lookup"><span data-stu-id="05add-331">Only MDADM and LVM (Logical Volume Manager) are supported toobuild a software RAID on Linux.</span></span> <span data-ttu-id="05add-332">如需詳細資訊，請閱讀下列文件的 hello:</span><span class="sxs-lookup"><span data-stu-id="05add-332">For more information, read hello following articles:</span></span>
>
> * <span data-ttu-id="05add-333">[在 Linux 上設定軟體 RAID][virtual-machines-linux-configure-raid] (適用於 MDADM)</span><span class="sxs-lookup"><span data-stu-id="05add-333">[Configure Software RAID on Linux][virtual-machines-linux-configure-raid] (for MDADM)</span></span>
> * <span data-ttu-id="05add-334">[在 Azure 中的 Linux VM 上設定 LVM][virtual-machines-linux-configure-lvm]</span><span class="sxs-lookup"><span data-stu-id="05add-334">[Configure LVM on a Linux VM in Azure][virtual-machines-linux-configure-lvm]</span></span>
>
>

- - -
<span data-ttu-id="05add-335">是運用 VM 系列通常是無法 toowork 與 Azure 高階儲存體的考量：</span><span class="sxs-lookup"><span data-stu-id="05add-335">Considerations for leveraging VM-series which are able toowork with Azure Premium Storage usually are:</span></span>

* <span data-ttu-id="05add-336">要求 I/O 延遲關閉 toowhat SAN/NAS 裝置傳送。</span><span class="sxs-lookup"><span data-stu-id="05add-336">Demands for I/O latencies that are close toowhat SAN/NAS devices deliver.</span></span>
* <span data-ttu-id="05add-337">比 Azure 標準儲存體可傳遞的 I/O 延遲更好的因素需求。</span><span class="sxs-lookup"><span data-stu-id="05add-337">Demand for factors better I/O latency than Azure Standard Storage can deliver.</span></span>
* <span data-ttu-id="05add-338">對於可根據特定 VM 類型使用多個標準儲存體 VHD 來達成的每個 VM 提供更高的 IOPS。</span><span class="sxs-lookup"><span data-stu-id="05add-338">Higher IOPS per VM than what could be achieved with multiple Standard Storage VHDs against a certain VM type.</span></span>

<span data-ttu-id="05add-339">因為 hello 基礎 Azure 儲存體複寫每個 VHD tooat 至少三個儲存體節點簡單的 RAID 0 等量配置可用。</span><span class="sxs-lookup"><span data-stu-id="05add-339">Since hello underlying Azure Storage replicates each VHD tooat least three storage nodes, simple RAID 0 striping can be used.</span></span> <span data-ttu-id="05add-340">沒有任何需要 tooimplement RAID5 或 RAID1。</span><span class="sxs-lookup"><span data-stu-id="05add-340">There is no need tooimplement RAID5 or RAID1.</span></span>

### <span data-ttu-id="05add-341"><a name="10b041ef-c177-498a-93ed-44b3441ab152"></a>Microsoft Azure 儲存體</span><span class="sxs-lookup"><span data-stu-id="05add-341"><a name="10b041ef-c177-498a-93ed-44b3441ab152"></a>Microsoft Azure Storage</span></span>
<span data-ttu-id="05add-342">Microsoft Azure 儲存體會將 hello （含 OS) 的基底 VM 和 Vhd 或 Blob tooat 至少 3 不同儲存體節點。</span><span class="sxs-lookup"><span data-stu-id="05add-342">Microsoft Azure Storage will store hello base VM (with OS) and VHDs or BLOBs tooat least 3 separate storage nodes.</span></span> <span data-ttu-id="05add-343">建立儲存體帳戶時，有一個保護選項，如下所示：</span><span class="sxs-lookup"><span data-stu-id="05add-343">When creating a storage account, there is a choice of protection as shown here:</span></span>

![針對 Azure 儲存體帳戶啟用異地複寫][dbms-guide-figure-100]

<span data-ttu-id="05add-345">Azure 儲存體本機複寫 （本機備援） 可提供少數客戶可以放心 toodeploy tooinfrastructure 失敗原因會遺失資料的保護層級。</span><span class="sxs-lookup"><span data-stu-id="05add-345">Azure Storage Local Replication (Locally Redundant) provides levels of protection against data loss due tooinfrastructure failure that few customers could afford toodeploy.</span></span> <span data-ttu-id="05add-346">如上所示搭配第五個的其中一個 hello 變化前三個有 4 個不同的選項。</span><span class="sxs-lookup"><span data-stu-id="05add-346">As shown above there are 4 different options with a fifth being a variation of one of hello first three.</span></span> <span data-ttu-id="05add-347">仔細查看我們區分它們的方式︰</span><span class="sxs-lookup"><span data-stu-id="05add-347">Looking closer at them we can distinguish:</span></span>

* <span data-ttu-id="05add-348">**進階本地備援儲存體 (LRS)**：針對執行需要大量 I/O 之工作負載的虛擬機器，「Azure 進階儲存體」提供高效能、低延遲的磁碟支援。</span><span class="sxs-lookup"><span data-stu-id="05add-348">**Premium Locally Redundant Storage (LRS)**: Azure Premium Storage delivers high-performance, low-latency disk support for virtual machines running I/O-intensive workloads.</span></span> <span data-ttu-id="05add-349">有 3 個複本的 hello hello 資料相同的 Azure 地區的 Azure 資料中心。</span><span class="sxs-lookup"><span data-stu-id="05add-349">There are 3 replicas of hello data within hello same Azure datacenter of an Azure region.</span></span> <span data-ttu-id="05add-350">hello 複本會以不同的容錯和升級網域中 (如概念，請參閱[這][ planning-guide-3.2]章節 hello[規劃指南 》][planning-guide])。</span><span class="sxs-lookup"><span data-stu-id="05add-350">hello copies will be in different Fault and Upgrade Domains (for concepts see [this][planning-guide-3.2] chapter in hello [Planning Guide][planning-guide]).</span></span> <span data-ttu-id="05add-351">發生或從到期 tooa 存放裝置節點失敗或磁碟失敗的服務傳送的 hello 資料的複本，會自動產生新的複本。</span><span class="sxs-lookup"><span data-stu-id="05add-351">In case of a replica of hello data going out of service due tooa storage node failure or disk failure, a new replica is generated automatically.</span></span>
* <span data-ttu-id="05add-352">**本機備援儲存體 (LRS)**： 在此情況下有 3 個複本的 hello hello 資料相同的 Azure 地區的 Azure 資料中心。</span><span class="sxs-lookup"><span data-stu-id="05add-352">**Locally Redundant Storage (LRS)**: In this case there are 3 replicas of hello data within hello same Azure datacenter of an Azure region.</span></span> <span data-ttu-id="05add-353">hello 複本會以不同的容錯和升級網域中 (如概念，請參閱[這][ planning-guide-3.2]章節 hello[規劃指南 》][planning-guide])。</span><span class="sxs-lookup"><span data-stu-id="05add-353">hello copies will be in different Fault and Upgrade Domains (for concepts see [this][planning-guide-3.2] chapter in hello [Planning Guide][planning-guide]).</span></span> <span data-ttu-id="05add-354">發生或從到期 tooa 存放裝置節點失敗或磁碟失敗的服務傳送的 hello 資料的複本，會自動產生新的複本。</span><span class="sxs-lookup"><span data-stu-id="05add-354">In case of a replica of hello data going out of service due tooa storage node failure or disk failure, a new replica is generated automatically.</span></span>
* <span data-ttu-id="05add-355">**地理備援儲存體 (GRS)**： 在此情況下沒有將摘要額外的非同步複寫 3 個複本的大部分 hello 中的案例中的另一個 Azure 區域中的 hello 資料 hello 相同的地理區域 （例如北歐和美國西部歐洲）。</span><span class="sxs-lookup"><span data-stu-id="05add-355">**Geo Redundant Storage (GRS)**: In this case there is an asynchronous replication that will feed an additional 3 replicas of hello data in another Azure Region which is in most of hello cases in hello same geographical region (like North Europe and West Europe).</span></span> <span data-ttu-id="05add-356">這將會產生 3 個額外的複本，因此總共有 6 個複本。</span><span class="sxs-lookup"><span data-stu-id="05add-356">This will result in 3 additional replicas, so that there are 6 replicas in sum.</span></span> <span data-ttu-id="05add-357">這一種是 「 hello 地理複寫的 Azure 區域中的 hello 資料，用於讀取 （讀取權限的地理備援） 的用途。</span><span class="sxs-lookup"><span data-stu-id="05add-357">A variation of this is an addition where hello data in hello geo replicated Azure region can be used for read purposes (Read-Access Geo-Redundant).</span></span>
* <span data-ttu-id="05add-358">**區域備援儲存體 (ZRS)**： 在此情況下的資料保留在 hello hello 3 複本 hello 相同 Azure 區域。</span><span class="sxs-lookup"><span data-stu-id="05add-358">**Zone Redundant Storage (ZRS)**: In this case hello 3 replicas of hello data remain in hello same Azure Region.</span></span> <span data-ttu-id="05add-359">中所述[這][ planning-guide-3.1] hello 一章[規劃指南 》] [ planning-guide] Azure 地區可以非常接近的數字的資料中心。</span><span class="sxs-lookup"><span data-stu-id="05add-359">As explained in [this][planning-guide-3.1] chapter of hello [Planning Guide][planning-guide] an Azure region can be a number of datacenters in close proximity.</span></span> <span data-ttu-id="05add-360">LRS hello 案例 hello 複本會分散 hello 不同的資料中心，讓一個 Azure 區域。</span><span class="sxs-lookup"><span data-stu-id="05add-360">In hello case of LRS hello replicas would be distributed over hello different datacenters that make one Azure region.</span></span>

<span data-ttu-id="05add-361">如需詳細資訊，請參閱[這裡][storage-redundancy]。</span><span class="sxs-lookup"><span data-stu-id="05add-361">More information can be found [here][storage-redundancy].</span></span>

> [!NOTE]
> <span data-ttu-id="05add-362">不建議的 DBMS 部署 hello 的地理備援儲存體的使用方式</span><span class="sxs-lookup"><span data-stu-id="05add-362">For DBMS deployments, hello usage of Geo Redundant Storage is not recommended</span></span>
>
> <span data-ttu-id="05add-363">Azure 儲存體異地複寫是非同步的。</span><span class="sxs-lookup"><span data-stu-id="05add-363">Azure Storage Geo-Replication is asynchronous.</span></span> <span data-ttu-id="05add-364">單一 VM 未同步處理在鎖定步驟中的個別 Vhd 掛接 tooa 複寫。</span><span class="sxs-lookup"><span data-stu-id="05add-364">Replication of individual VHDs mounted tooa single VM are not synchronized in lock step.</span></span> <span data-ttu-id="05add-365">因此，它不是適合 tooreplicate DBMS 檔案分散至不同的 Vhd，或是針對根據多個 Vhd 的 RAID 軟體部署。</span><span class="sxs-lookup"><span data-stu-id="05add-365">Therefore, it is not suitable tooreplicate DBMS files that are distributed over different VHDs or deployed against a software RAID based on multiple VHDs.</span></span> <span data-ttu-id="05add-366">DBMS 軟體需要 hello 永續性磁碟儲存體精確地同步處理跨不同的 Lun 和基礎磁碟/Vhd/主軸。</span><span class="sxs-lookup"><span data-stu-id="05add-366">DBMS software requires that hello persistent disk storage is precisely synchronized across different LUNs and underlying disks/VHDs/spindles.</span></span> <span data-ttu-id="05add-367">DBMS 軟體使用各種機制 toosequence IO 寫入活動，DBMS 將會報告 hello 磁碟儲存體的 hello 複寫目標已損毀，如果這些因甚至幾毫秒。</span><span class="sxs-lookup"><span data-stu-id="05add-367">DBMS software uses various mechanisms toosequence IO write activities and a DBMS will report that hello disk storage targeted by hello replication is corrupted if these vary even by a few milliseconds.</span></span> <span data-ttu-id="05add-368">因此如果您真的想資料庫組態對資料庫延展到多個 Vhd 進行地理複寫，這類複寫需要 toobe 執行使用資料庫方法和功能。</span><span class="sxs-lookup"><span data-stu-id="05add-368">Hence if one really wants a database configuration with a database stretched across multiple VHDs geo-replicated, such a replication needs toobe performed with database means and functionality.</span></span> <span data-ttu-id="05add-369">其中一個不應依賴 Azure 儲存體地理複寫 tooperform 這項作業。</span><span class="sxs-lookup"><span data-stu-id="05add-369">One should not rely on Azure Storage Geo-Replication tooperform this job.</span></span>
>
> <span data-ttu-id="05add-370">hello 問題是使用範例系統最簡單的 tooexplain。</span><span class="sxs-lookup"><span data-stu-id="05add-370">hello problem is simplest tooexplain with an example system.</span></span> <span data-ttu-id="05add-371">例如，假設您已上傳至 Azure，其具有 8 個含有 hello DBMS 的資料檔案，以及一個 VHD 包含 hello 交易記錄檔將 SAP 系統。</span><span class="sxs-lookup"><span data-stu-id="05add-371">Let’s assume you have an SAP system uploaded into Azure which has 8 VHDs containing data files of hello DBMS plus one VHD containing hello transaction log file.</span></span> <span data-ttu-id="05add-372">這些 9 Vhd 的每個將有一致的方式根據 toohello DBMS，撰寫 toothem 是否 hello 資料寫入 toohello 資料或交易記錄檔的資料。</span><span class="sxs-lookup"><span data-stu-id="05add-372">Each one of these 9 VHDs will have data written toothem in a consistent method according toohello DBMS, whether hello data is being written toohello data or transaction log files.</span></span>
>
> <span data-ttu-id="05add-373">順序 tooproperly 地理複寫 hello 資料及維護一致的資料庫映像、 hello 內容 9 個 vhd 會有 toobe hello 順序 hello I/O 作業中進行地理複寫針對執行 hello 九個不同的 Vhd。</span><span class="sxs-lookup"><span data-stu-id="05add-373">In order tooproperly geo-replicate hello data and maintain a consistent database image, hello content of all nine VHDs would have toobe geo-replicated in hello exact order hello I/O operations were executed against hello nine different VHDs.</span></span> <span data-ttu-id="05add-374">不過，Azure 儲存體地理複寫不允許 toodeclare Vhd 之間的相依性。</span><span class="sxs-lookup"><span data-stu-id="05add-374">However, Azure Storage geo-replication does not allow toodeclare dependencies between VHDs.</span></span> <span data-ttu-id="05add-375">這表示這些 9 個不同 Vhd 中的 hello 內容的其他相關的 tooeach 而且 hello 資料變更時，都是一致只複寫 hello 順序 hello I/O 作業中發生的 hello 事實不知道 Microsoft Azure 儲存體地理複寫跨所有 hello 9 Vhd。</span><span class="sxs-lookup"><span data-stu-id="05add-375">This means Microsoft Azure Storage geo-replication doesn’t know about hello fact that hello content in these nine different VHDs are related tooeach other and that hello data changes are consistent only when replicating in hello order hello I/O operations happened across all hello 9 VHDs.</span></span>
>
> <span data-ttu-id="05add-376">除了過高，在 hello 案例中的 hello 進行地理複寫映像不會提供一致的資料庫映像，也沒有可造成嚴重的地理備援儲存體和一同顯示對效能帶來負面影響的機會會影響效能。</span><span class="sxs-lookup"><span data-stu-id="05add-376">Besides chances being high that hello geo-replicated images in hello scenario do not provide a consistent database image, there also is a performance penalty that shows up with geo redundant storage that can severely impact performance.</span></span> <span data-ttu-id="05add-377">總之，請勿針對 DBMS 類型的工作負載使用這個類型的儲存體備援。</span><span class="sxs-lookup"><span data-stu-id="05add-377">In summary do not use this type of storage redundancy for DBMS type workloads.</span></span>
>
>

#### <a name="mapping-vhds-into-azure-virtual-machine-service-storage-accounts"></a><span data-ttu-id="05add-378">將 VHD 對應至 Azure 虛擬機器服務儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="05add-378">Mapping VHDs into Azure Virtual Machine Service Storage Accounts</span></span>
<span data-ttu-id="05add-379">Azure 儲存體帳戶不只是一個系統管理的建構，而且還是限制的緣由。</span><span class="sxs-lookup"><span data-stu-id="05add-379">An Azure Storage Account is not only an administrative construct, but also a subject of limitations.</span></span> <span data-ttu-id="05add-380">而 hello 限制會隨著談論 Azure 標準儲存體帳戶或 Azure 高階儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="05add-380">Whereas hello limitations vary on whether we talk about an Azure Standard Storage Account or an Azure Premium Storage Account.</span></span> <span data-ttu-id="05add-381">列出 hello 確切功能和限制[這裡][storage-scalability-targets]</span><span class="sxs-lookup"><span data-stu-id="05add-381">hello exact capabilities and limitations are listed [here][storage-scalability-targets]</span></span>

<span data-ttu-id="05add-382">因此您很重要的 toonote Azure 標準儲存體上每個儲存體帳戶的 IOPS hello 沒有限制 (中的資料列包含 '總要求率' [hello 文章][storage-scalability-targets])。</span><span class="sxs-lookup"><span data-stu-id="05add-382">So for Azure Standard Storage it is important toonote there is a limit on hello IOPS per storage account (Row containing ‘Total Request Rate’ in [hello article][storage-scalability-targets]).</span></span> <span data-ttu-id="05add-383">此外，每個 Azure 訂用帳戶的「儲存體帳戶」初始限制為 100 個 (自 2015 年 7 月起)。</span><span class="sxs-lookup"><span data-stu-id="05add-383">In addition, there is an initial limit of 100 Storage Accounts per Azure subscription (as of July 2015).</span></span> <span data-ttu-id="05add-384">因此，建議您使用多個儲存體帳戶時使用 Azure 標準儲存體之間 toobalance IOPS 的 Vm。</span><span class="sxs-lookup"><span data-stu-id="05add-384">Therefore, it is recommended toobalance IOPS of VMs between multiple storage accounts when using Azure Standard Storage.</span></span> <span data-ttu-id="05add-385">另一方面，單一 VM 最好盡可能使用一個儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="05add-385">Whereas a single VM ideally uses one storage account if possible.</span></span> <span data-ttu-id="05add-386">因此，如果我們談到 DBMS 部署，其中每個裝載於 Azure 標準儲存體的 VHD 會到達其配額限制時，您應該只針對每個使用 Azure 標準儲存體的 Azure 儲存體帳戶部署 30-40 個 VHD。</span><span class="sxs-lookup"><span data-stu-id="05add-386">So if we talk about DBMS deployments where each VHD that is hosted on Azure Standard Storage could reach its quota limit, you should only deploy 30-40 VHDs per Azure Storage Account that uses Azure Standard Storage.</span></span> <span data-ttu-id="05add-387">上 hello 另一方面，如果您利用 Azure 高階儲存體，並想 toostore 大型資料庫的磁碟區，您可能會根據 IOPS 來沒問題。</span><span class="sxs-lookup"><span data-stu-id="05add-387">On hello other hand, if you leverage Azure Premium Storage and want toostore large database volumes, you might be fine in terms of IOPS.</span></span> <span data-ttu-id="05add-388">但是，Azure 進階儲存體帳戶在資料磁碟區方面會比 Azure 標準儲存體帳戶更嚴格。</span><span class="sxs-lookup"><span data-stu-id="05add-388">But an Azure Premium Storage Account is way more restrictive in data volume than an Azure Standard Storage Account.</span></span> <span data-ttu-id="05add-389">如此一來，您只可以部署有限的數目的 Azure 高階儲存體帳戶內的 Vhd 才按下 hello 資料磁碟區限制。</span><span class="sxs-lookup"><span data-stu-id="05add-389">As a result, you can only deploy a limited number of VHDs within an Azure Premium Storage Account before hitting hello data volume limit.</span></span> <span data-ttu-id="05add-390">在 hello 結束考慮為 「 虛擬 SAN 」 的 Azure 儲存體帳戶，具有有限的功能在 IOPS 及/或容量。</span><span class="sxs-lookup"><span data-stu-id="05add-390">At hello end think of an Azure Storage Account as a “Virtual SAN” that has limited capabilities in IOPS and/or capacity.</span></span> <span data-ttu-id="05add-391">如此一來，hello 工作仍會留，如同內部部署，透過 hello 不同 「 虛構 SAN 裝置' hello 不同 SAP 系統的 Vhd 或 Azure 儲存體帳戶的 hello toodefine hello 版面配置。</span><span class="sxs-lookup"><span data-stu-id="05add-391">As a result, hello task remains, as in on-premises deployments, toodefine hello layout of hello VHDs of hello different SAP systems over hello different ‘imaginary SAN devices’ or Azure Storage Accounts.</span></span>

<span data-ttu-id="05add-392">Azure 不建議從不同的儲存體帳戶 tooa toopresent 儲存體的標準儲存體盡可能單一 VM。</span><span class="sxs-lookup"><span data-stu-id="05add-392">For Azure Standard Storage it is not recommended toopresent storage from different storage accounts tooa single VM if possible.</span></span>

<span data-ttu-id="05add-393">而使用 hello DS 或 GS 系列的 Azure Vm，則很可能 toomount Vhd 從 Azure 標準儲存體帳戶和 Premium 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="05add-393">Whereas using hello DS or GS-series of Azure VMs it is possible toomount VHDs out of Azure Standard Storage Accounts and Premium Storage Accounts.</span></span> <span data-ttu-id="05add-394">使用案例，例如寫入到標準儲存體的備份會備份 Vhd 而 DBMS 的資料，並在高階儲存體上的記錄檔有 toomind 無法運用這類異質儲存區的位置。</span><span class="sxs-lookup"><span data-stu-id="05add-394">Use cases like writing backups into Standard Storage backed VHDs whereas having DBMS data and log files on Premium Storage come toomind where such heterogeneous storage could be leveraged.</span></span>

<span data-ttu-id="05add-395">根據客戶的部署及測試大約 30 too40 包含資料庫資料檔案和記錄檔的 Vhd 可以佈建單一 Azure 標準儲存體帳戶與可接受的效能。</span><span class="sxs-lookup"><span data-stu-id="05add-395">Based on customer deployments and testing around 30 too40 VHDs containing database data files and log files can be provisioned on a single Azure Standard Storage Account with acceptable performance.</span></span> <span data-ttu-id="05add-396">如先前所述，Azure 高階儲存體帳戶的 hello 限制是它能容納可能 toobe hello 資料容量和不 IOPS。</span><span class="sxs-lookup"><span data-stu-id="05add-396">As mentioned earlier, hello limitation of an Azure Premium Storage Account is likely toobe hello data capacity it can hold and not IOPS.</span></span>

<span data-ttu-id="05add-397">為透過 SAN 裝置在內部，共用所需的某些監視順序 tooeventually 中偵測到 Azure 儲存體帳戶上的瓶頸。</span><span class="sxs-lookup"><span data-stu-id="05add-397">As with SAN devices on-premises, sharing requires some monitoring in order tooeventually detect bottlenecks on an Azure Storage Account.</span></span> <span data-ttu-id="05add-398">hello Azure Monitoring Extension for SAP 和 hello Azure 入口網站是可使用的 toodetect 的工具忙碌未能提供最佳 IO 效能的 Azure 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="05add-398">hello Azure Monitoring Extension for SAP and hello Azure Portal are tools that can be used toodetect busy Azure Storage Accounts that may be delivering suboptimal IO performance.</span></span>  <span data-ttu-id="05add-399">如果已偵測到這種情況下，建議 toomove 忙碌 Vm tooanother Azure 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="05add-399">If this situation is detected it is recommended toomove busy VMs tooanother Azure Storage Account.</span></span> <span data-ttu-id="05add-400">請參閱 toohello[部署指南 》] [ deployment-guide]如如何 tooactivate hello SAP 主機監視功能的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="05add-400">Please refer toohello [Deployment Guide][deployment-guide] for details on how tooactivate hello SAP host monitoring capabilities.</span></span>

<span data-ttu-id="05add-401">您可以在下列網址中，找到另一篇摘要說明「Azure 標準儲存體」和「Azure 標準儲存體帳戶」最佳做法的文章：<https://blogs.msdn.com/b/mast/archive/2014/10/14/configuring-azure-virtual-machines-for-optimal-storage-performance.aspx></span><span class="sxs-lookup"><span data-stu-id="05add-401">Another article summarizing best practices around Azure Standard Storage and Azure Standard Storage Accounts can be found here <https://blogs.msdn.com/b/mast/archive/2014/10/14/configuring-azure-virtual-machines-for-optimal-storage-performance.aspx></span></span>

#### <a name="moving-deployed-dbms-vms-from-azure-standard-storage-tooazure-premium-storage"></a><span data-ttu-id="05add-402">移動 Azure 標準儲存體 tooAzure 高階儲存體從部署 DBMS Vm</span><span class="sxs-lookup"><span data-stu-id="05add-402">Moving deployed DBMS VMs from Azure Standard Storage tooAzure Premium Storage</span></span>
<span data-ttu-id="05add-403">我們會遇到一段的案例中，您為客戶 toomove 從 Azure 標準儲存體 VM 已部署到 Azure 進階儲存體。</span><span class="sxs-lookup"><span data-stu-id="05add-403">We encounter quite some scenarios where you as customer want toomove a deployed VM from Azure Standard Storage into Azure Premium Storage.</span></span> <span data-ttu-id="05add-404">這是不可能沒有實際移動 hello 資料。</span><span class="sxs-lookup"><span data-stu-id="05add-404">This is not possible without physically moving hello data.</span></span> <span data-ttu-id="05add-405">有數種方式 tooachieve hello 目標：</span><span class="sxs-lookup"><span data-stu-id="05add-405">There are several ways tooachieve hello goal:</span></span>

* <span data-ttu-id="05add-406">您只需將所有的 VHD、基底 VHD 以及資料 VHD 複製到新的 Azure 進階儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="05add-406">You could simply copy all VHDs, base VHD as well as data VHDs into a new Azure Premium Storage Account.</span></span> <span data-ttu-id="05add-407">通常您已選擇 hello Vhd 數目在 Azure 標準儲存體不是因為您所需的 hello 資料磁碟區的 hello 事實。</span><span class="sxs-lookup"><span data-stu-id="05add-407">Very often you chose hello number of VHDs in Azure Standard Storage not because of hello fact that you needed hello data volume.</span></span> <span data-ttu-id="05add-408">但您需要許多 Vhd，因為 hello IOPS。</span><span class="sxs-lookup"><span data-stu-id="05add-408">But you needed that many VHDs because of hello IOPS.</span></span> <span data-ttu-id="05add-409">既然您移動 tooAzure 高階儲存體，您無法搭配的方式較少的 Vhd tooachieve hello 一些 IOPS 輸送量。</span><span class="sxs-lookup"><span data-stu-id="05add-409">Now that you move tooAzure Premium Storage you could go with way less VHDs tooachieve hello some IOPS throughput.</span></span> <span data-ttu-id="05add-410">指定您需支付 hello Azure 標準儲存體中使用的資料和非 hello 名義上的磁碟大小的 hello 事實，hello Vhd 數目未不真的很重要方面成本。</span><span class="sxs-lookup"><span data-stu-id="05add-410">Given hello fact that in Azure Standard Storage you pay for hello used data and not hello nominal disk size, hello number of VHDs did not really matter in terms of costs.</span></span> <span data-ttu-id="05add-411">不過，Azure 高階儲存體，您將支付 hello 名義上的磁碟大小。</span><span class="sxs-lookup"><span data-stu-id="05add-411">However, with Azure Premium Storage, you would pay for hello nominal disk size.</span></span> <span data-ttu-id="05add-412">因此，大部分的 hello 客戶嘗試 tookeep hello Azure Vhd 數目高階儲存體中 hello 數字所需的 tooachieve hello IOPS 輸送量必要。</span><span class="sxs-lookup"><span data-stu-id="05add-412">Therefore, most of hello customer try tookeep hello number of Azure VHDs in Premium Storage at hello number needed tooachieve hello IOPS throughput necessary.</span></span> <span data-ttu-id="05add-413">因此，大部分的客戶決定針對簡單 1:1 的 hello 方式複製。</span><span class="sxs-lookup"><span data-stu-id="05add-413">So, most customers decide against hello way of a simple 1:1 copy.</span></span>
* <span data-ttu-id="05add-414">如果尚未掛接，您要掛接單一 VHD，其中可包含 SAP 資料庫的資料庫備份。</span><span class="sxs-lookup"><span data-stu-id="05add-414">If not yet mounted, you mount a single VHD that can contain a database backup of your SAP database.</span></span> <span data-ttu-id="05add-415">Hello 備份後卸載所有 Vhd 包括 hello VHD 包含 hello 備份和複製 hello 基底 VHD 和 hello 與 hello 備份的 VHD 到 Azure 進階儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="05add-415">After hello backup, you unmount all VHDs including hello VHD containing hello backup and copy hello base VHD and hello VHD with hello backup into an Azure Premium Storage account.</span></span> <span data-ttu-id="05add-416">然後，您會部署的 hello hello 基底 VHD 和掛接 hello VHD hello 備份為基礎的 VM。</span><span class="sxs-lookup"><span data-stu-id="05add-416">You would then deploy hello VM based on hello base VHD and mount hello VHD with hello backup.</span></span> <span data-ttu-id="05add-417">現在您可以建立其他空高階儲存體磁碟 hello VM 所使用的 toorestore hello 資料庫。</span><span class="sxs-lookup"><span data-stu-id="05add-417">Now you create additional empty Premium Storage Disks for hello VM that are used toorestore hello database into.</span></span> <span data-ttu-id="05add-418">這是假設該 hello DBMS 可讓您 toochange 路徑 toohello 資料和記錄檔 hello 還原程序的一部分。</span><span class="sxs-lookup"><span data-stu-id="05add-418">This assumes that hello DBMS allows you toochange paths toohello data and log files as part of hello restore process.</span></span>
* <span data-ttu-id="05add-419">另一個可能性是一種 hello 先前程序，其中只需要將 hello 備份 VHD 複製到 Azure 進階儲存體，並將它附加對新部署和安裝的 VM。</span><span class="sxs-lookup"><span data-stu-id="05add-419">Another possibility is a variation of hello former process, where you just copy hello backup VHD into Azure Premium Storage and attach it against a VM that you newly deployed and installed.</span></span>
* <span data-ttu-id="05add-420">hello 第四個可能性您可以選擇當您需要資料庫的資料檔案的 toochange hello 數目。</span><span class="sxs-lookup"><span data-stu-id="05add-420">hello fourth possibility you would choose when you are in need toochange hello number of data files of your database.</span></span> <span data-ttu-id="05add-421">在這種情況下，您會使用匯出/匯入來執行 SAP 同質性系統複製。</span><span class="sxs-lookup"><span data-stu-id="05add-421">In such a case you would perform a SAP homogenous system copy using export/import.</span></span> <span data-ttu-id="05add-422">放入與匯出到複製到 Azure 進階儲存體帳戶的 VHD 檔案，並將它附加 tooa VM，您會使用 toorun hello 匯入處理程序。</span><span class="sxs-lookup"><span data-stu-id="05add-422">Put those export files into a VHD that is copied into an Azure Premium Storage Account and attach it tooa VM that you use toorun hello import processes.</span></span> <span data-ttu-id="05add-423">客戶在主要是要 toodecrease hello 數目的資料檔案時，才使用這種可能性。</span><span class="sxs-lookup"><span data-stu-id="05add-423">Customers use this possibility mainly when they want toodecrease hello number of data files.</span></span>

### <a name="deployment-of-vms-for-sap-in-azure"></a><span data-ttu-id="05add-424">在 Azure 中部署適用於 SAP 的 VM</span><span class="sxs-lookup"><span data-stu-id="05add-424">Deployment of VMs for SAP in Azure</span></span>
<span data-ttu-id="05add-425">Microsoft Azure 提供的多種 toodeploy Vm 和相關聯的磁碟。</span><span class="sxs-lookup"><span data-stu-id="05add-425">Microsoft Azure offers multiple ways toodeploy VMs and associated disks.</span></span> <span data-ttu-id="05add-426">因此就非常重要的 toounderstand hello 差異因為 hello Vm 的準備工作可能會與不同部署的 hello 方式而定。</span><span class="sxs-lookup"><span data-stu-id="05add-426">Thereby it is very important toounderstand hello differences since preparations of hello VMs might differ dependent on hello way of deployment.</span></span> <span data-ttu-id="05add-427">一般情況下，我們探討 hello hello 後面章節所述的案例。</span><span class="sxs-lookup"><span data-stu-id="05add-427">In general, we look into hello scenarios described in hello following chapters.</span></span>

#### <a name="deploying-a-vm-from-hello-azure-marketplace"></a><span data-ttu-id="05add-428">部署的 hello Azure Marketplace 中的 VM</span><span class="sxs-lookup"><span data-stu-id="05add-428">Deploying a VM from hello Azure Marketplace</span></span>
<span data-ttu-id="05add-429">您喜歡 tootake Microsoft 或第 3 個合作對象提供的映像 hello Azure Marketplace toodeploy 從您的 VM。</span><span class="sxs-lookup"><span data-stu-id="05add-429">You like tootake a Microsoft or 3rd party provided image from hello Azure Marketplace toodeploy your VM.</span></span> <span data-ttu-id="05add-430">部署在 Azure VM 之後，請依照 hello 相同的指導方針和工具 tooinstall hello SAP 軟體，在 VM 內像您一樣在內部部署環境中。</span><span class="sxs-lookup"><span data-stu-id="05add-430">After you deployed your VM in Azure, you follow hello same guidelines and tools tooinstall hello SAP software inside your VM as you would do in an on-premises environment.</span></span> <span data-ttu-id="05add-431">安裝 Azure VM hello hello SAP 軟體，SAP 和 Microsoft 建議 tooupload hello SAP 安裝媒體或中與儲存 Azure Vhd toocreate Azure VM 以 「 檔案伺服器 」 包含所有 hello 所需的 SAP 安裝媒體。</span><span class="sxs-lookup"><span data-stu-id="05add-431">For installing hello SAP software inside hello Azure VM, SAP and Microsoft recommend tooupload and store hello SAP installation media in Azure VHDs or toocreate an Azure VM working as a ‘File server’ which contains all hello necessary SAP installation media.</span></span>

#### <a name="deploying-a-vm-with-a-customer-specific-generalized-image"></a><span data-ttu-id="05add-432">使用客戶特定的一般化映像部署 VM</span><span class="sxs-lookup"><span data-stu-id="05add-432">Deploying a VM with a customer specific generalized image</span></span>
<span data-ttu-id="05add-433">Toospecific 修補程式需求方面 tooyour OS 或 DBMS 版本中，因為提供的 hello hello Azure Marketplace 中的映像可能不適合您的需求。</span><span class="sxs-lookup"><span data-stu-id="05add-433">Due toospecific patch requirements in regards tooyour OS or DBMS version, hello provided images in hello Azure Marketplace might not fit your needs.</span></span> <span data-ttu-id="05add-434">因此，您可能需要 toocreate 使用您自己 'private' 的 OS/DBMS VM 映像之後數次可部署的 VM。</span><span class="sxs-lookup"><span data-stu-id="05add-434">Therefore, you might need toocreate a VM using your own ‘private’ OS/DBMS VM image which can be deployed several times afterwards.</span></span> <span data-ttu-id="05add-435">tooprepare 這類的 'private' 映像進行複製，在 hello 一般化作業系統的 hello 內部部署 VM。</span><span class="sxs-lookup"><span data-stu-id="05add-435">tooprepare such a ‘private’ image for duplication, hello OS must be generalized on hello on-premises VM.</span></span> <span data-ttu-id="05add-436">請參閱 toohello[部署指南 》] [ deployment-guide]的詳細資料 toogeneralize VM。</span><span class="sxs-lookup"><span data-stu-id="05add-436">Please refer toohello [Deployment Guide][deployment-guide] for details on how toogeneralize a VM.</span></span>

<span data-ttu-id="05add-437">如果您已在內部部署 VM （特別是 2 層系統） 中安裝 SAP 內容，hello 部署的 hello Azure VM 透過 hello 執行個體重新命名程序支援 hello SAP 軟體佈建之後，您可以調整 hello SAP 系統設定管理員 (SAP 附註[1619720])。</span><span class="sxs-lookup"><span data-stu-id="05add-437">If you have already installed SAP content in your on-premises VM (especially for 2-Tier systems), you can adapt hello SAP system settings after hello deployment of hello Azure VM through hello instance rename procedure supported by hello SAP Software Provisioning Manager (SAP Note [1619720]).</span></span> <span data-ttu-id="05add-438">否則，您可以 hello 部署的 hello Azure VM 之後再安裝 hello SAP 軟體。</span><span class="sxs-lookup"><span data-stu-id="05add-438">Otherwise you can install hello SAP software later after hello deployment of hello Azure VM.</span></span>

<span data-ttu-id="05add-439">為準，hello hello SAP 應用程式所使用的資料庫內容，您可以產生 hello 內容全新由 SAP 安裝或使用包含 DBMS 資料庫備份的 VHD，或運用 hello DBMS toodirectly 的功能，您可以會匯入您的內容至 Azure備份至 Microsoft Azure 儲存體。</span><span class="sxs-lookup"><span data-stu-id="05add-439">As of hello database content used by hello SAP application, you can either generate hello content freshly by an SAP installation or you can import your content into Azure by using a VHD with a DBMS database backup or by leveraging capabilities of hello DBMS toodirectly backup into Microsoft Azure Storage.</span></span> <span data-ttu-id="05add-440">在此情況下，可以也準備 Vhd，以 hello DBMS 資料和記錄檔案內部，然後將磁碟以匯入至 Azure。</span><span class="sxs-lookup"><span data-stu-id="05add-440">In this case, you could also prepare VHDs with hello DBMS data and log files on-premises and then import those as Disks into Azure.</span></span> <span data-ttu-id="05add-441">但 hello 載入從內部部署 tooAzure DBMS 資料傳輸會透過需要 toobe 準備內部部署的 VHD 磁碟運作。</span><span class="sxs-lookup"><span data-stu-id="05add-441">But hello transfer of DBMS data which is getting loaded from on-premises tooAzure would work over VHD disks that need toobe prepared on-premises.</span></span>

#### <a name="moving-a-vm-from-on-premises-tooazure-with-a-non-generalized-disk"></a><span data-ttu-id="05add-442">將 VM 從內部部署 tooAzure 使用非一般化磁碟</span><span class="sxs-lookup"><span data-stu-id="05add-442">Moving a VM from on-premises tooAzure with a non-generalized disk</span></span>
<span data-ttu-id="05add-443">您計劃 toomove 特定 SAP 系統從內部部署 tooAzure （「 增益 」 和 「 shift 」）。</span><span class="sxs-lookup"><span data-stu-id="05add-443">You plan toomove a specific SAP system from on-premises tooAzure (lift and shift).</span></span> <span data-ttu-id="05add-444">這可藉由來上傳 VHD，含 hello OS hello、 hello SAP 二進位檔和最終 DBMS 二進位檔加上 Vhd hello 與 hello hello DBMS tooAzure 的資料和記錄檔。</span><span class="sxs-lookup"><span data-stu-id="05add-444">This can be done by uploading hello VHD which contains hello OS, hello SAP binaries and eventual DBMS binaries plus hello VHDs with hello data and log files of hello DBMS tooAzure.</span></span> <span data-ttu-id="05add-445">相反的 tooscenario #2 以上版本，則讓 hello 主機名稱、 SAP SID 和 SAP 使用者帳戶 hello Azure VM 中為 hello 在內部部署環境中設定。</span><span class="sxs-lookup"><span data-stu-id="05add-445">In opposite tooscenario #2 above, you keep hello hostname, SAP SID and SAP user accounts in hello Azure VM as they were configured in hello on-premises environment.</span></span> <span data-ttu-id="05add-446">因此，將一般化 hello 映像不需要。</span><span class="sxs-lookup"><span data-stu-id="05add-446">Therefore, generalizing hello image is not necessary.</span></span> <span data-ttu-id="05add-447">此情況下最適合用於 hello SAP 環境的一部分執行的內部部署和組件在 Azure 上的跨內部部署案例。</span><span class="sxs-lookup"><span data-stu-id="05add-447">This case will mostly apply for Cross-Premises scenarios where a part of hello SAP landscape is run on-premises and parts on Azure.</span></span>

## <span data-ttu-id="05add-448"><a name="871dfc27-e509-4222-9370-ab1de77021c3"></a>Azure VM 的相關高可用性和災害復原</span><span class="sxs-lookup"><span data-stu-id="05add-448"><a name="871dfc27-e509-4222-9370-ab1de77021c3"></a>High Availability and Disaster Recovery with Azure VMs</span></span>
<span data-ttu-id="05add-449">Azure 提供下列高可用性 (HA) 和災害復原 (DR) 功能套用 toodifferent 元件，我們會使用適用於 SAP 和 DBMS 部署的 hello</span><span class="sxs-lookup"><span data-stu-id="05add-449">Azure offers hello following High Availability (HA) and Disaster Recovery (DR) functionalities which apply toodifferent components we would use for SAP and DBMS deployments</span></span>

### <a name="vms-deployed-on-azure-nodes"></a><span data-ttu-id="05add-450">部署於 Azure 節點上的 VM</span><span class="sxs-lookup"><span data-stu-id="05add-450">VMs deployed on Azure Nodes</span></span>
<span data-ttu-id="05add-451">hello Azure 平台不提供功能，例如即時移轉的已部署的 Vm。</span><span class="sxs-lookup"><span data-stu-id="05add-451">hello Azure Platform does not offer features such as Live Migration for deployed VMs.</span></span> <span data-ttu-id="05add-452">這表示如果在部署 VM 的伺服器叢集上沒有維護所需，hello VM 需要 tooget 停止並重新啟動。</span><span class="sxs-lookup"><span data-stu-id="05add-452">This means if there is maintenance necessary on a server cluster on which a VM is deployed, hello VM needs tooget stopped and restarted.</span></span> <span data-ttu-id="05add-453">Azure 中的維護作業是在伺服器叢集內使用升級網域來執行。</span><span class="sxs-lookup"><span data-stu-id="05add-453">Maintenance in Azure is performed using so called Upgrade Domains within clusters of servers.</span></span> <span data-ttu-id="05add-454">一次只會維護一個升級網域。</span><span class="sxs-lookup"><span data-stu-id="05add-454">Only one Upgrade Domain at a time is being maintained.</span></span> <span data-ttu-id="05add-455">在重新啟動期間將會中斷服務，而關閉 VM 的 hello、 進行維護然後重新啟動 VM。</span><span class="sxs-lookup"><span data-stu-id="05add-455">During such a restart there will be an interruption of service while hello VM is shut down, maintenance is performed and VM restarted.</span></span> <span data-ttu-id="05add-456">大部分 DBMS 廠商都不過提供高可用性和災害復原功能，就會迅速重新啟動另一個節點上的 hello DBMS 服務如果 hello 主要節點無法使用。</span><span class="sxs-lookup"><span data-stu-id="05add-456">Most DBMS vendors however provide High Availability and Disaster Recovery functionality that will quickly restart hello DBMS services on another node if hello primary node is unavailable.</span></span> <span data-ttu-id="05add-457">hello Azure 平台提供了功能 toodistribute Vm、 儲存體和其他 Azure 服務規劃維護或基礎結構失敗的升級網域 tooensure 跨只會影響 Vm 或服務的小型子集。</span><span class="sxs-lookup"><span data-stu-id="05add-457">hello Azure Platform offers functionality toodistribute VMs, Storage and other Azure services across Upgrade Domains tooensure that planned maintenance or infrastructure failures would only impact a small subset of VMs or services.</span></span>  <span data-ttu-id="05add-458">計劃很可能 tooachieve 可用性層級比較 tooon 內部部署基礎結構。</span><span class="sxs-lookup"><span data-stu-id="05add-458">With careful planning it is possible tooachieve availability levels comparable tooon-premises infrastructures.</span></span>

<span data-ttu-id="05add-459">Microsoft Azure 可用性設定組是 Vm 的邏輯群組或服務，可確保 Vm 和其他服務是分散式的 toodifferent 容錯和升級網域，並在叢集內，只能有一個節點關閉任何一處 （讀取的時間[這][ virtual-machines-manage-availability]文件以取得更多詳細資料)。</span><span class="sxs-lookup"><span data-stu-id="05add-459">Microsoft Azure Availability Sets are a logical grouping of VMs or Services that ensures VMs and other services are distributed toodifferent Fault and Upgrade Domains within a cluster such that there would only be one node shutdown at any one point in time (read [this][virtual-machines-manage-availability] article for more details).</span></span>

<span data-ttu-id="05add-460">它需要 toobe 推出如下所示的 Vm 時設定的用途：</span><span class="sxs-lookup"><span data-stu-id="05add-460">It needs toobe configured by purpose when rolling out VMs as seen here:</span></span>

![適用於 DBMS HA 組態的可用性設定組定義][dbms-guide-figure-200]

<span data-ttu-id="05add-462">如果我們想 toocreate 的 DBMS 部署 （的 hello 個別 DBMS HA 功能使用獨立） 的高可用性組態，hello DBMS Vm 需要：</span><span class="sxs-lookup"><span data-stu-id="05add-462">If we want toocreate highly available configurations of DBMS deployments (independent of hello individual DBMS HA functionality used), hello DBMS VMs would need to:</span></span>

* <span data-ttu-id="05add-463">新增 hello Vm toohello 相同 Azure 虛擬網路 (<https://azure.microsoft.com/documentation/services/virtual-network/>)</span><span class="sxs-lookup"><span data-stu-id="05add-463">Add hello VMs toohello same Azure Virtual Network (<https://azure.microsoft.com/documentation/services/virtual-network/>)</span></span>
* <span data-ttu-id="05add-464">hello hello HA 組態的 Vm 也應該在 hello 相同子網路。</span><span class="sxs-lookup"><span data-stu-id="05add-464">hello VMs of hello HA configuration should also be in hello same subnet.</span></span> <span data-ttu-id="05add-465">Hello 不同子網路之間的名稱解析無法在僅限雲端部署中，只有 IP 解析正常運作。</span><span class="sxs-lookup"><span data-stu-id="05add-465">Name resolution between hello different subnets is not possible in Cloud-Only deployments, only IP resolution will work.</span></span> <span data-ttu-id="05add-466">針對跨單位部署使用站對站或 ExpressRoute 連線能力，就已經建立了至少含有一個子網路的網路。</span><span class="sxs-lookup"><span data-stu-id="05add-466">Using site-to-site or ExpressRoute connectivity for Cross-Premises deployments, a network with at least one subnet will be already established.</span></span> <span data-ttu-id="05add-467">名稱解析都是根據 toohello 內部部署 AD 原則和網路基礎結構。</span><span class="sxs-lookup"><span data-stu-id="05add-467">Name resolution will be done according toohello on-premises AD policies and network infrastructure.</span></span>

[comment]: <> (MSSedusch TODO 測試在 ARM 中是否仍為 true)

#### <a name="ip-addresses"></a><span data-ttu-id="05add-469">IP 位址</span><span class="sxs-lookup"><span data-stu-id="05add-469">IP Addresses</span></span>
<span data-ttu-id="05add-470">強烈建議 toosetup hello Vm HA 組態的彈性的方式。</span><span class="sxs-lookup"><span data-stu-id="05add-470">It is highly recommended toosetup hello VMs for HA configurations in a resilient way.</span></span> <span data-ttu-id="05add-471">依賴 IP 位址 tooaddress hello HA 夥伴 hello HA 組態內不可靠，在 Azure 中使用靜態 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="05add-471">Relying on IP addresses tooaddress hello HA partner(s) within hello HA configuration is not reliable in Azure unless static IP addresses are used.</span></span> <span data-ttu-id="05add-472">Azure 中有兩種「關閉」概念︰</span><span class="sxs-lookup"><span data-stu-id="05add-472">There are two “Shutdown” concepts in Azure:</span></span>

* <span data-ttu-id="05add-473">關閉透過 Azure 入口網站或 Azure PowerShell cmdlet 停止 AzureRmVM: hello 虛擬機器在此情況下會關閉和取消配置。</span><span class="sxs-lookup"><span data-stu-id="05add-473">Shut down through Azure Portal or Azure PowerShell cmdlet Stop-AzureRmVM: In this case hello Virtual Machine gets shutdown and de-allocated.</span></span> <span data-ttu-id="05add-474">因此 hello 唯一要收費會致使其 hello 存放裝置使用，您的 Azure 帳戶不再計費此 vm。</span><span class="sxs-lookup"><span data-stu-id="05add-474">Your Azure account will no longer be charged for this VM so hello only charges that will incur are for hello storage used.</span></span> <span data-ttu-id="05add-475">不過，如果 hello 網路介面的 hello 私人 IP 位址不是靜態的 hello IP address 已釋放，而且不保證該 hello 網路介面取得 hello 分派 hello VM 重新啟動之後，再次舊 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="05add-475">However, if hello private IP address of hello network interface was not static, hello IP address is released and it is not guaranteed that hello network interface gets hello old IP address assigned again after a restart of hello VM.</span></span> <span data-ttu-id="05add-476">執行 hello hello Azure 入口網站透過關閉，或藉由呼叫停止 AzureRmVM 會自動導致取消配置。</span><span class="sxs-lookup"><span data-stu-id="05add-476">Performing hello shut down through hello Azure Portal or by calling Stop-AzureRmVM will automatically cause de-allocation.</span></span> <span data-ttu-id="05add-477">如果您不想停止 AzureRmVM StayProvisioned toodeallocat hello 機器使用</span><span class="sxs-lookup"><span data-stu-id="05add-477">If you do not want toodeallocat hello machine use Stop-AzureRmVM -StayProvisioned</span></span>
* <span data-ttu-id="05add-478">如果您關閉 hello 作業系統層級中的 VM，hello VM 取得關閉，無法取消配置。</span><span class="sxs-lookup"><span data-stu-id="05add-478">If you shut down hello VM from an OS level, hello VM gets shut down and NOT de-allocated.</span></span> <span data-ttu-id="05add-479">不過，在此情況下，您的 Azure 帳戶將仍然支付 hello VM，儘管它已經關閉的 hello 事實。</span><span class="sxs-lookup"><span data-stu-id="05add-479">However, in this case, your Azure account will still be charged for hello VM, despite hello fact that it is shutdown.</span></span> <span data-ttu-id="05add-480">在這種情況下，hello 分派的 hello IP 位址 tooa 已停止的 VM 將會維持不變。</span><span class="sxs-lookup"><span data-stu-id="05add-480">In such a case, hello assignment of hello IP address tooa stopped VM will remain intact.</span></span> <span data-ttu-id="05add-481">正在關閉 hello 從 VM 內不會自動強制取消配置。</span><span class="sxs-lookup"><span data-stu-id="05add-481">Shutting down hello VM from within will not automatically force de-allocation.</span></span>

<span data-ttu-id="05add-482">即使對於跨內部部署案例中，依預設關閉和取消配置都表示取消指派的 hello hello VM，IP 位址即使 DHCP 設定中的內部部署原則不同。</span><span class="sxs-lookup"><span data-stu-id="05add-482">Even for Cross-Premises scenarios, by default a shutdown and de-allocation will mean de-assignment of hello IP addresses from hello VM, even if on-premises policies in DHCP settings are different.</span></span>

* <span data-ttu-id="05add-483">hello 例外狀況如果其中一個會指派靜態 IP 位址 tooa 網路介面做為說明[這裡][virtual-networks-reserved-private-ip]。</span><span class="sxs-lookup"><span data-stu-id="05add-483">hello exception is if one assigns a static IP address tooa network interface as described [here][virtual-networks-reserved-private-ip].</span></span>
* <span data-ttu-id="05add-484">在這種情況下 hello IP 位址會保持固定，只要 hello 網路介面不會刪除。</span><span class="sxs-lookup"><span data-stu-id="05add-484">In such a case hello IP address remains fixed as long as hello network interface is not deleted.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="05add-485">順序 tookeep hello 整個部署簡單且容易管理，在清除建議 toosetup hello hello Vm 合作 DBMS HA 或 DR 組態中在 Azure 中的 hello 牽涉到不同的 Vm 之間沒有正常運作的名稱解析的方式。</span><span class="sxs-lookup"><span data-stu-id="05add-485">In order tookeep hello whole deployment simple and manageable, hello clear recommendation is toosetup hello VMs partnering in a DBMS HA or DR configuration within Azure in a way that there is a functioning name resolution between hello different VMs involved.</span></span>
>
>

## <a name="deployment-of-host-monitoring"></a><span data-ttu-id="05add-486">部署主機監視功能</span><span class="sxs-lookup"><span data-stu-id="05add-486">Deployment of Host Monitoring</span></span>
<span data-ttu-id="05add-487">具生產力的 SAP 應用程式在 Azure 虛擬機器使用量和 SAP 需要 hello 能力 tooget 主機監視 hello 執行 hello Azure 虛擬機器的實體主機的資料。</span><span class="sxs-lookup"><span data-stu-id="05add-487">For productive usage of SAP Applications in Azure Virtual Machines, SAP requires hello ability tooget host monitoring data from hello physical hosts running hello Azure Virtual Machines.</span></span> <span data-ttu-id="05add-488">需要有特定的 SAP HostAgent 修補程式等級，才能在 SAPOSCOL 和 SAP HostAgent 中啟用此功能。</span><span class="sxs-lookup"><span data-stu-id="05add-488">A specific SAP HostAgent patch level will be required that enables this capability in SAPOSCOL and SAP HostAgent.</span></span> <span data-ttu-id="05add-489">hello 確切的修補程式層級記載於 SAP Note [1409604]。</span><span class="sxs-lookup"><span data-stu-id="05add-489">hello exact patch level is documented in SAP Note [1409604].</span></span>

<span data-ttu-id="05add-490">關於部署元件，以便將主機資料 tooSAPOSCOL 和 SAPHostAgent 和 hello 該等元件的生命週期管理的 hello 詳細資訊，請參閱 toohello[部署指南][deployment-guide]</span><span class="sxs-lookup"><span data-stu-id="05add-490">For hello details regarding deployment of components that deliver host data tooSAPOSCOL and SAPHostAgent and hello lifecycle management of those components, please refer toohello [Deployment Guide][deployment-guide]</span></span>

## <span data-ttu-id="05add-491"><a name="3264829e-075e-4d25-966e-a49dad878737"></a>細節 tooMicrosoft SQL Server</span><span class="sxs-lookup"><span data-stu-id="05add-491"><a name="3264829e-075e-4d25-966e-a49dad878737"></a>Specifics tooMicrosoft SQL Server</span></span>
### <a name="sql-server-iaas"></a><span data-ttu-id="05add-492">SQL Server IaaS</span><span class="sxs-lookup"><span data-stu-id="05add-492">SQL Server IaaS</span></span>
<span data-ttu-id="05add-493">開始使用 Microsoft Azure，您可以輕鬆地移轉現有 SQL Server 建立的應用程式在 Windows Server 平台 tooAzure 虛擬機器上。</span><span class="sxs-lookup"><span data-stu-id="05add-493">Starting with Microsoft Azure, you can easily migrate your existing SQL Server applications built on Windows Server platform tooAzure Virtual Machines.</span></span> <span data-ttu-id="05add-494">虛擬機器中 SQL Server 可讓您 tooreduce hello 擁有權總成本的部署、 管理和維護的企業廣度應用程式，輕鬆地將移轉這些應用程式 tooMicrosoft Azure。</span><span class="sxs-lookup"><span data-stu-id="05add-494">SQL Server in a Virtual Machine enables you tooreduce hello total cost of ownership of deployment, management and maintenance of enterprise breadth applications by easily migrating these applications tooMicrosoft Azure.</span></span> <span data-ttu-id="05add-495">透過 SQL Server 在 Azure 虛擬機器，系統管理員和開發人員仍然可以使用的 hello 可用的相同開發和管理工具內部。</span><span class="sxs-lookup"><span data-stu-id="05add-495">With SQL Server in an Azure Virtual Machine, administrators and developers can still use hello same development and administration tools that are available on-premises.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="05add-496">請注意，我們不會討論 Microsoft Azure SQL Database 即平台為 hello Microsoft Azure 平台的服務供應項目。</span><span class="sxs-lookup"><span data-stu-id="05add-496">Please note we are not discussing Microsoft Azure SQL Database which is a Platform as a Service offer of hello Microsoft Azure Platform.</span></span> <span data-ttu-id="05add-497">本白皮書中的 hello 討論是 azure 的有關所知的內部部署在 Azure 虛擬機器，運用 hello 基礎結構即服務功能執行 hello SQL Server 產品。</span><span class="sxs-lookup"><span data-stu-id="05add-497">hello discussion in this paper is about running hello SQL Server product as it is known for on-premises deployments in Azure Virtual Machines, leveraging hello Infrastructure as a Service capability of Azure.</span></span> <span data-ttu-id="05add-498">這兩個產品之間所提供的資料庫性能與功能並不相同，不應混用彼此。</span><span class="sxs-lookup"><span data-stu-id="05add-498">Database capabilities and functionalities between these two offers are different and should not be mixed up with each other.</span></span> <span data-ttu-id="05add-499">另請參閱︰<https://azure.microsoft.com/services/sql-database/></span><span class="sxs-lookup"><span data-stu-id="05add-499">See also: <https://azure.microsoft.com/services/sql-database/></span></span>
>
>

<span data-ttu-id="05add-500">強烈建議 tooreview[這][ virtual-machines-sql-server-infrastructure-services]文件，然後再繼續。</span><span class="sxs-lookup"><span data-stu-id="05add-500">It is strongly recommended tooreview [this][virtual-machines-sql-server-infrastructure-services] documentation before continuing.</span></span>

<span data-ttu-id="05add-501">Hello 中將彙總而提及部分上方連結 hello hello 文件的下列各節片段。</span><span class="sxs-lookup"><span data-stu-id="05add-501">In hello following sections pieces of parts of hello documentation under hello link above will be aggregated and mentioned.</span></span> <span data-ttu-id="05add-502">也會提到 SAP 專屬的詳細資料，並更深入說明一些概念。</span><span class="sxs-lookup"><span data-stu-id="05add-502">Specifics around SAP are mentioned as well and some concepts are described in more detail.</span></span> <span data-ttu-id="05add-503">不過，強烈建議 toowork 透過上述第一個再讀取 hello SQL Server 特定文件的 hello 文件。</span><span class="sxs-lookup"><span data-stu-id="05add-503">However, it is highly recommended toowork through hello documentation above first before reading hello SQL Server specific documentation.</span></span>

<span data-ttu-id="05add-504">繼續之前，您應該先了解一些 IaaS 中 SQL Server 專屬的資訊：</span><span class="sxs-lookup"><span data-stu-id="05add-504">There is some SQL Server in IaaS specific information you should know before continuing:</span></span>

* <span data-ttu-id="05add-505">**虛擬機器 SLA**：如需適用於在 Azure 中執行之「虛擬機器」的 SLA，請參閱：<https://azure.microsoft.com/support/legal/sla/></span><span class="sxs-lookup"><span data-stu-id="05add-505">**Virtual Machine SLA**: There is an SLA for Virtual Machines running in Azure which can be found here: <https://azure.microsoft.com/support/legal/sla/></span></span>  
* <span data-ttu-id="05add-506">**SQL 版本支援**︰針對 SAP 客戶，我們在「Microsoft Azure 虛擬機器」上支援 SQL Server 2008 R2 和更新版本。</span><span class="sxs-lookup"><span data-stu-id="05add-506">**SQL Version Support**: For SAP customers, we support SQL Server 2008 R2 and higher on Microsoft Azure Virtual Machine.</span></span> <span data-ttu-id="05add-507">不支援舊版。</span><span class="sxs-lookup"><span data-stu-id="05add-507">Earlier editions are not supported.</span></span> <span data-ttu-id="05add-508">如需更多詳細資料，請檢閱這份通用的 [支援聲明](https://support.microsoft.com/kb/956893) 。</span><span class="sxs-lookup"><span data-stu-id="05add-508">Review this general [Support Statement](https://support.microsoft.com/kb/956893) for more details.</span></span> <span data-ttu-id="05add-509">請注意，Microsoft 通常也支援 SQL Server 2008。</span><span class="sxs-lookup"><span data-stu-id="05add-509">Please note that in general SQL Server 2008 is supported by Microsoft as well.</span></span> <span data-ttu-id="05add-510">不過，與 SQL Server 2008 R2 引進 SAP toosignificant 功能，因為 SQL Server 2008 R2 為 hello 適用於 SAP 的最低版本。</span><span class="sxs-lookup"><span data-stu-id="05add-510">However due toosignificant functionality for SAP which was introduced with SQL Server 2008 R2, SQL Server 2008 R2 is hello minimum release for SAP.</span></span> <span data-ttu-id="05add-511">請記住，SQL Server 2012 和 2014年收到 hello IaaS 案例 （例如，直接對 Azure 儲存體備份） 的更深入整合與擴充。</span><span class="sxs-lookup"><span data-stu-id="05add-511">Keep in mind that SQL Server 2012 and 2014 got extended with deeper integration into hello IaaS scenario (like backing up directly against Azure Storage).</span></span> <span data-ttu-id="05add-512">因此，我們會限制此紙張 tooSQL Server 2012 和 2014 其最新修補程式等級，適用於 Azure。</span><span class="sxs-lookup"><span data-stu-id="05add-512">Therefore, we restrict this paper tooSQL Server 2012 and 2014 with its latest patch level for Azure.</span></span>
* <span data-ttu-id="05add-513">**SQL 功能支援**︰「Microsoft Azure 虛擬機器」上支援大部分的 SQL Server 功能，但有一些例外。</span><span class="sxs-lookup"><span data-stu-id="05add-513">**SQL Feature Support**: Most SQL Server features are supported on Microsoft Azure Virtual Machines with some exceptions.</span></span> <span data-ttu-id="05add-514">**不支援使用共用磁碟的 SQL Server 容錯移轉叢集**。</span><span class="sxs-lookup"><span data-stu-id="05add-514">**SQL Server Failover Clustering using Shared Disks is not supported**.</span></span>  <span data-ttu-id="05add-515">單一 Azure 區域內支援分散式技術 (例如，資料庫鏡像、AlwaysOn 可用性群組、複寫、記錄傳送，以及 Service Broker)。</span><span class="sxs-lookup"><span data-stu-id="05add-515">Distributed technologies like Database Mirroring, AlwaysOn Availability Groups, Replication, Log Shipping and Service Broker are supported within a single Azure Region.</span></span> <span data-ttu-id="05add-516">SQL Server AlwaysOn 也在不同 Azure 區域之間受到支援，如以下文件所述︰<https://blogs.technet.com/b/dataplatforminsider/archive/2014/06/19/sql-server-alwayson-availability-groups-supported-between-microsoft-azure-regions.aspx>。</span><span class="sxs-lookup"><span data-stu-id="05add-516">SQL Server AlwaysOn also is supported between different Azure Regions as documented here:  <https://blogs.technet.com/b/dataplatforminsider/archive/2014/06/19/sql-server-alwayson-availability-groups-supported-between-microsoft-azure-regions.aspx>.</span></span>  <span data-ttu-id="05add-517">檢閱 hello[支援聲明](https://support.microsoft.com/kb/956893)如需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="05add-517">Review hello [Support Statement](https://support.microsoft.com/kb/956893) for more details.</span></span> <span data-ttu-id="05add-518">有關如何 toodeploy AlwaysOn 組態所示的範例[這][ virtual-machines-workload-template-sql-alwayson]發行項。</span><span class="sxs-lookup"><span data-stu-id="05add-518">An example on how toodeploy an AlwaysOn configuration is shown in [this][virtual-machines-workload-template-sql-alwayson] article.</span></span> <span data-ttu-id="05add-519">此外，請參閱 hello 記載的最佳作法[這裡][virtual-machines-sql-server-infrastructure-services]</span><span class="sxs-lookup"><span data-stu-id="05add-519">Also, check out hello Best Practices documented [here][virtual-machines-sql-server-infrastructure-services]</span></span>
* <span data-ttu-id="05add-520">**SQL 效能**： 我們確信 Microsoft Azure 代管的虛擬機器將會執行地很好比較 tooother 公用雲端虛擬化方案，但是個別結果中，可能會不同。</span><span class="sxs-lookup"><span data-stu-id="05add-520">**SQL Performance**: We are confident that Microsoft Azure hosted Virtual Machines will perform very well in comparison tooother public cloud virtualization offerings, but individual results may vary.</span></span> <span data-ttu-id="05add-521">請參閱[這篇][virtual-machines-sql-server-performance-best-practices]文章。</span><span class="sxs-lookup"><span data-stu-id="05add-521">Check out [this][virtual-machines-sql-server-performance-best-practices] article.</span></span>
* <span data-ttu-id="05add-522">**使用 Azure marketplace 的映像**: hello 最快方式 toodeploy 新的 Microsoft Azure VM 是 toouse hello Azure Marketplace 中的影像。</span><span class="sxs-lookup"><span data-stu-id="05add-522">**Using Images from Azure Marketplace**: hello fastest way toodeploy a new Microsoft Azure VM is toouse an image from hello Azure Marketplace.</span></span> <span data-ttu-id="05add-523">有含有 SQL Server hello Azure Marketplace 映像。</span><span class="sxs-lookup"><span data-stu-id="05add-523">There are images in hello Azure Marketplace which contain SQL Server.</span></span> <span data-ttu-id="05add-524">SQL Server 已安裝的 hello 映像不能立即用於 SAP NetWeaver 應用程式。</span><span class="sxs-lookup"><span data-stu-id="05add-524">hello images where SQL Server already is installed can’t be immediately used for SAP NetWeaver applications.</span></span> <span data-ttu-id="05add-525">hello 原因是 hello 預設 SQL Server 定序會安裝這些映像或不 SAP NetWeaver 系統所需的 hello 定序中。</span><span class="sxs-lookup"><span data-stu-id="05add-525">hello reason is hello default SQL Server collation is installed within those images and not hello collation required by SAP NetWeaver systems.</span></span> <span data-ttu-id="05add-526">在排序 toouse 這類映像，請檢查 hello 章節所述的步驟[超出 hello Microsoft Azure Marketplace 使用 SQL Server 映像][dbms-guide-5.6]。</span><span class="sxs-lookup"><span data-stu-id="05add-526">In order toouse such images, please check hello steps documented in chapter [Using a SQL Server images out of hello Microsoft Azure Marketplace][dbms-guide-5.6].</span></span>
* <span data-ttu-id="05add-527">如需詳細資訊，請參閱 [定價詳細資料](https://azure.microsoft.com/pricing/) 。</span><span class="sxs-lookup"><span data-stu-id="05add-527">Check out [Pricing Details](https://azure.microsoft.com/pricing/) for more information.</span></span> <span data-ttu-id="05add-528">hello [SQL Server 2012 授權指南](https://download.microsoft.com/download/7/3/C/73CAD4E0-D0B5-4BE5-AB49-D5B886A5AE00/SQL_Server_2012_Licensing_Reference_Guide.pdf)和[SQL Server 2014 授權指南](https://download.microsoft.com/download/B/4/E/B4E604D9-9D38-4BBA-A927-56E4C872E41C/SQL_Server_2014_Licensing_Guide.pdf)也是相當重要的資源。</span><span class="sxs-lookup"><span data-stu-id="05add-528">hello [SQL Server 2012 Licensing Guide](https://download.microsoft.com/download/7/3/C/73CAD4E0-D0B5-4BE5-AB49-D5B886A5AE00/SQL_Server_2012_Licensing_Reference_Guide.pdf) and [SQL Server 2014 Licensing Guide](https://download.microsoft.com/download/B/4/E/B4E604D9-9D38-4BBA-A927-56E4C872E41C/SQL_Server_2014_Licensing_Guide.pdf) are also an important resource.</span></span>

### <a name="sql-server-configuration-guidelines-for-sap-related-sql-server-installations-in-azure-vms"></a><span data-ttu-id="05add-529">在 Azure VM 中安裝 SAP 相關之 SQL Server 的 SQL Server 組態指導方針</span><span class="sxs-lookup"><span data-stu-id="05add-529">SQL Server configuration guidelines for SAP related SQL Server installations in Azure VMs</span></span>
#### <a name="recommendations-on-vmvhd-structure-for-sap-related-sql-server-deployments"></a><span data-ttu-id="05add-530">適用於 SAP 相關之 SQL Server 部署的 VM/VHD 結構建議</span><span class="sxs-lookup"><span data-stu-id="05add-530">Recommendations on VM/VHD structure for SAP related SQL Server deployments</span></span>
<span data-ttu-id="05add-531">Hello 一般描述，根據 SQL Server 可執行檔應該位於或安裝到 hello hello VM 基本 vhd 的系統磁碟機 (磁碟機 c:\)。</span><span class="sxs-lookup"><span data-stu-id="05add-531">In accordance with hello general description, SQL Server executables should be located or installed into hello system drive of hello VM’s base VHD (drive C:\).</span></span>  <span data-ttu-id="05add-532">一般而言，大部分的 hello SQL Server 系統資料庫不會使用高層次的 SAP NetWeaver 工作量。</span><span class="sxs-lookup"><span data-stu-id="05add-532">Typically, most of hello SQL Server system databases are not utilized at a high level by SAP NetWeaver workload.</span></span> <span data-ttu-id="05add-533">因此 hello 系統資料庫 （master、 msdb 和 model） 的 SQL server 可留在 hello C:\ 磁碟機上。</span><span class="sxs-lookup"><span data-stu-id="05add-533">Hence hello system databases of SQL Server (master, msdb, and model) can remain on hello C:\ drive as well.</span></span> <span data-ttu-id="05add-534">例外狀況可能是 tempdb，這在 hello 案例中的某些 SAP ERP 和所有 BW 工作量可能需要較高的資料量或 I/O 作業量，無法放入 hello 原始 VM。</span><span class="sxs-lookup"><span data-stu-id="05add-534">An exception could be tempdb, which in hello case of some SAP ERP and all BW workloads, might require either higher data volume or I/O operations volume which can’t fit into hello original VM.</span></span> <span data-ttu-id="05add-535">這類系統，應該執行下列步驟的 hello:</span><span class="sxs-lookup"><span data-stu-id="05add-535">For such systems, hello following steps should be performed:</span></span>

* <span data-ttu-id="05add-536">移動 hello 主要 tempdb 資料檔案 toohello hello 主要資料檔案中的 hello SAP 資料庫的相同邏輯磁碟機。</span><span class="sxs-lookup"><span data-stu-id="05add-536">Move hello primary tempdb data file(s) toohello same logical drive as hello primary data file(s) of hello SAP database.</span></span>
* <span data-ttu-id="05add-537">新增 hello 的任何其他的 tempdb 資料檔案 tooeach 其他包含 hello SAP 使用者資料庫的資料檔案的邏輯磁碟機。</span><span class="sxs-lookup"><span data-stu-id="05add-537">Add any additional tempdb data files tooeach of hello other logical drives containing a data file of hello SAP user database.</span></span>
* <span data-ttu-id="05add-538">新增 hello tempdb 記錄檔 toohello 邏輯磁碟機包含 hello 使用者資料庫的記錄檔。</span><span class="sxs-lookup"><span data-stu-id="05add-538">Add hello tempdb logfile toohello logical drive which contains hello user database’s log file.</span></span>
* <span data-ttu-id="05add-539">**專用的 VM 類型可使用本機 Ssd** hello 計算節點 tempdb 資料和記錄檔可能會放在 hello D:\ 磁碟機上。</span><span class="sxs-lookup"><span data-stu-id="05add-539">**Exclusively for VM types that use local SSDs** on hello compute node tempdb data and log files might be placed on hello D:\ drive.</span></span> <span data-ttu-id="05add-540">不過，它可能會建議 toouse 多個 tempdb 資料檔案。</span><span class="sxs-lookup"><span data-stu-id="05add-540">Nevertheless, it might be recommended toouse multiple tempdb data files.</span></span> <span data-ttu-id="05add-541">請注意 D:\ 磁碟機的磁碟區都不同 hello VM 類型為基礎。</span><span class="sxs-lookup"><span data-stu-id="05add-541">Be aware D:\ drive volumes are different based on hello VM type.</span></span>

<span data-ttu-id="05add-542">這些設定可讓 tempdb tooconsume 空間 hello 系統磁碟機無法 tooprovide 還要多。</span><span class="sxs-lookup"><span data-stu-id="05add-542">These configurations enable tempdb tooconsume more space than hello system drive is able tooprovide.</span></span> <span data-ttu-id="05add-543">順序 toodetermine hello 正確的 tempdb 大小，使用者可以檢查現有的系統執行內部部署的 hello tempdb 大小。</span><span class="sxs-lookup"><span data-stu-id="05add-543">In order toodetermine hello proper tempdb size, one can check hello tempdb sizes on existing systems which run on-premises.</span></span> <span data-ttu-id="05add-544">此外，這種組態會啟用對 tempdb 無法隨附 hello 系統磁碟機的 IOPS 數目。</span><span class="sxs-lookup"><span data-stu-id="05add-544">In addition, such a configuration would enable IOPS numbers against tempdb which cannot be provided with hello system drive.</span></span> <span data-ttu-id="05add-545">同樣地，在內部部署執行的系統可以針對 tempdb 使用的 toomonitor I/O 工作負載，讓您可以衍生預期在 tempdb 上 toosee hello IOPS 數目。</span><span class="sxs-lookup"><span data-stu-id="05add-545">Again, systems that are running on-premises can be used toomonitor I/O workload against tempdb so that you can derive hello IOPS numbers you expect toosee on your tempdb.</span></span>

<span data-ttu-id="05add-546">執行 SQL Server 與 SAP 資料庫和 tempdb 資料和 tempdb 記錄檔放置在 hello D:\ 磁碟機上的 VM 組態應該像這樣：</span><span class="sxs-lookup"><span data-stu-id="05add-546">A VM configuration which runs SQL Server with a SAP database and where tempdb data and tempdb logfile are placed on hello D:\ drive would look like:</span></span>

![適用於 SAP 之 Azure IaaS VM 的參考組態][dbms-guide-figure-300]

<span data-ttu-id="05add-548">請注意該 hello D:\ 磁碟機具有不同大小 hello VM 類型而定。</span><span class="sxs-lookup"><span data-stu-id="05add-548">Be aware that hello D:\ drive has different sizes dependent on hello VM type.</span></span> <span data-ttu-id="05add-549">相依於 tempdb hello 大小需求可能會強制的 toopair tempdb 資料和記錄檔以 hello SAP 資料庫資料和記錄檔中的情況下，D:\ 磁碟機太小。</span><span class="sxs-lookup"><span data-stu-id="05add-549">Dependent on hello size requirement of tempdb you might be forced toopair tempdb data and log files with hello SAP database data and log files in cases where D:\ drive is too small.</span></span>

#### <a name="formatting-hello-vhds"></a><span data-ttu-id="05add-550">格式化 hello Vhd</span><span class="sxs-lookup"><span data-stu-id="05add-550">Formatting hello VHDs</span></span>
<span data-ttu-id="05add-551">SQL Server hello NTFS 區塊大小的 Vhd，含 SQL Server 資料和記錄檔案應該是 64k。</span><span class="sxs-lookup"><span data-stu-id="05add-551">For SQL Server hello NTFS block size for VHDs containing SQL Server data and log files should be 64K.</span></span> <span data-ttu-id="05add-552">沒有任何需要 tooformat hello D:\ 磁碟機。</span><span class="sxs-lookup"><span data-stu-id="05add-552">There is no need tooformat hello D:\ drive.</span></span> <span data-ttu-id="05add-553">此磁碟機已預先格式化。</span><span class="sxs-lookup"><span data-stu-id="05add-553">This drive comes pre-formatted.</span></span>

<span data-ttu-id="05add-554">在確定 hello 還原或建立的資料庫不會初始化 hello 資料檔案所清空 hello hello 檔案內容，您應該確定的順序 toomake hello 使用者內容 hello SQL Server 服務正在執行具有特定權限。</span><span class="sxs-lookup"><span data-stu-id="05add-554">In order toomake sure that hello restore or creation of databases is not initializing hello data files by zeroing hello content of hello files, one should make sure that hello user context hello SQL Server service is running in has a certain permission.</span></span> <span data-ttu-id="05add-555">Hello Windows 系統管理員群組中的使用者通常會有這些權限。</span><span class="sxs-lookup"><span data-stu-id="05add-555">Usually users in hello Windows Administrator group have these permissions.</span></span> <span data-ttu-id="05add-556">Hello SQL Server 服務執行於非 Windows 系統管理員使用者 hello 使用者內容，如果您需要 tooassign 該使用者 hello '執行磁碟區維護工作' 的使用者權限。</span><span class="sxs-lookup"><span data-stu-id="05add-556">If hello SQL Server service is run in hello user context of non-Windows Administrator user, you need tooassign that user hello User Right ‘Perform volume maintenance tasks’.</span></span>  <span data-ttu-id="05add-557">請參閱 Microsoft 知識庫文件中的 hello 詳細資料： <https://support.microsoft.com/kb/2574695></span><span class="sxs-lookup"><span data-stu-id="05add-557">See hello details in this Microsoft Knowledge Base Article: <https://support.microsoft.com/kb/2574695></span></span>

#### <a name="impact-of-database-compression"></a><span data-ttu-id="05add-558">資料庫壓縮的影響</span><span class="sxs-lookup"><span data-stu-id="05add-558">Impact of database compression</span></span>
<span data-ttu-id="05add-559">在組態中的 I/O 頻寬可能會變成限制因素，每個量值可減少 IOPS 可能有助於 toostretch hello 工作負載一次可以執行像是 Azure IaaS 案例中。</span><span class="sxs-lookup"><span data-stu-id="05add-559">In configurations where I/O bandwidth can become a limiting factor, every measure which reduces IOPS might help toostretch hello workload one can run in an IaaS scenario like Azure.</span></span> <span data-ttu-id="05add-560">因此，如果尚未這樣做，套用 SQL Server PAGE 壓縮強烈建議 SAP 和 Microsoft 之前上傳現有 SAP 資料庫 tooAzure。</span><span class="sxs-lookup"><span data-stu-id="05add-560">Therefore, if not yet done, applying SQL Server PAGE compression is strongly recommended by both SAP and Microsoft before uploading an existing SAP databases tooAzure.</span></span>

<span data-ttu-id="05add-561">再上傳 tooAzure hello 建議 tooperform 資料庫壓縮是出於兩個原因：</span><span class="sxs-lookup"><span data-stu-id="05add-561">hello recommendation tooperform Database Compression before uploading tooAzure is given out of two reasons:</span></span>

* <span data-ttu-id="05add-562">上傳資料 toobe hello 量較低。</span><span class="sxs-lookup"><span data-stu-id="05add-562">hello amount of data toobe uploaded is lower.</span></span>
* <span data-ttu-id="05add-563">假設有更多的 Cpu 或更高 I/O 頻寬或更少的 I/O 延遲內部部署可以使用更強的硬體較短的 hello 壓縮執行 hello 持續時間。</span><span class="sxs-lookup"><span data-stu-id="05add-563">hello duration of hello compression execution is shorter assuming that one can use stronger hardware with more CPUs or higher I/O bandwidth or less I/O latency on-premises.</span></span>
* <span data-ttu-id="05add-564">較小的資料庫大小可能會導致 tooless 成本進行磁碟配置</span><span class="sxs-lookup"><span data-stu-id="05add-564">Smaller database sizes might lead tooless costs for disk allocation</span></span>

<span data-ttu-id="05add-565">資料庫壓縮也可以在 Azure 虛擬機器中運作，如同它在內部部署中的運作方式。</span><span class="sxs-lookup"><span data-stu-id="05add-565">Database compression works as well in an Azure Virtual Machines as it does on-premises.</span></span> <span data-ttu-id="05add-566">如需有關如何 toocompress 現有 SAP SQL Server 資料庫，請參閱以下： <https://blogs.msdn.com/b/saponsqlserver/archive/2010/10/08/compressing-an-sap-database-using-report-msscompress.aspx></span><span class="sxs-lookup"><span data-stu-id="05add-566">For more details on how toocompress an existing SAP SQL Server database please check here: <https://blogs.msdn.com/b/saponsqlserver/archive/2010/10/08/compressing-an-sap-database-using-report-msscompress.aspx></span></span>

### <a name="sql-server-2014--storing-database-files-directly-on-azure-blog-storage"></a><span data-ttu-id="05add-567">SQL Server 2014 – 將資料庫檔案直接儲存於 Azure Blog 儲存體上</span><span class="sxs-lookup"><span data-stu-id="05add-567">SQL Server 2014 – Storing Database Files directly on Azure Blog Storage</span></span>
<span data-ttu-id="05add-568">SQL Server 2014 開啟 hello 可能性 toostore 直接在 Azure Blob 存放區沒有 hello '的包裝函式' 周圍的 VHD 上的資料庫檔案。</span><span class="sxs-lookup"><span data-stu-id="05add-568">SQL Server 2014 opens hello possibility toostore database files directly on Azure Blob Store without hello ‘wrapper’ of a VHD around them.</span></span> <span data-ttu-id="05add-569">特別是在使用標準的 Azure 儲存體或較小的 VM 類型這可讓您可以在其中克服 hello 有限數目的可掛接的 toosome 較小的 VM 類型的 Vhd 的 IOPS 會強制執行限制的案例。</span><span class="sxs-lookup"><span data-stu-id="05add-569">Especially with using Standard Azure Storage or smaller VM types this enables scenarios where you can overcome hello limits of IOPS that would be enforced by a limited number of VHDs that can be mounted toosome smaller VM types.</span></span> <span data-ttu-id="05add-570">不過，這適用於 SQL Server 的使用者資料庫，而不適用於系統資料庫。</span><span class="sxs-lookup"><span data-stu-id="05add-570">This works for user databases however not for system databases of SQL Server.</span></span> <span data-ttu-id="05add-571">這也適用於 SQL server 的資料和記錄檔。</span><span class="sxs-lookup"><span data-stu-id="05add-571">It also works for data and log files of SQL Server.</span></span> <span data-ttu-id="05add-572">如果您想要 toodeploy SAP 的 SQL Server 資料庫中而不是這種方式 '前後' 到 Vhd，請記住下列 hello:</span><span class="sxs-lookup"><span data-stu-id="05add-572">If you’d like toodeploy a SAP SQL Server database this way instead of ‘wrapping’ it into VHDs, please keep hello following in mind:</span></span>

* <span data-ttu-id="05add-573">中的 hello 使用儲存體帳戶的需求 toobe hello 相同 Azure 區域為 hello 為使用的 toodeploy hello VM 的 SQL Server 正在執行中的其中一個。</span><span class="sxs-lookup"><span data-stu-id="05add-573">hello Storage Account used needs toobe in hello same Azure Region as hello one that is used toodeploy hello VM SQL Server is running in.</span></span>
* <span data-ttu-id="05add-574">先前所述有關 toodistribute Vhd 透過不同的 Azure 儲存體帳戶的考量適用於這個部署同樣的方法。</span><span class="sxs-lookup"><span data-stu-id="05add-574">Considerations listed earlier in regards toodistribute VHDs over different Azure Storage Accounts apply for this method of deployments as well.</span></span> <span data-ttu-id="05add-575">表示 hello hello 限制 hello Azure 儲存體帳戶的 I/O 作業數目。</span><span class="sxs-lookup"><span data-stu-id="05add-575">Means hello I/O operations count against hello limits of hello Azure Storage Account.</span></span>

[comment]: <> (MSSedusch TODO 但這將會使用網路頻寬而非儲存體頻寬，不是嗎？)

<span data-ttu-id="05add-577">這種部署類型的詳細資料如下︰<https://msdn.microsoft.com/library/dn385720.aspx></span><span class="sxs-lookup"><span data-stu-id="05add-577">Details about this type of deployment are listed here: <https://msdn.microsoft.com/library/dn385720.aspx></span></span>

<span data-ttu-id="05add-578">在訂單 toostore SQL Server 資料檔案直接在 Azure 高階儲存體上，您需要 toohave 最小的 SQL Server 2014 修補程式版本，請參閱： <https://support.microsoft.com/kb/3063054>。</span><span class="sxs-lookup"><span data-stu-id="05add-578">In order toostore SQL Server data files directly on Azure Premium Storage, you need toohave a minimum SQL Server 2014 patch release which is documented here: <https://support.microsoft.com/kb/3063054>.</span></span> <span data-ttu-id="05add-579">儲存在 Azure 標準儲存體的 SQL Server 資料檔案會與 hello 發行版本的 SQL Server 2014 運作。</span><span class="sxs-lookup"><span data-stu-id="05add-579">Storing SQL Server data files on Azure Standard Storage does work with hello released version of SQL Server 2014.</span></span> <span data-ttu-id="05add-580">不過，hello 完全相同的修補程式包含修正程式，這會導致 hello 直接使用 Azure Blob 儲存體的 SQL Server 資料檔案和備份更可靠的另一個的數列。</span><span class="sxs-lookup"><span data-stu-id="05add-580">However, hello very same patches contain another series of fixes which make hello direct usage of Azure Blob Storage for SQL Server data files and backups more reliable.</span></span> <span data-ttu-id="05add-581">因此我們建議 toouse 這些修補程式一般。</span><span class="sxs-lookup"><span data-stu-id="05add-581">Therefore we recommend toouse these patches in general.</span></span>

### <a name="sql-server-2014-buffer-pool-extension"></a><span data-ttu-id="05add-582">SQL Server 2014 緩衝集區延伸</span><span class="sxs-lookup"><span data-stu-id="05add-582">SQL Server 2014 Buffer Pool Extension</span></span>
<span data-ttu-id="05add-583">SQL Server 2014 引進的新功能，稱為「緩衝集區延伸模組」。</span><span class="sxs-lookup"><span data-stu-id="05add-583">SQL Server 2014 introduced a new feature which is called Buffer Pool Extension.</span></span> <span data-ttu-id="05add-584">這個功能擴展了 hello 緩衝集區的保留記憶體中的第二個層級快取伺服器的本機 Ssd 或 VM 所支援的 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="05add-584">This functionality extends hello buffer pool of SQL Server which is kept in memory with a second level cache that is backed by local SSDs of a server or VM.</span></span> <span data-ttu-id="05add-585">這可讓 tookeep 大的工作集的 'in '的記憶體資料。</span><span class="sxs-lookup"><span data-stu-id="05add-585">This enables tookeep a larger working set of data ‘in memory’.</span></span> <span data-ttu-id="05add-586">比較的 tooaccessing 成 hello 擴充功能，並儲存在 Azure VM 的本機 Ssd 上 hello 緩衝集區的標準儲存體 Azure hello 存取將會更快許多因素而定。</span><span class="sxs-lookup"><span data-stu-id="05add-586">Compared tooaccessing Azure Standard Storage hello access into hello extension of hello buffer pool which is stored on local SSDs of an Azure VM is many factors faster.</span></span>  <span data-ttu-id="05add-587">因此，利用 hello 本機 D:\ 磁碟機有絕佳的 IOPS 及輸送量的 hello VM 類型可能是非常合理方式 tooreduce hello IOPS 載入對 Azure 儲存體，並大幅改善查詢回應時間。</span><span class="sxs-lookup"><span data-stu-id="05add-587">Therefore, leveraging hello local D:\ drive of hello VM types that have excellent IOPS and throughput could be a very reasonable way tooreduce hello IOPS load against Azure Storage and improve response times of queries dramatically.</span></span> <span data-ttu-id="05add-588">這特別適用於未使用進階儲存體時。</span><span class="sxs-lookup"><span data-stu-id="05add-588">This applies especially when not using Premium Storage.</span></span> <span data-ttu-id="05add-589">高階儲存體和 hello 使用方式的 hello Premium Azure 讀取快取 hello 計算節點上，如果資料檔案的建議，預期不大的差異。</span><span class="sxs-lookup"><span data-stu-id="05add-589">In case of Premium Storage and hello usage of hello Premium Azure Read Cache on hello compute node, as recommended for data files, no big differences are expected.</span></span> <span data-ttu-id="05add-590">原因是這兩個快取 （SQL Server 緩衝集區延伸模組和 Premium 儲存體讀取快取） 會使用 hello 的 hello 運算節點的本機磁碟。</span><span class="sxs-lookup"><span data-stu-id="05add-590">Reason is that both caches (SQL Server Buffer Pool Extension and Premium Storage Read Cache) are using hello local disks of hello compute nodes.</span></span>
<span data-ttu-id="05add-591">如需有關此功能的更多詳細資料，請參閱這份文件︰<https://msdn.microsoft.com/library/dn133176.aspx></span><span class="sxs-lookup"><span data-stu-id="05add-591">For more details about this functionality, please check this documentation: <https://msdn.microsoft.com/library/dn133176.aspx></span></span>

### <a name="backuprecovery-considerations-for-sql-server"></a><span data-ttu-id="05add-592">SQL Server 的備份/復原考量</span><span class="sxs-lookup"><span data-stu-id="05add-592">Backup/Recovery considerations for SQL Server</span></span>
<span data-ttu-id="05add-593">將 SQL Server 部署至 Azure 時，必須檢閱您的備份方法。</span><span class="sxs-lookup"><span data-stu-id="05add-593">When deploying SQL Server into Azure your backup methodology must be reviewed.</span></span> <span data-ttu-id="05add-594">即使 hello 系統不是生產系統，由 SQL Server 託管的 hello SAP 資料庫必須定期備份。</span><span class="sxs-lookup"><span data-stu-id="05add-594">Even if hello system is not a productive system, hello SAP database hosted by SQL Server must be backed up periodically.</span></span> <span data-ttu-id="05add-595">因為 Azure 儲存體會保留三個影像，備份現在是較不重要，尤其是尊重 toocompensating 儲存體損毀。</span><span class="sxs-lookup"><span data-stu-id="05add-595">Since Azure Storage keeps three images, a backup is now less important in respect toocompensating a storage crash.</span></span> <span data-ttu-id="05add-596">維護適當的備份和復原計劃 hello 優先順序原因是，您可以藉由提供時間復原功能的中點補償邏輯/手動錯誤有更多。</span><span class="sxs-lookup"><span data-stu-id="05add-596">hello priority reason for maintaining a proper backup and recovery plan is more that you can compensate for logical/manual errors by providing point in time recovery capabilities.</span></span> <span data-ttu-id="05add-597">因此 hello 的目標是 tooeither 使用備份 toorestore hello 資料庫備份 tooa 特定點 Azure tooseed 中的時間或 toouse hello 備份中另一個系統複製 hello 現有的資料庫。</span><span class="sxs-lookup"><span data-stu-id="05add-597">So hello goal is tooeither use backups toorestore hello database back tooa certain point in time or toouse hello backups in Azure tooseed another system by copying hello existing database.</span></span> <span data-ttu-id="05add-598">例如，您無法從傳輸的 2 層 SAP 組態 tooa 3 層系統設定 hello 相同系統還原的備份。</span><span class="sxs-lookup"><span data-stu-id="05add-598">For example, you could transfer from a 2-Tier SAP configuration tooa 3-Tier system setup of hello same system by restoring a backup.</span></span>

<span data-ttu-id="05add-599">有三個不同的方式 toobackup SQL Server tooAzure 儲存體：</span><span class="sxs-lookup"><span data-stu-id="05add-599">There are three different ways toobackup SQL Server tooAzure Storage:</span></span>

1. <span data-ttu-id="05add-600">SQL Server 2012 CU4 和更高版本可以原生備份資料庫 tooa URL。</span><span class="sxs-lookup"><span data-stu-id="05add-600">SQL Server 2012 CU4 and higher can natively backup databases tooa URL.</span></span> <span data-ttu-id="05add-601">Hello 部落格有詳細說明[中 SQL Server 2014 – 第 5 部分 – 備份/還原增強功能的新功能](https://blogs.msdn.com/b/saponsqlserver/archive/2014/02/15/new-functionality-in-sql-server-2014-part-5-backup-restore-enhancements.aspx)。</span><span class="sxs-lookup"><span data-stu-id="05add-601">This is detailed in hello blog [New functionality in SQL Server 2014 – Part 5 – Backup/Restore Enhancements](https://blogs.msdn.com/b/saponsqlserver/archive/2014/02/15/new-functionality-in-sql-server-2014-part-5-backup-restore-enhancements.aspx).</span></span> <span data-ttu-id="05add-602">請參閱 [SQL Server 2012 SP1 CU4 和更新版本][dbms-guide-5.5.1]一章。</span><span class="sxs-lookup"><span data-stu-id="05add-602">See chapter [SQL Server 2012 SP1 CU4 and later][dbms-guide-5.5.1].</span></span>
2. <span data-ttu-id="05add-603">SQL Server 版本先前 tooSQL 2012 CU4 可以使用重新導向功能 toobackup tooa VHD，基本上再 hello 寫入串流移往已設定的 Azure 儲存體位置。</span><span class="sxs-lookup"><span data-stu-id="05add-603">SQL Server releases prior tooSQL 2012 CU4 can use a redirection functionality toobackup tooa VHD and basically move hello write stream towards an Azure Storage location that has been configured.</span></span> <span data-ttu-id="05add-604">請參閱 [SQL Server 2012 SP1 CU3 和舊版][dbms-guide-5.5.2]一章。</span><span class="sxs-lookup"><span data-stu-id="05add-604">See chapter [SQL Server 2012 SP1 CU3 and earlier releases][dbms-guide-5.5.2].</span></span>
3. <span data-ttu-id="05add-605">hello 最後一種方法是 tooperform 傳統的 SQL Server 備份 toodisk 命令至 VHD 磁碟裝置。</span><span class="sxs-lookup"><span data-stu-id="05add-605">hello final method is tooperform a conventional SQL Server backup toodisk command onto a VHD disk device.</span></span>  <span data-ttu-id="05add-606">這是相同的 toohello 在內部部署的部署模式，而且不會在這份文件中詳細討論。</span><span class="sxs-lookup"><span data-stu-id="05add-606">This is identical toohello on-premises deployment pattern and is not discussed in detail in this document.</span></span>

#### <span data-ttu-id="05add-607"><a name="0fef0e79-d3fe-4ae2-85af-73666a6f7268"></a>SQL Server 2012 SP1 CU4 和更新版本</span><span class="sxs-lookup"><span data-stu-id="05add-607"><a name="0fef0e79-d3fe-4ae2-85af-73666a6f7268"></a>SQL Server 2012 SP1 CU4 and later</span></span>
<span data-ttu-id="05add-608">這項功能可讓您 toodirectly 備份 tooAzure BLOB 儲存體。</span><span class="sxs-lookup"><span data-stu-id="05add-608">This functionality allows you toodirectly backup tooAzure BLOB storage.</span></span> <span data-ttu-id="05add-609">如果沒有這個方法中，您必須備份 tooother Azure Vhd，因而耗用 VHD 和 IOPS 容量。</span><span class="sxs-lookup"><span data-stu-id="05add-609">Without this method, you must backup tooother Azure VHDs which would consume VHD and IOPS capacity.</span></span> <span data-ttu-id="05add-610">hello 基本上想法如下：</span><span class="sxs-lookup"><span data-stu-id="05add-610">hello idea is basically this:</span></span>

 ![使用 SQL Server 2012 備份 tooMicrosoft Azure 儲存體 BLOB][dbms-guide-figure-400]

<span data-ttu-id="05add-612">hello 優點在此情況下會是不需要 toospend Vhd toostore SQL Server 備份上。</span><span class="sxs-lookup"><span data-stu-id="05add-612">hello advantage in this case is that one doesn’t need toospend VHDs toostore SQL Server backups on.</span></span> <span data-ttu-id="05add-613">因此，有較少的 Vhd 配置，hello 的 VHD IOPS 的整個頻寬可用於資料和記錄檔。</span><span class="sxs-lookup"><span data-stu-id="05add-613">So you have fewer VHDs allocated and hello whole bandwidth of VHD IOPS can be used for data and log files.</span></span> <span data-ttu-id="05add-614">請注意 hello 備份的大小上限是有限的 tooa 上限為 1 TB，如本文中的 hello 一節 < 限制 > 中所述： <https://msdn.microsoft.com/library/dn435916.aspx#limitations>。</span><span class="sxs-lookup"><span data-stu-id="05add-614">Please note that hello maximum size of a backup is limited tooa maximum of 1 TB as documented in hello section ‘Limitations’ in this article: <https://msdn.microsoft.com/library/dn435916.aspx#limitations>.</span></span> <span data-ttu-id="05add-615">如果 hello 備份的大小，即使使用 SQL Server 備份壓縮的大小超過 1 TB，hello 章節所述的功能[SQL Server 2012 SP1 CU3 和更舊版本][ dbms-guide-5.5.2]在這份文件，也需要使用 toobe。</span><span class="sxs-lookup"><span data-stu-id="05add-615">If hello backup size, despite using SQL Server Backup compression would exceed 1 TB in size, hello functionality described in chapter [SQL Server 2012 SP1 CU3 and earlier releases][dbms-guide-5.5.2] in this document needs toobe used.</span></span>

<span data-ttu-id="05add-616">[相關文件](https://msdn.microsoft.com/library/dn449492.aspx)描述 hello 還原的資料庫從 Azure Blob 存放區中的備份，建議您無法直接從 Azure BLOB 存放區 toorestore hello 備份是否 > 25 GB。</span><span class="sxs-lookup"><span data-stu-id="05add-616">[Related documentation](https://msdn.microsoft.com/library/dn449492.aspx) describing hello restore of databases from backups against Azure Blob Store recommend not toorestore directly from Azure BLOB store if hello backups is >25GB.</span></span> <span data-ttu-id="05add-617">本文章中的 hello 建議只根據效能考量，並不因為 toofunctional 限制。</span><span class="sxs-lookup"><span data-stu-id="05add-617">hello recommendation in this article is simply based on performance considerations and not due toofunctional restrictions.</span></span> <span data-ttu-id="05add-618">因此，隨著案例的不同，可能會發生不同的狀況。</span><span class="sxs-lookup"><span data-stu-id="05add-618">Therefore, different conditions may apply on a case by case basis.</span></span>

<span data-ttu-id="05add-619">如需有關如何設定和利用此備份類型的說明，請參閱 [這個](https://msdn.microsoft.com/library/dn466438.aspx) 教學課程</span><span class="sxs-lookup"><span data-stu-id="05add-619">Documentation on how this type of backup is set up and leveraged can be found in [this](https://msdn.microsoft.com/library/dn466438.aspx) tutorial</span></span>

<span data-ttu-id="05add-620">可以讀取的一連串步驟 hello 範例[這裡](https://msdn.microsoft.com/library/dn435916.aspx)。</span><span class="sxs-lookup"><span data-stu-id="05add-620">An example of hello sequence of steps can be read [here](https://msdn.microsoft.com/library/dn435916.aspx).</span></span>

<span data-ttu-id="05add-621">自動備份，為最高的重要性 toomake 確定每個備份的 hello Blob 的名稱不同。</span><span class="sxs-lookup"><span data-stu-id="05add-621">Automating backups, it is of highest importance toomake sure that hello BLOBs for each backup are named differently.</span></span> <span data-ttu-id="05add-622">否則將會覆寫，而且 hello restore 鏈已中斷。</span><span class="sxs-lookup"><span data-stu-id="05add-622">Otherwise they will be overwritten and hello restore chain is broken.</span></span>

<span data-ttu-id="05add-623">為了不 toomix hello 3 之備份的不同類型的項目上時，它是建議 toocreate 不同的容器下方 hello 做為備份用途的儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="05add-623">In order not toomix up things between hello 3 different types of backups, it is advisable toocreate different containers underneath hello storage account used for backups.</span></span> <span data-ttu-id="05add-624">hello 容器可以是只有 VM 或 VM 和備份類型。</span><span class="sxs-lookup"><span data-stu-id="05add-624">hello containers could be by VM only or by VM and Backup type.</span></span> <span data-ttu-id="05add-625">hello 結構描述如下：</span><span class="sxs-lookup"><span data-stu-id="05add-625">hello schema could look like:</span></span>

 ![使用 SQL Server 2012 備份 tooMicrosoft Azure 儲存體 BLOB-個別儲存體帳戶不同的容器][dbms-guide-figure-500]

<span data-ttu-id="05add-627">Hello 備份不會執行到相同的儲存體帳戶在 hello hello hello 上述範例中所部署 Vm。</span><span class="sxs-lookup"><span data-stu-id="05add-627">In hello example above, hello backups would not be performed into hello same storage account where hello VMs are deployed.</span></span> <span data-ttu-id="05add-628">有新的儲存體帳戶，特別針對 hello 備份。</span><span class="sxs-lookup"><span data-stu-id="05add-628">There would be a new storage account specifically for hello backups.</span></span> <span data-ttu-id="05add-629">內 hello 儲存體帳戶，會建立不同的備份與 hello VM 名稱 hello 型矩陣的容器。</span><span class="sxs-lookup"><span data-stu-id="05add-629">Within hello storage accounts, there would be different containers created with a matrix of hello type of backup and hello VM name.</span></span> <span data-ttu-id="05add-630">這類分割可讓您更輕鬆 tooadministrate hello 備份 hello 不同的 Vm。</span><span class="sxs-lookup"><span data-stu-id="05add-630">Such segmentation will make it easier tooadministrate hello backups of hello different VMs.</span></span>

<span data-ttu-id="05add-631">其中一個直接寫入 hello 備份 hello Blob 不會加入 toohello hello VM 的 Vhd 數目。</span><span class="sxs-lookup"><span data-stu-id="05add-631">hello BLOBs one directly writes hello backups to, are not adding toohello count of hello VHDs of a VM.</span></span> <span data-ttu-id="05add-632">因此可以最大化 hello hello 資料的 hello 特定 VM SKU 的掛接 Vhd 上限和交易記錄檔，並仍然執行備份，以對儲存體容器。</span><span class="sxs-lookup"><span data-stu-id="05add-632">Hence one could maximize hello maximum of VHDs mounted of hello specific VM SKU for hello data and transaction log file and still execute a backup against a storage container.</span></span>

#### <span data-ttu-id="05add-633"><a name="f9071eff-9d72-4f47-9da4-1852d782087b"></a>SQL Server 2012 SP1 CU3 和舊版</span><span class="sxs-lookup"><span data-stu-id="05add-633"><a name="f9071eff-9d72-4f47-9da4-1852d782087b"></a>SQL Server 2012 SP1 CU3 and earlier releases</span></span>
<span data-ttu-id="05add-634">您必須執行順序 tooachieve 中備份，直接對 Azure 儲存體的 hello 第一個步驟就是連結太 toodownload hello msi[這](https://www.microsoft.com/download/details.aspx?id=40740)KBA 文章。</span><span class="sxs-lookup"><span data-stu-id="05add-634">hello first step you must perform in order tooachieve a backup directly against Azure Storage would be toodownload hello msi which is linked too[this](https://www.microsoft.com/download/details.aspx?id=40740) KBA article.</span></span>

<span data-ttu-id="05add-635">下載 hello x64 安裝檔案和 hello 文件。</span><span class="sxs-lookup"><span data-stu-id="05add-635">Download hello x64 installation file and hello documentation.</span></span> <span data-ttu-id="05add-636">hello 檔案會安裝程式: 'Microsoft SQL Server Backup tooMicrosoft Azure 工具'。</span><span class="sxs-lookup"><span data-stu-id="05add-636">hello file will install a program called: ‘Microsoft SQL Server Backup tooMicrosoft Azure Tool’.</span></span> <span data-ttu-id="05add-637">徹底閱讀 hello hello 產品文件。</span><span class="sxs-lookup"><span data-stu-id="05add-637">Read hello documentation of hello product thoroughly.</span></span>  <span data-ttu-id="05add-638">hello 工具基本上可以下列方式 hello:</span><span class="sxs-lookup"><span data-stu-id="05add-638">hello tool basically works in hello following way:</span></span>

* <span data-ttu-id="05add-639">Hello SQL Server 端，從定義 hello SQL Server 備份的磁碟位置 （請勿這個使用 hello D:\ 磁碟機）。</span><span class="sxs-lookup"><span data-stu-id="05add-639">From hello SQL Server side, a disk location for hello SQL Server backup is defined (don’t use hello D:\ drive for this).</span></span>
* <span data-ttu-id="05add-640">hello 工具可讓您可使用的 toodirect 不同類型的備份 toodifferent Azure 儲存體容器 toodefine 規則。</span><span class="sxs-lookup"><span data-stu-id="05add-640">hello tool will allow you toodefine rules which can be used toodirect different types of backups toodifferent Azure Storage containers.</span></span>
* <span data-ttu-id="05add-641">一旦 hello 規則準備就緒，hello 工具將會重新導向 hello 備份 tooone hello Vhd/磁碟 toohello 先前所定義 Azure 儲存體位置的 hello 寫入資料的流。</span><span class="sxs-lookup"><span data-stu-id="05add-641">Once hello rules are in place, hello tool will redirect hello write stream of hello backup tooone of hello VHDs/disks toohello Azure Storage location which was defined earlier.</span></span>
* <span data-ttu-id="05add-642">hello 工具會導致 hello VHD/磁碟所定義的 hello SQL Server 上的一個數 KB 大小的小型的虛設常式檔案備份。</span><span class="sxs-lookup"><span data-stu-id="05add-642">hello tool will leave a small stub file of a few KB size on hello VHD/Disk which was defined for hello SQL Server backup.</span></span> <span data-ttu-id="05add-643">**此檔案應該留在 hello 儲存位置，因為它是必要的 toorestore 再次從 Azure 儲存體。**</span><span class="sxs-lookup"><span data-stu-id="05add-643">**This file should be left on hello storage location since it is required toorestore again from Azure Storage.**</span></span>
  * <span data-ttu-id="05add-644">如果您遺失 hello stub 檔案 （例如，透過遺失 hello 包含 hello stub 檔案的儲存媒體），而且您已選擇備份 tooa Microsoft Azure 儲存體帳戶的 hello 選項，您可能會復原 hello stub 檔案透過 Microsoft Azure 儲存體從放置的 hello 儲存體容器下載。</span><span class="sxs-lookup"><span data-stu-id="05add-644">If you have lost hello stub file (e.g. through loss of hello storage media that contained hello stub file) and you have chosen hello option of backing up tooa Microsoft Azure Storage account, you may recover hello stub file through Microsoft Azure Storage by downloading it from hello storage container in which it was placed.</span></span> <span data-ttu-id="05add-645">您應該然後將 hello stub 檔案放在其中 hello 工具是設定的 toodetect 和上傳 toohello hello 本機電腦上資料夾相同的容器以 hello 如果加密搭配 hello 原始規則使用相同的加密密碼。</span><span class="sxs-lookup"><span data-stu-id="05add-645">You should then place hello stub file into a folder on hello local machine where hello Tool is configured toodetect and upload toohello same container with hello same encryption password if encryption was used with hello original rule.</span></span>

<span data-ttu-id="05add-646">這表示 hello 結構描述可以也可供 SQL Server 版本不允許直接定址 Azure 儲存體位置放置與上述針對較新版的 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="05add-646">This means hello schema as described above for more recent releases of SQL Server can be put in place as well for SQL Server releases which are not allowing direct address an Azure Storage location.</span></span>

<span data-ttu-id="05add-647">此方法不應與較新版的 SQL Server 搭配使用，這些版本支援以原生方式備份 Azure 儲存體。</span><span class="sxs-lookup"><span data-stu-id="05add-647">This method should not be used with more recent SQL Server releases which support backing up natively against Azure Storage.</span></span> <span data-ttu-id="05add-648">例外狀況是其中的 hello 原生備份至 Azure 的限制會封鎖 Azure 原生備份執行。</span><span class="sxs-lookup"><span data-stu-id="05add-648">Exceptions are where limitations of hello native backup into Azure are blocking native backup execution into Azure.</span></span>

#### <a name="other-possibilities-toobackup-sql-server-databases"></a><span data-ttu-id="05add-649">其他可能性 toobackup SQL Server 資料庫</span><span class="sxs-lookup"><span data-stu-id="05add-649">Other possibilities toobackup SQL Server databases</span></span>
<span data-ttu-id="05add-650">其他可能性 toobackup 資料庫是其他 Vhd tooa tooattach VM 上使用 toostore 備份。</span><span class="sxs-lookup"><span data-stu-id="05add-650">Other possibilities toobackup databases is tooattach additional VHDs tooa VM that you use toostore backups on.</span></span> <span data-ttu-id="05add-651">在這類情況下，您必須 toomake 確定該 hello Vhd 正在不完整。</span><span class="sxs-lookup"><span data-stu-id="05add-651">In such a case you would need toomake sure that hello VHDs are not running full.</span></span> <span data-ttu-id="05add-652">在 hello 情形下，您需要 toounmount hello VHD，因此 toospeak '' 將它封存，並取代為新的空白 VHD。</span><span class="sxs-lookup"><span data-stu-id="05add-652">If that is hello case, you would need toounmount hello VHD and so toospeak ‘archive’ it and replace it with a new empty VHD.</span></span> <span data-ttu-id="05add-653">如果您向該路徑下，您要 tookeep hello 的 hello 與 hello 資料庫檔案的 Vhd 從不同的 Azure 儲存體帳戶中的這些 Vhd。</span><span class="sxs-lookup"><span data-stu-id="05add-653">If you go down that path, you want tookeep these VHDs in separate Azure Storage Accounts from hello ones that hello VHDs with hello database files.</span></span>

<span data-ttu-id="05add-654">第二種可能性是 toouse 可以有許多 Vhd 附加的大型 VM。</span><span class="sxs-lookup"><span data-stu-id="05add-654">A second possibility is toouse a large VM that can have many VHDs attached.</span></span> <span data-ttu-id="05add-655">例如</span><span class="sxs-lookup"><span data-stu-id="05add-655">E.g.</span></span> <span data-ttu-id="05add-656">有 32 個 VHD 的 D14。</span><span class="sxs-lookup"><span data-stu-id="05add-656">D14 with 32VHDs.</span></span> <span data-ttu-id="05add-657">使用儲存空間 toobuild 彈性的環境，您無法建立共用，會再做為備份目標 hello 不同 DBMS 伺服器使用。</span><span class="sxs-lookup"><span data-stu-id="05add-657">Use Storage Spaces toobuild a flexible environment where you could build shares that are used then as backup targets for hello different DBMS servers.</span></span>

<span data-ttu-id="05add-658">[這裡](https://blogs.msdn.com/b/sqlcat/archive/2015/02/26/large-sql-server-database-backup-on-an-azure-vm-and-archiving.aspx) 也記載了一些最佳做法。</span><span class="sxs-lookup"><span data-stu-id="05add-658">Some best practices got documented [here](https://blogs.msdn.com/b/sqlcat/archive/2015/02/26/large-sql-server-database-backup-on-an-azure-vm-and-archiving.aspx) as well.</span></span>

#### <a name="performance-considerations-for-backupsrestores"></a><span data-ttu-id="05add-659">備份/還原的效能考量</span><span class="sxs-lookup"><span data-stu-id="05add-659">Performance considerations for backups/restores</span></span>
<span data-ttu-id="05add-660">裸機部署，如同備份/還原效能是取決於磁碟區數目可以讀取以平行方式，而且這些磁碟區的哪些 hello 輸送量可能。</span><span class="sxs-lookup"><span data-stu-id="05add-660">As in bare-metal deployments, backup/restore performance is dependent on how many volumes can be read in parallel and what hello throughput of those volumes might be.</span></span> <span data-ttu-id="05add-661">此外，hello 備份壓縮所使用的 CPU 耗用量可能相當重要的角色上播放的 Vm 只向上 too8 CPU 執行緒。</span><span class="sxs-lookup"><span data-stu-id="05add-661">In addition, hello CPU consumption used by backup compression may play a significant role on VMs with just up too8 CPU threads.</span></span> <span data-ttu-id="05add-662">因此，您可以假設︰</span><span class="sxs-lookup"><span data-stu-id="05add-662">Therefore, one can assume:</span></span>

* <span data-ttu-id="05add-663">hello 較少的 Vhd hello 數目使用 toostore hello 資料檔案，hello 較小 hello 中讀取的整體輸送量。</span><span class="sxs-lookup"><span data-stu-id="05add-663">hello fewer hello number of VHDs used toostore hello data files, hello smaller hello overall throughput in reading.</span></span>
* <span data-ttu-id="05add-664">hello 數目較少 hello hello VM 中的 CPU 執行緒，hello 更嚴重 hello 備份壓縮的影響。</span><span class="sxs-lookup"><span data-stu-id="05add-664">hello smaller hello number of CPU threads in hello VM, hello more severe hello impact of backup compression.</span></span>
* <span data-ttu-id="05add-665">hello 較少的目標 （Blob 或 Vhd） toowrite hello 來備份、 hello 較小者 hello 輸送量。</span><span class="sxs-lookup"><span data-stu-id="05add-665">hello fewer targets (BLOBs or VHDs) toowrite hello backup to, hello lesser hello throughput.</span></span>
* <span data-ttu-id="05add-666">hello 小 hello VM 大小，hello 小 hello 儲存體輸送量配額寫入和讀取從 Azure 儲存體。</span><span class="sxs-lookup"><span data-stu-id="05add-666">hello smaller hello VM size, hello smaller hello storage throughput quota writing and reading from Azure Storage.</span></span> <span data-ttu-id="05add-667">Hello 備份是否直接儲存在 Azure Blob 上或儲存在一次在 Azure Blob 中儲存的 Vhd 是否與無關。</span><span class="sxs-lookup"><span data-stu-id="05add-667">Independent of whether hello backups are directly stored on Azure Blob or whether they are stored in VHDs that again are stored in Azure Blobs.</span></span>

<span data-ttu-id="05add-668">時使用 Microsoft Azure 儲存體 BLOB 做為較新版本中的 hello 備份目標，您必須針對每個特定的備份限制的 toodesignating 只有一個 URL 目標。</span><span class="sxs-lookup"><span data-stu-id="05add-668">When using a Microsoft Azure Storage BLOB as hello backup target in more recent releases, you are restricted toodesignating only one URL target for each specific backup.</span></span>

<span data-ttu-id="05add-669">但當使用 hello 'Microsoft SQL Server Backup tooMicrosoft Azure 工具' 中的較舊版本中，您可以定義多個檔案目標。</span><span class="sxs-lookup"><span data-stu-id="05add-669">But when using hello ‘Microsoft SQL Server Backup tooMicrosoft Azure Tool’ in older releases, you can define more than one file target.</span></span> <span data-ttu-id="05add-670">具有多個目標，hello 備份規模和 hello hello 備份的輸送量較高。</span><span class="sxs-lookup"><span data-stu-id="05add-670">With more than one target, hello backup can scale and hello throughput of hello backup is higher.</span></span> <span data-ttu-id="05add-671">這會導致再也在 hello Azure 儲存體帳戶中的多個檔案。</span><span class="sxs-lookup"><span data-stu-id="05add-671">This would result then in multiple files as well in hello Azure Storage account.</span></span> <span data-ttu-id="05add-672">在我們的測試，使用其中一個絕對可以達到 hello 輸送量達到使用 hello 備份延伸模組的多個檔案目的地實作從 SQL Server 2012 SP1 CU4 上。</span><span class="sxs-lookup"><span data-stu-id="05add-672">In our testing, using multiple file destinations one can definitely achieve hello throughput which one could achieve with hello backup extensions implemented in from SQL Server 2012 SP1 CU4 on.</span></span> <span data-ttu-id="05add-673">您也不會封鎖 hello 1 TB 限制與 hello 原生備份至 Azure。</span><span class="sxs-lookup"><span data-stu-id="05add-673">You also are not blocked by hello 1TB limit as in hello native backup into Azure.</span></span>

<span data-ttu-id="05add-674">不過，請記住，hello 輸送量也取決於 hello hello hello 備份所使用的 Azure 儲存體帳戶位置。</span><span class="sxs-lookup"><span data-stu-id="05add-674">However, keep in mind, hello throughput also is dependent on hello location of hello Azure Storage Account you use for hello backup.</span></span> <span data-ttu-id="05add-675">了解可能 toolocate hello 儲存體帳戶以外的不同區域 hello Vm 正在執行中。</span><span class="sxs-lookup"><span data-stu-id="05add-675">An idea might be toolocate hello storage account in a different region than hello VMs are running in.</span></span> <span data-ttu-id="05add-676">例如</span><span class="sxs-lookup"><span data-stu-id="05add-676">E.g.</span></span> <span data-ttu-id="05add-677">您會在西歐，執行 hello VM 組態，但將 hello 對付 tooback 用於北歐的儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="05add-677">you would run hello VM configuration in West-Europe, but put hello Storage Account that you use tooback up against in North-Europe.</span></span> <span data-ttu-id="05add-678">一定會有影響 hello 備份輸送量和似乎 toobe hello 目標儲存體，而且 hello Vm 可能在 hello 中執行的每秒 150MB 的輸送量是不可能 toogenerate 相同地區資料中心。</span><span class="sxs-lookup"><span data-stu-id="05add-678">That certainly will have impact on hello backup throughput and is not likely toogenerate a throughput of 150MB/sec as it seems toobe possible in cases where hello target storage and hello VMs are running in hello same regional datacenter.</span></span>

#### <a name="managing-backup-blobs"></a><span data-ttu-id="05add-679">管理備份 BLOB</span><span class="sxs-lookup"><span data-stu-id="05add-679">Managing Backup BLOBs</span></span>
<span data-ttu-id="05add-680">沒有自己的需求 toomanage hello 備份。</span><span class="sxs-lookup"><span data-stu-id="05add-680">There is a requirement toomanage hello backups on your own.</span></span> <span data-ttu-id="05add-681">由於 hello 預期的情況下，將透過執行頻繁的交易記錄備份中建立許多 blob，管理 blob 輕鬆可以運作 hello Azure 入口網站。</span><span class="sxs-lookup"><span data-stu-id="05add-681">Since hello expectation is that many blobs will be created by executing frequent transaction log backups, administration of those blobs easily can overburden hello Azure Portal.</span></span> <span data-ttu-id="05add-682">因此，它是時 tooleverage Azure 儲存體總管。</span><span class="sxs-lookup"><span data-stu-id="05add-682">Therefore, it is recommendable tooleverage a Azure Storage Explorer.</span></span> <span data-ttu-id="05add-683">有數個類好工具可用，可協助 toomanage Azure 儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="05add-683">There are several good ones available which can help toomanage an Azure storage account</span></span>

* <span data-ttu-id="05add-684">安裝 Azure SDK 的 Microsoft Visual Studio (<https://azure.microsoft.com/downloads/>)</span><span class="sxs-lookup"><span data-stu-id="05add-684">Microsoft Visual Studio with Azure SDK installed (<https://azure.microsoft.com/downloads/>)</span></span>
* <span data-ttu-id="05add-685">Microsoft Azure 儲存體總管 (<https://azure.microsoft.com/downloads/>)</span><span class="sxs-lookup"><span data-stu-id="05add-685">Microsoft Azure Storage Explorer (<https://azure.microsoft.com/downloads/>)</span></span>
* <span data-ttu-id="05add-686">協力廠商工具</span><span class="sxs-lookup"><span data-stu-id="05add-686">3rd party tools</span></span>

[comment]: <> (在 ARM 上尚不支援)
[comment]: <> (#### Azure VM 備份)
[comment]: <> (Hello SAP 系統內的 Vm 可以備份使用 Azure 虛擬機器備份功能。Azure 虛擬機器備份及早在 hello 2015 年引進，並同時是標準方法 toobackup 完成 VM 在 Azure 中。Azure 備份儲存在 Azure 中的 hello 備份，並允許虛擬機器還原一次。)
[comment]: <> (執行的資料庫可以備份以一致的方式以及如果 hello DBMS 系統支援 hello Windows VSS 磁碟區陰影複製服務的 Vm < 沒有 https://msdn.microsoft.com/library/windows/desktop/bb968832.aspx> 與 SQL Server。因此使用 Azure VM 的備份可以是可還原的已方式 tooget tooa SAP 資料庫的備份。不過請注意，您無法以資料庫的 Azure VM 備份還原時間點為基礎。因此，hello 建議 tooperform DBMS 功能，而不是依賴 Azure VM 備份的資料庫備份。)
[comment]: <> (熟悉 Azure 虛擬機器備份 tooget 請從這裡開始 < https://azure.microsoft.com/documentation/services/backup/>)

### <span data-ttu-id="05add-692"><a name="1b353e38-21b3-4310-aeb6-a77e7c8e81c8"></a>使用 Microsoft Azure Marketplace hello 超出 SQL Server 映像</span><span class="sxs-lookup"><span data-stu-id="05add-692"><a name="1b353e38-21b3-4310-aeb6-a77e7c8e81c8"></a>Using a SQL Server images out of hello Microsoft Azure Marketplace</span></span>
<span data-ttu-id="05add-693">Microsoft 提供 hello 已經包含 SQL Server 版本的 Azure Marketplace 中的 Vm。</span><span class="sxs-lookup"><span data-stu-id="05add-693">Microsoft offers VMs in hello Azure Marketplace which already contain versions of SQL Server.</span></span> <span data-ttu-id="05add-694">對於需要 SQL Server 和 Windows 的授權的 SAP 客戶，這可能是由已安裝的 SQL server Vm，大致授權機會 toobasically 封面 hello 需求。</span><span class="sxs-lookup"><span data-stu-id="05add-694">For SAP customers who require licenses for SQL Server and Windows, this might be an opportunity toobasically cover hello need for licenses by spinning up VMs with SQL Server already installed.</span></span> <span data-ttu-id="05add-695">在訂單 toouse for SAP，這類映像 hello 下列考量需要 toobe 進行：</span><span class="sxs-lookup"><span data-stu-id="05add-695">In order toouse such images for SAP, hello following considerations need toobe made:</span></span>

* <span data-ttu-id="05add-696">hello SQL Server 非評估版取得的成本會高於只 ' 僅限 Windows' 部署的 VM 從 Azure Marketplace。</span><span class="sxs-lookup"><span data-stu-id="05add-696">hello SQL Server non-Evaluation versions acquire higher costs than just a ‘Windows-only’ VM deployed from Azure Marketplace.</span></span> <span data-ttu-id="05add-697">這些文章 toocompare 價格，請參閱： <https://azure.microsoft.com/pricing/details/virtual-machines/>和<https://azure.microsoft.com/pricing/details/virtual-machines/#Sql>。</span><span class="sxs-lookup"><span data-stu-id="05add-697">Please see these articles toocompare prices: <https://azure.microsoft.com/pricing/details/virtual-machines/> and <https://azure.microsoft.com/pricing/details/virtual-machines/#Sql>.</span></span>
* <span data-ttu-id="05add-698">您只能使用 SAP 支援的 SQL Server 版本，例如 SQL Server 2012。</span><span class="sxs-lookup"><span data-stu-id="05add-698">You only can use SQL Server releases which are supported by SAP, like SQL Server 2012.</span></span>
* <span data-ttu-id="05add-699">hello SQL Server 執行個體安裝在 hello hello Azure Marketplace 中提供的 Vm 中的 hello 定序不是 hello 定序的 SAP NetWeaver 需要 hello SQL Server 執行個體 toorun。</span><span class="sxs-lookup"><span data-stu-id="05add-699">hello collation of hello SQL Server instance which is installed in hello VMs offered in hello Azure Marketplace is not hello collation SAP NetWeaver requires hello SQL Server instance toorun.</span></span> <span data-ttu-id="05add-700">您可以變更 hello 定序，但仍有 hello hello 之後 > 一節中的指示進行。</span><span class="sxs-lookup"><span data-stu-id="05add-700">You can change hello collation though with hello directions in hello following section.</span></span>

#### <a name="changing-hello-sql-server-collation-of-a-microsoft-windowssql-server-vm"></a><span data-ttu-id="05add-701">變更 hello 的 Microsoft Windows/SQL Server VM 的 SQL Server 定序</span><span class="sxs-lookup"><span data-stu-id="05add-701">Changing hello SQL Server Collation of a Microsoft Windows/SQL Server VM</span></span>
<span data-ttu-id="05add-702">Hello hello Azure Marketplace 中的 SQL Server 映像未設定 toouse hello 定序所需的 SAP NetWeaver 應用程式，因為它需要 toobe hello 部署之後立即變更。</span><span class="sxs-lookup"><span data-stu-id="05add-702">Since hello SQL Server images in hello Azure Marketplace are not set up toouse hello collation which is required by SAP NetWeaver applications, it needs toobe changed immediately after hello deployment.</span></span> <span data-ttu-id="05add-703">SQL Server 2012，作法是以 hello 下列步驟儘速 hello 已部署 VM，並且系統管理員可以到 hello toolog 部署 VM:</span><span class="sxs-lookup"><span data-stu-id="05add-703">For SQL Server 2012, this can be done with hello following steps as soon as hello VM has been deployed and an administrator is able toolog into hello deployed VM:</span></span>

* <span data-ttu-id="05add-704">以「系統管理員身分」開啟 Windows 命令視窗。</span><span class="sxs-lookup"><span data-stu-id="05add-704">Open a Windows Command Window ‘as administrator’.</span></span>
* <span data-ttu-id="05add-705">變更 hello 目錄 tooC:\Program Files\Microsoft SQL Server\110\Setup Bootstrap\SQLServer2012。</span><span class="sxs-lookup"><span data-stu-id="05add-705">Change hello directory tooC:\Program Files\Microsoft SQL Server\110\Setup Bootstrap\SQLServer2012.</span></span>
* <span data-ttu-id="05add-706">執行 hello 命令： Setup.exe /QUIET /ACTION = REBUILDDATABASE /INSTANCENAME = MSSQLSERVER /SQLSYSADMINACCOUNTS =`<local_admin_account_name`> /SQLCOLLATION = SQL_Latin1_General_Cp850_BIN2</span><span class="sxs-lookup"><span data-stu-id="05add-706">Execute hello command: Setup.exe /QUIET /ACTION=REBUILDDATABASE /INSTANCENAME=MSSQLSERVER /SQLSYSADMINACCOUNTS=`<local_admin_account_name`> /SQLCOLLATION=SQL_Latin1_General_Cp850_BIN2</span></span>   
  * <span data-ttu-id="05add-707">`<local_admin_account_name`> 是 hello 帳戶透過 hello 圖庫的第一次部署的 hello hello VM 時定義為 hello 系統管理員帳戶。</span><span class="sxs-lookup"><span data-stu-id="05add-707">`<local_admin_account_name`> is hello account which was defined as hello administrator account when deploying hello VM for hello first time through hello gallery.</span></span>

<span data-ttu-id="05add-708">hello 程序應該只需要幾分鐘的時間。</span><span class="sxs-lookup"><span data-stu-id="05add-708">hello process should only take a few minutes.</span></span> <span data-ttu-id="05add-709">確定的順序 toomake 中 hello 步驟結果 hello 正確的結果，是否，請執行下列步驟的 hello:</span><span class="sxs-lookup"><span data-stu-id="05add-709">In order toomake sure whether hello step ended up with hello correct result, please perform hello following steps:</span></span>

* <span data-ttu-id="05add-710">開啟 SQL Server Management Studio。</span><span class="sxs-lookup"><span data-stu-id="05add-710">Open SQL Server Management Studio.</span></span>
* <span data-ttu-id="05add-711">開啟查詢視窗。</span><span class="sxs-lookup"><span data-stu-id="05add-711">Open a Query Window.</span></span>
* <span data-ttu-id="05add-712">Hello SQL Server master 資料庫中，執行 sp_helpsort hello 命令。</span><span class="sxs-lookup"><span data-stu-id="05add-712">Execute hello command sp_helpsort in hello SQL Server master database.</span></span>

<span data-ttu-id="05add-713">hello 預期的結果應該如下：</span><span class="sxs-lookup"><span data-stu-id="05add-713">hello desired result should look like:</span></span>

    Latin1-General, binary code point comparison sort for Unicode Data, SQL Server Sort Order 40 on Code Page 850 for non-Unicode Data

<span data-ttu-id="05add-714">如果這不是 hello 結果，停止 」 部署 SAP，並調查為什麼 hello setup 命令未正常運作。</span><span class="sxs-lookup"><span data-stu-id="05add-714">If this is not hello result, STOP deploying SAP and investigate why hello setup command did not work as expected.</span></span> <span data-ttu-id="05add-715">部署到具有不同的 SQL Server 字碼頁之 SQL Server 執行個體上的 SAP NetWeaver 應用程式比 hello 上面所述的其中一個是**不**支援。</span><span class="sxs-lookup"><span data-stu-id="05add-715">Deployment of SAP NetWeaver applications onto SQL Server instance with different SQL Server codepages than hello one mentioned above is **NOT** supported.</span></span>

### <a name="sql-server-high-availability-for-sap-in-azure"></a><span data-ttu-id="05add-716">SQL Server 在 Azure 中適用於 SAP 的高可用性</span><span class="sxs-lookup"><span data-stu-id="05add-716">SQL Server High-Availability for SAP in Azure</span></span>
<span data-ttu-id="05add-717">如本文稍早所述，沒有任何所需 hello hello 最舊的 SQL Server 高可用性功能使用方式的可能性 toocreate 共用存放裝置。</span><span class="sxs-lookup"><span data-stu-id="05add-717">As mentioned earlier in this paper, there is no possibility toocreate shared storage which is necessary for hello usage of hello oldest SQL Server high availability functionality.</span></span> <span data-ttu-id="05add-718">這項功能會安裝在 Windows Server 容錯移轉叢集 (WSFC) hello 使用者資料庫 （以及最終 tempdb） 使用的共用的磁碟的兩個或多個 SQL Server 執行個體。</span><span class="sxs-lookup"><span data-stu-id="05add-718">This functionality would install two or more SQL Server instances in a Windows Server Failover Cluster (WSFC) using a shared disk for hello user databases (and eventually tempdb).</span></span> <span data-ttu-id="05add-719">這是 SAP 也支援 hello 很長的時間標準的高可用性方法。</span><span class="sxs-lookup"><span data-stu-id="05add-719">This is hello long time standard high availability method which also is supported by SAP.</span></span> <span data-ttu-id="05add-720">由於 Azure 不支援共用儲存體，所以無法實現具有共用磁碟叢集組態的 SQL Server 高可用性組態。</span><span class="sxs-lookup"><span data-stu-id="05add-720">Because Azure doesn’t support shared storage, SQL Server high availability configurations with a shared disk cluster configuration cannot be realized.</span></span> <span data-ttu-id="05add-721">不過，許多其他高可用性方法仍可能發生而且 hello 下列各節所述。</span><span class="sxs-lookup"><span data-stu-id="05add-721">However, many other high availability methods are still possible and are described in hello following sections.</span></span>

[comment]: <> (仍在參考 tooASM 發行項。)
[comment]: <> (閱讀 hello 不同特定高可用性技術可使用 Azure 中的 SQL Server 之前, 有是很好的文件提供更多詳細資料和指標 [這裡] [virtual-machines-sql-server-high-availability-and-disaster-recovery-solutions])

#### <a name="sql-server-log-shipping"></a><span data-ttu-id="05add-724">SQL Server 記錄傳送</span><span class="sxs-lookup"><span data-stu-id="05add-724">SQL Server Log Shipping</span></span>
<span data-ttu-id="05add-725">其中一個高可用性 (HA) hello 方法是 SQL Server 記錄傳送。</span><span class="sxs-lookup"><span data-stu-id="05add-725">One of hello methods of high availability (HA) is SQL Server Log Shipping.</span></span> <span data-ttu-id="05add-726">如果 hello 參與 hello HA 組態的 Vm 具有運作中的名稱解析，沒有任何問題，並在 Azure 中的 hello 安裝程式沒有差別是在內部部署的任何設定。</span><span class="sxs-lookup"><span data-stu-id="05add-726">If hello VMs participating in hello HA configuration have working name resolution, there is no problem and hello setup in Azure will not differ from any setup that is done on-premises.</span></span> <span data-ttu-id="05add-727">不建議 toorely 上只有 IP 解析。</span><span class="sxs-lookup"><span data-stu-id="05add-727">It is not recommended toorely on IP resolution only.</span></span> <span data-ttu-id="05add-728">設定記錄傳送和 hello 記錄傳送原則的相關事宜 toosetting，請參閱這份文件：</span><span class="sxs-lookup"><span data-stu-id="05add-728">In regards toosetting up Log Shipping and hello principles around Log Shipping please check this documentation:</span></span>

<span data-ttu-id="05add-729"><https://technet.microsoft.com/library/ms187103.aspx></span><span class="sxs-lookup"><span data-stu-id="05add-729"><https://technet.microsoft.com/library/ms187103.aspx></span></span>

<span data-ttu-id="05add-730">順序 tooreally 達成任何高可用性，您需要 toodeploy hello 是中的這類記錄傳送組態 toobe 內 hello 相同 Azure 可用性設定組的 Vm。</span><span class="sxs-lookup"><span data-stu-id="05add-730">In order tooreally achieve any high availability, one needs toodeploy hello VMs which are within such a Log Shipping configuration toobe within hello same Azure Availability Set.</span></span>

#### <a name="database-mirroring"></a><span data-ttu-id="05add-731">資料庫鏡像</span><span class="sxs-lookup"><span data-stu-id="05add-731">Database Mirroring</span></span>
<span data-ttu-id="05add-732">SAP 支援的資料庫鏡像 (請參閱 SAP 附註[965908]) 依賴定義 hello SAP 連接字串中的容錯移轉夥伴。</span><span class="sxs-lookup"><span data-stu-id="05add-732">Database Mirroring as supported by SAP (see SAP Note [965908]) relies on defining a failover partner in hello SAP connection string.</span></span> <span data-ttu-id="05add-733">Hello 跨單位的情況下，我們假設兩個 Vm 位於 hello 該 hello 相同的網域下執行 hello 使用者內容 hello 兩個 SQL Server 執行個體，網域使用者，以及和是相關的 hello 兩個 SQL Server 執行個體中有足夠的權限。</span><span class="sxs-lookup"><span data-stu-id="05add-733">For hello Cross-Premises cases, we assume that hello two VMs are in hello same domain and that hello user context hello two SQL Server instances are running under are domain users as well and have sufficient privileges in hello two SQL Server instances involved.</span></span> <span data-ttu-id="05add-734">因此，資料庫鏡像在 Azure 中的 hello 安裝程式會相同典型的內部部署安裝程式組態。</span><span class="sxs-lookup"><span data-stu-id="05add-734">Therefore, hello setup of Database Mirroring in Azure does not differ between a typical on-premises setup/configuration.</span></span>

<span data-ttu-id="05add-735">為僅限雲端部署的 hello 簡單的方法是 toohave 另一個網域安裝程式在 Azure toohave 那些 DBMS Vm （和最好是專用的 SAP Vm） 單一網域內。</span><span class="sxs-lookup"><span data-stu-id="05add-735">As of Cloud-Only deployments, hello easiest method is toohave another domain setup in Azure toohave those DBMS VMs (and ideally dedicated SAP VMs) within one domain.</span></span>

<span data-ttu-id="05add-736">如果網域不可行，其中也可以使用憑證 hello 資料庫鏡像端點，如下所述： <https://technet.microsoft.com/library/ms191477.aspx></span><span class="sxs-lookup"><span data-stu-id="05add-736">If a domain is not possible, one can also use certificates for hello database mirroring endpoints as described here: <https://technet.microsoft.com/library/ms191477.aspx></span></span>

<span data-ttu-id="05add-737">教學課程 tooset 向上資料庫鏡像在 Azure 中可以在這裡找到： <https://technet.microsoft.com/library/ms189852.aspx></span><span class="sxs-lookup"><span data-stu-id="05add-737">A tutorial tooset-up Database Mirroring in Azure can be found here: <https://technet.microsoft.com/library/ms189852.aspx></span></span>

#### <a name="alwayson"></a><span data-ttu-id="05add-738">AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="05add-738">AlwaysOn</span></span>
<span data-ttu-id="05add-739">因為 SAP 內部部署環境支援 AlwaysOn (請參閱 SAP 附註[1772688])，它是用於結合，以在 Azure 中 SAP 支援的 toobe。</span><span class="sxs-lookup"><span data-stu-id="05add-739">As AlwaysOn is supported for SAP on-premises (see SAP Note [1772688]), it is supported toobe used in combination with SAP in Azure.</span></span> <span data-ttu-id="05add-740">您不能共用的 toocreate 磁碟在 Azure 中的 hello 事實並不表示其中一個無法建立 AlwaysOn Windows Server 容錯移轉叢集 (WSFC) 之間的設定不同的 Vm。</span><span class="sxs-lookup"><span data-stu-id="05add-740">hello fact that you are not able toocreate shared disks in Azure doesn’t mean that one can’t create an AlwaysOn Windows Server Failover Cluster (WSFC) configuration between different VMs.</span></span> <span data-ttu-id="05add-741">這只表示，您不需要 hello 可能性 toouse 共用的磁碟做為仲裁 hello 叢集組態中。</span><span class="sxs-lookup"><span data-stu-id="05add-741">It only means that you do not have hello possibility toouse a shared disk as a quorum in hello cluster configuration.</span></span> <span data-ttu-id="05add-742">因此您可以建置在 Azure 中的 AlwaysOn WSFC 組態和只要不選取利用共用的磁碟的 hello 仲裁類型。</span><span class="sxs-lookup"><span data-stu-id="05add-742">Hence you can build an AlwaysOn WSFC configuration in Azure and simply not select hello quorum type that utilizes shared disk.</span></span> <span data-ttu-id="05add-743">hello Azure 環境來部署那些 Vm 中依名稱 hello Vm 再 hello Vm 應該在 hello 應該可以解決相同的網域。</span><span class="sxs-lookup"><span data-stu-id="05add-743">hello Azure environment those VMs are deployed in should resolve hello VMs by name and hello VMs should be in hello same domain.</span></span> <span data-ttu-id="05add-744">這適用於僅限 Azure 和跨單位部署。</span><span class="sxs-lookup"><span data-stu-id="05add-744">This is true for Azure only and Cross-Premises deployments.</span></span> <span data-ttu-id="05add-745">有一些特殊考量部署 hello SQL Server 可用性群組接聽程式 (不 toobe 與 hello Azure 可用性設定組混淆) 因為 toosimply 因為 Azure 在此時間點不允許建立 AD/DNS 物件內部部署。</span><span class="sxs-lookup"><span data-stu-id="05add-745">There are some special considerations around deploying hello SQL Server Availability Group Listener (not toobe confused with hello Azure Availability Set) since Azure at this point in time does not allow toosimply create an AD/DNS object as it is possible on-premises.</span></span> <span data-ttu-id="05add-746">因此，執行一些不同的安裝步驟是必要 tooovercome Azure 的 hello 特定行為。</span><span class="sxs-lookup"><span data-stu-id="05add-746">Therefore, some different installation steps are necessary tooovercome hello specific behavior of Azure.</span></span>

<span data-ttu-id="05add-747">以下是使用可用性群組接聽程式的一些考量︰</span><span class="sxs-lookup"><span data-stu-id="05add-747">Some considerations using an Availability Group Listener are:</span></span>

* <span data-ttu-id="05add-748">使用可用性群組接聽程式只適用於 Windows Server 2012 或 Windows Server 2012 R2 做為客體作業系統的 hello VM。</span><span class="sxs-lookup"><span data-stu-id="05add-748">Using an Availability Group Listener is only possible with Windows Server 2012 or Windows Server 2012 R2 as guest OS of hello VM.</span></span> <span data-ttu-id="05add-749">適用於 Windows Server 2012 中，您必須確保已套用這個修補程式 toomake: <https://support.microsoft.com/kb/2854082></span><span class="sxs-lookup"><span data-stu-id="05add-749">For Windows Server 2012 you need toomake sure that this patch is applied: <https://support.microsoft.com/kb/2854082></span></span>
* <span data-ttu-id="05add-750">針對 Windows Server 2008 R2 本修補檔不存在，且必須 AlwaysOn toobe 用於 hello 相同做為資料庫鏡像的方式指定 hello 連接字串中的容錯移轉夥伴 （完成透過 hello SAP default.pfl 參數 dbs/mss/server – 請參閱 SAP 附註[965908])。</span><span class="sxs-lookup"><span data-stu-id="05add-750">For Windows Server 2008 R2 this patch does not exist and AlwaysOn would need toobe used in hello same manner as Database Mirroring by specifying a failover partner in hello connections string (done through hello SAP default.pfl parameter dbs/mss/server – see SAP Note [965908]).</span></span>
* <span data-ttu-id="05add-751">當使用可用性群組接聽程式、 hello 資料庫 Vm 需要連接 toobe tooa 專用負載平衡器。</span><span class="sxs-lookup"><span data-stu-id="05add-751">When using an Availability Group Listener, hello Database VMs need toobe connected tooa dedicated Load Balancer.</span></span> <span data-ttu-id="05add-752">名稱解析，僅限雲端部署中的可能會需要 SAP 系統的所有 Vm （應用程式伺服器、 DBMS 伺服器和 (A) SCS 伺服器） 是在 hello 相同虛擬網路，或都需要從 hello etc\host 檔案中的 SAP 應用程式層 hello 維護順序 tooget hello VM 的名稱解析的 hello SQL Server Vm。</span><span class="sxs-lookup"><span data-stu-id="05add-752">Name resolution in Cloud-Only deployments would either require all VMs of an SAP system (application servers, DBMS server and (A)SCS server) are in hello same virtual network or would require from an SAP application layer hello maintenance of hello etc\host file in order tooget hello VM names of hello SQL Server VMs resolved.</span></span> <span data-ttu-id="05add-753">順序 tooavoid Azure 指派新的 IP 位址，在其中兩個 Vm 都關機的情況下，在其中一個應該指派靜態 IP 位址 （定義靜態 IP 位址所述的 hello AlwaysOn 組態中的那些 Vm toohello 網路介面[這][ virtual-networks-reserved-private-ip]文章)</span><span class="sxs-lookup"><span data-stu-id="05add-753">In order tooavoid that Azure is assigning new IP addresses in cases where both VMs incidentally are shutdown, one should assign static IP addresses toohello network interfaces of those VMs in hello AlwaysOn configuration (defining a static IP address is described in [this][virtual-networks-reserved-private-ip] article)</span></span>

[comment]: <> (舊部落格)
[comment]: <> (<https://blogs.msdn.com/b/alwaysonpro/archive/2014/08/29/recommendations-and-best-practices-when-deploying-sql-server-alwayson-availability-groups-in-windows-azure-iaas.aspx>, <https://blogs.technet.com/b/rmilne/archive/2015/07/27/how-to-set-static-ip-on-azure-vm.aspx>)
* <span data-ttu-id="05add-756">不需要建置 hello WSFC 叢集組態中的 hello 叢集需要特殊的 IP 位址指派時，因為 Azure 及其目前功能會指派 hello 叢集名稱的特殊步驟 hello hello 節點 hello 叢集相同的 IP 位址上建立。</span><span class="sxs-lookup"><span data-stu-id="05add-756">There are special steps required when building hello WSFC cluster configuration where hello cluster needs a special IP address assigned, because Azure with its current functionality would assign hello cluster name hello same IP address as hello node hello cluster is created on.</span></span> <span data-ttu-id="05add-757">這表示手動步驟必須是執行的 tooassign 不同的 IP 位址 toohello 叢集。</span><span class="sxs-lookup"><span data-stu-id="05add-757">This means a manual step must be performed tooassign a different IP address toohello cluster.</span></span>
* <span data-ttu-id="05add-758">hello 可用性群組接聽程式正在 toobe 在 Azure 中建立具有 TCP/IP 端點指派 toohello Vm 執行 hello hello 可用性群組的主要和次要複本。</span><span class="sxs-lookup"><span data-stu-id="05add-758">hello Availability Group Listener is going toobe created in Azure with TCP/IP endpoints which are assigned toohello VMs running hello primary and secondary replicas of hello Availability group.</span></span>
* <span data-ttu-id="05add-759">可能有需要 toosecure 這些端點，其中包含 Acl。</span><span class="sxs-lookup"><span data-stu-id="05add-759">There might be a need toosecure these endpoints with ACLs.</span></span>

[comment]: <> (TODO 舊部落格)
[comment]: <> (hello 詳細的步驟和逐步解說 hello 教學課程可以使用 [here][virtual-machines-windows-classic-ps-sql-alwayson-availability-groups] 時，最佳遇到必要條件安裝在 Azure 上的 AlwaysOn 組態)
[comment]: <> (預先設定透過 hello Azure 組件庫的 AlwaysOn 安裝程式 < https://blogs.technet.com/b/dataplatforminsider/archive/2014/08/25/sql-server-alwayson-offering-in-microsoft-azure-portal-gallery.aspx>)
[comment]: <> ([這個][virtual-machines-windows-classic-ps-sql-int-listener] 教學課程提供建立「可用性群組接聽程式」的最佳說明)
[comment]: <> (以下提供使用 ACL 來保護網路端點的最佳說明：)
[comment]: <> (*    <https://michaelwasham.com/windows-azure-powershell-reference-guide/network-access-control-list-capability-in-windows-azure-powershell/>)
[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/08/31/weekend-scripter-creating-acls-for-windows-azure-endpoints-part-1-of-2.aspx> )
[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/09/01/weekend-scripter-creating-acls-for-windows-azure-endpoints-part-2-of-2.aspx>)  
[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/09/18/creating-acls-for-windows-azure-endpoints.aspx>)

<span data-ttu-id="05add-769">透過不同的 Azure 區域也是可能 toodeploy SQL Server AlwaysOn 可用性群組。</span><span class="sxs-lookup"><span data-stu-id="05add-769">It is possible toodeploy a SQL Server AlwaysOn Availability Group over different Azure Regions as well.</span></span> <span data-ttu-id="05add-770">這項功能將會利用 hello Azure 是 「 VNet 對 Vnet 連線能力 ([詳細][virtual-networks-configure-vnet-to-vnet-connection])。</span><span class="sxs-lookup"><span data-stu-id="05add-770">This functionality will leverage hello Azure VNet-to-Vnet connectivity ([more details][virtual-networks-configure-vnet-to-vnet-connection]).</span></span>

[comment]: <> (TODO 舊部落格)
[comment]: <> (此處所述的 SQL Server AlwaysOn 可用性群組在此案例中的 hello 安裝程式： < https://blogs.technet.com/b/dataplatforminsider/archive/2014/06/19/sql-server-alwayson-availability-groups-supported-between-microsoft-azure-regions.aspx>。)

#### <a name="summary-on-sql-server-high-availability-in-azure"></a><span data-ttu-id="05add-773">Azure 中 SQL Server 高可用性的摘要</span><span class="sxs-lookup"><span data-stu-id="05add-773">Summary on SQL Server High Availability in Azure</span></span>
<span data-ttu-id="05add-774">指定 Azure 儲存體會保護 hello 內容 hello 事實，沒有一個較少因此 tooinsist 熱待命映像。</span><span class="sxs-lookup"><span data-stu-id="05add-774">Given hello fact that Azure Storage is protecting hello content, there is one less reason tooinsist on a hot-standby image.</span></span> <span data-ttu-id="05add-775">這表示您的高可用性案例需要 tooonly 防範 hello 下列案例：</span><span class="sxs-lookup"><span data-stu-id="05add-775">This means your High Availability scenario needs tooonly protect against hello following cases:</span></span>

* <span data-ttu-id="05add-776">因為在 Azure 中的 hello 伺服器叢集上 toomaintenance 或其他原因整個 hello VM 無法使用</span><span class="sxs-lookup"><span data-stu-id="05add-776">Unavailability of hello VM as a whole due toomaintenance on hello server cluster in Azure or other reasons</span></span>
* <span data-ttu-id="05add-777">Hello SQL Server 執行個體中的軟體問題</span><span class="sxs-lookup"><span data-stu-id="05add-777">Software issues in hello SQL Server instance</span></span>
* <span data-ttu-id="05add-778">防止發生資料遭到刪除而需要進行時間點復原的手動錯誤</span><span class="sxs-lookup"><span data-stu-id="05add-778">Protecting from manual error where data gets deleted and point-in-time recovery is needed</span></span>

<span data-ttu-id="05add-779">尋找符合綜觀 hello 前兩個案例可以依照資料庫鏡像或 AlwaysOn，而第三個案例的 hello 只可以涵蓋記錄傳送的技術。</span><span class="sxs-lookup"><span data-stu-id="05add-779">Looking at matching technologies one can argue that hello first two cases can be covered by Database Mirroring or AlwaysOn, whereas hello third case only can be covered by Log-Shipping.</span></span>

<span data-ttu-id="05add-780">您將需要 toobalance hello 更複雜的設定 AlwaysOn，比較 tooDatabase 的鏡像，與 hello AlwaysOn 的優點。</span><span class="sxs-lookup"><span data-stu-id="05add-780">You will need toobalance hello more complex setup of AlwaysOn, compared tooDatabase Mirroring, with hello advantages of AlwaysOn.</span></span> <span data-ttu-id="05add-781">以下列出這些優點︰</span><span class="sxs-lookup"><span data-stu-id="05add-781">Those advantages can be listed like:</span></span>

* <span data-ttu-id="05add-782">可讀取的次要複本。</span><span class="sxs-lookup"><span data-stu-id="05add-782">Readable secondary replicas.</span></span>
* <span data-ttu-id="05add-783">來自次要複本的備份。</span><span class="sxs-lookup"><span data-stu-id="05add-783">Backups from secondary replicas.</span></span>
* <span data-ttu-id="05add-784">延展性較佳。</span><span class="sxs-lookup"><span data-stu-id="05add-784">Better scalability.</span></span>
* <span data-ttu-id="05add-785">一個以上的次要複本。</span><span class="sxs-lookup"><span data-stu-id="05add-785">More than one secondary replicas.</span></span>

### <span data-ttu-id="05add-786"><a name="9053f720-6f3b-4483-904d-15dc54141e30"></a>適用於 Azure 上 SAP 的一般 SQL Server 摘要</span><span class="sxs-lookup"><span data-stu-id="05add-786"><a name="9053f720-6f3b-4483-904d-15dc54141e30"></a>General SQL Server for SAP on Azure Summary</span></span>
<span data-ttu-id="05add-787">本指南中提供許多建議，而我們建議您在規劃 Azure 部署之前，多次閱讀本指南。</span><span class="sxs-lookup"><span data-stu-id="05add-787">There are many recommendations in this guide and we recommend you read it more than once before planning your Azure deployment.</span></span> <span data-ttu-id="05add-788">一般情況下，不過，是確定 toofollow hello Azure 的特定點上的前十個一般 DBMS:</span><span class="sxs-lookup"><span data-stu-id="05add-788">In general, though, be sure toofollow hello top ten general DBMS on Azure specific points:</span></span>

[comment]: <> (2.3 輸送量比什麼更高？比一個 VHD 高？)
1. <span data-ttu-id="05add-790">使用 hello 最新 DBMS 版本中的，像是 SQL Server 2014 中，在 Azure 中具有 hello 大部分優點。</span><span class="sxs-lookup"><span data-stu-id="05add-790">Use hello latest DBMS release, like SQL Server 2014, that has hello most advantages in Azure.</span></span> <span data-ttu-id="05add-791">SQL Server，這是備份的 SQL Server 2012 SP1 CU4 會包括 hello 與 Azure 儲存體功能。</span><span class="sxs-lookup"><span data-stu-id="05add-791">For SQL Server, this is SQL Server 2012 SP1 CU4 which would include hello feature of backing up against Azure Storage.</span></span> <span data-ttu-id="05add-792">不過，與 SAP 一起建議至少 SQL Server 2014 SP1 CU1 或 SQL Server 2012 SP2 和 hello 的最新 CU。</span><span class="sxs-lookup"><span data-stu-id="05add-792">However, in conjunction with SAP we would recommend at least SQL Server 2014 SP1 CU1 or SQL Server 2012 SP2 and hello latest CU.</span></span>
2. <span data-ttu-id="05add-793">請仔細規劃 SAP 系統版圖中 Azure toobalance hello 資料檔案配置和 Azure 限制：</span><span class="sxs-lookup"><span data-stu-id="05add-793">Carefully plan your SAP system landscape in Azure toobalance hello data file layout and Azure restrictions:</span></span>
   * <span data-ttu-id="05add-794">不需要太多 Vhd，但有足夠 tooensure 可以連線到您所需的 IOPS。</span><span class="sxs-lookup"><span data-stu-id="05add-794">Don’t have too many VHDs, but have enough tooensure you can reach your required IOPS.</span></span>
   * <span data-ttu-id="05add-795">請記住，每個「Azure 儲存體帳戶」也都有 IOPS 限制，而且「儲存體帳戶」在每個 Azure 訂用帳戶內是有限的 ([更多詳細資料][azure-subscription-service-limits])。</span><span class="sxs-lookup"><span data-stu-id="05add-795">Remember that IOPS are also limited per Azure Storage Account and that Storage Accounts are limited within each Azure subscription ([more details][azure-subscription-service-limits]).</span></span>
   * <span data-ttu-id="05add-796">只有等量磁碟區跨 Vhd，如果您需要 tooachieve 較高的輸送量。</span><span class="sxs-lookup"><span data-stu-id="05add-796">Only stripe across VHDs if you need tooachieve a higher throughput.</span></span>
3. <span data-ttu-id="05add-797">永不安裝軟體，或將需要 hello D:\ 磁碟機上的持續性，因為它是不是永久性，而且此磁碟機上的任何項目將會遺失在重新啟動 Windows 之後的任何檔案。</span><span class="sxs-lookup"><span data-stu-id="05add-797">Never install software or put any files that require persistence on hello D:\ drive as it is non-permanent and anything on this drive will be lost at a Windows reboot.</span></span>
4. <span data-ttu-id="05add-798">不要針對 Azure 標準儲存體使用 Azure VHD 快取。</span><span class="sxs-lookup"><span data-stu-id="05add-798">Don’t use Azure VHD caching for Azure Standard Storage.</span></span>
5. <span data-ttu-id="05add-799">不要使用 Azure 異地備援的儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="05add-799">Don’t use Azure geo-replicated Storage Accounts.</span></span>  <span data-ttu-id="05add-800">針對 DBMS 工作負載使用本機備援。</span><span class="sxs-lookup"><span data-stu-id="05add-800">Use Locally Redundant for DBMS workloads.</span></span>
6. <span data-ttu-id="05add-801">使用 DBMS 廠商的 HA/DR 解決方案 tooreplicate 資料庫資料。</span><span class="sxs-lookup"><span data-stu-id="05add-801">Use your DBMS vendor’s HA/DR solution tooreplicate database data.</span></span>
7. <span data-ttu-id="05add-802">一律使用名稱解析，不要依賴 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="05add-802">Always use Name Resolution, don’t rely on IP addresses.</span></span>
8. <span data-ttu-id="05add-803">使用 hello 高的資料庫壓縮可能。</span><span class="sxs-lookup"><span data-stu-id="05add-803">Use hello highest database compression possible.</span></span> <span data-ttu-id="05add-804">針對 SQL Server 而言，此為頁面壓縮。</span><span class="sxs-lookup"><span data-stu-id="05add-804">For SQL Server this is page compression.</span></span>
9. <span data-ttu-id="05add-805">請小心使用 SQL Server 映像從 hello Azure Marketplace。</span><span class="sxs-lookup"><span data-stu-id="05add-805">Be careful using SQL Server images from hello Azure Marketplace.</span></span> <span data-ttu-id="05add-806">如果您使用 hello 其中一個 SQL Server，您必須變更 hello 執行個體定序，才能在其上安裝任何 SAP NetWeaver 系統。</span><span class="sxs-lookup"><span data-stu-id="05add-806">If you use hello SQL Server one, you must change hello instance collation before installing any SAP NetWeaver system on it.</span></span>
10. <span data-ttu-id="05add-807">安裝及設定中所述的 SAP Host Monitoring for Azure 的 hello[部署指南 》][deployment-guide]。</span><span class="sxs-lookup"><span data-stu-id="05add-807">Install and configure hello SAP Host Monitoring for Azure as described in [Deployment Guide][deployment-guide].</span></span>

## <a name="specifics-toosap-ase-on-windows"></a><span data-ttu-id="05add-808">細節 tooSAP Windows 上 ASE</span><span class="sxs-lookup"><span data-stu-id="05add-808">Specifics tooSAP ASE on Windows</span></span>
<span data-ttu-id="05add-809">開始使用 Microsoft Azure，您可以輕鬆地移轉您現有的 SAP ASE 應用程式 tooAzure 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="05add-809">Starting with Microsoft Azure, you can easily migrate your existing SAP ASE applications tooAzure Virtual Machines.</span></span> <span data-ttu-id="05add-810">虛擬機器中的 SAP ASE 可輕鬆地將移轉這些應用程式 tooMicrosoft Azure 讓您 tooreduce hello 擁有權總成本的部署、 管理和維護的企業廣度應用程式。</span><span class="sxs-lookup"><span data-stu-id="05add-810">SAP ASE in a Virtual Machine enables you tooreduce hello total cost of ownership of deployment, management and maintenance of enterprise breadth applications by easily migrating these applications tooMicrosoft Azure.</span></span> <span data-ttu-id="05add-811">透過 SAP ASE Azure 虛擬機器中，系統管理員和開發人員仍然可以使用的 hello 可用的相同開發和管理工具內部。</span><span class="sxs-lookup"><span data-stu-id="05add-811">With SAP ASE in an Azure Virtual Machine, administrators and developers can still use hello same development and administration tools that are available on-premises.</span></span>

<span data-ttu-id="05add-812">Hello 可以在這裡找到 Azure 虛擬機器的 sla: <https://azure.microsoft.com/support/legal/sla></span><span class="sxs-lookup"><span data-stu-id="05add-812">There is an SLA for hello Azure Virtual Machines which can be found here: <https://azure.microsoft.com/support/legal/sla></span></span>

<span data-ttu-id="05add-813">我們確信 Microsoft Azure 代管的虛擬機器將會執行地很好比較 tooother 公用雲端虛擬化方案，但是個別結果中，可能會不同。</span><span class="sxs-lookup"><span data-stu-id="05add-813">We are confident that Microsoft Azure hosted Virtual Machines will perform very well in comparison tooother public cloud virtualization offerings, but individual results may vary.</span></span> <span data-ttu-id="05add-814">SAP 調整大小的 SAPS 數字的不同 SAP 認證中個別的 SAP 附註將會提供 VM Sku 的 hello [1928533]。</span><span class="sxs-lookup"><span data-stu-id="05add-814">SAP sizing SAPS numbers of hello different SAP certified VM SKUs will be provided in a separate SAP Note [1928533].</span></span>

<span data-ttu-id="05add-815">陳述式和 Azure 儲存體、 SAP 部署 Vm 或 SAP Monitoring 的建議考慮 toohello 使用量套用 toodeployments 的 SAP ASE 搭配述整個 hello 的這份文件的前四個章節的 SAP 應用程式。</span><span class="sxs-lookup"><span data-stu-id="05add-815">Statements and recommendations in regard toohello usage of Azure Storage, Deployment of SAP VMs or SAP Monitoring apply toodeployments of SAP ASE in conjunction with SAP applications as stated throughout hello first four chapters of this document.</span></span>

### <a name="sap-ase-version-support"></a><span data-ttu-id="05add-816">SAP ASE 版本支援</span><span class="sxs-lookup"><span data-stu-id="05add-816">SAP ASE Version Support</span></span>
<span data-ttu-id="05add-817">SAP 目前支援 SAP ASE 版本 16.0，可與 SAP 商務套件產品搭配使用。</span><span class="sxs-lookup"><span data-stu-id="05add-817">SAP currently supports SAP ASE version 16.0 for use with SAP Business Suite products.</span></span> <span data-ttu-id="05add-818">SAP ASE 伺服器、 或 JDBC 和 ODBC 驅動程式 toobe SAP Business Suite 等作業只透過所提供的產品搭配使用的所有更新都 hello 在 SAP 服務 Marketplace: <https://support.sap.com/swdc>。</span><span class="sxs-lookup"><span data-stu-id="05add-818">All updates for SAP ASE server, or JDBC and ODBC drivers toobe used with SAP Business Suite products are provided solely through hello SAP Service Marketplace at: <https://support.sap.com/swdc>.</span></span>

<span data-ttu-id="05add-819">安裝與內部部署，不要直接從 Sybase 網站下載更新 hello SAP ASE 伺服器或 hello JDBC 和 ODBC 驅動程式。</span><span class="sxs-lookup"><span data-stu-id="05add-819">As for installations on-premises, do not download updates for hello SAP ASE server, or for hello JDBC and ODBC drivers directly from Sybase websites.</span></span> <span data-ttu-id="05add-820">支援使用 SAP Business Suite 產品在內部部署與 Azure 虛擬機器中的修補程式的詳細資訊，請參閱下列 「 SAP 附註的 hello:</span><span class="sxs-lookup"><span data-stu-id="05add-820">For detailed information on patches which are supported for use with SAP Business Suite products on-premises and in Azure Virtual Machines see hello following SAP Notes:</span></span>

* <span data-ttu-id="05add-821">[1590719]</span><span class="sxs-lookup"><span data-stu-id="05add-821">[1590719]</span></span>
* <span data-ttu-id="05add-822">[1973241]</span><span class="sxs-lookup"><span data-stu-id="05add-822">[1973241]</span></span>

<span data-ttu-id="05add-823">SAP ASE 上執行 SAP Business Suite 的一般資訊位於 hello [SCN](https://scn.sap.com/community/ase)</span><span class="sxs-lookup"><span data-stu-id="05add-823">General information on running SAP Business Suite on SAP ASE can be found in hello [SCN](https://scn.sap.com/community/ase)</span></span>

### <a name="sap-ase-configuration-guidelines-for-sap-related-sap-ase-installations-in-azure-vms"></a><span data-ttu-id="05add-824">在 Azure VM 中安裝 SAP 相關之 SAP ASE 的 SAP ASE 組態指導方針</span><span class="sxs-lookup"><span data-stu-id="05add-824">SAP ASE Configuration Guidelines for SAP related SAP ASE Installations in Azure VMs</span></span>
#### <a name="structure-of-hello-sap-ase-deployment"></a><span data-ttu-id="05add-825">Hello SAP ASE 部署的結構</span><span class="sxs-lookup"><span data-stu-id="05add-825">Structure of hello SAP ASE Deployment</span></span>
<span data-ttu-id="05add-826">Hello 一般描述，根據 SAP ASE 可執行檔應該位於或安裝到 hello hello VM 基本 vhd 的系統磁碟機 (磁碟機 c:\)。</span><span class="sxs-lookup"><span data-stu-id="05add-826">In accordance with hello general description, SAP ASE executables should be located or installed into hello system drive of hello VM’s base VHD (drive c:\).</span></span> <span data-ttu-id="05add-827">一般而言，大部分的 hello SAP ASE 系統和工具資料庫可不真的利用硬 SAP NetWeaver 工作量。</span><span class="sxs-lookup"><span data-stu-id="05add-827">Typically, most of hello SAP ASE system and tools databases are not really leveraged hard by SAP NetWeaver workload.</span></span> <span data-ttu-id="05add-828">因此 hello 系統和工具的資料庫 （master、 model、 saptools、 sybmgmtdb、 sybsystemdb） 可留在 hello C:\drive 上。</span><span class="sxs-lookup"><span data-stu-id="05add-828">Hence hello system and tools databases (master, model, saptools, sybmgmtdb, sybsystemdb) can remain on hello C:\drive as well.</span></span>

<span data-ttu-id="05add-829">例外狀況可能是包含所有的工作資料表和暫存資料表建立的 SAP ASE 其中發生某些 SAP ERP 和所有 BW 工作量可能需要較高的資料量或 I/O 作業量，無法放入 hello 原始 hello 暫存資料庫VM 的基底 VHD (磁碟機 c:\)。</span><span class="sxs-lookup"><span data-stu-id="05add-829">An exception could be hello temporary database containing all work tables and temporary tables created by SAP ASE, which in case of some SAP ERP and all BW workloads might require either higher data volume or I/O operations volume which can’t fit into hello original VM’s base VHD (drive c:\).</span></span>

<span data-ttu-id="05add-830">根據 hello SAPInst/SWPM 使用新版 tooinstall hello 系統、 hello 資料庫可能包含：</span><span class="sxs-lookup"><span data-stu-id="05add-830">Depending on hello version of SAPInst/SWPM used tooinstall hello system, hello database might contain:</span></span>

* <span data-ttu-id="05add-831">安裝 SAP ASE 時建立單一的 SAP ASE tempdb</span><span class="sxs-lookup"><span data-stu-id="05add-831">A single SAP ASE tempdb which is created when installing SAP ASE</span></span>
* <span data-ttu-id="05add-832">建立藉由安裝 SAP ASE 和建立 hello SAP 安裝常式的其他 saptempdb SAP ASE tempdb</span><span class="sxs-lookup"><span data-stu-id="05add-832">An SAP ASE tempdb created by installing SAP ASE and an additional saptempdb created by hello SAP installation routine</span></span>
* <span data-ttu-id="05add-833">建立藉由安裝 SAP ASE 和手動建立額外的 tempdb SAP ASE tempdb (例如下列 「 SAP 附註[1752266]) toomeet ERP/BW 特定 tempdb 需求</span><span class="sxs-lookup"><span data-stu-id="05add-833">An SAP ASE tempdb created by installing SAP ASE and an additional tempdb that has been created manually (e.g. following SAP Note [1752266]) toomeet ERP/BW specific tempdb requirements</span></span>

<span data-ttu-id="05add-834">如果發生特定 ERP 或所有 BW 工作量合理，不管 tooperformance tookeep hello tempdb 裝置 hello 另外建立 tempdb （SWPM 或手動） 以外 C:\ 磁碟機上。</span><span class="sxs-lookup"><span data-stu-id="05add-834">In case of specific ERP or all BW workloads it makes sense, in regard tooperformance, tookeep hello tempdb devices of hello additionally created tempdb (by SWPM or manually) on a drive other than C:\.</span></span> <span data-ttu-id="05add-835">如果沒有其他的 tempdb 已存在，則建議一個 toocreate (SAP 附註[1752266])。</span><span class="sxs-lookup"><span data-stu-id="05add-835">If no additional tempdb exists it is recommended toocreate one (SAP Note [1752266]).</span></span>

<span data-ttu-id="05add-836">這類系統 hello 應該 hello 另外建立 tempdb 上執行下列步驟：</span><span class="sxs-lookup"><span data-stu-id="05add-836">For such systems hello following steps should be performed for hello additionally created tempdb:</span></span>

* <span data-ttu-id="05add-837">移動 hello 第一個 tempdb toohello 第一個裝置的 hello SAP 資料庫</span><span class="sxs-lookup"><span data-stu-id="05add-837">Move hello first tempdb device toohello first device of hello SAP database</span></span>
* <span data-ttu-id="05add-838">新增 tempdb 裝置 tooeach 的 hello Vhd，含 hello SAP 資料庫的裝置</span><span class="sxs-lookup"><span data-stu-id="05add-838">Add tempdb devices tooeach of hello VHDs containing a devices of hello SAP database</span></span>

<span data-ttu-id="05add-839">此設定可讓 tempdb tooeither 耗用較多的空間，比可以 tooprovide hello 系統磁碟機。</span><span class="sxs-lookup"><span data-stu-id="05add-839">This configuration enables tempdb tooeither consume more space than hello system drive is able tooprovide.</span></span> <span data-ttu-id="05add-840">做為參考其中一個可以檢查現有的系統執行內部部署的 hello tempdb 裝置大小。</span><span class="sxs-lookup"><span data-stu-id="05add-840">As a reference one can check hello tempdb device sizes on existing systems which run on-premises.</span></span> <span data-ttu-id="05add-841">或者，這種組態會啟用對 tempdb 無法隨附 hello 系統磁碟機的 IOPS 數目。</span><span class="sxs-lookup"><span data-stu-id="05add-841">Or such a configuration would enable IOPS numbers against tempdb which cannot be provided with hello system drive.</span></span> <span data-ttu-id="05add-842">再次執行內部部署的系統可以針對 tempdb 使用的 toomonitor I/O 工作負載。</span><span class="sxs-lookup"><span data-stu-id="05add-842">Again systems that are running on-premises can be used toomonitor I/O workload against tempdb.</span></span>

<span data-ttu-id="05add-843">永遠不會將任何 SAP ASE 裝置放置到 hello hello VM 的 D:\ 磁碟機。</span><span class="sxs-lookup"><span data-stu-id="05add-843">Never put any SAP ASE devices onto hello D:\ drive of hello VM.</span></span> <span data-ttu-id="05add-844">即使保留在 hello tempdb 中的 hello 物件只是暫時性的這也適用於 toohello tempdb。</span><span class="sxs-lookup"><span data-stu-id="05add-844">This also applies toohello tempdb, even if hello objects kept in hello tempdb are only temporary.</span></span>

#### <a name="impact-of-database-compression"></a><span data-ttu-id="05add-845">資料庫壓縮的影響</span><span class="sxs-lookup"><span data-stu-id="05add-845">Impact of Database Compression</span></span>
<span data-ttu-id="05add-846">在組態中的 I/O 頻寬可能會變成限制因素，每個量值可減少 IOPS 可能有助於 toostretch hello 工作負載一次可以執行像是 Azure IaaS 案例中。</span><span class="sxs-lookup"><span data-stu-id="05add-846">In configurations where I/O bandwidth can become a limiting factor, every measure which reduces IOPS might help toostretch hello workload one can run in an IaaS scenario like Azure.</span></span> <span data-ttu-id="05add-847">因此，強烈建議 toomake 確定 SAP ASE 壓縮會使用上傳現有的 SAP 資料庫 tooAzure 之前。</span><span class="sxs-lookup"><span data-stu-id="05add-847">Therefore, it is strongly recommended toomake sure that SAP ASE compression is used before uploading an existing SAP database tooAzure.</span></span>

<span data-ttu-id="05add-848">如果未實作上傳 tooAzure 之前 hello 建議 tooperform 壓縮是出於多種原因所造成：</span><span class="sxs-lookup"><span data-stu-id="05add-848">hello recommendation tooperform compression before uploading tooAzure if it is not already implemented is given out of several reasons:</span></span>

* <span data-ttu-id="05add-849">資料上傳 toobe tooAzure hello 量較低</span><span class="sxs-lookup"><span data-stu-id="05add-849">hello amount of data toobe uploaded tooAzure is lower</span></span>
* <span data-ttu-id="05add-850">hello hello 壓縮執行持續時間較短，假設有更多的 Cpu 或更高 I/O 頻寬或更少的 I/O 延遲內部部署可以使用更強的硬體</span><span class="sxs-lookup"><span data-stu-id="05add-850">hello duration of hello compression execution is shorter assuming that one can use stronger hardware with more CPUs or higher I/O bandwidth or less I/O latency on-premises</span></span>
* <span data-ttu-id="05add-851">較小的資料庫大小可能會導致 tooless 成本進行磁碟配置</span><span class="sxs-lookup"><span data-stu-id="05add-851">Smaller database sizes might lead tooless costs for disk allocation</span></span>

<span data-ttu-id="05add-852">資料壓縮和 LOB 壓縮可以在 Azure 虛擬機器上裝載的 VM 中運作，如同它在內部部署中的運作方式。</span><span class="sxs-lookup"><span data-stu-id="05add-852">Data- and LOB-Compression work in a VM hosted in Azure Virtual Machines as it does on-premises.</span></span> <span data-ttu-id="05add-853">如需有關如何 toocheck 如果壓縮已在使用中現有的 SAP ASE 資料庫請檢查 SAP Note [1750510]。</span><span class="sxs-lookup"><span data-stu-id="05add-853">For more details on how toocheck if compression is already in use in an existing SAP ASE database please check SAP Note [1750510].</span></span>

#### <a name="using-dbacockpit-toomonitor-database-instances"></a><span data-ttu-id="05add-854">使用 DBACockpit toomonitor 資料庫執行個體</span><span class="sxs-lookup"><span data-stu-id="05add-854">Using DBACockpit toomonitor Database Instances</span></span>
<span data-ttu-id="05add-855">適用於 SAP 系統做為資料庫平台使用 SAP ASE hello DBACockpit 存取。 為交易 DBACockpit 中內嵌的瀏覽器視窗或 Webdynpro</span><span class="sxs-lookup"><span data-stu-id="05add-855">For SAP systems which are using SAP ASE as database platform, hello DBACockpit is accessible as embedded browser windows in transaction DBACockpit or as Webdynpro.</span></span> <span data-ttu-id="05add-856">不過 hello 完整功能，以監視並管理 hello 資料庫可用於只 hello DBACockpit hello Webdynpro 實作。</span><span class="sxs-lookup"><span data-stu-id="05add-856">However hello full functionality for monitoring and administering hello database is available in hello Webdynpro implementation of hello DBACockpit only.</span></span>

<span data-ttu-id="05add-857">在內部部署與執行數個步驟的系統必須 tooenable hello DBACockpit hello Webdynpro 實作所使用的所有 SAP NetWeaver 功能。</span><span class="sxs-lookup"><span data-stu-id="05add-857">As with on-premises systems several steps are required tooenable all SAP NetWeaver functionality used by hello Webdynpro implementation of hello DBACockpit.</span></span> <span data-ttu-id="05add-858">請依照 SAP Note [1245200] tooenable hello webdynpros 的使用方式，並產生 hello 必要的。</span><span class="sxs-lookup"><span data-stu-id="05add-858">Please follow SAP Note [1245200] tooenable hello usage of webdynpros and generate hello required ones.</span></span> <span data-ttu-id="05add-859">當上述資訊，您也會設定 hello 網際網路通訊管理員 (icm) 以及 hello 連接埠 toobe hello 中的下列 hello 指示用於 http 和 https 連線。</span><span class="sxs-lookup"><span data-stu-id="05add-859">When following hello instructions in hello above notes you will also configure hello Internet Communication Manager (icm) along with hello ports toobe used for http and https connections.</span></span> <span data-ttu-id="05add-860">hello http 的預設設定看起來像這樣：</span><span class="sxs-lookup"><span data-stu-id="05add-860">hello default setting for http looks like this:</span></span>

> <span data-ttu-id="05add-861">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="05add-861">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span></span>
>
> <span data-ttu-id="05add-862">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="05add-862">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span></span>
>
>

<span data-ttu-id="05add-863">和產生交易 DBACockpit 中的 hello 連結看起來類似 toothis:</span><span class="sxs-lookup"><span data-stu-id="05add-863">and hello links generated in transaction DBACockpit will look similar toothis:</span></span>

> <span data-ttu-id="05add-864">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="05add-864">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
> <span data-ttu-id="05add-865">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="05add-865">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
>

<span data-ttu-id="05add-866">取決於如何 hello Azure 虛擬機器裝載 hello SAP 系統連接的網站，透過多站台或 ExpressRoute （跨單位部署），您需要確定 toomake 該 ICM 可解析的完整主機名稱上使用 hello電腦嘗試 tooopen hello DBACockpit 從。</span><span class="sxs-lookup"><span data-stu-id="05add-866">Depending on if and how hello Azure Virtual Machine hosting hello SAP system is connected via site-to-site, multi-site or ExpressRoute (Cross-Premises deployment) you need toomake sure that ICM is using a fully qualified hostname that can be resolved on hello machine where you are trying tooopen hello DBACockpit from.</span></span> <span data-ttu-id="05add-867">請參閱 SAP 附註[773830] toounderstand ICM 如何決定 hello 取決於設定檔參數和 icm host_name_full 方式設定參數的完整的主機名稱明確必要。</span><span class="sxs-lookup"><span data-stu-id="05add-867">Please see SAP Note [773830] toounderstand how ICM determines hello fully qualified host name depending on profile parameters and set parameter icm/host_name_full explicitly if required.</span></span>

<span data-ttu-id="05add-868">如果您部署的 hello VM 在僅限雲端的情況下，不在內部部署與 Azure 之間的跨單位連線，您需要 toodefine，公用 IP 位址和 domainlabel 也一樣。</span><span class="sxs-lookup"><span data-stu-id="05add-868">If you deployed hello VM in a Cloud-Only scenario without cross-premises connectivity between on-premises and Azure, you need toodefine a public IP address and a domainlabel.</span></span> <span data-ttu-id="05add-869">hello hello 公用 DNS 名稱格式 hello VM 然後看起來像這樣：</span><span class="sxs-lookup"><span data-stu-id="05add-869">hello format of hello public DNS name of hello VM will then look like this :</span></span>

> <span data-ttu-id="05add-870">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span><span class="sxs-lookup"><span data-stu-id="05add-870">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span></span>
>
>

<span data-ttu-id="05add-871">可以找到 toohello DNS 名稱相關的更多詳細資料[這裡][virtual-machines-azurerm-versus-azuresm]。</span><span class="sxs-lookup"><span data-stu-id="05add-871">More details related toohello DNS name can be found [here][virtual-machines-azurerm-versus-azuresm].</span></span>

<span data-ttu-id="05add-872">設定 hello SAP 設定檔參數 icm/host_name_full toohello hello Azure VM hello 連結的 DNS 名稱可能類似於：</span><span class="sxs-lookup"><span data-stu-id="05add-872">Setting hello SAP profile parameter icm/host_name_full toohello DNS name of hello Azure VM hello link might look similar to:</span></span>

> <span data-ttu-id="05add-873">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="05add-873">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
> <span data-ttu-id="05add-874">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="05add-874">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
>

<span data-ttu-id="05add-875">在此情況下您需要 toomake 務必：</span><span class="sxs-lookup"><span data-stu-id="05add-875">In this case you need toomake sure to:</span></span>

* <span data-ttu-id="05add-876">新增輸入的規則 toohello 網路安全性群組中的 hello TCP/IP 通訊埠的 hello Azure 入口網站使用 icm toocommunicate</span><span class="sxs-lookup"><span data-stu-id="05add-876">Add Inbound rules toohello Network Security Group in hello Azure Portal for hello TCP/IP ports used toocommunicate with ICM</span></span>
* <span data-ttu-id="05add-877">新增輸入的規則以 hello ICM hello TCP/IP 連接埠使用 toocommunicate 的 toohello Windows 防火牆設定</span><span class="sxs-lookup"><span data-stu-id="05add-877">Add Inbound rules toohello Windows Firewall configuration for hello TCP/IP ports used toocommunicate with hello ICM</span></span>

<span data-ttu-id="05add-878">建議您使用自動匯入的所有可用的更正，tooperiodically 套用 hello 更正集合 SAP 附註適用於 tooyour SAP 版本：</span><span class="sxs-lookup"><span data-stu-id="05add-878">For an automated imported of all corrections available, it is recommended tooperiodically apply hello correction collection SAP Note applicable tooyour SAP version:</span></span>

* <span data-ttu-id="05add-879">[1558958]</span><span class="sxs-lookup"><span data-stu-id="05add-879">[1558958]</span></span>
* <span data-ttu-id="05add-880">[1619967]</span><span class="sxs-lookup"><span data-stu-id="05add-880">[1619967]</span></span>
* <span data-ttu-id="05add-881">[1882376]</span><span class="sxs-lookup"><span data-stu-id="05add-881">[1882376]</span></span>

<span data-ttu-id="05add-882">針對 SAP ASE DBA Cockpit 的進一步資訊位於下列 SAP 附註的 hello:</span><span class="sxs-lookup"><span data-stu-id="05add-882">Further information about DBA Cockpit for SAP ASE can be found in hello following SAP Notes:</span></span>

* <span data-ttu-id="05add-883">[1605680]</span><span class="sxs-lookup"><span data-stu-id="05add-883">[1605680]</span></span>
* <span data-ttu-id="05add-884">[1757924]</span><span class="sxs-lookup"><span data-stu-id="05add-884">[1757924]</span></span>
* <span data-ttu-id="05add-885">[1757928]</span><span class="sxs-lookup"><span data-stu-id="05add-885">[1757928]</span></span>
* <span data-ttu-id="05add-886">[1758182]</span><span class="sxs-lookup"><span data-stu-id="05add-886">[1758182]</span></span>
* <span data-ttu-id="05add-887">[1758496]</span><span class="sxs-lookup"><span data-stu-id="05add-887">[1758496]</span></span>    
* <span data-ttu-id="05add-888">[1814258]</span><span class="sxs-lookup"><span data-stu-id="05add-888">[1814258]</span></span>
* <span data-ttu-id="05add-889">[1922555]</span><span class="sxs-lookup"><span data-stu-id="05add-889">[1922555]</span></span>
* <span data-ttu-id="05add-890">[1956005]</span><span class="sxs-lookup"><span data-stu-id="05add-890">[1956005]</span></span>

#### <a name="backuprecovery-considerations-for-sap-ase"></a><span data-ttu-id="05add-891">SAP ASE 的備份/復原考量</span><span class="sxs-lookup"><span data-stu-id="05add-891">Backup/Recovery Considerations for SAP ASE</span></span>
<span data-ttu-id="05add-892">將 SAP ASE 部署至 Azure 時，必須檢閱您的備份方法。</span><span class="sxs-lookup"><span data-stu-id="05add-892">When deploying SAP ASE into Azure your backup methodology must be reviewed.</span></span> <span data-ttu-id="05add-893">即使 hello 系統不是生產系統，SAP ASE 所裝載的 hello SAP 資料庫必須定期備份。</span><span class="sxs-lookup"><span data-stu-id="05add-893">Even if hello system is not a productive system, hello SAP database hosted by SAP ASE must be backed up periodically.</span></span> <span data-ttu-id="05add-894">因為 Azure 儲存體會保留三個影像，備份現在是較不重要，尤其是尊重 toocompensating 儲存體損毀。</span><span class="sxs-lookup"><span data-stu-id="05add-894">Since Azure Storage keeps three images, a backup is now less important in respect toocompensating a storage crash.</span></span> <span data-ttu-id="05add-895">hello 維護適當的備份與還原計劃的主要原因是，您可以藉由提供時間復原功能的中點補償邏輯/手動錯誤有更多。</span><span class="sxs-lookup"><span data-stu-id="05add-895">hello primary reason for maintaining a proper backup and restore plan is more that you can compensate for logical/manual errors by providing point in time recovery capabilities.</span></span> <span data-ttu-id="05add-896">因此 hello 的目標是 tooeither 使用備份 toorestore hello 資料庫備份 tooa 特定點 Azure tooseed 中的時間或 toouse hello 備份中另一個系統複製 hello 現有的資料庫。</span><span class="sxs-lookup"><span data-stu-id="05add-896">So hello goal is tooeither use backups toorestore hello database back tooa certain point in time or toouse hello backups in Azure tooseed another system by copying hello existing database.</span></span> <span data-ttu-id="05add-897">例如，您無法從傳輸的 2 層 SAP 組態 tooa 3 層系統設定 hello 相同系統還原的備份。</span><span class="sxs-lookup"><span data-stu-id="05add-897">For example, you could transfer from a 2-Tier SAP configuration tooa 3-Tier system setup of hello same system by restoring a backup.</span></span>

<span data-ttu-id="05add-898">備份和還原 Azure 運作中的資料庫 hello 相同方式就如同內部部署。</span><span class="sxs-lookup"><span data-stu-id="05add-898">Backing up and restoring a database in Azure works hello same way as it does on-premises.</span></span> <span data-ttu-id="05add-899">請參閱 SAP 附註︰</span><span class="sxs-lookup"><span data-stu-id="05add-899">Please see SAP Notes:</span></span>

* <span data-ttu-id="05add-900">[1588316]</span><span class="sxs-lookup"><span data-stu-id="05add-900">[1588316]</span></span>
* <span data-ttu-id="05add-901">[1585981]</span><span class="sxs-lookup"><span data-stu-id="05add-901">[1585981]</span></span>

<span data-ttu-id="05add-902">以取得建立傾印組態和排程備份的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="05add-902">for details on creating dump configurations and scheduling backups.</span></span> <span data-ttu-id="05add-903">根據您的策略和需求，您可以設定資料庫和記錄檔傾印到其中一個現有的 Vhd 的 hello toodisk 或加入的額外 VHD hello 備份。</span><span class="sxs-lookup"><span data-stu-id="05add-903">Depending on your strategy and needs you can configure database and log dumps toodisk onto one of hello existing VHDs or add an additional VHD for hello backup.</span></span>  <span data-ttu-id="05add-904">tooreduce hello 危險資料遺失，就會發生錯誤的建議 toouse 沒有資料庫裝置所在位置的 VHD。</span><span class="sxs-lookup"><span data-stu-id="05add-904">tooreduce hello danger of data loss in case of an error it is recommended toouse a VHD where no database device is located.</span></span>

<span data-ttu-id="05add-905">除了資料壓縮與 LOB 壓縮之外，SAP ASE 也會提供備份壓縮。</span><span class="sxs-lookup"><span data-stu-id="05add-905">Besides data- and LOB compression SAP ASE also offers backup compression.</span></span> <span data-ttu-id="05add-906">與 hello 資料庫和記錄空間小於 toooccupy 傾印它建議 toouse 備份壓縮。</span><span class="sxs-lookup"><span data-stu-id="05add-906">toooccupy less space with hello database and log dumps it is recommended toouse backup compression.</span></span> <span data-ttu-id="05add-907">如需詳細資訊，請參閱 SAP 附註 [1588316] 。</span><span class="sxs-lookup"><span data-stu-id="05add-907">Please see SAP Note [1588316] for more information.</span></span> <span data-ttu-id="05add-908">壓縮 hello 備份也是重要的 tooreduce hello 數量資料 toobe 傳輸，如果您計劃 toodownload 備份或包含備份的傾印從 hello tooon 內部部署 Azure 虛擬機器的 Vhd。</span><span class="sxs-lookup"><span data-stu-id="05add-908">Compressing hello backup is also crucial tooreduce hello amount of data toobe transferred if you plan toodownload backups or VHDs containing backup dumps from hello Azure Virtual Machine tooon-premises.</span></span>

<span data-ttu-id="05add-909">請勿使用磁碟機 D:\ 做為資料庫或記錄傾印目的地。</span><span class="sxs-lookup"><span data-stu-id="05add-909">Do not use drive D:\ as database or log dump destination.</span></span>

#### <a name="performance-considerations-for-backupsrestores"></a><span data-ttu-id="05add-910">備份/還原的效能考量</span><span class="sxs-lookup"><span data-stu-id="05add-910">Performance Considerations for Backups/Restores</span></span>
<span data-ttu-id="05add-911">裸機部署，如同備份/還原效能是取決於磁碟區數目可以讀取以平行方式，而且這些磁碟區的哪些 hello 輸送量可能。</span><span class="sxs-lookup"><span data-stu-id="05add-911">As in bare-metal deployments, backup/restore performance is dependent on how many volumes can be read in parallel and what hello throughput of those volumes might be.</span></span> <span data-ttu-id="05add-912">此外，hello 備份壓縮所使用的 CPU 耗用量可能相當重要的角色上播放的 Vm 只向上 too8 CPU 執行緒。</span><span class="sxs-lookup"><span data-stu-id="05add-912">In addition, hello CPU consumption used by backup compression may play a significant role on VMs with just up too8 CPU threads.</span></span> <span data-ttu-id="05add-913">因此，您可以假設︰</span><span class="sxs-lookup"><span data-stu-id="05add-913">Therefore, one can assume:</span></span>

* <span data-ttu-id="05add-914">hello 較少的 Vhd hello 數目使用 toostore hello 資料庫裝置 hello 較小 hello 整體讀取輸送量</span><span class="sxs-lookup"><span data-stu-id="05add-914">hello fewer hello number of VHDs used toostore hello database devices, hello smaller hello overall throughput in reading</span></span>
* <span data-ttu-id="05add-915">hello 數目較少 hello hello VM 中的 CPU 執行緒、 hello 更嚴重 hello 備份壓縮的影響</span><span class="sxs-lookup"><span data-stu-id="05add-915">hello smaller hello number of CPU threads in hello VM, hello more severe hello impact of backup compression</span></span>
* <span data-ttu-id="05add-916">hello 較少 （等量磁碟區的目錄、 Vhd） 的目標 toowrite hello 備份、 hello 較小者 hello 輸送量</span><span class="sxs-lookup"><span data-stu-id="05add-916">hello fewer targets (Stripe Directories, VHDs) toowrite hello backup to, hello lesser hello throughput</span></span>

<span data-ttu-id="05add-917">目標 toowrite toothere tooincrease hello 數目是它可以是根據您的需求使用/結合兩個選項：</span><span class="sxs-lookup"><span data-stu-id="05add-917">tooincrease hello number of targets toowrite toothere are two options which can be used/combined depending on your needs:</span></span>

* <span data-ttu-id="05add-918">透過順序 tooimprove hello IOPS 輸送量該等量磁碟區上的多個已掛接 Vhd 的條狀配置 hello 備份目標磁碟區</span><span class="sxs-lookup"><span data-stu-id="05add-918">Striping hello backup target volume over multiple mounted VHDs in order tooimprove hello IOPS throughput on that striped volume</span></span>
* <span data-ttu-id="05add-919">使用多個目標目錄 toowrite hello 傾印至 SAP ASE 層級建立的傾印組態</span><span class="sxs-lookup"><span data-stu-id="05add-919">Creating a dump configuration on SAP ASE level which uses more than one target directory toowrite hello dump to</span></span>

<span data-ttu-id="05add-920">本指南的先前內容中已討論過在多個掛接的 VHD 上等量劃分磁碟區的方式。</span><span class="sxs-lookup"><span data-stu-id="05add-920">Striping a volume over multiple mounted VHDs has been discussed earlier in this guide.</span></span> <span data-ttu-id="05add-921">如需有關使用 hello SAP ASE 傾印組態中的多個目錄，請參閱 toohello 文件，也就是使用的 toocreate hello 傾印組態上 hello 預存程序 sp_config_dump 上[Sybase 資訊中心](http://infocenter.sybase.com/help/index.jsp).</span><span class="sxs-lookup"><span data-stu-id="05add-921">For more information on using multiple directories in hello SAP ASE dump configuration please refer toohello documentation on Stored Procedure sp_config_dump which is used toocreate hello dump configuration on hello [Sybase Infocenter](http://infocenter.sybase.com/help/index.jsp).</span></span>

### <a name="disaster-recovery-with-azure-vms"></a><span data-ttu-id="05add-922">使用 Azure VM 的災害復原</span><span class="sxs-lookup"><span data-stu-id="05add-922">Disaster Recovery with Azure VMs</span></span>
#### <a name="data-replication-with-sap-sybase-replication-server"></a><span data-ttu-id="05add-923">利用 SAP Sybase 複寫伺服器的資料複寫</span><span class="sxs-lookup"><span data-stu-id="05add-923">Data Replication with SAP Sybase Replication Server</span></span>
<span data-ttu-id="05add-924">以 hello SAP Sybase 複寫伺服器 (SRS) SAP ASE 提供暖待命方案 tootransfer 資料庫交易 tooa 遠方位置，以非同步方式。</span><span class="sxs-lookup"><span data-stu-id="05add-924">With hello SAP Sybase Replication Server (SRS) SAP ASE provides a warm standby solution tootransfer database transactions tooa distant location asynchronously.</span></span>

<span data-ttu-id="05add-925">hello 安裝及操作 SRS 的運作方式也會在內部部署，在 Azure 虛擬機器服務中裝載的 VM 中的功能。</span><span class="sxs-lookup"><span data-stu-id="05add-925">hello installation and operation of SRS works as well functionally in a VM hosted in Azure Virtual Machine Services as it does on-premises.</span></span>

<span data-ttu-id="05add-926">預計未來會發行透過 SAP 複寫伺服器的 ASE HADR 版本。</span><span class="sxs-lookup"><span data-stu-id="05add-926">ASE HADR via SAP Replication Server is planned with a future release.</span></span> <span data-ttu-id="05add-927">一旦該版本可供使用之後，就會立即進行測試並針對 Microsoft Azure 平台加以發行。</span><span class="sxs-lookup"><span data-stu-id="05add-927">It will be tested with and released for Microsoft Azure platforms as soon as it is available.</span></span>

## <a name="specifics-toosap-ase-on-linux"></a><span data-ttu-id="05add-928">在 Linux 上的細節 tooSAP ASE</span><span class="sxs-lookup"><span data-stu-id="05add-928">Specifics tooSAP ASE on Linux</span></span>
<span data-ttu-id="05add-929">開始使用 Microsoft Azure，您可以輕鬆地移轉您現有的 SAP ASE 應用程式 tooAzure 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="05add-929">Starting with Microsoft Azure, you can easily migrate your existing SAP ASE applications tooAzure Virtual Machines.</span></span> <span data-ttu-id="05add-930">虛擬機器中的 SAP ASE 可輕鬆地將移轉這些應用程式 tooMicrosoft Azure 讓您 tooreduce hello 擁有權總成本的部署、 管理和維護的企業廣度應用程式。</span><span class="sxs-lookup"><span data-stu-id="05add-930">SAP ASE in a Virtual Machine enables you tooreduce hello total cost of ownership of deployment, management and maintenance of enterprise breadth applications by easily migrating these applications tooMicrosoft Azure.</span></span> <span data-ttu-id="05add-931">透過 SAP ASE Azure 虛擬機器中，系統管理員和開發人員仍然可以使用的 hello 可用的相同開發和管理工具內部。</span><span class="sxs-lookup"><span data-stu-id="05add-931">With SAP ASE in an Azure Virtual Machine, administrators and developers can still use hello same development and administration tools that are available on-premises.</span></span>

<span data-ttu-id="05add-932">部署 Azure Vm 的重要 tooknow hello 正式的 Sla，可以在這裡找到： <https://azure.microsoft.com/support/legal/sla></span><span class="sxs-lookup"><span data-stu-id="05add-932">For deploying Azure VMs it's important tooknow hello official SLAs which can be found here : <https://azure.microsoft.com/support/legal/sla></span></span>

<span data-ttu-id="05add-933">SAP 附註 [1928533]將會提供 SAP 大小調整資訊和 SAP 認證的 VM SKU 清單。</span><span class="sxs-lookup"><span data-stu-id="05add-933">SAP sizing information and a list of SAP certified VM SKUs will be provided in SAP Note [1928533].</span></span> <span data-ttu-id="05add-934">Azure 虛擬機器的額外 SAP 調整大小文件可以在下列網址中找到：<http://blogs.msdn.com/b/saponsqlserver/archive/2015/06/19/how-to-size-sap-systems-running-on-azure-vms.aspx> 和 <http://blogs.msdn.com/b/saponsqlserver/archive/2015/12/01/new-white-paper-on-sizing-sap-solutions-on-azure-public-cloud.aspx></span><span class="sxs-lookup"><span data-stu-id="05add-934">Additional SAP sizing documents for Azure Virtual machines can be found here <http://blogs.msdn.com/b/saponsqlserver/archive/2015/06/19/how-to-size-sap-systems-running-on-azure-vms.aspx> and here <http://blogs.msdn.com/b/saponsqlserver/archive/2015/12/01/new-white-paper-on-sizing-sap-solutions-on-azure-public-cloud.aspx></span></span>

<span data-ttu-id="05add-935">陳述式和 Azure 儲存體、 SAP 部署 Vm 或 SAP Monitoring 的建議考慮 toohello 使用量套用 toodeployments 的 SAP ASE 搭配述整個 hello 的這份文件的前四個章節的 SAP 應用程式。</span><span class="sxs-lookup"><span data-stu-id="05add-935">Statements and recommendations in regard toohello usage of Azure Storage, Deployment of SAP VMs or SAP Monitoring apply toodeployments of SAP ASE in conjunction with SAP applications as stated throughout hello first four chapters of this document.</span></span>

<span data-ttu-id="05add-936">hello 下列兩個 SAP 附註上 Linux 和 ASE ASE 的一般資訊中包含 hello 雲端：</span><span class="sxs-lookup"><span data-stu-id="05add-936">hello following two SAP Notes include general information about ASE on Linux and ASE in hello Cloud :</span></span>

* <span data-ttu-id="05add-937">[2134316]</span><span class="sxs-lookup"><span data-stu-id="05add-937">[2134316]</span></span>
* <span data-ttu-id="05add-938">[1941500]</span><span class="sxs-lookup"><span data-stu-id="05add-938">[1941500]</span></span>

### <a name="sap-ase-version-support"></a><span data-ttu-id="05add-939">SAP ASE 版本支援</span><span class="sxs-lookup"><span data-stu-id="05add-939">SAP ASE Version Support</span></span>
<span data-ttu-id="05add-940">SAP 目前支援 SAP ASE 版本 16.0，可與 SAP 商務套件產品搭配使用。</span><span class="sxs-lookup"><span data-stu-id="05add-940">SAP currently supports SAP ASE version 16.0 for use with SAP Business Suite products.</span></span> <span data-ttu-id="05add-941">SAP ASE 伺服器、 或 JDBC 和 ODBC 驅動程式 toobe SAP Business Suite 等作業只透過所提供的產品搭配使用的所有更新都 hello 在 SAP 服務 Marketplace: <https://support.sap.com/swdc>。</span><span class="sxs-lookup"><span data-stu-id="05add-941">All updates for SAP ASE server, or JDBC and ODBC drivers toobe used with SAP Business Suite products are provided solely through hello SAP Service Marketplace at: <https://support.sap.com/swdc>.</span></span>

<span data-ttu-id="05add-942">安裝與內部部署，不要直接從 Sybase 網站下載更新 hello SAP ASE 伺服器或 hello JDBC 和 ODBC 驅動程式。</span><span class="sxs-lookup"><span data-stu-id="05add-942">As for installations on-premises, do not download updates for hello SAP ASE server, or for hello JDBC and ODBC drivers directly from Sybase websites.</span></span> <span data-ttu-id="05add-943">支援使用 SAP Business Suite 產品在內部部署與 Azure 虛擬機器中的修補程式的詳細資訊，請參閱下列 「 SAP 附註的 hello:</span><span class="sxs-lookup"><span data-stu-id="05add-943">For detailed information on patches which are supported for use with SAP Business Suite products on-premises and in Azure Virtual Machines see hello following SAP Notes:</span></span>

* <span data-ttu-id="05add-944">[1590719]</span><span class="sxs-lookup"><span data-stu-id="05add-944">[1590719]</span></span>
* <span data-ttu-id="05add-945">[1973241]</span><span class="sxs-lookup"><span data-stu-id="05add-945">[1973241]</span></span>

<span data-ttu-id="05add-946">SAP ASE 上執行 SAP Business Suite 的一般資訊位於 hello [SCN](https://scn.sap.com/community/ase)</span><span class="sxs-lookup"><span data-stu-id="05add-946">General information on running SAP Business Suite on SAP ASE can be found in hello [SCN](https://scn.sap.com/community/ase)</span></span>

### <a name="sap-ase-configuration-guidelines-for-sap-related-sap-ase-installations-in-azure-vms"></a><span data-ttu-id="05add-947">在 Azure VM 中安裝 SAP 相關之 SAP ASE 的 SAP ASE 組態指導方針</span><span class="sxs-lookup"><span data-stu-id="05add-947">SAP ASE Configuration Guidelines for SAP related SAP ASE Installations in Azure VMs</span></span>
#### <a name="structure-of-hello-sap-ase-deployment"></a><span data-ttu-id="05add-948">Hello SAP ASE 部署的結構</span><span class="sxs-lookup"><span data-stu-id="05add-948">Structure of hello SAP ASE Deployment</span></span>
<span data-ttu-id="05add-949">Hello 一般描述，根據 SAP ASE 可執行檔應該位於或安裝到 VM (/sybase) hello hello 根檔案系統。</span><span class="sxs-lookup"><span data-stu-id="05add-949">In accordance with hello general description, SAP ASE executables should be located or installed into hello root file system of hello VM ( /sybase ).</span></span> <span data-ttu-id="05add-950">一般而言，大部分的 hello SAP ASE 系統和工具資料庫可不真的利用硬 SAP NetWeaver 工作量。</span><span class="sxs-lookup"><span data-stu-id="05add-950">Typically, most of hello SAP ASE system and tools databases are not really leveraged hard by SAP NetWeaver workload.</span></span> <span data-ttu-id="05add-951">因此 hello 系統和工具的資料庫 （master、 model、 saptools、 sybmgmtdb、 sybsystemdb） 可留在 hello 根檔案系統上。</span><span class="sxs-lookup"><span data-stu-id="05add-951">Hence hello system and tools databases (master, model, saptools, sybmgmtdb, sybsystemdb) can remain on hello root file system as well.</span></span>

<span data-ttu-id="05add-952">例外狀況可能是包含所有的工作資料表和暫存資料表建立的 SAP ASE 其中發生某些 SAP ERP 和所有 BW 工作量可能需要較高的資料量或 I/O 作業量，無法放入 hello 原始 hello 暫存資料庫VM 之 OS 磁碟。</span><span class="sxs-lookup"><span data-stu-id="05add-952">An exception could be hello temporary database containing all work tables and temporary tables created by SAP ASE, which in case of some SAP ERP and all BW workloads might require either higher data volume or I/O operations volume which can’t fit into hello original VM’s OS disk.</span></span>

<span data-ttu-id="05add-953">根據 hello SAPInst/SWPM 使用新版 tooinstall hello 系統、 hello 資料庫可能包含：</span><span class="sxs-lookup"><span data-stu-id="05add-953">Depending on hello version of SAPInst/SWPM used tooinstall hello system, hello database might contain:</span></span>

* <span data-ttu-id="05add-954">安裝 SAP ASE 時建立單一的 SAP ASE tempdb</span><span class="sxs-lookup"><span data-stu-id="05add-954">A single SAP ASE tempdb which is created when installing SAP ASE</span></span>
* <span data-ttu-id="05add-955">建立藉由安裝 SAP ASE 和建立 hello SAP 安裝常式的其他 saptempdb SAP ASE tempdb</span><span class="sxs-lookup"><span data-stu-id="05add-955">An SAP ASE tempdb created by installing SAP ASE and an additional saptempdb created by hello SAP installation routine</span></span>
* <span data-ttu-id="05add-956">建立藉由安裝 SAP ASE 和手動建立額外的 tempdb SAP ASE tempdb (例如下列 「 SAP 附註[1752266]) toomeet ERP/BW 特定 tempdb 需求</span><span class="sxs-lookup"><span data-stu-id="05add-956">An SAP ASE tempdb created by installing SAP ASE and an additional tempdb that has been created manually (e.g. following SAP Note [1752266]) toomeet ERP/BW specific tempdb requirements</span></span>

<span data-ttu-id="05add-957">如果發生特定 ERP 或所有 BW 工作量合理，不管 tooperformance tookeep hello tempdb 裝置 hello 另外建立 tempdb （SWPM 或手動） 可以由單一 Azure 資料磁碟或 Linux RAID 的個別的檔案系統上的跨越多個 Azure 資料磁碟。</span><span class="sxs-lookup"><span data-stu-id="05add-957">In case of specific ERP or all BW workloads it makes sense, in regard tooperformance, tookeep hello tempdb devices of hello additionally created tempdb (by SWPM or manually) on a separate file system which can be represented by a single Azure data disk or a Linux RAID spanning multiple Azure data disks.</span></span> <span data-ttu-id="05add-958">如果沒有其他的 tempdb 已存在，則建議一個 toocreate (SAP 附註[1752266])。</span><span class="sxs-lookup"><span data-stu-id="05add-958">If no additional tempdb exists it is recommended toocreate one (SAP Note [1752266]).</span></span>

<span data-ttu-id="05add-959">這類系統 hello 應該 hello 另外建立 tempdb 上執行下列步驟：</span><span class="sxs-lookup"><span data-stu-id="05add-959">For such systems hello following steps should be performed for hello additionally created tempdb:</span></span>

* <span data-ttu-id="05add-960">移動 hello 第一次 tempdb 目錄 toohello 第一個檔案系統的 hello SAP 資料庫</span><span class="sxs-lookup"><span data-stu-id="05add-960">Move hello first tempdb directory toohello first file system of hello SAP database</span></span>
* <span data-ttu-id="05add-961">新增 hello Vhd，含 hello SAP 資料庫的檔案系統的 tempdb 目錄的 tooeach</span><span class="sxs-lookup"><span data-stu-id="05add-961">Add tempdb directories tooeach of hello VHDs containing a filesystem of hello SAP database</span></span>

<span data-ttu-id="05add-962">此設定可讓 tempdb tooeither 耗用較多的空間，比可以 tooprovide hello 系統磁碟機。</span><span class="sxs-lookup"><span data-stu-id="05add-962">This configuration enables tempdb tooeither consume more space than hello system drive is able tooprovide.</span></span> <span data-ttu-id="05add-963">做為參考其中一個可以檢查現有的系統執行內部部署的 hello tempdb 目錄大小。</span><span class="sxs-lookup"><span data-stu-id="05add-963">As a reference one can check hello tempdb directory sizes on existing systems which run on-premises.</span></span> <span data-ttu-id="05add-964">或者，這種組態會啟用對 tempdb 無法隨附 hello 系統磁碟機的 IOPS 數目。</span><span class="sxs-lookup"><span data-stu-id="05add-964">Or such a configuration would enable IOPS numbers against tempdb which cannot be provided with hello system drive.</span></span> <span data-ttu-id="05add-965">再次執行內部部署的系統可以針對 tempdb 使用的 toomonitor I/O 工作負載。</span><span class="sxs-lookup"><span data-stu-id="05add-965">Again systems that are running on-premises can be used toomonitor I/O workload against tempdb.</span></span>

<span data-ttu-id="05add-966">永遠不會放入 /mnt 或 /mnt/resource 的 hello VM 的任何 SAP ASE 目錄。</span><span class="sxs-lookup"><span data-stu-id="05add-966">Never put any SAP ASE directories onto /mnt or /mnt/resource of hello VM.</span></span> <span data-ttu-id="05add-967">即使 hello 物件保留在 hello tempdb 中只有暫時因為 /mnt 或 /mnt/resource 預設 Azure VM 暫存空間這不是永久性的這也適用於 toohello tempdb。</span><span class="sxs-lookup"><span data-stu-id="05add-967">This also applies toohello tempdb, even if hello objects kept in hello tempdb are only temporary because /mnt or /mnt/resource is a default Azure VM temp space which is not persistent.</span></span> <span data-ttu-id="05add-968">位於 hello Azure VM 的暫存空間更多詳細[這篇文章][virtual-machines-linux-how-to-attach-disk]</span><span class="sxs-lookup"><span data-stu-id="05add-968">More details about hello Azure VM temp space can be found in [this article][virtual-machines-linux-how-to-attach-disk]</span></span>

#### <a name="impact-of-database-compression"></a><span data-ttu-id="05add-969">資料庫壓縮的影響</span><span class="sxs-lookup"><span data-stu-id="05add-969">Impact of Database Compression</span></span>
<span data-ttu-id="05add-970">在組態中的 I/O 頻寬可能會變成限制因素，每個量值可減少 IOPS 可能有助於 toostretch hello 工作負載一次可以執行像是 Azure IaaS 案例中。</span><span class="sxs-lookup"><span data-stu-id="05add-970">In configurations where I/O bandwidth can become a limiting factor, every measure which reduces IOPS might help toostretch hello workload one can run in an IaaS scenario like Azure.</span></span> <span data-ttu-id="05add-971">因此，強烈建議 toomake 確定 SAP ASE 壓縮會使用上傳現有的 SAP 資料庫 tooAzure 之前。</span><span class="sxs-lookup"><span data-stu-id="05add-971">Therefore, it is strongly recommended toomake sure that SAP ASE compression is used before uploading an existing SAP database tooAzure.</span></span>

<span data-ttu-id="05add-972">如果未實作上傳 tooAzure 之前 hello 建議 tooperform 壓縮是出於多種原因所造成：</span><span class="sxs-lookup"><span data-stu-id="05add-972">hello recommendation tooperform compression before uploading tooAzure if it is not already implemented is given out of several reasons:</span></span>

* <span data-ttu-id="05add-973">資料上傳 toobe tooAzure hello 量較低</span><span class="sxs-lookup"><span data-stu-id="05add-973">hello amount of data toobe uploaded tooAzure is lower</span></span>
* <span data-ttu-id="05add-974">hello hello 壓縮執行持續時間較短，假設有更多的 Cpu 或更高 I/O 頻寬或更少的 I/O 延遲內部部署可以使用更強的硬體</span><span class="sxs-lookup"><span data-stu-id="05add-974">hello duration of hello compression execution is shorter assuming that one can use stronger hardware with more CPUs or higher I/O bandwidth or less I/O latency on-premises</span></span>
* <span data-ttu-id="05add-975">較小的資料庫大小可能會導致 tooless 成本進行磁碟配置</span><span class="sxs-lookup"><span data-stu-id="05add-975">Smaller database sizes might lead tooless costs for disk allocation</span></span>

<span data-ttu-id="05add-976">資料壓縮和 LOB 壓縮可以在 Azure 虛擬機器上裝載的 VM 中運作，如同它在內部部署中的運作方式。</span><span class="sxs-lookup"><span data-stu-id="05add-976">Data- and LOB-Compression work in a VM hosted in Azure Virtual Machines as it does on-premises.</span></span> <span data-ttu-id="05add-977">如需有關如何 toocheck 如果壓縮已在使用中現有的 SAP ASE 資料庫請檢查 SAP Note [1750510]。</span><span class="sxs-lookup"><span data-stu-id="05add-977">For more details on how toocheck if compression is already in use in an existing SAP ASE database please check SAP Note [1750510].</span></span> <span data-ttu-id="05add-978">另請參閱 SAP 附註 [2121797] ，以取得有關資料庫壓縮的其他資訊。</span><span class="sxs-lookup"><span data-stu-id="05add-978">Also see SAP Note [2121797] for additional information regarding database compression.</span></span>

#### <a name="using-dbacockpit-toomonitor-database-instances"></a><span data-ttu-id="05add-979">使用 DBACockpit toomonitor 資料庫執行個體</span><span class="sxs-lookup"><span data-stu-id="05add-979">Using DBACockpit toomonitor Database Instances</span></span>
<span data-ttu-id="05add-980">適用於 SAP 系統做為資料庫平台使用 SAP ASE hello DBACockpit 存取。 為交易 DBACockpit 中內嵌的瀏覽器視窗或 Webdynpro</span><span class="sxs-lookup"><span data-stu-id="05add-980">For SAP systems which are using SAP ASE as database platform, hello DBACockpit is accessible as embedded browser windows in transaction DBACockpit or as Webdynpro.</span></span> <span data-ttu-id="05add-981">不過 hello 完整功能，以監視並管理 hello 資料庫可用於只 hello DBACockpit hello Webdynpro 實作。</span><span class="sxs-lookup"><span data-stu-id="05add-981">However hello full functionality for monitoring and administering hello database is available in hello Webdynpro implementation of hello DBACockpit only.</span></span>

<span data-ttu-id="05add-982">在內部部署與執行數個步驟的系統必須 tooenable hello DBACockpit hello Webdynpro 實作所使用的所有 SAP NetWeaver 功能。</span><span class="sxs-lookup"><span data-stu-id="05add-982">As with on-premises systems several steps are required tooenable all SAP NetWeaver functionality used by hello Webdynpro implementation of hello DBACockpit.</span></span> <span data-ttu-id="05add-983">請依照 SAP Note [1245200] tooenable hello webdynpros 的使用方式，並產生 hello 必要的。</span><span class="sxs-lookup"><span data-stu-id="05add-983">Please follow SAP Note [1245200] tooenable hello usage of webdynpros and generate hello required ones.</span></span> <span data-ttu-id="05add-984">當上述資訊，您也會設定 hello 網際網路通訊管理員 (icm) 以及 hello 連接埠 toobe hello 中的下列 hello 指示用於 http 和 https 連線。</span><span class="sxs-lookup"><span data-stu-id="05add-984">When following hello instructions in hello above notes you will also configure hello Internet Communication Manager (icm) along with hello ports toobe used for http and https connections.</span></span> <span data-ttu-id="05add-985">hello http 的預設設定看起來像這樣：</span><span class="sxs-lookup"><span data-stu-id="05add-985">hello default setting for http looks like this:</span></span>

> <span data-ttu-id="05add-986">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="05add-986">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span></span>
>
> <span data-ttu-id="05add-987">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="05add-987">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span></span>
>
>

<span data-ttu-id="05add-988">和產生交易 DBACockpit 中的 hello 連結看起來類似 toothis:</span><span class="sxs-lookup"><span data-stu-id="05add-988">and hello links generated in transaction DBACockpit will look similar toothis:</span></span>

> <span data-ttu-id="05add-989">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="05add-989">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
> <span data-ttu-id="05add-990">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="05add-990">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
>

<span data-ttu-id="05add-991">取決於如何 hello Azure 虛擬機器裝載 hello SAP 系統連接的網站，透過多站台或 ExpressRoute （跨單位部署），您需要確定 toomake 該 ICM 可解析的完整主機名稱上使用 hello電腦嘗試 tooopen hello DBACockpit 從。</span><span class="sxs-lookup"><span data-stu-id="05add-991">Depending on if and how hello Azure Virtual Machine hosting hello SAP system is connected via site-to-site, multi-site or ExpressRoute (Cross-Premises deployment) you need toomake sure that ICM is using a fully qualified hostname that can be resolved on hello machine where you are trying tooopen hello DBACockpit from.</span></span> <span data-ttu-id="05add-992">請參閱 SAP 附註[773830] toounderstand ICM 如何決定 hello 取決於設定檔參數和 icm host_name_full 方式設定參數的完整的主機名稱明確必要。</span><span class="sxs-lookup"><span data-stu-id="05add-992">Please see SAP Note [773830] toounderstand how ICM determines hello fully qualified host name depending on profile parameters and set parameter icm/host_name_full explicitly if required.</span></span>

<span data-ttu-id="05add-993">如果您部署的 hello VM 在僅限雲端的情況下，不在內部部署與 Azure 之間的跨單位連線，您需要 toodefine，公用 IP 位址和 domainlabel 也一樣。</span><span class="sxs-lookup"><span data-stu-id="05add-993">If you deployed hello VM in a Cloud-Only scenario without cross-premises connectivity between on-premises and Azure, you need toodefine a public IP address and a domainlabel.</span></span> <span data-ttu-id="05add-994">hello hello 公用 DNS 名稱格式 hello VM 然後看起來像這樣：</span><span class="sxs-lookup"><span data-stu-id="05add-994">hello format of hello public DNS name of hello VM will then look like this :</span></span>

> <span data-ttu-id="05add-995">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span><span class="sxs-lookup"><span data-stu-id="05add-995">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span></span>
>
>

<span data-ttu-id="05add-996">可以找到 toohello DNS 名稱相關的更多詳細資料[這裡][virtual-machines-azurerm-versus-azuresm]。</span><span class="sxs-lookup"><span data-stu-id="05add-996">More details related toohello DNS name can be found [here][virtual-machines-azurerm-versus-azuresm].</span></span>

<span data-ttu-id="05add-997">設定 hello SAP 設定檔參數 icm/host_name_full toohello hello Azure VM hello 連結的 DNS 名稱可能類似於：</span><span class="sxs-lookup"><span data-stu-id="05add-997">Setting hello SAP profile parameter icm/host_name_full toohello DNS name of hello Azure VM hello link might look similar to:</span></span>

> <span data-ttu-id="05add-998">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="05add-998">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
> <span data-ttu-id="05add-999">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="05add-999">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
>

<span data-ttu-id="05add-1000">在此情況下您需要 toomake 務必：</span><span class="sxs-lookup"><span data-stu-id="05add-1000">In this case you need toomake sure to:</span></span>

* <span data-ttu-id="05add-1001">新增輸入的規則 toohello 網路安全性群組中的 hello TCP/IP 通訊埠的 hello Azure 入口網站使用 icm toocommunicate</span><span class="sxs-lookup"><span data-stu-id="05add-1001">Add Inbound rules toohello Network Security Group in hello Azure Portal for hello TCP/IP ports used toocommunicate with ICM</span></span>
* <span data-ttu-id="05add-1002">新增輸入的規則以 hello ICM hello TCP/IP 連接埠使用 toocommunicate 的 toohello Windows 防火牆設定</span><span class="sxs-lookup"><span data-stu-id="05add-1002">Add Inbound rules toohello Windows Firewall configuration for hello TCP/IP ports used toocommunicate with hello ICM</span></span>

<span data-ttu-id="05add-1003">建議您使用自動匯入的所有可用的更正，tooperiodically 套用 hello 更正集合 SAP 附註適用於 tooyour SAP 版本：</span><span class="sxs-lookup"><span data-stu-id="05add-1003">For an automated imported of all corrections available, it is recommended tooperiodically apply hello correction collection SAP Note applicable tooyour SAP version:</span></span>

* <span data-ttu-id="05add-1004">[1558958]</span><span class="sxs-lookup"><span data-stu-id="05add-1004">[1558958]</span></span>
* <span data-ttu-id="05add-1005">[1619967]</span><span class="sxs-lookup"><span data-stu-id="05add-1005">[1619967]</span></span>
* <span data-ttu-id="05add-1006">[1882376]</span><span class="sxs-lookup"><span data-stu-id="05add-1006">[1882376]</span></span>

<span data-ttu-id="05add-1007">針對 SAP ASE DBA Cockpit 的進一步資訊位於下列 SAP 附註的 hello:</span><span class="sxs-lookup"><span data-stu-id="05add-1007">Further information about DBA Cockpit for SAP ASE can be found in hello following SAP Notes:</span></span>

* <span data-ttu-id="05add-1008">[1605680]</span><span class="sxs-lookup"><span data-stu-id="05add-1008">[1605680]</span></span>
* <span data-ttu-id="05add-1009">[1757924]</span><span class="sxs-lookup"><span data-stu-id="05add-1009">[1757924]</span></span>
* <span data-ttu-id="05add-1010">[1757928]</span><span class="sxs-lookup"><span data-stu-id="05add-1010">[1757928]</span></span>
* <span data-ttu-id="05add-1011">[1758182]</span><span class="sxs-lookup"><span data-stu-id="05add-1011">[1758182]</span></span>
* <span data-ttu-id="05add-1012">[1758496]</span><span class="sxs-lookup"><span data-stu-id="05add-1012">[1758496]</span></span>    
* <span data-ttu-id="05add-1013">[1814258]</span><span class="sxs-lookup"><span data-stu-id="05add-1013">[1814258]</span></span>
* <span data-ttu-id="05add-1014">[1922555]</span><span class="sxs-lookup"><span data-stu-id="05add-1014">[1922555]</span></span>
* <span data-ttu-id="05add-1015">[1956005]</span><span class="sxs-lookup"><span data-stu-id="05add-1015">[1956005]</span></span>

#### <a name="backuprecovery-considerations-for-sap-ase"></a><span data-ttu-id="05add-1016">SAP ASE 的備份/復原考量</span><span class="sxs-lookup"><span data-stu-id="05add-1016">Backup/Recovery Considerations for SAP ASE</span></span>
<span data-ttu-id="05add-1017">將 SAP ASE 部署至 Azure 時，必須檢閱您的備份方法。</span><span class="sxs-lookup"><span data-stu-id="05add-1017">When deploying SAP ASE into Azure your backup methodology must be reviewed.</span></span> <span data-ttu-id="05add-1018">即使 hello 系統不是生產系統，SAP ASE 所裝載的 hello SAP 資料庫必須定期備份。</span><span class="sxs-lookup"><span data-stu-id="05add-1018">Even if hello system is not a productive system, hello SAP database hosted by SAP ASE must be backed up periodically.</span></span> <span data-ttu-id="05add-1019">因為 Azure 儲存體會保留三個影像，備份現在是較不重要，尤其是尊重 toocompensating 儲存體損毀。</span><span class="sxs-lookup"><span data-stu-id="05add-1019">Since Azure Storage keeps three images, a backup is now less important in respect toocompensating a storage crash.</span></span> <span data-ttu-id="05add-1020">hello 維護適當的備份與還原計劃的主要原因是，您可以藉由提供時間復原功能的中點補償邏輯/手動錯誤有更多。</span><span class="sxs-lookup"><span data-stu-id="05add-1020">hello primary reason for maintaining a proper backup and restore plan is more that you can compensate for logical/manual errors by providing point in time recovery capabilities.</span></span> <span data-ttu-id="05add-1021">因此 hello 的目標是 tooeither 使用備份 toorestore hello 資料庫備份 tooa 特定點 Azure tooseed 中的時間或 toouse hello 備份中另一個系統複製 hello 現有的資料庫。</span><span class="sxs-lookup"><span data-stu-id="05add-1021">So hello goal is tooeither use backups toorestore hello database back tooa certain point in time or toouse hello backups in Azure tooseed another system by copying hello existing database.</span></span> <span data-ttu-id="05add-1022">例如，您無法從傳輸的 2 層 SAP 組態 tooa 3 層系統設定 hello 相同系統還原的備份。</span><span class="sxs-lookup"><span data-stu-id="05add-1022">For example, you could transfer from a 2-Tier SAP configuration tooa 3-Tier system setup of hello same system by restoring a backup.</span></span>

<span data-ttu-id="05add-1023">備份和還原 Azure 運作中的資料庫 hello 相同方式就如同內部部署。</span><span class="sxs-lookup"><span data-stu-id="05add-1023">Backing up and restoring a database in Azure works hello same way as it does on-premises.</span></span> <span data-ttu-id="05add-1024">請參閱 SAP 附註︰</span><span class="sxs-lookup"><span data-stu-id="05add-1024">Please see SAP Notes:</span></span>

* <span data-ttu-id="05add-1025">[1588316]</span><span class="sxs-lookup"><span data-stu-id="05add-1025">[1588316]</span></span>
* <span data-ttu-id="05add-1026">[1585981]</span><span class="sxs-lookup"><span data-stu-id="05add-1026">[1585981]</span></span>

<span data-ttu-id="05add-1027">以取得建立傾印組態和排程備份的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="05add-1027">for details on creating dump configurations and scheduling backups.</span></span> <span data-ttu-id="05add-1028">根據您的策略和需求，您可以設定資料庫和記錄檔傾印到其中一個現有的 Vhd 的 hello toodisk 或加入的額外 VHD hello 備份。</span><span class="sxs-lookup"><span data-stu-id="05add-1028">Depending on your strategy and needs you can configure database and log dumps toodisk onto one of hello existing VHDs or add an additional VHD for hello backup.</span></span>  <span data-ttu-id="05add-1029">tooreduce hello 危險資料遺失，就會發生錯誤的建議 toouse 沒有資料庫目錄/檔案所在位置的 VHD。</span><span class="sxs-lookup"><span data-stu-id="05add-1029">tooreduce hello danger of data loss in case of an error it is recommended toouse a VHD where no database directory/file is located.</span></span>

<span data-ttu-id="05add-1030">除了資料壓縮與 LOB 壓縮之外，SAP ASE 也會提供備份壓縮。</span><span class="sxs-lookup"><span data-stu-id="05add-1030">Besides data- and LOB compression SAP ASE also offers backup compression.</span></span> <span data-ttu-id="05add-1031">與 hello 資料庫和記錄空間小於 toooccupy 傾印它建議 toouse 備份壓縮。</span><span class="sxs-lookup"><span data-stu-id="05add-1031">toooccupy less space with hello database and log dumps it is recommended toouse backup compression.</span></span> <span data-ttu-id="05add-1032">如需詳細資訊，請參閱 SAP 附註 [1588316] 。</span><span class="sxs-lookup"><span data-stu-id="05add-1032">Please see SAP Note [1588316] for more information.</span></span> <span data-ttu-id="05add-1033">壓縮 hello 備份也是重要的 tooreduce hello 數量資料 toobe 傳輸，如果您計劃 toodownload 備份或包含備份的傾印從 hello tooon 內部部署 Azure 虛擬機器的 Vhd。</span><span class="sxs-lookup"><span data-stu-id="05add-1033">Compressing hello backup is also crucial tooreduce hello amount of data toobe transferred if you plan toodownload backups or VHDs containing backup dumps from hello Azure Virtual Machine tooon-premises.</span></span>

<span data-ttu-id="05add-1034">請勿使用 hello Azure VM 的暫存空間 /mnt 或 /mnt/resource 做為資料庫或記錄檔傾印目的地。</span><span class="sxs-lookup"><span data-stu-id="05add-1034">Do not use hello Azure VM temp space /mnt or /mnt/resource as database or log dump destination.</span></span>

#### <a name="performance-considerations-for-backupsrestores"></a><span data-ttu-id="05add-1035">備份/還原的效能考量</span><span class="sxs-lookup"><span data-stu-id="05add-1035">Performance Considerations for Backups/Restores</span></span>
<span data-ttu-id="05add-1036">裸機部署，如同備份/還原效能是取決於磁碟區數目可以讀取以平行方式，而且這些磁碟區的哪些 hello 輸送量可能。</span><span class="sxs-lookup"><span data-stu-id="05add-1036">As in bare-metal deployments, backup/restore performance is dependent on how many volumes can be read in parallel and what hello throughput of those volumes might be.</span></span> <span data-ttu-id="05add-1037">此外，hello 備份壓縮所使用的 CPU 耗用量可能相當重要的角色上播放的 Vm 只向上 too8 CPU 執行緒。</span><span class="sxs-lookup"><span data-stu-id="05add-1037">In addition, hello CPU consumption used by backup compression may play a significant role on VMs with just up too8 CPU threads.</span></span> <span data-ttu-id="05add-1038">因此，您可以假設︰</span><span class="sxs-lookup"><span data-stu-id="05add-1038">Therefore, one can assume:</span></span>

* <span data-ttu-id="05add-1039">hello 較少的 Vhd hello 數目使用 toostore hello 資料庫裝置 hello 較小 hello 整體讀取輸送量</span><span class="sxs-lookup"><span data-stu-id="05add-1039">hello fewer hello number of VHDs used toostore hello database devices, hello smaller hello overall throughput in reading</span></span>
* <span data-ttu-id="05add-1040">hello 數目較少 hello hello VM 中的 CPU 執行緒、 hello 更嚴重 hello 備份壓縮的影響</span><span class="sxs-lookup"><span data-stu-id="05add-1040">hello smaller hello number of CPU threads in hello VM, hello more severe hello impact of backup compression</span></span>
* <span data-ttu-id="05add-1041">hello 較少的目標 （Linux 軟體 RAID Vhd） toowrite hello 來備份、 hello 較小者 hello 輸送量</span><span class="sxs-lookup"><span data-stu-id="05add-1041">hello fewer targets ( Linux software RAID, VHDs) toowrite hello backup to, hello lesser hello throughput</span></span>

<span data-ttu-id="05add-1042">目標 toowrite toothere tooincrease hello 數目是它可以是根據您的需求使用/結合兩個選項：</span><span class="sxs-lookup"><span data-stu-id="05add-1042">tooincrease hello number of targets toowrite toothere are two options which can be used/combined depending on your needs:</span></span>

* <span data-ttu-id="05add-1043">透過順序 tooimprove hello IOPS 輸送量該等量磁碟區上的多個已掛接 Vhd 的條狀配置 hello 備份目標磁碟區</span><span class="sxs-lookup"><span data-stu-id="05add-1043">Striping hello backup target volume over multiple mounted VHDs in order tooimprove hello IOPS throughput on that striped volume</span></span>
* <span data-ttu-id="05add-1044">使用多個目標目錄 toowrite hello 傾印至 SAP ASE 層級建立的傾印組態</span><span class="sxs-lookup"><span data-stu-id="05add-1044">Creating a dump configuration on SAP ASE level which uses more than one target directory toowrite hello dump to</span></span>

<span data-ttu-id="05add-1045">本指南的先前內容中已討論過在多個掛接的 VHD 上等量劃分磁碟區的方式。</span><span class="sxs-lookup"><span data-stu-id="05add-1045">Striping a volume over multiple mounted VHDs has been discussed earlier in this guide.</span></span> <span data-ttu-id="05add-1046">如需有關使用 hello SAP ASE 傾印組態中的多個目錄，請參閱 toohello 文件，也就是使用的 toocreate hello 傾印組態上 hello 預存程序 sp_config_dump 上[Sybase 資訊中心](http://infocenter.sybase.com/help/index.jsp).</span><span class="sxs-lookup"><span data-stu-id="05add-1046">For more information on using multiple directories in hello SAP ASE dump configuration please refer toohello documentation on Stored Procedure sp_config_dump which is used toocreate hello dump configuration on hello [Sybase Infocenter](http://infocenter.sybase.com/help/index.jsp).</span></span>

### <a name="disaster-recovery-with-azure-vms"></a><span data-ttu-id="05add-1047">使用 Azure VM 的災害復原</span><span class="sxs-lookup"><span data-stu-id="05add-1047">Disaster Recovery with Azure VMs</span></span>
#### <a name="data-replication-with-sap-sybase-replication-server"></a><span data-ttu-id="05add-1048">利用 SAP Sybase 複寫伺服器的資料複寫</span><span class="sxs-lookup"><span data-stu-id="05add-1048">Data Replication with SAP Sybase Replication Server</span></span>
<span data-ttu-id="05add-1049">以 hello SAP Sybase 複寫伺服器 (SRS) SAP ASE 提供暖待命方案 tootransfer 資料庫交易 tooa 遠方位置，以非同步方式。</span><span class="sxs-lookup"><span data-stu-id="05add-1049">With hello SAP Sybase Replication Server (SRS) SAP ASE provides a warm standby solution tootransfer database transactions tooa distant location asynchronously.</span></span>

<span data-ttu-id="05add-1050">hello 安裝及操作 SRS 的運作方式也會在內部部署，在 Azure 虛擬機器服務中裝載的 VM 中的功能。</span><span class="sxs-lookup"><span data-stu-id="05add-1050">hello installation and operation of SRS works as well functionally in a VM hosted in Azure Virtual Machine Services as it does on-premises.</span></span>

<span data-ttu-id="05add-1051">目前不支援透過 SAP 複寫伺服器的 ASE HADR。</span><span class="sxs-lookup"><span data-stu-id="05add-1051">ASE HADR via SAP Replication Server is NOT supported at this point in time.</span></span> <span data-ttu-id="05add-1052">它可能會進行測試並發行中 hello 未來的 Microsoft Azure 平台。</span><span class="sxs-lookup"><span data-stu-id="05add-1052">It might be tested with and released for Microsoft Azure platforms in hello future.</span></span>

## <a name="specifics-toooracle-database-on-windows"></a><span data-ttu-id="05add-1053">細節 tooOracle Windows 上的資料庫</span><span class="sxs-lookup"><span data-stu-id="05add-1053">Specifics tooOracle Database on Windows</span></span>
<span data-ttu-id="05add-1054">因為 midyear 2013，Microsoft Windows HYPER-V 和 Azure 的 Oracle toorun 支援 Oracle 軟體。</span><span class="sxs-lookup"><span data-stu-id="05add-1054">Since midyear 2013, Oracle software is supported by Oracle toorun on Microsoft Windows Hyper-V and Azure.</span></span> <span data-ttu-id="05add-1055">請閱讀此文章 tooget hello 一般支援 Windows HYPER-V 和 Azure 的 Oracle 上更多詳細資料： <https://blogs.oracle.com/cloud/entry/oracle_and_microsoft_join_forces></span><span class="sxs-lookup"><span data-stu-id="05add-1055">Please read this article tooget more details on hello general support of Windows Hyper-V and Azure by Oracle: <https://blogs.oracle.com/cloud/entry/oracle_and_microsoft_join_forces></span></span>

<span data-ttu-id="05add-1056">下列 hello 一般支援，是也支援 hello 的 SAP 應用程式利用 Oracle 資料庫的特定案例。</span><span class="sxs-lookup"><span data-stu-id="05add-1056">Following hello general support, hello specific scenario of SAP applications leveraging Oracle Databases is supported as well.</span></span> <span data-ttu-id="05add-1057">這一部分 hello 文件中命名詳細資料。</span><span class="sxs-lookup"><span data-stu-id="05add-1057">Details are named in this part of hello document.</span></span>

### <a name="oracle-version-support"></a><span data-ttu-id="05add-1058">Oracle 版本支援</span><span class="sxs-lookup"><span data-stu-id="05add-1058">Oracle Version Support</span></span>
<span data-ttu-id="05add-1059">Oracle 版本和對應可以找到下列 SAP 附註的 hello 中的 Oracle 在 Azure 虛擬機器上執行 SAP 支援的作業系統版本的所有詳細[2039619]</span><span class="sxs-lookup"><span data-stu-id="05add-1059">All details about Oracle versions and corresponding OS versions which are supported for running SAP on Oracle on Azure Virtual Machines can be found in hello following SAP Note [2039619]</span></span>

<span data-ttu-id="05add-1060">如需有關在 Oracle 上執行「SAP 商務套件」的一般資訊，請參閱 SCN：<https://scn.sap.com/community/oracle></span><span class="sxs-lookup"><span data-stu-id="05add-1060">General information about running SAP Business Suite on Oracle can be found on SCN: <https://scn.sap.com/community/oracle></span></span>

### <a name="oracle-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="05add-1061">在 Azure VM 中安裝 SAP 的 Oracle 組態指導方針</span><span class="sxs-lookup"><span data-stu-id="05add-1061">Oracle Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="05add-1062">儲存體組態</span><span class="sxs-lookup"><span data-stu-id="05add-1062">Storage configuration</span></span>
<span data-ttu-id="05add-1063">只支援 Oracle 使用 NTFS 格式化磁碟的單一執行個體。</span><span class="sxs-lookup"><span data-stu-id="05add-1063">Only single instance Oracle using NTFS formatted disks is supported.</span></span> <span data-ttu-id="05add-1064">所有資料庫檔案必須都儲存 VHD 磁碟為基礎的 hello NTFS 檔案系統上。</span><span class="sxs-lookup"><span data-stu-id="05add-1064">All database files must be stored on hello NTFS file system based on VHD disks.</span></span> <span data-ttu-id="05add-1065">這些 Vhd 掛接的 toohello Azure VM 作業，而且根據 Azure 分頁 BLOB 儲存體 (<https://msdn.microsoft.com/library/azure/ee691964.aspx>)。</span><span class="sxs-lookup"><span data-stu-id="05add-1065">These VHDs are mounted toohello Azure VM and are based on Azure Page BLOB Storage (<https://msdn.microsoft.com/library/azure/ee691964.aspx>).</span></span>
<span data-ttu-id="05add-1066">任何類型的網路磁碟機或遠端共用 (例如 Azure 檔案服務)：</span><span class="sxs-lookup"><span data-stu-id="05add-1066">Any kind of network drives or remote shares like Azure file services:</span></span>

* <span data-ttu-id="05add-1067"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span><span class="sxs-lookup"><span data-stu-id="05add-1067"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span></span>
* <span data-ttu-id="05add-1068"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span><span class="sxs-lookup"><span data-stu-id="05add-1068"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span></span>

<span data-ttu-id="05add-1069">就 Oracle 資料庫檔案而言，都「不」  支援使用！</span><span class="sxs-lookup"><span data-stu-id="05add-1069">are **NOT** supported for Oracle database files!</span></span>

<span data-ttu-id="05add-1070">使用根據 Azure 分頁 BLOB 儲存體的 Azure Vhd，hello 的文件章節中所做的陳述式[Vm 和 Vhd 的快取][ dbms-guide-2.1]和[Microsoft Azure 儲存體][dbms-guide-2.3]套用 toodeployments 以 hello 以及 Oracle 資料庫。</span><span class="sxs-lookup"><span data-stu-id="05add-1070">Using Azure VHDs based on Azure Page BLOB Storage, hello statements made in this document in chapter [Caching for VMs and VHDs][dbms-guide-2.1] and [Microsoft Azure Storage][dbms-guide-2.3] apply toodeployments with hello Oracle Database as well.</span></span>

<span data-ttu-id="05add-1071">如同稍早在 hello hello 文件的一般組件中所說明，存在 Azure Vhd 的 IOPS 輸送量的配額。</span><span class="sxs-lookup"><span data-stu-id="05add-1071">As explained earlier in hello general part of hello document, quotas on IOPS throughput for Azure VHDs exist.</span></span> <span data-ttu-id="05add-1072">hello 確切配額會根據 hello VM 類型使用。</span><span class="sxs-lookup"><span data-stu-id="05add-1072">hello exact quotas are depending on hello VM type used.</span></span> <span data-ttu-id="05add-1073">如需 VM 類型及其配額的清單，請參閱[這裡][virtual-machines-sizes]</span><span class="sxs-lookup"><span data-stu-id="05add-1073">A list of VM types with their quotas can be found [here][virtual-machines-sizes]</span></span>

<span data-ttu-id="05add-1074">tooidentify hello 支援的 Azure VM 類型，請參閱 tooSAP 注意[1928533]</span><span class="sxs-lookup"><span data-stu-id="05add-1074">tooidentify hello supported Azure VM types, please refer tooSAP note [1928533]</span></span>

<span data-ttu-id="05add-1075">每個磁碟 hello 目前 IOPS 配額滿足 hello 需求，因為它是可能 toostore 上的所有 hello DB 檔案一個單一掛接 Azure VHD。</span><span class="sxs-lookup"><span data-stu-id="05add-1075">As long as hello current IOPS quota per disk satisfies hello requirements, it is possible toostore all hello DB files on one single mounted Azure VHD.</span></span>

<span data-ttu-id="05add-1076">如果需要更多的 IOPS，強烈建議 toouse 視窗儲存集區 （只可用在 Windows Server 2012 和更新版本） 或 Windows 等量的 Windows 2008 R2 toocreate 一個大的邏輯裝置透過多個已掛接的 VHD 磁碟。</span><span class="sxs-lookup"><span data-stu-id="05add-1076">If more IOPS are required, it is strongly recommended toouse Window Storage Pools (only available in Windows Server 2012 and higher) or Windows striping for Windows 2008 R2 toocreate one big logical device over multiple mounted VHD disks.</span></span> <span data-ttu-id="05add-1077">另請參閱本文件的[軟體 RAID][dbms-guide-2.2] 一章。</span><span class="sxs-lookup"><span data-stu-id="05add-1077">See also chapter [Software RAID][dbms-guide-2.2] of this document.</span></span> <span data-ttu-id="05add-1078">這種方法可以簡化 hello 管理負擔 toomanage hello 磁碟空間，並避免 hello 投入時間 toomanually 散佈到多個已掛接的 Vhd 檔案。</span><span class="sxs-lookup"><span data-stu-id="05add-1078">This approach simplifies hello administration overhead toomanage hello disk space and avoids hello effort toomanually distribute files across multiple mounted VHDs.</span></span>

#### <a name="backup--restore"></a><span data-ttu-id="05add-1079">備份 / 還原</span><span class="sxs-lookup"><span data-stu-id="05add-1079">Backup / Restore</span></span>
<span data-ttu-id="05add-1080">備份 / 還原功能、 hello SAP BR * 工具支援 Oracle 為 hello 相同方式與在標準的 Windows 伺服器作業系統和 HYPER-V。</span><span class="sxs-lookup"><span data-stu-id="05add-1080">For backup / restore functionality, hello SAP BR*Tools for Oracle are supported in hello same way as on standard Windows Server Operating Systems and Hyper-V.</span></span> <span data-ttu-id="05add-1081">Toodisk 備份與還原自磁碟也支援 oracle 復原管理員 (RMAN)。</span><span class="sxs-lookup"><span data-stu-id="05add-1081">Oracle Recovery Manager (RMAN) is also supported for backups toodisk and restore from disk.</span></span>

#### <a name="high-availability"></a><span data-ttu-id="05add-1082">高可用性</span><span class="sxs-lookup"><span data-stu-id="05add-1082">High Availability</span></span>
[comment]: <> (連結會參考 tooASM)
<span data-ttu-id="05add-1084">基於高可用性和災害復原目的支援 Oracle Data Guard。</span><span class="sxs-lookup"><span data-stu-id="05add-1084">Oracle Data Guard is supported for high availability and disaster recovery purposes.</span></span> <span data-ttu-id="05add-1085">如需詳細資料，請參閱[這份][virtual-machines-windows-classic-configure-oracle-data-guard]文件。</span><span class="sxs-lookup"><span data-stu-id="05add-1085">Details can be found in [this][virtual-machines-windows-classic-configure-oracle-data-guard] documentation.</span></span>

#### <a name="other"></a><span data-ttu-id="05add-1086">其他</span><span class="sxs-lookup"><span data-stu-id="05add-1086">Other</span></span>
<span data-ttu-id="05add-1087">此文件以 hello 以及 Oracle 資料庫的 Vm 部署的前三個章節述 hello 適用於所有其他的一般主題如同 Azure 可用性設定組或 SAP 的監視。</span><span class="sxs-lookup"><span data-stu-id="05add-1087">All other general topics like Azure Availability Sets or SAP monitoring apply as described in hello first three chapters of this document for deployments of VMs with hello Oracle Database as well.</span></span>

## <a name="specifics-for-hello-sap-maxdb-database-on-windows"></a><span data-ttu-id="05add-1088">環境的 hello Windows 上的 SAP MaxDB 資料庫</span><span class="sxs-lookup"><span data-stu-id="05add-1088">Specifics for hello SAP MaxDB Database on Windows</span></span>
### <a name="sap-maxdb-version-support"></a><span data-ttu-id="05add-1089">SAP MaxDB 版本支援</span><span class="sxs-lookup"><span data-stu-id="05add-1089">SAP MaxDB Version Support</span></span>
<span data-ttu-id="05add-1090">SAP 目前支援 SAP MaxDB 版本 7.9，以便與 Azure 中 SAP NetWeaver 架構的產品搭配使用。</span><span class="sxs-lookup"><span data-stu-id="05add-1090">SAP currently supports SAP MaxDB version 7.9 for use with SAP NetWeaver-based products in Azure.</span></span> <span data-ttu-id="05add-1091">在 SAP 服務商場提供 SAP MaxDB 伺服器、 或 JDBC 和 ODBC 驅動程式 toobe SAP NetWeaver 架構的產品搭配使用的所有更新等作業只透過 hello <https://support.sap.com/swdc>。</span><span class="sxs-lookup"><span data-stu-id="05add-1091">All updates for SAP MaxDB server, or JDBC and ODBC drivers toobe used with SAP NetWeaver-based products are provided solely through hello SAP Service Marketplace at <https://support.sap.com/swdc>.</span></span>
<span data-ttu-id="05add-1092">如需有關在 SAP MaxDB 上執行 SAP NetWeaver 的一般資訊，請參閱 <https://scn.sap.com/community/maxdb>。</span><span class="sxs-lookup"><span data-stu-id="05add-1092">General information on running SAP NetWeaver on SAP MaxDB can be found at <https://scn.sap.com/community/maxdb>.</span></span>

### <a name="supported-microsoft-windows-versions-and-azure-vm-types-for-sap-maxdb-dbms"></a><span data-ttu-id="05add-1093">針對 SAP MaxDB DBMS 支援的 Microsoft Windows 版本和 Azure VM 類型</span><span class="sxs-lookup"><span data-stu-id="05add-1093">Supported Microsoft Windows Versions and Azure VM types for SAP MaxDB DBMS</span></span>
<span data-ttu-id="05add-1094">在 Azure 上 SAP MaxDB DBMS toofind hello 支援 Microsoft Windows 版本，請參閱：</span><span class="sxs-lookup"><span data-stu-id="05add-1094">toofind hello supported Microsoft Windows version for SAP MaxDB DBMS on Azure, see:</span></span>

* <span data-ttu-id="05add-1095">[SAP 產品可用性對照表 (PAM)][sap-pam]</span><span class="sxs-lookup"><span data-stu-id="05add-1095">[SAP Product Availability Matrix (PAM)][sap-pam]</span></span>
* <span data-ttu-id="05add-1096">SAP 附註 [1928533]</span><span class="sxs-lookup"><span data-stu-id="05add-1096">SAP Note [1928533]</span></span>

<span data-ttu-id="05add-1097">強烈建議 toouse hello 最新版本的 hello 作業系統 Microsoft Windows 中，這是 Microsoft Windows 2012 R2。</span><span class="sxs-lookup"><span data-stu-id="05add-1097">It is highly recommended toouse hello newest version of hello operating system Microsoft Windows, which is Microsoft Windows 2012 R2.</span></span>

### <a name="available-sap-maxdb-documentation"></a><span data-ttu-id="05add-1098">可用的 SAP MaxDB 文件</span><span class="sxs-lookup"><span data-stu-id="05add-1098">Available SAP MaxDB Documentation</span></span>
<span data-ttu-id="05add-1099">您可以找到下列 SAP 附註的 hello hello 更新 SAP MaxDB 文件清單[767598]</span><span class="sxs-lookup"><span data-stu-id="05add-1099">You can find hello updated list of SAP MaxDB documentation in hello following SAP Note [767598]</span></span>

### <a name="sap-maxdb-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="05add-1100">在 Azure VM 中安裝 SAP 的 SAP MaxDB 組態指導方針</span><span class="sxs-lookup"><span data-stu-id="05add-1100">SAP MaxDB Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <span data-ttu-id="05add-1101"><a name="b48cfe3b-48e9-4f5b-a783-1d29155bd573"></a>儲存體組態</span><span class="sxs-lookup"><span data-stu-id="05add-1101"><a name="b48cfe3b-48e9-4f5b-a783-1d29155bd573"></a>Storage configuration</span></span>
<span data-ttu-id="05add-1102">SAP MaxDB 的 azure 儲存體最佳作法，請依照下列章節中所述的 hello 一般建議[RDBMS 部署結構][dbms-guide-2]。</span><span class="sxs-lookup"><span data-stu-id="05add-1102">Azure storage best practices for SAP MaxDB follow hello general recommendations mentioned in chapter [Structure of a RDBMS Deployment][dbms-guide-2].</span></span>

> [!IMPORTANT]
> <span data-ttu-id="05add-1103">如同其他資料庫，SAP MaxDB 也有資料和記錄檔。</span><span class="sxs-lookup"><span data-stu-id="05add-1103">Like other databases, SAP MaxDB also has data and log files.</span></span> <span data-ttu-id="05add-1104">不過，在 SAP MaxDB 用語 hello 正確詞彙是 「 磁碟區 」 （非 「 檔案 」）。</span><span class="sxs-lookup"><span data-stu-id="05add-1104">However, in SAP MaxDB terminology hello correct term is “volume” (not “file”).</span></span> <span data-ttu-id="05add-1105">例如，有 SAP MaxDB 資料磁碟區和記錄磁碟區。</span><span class="sxs-lookup"><span data-stu-id="05add-1105">For example, there are SAP MaxDB data volumes and log volumes.</span></span> <span data-ttu-id="05add-1106">請勿與作業系統磁碟區混淆。</span><span class="sxs-lookup"><span data-stu-id="05add-1106">Do not confuse these with OS disk volumes.</span></span>
>
>

<span data-ttu-id="05add-1107">簡單地說，您必須︰</span><span class="sxs-lookup"><span data-stu-id="05add-1107">In short you have to:</span></span>

* <span data-ttu-id="05add-1108">設定太保存 hello SAP MaxDB 資料和記錄磁碟區 （也就是檔案） 的 hello Azure 儲存體帳戶**本機備援儲存體 (LRS)**章節中所指定[Microsoft Azure 儲存體][ dbms-guide-2.3].</span><span class="sxs-lookup"><span data-stu-id="05add-1108">Set hello Azure storage account that holds hello SAP MaxDB data and log volumes (i.e. files) too**Local Redundant Storage (LRS)** as specified in chapter [Microsoft Azure Storage][dbms-guide-2.3].</span></span>
* <span data-ttu-id="05add-1109">從記錄檔磁碟區 （也就是檔案） 的 hello IO 路徑 SAP MaxDB 資料磁碟區 （也就是檔案） 的個別 hello IO 路徑。</span><span class="sxs-lookup"><span data-stu-id="05add-1109">Separate hello IO path for SAP MaxDB data volumes (i.e. files) from hello IO path for log volumes (i.e. files).</span></span> <span data-ttu-id="05add-1110">這表示 SAP MaxDB 資料磁碟區 （也就是檔案） 有一個邏輯磁碟機上安裝的 toobe，而且 SAP MaxDB 記錄磁碟區 （也就是檔案） 有 toobe 安裝在另一個邏輯磁碟機。</span><span class="sxs-lookup"><span data-stu-id="05add-1110">This means that SAP MaxDB data volumes (i.e. files) have toobe installed on one logical drive and SAP MaxDB log volumes (i.e. files) have toobe installed on another logical drive.</span></span>
* <span data-ttu-id="05add-1111">設定 hello 適當的檔案快取每一個 Azure blob，是否使用它的 SAP MaxDB 資料或記錄檔磁碟區 （也就是 「 檔案 」），以及您是否使用標準 Azure 或 Azure 高階儲存體，根據的章節中所述[Vm 的快取][dbms-guide-2.1].</span><span class="sxs-lookup"><span data-stu-id="05add-1111">Set hello proper file caching for each Azure blob, depending on whether you use it for SAP MaxDB data or log volumes (i.e. files), and whether you use Azure Standard or Azure Premium Storage, as described in chapter [Caching for VMs][dbms-guide-2.1].</span></span>
* <span data-ttu-id="05add-1112">只要每個磁碟 hello 目前 IOPS 配額滿足 hello 需求，可能 toostore 所有 hello 資料磁碟區，在單一的掛接 Azure VHD，並也儲存在另一個單一掛接 Azure VHD 上的所有資料庫記錄檔磁碟區。</span><span class="sxs-lookup"><span data-stu-id="05add-1112">As long as hello current IOPS quota per disk satisfies hello requirements, it is possible toostore all hello data volumes on a single mounted Azure VHD, and also store all database log volumes on another single mounted Azure VHD.</span></span>
* <span data-ttu-id="05add-1113">如果需要更多的 IOPS 及/或空格，強烈建議 toouse Microsoft 視窗儲存集區 （只用於 Microsoft Windows Server 2012 和更新版本） 或 Microsoft Windows 的 Microsoft Windows 2008 R2 toocreate 的條狀配置一個大型的邏輯裝置透過多個已掛接的 VHD 磁碟。</span><span class="sxs-lookup"><span data-stu-id="05add-1113">If more IOPS and/or space are required, it is strongly recommended toouse Microsoft Window Storage Pools (only available in Microsoft Windows Server 2012 and higher) or Microsoft Windows striping for Microsoft Windows 2008 R2 toocreate one large logical device over multiple mounted VHD disks.</span></span> <span data-ttu-id="05add-1114">另請參閱本文件的[軟體 RAID][dbms-guide-2.2] 一章。</span><span class="sxs-lookup"><span data-stu-id="05add-1114">See also chapter [Software RAID][dbms-guide-2.2] of this document.</span></span> <span data-ttu-id="05add-1115">這種方法可以簡化 hello 管理負擔 toomanage hello 磁碟空間，並避免 hello 投入時間的手動將檔案分散到多個已掛接的 Vhd。</span><span class="sxs-lookup"><span data-stu-id="05add-1115">This approach simplifies hello administration overhead toomanage hello disk space and avoids hello effort of manually distributing files across multiple mounted VHDs.</span></span>
* <span data-ttu-id="05add-1116">如需最高 IOPS 需求 hello，您可以使用 Azure 高階儲存體，DS 系列和 GS 系列 Vm 上。</span><span class="sxs-lookup"><span data-stu-id="05add-1116">For hello highest IOPS requirements, you can use Azure Premium Storage, which is available on DS-series and GS-series VMs.</span></span>

![適用於 SAP MaxDB DBMS 之 Azure IaaS VM 的參考組態][dbms-guide-figure-600]

#### <span data-ttu-id="05add-1118"><a name="23c78d3b-ca5a-4e72-8a24-645d141a3f5d"></a>備份與還原</span><span class="sxs-lookup"><span data-stu-id="05add-1118"><a name="23c78d3b-ca5a-4e72-8a24-645d141a3f5d"></a>Backup and Restore</span></span>
<span data-ttu-id="05add-1119">將 SAP MaxDB 部署至 Azure 時，您必須檢閱備份方法。</span><span class="sxs-lookup"><span data-stu-id="05add-1119">When deploying SAP MaxDB into Azure, you must review your backup methodology.</span></span> <span data-ttu-id="05add-1120">即使 hello 系統不是生產系統，SAP MaxDB 所裝載的 hello SAP 資料庫必須定期備份。</span><span class="sxs-lookup"><span data-stu-id="05add-1120">Even if hello system is not a productive system, hello SAP database hosted by SAP MaxDB must be backed up periodically.</span></span> <span data-ttu-id="05add-1121">由於 Azure 儲存體會保留三個映像，因此在保護系統以免發生儲存體失敗以及更重要的操作或系統管理失敗方面，備份現在已變得較不重要。</span><span class="sxs-lookup"><span data-stu-id="05add-1121">Since Azure Storage keeps three images, a backup is now less important in terms of protecting your system against storage failure and more important operational or administrative failures.</span></span> <span data-ttu-id="05add-1122">hello 維護適當的備份與還原計劃的主要原因是，讓您可以藉由提供時間點復原功能的邏輯或手動錯誤補償。</span><span class="sxs-lookup"><span data-stu-id="05add-1122">hello primary reason for maintaining a proper backup and restore plan is so that you can compensate for logical or manual errors by providing point-in-time recovery capabilities.</span></span> <span data-ttu-id="05add-1123">Hello 的目標是讓 tooeither 使用備份 toorestore hello 資料庫 tooa 特定點 Azure tooseed 中的時間或 toouse hello 備份中的另一個系統複製 hello 現有的資料庫。</span><span class="sxs-lookup"><span data-stu-id="05add-1123">So hello goal is tooeither use backups toorestore hello database tooa certain point in time or toouse hello backups in Azure tooseed another system by copying hello existing database.</span></span> <span data-ttu-id="05add-1124">例如，您無法從傳輸的 2 層 SAP 組態 tooa 3 層系統設定 hello 相同系統還原的備份。</span><span class="sxs-lookup"><span data-stu-id="05add-1124">For example, you could transfer from a 2-tier SAP configuration tooa 3-tier system setup of hello same system by restoring a backup.</span></span>

<span data-ttu-id="05add-1125">備份和還原 Azure works hello 相同方式如同對內部部署系統，因此您可以使用標準的 SAP MaxDB 備份/還原工具，如下所述其中 hello SAP MaxDB 文件集文件中的資料庫所列於 SAP Note [767598].</span><span class="sxs-lookup"><span data-stu-id="05add-1125">Backing up and restoring a database in Azure works hello same way as it does for on-premises systems, so you can use standard SAP MaxDB backup/restore tools, which are described in one of hello SAP MaxDB documentation documents listed in SAP Note [767598].</span></span>

#### <span data-ttu-id="05add-1126"><a name="77cd2fbb-307e-4cbf-a65f-745553f72d2c"></a>備份與還原的效能考量</span><span class="sxs-lookup"><span data-stu-id="05add-1126"><a name="77cd2fbb-307e-4cbf-a65f-745553f72d2c"></a>Performance Considerations for Backup and Restore</span></span>
<span data-ttu-id="05add-1127">與裸機部署備份和還原效能是取決於磁碟區數目可以讀取這些磁碟區的平行和 hello 輸送量。</span><span class="sxs-lookup"><span data-stu-id="05add-1127">As in bare-metal deployments, backup and restore performance is dependent on how many volumes can be read in parallel and hello throughput of those volumes.</span></span> <span data-ttu-id="05add-1128">此外，備份壓縮所使用的 CPU 耗用量 hello 可以播放相當重要的角色與 Vm 上 too8 CPU 執行緒。</span><span class="sxs-lookup"><span data-stu-id="05add-1128">In addition, hello CPU consumption used by backup compression can play a significant role on VMs with up too8 CPU threads.</span></span> <span data-ttu-id="05add-1129">因此，您可以假設︰</span><span class="sxs-lookup"><span data-stu-id="05add-1129">Therefore, one can assume:</span></span>

* <span data-ttu-id="05add-1130">hello 使用 Vhd toostore hello 資料庫裝置的較少 hello 數目、 hello 較低的 hello 整體讀取輸送量</span><span class="sxs-lookup"><span data-stu-id="05add-1130">hello fewer hello number of VHDs used toostore hello database devices, hello lower hello overall read throughput</span></span>
* <span data-ttu-id="05add-1131">hello 數目較少 hello hello VM 中的 CPU 執行緒、 hello 更嚴重 hello 備份壓縮的影響</span><span class="sxs-lookup"><span data-stu-id="05add-1131">hello smaller hello number of CPU threads in hello VM, hello more severe hello impact of backup compression</span></span>
* <span data-ttu-id="05add-1132">hello 較少 （等量磁碟區的目錄、 Vhd） 的目標 toowrite hello 備份至 hello hello 輸送量更低</span><span class="sxs-lookup"><span data-stu-id="05add-1132">hello fewer targets (Stripe Directories, VHDs) toowrite hello backup to, hello lower hello throughput</span></span>

<span data-ttu-id="05add-1133">tooincrease hello 數目為目標來 toowrite，有兩個選項，您可以使用，可能是在組合中，根據您的需求：</span><span class="sxs-lookup"><span data-stu-id="05add-1133">tooincrease hello number of targets toowrite to, there are two options that you can use, possibly in combination, depending on your needs:</span></span>

* <span data-ttu-id="05add-1134">專門用來備份的個別磁碟區</span><span class="sxs-lookup"><span data-stu-id="05add-1134">Dedicating separate volumes for backup</span></span>
* <span data-ttu-id="05add-1135">透過順序 tooimprove hello IOPS 輸送量等量的磁碟區上的多個已掛接 Vhd 的條狀配置 hello 備份目標磁碟區</span><span class="sxs-lookup"><span data-stu-id="05add-1135">Striping hello backup target volume over multiple mounted VHDs in order tooimprove hello IOPS throughput on that striped disk volume</span></span>
* <span data-ttu-id="05add-1136">有適用於下列各項的個別專用邏輯磁碟裝置︰</span><span class="sxs-lookup"><span data-stu-id="05add-1136">Having separate dedicated logical disk devices for:</span></span>
  * <span data-ttu-id="05add-1137">SAP MaxDB 備份磁碟區 (也就是檔案)</span><span class="sxs-lookup"><span data-stu-id="05add-1137">SAP MaxDB backup volumes (i.e. files)</span></span>
  * <span data-ttu-id="05add-1138">SAP MaxDB 資料磁碟區 (也就是檔案)</span><span class="sxs-lookup"><span data-stu-id="05add-1138">SAP MaxDB data volumes ( i.e. files)</span></span>
  * <span data-ttu-id="05add-1139">SAP MaxDB 記錄磁碟區 (也就是檔案)</span><span class="sxs-lookup"><span data-stu-id="05add-1139">SAP MaxDB log volumes ( i.e. files)</span></span>

<span data-ttu-id="05add-1140">關於在多個掛接的 VHD 上等量劃分磁碟區，先前在本文件的[軟體 RAID][dbms-guide-2.2] 一章中已討論過。</span><span class="sxs-lookup"><span data-stu-id="05add-1140">Striping a volume over multiple mounted VHDs has been discussed earlier in chapter [Software RAID][dbms-guide-2.2] of this document.</span></span>

#### <span data-ttu-id="05add-1141"><a name="f77c1436-9ad8-44fb-a331-8671342de818"></a>其他</span><span class="sxs-lookup"><span data-stu-id="05add-1141"><a name="f77c1436-9ad8-44fb-a331-8671342de818"></a>Other</span></span>
<span data-ttu-id="05add-1142">中所述 hello 與 hello SAP MaxDB 資料庫的 Vm 部署此文件的前三個章節，也適用於所有其他的一般主題例如 Azure 可用性設定組或 SAP 的監視。</span><span class="sxs-lookup"><span data-stu-id="05add-1142">All other general topics such as Azure Availability Sets or SAP monitoring also apply as described in hello first three chapters of this document for deployments of VMs with hello SAP MaxDB database.</span></span>
<span data-ttu-id="05add-1143">其他 SAP MaxDB 特定設定透明 tooAzure vm，而且不同於 SAP Note 列出的文件中描述[767598]和在這些 SAP 附註：</span><span class="sxs-lookup"><span data-stu-id="05add-1143">Other SAP MaxDB-specific settings are transparent tooAzure VMs and are described in different documents listed in SAP Note [767598] and in these SAP notes:</span></span>

* <span data-ttu-id="05add-1144">[826037]</span><span class="sxs-lookup"><span data-stu-id="05add-1144">[826037]</span></span>
* <span data-ttu-id="05add-1145">[1139904]</span><span class="sxs-lookup"><span data-stu-id="05add-1145">[1139904]</span></span>
* <span data-ttu-id="05add-1146">[1173395]</span><span class="sxs-lookup"><span data-stu-id="05add-1146">[1173395]</span></span>

## <a name="specifics-for-sap-livecache-on-windows"></a><span data-ttu-id="05add-1147">Windows 上 SAP liveCache 專屬的詳細資料</span><span class="sxs-lookup"><span data-stu-id="05add-1147">Specifics for SAP liveCache on Windows</span></span>
### <a name="sap-livecache-version-support"></a><span data-ttu-id="05add-1148">SAP liveCache 版本支援</span><span class="sxs-lookup"><span data-stu-id="05add-1148">SAP liveCache Version Support</span></span>
<span data-ttu-id="05add-1149">「Azure 虛擬機器」中支援的 SAP liveCache 最低版本是針對 **EhP 2 for SAP SCM 7.0** 和更新版本發行的 **SAP LC/LCAPPS 10.0 SP 25** (包括 **liveCache 7.9.08.31** 和 **LCA-Build 25**)。</span><span class="sxs-lookup"><span data-stu-id="05add-1149">Minimal version of SAP liveCache supported in Azure Virtual Machines is **SAP LC/LCAPPS 10.0 SP 25** including **liveCache 7.9.08.31** and **LCA-Build 25**, released for **EhP 2 for SAP SCM 7.0** and higher.</span></span>

### <a name="supported-microsoft-windows-versions-and-azure-vm-types-for-sap-livecache-dbms"></a><span data-ttu-id="05add-1150">針對 SAP liveCache DBMS 支援的 Microsoft Windows 版本和 Azure VM 類型</span><span class="sxs-lookup"><span data-stu-id="05add-1150">Supported Microsoft Windows Versions and Azure VM types for SAP liveCache DBMS</span></span>
<span data-ttu-id="05add-1151">在 Azure 上 SAP liveCache toofind hello 支援 Microsoft Windows 版本，請參閱：</span><span class="sxs-lookup"><span data-stu-id="05add-1151">toofind hello supported Microsoft Windows version for SAP liveCache on Azure, see:</span></span>

* <span data-ttu-id="05add-1152">[SAP 產品可用性對照表 (PAM)][sap-pam]</span><span class="sxs-lookup"><span data-stu-id="05add-1152">[SAP Product Availability Matrix (PAM)][sap-pam]</span></span>
* <span data-ttu-id="05add-1153">SAP 附註 [1928533]</span><span class="sxs-lookup"><span data-stu-id="05add-1153">SAP Note [1928533]</span></span>

<span data-ttu-id="05add-1154">強烈建議 toouse hello 最新版本的 hello 作業系統 Microsoft Windows 中，這是 Microsoft Windows 2012 R2。</span><span class="sxs-lookup"><span data-stu-id="05add-1154">It is highly recommended toouse hello newest version of hello operating system Microsoft Windows, which is Microsoft Windows 2012 R2.</span></span>

### <a name="sap-livecache-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="05add-1155">在 Azure VM 中安裝 SAP 的 SAP liveCache 組態指導方針</span><span class="sxs-lookup"><span data-stu-id="05add-1155">SAP liveCache Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="recommended-azure-vm-types"></a><span data-ttu-id="05add-1156">建議的 Azure VM 類型</span><span class="sxs-lookup"><span data-stu-id="05add-1156">Recommended Azure VM Types</span></span>
<span data-ttu-id="05add-1157">因為 SAP liveCache 是執行大量計算的應用程式，hello 容量和速度的 RAM 與 CPU 會有對 SAP liveCache 效能的主要影響。</span><span class="sxs-lookup"><span data-stu-id="05add-1157">As SAP liveCache is an application that performs huge calculations, hello amount and speed of RAM and CPU has a major influence on SAP liveCache performance.</span></span>

<span data-ttu-id="05add-1158">針對 SAP 所支援的 hello Azure VM 類型 (SAP 附註[1928533])，所有的虛擬 CPU 資源配置的 toohello VM 都由專用的 hello hypervisor 實體的 CPU 資源。</span><span class="sxs-lookup"><span data-stu-id="05add-1158">For hello Azure VM types supported by SAP (SAP Note [1928533]), all virtual CPU resources allocated toohello VM are backed by dedicated physical CPU resources of hello hypervisor.</span></span> <span data-ttu-id="05add-1159">不會產生過度佈建 (因此不會產生 CPU 資源競爭)。</span><span class="sxs-lookup"><span data-stu-id="05add-1159">No overprovisioning (and therefore no competition for CPU resources) takes place.</span></span>

<span data-ttu-id="05add-1160">同樣地，SAP 支援的所有 Azure VM 執行個體類型，hello VM 記憶體都是對應的 100 %toohello 實體記憶體 – 過度佈建 （超額認可），例如，未使用。</span><span class="sxs-lookup"><span data-stu-id="05add-1160">Similarly, for all Azure VM instance types supported by SAP, hello VM memory is 100 % mapped toohello physical memory – overprovisioning (over-commitment), for example, is not used.</span></span>

<span data-ttu-id="05add-1161">從這個觀點來看強烈建議 toouse hello 新 D 系列或 DS 系列 （以與 Azure 高階儲存體一起使用） 的 Azure VM 類型，因為它們有 60%更快的處理器比 hello A 系列。</span><span class="sxs-lookup"><span data-stu-id="05add-1161">From this perspective it is highly recommended toouse hello new D- series or DS-series (in combination with Azure Premium Storage) Azure VM type, as they have 60 % faster processors than hello A-series.</span></span> <span data-ttu-id="05add-1162">Hello 最高的 RAM 和 CPU 負載，您可以使用 G 系列和最新 Intel® Xeon® 處理器 hello E5 v3 系列兩次 hello 記憶體，而且四次 hello 固態磁碟機 (Ssd) 的儲存 hello D （在搭配 Azure 高階儲存體） 的 GS 系列 Vm /DS 系列。</span><span class="sxs-lookup"><span data-stu-id="05add-1162">For hello highest RAM and CPU load, you can use G-series and GS-series (in combination with Azure Premium Storage) VMs with hello latest Intel® Xeon® processor E5 v3 family, which have twice hello memory and four times hello solid state drive storage (SSDs) of hello D/DS-series.</span></span>

#### <a name="storage-configuration"></a><span data-ttu-id="05add-1163">儲存體組態</span><span class="sxs-lookup"><span data-stu-id="05add-1163">Storage Configuration</span></span>
<span data-ttu-id="05add-1164">因為 SAP liveCache 根據 SAP MaxDB 技術，所有 hello Azure 儲存體的最佳作法建議章節中所述的 SAP MaxDB[儲存體設定][ dbms-guide-8.4.1]也都適用於 SAP liveCache。</span><span class="sxs-lookup"><span data-stu-id="05add-1164">As SAP liveCache is based on SAP MaxDB technology, all hello Azure storage best practice recommendations mentioned for SAP MaxDB in chapter [Storage configuration][dbms-guide-8.4.1] are also valid for SAP liveCache.</span></span>

#### <a name="dedicated-azure-vm-for-livecache"></a><span data-ttu-id="05add-1165">liveCache 專用的 Azure VM</span><span class="sxs-lookup"><span data-stu-id="05add-1165">Dedicated Azure VM for liveCache</span></span>
<span data-ttu-id="05add-1166">因為 SAP liveCache 密集使用計算能力，正式上線使用強烈建議 toodeploy 專用 Azure 虛擬機器上。</span><span class="sxs-lookup"><span data-stu-id="05add-1166">As SAP liveCache intensively uses computational power, for productive usage it is highly recommended toodeploy on a dedicated Azure Virtual Machine.</span></span>

![適用於具生產力使用案例的 liveCache 專用的 Azure VM][dbms-guide-figure-700]

#### <a name="backup-and-restore"></a><span data-ttu-id="05add-1168">備份與還原</span><span class="sxs-lookup"><span data-stu-id="05add-1168">Backup and Restore</span></span>
<span data-ttu-id="05add-1169">備份和還原，包括效能考量，已詳述於 hello 相關的 SAP MaxDB 章節[備份和還原][ dbms-guide-8.4.2]和[備份的效能考量還原和][dbms-guide-8.4.3]。</span><span class="sxs-lookup"><span data-stu-id="05add-1169">Backup and restore, including performance considerations, are already described in hello relevant SAP MaxDB chapters [Backup and Restore][dbms-guide-8.4.2] and [Performance Considerations for Backup and Restore][dbms-guide-8.4.3].</span></span>

#### <a name="other"></a><span data-ttu-id="05add-1170">其他</span><span class="sxs-lookup"><span data-stu-id="05add-1170">Other</span></span>
<span data-ttu-id="05add-1171">其他一般的主題已詳述於 hello 相關 SAP MaxDB[這][ dbms-guide-8.4.4]章節。</span><span class="sxs-lookup"><span data-stu-id="05add-1171">All other general topics are already described in hello relevant SAP MaxDB [this][dbms-guide-8.4.4] chapter.</span></span>

## <a name="specifics-for-hello-sap-content-server-on-windows"></a><span data-ttu-id="05add-1172">環境的 hello Windows 上的 SAP 內容伺服器</span><span class="sxs-lookup"><span data-stu-id="05add-1172">Specifics for hello SAP Content Server on Windows</span></span>
<span data-ttu-id="05add-1173">hello SAP 內容伺服器是個別伺服器元件 toostore 內容，例如以不同格式的電子文件。</span><span class="sxs-lookup"><span data-stu-id="05add-1173">hello SAP Content Server is a separate, server-based component toostore content such as electronic documents in different formats.</span></span> <span data-ttu-id="05add-1174">hello SAP 內容伺服器提供所開發的技術，而且只使用 toobe 跨應用程式的任何 SAP 應用程式。</span><span class="sxs-lookup"><span data-stu-id="05add-1174">hello SAP Content Server is provided by development of technology and is toobe used cross-application for any SAP applications.</span></span> <span data-ttu-id="05add-1175">它會安裝於不同的系統上。</span><span class="sxs-lookup"><span data-stu-id="05add-1175">It is installed on a separate system.</span></span> <span data-ttu-id="05add-1176">一般內容定型資料和從知識倉儲或技術的繪圖源自 hello mySAP PLM 文件管理系統的文件。</span><span class="sxs-lookup"><span data-stu-id="05add-1176">Typical content is training material and documentation from Knowledge Warehouse or technical drawings originating from hello mySAP PLM Document Management System.</span></span>

### <a name="sap-content-server-version-support"></a><span data-ttu-id="05add-1177">SAP 內容伺服器版本支援</span><span class="sxs-lookup"><span data-stu-id="05add-1177">SAP Content Server Version Support</span></span>
<span data-ttu-id="05add-1178">SAP 目前支援：</span><span class="sxs-lookup"><span data-stu-id="05add-1178">SAP currently supports:</span></span>

* <span data-ttu-id="05add-1179">**SAP 內容伺服器**版本 **6.50 (和更新版本)**</span><span class="sxs-lookup"><span data-stu-id="05add-1179">**SAP Content Server** with version **6.50 (and higher)**</span></span>
* <span data-ttu-id="05add-1180">**SAP MaxDB 版本 7.9**</span><span class="sxs-lookup"><span data-stu-id="05add-1180">**SAP MaxDB version 7.9**</span></span>
* <span data-ttu-id="05add-1181">**Microsoft IIS (網際網路資訊伺服器) 版本 8.0 (和更新版本)**</span><span class="sxs-lookup"><span data-stu-id="05add-1181">**Microsoft IIS (Internet Information Server) version 8.0 (and higher)**</span></span>

<span data-ttu-id="05add-1182">強烈建議 toouse hello 最新版本的 SAP 內容伺服器，這在撰寫本文件的 hello 階段是**6.50 SP4**，與 hello 最新版本的**Microsoft IIS 8.5**。</span><span class="sxs-lookup"><span data-stu-id="05add-1182">It is highly recommended toouse hello newest version of SAP Content Server, which at hello time of writing this document is **6.50 SP4**, and hello newest version of **Microsoft IIS 8.5**.</span></span>

<span data-ttu-id="05add-1183">檢查 SAP 內容伺服器與 Microsoft IIS 的最新支援的 hello 版本 hello [SAP 產品可用性矩陣 」 (PAM)][sap-pam]。</span><span class="sxs-lookup"><span data-stu-id="05add-1183">Check hello latest supported versions of SAP Content Server and Microsoft IIS in hello [SAP Product Availability Matrix (PAM)][sap-pam].</span></span>

### <a name="supported-microsoft-windows-and-azure-vm-types-for-sap-content-server"></a><span data-ttu-id="05add-1184">針對 SAP 內容伺服器支援的 Microsoft Windows 和 Azure VM 類型</span><span class="sxs-lookup"><span data-stu-id="05add-1184">Supported Microsoft Windows and Azure VM types for SAP Content Server</span></span>
<span data-ttu-id="05add-1185">toofind 支援的 Windows 版本，在 Azure 上 SAP 內容伺服器時，請參閱：</span><span class="sxs-lookup"><span data-stu-id="05add-1185">toofind out supported Windows version for SAP Content Server on Azure, see:</span></span>

* <span data-ttu-id="05add-1186">[SAP 產品可用性對照表 (PAM)][sap-pam]</span><span class="sxs-lookup"><span data-stu-id="05add-1186">[SAP Product Availability Matrix (PAM)][sap-pam]</span></span>
* <span data-ttu-id="05add-1187">SAP 附註 [1928533]</span><span class="sxs-lookup"><span data-stu-id="05add-1187">SAP Note [1928533]</span></span>

<span data-ttu-id="05add-1188">強烈建議 toouse hello 最新版本的 Microsoft Windows，這在撰寫本文件的 hello 階段是**Windows Server 2012 R2**。</span><span class="sxs-lookup"><span data-stu-id="05add-1188">It is highly recommended toouse hello newest version of Microsoft Windows, which at hello time of writing this document is **Windows Server 2012 R2**.</span></span>

### <a name="sap-content-server-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="05add-1189">在 Azure VM 中安裝 SAP 的 SAP 內容伺服器組態指導方針</span><span class="sxs-lookup"><span data-stu-id="05add-1189">SAP Content Server Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="05add-1190">儲存體組態</span><span class="sxs-lookup"><span data-stu-id="05add-1190">Storage Configuration</span></span>
<span data-ttu-id="05add-1191">如果您設定 SAP 內容伺服器 toostore 檔案 hello SAP MaxDB 資料庫中，所有 Azure 儲存體最佳作法建議章節中所述的 SAP MaxDB[儲存體設定][ dbms-guide-8.4.1]也適用於 hello SAP 內容伺服器案例。</span><span class="sxs-lookup"><span data-stu-id="05add-1191">If you configure SAP Content Server toostore files in hello SAP MaxDB database, all Azure storage best practices recommendation mentioned for SAP MaxDB in chapter [Storage Configuration][dbms-guide-8.4.1] are also valid for hello SAP Content Server scenario.</span></span>

<span data-ttu-id="05add-1192">如果您設定 SAP 內容伺服器 toostore 檔案 hello 檔案系統中，則建議 toouse 專屬的邏輯磁碟機。</span><span class="sxs-lookup"><span data-stu-id="05add-1192">If you configure SAP Content Server toostore files in hello file system, it is recommended toouse a dedicated logical drive.</span></span> <span data-ttu-id="05add-1193">使用儲存空間可讓您 tooalso 增加邏輯磁碟的大小和 IOPS 輸送量中所述章節中[軟體 RAID][dbms-guide-2.2]。</span><span class="sxs-lookup"><span data-stu-id="05add-1193">Using storage spaces enables you tooalso increase logical disk size and IOPS throughput, as described in in chapter [Software RAID][dbms-guide-2.2].</span></span>

#### <a name="sap-content-server-location"></a><span data-ttu-id="05add-1194">SAP 內容伺服器位置</span><span class="sxs-lookup"><span data-stu-id="05add-1194">SAP Content Server Location</span></span>
<span data-ttu-id="05add-1195">SAP 內容伺服器已部署在 hello toobe 相同的 Azure 地區和 hello SAP 系統部署所在的 Azure VNET。</span><span class="sxs-lookup"><span data-stu-id="05add-1195">SAP Content Server has toobe deployed in hello same Azure region and Azure VNET where hello SAP system is deployed.</span></span> <span data-ttu-id="05add-1196">您是否想 toodeploy SAP 內容伺服器元件專用的 Azure VM 上或在 hello hello SAP 系統執行所在的相同 VM，就可用 toodecide。</span><span class="sxs-lookup"><span data-stu-id="05add-1196">You are free toodecide whether you want toodeploy SAP Content Server components on a dedicated Azure VM or on hello same VM where hello SAP system is running.</span></span>

![SAP 內容伺服器專用的 Azure VM][dbms-guide-figure-800]

#### <a name="sap-cache-server-location"></a><span data-ttu-id="05add-1198">SAP 快取伺服器位置</span><span class="sxs-lookup"><span data-stu-id="05add-1198">SAP Cache Server Location</span></span>
<span data-ttu-id="05add-1199">hello SAP 快取伺服器是額外的伺服器端元件 tooprovide 存取 too(cached) 文件在本機。</span><span class="sxs-lookup"><span data-stu-id="05add-1199">hello SAP Cache Server is an additional server-based component tooprovide access too(cached) documents locally.</span></span> <span data-ttu-id="05add-1200">hello SAP 快取伺服器快取 SAP 內容伺服器 hello 文的件。</span><span class="sxs-lookup"><span data-stu-id="05add-1200">hello SAP Cache Server caches hello documents of a SAP Content Server.</span></span> <span data-ttu-id="05add-1201">如果文件 toobe 擷取一次以上，從不同位置，這會是 toooptimize 網路流量。</span><span class="sxs-lookup"><span data-stu-id="05add-1201">This is toooptimize network traffic if documents have toobe retrieved more than once from different locations.</span></span> <span data-ttu-id="05add-1202">hello 一般規則是該 hello SAP 快取伺服器必須存取 SAP 快取伺服器 hello toobe 實際關閉 toohello 用戶端。</span><span class="sxs-lookup"><span data-stu-id="05add-1202">hello general rule is that hello SAP Cache Server has toobe physically close toohello client that accesses hello SAP Cache Server.</span></span>

<span data-ttu-id="05add-1203">您有兩個選擇：</span><span class="sxs-lookup"><span data-stu-id="05add-1203">Here you have two options:</span></span>

1. <span data-ttu-id="05add-1204">**用戶端是後端 SAP 系統**如果設定的 tooaccess SAP 內容伺服器後端 SAP 系統，SAP 系統是一個用戶端。</span><span class="sxs-lookup"><span data-stu-id="05add-1204">**Client is a backend SAP system** If a backend SAP system is configured tooaccess SAP Content Server, that SAP system is a client.</span></span> <span data-ttu-id="05add-1205">SAP 系統和 SAP 內容伺服器部署在 hello 相同 Azure 地區 – hello 中的相同的 Azure 資料中心 – 它們是實際關閉 tooeach 其他。</span><span class="sxs-lookup"><span data-stu-id="05add-1205">As both SAP system and SAP Content Server are deployed in hello same Azure region – in hello same Azure datacenter – they are physically close tooeach other.</span></span> <span data-ttu-id="05add-1206">因此，沒有任何需要 toohave 專用的 SAP 快取伺服器。</span><span class="sxs-lookup"><span data-stu-id="05add-1206">Therefore, there is no need toohave a dedicated SAP Cache Server.</span></span> <span data-ttu-id="05add-1207">SAP UI （SAP GUI 或 web 瀏覽器） 的用戶端存取 hello SAP 系統直接與 hello SAP 系統從 hello SAP 內容伺服器的擷取文件。</span><span class="sxs-lookup"><span data-stu-id="05add-1207">SAP UI clients (SAP GUI or web browser) access hello SAP system directly, and hello SAP system retrieves documents from hello SAP Content Server.</span></span>
2. <span data-ttu-id="05add-1208">**用戶端是在內部部署 web 瀏覽器**hello SAP 內容伺服器可以設定的 toobe 由 hello 網頁瀏覽器直接存取。</span><span class="sxs-lookup"><span data-stu-id="05add-1208">**Client is an on-premises web browser** hello SAP Content Server can be configured toobe accessed directly by hello web browser.</span></span> <span data-ttu-id="05add-1209">在此情況下，執行內部的網頁瀏覽器的用戶端 hello SAP 內容伺服器。</span><span class="sxs-lookup"><span data-stu-id="05add-1209">In this case, a web browser running on–premises is a client of hello SAP Content Server.</span></span> <span data-ttu-id="05add-1210">在內部部署資料中心與 Azure 資料中心會放置在不同實體位置 (其他理想的情況下關閉 tooeach) 中。</span><span class="sxs-lookup"><span data-stu-id="05add-1210">On-premises datacenter and Azure datacenter are placed in different physical locations (ideally close tooeach other).</span></span> <span data-ttu-id="05add-1211">您的內部部署資料中心是透過 Azure 站台對站台 VPN 或 ExpressRoute 連線的 tooAzure。</span><span class="sxs-lookup"><span data-stu-id="05add-1211">Your on-premises datacenter is connected tooAzure via Azure Site-to-Site VPN or ExpressRoute.</span></span> <span data-ttu-id="05add-1212">雖然這兩個選項可提供安全的 VPN 網路連線 tooAzure，站台對站台網路連線不提供 hello 在內部部署資料中心與 hello Azure 資料中心之間的網路頻寬和延遲 SLA。</span><span class="sxs-lookup"><span data-stu-id="05add-1212">Although both options offer secure VPN network connection tooAzure, site-to-site network connection does not offer a network bandwidth and latency SLA between hello on-premises datacenter and hello Azure datacenter.</span></span> <span data-ttu-id="05add-1213">總存取 toodocuments toospeed，您可以執行 hello 下列其中一種：</span><span class="sxs-lookup"><span data-stu-id="05add-1213">toospeed up access toodocuments, you can do one of hello following:</span></span>
   1. <span data-ttu-id="05add-1214">安裝 SAP 快取伺服器在內部，請關閉 toohello 內部 web 瀏覽器 (選項[這][ dbms-guide-900-sap-cache-server-on-premises]圖)</span><span class="sxs-lookup"><span data-stu-id="05add-1214">Install SAP Cache Server on-premises, close toohello on-premises web browser (option on [this][dbms-guide-900-sap-cache-server-on-premises] Figure)</span></span>
   2. <span data-ttu-id="05add-1215">設定 Azure ExpressRoute，提供內部部署的資料中心與 Azure 資料中心之間高速且低延遲的專用網路連接。</span><span class="sxs-lookup"><span data-stu-id="05add-1215">Configure Azure ExpressRoute, which offers a high-speed and low-latency dedicated network connection between on-premises datacenter and Azure datacenter.</span></span>

<span data-ttu-id="05add-1216">![選項 tooinstall SAP 快取伺服器在內部部署][dbms-guide-figure-900]
<a name="642f746c-e4d4-489d-bf63-73e80177a0a8"></a></span><span class="sxs-lookup"><span data-stu-id="05add-1216">![Option tooinstall SAP Cache Server on-premises][dbms-guide-figure-900]
<a name="642f746c-e4d4-489d-bf63-73e80177a0a8"></a></span></span>

#### <a name="backup--restore"></a><span data-ttu-id="05add-1217">備份 / 還原</span><span class="sxs-lookup"><span data-stu-id="05add-1217">Backup / Restore</span></span>
<span data-ttu-id="05add-1218">如果您設定 hello SAP 內容伺服器 toostore 檔案 hello SAP MaxDB 資料庫中，hello 備份/還原程序和效能考量已詳述於 SAP MaxDB 章[備份和還原][dbms-guide-8.4.2]和章節[的備份和還原效能考量][dbms-guide-8.4.3]。</span><span class="sxs-lookup"><span data-stu-id="05add-1218">If you configure hello SAP Content Server toostore files in hello SAP MaxDB database, hello backup/restore procedure and performance considerations are already described in SAP MaxDB chapter [Backup and Restore][dbms-guide-8.4.2] and chapter [Performance Considerations for Backup and Restore][dbms-guide-8.4.3].</span></span>

<span data-ttu-id="05add-1219">如果您設定 hello 檔案系統中的 hello SAP 內容伺服器 toostore 檔案，其中一個選項是 tooexecute 手動備份/還原 hello 整個檔案結構的 hello 文件的所在位置。</span><span class="sxs-lookup"><span data-stu-id="05add-1219">If you configure hello SAP Content Server toostore files in hello file system, one option is tooexecute manual backup/restore of hello whole file structure where hello documents are located.</span></span> <span data-ttu-id="05add-1220">它是類似 tooSAP MaxDB 備份/還原，建議使用 toohave 專用的磁碟區備份的目的。</span><span class="sxs-lookup"><span data-stu-id="05add-1220">Similar tooSAP MaxDB backup/restore, it is recommended toohave a dedicated disk volume for backup purpose.</span></span>

#### <a name="other"></a><span data-ttu-id="05add-1221">其他</span><span class="sxs-lookup"><span data-stu-id="05add-1221">Other</span></span>
<span data-ttu-id="05add-1222">其他 SAP 內容伺服器的特定設定透明 tooAzure vm 和各種文件和 SAP 附註所述：</span><span class="sxs-lookup"><span data-stu-id="05add-1222">Other SAP Content Server specific settings are transparent tooAzure VMs and are described in various documents and SAP Notes:</span></span>

* <span data-ttu-id="05add-1223"><https://service.sap.com/contentserver></span><span class="sxs-lookup"><span data-stu-id="05add-1223"><https://service.sap.com/contentserver></span></span>
* <span data-ttu-id="05add-1224">SAP 附註 [1619726]</span><span class="sxs-lookup"><span data-stu-id="05add-1224">SAP Note [1619726]</span></span>  

## <a name="specifics-tooibm-db2-for-luw-on-windows"></a><span data-ttu-id="05add-1225">細節 tooIBM DB2 for luw 會在 Windows 上</span><span class="sxs-lookup"><span data-stu-id="05add-1225">Specifics tooIBM DB2 for LUW on Windows</span></span>
<span data-ttu-id="05add-1226">使用 Microsoft Azure，您可以輕鬆地移轉現有 SAP 執行的應用程式在 IBM DB2 for Linux、 UNIX 和 Windows (LUW) tooAzure 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="05add-1226">With Microsoft Azure, you can easily migrate your existing SAP application running on IBM DB2 for Linux, UNIX, and Windows (LUW) tooAzure virtual machines.</span></span> <span data-ttu-id="05add-1227">透過在 IBM DB2 for luw 會 SAP、 管理員和開發人員仍然可以使用的 hello 可用的相同開發和管理工具內部。</span><span class="sxs-lookup"><span data-stu-id="05add-1227">With SAP on IBM DB2 for LUW, administrators and developers can still use hello same development and administration tools which are available on-premises.</span></span>
<span data-ttu-id="05add-1228">一般資訊執行 SAP Business Suite IBM DB2 for luw 會位在 hello SAP 社群網路 (SCN) 在<https://scn.sap.com/community/db2-for-linux-unix-windows>。</span><span class="sxs-lookup"><span data-stu-id="05add-1228">General information about running SAP Business Suite on IBM DB2 for LUW can be found in hello SAP Community Network (SCN) at <https://scn.sap.com/community/db2-for-linux-unix-windows>.</span></span>

<span data-ttu-id="05add-1229">如需有關 Azure 中 DB2 for LUW 上 SAP 的其他資訊和更新，請參閱 SAP 附註 [2233094]。</span><span class="sxs-lookup"><span data-stu-id="05add-1229">For additional information and updates about SAP on DB2 for LUW on Azure, see SAP Note [2233094].</span></span>

### <a name="ibm-db2-for-linux-unix-and-windows-version-support"></a><span data-ttu-id="05add-1230">IBM DB2 for Linux, UNIX, and Windows 支援版本</span><span class="sxs-lookup"><span data-stu-id="05add-1230">IBM DB2 for Linux, UNIX, and Windows Version Support</span></span>
<span data-ttu-id="05add-1231">當 DB2 版本為 10.5 時，支援 Microsoft Azure 虛擬機器中 IBM DB2 for LUW 上的 SAP。</span><span class="sxs-lookup"><span data-stu-id="05add-1231">SAP on IBM DB2 for LUW on Microsoft Azure Virtual Machine Services is supported as of DB2 version 10.5.</span></span>

<span data-ttu-id="05add-1232">如需支援的 SAP 產品和 Azure VM 類型資訊，請參閱 tooSAP 注意[1928533]。</span><span class="sxs-lookup"><span data-stu-id="05add-1232">For information about supported SAP products and Azure VM types, please refer tooSAP Note [1928533].</span></span>

### <a name="ibm-db2-for-linux-unix-and-windows-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="05add-1233">在 Azure VM 中安裝 SAP 的 IBM DB2 for Linux, UNIX, and Windows 組態指導方針</span><span class="sxs-lookup"><span data-stu-id="05add-1233">IBM DB2 for Linux, UNIX, and Windows Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="05add-1234">儲存體組態</span><span class="sxs-lookup"><span data-stu-id="05add-1234">Storage Configuration</span></span>
<span data-ttu-id="05add-1235">所有資料庫檔案必須都儲存 VHD 磁碟為基礎的 hello NTFS 檔案系統上。</span><span class="sxs-lookup"><span data-stu-id="05add-1235">All database files must be stored on hello NTFS file system based on VHD disks.</span></span> <span data-ttu-id="05add-1236">這些 Vhd 會掛接的 toohello Azure VM，並以 Azure 分頁 BLOB 儲存體 (<https://msdn.microsoft.com/library/azure/ee691964.aspx>)。</span><span class="sxs-lookup"><span data-stu-id="05add-1236">These VHDs are mounted toohello Azure VM and are based in Azure Page BLOB Storage (<https://msdn.microsoft.com/library/azure/ee691964.aspx>).</span></span>
<span data-ttu-id="05add-1237">任何種類的網路磁碟機或遠端共用像下列 Azure 檔案服務的 hello 就**不**支援資料庫檔案：</span><span class="sxs-lookup"><span data-stu-id="05add-1237">Any kind of network drives or remote shares like hello following Azure file services are **NOT** supported for database files:</span></span>

* <span data-ttu-id="05add-1238"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span><span class="sxs-lookup"><span data-stu-id="05add-1238"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span></span>
* <span data-ttu-id="05add-1239"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span><span class="sxs-lookup"><span data-stu-id="05add-1239"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span></span>

<span data-ttu-id="05add-1240">如果您使用根據 Azure 分頁 BLOB 儲存體的 Azure Vhd，hello 的文件章節中所做的陳述式[RDBMS 部署結構][ dbms-guide-2]也套用 toodeployments 以 hello IBM DB2 for luw 會資料庫。</span><span class="sxs-lookup"><span data-stu-id="05add-1240">If you are using Azure VHDs based on Azure Page BLOB Storage, hello statements made in this document in chapter [Structure of a RDBMS Deployment][dbms-guide-2] also apply toodeployments with hello IBM DB2 for LUW Database.</span></span>

<span data-ttu-id="05add-1241">如同稍早在 hello hello 文件的一般組件中所說明，存在 Azure Vhd 的 IOPS 輸送量的配額。</span><span class="sxs-lookup"><span data-stu-id="05add-1241">As explained earlier in hello general part of hello document, quotas on IOPS throughput for Azure VHDs exist.</span></span> <span data-ttu-id="05add-1242">hello 確切的配額取決於 hello VM 類型使用。</span><span class="sxs-lookup"><span data-stu-id="05add-1242">hello exact quotas depend on hello VM type used.</span></span> <span data-ttu-id="05add-1243">如需 VM 類型及其配額的清單，請參閱[這裡][virtual-machines-sizes]</span><span class="sxs-lookup"><span data-stu-id="05add-1243">A list of VM types with their quotas can be found [here][virtual-machines-sizes]</span></span>

<span data-ttu-id="05add-1244">只要每個磁碟 hello 目前 IOPS 配額已足夠，它是所有 hello 資料庫檔案可能 toostore 一個單一掛接 Azure VHD。</span><span class="sxs-lookup"><span data-stu-id="05add-1244">As long as hello current IOPS quota per disk is sufficient, it is possible toostore all hello database files on one single mounted Azure VHD.</span></span>

<span data-ttu-id="05add-1245">效能考量也會參照 toochapter 資料安全性和效能考量的資料庫目錄 SAP 安裝指南中。</span><span class="sxs-lookup"><span data-stu-id="05add-1245">For performance considerations also refer toochapter “Data Safety and Performance Considerations for Database Directories” in SAP installation guides.</span></span>

<span data-ttu-id="05add-1246">或者，您可以使用 Windows 儲存集區 （只可用在 Windows Server 2012 和更新版本） 或 Windows 2008 R2 的 Windows 條狀配置章節所述[軟體 RAID] [ dbms-guide-2.2]的這份文件toocreate 一個大邏輯裝置透過多個已掛接的 VHD 磁碟。</span><span class="sxs-lookup"><span data-stu-id="05add-1246">Alternatively, you can use Windows Storage Pools (only available in Windows Server 2012 and higher) or Windows striping for Windows 2008 R2 as described in chapter [Software RAID][dbms-guide-2.2] of this document toocreate one big logical device over multiple mounted VHD disks.</span></span>
<span data-ttu-id="05add-1247">包含針對 sapdata 和 saptmp 目錄 hello DB2 儲存體路徑 hello 磁碟，您必須指定實體磁碟磁區大小為 512 KB。</span><span class="sxs-lookup"><span data-stu-id="05add-1247">For hello disks containing hello DB2 storage paths for your sapdata and saptmp directories, you must specify a physical disk sector size of 512 KB.</span></span> <span data-ttu-id="05add-1248">使用 Windows 儲存集區，您必須建立 hello 存放集區以手動方式透過命令列介面使用 hello 參數"-LogicalSectorSizeDefault"。</span><span class="sxs-lookup"><span data-stu-id="05add-1248">When using Windows Storage Pools, you must create hello storage pools  manually via command line interface using hello parameter „-LogicalSectorSizeDefault“.</span></span> <span data-ttu-id="05add-1249">如需詳細資訊，請參閱 <https://technet.microsoft.com/library/hh848689.aspx>。</span><span class="sxs-lookup"><span data-stu-id="05add-1249">For details see <https://technet.microsoft.com/library/hh848689.aspx>.</span></span>

#### <a name="backuprestore"></a><span data-ttu-id="05add-1250">備份/還原</span><span class="sxs-lookup"><span data-stu-id="05add-1250">Backup/Restore</span></span>
<span data-ttu-id="05add-1251">hello 備份/還原功能，對於 IBM DB2 for luw 會支援 hello 相同方式與在標準的 Windows 伺服器作業系統和 HYPER-V。</span><span class="sxs-lookup"><span data-stu-id="05add-1251">hello backup/restore functionality for IBM DB2 for LUW is supported in hello same way as on standard Windows Server Operating Systems and Hyper-V.</span></span>

<span data-ttu-id="05add-1252">您必須確定您擁有恰當且有效的資料庫備份策略。</span><span class="sxs-lookup"><span data-stu-id="05add-1252">You must make sure that you have a valid database backup strategy in place.</span></span>

<span data-ttu-id="05add-1253">裸機部署，如同備份/還原效能取決於磁碟區數目可以讀取以平行方式，而且這些磁碟區的哪些 hello 輸送量可能。</span><span class="sxs-lookup"><span data-stu-id="05add-1253">As in bare-metal deployments, backup/restore performance depends on how many volumes can be read in parallel and what hello throughput of those volumes might be.</span></span> <span data-ttu-id="05add-1254">此外，hello 備份壓縮所使用的 CPU 耗用量可能相當重要的角色上播放的 Vm 只向上 too8 CPU 執行緒。</span><span class="sxs-lookup"><span data-stu-id="05add-1254">In addition, hello CPU consumption used by backup compression may play a significant role on VMs with just up too8 CPU threads.</span></span> <span data-ttu-id="05add-1255">因此，您可以假設︰</span><span class="sxs-lookup"><span data-stu-id="05add-1255">Therefore, one can assume:</span></span>

* <span data-ttu-id="05add-1256">hello 較少的 Vhd hello 數目使用 toostore hello 資料庫裝置 hello 較小 hello 整體讀取輸送量</span><span class="sxs-lookup"><span data-stu-id="05add-1256">hello fewer hello number of VHDs used toostore hello database devices, hello smaller hello overall throughput in reading</span></span>
* <span data-ttu-id="05add-1257">hello 數目較少 hello hello VM 中的 CPU 執行緒、 hello 更嚴重 hello 備份壓縮的影響</span><span class="sxs-lookup"><span data-stu-id="05add-1257">hello smaller hello number of CPU threads in hello VM, hello more severe hello impact of backup compression</span></span>
* <span data-ttu-id="05add-1258">hello 較少 （等量磁碟區的目錄、 Vhd） 的目標 toowrite hello 備份至 hello hello 輸送量更低</span><span class="sxs-lookup"><span data-stu-id="05add-1258">hello fewer targets (Stripe Directories, VHDs) toowrite hello backup to, hello lower hello throughput</span></span>

<span data-ttu-id="05add-1259">tooincrease hello 數到目標 toowrite，兩個選項可以根據需求使用/合併：</span><span class="sxs-lookup"><span data-stu-id="05add-1259">tooincrease hello number of targets toowrite to, two options can be used/combined depending on your needs:</span></span>

* <span data-ttu-id="05add-1260">透過順序 tooimprove hello IOPS 輸送量該等量磁碟區上的多個已掛接 Vhd 的條狀配置 hello 備份目標磁碟區</span><span class="sxs-lookup"><span data-stu-id="05add-1260">Striping hello backup target volume over multiple mounted VHDs in order tooimprove hello IOPS throughput on that striped volume</span></span>
* <span data-ttu-id="05add-1261">使用多個目標目錄 toowrite hello 備份至</span><span class="sxs-lookup"><span data-stu-id="05add-1261">Using more than one target directory toowrite hello backup to</span></span>

#### <a name="high-availability-and-disaster-recovery"></a><span data-ttu-id="05add-1262">高可用性和災害復原</span><span class="sxs-lookup"><span data-stu-id="05add-1262">High Availability and Disaster Recovery</span></span>
<span data-ttu-id="05add-1263">不支援 Microsoft Cluster Server (MSCS)。</span><span class="sxs-lookup"><span data-stu-id="05add-1263">Microsoft Cluster Server (MSCS) is not supported.</span></span>

<span data-ttu-id="05add-1264">支援 DB2 高可用性災害復原 (HADR)。</span><span class="sxs-lookup"><span data-stu-id="05add-1264">DB2 high availability disaster recovery (HADR) is supported.</span></span> <span data-ttu-id="05add-1265">如有 hello 的 hello HA 組態的虛擬機器使用名稱解析，Azure 中的 hello 設定沒有差別是在內部部署的任何設定。</span><span class="sxs-lookup"><span data-stu-id="05add-1265">If hello virtual machines of hello HA configuration have working name resolution, hello setup in Azure will not differ from any setup that is done on-premises.</span></span> <span data-ttu-id="05add-1266">不建議 toorely 上只有 IP 解析。</span><span class="sxs-lookup"><span data-stu-id="05add-1266">It is not recommended toorely on IP resolution only.</span></span>

<span data-ttu-id="05add-1267">請勿使用 Azure 市集異地複寫。</span><span class="sxs-lookup"><span data-stu-id="05add-1267">Do not use Azure Store Geo-Replication.</span></span> <span data-ttu-id="05add-1268">如需詳細資訊，請參閱 toochapter [Microsoft Azure 儲存體][ dbms-guide-2.3]和章節[高可用性和災害復原與 Azure Vm 搭配][ dbms-guide-3].</span><span class="sxs-lookup"><span data-stu-id="05add-1268">For further information, refer toochapter [Microsoft Azure Storage][dbms-guide-2.3] and chapter [High Availability and Disaster Recovery with Azure VMs][dbms-guide-3].</span></span>

#### <a name="other"></a><span data-ttu-id="05add-1269">其他</span><span class="sxs-lookup"><span data-stu-id="05add-1269">Other</span></span>
<span data-ttu-id="05add-1270">前三個章節的這份文件，以及部署的 Vm 與 IBM DB2 for luw 會述 hello 適用於所有其他的一般主題如同 Azure 可用性設定組或 SAP 的監視。</span><span class="sxs-lookup"><span data-stu-id="05add-1270">All other general topics like Azure Availability Sets or SAP monitoring apply as described in hello first three chapters of this document for deployments of VMs with IBM DB2 for LUW as well.</span></span>

<span data-ttu-id="05add-1271">也請參閱 toochapter [SAP on Azure 摘要的 SQL Server 一般][dbms-guide-5.8]。</span><span class="sxs-lookup"><span data-stu-id="05add-1271">Also refer toochapter [General SQL Server for SAP on Azure Summary][dbms-guide-5.8].</span></span>
