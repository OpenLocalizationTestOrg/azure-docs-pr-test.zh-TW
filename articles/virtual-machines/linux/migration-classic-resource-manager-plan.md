---
title: "將 IaaS 資源從傳統移轉至 Azure Resource Manager 的規劃 | Microsoft Docs"
description: "將 IaaS 資源從傳統移轉至 Azure Resource Manager 的規劃"
services: virtual-machines-linux
documentationcenter: 
author: singhkays
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 78492a2c-2694-4023-a7b8-c97d3708dcb7
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 04/01/2017
ms.author: kasing
ms.openlocfilehash: 5db4e5b18ad385e7eba125a1296a9c5054213446
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/11/2017
---
# <a name="planning-for-migration-of-iaas-resources-from-classic-to-azure-resource-manager"></a><span data-ttu-id="479e5-103">將 IaaS 資源從傳統移轉至 Azure Resource Manager 的規劃</span><span class="sxs-lookup"><span data-stu-id="479e5-103">Planning for migration of IaaS resources from classic to Azure Resource Manager</span></span>
<span data-ttu-id="479e5-104">雖然 Azure Resource Manager 提供了許多令人讚嘆的功能，但請務必詳加規劃您的移轉作業，以確保一切順利進行。</span><span class="sxs-lookup"><span data-stu-id="479e5-104">While Azure Resource Manager offers a lot of amazing features, it is critical to plan out your migration journey to make sure things go smoothly.</span></span> <span data-ttu-id="479e5-105">詳細規劃可確保您在執行移轉活動期間不會遇到問題。</span><span class="sxs-lookup"><span data-stu-id="479e5-105">Spending time on planning will ensure that you do not encounter issues while executing migration activities.</span></span> 

> [!NOTE] 
> <span data-ttu-id="479e5-106">下列方針中，絕大多數是由與客戶合作移轉大型環境的 Azure 客戶諮詢團隊和雲端方案架構設計人員所提供。</span><span class="sxs-lookup"><span data-stu-id="479e5-106">The following guidance was heavily contributed to by the Azure Customer Advisory team and Cloud Solution architects working with customers on migrating large enviornments.</span></span> <span data-ttu-id="479e5-107">因此，本文件將隨著出現成功的新模式而繼續更新，請不定時回來查看，以了解是否有任何新的建議。</span><span class="sxs-lookup"><span data-stu-id="479e5-107">As such this document will continue to get updated as new patterns of success emerge, so check back from time to time to see if there are any new recommendations.</span></span>

<span data-ttu-id="479e5-108">移轉旅程有四個一般階段：</span><span class="sxs-lookup"><span data-stu-id="479e5-108">There are four general phases of the migration journey:</span></span>

![移轉階段](../media/virtual-machines-windows-migration-classic-resource-manager/plan-labtest-migrate-beyond.png)

## <a name="plan"></a><span data-ttu-id="479e5-110">規劃</span><span class="sxs-lookup"><span data-stu-id="479e5-110">Plan</span></span>

### <a name="technical-considerations-and-tradeoffs"></a><span data-ttu-id="479e5-111">技術考量和取捨</span><span class="sxs-lookup"><span data-stu-id="479e5-111">Technical considerations and tradeoffs</span></span>

<span data-ttu-id="479e5-112">根據您的技術需求多寡、地理位置和作業實務，您可能要考慮：</span><span class="sxs-lookup"><span data-stu-id="479e5-112">Depending on your technical requirements size, geographies and operational practices, you might want to consider:</span></span>

1. <span data-ttu-id="479e5-113">為什麼您的組織需要 Azure Resource Manager？</span><span class="sxs-lookup"><span data-stu-id="479e5-113">Why is Azure Resource Manager desired for your organization?</span></span>  <span data-ttu-id="479e5-114">移轉的商業理由有哪些？</span><span class="sxs-lookup"><span data-stu-id="479e5-114">What are the business reasons for a migration?</span></span>
2. <span data-ttu-id="479e5-115">選擇 Azure Resource Manager 的技術理由有哪些？</span><span class="sxs-lookup"><span data-stu-id="479e5-115">What are the technical reasons for Azure Resource Manager?</span></span>  <span data-ttu-id="479e5-116">您要運用 Azure 服務的哪些其他功能 (如果有的話)？</span><span class="sxs-lookup"><span data-stu-id="479e5-116">What (if any) additional Azure services would you like to leverage?</span></span>
3. <span data-ttu-id="479e5-117">移轉中包含哪些應用程式 (或虛擬機器的集合)？</span><span class="sxs-lookup"><span data-stu-id="479e5-117">Which application (or sets of virtual machines) is included in the migration?</span></span>
4. <span data-ttu-id="479e5-118">移轉 API 支援哪些案例？</span><span class="sxs-lookup"><span data-stu-id="479e5-118">Which scenarios are supported with the migration API?</span></span>  <span data-ttu-id="479e5-119">檢閱[不支援的功能和組態](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json#unsupported-features-and-configurations)。</span><span class="sxs-lookup"><span data-stu-id="479e5-119">Review the [unsupported features and configurations](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json#unsupported-features-and-configurations).</span></span>
5. <span data-ttu-id="479e5-120">您的作業團隊目前支援傳統和 Azure Resource Manager 中的應用程式/VM 嗎？</span><span class="sxs-lookup"><span data-stu-id="479e5-120">Will your operational teams now support applications/VMs in both Classic and Azure Resource Manager?</span></span>
6. <span data-ttu-id="479e5-121">Azure Resource Manager 如何變更您的 VM 部署、管理、監視和報告處理程序 (如果有的話)？</span><span class="sxs-lookup"><span data-stu-id="479e5-121">How (if at all) does Azure Resource Manager change your VM deployment, management, monitoring, and reporting processes?</span></span>  <span data-ttu-id="479e5-122">需要更新部署指令碼嗎？</span><span class="sxs-lookup"><span data-stu-id="479e5-122">Do your deployment scripts need to be updated?</span></span>
7. <span data-ttu-id="479e5-123">警示專案關係人 (使用者、應用程式擁有者，以及基礎結構擁有者) 的通訊規劃為何？</span><span class="sxs-lookup"><span data-stu-id="479e5-123">What is the communications plan to alert stakeholders (end users, application owners, and infrastructure owners)?</span></span>
8. <span data-ttu-id="479e5-124">根據環境的複雜度，是否應該有應用程式無法供使用者和應用程式擁有者使用的維護期間？</span><span class="sxs-lookup"><span data-stu-id="479e5-124">Depending on the complexity of the environment, should there be a maintenance period where the application is unavailable to end users and to application owners?</span></span>  <span data-ttu-id="479e5-125">如果是這樣，該期間需要多久？</span><span class="sxs-lookup"><span data-stu-id="479e5-125">If so, for how long?</span></span>
9. <span data-ttu-id="479e5-126">確保專案關係人了解並精通 Azure Resource Manager 的訓練規劃為何？</span><span class="sxs-lookup"><span data-stu-id="479e5-126">What is the training plan to ensure stakeholders are knowledgeable and proficient in Azure Resource Manager?</span></span>
10. <span data-ttu-id="479e5-127">移轉的程式管理或專案管理規劃為何？</span><span class="sxs-lookup"><span data-stu-id="479e5-127">What is the program management or project management plan for the migration?</span></span>
11. <span data-ttu-id="479e5-128">Azure Resource Manager 移轉和其他相關技術藍圖的時間表為何？</span><span class="sxs-lookup"><span data-stu-id="479e5-128">What are the timelines for the Azure Resource Manager migration and other related technology road maps?</span></span>  <span data-ttu-id="479e5-129">它們之間的配合是否理想？</span><span class="sxs-lookup"><span data-stu-id="479e5-129">Are they optimally aligned?</span></span>

### <a name="patterns-of-success"></a><span data-ttu-id="479e5-130">成功的模式</span><span class="sxs-lookup"><span data-stu-id="479e5-130">Patterns of success</span></span>

<span data-ttu-id="479e5-131">成功的客戶會進行詳細的規劃，並針對上述問題進行討論、記載和控管。</span><span class="sxs-lookup"><span data-stu-id="479e5-131">Successful customers have detailed plans where the above questions are discussed, documented and governed.</span></span>  <span data-ttu-id="479e5-132">請務必與贊助者和專案關係人廣泛地溝通移轉規劃。</span><span class="sxs-lookup"><span data-stu-id="479e5-132">Ensure the migration plans are broadly communicated to sponsors and stakeholders.</span></span>  <span data-ttu-id="479e5-133">讓自己具備有關移轉選項的知識；強烈建議您閱讀以下的移轉文件集。</span><span class="sxs-lookup"><span data-stu-id="479e5-133">Equip yourself with knowledge about your migration options; reading through this migration document set below is highly recommended.</span></span>

* [<span data-ttu-id="479e5-134">平台支援的 IaaS 資源移轉 (從傳統移轉至 Azure Resource Manager) 的概觀</span><span class="sxs-lookup"><span data-stu-id="479e5-134">Overview of platform-supported migration of IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
* [<span data-ttu-id="479e5-135">平台支援的從傳統移轉至 Azure Resource Manager 的技術深入探討</span><span class="sxs-lookup"><span data-stu-id="479e5-135">Technical deep dive on platform-supported migration from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-deep-dive.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
* [<span data-ttu-id="479e5-136">將 IaaS 資源從傳統移轉至 Azure Resource Manager 的規劃</span><span class="sxs-lookup"><span data-stu-id="479e5-136">Planning for migration of IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-plan.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
* [<span data-ttu-id="479e5-137">使用 PowerShell 將 IaaS 資源從傳統移轉至 Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="479e5-137">Use PowerShell to migrate IaaS resources from classic to Azure Resource Manager</span></span>](../windows/migration-classic-resource-manager-ps.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="479e5-138">使用 CLI 將 IaaS 資源從傳統移轉至 Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="479e5-138">Use CLI to migrate IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-cli.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
* [<span data-ttu-id="479e5-139">用於協助將 IaaS 資源從傳統移轉至 Azure Resource Manager 的社群工具</span><span class="sxs-lookup"><span data-stu-id="479e5-139">Community tools for assisting with migration of IaaS resources from classic to Azure Resource Manager</span></span>](../windows/migration-classic-resource-manager-community-tools.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="479e5-140">檢閱最常見的移轉錯誤</span><span class="sxs-lookup"><span data-stu-id="479e5-140">Review most common migration errors</span></span>](migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
* [<span data-ttu-id="479e5-141">檢閱有關將 IaaS 資源從傳統移轉至 Azure Resource Manager 的常見問題集</span><span class="sxs-lookup"><span data-stu-id="479e5-141">Review the most frequently asked questions about migrating IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-faq.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)

### <a name="pitfalls-to-avoid"></a><span data-ttu-id="479e5-142">要避免的陷阱</span><span class="sxs-lookup"><span data-stu-id="479e5-142">Pitfalls to avoid</span></span>

- <span data-ttu-id="479e5-143">規劃失敗。</span><span class="sxs-lookup"><span data-stu-id="479e5-143">Failure to plan.</span></span>  <span data-ttu-id="479e5-144">此移轉的技術步驟已經過證實，且結果是可預測的。</span><span class="sxs-lookup"><span data-stu-id="479e5-144">The technology steps of this migration are proven and the outcome is predictable.</span></span>
- <span data-ttu-id="479e5-145">假設在平台支援的移轉 API 會負責處理所有案例。</span><span class="sxs-lookup"><span data-stu-id="479e5-145">Assumption that the platform supported migration API will account for all scenarios.</span></span> <span data-ttu-id="479e5-146">閱讀[不支援的功能和組態](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json#unsupported-features-and-configurations)來了解支援的案例。</span><span class="sxs-lookup"><span data-stu-id="479e5-146">Read the [unsupported features and configurations](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json#unsupported-features-and-configurations) to understand what scenarios are supported.</span></span>
- <span data-ttu-id="479e5-147">未針對使用者規劃潛在的應用程式中斷。</span><span class="sxs-lookup"><span data-stu-id="479e5-147">Not planning potential application outage for end users.</span></span>  <span data-ttu-id="479e5-148">規劃足夠的緩衝時間，來警告使用者可能無法使用應用程式的時間。</span><span class="sxs-lookup"><span data-stu-id="479e5-148">Plan enough buffer to adequately warn end users of potentially unavailable application time.</span></span>


## <a name="lab-test"></a><span data-ttu-id="479e5-149">實驗室測試</span><span class="sxs-lookup"><span data-stu-id="479e5-149">Lab Test</span></span> 

<span data-ttu-id="479e5-150">**複寫您的環境並執行測試移轉**</span><span class="sxs-lookup"><span data-stu-id="479e5-150">**Replicate your enviornment and do a test migration**</span></span>
  > [!NOTE]
  > <span data-ttu-id="479e5-151">現有環境的確切複寫是使用 Microsoft 支援服務未正式支援的社群貢獻工具來執行。</span><span class="sxs-lookup"><span data-stu-id="479e5-151">Exact replication of your existing environment is executed by using a community-contributed tool which is not officially supported by Microsoft Support.</span></span> <span data-ttu-id="479e5-152">因此，這是**選擇性**步驟，但它是找出問題，而不需接觸生產環境的最佳方式。</span><span class="sxs-lookup"><span data-stu-id="479e5-152">Therefore, it is an **optional** step but it is the best way to find out issues without touching your production environments.</span></span> <span data-ttu-id="479e5-153">如果無法使用社群提供的工具，則請閱讀以下的驗證/準備/中止試執行相關建議。</span><span class="sxs-lookup"><span data-stu-id="479e5-153">If using a community-contributed tool is not an option, then read about the Validate/Prepare/Abort Dry Run recommendation below.</span></span>
  >
  
  <span data-ttu-id="479e5-154">確保順利移轉的最佳方式，是以實際會進行的方式 (計算、網路和儲存體) 來進行您的實驗室測試。</span><span class="sxs-lookup"><span data-stu-id="479e5-154">Conducting a lab test of your exact scenario (compute, networking, and storage) is the best way to ensure a smooth migration.</span></span> <span data-ttu-id="479e5-155">這將有助於確保：</span><span class="sxs-lookup"><span data-stu-id="479e5-155">This will help ensure:</span></span>

  - <span data-ttu-id="479e5-156">完全獨立的實驗室或要測試的現有非生產環境。</span><span class="sxs-lookup"><span data-stu-id="479e5-156">A wholly separate lab or an existing non-production environment to test.</span></span> <span data-ttu-id="479e5-157">我們建議使用可以重複移轉且可透過破壞性方式修改的完全獨立實驗室。</span><span class="sxs-lookup"><span data-stu-id="479e5-157">We recommend a wholly separate lab that can be migrated repeatedly and can be destructively modified.</span></span>  <span data-ttu-id="479e5-158">從實際的訂用帳戶收集/水合中繼資料的指令碼如下所示。</span><span class="sxs-lookup"><span data-stu-id="479e5-158">Scripts to collect/hydrate metadata from the real subscriptions are listed below.</span></span>
  - <span data-ttu-id="479e5-159">在個別的訂用帳戶中建立實驗室是良好的作法。</span><span class="sxs-lookup"><span data-stu-id="479e5-159">It's a good idea to create the lab in a separate subscription.</span></span> <span data-ttu-id="479e5-160">原因在於實驗室會一再地進行重複清理，而具有分開、隔離的訂用帳戶將可降低不小心刪除實際項目的機會。</span><span class="sxs-lookup"><span data-stu-id="479e5-160">The reason is that the lab will be torn down repeatedly, and having a separate, isolated subscription will reduce the chance that something real will get accidently deleted.</span></span>

  <span data-ttu-id="479e5-161">使用 AsmMetadataParser 工具可以達到此目的。</span><span class="sxs-lookup"><span data-stu-id="479e5-161">This can be accomplished by using the AsmMetadataParser tool.</span></span> [<span data-ttu-id="479e5-162">在這裡深入了解此工具</span><span class="sxs-lookup"><span data-stu-id="479e5-162">Read more about this tool here</span></span>](https://github.com/Azure/classic-iaas-resourcemanager-migration/tree/master/AsmToArmMigrationApiToolset)

### <a name="patterns-of-success"></a><span data-ttu-id="479e5-163">成功的模式</span><span class="sxs-lookup"><span data-stu-id="479e5-163">Patterns of success</span></span>

<span data-ttu-id="479e5-164">以下是在許多較大型移轉中發現的問題。</span><span class="sxs-lookup"><span data-stu-id="479e5-164">The following were issues discovered in many of the larger migrations.</span></span> <span data-ttu-id="479e5-165">這不是詳盡完整的清單，您應該參閱[不支援的功能和組態](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json#unsupported-features-and-configurations)以取得更多詳細資料。</span><span class="sxs-lookup"><span data-stu-id="479e5-165">This is not an exhaustive list and you should refer to the [unsupported features and configurations](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json#unsupported-features-and-configurations) for more detail.</span></span> <span data-ttu-id="479e5-166">您可能會或可能不會發生這些技術問題，但如果您確實在嘗試移轉之前解決這些問題，將可確保獲得更順暢的體驗。</span><span class="sxs-lookup"><span data-stu-id="479e5-166">You may or may not encounter these technical issues but if you do solving these before attempting migration will ensure a smoother experience.</span></span>

- <span data-ttu-id="479e5-167">**執行驗證/準備/中止試執行** - 這可能是確保傳統至 Azure Resource Manager 移轉是否成功的最重要步驟。</span><span class="sxs-lookup"><span data-stu-id="479e5-167">**Do a Validate/Prepare/Abort Dry Run** -  This is perhaps the most important step to ensure Classic to Azure Resource Manager migration success.</span></span> <span data-ttu-id="479e5-168">移轉 API 有三個主要步驟：驗證、準備和認可。</span><span class="sxs-lookup"><span data-stu-id="479e5-168">The migration API has three main steps: Validate, Prepare and Commit.</span></span> <span data-ttu-id="479e5-169">「驗證」將讀取傳統環境的狀態，並傳回所有問題的結果。</span><span class="sxs-lookup"><span data-stu-id="479e5-169">Validate will read the state of your classic environment and return a result of all issues.</span></span> <span data-ttu-id="479e5-170">不過，由於 Azure Resource Manager 堆疊中可能存在一些問題，「驗證」將不會擷取每個項目。</span><span class="sxs-lookup"><span data-stu-id="479e5-170">However, because some issues might exist in the Azure Resource Manager stack, Validate will not catch everything.</span></span> <span data-ttu-id="479e5-171">移轉程序中的下一個步驟，也就是「準備」，會協助公開這些問題。</span><span class="sxs-lookup"><span data-stu-id="479e5-171">The next step in migration process, Prepare will help expose those issues.</span></span> <span data-ttu-id="479e5-172">「準備」會將中繼資料從傳統移動至 Azure Resource Manager，但不會認可移動，也不會移除或變更傳統端上的任何項目。</span><span class="sxs-lookup"><span data-stu-id="479e5-172">Prepare will move the metadata from Classic to Azure Resource Manager, but will not commit the move, and will not remove or change anything on the Classic side.</span></span> <span data-ttu-id="479e5-173">試執行則牽涉到準備移轉，然後中止 (**不認可**) 移轉的準備。</span><span class="sxs-lookup"><span data-stu-id="479e5-173">The dry run involves preparing the migration, then aborting (**not committing**) the migration prepare.</span></span> <span data-ttu-id="479e5-174">驗證/準備/中止試執行的目標是要查看 Azure Resource Manager 堆疊中的所有中繼資料，加以檢查 (*以程式設計方式或在入口網站中*)，並確認所有項目移轉正確，以及解決技術問題。</span><span class="sxs-lookup"><span data-stu-id="479e5-174">The goal of validate/prepare/abort dry run is to see all of the metadata in the Azure Resource Manager stack, examine it (*programmatically or in Portal*), and verify that everything migrates correctly, and work through technical issues.</span></span>  <span data-ttu-id="479e5-175">它也會讓您大致了解移轉時間，以便規劃停機時間。</span><span class="sxs-lookup"><span data-stu-id="479e5-175">It will also give you a sense of migration duration so you can plan for downtime accordingly.</span></span>  <span data-ttu-id="479e5-176">驗證/準備/中止不會造成任何使用者停機時間；因此，它對應用程式的使用不具破壞性。</span><span class="sxs-lookup"><span data-stu-id="479e5-176">A validate/prepare/abort does not cause any user downtime; therefore, it is non-disruptive to application usage.</span></span>
  - <span data-ttu-id="479e5-177">您需要在試執行之前解決以下項目，不過試執行測試也會安全地排清這些遺漏的準備步驟。</span><span class="sxs-lookup"><span data-stu-id="479e5-177">The items below will need to be solved before the dry run, but a dry run test will also safely flush out these preparation steps if they are missed.</span></span> <span data-ttu-id="479e5-178">在企業移轉期間，我們發現試執行是確保移轉整備安全且無價的方式。</span><span class="sxs-lookup"><span data-stu-id="479e5-178">During enterprise migration, we've found the dry run to be a safe and invaluable way to ensure migration readiness.</span></span>
  - <span data-ttu-id="479e5-179">當準備執行中時，將會鎖定整個虛擬網路的控制平面 (Azure 管理作業)；因此，無法在驗證/準備/中止期間對 VM 中繼資料進行變更。</span><span class="sxs-lookup"><span data-stu-id="479e5-179">When prepare is running, the control plane (Azure management operations) will be locked for the whole virtual network, so no changes can be made to VM metadata during validate/prepare/abort.</span></span>  <span data-ttu-id="479e5-180">但另一方面，任何應用程式功能 (RD、VM 使用量等) 將不會受到影響。</span><span class="sxs-lookup"><span data-stu-id="479e5-180">But otherwise any application function (RD, VM usage, etc.) will be unaffected.</span></span>  <span data-ttu-id="479e5-181">VM 的使用者將不會知道正在執行試執行。</span><span class="sxs-lookup"><span data-stu-id="479e5-181">Users of the VMs will not know that the dry run is being executed.</span></span>

- <span data-ttu-id="479e5-182">**ExpressRoute 線路和 VPN**。</span><span class="sxs-lookup"><span data-stu-id="479e5-182">**Express Route Circuits and VPN**.</span></span> <span data-ttu-id="479e5-183">目前具有授權連結的 ExpressRoute 閘道，無法在沒有停機時間的情況下進行移轉。</span><span class="sxs-lookup"><span data-stu-id="479e5-183">Currently Express Route Gateways with authorization links cannot be migrated without downtime.</span></span> <span data-ttu-id="479e5-184">如需因應措施，請參閱[將 ExpressRoute 線路和相關聯的虛擬網路從傳統部署模型移轉至 Resource Manager 部署模型](../../expressroute/expressroute-migration-classic-resource-manager.md)。</span><span class="sxs-lookup"><span data-stu-id="479e5-184">For the workaround, see [Migrate ExpressRoute circuits and associated virtual networks from the classic to the Resource Manager deployment model](../../expressroute/expressroute-migration-classic-resource-manager.md).</span></span>

- <span data-ttu-id="479e5-185">**VM 擴充功能** - 虛擬機器擴充功能可能是移轉執行中 VM 其中一個最大的障礙。</span><span class="sxs-lookup"><span data-stu-id="479e5-185">**VM Extensions** - Virtual Machine extensions are potentially one of the biggest roadblocks to migrating running VMs.</span></span> <span data-ttu-id="479e5-186">VM 擴充功能的修復可能需要多達 1-2 天，因此請適當地進行規劃。</span><span class="sxs-lookup"><span data-stu-id="479e5-186">Remediation of VM Extensions could take upwards of 1-2 days, so plan accordingly.</span></span>  <span data-ttu-id="479e5-187">需要使用中的 Azure 代理程式，才能向 VM 擴充功能回報執行中 VM 的狀態。</span><span class="sxs-lookup"><span data-stu-id="479e5-187">A working Azure agent is needed to report back VM Extension status of running VMs.</span></span> <span data-ttu-id="479e5-188">如果執行中 VM 的狀態恢復為已損毀，這種情況將會中止移轉。</span><span class="sxs-lookup"><span data-stu-id="479e5-188">If the status comes back as bad for a running VM, this will halt migration.</span></span> <span data-ttu-id="479e5-189">代理程式本身不需要採用工作順序即可啟用移轉，但如果 VM 上存在擴充功能，則將需要工作代理程式與輸出網際網路連線 (具有 DNS)，移轉才能繼續進行。</span><span class="sxs-lookup"><span data-stu-id="479e5-189">The agent itself does not need to be in working order to enable migration, but if extensions exist on the VM, then both a working agent AND outbound internet connectivity (with DNS) will be needed for migration to move forward.</span></span>
  - <span data-ttu-id="479e5-190">DNS 伺服器的連線遺失時在移轉期間，除了 BGInfo v1 的所有 VM 擴充功能。\*需要先移除從每個 VM 之前移轉的準備和後續重新加入的回至 VM 在 Azure 資源管理員移轉之後。</span><span class="sxs-lookup"><span data-stu-id="479e5-190">If connectivity to a DNS server is lost during migration, all VM Extensions except BGInfo v1.\* need to first be removed from every VM before migration prepare, and subsequently re-added back to the VM after Azure Resource Manager migration.</span></span>  <span data-ttu-id="479e5-191">**這僅適用於執行中的 VM。**</span><span class="sxs-lookup"><span data-stu-id="479e5-191">**This is only for VMs that are running.**</span></span>  <span data-ttu-id="479e5-192">如果 VM 已停止 (解除配置)，則不需要移除 VM 擴充功能。</span><span class="sxs-lookup"><span data-stu-id="479e5-192">If the VMs are stopped deallocated, VM Extensions do not need to be removed.</span></span> <span data-ttu-id="479e5-193">**注意：**許多擴充功能 (例如 Azure 診斷和資訊安全中心監視) 在移轉之後將會自行重新安裝，因此移除這些功能不是問題。</span><span class="sxs-lookup"><span data-stu-id="479e5-193">**Note:** Many extensions like Azure diagnostics and security center monitoring will reinstall themselves after migration, so removing them is not a problem.</span></span>
  - <span data-ttu-id="479e5-194">此外，請確定網路安全性群組不會限制輸出網際網路存取。</span><span class="sxs-lookup"><span data-stu-id="479e5-194">In addition, make sure Network Security Groups are not restricting outbound internet access.</span></span> <span data-ttu-id="479e5-195">某些網路安全性群組組態可能會發生此情況。</span><span class="sxs-lookup"><span data-stu-id="479e5-195">This can happen with some Network Security Groups configurations.</span></span> <span data-ttu-id="479e5-196">需要輸出網際網路存取 (和 DNS)，才能將 VM 擴充功能移轉至 Azure Resource Manager。</span><span class="sxs-lookup"><span data-stu-id="479e5-196">Outbound internet access (and DNS) is needed for VM Extensions to be migrated to Azure Resource Manager.</span></span> 
  - <span data-ttu-id="479e5-197">BGInfo 擴充功能有兩個版本：v1 和 v2。</span><span class="sxs-lookup"><span data-stu-id="479e5-197">There are two versions of the BGInfo extension: v1 and v2.</span></span>  <span data-ttu-id="479e5-198">如果 VM 是使用傳統入口網站或 PowerShell 建立，VM 上可能會有 v1 擴充功能。</span><span class="sxs-lookup"><span data-stu-id="479e5-198">If the VM was created using the classic portal or PowerShell, the VM will likely have the v1 extension on it.</span></span> <span data-ttu-id="479e5-199">不需要移除此擴充功能，且移轉 API 將會略過它 (不移轉)。</span><span class="sxs-lookup"><span data-stu-id="479e5-199">This extension does not need to be removed and will be skipped (not migrated) by the migration API.</span></span> <span data-ttu-id="479e5-200">不過，如果傳統 VM 是使用新的 Azure 入口網站建立，在代理程式運作中，且具有輸出網際網路存取 (DNS) 的前提下，可能會有以 JSON 為基礎，且可以移轉至 Azure Resource Manager 的 BGInfo v2 版本。</span><span class="sxs-lookup"><span data-stu-id="479e5-200">However, if the Classic VM was created with the new Azure portal, it will likely have the JSON-based v2 version of BGInfo, which can be migrated to Azure Resource Manager provided the agent is working and has outbound internet access (and DNS).</span></span> 
  - <span data-ttu-id="479e5-201">**修復選項 1**。</span><span class="sxs-lookup"><span data-stu-id="479e5-201">**Remediation Option 1**.</span></span> <span data-ttu-id="479e5-202">如果您知道您的 VM 在不會有輸出網際網路存取、使用中 DNS 服務，和使用中 Azure 代理程式，則請在準備移轉之前解除安裝所有 VM 擴充功能，然後在移轉之後重新安裝 VM 擴充功能。</span><span class="sxs-lookup"><span data-stu-id="479e5-202">If you know your VMs will not have outbound internet access, a working DNS service, and working Azure agents on the VMs, then uninstall all VM extensions as part of the migration before Prepare, then reinstall the VM Extensions after migration.</span></span> 
  - <span data-ttu-id="479e5-203">**修復選項 2**。</span><span class="sxs-lookup"><span data-stu-id="479e5-203">**Remediation Option 2**.</span></span> <span data-ttu-id="479e5-204">如果 VM 擴充功能會造成太大的問題，另一個選擇是在移轉前將所有 VM 關閉/解除配置。</span><span class="sxs-lookup"><span data-stu-id="479e5-204">If VM extensions are too big of a hurdle, another option is to shutdown/deallocate all VMs before migration.</span></span> <span data-ttu-id="479e5-205">移轉已取消配置的 VM，然後在 Azure Resource Manager 端重新啟動。</span><span class="sxs-lookup"><span data-stu-id="479e5-205">Migrate the deallocated VMs, then restart them on the Azure Resource Manager side.</span></span> <span data-ttu-id="479e5-206">優點是 VM 擴充功能也會一併移轉。</span><span class="sxs-lookup"><span data-stu-id="479e5-206">The benefit here is that VM extensions will migrate.</span></span> <span data-ttu-id="479e5-207">缺點是會遺失所有對外公開的虛擬 IP (可能是非入門者)；很明顯地 VM 將會關閉，對工作應用程式造成更大的影響。</span><span class="sxs-lookup"><span data-stu-id="479e5-207">The downside is that all public facing Virtual IPs will be lost (this may be a non-starter), and obviously the VMs will shut down causing a much greater impact on working applications.</span></span>

    > [!NOTE] 
    > <span data-ttu-id="479e5-208">如果已針對要移轉的執行中 VM 設定 Azure 資訊安全中心原則，必須先停止安全性原則再移除擴充功能，否則會在移除擴充功能之後，自動在 VM 上重新安裝安全性監視擴充功能。</span><span class="sxs-lookup"><span data-stu-id="479e5-208">If an Azure Security Center policy is configured against the running VMs being migrated, the security policy needs to be stopped before removing extensions, otherwise the security monitoring extension will be reinstalled automatically on the VM after removing it.</span></span>

- <span data-ttu-id="479e5-209">**可用性設定組** - 若要將虛擬網路 (vNet) 移轉到 Azure Resource Manager，傳統部署 (也就是雲端服務) 所包含的 VM 必須全部位在一個可用性設定組中，或是所有 VM 均不能在任何可用性設定組中。</span><span class="sxs-lookup"><span data-stu-id="479e5-209">**Availability Sets** - For a virtual network (vNet) to be migrated to Azure Resource Manager, the Classic deployment (i.e. cloud service) contained VMs must all be in one availability set, or the VMs must all not be in any availability set.</span></span> <span data-ttu-id="479e5-210">雲端服務中有一個以上的可用性設定組與 Azure Resource Manager 不相容，將會中止移轉。</span><span class="sxs-lookup"><span data-stu-id="479e5-210">Having more than one availability set in the cloud service is not compatible with Azure Resource Manager and will halt migration.</span></span>  <span data-ttu-id="479e5-211">此外，不能有一些 VM 在可用性設定組中，而一些 VM 則不在可用性設定組中。</span><span class="sxs-lookup"><span data-stu-id="479e5-211">Additionally, there cannot be some VMs in an availability set, and some VMs not in an availability set.</span></span> <span data-ttu-id="479e5-212">若要解決此問題，您必須修復或重新改組雲端服務。</span><span class="sxs-lookup"><span data-stu-id="479e5-212">To resolve this, you will need to remediate or reshuffle your cloud service.</span></span>  <span data-ttu-id="479e5-213">因為這可能會耗費大量時間，請詳細規劃。</span><span class="sxs-lookup"><span data-stu-id="479e5-213">Plan accordingly as this might be time consuming.</span></span> 

- <span data-ttu-id="479e5-214">**Web/背景工作角色部署** - 無法將包含 Web 和背景工作角色的雲端服務移轉至 Azure Resource Manager。</span><span class="sxs-lookup"><span data-stu-id="479e5-214">**Web/Worker Role Deployments** -  Cloud Services containing web and worker roles cannot migrate to Azure Resource Manager.</span></span> <span data-ttu-id="479e5-215">開始移轉之前，必須先從虛擬網路移除 Web/背景工作角色。</span><span class="sxs-lookup"><span data-stu-id="479e5-215">The web/worker roles must first be removed from the virtual network before migration can start.</span></span>  <span data-ttu-id="479e5-216">典型的解決方案是只將 Web/背景工作角色執行個體移至也與 ExpressRoute 線路連結的不同傳統虛擬網路，或是將程式碼移轉至較新的 PaaS 應用程式服務 (此討論已超出本文件的範圍)。</span><span class="sxs-lookup"><span data-stu-id="479e5-216">A typical solution is to just move web/worker role instances to a separate Classic virtual network that is also linked to an ExpressRoute circuit, or to migrate the code to newer PaaS App Services (this discussion is beyond the scope of this document).</span></span> <span data-ttu-id="479e5-217">在先前的重新部署案例中，建立新的傳統虛擬網路、將 Web/背景工作角色移動/重新部署至該新虛擬網路，然後從要移動的虛擬網路中刪除部署。</span><span class="sxs-lookup"><span data-stu-id="479e5-217">In the former redeploy case, create a new Classic virtual network, move/redeploy the web/worker roles to that new virtual network, then delete the deployments from the virtual network being moved.</span></span> <span data-ttu-id="479e5-218">不需要變更程式碼。</span><span class="sxs-lookup"><span data-stu-id="479e5-218">No code changes required.</span></span> <span data-ttu-id="479e5-219">新的[虛擬網路對等互連](../../virtual-network/virtual-network-peering-overview.md)功能可用來將包含 Web/背景工作角色的傳統虛擬網路與在相同 Azure 區域中的其他虛擬網路 (例如要移轉的虛擬網路) 形成對等互連 (**在虛擬網路移轉完成之後，因為不能移轉已形成對等互連的虛擬網路**)，因此可提供相同功能，而不會損失效能且沒有延遲/頻寬罰則。</span><span class="sxs-lookup"><span data-stu-id="479e5-219">The new [Virtual Network Peering](../../virtual-network/virtual-network-peering-overview.md) capability can be used to peer together the classic virtual network containing the web/worker roles and other virtual networks in the same Azure region such as the virtual network being migrated (**after virtual network migration is completed as peered virtual networks cannot be migrated**), hence providing the same capabilities with no performance loss and no latency/bandwidth penalties.</span></span> <span data-ttu-id="479e5-220">由於新增了[虛擬網路對等互連](../../virtual-network/virtual-network-peering-overview.md)，現在可輕鬆地移轉Web/背景工作角色部署，而不會封鎖對 Azure Resource Manager 的移轉。</span><span class="sxs-lookup"><span data-stu-id="479e5-220">Given the addition of [Virtual Network Peering](../../virtual-network/virtual-network-peering-overview.md), web/worker role deployments can now easily be mitigated and not block the migration to Azure Resource Manager.</span></span>

- <span data-ttu-id="479e5-221">**Azure Resource Manager 配額** - Azure 區域對於傳統和 Azure Resource Manager 有個別的配額/限制。</span><span class="sxs-lookup"><span data-stu-id="479e5-221">**Azure Resource Manager Quotas** - Azure regions have separate quotas/limits for both Classic and Azure Resource Manager.</span></span> <span data-ttu-id="479e5-222">即使在未取用新硬體的移轉案例中 *(我們正在將現有的 VM 從傳統交換至 Azure Resource Manager)*，Azure Resource Manager 配額仍必須具有足夠的容量，才可開始進行移轉。</span><span class="sxs-lookup"><span data-stu-id="479e5-222">Even though in a migration scenario new hardware isn't being consumed *(we're swapping existing VMs from Classic to Azure Resource Manager)*, Azure Resource Manager quotas still need to be in place with enough capacity before migration can start.</span></span> <span data-ttu-id="479e5-223">下列是我們發現會造成問題的主要限制。</span><span class="sxs-lookup"><span data-stu-id="479e5-223">Listed below are the major limits we've seen cause problems.</span></span>  <span data-ttu-id="479e5-224">開啟配額支援票證來提高限制。</span><span class="sxs-lookup"><span data-stu-id="479e5-224">Open a quota support ticket to raise the limits.</span></span> 

    > [!NOTE]
    > <span data-ttu-id="479e5-225">必須在與您要移轉的目前環境相同的區域中提高這些限制。</span><span class="sxs-lookup"><span data-stu-id="479e5-225">These limits need to be raised in the same region as your current enviornment to be migrated.</span></span>
    >

    - <span data-ttu-id="479e5-226">網路介面</span><span class="sxs-lookup"><span data-stu-id="479e5-226">Network Interfaces</span></span>
    - <span data-ttu-id="479e5-227">負載平衡器</span><span class="sxs-lookup"><span data-stu-id="479e5-227">Load Balancers</span></span>
    - <span data-ttu-id="479e5-228">公用 IP</span><span class="sxs-lookup"><span data-stu-id="479e5-228">Public IPs</span></span>
    - <span data-ttu-id="479e5-229">靜態公用 IP</span><span class="sxs-lookup"><span data-stu-id="479e5-229">Static Public IPs</span></span>
    - <span data-ttu-id="479e5-230">核心</span><span class="sxs-lookup"><span data-stu-id="479e5-230">Cores</span></span>
    - <span data-ttu-id="479e5-231">網路安全性群組</span><span class="sxs-lookup"><span data-stu-id="479e5-231">Network Security Groups</span></span>
    - <span data-ttu-id="479e5-232">路由表</span><span class="sxs-lookup"><span data-stu-id="479e5-232">Route Tables</span></span>

    <span data-ttu-id="479e5-233">您可以透過最新版本的 Azure CLI 2.0，使用下列命令來檢查您目前的 Azure Resource Manager 配額。</span><span class="sxs-lookup"><span data-stu-id="479e5-233">You can check your current Azure Resource Manager quotas using the following commands with the latest version of Azure CLI 2.0.</span></span>

    <span data-ttu-id="479e5-234">**計算** *(核心，可用性設定組)*</span><span class="sxs-lookup"><span data-stu-id="479e5-234">**Compute** *(Cores, Avaiability Sets)*</span></span>

    ```bash
    az vm list-usage -l <azure-region> -o jsonc 
    ```

    <span data-ttu-id="479e5-235">**網路** *(虛擬網路、靜態公用 IP、公用 IP、網路安全性群組、網路介面、負載平衡器、路由表)*</span><span class="sxs-lookup"><span data-stu-id="479e5-235">**Network** *(Virtual Networks, Static Public IPs, Public IPs, Network Security Groups, Network Interfaces, Load Balancers, Route Tables)*</span></span>
    
    ```bash
    az network list-usages -l <azure-region> -o jsonc
    ```

    <span data-ttu-id="479e5-236">**儲存體** *(儲存體帳戶)*</span><span class="sxs-lookup"><span data-stu-id="479e5-236">**Storage** *(Storage Account)*</span></span>
    
    ```bash
    az storage account show-usage
    ```

- <span data-ttu-id="479e5-237">**Azure Resource Manager API 節流限制** - 如果您有一個夠大的環境 (例如，</span><span class="sxs-lookup"><span data-stu-id="479e5-237">**Azure Resource Manager API throttling limits** - If you have a large enough environment (eg.</span></span> <span data-ttu-id="479e5-238">VNET 中 > 400 個 VM)，您在 Azure Resource Manager 中可能會達到寫入時預設的 API 節流限制 (目前為 **1200 次寫入/小時**)。</span><span class="sxs-lookup"><span data-stu-id="479e5-238">> 400 VMs in a VNET), you might hit the default API throttling limits for writes (currently **1200 writes/hour**) in Azure Resource Manager.</span></span> <span data-ttu-id="479e5-239">開始之前移轉，您應該提出支援票證來為您的訂用帳戶提高此限制。</span><span class="sxs-lookup"><span data-stu-id="479e5-239">Before starting migration, you should raise a support ticket to increase this limit for your subscription.</span></span>

- <span data-ttu-id="479e5-240">**佈建逾時 VM 狀態** - 如果任何 VM 的狀態為**佈建逾時**，這個問題必須在移轉前解決。</span><span class="sxs-lookup"><span data-stu-id="479e5-240">**Provisioning Timed Out VM Status** - If any VM has the status of **provisioning timed out**, this needs to be resolved pre-migration.</span></span> <span data-ttu-id="479e5-241">您只能利用停機時間解除佈建/重新佈 VM (刪除、保留磁碟，並重新建立 VM)。</span><span class="sxs-lookup"><span data-stu-id="479e5-241">The only way to do this is with downtime by deprovisioning/reprovisioning the VM (delete it, keep the disk, and recreate the VM).</span></span> 

- <span data-ttu-id="479e5-242">**RoleStateUnknown VM 狀態** - 如果因為出現 [角色狀態未知] 錯誤訊息而使得移轉中止，請使用入口網站檢查 VM，並確定它正在執行中。</span><span class="sxs-lookup"><span data-stu-id="479e5-242">**RoleStateUnknown VM Status** - If migration halts due to a **role state unknown** error message, inspect the VM using the portal and ensure it is running.</span></span> <span data-ttu-id="479e5-243">此錯誤通常會在幾分鐘之後自行消失 (不需補救)，而且是虛擬機器**啟動**、**停止**、**重新啟動**作業期間經常會看到的暫時性類型。</span><span class="sxs-lookup"><span data-stu-id="479e5-243">This error will typically go away on its own (no remediation required) after a few minutes and is often a transient type often seen during a Virtual Machine **start**, **stop**, **restart** operations.</span></span> <span data-ttu-id="479e5-244">**建議做法：**幾分鐘後再重試移轉。</span><span class="sxs-lookup"><span data-stu-id="479e5-244">**Recommended practice:** re-try migration again after a few minutes.</span></span> 

- <span data-ttu-id="479e5-245">**Fabric 叢集不存在** - 在某些情況下，某些 VM 由於各種奇怪的原因而無法移轉。</span><span class="sxs-lookup"><span data-stu-id="479e5-245">**Fabric Cluster does not exist** -  In some cases, certain VMs cannot be migrated for various odd reasons.</span></span> <span data-ttu-id="479e5-246">其中一種已知的情況為，如果是最近才建立 VM (在過去一個星期內左右)，然後在尚無法因應 Azure Resource Manager 工作負載的 Azure 叢集登陸時會發生此情況。</span><span class="sxs-lookup"><span data-stu-id="479e5-246">One of these known cases is if the VM was recently created (within the last week or so) and happened to land an Azure cluster that is not yet equipped for Azure Resource Manager workloads.</span></span>  <span data-ttu-id="479e5-247">您會收到 [網狀架構叢集不存在] 錯誤訊息，且無法移轉 VM。</span><span class="sxs-lookup"><span data-stu-id="479e5-247">You will get an error that says **fabric cluster does not exist** and the VM cannot be migrated.</span></span> <span data-ttu-id="479e5-248">通常等候幾天就可解決此特定問題，因為叢集很快就會啟用 Azure Resource Manager。</span><span class="sxs-lookup"><span data-stu-id="479e5-248">Waiting a couple of days will usually resolve this particular problem as the cluster will soon get Azure Resource Manager enabled.</span></span> <span data-ttu-id="479e5-249">不過，有一個立即的解決方法是對 VM `stop-deallocate`，然後再繼續進行移轉，並且在移轉之後，於 Azure Resource Manager 中啟動 VM 備份。</span><span class="sxs-lookup"><span data-stu-id="479e5-249">However, one immediate workaround is to `stop-deallocate` the VM, then continue forward with migration, and start the VM back up in Azure Resource Manager after migrating.</span></span>

### <a name="pitfalls-to-avoid"></a><span data-ttu-id="479e5-250">要避免的陷阱</span><span class="sxs-lookup"><span data-stu-id="479e5-250">Pitfalls to avoid</span></span>

- <span data-ttu-id="479e5-251">請勿採取捷徑而略過驗證/準備/中止試執行移轉。</span><span class="sxs-lookup"><span data-stu-id="479e5-251">Do not take shortcuts and omit the validate/prepare/abort dry run migrations.</span></span>
- <span data-ttu-id="479e5-252">在驗證/準備/中止步驟期間，您可能發生的問題，幾乎全都會浮現。</span><span class="sxs-lookup"><span data-stu-id="479e5-252">Most, if not all, of your potential issues will surface during the validate/prepare/abort steps.</span></span>

## <a name="migration"></a><span data-ttu-id="479e5-253">移轉</span><span class="sxs-lookup"><span data-stu-id="479e5-253">Migration</span></span>

### <a name="technical-considerations-and-tradeoffs"></a><span data-ttu-id="479e5-254">技術考量和取捨</span><span class="sxs-lookup"><span data-stu-id="479e5-254">Technical considerations and tradeoffs</span></span>

<span data-ttu-id="479e5-255">因為您已瀏覽了環境的已知問題，現在您已經準備就緒。</span><span class="sxs-lookup"><span data-stu-id="479e5-255">Now you are ready because you have worked through the known issues with your environment.</span></span>

<span data-ttu-id="479e5-256">對於實際的移轉，您可能要考慮：</span><span class="sxs-lookup"><span data-stu-id="479e5-256">For the real migrations, you might want to consider:</span></span>

1. <span data-ttu-id="479e5-257">規劃及排程虛擬網路 (最小的移轉單位)，並逐漸增加優先順序。</span><span class="sxs-lookup"><span data-stu-id="479e5-257">Plan and schedule the virtual network (smallest unit of migration) with increasing priority.</span></span>  <span data-ttu-id="479e5-258">先進行簡單的虛擬網路，然後進行較複雜的虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="479e5-258">Do the simple virtual networks first, and progress with the more complicated virtual networks.</span></span>
2. <span data-ttu-id="479e5-259">大部分客戶會有非生產環境和生產環境。</span><span class="sxs-lookup"><span data-stu-id="479e5-259">Most customers will have non-production and production environments.</span></span>  <span data-ttu-id="479e5-260">最後才對生產環境進行排程。</span><span class="sxs-lookup"><span data-stu-id="479e5-260">Schedule production last.</span></span>
3. <span data-ttu-id="479e5-261">**(選擇性)** 排程維護停機時間，並加上許多緩衝時間，以因應非預期的問題發生。</span><span class="sxs-lookup"><span data-stu-id="479e5-261">**(OPTIONAL)** Schedule a maintenance downtime with plenty of buffer in case unexpected issues arise.</span></span>
4. <span data-ttu-id="479e5-262">萬一發生問題，請連絡並配合您的支援團隊。</span><span class="sxs-lookup"><span data-stu-id="479e5-262">Communicate with and align with your support teams in case issues arise.</span></span>

### <a name="patterns-of-success"></a><span data-ttu-id="479e5-263">成功的模式</span><span class="sxs-lookup"><span data-stu-id="479e5-263">Patterns of success</span></span>

<span data-ttu-id="479e5-264">應該考慮來自以上實驗室測試一節的技術指引，並在實際移轉之前改善狀況。</span><span class="sxs-lookup"><span data-stu-id="479e5-264">The technical guidance from the Lab Test section above should be considered and mitigated prior to a real migration.</span></span>  <span data-ttu-id="479e5-265">經過足夠測試後，實際上無需太擔心移轉作業。</span><span class="sxs-lookup"><span data-stu-id="479e5-265">With adequate testing, the migration is actually a non-event.</span></span>  <span data-ttu-id="479e5-266">對於生產環境而言，有類似受信任的 Microsoft 合作夥伴或 Microsoft Premier 服務等額外支援會有所幫助。</span><span class="sxs-lookup"><span data-stu-id="479e5-266">For production environments, it might be helpful to have additional support, such as a trusted Microsoft partner or Microsoft Premier services.</span></span>

### <a name="pitfalls-to-avoid"></a><span data-ttu-id="479e5-267">要避免的陷阱</span><span class="sxs-lookup"><span data-stu-id="479e5-267">Pitfalls to avoid</span></span>

<span data-ttu-id="479e5-268">未經過完整測試可能會造成移轉的問題與延遲。</span><span class="sxs-lookup"><span data-stu-id="479e5-268">Not fully testing may cause issues and delay in the migration.</span></span>  

## <a name="beyond-migration"></a><span data-ttu-id="479e5-269">移轉之外</span><span class="sxs-lookup"><span data-stu-id="479e5-269">Beyond Migration</span></span>

### <a name="technical-considerations-and-tradeoffs"></a><span data-ttu-id="479e5-270">技術考量和取捨</span><span class="sxs-lookup"><span data-stu-id="479e5-270">Technical considerations and tradeoffs</span></span>

<span data-ttu-id="479e5-271">既然您已採用 Azure Resource Manager，請善加利用平台。</span><span class="sxs-lookup"><span data-stu-id="479e5-271">Now that you are in Azure Resource Manager, maximize the platform.</span></span>  <span data-ttu-id="479e5-272">閱讀 [Azure Resource Manager 概觀](../../azure-resource-manager/resource-group-overview.md)，找出相關的其他優點。</span><span class="sxs-lookup"><span data-stu-id="479e5-272">Read the [overview of Azure Resource Manager](../../azure-resource-manager/resource-group-overview.md) to find out about additional benefits.</span></span>

<span data-ttu-id="479e5-273">需考量的事項：</span><span class="sxs-lookup"><span data-stu-id="479e5-273">Things to consider:</span></span>

- <span data-ttu-id="479e5-274">將移轉與其他活動統合。</span><span class="sxs-lookup"><span data-stu-id="479e5-274">Bundling the migration with other activities.</span></span>  <span data-ttu-id="479e5-275">大部分客戶會選擇應用程式維護期間。</span><span class="sxs-lookup"><span data-stu-id="479e5-275">Most customers opt for an application maintenance window.</span></span>  <span data-ttu-id="479e5-276">如果是的話，您可能要使用這個停機時間來啟用其他 Azure Resource Manager 功能，例如加密和移轉至受控磁碟。</span><span class="sxs-lookup"><span data-stu-id="479e5-276">If so, you might want to use this downtime to enable other Azure Resource Manager capabilities like encryption and migration to Managed Disks.</span></span>
- <span data-ttu-id="479e5-277">再次瀏覽 Azure Resource Manager 的技術和商業理由；僅在 Azure Resource Manager 上啟用適用於您的環境的其他可用服務。</span><span class="sxs-lookup"><span data-stu-id="479e5-277">Revisit the technical and business reasons for Azure Resource Manager; enable the additional services available only on Azure Resource Manager that apply to your environment.</span></span>
- <span data-ttu-id="479e5-278">利用 PaaS 服務現代化您的環境。</span><span class="sxs-lookup"><span data-stu-id="479e5-278">Modernize your environment with PaaS services.</span></span>

### <a name="patterns-of-success"></a><span data-ttu-id="479e5-279">成功的模式</span><span class="sxs-lookup"><span data-stu-id="479e5-279">Patterns of success</span></span>

<span data-ttu-id="479e5-280">現在請明確設定要在 Azure Resource Manager 中啟用的服務。</span><span class="sxs-lookup"><span data-stu-id="479e5-280">Be purposeful on what services you now want to enable in Azure Resource Manager.</span></span>  <span data-ttu-id="479e5-281">許多客戶發現下列各個項目對其 Azure 環境深具吸引力：</span><span class="sxs-lookup"><span data-stu-id="479e5-281">Many customers find the below compelling for their Azure environments:</span></span>

- <span data-ttu-id="479e5-282">[角色型存取控制](../../azure-resource-manager/resource-group-overview.md#access-control)。</span><span class="sxs-lookup"><span data-stu-id="479e5-282">[Role Based Access Control](../../azure-resource-manager/resource-group-overview.md#access-control).</span></span>
- <span data-ttu-id="479e5-283">[Azure Resource Manager 範本使得部署更容易且更受控制](../../azure-resource-manager/resource-group-overview.md#template-deployment)。</span><span class="sxs-lookup"><span data-stu-id="479e5-283">[Azure Resource Manager templates for easier and more controlled deployment](../../azure-resource-manager/resource-group-overview.md#template-deployment).</span></span>
- <span data-ttu-id="479e5-284">[標籤](../../azure-resource-manager/resource-group-using-tags.md)。</span><span class="sxs-lookup"><span data-stu-id="479e5-284">[Tags](../../azure-resource-manager/resource-group-using-tags.md).</span></span>
- [<span data-ttu-id="479e5-285">活動控制</span><span class="sxs-lookup"><span data-stu-id="479e5-285">Activity Control</span></span>](../../azure-resource-manager/resource-group-audit.md)
- [<span data-ttu-id="479e5-286">資源原則</span><span class="sxs-lookup"><span data-stu-id="479e5-286">Resource Policies</span></span>](../../azure-resource-manager/resource-manager-policy.md)

### <a name="pitfalls-to-avoid"></a><span data-ttu-id="479e5-287">要避免的陷阱</span><span class="sxs-lookup"><span data-stu-id="479e5-287">Pitfalls to avoid</span></span>

<span data-ttu-id="479e5-288">請記住您開始從傳統移轉至 Azure Resource Manager 的原因。</span><span class="sxs-lookup"><span data-stu-id="479e5-288">Remember why you started this Classic to Azure Resource Manager migration journey.</span></span>  <span data-ttu-id="479e5-289">原始的商業理由為何？</span><span class="sxs-lookup"><span data-stu-id="479e5-289">What were the original business reasons?</span></span> <span data-ttu-id="479e5-290">您是否達成商業理由？</span><span class="sxs-lookup"><span data-stu-id="479e5-290">Did you achieve the business reason?</span></span>


## <a name="next-steps"></a><span data-ttu-id="479e5-291">後續步驟</span><span class="sxs-lookup"><span data-stu-id="479e5-291">Next steps</span></span>

* [<span data-ttu-id="479e5-292">平台支援的 IaaS 資源移轉 (從傳統移轉至 Azure Resource Manager) 的概觀</span><span class="sxs-lookup"><span data-stu-id="479e5-292">Overview of platform-supported migration of IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
* [<span data-ttu-id="479e5-293">平台支援的從傳統移轉至 Azure Resource Manager 的技術深入探討</span><span class="sxs-lookup"><span data-stu-id="479e5-293">Technical deep dive on platform-supported migration from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-deep-dive.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
* [<span data-ttu-id="479e5-294">將 IaaS 資源從傳統移轉至 Azure Resource Manager 的規劃</span><span class="sxs-lookup"><span data-stu-id="479e5-294">Planning for migration of IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-plan.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
* [<span data-ttu-id="479e5-295">使用 PowerShell 將 IaaS 資源從傳統移轉至 Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="479e5-295">Use PowerShell to migrate IaaS resources from classic to Azure Resource Manager</span></span>](../windows/migration-classic-resource-manager-ps.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="479e5-296">用於協助將 IaaS 資源從傳統移轉至 Azure Resource Manager 的社群工具</span><span class="sxs-lookup"><span data-stu-id="479e5-296">Community tools for assisting with migration of IaaS resources from classic to Azure Resource Manager</span></span>](../windows/migration-classic-resource-manager-community-tools.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="479e5-297">檢閱最常見的移轉錯誤</span><span class="sxs-lookup"><span data-stu-id="479e5-297">Review most common migration errors</span></span>](migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
* [<span data-ttu-id="479e5-298">檢閱有關將 IaaS 資源從傳統移轉至 Azure Resource Manager 的常見問題集</span><span class="sxs-lookup"><span data-stu-id="479e5-298">Review the most frequently asked questions about migrating IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-faq.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
