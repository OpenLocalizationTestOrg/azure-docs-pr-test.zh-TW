---
title: "透過在 Azure 上的 Linux Cassandra aaaRun |Microsoft 文件"
description: "如何 toorun Cassandra on Linux 的 Azure 虛擬機器中從叢集 Node.js 應用程式"
services: virtual-machines-linux
documentationcenter: nodejs
author: tomarcher
manager: routlaw
editor: 
tags: azure-service-management
ms.assetid: 30de1f29-e97d-492f-ae34-41ec83488de0
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: tarcher
ms.openlocfilehash: 381ca301bbe88d3740cf182f9c44fada5b9ba7cc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="running-cassandra-with-linux-on-azure-and-accessing-it-from-nodejs"></a><span data-ttu-id="4bc83-103">在 Azure 上執行 Cassandra 搭配 Linux 並透過 Node.js 進行存取</span><span class="sxs-lookup"><span data-stu-id="4bc83-103">Running Cassandra with Linux on Azure and Accessing it from Node.js</span></span>
> [!IMPORTANT] 
> <span data-ttu-id="4bc83-104">Azure 建立和處理資源的部署模型有二種： [資源管理員和傳統](../../../resource-manager-deployment-model.md)。</span><span class="sxs-lookup"><span data-stu-id="4bc83-104">Azure has two different deployment models for creating and working with resources: [Resource Manager and Classic](../../../resource-manager-deployment-model.md).</span></span> <span data-ttu-id="4bc83-105">本文件涵蓋使用 hello 傳統部署模型。</span><span class="sxs-lookup"><span data-stu-id="4bc83-105">This article covers using hello Classic deployment model.</span></span> <span data-ttu-id="4bc83-106">Microsoft 建議最新的部署使用 hello 資源管理員的模型。</span><span class="sxs-lookup"><span data-stu-id="4bc83-106">Microsoft recommends that most new deployments use hello Resource Manager model.</span></span> <span data-ttu-id="4bc83-107">請參閱 [Datastax Enterprise](https://azure.microsoft.com/documentation/templates/datastax) 的 Resource Manager 範本和 [CentOS 上的 Spark 叢集和 Cassandra](https://azure.microsoft.com/documentation/templates/spark-and-cassandra-on-centos/)。</span><span class="sxs-lookup"><span data-stu-id="4bc83-107">See Resource Manager templates for [Datastax Enterprise](https://azure.microsoft.com/documentation/templates/datastax) and [Spark cluster and Cassandra on CentOS](https://azure.microsoft.com/documentation/templates/spark-and-cassandra-on-centos/).</span></span>

## <a name="overview"></a><span data-ttu-id="4bc83-108">概觀</span><span class="sxs-lookup"><span data-stu-id="4bc83-108">Overview</span></span>
<span data-ttu-id="4bc83-109">Microsoft Azure 是一個開放雲端平台，可執行 Microsoft 和非 Microsoft 軟體，包括作業系統、應用程式伺服器、傳訊中介軟體，以及來自商業和開放原始碼模型的 SQL 和 NoSQL 資料庫。</span><span class="sxs-lookup"><span data-stu-id="4bc83-109">Microsoft Azure is an open cloud platform that runs both Microsoft as well as non-Microsoft software which  includes operating systems, application servers, messaging middleware as well as SQL and NoSQL databases from both commercial and open source models.</span></span> <span data-ttu-id="4bc83-110">如果要在包括 Azure 在內的公用雲端上建立具有恢復功能的服務，應用程式伺服器和儲存層都必須要有仔細的規劃和審慎的架構。</span><span class="sxs-lookup"><span data-stu-id="4bc83-110">Building resilient services on public clouds including Azure requires careful planning and deliberate architecture for both applications servers as well storage layers.</span></span> <span data-ttu-id="4bc83-111">Cassandra 的分散式儲存架構天生就有助於建置可針對叢集失敗容錯的高可用性系統。</span><span class="sxs-lookup"><span data-stu-id="4bc83-111">Cassandra’s distributed storage architecture naturally helps in building highly available systems that are fault tolerant for cluster failures.</span></span> <span data-ttu-id="4bc83-112">Cassandra 是一種雲端等級的 NoSQL 資料庫，由 Apache Software Foundation 維護 (網址 cassandra.apache.org)；Cassandra 以 Java 撰寫，因此可以在 Windows 與 Linux 平台上執行。</span><span class="sxs-lookup"><span data-stu-id="4bc83-112">Cassandra is a cloud scale NoSQL database maintained by Apache Software Foundation at cassandra.apache.org; Cassandra is written in Java and hence runs on both on Windows as well as Linux platforms.</span></span>

<span data-ttu-id="4bc83-113">這篇文章 hello 重點是 tooshow Cassandra 部署在 Ubuntu 上的做為單一及多資料中心叢集，利用 Microsoft Azure 虛擬機器和虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="4bc83-113">hello focus of this article is tooshow Cassandra deployment on Ubuntu as a single and multi-data center cluster leveraging Microsoft Azure Virtual Machines and Virtual Networks.</span></span> <span data-ttu-id="4bc83-114">hello 叢集部署的實際執行最佳化工作負載超出本文的範圍因為它需要多重磁碟的節點設定，適當的環形拓撲設計和資料模型化 toosupport hello 需要複寫資料一致性、 輸送量和高可用性需求。</span><span class="sxs-lookup"><span data-stu-id="4bc83-114">hello cluster deployment for production optimized workloads is out of scope of this article as it requires multi-disk node configuration, appropriate ring topology design and data modeling toosupport hello needed replication, data consistency, throughput and high availability requirements.</span></span>

<span data-ttu-id="4bc83-115">建置 hello Cassandra 叢集的相關內容的基本方法 tooshow 比較 Docker、 Chef 或 Puppet 這可以讓您輕鬆許多 hello 基礎結構部署這個發行項會使用。</span><span class="sxs-lookup"><span data-stu-id="4bc83-115">This article takes a fundamental approach tooshow what is involved in building hello Cassandra cluster compared Docker, Chef or Puppet which can make hello infrastructure deployment a lot easier.</span></span>  

## <a name="hello-deployment-models"></a><span data-ttu-id="4bc83-116">hello 部署模型</span><span class="sxs-lookup"><span data-stu-id="4bc83-116">hello Deployment Models</span></span>
<span data-ttu-id="4bc83-117">Microsoft Azure 網路允許隔離私用的叢集，可以在其中的 hello 存取限制的 tooattain 正常更細緻的網路安全性的 hello 的部署。</span><span class="sxs-lookup"><span data-stu-id="4bc83-117">Microsoft Azure networking allows hello deployment of isolated private clusters, hello access of which can be restricted tooattain fine grained network security.</span></span>  <span data-ttu-id="4bc83-118">這篇文章是關於顯示在基本層級的 hello Cassandra 部署，因為我們將不著重在 hello 一致性層級和輸送量的 hello 最佳的儲存體設計中。</span><span class="sxs-lookup"><span data-stu-id="4bc83-118">Since this article is about showing hello Cassandra deployment at a fundamental level, we will not focus on hello consistency level and hello optimal storage design for throughput.</span></span> <span data-ttu-id="4bc83-119">以下是我們假設叢集的網路需求的 hello 清單：</span><span class="sxs-lookup"><span data-stu-id="4bc83-119">Here is hello list of networking requirements for our hypothetical cluster:</span></span>

* <span data-ttu-id="4bc83-120">外部系統無法從 Azure 內部或外部存取 Cassandra 資料庫</span><span class="sxs-lookup"><span data-stu-id="4bc83-120">External systems can’t access Cassandra database from within or outside Azure</span></span>
* <span data-ttu-id="4bc83-121">Cassandra 叢集中有 toobe thrift 流量負載平衡器後方</span><span class="sxs-lookup"><span data-stu-id="4bc83-121">Cassandra cluster has toobe behind a load balancer for thrift traffic</span></span>
* <span data-ttu-id="4bc83-122">在每個資料中心部署 Cassandra 節點為兩個群組以提高叢集可用性</span><span class="sxs-lookup"><span data-stu-id="4bc83-122">Deploy Cassandra nodes in two groups in each data center for an enhanced cluster availability</span></span>
* <span data-ttu-id="4bc83-123">鎖定 hello 叢集因此，只有應用程式伺服器陣列具有存取 toohello 資料庫直接</span><span class="sxs-lookup"><span data-stu-id="4bc83-123">Lock down hello cluster so that only application server farm has access toohello database directly</span></span>
* <span data-ttu-id="4bc83-124">除了 SSH 以外，沒有其他公用網路端點</span><span class="sxs-lookup"><span data-stu-id="4bc83-124">No public networking endpoints other than SSH</span></span>
* <span data-ttu-id="4bc83-125">每個 Cassandra 節點需要固定的內部 IP 位址</span><span class="sxs-lookup"><span data-stu-id="4bc83-125">Each Cassandra node needs a fixed internal IP address</span></span>

<span data-ttu-id="4bc83-126">Cassandra 可以部署的 tooa 單一 Azure 區域，或是根據 hello 分散式本質 hello 工作負載的 toomultiple 區域。</span><span class="sxs-lookup"><span data-stu-id="4bc83-126">Cassandra can be deployed tooa single Azure region or toomultiple regions based on hello distributed nature of hello workload.</span></span> <span data-ttu-id="4bc83-127">多區域部署模型可運用 tooserve 使用者更接近 tooa 特定地理位置透過 hello 相同 Cassandra 基礎結構。</span><span class="sxs-lookup"><span data-stu-id="4bc83-127">Multi-region deployment model can be leveraged tooserve end users closer tooa particular geography through hello same Cassandra infrastructure.</span></span> <span data-ttu-id="4bc83-128">Cassandra 的內建節點複寫會負責 hello 同步處理的多重主機寫入來自多個資料中心，並顯示 hello 資料 tooapplications 一致檢視。</span><span class="sxs-lookup"><span data-stu-id="4bc83-128">Cassandra’s built-in node replication takes care of hello synchronization of multi-master writes originating from multiple data centers and presents a consistent view of hello data tooapplications.</span></span> <span data-ttu-id="4bc83-129">多區域部署也會協助 hello 風險降低的 hello 更廣泛的 Azure 服務中斷。</span><span class="sxs-lookup"><span data-stu-id="4bc83-129">Multi-region deployment can also help with hello risk mitigation of hello broader Azure service outages.</span></span> <span data-ttu-id="4bc83-130">Cassandra 的可微調一致性和複寫拓撲有助於滿足應用程式不同的 RPO 需求。</span><span class="sxs-lookup"><span data-stu-id="4bc83-130">Cassandra’s tunable consistency and replication topology will help in meeting diverse RPO needs of applications.</span></span>

### <a name="single-region-deployment"></a><span data-ttu-id="4bc83-131">單一區域部署</span><span class="sxs-lookup"><span data-stu-id="4bc83-131">Single Region Deployment</span></span>
<span data-ttu-id="4bc83-132">我們將開始的單一區域部署和蒐集 hello datacenter 中建立多區域模型的知識。</span><span class="sxs-lookup"><span data-stu-id="4bc83-132">We will start with a single region deployment and harvest hello learnings in creating a multi-region model.</span></span> <span data-ttu-id="4bc83-133">Azure 虛擬網路將會使用的 toocreate 隔離子網路，如此即可符合上述 hello 網路安全性需求。</span><span class="sxs-lookup"><span data-stu-id="4bc83-133">Azure virtual networking will be used toocreate isolated subnets so that hello network security requirements mentioned above can be met.</span></span>  <span data-ttu-id="4bc83-134">建立 hello 單一區域部署中所述的 hello 程序會使用 Ubuntu 14.04 LTS 和 Cassandra 2.08;不過，hello 程序很容易就會採用的 toohello 其他 Linux 變異。</span><span class="sxs-lookup"><span data-stu-id="4bc83-134">hello process described in creating hello single region deployment uses Ubuntu 14.04 LTS and Cassandra 2.08; however, hello process can easily be adopted toohello other Linux variants.</span></span> <span data-ttu-id="4bc83-135">hello 以下是一些 hello 單一區域部署的 hello 系統特性。</span><span class="sxs-lookup"><span data-stu-id="4bc83-135">hello following are some of hello systemic characteristics of hello single region deployment.</span></span>  

<span data-ttu-id="4bc83-136">**高可用性：** hello Cassandra 節點顯示在圖 1 所部署的 hello tootwo 可用性設定組，以便 hello 節點高可用性的多個容錯網域之間分佈。</span><span class="sxs-lookup"><span data-stu-id="4bc83-136">**High Availability:** hello Cassandra nodes shown in hello Figure 1 are deployed tootwo availability sets so that hello nodes are spread between multiple fault domains for high availability.</span></span> <span data-ttu-id="4bc83-137">標註具有每個可用性設定組的 Vm 是對應的 too2 容錯網域。</span><span class="sxs-lookup"><span data-stu-id="4bc83-137">VMs annotated with each availability set is mapped too2 fault domains.</span></span>  <span data-ttu-id="4bc83-138">容錯網域 toomanage 意外關機時 hello 概念，例如主機或客體 OS 修補程式/升級 （應用程式升級） 的升級網域的時間 （例如硬體或軟體失敗） 的 Microsoft Azure 會使用 hello 概念用來管理排定停機時間。</span><span class="sxs-lookup"><span data-stu-id="4bc83-138">Microsoft Azure uses hello concept of fault domain toomanage unplanned down time (e.g. hardware or software failures) while hello concept of upgrade domain (e.g. host or guest OS patching/upgrades, application upgrades) is used for managing scheduled down time.</span></span> <span data-ttu-id="4bc83-139">請參閱[災害復原與高可用性 Azure 應用程式](http://msdn.microsoft.com/library/dn251004.aspx)hello 角色容錯網域和升級網域中取得高可用性。</span><span class="sxs-lookup"><span data-stu-id="4bc83-139">Please see [Disaster Recovery and High Availability for Azure Applications](http://msdn.microsoft.com/library/dn251004.aspx) for hello role of fault and upgrade domains in attaining high availability.</span></span>

![單一區域部署](./media/cassandra-nodejs/cassandra-linux1.png)

<span data-ttu-id="4bc83-141">圖 1：單一區域部署</span><span class="sxs-lookup"><span data-stu-id="4bc83-141">Figure 1: Single region deployment</span></span>

<span data-ttu-id="4bc83-142">請注意在 hello 撰寫本文時，Azure 將不允許的一組 Vm tooa 特定容錯網域; hello 明確對應因此，即使與圖 1 所示的 hello 部署模型，它是統計上可能 hello 的所有虛擬機器都可能對應的 tootwo 容錯網域，而不是四個。</span><span class="sxs-lookup"><span data-stu-id="4bc83-142">Note that at hello time of this writing, Azure doesn’t allow hello explicit mapping of a group of VMs tooa specific fault domain; consequently, even with hello deployment model shown in Figure 1, it is statistically probable that all hello virtual machines may be mapped tootwo fault domains instead of four.</span></span>

<span data-ttu-id="4bc83-143">**負載平衡 Thrift 流量：** Thrift hello web 伺服器內的用戶端程式庫 toohello 叢集連線透過內部負載平衡器。</span><span class="sxs-lookup"><span data-stu-id="4bc83-143">**Load Balancing Thrift Traffic:** Thrift client libraries inside hello web server connect toohello cluster through an internal load balancer.</span></span> <span data-ttu-id="4bc83-144">這需要新增 hello 內部負載平衡器 toohello 「 資料 」 的子網路的 hello 程序 （請參閱圖 1） hello hello 雲端服務裝載 hello Cassandra 叢集內容中。</span><span class="sxs-lookup"><span data-stu-id="4bc83-144">This requires hello process of adding hello internal load balancer toohello “data” subnet (refer Figure 1) in hello context of hello cloud service hosting hello Cassandra cluster.</span></span> <span data-ttu-id="4bc83-145">一旦定義 hello 內部負載平衡器之後，每個節點會需要 hello 負載平衡端點 toobe 加入 hello 註解的負載平衡集與先前定義的負載平衡器名稱。</span><span class="sxs-lookup"><span data-stu-id="4bc83-145">Once hello internal load balancer is defined, each node requires hello load balanced endpoint toobe added with hello annotations of a load balanced set with previously defined load balancer name.</span></span> <span data-ttu-id="4bc83-146">如需詳細資訊，請參閱 [Azure內部負載平衡 ](../../../load-balancer/load-balancer-internal-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="4bc83-146">See [Azure Internal Load Balancing ](../../../load-balancer/load-balancer-internal-overview.md)for more details.</span></span>

<span data-ttu-id="4bc83-147">**叢集種子：**很重要的種子為 hello 新節點會與種子節點 toodiscover hello 拓樸 hello 叢集的通訊，tooselect hello 大多數的高可用性節點。</span><span class="sxs-lookup"><span data-stu-id="4bc83-147">**Cluster Seeds:** It is important tooselect hello most highly available nodes for seeds as hello new nodes will communicate with seed nodes toodiscover hello topology of hello cluster.</span></span> <span data-ttu-id="4bc83-148">從每個可用性設定組的一個節點指定為種子節點 tooavoid 單一失敗點。</span><span class="sxs-lookup"><span data-stu-id="4bc83-148">One node from each availability set is designated as seed nodes tooavoid single point of failure.</span></span>

<span data-ttu-id="4bc83-149">**複寫因數和一致性層級：** Cassandra 的內建高可用性和資料耐久性的特點在於 hello 複寫因數 (RF-複本儲存在 hello 叢集上每個資料列數目) 和一致性層級 （數目讀取/寫入，再傳回 hello 結果 toohello 呼叫端複本 toobe)。</span><span class="sxs-lookup"><span data-stu-id="4bc83-149">**Replication Factor and Consistency Level:** Cassandra’s build-in high-availability and data durability is characterized by hello Replication Factor (RF - number of copies of each row stored on hello cluster) and Consistency Level (number of replicas toobe read/written before returning hello result toohello caller).</span></span> <span data-ttu-id="4bc83-150">而 hello 一致性層級指定時發出 hello CRUD 查詢 hello KEYSPACE （類似 tooa 關聯式資料庫） 建立期間指定複寫因數。</span><span class="sxs-lookup"><span data-stu-id="4bc83-150">Replication factor is specified during hello KEYSPACE (similar tooa relational database) creation whereas hello consistency level is specified while issuing hello CRUD query.</span></span> <span data-ttu-id="4bc83-151">請參閱 Cassandra 文件，網址[設定的一致性](http://www.datastax.com/documentation/cassandra/2.0/cassandra/dml/dml_config_consistency_c.html)一致性的詳細資料和 hello 仲裁計算公式。</span><span class="sxs-lookup"><span data-stu-id="4bc83-151">See Cassandra documentation at [Configuring for Consistency](http://www.datastax.com/documentation/cassandra/2.0/cassandra/dml/dml_config_consistency_c.html) for consistency details and hello formula for quorum computation.</span></span>

<span data-ttu-id="4bc83-152">Cassandra 支援兩種類型的資料完整性模型 – 一致性和最終一致性。hello 複寫因數和一致性層級會一起判斷 hello 資料會一致儘速寫入作業已完成，或將最終保持一致。</span><span class="sxs-lookup"><span data-stu-id="4bc83-152">Cassandra supports two types of data integrity models – Consistency and Eventual Consistency; hello Replication Factor and Consistency Level will together determine if hello data will be consistent as soon as a write operation is complete or it will be eventually consistent.</span></span> <span data-ttu-id="4bc83-153">例如，指定仲裁 hello 一致性層級將一律可確保資料一致性，同時 hello 數目複本 toobe 撰寫成所需的 tooattain 底下的任何一致性層仲裁 （例如一個） 會導致取得一致的最終結果的資料。</span><span class="sxs-lookup"><span data-stu-id="4bc83-153">For example, specifying QUORUM as hello Consistency Level will always ensures data Consistency while any consistency level, below hello number of replicas toobe written as needed tooattain QUORUM (e.g. ONE) results in data being eventually consistent.</span></span>

<span data-ttu-id="4bc83-154">如上所示，以複寫因數 3 及仲裁的 hello 8 個節點叢集 （2 個節點讀取或寫入的一致性） 讀取/寫入一致性層級，可以繼續執行的 hello 理論上遺失在 hello hello 應用程式啟動之前的大部分 1 的節點，每個複寫群組請注意 hello 失敗。</span><span class="sxs-lookup"><span data-stu-id="4bc83-154">hello 8-node cluster shown above, with a replication factor of 3 and QUORUM (2 nodes are read or written for consistency) read/write consistency level, can survive hello theoretical loss of at hello most 1 node per replication group before hello application start noticing hello failure.</span></span> <span data-ttu-id="4bc83-155">這是假設所有的 hello 空格有對稱讀取/寫入要求。</span><span class="sxs-lookup"><span data-stu-id="4bc83-155">This assumes that all hello key spaces have well balanced read/write requests.</span></span>  <span data-ttu-id="4bc83-156">hello 以下是我們將會用於叢集部署的 hello hello 參數：</span><span class="sxs-lookup"><span data-stu-id="4bc83-156">hello following are hello parameters we will use for hello deployed cluster:</span></span>

<span data-ttu-id="4bc83-157">單一區域 Cassandra 叢集設定：</span><span class="sxs-lookup"><span data-stu-id="4bc83-157">Single region Cassandra cluster configuration:</span></span>

| <span data-ttu-id="4bc83-158">叢集參數</span><span class="sxs-lookup"><span data-stu-id="4bc83-158">Cluster Parameter</span></span> | <span data-ttu-id="4bc83-159">值</span><span class="sxs-lookup"><span data-stu-id="4bc83-159">Value</span></span> | <span data-ttu-id="4bc83-160">備註</span><span class="sxs-lookup"><span data-stu-id="4bc83-160">Remarks</span></span> |
| --- | --- | --- |
| <span data-ttu-id="4bc83-161">節點數目 (N)</span><span class="sxs-lookup"><span data-stu-id="4bc83-161">Number of Nodes (N)</span></span> |<span data-ttu-id="4bc83-162">8</span><span class="sxs-lookup"><span data-stu-id="4bc83-162">8</span></span> |<span data-ttu-id="4bc83-163">Hello 叢集中的節點總數</span><span class="sxs-lookup"><span data-stu-id="4bc83-163">Total number of nodes in hello cluster</span></span> |
| <span data-ttu-id="4bc83-164">複寫因素 (RF)</span><span class="sxs-lookup"><span data-stu-id="4bc83-164">Replication Factor (RF)</span></span> |<span data-ttu-id="4bc83-165">3</span><span class="sxs-lookup"><span data-stu-id="4bc83-165">3</span></span> |<span data-ttu-id="4bc83-166">指定資料列的複本數目</span><span class="sxs-lookup"><span data-stu-id="4bc83-166">Number of replicas of a given row</span></span> |
| <span data-ttu-id="4bc83-167">一致性層級 (寫入)</span><span class="sxs-lookup"><span data-stu-id="4bc83-167">Consistency Level (Write)</span></span> |<span data-ttu-id="4bc83-168">QUORUM[(RF/2) +1) = 2] hello 結果的 hello 公式無條件捨去</span><span class="sxs-lookup"><span data-stu-id="4bc83-168">QUORUM[(RF/2) +1) = 2] hello result of hello formula is rounded down</span></span> |<span data-ttu-id="4bc83-169">寫入在 hello 大部分 2 個複本之前傳送 hello 回應 toohello 呼叫端;第 3 個複本會寫入最終一致的方式。</span><span class="sxs-lookup"><span data-stu-id="4bc83-169">Writes at hello most 2 replicas before hello response is sent toohello caller; 3rd replica is written in an eventually consistent manner.</span></span> |
| <span data-ttu-id="4bc83-170">一致性層級 (讀取)</span><span class="sxs-lookup"><span data-stu-id="4bc83-170">Consistency Level (Read)</span></span> |<span data-ttu-id="4bc83-171">仲裁 [(RF/2) + 1 = 2] hello 公式的結果 hello 無條件捨去</span><span class="sxs-lookup"><span data-stu-id="4bc83-171">QUORUM [(RF/2) +1= 2] hello result of hello formula is rounded down</span></span> |<span data-ttu-id="4bc83-172">讀取傳送回應 toohello 呼叫端之前的 2 個複本。</span><span class="sxs-lookup"><span data-stu-id="4bc83-172">Reads 2 replicas before sending response toohello caller.</span></span> |
| <span data-ttu-id="4bc83-173">複寫策略</span><span class="sxs-lookup"><span data-stu-id="4bc83-173">Replication Strategy</span></span> |<span data-ttu-id="4bc83-174">如需 NetworkTopologyStrategy 的詳細資訊，請參閱 Cassandra 文件中的 [資料複寫](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) (英文)</span><span class="sxs-lookup"><span data-stu-id="4bc83-174">NetworkTopologyStrategy see [Data Replication](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="4bc83-175">了解 hello 部署拓撲，並將複本放在節點上，使所有 hello 複本不都會出現在 hello 相同機架</span><span class="sxs-lookup"><span data-stu-id="4bc83-175">Understands hello deployment topology and places replicas on nodes so that all hello replicas don’t end up on hello same rack</span></span> |
| <span data-ttu-id="4bc83-176">Snitch</span><span class="sxs-lookup"><span data-stu-id="4bc83-176">Snitch</span></span> |<span data-ttu-id="4bc83-177">如需 GossipingPropertyFileSnitch 的詳細資訊，請參閱 Cassandra 文件中的 [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) (英文)</span><span class="sxs-lookup"><span data-stu-id="4bc83-177">GossipingPropertyFileSnitch see [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="4bc83-178">NetworkTopologyStrategy 使用告密者 toounderstand hello 拓撲的概念。</span><span class="sxs-lookup"><span data-stu-id="4bc83-178">NetworkTopologyStrategy uses a concept of snitch toounderstand hello topology.</span></span> <span data-ttu-id="4bc83-179">GossipingPropertyFileSnitch 可提供更好的控制權，對應每個節點 toodata 置中與機架中。</span><span class="sxs-lookup"><span data-stu-id="4bc83-179">GossipingPropertyFileSnitch gives better control in mapping each node toodata center and rack.</span></span> <span data-ttu-id="4bc83-180">hello 叢集然後使用八卦 toopropagate 這項資訊。</span><span class="sxs-lookup"><span data-stu-id="4bc83-180">hello cluster then uses gossip toopropagate this information.</span></span> <span data-ttu-id="4bc83-181">這是在動態 IP 設定相對 tooPropertyFileSnitch 更簡單</span><span class="sxs-lookup"><span data-stu-id="4bc83-181">This is much simpler in dynamic IP setting relative tooPropertyFileSnitch</span></span> |

<span data-ttu-id="4bc83-182">**Cassandra 叢集的 Azure 考量：** Microsoft Azure 虛擬機器功能會使用 Azure Blob 儲存體來取得磁碟持續性；Azure 儲存體會基於高持久性因素來為每個磁碟儲存 3 個複本。</span><span class="sxs-lookup"><span data-stu-id="4bc83-182">**Azure Considerations for Cassandra Cluster:** Microsoft Azure Virtual Machines capability uses Azure Blob storage for disk persistence; Azure Storage saves 3 replicas of each disk for high durability.</span></span> <span data-ttu-id="4bc83-183">這表示每個插入 Cassandra 資料表的資料列已經儲存在 3 個複本，因此資料的一致性是已處理即使 hello 複寫因數 (RF) 為 1。</span><span class="sxs-lookup"><span data-stu-id="4bc83-183">That means each row of data inserted into a Cassandra table is already stored in 3 replicas and hence data consistency is already taken care of even if hello Replication Factor (RF) is 1.</span></span> <span data-ttu-id="4bc83-184">複寫因數是 1 hello 主要問題是 hello 應用程式將會經歷停機時間，即使單一 Cassandra 節點失敗。</span><span class="sxs-lookup"><span data-stu-id="4bc83-184">hello main problem with Replication Factor being 1 is that hello application will experience downtime even if a single Cassandra node fails.</span></span> <span data-ttu-id="4bc83-185">不過，如果節點已關閉的 hello 問題 （例如硬體、 系統軟體失敗） 辨識由 Azure 網狀架構控制器，它將會提供新的節點在它的地方使用 hello 相同的存放磁碟機。</span><span class="sxs-lookup"><span data-stu-id="4bc83-185">However, if a node is down for hello problems (e.g. hardware, system software failures) recognized by Azure Fabric Controller, it will provision a new node in its place using hello same storage drives.</span></span> <span data-ttu-id="4bc83-186">佈建新節點 tooreplace hello 舊其中一個可能需要幾分鐘的時間。</span><span class="sxs-lookup"><span data-stu-id="4bc83-186">Provisioning a new node tooreplace hello old one may take a few minutes.</span></span>  <span data-ttu-id="4bc83-187">同樣地，對於客體作業系統變更這類的計劃性的維護活動，Cassandra 升級和應用程式變更 Azure 網狀架構控制器執行輪流升級的 hello 節點 hello 叢集中。</span><span class="sxs-lookup"><span data-stu-id="4bc83-187">Similarly for planned maintenance activities like guest OS changes, Cassandra upgrades and application changes Azure Fabric Controller performs rolling upgrades of hello nodes in hello cluster.</span></span>  <span data-ttu-id="4bc83-188">輪流升級也可能需要幾個節點下一次，因此 hello 叢集可能會遇到短暫的停機時間為幾個資料分割。</span><span class="sxs-lookup"><span data-stu-id="4bc83-188">Rolling upgrades also may take down a few nodes at a time and hence hello cluster may experience brief downtime for a few partitions.</span></span> <span data-ttu-id="4bc83-189">不過，hello 資料不會遺失到期 toohello 內建的 Azure 儲存體備援。</span><span class="sxs-lookup"><span data-stu-id="4bc83-189">However, hello data will not be lost due toohello built-in Azure Storage redundancy.</span></span>  

<span data-ttu-id="4bc83-190">系統部署不需要高可用性的 tooAzure (例如大約 99.9 即相等 too8.76 小時/年，請參閱 <<c0> [ 高可用性](http://en.wikipedia.org/wiki/High_availability)如需詳細資訊) 可能無法與 RF toorun = 1 且一致性層級 = 其中一個。</span><span class="sxs-lookup"><span data-stu-id="4bc83-190">For systems deployed tooAzure that doesn’t require high availability (e.g. around 99.9 which is equivalent too8.76 hrs/year; see [High Availability](http://en.wikipedia.org/wiki/High_availability) for details) you may be able toorun with RF=1 and Consistency Level=ONE.</span></span>  <span data-ttu-id="4bc83-191">應用程式具有高可用性需求，RF = 3 和一致性層級 = 仲裁可以容忍 hello 的其中一個 hello 節點 hello 複本的停機。</span><span class="sxs-lookup"><span data-stu-id="4bc83-191">For applications with high availability requirements, RF=3 and Consistency Level=QUORUM will tolerate hello down time of one of hello nodes one of hello replicas.</span></span> <span data-ttu-id="4bc83-192">RF = 1 在傳統的部署 （例如內部部署） 不能因為 toohello 可能會遺失資料造成磁碟故障時提供類似的問題。</span><span class="sxs-lookup"><span data-stu-id="4bc83-192">RF=1 in traditional deployments (e.g. on-premises) can’t be used due toohello possible data loss resulting from problems like disk failures.</span></span>   

## <a name="multi-region-deployment"></a><span data-ttu-id="4bc83-193">多重區域部署</span><span class="sxs-lookup"><span data-stu-id="4bc83-193">Multi-region Deployment</span></span>
<span data-ttu-id="4bc83-194">Cassandra 的資料中心感知的複寫和有助於 hello 多區域部署不含 hello hello 現成上面所述的一致性模型需要的任何外部工具。</span><span class="sxs-lookup"><span data-stu-id="4bc83-194">Cassandra’s data-center-aware replication and consistency model described above helps with hello multi-region deployment out of hello box without hello need for any external tooling.</span></span> <span data-ttu-id="4bc83-195">這是相當不同 hello 傳統關聯式資料庫中可能相當複雜的多重主機寫入的資料庫鏡像的 hello 安裝程式。</span><span class="sxs-lookup"><span data-stu-id="4bc83-195">This is quite different from hello traditional relational databases where hello setup for database mirroring for multi-master writes can be quite complex.</span></span> <span data-ttu-id="4bc83-196">Cassandra 中設定多區域可協助進行 hello 使用案例包括下列 hello:</span><span class="sxs-lookup"><span data-stu-id="4bc83-196">Cassandra in a multi-region set up can help with hello usage scenarios including hello following:</span></span>

<span data-ttu-id="4bc83-197">**鄰近性基礎的部署：**多租用戶應用程式，以清除對應的租用戶使用者-到-區域，可以發展的 hello 多區域叢集的低延遲。</span><span class="sxs-lookup"><span data-stu-id="4bc83-197">**Proximity based deployment:** Multi-tenant applications, with clear mapping of tenant users -to-region, can be benefited by hello multi-region cluster’s low latencies.</span></span> <span data-ttu-id="4bc83-198">例如學習管理系統的教育機構可以分散式的叢集部署在美國東部和美國西部地區 tooserve hello 個別園區針對交易式，以及分析。</span><span class="sxs-lookup"><span data-stu-id="4bc83-198">For example a learning management systems for educational institutions can deploy a distributed cluster in East US and West US regions tooserve hello respective campuses for transactional as well as analytics.</span></span> <span data-ttu-id="4bc83-199">hello 資料可以在 hello 時間讀取和寫入本機一致，而且可以是跨兩個 hello 區最終保持一致。</span><span class="sxs-lookup"><span data-stu-id="4bc83-199">hello data can be locally consistent at hello time reads and writes and can be eventually consistent across both hello regions.</span></span> <span data-ttu-id="4bc83-200">其他的範例還有媒體發佈、電子商務，以及可為地理位置集中之使用者提供服務的一切 (這是此部署模型的絕佳使用案例)。</span><span class="sxs-lookup"><span data-stu-id="4bc83-200">There are other examples like media distribution, e-commerce and anything and everything that serves geo concentrated user base is a good use case for this deployment model.</span></span>

<span data-ttu-id="4bc83-201">**高可用性：**備援是取得軟體和硬體高可用性的關鍵因數；如需詳細資訊，請參閱＜在 Microsoft Azure 上建置可靠的雲端系統＞。</span><span class="sxs-lookup"><span data-stu-id="4bc83-201">**High Availability:** Redundancy is a key factor in attaining high availability of software and hardware; see Building Reliable Cloud Systems on Microsoft Azure for details.</span></span> <span data-ttu-id="4bc83-202">Microsoft Azure 上 hello 達成，則為 true 的備援性的唯一可靠方式就是藉由部署多區域叢集。</span><span class="sxs-lookup"><span data-stu-id="4bc83-202">On Microsoft Azure, hello only reliable way of achieving true redundancy is by deploying a multi-region cluster.</span></span> <span data-ttu-id="4bc83-203">應用程式可以部署在主動-主動或主動-被動模式中，如果其中一個 hello 區域已關閉，Azure Traffic Manager 可以將重新導向流量 toohello 使用中的區域。</span><span class="sxs-lookup"><span data-stu-id="4bc83-203">Applications can be deployed in an active-active or active-passive mode and if one of hello regions is down, Azure Traffic Manager can redirect traffic toohello active region.</span></span>  <span data-ttu-id="4bc83-204">使用 hello 單一區域部署時，如果 hello 可用性是 99.9，兩個區域部署可以達到 99.9999 hello 公式所計算的可用性: (1-(1-0.999) * (1-0.999)) * 100)。hello 上方紙張，如需詳細資訊，請參閱。</span><span class="sxs-lookup"><span data-stu-id="4bc83-204">With hello single region deployment, if hello availability is 99.9, a two-region deployment can attain an availability of 99.9999 computed by hello formula: (1-(1-0.999) * (1-0.999))*100); see hello above paper for details.</span></span>

<span data-ttu-id="4bc83-205">**災害復原：**如果設計正確，多區域的 Cassandra 叢集就能承受重大的資料中心中斷。</span><span class="sxs-lookup"><span data-stu-id="4bc83-205">**Disaster Recovery:** Multi-region Cassandra cluster, if properly designed, can withstand catastrophic data center outages.</span></span> <span data-ttu-id="4bc83-206">如果一個區域已關閉，hello 部署應用程式 tooother 區域可以開始處理 hello 終端使用者。</span><span class="sxs-lookup"><span data-stu-id="4bc83-206">If one region is down, hello application deployed tooother regions can start serving hello end users.</span></span> <span data-ttu-id="4bc83-207">類似的任何商務持續性實作，hello 應用程式有 toobe 的 hello 非同步管線中的 hello 資料造成部分資料遺失容錯。</span><span class="sxs-lookup"><span data-stu-id="4bc83-207">Like any other business continuity implementations, hello application has toobe tolerant for some data loss resulting from hello data in hello asynchronous pipeline.</span></span> <span data-ttu-id="4bc83-208">不過，Cassandra 讓 hello 復原更 swifter 於 hello 傳統資料庫復原程序所花費的時間。</span><span class="sxs-lookup"><span data-stu-id="4bc83-208">However, Cassandra makes hello recovery much swifter than hello time taken by traditional database recovery processes.</span></span> <span data-ttu-id="4bc83-209">圖 2 顯示 hello 一般多區域部署模型，具有八個節點，在每個區域。</span><span class="sxs-lookup"><span data-stu-id="4bc83-209">Figure 2 shows hello typical multi-region deployment model with eight nodes in each region.</span></span> <span data-ttu-id="4bc83-210">這兩個區域是彼此的 hello 的鏡像映像相同的對稱。真實世界的設計是根據 hello 工作負載類型 （例如交易式或分析）、 RPO、 RTO、 資料一致性和可用性需求而定。</span><span class="sxs-lookup"><span data-stu-id="4bc83-210">Both regions are mirror images of each other for hello same of symmetry; real world designs depend on hello workload type (e.g. transactional or analytical), RPO, RTO, data consistency and availability requirements.</span></span>

![多區域部署](./media/cassandra-nodejs/cassandra-linux2.png)

<span data-ttu-id="4bc83-212">圖 2：多區域 Cassandra 部署</span><span class="sxs-lookup"><span data-stu-id="4bc83-212">Figure 2: Multi-region Cassandra deployment</span></span>

### <a name="network-integration"></a><span data-ttu-id="4bc83-213">網路整合</span><span class="sxs-lookup"><span data-stu-id="4bc83-213">Network Integration</span></span>
<span data-ttu-id="4bc83-214">設定虛擬機器位於兩個區域部署的 tooprivate 網路與彼此通訊使用 VPN 通道。</span><span class="sxs-lookup"><span data-stu-id="4bc83-214">Sets of virtual machines deployed tooprivate networks located on two regions communicates with each other using a VPN tunnel.</span></span> <span data-ttu-id="4bc83-215">hello VPN 通道連接兩個的軟體閘道 hello 網路部署程序期間佈建。</span><span class="sxs-lookup"><span data-stu-id="4bc83-215">hello VPN tunnel connects two software gateways provisioned during hello network deployment process.</span></span> <span data-ttu-id="4bc83-216">兩個區域有類似的網路架構，以"web"和"data"的子網路。Azure 網路可讓 hello 建立所需數量的子網路，並視需要透過網路安全性套用 Acl。</span><span class="sxs-lookup"><span data-stu-id="4bc83-216">Both regions have similar network architecture in terms of “web” and “data” subnets; Azure networking allows hello creation of as many subnets as needed and apply ACLs as needed by network security.</span></span> <span data-ttu-id="4bc83-217">設計 hello 叢集拓撲時間的資料中心的通訊延遲與 hello 經濟影響 hello 網路流量需要 toobe 視為。</span><span class="sxs-lookup"><span data-stu-id="4bc83-217">While designing hello cluster topology inter data center communication latency and hello economic impact of hello network traffic need toobe considered.</span></span>

### <a name="data-consistency-for-multi-data-center-deployment"></a><span data-ttu-id="4bc83-218">多重資料中心部署的資料一致性</span><span class="sxs-lookup"><span data-stu-id="4bc83-218">Data Consistency for Multi-Data Center Deployment</span></span>
<span data-ttu-id="4bc83-219">分散式部署需要 toobe 留意 hello 叢集拓撲影響產能和高可用性。</span><span class="sxs-lookup"><span data-stu-id="4bc83-219">Distributed deployments need toobe aware of hello cluster topology impact on throughput and high availability.</span></span> <span data-ttu-id="4bc83-220">hello RF 和一致性層級需要 toobe hello 仲裁的方式選取不需要依賴的所有 hello 資料中心的 hello 可用性。</span><span class="sxs-lookup"><span data-stu-id="4bc83-220">hello RF and Consistency Level need toobe selected in such way that hello quorum doesn’t depend on hello availability of all hello data centers.</span></span>
<span data-ttu-id="4bc83-221">針對需要高的一致性，LOCAL_QUORUM 一致性層級 （適用於讀取和寫入） 將會確認該 hello 本機系統讀取和寫入符合從本機 hello 節點，而資料是以非同步方式複寫 toohello 遠端資料中心。</span><span class="sxs-lookup"><span data-stu-id="4bc83-221">For a system that needs high consistency, a LOCAL_QUORUM for consistency level (for reads and writes) will make sure that hello local reads and writes are satisfied from hello local nodes while data is replicated asynchronously toohello remote data centers.</span></span>  <span data-ttu-id="4bc83-222">表 2 摘述 hello 設定寫 hello hello 稍後所述的多地區叢集的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="4bc83-222">Table 2 summarizes hello configuration details for hello multi-region cluster outlined later in hello write up.</span></span>

<span data-ttu-id="4bc83-223">**兩個區域的 Cassandra 叢集組態**</span><span class="sxs-lookup"><span data-stu-id="4bc83-223">**Two-region Cassandra cluster configuration**</span></span>

| <span data-ttu-id="4bc83-224">叢集參數</span><span class="sxs-lookup"><span data-stu-id="4bc83-224">Cluster Parameter</span></span> | <span data-ttu-id="4bc83-225">值</span><span class="sxs-lookup"><span data-stu-id="4bc83-225">Value</span></span> | <span data-ttu-id="4bc83-226">備註</span><span class="sxs-lookup"><span data-stu-id="4bc83-226">Remarks</span></span> |
| --- | --- | --- |
| <span data-ttu-id="4bc83-227">節點數目 (N)</span><span class="sxs-lookup"><span data-stu-id="4bc83-227">Number of Nodes (N)</span></span> |<span data-ttu-id="4bc83-228">8 + 8</span><span class="sxs-lookup"><span data-stu-id="4bc83-228">8 + 8</span></span> |<span data-ttu-id="4bc83-229">Hello 叢集中的節點總數</span><span class="sxs-lookup"><span data-stu-id="4bc83-229">Total number of nodes in hello cluster</span></span> |
| <span data-ttu-id="4bc83-230">複寫因素 (RF)</span><span class="sxs-lookup"><span data-stu-id="4bc83-230">Replication Factor (RF)</span></span> |<span data-ttu-id="4bc83-231">3</span><span class="sxs-lookup"><span data-stu-id="4bc83-231">3</span></span> |<span data-ttu-id="4bc83-232">指定資料列的複本數目</span><span class="sxs-lookup"><span data-stu-id="4bc83-232">Number of replicas of a given row</span></span> |
| <span data-ttu-id="4bc83-233">一致性層級 (寫入)</span><span class="sxs-lookup"><span data-stu-id="4bc83-233">Consistency Level (Write)</span></span> |<span data-ttu-id="4bc83-234">LOCAL_QUORUM [(sum(RF)/2) +1) = 4] hello 公式的結果 hello 無條件捨去</span><span class="sxs-lookup"><span data-stu-id="4bc83-234">LOCAL_QUORUM [(sum(RF)/2) +1) = 4] hello result of hello formula is rounded down</span></span> |<span data-ttu-id="4bc83-235">2 個節點將會寫入 toohello 第一個資料中心以同步方式;hello 額外 2 個節點所需的仲裁會撰寫以非同步方式 toohello 第 2 個資料中心。</span><span class="sxs-lookup"><span data-stu-id="4bc83-235">2 nodes will be written toohello first data center synchronously; hello additional 2 nodes needed for quorum will be written asynchronously toohello 2nd data center.</span></span> |
| <span data-ttu-id="4bc83-236">一致性層級 (讀取)</span><span class="sxs-lookup"><span data-stu-id="4bc83-236">Consistency Level (Read)</span></span> |<span data-ttu-id="4bc83-237">LOCAL_QUORUM ((RF/2) + 1) = 2 會無條件捨去 hello 公式的結果 hello</span><span class="sxs-lookup"><span data-stu-id="4bc83-237">LOCAL_QUORUM ((RF/2) +1) = 2 hello result of hello formula is rounded down</span></span> |<span data-ttu-id="4bc83-238">讀取要求符合從只有一個區域。傳送後 toohello 用戶端 hello 回應之前，會讀取的 2 個節點。</span><span class="sxs-lookup"><span data-stu-id="4bc83-238">Read requests are satisfied from only one region; 2 nodes are read before hello response is sent back toohello client.</span></span> |
| <span data-ttu-id="4bc83-239">複寫策略</span><span class="sxs-lookup"><span data-stu-id="4bc83-239">Replication Strategy</span></span> |<span data-ttu-id="4bc83-240">如需 NetworkTopologyStrategy 的詳細資訊，請參閱 Cassandra 文件中的 [資料複寫](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) (英文)</span><span class="sxs-lookup"><span data-stu-id="4bc83-240">NetworkTopologyStrategy see [Data Replication](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="4bc83-241">了解 hello 部署拓撲，並將複本放在節點上，使所有 hello 複本不都會出現在 hello 相同機架</span><span class="sxs-lookup"><span data-stu-id="4bc83-241">Understands hello deployment topology and places replicas on nodes so that all hello replicas don’t end up on hello same rack</span></span> |
| <span data-ttu-id="4bc83-242">Snitch</span><span class="sxs-lookup"><span data-stu-id="4bc83-242">Snitch</span></span> |<span data-ttu-id="4bc83-243">如需 GossipingPropertyFileSnitch 的詳細資訊，請參閱 Cassandra 文件中的 [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) (英文)</span><span class="sxs-lookup"><span data-stu-id="4bc83-243">GossipingPropertyFileSnitch see [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="4bc83-244">NetworkTopologyStrategy 使用告密者 toounderstand hello 拓撲的概念。</span><span class="sxs-lookup"><span data-stu-id="4bc83-244">NetworkTopologyStrategy uses a concept of snitch toounderstand hello topology.</span></span> <span data-ttu-id="4bc83-245">GossipingPropertyFileSnitch 可提供更好的控制權，對應每個節點 toodata 置中與機架中。</span><span class="sxs-lookup"><span data-stu-id="4bc83-245">GossipingPropertyFileSnitch gives better control in mapping each node toodata center and rack.</span></span> <span data-ttu-id="4bc83-246">hello 叢集然後使用八卦 toopropagate 這項資訊。</span><span class="sxs-lookup"><span data-stu-id="4bc83-246">hello cluster then uses gossip toopropagate this information.</span></span> <span data-ttu-id="4bc83-247">這是在動態 IP 設定相對 tooPropertyFileSnitch 更簡單</span><span class="sxs-lookup"><span data-stu-id="4bc83-247">This is much simpler in dynamic IP setting relative tooPropertyFileSnitch</span></span> |

## <a name="hello-software-configuration"></a><span data-ttu-id="4bc83-248">hello 軟體組態</span><span class="sxs-lookup"><span data-stu-id="4bc83-248">hello SOFTWARE CONFIGURATION</span></span>
<span data-ttu-id="4bc83-249">hello 部署可以使用下列軟體版本的 hello:</span><span class="sxs-lookup"><span data-stu-id="4bc83-249">hello following software versions are used during hello deployment:</span></span>

<table>
<tr><th><span data-ttu-id="4bc83-250">軟體</span><span class="sxs-lookup"><span data-stu-id="4bc83-250">Software</span></span></th><th><span data-ttu-id="4bc83-251">來源</span><span class="sxs-lookup"><span data-stu-id="4bc83-251">Source</span></span></th><th><span data-ttu-id="4bc83-252">版本</span><span class="sxs-lookup"><span data-stu-id="4bc83-252">Version</span></span></th></tr>
<tr><td><span data-ttu-id="4bc83-253">JRE</span><span class="sxs-lookup"><span data-stu-id="4bc83-253">JRE</span></span>    </td><td><span data-ttu-id="4bc83-254">[JRE 8](http://www.oracle.com/technetwork/java/javase/downloads/server-jre8-downloads-2133154.html) </span><span class="sxs-lookup"><span data-stu-id="4bc83-254">[JRE 8](http://www.oracle.com/technetwork/java/javase/downloads/server-jre8-downloads-2133154.html) </span></span></td><td><span data-ttu-id="4bc83-255">8U5</span><span class="sxs-lookup"><span data-stu-id="4bc83-255">8U5</span></span></td></tr>
<tr><td><span data-ttu-id="4bc83-256">JNA</span><span class="sxs-lookup"><span data-stu-id="4bc83-256">JNA</span></span>    </td><td><span data-ttu-id="4bc83-257">[JNA](https://github.com/twall/jna) </span><span class="sxs-lookup"><span data-stu-id="4bc83-257">[JNA](https://github.com/twall/jna) </span></span></td><td> <span data-ttu-id="4bc83-258">3.2.7</span><span class="sxs-lookup"><span data-stu-id="4bc83-258">3.2.7</span></span></td></tr>
<tr><td><span data-ttu-id="4bc83-259">Cassandra</span><span class="sxs-lookup"><span data-stu-id="4bc83-259">Cassandra</span></span></td><td>[<span data-ttu-id="4bc83-260">Apache Cassandra 2.0.8</span><span class="sxs-lookup"><span data-stu-id="4bc83-260">Apache Cassandra 2.0.8</span></span>](http://www.apache.org/dist/cassandra/2.0.8/apache-cassandra-2.0.8-bin.tar.gz)</td><td> <span data-ttu-id="4bc83-261">2.0.8</span><span class="sxs-lookup"><span data-stu-id="4bc83-261">2.0.8</span></span></td></tr>
<tr><td><span data-ttu-id="4bc83-262">Ubuntu</span><span class="sxs-lookup"><span data-stu-id="4bc83-262">Ubuntu</span></span>    </td><td><span data-ttu-id="4bc83-263">[Microsoft Azure](https://azure.microsoft.com/) </span><span class="sxs-lookup"><span data-stu-id="4bc83-263">[Microsoft Azure](https://azure.microsoft.com/) </span></span></td><td><span data-ttu-id="4bc83-264">14.04 LTS</span><span class="sxs-lookup"><span data-stu-id="4bc83-264">14.04 LTS</span></span></td></tr>
</table>

<span data-ttu-id="4bc83-265">因為下載 JRE 需要手動接受 Oracle 授權、 toosimplify hello 部署下載所有 hello 稍後上傳到 hello Ubuntu 範本映像，我們將建立為前兆 toohello 叢集所需的軟體 toohello 桌面部署。</span><span class="sxs-lookup"><span data-stu-id="4bc83-265">Since downloading of JRE requires manual acceptance of Oracle license, toosimplify hello deployment, download all hello required software toohello desktop for later uploading into hello Ubuntu template image we will be creating as a precursor toohello cluster deployment.</span></span>

<span data-ttu-id="4bc83-266">下載軟體上方 hello hello 本機電腦上的已知的下載目錄 （例如在 Windows 上的 %TEMP%/downloads 或 ~/Downloads 多數 Linux 散發套件或 Mac 上的）。</span><span class="sxs-lookup"><span data-stu-id="4bc83-266">Download hello above software into a well-known download directory (e.g. %TEMP%/downloads on Windows or ~/Downloads on most Linux distributions or Mac) on hello local computer.</span></span>

### <a name="create-ubuntu-vm"></a><span data-ttu-id="4bc83-267">建立 UBUNTU VM</span><span class="sxs-lookup"><span data-stu-id="4bc83-267">CREATE UBUNTU VM</span></span>
<span data-ttu-id="4bc83-268">在此步驟中的 hello 程序我們將使用 hello 先決條件軟體建立 Ubuntu 映像以便 hello 映像可重複用於佈建 Cassandra 的數個節點。</span><span class="sxs-lookup"><span data-stu-id="4bc83-268">In this step of hello process we will create Ubuntu image with hello pre-requisite software so that hello image can be reused for provisioning several Cassandra nodes.</span></span>  

#### <a name="step-1-generate-ssh-key-pair"></a><span data-ttu-id="4bc83-269">步驟 1：產生 SSH 金鑰組</span><span class="sxs-lookup"><span data-stu-id="4bc83-269">STEP 1: Generate SSH key pair</span></span>
<span data-ttu-id="4bc83-270">Azure 需要的 X509 公開金鑰 PEM 或 DER 編碼 hello 佈建時間。</span><span class="sxs-lookup"><span data-stu-id="4bc83-270">Azure needs an X509 public key that is either PEM or DER encoded at hello provisioning time.</span></span> <span data-ttu-id="4bc83-271">產生公開/私密金鑰的金鑰組，使用位於如何 hello 指示 tooUse SSH 與 Azure 上的 Linux。</span><span class="sxs-lookup"><span data-stu-id="4bc83-271">Generate a public/private key pair using hello instructions located at How tooUse SSH with Linux on Azure.</span></span> <span data-ttu-id="4bc83-272">如果您打算 toouse putty.exe 為 Windows 或 Linux 上的 SSH 用戶端時，您會有 tooconvert hello PEM 編碼 RSA 私用金鑰 tooPPK 格式使用 puttygen.exe;hello 這個指示 hello 上方網頁中。</span><span class="sxs-lookup"><span data-stu-id="4bc83-272">If you plan toouse putty.exe as an SSH client either on Windows or Linux, you have tooconvert hello PEM encoded RSA private key tooPPK format using puttygen.exe; hello instructions for this can be found in hello above web page.</span></span>

#### <a name="step-2-create-ubuntu-template-vm"></a><span data-ttu-id="4bc83-273">步驟 2：建立 Ubuntu 範本 VM</span><span class="sxs-lookup"><span data-stu-id="4bc83-273">STEP 2: Create Ubuntu template VM</span></span>
<span data-ttu-id="4bc83-274">登入 hello Azure 傳統入口網站並使用 hello 下列順序的 toocreate hello 範本 VM： 按一下 [新增]、 計算、 虛擬機器，從組件庫、 UBUNTU、 Ubuntu Server 14.04 LTS、，然後按一下hello 向右箭號。</span><span class="sxs-lookup"><span data-stu-id="4bc83-274">toocreate hello template VM, log into hello Azure classic portal and use hello following sequence: Click NEW, COMPUTE, VIRTUAL MACHINE, FROM GALLERY, UBUNTU, Ubuntu Server 14.04 LTS, and then click hello right arrow.</span></span> <span data-ttu-id="4bc83-275">描述如何 toocreate Linux VM，請參閱教學課程建立執行 Linux 之虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="4bc83-275">For a tutorial that describes how toocreate a Linux VM, see Create a Virtual Machine Running Linux.</span></span>

<span data-ttu-id="4bc83-276">輸入下列資訊在 hello 「 虛擬機器設定 」 畫面 #1 hello:</span><span class="sxs-lookup"><span data-stu-id="4bc83-276">Enter hello following information on hello “Virtual machine configuration” screen #1:</span></span>

<table>
<tr><th><span data-ttu-id="4bc83-277">欄位名稱</span><span class="sxs-lookup"><span data-stu-id="4bc83-277">FIELD NAME</span></span>              </td><td>       <span data-ttu-id="4bc83-278">欄位值</span><span class="sxs-lookup"><span data-stu-id="4bc83-278">FIELD VALUE</span></span>               </td><td>         <span data-ttu-id="4bc83-279">備註</span><span class="sxs-lookup"><span data-stu-id="4bc83-279">REMARKS</span></span>                </td><tr>
<tr><td><span data-ttu-id="4bc83-280">版本發行日期</span><span class="sxs-lookup"><span data-stu-id="4bc83-280">VERSION RELEASE DATE</span></span>    </td><td> <span data-ttu-id="4bc83-281">選取的日期，從 hello 下拉式清單</span><span class="sxs-lookup"><span data-stu-id="4bc83-281">Select a date from hello drop down</span></span></td><td></td><tr>
<tr><td><span data-ttu-id="4bc83-282">[虛擬機器名稱]</span><span class="sxs-lookup"><span data-stu-id="4bc83-282">VIRTUAL MACHINE NAME</span></span>    </td><td> <span data-ttu-id="4bc83-283">cass-template</span><span class="sxs-lookup"><span data-stu-id="4bc83-283">cass-template</span></span>                   </td><td> <span data-ttu-id="4bc83-284">這是 hello hello VM 主機名稱</span><span class="sxs-lookup"><span data-stu-id="4bc83-284">This is hello hostname of hello VM</span></span> </td><tr>
<tr><td><span data-ttu-id="4bc83-285">層次</span><span class="sxs-lookup"><span data-stu-id="4bc83-285">TIER</span></span>                     </td><td> <span data-ttu-id="4bc83-286">標準</span><span class="sxs-lookup"><span data-stu-id="4bc83-286">STANDARD</span></span>                           </td><td> <span data-ttu-id="4bc83-287">保留預設值，hello</span><span class="sxs-lookup"><span data-stu-id="4bc83-287">Leave hello default</span></span>              </td><tr>
<tr><td><span data-ttu-id="4bc83-288">大小</span><span class="sxs-lookup"><span data-stu-id="4bc83-288">SIZE</span></span>                     </td><td> <span data-ttu-id="4bc83-289">A1</span><span class="sxs-lookup"><span data-stu-id="4bc83-289">A1</span></span>                              </td><td><span data-ttu-id="4bc83-290">必須選取 VM 根據 hello IO 的 hello;針對此用途保留 hello 預設值，</span><span class="sxs-lookup"><span data-stu-id="4bc83-290">Select hello VM based on hello IO needs; for this purpose leave hello default</span></span> </td><tr>
<tr><td> <span data-ttu-id="4bc83-291">[新使用者名稱] 中</span><span class="sxs-lookup"><span data-stu-id="4bc83-291">NEW USER NAME</span></span>             </td><td> <span data-ttu-id="4bc83-292">localadmin</span><span class="sxs-lookup"><span data-stu-id="4bc83-292">localadmin</span></span>                       </td><td> <span data-ttu-id="4bc83-293">"admin" 在 Ubuntu 12.xx 以及更新版本中是保留的使用者名稱</span><span class="sxs-lookup"><span data-stu-id="4bc83-293">"admin" is a reserved user name in Ubuntu 12.xx and after</span></span></td><tr>
<tr><td> <span data-ttu-id="4bc83-294">驗證</span><span class="sxs-lookup"><span data-stu-id="4bc83-294">AUTHENTICATION</span></span>         </td><td> <span data-ttu-id="4bc83-295">按一下核取方塊</span><span class="sxs-lookup"><span data-stu-id="4bc83-295">Click check box</span></span>                 </td><td><span data-ttu-id="4bc83-296">檢查您是否 toosecure 使用 SSH 金鑰</span><span class="sxs-lookup"><span data-stu-id="4bc83-296">Check if you want toosecure with an SSH key</span></span> </td><tr>
<tr><td> <span data-ttu-id="4bc83-297">憑證</span><span class="sxs-lookup"><span data-stu-id="4bc83-297">CERTIFICATE</span></span>             </td><td> <span data-ttu-id="4bc83-298">hello 公開金鑰憑證檔案名稱</span><span class="sxs-lookup"><span data-stu-id="4bc83-298">file name of hello public key certificate</span></span> </td><td> <span data-ttu-id="4bc83-299">使用 hello 先前產生的公開金鑰</span><span class="sxs-lookup"><span data-stu-id="4bc83-299">Use hello public key generated previously</span></span></td><tr>
<tr><td> <span data-ttu-id="4bc83-300">新密碼</span><span class="sxs-lookup"><span data-stu-id="4bc83-300">New Password</span></span>    </td><td> <span data-ttu-id="4bc83-301">強式密碼</span><span class="sxs-lookup"><span data-stu-id="4bc83-301">strong password</span></span> </td><td> </td><tr>
<tr><td> <span data-ttu-id="4bc83-302">確認密碼</span><span class="sxs-lookup"><span data-stu-id="4bc83-302">Confirm Password</span></span>    </td><td> <span data-ttu-id="4bc83-303">強式密碼</span><span class="sxs-lookup"><span data-stu-id="4bc83-303">strong password</span></span> </td><td></td><tr>
</table>

<span data-ttu-id="4bc83-304">輸入下列資訊在 hello 「 虛擬機器設定 」 畫面 #2 的 hello:</span><span class="sxs-lookup"><span data-stu-id="4bc83-304">Enter hello following information on hello “Virtual machine configuration” screen #2:</span></span>

<table>
<tr><th><span data-ttu-id="4bc83-305">欄位名稱</span><span class="sxs-lookup"><span data-stu-id="4bc83-305">FIELD NAME</span></span>             </th><th> <span data-ttu-id="4bc83-306">欄位值</span><span class="sxs-lookup"><span data-stu-id="4bc83-306">FIELD VALUE</span></span>                       </th><th> <span data-ttu-id="4bc83-307">備註</span><span class="sxs-lookup"><span data-stu-id="4bc83-307">REMARKS</span></span>                                 </th></tr>
<tr><td> <span data-ttu-id="4bc83-308">雲端服務</span><span class="sxs-lookup"><span data-stu-id="4bc83-308">CLOUD SERVICE</span></span>    </td><td> <span data-ttu-id="4bc83-309">建立新的雲端服務</span><span class="sxs-lookup"><span data-stu-id="4bc83-309">Create a new cloud service</span></span>    </td><td><span data-ttu-id="4bc83-310">雲端服務是一個運算如虛擬機器等資源的容器</span><span class="sxs-lookup"><span data-stu-id="4bc83-310">Cloud service is a container compute resources like virtual machines</span></span></td></tr>
<tr><td> <span data-ttu-id="4bc83-311">雲端服務 DNS 名稱</span><span class="sxs-lookup"><span data-stu-id="4bc83-311">CLOUD SERVICE DNS NAME</span></span>    </td><td><span data-ttu-id="4bc83-312">ubuntu-template.cloudapp.net</span><span class="sxs-lookup"><span data-stu-id="4bc83-312">ubuntu-template.cloudapp.net</span></span>    </td><td><span data-ttu-id="4bc83-313">提供一個機器中立的負載平衡器名稱</span><span class="sxs-lookup"><span data-stu-id="4bc83-313">Give a machine agnostic load balancer name</span></span></td></tr>
<tr><td> <span data-ttu-id="4bc83-314">[區域/同質群組/虛擬網路]</span><span class="sxs-lookup"><span data-stu-id="4bc83-314">REGION/AFFINITY GROUP/VIRTUAL NETWORK</span></span> </td><td>    <span data-ttu-id="4bc83-315">美國西部</span><span class="sxs-lookup"><span data-stu-id="4bc83-315">West US</span></span>    </td><td> <span data-ttu-id="4bc83-316">選取 web 應用程式存取 hello Cassandra 叢集中的區域</span><span class="sxs-lookup"><span data-stu-id="4bc83-316">Select a region from which your web applications access hello Cassandra cluster</span></span></td></tr>
<tr><td><span data-ttu-id="4bc83-317">儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="4bc83-317">STORAGE ACCOUNT</span></span> </td><td>    <span data-ttu-id="4bc83-318">使用預設值</span><span class="sxs-lookup"><span data-stu-id="4bc83-318">Use default</span></span>    </td><td><span data-ttu-id="4bc83-319">使用 hello 預設儲存體帳戶或特定區域的預先建立的儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="4bc83-319">Use hello default storage account  or a pre-created storage account in a particular region</span></span></td></tr>
<tr><td><span data-ttu-id="4bc83-320">可用性集合</span><span class="sxs-lookup"><span data-stu-id="4bc83-320">AVAILABILITY SET</span></span> </td><td>    <span data-ttu-id="4bc83-321">None</span><span class="sxs-lookup"><span data-stu-id="4bc83-321">None</span></span> </td><td>    <span data-ttu-id="4bc83-322">保留為空白</span><span class="sxs-lookup"><span data-stu-id="4bc83-322">Leave it blank</span></span></td></tr>
<tr><td><span data-ttu-id="4bc83-323">端點</span><span class="sxs-lookup"><span data-stu-id="4bc83-323">ENDPOINTS</span></span>    </td><td><span data-ttu-id="4bc83-324">使用預設值</span><span class="sxs-lookup"><span data-stu-id="4bc83-324">Use default</span></span> </td><td>    <span data-ttu-id="4bc83-325">使用 hello 預設 SSH 組態</span><span class="sxs-lookup"><span data-stu-id="4bc83-325">Use hello default SSH configuration</span></span> </td></tr>
</table>

<span data-ttu-id="4bc83-326">按一下向右箭號，保留 hello 預設值 #3 的 hello 畫面上，按 hello 「 檢查 」 按鈕 toocomplete hello VM 佈建程序。</span><span class="sxs-lookup"><span data-stu-id="4bc83-326">Click right arrow, leave hello defaults on hello screen #3 and click hello “check” button toocomplete hello VM provisioning process.</span></span> <span data-ttu-id="4bc83-327">請稍候幾分鐘 hello VM 與 hello 名稱 「 ubuntu-範本 」 應該是 「 執行 」 狀態。</span><span class="sxs-lookup"><span data-stu-id="4bc83-327">After a few minutes, hello VM with hello name “ubuntu-template” should be in a “running” status.</span></span>

### <a name="install-hello-necessary-software"></a><span data-ttu-id="4bc83-328">安裝必要軟體 hello</span><span class="sxs-lookup"><span data-stu-id="4bc83-328">INSTALL hello NECESSARY SOFTWARE</span></span>
#### <a name="step-1-upload-tarballs"></a><span data-ttu-id="4bc83-329">步驟 1：上傳 tarball</span><span class="sxs-lookup"><span data-stu-id="4bc83-329">STEP 1: Upload tarballs</span></span>
<span data-ttu-id="4bc83-330">使用 scp 或 pscp，複製 hello 先前下載的軟體太 ~ / [下載] 目錄使用下列命令格式的 hello:</span><span class="sxs-lookup"><span data-stu-id="4bc83-330">Using scp or pscp, copy hello previously downloaded software too~/downloads directory using hello following command format:</span></span>

##### <a name="pscp-server-jre-8u5-linux-x64targz-localadminhk-cas-templatecloudappnethomelocaladmindownloadsserver-jre-8u5-linux-x64targz"></a><span data-ttu-id="4bc83-331">pscp server-jre-8u5-linux-x64.tar.gz localadmin@hk-cas-template.cloudapp.net:/home/localadmin/downloads/server-jre-8u5-linux-x64.tar.gz</span><span class="sxs-lookup"><span data-stu-id="4bc83-331">pscp server-jre-8u5-linux-x64.tar.gz localadmin@hk-cas-template.cloudapp.net:/home/localadmin/downloads/server-jre-8u5-linux-x64.tar.gz</span></span>
<span data-ttu-id="4bc83-332">重複與 hello Cassandra 位元也 JRE hello 上述命令。</span><span class="sxs-lookup"><span data-stu-id="4bc83-332">Repeat hello above command for JRE as well as for hello Cassandra bits.</span></span>

#### <a name="step-2-prepare-hello-directory-structure-and-extract-hello-archives"></a><span data-ttu-id="4bc83-333">步驟 2： 準備 hello 目錄結構，並擷取 hello 封存</span><span class="sxs-lookup"><span data-stu-id="4bc83-333">STEP 2: Prepare hello directory structure and extract hello archives</span></span>
<span data-ttu-id="4bc83-334">登入 hello VM 及建立 hello 目錄結構並擷取軟體做為進階使用者，使用下列的 hello bash 指令碼：</span><span class="sxs-lookup"><span data-stu-id="4bc83-334">Log into hello VM and create hello directory structure and extract software as a super user using hello bash script below:</span></span>

    #!/bin/bash
    CASS_INSTALL_DIR="/opt/cassandra"
    JRE_INSTALL_DIR="/opt/java"
    CASS_DATA_DIR="/var/lib/cassandra"
    CASS_LOG_DIR="/var/log/cassandra"
    DOWNLOADS_DIR="~/downloads"
    JRE_TARBALL="server-jre-8u5-linux-x64.tar.gz"
    CASS_TARBALL="apache-cassandra-2.0.8-bin.tar.gz"
    SVC_USER="localadmin"

    RESET_ERROR=1
    MKDIR_ERROR=2

    reset_installation ()
    {
       rm -rf $CASS_INSTALL_DIR 2> /dev/null
       rm -rf $JRE_INSTALL_DIR 2> /dev/null
       rm -rf $CASS_DATA_DIR 2> /dev/null
       rm -rf $CASS_LOG_DIR 2> /dev/null
    }
    make_dir ()
    {
       if [ -z "$1" ]
       then
          echo "make_dir: invalid directory name"
          exit $MKDIR_ERROR
       fi

       if [ -d "$1" ]
       then
          echo "make_dir: directory already exists"
          exit $MKDIR_ERROR
       fi

       mkdir $1 2>/dev/null
       if [ $? != 0 ]
       then
          echo "directory creation failed"
          exit $MKDIR_ERROR
       fi
    }

    unzip()
    {
       if [ $# == 2 ]
       then
          tar xzf $1 -C $2
       else
          echo "archive error"
       fi

    }

    if [ -n "$1" ]
    then
       SVC_USER=$1
    fi

    reset_installation
    make_dir $CASS_INSTALL_DIR
    make_dir $JRE_INSTALL_DIR
    make_dir $CASS_DATA_DIR
    make_dir $CASS_LOG_DIR

    #unzip JRE and Cassandra
    unzip $HOME/downloads/$JRE_TARBALL $JRE_INSTALL_DIR
    unzip $HOME/downloads/$CASS_TARBALL $CASS_INSTALL_DIR

    #Change hello ownership toohello service credentials

    chown -R $SVC_USER:$GROUP $CASS_DATA_DIR
    chown -R $SVC_USER:$GROUP $CASS_LOG_DIR
    echo "edit /etc/profile tooadd JRE toohello PATH"
    echo "installation is complete"


<span data-ttu-id="4bc83-335">如果您將此指令碼貼到 vim 視窗時，請確定 tooremove hello 歸位字元傳回 ('\r 」) 使用下列命令的 hello:</span><span class="sxs-lookup"><span data-stu-id="4bc83-335">If you paste this script into vim window, make sure tooremove hello carriage return (‘\r”) using hello following command:</span></span>

    tr -d '\r' <infile.sh >outfile.sh

#### <a name="step-3-edit-etcprofile"></a><span data-ttu-id="4bc83-336">步驟 3：編輯 etc/profile</span><span class="sxs-lookup"><span data-stu-id="4bc83-336">Step 3: Edit etc/profile</span></span>
<span data-ttu-id="4bc83-337">附加 hello 下列 hello 結尾：</span><span class="sxs-lookup"><span data-stu-id="4bc83-337">Append hello following at hello end:</span></span>

    JAVA_HOME=/opt/java/jdk1.8.0_05
    CASS_HOME= /opt/cassandra/apache-cassandra-2.0.8
    PATH=$PATH:$HOME/bin:$JAVA_HOME/bin:$CASS_HOME/bin
    export JAVA_HOME
    export CASS_HOME
    export PATH

#### <a name="step-4-install-jna-for-production-systems"></a><span data-ttu-id="4bc83-338">步驟 4：安裝適用於實際執行系統的 JNA</span><span class="sxs-lookup"><span data-stu-id="4bc83-338">Step 4: Install JNA for production systems</span></span>
<span data-ttu-id="4bc83-339">使用 hello 下列命令順序： hello 下列命令將會安裝 jna 3.2.7.jar 和 jna-平台-3.2.7.jar too/usr/share.java 目錄 sudo apt-get 安裝 libjna java</span><span class="sxs-lookup"><span data-stu-id="4bc83-339">Use hello following command sequence: hello following command will install jna-3.2.7.jar and jna-platform-3.2.7.jar too/usr/share.java directory sudo apt-get install libjna-java</span></span>

<span data-ttu-id="4bc83-340">在 $CASS_HOME/lib 目錄中建立符號連結，以便 Cassandra 啟動指令碼可以找到這些 jar：</span><span class="sxs-lookup"><span data-stu-id="4bc83-340">Create symbolic links in $CASS_HOME/lib directory so that Cassandra startup script can find these jars:</span></span>

    ln -s /usr/share/java/jna-3.2.7.jar $CASS_HOME/lib/jna.jar

    ln -s /usr/share/java/jna-platform-3.2.7.jar $CASS_HOME/lib/jna-platform.jar

#### <a name="step-5-configure-cassandrayaml"></a><span data-ttu-id="4bc83-341">步驟 5：設定 cassandra.yaml</span><span class="sxs-lookup"><span data-stu-id="4bc83-341">Step 5: Configure cassandra.yaml</span></span>
<span data-ttu-id="4bc83-342">編輯 cassandra.yaml 上 [我們將調整這 hello 實際佈建期間] 所有 hello 虛擬機器所需的每個 VM tooreflect 組態：</span><span class="sxs-lookup"><span data-stu-id="4bc83-342">Edit cassandra.yaml on each VM tooreflect configuration needed by all hello virtual machines [we will tweak this during hello actual provisioning]:</span></span>

<table>
<tr><th><span data-ttu-id="4bc83-343">欄位名稱</span><span class="sxs-lookup"><span data-stu-id="4bc83-343">Field Name</span></span>   </th><th> <span data-ttu-id="4bc83-344">值</span><span class="sxs-lookup"><span data-stu-id="4bc83-344">Value</span></span>  </th><th>    <span data-ttu-id="4bc83-345">備註</span><span class="sxs-lookup"><span data-stu-id="4bc83-345">Remarks</span></span> </th></tr>
<tr><td><span data-ttu-id="4bc83-346">cluster_name</span><span class="sxs-lookup"><span data-stu-id="4bc83-346">cluster_name</span></span> </td><td>    <span data-ttu-id="4bc83-347">“CustomerService”</span><span class="sxs-lookup"><span data-stu-id="4bc83-347">“CustomerService”</span></span>    </td><td> <span data-ttu-id="4bc83-348">使用 hello 名稱反映您的部署</span><span class="sxs-lookup"><span data-stu-id="4bc83-348">Use hello name that reflects your deployment</span></span></td></tr>
<tr><td><span data-ttu-id="4bc83-349">listen_address</span><span class="sxs-lookup"><span data-stu-id="4bc83-349">listen_address</span></span>    </td><td><span data-ttu-id="4bc83-350">[保留為空白]</span><span class="sxs-lookup"><span data-stu-id="4bc83-350">[leave it blank]</span></span>    </td><td> <span data-ttu-id="4bc83-351">刪除 “localhost”</span><span class="sxs-lookup"><span data-stu-id="4bc83-351">Delete “localhost”</span></span> </td></tr>
<tr><td><span data-ttu-id="4bc83-352">rpc_addres</span><span class="sxs-lookup"><span data-stu-id="4bc83-352">rpc_addres</span></span>   </td><td><span data-ttu-id="4bc83-353">[保留為空白]</span><span class="sxs-lookup"><span data-stu-id="4bc83-353">[leave it blank]</span></span>    </td><td> <span data-ttu-id="4bc83-354">刪除 “localhost”</span><span class="sxs-lookup"><span data-stu-id="4bc83-354">Delete “localhost”</span></span> </td></tr>
<tr><td><span data-ttu-id="4bc83-355">種子</span><span class="sxs-lookup"><span data-stu-id="4bc83-355">seeds</span></span>    </td><td><span data-ttu-id="4bc83-356">"10.1.2.4、10.1.2.6、10.1.2.8"</span><span class="sxs-lookup"><span data-stu-id="4bc83-356">"10.1.2.4, 10.1.2.6, 10.1.2.8"</span></span>    </td><td><span data-ttu-id="4bc83-357">指定為種子所有 hello IP 位址的清單。</span><span class="sxs-lookup"><span data-stu-id="4bc83-357">List of  all hello IP addresses which are designated as seeds.</span></span></td></tr>
<tr><td><span data-ttu-id="4bc83-358">endpoint_snitch</span><span class="sxs-lookup"><span data-stu-id="4bc83-358">endpoint_snitch</span></span> </td><td> <span data-ttu-id="4bc83-359">org.apache.cassandra.locator.GossipingPropertyFileSnitch</span><span class="sxs-lookup"><span data-stu-id="4bc83-359">org.apache.cassandra.locator.GossipingPropertyFileSnitch</span></span> </td><td> <span data-ttu-id="4bc83-360">這是由用於 hello NetworkTopologyStrateg 推斷 hello 資料中心和 hello 的 hello VM 的機架</span><span class="sxs-lookup"><span data-stu-id="4bc83-360">This is used by hello NetworkTopologyStrateg for inferring hello data center and hello rack of hello VM</span></span></td></tr>
</table>

#### <a name="step-6-capture-hello-vm-image"></a><span data-ttu-id="4bc83-361">步驟 6： 擷取 hello VM 映像</span><span class="sxs-lookup"><span data-stu-id="4bc83-361">Step 6: Capture hello VM image</span></span>
<span data-ttu-id="4bc83-362">登入 hello 使用 hello 主機名稱 (hk-ca-template.cloudapp.net) 和 hello SSH 私密金鑰先前建立的虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="4bc83-362">Log into hello virtual machine using hello hostname (hk-cas-template.cloudapp.net) and hello SSH private key previously created.</span></span> <span data-ttu-id="4bc83-363">請參閱如何 tooUse Linux 的 Azure 上的 SSH 詳細說明如何在使用 toolog hello 命令 ssh 或 putty.exe 上。</span><span class="sxs-lookup"><span data-stu-id="4bc83-363">See How tooUse SSH with Linux on Azure for details on how toolog in using hello command ssh or putty.exe.</span></span>

<span data-ttu-id="4bc83-364">執行下列一連串動作 toocapture hello 映像的 hello:</span><span class="sxs-lookup"><span data-stu-id="4bc83-364">Execute hello following sequence of actions toocapture hello image:</span></span>

##### <a name="1-deprovision"></a><span data-ttu-id="4bc83-365">1.取消佈建</span><span class="sxs-lookup"><span data-stu-id="4bc83-365">1. Deprovision</span></span>
<span data-ttu-id="4bc83-366">使用 hello 命令"sudo waagent-取消佈建 + 使用者 」 tooremove 虛擬機器執行個體的特定資訊。</span><span class="sxs-lookup"><span data-stu-id="4bc83-366">Use hello command “sudo waagent –deprovision+user” tooremove Virtual Machine instance specific information.</span></span> <span data-ttu-id="4bc83-367">請參閱 < >[如何 tooCapture Linux 虛擬機器](capture-image.md)tooUse 做為範本的詳細 hello 映像擷取程序上。</span><span class="sxs-lookup"><span data-stu-id="4bc83-367">See for [How tooCapture a Linux Virtual Machine](capture-image.md) tooUse as a Template more details on hello image capture process.</span></span>

##### <a name="2-shutdown-hello-vm"></a><span data-ttu-id="4bc83-368">2： 關閉 hello VM</span><span class="sxs-lookup"><span data-stu-id="4bc83-368">2: Shutdown hello VM</span></span>
<span data-ttu-id="4bc83-369">請確定該 hello 虛擬機器會反白顯示，然後按一下 hello 底部命令列中的 hello 關機連結。</span><span class="sxs-lookup"><span data-stu-id="4bc83-369">Make sure that hello virtual machine is highlighted and click hello SHUTDOWN link from hello bottom command bar.</span></span>

##### <a name="3-capture-hello-image"></a><span data-ttu-id="4bc83-370">3： 擷取 hello 映像</span><span class="sxs-lookup"><span data-stu-id="4bc83-370">3: Capture hello image</span></span>
<span data-ttu-id="4bc83-371">請確定該 hello 虛擬機器會反白顯示，然後按一下 hello 底部命令列中的 hello 擷取連結。</span><span class="sxs-lookup"><span data-stu-id="4bc83-371">Make sure that hello virtual machine is highlighted and click hello CAPTURE link from hello bottom command bar.</span></span> <span data-ttu-id="4bc83-372">在 hello 下一個畫面中提供的映像名稱 (例如 hk-cas-2-08-ub-14-04-2014071)、 適當的映像的描述，然後按一下 hello 「 檢查 」 標記 toofinish hello 擷取程序。</span><span class="sxs-lookup"><span data-stu-id="4bc83-372">In hello next screen, give an IMAGE NAME (e.g. hk-cas-2-08-ub-14-04-2014071), appropriate IMAGE DESCRIPTION, and click hello “check” mark toofinish hello CAPTURE process.</span></span>

<span data-ttu-id="4bc83-373">這需要幾秒鐘的時間和 hello 映像應出現在 hello 映像庫的 我的映像 > 一節。</span><span class="sxs-lookup"><span data-stu-id="4bc83-373">This will take a few seconds and hello image should be available in MY IMAGES section of hello image gallery.</span></span> <span data-ttu-id="4bc83-374">hello 映像成功擷取後，就會自動刪除 hello 來源 VM。</span><span class="sxs-lookup"><span data-stu-id="4bc83-374">hello source VM will be automatically deleted after hello image is successfully captured.</span></span> 

## <a name="single-region-deployment-process"></a><span data-ttu-id="4bc83-375">單一區域部署程序</span><span class="sxs-lookup"><span data-stu-id="4bc83-375">Single Region Deployment Process</span></span>
<span data-ttu-id="4bc83-376">**步驟 1： 建立虛擬網路 hello**登入 hello Azure 入口網站並建立虛擬網路 （傳統） 與 hello 屬性 hello 下表所示。</span><span class="sxs-lookup"><span data-stu-id="4bc83-376">**Step 1: Create hello Virtual Network** Log into hello Azure portal and create a virtual network (classic) with hello attributes shown in hello following table.</span></span> <span data-ttu-id="4bc83-377">請參閱[建立使用 hello Azure 入口網站的虛擬網路 （傳統）](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) hello 程序的詳細步驟。</span><span class="sxs-lookup"><span data-stu-id="4bc83-377">See [Create a virtual network (classic) using hello Azure portal](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) for detailed steps of hello process.</span></span>      

<table>
<tr><th><span data-ttu-id="4bc83-378">VM 屬性名稱</span><span class="sxs-lookup"><span data-stu-id="4bc83-378">VM Attribute Name</span></span></th><th><span data-ttu-id="4bc83-379">值</span><span class="sxs-lookup"><span data-stu-id="4bc83-379">Value</span></span></th><th><span data-ttu-id="4bc83-380">備註</span><span class="sxs-lookup"><span data-stu-id="4bc83-380">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="4bc83-381">Name</span><span class="sxs-lookup"><span data-stu-id="4bc83-381">Name</span></span></td><td><span data-ttu-id="4bc83-382">vnet-cass-west-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-382">vnet-cass-west-us</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="4bc83-383">區域</span><span class="sxs-lookup"><span data-stu-id="4bc83-383">Region</span></span></td><td><span data-ttu-id="4bc83-384">美國西部</span><span class="sxs-lookup"><span data-stu-id="4bc83-384">West US</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="4bc83-385">DNS 伺服器</span><span class="sxs-lookup"><span data-stu-id="4bc83-385">DNS Servers</span></span></td><td><span data-ttu-id="4bc83-386">None</span><span class="sxs-lookup"><span data-stu-id="4bc83-386">None</span></span></td><td><span data-ttu-id="4bc83-387">請忽略此項，因為我們不使用 DNS 伺服器</span><span class="sxs-lookup"><span data-stu-id="4bc83-387">Ignore this as we are not using a DNS Server</span></span></td></tr>
<tr><td><span data-ttu-id="4bc83-388">位址空間</span><span class="sxs-lookup"><span data-stu-id="4bc83-388">Address Space</span></span></td><td><span data-ttu-id="4bc83-389">10.1.0.0/16</span><span class="sxs-lookup"><span data-stu-id="4bc83-389">10.1.0.0/16</span></span></td><td></td></tr>    
<tr><td><span data-ttu-id="4bc83-390">起始 IP</span><span class="sxs-lookup"><span data-stu-id="4bc83-390">Starting IP</span></span></td><td><span data-ttu-id="4bc83-391">10.1.0.0</span><span class="sxs-lookup"><span data-stu-id="4bc83-391">10.1.0.0</span></span></td><td></td></tr>    
<tr><td><span data-ttu-id="4bc83-392">CIDR</span><span class="sxs-lookup"><span data-stu-id="4bc83-392">CIDR</span></span> </td><td><span data-ttu-id="4bc83-393">/16 (65531)</span><span class="sxs-lookup"><span data-stu-id="4bc83-393">/16 (65531)</span></span></td><td></td></tr>
</table>

<span data-ttu-id="4bc83-394">新增下列子網路的 hello:</span><span class="sxs-lookup"><span data-stu-id="4bc83-394">Add hello following subnets:</span></span>

<table>
<tr><th><span data-ttu-id="4bc83-395">名稱</span><span class="sxs-lookup"><span data-stu-id="4bc83-395">Name</span></span></th><th><span data-ttu-id="4bc83-396">起始 IP</span><span class="sxs-lookup"><span data-stu-id="4bc83-396">Starting IP</span></span></th><th><span data-ttu-id="4bc83-397">CIDR</span><span class="sxs-lookup"><span data-stu-id="4bc83-397">CIDR</span></span></th><th><span data-ttu-id="4bc83-398">備註</span><span class="sxs-lookup"><span data-stu-id="4bc83-398">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="4bc83-399">Web</span><span class="sxs-lookup"><span data-stu-id="4bc83-399">web</span></span></td><td><span data-ttu-id="4bc83-400">10.1.1.0</span><span class="sxs-lookup"><span data-stu-id="4bc83-400">10.1.1.0</span></span></td><td><span data-ttu-id="4bc83-401">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="4bc83-401">/24 (251)</span></span></td><td><span data-ttu-id="4bc83-402">Hello web 伺服陣列的子網路</span><span class="sxs-lookup"><span data-stu-id="4bc83-402">Subnet for hello web farm</span></span></td></tr>
<tr><td><span data-ttu-id="4bc83-403">data</span><span class="sxs-lookup"><span data-stu-id="4bc83-403">data</span></span></td><td><span data-ttu-id="4bc83-404">10.1.2.0</span><span class="sxs-lookup"><span data-stu-id="4bc83-404">10.1.2.0</span></span></td><td><span data-ttu-id="4bc83-405">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="4bc83-405">/24 (251)</span></span></td><td><span data-ttu-id="4bc83-406">Hello 資料庫節點的子網路</span><span class="sxs-lookup"><span data-stu-id="4bc83-406">Subnet for hello database nodes</span></span></td></tr>
</table>

<span data-ttu-id="4bc83-407">資料和網頁的子網路可以保護透過網路安全性群組 hello 涵蓋範圍，其中超出本文的範圍。</span><span class="sxs-lookup"><span data-stu-id="4bc83-407">Data and Web subnets can be protected through network security groups hello coverage of which is out of scope for this article.</span></span>  

<span data-ttu-id="4bc83-408">**步驟 2： 佈建虛擬機器**使用先前建立的 hello 映像，我們將建立下列 hello 雲端中虛擬機器的 hello 伺服器 」 hk-c-svc-西 」 並將其繫結 toohello 各自的子網路如下所示：</span><span class="sxs-lookup"><span data-stu-id="4bc83-408">**Step 2: Provision Virtual Machines** Using hello image created previously, we will create hello following virtual machines in hello cloud server “hk-c-svc-west” and bind them toohello respective subnets as shown below:</span></span>

<table>
<tr><th><span data-ttu-id="4bc83-409">機器名稱</span><span class="sxs-lookup"><span data-stu-id="4bc83-409">Machine Name</span></span>    </th><th><span data-ttu-id="4bc83-410">子網路</span><span class="sxs-lookup"><span data-stu-id="4bc83-410">Subnet</span></span>    </th><th><span data-ttu-id="4bc83-411">IP 位址</span><span class="sxs-lookup"><span data-stu-id="4bc83-411">IP Address</span></span>    </th><th><span data-ttu-id="4bc83-412">可用性集合</span><span class="sxs-lookup"><span data-stu-id="4bc83-412">Availability set</span></span></th><th><span data-ttu-id="4bc83-413">DC/機架</span><span class="sxs-lookup"><span data-stu-id="4bc83-413">DC/Rack</span></span></th><th><span data-ttu-id="4bc83-414">是否為種子？</span><span class="sxs-lookup"><span data-stu-id="4bc83-414">Seed?</span></span></th></tr>
<tr><td><span data-ttu-id="4bc83-415">hk-c1-west-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-415">hk-c1-west-us</span></span>    </td><td><span data-ttu-id="4bc83-416">data</span><span class="sxs-lookup"><span data-stu-id="4bc83-416">data</span></span>    </td><td><span data-ttu-id="4bc83-417">10.1.2.4</span><span class="sxs-lookup"><span data-stu-id="4bc83-417">10.1.2.4</span></span>    </td><td><span data-ttu-id="4bc83-418">hk-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="4bc83-418">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="4bc83-419">dc=WESTUS 機架=rack1</span><span class="sxs-lookup"><span data-stu-id="4bc83-419">dc =WESTUS rack =rack1</span></span> </td><td><span data-ttu-id="4bc83-420">是</span><span class="sxs-lookup"><span data-stu-id="4bc83-420">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="4bc83-421">hk-c2-west-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-421">hk-c2-west-us</span></span>    </td><td><span data-ttu-id="4bc83-422">data</span><span class="sxs-lookup"><span data-stu-id="4bc83-422">data</span></span>    </td><td><span data-ttu-id="4bc83-423">10.1.2.5</span><span class="sxs-lookup"><span data-stu-id="4bc83-423">10.1.2.5</span></span>    </td><td><span data-ttu-id="4bc83-424">hk-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="4bc83-424">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="4bc83-425">dc=WESTUS 機架=rack1</span><span class="sxs-lookup"><span data-stu-id="4bc83-425">dc =WESTUS rack =rack1</span></span>    </td><td><span data-ttu-id="4bc83-426">否</span><span class="sxs-lookup"><span data-stu-id="4bc83-426">No</span></span> </td></tr>
<tr><td><span data-ttu-id="4bc83-427">hk-c3-west-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-427">hk-c3-west-us</span></span>    </td><td><span data-ttu-id="4bc83-428">data</span><span class="sxs-lookup"><span data-stu-id="4bc83-428">data</span></span>    </td><td><span data-ttu-id="4bc83-429">10.1.2.6</span><span class="sxs-lookup"><span data-stu-id="4bc83-429">10.1.2.6</span></span>    </td><td><span data-ttu-id="4bc83-430">hk-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="4bc83-430">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="4bc83-431">dc=WESTUS 機架=rack2</span><span class="sxs-lookup"><span data-stu-id="4bc83-431">dc =WESTUS rack =rack2</span></span>    </td><td><span data-ttu-id="4bc83-432">是</span><span class="sxs-lookup"><span data-stu-id="4bc83-432">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="4bc83-433">hk-c4-west-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-433">hk-c4-west-us</span></span>    </td><td><span data-ttu-id="4bc83-434">data</span><span class="sxs-lookup"><span data-stu-id="4bc83-434">data</span></span>    </td><td><span data-ttu-id="4bc83-435">10.1.2.7</span><span class="sxs-lookup"><span data-stu-id="4bc83-435">10.1.2.7</span></span>    </td><td><span data-ttu-id="4bc83-436">hk-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="4bc83-436">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="4bc83-437">dc=WESTUS 機架=rack2</span><span class="sxs-lookup"><span data-stu-id="4bc83-437">dc =WESTUS rack =rack2</span></span>    </td><td><span data-ttu-id="4bc83-438">否</span><span class="sxs-lookup"><span data-stu-id="4bc83-438">No</span></span> </td></tr>
<tr><td><span data-ttu-id="4bc83-439">hk-c5-west-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-439">hk-c5-west-us</span></span>    </td><td><span data-ttu-id="4bc83-440">data</span><span class="sxs-lookup"><span data-stu-id="4bc83-440">data</span></span>    </td><td><span data-ttu-id="4bc83-441">10.1.2.8</span><span class="sxs-lookup"><span data-stu-id="4bc83-441">10.1.2.8</span></span>    </td><td><span data-ttu-id="4bc83-442">hk-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="4bc83-442">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="4bc83-443">dc=WESTUS 機架=rack3</span><span class="sxs-lookup"><span data-stu-id="4bc83-443">dc =WESTUS rack =rack3</span></span>    </td><td><span data-ttu-id="4bc83-444">是</span><span class="sxs-lookup"><span data-stu-id="4bc83-444">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="4bc83-445">hk-c6-west-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-445">hk-c6-west-us</span></span>    </td><td><span data-ttu-id="4bc83-446">data</span><span class="sxs-lookup"><span data-stu-id="4bc83-446">data</span></span>    </td><td><span data-ttu-id="4bc83-447">10.1.2.9</span><span class="sxs-lookup"><span data-stu-id="4bc83-447">10.1.2.9</span></span>    </td><td><span data-ttu-id="4bc83-448">hk-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="4bc83-448">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="4bc83-449">dc=WESTUS 機架=rack3</span><span class="sxs-lookup"><span data-stu-id="4bc83-449">dc =WESTUS rack =rack3</span></span>    </td><td><span data-ttu-id="4bc83-450">否</span><span class="sxs-lookup"><span data-stu-id="4bc83-450">No</span></span> </td></tr>
<tr><td><span data-ttu-id="4bc83-451">hk-c7-west-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-451">hk-c7-west-us</span></span>    </td><td><span data-ttu-id="4bc83-452">data</span><span class="sxs-lookup"><span data-stu-id="4bc83-452">data</span></span>    </td><td><span data-ttu-id="4bc83-453">10.1.2.10</span><span class="sxs-lookup"><span data-stu-id="4bc83-453">10.1.2.10</span></span>    </td><td><span data-ttu-id="4bc83-454">hk-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="4bc83-454">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="4bc83-455">dc=WESTUS 機架=rack4</span><span class="sxs-lookup"><span data-stu-id="4bc83-455">dc =WESTUS rack =rack4</span></span>    </td><td><span data-ttu-id="4bc83-456">是</span><span class="sxs-lookup"><span data-stu-id="4bc83-456">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="4bc83-457">hk-c8-west-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-457">hk-c8-west-us</span></span>    </td><td><span data-ttu-id="4bc83-458">data</span><span class="sxs-lookup"><span data-stu-id="4bc83-458">data</span></span>    </td><td><span data-ttu-id="4bc83-459">10.1.2.11</span><span class="sxs-lookup"><span data-stu-id="4bc83-459">10.1.2.11</span></span>    </td><td><span data-ttu-id="4bc83-460">hk-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="4bc83-460">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="4bc83-461">dc=WESTUS 機架=rack4</span><span class="sxs-lookup"><span data-stu-id="4bc83-461">dc =WESTUS rack =rack4</span></span>    </td><td><span data-ttu-id="4bc83-462">否</span><span class="sxs-lookup"><span data-stu-id="4bc83-462">No</span></span> </td></tr>
<tr><td><span data-ttu-id="4bc83-463">hk-w1-west-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-463">hk-w1-west-us</span></span>    </td><td><span data-ttu-id="4bc83-464">Web</span><span class="sxs-lookup"><span data-stu-id="4bc83-464">web</span></span>    </td><td><span data-ttu-id="4bc83-465">10.1.1.4</span><span class="sxs-lookup"><span data-stu-id="4bc83-465">10.1.1.4</span></span>    </td><td><span data-ttu-id="4bc83-466">hk-w-aset-1</span><span class="sxs-lookup"><span data-stu-id="4bc83-466">hk-w-aset-1</span></span>    </td><td>                       </td><td><span data-ttu-id="4bc83-467">N/A</span><span class="sxs-lookup"><span data-stu-id="4bc83-467">N/A</span></span></td></tr>
<tr><td><span data-ttu-id="4bc83-468">hk-w2-west-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-468">hk-w2-west-us</span></span>    </td><td><span data-ttu-id="4bc83-469">Web</span><span class="sxs-lookup"><span data-stu-id="4bc83-469">web</span></span>    </td><td><span data-ttu-id="4bc83-470">10.1.1.5</span><span class="sxs-lookup"><span data-stu-id="4bc83-470">10.1.1.5</span></span>    </td><td><span data-ttu-id="4bc83-471">hk-w-aset-1</span><span class="sxs-lookup"><span data-stu-id="4bc83-471">hk-w-aset-1</span></span>    </td><td>                       </td><td><span data-ttu-id="4bc83-472">N/A</span><span class="sxs-lookup"><span data-stu-id="4bc83-472">N/A</span></span></td></tr>
</table>

<span data-ttu-id="4bc83-473">建立的 Vm 清單上方的 hello 必須遵循的程序的 hello:</span><span class="sxs-lookup"><span data-stu-id="4bc83-473">Creation of hello above list of VMs requires hello following process:</span></span>

1. <span data-ttu-id="4bc83-474">在特定區域中建立空的雲端服務</span><span class="sxs-lookup"><span data-stu-id="4bc83-474">Create an empty cloud service in a particular region</span></span>
2. <span data-ttu-id="4bc83-475">從 hello 先前擷取的映像建立 VM，並將它附加 toohello 先前; 建立的虛擬網路重複此步驟對於所有 hello Vm</span><span class="sxs-lookup"><span data-stu-id="4bc83-475">Create a VM from hello previously captured image and attach it toohello virtual network created previously; repeat this for all hello VMs</span></span>
3. <span data-ttu-id="4bc83-476">加入內部負載平衡器 toohello 雲端服務，並將它附加 toohello 「 資料 」 的子網路</span><span class="sxs-lookup"><span data-stu-id="4bc83-476">Add an internal load balancer toohello cloud service and attach it toohello “data” subnet</span></span>
4. <span data-ttu-id="4bc83-477">如先前所建立的每個 VM，新增 thrift 流量透過負載平衡集連接 toohello 先前建立內部負載平衡器的負載平衡端點</span><span class="sxs-lookup"><span data-stu-id="4bc83-477">For each VM created previously, add a load balanced endpoint for thrift traffic through a load balanced set connected toohello previously created internal load balancer</span></span>

<span data-ttu-id="4bc83-478">可以使用 Azure 傳統入口網站，執行上述程序的 hello使用 Windows 電腦 （使用的 Azure，如果您沒有存取 tooa Windows 電腦上的 VM），自動使用下列 PowerShell 指令碼 tooprovision hello 所有 8 部 Vm。</span><span class="sxs-lookup"><span data-stu-id="4bc83-478">hello above process can be executed using Azure classic portal; use a Windows machine (use a VM on Azure if you don't have access tooa Windows machine), use hello following PowerShell script tooprovision all 8 VMs automatically.</span></span>

<span data-ttu-id="4bc83-479">**清單 1：佈建虛擬機器的 PowerShell 指令碼**</span><span class="sxs-lookup"><span data-stu-id="4bc83-479">**List 1: PowerShell script for provisioning virtual machines**</span></span>

        #Tested with Azure Powershell - November 2014
        #This powershell script deployes a number of VMs from an existing image inside an Azure region
        #Import your Azure subscription into hello current Powershell session before proceeding
        #hello process: 1. create Azure Storage account, 2. create virtual network, 3.create hello VM template, 2. crate a list of VMs from hello template

        #fundamental variables - change these tooreflect your subscription
        $country="us"; $region="west"; $vnetName = "your_vnet_name";$storageAccount="your_storage_account"
        $numVMs=8;$prefix = "hk-cass";$ilbIP="your_ilb_ip"
        $subscriptionName = "Azure_subscription_name";
        $vmSize="ExtraSmall"; $imageName="your_linux_image_name"
        $ilbName="ThriftInternalLB"; $thriftEndPoint="ThriftEndPoint"

        #generated variables
        $serviceName = "$prefix-svc-$region-$country"; $azureRegion = "$region $country"

        $vmNames = @()
        for ($i=0; $i -lt $numVMs; $i++)
        {
           $vmNames+=("$prefix-vm"+($i+1) + "-$region-$country" );
        }

        #select an Azure subscription already imported into Powershell session
        Select-AzureSubscription -SubscriptionName $subscriptionName -Current
        Set-AzureSubscription -SubscriptionName $subscriptionName -CurrentStorageAccountName $storageAccount

        #create an empty cloud service
        New-AzureService -ServiceName $serviceName -Label "hkcass$region" -Location $azureRegion
        Write-Host "Created $serviceName"

        $VMList= @()   # stores hello list of azure vm configuration objects
        #create hello list of VMs
        foreach($vmName in $vmNames)
        {
           $VMList += New-AzureVMConfig -Name $vmName -InstanceSize ExtraSmall -ImageName $imageName |
           Add-AzureProvisioningConfig -Linux -LinuxUser "localadmin" -Password "Local123" |
           Set-AzureSubnet "data"
        }

        New-AzureVM -ServiceName $serviceName -VNetName $vnetName -VMs $VMList

        #Create internal load balancer
        Add-AzureInternalLoadBalancer -ServiceName $serviceName -InternalLoadBalancerName $ilbName -SubnetName "data" -StaticVNetIPAddress "$ilbIP"
        Write-Host "Created $ilbName"
        #Add add hello thrift endpoint toohello internal load balancer for all hello VMs
        foreach($vmName in $vmNames)
        {
            Get-AzureVM -ServiceName $serviceName -Name $vmName |
                Add-AzureEndpoint -Name $thriftEndPoint -LBSetName "ThriftLBSet" -Protocol tcp -LocalPort 9160 -PublicPort 9160 -ProbePort 9160 -ProbeProtocol tcp -ProbeIntervalInSeconds 10 -InternalLoadBalancerName $ilbName |
                Update-AzureVM

            Write-Host "created $vmName"     
        }

<span data-ttu-id="4bc83-480">**步驟 3：在每個 VM 上設定 Cassandra**</span><span class="sxs-lookup"><span data-stu-id="4bc83-480">**Step 3: Configure Cassandra on each VM**</span></span>

<span data-ttu-id="4bc83-481">登入 hello VM，並執行下列 hello:</span><span class="sxs-lookup"><span data-stu-id="4bc83-481">Log into hello VM and perform hello following:</span></span>

* <span data-ttu-id="4bc83-482">編輯 $CASS_HOME/conf/cassandra-rackdc.properties toospecify hello 資料中心和機架屬性：</span><span class="sxs-lookup"><span data-stu-id="4bc83-482">Edit $CASS_HOME/conf/cassandra-rackdc.properties toospecify hello data center and rack properties:</span></span>
  
       dc =EASTUS, rack =rack1
* <span data-ttu-id="4bc83-483">編輯 cassandra.yaml tooconfigure 種子節點，如下所示：</span><span class="sxs-lookup"><span data-stu-id="4bc83-483">Edit cassandra.yaml tooconfigure seed nodes as below:</span></span>
  
       Seeds: "10.1.2.4,10.1.2.6,10.1.2.8,10.1.2.10"

<span data-ttu-id="4bc83-484">**步驟 4： 啟動 hello Vm，然後測試 hello 叢集**</span><span class="sxs-lookup"><span data-stu-id="4bc83-484">**Step 4: Start hello VMs and test hello cluster**</span></span>

<span data-ttu-id="4bc83-485">登入的其中一個 hello 節點 （例如 hk-c1-西-我們） 並執行的 hello 遵循 hello 叢集命令 toosee hello 狀態：</span><span class="sxs-lookup"><span data-stu-id="4bc83-485">Log into one of hello nodes (e.g. hk-c1-west-us) and run hello following command toosee hello status of hello cluster:</span></span>

       nodetool –h 10.1.2.4 –p 7199 status

<span data-ttu-id="4bc83-486">您應該會看到 hello 顯示類似 toohello 其中一個下的 8 個節點叢集：</span><span class="sxs-lookup"><span data-stu-id="4bc83-486">You should see hello display similar toohello one below for an 8-node cluster:</span></span>

<table>
<tr><th><span data-ttu-id="4bc83-487">狀態</span><span class="sxs-lookup"><span data-stu-id="4bc83-487">Status</span></span></th><th><span data-ttu-id="4bc83-488">位址</span><span class="sxs-lookup"><span data-stu-id="4bc83-488">Address</span></span>    </th><th><span data-ttu-id="4bc83-489">載入</span><span class="sxs-lookup"><span data-stu-id="4bc83-489">Load</span></span>    </th><th><span data-ttu-id="4bc83-490">權杖</span><span class="sxs-lookup"><span data-stu-id="4bc83-490">Tokens</span></span>    </th><th><span data-ttu-id="4bc83-491">擁有</span><span class="sxs-lookup"><span data-stu-id="4bc83-491">Owns</span></span> </th><th><span data-ttu-id="4bc83-492">主機識別碼</span><span class="sxs-lookup"><span data-stu-id="4bc83-492">Host ID</span></span>    </th><th><span data-ttu-id="4bc83-493">機架</span><span class="sxs-lookup"><span data-stu-id="4bc83-493">Rack</span></span></th></tr>
<tr><th><span data-ttu-id="4bc83-494">UN</span><span class="sxs-lookup"><span data-stu-id="4bc83-494">UN</span></span>    </td><td><span data-ttu-id="4bc83-495">10.1.2.4</span><span class="sxs-lookup"><span data-stu-id="4bc83-495">10.1.2.4</span></span>     </td><td><span data-ttu-id="4bc83-496">87.81 KB</span><span class="sxs-lookup"><span data-stu-id="4bc83-496">87.81 KB</span></span>    </td><td><span data-ttu-id="4bc83-497">256</span><span class="sxs-lookup"><span data-stu-id="4bc83-497">256</span></span>    </td><td><span data-ttu-id="4bc83-498">38.0%</span><span class="sxs-lookup"><span data-stu-id="4bc83-498">38.0%</span></span>    </td><td><span data-ttu-id="4bc83-499">Guid (已移除)</span><span class="sxs-lookup"><span data-stu-id="4bc83-499">Guid (removed)</span></span></td><td><span data-ttu-id="4bc83-500">rack1</span><span class="sxs-lookup"><span data-stu-id="4bc83-500">rack1</span></span></td></tr>
<tr><th><span data-ttu-id="4bc83-501">UN</span><span class="sxs-lookup"><span data-stu-id="4bc83-501">UN</span></span>    </td><td><span data-ttu-id="4bc83-502">10.1.2.5</span><span class="sxs-lookup"><span data-stu-id="4bc83-502">10.1.2.5</span></span>     </td><td><span data-ttu-id="4bc83-503">41.08 KB</span><span class="sxs-lookup"><span data-stu-id="4bc83-503">41.08 KB</span></span>    </td><td><span data-ttu-id="4bc83-504">256</span><span class="sxs-lookup"><span data-stu-id="4bc83-504">256</span></span>    </td><td><span data-ttu-id="4bc83-505">68.9%</span><span class="sxs-lookup"><span data-stu-id="4bc83-505">68.9%</span></span>    </td><td><span data-ttu-id="4bc83-506">Guid (已移除)</span><span class="sxs-lookup"><span data-stu-id="4bc83-506">Guid (removed)</span></span></td><td><span data-ttu-id="4bc83-507">rack1</span><span class="sxs-lookup"><span data-stu-id="4bc83-507">rack1</span></span></td></tr>
<tr><th><span data-ttu-id="4bc83-508">UN</span><span class="sxs-lookup"><span data-stu-id="4bc83-508">UN</span></span>    </td><td><span data-ttu-id="4bc83-509">10.1.2.6</span><span class="sxs-lookup"><span data-stu-id="4bc83-509">10.1.2.6</span></span>     </td><td><span data-ttu-id="4bc83-510">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="4bc83-510">55.29 KB</span></span>    </td><td><span data-ttu-id="4bc83-511">256</span><span class="sxs-lookup"><span data-stu-id="4bc83-511">256</span></span>    </td><td><span data-ttu-id="4bc83-512">68.8%</span><span class="sxs-lookup"><span data-stu-id="4bc83-512">68.8%</span></span>    </td><td><span data-ttu-id="4bc83-513">Guid (已移除)</span><span class="sxs-lookup"><span data-stu-id="4bc83-513">Guid (removed)</span></span></td><td><span data-ttu-id="4bc83-514">rack2</span><span class="sxs-lookup"><span data-stu-id="4bc83-514">rack2</span></span></td></tr>
<tr><th><span data-ttu-id="4bc83-515">UN</span><span class="sxs-lookup"><span data-stu-id="4bc83-515">UN</span></span>    </td><td><span data-ttu-id="4bc83-516">10.1.2.7</span><span class="sxs-lookup"><span data-stu-id="4bc83-516">10.1.2.7</span></span>     </td><td><span data-ttu-id="4bc83-517">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="4bc83-517">55.29 KB</span></span>    </td><td><span data-ttu-id="4bc83-518">256</span><span class="sxs-lookup"><span data-stu-id="4bc83-518">256</span></span>    </td><td><span data-ttu-id="4bc83-519">68.8%</span><span class="sxs-lookup"><span data-stu-id="4bc83-519">68.8%</span></span>    </td><td><span data-ttu-id="4bc83-520">Guid (已移除)</span><span class="sxs-lookup"><span data-stu-id="4bc83-520">Guid (removed)</span></span></td><td><span data-ttu-id="4bc83-521">rack2</span><span class="sxs-lookup"><span data-stu-id="4bc83-521">rack2</span></span></td></tr>
<tr><th><span data-ttu-id="4bc83-522">UN</span><span class="sxs-lookup"><span data-stu-id="4bc83-522">UN</span></span>    </td><td><span data-ttu-id="4bc83-523">10.1.2.8</span><span class="sxs-lookup"><span data-stu-id="4bc83-523">10.1.2.8</span></span>     </td><td><span data-ttu-id="4bc83-524">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="4bc83-524">55.29 KB</span></span>    </td><td><span data-ttu-id="4bc83-525">256</span><span class="sxs-lookup"><span data-stu-id="4bc83-525">256</span></span>    </td><td><span data-ttu-id="4bc83-526">68.8%</span><span class="sxs-lookup"><span data-stu-id="4bc83-526">68.8%</span></span>    </td><td><span data-ttu-id="4bc83-527">Guid (已移除)</span><span class="sxs-lookup"><span data-stu-id="4bc83-527">Guid (removed)</span></span></td><td><span data-ttu-id="4bc83-528">rack3</span><span class="sxs-lookup"><span data-stu-id="4bc83-528">rack3</span></span></td></tr>
<tr><th><span data-ttu-id="4bc83-529">UN</span><span class="sxs-lookup"><span data-stu-id="4bc83-529">UN</span></span>    </td><td><span data-ttu-id="4bc83-530">10.1.2.9</span><span class="sxs-lookup"><span data-stu-id="4bc83-530">10.1.2.9</span></span>     </td><td><span data-ttu-id="4bc83-531">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="4bc83-531">55.29 KB</span></span>    </td><td><span data-ttu-id="4bc83-532">256</span><span class="sxs-lookup"><span data-stu-id="4bc83-532">256</span></span>    </td><td><span data-ttu-id="4bc83-533">68.8%</span><span class="sxs-lookup"><span data-stu-id="4bc83-533">68.8%</span></span>    </td><td><span data-ttu-id="4bc83-534">Guid (已移除)</span><span class="sxs-lookup"><span data-stu-id="4bc83-534">Guid (removed)</span></span></td><td><span data-ttu-id="4bc83-535">rack3</span><span class="sxs-lookup"><span data-stu-id="4bc83-535">rack3</span></span></td></tr>
<tr><th><span data-ttu-id="4bc83-536">UN</span><span class="sxs-lookup"><span data-stu-id="4bc83-536">UN</span></span>    </td><td><span data-ttu-id="4bc83-537">10.1.2.10</span><span class="sxs-lookup"><span data-stu-id="4bc83-537">10.1.2.10</span></span>     </td><td><span data-ttu-id="4bc83-538">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="4bc83-538">55.29 KB</span></span>    </td><td><span data-ttu-id="4bc83-539">256</span><span class="sxs-lookup"><span data-stu-id="4bc83-539">256</span></span>    </td><td><span data-ttu-id="4bc83-540">68.8%</span><span class="sxs-lookup"><span data-stu-id="4bc83-540">68.8%</span></span>    </td><td><span data-ttu-id="4bc83-541">Guid (已移除)</span><span class="sxs-lookup"><span data-stu-id="4bc83-541">Guid (removed)</span></span></td><td><span data-ttu-id="4bc83-542">rack4</span><span class="sxs-lookup"><span data-stu-id="4bc83-542">rack4</span></span></td></tr>
<tr><th><span data-ttu-id="4bc83-543">UN</span><span class="sxs-lookup"><span data-stu-id="4bc83-543">UN</span></span>    </td><td><span data-ttu-id="4bc83-544">10.1.2.11</span><span class="sxs-lookup"><span data-stu-id="4bc83-544">10.1.2.11</span></span>     </td><td><span data-ttu-id="4bc83-545">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="4bc83-545">55.29 KB</span></span>    </td><td><span data-ttu-id="4bc83-546">256</span><span class="sxs-lookup"><span data-stu-id="4bc83-546">256</span></span>    </td><td><span data-ttu-id="4bc83-547">68.8%</span><span class="sxs-lookup"><span data-stu-id="4bc83-547">68.8%</span></span>    </td><td><span data-ttu-id="4bc83-548">Guid (已移除)</span><span class="sxs-lookup"><span data-stu-id="4bc83-548">Guid (removed)</span></span></td><td><span data-ttu-id="4bc83-549">rack4</span><span class="sxs-lookup"><span data-stu-id="4bc83-549">rack4</span></span></td></tr>
</table>

## <a name="test-hello-single-region-cluster"></a><span data-ttu-id="4bc83-550">測試 hello 單一區域叢集</span><span class="sxs-lookup"><span data-stu-id="4bc83-550">Test hello Single Region Cluster</span></span>
<span data-ttu-id="4bc83-551">使用下列步驟 tootest hello 叢集 hello:</span><span class="sxs-lookup"><span data-stu-id="4bc83-551">Use hello following steps tootest hello cluster:</span></span>

1. <span data-ttu-id="4bc83-552">使用 hello Powershell 命令 Get-azureinternalloadbalancer commandlet，（例如取得 hello hello 內部負載平衡器的 IP 位址 10.1.2.101)。</span><span class="sxs-lookup"><span data-stu-id="4bc83-552">Using hello Powershell command Get-AzureInternalLoadbalancer commandlet, obtain hello IP address of hello internal load balancer (e.g.  10.1.2.101).</span></span> <span data-ttu-id="4bc83-553">hello hello 命令語法如下所示： Get AzureLoadbalancer-ServiceName"hk-c-svc-西-我們"[顯示 hello hello 內部負載平衡器，以及其 IP 位址的詳細資料]</span><span class="sxs-lookup"><span data-stu-id="4bc83-553">hello syntax of hello command is shown below: Get-AzureLoadbalancer –ServiceName "hk-c-svc-west-us” [displays hello details of hello internal load balancer along with its IP address]</span></span>
2. <span data-ttu-id="4bc83-554">登入 hello web 伺服陣列 (例如 hk-w1-西-us) 的 VM 使用 Putty 或 ssh</span><span class="sxs-lookup"><span data-stu-id="4bc83-554">Log into hello web farm VM (e.g. hk-w1-west-us) using Putty or ssh</span></span>
3. <span data-ttu-id="4bc83-555">執行 $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span><span class="sxs-lookup"><span data-stu-id="4bc83-555">Execute $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span></span>
4. <span data-ttu-id="4bc83-556">使用下列 CQL 命令 tooverify 如果 hello 叢集正在運作的 hello:</span><span class="sxs-lookup"><span data-stu-id="4bc83-556">Use hello following CQL commands tooverify if hello cluster is working:</span></span>
   
     <span data-ttu-id="4bc83-557">CREATE KEYSPACE customers_ks WITH REPLICATION = { 'class' : 'SimpleStrategy', 'replication_factor' : 3 };   USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');</span><span class="sxs-lookup"><span data-stu-id="4bc83-557">CREATE KEYSPACE customers_ks WITH REPLICATION = { 'class' : 'SimpleStrategy', 'replication_factor' : 3 };   USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');</span></span>
   
     <span data-ttu-id="4bc83-558">SELECT * FROM Customers;</span><span class="sxs-lookup"><span data-stu-id="4bc83-558">SELECT * FROM Customers;</span></span>

<span data-ttu-id="4bc83-559">您應該會看到類似下面其中一個 hello 顯示：</span><span class="sxs-lookup"><span data-stu-id="4bc83-559">You should see a display like hello one below:</span></span>

<table>
  <tr><th> <span data-ttu-id="4bc83-560">customer_id</span><span class="sxs-lookup"><span data-stu-id="4bc83-560">customer_id</span></span> </th><th> <span data-ttu-id="4bc83-561">firstname</span><span class="sxs-lookup"><span data-stu-id="4bc83-561">firstname</span></span> </th><th> <span data-ttu-id="4bc83-562">lastname</span><span class="sxs-lookup"><span data-stu-id="4bc83-562">lastname</span></span> </th></tr>
  <tr><td> <span data-ttu-id="4bc83-563">1</span><span class="sxs-lookup"><span data-stu-id="4bc83-563">1</span></span> </td><td> <span data-ttu-id="4bc83-564">John</span><span class="sxs-lookup"><span data-stu-id="4bc83-564">John</span></span> </td><td> <span data-ttu-id="4bc83-565">Doe</span><span class="sxs-lookup"><span data-stu-id="4bc83-565">Doe</span></span> </td></tr>
  <tr><td> <span data-ttu-id="4bc83-566">2</span><span class="sxs-lookup"><span data-stu-id="4bc83-566">2</span></span> </td><td> <span data-ttu-id="4bc83-567">Jane</span><span class="sxs-lookup"><span data-stu-id="4bc83-567">Jane</span></span> </td><td> <span data-ttu-id="4bc83-568">Doe</span><span class="sxs-lookup"><span data-stu-id="4bc83-568">Doe</span></span> </td></tr>
</table>

<span data-ttu-id="4bc83-569">請注意在步驟 4 中建立該 hello keyspace SimpleStrategy 使用 replication_factor 為 3。</span><span class="sxs-lookup"><span data-stu-id="4bc83-569">Please note that hello keyspace created in step 4 uses SimpleStrategy with a  replication_factor of 3.</span></span> <span data-ttu-id="4bc83-570">如果是單一資料中心部署，建議使用 SimpleStrategy，如果是多重資料中心部署，則建議使用 NetworkTopologyStrategy。</span><span class="sxs-lookup"><span data-stu-id="4bc83-570">SimpleStrategy is recommended for single data center deployments whereas NetworkTopologyStrategy for multi-data center deployments.</span></span> <span data-ttu-id="4bc83-571">replication_factor 為 3 將針對節點失敗提供容錯。</span><span class="sxs-lookup"><span data-stu-id="4bc83-571">A replication_factor of 3 will give tolerance for node failures.</span></span>

## <span data-ttu-id="4bc83-572"><a id="tworegion"> </a>多區域部署程序</span><span class="sxs-lookup"><span data-stu-id="4bc83-572"><a id="tworegion"> </a>Multi-Region Deployment Process</span></span>
<span data-ttu-id="4bc83-573">會利用 hello 單一區域部署已完成，並重複相同的處理序的 hello 安裝 hello 第二個區域。</span><span class="sxs-lookup"><span data-stu-id="4bc83-573">Will leverage hello single region deployment completed and repeat hello same process for installing hello second region.</span></span> <span data-ttu-id="4bc83-574">hello hello 單一和多個區域部署之間的主要差異是區域間通訊; hello VPN 通道設定即將 hello 網路安裝的開頭、 hello Vm 佈建及設定 Cassandra。</span><span class="sxs-lookup"><span data-stu-id="4bc83-574">hello key difference between hello single and multiple region deployment is hello VPN tunnel setup for inter-region communication; we will start with hello network installation, provision hello VMs and configure Cassandra.</span></span>

### <a name="step-1-create-hello-virtual-network-at-hello-2nd-region"></a><span data-ttu-id="4bc83-575">步驟 1： 建立 hello 虛擬網路在 hello 第 2 個區域</span><span class="sxs-lookup"><span data-stu-id="4bc83-575">Step 1: Create hello Virtual Network at hello 2nd Region</span></span>
<span data-ttu-id="4bc83-576">登入 hello Azure 傳統入口網站，並建立具有 hello 屬性顯示 hello 資料表中的虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="4bc83-576">Log into hello Azure classic portal and create a Virtual Network with hello attributes show in hello table.</span></span> <span data-ttu-id="4bc83-577">請參閱[hello Azure 傳統入口網站中設定純雲端虛擬網路](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md)hello 程序的詳細步驟。</span><span class="sxs-lookup"><span data-stu-id="4bc83-577">See [Configure a Cloud-Only Virtual Network in hello Azure classic portal](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) for detailed steps of hello process.</span></span>      

<table>
<tr><th><span data-ttu-id="4bc83-578">屬性名稱</span><span class="sxs-lookup"><span data-stu-id="4bc83-578">Attribute Name</span></span>    </th><th><span data-ttu-id="4bc83-579">值</span><span class="sxs-lookup"><span data-stu-id="4bc83-579">Value</span></span>    </th><th><span data-ttu-id="4bc83-580">備註</span><span class="sxs-lookup"><span data-stu-id="4bc83-580">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="4bc83-581">名稱</span><span class="sxs-lookup"><span data-stu-id="4bc83-581">Name</span></span>    </td><td><span data-ttu-id="4bc83-582">vnet-cass-east-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-582">vnet-cass-east-us</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="4bc83-583">區域</span><span class="sxs-lookup"><span data-stu-id="4bc83-583">Region</span></span>    </td><td><span data-ttu-id="4bc83-584">美國東部</span><span class="sxs-lookup"><span data-stu-id="4bc83-584">East US</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="4bc83-585">DNS 伺服器</span><span class="sxs-lookup"><span data-stu-id="4bc83-585">DNS Servers</span></span>        </td><td></td><td><span data-ttu-id="4bc83-586">請忽略此項，因為我們不使用 DNS 伺服器</span><span class="sxs-lookup"><span data-stu-id="4bc83-586">Ignore this as we are not using a DNS Server</span></span></td></tr>
<tr><td><span data-ttu-id="4bc83-587">設定點對站 VPN</span><span class="sxs-lookup"><span data-stu-id="4bc83-587">Configure a point-to-site VPN</span></span></td><td></td><td>        <span data-ttu-id="4bc83-588">略過此項</span><span class="sxs-lookup"><span data-stu-id="4bc83-588">Ignore this</span></span></td></tr>
<tr><td><span data-ttu-id="4bc83-589">設定站台對站台 VPN</span><span class="sxs-lookup"><span data-stu-id="4bc83-589">Configure a site-to-site VPN</span></span></td><td></td><td>        <span data-ttu-id="4bc83-590">略過此項</span><span class="sxs-lookup"><span data-stu-id="4bc83-590">Ignore this</span></span></td></tr>
<tr><td><span data-ttu-id="4bc83-591">位址空間</span><span class="sxs-lookup"><span data-stu-id="4bc83-591">Address Space</span></span>    </td><td><span data-ttu-id="4bc83-592">10.2.0.0/16</span><span class="sxs-lookup"><span data-stu-id="4bc83-592">10.2.0.0/16</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="4bc83-593">起始 IP</span><span class="sxs-lookup"><span data-stu-id="4bc83-593">Starting IP</span></span>    </td><td><span data-ttu-id="4bc83-594">10.2.0.0</span><span class="sxs-lookup"><span data-stu-id="4bc83-594">10.2.0.0</span></span>    </td><td></td></tr>
<tr><td><span data-ttu-id="4bc83-595">CIDR</span><span class="sxs-lookup"><span data-stu-id="4bc83-595">CIDR</span></span>    </td><td><span data-ttu-id="4bc83-596">/16 (65531)</span><span class="sxs-lookup"><span data-stu-id="4bc83-596">/16 (65531)</span></span></td><td></td></tr>
</table>

<span data-ttu-id="4bc83-597">新增下列子網路的 hello:</span><span class="sxs-lookup"><span data-stu-id="4bc83-597">Add hello following subnets:</span></span>

<table>
<tr><th><span data-ttu-id="4bc83-598">名稱</span><span class="sxs-lookup"><span data-stu-id="4bc83-598">Name</span></span>    </th><th><span data-ttu-id="4bc83-599">起始 IP</span><span class="sxs-lookup"><span data-stu-id="4bc83-599">Starting IP</span></span>    </th><th><span data-ttu-id="4bc83-600">CIDR</span><span class="sxs-lookup"><span data-stu-id="4bc83-600">CIDR</span></span>    </th><th><span data-ttu-id="4bc83-601">備註</span><span class="sxs-lookup"><span data-stu-id="4bc83-601">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="4bc83-602">Web</span><span class="sxs-lookup"><span data-stu-id="4bc83-602">web</span></span>    </td><td><span data-ttu-id="4bc83-603">10.2.1.0</span><span class="sxs-lookup"><span data-stu-id="4bc83-603">10.2.1.0</span></span>    </td><td><span data-ttu-id="4bc83-604">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="4bc83-604">/24 (251)</span></span>    </td><td><span data-ttu-id="4bc83-605">Hello web 伺服陣列的子網路</span><span class="sxs-lookup"><span data-stu-id="4bc83-605">Subnet for hello web farm</span></span></td></tr>
<tr><td><span data-ttu-id="4bc83-606">data</span><span class="sxs-lookup"><span data-stu-id="4bc83-606">data</span></span>    </td><td><span data-ttu-id="4bc83-607">10.2.2.0</span><span class="sxs-lookup"><span data-stu-id="4bc83-607">10.2.2.0</span></span>    </td><td><span data-ttu-id="4bc83-608">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="4bc83-608">/24 (251)</span></span>    </td><td><span data-ttu-id="4bc83-609">Hello 資料庫節點的子網路</span><span class="sxs-lookup"><span data-stu-id="4bc83-609">Subnet for hello database nodes</span></span></td></tr>
</table>


### <a name="step-2-create-local-networks"></a><span data-ttu-id="4bc83-610">步驟 2：建立區域網路</span><span class="sxs-lookup"><span data-stu-id="4bc83-610">Step 2: Create Local Networks</span></span>
<span data-ttu-id="4bc83-611">Azure 虛擬網路中的區域網路是對應 tooa 遠端站台，包括私人雲端或另一個 Azure 區域的 proxy 位址空間。</span><span class="sxs-lookup"><span data-stu-id="4bc83-611">A Local Network in Azure virtual networking is a proxy address space that maps tooa remote site including a private cloud or another Azure region.</span></span> <span data-ttu-id="4bc83-612">這個 proxy 的位址空間是繫結的 tooa 遠端閘道的路由網路 toohello 直接網路目的地。</span><span class="sxs-lookup"><span data-stu-id="4bc83-612">This proxy address space is bound tooa remote gateway for routing network toohello right networking destinations.</span></span> <span data-ttu-id="4bc83-613">請參閱[設定 VNet tooVNet 連接](../../../vpn-gateway/virtual-networks-configure-vnet-to-vnet-connection.md)hello 需建立 VNET 對 VNET 連線。</span><span class="sxs-lookup"><span data-stu-id="4bc83-613">See [Configure a VNet tooVNet Connection](../../../vpn-gateway/virtual-networks-configure-vnet-to-vnet-connection.md) for hello instructions on establishing VNET-to-VNET connection.</span></span>

<span data-ttu-id="4bc83-614">建立 hello 下列詳細資料每兩個本機網路：</span><span class="sxs-lookup"><span data-stu-id="4bc83-614">Create two local networks per hello following details:</span></span>

| <span data-ttu-id="4bc83-615">網路名稱</span><span class="sxs-lookup"><span data-stu-id="4bc83-615">Network Name</span></span> | <span data-ttu-id="4bc83-616">VPN 閘道位址</span><span class="sxs-lookup"><span data-stu-id="4bc83-616">VPN Gateway Address</span></span> | <span data-ttu-id="4bc83-617">位址空間</span><span class="sxs-lookup"><span data-stu-id="4bc83-617">Address Space</span></span> | <span data-ttu-id="4bc83-618">備註</span><span class="sxs-lookup"><span data-stu-id="4bc83-618">Remarks</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="4bc83-619">hk-lnet-map-to-east-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-619">hk-lnet-map-to-east-us</span></span> |<span data-ttu-id="4bc83-620">23.1.1.1</span><span class="sxs-lookup"><span data-stu-id="4bc83-620">23.1.1.1</span></span> |<span data-ttu-id="4bc83-621">10.2.0.0/16</span><span class="sxs-lookup"><span data-stu-id="4bc83-621">10.2.0.0/16</span></span> |<span data-ttu-id="4bc83-622">建立 hello 區域網路時提供預留位置閘道位址。</span><span class="sxs-lookup"><span data-stu-id="4bc83-622">While creating hello Local Network give a placeholder gateway address.</span></span> <span data-ttu-id="4bc83-623">建立 hello 閘道之後，會自動填入 hello 真實的閘道位址。</span><span class="sxs-lookup"><span data-stu-id="4bc83-623">hello real gateway address is filled once hello gateway is created.</span></span> <span data-ttu-id="4bc83-624">請確定 hello 位址空間完全相符 hello 個別遠端 VNET。在此情況下 hello VNET 中建立 hello 美東地區。</span><span class="sxs-lookup"><span data-stu-id="4bc83-624">Make sure hello address space exactly matches hello respective remote VNET; in this case hello VNET created in hello East US region.</span></span> |
| <span data-ttu-id="4bc83-625">hk-lnet-map-to-west-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-625">hk-lnet-map-to-west-us</span></span> |<span data-ttu-id="4bc83-626">23.2.2.2</span><span class="sxs-lookup"><span data-stu-id="4bc83-626">23.2.2.2</span></span> |<span data-ttu-id="4bc83-627">10.1.0.0/16</span><span class="sxs-lookup"><span data-stu-id="4bc83-627">10.1.0.0/16</span></span> |<span data-ttu-id="4bc83-628">建立 hello 區域網路時提供預留位置閘道位址。</span><span class="sxs-lookup"><span data-stu-id="4bc83-628">While creating hello Local Network give a placeholder gateway address.</span></span> <span data-ttu-id="4bc83-629">建立 hello 閘道之後，會自動填入 hello 真實的閘道位址。</span><span class="sxs-lookup"><span data-stu-id="4bc83-629">hello real gateway address is filled once hello gateway is created.</span></span> <span data-ttu-id="4bc83-630">請確定 hello 位址空間完全相符 hello 個別遠端 VNET。在此情況下 hello VNET 中建立 hello 美國西部地區。</span><span class="sxs-lookup"><span data-stu-id="4bc83-630">Make sure hello address space exactly matches hello respective remote VNET; in this case hello VNET created in hello West US region.</span></span> |

### <a name="step-3-map-local-network-toohello-respective-vnets"></a><span data-ttu-id="4bc83-631">步驟 3： 對應網路 「 區域 」 toohello 個別 Vnet</span><span class="sxs-lookup"><span data-stu-id="4bc83-631">Step 3: Map “Local” network toohello respective VNETs</span></span>
<span data-ttu-id="4bc83-632">從 hello Azure 傳統入口網站，選取每個 vnet、 按一下 [設定]、 檢查 「 連線 toohello 本機網路 」，然後選取 hello 區域網路，每個 hello 下列詳細資料：</span><span class="sxs-lookup"><span data-stu-id="4bc83-632">From hello Azure classic portal, select each vnet, click “Configure”, check “Connect toohello local network”, and select hello Local Networks per hello following details:</span></span>

| <span data-ttu-id="4bc83-633">虛擬網路</span><span class="sxs-lookup"><span data-stu-id="4bc83-633">Virtual Network</span></span> | <span data-ttu-id="4bc83-634">區域網路</span><span class="sxs-lookup"><span data-stu-id="4bc83-634">Local Network</span></span> |
| --- | --- |
| <span data-ttu-id="4bc83-635">hk-vnet-west-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-635">hk-vnet-west-us</span></span> |<span data-ttu-id="4bc83-636">hk-lnet-map-to-east-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-636">hk-lnet-map-to-east-us</span></span> |
| <span data-ttu-id="4bc83-637">hk-vnet-east-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-637">hk-vnet-east-us</span></span> |<span data-ttu-id="4bc83-638">hk-lnet-map-to-west-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-638">hk-lnet-map-to-west-us</span></span> |

### <a name="step-4-create-gateways-on-vnet1-and-vnet2"></a><span data-ttu-id="4bc83-639">步驟 4：在 VNET1 和 VNET2 上建立閘道</span><span class="sxs-lookup"><span data-stu-id="4bc83-639">Step 4: Create Gateways on VNET1 and VNET2</span></span>
<span data-ttu-id="4bc83-640">從這兩個 hello 虛擬網路的 hello 儀表板，按一下 建立閘道，其會觸發 hello VPN 閘道的佈建程序。</span><span class="sxs-lookup"><span data-stu-id="4bc83-640">From hello dashboard of both hello virtual networks, click CREATE GATEWAY which will trigger hello VPN gateway provisioning process.</span></span> <span data-ttu-id="4bc83-641">幾分鐘的時間 hello 儀表板的每個虛擬網路之後應該會顯示 hello 實際的閘道位址。</span><span class="sxs-lookup"><span data-stu-id="4bc83-641">After a few minutes hello dashboard of each virtual network should display hello actual gateway address.</span></span>

### <a name="step-5-update-local-networks-with-hello-respective-gateway-addresses"></a><span data-ttu-id="4bc83-642">步驟 5: Hello 個別 「 閘道 」 位址更新 「 本機 」 網路</span><span class="sxs-lookup"><span data-stu-id="4bc83-642">Step 5: Update “Local” networks with hello respective “Gateway” addresses</span></span>
<span data-ttu-id="4bc83-643">編輯兩個 hello 區域網路 tooreplace hello 預留位置閘道 IP 位址與 hello 實際 IP 位址的 hello 只佈建閘道。</span><span class="sxs-lookup"><span data-stu-id="4bc83-643">Edit both hello local networks tooreplace hello placeholder gateway IP address with hello real IP address of hello just provisioned gateways.</span></span> <span data-ttu-id="4bc83-644">使用下列對應的 hello:</span><span class="sxs-lookup"><span data-stu-id="4bc83-644">Use hello following mapping:</span></span>

<table>
<tr><th><span data-ttu-id="4bc83-645">區域網路</span><span class="sxs-lookup"><span data-stu-id="4bc83-645">Local Network</span></span>    </th><th><span data-ttu-id="4bc83-646">虛擬網路閘道</span><span class="sxs-lookup"><span data-stu-id="4bc83-646">Virtual Network Gateway</span></span></th></tr>
<tr><td><span data-ttu-id="4bc83-647">hk-lnet-map-to-east-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-647">hk-lnet-map-to-east-us</span></span> </td><td><span data-ttu-id="4bc83-648">hk-vnet-west-us 的閘道</span><span class="sxs-lookup"><span data-stu-id="4bc83-648">Gateway of hk-vnet-west-us</span></span></td></tr>
<tr><td><span data-ttu-id="4bc83-649">hk-lnet-map-to-west-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-649">hk-lnet-map-to-west-us</span></span> </td><td><span data-ttu-id="4bc83-650">hk-vnet-east-us 的閘道</span><span class="sxs-lookup"><span data-stu-id="4bc83-650">Gateway of hk-vnet-east-us</span></span></td></tr>
</table>

### <a name="step-6-update-hello-shared-key"></a><span data-ttu-id="4bc83-651">步驟 6： 更新 hello 共用的金鑰</span><span class="sxs-lookup"><span data-stu-id="4bc83-651">Step 6: Update hello shared key</span></span>
<span data-ttu-id="4bc83-652">使用下列 Powershell 指令碼 tooupdate hello IPSec 金鑰的每個 VPN 閘道 [使用 hello 起見索引鍵的兩個 hello 閘道] 的 hello： 集 AzureVNetGatewayKey VNetName hk-vnet-東部-我們-LocalNetworkSiteName hk-lnet-map-to-west-us-SharedKey D9E76BKK設定 AzureVNetGatewayKey-VNetName hk-vnet-西-我們-LocalNetworkSiteName hk-lnet-map-to-east-us-SharedKey D9E76BKK</span><span class="sxs-lookup"><span data-stu-id="4bc83-652">Use hello following Powershell script tooupdate hello IPSec key of each VPN gateway [use hello sake key for both hello gateways]: Set-AzureVNetGatewayKey -VNetName hk-vnet-east-us -LocalNetworkSiteName hk-lnet-map-to-west-us -SharedKey D9E76BKK Set-AzureVNetGatewayKey -VNetName hk-vnet-west-us -LocalNetworkSiteName hk-lnet-map-to-east-us -SharedKey D9E76BKK</span></span>

### <a name="step-7-establish-hello-vnet-to-vnet-connection"></a><span data-ttu-id="4bc83-653">步驟 7： 建立 hello VNET 對 VNET 連線</span><span class="sxs-lookup"><span data-stu-id="4bc83-653">Step 7: Establish hello VNET-to-VNET connection</span></span>
<span data-ttu-id="4bc83-654">Hello Azure 傳統入口網站，從使用這兩個 hello 虛擬網路 tooestablish 閘道對閘道連線的 hello 」 儀表板 功能表。</span><span class="sxs-lookup"><span data-stu-id="4bc83-654">From hello Azure classic portal, use hello “DASHBOARD” menu of both hello virtual networks tooestablish gateway-to-gateway connection.</span></span> <span data-ttu-id="4bc83-655">使用 hello 底部工具列中的 hello [連線] 功能表項目。</span><span class="sxs-lookup"><span data-stu-id="4bc83-655">Use hello “CONNECT” menu items in hello bottom toolbar.</span></span> <span data-ttu-id="4bc83-656">幾分鐘後 hello 儀表板應以圖形方式顯示 hello 連接詳細資料。</span><span class="sxs-lookup"><span data-stu-id="4bc83-656">After a few minutes hello dashboard should display hello connection details graphically.</span></span>

### <a name="step-8-create-hello-virtual-machines-in-region-2"></a><span data-ttu-id="4bc83-657">步驟 8： 在區域 #2 中建立 hello 虛擬機器</span><span class="sxs-lookup"><span data-stu-id="4bc83-657">Step 8: Create hello virtual machines in region #2</span></span>
<span data-ttu-id="4bc83-658">建立 hello Ubuntu 映像，依據相同的步驟，或複製 hello 映像 VHD 檔案 toohello Azure 儲存體帳戶位於區域 #2 中的下列 hello 區域 #1 部署中所述，建立 hello 映像。</span><span class="sxs-lookup"><span data-stu-id="4bc83-658">Create hello Ubuntu image as described in region #1 deployment by following hello same steps or copy hello image VHD file toohello Azure storage account located in region #2 and create hello image.</span></span> <span data-ttu-id="4bc83-659">使用此映像，並建立下列清單中的虛擬機器到新的雲端服務 hk-c-svc-東部-我們 hello:</span><span class="sxs-lookup"><span data-stu-id="4bc83-659">Use this image and create hello following list of virtual machines into a new cloud service hk-c-svc-east-us:</span></span>

| <span data-ttu-id="4bc83-660">機器名稱</span><span class="sxs-lookup"><span data-stu-id="4bc83-660">Machine Name</span></span> | <span data-ttu-id="4bc83-661">子網路</span><span class="sxs-lookup"><span data-stu-id="4bc83-661">Subnet</span></span> | <span data-ttu-id="4bc83-662">IP 位址</span><span class="sxs-lookup"><span data-stu-id="4bc83-662">IP Address</span></span> | <span data-ttu-id="4bc83-663">可用性集合</span><span class="sxs-lookup"><span data-stu-id="4bc83-663">Availability set</span></span> | <span data-ttu-id="4bc83-664">DC/機架</span><span class="sxs-lookup"><span data-stu-id="4bc83-664">DC/Rack</span></span> | <span data-ttu-id="4bc83-665">是否為種子？</span><span class="sxs-lookup"><span data-stu-id="4bc83-665">Seed?</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="4bc83-666">hk-c1-east-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-666">hk-c1-east-us</span></span> |<span data-ttu-id="4bc83-667">data</span><span class="sxs-lookup"><span data-stu-id="4bc83-667">data</span></span> |<span data-ttu-id="4bc83-668">10.2.2.4</span><span class="sxs-lookup"><span data-stu-id="4bc83-668">10.2.2.4</span></span> |<span data-ttu-id="4bc83-669">hk-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="4bc83-669">hk-c-aset-1</span></span> |<span data-ttu-id="4bc83-670">dc=EASTUS 機架=rack1</span><span class="sxs-lookup"><span data-stu-id="4bc83-670">dc =EASTUS rack =rack1</span></span> |<span data-ttu-id="4bc83-671">是</span><span class="sxs-lookup"><span data-stu-id="4bc83-671">Yes</span></span> |
| <span data-ttu-id="4bc83-672">hk-c2-east-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-672">hk-c2-east-us</span></span> |<span data-ttu-id="4bc83-673">data</span><span class="sxs-lookup"><span data-stu-id="4bc83-673">data</span></span> |<span data-ttu-id="4bc83-674">10.2.2.5</span><span class="sxs-lookup"><span data-stu-id="4bc83-674">10.2.2.5</span></span> |<span data-ttu-id="4bc83-675">hk-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="4bc83-675">hk-c-aset-1</span></span> |<span data-ttu-id="4bc83-676">dc=EASTUS 機架=rack1</span><span class="sxs-lookup"><span data-stu-id="4bc83-676">dc =EASTUS rack =rack1</span></span> |<span data-ttu-id="4bc83-677">否</span><span class="sxs-lookup"><span data-stu-id="4bc83-677">No</span></span> |
| <span data-ttu-id="4bc83-678">hk-c3-east-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-678">hk-c3-east-us</span></span> |<span data-ttu-id="4bc83-679">data</span><span class="sxs-lookup"><span data-stu-id="4bc83-679">data</span></span> |<span data-ttu-id="4bc83-680">10.2.2.6</span><span class="sxs-lookup"><span data-stu-id="4bc83-680">10.2.2.6</span></span> |<span data-ttu-id="4bc83-681">hk-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="4bc83-681">hk-c-aset-1</span></span> |<span data-ttu-id="4bc83-682">dc=EASTUS 機架=rack2</span><span class="sxs-lookup"><span data-stu-id="4bc83-682">dc =EASTUS rack =rack2</span></span> |<span data-ttu-id="4bc83-683">是</span><span class="sxs-lookup"><span data-stu-id="4bc83-683">Yes</span></span> |
| <span data-ttu-id="4bc83-684">hk-c5-east-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-684">hk-c5-east-us</span></span> |<span data-ttu-id="4bc83-685">data</span><span class="sxs-lookup"><span data-stu-id="4bc83-685">data</span></span> |<span data-ttu-id="4bc83-686">10.2.2.8</span><span class="sxs-lookup"><span data-stu-id="4bc83-686">10.2.2.8</span></span> |<span data-ttu-id="4bc83-687">hk-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="4bc83-687">hk-c-aset-2</span></span> |<span data-ttu-id="4bc83-688">dc=EASTUS 機架=rack3</span><span class="sxs-lookup"><span data-stu-id="4bc83-688">dc =EASTUS rack =rack3</span></span> |<span data-ttu-id="4bc83-689">是</span><span class="sxs-lookup"><span data-stu-id="4bc83-689">Yes</span></span> |
| <span data-ttu-id="4bc83-690">hk-c6-east-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-690">hk-c6-east-us</span></span> |<span data-ttu-id="4bc83-691">data</span><span class="sxs-lookup"><span data-stu-id="4bc83-691">data</span></span> |<span data-ttu-id="4bc83-692">10.2.2.9</span><span class="sxs-lookup"><span data-stu-id="4bc83-692">10.2.2.9</span></span> |<span data-ttu-id="4bc83-693">hk-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="4bc83-693">hk-c-aset-2</span></span> |<span data-ttu-id="4bc83-694">dc=EASTUS 機架=rack3</span><span class="sxs-lookup"><span data-stu-id="4bc83-694">dc =EASTUS rack =rack3</span></span> |<span data-ttu-id="4bc83-695">否</span><span class="sxs-lookup"><span data-stu-id="4bc83-695">No</span></span> |
| <span data-ttu-id="4bc83-696">hk-c7-east-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-696">hk-c7-east-us</span></span> |<span data-ttu-id="4bc83-697">data</span><span class="sxs-lookup"><span data-stu-id="4bc83-697">data</span></span> |<span data-ttu-id="4bc83-698">10.2.2.10</span><span class="sxs-lookup"><span data-stu-id="4bc83-698">10.2.2.10</span></span> |<span data-ttu-id="4bc83-699">hk-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="4bc83-699">hk-c-aset-2</span></span> |<span data-ttu-id="4bc83-700">dc=EASTUS 機架=rack4</span><span class="sxs-lookup"><span data-stu-id="4bc83-700">dc =EASTUS rack =rack4</span></span> |<span data-ttu-id="4bc83-701">是</span><span class="sxs-lookup"><span data-stu-id="4bc83-701">Yes</span></span> |
| <span data-ttu-id="4bc83-702">hk-c8-east-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-702">hk-c8-east-us</span></span> |<span data-ttu-id="4bc83-703">data</span><span class="sxs-lookup"><span data-stu-id="4bc83-703">data</span></span> |<span data-ttu-id="4bc83-704">10.2.2.11</span><span class="sxs-lookup"><span data-stu-id="4bc83-704">10.2.2.11</span></span> |<span data-ttu-id="4bc83-705">hk-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="4bc83-705">hk-c-aset-2</span></span> |<span data-ttu-id="4bc83-706">dc=EASTUS 機架=rack4</span><span class="sxs-lookup"><span data-stu-id="4bc83-706">dc =EASTUS rack =rack4</span></span> |<span data-ttu-id="4bc83-707">否</span><span class="sxs-lookup"><span data-stu-id="4bc83-707">No</span></span> |
| <span data-ttu-id="4bc83-708">hk-w1-east-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-708">hk-w1-east-us</span></span> |<span data-ttu-id="4bc83-709">Web</span><span class="sxs-lookup"><span data-stu-id="4bc83-709">web</span></span> |<span data-ttu-id="4bc83-710">10.2.1.4</span><span class="sxs-lookup"><span data-stu-id="4bc83-710">10.2.1.4</span></span> |<span data-ttu-id="4bc83-711">hk-w-aset-1</span><span class="sxs-lookup"><span data-stu-id="4bc83-711">hk-w-aset-1</span></span> |<span data-ttu-id="4bc83-712">N/A</span><span class="sxs-lookup"><span data-stu-id="4bc83-712">N/A</span></span> |<span data-ttu-id="4bc83-713">N/A</span><span class="sxs-lookup"><span data-stu-id="4bc83-713">N/A</span></span> |
| <span data-ttu-id="4bc83-714">hk-w2-east-us</span><span class="sxs-lookup"><span data-stu-id="4bc83-714">hk-w2-east-us</span></span> |<span data-ttu-id="4bc83-715">Web</span><span class="sxs-lookup"><span data-stu-id="4bc83-715">web</span></span> |<span data-ttu-id="4bc83-716">10.2.1.5</span><span class="sxs-lookup"><span data-stu-id="4bc83-716">10.2.1.5</span></span> |<span data-ttu-id="4bc83-717">hk-w-aset-1</span><span class="sxs-lookup"><span data-stu-id="4bc83-717">hk-w-aset-1</span></span> |<span data-ttu-id="4bc83-718">N/A</span><span class="sxs-lookup"><span data-stu-id="4bc83-718">N/A</span></span> |<span data-ttu-id="4bc83-719">N/A</span><span class="sxs-lookup"><span data-stu-id="4bc83-719">N/A</span></span> |

<span data-ttu-id="4bc83-720">後續 hello 相同為區域 #1 的指示，但使用 10.2.xxx.xxx 位址空間。</span><span class="sxs-lookup"><span data-stu-id="4bc83-720">Follow hello same instructions as region #1 but use 10.2.xxx.xxx address space.</span></span>

### <a name="step-9-configure-cassandra-on-each-vm"></a><span data-ttu-id="4bc83-721">步驟 9：在每個 VM 上設定 Cassandra</span><span class="sxs-lookup"><span data-stu-id="4bc83-721">Step 9: Configure Cassandra on each VM</span></span>
<span data-ttu-id="4bc83-722">登入 hello VM，並執行下列 hello:</span><span class="sxs-lookup"><span data-stu-id="4bc83-722">Log into hello VM and perform hello following:</span></span>

1. <span data-ttu-id="4bc83-723">編輯 $CASS_HOME/conf/cassandra-rackdc.properties toospecify hello 資料中心和機架屬性 hello 格式： dc = EASTUS 機架 = rack1</span><span class="sxs-lookup"><span data-stu-id="4bc83-723">Edit $CASS_HOME/conf/cassandra-rackdc.properties toospecify hello data center and rack properties in hello format:  dc =EASTUS  rack =rack1</span></span>
2. <span data-ttu-id="4bc83-724">編輯 cassandra.yaml tooconfigure 種子節點： 之種子的位置:"10.1.2.4,10.1.2.6,10.1.2.8,10.1.2.10,10.2.2.4,10.2.2.6,10.2.2.8,10.2.2.10"</span><span class="sxs-lookup"><span data-stu-id="4bc83-724">Edit cassandra.yaml tooconfigure seed nodes:  Seeds: "10.1.2.4,10.1.2.6,10.1.2.8,10.1.2.10,10.2.2.4,10.2.2.6,10.2.2.8,10.2.2.10"</span></span>

### <a name="step-10-start-cassandra"></a><span data-ttu-id="4bc83-725">步驟 10：啟動 Cassandra</span><span class="sxs-lookup"><span data-stu-id="4bc83-725">Step 10: Start Cassandra</span></span>
<span data-ttu-id="4bc83-726">登入每個 VM 並啟動 Cassandra hello 背景中執行下列命令的 hello: $CASS_HOME/bin/cassandra</span><span class="sxs-lookup"><span data-stu-id="4bc83-726">Log into each VM and start Cassandra in hello background by running hello following command: $CASS_HOME/bin/cassandra</span></span>

## <a name="test-hello-multi-region-cluster"></a><span data-ttu-id="4bc83-727">測試 hello 多區域叢集</span><span class="sxs-lookup"><span data-stu-id="4bc83-727">Test hello Multi-Region Cluster</span></span>
<span data-ttu-id="4bc83-728">現在 Cassandra 已部署的 too16 節點含有 8 個節點中每個 Azure 區域。</span><span class="sxs-lookup"><span data-stu-id="4bc83-728">By now Cassandra has been deployed too16 nodes with 8 nodes in each Azure region.</span></span> <span data-ttu-id="4bc83-729">這些節點位於相同叢集必定 hello 一般的叢集名稱和 hello 種子節點組態的 hello。</span><span class="sxs-lookup"><span data-stu-id="4bc83-729">These nodes are in hello same cluster by virtue of hello common cluster name and hello seed node configuration.</span></span> <span data-ttu-id="4bc83-730">使用下列程序 tootest hello 叢集 hello:</span><span class="sxs-lookup"><span data-stu-id="4bc83-730">Use hello following process tootest hello cluster:</span></span>

### <a name="step-1-get-hello-internal-load-balancer-ip-for-both-hello-regions-using-powershell"></a><span data-ttu-id="4bc83-731">步驟 1： 取得 hello 內部負載平衡器 IP 這兩個 hello 地區使用 PowerShell</span><span class="sxs-lookup"><span data-stu-id="4bc83-731">Step 1: Get hello internal load balancer IP for both hello regions using PowerShell</span></span>
* <span data-ttu-id="4bc83-732">Get-AzureInternalLoadbalancer -ServiceName "hk-c-svc-west-us"</span><span class="sxs-lookup"><span data-stu-id="4bc83-732">Get-AzureInternalLoadbalancer -ServiceName "hk-c-svc-west-us"</span></span>
* <span data-ttu-id="4bc83-733">Get-AzureInternalLoadbalancer -ServiceName "hk-c-svc-east-us"</span><span class="sxs-lookup"><span data-stu-id="4bc83-733">Get-AzureInternalLoadbalancer -ServiceName "hk-c-svc-east-us"</span></span>  
  
    <span data-ttu-id="4bc83-734">請注意 hello IP 位址 (例如西-10.1.2.101，東部-10.2.2.101) 顯示。</span><span class="sxs-lookup"><span data-stu-id="4bc83-734">Note hello IP addresses (e.g. west - 10.1.2.101, east - 10.2.2.101) displayed.</span></span>

### <a name="step-2-execute-hello-following-in-hello-west-region-after-logging-into-hk-w1-west-us"></a><span data-ttu-id="4bc83-735">步驟 2: Hello 西區域中執行 hello 下列登入 hk-w1-西-我們之後</span><span class="sxs-lookup"><span data-stu-id="4bc83-735">Step 2: Execute hello following in hello west region after logging into hk-w1-west-us</span></span>
1. <span data-ttu-id="4bc83-736">執行 $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span><span class="sxs-lookup"><span data-stu-id="4bc83-736">Execute $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span></span>
2. <span data-ttu-id="4bc83-737">執行下列 CQL 命令 hello:</span><span class="sxs-lookup"><span data-stu-id="4bc83-737">Execute hello following CQL commands:</span></span>
   
     <span data-ttu-id="4bc83-738">CREATE KEYSPACE customers_ks   WITH REPLICATION = { 'class' : 'NetworkToplogyStrategy', 'WESTUS' : 3, 'EASTUS' : 3};   USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');   SELECT * FROM Customers;</span><span class="sxs-lookup"><span data-stu-id="4bc83-738">CREATE KEYSPACE customers_ks   WITH REPLICATION = { 'class' : 'NetworkToplogyStrategy', 'WESTUS' : 3, 'EASTUS' : 3};   USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');   SELECT * FROM Customers;</span></span>

<span data-ttu-id="4bc83-739">您應該會看到類似下面其中一個 hello 顯示：</span><span class="sxs-lookup"><span data-stu-id="4bc83-739">You should see a display like hello one below:</span></span>

| <span data-ttu-id="4bc83-740">customer_id</span><span class="sxs-lookup"><span data-stu-id="4bc83-740">customer_id</span></span> | <span data-ttu-id="4bc83-741">firstname</span><span class="sxs-lookup"><span data-stu-id="4bc83-741">firstname</span></span> | <span data-ttu-id="4bc83-742">lastname</span><span class="sxs-lookup"><span data-stu-id="4bc83-742">Lastname</span></span> |
| --- | --- | --- |
| <span data-ttu-id="4bc83-743">1</span><span class="sxs-lookup"><span data-stu-id="4bc83-743">1</span></span> |<span data-ttu-id="4bc83-744">John</span><span class="sxs-lookup"><span data-stu-id="4bc83-744">John</span></span> |<span data-ttu-id="4bc83-745">Doe</span><span class="sxs-lookup"><span data-stu-id="4bc83-745">Doe</span></span> |
| <span data-ttu-id="4bc83-746">2</span><span class="sxs-lookup"><span data-stu-id="4bc83-746">2</span></span> |<span data-ttu-id="4bc83-747">Jane</span><span class="sxs-lookup"><span data-stu-id="4bc83-747">Jane</span></span> |<span data-ttu-id="4bc83-748">Doe</span><span class="sxs-lookup"><span data-stu-id="4bc83-748">Doe</span></span> |

### <a name="step-3-execute-hello-following-in-hello-east-region-after-logging-into-hk-w1-east-us"></a><span data-ttu-id="4bc83-749">步驟 3： 執行之後登入 hk-w1-東部-我們 hello 東部地區 hello 下列：</span><span class="sxs-lookup"><span data-stu-id="4bc83-749">Step 3: Execute hello following in hello east region after logging into hk-w1-east-us:</span></span>
1. <span data-ttu-id="4bc83-750">執行 $CASS_HOME/bin/cqlsh 10.2.2.101 9160</span><span class="sxs-lookup"><span data-stu-id="4bc83-750">Execute $CASS_HOME/bin/cqlsh 10.2.2.101 9160</span></span>
2. <span data-ttu-id="4bc83-751">執行下列 CQL 命令 hello:</span><span class="sxs-lookup"><span data-stu-id="4bc83-751">Execute hello following CQL commands:</span></span>
   
     <span data-ttu-id="4bc83-752">USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');   SELECT * FROM Customers;</span><span class="sxs-lookup"><span data-stu-id="4bc83-752">USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');   SELECT * FROM Customers;</span></span>

<span data-ttu-id="4bc83-753">您應該會看到相同顯示 hello 西區域中所看到的 hello:</span><span class="sxs-lookup"><span data-stu-id="4bc83-753">You should see hello same display as seen for hello West region:</span></span>

| <span data-ttu-id="4bc83-754">customer_id</span><span class="sxs-lookup"><span data-stu-id="4bc83-754">customer_id</span></span> | <span data-ttu-id="4bc83-755">firstname</span><span class="sxs-lookup"><span data-stu-id="4bc83-755">firstname</span></span> | <span data-ttu-id="4bc83-756">lastname</span><span class="sxs-lookup"><span data-stu-id="4bc83-756">Lastname</span></span> |
| --- | --- | --- |
| <span data-ttu-id="4bc83-757">1</span><span class="sxs-lookup"><span data-stu-id="4bc83-757">1</span></span> |<span data-ttu-id="4bc83-758">John</span><span class="sxs-lookup"><span data-stu-id="4bc83-758">John</span></span> |<span data-ttu-id="4bc83-759">Doe</span><span class="sxs-lookup"><span data-stu-id="4bc83-759">Doe</span></span> |
| <span data-ttu-id="4bc83-760">2</span><span class="sxs-lookup"><span data-stu-id="4bc83-760">2</span></span> |<span data-ttu-id="4bc83-761">Jane</span><span class="sxs-lookup"><span data-stu-id="4bc83-761">Jane</span></span> |<span data-ttu-id="4bc83-762">Doe</span><span class="sxs-lookup"><span data-stu-id="4bc83-762">Doe</span></span> |

<span data-ttu-id="4bc83-763">執行幾個其他的插入，並查看所取得複寫的 toowest-我們 hello 叢集的一部分。</span><span class="sxs-lookup"><span data-stu-id="4bc83-763">Execute a few more inserts and see that those get replicated toowest-us part of hello cluster.</span></span>

## <a name="test-cassandra-cluster-from-nodejs"></a><span data-ttu-id="4bc83-764">透過 Node.js 測試 Cassandra 叢集</span><span class="sxs-lookup"><span data-stu-id="4bc83-764">Test Cassandra Cluster from Node.js</span></span>
<span data-ttu-id="4bc83-765">先前使用其中一種 hello Linux Vm 建立 hello"web"層中，我們將會執行簡單的 Node.js 指令碼 tooread hello 之前插入資料</span><span class="sxs-lookup"><span data-stu-id="4bc83-765">Using one of hello Linux VMs crated in hello "web" tier previously, we will execute a simple Node.js script tooread hello previously inserted data</span></span>

<span data-ttu-id="4bc83-766">**步驟 1：安裝 Node.js 和 Cassandra 用戶端**</span><span class="sxs-lookup"><span data-stu-id="4bc83-766">**Step 1: Install Node.js and Cassandra Client**</span></span>

1. <span data-ttu-id="4bc83-767">安裝 Node.js 和 npm</span><span class="sxs-lookup"><span data-stu-id="4bc83-767">Install Node.js and npm</span></span>
2. <span data-ttu-id="4bc83-768">使用 npm 安裝節點套件"cassandra-client"</span><span class="sxs-lookup"><span data-stu-id="4bc83-768">Install node package "cassandra-client" using npm</span></span>
3. <span data-ttu-id="4bc83-769">執行下列指令碼在 hello 殼層提示字元會顯示 hello 的 hello 擷取資料的 json 字串 hello:</span><span class="sxs-lookup"><span data-stu-id="4bc83-769">Execute hello following script at hello shell prompt which displays hello json string of hello retrieved data:</span></span>
   
        var pooledCon = require('cassandra-client').PooledConnection;
        var ksName = "custsupport_ks";
        var cfName = "customers_cf";
        var hostList = ['internal_loadbalancer_ip:9160'];
        var ksConOptions = { hosts: hostList,
                             keyspace: ksName, use_bigints: false };
   
        function createKeyspace(callback){
           var cql = 'CREATE KEYSPACE ' + ksName + ' WITH strategy_class=SimpleStrategy AND strategy_options:replication_factor=1';
           var sysConOptions = { hosts: hostList,  
                                 keyspace: 'system', use_bigints: false };
           var con = new pooledCon(sysConOptions);
           con.execute(cql,[],function(err) {
           if (err) {
             console.log("Failed toocreate Keyspace: " + ksName);
             console.log(err);
           }
           else {
             console.log("Created Keyspace: " + ksName);
             callback(ksConOptions, populateCustomerData);
           }
           });
           con.shutdown();
        }
   
        function createColumnFamily(ksConOptions, callback){
          var params = ['customers_cf','custid','varint','custname',
                        'text','custaddress','text'];
          var cql = 'CREATE COLUMNFAMILY ? (? ? PRIMARY KEY,? ?, ? ?)';
        var con =  new pooledCon(ksConOptions);
          con.execute(cql,params,function(err) {
              if (err) {
                 console.log("Failed toocreate column family: " + params[0]);
                 console.log(err);
              }
              else {
                 console.log("Created column family: " + params[0]);
                 callback();
              }
          });
          con.shutdown();
        }
   
        //populate Data
        function populateCustomerData() {
           var params = ['John','Infinity Dr, TX', 1];
           updateCustomer(ksConOptions,params);
   
           params = ['Tom','Fermat Ln, WA', 2];
           updateCustomer(ksConOptions,params);
        }
   
        //update will also insert hello record if none exists
        function updateCustomer(ksConOptions,params)
        {
          var cql = 'UPDATE customers_cf SET custname=?,custaddress=? where custid=?';
          var con = new pooledCon(ksConOptions);
          con.execute(cql,params,function(err) {
              if (err) console.log(err);
              else console.log("Inserted customer : " + params[0]);
          });
          con.shutdown();
        }
   
        //read hello two rows inserted above
        function readCustomer(ksConOptions)
        {
          var cql = 'SELECT * FROM customers_cf WHERE custid IN (1,2)';
          var con = new pooledCon(ksConOptions);
          con.execute(cql,[],function(err,rows) {
              if (err)
                 console.log(err);
              else
                 for (var i=0; i<rows.length; i++)
                    console.log(JSON.stringify(rows[i]));
            });
           con.shutdown();
        }
   
        //exectue hello code
        createKeyspace(createColumnFamily);
        readCustomer(ksConOptions)

## <a name="conclusion"></a><span data-ttu-id="4bc83-770">結論</span><span class="sxs-lookup"><span data-stu-id="4bc83-770">Conclusion</span></span>
<span data-ttu-id="4bc83-771">Microsoft Azure 是彈性的平台，可讓 hello Microsoft 以及開放原始碼軟體執行，此練習中所示。</span><span class="sxs-lookup"><span data-stu-id="4bc83-771">Microsoft Azure is a flexible platform that allows hello running of both Microsoft as well as open source software as demonstrated by this exercise.</span></span> <span data-ttu-id="4bc83-772">高可用性的 Cassandra 叢集可以部署在單一資料中心透過 hello hello 叢集節點散佈跨多個容錯網域中。</span><span class="sxs-lookup"><span data-stu-id="4bc83-772">Highly available Cassandra clusters can be deployed on a single data center through hello spreading of hello cluster nodes across multiple fault domains.</span></span> <span data-ttu-id="4bc83-773">您也可以跨越多個地理位置遙遠的 Azure 區域部署 Cassandra 叢集做為災害防禦系統。</span><span class="sxs-lookup"><span data-stu-id="4bc83-773">Cassandra clusters can also be deployed across multiple geographically distant Azure regions for disaster proof systems.</span></span> <span data-ttu-id="4bc83-774">Azure 和 Cassandra 一起啟用 hello 建構可高度擴充、 高可用性和災害復原的雲端服務所需的今天的網際網路規模服務。</span><span class="sxs-lookup"><span data-stu-id="4bc83-774">Azure and Cassandra together enables hello construction of highly scalable, highly available and disaster recoverable cloud services needed by today's internet scale services.</span></span>  

## <a name="references"></a><span data-ttu-id="4bc83-775">參考</span><span class="sxs-lookup"><span data-stu-id="4bc83-775">References</span></span>
* [<span data-ttu-id="4bc83-776">http://cassandra.apache.org</span><span class="sxs-lookup"><span data-stu-id="4bc83-776">http://cassandra.apache.org</span></span>](http://cassandra.apache.org)
* [<span data-ttu-id="4bc83-777">http://www.datastax.com</span><span class="sxs-lookup"><span data-stu-id="4bc83-777">http://www.datastax.com</span></span>](http://www.datastax.com)
* [<span data-ttu-id="4bc83-778">http://www.nodejs.org</span><span class="sxs-lookup"><span data-stu-id="4bc83-778">http://www.nodejs.org</span></span>](http://www.nodejs.org)

