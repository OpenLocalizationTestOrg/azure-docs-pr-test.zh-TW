---
title: "虛擬機器的 DBMS 部署的 SAP NetWeaver aaaAzure |Microsoft 文件"
description: "SAP NetWeaver 的 Azure 虛擬機器 DBMS 部署"
services: virtual-machines-linux,virtual-machines-windows
documentationcenter: 
author: MSSedusch
manager: timlt
editor: 
tags: azure-resource-manager
keywords: 
ms.assetid: 5654dac7-4204-4387-b312-3d8b2898eb3a
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 11/08/2016
ms.author: sedusch
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 501f6fbc2baa379b706e95d2bfba377ac129b382
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="azure-virtual-machines-dbms-deployment-for-sap-netweaver"></a><span data-ttu-id="2077d-103">SAP NetWeaver 的 Azure 虛擬機器 DBMS 部署</span><span class="sxs-lookup"><span data-stu-id="2077d-103">Azure Virtual Machines DBMS deployment for SAP NetWeaver</span></span>
[767598]:https://launchpad.support.sap.com/#/notes/767598
[773830]:https://launchpad.support.sap.com/#/notes/773830
[826037]:https://launchpad.support.sap.com/#/notes/826037
[965908]:https://launchpad.support.sap.com/#/notes/965908
[1031096]:https://launchpad.support.sap.com/#/notes/1031096
[1114181]:https://launchpad.support.sap.com/#/notes/1114181
[1139904]:https://launchpad.support.sap.com/#/notes/1139904
[1173395]:https://launchpad.support.sap.com/#/notes/1173395
[1245200]:https://launchpad.support.sap.com/#/notes/1245200
[1409604]:https://launchpad.support.sap.com/#/notes/1409604
[1558958]:https://launchpad.support.sap.com/#/notes/1558958
[1585981]:https://launchpad.support.sap.com/#/notes/1585981
[1588316]:https://launchpad.support.sap.com/#/notes/1588316
[1590719]:https://launchpad.support.sap.com/#/notes/1590719
[1597355]:https://launchpad.support.sap.com/#/notes/1597355
[1605680]:https://launchpad.support.sap.com/#/notes/1605680
[1619720]:https://launchpad.support.sap.com/#/notes/1619720
[1619726]:https://launchpad.support.sap.com/#/notes/1619726
[1619967]:https://launchpad.support.sap.com/#/notes/1619967
[1750510]:https://launchpad.support.sap.com/#/notes/1750510
[1752266]:https://launchpad.support.sap.com/#/notes/1752266
[1757924]:https://launchpad.support.sap.com/#/notes/1757924
[1757928]:https://launchpad.support.sap.com/#/notes/1757928
[1758182]:https://launchpad.support.sap.com/#/notes/1758182
[1758496]:https://launchpad.support.sap.com/#/notes/1758496
[1772688]:https://launchpad.support.sap.com/#/notes/1772688
[1814258]:https://launchpad.support.sap.com/#/notes/1814258
[1882376]:https://launchpad.support.sap.com/#/notes/1882376
[1909114]:https://launchpad.support.sap.com/#/notes/1909114
[1922555]:https://launchpad.support.sap.com/#/notes/1922555
[1928533]:https://launchpad.support.sap.com/#/notes/1928533
[1941500]:https://launchpad.support.sap.com/#/notes/1941500
[1956005]:https://launchpad.support.sap.com/#/notes/1956005
[1973241]:https://launchpad.support.sap.com/#/notes/1973241
[1984787]:https://launchpad.support.sap.com/#/notes/1984787
[1999351]:https://launchpad.support.sap.com/#/notes/1999351
[2002167]:https://launchpad.support.sap.com/#/notes/2002167
[2015553]:https://launchpad.support.sap.com/#/notes/2015553
[2039619]:https://launchpad.support.sap.com/#/notes/2039619
[2069760]:https://launchpad.support.sap.com/#/notes/2069760
[2121797]:https://launchpad.support.sap.com/#/notes/2121797
[2134316]:https://launchpad.support.sap.com/#/notes/2134316
[2171857]:https://launchpad.support.sap.com/#/notes/2171857
[2178632]:https://launchpad.support.sap.com/#/notes/2178632
[2191498]:https://launchpad.support.sap.com/#/notes/2191498
[2233094]:https://launchpad.support.sap.com/#/notes/2233094
[2243692]:https://launchpad.support.sap.com/#/notes/2243692

[azure-cli]:../../../cli-install-nodejs.md
[azure-portal]:https://portal.azure.com
[azure-ps]:/powershell/azureps-cmdlets-docs
[azure-quickstart-templates-github]:https://github.com/Azure/azure-quickstart-templates
[azure-script-ps]:https://go.microsoft.com/fwlink/p/?LinkID=395017
[azure-subscription-service-limits]:../../../azure-subscription-service-limits.md
[azure-subscription-service-limits-subscription]:../../../azure-subscription-service-limits.md#subscription-limits

[dbms-guide]:dbms-guide.md 
[dbms-guide-2.1]:dbms-guide.md#c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f 
[dbms-guide-2.2]:dbms-guide.md#c8e566f9-21b7-4457-9f7f-126036971a91 
[dbms-guide-2.3]:dbms-guide.md#10b041ef-c177-498a-93ed-44b3441ab152 
[dbms-guide-2]:dbms-guide.md#65fa79d6-a85f-47ee-890b-22e794f51a64 
[dbms-guide-3]:dbms-guide.md#871dfc27-e509-4222-9370-ab1de77021c3 
[dbms-guide-5.5.1]:dbms-guide.md#0fef0e79-d3fe-4ae2-85af-73666a6f7268 
[dbms-guide-5.5.2]:dbms-guide.md#f9071eff-9d72-4f47-9da4-1852d782087b 
[dbms-guide-5.6]:dbms-guide.md#1b353e38-21b3-4310-aeb6-a77e7c8e81c8 
[dbms-guide-5.8]:dbms-guide.md#9053f720-6f3b-4483-904d-15dc54141e30 
[dbms-guide-5]:dbms-guide.md#3264829e-075e-4d25-966e-a49dad878737 
[dbms-guide-8.4.1]:dbms-guide.md#b48cfe3b-48e9-4f5b-a783-1d29155bd573 
[dbms-guide-8.4.2]:dbms-guide.md#23c78d3b-ca5a-4e72-8a24-645d141a3f5d 
[dbms-guide-8.4.3]:dbms-guide.md#77cd2fbb-307e-4cbf-a65f-745553f72d2c 
[dbms-guide-8.4.4]:dbms-guide.md#f77c1436-9ad8-44fb-a331-8671342de818 
[dbms-guide-900-sap-cache-server-on-premises]:dbms-guide.md#642f746c-e4d4-489d-bf63-73e80177a0a8
[dbms-guide-managed-disks]:dbms-guide.md#f42c6cb5-d563-484d-9667-b07ae51bce29

[dbms-guide-figure-100]:media/virtual-machines-shared-sap-dbms-guide/100_storage_account_types.png
[dbms-guide-figure-200]:media/virtual-machines-shared-sap-dbms-guide/200-ha-set-for-dbms-ha.png
[dbms-guide-figure-300]:media/virtual-machines-shared-sap-dbms-guide/300-reference-config-iaas.png
[dbms-guide-figure-400]:media/virtual-machines-shared-sap-dbms-guide/400-sql-2012-backup-to-blob-storage.png
[dbms-guide-figure-500]:media/virtual-machines-shared-sap-dbms-guide/500-sql-2012-backup-to-blob-storage-different-containers.png
[dbms-guide-figure-600]:media/virtual-machines-shared-sap-dbms-guide/600-iaas-maxdb.png
[dbms-guide-figure-700]:media/virtual-machines-shared-sap-dbms-guide/700-livecach-prod.png
[dbms-guide-figure-800]:media/virtual-machines-shared-sap-dbms-guide/800-azure-vm-sap-content-server.png
[dbms-guide-figure-900]:media/virtual-machines-shared-sap-dbms-guide/900-sap-cache-server-on-premises.png

[deployment-guide]:deployment-guide.md 
[deployment-guide-2.2]:deployment-guide.md#42ee2bdb-1efc-4ec7-ab31-fe4c22769b94 
[deployment-guide-3.1.2]:deployment-guide.md#3688666f-281f-425b-a312-a77e7db2dfab 
[deployment-guide-3.2]:deployment-guide.md#db477013-9060-4602-9ad4-b0316f8bb281 
[deployment-guide-3.3]:deployment-guide.md#54a1fc6d-24fd-4feb-9c57-ac588a55dff2 
[deployment-guide-3.4]:deployment-guide.md#a9a60133-a763-4de8-8986-ac0fa33aa8c1 
[deployment-guide-3]:deployment-guide.md#b3253ee3-d63b-4d74-a49b-185e76c4088e 
[deployment-guide-4.1]:deployment-guide.md#604bcec2-8b6e-48d2-a944-61b0f5dee2f7 
[deployment-guide-4.2]:deployment-guide.md#7ccf6c3e-97ae-4a7a-9c75-e82c37beb18e 
[deployment-guide-4.3]:deployment-guide.md#31d9ecd6-b136-4c73-b61e-da4a29bbc9cc 
[deployment-guide-4.4.2]:deployment-guide.md#6889ff12-eaaf-4f3c-97e1-7c9edc7f7542 
[deployment-guide-4.4]:deployment-guide.md#c7cbb0dc-52a4-49db-8e03-83e7edc2927d 
[deployment-guide-4.5.1]:deployment-guide.md#987cf279-d713-4b4c-8143-6b11589bb9d4 
[deployment-guide-4.5.2]:deployment-guide.md#408f3779-f422-4413-82f8-c57a23b4fc2f 
[deployment-guide-4.5]:deployment-guide.md#d98edcd3-f2a1-49f7-b26a-07448ceb60ca 
[deployment-guide-5.1]:deployment-guide.md#bb61ce92-8c5c-461f-8c53-39f5e5ed91f2 
[deployment-guide-5.2]:deployment-guide.md#e2d592ff-b4ea-4a53-a91a-e5521edb6cd1
[deployment-guide-5.3]:deployment-guide.md#fe25a7da-4e4e-4388-8907-8abc2d33cfd8 

[deployment-guide-configure-monitoring-scenario-1]:deployment-guide.md#ec323ac3-1de9-4c3a-b770-4ff701def65b 
[deployment-guide-configure-proxy]:deployment-guide.md#baccae00-6f79-4307-ade4-40292ce4e02d 
[deployment-guide-figure-100]:media/virtual-machines-shared-sap-deployment-guide/100-deploy-vm-image.png
[deployment-guide-figure-1000]:media/virtual-machines-shared-sap-deployment-guide/1000-service-properties.png
[deployment-guide-figure-11]:deployment-guide.md#figure-11
[deployment-guide-figure-1100]:media/virtual-machines-shared-sap-deployment-guide/1100-azperflib.png
[deployment-guide-figure-1200]:media/virtual-machines-shared-sap-deployment-guide/1200-cmd-test-login.png
[deployment-guide-figure-1300]:media/virtual-machines-shared-sap-deployment-guide/1300-cmd-test-executed.png
[deployment-guide-figure-14]:deployment-guide.md#figure-14
[deployment-guide-figure-1400]:media/virtual-machines-shared-sap-deployment-guide/1400-azperflib-error-servicenotstarted.png
[deployment-guide-figure-300]:media/virtual-machines-shared-sap-deployment-guide/300-deploy-private-image.png
[deployment-guide-figure-400]:media/virtual-machines-shared-sap-deployment-guide/400-deploy-using-disk.png
[deployment-guide-figure-5]:deployment-guide.md#figure-5
[deployment-guide-figure-50]:media/virtual-machines-shared-sap-deployment-guide/50-forced-tunneling-suse.png
[deployment-guide-figure-500]:media/virtual-machines-shared-sap-deployment-guide/500-install-powershell.png
[deployment-guide-figure-6]:deployment-guide.md#figure-6
[deployment-guide-figure-600]:media/virtual-machines-shared-sap-deployment-guide/600-powershell-version.png
[deployment-guide-figure-7]:deployment-guide.md#figure-7
[deployment-guide-figure-700]:media/virtual-machines-shared-sap-deployment-guide/700-install-powershell-installed.png
[deployment-guide-figure-760]:media/virtual-machines-shared-sap-deployment-guide/760-azure-cli-version.png
[deployment-guide-figure-900]:media/virtual-machines-shared-sap-deployment-guide/900-cmd-update-executed.png
[deployment-guide-figure-azure-cli-installed]:deployment-guide.md#402488e5-f9bb-4b29-8063-1c5f52a892d0
[deployment-guide-figure-azure-cli-version]:deployment-guide.md#0ad010e6-f9b5-4c21-9c09-bb2e5efb3fda
[deployment-guide-install-vm-agent-windows]:deployment-guide.md#b2db5c9a-a076-42c6-9835-16945868e866
[deployment-guide-troubleshooting-chapter]:deployment-guide.md#564adb4f-5c95-4041-9616-6635e83a810b

[deploy-template-cli]:../../../resource-group-template-deploy-cli.md
[deploy-template-portal]:../../../resource-group-template-deploy-portal.md
[deploy-template-powershell]:../../../resource-group-template-deploy.md

[dr-guide-classic]:http://go.microsoft.com/fwlink/?LinkID=521971

[getting-started]:get-started.md
[getting-started-dbms]:get-started.md#1343ffe1-8021-4ce6-a08d-3a1553a4db82
[getting-started-deployment]:get-started.md#6aadadd2-76b5-46d8-8713-e8d63630e955
[getting-started-planning]:get-started.md#3da0389e-708b-4e82-b2a2-e92f132df89c

[getting-started-windows-classic]:../../virtual-machines-windows-classic-sap-get-started.md
[getting-started-windows-classic-dbms]:../../virtual-machines-windows-classic-sap-get-started.md#c5b77a14-f6b4-44e9-acab-4d28ff72a930
[getting-started-windows-classic-deployment]:../../virtual-machines-windows-classic-sap-get-started.md#f84ea6ce-bbb4-41f7-9965-34d31b0098ea
[getting-started-windows-classic-dr]:../../virtual-machines-windows-classic-sap-get-started.md#cff10b4a-01a5-4dc3-94b6-afb8e55757d3
[getting-started-windows-classic-ha-sios]:../../virtual-machines-windows-classic-sap-get-started.md#4bb7512c-0fa0-4227-9853-4004281b1037
[getting-started-windows-classic-planning]:../../virtual-machines-windows-classic-sap-get-started.md#f2a5e9d8-49e4-419e-9900-af783173481c

[ha-guide-classic]:http://go.microsoft.com/fwlink/?LinkId=613056

[install-extension-cli]:virtual-machines-linux-enable-aem.md

[Logo_Linux]:media/virtual-machines-shared-sap-shared/Linux.png
[Logo_Windows]:media/virtual-machines-shared-sap-shared/Windows.png

[msdn-set-azurermvmaemextension]:https://msdn.microsoft.com/library/azure/mt670598.aspx

[planning-guide]:planning-guide.md 
[planning-guide-1.2]:planning-guide.md#e55d1e22-c2c8-460b-9897-64622a34fdff 
[planning-guide-11]:planning-guide.md#7cf991a1-badd-40a9-944e-7baae842a058 
[planning-guide-11.4.1]:planning-guide.md#5d9d36f9-9058-435d-8367-5ad05f00de77 
[planning-guide-11.5]:planning-guide.md#4e165b58-74ca-474f-a7f4-5e695a93204f 
[planning-guide-2.1]:planning-guide.md#1625df66-4cc6-4d60-9202-de8a0b77f803 
[planning-guide-2.2]:planning-guide.md#f5b3b18c-302c-4bd8-9ab2-c388f1ab3d10 
[planning-guide-3.1]:planning-guide.md#be80d1b9-a463-4845-bd35-f4cebdb5424a 
[planning-guide-3.2.1]:planning-guide.md#df49dc09-141b-4f34-a4a2-990913b30358 
[planning-guide-3.2.2]:planning-guide.md#fc1ac8b2-e54a-487c-8581-d3cc6625e560 
[planning-guide-3.2.3]:planning-guide.md#18810088-f9be-4c97-958a-27996255c665 
[planning-guide-3.2]:planning-guide.md#8d8ad4b8-6093-4b91-ac36-ea56d80dbf77 
[planning-guide-3.3.2]:planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92 
[planning-guide-5.1.1]:planning-guide.md#4d175f1b-7353-4137-9d2f-817683c26e53 
[planning-guide-5.1.2]:planning-guide.md#e18f7839-c0e2-4385-b1e6-4538453a285c 
[planning-guide-5.2.1]:planning-guide.md#1b287330-944b-495d-9ea7-94b83aff73ef 
[planning-guide-5.2.2]:planning-guide.md#57f32b1c-0cba-4e57-ab6e-c39fe22b6ec3 
[planning-guide-5.2]:planning-guide.md#6ffb9f41-a292-40bf-9e70-8204448559e7 
[planning-guide-5.3.1]:planning-guide.md#6e835de8-40b1-4b71-9f18-d45b20959b79 
[planning-guide-5.3.2]:planning-guide.md#a43e40e6-1acc-4633-9816-8f095d5a7b6a 
[planning-guide-5.4.2]:planning-guide.md#9789b076-2011-4afa-b2fe-b07a8aba58a1 
[planning-guide-5.5.1]:planning-guide.md#4efec401-91e0-40c0-8e64-f2dceadff646 
[planning-guide-5.5.3]:planning-guide.md#17e0d543-7e8c-4160-a7da-dd7117a1ad9d 
[planning-guide-7.1]:planning-guide.md#3e9c3690-da67-421a-bc3f-12c520d99a30 
[planning-guide-7]:planning-guide.md#96a77628-a05e-475d-9df3-fb82217e8f14 
[planning-guide-9.1]:planning-guide.md#6f0a47f3-a289-4090-a053-2521618a28c3 
[planning-guide-azure-premium-storage]:planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92 

[planning-guide-figure-100]:media/virtual-machines-shared-sap-planning-guide/100-single-vm-in-azure.png
[planning-guide-figure-1300]:media/virtual-machines-shared-sap-planning-guide/1300-ref-config-iaas-for-sap.png
[planning-guide-figure-1400]:media/virtual-machines-shared-sap-planning-guide/1400-attach-detach-disks.png
[planning-guide-figure-1600]:media/virtual-machines-shared-sap-planning-guide/1600-firewall-port-rule.png
[planning-guide-figure-1700]:media/virtual-machines-shared-sap-planning-guide/1700-single-vm-demo.png
[planning-guide-figure-1900]:media/virtual-machines-shared-sap-planning-guide/1900-vm-set-vnet.png
[planning-guide-figure-200]:media/virtual-machines-shared-sap-planning-guide/200-multiple-vms-in-azure.png
[planning-guide-figure-2100]:media/virtual-machines-shared-sap-planning-guide/2100-s2s.png
[planning-guide-figure-2200]:media/virtual-machines-shared-sap-planning-guide/2200-network-printing.png
[planning-guide-figure-2300]:media/virtual-machines-shared-sap-planning-guide/2300-sapgui-stms.png
[planning-guide-figure-2400]:media/virtual-machines-shared-sap-planning-guide/2400-vm-extension-overview.png
[planning-guide-figure-2500]:media/virtual-machines-shared-sap-planning-guide/2500-vm-extension-details.png
[planning-guide-figure-2600]:media/virtual-machines-shared-sap-planning-guide/2600-sap-router-connection.png
[planning-guide-figure-2700]:media/virtual-machines-shared-sap-planning-guide/2700-exposed-sap-portal.png
[planning-guide-figure-2800]:media/virtual-machines-shared-sap-planning-guide/2800-endpoint-config.png
[planning-guide-figure-2900]:media/virtual-machines-shared-sap-planning-guide/2900-azure-ha-sap-ha.png
[planning-guide-figure-300]:media/virtual-machines-shared-sap-planning-guide/300-vpn-s2s.png
[planning-guide-figure-3000]:media/virtual-machines-shared-sap-planning-guide/3000-sap-ha-on-azure.png
[planning-guide-figure-3200]:media/virtual-machines-shared-sap-planning-guide/3200-sap-ha-with-sql.png
[planning-guide-figure-400]:media/virtual-machines-shared-sap-planning-guide/400-vm-services.png
[planning-guide-figure-600]:media/virtual-machines-shared-sap-planning-guide/600-s2s-details.png
[planning-guide-figure-700]:media/virtual-machines-shared-sap-planning-guide/700-decision-tree-deploy-to-azure.png
[planning-guide-figure-800]:media/virtual-machines-shared-sap-planning-guide/800-portal-vm-overview.png
[planning-guide-microsoft-azure-networking]:planning-guide.md#61678387-8868-435d-9f8c-450b2424f5bd 
[planning-guide-storage-microsoft-azure-storage-and-data-disks]:planning-guide.md#a72afa26-4bf4-4a25-8cf7-855d6032157f 

[powershell-install-configure]:https://docs.microsoft.com/powershell/azure/install-azurerm-ps
[resource-group-authoring-templates]:../../../resource-group-authoring-templates.md
[resource-group-overview]:../../../azure-resource-manager/resource-group-overview.md
[resource-groups-networking]:../../../virtual-network/resource-groups-networking.md
[sap-pam]:https://support.sap.com/pam 
[sap-templates-2-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-2-tier-os-disk]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-disk%2Fazuredeploy.json
[sap-templates-2-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-image%2Fazuredeploy.json
[sap-templates-3-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-3-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-user-image%2Fazuredeploy.json
[storage-azure-cli]:../../../storage/common/storage-azure-cli.md
[storage-azure-cli-copy-blobs]:../../../storage/common/storage-azure-cli.md#copy-blobs
[storage-introduction]:../../../storage/common/storage-introduction.md
[storage-powershell-guide-full-copy-vhd]:../../../storage/common/storage-powershell-guide-full.md#how-to-copy-blobs-from-one-storage-container-to-another
[storage-premium-storage-preview-portal]:../../../storage/common/storage-premium-storage.md
[storage-redundancy]:../../../storage/common/storage-redundancy.md
[storage-scalability-targets]:../../../storage/common/storage-scalability-targets.md
[storage-use-azcopy]:../../../storage/common/storage-use-azcopy.md
[template-201-vm-from-specialized-vhd]:https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-from-specialized-vhd
[templates-101-simple-windows-vm]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-simple-windows-vm
[templates-101-vm-from-user-image]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-from-user-image
[virtual-machines-linux-attach-disk-portal]:../../linux/attach-disk-portal.md
[virtual-machines-azure-resource-manager-architecture]:../../../resource-manager-deployment-model.md
[virtual-machines-azurerm-versus-azuresm]:../../../resource-manager-deployment-model.md
[virtual-machines-windows-classic-configure-oracle-data-guard]:../../virtual-machines-windows-classic-configure-oracle-data-guard.md
[virtual-machines-linux-cli-deploy-templates]:../../linux/cli-deploy-templates.md 
[virtual-machines-deploy-rmtemplates-powershell]:../../virtual-machines-windows-ps-manage.md 
[virtual-machines-linux-agent-user-guide]:../../linux/agent-user-guide.md
[virtual-machines-linux-agent-user-guide-command-line-options]:../../linux/agent-user-guide.md#command-line-options
[virtual-machines-linux-capture-image]:../../linux/capture-image.md
[virtual-machines-linux-capture-image-resource-manager]:../../linux/capture-image.md
[virtual-machines-linux-capture-image-resource-manager-capture]:../../linux/capture-image.md#step-2-capture-the-vm
[virtual-machines-linux-configure-raid]:../../linux/configure-raid.md
[virtual-machines-linux-configure-lvm]:../../linux/configure-lvm.md
[virtual-machines-linux-classic-create-upload-vhd-step-1]:../../virtual-machines-linux-classic-create-upload-vhd.md#step-1-prepare-the-image-to-be-uploaded
[virtual-machines-linux-create-upload-vhd-suse]:../../linux/suse-create-upload-vhd.md
[virtual-machines-linux-redhat-create-upload-vhd]:../../linux/redhat-create-upload-vhd.md
[virtual-machines-linux-how-to-attach-disk]:../../linux/add-disk.md
[virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux]:../../linux/add-disk.md#connect-to-the-linux-vm-to-mount-the-new-disk
[virtual-machines-linux-tutorial]:../../linux/quick-create-cli.md
[virtual-machines-linux-update-agent]:../../linux/update-agent.md
[virtual-machines-manage-availability-linux]:../../linux/manage-availability.md
[virtual-machines-manage-availability-windows]:../../windows/manage-availability.md
[virtual-machines-ps-create-preconfigure-windows-resource-manager-vms]:virtual-machines-windows-create-powershell.md
[virtual-machines-sizes-linux]:../../linux/sizes.md
[virtual-machines-sizes-windows]:../../windows/sizes.md
[virtual-machines-windows-classic-ps-sql-alwayson-availability-groups]:./../../windows/sqlclassic/virtual-machines-windows-classic-ps-sql-alwayson-availability-groups.md
[virtual-machines-windows-classic-ps-sql-int-listener]:./../../windows/sqlclassic/virtual-machines-windows-classic-ps-sql-int-listener.md
[virtual-machines-sql-server-high-availability-and-disaster-recovery-solutions]:./../../windows/sql/virtual-machines-windows-sql-high-availability-dr.md
[virtual-machines-sql-server-infrastructure-services]:./../../windows/sql/virtual-machines-windows-sql-server-iaas-overview.md
[virtual-machines-sql-server-performance-best-practices]:./../../windows/sql/virtual-machines-windows-sql-performance.md
[virtual-machines-upload-image-windows-resource-manager]:../../virtual-machines-windows-upload-image.md
[virtual-machines-windows-tutorial]:../../virtual-machines-windows-hero-tutorial.md
[virtual-machines-workload-template-sql-alwayson]:https://azure.microsoft.com/documentation/templates/sql-server-2014-alwayson-dsc/
[virtual-network-deploy-multinic-arm-cli]:../../../virtual-network/virtual-network-deploy-multinic-arm-cli.md
[virtual-network-deploy-multinic-arm-ps]:../../../virtual-network/virtual-network-deploy-multinic-arm-ps.md
[virtual-network-deploy-multinic-arm-template]:../../../virtual-network/virtual-network-deploy-multinic-arm-template.md
[virtual-networks-configure-vnet-to-vnet-connection]:../../../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md
[virtual-networks-create-vnet-arm-pportal]:../../../virtual-network/virtual-networks-create-vnet-arm-pportal.md
[virtual-networks-manage-dns-in-vnet]:../../../virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances.md
[virtual-networks-multiple-nics]:../../../virtual-network/virtual-networks-multiple-nics.md
[virtual-networks-nsg]:../../../virtual-network/virtual-networks-nsg.md
[virtual-networks-reserved-private-ip]:../../../virtual-network/virtual-networks-static-private-ip-arm-ps.md
[virtual-networks-static-private-ip-arm-pportal]:../../../virtual-network/virtual-networks-static-private-ip-arm-pportal.md
[virtual-networks-udr-overview]:../../../virtual-network/virtual-networks-udr-overview.md
[vpn-gateway-about-vpn-devices]:../../../vpn-gateway/vpn-gateway-about-vpn-devices.md
[vpn-gateway-create-site-to-site-rm-powershell]:../../../vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell.md
[vpn-gateway-cross-premises-options]:../../../vpn-gateway/vpn-gateway-plan-design.md
[vpn-gateway-site-to-site-create]:../../../vpn-gateway/vpn-gateway-site-to-site-create.md
[vpn-gateway-vpn-faq]:../../../vpn-gateway/vpn-gateway-vpn-faq.md
[xplat-cli]:../../../cli-install-nodejs.md
[xplat-cli-azure-resource-manager]:../../../xplat-cli-azure-resource-manager.md

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-rm-include.md)]

<span data-ttu-id="2077d-149">本指南是 hello 文件中實作及部署 Microsoft Azure 上的 hello SAP 軟體的一部分。</span><span class="sxs-lookup"><span data-stu-id="2077d-149">This guide is part of hello documentation on implementing and deploying hello SAP software on Microsoft Azure.</span></span> <span data-ttu-id="2077d-150">閱讀本指南之前, 讀取 hello[計劃與實作指南][planning-guide]。</span><span class="sxs-lookup"><span data-stu-id="2077d-150">Before reading this guide, read hello [Planning and Implementation Guide][planning-guide].</span></span> <span data-ttu-id="2077d-151">本文件涵蓋 hello 部署各種關聯式資料庫管理系統 (RDBMS) 和使用 hello Azure 基礎結構即服務 (IaaS) 功能搭配 Microsoft Azure 虛擬機器 (Vm) 上的 SAP 相關的產品。</span><span class="sxs-lookup"><span data-stu-id="2077d-151">This document covers hello deployment of various Relational Database Management Systems (RDBMS) and related products in combination with SAP on Microsoft Azure Virtual Machines (VMs) using hello Azure Infrastructure as a Service (IaaS) capabilities.</span></span>

<span data-ttu-id="2077d-152">平台提供 hello 紙張補充 hello SAP 安裝文件集和 SAP 附註，表示 hello 安裝和部署上的 SAP 軟體的主要資源。</span><span class="sxs-lookup"><span data-stu-id="2077d-152">hello paper complements hello SAP Installation Documentation and SAP Notes, which represent hello primary resources for installations and deployments of SAP software on given platforms.</span></span>

## <a name="general-considerations"></a><span data-ttu-id="2077d-153">一般考量</span><span class="sxs-lookup"><span data-stu-id="2077d-153">General considerations</span></span>
<span data-ttu-id="2077d-154">本章將說明在 Azure VM 中執行 SAP 相關 DBMS 系統的考量。</span><span class="sxs-lookup"><span data-stu-id="2077d-154">In this chapter, considerations of running SAP-related DBMS systems in Azure VMs are introduced.</span></span> <span data-ttu-id="2077d-155">有幾個參考 toospecific DBMS 系統在本章中。</span><span class="sxs-lookup"><span data-stu-id="2077d-155">There are few references toospecific DBMS systems in this chapter.</span></span> <span data-ttu-id="2077d-156">改為 hello 特定 DBMS 系統是由處理本文件，會在本章之後。</span><span class="sxs-lookup"><span data-stu-id="2077d-156">Instead hello specific DBMS systems are handled within this paper, after this chapter.</span></span>

### <a name="definitions-upfront"></a><span data-ttu-id="2077d-157">預先定義</span><span class="sxs-lookup"><span data-stu-id="2077d-157">Definitions upfront</span></span>
<span data-ttu-id="2077d-158">在 hello 文件中，我們會使用下列詞彙的 hello:</span><span class="sxs-lookup"><span data-stu-id="2077d-158">Throughout hello document, we use hello following terms:</span></span>

* <span data-ttu-id="2077d-159">IaaS：基礎結構即服務。</span><span class="sxs-lookup"><span data-stu-id="2077d-159">IaaS: Infrastructure as a Service.</span></span>
* <span data-ttu-id="2077d-160">PaaS：平台即服務。</span><span class="sxs-lookup"><span data-stu-id="2077d-160">PaaS: Platform as a Service.</span></span>
* <span data-ttu-id="2077d-161">SaaS：軟體即服務。</span><span class="sxs-lookup"><span data-stu-id="2077d-161">SaaS: Software as a Service.</span></span>
* <span data-ttu-id="2077d-162">SAP 元件︰個別 SAP 應用程式，例如 ECC、BW、Solution Manager 或 EP。</span><span class="sxs-lookup"><span data-stu-id="2077d-162">SAP Component: an individual SAP application such as ECC, BW, Solution Manager, or EP.</span></span>  <span data-ttu-id="2077d-163">SAP 元件可以傳統 ABAP 或 Java 技術為基礎，或以非 NetWeaver 應用程式 (例如商務物件) 為基礎。</span><span class="sxs-lookup"><span data-stu-id="2077d-163">SAP components can be based on traditional ABAP or Java technologies or a non-NetWeaver based application such as Business Objects.</span></span>
* <span data-ttu-id="2077d-164">SAP 環境： 一或多個 SAP 元件以邏輯方式分組 tooperform 商務功能，例如開發、 QAS、 訓練、 DR 或生產環境。</span><span class="sxs-lookup"><span data-stu-id="2077d-164">SAP Environment: one or more SAP components logically grouped tooperform a business function such as Development, QAS, Training, DR, or Production.</span></span>
* <span data-ttu-id="2077d-165">SAP 版圖： 這是指 toohello 整個 SAP 資產中客戶的 IT 環境。</span><span class="sxs-lookup"><span data-stu-id="2077d-165">SAP Landscape: This refers toohello entire SAP assets in a customer’s IT landscape.</span></span> <span data-ttu-id="2077d-166">hello SAP 版圖包括所有生產和非生產環境。</span><span class="sxs-lookup"><span data-stu-id="2077d-166">hello SAP landscape includes all production and non-production environments.</span></span>
* <span data-ttu-id="2077d-167">SAP 系統： hello 組合的 DBMS 層和應用程式層，例如 SAP ERP 開發系統、 SAP BW 測試系統、 SAP CRM 生產系統等。在 Azure 部署中，不支援的 toodivide 這些內部部署與 Azure 之間的兩個層級。</span><span class="sxs-lookup"><span data-stu-id="2077d-167">SAP System: hello combination of DBMS layer and application layer of, for example, an SAP ERP development system, SAP BW test system, SAP CRM production system, etc. In Azure deployments, it is not supported toodivide these two layers between on-premises and Azure.</span></span> <span data-ttu-id="2077d-168">這表示 SAP 系統可以在內部部署或在 Azure 部署。</span><span class="sxs-lookup"><span data-stu-id="2077d-168">This means an SAP system is either deployed on-premises or it is deployed in Azure.</span></span> <span data-ttu-id="2077d-169">不過，您可以部署在 Azure 或內部部署 SAP 版圖的 hello 不同系統。</span><span class="sxs-lookup"><span data-stu-id="2077d-169">However, you can deploy hello different systems of an SAP landscape in Azure or on-premises.</span></span> <span data-ttu-id="2077d-170">例如，您可以部署 hello SAP CRM 開發和測試系統在 Azure 中的，但是 hello SAP CRM 生產系統在內部。</span><span class="sxs-lookup"><span data-stu-id="2077d-170">For example, you could deploy hello SAP CRM development and test systems in Azure but hello SAP CRM production system on-premises.</span></span>
* <span data-ttu-id="2077d-171">僅限雲端部署： 部署其中 hello Azure 訂用帳戶未連線透過網站的站台或 ExpressRoute 連線 toohello 內部部署網路基礎結構。</span><span class="sxs-lookup"><span data-stu-id="2077d-171">Cloud-Only deployment: A deployment where hello Azure subscription is not connected via a site-to-site or ExpressRoute connection toohello on-premises network infrastructure.</span></span> <span data-ttu-id="2077d-172">在一般 Azure 文件中，這類部署也會描述為「僅限雲端」的部署。</span><span class="sxs-lookup"><span data-stu-id="2077d-172">In common Azure documentation these kinds of deployments are also described as ‘Cloud-Only’ deployments.</span></span> <span data-ttu-id="2077d-173">採用這種方法部署的虛擬機器透過 hello 網際網路存取，而且公用網際網路端點指派 toohello Vm 在 Azure 中。</span><span class="sxs-lookup"><span data-stu-id="2077d-173">Virtual Machines deployed with this method are accessed through hello Internet and public Internet endpoints assigned toohello VMs in Azure.</span></span> <span data-ttu-id="2077d-174">hello 內部部署 Active Directory (AD) 和 DNS 未延伸 tooAzure 在這些類型的部署。</span><span class="sxs-lookup"><span data-stu-id="2077d-174">hello on-premises Active Directory (AD) and DNS is not extended tooAzure in these types of deployments.</span></span> <span data-ttu-id="2077d-175">因此 hello Vm 不屬於 hello 內部部署 Active Directory。</span><span class="sxs-lookup"><span data-stu-id="2077d-175">Hence hello VMs are not part of hello on-premises Active Directory.</span></span> <span data-ttu-id="2077d-176">附註：僅限雲端的部署在本文中定義為在 Azure 中以獨佔方式執行的完整 SAP 架構，不會將 Active Directory 或名稱解析從內部部署擴充到公用雲端。</span><span class="sxs-lookup"><span data-stu-id="2077d-176">Note: Cloud-Only deployments in this document are defined as complete SAP landscapes, which are running exclusively in Azure without extension of Active Directory or name resolution from on-premises into public cloud.</span></span> <span data-ttu-id="2077d-177">針對實際執行 SAP 系統或 SAP STMS 或其他內部部署資源需要 toobe 裝載在 Azure 與位於內部部署資源上的 SAP 系統之間使用的組態不支援僅限雲端的組態。</span><span class="sxs-lookup"><span data-stu-id="2077d-177">Cloud-Only configurations are not supported for production SAP systems or configurations where SAP STMS or other on-premises resources need toobe used between SAP systems hosted on Azure and resources residing on-premises.</span></span>
* <span data-ttu-id="2077d-178">跨單位： 說明的案例，其中 Vm 是已部署的 tooan Azure 訂用帳戶具有站台對站台、 多站台或 ExpressRoute hello 在內部部署資料中心與 Azure 之間的連線能力。</span><span class="sxs-lookup"><span data-stu-id="2077d-178">Cross-Premises: Describes a scenario where VMs are deployed tooan Azure subscription that has site-to-site, multi-site, or ExpressRoute connectivity between hello on-premises datacenter(s) and Azure.</span></span> <span data-ttu-id="2077d-179">在一般 Azure 文件中，這類部署也會描述為跨單位案例。</span><span class="sxs-lookup"><span data-stu-id="2077d-179">In common Azure documentation, these kinds of deployments are also described as Cross-Premises scenarios.</span></span> <span data-ttu-id="2077d-180">hello hello 連線的原因是 tooextend 內部部署網域、 在內部部署 Active Directory 和 DNS 在內部部署至 Azure。</span><span class="sxs-lookup"><span data-stu-id="2077d-180">hello reason for hello connection is tooextend on-premises domains, on-premises Active Directory, and on-premises DNS into Azure.</span></span> <span data-ttu-id="2077d-181">hello 內部橫向是擴充的 toohello hello 訂用帳戶的 Azure 資產。</span><span class="sxs-lookup"><span data-stu-id="2077d-181">hello on-premises landscape is extended toohello Azure assets of hello subscription.</span></span> <span data-ttu-id="2077d-182">透過這樣延伸，hello Vm 可以是 hello 在內部部署網域的一部分。</span><span class="sxs-lookup"><span data-stu-id="2077d-182">Having this extension, hello VMs can be part of hello on-premises domain.</span></span> <span data-ttu-id="2077d-183">Hello 在內部部署網域的網域使用者可以存取 hello 伺服器，並且可以執行服務那些 Vm （例如 DBMS 服務）。</span><span class="sxs-lookup"><span data-stu-id="2077d-183">Domain users of hello on-premises domain can access hello servers and can run services on those VMs (like DBMS services).</span></span> <span data-ttu-id="2077d-184">您可以在內部部署的 VM 與 Azure 中部署的 VM 之間進行通訊與名稱解析。</span><span class="sxs-lookup"><span data-stu-id="2077d-184">Communication and name resolution between VMs deployed on-premises and VMs deployed in Azure is possible.</span></span> <span data-ttu-id="2077d-185">我們預期此 toobe hello 最常見的案例部署在 Azure 上的 SAP 資產。</span><span class="sxs-lookup"><span data-stu-id="2077d-185">We expect this toobe hello most common scenario for deploying SAP assets on Azure.</span></span> <span data-ttu-id="2077d-186">如需詳細資訊，請參閱[這篇文章][vpn-gateway-cross-premises-options]和[這篇文章][vpn-gateway-site-to-site-create]。</span><span class="sxs-lookup"><span data-stu-id="2077d-186">For more information, see [this article][vpn-gateway-cross-premises-options] and [this article][vpn-gateway-site-to-site-create].</span></span>

> [!NOTE]
> <span data-ttu-id="2077d-187">SAP 生產系統支援跨單位部署 SAP 系統，其中執行 SAP 系統的 Azure 虛擬機器是內部部署網域的成員。</span><span class="sxs-lookup"><span data-stu-id="2077d-187">Cross-Premises deployments of SAP systems where Azure Virtual Machines running SAP systems are members of an on-premises domain are supported for production SAP systems.</span></span> <span data-ttu-id="2077d-188">支援跨單位組態，以便將部分或完整的 SAP 架構部署到 Azure。</span><span class="sxs-lookup"><span data-stu-id="2077d-188">Cross-Premises configurations are supported for deploying parts or complete SAP landscapes into Azure.</span></span> <span data-ttu-id="2077d-189">即使在 Azure 中執行 hello 完整的 SAP 環境，則需要具有這些 Vm 屬於內部部署網域和廣告。</span><span class="sxs-lookup"><span data-stu-id="2077d-189">Even running hello complete SAP landscape in Azure requires having those VMs being part of on-premises domain and ADS.</span></span> <span data-ttu-id="2077d-190">在先前版本中的 hello 文件，我們剛才討論過混合式 IT 案例，其中 hello 詞彙 '混合' 已進行 root 破解 hello 事實會在內部部署與 Azure 之間的跨單位連線。</span><span class="sxs-lookup"><span data-stu-id="2077d-190">In former versions of hello documentation, we talked about Hybrid-IT scenarios, where hello term ‘Hybrid’ is rooted in hello fact that there is a cross-premises connectivity between on-premises and Azure.</span></span> <span data-ttu-id="2077d-191">在此情況下 '混合' 也表示，在 Azure 中的 hello Vm 屬於 hello 內部部署 Active Directory。</span><span class="sxs-lookup"><span data-stu-id="2077d-191">In this case ‘Hybrid’ also means that hello VMs in Azure are part of hello on-premises Active Directory.</span></span>
> 
> 

<span data-ttu-id="2077d-192">有些 Microsoft 文件在描述跨單位案例時稍有不同，特別是針對 DBMS HA 組態。</span><span class="sxs-lookup"><span data-stu-id="2077d-192">Some Microsoft documentation describes Cross-Premises scenarios a bit differently, especially for DBMS HA configurations.</span></span> <span data-ttu-id="2077d-193">在 hello 案例中的 hello SAP 相關文件，hello 跨內部部署案例只分布 toohaving 站對站或私人 (ExpressRoute) 連線和 toohello 事實 hello SAP 版圖分散在內部部署和 Azure。</span><span class="sxs-lookup"><span data-stu-id="2077d-193">In hello case of hello SAP-related documents, hello Cross-Premises scenario just boils down toohaving a site-to-site or private (ExpressRoute) connectivity and toohello fact that hello SAP landscape is distributed between on-premises and Azure.</span></span>

### <a name="resources"></a><span data-ttu-id="2077d-194">資源</span><span class="sxs-lookup"><span data-stu-id="2077d-194">Resources</span></span>
<span data-ttu-id="2077d-195">hello 下列指南可供 Azure 上 SAP 部署的 hello 主題：</span><span class="sxs-lookup"><span data-stu-id="2077d-195">hello following guides are available for hello topic of SAP deployments on Azure:</span></span>

* <span data-ttu-id="2077d-196">[SAP NetWeaver 的 Azure 虛擬機器規劃和實作指南][planning-guide]</span><span class="sxs-lookup"><span data-stu-id="2077d-196">[Azure Virtual Machines planning and implementation for SAP NetWeaver][planning-guide]</span></span>
* <span data-ttu-id="2077d-197">[SAP NetWeaver 的 Azure 虛擬機器部署][deployment-guide]</span><span class="sxs-lookup"><span data-stu-id="2077d-197">[Azure Virtual Machines deployment for SAP NetWeaver][deployment-guide]</span></span>
* <span data-ttu-id="2077d-198">[SAP NetWeaver 的 Azure 虛擬機器 DBMS 部署 (本文件)][dbms-guide]</span><span class="sxs-lookup"><span data-stu-id="2077d-198">[Azure Virtual Machines DBMS deployment for SAP NetWeaver (this document)][dbms-guide]</span></span>

<span data-ttu-id="2077d-199">Azure 上的 SAP 相關的 toohello 主題 hello 遵循 SAP 附註︰</span><span class="sxs-lookup"><span data-stu-id="2077d-199">hello following SAP Notes are related toohello topic of SAP on Azure:</span></span>

| <span data-ttu-id="2077d-200">附註編號</span><span class="sxs-lookup"><span data-stu-id="2077d-200">Note number</span></span> | <span data-ttu-id="2077d-201">課程名稱</span><span class="sxs-lookup"><span data-stu-id="2077d-201">Title</span></span> |
| --- | --- |
| <span data-ttu-id="2077d-202">[1928533]</span><span class="sxs-lookup"><span data-stu-id="2077d-202">[1928533]</span></span> |<span data-ttu-id="2077d-203">Azure 上的 SAP 應用程式︰支援的產品和 Azure VM 類型</span><span class="sxs-lookup"><span data-stu-id="2077d-203">SAP Applications on Azure: Supported Products and Azure VM types</span></span> |
| <span data-ttu-id="2077d-204">[2015553]</span><span class="sxs-lookup"><span data-stu-id="2077d-204">[2015553]</span></span> |<span data-ttu-id="2077d-205">Microsoft Azure 上的 SAP：支援的必要條件</span><span class="sxs-lookup"><span data-stu-id="2077d-205">SAP on Microsoft Azure: Support Prerequisites</span></span> |
| <span data-ttu-id="2077d-206">[1999351]</span><span class="sxs-lookup"><span data-stu-id="2077d-206">[1999351]</span></span> |<span data-ttu-id="2077d-207">疑難排解適用於 SAP 且已強化的 Azure 監視功能</span><span class="sxs-lookup"><span data-stu-id="2077d-207">Troubleshooting Enhanced Azure Monitoring for SAP</span></span> |
| <span data-ttu-id="2077d-208">[2178632]</span><span class="sxs-lookup"><span data-stu-id="2077d-208">[2178632]</span></span> |<span data-ttu-id="2077d-209">Microsoft Azure 上的 SAP 主要監視度量</span><span class="sxs-lookup"><span data-stu-id="2077d-209">Key Monitoring Metrics for SAP on Microsoft Azure</span></span> |
| <span data-ttu-id="2077d-210">[1409604]</span><span class="sxs-lookup"><span data-stu-id="2077d-210">[1409604]</span></span> |<span data-ttu-id="2077d-211">Windows 上的虛擬化︰增強型監視功能</span><span class="sxs-lookup"><span data-stu-id="2077d-211">Virtualization on Windows: Enhanced Monitoring</span></span> |
| <span data-ttu-id="2077d-212">[2191498]</span><span class="sxs-lookup"><span data-stu-id="2077d-212">[2191498]</span></span> |<span data-ttu-id="2077d-213">Linux 和 Azure 上的 SAP：增強型監視功能</span><span class="sxs-lookup"><span data-stu-id="2077d-213">SAP on Linux with Azure: Enhanced Monitoring</span></span> |
| <span data-ttu-id="2077d-214">[2039619]</span><span class="sxs-lookup"><span data-stu-id="2077d-214">[2039619]</span></span> |<span data-ttu-id="2077d-215">使用 Microsoft Azure 的 SAP 應用程式 hello Oracle 資料庫： 支援的產品和版本</span><span class="sxs-lookup"><span data-stu-id="2077d-215">SAP Applications on Microsoft Azure using hello Oracle Database: Supported Products and Versions</span></span> |
| <span data-ttu-id="2077d-216">[2233094]</span><span class="sxs-lookup"><span data-stu-id="2077d-216">[2233094]</span></span> |<span data-ttu-id="2077d-217">DB6︰Azure 上使用 IBM DB2 for Linux, UNIX, and Windows 的應用程式 - 其他資訊</span><span class="sxs-lookup"><span data-stu-id="2077d-217">DB6: SAP Applications on Azure Using IBM DB2 for Linux, UNIX, and Windows - Additional Information</span></span> |
| <span data-ttu-id="2077d-218">[2243692]</span><span class="sxs-lookup"><span data-stu-id="2077d-218">[2243692]</span></span> |<span data-ttu-id="2077d-219">Microsoft Azure (IaaS) VM 上的 Linux：SAP 授權問題</span><span class="sxs-lookup"><span data-stu-id="2077d-219">Linux on Microsoft Azure (IaaS) VM: SAP license issues</span></span> |
| <span data-ttu-id="2077d-220">[1984787]</span><span class="sxs-lookup"><span data-stu-id="2077d-220">[1984787]</span></span> |<span data-ttu-id="2077d-221">SUSE LINUX Enterprise Server 12：安裝注意事項</span><span class="sxs-lookup"><span data-stu-id="2077d-221">SUSE LINUX Enterprise Server 12: Installation notes</span></span> |
| <span data-ttu-id="2077d-222">[2002167]</span><span class="sxs-lookup"><span data-stu-id="2077d-222">[2002167]</span></span> |<span data-ttu-id="2077d-223">Red Hat Enterprise Linux 7.x：安裝和升級</span><span class="sxs-lookup"><span data-stu-id="2077d-223">Red Hat Enterprise Linux 7.x: Installation and Upgrade</span></span> |
| <span data-ttu-id="2077d-224">[2069760]</span><span class="sxs-lookup"><span data-stu-id="2077d-224">[2069760]</span></span> |<span data-ttu-id="2077d-225">Oracle Linux 7.x SAP 安裝和升級</span><span class="sxs-lookup"><span data-stu-id="2077d-225">Oracle Linux 7.x SAP Installation and Upgrade</span></span> |
| <span data-ttu-id="2077d-226">[1597355]</span><span class="sxs-lookup"><span data-stu-id="2077d-226">[1597355]</span></span> |<span data-ttu-id="2077d-227">適用於 Linux 的交換空間建議</span><span class="sxs-lookup"><span data-stu-id="2077d-227">Swap-space recommendation for Linux</span></span> |
| <span data-ttu-id="2077d-228">[2171857]</span><span class="sxs-lookup"><span data-stu-id="2077d-228">[2171857]</span></span> |<span data-ttu-id="2077d-229">Oracle Database 12c - Linux 上的檔案系統支援</span><span class="sxs-lookup"><span data-stu-id="2077d-229">Oracle Database 12c - file system support on Linux</span></span> |
| <span data-ttu-id="2077d-230">[1114181]</span><span class="sxs-lookup"><span data-stu-id="2077d-230">[1114181]</span></span> |<span data-ttu-id="2077d-231">Oracle Database 11g - Linux 上的檔案系統支援</span><span class="sxs-lookup"><span data-stu-id="2077d-231">Oracle Database 11g - file system support on Linux</span></span> |


<span data-ttu-id="2077d-232">也會讀取 hello [SCN Wiki](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) for Linux 包含所有 SAP 附註。</span><span class="sxs-lookup"><span data-stu-id="2077d-232">Also read hello [SCN Wiki](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) that contains all SAP Notes for Linux.</span></span>

<span data-ttu-id="2077d-233">您應該使用 hello Microsoft Azure 架構與如何部署和操作 Microsoft Azure 虛擬機器的相關知識。</span><span class="sxs-lookup"><span data-stu-id="2077d-233">You should have a working knowledge about hello Microsoft Azure Architecture and how Microsoft Azure Virtual Machines are deployed and operated.</span></span> <span data-ttu-id="2077d-234">您可以在以下位置找到更多資訊：<https://azure.microsoft.com/documentation/></span><span class="sxs-lookup"><span data-stu-id="2077d-234">You can find more information at <https://azure.microsoft.com/documentation/></span></span>

> [!NOTE]
> <span data-ttu-id="2077d-235">我們**不**討論 Microsoft Azure 平台為 hello Microsoft Azure 平台的服務 (PaaS)。</span><span class="sxs-lookup"><span data-stu-id="2077d-235">We are **not** discussing Microsoft Azure Platform as a Service (PaaS) offerings of hello Microsoft Azure Platform.</span></span> <span data-ttu-id="2077d-236">這份文件會說明如何執行資料庫管理系統 (DBMS) 在 Microsoft Azure 虛擬機器 (IaaS)，就像您會在內部部署環境中執行 hello DBMS。</span><span class="sxs-lookup"><span data-stu-id="2077d-236">This paper is about running a database management system (DBMS) in Microsoft Azure Virtual Machines (IaaS) just as you would run hello DBMS in your on-premises environment.</span></span> <span data-ttu-id="2077d-237">這兩個產品之間所提供的資料庫性能與功能差異極大，不應混用彼此。</span><span class="sxs-lookup"><span data-stu-id="2077d-237">Database capabilities and functionalities between these two offers are very different and should not be mixed up with each other.</span></span> <span data-ttu-id="2077d-238">另請參閱︰<https://azure.microsoft.com/services/sql-database/></span><span class="sxs-lookup"><span data-stu-id="2077d-238">See also: <https://azure.microsoft.com/services/sql-database/></span></span>
> 
> 

<span data-ttu-id="2077d-239">因為我們討論的 IaaS，一般而言 hello Windows、 Linux 及 DBMS 安裝和組態會基本上 hello 與任何虛擬機器或裸機機器會與內部部署安裝相同。</span><span class="sxs-lookup"><span data-stu-id="2077d-239">Since we are discussing IaaS, in general hello Windows, Linux, and DBMS installation and configuration are essentially hello same as any virtual machine or bare metal machine you would install on-premises.</span></span> <span data-ttu-id="2077d-240">不過，有一些架構和系統管理實作決策會與使用 IaaS 時的不同。</span><span class="sxs-lookup"><span data-stu-id="2077d-240">However, there are some architecture and system management implementation decisions, which are different when utilizing IaaS.</span></span> <span data-ttu-id="2077d-241">本文件的 hello 目的是 tooexplain hello 特定架構和系統管理差異，您必須準備使用 IaaS 時。</span><span class="sxs-lookup"><span data-stu-id="2077d-241">hello purpose of this document is tooexplain hello specific architectural and system management differences that you must be prepared for when using IaaS.</span></span>

<span data-ttu-id="2077d-242">一般情況下，hello 的本文會討論的差異層面大致如下：</span><span class="sxs-lookup"><span data-stu-id="2077d-242">In general, hello overall areas of difference that this paper discusses are:</span></span>

* <span data-ttu-id="2077d-243">規劃的 SAP 系統 tooensure hello 適當的 VM/磁碟配置您擁有 hello 適當的資料檔案配置，並且用於您的工作負載時可以達成足夠的 IOPS。</span><span class="sxs-lookup"><span data-stu-id="2077d-243">Planning hello proper VM/disk layout of SAP systems tooensure you have hello proper data file layout and can achieve enough IOPS for your workload.</span></span>
* <span data-ttu-id="2077d-244">使用 IaaS 時的網路功能考量。</span><span class="sxs-lookup"><span data-stu-id="2077d-244">Networking considerations when using IaaS.</span></span>
* <span data-ttu-id="2077d-245">特定的資料庫功能 toouse 順序 toooptimize hello 資料庫配置中。</span><span class="sxs-lookup"><span data-stu-id="2077d-245">Specific database features toouse in order toooptimize hello database layout.</span></span>
* <span data-ttu-id="2077d-246">IaaS 的備份和還原考量。</span><span class="sxs-lookup"><span data-stu-id="2077d-246">Backup and restore considerations in IaaS.</span></span>
* <span data-ttu-id="2077d-247">使用不同類型的映像進行部署。</span><span class="sxs-lookup"><span data-stu-id="2077d-247">Utilizing different types of images for deployment.</span></span>
* <span data-ttu-id="2077d-248">Azure IaaS 中的高可用性。</span><span class="sxs-lookup"><span data-stu-id="2077d-248">High Availability in Azure IaaS.</span></span>

## <span data-ttu-id="2077d-249"><a name="65fa79d6-a85f-47ee-890b-22e794f51a64"></a>RDBMS 部署結構</span><span class="sxs-lookup"><span data-stu-id="2077d-249"><a name="65fa79d6-a85f-47ee-890b-22e794f51a64"></a>Structure of an RDBMS Deployment</span></span>
<span data-ttu-id="2077d-250">在順序 toofollow 這一章，就什麼出示中必要 toounderstand[這][ deployment-guide-3] hello 一章[部署指南 》] [ deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="2077d-250">In order toofollow this chapter, it is necessary toounderstand what was presented in [this][deployment-guide-3] chapter of hello [Deployment Guide][deployment-guide].</span></span> <span data-ttu-id="2077d-251">相關知識 hello 不同的 VM 系列，其差異和 Azure 標準和高階儲存體的差異應該了解並已知再讀取這一章。</span><span class="sxs-lookup"><span data-stu-id="2077d-251">Knowledge about hello different VM-Series and their differences and differences of Azure Standard and Premium Storage should be understood and known before reading this chapter.</span></span>

<span data-ttu-id="2077d-252">2015 年 3 月中，直到有限的 too127 GB 大小中包含作業系統的磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-252">Until March 2015, disks, which contain an operating system were limited too127 GB in size.</span></span> <span data-ttu-id="2077d-253">這項限制在 2015 年 3 月解除 (如需詳細資訊，請參閱 <https://azure.microsoft.com/blog/2015/03/25/azure-vm-os-drive-limit-octupled/>)。</span><span class="sxs-lookup"><span data-stu-id="2077d-253">This limitation got lifted in March 2015 (for more information check <https://azure.microsoft.com/blog/2015/03/25/azure-vm-os-drive-limit-octupled/>).</span></span> <span data-ttu-id="2077d-254">從該處包含 hello 作業系統可以有 hello 的磁碟上任何其他的磁碟大小相同。</span><span class="sxs-lookup"><span data-stu-id="2077d-254">From there on disks containing hello operating system can have hello same size as any other disk.</span></span> <span data-ttu-id="2077d-255">不過，我們仍然偏好 hello 作業系統、 DBMS，以及最終的 SAP 二進位檔所在 hello 資料庫檔案不同的部署結構。</span><span class="sxs-lookup"><span data-stu-id="2077d-255">Nevertheless, we still prefer a structure of deployment where hello operating system, DBMS, and eventual SAP binaries are separate from hello database files.</span></span> <span data-ttu-id="2077d-256">因此，我們預期在 Azure 虛擬機器中執行的 SAP 系統有 hello 基底 VM （或磁碟） 與 hello 作業系統、 資料庫管理系統可執行檔，以及 SAP 執行檔一起安裝。</span><span class="sxs-lookup"><span data-stu-id="2077d-256">Therefore, we expect SAP systems running in Azure Virtual Machines have hello base VM (or disk) installed with hello operating system, database management system executables, and SAP executables.</span></span> <span data-ttu-id="2077d-257">hello DBMS 資料和記錄檔會儲存在 Azure 儲存體 （Standard 或 Premium 儲存體） 中不同的磁碟，並附加為邏輯磁碟 toohello 原始 Azure 作業系統映像 VM。</span><span class="sxs-lookup"><span data-stu-id="2077d-257">hello DBMS data and log files are stored in Azure Storage (Standard or Premium Storage) in separate disks and attached as logical disks toohello original Azure operating system image VM.</span></span> 

<span data-ttu-id="2077d-258">取決於有 （例如藉由使用 hello DS 系列或 GS 系列 Vm） 利用 Azure 標準或高階儲存體是在 Azure 中，而其會記錄其他配額[這裡 (Linux)] [ virtual-machines-sizes-linux]和[這裡 (Windows)][virtual-machines-sizes-windows]。</span><span class="sxs-lookup"><span data-stu-id="2077d-258">Dependent on leveraging Azure Standard or Premium Storage (for example by using hello DS-series or GS-series VMs) there are other quotas in Azure, which are documented [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows].</span></span> <span data-ttu-id="2077d-259">在規劃您的磁碟配置，您需要 hello 配額 toofind hello 最佳的平衡 hello 下列項目：</span><span class="sxs-lookup"><span data-stu-id="2077d-259">When planning your disk layout, you need toofind hello best balance of hello quotas for hello following items:</span></span>

* <span data-ttu-id="2077d-260">hello 資料檔案數目。</span><span class="sxs-lookup"><span data-stu-id="2077d-260">hello number of data files.</span></span>
* <span data-ttu-id="2077d-261">hello 包含 hello 檔案的磁碟數目。</span><span class="sxs-lookup"><span data-stu-id="2077d-261">hello number of disks that contain hello files.</span></span>
* <span data-ttu-id="2077d-262">hello 的單一磁碟的 IOPS 配額。</span><span class="sxs-lookup"><span data-stu-id="2077d-262">hello IOPS quotas of a single disk.</span></span>
* <span data-ttu-id="2077d-263">每個磁碟的 hello 資料輸送量。</span><span class="sxs-lookup"><span data-stu-id="2077d-263">hello data throughput per disk.</span></span>
* <span data-ttu-id="2077d-264">hello 可能每個 VM 大小的額外資料磁碟數目。</span><span class="sxs-lookup"><span data-stu-id="2077d-264">hello number of additional data disks possible per VM size.</span></span>
* <span data-ttu-id="2077d-265">hello 整體儲存體輸送量 VM 可以提供。</span><span class="sxs-lookup"><span data-stu-id="2077d-265">hello overall storage throughput a VM can provide.</span></span>

<span data-ttu-id="2077d-266">Azure 會強制執行每個資料磁碟的 IOPS 配額。</span><span class="sxs-lookup"><span data-stu-id="2077d-266">Azure enforces an IOPS quota per data disk.</span></span> <span data-ttu-id="2077d-267">這些配額與 Azure 標準儲存體和進階儲存體上裝載的磁碟不同。</span><span class="sxs-lookup"><span data-stu-id="2077d-267">These quotas are different for disks hosted on Azure Standard Storage and Premium Storage.</span></span> <span data-ttu-id="2077d-268">I/O 延遲也會提供更好的 I/O 延遲因素的進階儲存體 hello 兩個儲存體類型之間非常不同。</span><span class="sxs-lookup"><span data-stu-id="2077d-268">I/O latencies are also very different between hello two storage types with Premium Storage delivering factors better I/O latencies.</span></span> <span data-ttu-id="2077d-269">每個 hello 不同 VM 類型有有限的數目的資料磁碟，您都可以 tooattach。</span><span class="sxs-lookup"><span data-stu-id="2077d-269">Each of hello different VM types has a limited number of data disks that you are able tooattach.</span></span> <span data-ttu-id="2077d-270">另一個限制是只有特定的 VM 類型可以利用 Azure 進階儲存體。</span><span class="sxs-lookup"><span data-stu-id="2077d-270">Another restriction is that only certain VM types can leverage Azure Premium Storage.</span></span> <span data-ttu-id="2077d-271">這表示使用某種 VM 類型的 hello 決策可能不只重點 hello CPU 和記憶體需求也的 hello IOPS、 延遲和磁碟輸送量需求通常與 hello 磁碟數目縮放或 hello 高階儲存體磁碟類型。</span><span class="sxs-lookup"><span data-stu-id="2077d-271">This means hello decision for a certain VM type might not only be driven by hello CPU and memory requirements, but also by hello IOPS, latency and disk throughput requirements that usually are scaled with hello number of disks or hello type of Premium Storage disks.</span></span> <span data-ttu-id="2077d-272">尤其是使用進階儲存體 hello 的磁碟大小也可能會取決於 IOPS 及輸送量 toobe 達成每個磁碟所需的 hello 數目。</span><span class="sxs-lookup"><span data-stu-id="2077d-272">Especially with Premium Storage hello size of a disk also might be dictated by hello number of IOPS and throughput that needs toobe achieved by each disk.</span></span>

<span data-ttu-id="2077d-273">hello 事實的 hello 整體 IOPS 速率、 hello 掛接的磁碟數目和 hello 的 hello VM 因素環環相扣，大小可能會導致不同於其內部部署 SAP 系統 toobe 的 Azure 組態。</span><span class="sxs-lookup"><span data-stu-id="2077d-273">hello fact that hello overall IOPS rate, hello number of disks mounted, and hello size of hello VM are all tied together, might cause an Azure configuration of an SAP system toobe different than its on-premises deployment.</span></span> <span data-ttu-id="2077d-274">每個 LUN 的 hello IOPS 限制是內部部署中通常可以設定。</span><span class="sxs-lookup"><span data-stu-id="2077d-274">hello IOPS limits per LUN are usually configurable in on-premises deployments.</span></span> <span data-ttu-id="2077d-275">而與 Azure 儲存體這些限制是固定的或如高階儲存體相依 hello 磁碟類型上所示。</span><span class="sxs-lookup"><span data-stu-id="2077d-275">Whereas with Azure Storage those limits are fixed or as in Premium Storage dependent on hello disk type.</span></span> <span data-ttu-id="2077d-276">因此在內部部署看到客戶的使用許多不同的磁碟區的特殊的可執行檔，如 SAP 和 DBMS 或特殊磁碟區來存放暫存資料庫或資料表空間 hello 的資料庫伺服器的組態。</span><span class="sxs-lookup"><span data-stu-id="2077d-276">So with on-premises deployments we see customer configurations of database servers that are using many different volumes for special executables like SAP and hello DBMS or special volumes for temporary databases or table spaces.</span></span> <span data-ttu-id="2077d-277">移動的 tooAzure 這類內部部署系統時，時，可能會浪費 tooa IOPS 頻寬所浪費的可執行檔或資料庫，不會執行任何或 IOPS 大量的磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-277">When such an on-premises system is moved tooAzure, it might lead tooa waste of potential IOPS bandwidth by wasting a disk for executables or databases, which do not perform any or not a lot of IOPS.</span></span> <span data-ttu-id="2077d-278">因此，在 Azure Vm 中建議盡可能該 hello DBMS 和 SAP 執行檔安裝在 hello 作業系統磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-278">Therefore, in Azure VMs we recommend that hello DBMS and SAP executables be installed on hello OS disk if possible.</span></span>

<span data-ttu-id="2077d-279">hello hello 資料庫檔案和記錄檔以及 hello 型別使用，Azure 儲存體的位置應該定義 IOPS、 延遲和輸送量需求。</span><span class="sxs-lookup"><span data-stu-id="2077d-279">hello placement of hello database files and log files and hello type of Azure Storage used, should be defined by IOPS, latency, and throughput requirements.</span></span> <span data-ttu-id="2077d-280">在訂單 toohave 足夠的 IOPS 供 hello 交易記錄檔，您可能會強制的 tooleverage hello 交易記錄檔的多個磁碟檔案，或使用較大的進階儲存體磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-280">In order toohave enough IOPS for hello transaction log, you might be forced tooleverage multiple disks for hello transaction log file or use a larger Premium Storage disk.</span></span> <span data-ttu-id="2077d-281">在這類情況下一個要建置的軟體會使用 hello 磁碟時，其中包含 hello 交易記錄檔 RAID （例如 Windows 儲存體集區的 Windows 或 MDADM 和適用於 Linux LVM （邏輯磁碟區管理員））。</span><span class="sxs-lookup"><span data-stu-id="2077d-281">In such a case one would build a software RAID (for example Windows Storage Pool for Windows or MDADM and LVM (Logical Volume Manager) for Linux) with hello disks, which contain hello transaction log.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="2077d-283">Windows</span><span class="sxs-lookup"><span data-stu-id="2077d-283">Windows</span></span>
> 
> <span data-ttu-id="2077d-284">在 Azure VM 的 D:\ 磁碟機是由某些本機的磁碟備份 hello Azure 計算節點非持續性磁碟機。</span><span class="sxs-lookup"><span data-stu-id="2077d-284">Drive D:\ in an Azure VM is a non-persisted drive, which is backed by some local disks on hello Azure compute node.</span></span> <span data-ttu-id="2077d-285">由於非持續性，這表示 hello VM 重新開機時，在 hello D:\ 磁碟機上任何所做的變更 toohello 內容都會遺失。</span><span class="sxs-lookup"><span data-stu-id="2077d-285">Because it is non-persisted, this means that any changes made toohello content on hello D:\ drive is lost when hello VM is rebooted.</span></span> <span data-ttu-id="2077d-286">「任何變更」的意思是已儲存的檔案、已建立的目錄、已安裝的應用程式等。</span><span class="sxs-lookup"><span data-stu-id="2077d-286">By "any changes", we mean saved files, directories created, applications installed, etc.</span></span>
> 
> ![Linux][Logo_Linux] <span data-ttu-id="2077d-288">Linux</span><span class="sxs-lookup"><span data-stu-id="2077d-288">Linux</span></span>
> 
> <span data-ttu-id="2077d-289">Linux 的 Azure Vm 中自動掛接磁碟機時是非保存的磁碟機的本機磁碟 hello Azure 計算節點上支援的 /mnt/resource。</span><span class="sxs-lookup"><span data-stu-id="2077d-289">Linux Azure VMs automatically mount a drive at /mnt/resource that is a non-persisted drive backed by local disks on hello Azure compute node.</span></span> <span data-ttu-id="2077d-290">由於非持續性，這表示 hello VM 重新開機時，會遺失 /mnt/resource 中任何所做的變更 toocontent。</span><span class="sxs-lookup"><span data-stu-id="2077d-290">Because it is non-persisted, this means that any changes made toocontent in /mnt/resource are lost when hello VM is rebooted.</span></span> <span data-ttu-id="2077d-291">「任何變更」的意思是已儲存的檔案、已建立的目錄、已安裝的應用程式等。</span><span class="sxs-lookup"><span data-stu-id="2077d-291">By any changes, we mean files saved, directories created, applications installed, etc.</span></span>
> 
> 

- - -
<span data-ttu-id="2077d-292">相依於 hello Azure VM 系列，hello hello 上的本機磁碟計算節點顯示不同的效能，這可以像分類：</span><span class="sxs-lookup"><span data-stu-id="2077d-292">Dependent on hello Azure VM-series, hello local disks on hello compute node show different performance, which can be categorized like:</span></span>

* <span data-ttu-id="2077d-293">A0-A7︰非常有限的效能。</span><span class="sxs-lookup"><span data-stu-id="2077d-293">A0-A7: Very limited performance.</span></span> <span data-ttu-id="2077d-294">無法使用 Windows 分頁檔以外的項目</span><span class="sxs-lookup"><span data-stu-id="2077d-294">Not usable for anything beyond windows page file</span></span>
* <span data-ttu-id="2077d-295">A8-A11︰效能特性非常良好，有數萬個 IOPS 和 > 1 GB/秒的輸送量</span><span class="sxs-lookup"><span data-stu-id="2077d-295">A8-A11: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="2077d-296">D 系列︰效能特性非常良好，有數萬個 IOPS 和 > 1 GB/秒的輸送量</span><span class="sxs-lookup"><span data-stu-id="2077d-296">D-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="2077d-297">DS 系列︰效能特性非常良好，有數萬個 IOPS 和 > 1 GB/秒的輸送量</span><span class="sxs-lookup"><span data-stu-id="2077d-297">DS-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="2077d-298">G 系列︰效能特性非常良好，有數萬個 IOPS 和 > 1 GB/秒的輸送量</span><span class="sxs-lookup"><span data-stu-id="2077d-298">G-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="2077d-299">GS 系列︰效能特性非常良好，有數萬個 IOPS 和 > 1 GB/秒的輸送量</span><span class="sxs-lookup"><span data-stu-id="2077d-299">GS-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>

<span data-ttu-id="2077d-300">上述陳述式會套用 toohello 經過驗證和 SAP 的 VM 類型。</span><span class="sxs-lookup"><span data-stu-id="2077d-300">Statements above are applying toohello VM types that are certified with SAP.</span></span> <span data-ttu-id="2077d-301">絕佳的 IOPS 及輸送量與 hello VM 系列部分的 DBMS 功能，例如 tempdb 或暫存資料表空間限定的運用。</span><span class="sxs-lookup"><span data-stu-id="2077d-301">hello VM-series with excellent IOPS and throughput qualify for leverage by some DBMS features, like tempdb or temporary table space.</span></span>

### <span data-ttu-id="2077d-302"><a name="c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f"></a>VM 和資料磁碟的快取</span><span class="sxs-lookup"><span data-stu-id="2077d-302"><a name="c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f"></a>Caching for VMs and data disks</span></span>
<span data-ttu-id="2077d-303">當我們建立資料磁碟，透過 hello 入口網站或上傳的磁碟 tooVMs 掛接時，我們可以選擇是否要快取 hello hello VM 與位於 Azure 儲存體的磁碟之間的 I/O 流量。</span><span class="sxs-lookup"><span data-stu-id="2077d-303">When we create data disks through hello portal or when we mount uploaded disks tooVMs, we can choose whether hello I/O traffic between hello VM and those disks located in Azure storage are cached.</span></span> <span data-ttu-id="2077d-304">Azure 標準和進階儲存體會針對這種快取類型使用兩種不同技術。</span><span class="sxs-lookup"><span data-stu-id="2077d-304">Azure Standard and Premium Storage use two different technologies for this type of cache.</span></span> <span data-ttu-id="2077d-305">在這兩種情況下，hello 快取本身是 hello 暫存磁碟 (Windows 上的 D:\) 或 on Linux /mnt/resource hello VM 的磁碟上使用相同的磁碟機的 hello 支援。</span><span class="sxs-lookup"><span data-stu-id="2077d-305">In both cases, hello cache itself would be disk backed on hello same drives used by hello temporary disk (D:\ on Windows or /mnt/resource on Linux) of hello VM.</span></span>

<span data-ttu-id="2077d-306">Azure 標準儲存體 hello 可能快取類型為：</span><span class="sxs-lookup"><span data-stu-id="2077d-306">For Azure Standard Storage hello possible cache types are:</span></span>

* <span data-ttu-id="2077d-307">無快取</span><span class="sxs-lookup"><span data-stu-id="2077d-307">No caching</span></span>
* <span data-ttu-id="2077d-308">讀取快取</span><span class="sxs-lookup"><span data-stu-id="2077d-308">Read caching</span></span>
* <span data-ttu-id="2077d-309">讀取和寫入快取</span><span class="sxs-lookup"><span data-stu-id="2077d-309">Read and Write caching</span></span>

<span data-ttu-id="2077d-310">順序 tooget 一致且具有決定性效能，您應該設定為包含的所有磁碟 hello 快取在 Azure 標準儲存體**DBMS 相關的資料檔，記錄檔，以及資料表空間 too'NONE'**。</span><span class="sxs-lookup"><span data-stu-id="2077d-310">In order tooget consistent and deterministic performance, you should set hello caching on Azure Standard Storage for all disks containing **DBMS-related data files, log files, and table space too'NONE'**.</span></span> <span data-ttu-id="2077d-311">hello 快取的 hello VM 仍可使用 hello 預設值。</span><span class="sxs-lookup"><span data-stu-id="2077d-311">hello caching of hello VM can remain with hello default.</span></span>

<span data-ttu-id="2077d-312">Azure 高階儲存體 hello 下列快取的選項有：</span><span class="sxs-lookup"><span data-stu-id="2077d-312">For Azure Premium Storage hello following caching options exist:</span></span>

* <span data-ttu-id="2077d-313">無快取</span><span class="sxs-lookup"><span data-stu-id="2077d-313">No caching</span></span>
* <span data-ttu-id="2077d-314">讀取快取</span><span class="sxs-lookup"><span data-stu-id="2077d-314">Read caching</span></span>

<span data-ttu-id="2077d-315">建議 Azure 高階儲存體是 tooleverage**讀取資料檔的快取**的 hello SAP 資料庫，並選擇**hello 磁碟的記錄檔沒有快取**。</span><span class="sxs-lookup"><span data-stu-id="2077d-315">Recommendation for Azure Premium Storage is tooleverage **Read caching for data files** of hello SAP database and chose **No caching for hello disks of log file(s)**.</span></span>

### <span data-ttu-id="2077d-316"><a name="c8e566f9-21b7-4457-9f7f-126036971a91"></a>軟體 RAID</span><span class="sxs-lookup"><span data-stu-id="2077d-316"><a name="c8e566f9-21b7-4457-9f7f-126036971a91"></a>Software RAID</span></span>
<span data-ttu-id="2077d-317">所述之已上方，您需要 IOPS toobalance hello 數目，需要 hello hello 數目的磁碟之間的資料庫檔案可以設定並 hello Azure VM 提供每個磁碟或 Premium 儲存體磁碟類型的最大值 IOPS。</span><span class="sxs-lookup"><span data-stu-id="2077d-317">As already stated above, you need toobalance hello number of IOPS needed for hello database files across hello number of disks you can configure and hello maximum IOPS an Azure VM provides per disk or Premium Storage disk type.</span></span> <span data-ttu-id="2077d-318">最簡單的方式 toodeal 以 hello 磁碟 IOPS 負載是 toobuild hello 不同磁碟上的軟體 RAID。</span><span class="sxs-lookup"><span data-stu-id="2077d-318">Easiest way toodeal with hello IOPS load over disks is toobuild a software RAID over hello different disks.</span></span> <span data-ttu-id="2077d-319">然後置於的 hello LUN 劃分出 hello 軟體 RAID 的 hello SAP DBMS 的資料檔案數目。</span><span class="sxs-lookup"><span data-stu-id="2077d-319">Then place a number of data files of hello SAP DBMS on hello LUNS carved out of hello software RAID.</span></span> <span data-ttu-id="2077d-320">相依於 hello 需求，您可能會想 tooconsider hello 使用量的進階儲存體以及自兩個 hello 三個不同的進階儲存體磁碟提供更高的 IOPS 配額，比標準儲存體為基礎的磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-320">Dependent on hello requirements you might want tooconsider hello usage of Premium Storage as well since two of hello three different Premium Storage disks provide higher IOPS quota than disks based on Standard Storage.</span></span> <span data-ttu-id="2077d-321">除了 hello 重大 I/O 延遲 Azure 高階儲存體所提供的更好。</span><span class="sxs-lookup"><span data-stu-id="2077d-321">Besides hello significant better I/O latency provided by Azure Premium Storage.</span></span> 

<span data-ttu-id="2077d-322">這同樣適不同 DBMS 系統 hello toohello 交易記錄的檔。</span><span class="sxs-lookup"><span data-stu-id="2077d-322">Same applies toohello transaction log of hello different DBMS systems.</span></span> <span data-ttu-id="2077d-323">使用多個只加入更多 Tlog 檔案不會協助因為 hello DBMS 系統一次只能寫入一個 hello 檔案。</span><span class="sxs-lookup"><span data-stu-id="2077d-323">With many of them just adding more Tlog files does not help since hello DBMS systems write into one of hello files at a time only.</span></span> <span data-ttu-id="2077d-324">如果需要更高 IOPS 速率比單一標準儲存體基礎可以將傳遞磁碟，您可以等量分割多個標準儲存體磁碟上或您可以使用較大的進階儲存體磁碟類型，高 IOPS 速率超過也提供低延遲因素 hello 寫入Hello 交易記錄檔的 I/o。</span><span class="sxs-lookup"><span data-stu-id="2077d-324">If higher IOPS rates are needed than a single Standard Storage based disk can deliver, you can stripe over multiple Standard Storage disks or you can use a larger Premium Storage disk type that beyond higher IOPS rates also delivers factors lower latency for hello write I/Os into hello transaction log.</span></span>

<span data-ttu-id="2077d-325">以下是在 Azure 部署中使用優先軟體 RAID 時所遇到的情況：</span><span class="sxs-lookup"><span data-stu-id="2077d-325">Situations experienced in Azure deployments, which would favor using a software RAID are:</span></span>

* <span data-ttu-id="2077d-326">交易記錄/重做記錄需要的 IOPS 數目比 Azure 針對單一磁碟所提供的還多。</span><span class="sxs-lookup"><span data-stu-id="2077d-326">Transaction Log/Redo Log require more IOPS than Azure provides for a single disk.</span></span> <span data-ttu-id="2077d-327">如前所述，解決此問題的方式是在多個磁碟上使用軟體 RAID 來建置 LUN。</span><span class="sxs-lookup"><span data-stu-id="2077d-327">As mentioned above this can be solved by building a LUN over multiple disks using a software RAID.</span></span>
* <span data-ttu-id="2077d-328">I/O 工作負載透過 hello 不同資料檔案的分配 hello SAP 資料庫。</span><span class="sxs-lookup"><span data-stu-id="2077d-328">Uneven I/O workload distribution over hello different data files of hello SAP database.</span></span> <span data-ttu-id="2077d-329">在此情況下一個可能會遇到一個資料檔，而是會經常遇到 hello 配額。</span><span class="sxs-lookup"><span data-stu-id="2077d-329">In such cases one can experience one data file hitting hello quota rather often.</span></span> <span data-ttu-id="2077d-330">而其他資料檔案甚至不會進行關閉 toohello 單一磁碟的 IOPS 配額。</span><span class="sxs-lookup"><span data-stu-id="2077d-330">Whereas other data files are not even getting close toohello IOPS quota of a single disk.</span></span> <span data-ttu-id="2077d-331">在這種情況下 hello 最簡單的解決方案是一個 toobuild 透過使用軟體 RAID 的多個磁碟的 LUN。</span><span class="sxs-lookup"><span data-stu-id="2077d-331">In such cases hello easiest solution is toobuild one LUN over multiple disks using a software RAID.</span></span> 
* <span data-ttu-id="2077d-332">您不知道哪些 hello 確切的 I/O 工作負載每個資料檔案且只大致了解什麼 hello 整體 IOPS hello DBMS 工作負載會。</span><span class="sxs-lookup"><span data-stu-id="2077d-332">You don’t know what hello exact I/O workload per data file is and only roughly know what hello overall IOPS workload against hello DBMS is.</span></span> <span data-ttu-id="2077d-333">最簡單的 toodo 是軟體的的 toobuild hello 與一個 LUN 協助 RAID。</span><span class="sxs-lookup"><span data-stu-id="2077d-333">Easiest toodo is toobuild one LUN with hello help of a software RAID.</span></span> <span data-ttu-id="2077d-334">這個 LUN 背後的多個磁碟的配額 hello 總和然後應該滿足 hello 已知 IOPS 速率。</span><span class="sxs-lookup"><span data-stu-id="2077d-334">hello sum of quotas of multiple disks behind this LUN should then fulfill hello known IOPS rate.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="2077d-336">Windows</span><span class="sxs-lookup"><span data-stu-id="2077d-336">Windows</span></span>
> 
> <span data-ttu-id="2077d-337">如果您在 Windows Server 2012 或更高版本上執行，則建議使用 Windows 儲存體空間。</span><span class="sxs-lookup"><span data-stu-id="2077d-337">We recommend using Windows Storage Spaces if you run on Windows Server 2012 or higher.</span></span> <span data-ttu-id="2077d-338">它比舊版 Windows 的 Windows 等量更有效率。</span><span class="sxs-lookup"><span data-stu-id="2077d-338">It is more efficient than Windows Striping of earlier Windows versions.</span></span> <span data-ttu-id="2077d-339">您可能需要 toocreate hello Windows 儲存集區和儲存空間的 PowerShell 命令時使用 Windows Server 2012 做為作業系統。</span><span class="sxs-lookup"><span data-stu-id="2077d-339">You might need toocreate hello Windows Storage Pools and Storage Spaces by PowerShell commands when using Windows Server 2012 as Operating System.</span></span> <span data-ttu-id="2077d-340">hello PowerShell 命令可以在這裡找到<https://technet.microsoft.com/library/jj851254.aspx></span><span class="sxs-lookup"><span data-stu-id="2077d-340">hello PowerShell commands can be found here <https://technet.microsoft.com/library/jj851254.aspx></span></span>
> 
> ![Linux][Logo_Linux] <span data-ttu-id="2077d-342">Linux</span><span class="sxs-lookup"><span data-stu-id="2077d-342">Linux</span></span>
> 
> <span data-ttu-id="2077d-343">只有 MDADM 和 LVM （邏輯磁碟區管理員） 是支援的 toobuild RAID Linux 上的軟體。</span><span class="sxs-lookup"><span data-stu-id="2077d-343">Only MDADM and LVM (Logical Volume Manager) are supported toobuild a software RAID on Linux.</span></span> <span data-ttu-id="2077d-344">如需詳細資訊，請閱讀下列文件的 hello:</span><span class="sxs-lookup"><span data-stu-id="2077d-344">For more information, read hello following articles:</span></span>
> 
> * <span data-ttu-id="2077d-345">[在 Linux 上設定軟體 RAID][virtual-machines-linux-configure-raid] (適用於 MDADM)</span><span class="sxs-lookup"><span data-stu-id="2077d-345">[Configure Software RAID on Linux][virtual-machines-linux-configure-raid] (for MDADM)</span></span>
> * <span data-ttu-id="2077d-346">[在 Azure 中的 Linux VM 上設定 LVM][virtual-machines-linux-configure-lvm]</span><span class="sxs-lookup"><span data-stu-id="2077d-346">[Configure LVM on a Linux VM in Azure][virtual-machines-linux-configure-lvm]</span></span>
> 
> 

- - -
<span data-ttu-id="2077d-347">是運用 VM 系列，這通常是無法 toowork 與 Azure 高階儲存體的考量：</span><span class="sxs-lookup"><span data-stu-id="2077d-347">Considerations for leveraging VM-series, which are able toowork with Azure Premium Storage usually are:</span></span>

* <span data-ttu-id="2077d-348">要求 I/O 延遲關閉 toowhat SAN/NAS 裝置傳送。</span><span class="sxs-lookup"><span data-stu-id="2077d-348">Demands for I/O latencies that are close toowhat SAN/NAS devices deliver.</span></span>
* <span data-ttu-id="2077d-349">比 Azure 標準儲存體可傳遞的 I/O 延遲更好的因素需求。</span><span class="sxs-lookup"><span data-stu-id="2077d-349">Demand for factors better I/O latency than Azure Standard Storage can deliver.</span></span>
* <span data-ttu-id="2077d-350">對於可根據特定 VM 類型使用多個標準儲存體磁碟來達成的每個 VM 提供更高的 IOPS。</span><span class="sxs-lookup"><span data-stu-id="2077d-350">Higher IOPS per VM than what could be achieved with multiple Standard Storage disks against a certain VM type.</span></span>

<span data-ttu-id="2077d-351">因為 hello 基礎 Azure 儲存體複寫每個磁碟 tooat 至少三個儲存體節點簡單的 RAID 0 等量配置可用。</span><span class="sxs-lookup"><span data-stu-id="2077d-351">Since hello underlying Azure Storage replicates each disk tooat least three storage nodes, simple RAID 0 striping can be used.</span></span> <span data-ttu-id="2077d-352">沒有任何需要 tooimplement RAID5 或 RAID1。</span><span class="sxs-lookup"><span data-stu-id="2077d-352">There is no need tooimplement RAID5 or RAID1.</span></span>

### <span data-ttu-id="2077d-353"><a name="10b041ef-c177-498a-93ed-44b3441ab152"></a>Microsoft Azure 儲存體</span><span class="sxs-lookup"><span data-stu-id="2077d-353"><a name="10b041ef-c177-498a-93ed-44b3441ab152"></a>Microsoft Azure Storage</span></span>
<span data-ttu-id="2077d-354">Microsoft Azure 儲存體儲存區 hello 基底 VM （含 OS) 和磁碟或 Blob tooat 至少三個不同儲存體節點。</span><span class="sxs-lookup"><span data-stu-id="2077d-354">Microsoft Azure Storage stores hello base VM (with OS) and disks or BLOBs tooat least three separate storage nodes.</span></span> <span data-ttu-id="2077d-355">建立儲存體帳戶或受管理磁碟時，有一個保護選項，如下所示：</span><span class="sxs-lookup"><span data-stu-id="2077d-355">When creating a storage account or managed disk, there is a choice of protection as shown here:</span></span>

![針對 Azure 儲存體帳戶啟用異地複寫][dbms-guide-figure-100]

<span data-ttu-id="2077d-357">Azure 儲存體本機複寫 （本機備援） 可提供少數客戶可以放心 toodeploy tooinfrastructure 失敗原因會遺失資料的保護層級。</span><span class="sxs-lookup"><span data-stu-id="2077d-357">Azure Storage Local Replication (Locally Redundant) provides levels of protection against data loss due tooinfrastructure failure that few customers could afford toodeploy.</span></span> <span data-ttu-id="2077d-358">如上所示搭配第五個的其中一個 hello 變化前三個有四個不同的選項。</span><span class="sxs-lookup"><span data-stu-id="2077d-358">As shown above there are four different options with a fifth being a variation of one of hello first three.</span></span> <span data-ttu-id="2077d-359">仔細查看我們區分它們的方式︰</span><span class="sxs-lookup"><span data-stu-id="2077d-359">Looking closer at them we can distinguish:</span></span>

* <span data-ttu-id="2077d-360">**進階本地備援儲存體 (LRS)**：針對執行需要大量 I/O 之工作負載的虛擬機器，「Azure 進階儲存體」提供高效能、低延遲的磁碟支援。</span><span class="sxs-lookup"><span data-stu-id="2077d-360">**Premium Locally Redundant Storage (LRS)**: Azure Premium Storage delivers high-performance, low-latency disk support for virtual machines running I/O-intensive workloads.</span></span> <span data-ttu-id="2077d-361">有三個複本的 hello hello 資料相同的 Azure 地區的 Azure 資料中心。</span><span class="sxs-lookup"><span data-stu-id="2077d-361">There are three replicas of hello data within hello same Azure datacenter of an Azure region.</span></span> <span data-ttu-id="2077d-362">hello 複本位於不同的容錯和升級網域 (如概念，請參閱[這][ planning-guide-3.2]章節 hello[規劃指南 》][planning-guide])。</span><span class="sxs-lookup"><span data-stu-id="2077d-362">hello copies are in different Fault and Upgrade Domains (for concepts see [this][planning-guide-3.2] chapter in hello [Planning Guide][planning-guide]).</span></span> <span data-ttu-id="2077d-363">發生或從到期 tooa 存放裝置節點失敗或磁碟失敗的服務傳送的 hello 資料的複本，會自動產生新的複本。</span><span class="sxs-lookup"><span data-stu-id="2077d-363">In case of a replica of hello data going out of service due tooa storage node failure or disk failure, a new replica is generated automatically.</span></span>
* <span data-ttu-id="2077d-364">**本機備援儲存體 (LRS)**： 在此情況下，有三個複本的 hello hello 資料相同的 Azure 地區的 Azure 資料中心。</span><span class="sxs-lookup"><span data-stu-id="2077d-364">**Locally Redundant Storage (LRS)**: In this case, there are three replicas of hello data within hello same Azure datacenter of an Azure region.</span></span> <span data-ttu-id="2077d-365">hello 複本位於不同的容錯和升級網域 (如概念，請參閱[這][ planning-guide-3.2]章節 hello[規劃指南 》][planning-guide])。</span><span class="sxs-lookup"><span data-stu-id="2077d-365">hello copies are in different Fault and Upgrade Domains (for concepts see [this][planning-guide-3.2] chapter in hello [Planning Guide][planning-guide]).</span></span> <span data-ttu-id="2077d-366">發生或從到期 tooa 存放裝置節點失敗或磁碟失敗的服務傳送的 hello 資料的複本，會自動產生新的複本。</span><span class="sxs-lookup"><span data-stu-id="2077d-366">In case of a replica of hello data going out of service due tooa storage node failure or disk failure, a new replica is generated automatically.</span></span> 
* <span data-ttu-id="2077d-367">**地理備援儲存體 (GRS)**： 在此情況下，沒有摘要其他三個非同步複寫在另一個 Azure 區域中，這是大部分 hello 中的案例中的 hello 資料的複本 hello 相同的地理區域 （例如北歐和美國西部歐洲）。</span><span class="sxs-lookup"><span data-stu-id="2077d-367">**Geo Redundant Storage (GRS)**: In this case, there is an asynchronous replication that feeds an additional three replicas of hello data in another Azure Region, which is in most of hello cases in hello same geographical region (like North Europe and West Europe).</span></span> <span data-ttu-id="2077d-368">這會產生 3 個額外的複本，因此總共有 6 個複本。</span><span class="sxs-lookup"><span data-stu-id="2077d-368">This results in three additional replicas, so that there are six replicas in sum.</span></span> <span data-ttu-id="2077d-369">這一種是 「 hello 地理複寫的 Azure 區域中的 hello 資料，用於讀取 （讀取權限的地理備援） 的用途。</span><span class="sxs-lookup"><span data-stu-id="2077d-369">A variation of this is an addition where hello data in hello geo replicated Azure region can be used for read purposes (Read-Access Geo-Redundant).</span></span>
* <span data-ttu-id="2077d-370">**區域備援儲存體 (ZRS)**： 在此情況下，hello 三個複本的資料保留在 hello hello 相同 Azure 區域。</span><span class="sxs-lookup"><span data-stu-id="2077d-370">**Zone Redundant Storage (ZRS)**: In this case, hello three replicas of hello data remain in hello same Azure Region.</span></span> <span data-ttu-id="2077d-371">中所述[這][ planning-guide-3.1] hello 一章[規劃指南 》] [ planning-guide] Azure 地區可以非常接近的數字的資料中心。</span><span class="sxs-lookup"><span data-stu-id="2077d-371">As explained in [this][planning-guide-3.1] chapter of hello [Planning Guide][planning-guide] an Azure region can be a number of datacenters in close proximity.</span></span> <span data-ttu-id="2077d-372">LRS hello 案例 hello 複本會分散 hello 不同的資料中心，讓一個 Azure 區域。</span><span class="sxs-lookup"><span data-stu-id="2077d-372">In hello case of LRS hello replicas would be distributed over hello different datacenters that make one Azure region.</span></span>

<span data-ttu-id="2077d-373">如需詳細資訊，請參閱[這裡][storage-redundancy]。</span><span class="sxs-lookup"><span data-stu-id="2077d-373">More information can be found [here][storage-redundancy].</span></span>

> [!NOTE]
> <span data-ttu-id="2077d-374">不建議的 DBMS 部署 hello 的地理備援儲存體的使用方式</span><span class="sxs-lookup"><span data-stu-id="2077d-374">For DBMS deployments, hello usage of Geo Redundant Storage is not recommended</span></span>
> 
> <span data-ttu-id="2077d-375">Azure 儲存體異地複寫是非同步的。</span><span class="sxs-lookup"><span data-stu-id="2077d-375">Azure Storage Geo-Replication is asynchronous.</span></span> <span data-ttu-id="2077d-376">單一 VM 未同步處理在鎖定步驟中的個別磁碟掛接 tooa 複寫。</span><span class="sxs-lookup"><span data-stu-id="2077d-376">Replication of individual disks mounted tooa single VM are not synchronized in lock step.</span></span> <span data-ttu-id="2077d-377">因此，它不是適合 tooreplicate DBMS 檔案分散在不同的磁碟上或針對多個磁碟為基礎的 RAID 軟體部署。</span><span class="sxs-lookup"><span data-stu-id="2077d-377">Therefore, it is not suitable tooreplicate DBMS files that are distributed over different disks or deployed against a software RAID based on multiple disks.</span></span> <span data-ttu-id="2077d-378">DBMS 軟體需要 hello 永續性磁碟儲存體精確地同步處理跨不同的 Lun 和基礎磁碟/主軸。</span><span class="sxs-lookup"><span data-stu-id="2077d-378">DBMS software requires that hello persistent disk storage is precisely synchronized across different LUNs and underlying disks/spindles.</span></span> <span data-ttu-id="2077d-379">DBMS 軟體使用各種機制 toosequence IO 寫入活動和 DBMS 報告 hello 磁碟儲存體的 hello 複寫目標已損毀，如果這些因甚至幾毫秒。</span><span class="sxs-lookup"><span data-stu-id="2077d-379">DBMS software uses various mechanisms toosequence IO write activities and a DBMS reports that hello disk storage targeted by hello replication is corrupted if these vary even by a few milliseconds.</span></span> <span data-ttu-id="2077d-380">因此如果您真的想與對資料庫延展到多個磁碟進行地理複寫資料庫組態，這類複寫需要 toobe 執行使用資料庫方法和功能。</span><span class="sxs-lookup"><span data-stu-id="2077d-380">Hence if one really wants a database configuration with a database stretched across multiple disks geo-replicated, such a replication needs toobe performed with database means and functionality.</span></span> <span data-ttu-id="2077d-381">其中一個不應依賴 Azure 儲存體地理複寫 tooperform 這項作業。</span><span class="sxs-lookup"><span data-stu-id="2077d-381">One should not rely on Azure Storage Geo-Replication tooperform this job.</span></span> 
> 
> <span data-ttu-id="2077d-382">hello 問題是使用範例系統最簡單的 tooexplain。</span><span class="sxs-lookup"><span data-stu-id="2077d-382">hello problem is simplest tooexplain with an example system.</span></span> <span data-ttu-id="2077d-383">例如，假設您已上傳到 Azure，具有八個包含的 hello DBMS 資料檔案的磁碟以及一個含有 hello 交易記錄檔的磁碟將 SAP 系統。</span><span class="sxs-lookup"><span data-stu-id="2077d-383">Let’s assume you have an SAP system uploaded into Azure, which has eight disks containing data files of hello DBMS plus one disk containing hello transaction log file.</span></span> <span data-ttu-id="2077d-384">每個這些九個磁碟具有是否 hello 資料寫入 toohello 資料或交易記錄檔，以一致的方式根據 toohello DBMS，撰寫 toothem 的資料。</span><span class="sxs-lookup"><span data-stu-id="2077d-384">Each one of these nine disks have data written toothem in a consistent method according toohello DBMS, whether hello data is being written toohello data or transaction log files.</span></span>
> 
> <span data-ttu-id="2077d-385">順序 tooproperly 地理複寫 hello 資料及維護一致的資料庫映像、 hello 內容所有九個磁碟的可能會 toobe 地理區域複寫 hello 順序 hello I/O 作業已執行過針對 hello 九個不同的磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-385">In order tooproperly geo-replicate hello data and maintain a consistent database image, hello content of all nine disks would have toobe geo-replicated in hello exact order hello I/O operations were executed against hello nine different disks.</span></span> <span data-ttu-id="2077d-386">不過，Azure 儲存體地理複寫不允許 toodeclare 磁碟之間的相依性。</span><span class="sxs-lookup"><span data-stu-id="2077d-386">However, Azure Storage geo-replication does not allow toodeclare dependencies between disks.</span></span> <span data-ttu-id="2077d-387">這表示這些九種不同的磁碟中的 hello 內容是其他相關的 tooeach 和 hello 資料變更時，都是一致只複寫在 hello 順序 hello I/O 操作中的 hello 事實不知道 Microsoft Azure 儲存體地理複寫發生在所有 hello 九個磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-387">This means Microsoft Azure Storage geo-replication doesn’t know about hello fact that hello contents in these nine different disks are related tooeach other and that hello data changes are consistent only when replicating in hello order hello I/O operations happened across all hello nine disks.</span></span>
> 
> <span data-ttu-id="2077d-388">除了過高，在 hello 案例中的 hello 進行地理複寫映像不會提供一致的資料庫映像，也沒有可造成嚴重的地理備援儲存體和一同顯示對效能帶來負面影響的機會會影響效能。</span><span class="sxs-lookup"><span data-stu-id="2077d-388">Besides chances being high that hello geo-replicated images in hello scenario do not provide a consistent database image, there also is a performance penalty that shows up with geo redundant storage that can severely impact performance.</span></span> <span data-ttu-id="2077d-389">總之，請勿針對 DBMS 類型的工作負載使用這個類型的儲存體備援。</span><span class="sxs-lookup"><span data-stu-id="2077d-389">In summary, do not use this type of storage redundancy for DBMS type workloads.</span></span>
> 
> 

#### <a name="mapping-vhds-into-azure-virtual-machine-service-storage-accounts"></a><span data-ttu-id="2077d-390">將 VHD 對應至 Azure 虛擬機器服務儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="2077d-390">Mapping VHDs into Azure Virtual Machine Service Storage Accounts</span></span>
<span data-ttu-id="2077d-391">此章節只適用於 tooAzure 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="2077d-391">This chapter only applies tooAzure Storage Accounts.</span></span> <span data-ttu-id="2077d-392">如果您計劃 toouse 管理磁碟，在本章節所述的 hello 限制都不適用。</span><span class="sxs-lookup"><span data-stu-id="2077d-392">If you plan toouse Managed Disks, hello limitations mentioned in this chapter do not apply.</span></span> <span data-ttu-id="2077d-393">如需受控磁碟的詳細資訊，請參閱本指南的[受控磁碟][dbms-guide-managed-disks]章節。</span><span class="sxs-lookup"><span data-stu-id="2077d-393">For more information about Managed Disks, read chapter [Managed Disks][dbms-guide-managed-disks] of this guide.</span></span>

<span data-ttu-id="2077d-394">Azure 儲存體帳戶不只是一個系統管理的建構，而且還是限制的緣由。</span><span class="sxs-lookup"><span data-stu-id="2077d-394">An Azure Storage Account is not only an administrative construct, but also a subject of limitations.</span></span> <span data-ttu-id="2077d-395">而 hello 限制會隨著談論 Azure 標準儲存體帳戶或 Azure 高階儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="2077d-395">Whereas hello limitations vary on whether we talk about an Azure Standard Storage Account or an Azure Premium Storage Account.</span></span> <span data-ttu-id="2077d-396">列出 hello 確切功能和限制[這裡][storage-scalability-targets]</span><span class="sxs-lookup"><span data-stu-id="2077d-396">hello exact capabilities and limitations are listed [here][storage-scalability-targets]</span></span>

<span data-ttu-id="2077d-397">因此您很重要的 toonote Azure 標準儲存體上每個儲存體帳戶的 IOPS hello 沒有限制 (中的資料列包含 '總要求率' [hello 文章][storage-scalability-targets])。</span><span class="sxs-lookup"><span data-stu-id="2077d-397">So for Azure Standard Storage it is important toonote there is a limit on hello IOPS per storage account (Row containing ‘Total Request Rate’ in [hello article][storage-scalability-targets]).</span></span> <span data-ttu-id="2077d-398">此外，每個 Azure 訂用帳戶的「儲存體帳戶」初始限制為 100 個 (自 2015 年 7 月起)。</span><span class="sxs-lookup"><span data-stu-id="2077d-398">In addition, there is an initial limit of 100 Storage Accounts per Azure subscription (as of July 2015).</span></span> <span data-ttu-id="2077d-399">因此，建議您使用多個儲存體帳戶時使用 Azure 標準儲存體之間 toobalance IOPS 的 Vm。</span><span class="sxs-lookup"><span data-stu-id="2077d-399">Therefore, it is recommended toobalance IOPS of VMs between multiple storage accounts when using Azure Standard Storage.</span></span> <span data-ttu-id="2077d-400">另一方面，單一 VM 最好盡可能使用一個儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="2077d-400">Whereas a single VM ideally uses one storage account if possible.</span></span> <span data-ttu-id="2077d-401">因此，如果我們談到 DBMS 部署，其中每個裝載於 Azure 標準儲存體的 VHD 會到達其配額限制時，您應該只針對每個使用 Azure 標準儲存體的 Azure 儲存體帳戶部署 30-40 個 VHD。</span><span class="sxs-lookup"><span data-stu-id="2077d-401">So if we talk about DBMS deployments where each VHD that is hosted on Azure Standard Storage could reach its quota limit, you should only deploy 30-40 VHDs per Azure Storage Account that uses Azure Standard Storage.</span></span> <span data-ttu-id="2077d-402">上 hello 另一方面，如果您利用 Azure 高階儲存體，並想 toostore 大型資料庫的磁碟區，您可能會根據 IOPS 來沒問題。</span><span class="sxs-lookup"><span data-stu-id="2077d-402">On hello other hand, if you leverage Azure Premium Storage and want toostore large database volumes, you might be fine in terms of IOPS.</span></span> <span data-ttu-id="2077d-403">但是，Azure 進階儲存體帳戶在資料磁碟區方面會比 Azure 標準儲存體帳戶更嚴格。</span><span class="sxs-lookup"><span data-stu-id="2077d-403">But an Azure Premium Storage Account is way more restrictive in data volume than an Azure Standard Storage Account.</span></span> <span data-ttu-id="2077d-404">如此一來，您只可以部署有限的數目的 Azure 高階儲存體帳戶內的 Vhd 才按下 hello 資料磁碟區限制。</span><span class="sxs-lookup"><span data-stu-id="2077d-404">As a result, you can only deploy a limited number of VHDs within an Azure Premium Storage Account before hitting hello data volume limit.</span></span> <span data-ttu-id="2077d-405">Hello 結尾視為 Azure 儲存體帳戶的功能在 IOPS 及/或容量有限 「 虛擬 SAN 」。</span><span class="sxs-lookup"><span data-stu-id="2077d-405">At hello end, think of an Azure Storage Account as a “Virtual SAN” that has limited capabilities in IOPS and/or capacity.</span></span> <span data-ttu-id="2077d-406">如此一來，hello 工作仍會留，如同內部部署，透過 hello 不同 「 虛構 SAN 裝置' hello 不同 SAP 系統的 Vhd 或 Azure 儲存體帳戶的 hello toodefine hello 版面配置。</span><span class="sxs-lookup"><span data-stu-id="2077d-406">As a result, hello task remains, as in on-premises deployments, toodefine hello layout of hello VHDs of hello different SAP systems over hello different ‘imaginary SAN devices’ or Azure Storage Accounts.</span></span>

<span data-ttu-id="2077d-407">Azure 儲存體標準，建議您不要從不同的儲存體帳戶 tooa toopresent 儲存體盡可能單一 VM。</span><span class="sxs-lookup"><span data-stu-id="2077d-407">For Azure Standard Storage, it is not recommended toopresent storage from different storage accounts tooa single VM if possible.</span></span>

<span data-ttu-id="2077d-408">使用 hello DS 或 GS 系列的 Azure Vm 時，很可能 toomount Vhd 從 Azure 標準儲存體帳戶和 Premium 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="2077d-408">When using hello DS or GS-series of Azure VMs, it is possible toomount VHDs out of Azure Standard Storage Accounts and Premium Storage Accounts.</span></span> <span data-ttu-id="2077d-409">使用案例，例如 Vhd 和 DBMS 的資料寫入到標準儲存體的備份支援，而且在高階儲存體上的記錄檔會 toomind 無法運用這類異質儲存區的位置。</span><span class="sxs-lookup"><span data-stu-id="2077d-409">Use cases like writing backups into Standard Storage backed VHDs and having DBMS data and log files on Premium Storage come toomind where such heterogeneous storage could be leveraged.</span></span> 

<span data-ttu-id="2077d-410">根據客戶的部署及測試大約 30 too40 包含資料庫資料檔案和記錄檔的 Vhd 可以佈建單一 Azure 標準儲存體帳戶與可接受的效能。</span><span class="sxs-lookup"><span data-stu-id="2077d-410">Based on customer deployments and testing around 30 too40 VHDs containing database data files and log files can be provisioned on a single Azure Standard Storage Account with acceptable performance.</span></span> <span data-ttu-id="2077d-411">如先前所述，Azure 高階儲存體帳戶的 hello 限制是它能容納可能 toobe hello 資料容量和不 IOPS。</span><span class="sxs-lookup"><span data-stu-id="2077d-411">As mentioned earlier, hello limitation of an Azure Premium Storage Account is likely toobe hello data capacity it can hold and not IOPS.</span></span>

<span data-ttu-id="2077d-412">為透過 SAN 裝置在內部，共用所需的某些監視順序 tooeventually 中偵測到 Azure 儲存體帳戶上的瓶頸。</span><span class="sxs-lookup"><span data-stu-id="2077d-412">As with SAN devices on-premises, sharing requires some monitoring in order tooeventually detect bottlenecks on an Azure Storage Account.</span></span> <span data-ttu-id="2077d-413">hello Azure Monitoring Extension for SAP 和 hello Azure 入口網站是可使用的 toodetect 的工具忙碌未能提供最佳 IO 效能的 Azure 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="2077d-413">hello Azure Monitoring Extension for SAP and hello Azure portal are tools that can be used toodetect busy Azure Storage Accounts that may be delivering suboptimal IO performance.</span></span>  <span data-ttu-id="2077d-414">如果偵測到這種情況時，則建議 toomove 忙碌 Vm tooanother Azure 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="2077d-414">If this situation is detected, it is recommended toomove busy VMs tooanother Azure Storage Account.</span></span> <span data-ttu-id="2077d-415">請參閱 toohello[部署指南 》] [ deployment-guide]如如何 tooactivate hello SAP 主機監視功能的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="2077d-415">Refer toohello [Deployment Guide][deployment-guide] for details on how tooactivate hello SAP host monitoring capabilities.</span></span>

<span data-ttu-id="2077d-416">您可以在下列網址中，找到另一篇摘要說明「Azure 標準儲存體」和「Azure 標準儲存體帳戶」最佳做法的文章：<https://blogs.msdn.com/b/mast/archive/2014/10/14/configuring-azure-virtual-machines-for-optimal-storage-performance.aspx></span><span class="sxs-lookup"><span data-stu-id="2077d-416">Another article summarizing best practices around Azure Standard Storage and Azure Standard Storage Accounts can be found here <https://blogs.msdn.com/b/mast/archive/2014/10/14/configuring-azure-virtual-machines-for-optimal-storage-performance.aspx></span></span>

#### <span data-ttu-id="2077d-417"><a name="f42c6cb5-d563-484d-9667-b07ae51bce29"></a>受控磁碟</span><span class="sxs-lookup"><span data-stu-id="2077d-417"><a name="f42c6cb5-d563-484d-9667-b07ae51bce29"></a>Managed Disks</span></span>
<span data-ttu-id="2077d-418">受控磁碟是 Azure Resource Manager 的新資源類型，可用來取代儲存在 Azure 儲存體帳戶的 VHD。</span><span class="sxs-lookup"><span data-stu-id="2077d-418">Managed Disks are a new resource type in Azure Resource Manager that can be used instead of VHDs that are stored in Azure Storage Accounts.</span></span> <span data-ttu-id="2077d-419">受管理的磁碟自動對齊的 hello 可用性設定組的 hello 虛擬機器，它們是附加 tooand 因此增加 hello 可用性，您的虛擬機器與 hello 服務 hello 虛擬機器上執行。</span><span class="sxs-lookup"><span data-stu-id="2077d-419">Managed Disks automatically align with hello Availability Set of hello virtual machine they are attached tooand therefore increase hello availability of your virtual machine and hello services that are running on hello virtual machine.</span></span> <span data-ttu-id="2077d-420">toolearn 詳細資訊，讀取 hello[概觀文章](https://docs.microsoft.com/azure/storage/storage-managed-disks-overview)。</span><span class="sxs-lookup"><span data-stu-id="2077d-420">toolearn more, read hello [overview article](https://docs.microsoft.com/azure/storage/storage-managed-disks-overview).</span></span>

<span data-ttu-id="2077d-421">SAP 目前僅支援進階受控磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-421">SAP currently only supports Premium Managed Disks.</span></span> <span data-ttu-id="2077d-422">如需詳細資訊，請讀取 SAP 附註 [1928533]。</span><span class="sxs-lookup"><span data-stu-id="2077d-422">Read SAP Note [1928533] for more details.</span></span>

#### <a name="moving-deployed-dbms-vms-from-azure-standard-storage-tooazure-premium-storage"></a><span data-ttu-id="2077d-423">移動 Azure 標準儲存體 tooAzure 高階儲存體從部署 DBMS Vm</span><span class="sxs-lookup"><span data-stu-id="2077d-423">Moving deployed DBMS VMs from Azure Standard Storage tooAzure Premium Storage</span></span>
<span data-ttu-id="2077d-424">我們會遇到一段的案例中，您為客戶 toomove 從 Azure 標準儲存體 VM 已部署到 Azure 進階儲存體。</span><span class="sxs-lookup"><span data-stu-id="2077d-424">We encounter quite some scenarios where you as customer want toomove a deployed VM from Azure Standard Storage into Azure Premium Storage.</span></span> <span data-ttu-id="2077d-425">如果您的磁碟儲存在 Azure 儲存體帳戶，這不可能沒有實際移動 hello 資料。</span><span class="sxs-lookup"><span data-stu-id="2077d-425">If your disks are stored in Azure Storage Accounts, this is not possible without physically moving hello data.</span></span> <span data-ttu-id="2077d-426">有數種方式 tooachieve hello 目標：</span><span class="sxs-lookup"><span data-stu-id="2077d-426">There are several ways tooachieve hello goal:</span></span>

* <span data-ttu-id="2077d-427">您只需將所有的 VHD、基底 VHD 以及資料 VHD 複製到新的 Azure 進階儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="2077d-427">You could simply copy all VHDs, base VHD as well as data VHDs into a new Azure Premium Storage Account.</span></span> <span data-ttu-id="2077d-428">通常您已選擇 hello Vhd 數目在 Azure 標準儲存體不是因為您所需的 hello 資料磁碟區的 hello 事實。</span><span class="sxs-lookup"><span data-stu-id="2077d-428">Often you chose hello number of VHDs in Azure Standard Storage not because of hello fact that you needed hello data volume.</span></span> <span data-ttu-id="2077d-429">但您需要許多 Vhd，因為 hello IOPS。</span><span class="sxs-lookup"><span data-stu-id="2077d-429">But you needed that many VHDs because of hello IOPS.</span></span> <span data-ttu-id="2077d-430">既然您移動 tooAzure 高階儲存體，您無法搭配的方式較少的 Vhd tooachieve hello 相同的 IOPS 輸送量。</span><span class="sxs-lookup"><span data-stu-id="2077d-430">Now that you move tooAzure Premium Storage you could go with way fewer VHDs tooachieve hello same IOPS throughput.</span></span> <span data-ttu-id="2077d-431">指定您需支付 hello Azure 標準儲存體中使用的資料和非 hello 名義上的磁碟大小的 hello 事實，hello Vhd 數目未不真的很重要方面成本。</span><span class="sxs-lookup"><span data-stu-id="2077d-431">Given hello fact that in Azure Standard Storage you pay for hello used data and not hello nominal disk size, hello number of VHDs did not really matter in terms of costs.</span></span> <span data-ttu-id="2077d-432">不過，Azure 高階儲存體，您將支付 hello 名義上的磁碟大小。</span><span class="sxs-lookup"><span data-stu-id="2077d-432">However, with Azure Premium Storage, you would pay for hello nominal disk size.</span></span> <span data-ttu-id="2077d-433">因此，大部分的 hello 客戶嘗試 tookeep hello Azure Vhd 數目高階儲存體中 hello 數字所需的 tooachieve hello IOPS 輸送量必要。</span><span class="sxs-lookup"><span data-stu-id="2077d-433">Therefore, most of hello customers try tookeep hello number of Azure VHDs in Premium Storage at hello number needed tooachieve hello IOPS throughput necessary.</span></span> <span data-ttu-id="2077d-434">因此，大部分的客戶決定針對簡單 1:1 的 hello 方式複製。</span><span class="sxs-lookup"><span data-stu-id="2077d-434">So, most customers decide against hello way of a simple 1:1 copy.</span></span>
* <span data-ttu-id="2077d-435">如果尚未掛接，您要掛接單一 VHD，其中可包含 SAP 資料庫的資料庫備份。</span><span class="sxs-lookup"><span data-stu-id="2077d-435">If not yet mounted, you mount a single VHD that can contain a database backup of your SAP database.</span></span> <span data-ttu-id="2077d-436">Hello 備份後卸載所有 Vhd 包括 hello VHD 包含 hello 備份和複製 hello 基底 VHD 和 hello 與 hello 備份的 VHD 到 Azure 進階儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="2077d-436">After hello backup, you unmount all VHDs including hello VHD containing hello backup and copy hello base VHD and hello VHD with hello backup into an Azure Premium Storage account.</span></span> <span data-ttu-id="2077d-437">然後，您會部署的 hello hello 基底 VHD 和掛接 hello VHD hello 備份為基礎的 VM。</span><span class="sxs-lookup"><span data-stu-id="2077d-437">You would then deploy hello VM based on hello base VHD and mount hello VHD with hello backup.</span></span> <span data-ttu-id="2077d-438">現在您可以建立其他空高階儲存體磁碟 hello VM 所使用的 toorestore hello 資料庫。</span><span class="sxs-lookup"><span data-stu-id="2077d-438">Now you create additional empty Premium Storage Disks for hello VM that are used toorestore hello database into.</span></span> <span data-ttu-id="2077d-439">這是假設該 hello DBMS 可讓您 toochange 路徑 toohello 資料和記錄檔 hello 還原程序的一部分。</span><span class="sxs-lookup"><span data-stu-id="2077d-439">This assumes that hello DBMS allows you toochange paths toohello data and log files as part of hello restore process.</span></span>
* <span data-ttu-id="2077d-440">另一個可能性是一種 hello 先前程序，其中只需要將 hello 備份 VHD 複製到 Azure 進階儲存體，並將它附加對新部署和安裝的 VM。</span><span class="sxs-lookup"><span data-stu-id="2077d-440">Another possibility is a variation of hello former process, where you just copy hello backup VHD into Azure Premium Storage and attach it against a VM that you newly deployed and installed.</span></span>
* <span data-ttu-id="2077d-441">hello 第四個可能性您可以選擇當您需要資料庫的資料檔案的 toochange hello 數目。</span><span class="sxs-lookup"><span data-stu-id="2077d-441">hello fourth possibility you would choose when you are in need toochange hello number of data files of your database.</span></span> <span data-ttu-id="2077d-442">在這種情況下，您會使用匯出/匯入來執行 SAP 同質性系統複製。</span><span class="sxs-lookup"><span data-stu-id="2077d-442">In such a case, you would perform an SAP homogenous system copy using export/import.</span></span> <span data-ttu-id="2077d-443">放入與匯出到複製到 Azure 進階儲存體帳戶的 VHD 檔案，並將它附加 tooa VM，您會使用 toorun hello 匯入處理程序。</span><span class="sxs-lookup"><span data-stu-id="2077d-443">Put those export files into a VHD that is copied into an Azure Premium Storage Account and attach it tooa VM that you use toorun hello import processes.</span></span> <span data-ttu-id="2077d-444">客戶在主要是要 toodecrease hello 數目的資料檔案時，才使用這種可能性。</span><span class="sxs-lookup"><span data-stu-id="2077d-444">Customers use this possibility mainly when they want toodecrease hello number of data files.</span></span>

<span data-ttu-id="2077d-445">如果您使用受管理的磁碟，您可以移轉 tooPremium 儲存體的：</span><span class="sxs-lookup"><span data-stu-id="2077d-445">If you use Managed Disks, you can migrate tooPremium Storage by:</span></span>

1. <span data-ttu-id="2077d-446">取消配置 hello 虛擬機器</span><span class="sxs-lookup"><span data-stu-id="2077d-446">Deallocate hello virtual machine</span></span>
2. <span data-ttu-id="2077d-447">如有需要，調整大小 hello 支援進階儲存體 （例如 DS 或 GS） 的虛擬機器 tooa 大小</span><span class="sxs-lookup"><span data-stu-id="2077d-447">If necessary, resize hello virtual machine tooa size that supports Premium Storage (for example DS or GS)</span></span>
3. <span data-ttu-id="2077d-448">變更 hello 管理磁碟帳戶類型 tooPremium (SSD)</span><span class="sxs-lookup"><span data-stu-id="2077d-448">Change hello Managed Disk account type tooPremium (SSD)</span></span>
4. <span data-ttu-id="2077d-449">啟動虛擬機器</span><span class="sxs-lookup"><span data-stu-id="2077d-449">Start your virtual machine</span></span>

### <a name="deployment-of-vms-for-sap-in-azure"></a><span data-ttu-id="2077d-450">在 Azure 中部署適用於 SAP 的 VM</span><span class="sxs-lookup"><span data-stu-id="2077d-450">Deployment of VMs for SAP in Azure</span></span>
<span data-ttu-id="2077d-451">Microsoft Azure 提供的多種 toodeploy Vm 和相關聯的磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-451">Microsoft Azure offers multiple ways toodeploy VMs and associated disks.</span></span> <span data-ttu-id="2077d-452">因此它十分重要 toounderstand hello 差異 hello Vm 的準備工作可能會與不同部署的 hello 方式而定。</span><span class="sxs-lookup"><span data-stu-id="2077d-452">Thereby it is important toounderstand hello differences since preparations of hello VMs might differ dependent on hello way of deployment.</span></span> <span data-ttu-id="2077d-453">一般情況下，我們探討 hello hello 後面章節所述的案例。</span><span class="sxs-lookup"><span data-stu-id="2077d-453">In general, we look into hello scenarios described in hello following chapters.</span></span>

#### <a name="deploying-a-vm-from-hello-azure-marketplace"></a><span data-ttu-id="2077d-454">部署的 hello Azure Marketplace 中的 VM</span><span class="sxs-lookup"><span data-stu-id="2077d-454">Deploying a VM from hello Azure Marketplace</span></span>
<span data-ttu-id="2077d-455">您喜歡 tootake Microsoft 或協力廠商提供的映像 hello Azure Marketplace toodeploy 從您的 VM。</span><span class="sxs-lookup"><span data-stu-id="2077d-455">You like tootake a Microsoft or third party provided image from hello Azure Marketplace toodeploy your VM.</span></span> <span data-ttu-id="2077d-456">部署在 Azure VM 之後，請依照 hello 相同的指導方針和工具 tooinstall hello SAP 軟體，在 VM 內像您一樣在內部部署環境中。</span><span class="sxs-lookup"><span data-stu-id="2077d-456">After you deployed your VM in Azure, you follow hello same guidelines and tools tooinstall hello SAP software inside your VM as you would do in an on-premises environment.</span></span> <span data-ttu-id="2077d-457">安裝 Azure VM hello hello SAP 軟體，SAP 和 Microsoft 建議您上傳並 hello SAP 安裝媒體以磁碟或儲存 toocreate Azure VM 以 「 檔案伺服器 」，其中包含所有 hello 所需的 SAP 安裝媒體。</span><span class="sxs-lookup"><span data-stu-id="2077d-457">For installing hello SAP software inside hello Azure VM, SAP and Microsoft recommend uploading and store hello SAP installation media in disks or toocreate an Azure VM working as a 'File server', which contains all hello necessary SAP installation media.</span></span>

#### <a name="deploying-a-vm-with-a-customer-specific-generalized-image"></a><span data-ttu-id="2077d-458">使用客戶特定的一般化映像部署 VM</span><span class="sxs-lookup"><span data-stu-id="2077d-458">Deploying a VM with a customer-specific generalized image</span></span>
<span data-ttu-id="2077d-459">有關您的 OS 或 DBMS 版本 toospecific 修補程式需求，因為提供的 hello hello Azure Marketplace 中的映像可能不適合您的需求。</span><span class="sxs-lookup"><span data-stu-id="2077d-459">Due toospecific patch requirements regarding your OS or DBMS version, hello provided images in hello Azure Marketplace might not fit your needs.</span></span> <span data-ttu-id="2077d-460">因此，您可能需要 toocreate 使用您自己 'private' OS/DBMS VM 映像，之後數次可部署的 VM。</span><span class="sxs-lookup"><span data-stu-id="2077d-460">Therefore, you might need toocreate a VM using your own 'private' OS/DBMS VM image, which can be deployed several times afterwards.</span></span> <span data-ttu-id="2077d-461">tooprepare 這類的 'private' 映像進行複製，在 hello 一般化作業系統的 hello 內部部署 VM。</span><span class="sxs-lookup"><span data-stu-id="2077d-461">tooprepare such a 'private' image for duplication, hello OS must be generalized on hello on-premises VM.</span></span> <span data-ttu-id="2077d-462">請參閱 toohello[部署指南 》] [ deployment-guide]的詳細資料 toogeneralize VM。</span><span class="sxs-lookup"><span data-stu-id="2077d-462">Refer toohello [Deployment Guide][deployment-guide] for details on how toogeneralize a VM.</span></span>

<span data-ttu-id="2077d-463">如果您已在內部部署 VM （特別是 2 層系統） 中安裝 SAP 內容，hello 部署的 hello Azure VM 透過 hello 執行個體重新命名程序支援 hello SAP 軟體佈建之後，您可以調整 hello SAP 系統設定管理員 (SAP 附註[1619720])。</span><span class="sxs-lookup"><span data-stu-id="2077d-463">If you have already installed SAP content in your on-premises VM (especially for 2-Tier systems), you can adapt hello SAP system settings after hello deployment of hello Azure VM through hello instance rename procedure supported by hello SAP Software Provisioning Manager (SAP Note [1619720]).</span></span> <span data-ttu-id="2077d-464">否則，您可以 hello 部署的 hello Azure VM 之後再安裝 hello SAP 軟體。</span><span class="sxs-lookup"><span data-stu-id="2077d-464">Otherwise you can install hello SAP software later after hello deployment of hello Azure VM.</span></span>

<span data-ttu-id="2077d-465">為準，hello hello SAP 應用程式所使用的資料庫內容，您可以產生 hello 內容全新由 SAP 安裝或使用包含 DBMS 資料庫備份的 VHD，或運用 hello DBMS toodirectly 的功能，您可以會匯入您的內容至 Azure備份至 Microsoft Azure 儲存體。</span><span class="sxs-lookup"><span data-stu-id="2077d-465">As of hello database content used by hello SAP application, you can either generate hello content freshly by an SAP installation or you can import your content into Azure by using a VHD with a DBMS database backup or by leveraging capabilities of hello DBMS toodirectly backup into Microsoft Azure Storage.</span></span> <span data-ttu-id="2077d-466">在此情況下，可以也準備 Vhd，以 hello DBMS 資料和記錄檔案內部，然後將磁碟以匯入至 Azure。</span><span class="sxs-lookup"><span data-stu-id="2077d-466">In this case, you could also prepare VHDs with hello DBMS data and log files on-premises and then import those as Disks into Azure.</span></span> <span data-ttu-id="2077d-467">但 hello DBMS 資料傳輸，從內部部署 tooAzure 載入運作需要 toobe 準備內部部署的 VHD 磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-467">But hello transfer of DBMS data, which is getting loaded from on-premises tooAzure would work over VHD disks that need toobe prepared on-premises.</span></span>

#### <a name="moving-a-vm-from-on-premises-tooazure-with-a-non-generalized-disk"></a><span data-ttu-id="2077d-468">將 VM 從內部部署 tooAzure 使用非一般化磁碟</span><span class="sxs-lookup"><span data-stu-id="2077d-468">Moving a VM from on-premises tooAzure with a non-generalized disk</span></span>
<span data-ttu-id="2077d-469">您計劃 toomove 特定 SAP 系統從內部部署 tooAzure （「 增益 」 和 「 shift 」）。</span><span class="sxs-lookup"><span data-stu-id="2077d-469">You plan toomove a specific SAP system from on-premises tooAzure (lift and shift).</span></span> <span data-ttu-id="2077d-470">這可藉由來上傳包含 hello OS、 hello SAP 二進位檔和最終 DBMS 二進位檔的 hello 磁碟加上 hello 磁碟 hello 資料和記錄檔的 hello DBMS tooAzure。</span><span class="sxs-lookup"><span data-stu-id="2077d-470">This can be done by uploading hello disk, which contains hello OS, hello SAP binaries, and eventual DBMS binaries plus hello disks with hello data and log files of hello DBMS tooAzure.</span></span> <span data-ttu-id="2077d-471">相反 tooscenario #2 以上，則讓 hello 主機名稱、 SAP SID 和 SAP 使用者帳戶在 hello Azure VM 中為 hello 在內部部署環境中設定。</span><span class="sxs-lookup"><span data-stu-id="2077d-471">In opposite tooscenario #2 above, you keep hello hostname, SAP SID, and SAP user accounts in hello Azure VM as they were configured in hello on-premises environment.</span></span> <span data-ttu-id="2077d-472">因此，將一般化 hello 映像不需要。</span><span class="sxs-lookup"><span data-stu-id="2077d-472">Therefore, generalizing hello image is not necessary.</span></span> <span data-ttu-id="2077d-473">此案例主要適用於 hello SAP 環境的一部分執行的內部部署和組件在 Azure 的跨內部部署案例。</span><span class="sxs-lookup"><span data-stu-id="2077d-473">This case mostly applies for Cross-Premises scenarios where a part of hello SAP landscape is run on-premises and parts on Azure.</span></span>

## <span data-ttu-id="2077d-474"><a name="871dfc27-e509-4222-9370-ab1de77021c3"></a>Azure VM 的相關高可用性和災害復原</span><span class="sxs-lookup"><span data-stu-id="2077d-474"><a name="871dfc27-e509-4222-9370-ab1de77021c3"></a>High Availability and Disaster Recovery with Azure VMs</span></span>
<span data-ttu-id="2077d-475">Azure 提供下列高可用性 (HA) 和災害復原 (DR) 功能，適用於 toodifferent 元件，我們會使用適用於 SAP 和 DBMS 部署的 hello</span><span class="sxs-lookup"><span data-stu-id="2077d-475">Azure offers hello following High Availability (HA) and Disaster Recovery (DR) functionalities, which apply toodifferent components we would use for SAP and DBMS deployments</span></span>

### <a name="vms-deployed-on-azure-nodes"></a><span data-ttu-id="2077d-476">部署於 Azure 節點上的 VM</span><span class="sxs-lookup"><span data-stu-id="2077d-476">VMs deployed on Azure Nodes</span></span>
<span data-ttu-id="2077d-477">hello Azure 平台不提供功能，例如即時移轉的已部署的 Vm。</span><span class="sxs-lookup"><span data-stu-id="2077d-477">hello Azure Platform does not offer features such as Live Migration for deployed VMs.</span></span> <span data-ttu-id="2077d-478">這表示如果在部署 VM 的伺服器叢集上沒有維護所需，hello VM 需要 tooget 停止並重新啟動。</span><span class="sxs-lookup"><span data-stu-id="2077d-478">This means if there is maintenance necessary on a server cluster on which a VM is deployed, hello VM needs tooget stopped and restarted.</span></span> <span data-ttu-id="2077d-479">Azure 中的維護作業是在伺服器叢集內使用升級網域來執行。</span><span class="sxs-lookup"><span data-stu-id="2077d-479">Maintenance in Azure is performed using so called Upgrade Domains within clusters of servers.</span></span> <span data-ttu-id="2077d-480">一次只會維護一個升級網域。</span><span class="sxs-lookup"><span data-stu-id="2077d-480">Only one Upgrade Domain at a time is being maintained.</span></span> <span data-ttu-id="2077d-481">在這類啟動期間的 hello 關閉 VM 中的服務中斷的情況、 維護會執行並重新啟動 VM。</span><span class="sxs-lookup"><span data-stu-id="2077d-481">During such a restart, there is an interruption of service while hello VM is shut down, maintenance is performed and VM restarted.</span></span> <span data-ttu-id="2077d-482">大部分 DBMS 廠商都不過提供 hello 主要節點無法使用時，快速地重新啟動另一個節點上的 hello DBMS 服務的高可用性和災害復原功能。</span><span class="sxs-lookup"><span data-stu-id="2077d-482">Most DBMS vendors however provide High Availability and Disaster Recovery functionality that quickly restarts hello DBMS services on another node if hello primary node is unavailable.</span></span> <span data-ttu-id="2077d-483">hello Azure 平台提供了功能 toodistribute Vm、 儲存及其他 Azure 服務規劃維護或基礎結構失敗的升級網域 tooensure 跨只會影響 Vm 或服務的小型子集。</span><span class="sxs-lookup"><span data-stu-id="2077d-483">hello Azure Platform offers functionality toodistribute VMs, Storage, and other Azure services across Upgrade Domains tooensure that planned maintenance or infrastructure failures would only impact a small subset of VMs or services.</span></span>  <span data-ttu-id="2077d-484">仔細規劃，很可能 tooachieve 可用性層級比較 tooon 內部部署基礎結構。</span><span class="sxs-lookup"><span data-stu-id="2077d-484">With careful planning, it is possible tooachieve availability levels comparable tooon-premises infrastructures.</span></span>

<span data-ttu-id="2077d-485">Microsoft Azure 可用性設定組是 Vm 的邏輯群組或服務，可確保 Vm 和其他服務是分散式的 toodifferent 容錯和升級網域，並在叢集內，只能有一個節點關閉任何一處 （讀取的時間[此 (Linux)] [ virtual-machines-manage-availability-linux]或[此 (Windows)] [ virtual-machines-manage-availability-windows]文件以取得更多詳細資料)。</span><span class="sxs-lookup"><span data-stu-id="2077d-485">Microsoft Azure Availability Sets are a logical grouping of VMs or Services that ensures VMs and other services are distributed toodifferent Fault and Upgrade Domains within a cluster such that there would only be one node shutdown at any one point in time (read [this (Linux)][virtual-machines-manage-availability-linux] or [this (Windows)][virtual-machines-manage-availability-windows] article for more details).</span></span>

<span data-ttu-id="2077d-486">它需要 toobe 推出如下所示的 Vm 時設定的用途：</span><span class="sxs-lookup"><span data-stu-id="2077d-486">It needs toobe configured by purpose when rolling out VMs as seen here:</span></span>

![適用於 DBMS HA 組態的可用性設定組定義][dbms-guide-figure-200]

<span data-ttu-id="2077d-488">如果我們想 toocreate 的 DBMS 部署 （的 hello 個別 DBMS HA 功能使用獨立） 的高可用性組態，hello DBMS Vm 需要：</span><span class="sxs-lookup"><span data-stu-id="2077d-488">If we want toocreate highly available configurations of DBMS deployments (independent of hello individual DBMS HA functionality used), hello DBMS VMs would need to:</span></span>

* <span data-ttu-id="2077d-489">新增 hello Vm toohello 相同 Azure 虛擬網路 (<https://azure.microsoft.com/documentation/services/virtual-network/>)</span><span class="sxs-lookup"><span data-stu-id="2077d-489">Add hello VMs toohello same Azure Virtual Network (<https://azure.microsoft.com/documentation/services/virtual-network/>)</span></span>
* <span data-ttu-id="2077d-490">hello hello HA 組態的 Vm 也應該在 hello 相同子網路。</span><span class="sxs-lookup"><span data-stu-id="2077d-490">hello VMs of hello HA configuration should also be in hello same subnet.</span></span> <span data-ttu-id="2077d-491">Hello 不同子網路之間解析名稱不能在僅限雲端部署中，只有 IP 解析運作。</span><span class="sxs-lookup"><span data-stu-id="2077d-491">Name resolution between hello different subnets is not possible in Cloud-Only deployments, only IP resolution works.</span></span> <span data-ttu-id="2077d-492">針對跨單位部署使用站對站或 ExpressRoute 連線能力，就已經建立了至少含有一個子網路的網路。</span><span class="sxs-lookup"><span data-stu-id="2077d-492">Using site-to-site or ExpressRoute connectivity for Cross-Premises deployments, a network with at least one subnet is already established.</span></span> <span data-ttu-id="2077d-493">名稱解析是根據 toohello 內部部署 AD 原則和網路基礎結構。</span><span class="sxs-lookup"><span data-stu-id="2077d-493">Name resolution is done according toohello on-premises AD policies and network infrastructure.</span></span> 

[comment]: <> (MSSedusch TODO 測試在 ARM 中是否仍為 true)

#### <a name="ip-addresses"></a><span data-ttu-id="2077d-495">IP 位址</span><span class="sxs-lookup"><span data-stu-id="2077d-495">IP Addresses</span></span>
<span data-ttu-id="2077d-496">強烈建議 toosetup hello Vm HA 組態的彈性的方式。</span><span class="sxs-lookup"><span data-stu-id="2077d-496">It is highly recommended toosetup hello VMs for HA configurations in a resilient way.</span></span> <span data-ttu-id="2077d-497">依賴 IP 位址 tooaddress hello HA 夥伴 hello HA 組態內不可靠，在 Azure 中使用靜態 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="2077d-497">Relying on IP addresses tooaddress hello HA partner(s) within hello HA configuration is not reliable in Azure unless static IP addresses are used.</span></span> <span data-ttu-id="2077d-498">Azure 中有兩種「關閉」概念︰</span><span class="sxs-lookup"><span data-stu-id="2077d-498">There are two "Shutdown" concepts in Azure:</span></span>

* <span data-ttu-id="2077d-499">關閉透過 Azure 入口網站或 Azure PowerShell cmdlet 停止 AzureRmVM: hello 虛擬機器在此情況下，會關閉和取消配置。</span><span class="sxs-lookup"><span data-stu-id="2077d-499">Shut down through Azure portal or Azure PowerShell cmdlet Stop-AzureRmVM: In this case, hello Virtual Machine gets shutdown and de-allocated.</span></span> <span data-ttu-id="2077d-500">您的 Azure 帳戶不再計費這部 VM 的因此 hello 唯一要收費致使其 hello 儲存體使用。</span><span class="sxs-lookup"><span data-stu-id="2077d-500">Your Azure account is no longer charged for this VM so hello only charges that incur are for hello storage used.</span></span> <span data-ttu-id="2077d-501">不過，如果 hello 網路介面的 hello 私人 IP 位址不是靜態的 hello IP address 已釋放，而且不保證該 hello 網路介面取得 hello 分派 hello VM 重新啟動之後，再次舊 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="2077d-501">However, if hello private IP address of hello network interface was not static, hello IP address is released and it is not guaranteed that hello network interface gets hello old IP address assigned again after a restart of hello VM.</span></span> <span data-ttu-id="2077d-502">執行 hello 關閉 hello 透過 Azure 入口網站，或藉由呼叫停止 AzureRmVM 自動導致取消配置。</span><span class="sxs-lookup"><span data-stu-id="2077d-502">Performing hello shut down through hello Azure portal or by calling Stop-AzureRmVM automatically causes de-allocation.</span></span> <span data-ttu-id="2077d-503">如果您不想停止 AzureRmVM StayProvisioned toodeallocate hello 機器使用</span><span class="sxs-lookup"><span data-stu-id="2077d-503">If you do not want toodeallocate hello machine use Stop-AzureRmVM -StayProvisioned</span></span> 
* <span data-ttu-id="2077d-504">如果您關閉 hello 作業系統層級中的 VM，hello VM 取得關閉，無法取消配置。</span><span class="sxs-lookup"><span data-stu-id="2077d-504">If you shut down hello VM from an OS level, hello VM gets shut down and NOT de-allocated.</span></span> <span data-ttu-id="2077d-505">不過，在此情況下，您的 Azure 帳戶則仍需支付 hello VM，儘管它已經關閉的 hello 事實。</span><span class="sxs-lookup"><span data-stu-id="2077d-505">However, in this case, your Azure account is still charged for hello VM, despite hello fact that it is shutdown.</span></span> <span data-ttu-id="2077d-506">在這種情況下，hello 分派的 hello IP 位址 tooa 會停止 VM 會保持不變。</span><span class="sxs-lookup"><span data-stu-id="2077d-506">In such a case, hello assignment of hello IP address tooa stopped VM remains intact.</span></span> <span data-ttu-id="2077d-507">正在關閉 hello 從 VM 內不會自動強制取消配置。</span><span class="sxs-lookup"><span data-stu-id="2077d-507">Shutting down hello VM from within does not automatically force de-allocation.</span></span>

<span data-ttu-id="2077d-508">即使對於跨內部部署案例中，依預設關閉和取消配置表示取消指派 hello IP 位址從 hello VM，即使 DHCP 設定中的內部部署原則不同。</span><span class="sxs-lookup"><span data-stu-id="2077d-508">Even for Cross-Premises scenarios, by default a shutdown and de-allocation means de-assignment of hello IP addresses from hello VM, even if on-premises policies in DHCP settings are different.</span></span> 

* <span data-ttu-id="2077d-509">hello 例外狀況如果其中一個會指派靜態 IP 位址 tooa 網路介面做為說明[這裡][virtual-networks-reserved-private-ip]。</span><span class="sxs-lookup"><span data-stu-id="2077d-509">hello exception is if one assigns a static IP address tooa network interface as described [here][virtual-networks-reserved-private-ip].</span></span>
* <span data-ttu-id="2077d-510">在這種情況下 hello IP 位址會保持固定，只要 hello 網路介面不會刪除。</span><span class="sxs-lookup"><span data-stu-id="2077d-510">In such a case hello IP address remains fixed as long as hello network interface is not deleted.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="2077d-511">順序 tookeep hello 整個部署簡單且容易管理，在清除建議 toosetup hello hello Vm 合作 DBMS HA 或 DR 組態中在 Azure 中的 hello 牽涉到不同的 Vm 之間沒有正常運作的名稱解析的方式。</span><span class="sxs-lookup"><span data-stu-id="2077d-511">In order tookeep hello whole deployment simple and manageable, hello clear recommendation is toosetup hello VMs partnering in a DBMS HA or DR configuration within Azure in a way that there is a functioning name resolution between hello different VMs involved.</span></span>
> 
> 

## <a name="deployment-of-host-monitoring"></a><span data-ttu-id="2077d-512">部署主機監視功能</span><span class="sxs-lookup"><span data-stu-id="2077d-512">Deployment of Host Monitoring</span></span>
<span data-ttu-id="2077d-513">具生產力的 SAP 應用程式在 Azure 虛擬機器使用量和 SAP 需要 hello 能力 tooget 主機監視 hello 執行 hello Azure 虛擬機器的實體主機的資料。</span><span class="sxs-lookup"><span data-stu-id="2077d-513">For productive usage of SAP Applications in Azure Virtual Machines, SAP requires hello ability tooget host monitoring data from hello physical hosts running hello Azure Virtual Machines.</span></span> <span data-ttu-id="2077d-514">需要有特定的 SAP HostAgent 修補程式等級，才能在 SAPOSCOL 和 SAP HostAgent 中啟用此功能。</span><span class="sxs-lookup"><span data-stu-id="2077d-514">A specific SAP Host Agent patch level is required that enables this capability in SAPOSCOL and SAP Host Agent.</span></span> <span data-ttu-id="2077d-515">hello 確切的修補程式層級記載於 SAP Note [1409604]。</span><span class="sxs-lookup"><span data-stu-id="2077d-515">hello exact patch level is documented in SAP Note [1409604].</span></span>

<span data-ttu-id="2077d-516">Hello 有關部署傳遞主機資料 tooSAPOSCOL 與 SAP Host Agent 的元件與該等元件的 hello 生命週期管理的詳細資訊，請參閱 toohello[部署指南][deployment-guide]</span><span class="sxs-lookup"><span data-stu-id="2077d-516">For hello details regarding deployment of components that deliver host data tooSAPOSCOL and SAP Host Agent and hello lifecycle management of those components, refer toohello [Deployment Guide][deployment-guide]</span></span>

## <span data-ttu-id="2077d-517"><a name="3264829e-075e-4d25-966e-a49dad878737"></a>細節 tooMicrosoft SQL Server</span><span class="sxs-lookup"><span data-stu-id="2077d-517"><a name="3264829e-075e-4d25-966e-a49dad878737"></a>Specifics tooMicrosoft SQL Server</span></span>
### <a name="sql-server-iaas"></a><span data-ttu-id="2077d-518">SQL Server IaaS</span><span class="sxs-lookup"><span data-stu-id="2077d-518">SQL Server IaaS</span></span>
<span data-ttu-id="2077d-519">開始使用 Microsoft Azure，您可以輕鬆地移轉現有 SQL Server 建立的應用程式在 Windows Server 平台 tooAzure 虛擬機器上。</span><span class="sxs-lookup"><span data-stu-id="2077d-519">Starting with Microsoft Azure, you can easily migrate your existing SQL Server applications built on Windows Server platform tooAzure Virtual Machines.</span></span> <span data-ttu-id="2077d-520">虛擬機器中 SQL Server 可讓您 tooreduce hello 擁有權總成本的部署、 管理和維護的企業廣度應用程式，輕鬆地將移轉這些應用程式 tooMicrosoft Azure。</span><span class="sxs-lookup"><span data-stu-id="2077d-520">SQL Server in a Virtual Machine enables you tooreduce hello total cost of ownership of deployment, management, and maintenance of enterprise breadth applications by easily migrating these applications tooMicrosoft Azure.</span></span> <span data-ttu-id="2077d-521">透過 SQL Server 在 Azure 虛擬機器，系統管理員和開發人員仍然可以使用的 hello 可用的相同開發和管理工具內部。</span><span class="sxs-lookup"><span data-stu-id="2077d-521">With SQL Server in an Azure Virtual Machine, administrators and developers can still use hello same development and administration tools that are available on-premises.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="2077d-522">我們不會討論 Microsoft Azure SQL Database，這一個平台為 hello Microsoft Azure 平台的服務供應項目。</span><span class="sxs-lookup"><span data-stu-id="2077d-522">We are not discussing Microsoft Azure SQL Database, which is a Platform as a Service offer of hello Microsoft Azure Platform.</span></span> <span data-ttu-id="2077d-523">本白皮書中的 hello 討論是 azure 的有關所知的內部部署在 Azure 虛擬機器，運用 hello 基礎結構即服務功能執行 hello SQL Server 產品。</span><span class="sxs-lookup"><span data-stu-id="2077d-523">hello discussion in this paper is about running hello SQL Server product as it is known for on-premises deployments in Azure Virtual Machines, leveraging hello Infrastructure as a Service capability of Azure.</span></span> <span data-ttu-id="2077d-524">這兩個產品之間所提供的資料庫性能與功能並不相同，不應混用彼此。</span><span class="sxs-lookup"><span data-stu-id="2077d-524">Database capabilities and functionalities between these two offers are different and should not be mixed up with each other.</span></span> <span data-ttu-id="2077d-525">另請參閱︰<https://azure.microsoft.com/services/sql-database/></span><span class="sxs-lookup"><span data-stu-id="2077d-525">See also: <https://azure.microsoft.com/services/sql-database/></span></span>
> 
> 

<span data-ttu-id="2077d-526">強烈建議 tooreview[這][ virtual-machines-sql-server-infrastructure-services]文件，然後再繼續。</span><span class="sxs-lookup"><span data-stu-id="2077d-526">It is strongly recommended tooreview [this][virtual-machines-sql-server-infrastructure-services] documentation before continuing.</span></span>

<span data-ttu-id="2077d-527">在 hello hello hello 上方的連結文件的組件的下列各節片段經過彙總和提及。</span><span class="sxs-lookup"><span data-stu-id="2077d-527">In hello following sections pieces of parts of hello documentation under hello link above are aggregated and mentioned.</span></span> <span data-ttu-id="2077d-528">也會提到 SAP 專屬的詳細資料，並更深入說明一些概念。</span><span class="sxs-lookup"><span data-stu-id="2077d-528">Specifics around SAP are mentioned as well and some concepts are described in more detail.</span></span> <span data-ttu-id="2077d-529">不過，強烈建議 toowork 透過上述第一個再讀取 hello SQL Server 特定文件的 hello 文件。</span><span class="sxs-lookup"><span data-stu-id="2077d-529">However, it is highly recommended toowork through hello documentation above first before reading hello SQL Server specific documentation.</span></span>

<span data-ttu-id="2077d-530">繼續之前，您應該先了解一些 IaaS 中 SQL Server 專屬的資訊：</span><span class="sxs-lookup"><span data-stu-id="2077d-530">There is some SQL Server in IaaS specific information you should know before continuing:</span></span>

* <span data-ttu-id="2077d-531">**虛擬機器 SLA**：如需適用於在 Azure 中執行之「虛擬機器」的 SLA，請參閱：<https://azure.microsoft.com/support/legal/sla/></span><span class="sxs-lookup"><span data-stu-id="2077d-531">**Virtual Machine SLA**: There is an SLA for Virtual Machines running in Azure, which can be found here: <https://azure.microsoft.com/support/legal/sla/></span></span>  
* <span data-ttu-id="2077d-532">**SQL 版本支援**︰針對 SAP 客戶，我們在「Microsoft Azure 虛擬機器」上支援 SQL Server 2008 R2 和更新版本。</span><span class="sxs-lookup"><span data-stu-id="2077d-532">**SQL Version Support**: For SAP customers, we support SQL Server 2008 R2 and higher on Microsoft Azure Virtual Machine.</span></span> <span data-ttu-id="2077d-533">不支援舊版。</span><span class="sxs-lookup"><span data-stu-id="2077d-533">Earlier editions are not supported.</span></span> <span data-ttu-id="2077d-534">如需更多詳細資料，請檢閱這份通用的 [支援聲明](https://support.microsoft.com/kb/956893) 。</span><span class="sxs-lookup"><span data-stu-id="2077d-534">Review this general [Support Statement](https://support.microsoft.com/kb/956893) for more details.</span></span> <span data-ttu-id="2077d-535">請注意，Microsoft 通常也支援 SQL Server 2008。</span><span class="sxs-lookup"><span data-stu-id="2077d-535">Note that in general SQL Server 2008 is supported by Microsoft as well.</span></span> <span data-ttu-id="2077d-536">不過，由於 toosignificant 功能適用於 SAP 與 SQL Server 2008 R2 引進，SQL Server 2008 R2 為 hello 適用於 SAP 的最低版本。</span><span class="sxs-lookup"><span data-stu-id="2077d-536">However due toosignificant functionality for SAP, which was introduced with SQL Server 2008 R2, SQL Server 2008 R2 is hello minimum release for SAP.</span></span> <span data-ttu-id="2077d-537">請記住，SQL Server 2012 和 2014年收到 hello IaaS 案例 （例如，直接對 Azure 儲存體備份） 的更深入整合與擴充。</span><span class="sxs-lookup"><span data-stu-id="2077d-537">Keep in mind that SQL Server 2012 and 2014 got extended with deeper integration into hello IaaS scenario (like backing up directly against Azure Storage).</span></span> <span data-ttu-id="2077d-538">因此，我們會限制此紙張 tooSQL Server 2012 和 2014 其最新修補程式等級，適用於 Azure。</span><span class="sxs-lookup"><span data-stu-id="2077d-538">Therefore, we restrict this paper tooSQL Server 2012 and 2014 with its latest patch level for Azure.</span></span>
* <span data-ttu-id="2077d-539">**SQL 功能支援**︰「Microsoft Azure 虛擬機器」上支援大部分的 SQL Server 功能，但有一些例外。</span><span class="sxs-lookup"><span data-stu-id="2077d-539">**SQL Feature Support**: Most SQL Server features are supported on Microsoft Azure Virtual Machines with some exceptions.</span></span> <span data-ttu-id="2077d-540">**不支援使用共用磁碟的 SQL Server 容錯移轉叢集**。</span><span class="sxs-lookup"><span data-stu-id="2077d-540">**SQL Server Failover Clustering using Shared Disks is not supported**.</span></span>  <span data-ttu-id="2077d-541">單一 Azure 區域內支援分散式技術 (例如，資料庫鏡像、AlwaysOn 可用性群組、複寫、記錄傳送，以及 Service Broker)。</span><span class="sxs-lookup"><span data-stu-id="2077d-541">Distributed technologies like Database Mirroring, AlwaysOn Availability Groups, Replication, Log Shipping and Service Broker are supported within a single Azure Region.</span></span> <span data-ttu-id="2077d-542">SQL Server AlwaysOn 也在不同 Azure 區域之間受到支援，如以下文件所述︰<https://blogs.technet.com/b/dataplatforminsider/archive/2014/06/19/sql-server-alwayson-availability-groups-supported-between-microsoft-azure-regions.aspx>。</span><span class="sxs-lookup"><span data-stu-id="2077d-542">SQL Server AlwaysOn also is supported between different Azure Regions as documented here:  <https://blogs.technet.com/b/dataplatforminsider/archive/2014/06/19/sql-server-alwayson-availability-groups-supported-between-microsoft-azure-regions.aspx>.</span></span>  <span data-ttu-id="2077d-543">檢閱 hello[支援聲明](https://support.microsoft.com/kb/956893)如需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="2077d-543">Review hello [Support Statement](https://support.microsoft.com/kb/956893) for more details.</span></span> <span data-ttu-id="2077d-544">有關如何 toodeploy AlwaysOn 組態所示的範例[這][ virtual-machines-workload-template-sql-alwayson]發行項。</span><span class="sxs-lookup"><span data-stu-id="2077d-544">An example on how toodeploy an AlwaysOn configuration is shown in [this][virtual-machines-workload-template-sql-alwayson] article.</span></span> <span data-ttu-id="2077d-545">此外，請參閱 hello 記載的最佳作法[這裡][virtual-machines-sql-server-infrastructure-services]</span><span class="sxs-lookup"><span data-stu-id="2077d-545">Also, check out hello Best Practices documented [here][virtual-machines-sql-server-infrastructure-services]</span></span> 
* <span data-ttu-id="2077d-546">**SQL 效能**： 我們確信 Microsoft Azure 代管的虛擬機器執行地很好的比較 tooother 公用雲端虛擬化方案，但是個別結果中，可能會不同。</span><span class="sxs-lookup"><span data-stu-id="2077d-546">**SQL Performance**: We are confident that Microsoft Azure hosted Virtual Machines perform very well in comparison tooother public cloud virtualization offerings, but individual results may vary.</span></span> <span data-ttu-id="2077d-547">請參閱[這篇][virtual-machines-sql-server-performance-best-practices]文章。</span><span class="sxs-lookup"><span data-stu-id="2077d-547">Check out [this][virtual-machines-sql-server-performance-best-practices] article.</span></span>
* <span data-ttu-id="2077d-548">**使用 Azure marketplace 的映像**: hello 最快方式 toodeploy 新的 Microsoft Azure VM 是 toouse hello Azure Marketplace 中的影像。</span><span class="sxs-lookup"><span data-stu-id="2077d-548">**Using Images from Azure Marketplace**: hello fastest way toodeploy a new Microsoft Azure VM is toouse an image from hello Azure Marketplace.</span></span> <span data-ttu-id="2077d-549">有 hello Azure Marketplace，其中包含 SQL Server 映像。</span><span class="sxs-lookup"><span data-stu-id="2077d-549">There are images in hello Azure Marketplace, which contain SQL Server.</span></span> <span data-ttu-id="2077d-550">SQL Server 已安裝的 hello 映像不能立即用於 SAP NetWeaver 應用程式。</span><span class="sxs-lookup"><span data-stu-id="2077d-550">hello images where SQL Server already is installed can’t be immediately used for SAP NetWeaver applications.</span></span> <span data-ttu-id="2077d-551">hello 原因是 hello 預設 SQL Server 定序會安裝這些映像或不 SAP NetWeaver 系統所需的 hello 定序中。</span><span class="sxs-lookup"><span data-stu-id="2077d-551">hello reason is hello default SQL Server collation is installed within those images and not hello collation required by SAP NetWeaver systems.</span></span> <span data-ttu-id="2077d-552">在排序 toouse 這類影像、 簽章中記載的 hello 步驟[使用 SQL Server 映像，從 Microsoft Azure Marketplace hello][dbms-guide-5.6]。</span><span class="sxs-lookup"><span data-stu-id="2077d-552">In order toouse such images, check hello steps documented in chapter [Using a SQL Server image out of hello Microsoft Azure Marketplace][dbms-guide-5.6].</span></span> 
* <span data-ttu-id="2077d-553">如需詳細資訊，請參閱 [定價詳細資料](https://azure.microsoft.com/pricing/) 。</span><span class="sxs-lookup"><span data-stu-id="2077d-553">Check out [Pricing Details](https://azure.microsoft.com/pricing/) for more information.</span></span> <span data-ttu-id="2077d-554">hello [SQL Server 2012 授權指南](https://download.microsoft.com/download/7/3/C/73CAD4E0-D0B5-4BE5-AB49-D5B886A5AE00/SQL_Server_2012_Licensing_Reference_Guide.pdf)和[SQL Server 2014 授權指南](https://download.microsoft.com/download/B/4/E/B4E604D9-9D38-4BBA-A927-56E4C872E41C/SQL_Server_2014_Licensing_Guide.pdf)也是相當重要的資源。</span><span class="sxs-lookup"><span data-stu-id="2077d-554">hello [SQL Server 2012 Licensing Guide](https://download.microsoft.com/download/7/3/C/73CAD4E0-D0B5-4BE5-AB49-D5B886A5AE00/SQL_Server_2012_Licensing_Reference_Guide.pdf) and [SQL Server 2014 Licensing Guide](https://download.microsoft.com/download/B/4/E/B4E604D9-9D38-4BBA-A927-56E4C872E41C/SQL_Server_2014_Licensing_Guide.pdf) are also an important resource.</span></span>

### <a name="sql-server-configuration-guidelines-for-sap-related-sql-server-installations-in-azure-vms"></a><span data-ttu-id="2077d-555">在 Azure VM 中安裝 SAP 相關之 SQL Server 的 SQL Server 組態指導方針</span><span class="sxs-lookup"><span data-stu-id="2077d-555">SQL Server configuration guidelines for SAP-related SQL Server installations in Azure VMs</span></span>
#### <a name="recommendations-on-vmvhd-structure-for-sap-related-sql-server-deployments"></a><span data-ttu-id="2077d-556">適用於 SAP 相關之 SQL Server 部署的 VM/VHD 結構建議</span><span class="sxs-lookup"><span data-stu-id="2077d-556">Recommendations on VM/VHD structure for SAP-related SQL Server deployments</span></span>
<span data-ttu-id="2077d-557">Hello 一般描述，根據 SQL Server 可執行檔應該位於或安裝到 hello 系統磁碟機的 hello VM 之 OS 磁碟 (磁碟機 c:\)。</span><span class="sxs-lookup"><span data-stu-id="2077d-557">In accordance with hello general description, SQL Server executables should be located or installed into hello system drive of hello VM’s OS disk (drive C:\).</span></span>  <span data-ttu-id="2077d-558">一般而言，大部分的 hello SQL Server 系統資料庫不會使用高層次的 SAP NetWeaver 工作量。</span><span class="sxs-lookup"><span data-stu-id="2077d-558">Typically, most of hello SQL Server system databases are not utilized at a high level by SAP NetWeaver workload.</span></span> <span data-ttu-id="2077d-559">因此 hello 系統資料庫 （master、 msdb 和 model） 的 SQL server 可留在 hello C:\ 磁碟機上。</span><span class="sxs-lookup"><span data-stu-id="2077d-559">Hence hello system databases of SQL Server (master, msdb, and model) can remain on hello C:\ drive as well.</span></span> <span data-ttu-id="2077d-560">例外狀況可能是 tempdb，這在 hello 案例中的某些 SAP ERP 和所有 BW 工作量可能需要較高的資料量或 I/O 作業量不適合放 hello 原始 VM。</span><span class="sxs-lookup"><span data-stu-id="2077d-560">An exception could be tempdb, which in hello case of some SAP ERP and all BW workloads, might require either higher data volume or I/O operations volume, which can’t fit into hello original VM.</span></span> <span data-ttu-id="2077d-561">這類系統，應該執行下列步驟的 hello:</span><span class="sxs-lookup"><span data-stu-id="2077d-561">For such systems, hello following steps should be performed:</span></span>

* <span data-ttu-id="2077d-562">移動 hello 主要 tempdb 資料檔案 toohello hello 主要資料檔案中的 hello SAP 資料庫的相同邏輯磁碟機。</span><span class="sxs-lookup"><span data-stu-id="2077d-562">Move hello primary tempdb data file(s) toohello same logical drive as hello primary data file(s) of hello SAP database.</span></span>
* <span data-ttu-id="2077d-563">新增 hello 的任何其他的 tempdb 資料檔案 tooeach 其他包含 hello SAP 使用者資料庫的資料檔案的邏輯磁碟機。</span><span class="sxs-lookup"><span data-stu-id="2077d-563">Add any additional tempdb data files tooeach of hello other logical drives containing a data file of hello SAP user database.</span></span>
* <span data-ttu-id="2077d-564">新增 hello tempdb 記錄檔 toohello 邏輯磁碟機，其中包含 hello 使用者資料庫的記錄檔。</span><span class="sxs-lookup"><span data-stu-id="2077d-564">Add hello tempdb logfile toohello logical drive, which contains hello user database’s log file.</span></span>
* <span data-ttu-id="2077d-565">**專用的 VM 類型可使用本機 Ssd** hello 計算節點 tempdb 資料和記錄檔可能會放在 hello D:\ 磁碟機上。</span><span class="sxs-lookup"><span data-stu-id="2077d-565">**Exclusively for VM types that use local SSDs** on hello compute node tempdb data and log files might be placed on hello D:\ drive.</span></span> <span data-ttu-id="2077d-566">不過，它可能會建議 toouse 多個 tempdb 資料檔案。</span><span class="sxs-lookup"><span data-stu-id="2077d-566">Nevertheless, it might be recommended toouse multiple tempdb data files.</span></span> <span data-ttu-id="2077d-567">請注意 D:\ 磁碟機的磁碟區都不同 hello VM 類型為基礎。</span><span class="sxs-lookup"><span data-stu-id="2077d-567">Be aware D:\ drive volumes are different based on hello VM type.</span></span>

<span data-ttu-id="2077d-568">這些設定可讓 tempdb tooconsume 空間 hello 系統磁碟機無法 tooprovide 還要多。</span><span class="sxs-lookup"><span data-stu-id="2077d-568">These configurations enable tempdb tooconsume more space than hello system drive is able tooprovide.</span></span> <span data-ttu-id="2077d-569">順序 toodetermine hello 正確的 tempdb 大小，使用者可以檢查現有的系統，執行內部部署的 hello tempdb 大小。</span><span class="sxs-lookup"><span data-stu-id="2077d-569">In order toodetermine hello proper tempdb size, one can check hello tempdb sizes on existing systems, which run on-premises.</span></span> <span data-ttu-id="2077d-570">此外，這種組態可讓針對 tempdb，不能提供與 hello 系統磁碟機的 IOPS 數目。</span><span class="sxs-lookup"><span data-stu-id="2077d-570">In addition, such a configuration would enable IOPS numbers against tempdb, which cannot be provided with hello system drive.</span></span> <span data-ttu-id="2077d-571">同樣地，在內部部署執行的系統可以針對 tempdb 使用的 toomonitor I/O 工作負載，讓您可以衍生預期在 tempdb 上 toosee hello IOPS 數目。</span><span class="sxs-lookup"><span data-stu-id="2077d-571">Again, systems that are running on-premises can be used toomonitor I/O workload against tempdb so that you can derive hello IOPS numbers you expect toosee on your tempdb.</span></span>

<span data-ttu-id="2077d-572">VM 組態，執行 SQL Server 與 SAP 資料庫和 tempdb 資料和 tempdb 記錄檔 hello D:\ 磁碟機上放置位置應該像這樣：</span><span class="sxs-lookup"><span data-stu-id="2077d-572">A VM configuration, which runs SQL Server with an SAP database and where tempdb data and tempdb logfile are placed on hello D:\ drive would look like:</span></span>

![適用於 SAP 之 Azure IaaS VM 的參考組態][dbms-guide-figure-300]

<span data-ttu-id="2077d-574">請注意該 hello D:\ 磁碟機具有不同大小 hello VM 類型而定。</span><span class="sxs-lookup"><span data-stu-id="2077d-574">Be aware that hello D:\ drive has different sizes dependent on hello VM type.</span></span> <span data-ttu-id="2077d-575">相依於 tempdb hello 大小需求可能會強制的 toopair tempdb 資料和記錄檔以 hello SAP 資料庫資料和記錄檔中的情況下，D:\ 磁碟機太小。</span><span class="sxs-lookup"><span data-stu-id="2077d-575">Dependent on hello size requirement of tempdb you might be forced toopair tempdb data and log files with hello SAP database data and log files in cases where D:\ drive is too small.</span></span>

#### <a name="formatting-hello-disks"></a><span data-ttu-id="2077d-576">格式化 hello 磁碟</span><span class="sxs-lookup"><span data-stu-id="2077d-576">Formatting hello disks</span></span>
<span data-ttu-id="2077d-577">SQL Server hello NTFS 區塊大小，其中包含 SQL Server 資料和記錄檔的磁碟檔案應該是 64k。</span><span class="sxs-lookup"><span data-stu-id="2077d-577">For SQL Server hello NTFS block size for disks containing SQL Server data and log files should be 64K.</span></span> <span data-ttu-id="2077d-578">沒有任何需要 tooformat hello D:\ 磁碟機。</span><span class="sxs-lookup"><span data-stu-id="2077d-578">There is no need tooformat hello D:\ drive.</span></span> <span data-ttu-id="2077d-579">此磁碟機已預先格式化。</span><span class="sxs-lookup"><span data-stu-id="2077d-579">This drive comes pre-formatted.</span></span>

<span data-ttu-id="2077d-580">在確定 hello 還原或建立的資料庫不會初始化 hello 資料檔案所清空 hello hello 檔案內容，您應該確定的順序 toomake hello 使用者內容 hello SQL Server 服務正在執行具有特定權限。</span><span class="sxs-lookup"><span data-stu-id="2077d-580">In order toomake sure that hello restore or creation of databases is not initializing hello data files by zeroing hello content of hello files, one should make sure that hello user context hello SQL Server service is running in has a certain permission.</span></span> <span data-ttu-id="2077d-581">Hello Windows 系統管理員群組中的使用者通常會有這些權限。</span><span class="sxs-lookup"><span data-stu-id="2077d-581">Usually users in hello Windows Administrator group have these permissions.</span></span> <span data-ttu-id="2077d-582">Hello SQL Server 服務執行於非 Windows 系統管理員使用者 hello 使用者內容，如果您需要 tooassign 該使用者 hello '執行磁碟區維護工作' 的使用者權限。</span><span class="sxs-lookup"><span data-stu-id="2077d-582">If hello SQL Server service is run in hello user context of non-Windows Administrator user, you need tooassign that user hello User Right ‘Perform volume maintenance tasks’.</span></span>  <span data-ttu-id="2077d-583">請參閱 Microsoft 知識庫文件中的 hello 詳細資料： <https://support.microsoft.com/kb/2574695></span><span class="sxs-lookup"><span data-stu-id="2077d-583">See hello details in this Microsoft Knowledge Base Article: <https://support.microsoft.com/kb/2574695></span></span>

#### <a name="impact-of-database-compression"></a><span data-ttu-id="2077d-584">資料庫壓縮的影響</span><span class="sxs-lookup"><span data-stu-id="2077d-584">Impact of database compression</span></span>
<span data-ttu-id="2077d-585">在組態中的 I/O 頻寬可能會變成限制因素，每個量值會減少 IOPS 可能有助於 toostretch hello 工作負載一次可以執行像是 Azure IaaS 案例中。</span><span class="sxs-lookup"><span data-stu-id="2077d-585">In configurations where I/O bandwidth can become a limiting factor, every measure, which reduces IOPS might help toostretch hello workload one can run in an IaaS scenario like Azure.</span></span> <span data-ttu-id="2077d-586">因此，如果尚未這樣做，套用 SQL Server PAGE 壓縮強烈建議 SAP 和 Microsoft 所上傳現有的 SAP 資料庫 tooAzure 之前。</span><span class="sxs-lookup"><span data-stu-id="2077d-586">Therefore, if not yet done, applying SQL Server PAGE compression is strongly recommended by both SAP and Microsoft before uploading an existing SAP database tooAzure.</span></span>

<span data-ttu-id="2077d-587">再上傳 tooAzure hello 建議 tooperform 資料庫壓縮是出於兩個原因：</span><span class="sxs-lookup"><span data-stu-id="2077d-587">hello recommendation tooperform Database Compression before uploading tooAzure is given out of two reasons:</span></span>

* <span data-ttu-id="2077d-588">上傳資料 toobe hello 量較低。</span><span class="sxs-lookup"><span data-stu-id="2077d-588">hello amount of data toobe uploaded is lower.</span></span>
* <span data-ttu-id="2077d-589">假設有更多的 Cpu 或更高 I/O 頻寬或更少的 I/O 延遲內部部署可以使用更強的硬體較短的 hello 壓縮執行 hello 持續時間。</span><span class="sxs-lookup"><span data-stu-id="2077d-589">hello duration of hello compression execution is shorter assuming that one can use stronger hardware with more CPUs or higher I/O bandwidth or less I/O latency on-premises.</span></span>
* <span data-ttu-id="2077d-590">較小的資料庫大小可能會導致 tooless 成本進行磁碟配置</span><span class="sxs-lookup"><span data-stu-id="2077d-590">Smaller database sizes might lead tooless costs for disk allocation</span></span>

<span data-ttu-id="2077d-591">資料庫壓縮也可以在 Azure 虛擬機器中運作，如同它在內部部署中的運作方式。</span><span class="sxs-lookup"><span data-stu-id="2077d-591">Database compression works as well in an Azure Virtual Machines as it does on-premises.</span></span> <span data-ttu-id="2077d-592">如需有關如何 toocompress 現有 SAP SQL Server 資料庫，請勾選此處： <https://blogs.msdn.com/b/saponsqlserver/archive/2010/10/08/compressing-an-sap-database-using-report-msscompress.aspx></span><span class="sxs-lookup"><span data-stu-id="2077d-592">For more details on how toocompress an existing SAP SQL Server database, check here: <https://blogs.msdn.com/b/saponsqlserver/archive/2010/10/08/compressing-an-sap-database-using-report-msscompress.aspx></span></span>

### <a name="sql-server-2014--storing-database-files-directly-on-azure-blob-storage"></a><span data-ttu-id="2077d-593">SQL Server 2014 – 將資料庫檔案直接儲存於 Azure Blog 儲存體上</span><span class="sxs-lookup"><span data-stu-id="2077d-593">SQL Server 2014 – Storing Database Files directly on Azure Blob Storage</span></span>
<span data-ttu-id="2077d-594">SQL Server 2014 開啟 hello 可能性 toostore 直接在 Azure Blob 存放區沒有 hello '的包裝函式' 周圍的 VHD 上的資料庫檔案。</span><span class="sxs-lookup"><span data-stu-id="2077d-594">SQL Server 2014 opens hello possibility toostore database files directly on Azure Blob Store without hello ‘wrapper’ of a VHD around them.</span></span> <span data-ttu-id="2077d-595">特別是在使用標準的 Azure 儲存體或較小的 VM 類型這可讓您可以在其中克服 hello 有限數目的磁碟可以掛接的 toosome 較小的 VM 類型會強制執行的 IOPS 限制的案例。</span><span class="sxs-lookup"><span data-stu-id="2077d-595">Especially with using Standard Azure Storage or smaller VM types this enables scenarios where you can overcome hello limits of IOPS that would be enforced by a limited number of disks that can be mounted toosome smaller VM types.</span></span> <span data-ttu-id="2077d-596">不過，這適用於 SQL Server 的使用者資料庫，而不適用於系統資料庫。</span><span class="sxs-lookup"><span data-stu-id="2077d-596">This works for user databases however not for system databases of SQL Server.</span></span> <span data-ttu-id="2077d-597">這也適用於 SQL server 的資料和記錄檔。</span><span class="sxs-lookup"><span data-stu-id="2077d-597">It also works for data and log files of SQL Server.</span></span> <span data-ttu-id="2077d-598">如果您想要 toodeploy SAP SQL Server 資料庫而不是這種方式 '前後' 到 Vhd，請記住下列 hello:</span><span class="sxs-lookup"><span data-stu-id="2077d-598">If you’d like toodeploy an SAP SQL Server database this way instead of ‘wrapping’ it into VHDs, keep hello following in mind:</span></span>

* <span data-ttu-id="2077d-599">中的 hello 使用儲存體帳戶的需求 toobe hello 相同 Azure 區域為 hello 為使用的 toodeploy hello VM 的 SQL Server 正在執行中的其中一個。</span><span class="sxs-lookup"><span data-stu-id="2077d-599">hello Storage Account used needs toobe in hello same Azure Region as hello one that is used toodeploy hello VM SQL Server is running in.</span></span>
* <span data-ttu-id="2077d-600">稍早所列的 Vhd hello 發佈有關透過不同的 Azure 儲存體帳戶的考量適用於這個部署同樣的方法。</span><span class="sxs-lookup"><span data-stu-id="2077d-600">Considerations listed earlier regarding hello distribution of VHDs over different Azure Storage Accounts apply for this method of deployments as well.</span></span> <span data-ttu-id="2077d-601">表示 hello hello 限制 hello Azure 儲存體帳戶的 I/O 作業數目。</span><span class="sxs-lookup"><span data-stu-id="2077d-601">Means hello I/O operations count against hello limits of hello Azure Storage Account.</span></span>

[comment]: <> (MSSedusch TODO 但這將會使用網路頻寬而非儲存體頻寬，不是嗎？)

<span data-ttu-id="2077d-603">這種部署類型的詳細資訊列在此處：<https://docs.microsoft.com/sql/relational-databases/databases/sql-server-data-files-in-microsoft-azure></span><span class="sxs-lookup"><span data-stu-id="2077d-603">Details about this type of deployment are listed here: <https://docs.microsoft.com/sql/relational-databases/databases/sql-server-data-files-in-microsoft-azure></span></span>

<span data-ttu-id="2077d-604">在順序 toostore SQL Server 資料檔案直接在 Azure 高階儲存體上，您需要 toohave 最小的 SQL Server 2014 修補版本，請參閱： <https://support.microsoft.com/kb/3063054>。</span><span class="sxs-lookup"><span data-stu-id="2077d-604">In order toostore SQL Server data files directly on Azure Premium Storage, you need toohave a minimum SQL Server 2014 patch release, which is documented here: <https://support.microsoft.com/kb/3063054>.</span></span> <span data-ttu-id="2077d-605">儲存在 Azure 標準儲存體的 SQL Server 資料檔案會與 hello 發行版本的 SQL Server 2014 運作。</span><span class="sxs-lookup"><span data-stu-id="2077d-605">Storing SQL Server data files on Azure Standard Storage does work with hello released version of SQL Server 2014.</span></span> <span data-ttu-id="2077d-606">不過，hello 完全相同的修補程式包含修正程式，讓 hello 直接使用 Azure Blob 儲存體的 SQL Server 資料檔案和備份更可靠的另一個的數列。</span><span class="sxs-lookup"><span data-stu-id="2077d-606">However, hello very same patches contain another series of fixes, which make hello direct usage of Azure Blob Storage for SQL Server data files and backups more reliable.</span></span> <span data-ttu-id="2077d-607">因此，我們通常建議使用這些修補程式。</span><span class="sxs-lookup"><span data-stu-id="2077d-607">Therefore we recommend using these patches in general.</span></span>

### <a name="sql-server-2014-buffer-pool-extension"></a><span data-ttu-id="2077d-608">SQL Server 2014 緩衝集區延伸</span><span class="sxs-lookup"><span data-stu-id="2077d-608">SQL Server 2014 Buffer Pool Extension</span></span>
<span data-ttu-id="2077d-609">SQL Server 2014 引進的新功能，稱為「緩衝集區延伸」。</span><span class="sxs-lookup"><span data-stu-id="2077d-609">SQL Server 2014 introduced a new feature, which is called Buffer Pool Extension.</span></span> <span data-ttu-id="2077d-610">這個功能擴展了 hello 緩衝集區的保留記憶體中的第二個層級快取伺服器的本機 Ssd 或 VM 所支援的 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="2077d-610">This functionality extends hello buffer pool of SQL Server, which is kept in memory with a second level cache that is backed by local SSDs of a server or VM.</span></span> <span data-ttu-id="2077d-611">這可讓 tookeep 大的工作集的 'in '的記憶體資料。</span><span class="sxs-lookup"><span data-stu-id="2077d-611">This enables tookeep a larger working set of data ‘in memory’.</span></span> <span data-ttu-id="2077d-612">比較的 tooaccessing 成 hello 緩衝集區，並儲存在 Azure VM 的本機 Ssd 上的 hello 擴充功能的標準儲存體 Azure hello 存取將會更快許多因素而定。</span><span class="sxs-lookup"><span data-stu-id="2077d-612">Compared tooaccessing Azure Standard Storage hello access into hello extension of hello buffer pool, which is stored on local SSDs of an Azure VM is many factors faster.</span></span>  <span data-ttu-id="2077d-613">因此，利用 hello 本機 D:\ 磁碟機有絕佳的 IOPS 及輸送量的 hello VM 類型可能是非常合理方式 tooreduce hello IOPS 載入對 Azure 儲存體，並大幅改善查詢回應時間。</span><span class="sxs-lookup"><span data-stu-id="2077d-613">Therefore, leveraging hello local D:\ drive of hello VM types that have excellent IOPS and throughput could be a very reasonable way tooreduce hello IOPS load against Azure Storage and improve response times of queries dramatically.</span></span> <span data-ttu-id="2077d-614">這特別適用於未使用進階儲存體時。</span><span class="sxs-lookup"><span data-stu-id="2077d-614">This applies especially when not using Premium Storage.</span></span> <span data-ttu-id="2077d-615">高階儲存體和 hello 使用方式的 hello Premium Azure 讀取快取 hello 計算節點上，如果資料檔案的建議，預期沒有顯著的差異。</span><span class="sxs-lookup"><span data-stu-id="2077d-615">In case of Premium Storage and hello usage of hello Premium Azure Read Cache on hello compute node, as recommended for data files, no significant differences are expected.</span></span> <span data-ttu-id="2077d-616">原因是這兩個快取 （SQL Server 緩衝集區延伸模組和 Premium 儲存體讀取快取） 會使用 hello 的 hello 運算節點的本機磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-616">Reason is that both caches (SQL Server Buffer Pool Extension and Premium Storage Read Cache) are using hello local disks of hello compute nodes.</span></span>
<span data-ttu-id="2077d-617">如需有關此功能的更多詳細資料，請參閱這份文件︰<https://docs.microsoft.com/sql/database-engine/configure-windows/buffer-pool-extension></span><span class="sxs-lookup"><span data-stu-id="2077d-617">For more details about this functionality, check this documentation: <https://docs.microsoft.com/sql/database-engine/configure-windows/buffer-pool-extension></span></span> 

### <a name="backuprecovery-considerations-for-sql-server"></a><span data-ttu-id="2077d-618">SQL Server 的備份/復原考量</span><span class="sxs-lookup"><span data-stu-id="2077d-618">Backup/Recovery considerations for SQL Server</span></span>
<span data-ttu-id="2077d-619">將 SQL Server 部署至 Azure 時，必須檢閱您的備份方法。</span><span class="sxs-lookup"><span data-stu-id="2077d-619">When deploying SQL Server into Azure your backup methodology must be reviewed.</span></span> <span data-ttu-id="2077d-620">即使 hello 系統不是生產系統，由 SQL Server 託管的 hello SAP 資料庫必須定期備份。</span><span class="sxs-lookup"><span data-stu-id="2077d-620">Even if hello system is not a productive system, hello SAP database hosted by SQL Server must be backed up periodically.</span></span> <span data-ttu-id="2077d-621">因為 Azure 儲存體會保留三個影像，備份現在是較不重要，尤其是尊重 toocompensating 儲存體損毀。</span><span class="sxs-lookup"><span data-stu-id="2077d-621">Since Azure Storage keeps three images, a backup is now less important in respect toocompensating a storage crash.</span></span> <span data-ttu-id="2077d-622">維護適當的備份和復原計劃 hello 優先順序原因是，您可以藉由提供時間復原功能的中點補償邏輯/手動錯誤有更多。</span><span class="sxs-lookup"><span data-stu-id="2077d-622">hello priority reason for maintaining a proper backup and recovery plan is more that you can compensate for logical/manual errors by providing point in time recovery capabilities.</span></span> <span data-ttu-id="2077d-623">因此 hello 的目標是 tooeither 使用備份 toorestore hello 資料庫備份 tooa 特定點 Azure tooseed 中的時間或 toouse hello 備份中另一個系統複製 hello 現有的資料庫。</span><span class="sxs-lookup"><span data-stu-id="2077d-623">So hello goal is tooeither use backups toorestore hello database back tooa certain point in time or toouse hello backups in Azure tooseed another system by copying hello existing database.</span></span> <span data-ttu-id="2077d-624">例如，您無法從傳輸的 2 層 SAP 組態 tooa 3 層系統設定 hello 相同系統還原的備份。</span><span class="sxs-lookup"><span data-stu-id="2077d-624">For example, you could transfer from a 2-Tier SAP configuration tooa 3-Tier system setup of hello same system by restoring a backup.</span></span>

<span data-ttu-id="2077d-625">有三個不同的方式 toobackup SQL Server tooAzure 儲存體：</span><span class="sxs-lookup"><span data-stu-id="2077d-625">There are three different ways toobackup SQL Server tooAzure Storage:</span></span>

1. <span data-ttu-id="2077d-626">SQL Server 2012 CU4 和更高版本可以原生備份資料庫 tooa URL。</span><span class="sxs-lookup"><span data-stu-id="2077d-626">SQL Server 2012 CU4 and higher can natively backup databases tooa URL.</span></span> <span data-ttu-id="2077d-627">Hello 部落格有詳細說明[中 SQL Server 2014 – 第 5 部分 – 備份/還原增強功能的新功能](https://blogs.msdn.com/b/saponsqlserver/archive/2014/02/15/new-functionality-in-sql-server-2014-part-5-backup-restore-enhancements.aspx)。</span><span class="sxs-lookup"><span data-stu-id="2077d-627">This is detailed in hello blog [New functionality in SQL Server 2014 – Part 5 – Backup/Restore Enhancements](https://blogs.msdn.com/b/saponsqlserver/archive/2014/02/15/new-functionality-in-sql-server-2014-part-5-backup-restore-enhancements.aspx).</span></span> <span data-ttu-id="2077d-628">請參閱 [SQL Server 2012 SP1 CU4 和更新版本][dbms-guide-5.5.1]一章。</span><span class="sxs-lookup"><span data-stu-id="2077d-628">See chapter [SQL Server 2012 SP1 CU4 and later][dbms-guide-5.5.1].</span></span>
2. <span data-ttu-id="2077d-629">SQL Server 版本先前 tooSQL 2012 CU4 可以使用重新導向功能 toobackup tooa VHD，基本上再 hello 寫入串流移往已設定的 Azure 儲存體位置。</span><span class="sxs-lookup"><span data-stu-id="2077d-629">SQL Server releases prior tooSQL 2012 CU4 can use a redirection functionality toobackup tooa VHD and basically move hello write stream towards an Azure Storage location that has been configured.</span></span> <span data-ttu-id="2077d-630">請參閱 [SQL Server 2012 SP1 CU3 和舊版][dbms-guide-5.5.2]一章。</span><span class="sxs-lookup"><span data-stu-id="2077d-630">See chapter [SQL Server 2012 SP1 CU3 and earlier releases][dbms-guide-5.5.2].</span></span>
3. <span data-ttu-id="2077d-631">hello 最後一種方法是 tooperform 傳統的 SQL Server 備份 toodisk 命令到磁碟裝置。</span><span class="sxs-lookup"><span data-stu-id="2077d-631">hello final method is tooperform a conventional SQL Server backup toodisk command onto a disk device.</span></span> <span data-ttu-id="2077d-632">這是相同的 toohello 在內部部署的部署模式，而且不會在這份文件中詳細討論。</span><span class="sxs-lookup"><span data-stu-id="2077d-632">This is identical toohello on-premises deployment pattern and is not discussed in detail in this document.</span></span>

#### <span data-ttu-id="2077d-633"><a name="0fef0e79-d3fe-4ae2-85af-73666a6f7268"></a>SQL Server 2012 SP1 CU4 和更新版本</span><span class="sxs-lookup"><span data-stu-id="2077d-633"><a name="0fef0e79-d3fe-4ae2-85af-73666a6f7268"></a>SQL Server 2012 SP1 CU4 and later</span></span>
<span data-ttu-id="2077d-634">這項功能可讓您 toodirectly 備份 tooAzure BLOB 儲存體。</span><span class="sxs-lookup"><span data-stu-id="2077d-634">This functionality allows you toodirectly backup tooAzure BLOB storage.</span></span> <span data-ttu-id="2077d-635">未使用此方法中，您必須備份 tooother 磁碟，就會耗用磁碟和 IOPS 容量。</span><span class="sxs-lookup"><span data-stu-id="2077d-635">Without this method, you must backup tooother disks, which would consume disk and IOPS capacity.</span></span> <span data-ttu-id="2077d-636">hello 基本上想法如下：</span><span class="sxs-lookup"><span data-stu-id="2077d-636">hello idea is basically this:</span></span>

 ![使用 SQL Server 2012 備份 tooMicrosoft Azure 儲存體 BLOB][dbms-guide-figure-400]

<span data-ttu-id="2077d-638">hello 優點在此情況下會是不需要 toospend 磁碟 toostore SQL Server 備份上。</span><span class="sxs-lookup"><span data-stu-id="2077d-638">hello advantage in this case is that one doesn’t need toospend disks toostore SQL Server backups on.</span></span> <span data-ttu-id="2077d-639">因此，您有較少的磁碟配置，hello 的磁碟 IOPS 可以用於資料和記錄檔的整個頻寬。</span><span class="sxs-lookup"><span data-stu-id="2077d-639">So you have fewer disks allocated and hello whole bandwidth of disk IOPS can be used for data and log files.</span></span> <span data-ttu-id="2077d-640">請注意，hello 備份的大小上限是有限的 tooa 上限為 1 TB，如本文中的 hello 一節 < 限制 > 中所述： <https://docs.microsoft.com/sql/relational-databases/backup-restore/sql-server-backup-to-url#limitations>。</span><span class="sxs-lookup"><span data-stu-id="2077d-640">Note that hello maximum size of a backup is limited tooa maximum of 1 TB as documented in hello section ‘Limitations’ in this article: <https://docs.microsoft.com/sql/relational-databases/backup-restore/sql-server-backup-to-url#limitations>.</span></span> <span data-ttu-id="2077d-641">如果 hello 備份的大小，即使使用 SQL Server 備份壓縮的大小超過 1 TB，hello 章節所述的功能[SQL Server 2012 SP1 CU3 和更舊版本][ dbms-guide-5.5.2]在這份文件，也需要使用 toobe。</span><span class="sxs-lookup"><span data-stu-id="2077d-641">If hello backup size, despite using SQL Server Backup compression would exceed 1 TB in size, hello functionality described in chapter [SQL Server 2012 SP1 CU3 and earlier releases][dbms-guide-5.5.2] in this document needs toobe used.</span></span>

<span data-ttu-id="2077d-642">[相關文件](https://docs.microsoft.com/sql/relational-databases/backup-restore/restoring-from-backups-stored-in-microsoft-azure)描述 hello 還原的資料庫從 Azure Blob 存放區中的備份，建議您無法直接從 Azure BLOB 存放區 toorestore hello 備份時 > 25 GB。</span><span class="sxs-lookup"><span data-stu-id="2077d-642">[Related documentation](https://docs.microsoft.com/sql/relational-databases/backup-restore/restoring-from-backups-stored-in-microsoft-azure) describing hello restore of databases from backups against Azure Blob Store recommend not toorestore directly from Azure BLOB store if hello backup is >25GB.</span></span> <span data-ttu-id="2077d-643">本文章中的 hello 建議只根據效能考量，並不因為 toofunctional 限制。</span><span class="sxs-lookup"><span data-stu-id="2077d-643">hello recommendation in this article is simply based on performance considerations and not due toofunctional restrictions.</span></span> <span data-ttu-id="2077d-644">因此，隨著案例的不同，可能會發生不同的狀況。</span><span class="sxs-lookup"><span data-stu-id="2077d-644">Therefore, different conditions may apply on a case by case basis.</span></span>

<span data-ttu-id="2077d-645">如需有關如何設定和利用此備份類型的說明，請參閱 [這個](https://docs.microsoft.com/sql/relational-databases/tutorial-use-azure-blob-storage-service-with-sql-server-2016) 教學課程</span><span class="sxs-lookup"><span data-stu-id="2077d-645">Documentation on how this type of backup is set up and leveraged can be found in [this](https://docs.microsoft.com/sql/relational-databases/tutorial-use-azure-blob-storage-service-with-sql-server-2016) tutorial</span></span>

<span data-ttu-id="2077d-646">可以讀取的一連串步驟 hello 範例[這裡](https://docs.microsoft.com/sql/relational-databases/backup-restore/sql-server-backup-to-url)。</span><span class="sxs-lookup"><span data-stu-id="2077d-646">An example of hello sequence of steps can be read [here](https://docs.microsoft.com/sql/relational-databases/backup-restore/sql-server-backup-to-url).</span></span>

<span data-ttu-id="2077d-647">自動備份，為最高的重要性 toomake 確定每個備份的 hello Blob 的名稱不同。</span><span class="sxs-lookup"><span data-stu-id="2077d-647">Automating backups, it is of highest importance toomake sure that hello BLOBs for each backup are named differently.</span></span> <span data-ttu-id="2077d-648">否則它們會覆寫而且 hello restore 鏈已中斷。</span><span class="sxs-lookup"><span data-stu-id="2077d-648">Otherwise they are overwritten and hello restore chain is broken.</span></span>

<span data-ttu-id="2077d-649">為了不 toomix 之間 hello 三種不同類型備份的項目上時，它是建議 toocreate 不同的容器下方 hello 做為備份用途的儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="2077d-649">In order not toomix up things between hello three different types of backups, it is advisable toocreate different containers underneath hello storage account used for backups.</span></span> <span data-ttu-id="2077d-650">hello 容器可以是只有 VM 或 VM 和備份類型。</span><span class="sxs-lookup"><span data-stu-id="2077d-650">hello containers could be by VM only or by VM and Backup type.</span></span> <span data-ttu-id="2077d-651">hello 結構描述如下：</span><span class="sxs-lookup"><span data-stu-id="2077d-651">hello schema could look like:</span></span>

 ![使用 SQL Server 2012 備份 tooMicrosoft Azure 儲存體 BLOB-個別儲存體帳戶不同的容器][dbms-guide-figure-500]

<span data-ttu-id="2077d-653">Hello 備份不會執行到相同的儲存體帳戶在 hello hello hello 上述範例中所部署 Vm。</span><span class="sxs-lookup"><span data-stu-id="2077d-653">In hello example above, hello backups would not be performed into hello same storage account where hello VMs are deployed.</span></span> <span data-ttu-id="2077d-654">有新的儲存體帳戶，特別針對 hello 備份。</span><span class="sxs-lookup"><span data-stu-id="2077d-654">There would be a new storage account specifically for hello backups.</span></span> <span data-ttu-id="2077d-655">內 hello 儲存體帳戶，會建立不同的備份與 hello VM 名稱 hello 型矩陣的容器。</span><span class="sxs-lookup"><span data-stu-id="2077d-655">Within hello storage accounts, there would be different containers created with a matrix of hello type of backup and hello VM name.</span></span> <span data-ttu-id="2077d-656">這類的分割可讓您更輕鬆 tooadministrate hello 備份 hello 不同的 Vm。</span><span class="sxs-lookup"><span data-stu-id="2077d-656">Such segmentation makes it easier tooadministrate hello backups of hello different VMs.</span></span>

<span data-ttu-id="2077d-657">其中一個直接寫入 hello 備份 hello Blob 不會加入 toohello 計數的 hello 資料磁碟的 VM。</span><span class="sxs-lookup"><span data-stu-id="2077d-657">hello BLOBs one directly writes hello backups to, are not adding toohello count of hello data disks of a VM.</span></span> <span data-ttu-id="2077d-658">因此可以最大化 hello 最大值為 hello 資料的 hello 特定 VM SKU 的掛接的資料磁碟和交易記錄檔，並仍然執行備份，以對儲存體容器。</span><span class="sxs-lookup"><span data-stu-id="2077d-658">Hence one could maximize hello maximum of data disks mounted of hello specific VM SKU for hello data and transaction log file and still execute a backup against a storage container.</span></span> 

#### <span data-ttu-id="2077d-659"><a name="f9071eff-9d72-4f47-9da4-1852d782087b"></a>SQL Server 2012 SP1 CU3 和舊版</span><span class="sxs-lookup"><span data-stu-id="2077d-659"><a name="f9071eff-9d72-4f47-9da4-1852d782087b"></a>SQL Server 2012 SP1 CU3 and earlier releases</span></span>
<span data-ttu-id="2077d-660">hello 第一個步驟，您必須執行中的順序 tooachieve 直接對 Azure 儲存體的備份會是 toodownload hello msi 太連結[這](https://www.microsoft.com/download/details.aspx?id=40740)KBA 文章。</span><span class="sxs-lookup"><span data-stu-id="2077d-660">hello first step you must perform in order tooachieve a backup directly against Azure Storage would be toodownload hello msi, which is linked too[this](https://www.microsoft.com/download/details.aspx?id=40740) KBA article.</span></span>

<span data-ttu-id="2077d-661">下載 hello x64 安裝檔案和 hello 文件。</span><span class="sxs-lookup"><span data-stu-id="2077d-661">Download hello x64 installation file and hello documentation.</span></span> <span data-ttu-id="2077d-662">安裝程式，稱為 hello 檔案: 'Microsoft SQL Server Backup tooMicrosoft Azure 工具'。</span><span class="sxs-lookup"><span data-stu-id="2077d-662">hello file installs a program called: ‘Microsoft SQL Server Backup tooMicrosoft Azure Tool’.</span></span> <span data-ttu-id="2077d-663">徹底閱讀 hello hello 產品文件。</span><span class="sxs-lookup"><span data-stu-id="2077d-663">Read hello documentation of hello product thoroughly.</span></span>  <span data-ttu-id="2077d-664">hello 工具基本上可以下列方式 hello:</span><span class="sxs-lookup"><span data-stu-id="2077d-664">hello tool basically works in hello following way:</span></span>

* <span data-ttu-id="2077d-665">Hello SQL Server 端，從定義 hello SQL Server 備份的磁碟位置 （請勿這個使用 hello D:\ 磁碟機）。</span><span class="sxs-lookup"><span data-stu-id="2077d-665">From hello SQL Server side, a disk location for hello SQL Server backup is defined (don’t use hello D:\ drive for this).</span></span>
* <span data-ttu-id="2077d-666">hello 工具可讓您可以使用的 toodirect 不同類型的備份 toodifferent Azure 儲存體容器的 toodefine 規則。</span><span class="sxs-lookup"><span data-stu-id="2077d-666">hello tool allows you toodefine rules, which can be used toodirect different types of backups toodifferent Azure Storage containers.</span></span>
* <span data-ttu-id="2077d-667">一旦 hello 規則準備就緒，hello 工具重新導向 hello 備份 tooone hello Vhd/磁碟 toohello 先前所定義的 Azure 儲存體位置的 hello 寫入資料的流。</span><span class="sxs-lookup"><span data-stu-id="2077d-667">Once hello rules are in place, hello tool redirects hello write stream of hello backup tooone of hello VHDs/disks toohello Azure Storage location, which was defined earlier.</span></span>
* <span data-ttu-id="2077d-668">hello 工具會保留一個小型的 stub 檔案，幾 KB 大小的 hello VHD/磁碟，所定義的 hello SQL Server 備份。</span><span class="sxs-lookup"><span data-stu-id="2077d-668">hello tool leaves a small stub file of a few KB size on hello VHD/Disk, which was defined for hello SQL Server backup.</span></span> <span data-ttu-id="2077d-669">**此檔案應該留在 hello 儲存位置，因為它是必要的 toorestore 再次從 Azure 儲存體。**</span><span class="sxs-lookup"><span data-stu-id="2077d-669">**This file should be left on hello storage location since it is required toorestore again from Azure Storage.**</span></span>
  * <span data-ttu-id="2077d-670">如果您遺失 hello stub 檔案 （例如透過遺失 hello 包含 hello stub 檔案的儲存媒體），而且您已選擇備份 tooa Microsoft Azure 儲存體帳戶的 hello 選項，您可能會復原 hello stub 檔案透過 Microsoft Azure 儲存體從放置的 hello 儲存體容器下載。</span><span class="sxs-lookup"><span data-stu-id="2077d-670">If you have lost hello stub file (for example through loss of hello storage media that contained hello stub file) and you have chosen hello option of backing up tooa Microsoft Azure Storage account, you may recover hello stub file through Microsoft Azure Storage by downloading it from hello storage container in which it was placed.</span></span> <span data-ttu-id="2077d-671">您應該然後將 hello stub 檔案放在其中 hello 工具是設定的 toodetect 和上傳 toohello hello 本機電腦上資料夾相同的容器以 hello 如果加密搭配 hello 原始規則使用相同的加密密碼。</span><span class="sxs-lookup"><span data-stu-id="2077d-671">You should then place hello stub file into a folder on hello local machine where hello Tool is configured toodetect and upload toohello same container with hello same encryption password if encryption was used with hello original rule.</span></span> 

<span data-ttu-id="2077d-672">這表示 hello 結構描述可以也可供 SQL Server 版本，不允許直接定址 Azure 儲存體位置放置與上述針對較新版的 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="2077d-672">This means hello schema as described above for more recent releases of SQL Server can be put in place as well for SQL Server releases, which are not allowing direct address an Azure Storage location.</span></span>

<span data-ttu-id="2077d-673">此方法不應與較新版的 SQL Server 搭配使用，這些版本支援以原生方式備份 Azure 儲存體。</span><span class="sxs-lookup"><span data-stu-id="2077d-673">This method should not be used with more recent SQL Server releases, which support backing up natively against Azure Storage.</span></span> <span data-ttu-id="2077d-674">例外狀況是其中的 hello 原生備份至 Azure 的限制會封鎖 Azure 原生備份執行。</span><span class="sxs-lookup"><span data-stu-id="2077d-674">Exceptions are where limitations of hello native backup into Azure are blocking native backup execution into Azure.</span></span>

#### <a name="other-possibilities-toobackup-sql-server-databases"></a><span data-ttu-id="2077d-675">其他可能性 toobackup SQL Server 資料庫</span><span class="sxs-lookup"><span data-stu-id="2077d-675">Other possibilities toobackup SQL Server databases</span></span>
<span data-ttu-id="2077d-676">其他可能性 toobackup 資料庫是 tooattach 額外資料磁碟 tooa VM 上使用 toostore 備份。</span><span class="sxs-lookup"><span data-stu-id="2077d-676">Other possibilities toobackup databases is tooattach additional data disks tooa VM that you use toostore backups on.</span></span> <span data-ttu-id="2077d-677">在這種情況下，您必須確定 hello 磁碟不會執行完整的 toomake。</span><span class="sxs-lookup"><span data-stu-id="2077d-677">In such a case, you would need toomake sure that hello disks are not running full.</span></span> <span data-ttu-id="2077d-678">在 hello 情形下，您會需要 toounmount hello 磁碟，因此 toospeak '' 將它封存，並取代為新的空磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-678">If that is hello case, you would need toounmount hello disks and so toospeak ‘archive’ it and replace it with a new empty disk.</span></span> <span data-ttu-id="2077d-679">如果您向該路徑下，您要 tookeep hello 的 hello 與 hello 資料庫檔案的 Vhd 從不同的 Azure 儲存體帳戶中的這些 Vhd。</span><span class="sxs-lookup"><span data-stu-id="2077d-679">If you go down that path, you want tookeep these VHDs in separate Azure Storage Accounts from hello ones that hello VHDs with hello database files.</span></span>

<span data-ttu-id="2077d-680">第二種可能性是 toouse 大型 VM 可能多的磁碟附加，例如與 32VHDs D14。</span><span class="sxs-lookup"><span data-stu-id="2077d-680">A second possibility is toouse a large VM that can have many disks attached, for example a D14 with 32VHDs.</span></span> <span data-ttu-id="2077d-681">使用儲存空間 toobuild 彈性的環境，您無法建立共用，會再做為備份目標 hello 不同 DBMS 伺服器使用。</span><span class="sxs-lookup"><span data-stu-id="2077d-681">Use Storage Spaces toobuild a flexible environment where you could build shares that are used then as backup targets for hello different DBMS servers.</span></span>

<span data-ttu-id="2077d-682">[這裡](https://blogs.msdn.com/b/sqlcat/archive/2015/02/26/large-sql-server-database-backup-on-an-azure-vm-and-archiving.aspx) 也記載了一些最佳做法。</span><span class="sxs-lookup"><span data-stu-id="2077d-682">Some best practices got documented [here](https://blogs.msdn.com/b/sqlcat/archive/2015/02/26/large-sql-server-database-backup-on-an-azure-vm-and-archiving.aspx) as well.</span></span> 

#### <a name="performance-considerations-for-backupsrestores"></a><span data-ttu-id="2077d-683">備份/還原的效能考量</span><span class="sxs-lookup"><span data-stu-id="2077d-683">Performance considerations for backups/restores</span></span>
<span data-ttu-id="2077d-684">裸機部署，如同備份/還原效能是取決於磁碟區數目可以讀取以平行方式，而且這些磁碟區的哪些 hello 輸送量可能。</span><span class="sxs-lookup"><span data-stu-id="2077d-684">As in bare-metal deployments, backup/restore performance is dependent on how many volumes can be read in parallel and what hello throughput of those volumes might be.</span></span> <span data-ttu-id="2077d-685">此外，hello 備份壓縮所使用的 CPU 耗用量可能相當重要的角色上播放的 Vm 只向上 tooeight CPU 執行緒。</span><span class="sxs-lookup"><span data-stu-id="2077d-685">In addition, hello CPU consumption used by backup compression may play a significant role on VMs with just up tooeight CPU threads.</span></span> <span data-ttu-id="2077d-686">因此，您可以假設︰</span><span class="sxs-lookup"><span data-stu-id="2077d-686">Therefore, one can assume:</span></span>

* <span data-ttu-id="2077d-687">hello 較少的磁碟 hello 數目使用 toostore hello 資料檔案，hello 較小 hello 中讀取的整體輸送量。</span><span class="sxs-lookup"><span data-stu-id="2077d-687">hello fewer hello number of disks used toostore hello data files, hello smaller hello overall throughput in reading.</span></span>
* <span data-ttu-id="2077d-688">hello 數目較少 hello hello VM 中的 CPU 執行緒，hello 更嚴重 hello 備份壓縮的影響。</span><span class="sxs-lookup"><span data-stu-id="2077d-688">hello smaller hello number of CPU threads in hello VM, hello more severe hello impact of backup compression.</span></span>
* <span data-ttu-id="2077d-689">hello （Blob、 Vhd 或磁碟） 的目標 toowrite hello 來備份、 hello 較小者 hello 輸送量。</span><span class="sxs-lookup"><span data-stu-id="2077d-689">hello fewer targets (BLOBs, VHDs, or disks) toowrite hello backup to, hello lesser hello throughput.</span></span>
* <span data-ttu-id="2077d-690">hello 小 hello VM 大小，hello 小 hello 儲存體輸送量配額寫入和讀取從 Azure 儲存體。</span><span class="sxs-lookup"><span data-stu-id="2077d-690">hello smaller hello VM size, hello smaller hello storage throughput quota writing and reading from Azure Storage.</span></span> <span data-ttu-id="2077d-691">Hello 備份是否直接儲存在 Azure Blob 上或儲存在一次在 Azure Blob 中儲存的 Vhd 是否與無關。</span><span class="sxs-lookup"><span data-stu-id="2077d-691">Independent of whether hello backups are directly stored on Azure Blob or whether they are stored in VHDs that again are stored in Azure Blobs.</span></span>

<span data-ttu-id="2077d-692">時使用 Microsoft Azure 儲存體 BLOB 做為較新版本中的 hello 備份目標，您必須針對每個特定的備份限制的 toodesignating 只有一個 URL 目標。</span><span class="sxs-lookup"><span data-stu-id="2077d-692">When using a Microsoft Azure Storage BLOB as hello backup target in more recent releases, you are restricted toodesignating only one URL target for each specific backup.</span></span>

<span data-ttu-id="2077d-693">但當使用 hello 'Microsoft SQL Server Backup tooMicrosoft Azure 工具' 中的較舊版本中，您可以定義多個檔案目標。</span><span class="sxs-lookup"><span data-stu-id="2077d-693">But when using hello ‘Microsoft SQL Server Backup tooMicrosoft Azure Tool’ in older releases, you can define more than one file target.</span></span> <span data-ttu-id="2077d-694">具有多個目標，hello 備份規模和 hello hello 備份的輸送量較高。</span><span class="sxs-lookup"><span data-stu-id="2077d-694">With more than one target, hello backup can scale and hello throughput of hello backup is higher.</span></span> <span data-ttu-id="2077d-695">這會導致再也在 hello Azure 儲存體帳戶中的多個檔案。</span><span class="sxs-lookup"><span data-stu-id="2077d-695">This would result then in multiple files as well in hello Azure Storage account.</span></span> <span data-ttu-id="2077d-696">在我們的測試，使用其中一個絕對可以達到 hello 輸送量，其中達到使用 hello 備份延伸模組的多個檔案目的地中從 SQL Server 2012 SP1 CU4 上實作。</span><span class="sxs-lookup"><span data-stu-id="2077d-696">In our testing, using multiple file destinations one can definitely achieve hello throughput, which one could achieve with hello backup extensions implemented in from SQL Server 2012 SP1 CU4 on.</span></span> <span data-ttu-id="2077d-697">您也不會封鎖 hello 1 TB 限制與 hello 原生備份至 Azure。</span><span class="sxs-lookup"><span data-stu-id="2077d-697">You also are not blocked by hello 1TB limit as in hello native backup into Azure.</span></span>

<span data-ttu-id="2077d-698">不過，請記住，hello 輸送量也取決於 hello hello hello 備份所使用的 Azure 儲存體帳戶位置。</span><span class="sxs-lookup"><span data-stu-id="2077d-698">However, keep in mind, hello throughput also is dependent on hello location of hello Azure Storage Account you use for hello backup.</span></span> <span data-ttu-id="2077d-699">了解可能 toolocate hello 儲存體帳戶以外的不同區域 hello Vm 正在執行中。</span><span class="sxs-lookup"><span data-stu-id="2077d-699">An idea might be toolocate hello storage account in a different region than hello VMs are running in.</span></span> <span data-ttu-id="2077d-700">例如，您會在西歐，執行 hello VM 組態，但將 hello 對付 tooback 用於北歐的儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="2077d-700">For example you would run hello VM configuration in West-Europe, but put hello Storage Account that you use tooback up against in North-Europe.</span></span> <span data-ttu-id="2077d-701">當然有 hello 備份輸送量的影響也不太可能 toogenerate 每秒 150MB 的輸送量因為似乎 toobe hello 目標儲存體和 hello Vm 在 hello 執行所在的案例中可能有相同的地區資料中心。</span><span class="sxs-lookup"><span data-stu-id="2077d-701">That certainly has an impact on hello backup throughput and is not likely toogenerate a throughput of 150MB/sec as it seems toobe possible in cases where hello target storage and hello VMs are running in hello same regional datacenter.</span></span>

#### <a name="managing-backup-blobs"></a><span data-ttu-id="2077d-702">管理備份 BLOB</span><span class="sxs-lookup"><span data-stu-id="2077d-702">Managing Backup BLOBs</span></span>
<span data-ttu-id="2077d-703">沒有自己的需求 toomanage hello 備份。</span><span class="sxs-lookup"><span data-stu-id="2077d-703">There is a requirement toomanage hello backups on your own.</span></span> <span data-ttu-id="2077d-704">由於許多 blob 會藉由執行頻繁的交易記錄備份建立 hello 預期的情況下，管理 blob 輕鬆可以運作 hello Azure 入口網站。</span><span class="sxs-lookup"><span data-stu-id="2077d-704">Since hello expectation is that many blobs are created by executing frequent transaction log backups, administration of those blobs easily can overburden hello Azure portal.</span></span> <span data-ttu-id="2077d-705">因此，它是時 tooleverage Azure 儲存體總管。</span><span class="sxs-lookup"><span data-stu-id="2077d-705">Therefore, it is recommendable tooleverage an Azure storage explorer.</span></span> <span data-ttu-id="2077d-706">有數個類好工具可用，可協助 toomanage Azure 儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="2077d-706">There are several good ones available, which can help toomanage an Azure storage account</span></span>

* <span data-ttu-id="2077d-707">安裝 Azure SDK 的 Microsoft Visual Studio (<https://azure.microsoft.com/downloads/>)</span><span class="sxs-lookup"><span data-stu-id="2077d-707">Microsoft Visual Studio with Azure SDK installed (<https://azure.microsoft.com/downloads/>)</span></span>
* <span data-ttu-id="2077d-708">Microsoft Azure 儲存體總管 (<https://azure.microsoft.com/downloads/>)</span><span class="sxs-lookup"><span data-stu-id="2077d-708">Microsoft Azure Storage Explorer (<https://azure.microsoft.com/downloads/>)</span></span>
* <span data-ttu-id="2077d-709">第三方工具</span><span class="sxs-lookup"><span data-stu-id="2077d-709">Third party tools</span></span>

<span data-ttu-id="2077d-710">如需備份及 Azure 上的 SAP 的更完整討論，請參閱太[hello SAP 備份指南](sap-hana-backup-guide.md)如需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="2077d-710">For a more complete discussion of Backup and SAP on Azure, refer too[hello SAP Backup Guide](sap-hana-backup-guide.md) for more information.</span></span>

### <span data-ttu-id="2077d-711"><a name="1b353e38-21b3-4310-aeb6-a77e7c8e81c8"></a>使用 SQL Server 映像，從 Microsoft Azure Marketplace hello</span><span class="sxs-lookup"><span data-stu-id="2077d-711"><a name="1b353e38-21b3-4310-aeb6-a77e7c8e81c8"></a>Using a SQL Server image out of hello Microsoft Azure Marketplace</span></span>
<span data-ttu-id="2077d-712">Microsoft 提供 hello 尚未包含的 SQL Server 版本的 Azure Marketplace 中的 Vm。</span><span class="sxs-lookup"><span data-stu-id="2077d-712">Microsoft offers VMs in hello Azure Marketplace, which already contain versions of SQL Server.</span></span> <span data-ttu-id="2077d-713">對於需要 SQL Server 和 Windows 的授權的 SAP 客戶，這可能是由已安裝的 SQL server Vm，大致授權機會 toobasically 封面 hello 需求。</span><span class="sxs-lookup"><span data-stu-id="2077d-713">For SAP customers who require licenses for SQL Server and Windows, this might be an opportunity toobasically cover hello need for licenses by spinning up VMs with SQL Server already installed.</span></span> <span data-ttu-id="2077d-714">在訂單 toouse for SAP，這類映像 hello 下列考量需要 toobe 進行：</span><span class="sxs-lookup"><span data-stu-id="2077d-714">In order toouse such images for SAP, hello following considerations need toobe made:</span></span>

* <span data-ttu-id="2077d-715">hello SQL Server 非評估版取得的成本會高於只 ' 僅限 Windows' 部署的 VM 從 Azure Marketplace。</span><span class="sxs-lookup"><span data-stu-id="2077d-715">hello SQL Server non-Evaluation versions acquire higher costs than just a ‘Windows-only’ VM deployed from Azure Marketplace.</span></span> <span data-ttu-id="2077d-716">請參閱下列文章 toocompare 價格： <https://azure.microsoft.com/pricing/details/virtual-machines/windows/>和<https://azure.microsoft.com/pricing/details/virtual-machines/sql-server-enterprise/>。</span><span class="sxs-lookup"><span data-stu-id="2077d-716">See these articles toocompare prices: <https://azure.microsoft.com/pricing/details/virtual-machines/windows/> and <https://azure.microsoft.com/pricing/details/virtual-machines/sql-server-enterprise/>.</span></span> 
* <span data-ttu-id="2077d-717">您只能使用 SAP 支援的 SQL Server 版本，例如 SQL Server 2012。</span><span class="sxs-lookup"><span data-stu-id="2077d-717">You only can use SQL Server releases, which are supported by SAP, like SQL Server 2012.</span></span>
* <span data-ttu-id="2077d-718">hello SQL Server 執行個體，會將其安裝在 hello hello Azure Marketplace 中提供的 Vm 中的 hello 定序不是 hello 定序的 SAP NetWeaver 需要 hello SQL Server 執行個體 toorun。</span><span class="sxs-lookup"><span data-stu-id="2077d-718">hello collation of hello SQL Server instance, which is installed in hello VMs offered in hello Azure Marketplace is not hello collation SAP NetWeaver requires hello SQL Server instance toorun.</span></span> <span data-ttu-id="2077d-719">您可以變更 hello 定序，但仍有 hello hello 之後 > 一節中的指示進行。</span><span class="sxs-lookup"><span data-stu-id="2077d-719">You can change hello collation though with hello directions in hello following section.</span></span>

#### <a name="changing-hello-sql-server-collation-of-a-microsoft-windowssql-server-vm"></a><span data-ttu-id="2077d-720">變更 hello 的 Microsoft Windows/SQL Server VM 的 SQL Server 定序</span><span class="sxs-lookup"><span data-stu-id="2077d-720">Changing hello SQL Server Collation of a Microsoft Windows/SQL Server VM</span></span>
<span data-ttu-id="2077d-721">Hello hello Azure Marketplace 中的 SQL Server 映像未設定 toouse hello 定序所需的 SAP NetWeaver 應用程式，因為它需要 toobe hello 部署之後立即變更。</span><span class="sxs-lookup"><span data-stu-id="2077d-721">Since hello SQL Server images in hello Azure Marketplace are not set up toouse hello collation, which is required by SAP NetWeaver applications, it needs toobe changed immediately after hello deployment.</span></span> <span data-ttu-id="2077d-722">SQL Server 2012，作法是以 hello 下列步驟儘速 hello 已部署 VM，並且系統管理員可以到 hello toolog 部署 VM:</span><span class="sxs-lookup"><span data-stu-id="2077d-722">For SQL Server 2012, this can be done with hello following steps as soon as hello VM has been deployed and an administrator is able toolog into hello deployed VM:</span></span>

* <span data-ttu-id="2077d-723">以「系統管理員身分」開啟 Windows 命令視窗。</span><span class="sxs-lookup"><span data-stu-id="2077d-723">Open a Windows Command Window ‘as administrator’.</span></span>
* <span data-ttu-id="2077d-724">變更 hello 目錄 tooC:\Program Files\Microsoft SQL Server\110\Setup Bootstrap\SQLServer2012。</span><span class="sxs-lookup"><span data-stu-id="2077d-724">Change hello directory tooC:\Program Files\Microsoft SQL Server\110\Setup Bootstrap\SQLServer2012.</span></span>
* <span data-ttu-id="2077d-725">執行 hello 命令： Setup.exe /QUIET /ACTION = REBUILDDATABASE /INSTANCENAME = MSSQLSERVER /SQLSYSADMINACCOUNTS =`<local_admin_account_name`> /SQLCOLLATION = SQL_Latin1_General_Cp850_BIN2</span><span class="sxs-lookup"><span data-stu-id="2077d-725">Execute hello command: Setup.exe /QUIET /ACTION=REBUILDDATABASE /INSTANCENAME=MSSQLSERVER /SQLSYSADMINACCOUNTS=`<local_admin_account_name`> /SQLCOLLATION=SQL_Latin1_General_Cp850_BIN2</span></span>   
  * <span data-ttu-id="2077d-726">`<local_admin_account_name`> 是 hello 帳戶，透過 hello 圖庫的第一次部署的 hello hello VM 時定義為 hello 系統管理員帳戶。</span><span class="sxs-lookup"><span data-stu-id="2077d-726">`<local_admin_account_name`> is hello account, which was defined as hello administrator account when deploying hello VM for hello first time through hello gallery.</span></span>

<span data-ttu-id="2077d-727">hello 程序應該只需要幾分鐘的時間。</span><span class="sxs-lookup"><span data-stu-id="2077d-727">hello process should only take a few minutes.</span></span> <span data-ttu-id="2077d-728">在確定的順序 toomake hello 步驟結果 hello 正確的結果，是否將執行 hello 下列步驟：</span><span class="sxs-lookup"><span data-stu-id="2077d-728">In order toomake sure whether hello step ended up with hello correct result, perform hello following steps:</span></span>

* <span data-ttu-id="2077d-729">開啟 SQL Server Management Studio。</span><span class="sxs-lookup"><span data-stu-id="2077d-729">Open SQL Server Management Studio.</span></span>
* <span data-ttu-id="2077d-730">開啟查詢視窗。</span><span class="sxs-lookup"><span data-stu-id="2077d-730">Open a Query Window.</span></span>
* <span data-ttu-id="2077d-731">Hello SQL Server master 資料庫中，執行 sp_helpsort hello 命令。</span><span class="sxs-lookup"><span data-stu-id="2077d-731">Execute hello command sp_helpsort in hello SQL Server master database.</span></span>

<span data-ttu-id="2077d-732">hello 預期的結果應該如下：</span><span class="sxs-lookup"><span data-stu-id="2077d-732">hello desired result should look like:</span></span>

    Latin1-General, binary code point comparison sort for Unicode Data, SQL Server Sort Order 40 on Code Page 850 for non-Unicode Data

<span data-ttu-id="2077d-733">如果這不是 hello 結果，停止 」 部署 SAP，並調查為什麼 hello setup 命令未正常運作。</span><span class="sxs-lookup"><span data-stu-id="2077d-733">If this is not hello result, STOP deploying SAP and investigate why hello setup command did not work as expected.</span></span> <span data-ttu-id="2077d-734">部署到具有不同的 SQL Server 字碼頁之 SQL Server 執行個體上的 SAP NetWeaver 應用程式比 hello 上面所述的其中一個是**不**支援。</span><span class="sxs-lookup"><span data-stu-id="2077d-734">Deployment of SAP NetWeaver applications onto SQL Server instance with different SQL Server codepages than hello one mentioned above is **NOT** supported.</span></span>

### <a name="sql-server-high-availability-for-sap-in-azure"></a><span data-ttu-id="2077d-735">SQL Server 在 Azure 中適用於 SAP 的高可用性</span><span class="sxs-lookup"><span data-stu-id="2077d-735">SQL Server High-Availability for SAP in Azure</span></span>
<span data-ttu-id="2077d-736">如本文稍早所述，所需 hello hello 最舊的 SQL Server 高可用性功能使用方式的任何可能性 toocreate 共用存放裝置。</span><span class="sxs-lookup"><span data-stu-id="2077d-736">As mentioned earlier in this paper, there is no possibility toocreate shared storage, which is necessary for hello usage of hello oldest SQL Server high availability functionality.</span></span> <span data-ttu-id="2077d-737">這項功能會安裝在 Windows Server 容錯移轉叢集 (WSFC) hello 使用者資料庫 （以及最終 tempdb） 使用的共用的磁碟的兩個或多個 SQL Server 執行個體。</span><span class="sxs-lookup"><span data-stu-id="2077d-737">This functionality would install two or more SQL Server instances in a Windows Server Failover Cluster (WSFC) using a shared disk for hello user databases (and eventually tempdb).</span></span> <span data-ttu-id="2077d-738">這是 hello 很長的時間標準的高可用性方法，這也會受到 SAP。</span><span class="sxs-lookup"><span data-stu-id="2077d-738">This is hello long time standard high availability method, which also is supported by SAP.</span></span> <span data-ttu-id="2077d-739">由於 Azure 不支援共用儲存體，所以無法實現具有共用磁碟叢集組態的 SQL Server 高可用性組態。</span><span class="sxs-lookup"><span data-stu-id="2077d-739">Because Azure doesn’t support shared storage, SQL Server high availability configurations with a shared disk cluster configuration cannot be realized.</span></span> <span data-ttu-id="2077d-740">不過，許多其他高可用性方法仍可能發生而且 hello 下列各節所述。</span><span class="sxs-lookup"><span data-stu-id="2077d-740">However, many other high availability methods are still possible and are described in hello following sections.</span></span>

#### <a name="sql-server-log-shipping"></a><span data-ttu-id="2077d-741">SQL Server 記錄傳送</span><span class="sxs-lookup"><span data-stu-id="2077d-741">SQL Server Log Shipping</span></span>
<span data-ttu-id="2077d-742">其中一個高可用性 (HA) hello 方法是 SQL Server 記錄傳送。</span><span class="sxs-lookup"><span data-stu-id="2077d-742">One of hello methods of high availability (HA) is SQL Server Log Shipping.</span></span> <span data-ttu-id="2077d-743">如果 hello 參與 hello HA 組態的 Vm 具有運作中的名稱解析，是沒有問題，並在 Azure 中的 hello 安裝程式，與沒有差異是在內部部署的任何設定。</span><span class="sxs-lookup"><span data-stu-id="2077d-743">If hello VMs participating in hello HA configuration have working name resolution, there is no problem and hello setup in Azure does not differ from any setup that is done on-premises.</span></span> <span data-ttu-id="2077d-744">不建議 toorely 上只有 IP 解析。</span><span class="sxs-lookup"><span data-stu-id="2077d-744">It is not recommended toorely on IP resolution only.</span></span> <span data-ttu-id="2077d-745">使用記錄傳送和 hello 記錄傳送原則的相關事宜 toosetting，檢查這份文件：</span><span class="sxs-lookup"><span data-stu-id="2077d-745">With regards toosetting up Log Shipping and hello principles around Log Shipping, check this documentation:</span></span>

<span data-ttu-id="2077d-746"><https://docs.microsoft.com/sql/database-engine/log-shipping/about-log-shipping-sql-server></span><span class="sxs-lookup"><span data-stu-id="2077d-746"><https://docs.microsoft.com/sql/database-engine/log-shipping/about-log-shipping-sql-server></span></span>

<span data-ttu-id="2077d-747">順序 tooreally 達成任何高可用性，您需要 toodeploy hello 是中的這類記錄傳送組態 toobe 內 hello 相同 Azure 可用性設定組的 Vm。</span><span class="sxs-lookup"><span data-stu-id="2077d-747">In order tooreally achieve any high availability, one needs toodeploy hello VMs, which are within such a Log Shipping configuration toobe within hello same Azure Availability Set.</span></span>

#### <a name="database-mirroring"></a><span data-ttu-id="2077d-748">資料庫鏡像</span><span class="sxs-lookup"><span data-stu-id="2077d-748">Database Mirroring</span></span>
<span data-ttu-id="2077d-749">SAP 支援的資料庫鏡像 (請參閱 SAP 附註[965908]) 依賴定義 hello SAP 連接字串中的容錯移轉夥伴。</span><span class="sxs-lookup"><span data-stu-id="2077d-749">Database Mirroring as supported by SAP (see SAP Note [965908]) relies on defining a failover partner in hello SAP connection string.</span></span> <span data-ttu-id="2077d-750">Hello 跨單位的情況下，我們假設該 hello 兩個 Vm 會在 hello 相同的網域和該 hello 使用者內容 hello 兩個 SQL Server 執行個體的網域使用者之下執行，並有足夠的權限相關的 hello 兩個 SQL Server 執行個體中。</span><span class="sxs-lookup"><span data-stu-id="2077d-750">For hello Cross-Premises cases, we assume that hello two VMs are in hello same domain and that hello user context hello two SQL Server instances are running under a domain user as well and have sufficient privileges in hello two SQL Server instances involved.</span></span> <span data-ttu-id="2077d-751">因此，資料庫鏡像在 Azure 中的 hello 安裝程式會相同典型的內部部署安裝程式組態。</span><span class="sxs-lookup"><span data-stu-id="2077d-751">Therefore, hello setup of Database Mirroring in Azure does not differ between a typical on-premises setup/configuration.</span></span>

<span data-ttu-id="2077d-752">為僅限雲端部署的 hello 簡單的方法是 toohave 另一個網域安裝程式在 Azure toohave 那些 DBMS Vm （和最好是專用的 SAP Vm） 單一網域內。</span><span class="sxs-lookup"><span data-stu-id="2077d-752">As of Cloud-Only deployments, hello easiest method is toohave another domain setup in Azure toohave those DBMS VMs (and ideally dedicated SAP VMs) within one domain.</span></span>

<span data-ttu-id="2077d-753">如果網域不可行，其中也可以使用憑證 hello 資料庫鏡像端點，如下所述： <https://docs.microsoft.com/sql/database-engine/database-mirroring/use-certificates-for-a-database-mirroring-endpoint-transact-sql></span><span class="sxs-lookup"><span data-stu-id="2077d-753">If a domain is not possible, one can also use certificates for hello database mirroring endpoints as described here: <https://docs.microsoft.com/sql/database-engine/database-mirroring/use-certificates-for-a-database-mirroring-endpoint-transact-sql></span></span>

<span data-ttu-id="2077d-754">在 Azure 中的資料庫鏡像的教學課程 tooset 可以在這裡找到： <https://docs.microsoft.com/sql/database-engine/database-mirroring/database-mirroring-sql-server></span><span class="sxs-lookup"><span data-stu-id="2077d-754">A tutorial tooset up Database Mirroring in Azure can be found here: <https://docs.microsoft.com/sql/database-engine/database-mirroring/database-mirroring-sql-server></span></span> 

#### <a name="sql-server-always-on"></a><span data-ttu-id="2077d-755">SQL Server Always On</span><span class="sxs-lookup"><span data-stu-id="2077d-755">SQL Server Always On</span></span>
<span data-ttu-id="2077d-756">Alwayson 支援 SAP 內部部署 (請參閱 SAP 附註[1772688])，它是用於結合，以在 Azure 中 SAP 支援的 toobe。</span><span class="sxs-lookup"><span data-stu-id="2077d-756">As Always On is supported for SAP on-premises (see SAP Note [1772688]), it is supported toobe used in combination with SAP in Azure.</span></span> <span data-ttu-id="2077d-757">您不能共用的 toocreate 磁碟在 Azure 中的 hello 事實並不表示其中一個無法建立不同的 Vm 之間一律在 Windows Server 容錯移轉叢集 (WSFC) 組態。</span><span class="sxs-lookup"><span data-stu-id="2077d-757">hello fact that you are not able toocreate shared disks in Azure doesn’t mean that one can’t create an Always On Windows Server Failover Cluster (WSFC) configuration between different VMs.</span></span> <span data-ttu-id="2077d-758">這只表示，您不需要 hello 可能性 toouse 共用的磁碟做為仲裁 hello 叢集組態中。</span><span class="sxs-lookup"><span data-stu-id="2077d-758">It only means that you do not have hello possibility toouse a shared disk as a quorum in hello cluster configuration.</span></span> <span data-ttu-id="2077d-759">因此，您可以建置在 Azure 中的 Alwayson WSFC 上設定，並只需不選取利用共用的磁碟的 hello 仲裁類型。</span><span class="sxs-lookup"><span data-stu-id="2077d-759">Hence you can build an Always On WSFC configuration in Azure and simply not select hello quorum type that utilizes shared disk.</span></span> <span data-ttu-id="2077d-760">hello Azure 環境來部署那些 Vm 中依名稱 hello Vm 再 hello Vm 應該在 hello 應該可以解決相同的網域。</span><span class="sxs-lookup"><span data-stu-id="2077d-760">hello Azure environment those VMs are deployed in should resolve hello VMs by name and hello VMs should be in hello same domain.</span></span> <span data-ttu-id="2077d-761">這適用於僅限 Azure 和跨單位部署。</span><span class="sxs-lookup"><span data-stu-id="2077d-761">This is true for Azure only and Cross-Premises deployments.</span></span> <span data-ttu-id="2077d-762">有一些特殊考量部署 hello SQL Server 可用性群組接聽程式 (不 toobe 與 hello Azure 可用性設定組混淆) 因為 toosimply 因為 Azure 在此時間點不允許建立 AD/DNS 物件內部部署。</span><span class="sxs-lookup"><span data-stu-id="2077d-762">There are some special considerations around deploying hello SQL Server Availability Group Listener (not toobe confused with hello Azure Availability Set) since Azure at this point in time does not allow toosimply create an AD/DNS object as it is possible on-premises.</span></span> <span data-ttu-id="2077d-763">因此，執行一些不同的安裝步驟是必要 tooovercome Azure 的 hello 特定行為。</span><span class="sxs-lookup"><span data-stu-id="2077d-763">Therefore, some different installation steps are necessary tooovercome hello specific behavior of Azure.</span></span>

<span data-ttu-id="2077d-764">以下是使用可用性群組接聽程式的一些考量︰</span><span class="sxs-lookup"><span data-stu-id="2077d-764">Some considerations using an Availability Group Listener are:</span></span>

* <span data-ttu-id="2077d-765">使用可用性群組接聽程式是 hello 的僅能與 Windows Server 2012 或更高版本，做為客體作業系統 VM。</span><span class="sxs-lookup"><span data-stu-id="2077d-765">Using an Availability Group Listener is only possible with Windows Server 2012 or higher as guest OS of hello VM.</span></span> <span data-ttu-id="2077d-766">適用於 Windows Server 2012 中，您必須確保已套用這個修補程式 toomake: <https://support.microsoft.com/kb/2854082></span><span class="sxs-lookup"><span data-stu-id="2077d-766">For Windows Server 2012 you need toomake sure that this patch is applied: <https://support.microsoft.com/kb/2854082></span></span> 
* <span data-ttu-id="2077d-767">Windows Server 2008 R2 本修補檔不存在，而且需要 Alwayson toobe 用於 hello 相同做為資料庫鏡像的方式指定 hello 連接字串中的容錯移轉夥伴 （完成透過 hello SAP default.pfl 參數 dbs/mss/server – 請參閱 SAP 附註[965908])。</span><span class="sxs-lookup"><span data-stu-id="2077d-767">For Windows Server 2008 R2 this patch does not exist and Always On would need toobe used in hello same manner as Database Mirroring by specifying a failover partner in hello connections string (done through hello SAP default.pfl parameter dbs/mss/server – see SAP Note [965908]).</span></span>
* <span data-ttu-id="2077d-768">當使用可用性群組接聽程式、 hello 資料庫 Vm 需要連接 toobe tooa 專用負載平衡器。</span><span class="sxs-lookup"><span data-stu-id="2077d-768">When using an Availability Group Listener, hello Database VMs need toobe connected tooa dedicated Load Balancer.</span></span> <span data-ttu-id="2077d-769">名稱解析，僅限雲端部署中的可能會要求所有 Vm 的 SAP 系統 （應用程式伺服器、 DBMS 伺服器和 (A) SCS 伺服器） 會在 hello 相同虛擬網路，或都需要從 hello etc\host 檔案中的 SAP 應用程式層 hello 維護順序 tooget hello VM 的名稱解析的 hello SQL Server Vm。</span><span class="sxs-lookup"><span data-stu-id="2077d-769">Name resolution in Cloud-Only deployments would either require all VMs of an SAP system (application servers, DBMS server, and (A)SCS server) are in hello same virtual network or would require from an SAP application layer hello maintenance of hello etc\host file in order tooget hello VM names of hello SQL Server VMs resolved.</span></span> <span data-ttu-id="2077d-770">順序 tooavoid Azure 指派新的 IP 位址，在其中兩個 Vm 都關機的情況下，在其中一個應該指派靜態 IP 位址的 hello Always On （定義組態所述的靜態 IP 位址中的那些 Vm toohello 網路介面[這][ virtual-networks-reserved-private-ip]文章)</span><span class="sxs-lookup"><span data-stu-id="2077d-770">In order tooavoid that Azure is assigning new IP addresses in cases where both VMs incidentally are shutdown, one should assign static IP addresses toohello network interfaces of those VMs in hello Always On configuration (defining a static IP address is described in [this][virtual-networks-reserved-private-ip] article)</span></span>

[comment]: <> (舊部落格)
[comment]: <> (<https://blogs.msdn.com/b/alwaysonpro/archive/2014/08/29/recommendations-and-best-practices-when-deploying-sql-server-alwayson-availability-groups-in-windows-azure-iaas.aspx>, <https://blogs.technet.com/b/rmilne/archive/2015/07/27/how-to-set-static-ip-on-azure-vm.aspx>) 
* <span data-ttu-id="2077d-773">不需要建置 hello WSFC 叢集組態中的 hello 叢集需要特殊的 IP 位址指派時，因為 Azure 及其目前功能會指派 hello 叢集名稱的特殊步驟 hello hello 節點 hello 叢集相同的 IP 位址上建立。</span><span class="sxs-lookup"><span data-stu-id="2077d-773">There are special steps required when building hello WSFC cluster configuration where hello cluster needs a special IP address assigned, because Azure with its current functionality would assign hello cluster name hello same IP address as hello node hello cluster is created on.</span></span> <span data-ttu-id="2077d-774">這表示手動步驟必須是執行的 tooassign 不同的 IP 位址 toohello 叢集。</span><span class="sxs-lookup"><span data-stu-id="2077d-774">This means a manual step must be performed tooassign a different IP address toohello cluster.</span></span>
* <span data-ttu-id="2077d-775">hello 可用性群組接聽程式正在 toobe 具有 TCP/IP 端點，會指派執行 hello hello 可用性群組的主要和次要複本的 toohello Vm 在 Azure 中建立。</span><span class="sxs-lookup"><span data-stu-id="2077d-775">hello Availability Group Listener is going toobe created in Azure with TCP/IP endpoints, which are assigned toohello VMs running hello primary and secondary replicas of hello Availability group.</span></span>
* <span data-ttu-id="2077d-776">可能有需要 toosecure 這些端點，其中包含 Acl。</span><span class="sxs-lookup"><span data-stu-id="2077d-776">There might be a need toosecure these endpoints with ACLs.</span></span>

[comment]: <> (TODO 舊部落格)
[comment]: <> (hello 詳細的步驟和逐步解說 hello 教學課程可以使用 [here][virtual-machines-windows-classic-ps-sql-alwayson-availability-groups] 時，最佳遇到必要條件安裝在 Azure 上的 AlwaysOn 組態)
[comment]: <> (預先設定透過 hello Azure 組件庫的 AlwaysOn 安裝程式 < https://blogs.technet.com/b/dataplatforminsider/archive/2014/08/25/sql-server-alwayson-offering-in-microsoft-azure-portal-gallery.aspx>)
[comment]: <> ([這個][virtual-machines-windows-classic-ps-sql-int-listener] 教學課程提供建立「可用性群組接聽程式」的最佳說明)
[comment]: <> (以下提供使用 ACL 來保護網路端點的最佳說明：)
[comment]: <> (*    <https://michaelwasham.com/windows-azure-powershell-reference-guide/network-access-control-list-capability-in-windows-azure-powershell/>)
[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/08/31/weekend-scripter-creating-acls-for-windows-azure-endpoints-part-1-of-2.aspx> )
[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/09/01/weekend-scripter-creating-acls-for-windows-azure-endpoints-part-2-of-2.aspx>)  
[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/09/18/creating-acls-for-windows-azure-endpoints.aspx>) 

<span data-ttu-id="2077d-786">透過不同的 Azure 區域也是可能 toodeploy SQL Server Alwayson 可用性群組。</span><span class="sxs-lookup"><span data-stu-id="2077d-786">It is possible toodeploy a SQL Server Always On Availability Group over different Azure Regions as well.</span></span> <span data-ttu-id="2077d-787">這項功能會利用 hello Azure 是 「 VNet 對 Vnet 連線能力 ([詳細][virtual-networks-configure-vnet-to-vnet-connection])。</span><span class="sxs-lookup"><span data-stu-id="2077d-787">This functionality leverages hello Azure VNet-to-Vnet connectivity ([more details][virtual-networks-configure-vnet-to-vnet-connection]).</span></span>

[comment]: <> (TODO 舊部落格)
[comment]: <> (此處所述的 SQL Server AlwaysOn 可用性群組在此案例中的 hello 安裝程式： < https://blogs.technet.com/b/dataplatforminsider/archive/2014/06/19/sql-server-alwayson-availability-groups-supported-between-microsoft-azure-regions.aspx>。) 

#### <a name="summary-on-sql-server-high-availability-in-azure"></a><span data-ttu-id="2077d-790">Azure 中 SQL Server 高可用性的摘要</span><span class="sxs-lookup"><span data-stu-id="2077d-790">Summary on SQL Server High Availability in Azure</span></span>
<span data-ttu-id="2077d-791">指定 Azure 儲存體會保護 hello 內容 hello 事實，沒有一個較少因此 tooinsist 熱待命映像。</span><span class="sxs-lookup"><span data-stu-id="2077d-791">Given hello fact that Azure Storage is protecting hello content, there is one less reason tooinsist on a hot-standby image.</span></span> <span data-ttu-id="2077d-792">這表示您的高可用性案例需要 tooonly 防範 hello 下列案例：</span><span class="sxs-lookup"><span data-stu-id="2077d-792">This means your High Availability scenario needs tooonly protect against hello following cases:</span></span>

* <span data-ttu-id="2077d-793">因為在 Azure 中的 hello 伺服器叢集上 toomaintenance 或其他原因整個 hello VM 無法使用</span><span class="sxs-lookup"><span data-stu-id="2077d-793">Unavailability of hello VM as a whole due toomaintenance on hello server cluster in Azure or other reasons</span></span>
* <span data-ttu-id="2077d-794">Hello SQL Server 執行個體中的軟體問題</span><span class="sxs-lookup"><span data-stu-id="2077d-794">Software issues in hello SQL Server instance</span></span>
* <span data-ttu-id="2077d-795">防止發生資料遭到刪除而需要進行時間點復原的手動錯誤</span><span class="sxs-lookup"><span data-stu-id="2077d-795">Protecting from manual error where data gets deleted and point-in-time recovery is needed</span></span>

<span data-ttu-id="2077d-796">尋找符合綜觀 hello 前兩個案例可以依照資料庫鏡像或 Always On 而 hello 第三個案例只可以涵蓋記錄傳送的技術。</span><span class="sxs-lookup"><span data-stu-id="2077d-796">Looking at matching technologies one can argue that hello first two cases can be covered by Database Mirroring or Always On, whereas hello third case only can be covered by Log-Shipping.</span></span>

<span data-ttu-id="2077d-797">您需要 toobalance hello 更複雜的安裝程式的 Always On，比較 tooDatabase 鏡像，與 hello 的 Alwayson 的優點。</span><span class="sxs-lookup"><span data-stu-id="2077d-797">You need toobalance hello more complex setup of Always On, compared tooDatabase Mirroring, with hello advantages of Always On.</span></span> <span data-ttu-id="2077d-798">以下列出這些優點︰</span><span class="sxs-lookup"><span data-stu-id="2077d-798">Those advantages can be listed like:</span></span>

* <span data-ttu-id="2077d-799">可讀取的次要複本。</span><span class="sxs-lookup"><span data-stu-id="2077d-799">Readable secondary replicas.</span></span>
* <span data-ttu-id="2077d-800">來自次要複本的備份。</span><span class="sxs-lookup"><span data-stu-id="2077d-800">Backups from secondary replicas.</span></span>
* <span data-ttu-id="2077d-801">延展性較佳。</span><span class="sxs-lookup"><span data-stu-id="2077d-801">Better scalability.</span></span>
* <span data-ttu-id="2077d-802">一個以上的次要複本。</span><span class="sxs-lookup"><span data-stu-id="2077d-802">More than one secondary replicas.</span></span>

### <span data-ttu-id="2077d-803"><a name="9053f720-6f3b-4483-904d-15dc54141e30"></a>適用於 Azure 上 SAP 的一般 SQL Server 摘要</span><span class="sxs-lookup"><span data-stu-id="2077d-803"><a name="9053f720-6f3b-4483-904d-15dc54141e30"></a>General SQL Server for SAP on Azure Summary</span></span>
<span data-ttu-id="2077d-804">本指南中提供許多建議，而我們建議您在規劃 Azure 部署之前，多次閱讀本指南。</span><span class="sxs-lookup"><span data-stu-id="2077d-804">There are many recommendations in this guide and we recommend you read it more than once before planning your Azure deployment.</span></span> <span data-ttu-id="2077d-805">一般情況下，不過，是確定 toofollow hello Azure 的特定點上的前十個一般 DBMS:</span><span class="sxs-lookup"><span data-stu-id="2077d-805">In general, though, be sure toofollow hello top ten general DBMS on Azure specific points:</span></span>

[comment]: <> (2.3 輸送量比什麼更高？比一個 VHD 高？)
1. <span data-ttu-id="2077d-807">使用 hello 最新 DBMS 版本中的，像是 SQL Server 2014 中，在 Azure 中具有 hello 大部分優點。</span><span class="sxs-lookup"><span data-stu-id="2077d-807">Use hello latest DBMS release, like SQL Server 2014, that has hello most advantages in Azure.</span></span> <span data-ttu-id="2077d-808">SQL Server，這是備份的 SQL Server 2012 SP1 CU4 中，會包括 hello 與 Azure 儲存體功能。</span><span class="sxs-lookup"><span data-stu-id="2077d-808">For SQL Server, this is SQL Server 2012 SP1 CU4, which would include hello feature of backing up against Azure Storage.</span></span> <span data-ttu-id="2077d-809">不過，與 SAP 一起建議至少 SQL Server 2014 SP1 CU1 或 SQL Server 2012 SP2 和 hello 的最新 CU。</span><span class="sxs-lookup"><span data-stu-id="2077d-809">However, in conjunction with SAP we would recommend at least SQL Server 2014 SP1 CU1 or SQL Server 2012 SP2 and hello latest CU.</span></span>
2. <span data-ttu-id="2077d-810">請仔細規劃 SAP 系統版圖中 Azure toobalance hello 資料檔案配置和 Azure 限制：</span><span class="sxs-lookup"><span data-stu-id="2077d-810">Carefully plan your SAP system landscape in Azure toobalance hello data file layout and Azure restrictions:</span></span>
   * <span data-ttu-id="2077d-811">不需要太多的磁碟，但有足夠 tooensure 可以連線到您所需的 IOPS。</span><span class="sxs-lookup"><span data-stu-id="2077d-811">Don’t have too many disks, but have enough tooensure you can reach your required IOPS.</span></span>
   * <span data-ttu-id="2077d-812">如果您未使用受控磁碟，請記住每個「Azure 儲存體帳戶」也都有 IOPS 限制，而且「儲存體帳戶」在每個 Azure 訂用帳戶內是有限的 ([更多詳細資料][azure-subscription-service-limits])。</span><span class="sxs-lookup"><span data-stu-id="2077d-812">If you don't use Managed Disks, remember that IOPS are also limited per Azure Storage Account and that Storage Accounts are limited within each Azure subscription ([more details][azure-subscription-service-limits]).</span></span> 
   * <span data-ttu-id="2077d-813">只有等量磁碟區磁碟，如果您需要 tooachieve 較高的輸送量。</span><span class="sxs-lookup"><span data-stu-id="2077d-813">Only stripe across disks if you need tooachieve a higher throughput.</span></span>
3. <span data-ttu-id="2077d-814">永不安裝軟體，或將任何需要 hello D:\ 磁碟機上的持續性，因為它是不是永久性，而且此磁碟機上的任何項目會在重新啟動 Windows 之後遺失的檔案。</span><span class="sxs-lookup"><span data-stu-id="2077d-814">Never install software or put any files that require persistence on hello D:\ drive as it is non-permanent and anything on this drive is lost at a Windows reboot.</span></span>
4. <span data-ttu-id="2077d-815">不要針對 Azure 標準儲存體使用磁碟快取。</span><span class="sxs-lookup"><span data-stu-id="2077d-815">Don’t use disk caching for Azure Standard Storage.</span></span>
5. <span data-ttu-id="2077d-816">不要使用 Azure 異地備援的儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="2077d-816">Don’t use Azure geo-replicated Storage Accounts.</span></span>  <span data-ttu-id="2077d-817">針對 DBMS 工作負載使用本機備援。</span><span class="sxs-lookup"><span data-stu-id="2077d-817">Use Locally Redundant for DBMS workloads.</span></span>
6. <span data-ttu-id="2077d-818">使用 DBMS 廠商的 HA/DR 解決方案 tooreplicate 資料庫資料。</span><span class="sxs-lookup"><span data-stu-id="2077d-818">Use your DBMS vendor’s HA/DR solution tooreplicate database data.</span></span>
7. <span data-ttu-id="2077d-819">一律使用名稱解析，不要依賴 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="2077d-819">Always use Name Resolution, don’t rely on IP addresses.</span></span>
8. <span data-ttu-id="2077d-820">使用 hello 高的資料庫壓縮可能。</span><span class="sxs-lookup"><span data-stu-id="2077d-820">Use hello highest database compression possible.</span></span> <span data-ttu-id="2077d-821">針對 SQL Server 而言，此為頁面壓縮。</span><span class="sxs-lookup"><span data-stu-id="2077d-821">For SQL Server this is page compression.</span></span>
9. <span data-ttu-id="2077d-822">請小心使用 SQL Server 映像從 hello Azure Marketplace。</span><span class="sxs-lookup"><span data-stu-id="2077d-822">Be careful using SQL Server images from hello Azure Marketplace.</span></span> <span data-ttu-id="2077d-823">如果您使用 hello 其中一個 SQL Server，您必須變更 hello 執行個體定序，才能在其上安裝任何 SAP NetWeaver 系統。</span><span class="sxs-lookup"><span data-stu-id="2077d-823">If you use hello SQL Server one, you must change hello instance collation before installing any SAP NetWeaver system on it.</span></span>
10. <span data-ttu-id="2077d-824">安裝及設定中所述的 SAP Host Monitoring for Azure 的 hello[部署指南 》][deployment-guide]。</span><span class="sxs-lookup"><span data-stu-id="2077d-824">Install and configure hello SAP Host Monitoring for Azure as described in [Deployment Guide][deployment-guide].</span></span>

## <a name="specifics-toosap-ase-on-windows"></a><span data-ttu-id="2077d-825">細節 tooSAP Windows 上 ASE</span><span class="sxs-lookup"><span data-stu-id="2077d-825">Specifics tooSAP ASE on Windows</span></span>
<span data-ttu-id="2077d-826">開始使用 Microsoft Azure，您可以輕鬆地移轉您現有的 SAP ASE 應用程式 tooAzure 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="2077d-826">Starting with Microsoft Azure, you can easily migrate your existing SAP ASE applications tooAzure Virtual Machines.</span></span> <span data-ttu-id="2077d-827">虛擬機器中的 SAP ASE 可輕鬆地將移轉這些應用程式 tooMicrosoft Azure 讓您 tooreduce hello 擁有權總成本的部署、 管理和維護的企業廣度應用程式。</span><span class="sxs-lookup"><span data-stu-id="2077d-827">SAP ASE in a Virtual Machine enables you tooreduce hello total cost of ownership of deployment, management, and maintenance of enterprise breadth applications by easily migrating these applications tooMicrosoft Azure.</span></span> <span data-ttu-id="2077d-828">透過 SAP ASE Azure 虛擬機器中，系統管理員和開發人員仍然可以使用的 hello 可用的相同開發和管理工具內部。</span><span class="sxs-lookup"><span data-stu-id="2077d-828">With SAP ASE in an Azure Virtual Machine, administrators and developers can still use hello same development and administration tools that are available on-premises.</span></span>

<span data-ttu-id="2077d-829">Sla hello Azure 虛擬機器，可以在這裡找到： <https://azure.microsoft.com/support/legal/sla/virtual-machines></span><span class="sxs-lookup"><span data-stu-id="2077d-829">There is an SLA for hello Azure Virtual Machines, which can be found here: <https://azure.microsoft.com/support/legal/sla/virtual-machines></span></span>

<span data-ttu-id="2077d-830">我們確信 Microsoft Azure 代管的虛擬機器會執行很好比較 tooother 公用雲端虛擬化方案，但是個別結果中，可能會不同。</span><span class="sxs-lookup"><span data-stu-id="2077d-830">We are confident that Microsoft Azure hosted Virtual Machines performs very well in comparison tooother public cloud virtualization offerings, but individual results may vary.</span></span> <span data-ttu-id="2077d-831">SAP 調整大小的 SAPS 數字的不同 SAP 認證中個別的 SAP 附註會提供 VM Sku 的 hello [1928533]。</span><span class="sxs-lookup"><span data-stu-id="2077d-831">SAP sizing SAPS numbers of hello different SAP certified VM SKUs is provided in a separate SAP Note [1928533].</span></span>

<span data-ttu-id="2077d-832">陳述式和 Azure 儲存體、 SAP 部署 Vm 或 SAP Monitoring 的建議考慮 toohello 使用量套用 toodeployments 的 SAP ASE 搭配述整個 hello 的這份文件的前四個章節的 SAP 應用程式。</span><span class="sxs-lookup"><span data-stu-id="2077d-832">Statements and recommendations in regard toohello usage of Azure Storage, Deployment of SAP VMs or SAP Monitoring apply toodeployments of SAP ASE in conjunction with SAP applications as stated throughout hello first four chapters of this document.</span></span>

### <a name="sap-ase-version-support"></a><span data-ttu-id="2077d-833">SAP ASE 版本支援</span><span class="sxs-lookup"><span data-stu-id="2077d-833">SAP ASE Version Support</span></span>
<span data-ttu-id="2077d-834">SAP 目前支援 SAP ASE 版本 16.0，可與 SAP 商務套件產品搭配使用。</span><span class="sxs-lookup"><span data-stu-id="2077d-834">SAP currently supports SAP ASE version 16.0 for use with SAP Business Suite products.</span></span> <span data-ttu-id="2077d-835">SAP ASE 伺服器、 或 JDBC 和 ODBC 驅動程式 toobe SAP Business Suite 等作業只透過所提供的產品搭配使用的所有更新都 hello 在 SAP 服務 Marketplace: <https://support.sap.com/swdc>。</span><span class="sxs-lookup"><span data-stu-id="2077d-835">All updates for SAP ASE server, or JDBC and ODBC drivers toobe used with SAP Business Suite products are provided solely through hello SAP Service Marketplace at: <https://support.sap.com/swdc>.</span></span>

<span data-ttu-id="2077d-836">安裝與內部部署，不要直接從 Sybase 網站下載更新 hello SAP ASE 伺服器或 hello JDBC 和 ODBC 驅動程式。</span><span class="sxs-lookup"><span data-stu-id="2077d-836">As for installations on-premises, do not download updates for hello SAP ASE server, or for hello JDBC and ODBC drivers directly from Sybase websites.</span></span> <span data-ttu-id="2077d-837">如需套用修補程式，支援與 SAP Business Suite 產品內部使用，並在 Azure 虛擬機器，請參閱下列 「 SAP 附註的 hello 的詳細資訊：</span><span class="sxs-lookup"><span data-stu-id="2077d-837">For detailed information on patches, which are supported for use with SAP Business Suite products on-premises and in Azure Virtual Machines see hello following SAP Notes:</span></span>

* <span data-ttu-id="2077d-838">[1590719]</span><span class="sxs-lookup"><span data-stu-id="2077d-838">[1590719]</span></span>
* <span data-ttu-id="2077d-839">[1973241]</span><span class="sxs-lookup"><span data-stu-id="2077d-839">[1973241]</span></span>

<span data-ttu-id="2077d-840">SAP ASE 上執行 SAP Business Suite 的一般資訊位於 hello [SCN](https://www.sap.com/community/topic/ase.html)</span><span class="sxs-lookup"><span data-stu-id="2077d-840">General information on running SAP Business Suite on SAP ASE can be found in hello [SCN](https://www.sap.com/community/topic/ase.html)</span></span>

### <a name="sap-ase-configuration-guidelines-for-sap-related-sap-ase-installations-in-azure-vms"></a><span data-ttu-id="2077d-841">在 Azure VM 中安裝 SAP 相關之 SAP ASE 的 SAP ASE 組態指導方針</span><span class="sxs-lookup"><span data-stu-id="2077d-841">SAP ASE Configuration Guidelines for SAP-related SAP ASE Installations in Azure VMs</span></span>
#### <a name="structure-of-hello-sap-ase-deployment"></a><span data-ttu-id="2077d-842">Hello SAP ASE 部署的結構</span><span class="sxs-lookup"><span data-stu-id="2077d-842">Structure of hello SAP ASE Deployment</span></span>
<span data-ttu-id="2077d-843">Hello 一般描述，根據 SAP ASE 可執行檔應該位於或安裝到 hello 系統磁碟機的 hello VM 之 OS 磁碟 (磁碟機 c:\)。</span><span class="sxs-lookup"><span data-stu-id="2077d-843">In accordance with hello general description, SAP ASE executables should be located or installed into hello system drive of hello VM’s OS disk (drive c:\).</span></span> <span data-ttu-id="2077d-844">一般而言，大部分的 hello SAP ASE 系統和工具資料庫可不真的利用硬 SAP NetWeaver 工作量。</span><span class="sxs-lookup"><span data-stu-id="2077d-844">Typically, most of hello SAP ASE system and tools databases are not really leveraged hard by SAP NetWeaver workload.</span></span> <span data-ttu-id="2077d-845">因此 hello 系統和工具的資料庫 （master、 model、 saptools、 sybmgmtdb、 sybsystemdb） 可留在以及 hello C:\ 磁碟機上。</span><span class="sxs-lookup"><span data-stu-id="2077d-845">Hence hello system and tools databases (master, model, saptools, sybmgmtdb, sybsystemdb) can remain on hello C:\ drive as well.</span></span> 

<span data-ttu-id="2077d-846">例外狀況可能是包含所有的工作資料表和暫存資料表建立的 SAP ASE 其中發生某些 SAP ERP 和所有 BW 工作量可能需要較高的資料量或 I/O 作業量不適合放 hello 原始 hello 暫存資料庫VM 之 OS 磁碟 (磁碟機 c:\)。</span><span class="sxs-lookup"><span data-stu-id="2077d-846">An exception could be hello temporary database containing all work tables and temporary tables created by SAP ASE, which in case of some SAP ERP and all BW workloads might require either higher data volume or I/O operations volume, which can’t fit into hello original VM’s OS disk (drive c:\).</span></span>

<span data-ttu-id="2077d-847">根據 hello SAPInst/SWPM 使用新版 tooinstall hello 系統、 hello 資料庫可能包含：</span><span class="sxs-lookup"><span data-stu-id="2077d-847">Depending on hello version of SAPInst/SWPM used tooinstall hello system, hello database might contain:</span></span>

* <span data-ttu-id="2077d-848">安裝 SAP ASE 時建立單一的 SAP ASE tempdb</span><span class="sxs-lookup"><span data-stu-id="2077d-848">A single SAP ASE tempdb, which is created when installing SAP ASE</span></span>
* <span data-ttu-id="2077d-849">建立藉由安裝 SAP ASE 和建立 hello SAP 安裝常式的其他 saptempdb SAP ASE tempdb</span><span class="sxs-lookup"><span data-stu-id="2077d-849">An SAP ASE tempdb created by installing SAP ASE and an additional saptempdb created by hello SAP installation routine</span></span>
* <span data-ttu-id="2077d-850">建立藉由安裝 SAP ASE 和手動建立額外的 tempdb SAP ASE tempdb (例如下列 「 SAP 附註[1752266]) toomeet ERP/BW 特定 tempdb 需求</span><span class="sxs-lookup"><span data-stu-id="2077d-850">An SAP ASE tempdb created by installing SAP ASE and an additional tempdb that has been created manually (for example following SAP Note [1752266]) toomeet ERP/BW specific tempdb requirements</span></span>

<span data-ttu-id="2077d-851">如果發生特定 ERP 或所有 BW 工作量，合理，不管 tooperformance tookeep hello tempdb 裝置的 hello 另外以外 C:\ 磁碟機上建立 tempdb （SWPM 或手動）。</span><span class="sxs-lookup"><span data-stu-id="2077d-851">In case of specific ERP or all BW workloads, it makes sense, in regard tooperformance, tookeep hello tempdb devices of hello additionally created tempdb (by SWPM or manually) on a drive other than C:\.</span></span> <span data-ttu-id="2077d-852">如果沒有其他的 tempdb 存在，則建議 toocreate 其中一個 (SAP 附註[1752266])。</span><span class="sxs-lookup"><span data-stu-id="2077d-852">If no additional tempdb exists, it is recommended toocreate one (SAP Note [1752266]).</span></span>

<span data-ttu-id="2077d-853">這類系統 hello 應該 hello 另外建立 tempdb 上執行下列步驟：</span><span class="sxs-lookup"><span data-stu-id="2077d-853">For such systems hello following steps should be performed for hello additionally created tempdb:</span></span>

* <span data-ttu-id="2077d-854">移動 hello 第一個 tempdb toohello 第一個裝置的 hello SAP 資料庫</span><span class="sxs-lookup"><span data-stu-id="2077d-854">Move hello first tempdb device toohello first device of hello SAP database</span></span>
* <span data-ttu-id="2077d-855">新增 tempdb 裝置 tooeach 的 hello Vhd 包含的裝置 hello SAP 資料庫</span><span class="sxs-lookup"><span data-stu-id="2077d-855">Add tempdb devices tooeach of hello VHDs containing a device of hello SAP database</span></span>

<span data-ttu-id="2077d-856">此設定可讓 tempdb tooeither 耗用較多的空間，比可以 tooprovide hello 系統磁碟機。</span><span class="sxs-lookup"><span data-stu-id="2077d-856">This configuration enables tempdb tooeither consume more space than hello system drive is able tooprovide.</span></span> <span data-ttu-id="2077d-857">做為參考其中一個可以檢查現有的系統上，執行內部部署的 hello tempdb 裝置大小。</span><span class="sxs-lookup"><span data-stu-id="2077d-857">As a reference one can check hello tempdb device sizes on existing systems, which run on-premises.</span></span> <span data-ttu-id="2077d-858">或者，這種組態會啟用針對 tempdb，不能提供與 hello 系統磁碟機的 IOPS 數目。</span><span class="sxs-lookup"><span data-stu-id="2077d-858">Or such a configuration would enable IOPS numbers against tempdb, which cannot be provided with hello system drive.</span></span> <span data-ttu-id="2077d-859">再次執行內部部署的系統可以針對 tempdb 使用的 toomonitor I/O 工作負載。</span><span class="sxs-lookup"><span data-stu-id="2077d-859">Again systems that are running on-premises can be used toomonitor I/O workload against tempdb.</span></span>

<span data-ttu-id="2077d-860">永遠不會將任何 SAP ASE 裝置放置到 hello hello VM 的 D:\ 磁碟機。</span><span class="sxs-lookup"><span data-stu-id="2077d-860">Never put any SAP ASE devices onto hello D:\ drive of hello VM.</span></span> <span data-ttu-id="2077d-861">即使保留在 hello tempdb 中的 hello 物件只是暫時性的這也適用於 toohello tempdb。</span><span class="sxs-lookup"><span data-stu-id="2077d-861">This also applies toohello tempdb, even if hello objects kept in hello tempdb are only temporary.</span></span>

#### <a name="impact-of-database-compression"></a><span data-ttu-id="2077d-862">資料庫壓縮的影響</span><span class="sxs-lookup"><span data-stu-id="2077d-862">Impact of Database Compression</span></span>
<span data-ttu-id="2077d-863">在組態中的 I/O 頻寬可能會變成限制因素，每個量值會減少 IOPS 可能有助於 toostretch hello 工作負載一次可以執行像是 Azure IaaS 案例中。</span><span class="sxs-lookup"><span data-stu-id="2077d-863">In configurations where I/O bandwidth can become a limiting factor, every measure, which reduces IOPS might help toostretch hello workload one can run in an IaaS scenario like Azure.</span></span> <span data-ttu-id="2077d-864">因此，強烈建議 toomake 確定 SAP ASE 壓縮會使用上傳現有的 SAP 資料庫 tooAzure 之前。</span><span class="sxs-lookup"><span data-stu-id="2077d-864">Therefore, it is strongly recommended toomake sure that SAP ASE compression is used before uploading an existing SAP database tooAzure.</span></span>

<span data-ttu-id="2077d-865">如果未實作上傳 tooAzure 之前 hello 建議 tooperform 壓縮是出於多種原因所造成：</span><span class="sxs-lookup"><span data-stu-id="2077d-865">hello recommendation tooperform compression before uploading tooAzure if it is not already implemented is given out of several reasons:</span></span>

* <span data-ttu-id="2077d-866">資料上傳 toobe tooAzure hello 量較低</span><span class="sxs-lookup"><span data-stu-id="2077d-866">hello amount of data toobe uploaded tooAzure is lower</span></span>
* <span data-ttu-id="2077d-867">hello hello 壓縮執行持續時間較短，假設有更多的 Cpu 或更高 I/O 頻寬或更少的 I/O 延遲內部部署可以使用更強的硬體</span><span class="sxs-lookup"><span data-stu-id="2077d-867">hello duration of hello compression execution is shorter assuming that one can use stronger hardware with more CPUs or higher I/O bandwidth or less I/O latency on-premises</span></span>
* <span data-ttu-id="2077d-868">較小的資料庫大小可能會導致 tooless 成本進行磁碟配置</span><span class="sxs-lookup"><span data-stu-id="2077d-868">Smaller database sizes might lead tooless costs for disk allocation</span></span>

<span data-ttu-id="2077d-869">資料壓縮和 LOB 壓縮可以在 Azure 虛擬機器上裝載的 VM 中運作，如同它在內部部署中的運作方式。</span><span class="sxs-lookup"><span data-stu-id="2077d-869">Data- and LOB-Compression work in a VM hosted in Azure Virtual Machines as it does on-premises.</span></span> <span data-ttu-id="2077d-870">如需有關如何 toocheck 如果壓縮已在使用中現有的 SAP ASE 資料庫，請檢查 SAP Note [1750510]。</span><span class="sxs-lookup"><span data-stu-id="2077d-870">For more details on how toocheck if compression is already in use in an existing SAP ASE database, check SAP Note [1750510].</span></span>

#### <a name="using-dbacockpit-toomonitor-database-instances"></a><span data-ttu-id="2077d-871">使用 DBACockpit toomonitor 資料庫執行個體</span><span class="sxs-lookup"><span data-stu-id="2077d-871">Using DBACockpit toomonitor Database Instances</span></span>
<span data-ttu-id="2077d-872">適用於 SAP 系統，SAP ASE 將做為資料庫平台，hello DBACockpit 存取。 為交易 DBACockpit 中內嵌的瀏覽器視窗或 Webdynpro</span><span class="sxs-lookup"><span data-stu-id="2077d-872">For SAP systems, which are using SAP ASE as database platform, hello DBACockpit is accessible as embedded browser windows in transaction DBACockpit or as Webdynpro.</span></span> <span data-ttu-id="2077d-873">不過 hello 完整功能，以監視並管理 hello 資料庫可用於只 hello DBACockpit hello Webdynpro 實作。</span><span class="sxs-lookup"><span data-stu-id="2077d-873">However hello full functionality for monitoring and administering hello database is available in hello Webdynpro implementation of hello DBACockpit only.</span></span>

<span data-ttu-id="2077d-874">在內部部署與執行數個步驟的系統必須 tooenable hello DBACockpit hello Webdynpro 實作所使用的所有 SAP NetWeaver 功能。</span><span class="sxs-lookup"><span data-stu-id="2077d-874">As with on-premises systems several steps are required tooenable all SAP NetWeaver functionality used by hello Webdynpro implementation of hello DBACockpit.</span></span> <span data-ttu-id="2077d-875">請依照 SAP Note [1245200] tooenable hello webdynpros 的使用方式，並產生 hello 必要的。</span><span class="sxs-lookup"><span data-stu-id="2077d-875">Follow SAP Note [1245200] tooenable hello usage of webdynpros and generate hello required ones.</span></span> <span data-ttu-id="2077d-876">時遵循上述備忘稿 hello 中的 hello 指示，您也會設定 hello 網際網路通訊管理員 (icm) 以及 hello 連接埠 toobe 用於 http 和 https 連線。</span><span class="sxs-lookup"><span data-stu-id="2077d-876">When following hello instructions in hello above notes, you also configure hello Internet Communication Manager (icm) along with hello ports toobe used for http and https connections.</span></span> <span data-ttu-id="2077d-877">hello http 的預設設定看起來像這樣：</span><span class="sxs-lookup"><span data-stu-id="2077d-877">hello default setting for http looks like this:</span></span>

> <span data-ttu-id="2077d-878">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="2077d-878">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span></span>
> 
> <span data-ttu-id="2077d-879">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="2077d-879">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span></span>
> 
> 

<span data-ttu-id="2077d-880">和產生交易 DBACockpit 中的 hello 連結看起來類似 toothis:</span><span class="sxs-lookup"><span data-stu-id="2077d-880">and hello links generated in transaction DBACockpit will look similar toothis:</span></span>

> <span data-ttu-id="2077d-881">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="2077d-881">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> <span data-ttu-id="2077d-882">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="2077d-882">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> 

<span data-ttu-id="2077d-883">取決於如何 hello Azure 虛擬機器裝載 hello SAP 系統連接的網站，透過多站台或 ExpressRoute （跨單位部署），您需要確定 toomake 該 ICM 可解析的完整主機名稱上使用 hello電腦嘗試 tooopen hello DBACockpit 從。</span><span class="sxs-lookup"><span data-stu-id="2077d-883">Depending on if and how hello Azure Virtual Machine hosting hello SAP system is connected via site-to-site, multi-site or ExpressRoute (Cross-Premises deployment) you need toomake sure that ICM is using a fully qualified hostname that can be resolved on hello machine where you are trying tooopen hello DBACockpit from.</span></span> <span data-ttu-id="2077d-884">請參閱 SAP 附註[773830] toounderstand ICM 如何決定 hello 取決於設定檔參數和 icm host_name_full 方式設定參數的完整的主機名稱明確必要。</span><span class="sxs-lookup"><span data-stu-id="2077d-884">See SAP Note [773830] toounderstand how ICM determines hello fully qualified host name depending on profile parameters and set parameter icm/host_name_full explicitly if required.</span></span>

<span data-ttu-id="2077d-885">如果您部署的 hello VM 在僅限雲端的情況下，不在內部部署與 Azure 之間的跨單位連線，您需要 toodefine，公用 IP 位址和 domainlabel 也一樣。</span><span class="sxs-lookup"><span data-stu-id="2077d-885">If you deployed hello VM in a Cloud-Only scenario without cross-premises connectivity between on-premises and Azure, you need toodefine a public IP address and a domainlabel.</span></span> <span data-ttu-id="2077d-886">hello hello 公用 DNS 名稱格式 hello VM 看起來像這樣：</span><span class="sxs-lookup"><span data-stu-id="2077d-886">hello format of hello public DNS name of hello VM looks like this:</span></span>

> <span data-ttu-id="2077d-887">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span><span class="sxs-lookup"><span data-stu-id="2077d-887">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span></span>
> 
> 

<span data-ttu-id="2077d-888">可以找到 toohello DNS 名稱相關的更多詳細資料[這裡][virtual-machines-azurerm-versus-azuresm]。</span><span class="sxs-lookup"><span data-stu-id="2077d-888">More details related toohello DNS name can be found [here][virtual-machines-azurerm-versus-azuresm].</span></span>

<span data-ttu-id="2077d-889">設定 hello SAP 設定檔參數 icm/host_name_full toohello hello Azure VM hello 連結的 DNS 名稱可能類似於：</span><span class="sxs-lookup"><span data-stu-id="2077d-889">Setting hello SAP profile parameter icm/host_name_full toohello DNS name of hello Azure VM hello link might look similar to:</span></span>

> <span data-ttu-id="2077d-890">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="2077d-890">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> <span data-ttu-id="2077d-891">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="2077d-891">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> 

<span data-ttu-id="2077d-892">在此情況下您需要 toomake 務必：</span><span class="sxs-lookup"><span data-stu-id="2077d-892">In this case you need toomake sure to:</span></span>

* <span data-ttu-id="2077d-893">在 hello hello TCP/IP 連接埠使用 toocommunicate icm 的 Azure 入口網站中新增輸入的規則 toohello 網路安全性群組</span><span class="sxs-lookup"><span data-stu-id="2077d-893">Add Inbound rules toohello Network Security Group in hello Azure portal for hello TCP/IP ports used toocommunicate with ICM</span></span>
* <span data-ttu-id="2077d-894">新增輸入的規則以 hello ICM hello TCP/IP 連接埠使用 toocommunicate 的 toohello Windows 防火牆設定</span><span class="sxs-lookup"><span data-stu-id="2077d-894">Add Inbound rules toohello Windows Firewall configuration for hello TCP/IP ports used toocommunicate with hello ICM</span></span>

<span data-ttu-id="2077d-895">建議您使用自動匯入的所有可用的更正，tooperiodically 套用 hello 更正集合 SAP 附註適用於 tooyour SAP 版本：</span><span class="sxs-lookup"><span data-stu-id="2077d-895">For an automated imported of all corrections available, it is recommended tooperiodically apply hello correction collection SAP Note applicable tooyour SAP version:</span></span>

* <span data-ttu-id="2077d-896">[1558958]</span><span class="sxs-lookup"><span data-stu-id="2077d-896">[1558958]</span></span>
* <span data-ttu-id="2077d-897">[1619967]</span><span class="sxs-lookup"><span data-stu-id="2077d-897">[1619967]</span></span>
* <span data-ttu-id="2077d-898">[1882376]</span><span class="sxs-lookup"><span data-stu-id="2077d-898">[1882376]</span></span>

<span data-ttu-id="2077d-899">針對 SAP ASE DBA Cockpit 的進一步資訊位於下列 SAP 附註的 hello:</span><span class="sxs-lookup"><span data-stu-id="2077d-899">Further information about DBA Cockpit for SAP ASE can be found in hello following SAP Notes:</span></span>

* <span data-ttu-id="2077d-900">[1605680]</span><span class="sxs-lookup"><span data-stu-id="2077d-900">[1605680]</span></span>
* <span data-ttu-id="2077d-901">[1757924]</span><span class="sxs-lookup"><span data-stu-id="2077d-901">[1757924]</span></span>
* <span data-ttu-id="2077d-902">[1757928]</span><span class="sxs-lookup"><span data-stu-id="2077d-902">[1757928]</span></span>
* <span data-ttu-id="2077d-903">[1758182]</span><span class="sxs-lookup"><span data-stu-id="2077d-903">[1758182]</span></span>
* <span data-ttu-id="2077d-904">[1758496]</span><span class="sxs-lookup"><span data-stu-id="2077d-904">[1758496]</span></span>    
* <span data-ttu-id="2077d-905">[1814258]</span><span class="sxs-lookup"><span data-stu-id="2077d-905">[1814258]</span></span>
* <span data-ttu-id="2077d-906">[1922555]</span><span class="sxs-lookup"><span data-stu-id="2077d-906">[1922555]</span></span>
* <span data-ttu-id="2077d-907">[1956005]</span><span class="sxs-lookup"><span data-stu-id="2077d-907">[1956005]</span></span>

#### <a name="backuprecovery-considerations-for-sap-ase"></a><span data-ttu-id="2077d-908">SAP ASE 的備份/復原考量</span><span class="sxs-lookup"><span data-stu-id="2077d-908">Backup/Recovery Considerations for SAP ASE</span></span>
<span data-ttu-id="2077d-909">將 SAP ASE 部署至 Azure 時，必須檢閱您的備份方法。</span><span class="sxs-lookup"><span data-stu-id="2077d-909">When deploying SAP ASE into Azure your backup methodology must be reviewed.</span></span> <span data-ttu-id="2077d-910">即使 hello 系統不是生產系統，SAP ASE 所裝載的 hello SAP 資料庫必須定期備份。</span><span class="sxs-lookup"><span data-stu-id="2077d-910">Even if hello system is not a productive system, hello SAP database hosted by SAP ASE must be backed up periodically.</span></span> <span data-ttu-id="2077d-911">因為 Azure 儲存體會保留三個影像，備份現在是較不重要，尤其是尊重 toocompensating 儲存體損毀。</span><span class="sxs-lookup"><span data-stu-id="2077d-911">Since Azure Storage keeps three images, a backup is now less important in respect toocompensating a storage crash.</span></span> <span data-ttu-id="2077d-912">hello 維護適當的備份與還原計劃的主要原因是，您可以藉由提供時間復原功能的中點補償邏輯/手動錯誤有更多。</span><span class="sxs-lookup"><span data-stu-id="2077d-912">hello primary reason for maintaining a proper backup and restore plan is more that you can compensate for logical/manual errors by providing point in time recovery capabilities.</span></span> <span data-ttu-id="2077d-913">因此 hello 的目標是 tooeither 使用備份 toorestore hello 資料庫備份 tooa 特定點 Azure tooseed 中的時間或 toouse hello 備份中另一個系統複製 hello 現有的資料庫。</span><span class="sxs-lookup"><span data-stu-id="2077d-913">So hello goal is tooeither use backups toorestore hello database back tooa certain point in time or toouse hello backups in Azure tooseed another system by copying hello existing database.</span></span> <span data-ttu-id="2077d-914">例如，您無法從傳輸的 2 層 SAP 組態 tooa 3 層系統設定 hello 相同系統還原的備份。</span><span class="sxs-lookup"><span data-stu-id="2077d-914">For example, you could transfer from a 2-Tier SAP configuration tooa 3-Tier system setup of hello same system by restoring a backup.</span></span>

<span data-ttu-id="2077d-915">備份和還原 Azure 運作中的資料庫 hello 相同方式就如同內部部署。</span><span class="sxs-lookup"><span data-stu-id="2077d-915">Backing up and restoring a database in Azure works hello same way as it does on-premises.</span></span> <span data-ttu-id="2077d-916">請參閱 SAP 附註︰</span><span class="sxs-lookup"><span data-stu-id="2077d-916">See SAP Notes:</span></span>

* <span data-ttu-id="2077d-917">[1588316]</span><span class="sxs-lookup"><span data-stu-id="2077d-917">[1588316]</span></span>
* <span data-ttu-id="2077d-918">[1585981]</span><span class="sxs-lookup"><span data-stu-id="2077d-918">[1585981]</span></span>

<span data-ttu-id="2077d-919">以取得建立傾印組態和排程備份的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="2077d-919">for details on creating dump configurations and scheduling backups.</span></span> <span data-ttu-id="2077d-920">根據您的策略和需求，您可以設定資料庫和記錄傾印 toodisk 到其中一個 hello 現有磁碟，或新增其他磁碟 hello 備份。</span><span class="sxs-lookup"><span data-stu-id="2077d-920">Depending on your strategy and needs you can configure database and log dumps toodisk onto one of hello existing disks or add an additional disk for hello backup.</span></span> <span data-ttu-id="2077d-921">它是 tooreduce hello 有危險，發生錯誤時的資料遺失，建議 toouse 沒有資料庫裝置所在的磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-921">tooreduce hello danger of data loss in case of an error, it is recommended toouse a disk where no database device is located.</span></span>

<span data-ttu-id="2077d-922">除了資料壓縮與 LOB 壓縮之外，SAP ASE 也會提供備份壓縮。</span><span class="sxs-lookup"><span data-stu-id="2077d-922">Besides data- and LOB compression SAP ASE also offers backup compression.</span></span> <span data-ttu-id="2077d-923">與 hello 資料庫和記錄空間小於 toooccupy 傾印它建議 toouse 備份壓縮。</span><span class="sxs-lookup"><span data-stu-id="2077d-923">toooccupy less space with hello database and log dumps it is recommended toouse backup compression.</span></span> <span data-ttu-id="2077d-924">如需詳細資訊，請參閱 SAP 附註 [1588316]。</span><span class="sxs-lookup"><span data-stu-id="2077d-924">For more information, see SAP Note [1588316].</span></span> <span data-ttu-id="2077d-925">壓縮 hello 備份也是重要的 tooreduce hello 數量資料 toobe 傳輸，如果您計劃 toodownload 備份或包含備份的傾印從 hello tooon 內部部署 Azure 虛擬機器的 Vhd。</span><span class="sxs-lookup"><span data-stu-id="2077d-925">Compressing hello backup is also crucial tooreduce hello amount of data toobe transferred if you plan toodownload backups or VHDs containing backup dumps from hello Azure Virtual Machine tooon-premises.</span></span>

<span data-ttu-id="2077d-926">請勿使用磁碟機 D:\ 做為資料庫或記錄傾印目的地。</span><span class="sxs-lookup"><span data-stu-id="2077d-926">Do not use drive D:\ as database or log dump destination.</span></span>

#### <a name="performance-considerations-for-backupsrestores"></a><span data-ttu-id="2077d-927">備份/還原的效能考量</span><span class="sxs-lookup"><span data-stu-id="2077d-927">Performance Considerations for Backups/Restores</span></span>
<span data-ttu-id="2077d-928">裸機部署，如同備份/還原效能是取決於磁碟區數目可以讀取以平行方式，而且這些磁碟區的哪些 hello 輸送量可能。</span><span class="sxs-lookup"><span data-stu-id="2077d-928">As in bare-metal deployments, backup/restore performance is dependent on how many volumes can be read in parallel and what hello throughput of those volumes might be.</span></span> <span data-ttu-id="2077d-929">此外，hello 備份壓縮所使用的 CPU 耗用量可能相當重要的角色上播放的 Vm 只向上 tooeight CPU 執行緒。</span><span class="sxs-lookup"><span data-stu-id="2077d-929">In addition, hello CPU consumption used by backup compression may play a significant role on VMs with just up tooeight CPU threads.</span></span> <span data-ttu-id="2077d-930">因此，您可以假設︰</span><span class="sxs-lookup"><span data-stu-id="2077d-930">Therefore, one can assume:</span></span>

* <span data-ttu-id="2077d-931">hello 較少 hello 數目所使用的磁碟 toostore hello 資料庫裝置、 hello 較小的 hello 整體讀取輸送量</span><span class="sxs-lookup"><span data-stu-id="2077d-931">hello fewer hello number of disks used toostore hello database devices, hello smaller hello overall throughput in reading</span></span>
* <span data-ttu-id="2077d-932">hello 數目較少 hello hello VM 中的 CPU 執行緒、 hello 更嚴重 hello 備份壓縮的影響</span><span class="sxs-lookup"><span data-stu-id="2077d-932">hello smaller hello number of CPU threads in hello VM, hello more severe hello impact of backup compression</span></span>
* <span data-ttu-id="2077d-933">hello 較少 （等量磁碟區的目錄，磁碟） 的目標 toowrite hello 備份、 hello 較小者 hello 輸送量</span><span class="sxs-lookup"><span data-stu-id="2077d-933">hello fewer targets (Stripe Directories, disks) toowrite hello backup to, hello lesser hello throughput</span></span>

<span data-ttu-id="2077d-934">目標 toowrite toothere tooincrease hello 數目是兩個選項，可以根據需求使用/合併：</span><span class="sxs-lookup"><span data-stu-id="2077d-934">tooincrease hello number of targets toowrite toothere are two options, which can be used/combined depending on your needs:</span></span>

* <span data-ttu-id="2077d-935">透過順序 tooimprove hello IOPS 輸送量該等量磁碟區上的多個已掛接磁碟條狀配置 hello 備份目標磁碟區</span><span class="sxs-lookup"><span data-stu-id="2077d-935">Striping hello backup target volume over multiple mounted disks in order tooimprove hello IOPS throughput on that striped volume</span></span>
* <span data-ttu-id="2077d-936">建立傾印設定 SAP ASE 層級上時，它會使用多個目標目錄 toowrite hello 傾印</span><span class="sxs-lookup"><span data-stu-id="2077d-936">Creating a dump configuration on SAP ASE level, which uses more than one target directory toowrite hello dump to</span></span>

<span data-ttu-id="2077d-937">本指南的先前內容中已討論過在多個掛接的磁碟上等量劃分磁碟區的方式。</span><span class="sxs-lookup"><span data-stu-id="2077d-937">Striping a volume over multiple mounted disks has been discussed earlier in this guide.</span></span> <span data-ttu-id="2077d-938">如需有關 hello SAP ASE 傾印設定中使用多個目錄的詳細資訊，請參閱 toohello 文件，在預存程序 sp_config_dump，也就是使用的 toocreate hello 傾印組態上 hello [Sybase 資訊中心](http://infocenter.sybase.com/help/index.jsp).</span><span class="sxs-lookup"><span data-stu-id="2077d-938">For more information on using multiple directories in hello SAP ASE dump configuration, refer toohello documentation on Stored Procedure sp_config_dump, which is used toocreate hello dump configuration on hello [Sybase Infocenter](http://infocenter.sybase.com/help/index.jsp).</span></span>

### <a name="disaster-recovery-with-azure-vms"></a><span data-ttu-id="2077d-939">使用 Azure VM 的災害復原</span><span class="sxs-lookup"><span data-stu-id="2077d-939">Disaster Recovery with Azure VMs</span></span>
#### <a name="data-replication-with-sap-sybase-replication-server"></a><span data-ttu-id="2077d-940">利用 SAP Sybase 複寫伺服器的資料複寫</span><span class="sxs-lookup"><span data-stu-id="2077d-940">Data Replication with SAP Sybase Replication Server</span></span>
<span data-ttu-id="2077d-941">以 hello SAP Sybase 複寫伺服器 (SRS) SAP ASE 提供暖待命方案 tootransfer 資料庫交易 tooa 遠方位置，以非同步方式。</span><span class="sxs-lookup"><span data-stu-id="2077d-941">With hello SAP Sybase Replication Server (SRS) SAP ASE provides a warm standby solution tootransfer database transactions tooa distant location asynchronously.</span></span> 

<span data-ttu-id="2077d-942">hello 安裝及操作 SRS 的運作方式也會在內部部署，在 Azure 虛擬機器服務中裝載的 VM 中的功能。</span><span class="sxs-lookup"><span data-stu-id="2077d-942">hello installation and operation of SRS works as well functionally in a VM hosted in Azure Virtual Machine Services as it does on-premises.</span></span>

<span data-ttu-id="2077d-943">預計未來會發行透過 SAP 複寫伺服器的 ASE HADR 版本。</span><span class="sxs-lookup"><span data-stu-id="2077d-943">ASE HADR via SAP Replication Server is planned with a future release.</span></span> <span data-ttu-id="2077d-944">一旦該版本可供使用之後，就會立即進行測試並針對 Microsoft Azure 平台加以發行。</span><span class="sxs-lookup"><span data-stu-id="2077d-944">It will be tested with and released for Microsoft Azure platforms as soon as it is available.</span></span>

## <a name="specifics-toosap-ase-on-linux"></a><span data-ttu-id="2077d-945">在 Linux 上的細節 tooSAP ASE</span><span class="sxs-lookup"><span data-stu-id="2077d-945">Specifics tooSAP ASE on Linux</span></span>
<span data-ttu-id="2077d-946">開始使用 Microsoft Azure，您可以輕鬆地移轉您現有的 SAP ASE 應用程式 tooAzure 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="2077d-946">Starting with Microsoft Azure, you can easily migrate your existing SAP ASE applications tooAzure Virtual Machines.</span></span> <span data-ttu-id="2077d-947">虛擬機器中的 SAP ASE 可輕鬆地將移轉這些應用程式 tooMicrosoft Azure 讓您 tooreduce hello 擁有權總成本的部署、 管理和維護的企業廣度應用程式。</span><span class="sxs-lookup"><span data-stu-id="2077d-947">SAP ASE in a Virtual Machine enables you tooreduce hello total cost of ownership of deployment, management, and maintenance of enterprise breadth applications by easily migrating these applications tooMicrosoft Azure.</span></span> <span data-ttu-id="2077d-948">透過 SAP ASE Azure 虛擬機器中，系統管理員和開發人員仍然可以使用的 hello 可用的相同開發和管理工具內部。</span><span class="sxs-lookup"><span data-stu-id="2077d-948">With SAP ASE in an Azure Virtual Machine, administrators and developers can still use hello same development and administration tools that are available on-premises.</span></span>

<span data-ttu-id="2077d-949">部署 Azure Vm 的重要 tooknow hello 正式的 Sla，可以在這裡找到： <https://azure.microsoft.com/support/legal/sla></span><span class="sxs-lookup"><span data-stu-id="2077d-949">For deploying Azure VMs it's important tooknow hello official SLAs, which can be found here: <https://azure.microsoft.com/support/legal/sla></span></span>

<span data-ttu-id="2077d-950">SAP 附註 [1928533] 會提供 SAP 大小調整資訊和 SAP 認證的 VM SKU 清單。</span><span class="sxs-lookup"><span data-stu-id="2077d-950">SAP sizing information and a list of SAP certified VM SKUs is provided in SAP Note [1928533].</span></span> <span data-ttu-id="2077d-951">Azure 虛擬機器的額外 SAP 調整大小文件可以在下列網址中找到：<http://blogs.msdn.com/b/saponsqlserver/archive/2015/06/19/how-to-size-sap-systems-running-on-azure-vms.aspx> 和 <http://blogs.msdn.com/b/saponsqlserver/archive/2015/12/01/new-white-paper-on-sizing-sap-solutions-on-azure-public-cloud.aspx></span><span class="sxs-lookup"><span data-stu-id="2077d-951">Additional SAP sizing documents for Azure Virtual machines can be found here <http://blogs.msdn.com/b/saponsqlserver/archive/2015/06/19/how-to-size-sap-systems-running-on-azure-vms.aspx> and here <http://blogs.msdn.com/b/saponsqlserver/archive/2015/12/01/new-white-paper-on-sizing-sap-solutions-on-azure-public-cloud.aspx></span></span>

<span data-ttu-id="2077d-952">陳述式和 Azure 儲存體、 SAP 部署 Vm 或 SAP Monitoring 的建議考慮 toohello 使用量套用 toodeployments 的 SAP ASE 搭配述整個 hello 的這份文件的前四個章節的 SAP 應用程式。</span><span class="sxs-lookup"><span data-stu-id="2077d-952">Statements and recommendations in regard toohello usage of Azure Storage, Deployment of SAP VMs or SAP Monitoring apply toodeployments of SAP ASE in conjunction with SAP applications as stated throughout hello first four chapters of this document.</span></span>

<span data-ttu-id="2077d-953">hello 下列兩個 SAP 附註上 Linux 和 ASE ASE 的一般資訊中包含 hello 雲端：</span><span class="sxs-lookup"><span data-stu-id="2077d-953">hello following two SAP Notes include general information about ASE on Linux and ASE in hello Cloud:</span></span>

* <span data-ttu-id="2077d-954">[2134316]</span><span class="sxs-lookup"><span data-stu-id="2077d-954">[2134316]</span></span>
* <span data-ttu-id="2077d-955">[1941500]</span><span class="sxs-lookup"><span data-stu-id="2077d-955">[1941500]</span></span>

### <a name="sap-ase-version-support"></a><span data-ttu-id="2077d-956">SAP ASE 版本支援</span><span class="sxs-lookup"><span data-stu-id="2077d-956">SAP ASE Version Support</span></span>
<span data-ttu-id="2077d-957">SAP 目前支援 SAP ASE 版本 16.0，可與 SAP 商務套件產品搭配使用。</span><span class="sxs-lookup"><span data-stu-id="2077d-957">SAP currently supports SAP ASE version 16.0 for use with SAP Business Suite products.</span></span> <span data-ttu-id="2077d-958">SAP ASE 伺服器、 或 JDBC 和 ODBC 驅動程式 toobe SAP Business Suite 等作業只透過所提供的產品搭配使用的所有更新都 hello 在 SAP 服務 Marketplace: <https://support.sap.com/swdc>。</span><span class="sxs-lookup"><span data-stu-id="2077d-958">All updates for SAP ASE server, or JDBC and ODBC drivers toobe used with SAP Business Suite products are provided solely through hello SAP Service Marketplace at: <https://support.sap.com/swdc>.</span></span>

<span data-ttu-id="2077d-959">安裝與內部部署，不要直接從 Sybase 網站下載更新 hello SAP ASE 伺服器或 hello JDBC 和 ODBC 驅動程式。</span><span class="sxs-lookup"><span data-stu-id="2077d-959">As for installations on-premises, do not download updates for hello SAP ASE server, or for hello JDBC and ODBC drivers directly from Sybase websites.</span></span> <span data-ttu-id="2077d-960">如需套用修補程式，支援與 SAP Business Suite 產品內部使用，並在 Azure 虛擬機器，請參閱下列 「 SAP 附註的 hello 的詳細資訊：</span><span class="sxs-lookup"><span data-stu-id="2077d-960">For detailed information on patches, which are supported for use with SAP Business Suite products on-premises and in Azure Virtual Machines see hello following SAP Notes:</span></span>

* <span data-ttu-id="2077d-961">[1590719]</span><span class="sxs-lookup"><span data-stu-id="2077d-961">[1590719]</span></span>
* <span data-ttu-id="2077d-962">[1973241]</span><span class="sxs-lookup"><span data-stu-id="2077d-962">[1973241]</span></span>

<span data-ttu-id="2077d-963">SAP ASE 上執行 SAP Business Suite 的一般資訊位於 hello [SCN](https://www.sap.com/community/topic/ase.html)</span><span class="sxs-lookup"><span data-stu-id="2077d-963">General information on running SAP Business Suite on SAP ASE can be found in hello [SCN](https://www.sap.com/community/topic/ase.html)</span></span>

### <a name="sap-ase-configuration-guidelines-for-sap-related-sap-ase-installations-in-azure-vms"></a><span data-ttu-id="2077d-964">在 Azure VM 中安裝 SAP 相關之 SAP ASE 的 SAP ASE 組態指導方針</span><span class="sxs-lookup"><span data-stu-id="2077d-964">SAP ASE Configuration Guidelines for SAP-related SAP ASE Installations in Azure VMs</span></span>
#### <a name="structure-of-hello-sap-ase-deployment"></a><span data-ttu-id="2077d-965">Hello SAP ASE 部署的結構</span><span class="sxs-lookup"><span data-stu-id="2077d-965">Structure of hello SAP ASE Deployment</span></span>
<span data-ttu-id="2077d-966">Hello 一般描述，根據 SAP ASE 可執行檔應該位於或安裝到 VM (/sybase) hello hello 根檔案系統。</span><span class="sxs-lookup"><span data-stu-id="2077d-966">In accordance with hello general description, SAP ASE executables should be located or installed into hello root file system of hello VM ( /sybase ).</span></span> <span data-ttu-id="2077d-967">一般而言，大部分的 hello SAP ASE 系統和工具資料庫可不真的利用硬 SAP NetWeaver 工作量。</span><span class="sxs-lookup"><span data-stu-id="2077d-967">Typically, most of hello SAP ASE system and tools databases are not really leveraged hard by SAP NetWeaver workload.</span></span> <span data-ttu-id="2077d-968">因此 hello 系統和工具的資料庫 （master、 model、 saptools、 sybmgmtdb、 sybsystemdb） 可留在 hello 根檔案系統上。</span><span class="sxs-lookup"><span data-stu-id="2077d-968">Hence hello system and tools databases (master, model, saptools, sybmgmtdb, sybsystemdb) can remain on hello root file system as well.</span></span> 

<span data-ttu-id="2077d-969">例外狀況可能是包含所有的工作資料表和 SAP ASE 其中發生某些 SAP ERP 和所有 BW 工作量可能需要較高的資料量或 I/O 作業時，無法放入 hello 原始磁碟區所建立的暫存資料表的 hello 暫存資料庫VM 之 OS 磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-969">An exception could be hello temporary database containing all work tables and temporary tables created by SAP ASE, which in case of some SAP ERP and all BW workloads might require either higher data volume or I/O operations, volume which can’t fit into hello original VM’s OS disk.</span></span>

<span data-ttu-id="2077d-970">根據 hello SAPInst/SWPM 使用新版 tooinstall hello 系統、 hello 資料庫可能包含：</span><span class="sxs-lookup"><span data-stu-id="2077d-970">Depending on hello version of SAPInst/SWPM used tooinstall hello system, hello database might contain:</span></span>

* <span data-ttu-id="2077d-971">安裝 SAP ASE 時建立單一的 SAP ASE tempdb</span><span class="sxs-lookup"><span data-stu-id="2077d-971">A single SAP ASE tempdb, which is created when installing SAP ASE</span></span>
* <span data-ttu-id="2077d-972">建立藉由安裝 SAP ASE 和建立 hello SAP 安裝常式的其他 saptempdb SAP ASE tempdb</span><span class="sxs-lookup"><span data-stu-id="2077d-972">An SAP ASE tempdb created by installing SAP ASE and an additional saptempdb created by hello SAP installation routine</span></span>
* <span data-ttu-id="2077d-973">建立藉由安裝 SAP ASE 和手動建立額外的 tempdb SAP ASE tempdb (例如下列 「 SAP 附註[1752266]) toomeet ERP/BW 特定 tempdb 需求</span><span class="sxs-lookup"><span data-stu-id="2077d-973">An SAP ASE tempdb created by installing SAP ASE and an additional tempdb that has been created manually (for example following SAP Note [1752266]) toomeet ERP/BW specific tempdb requirements</span></span>

<span data-ttu-id="2077d-974">如果發生特定 ERP 或所有 BW 工作量，合理，不管 tooperformance tookeep hello tempdb 裝置 hello 另外建立 tempdb （SWPM 或手動） 在個別的檔案系統上，這可以由單一 Azure 資料磁碟或 Linux RAID 的跨越多個 Azure 資料磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-974">In case of specific ERP or all BW workloads, it makes sense, in regard tooperformance, tookeep hello tempdb devices of hello additionally created tempdb (by SWPM or manually) on a separate file system, which can be represented by a single Azure data disk or a Linux RAID spanning multiple Azure data disks.</span></span> <span data-ttu-id="2077d-975">如果沒有其他的 tempdb 存在，則建議 toocreate 其中一個 (SAP 附註[1752266])。</span><span class="sxs-lookup"><span data-stu-id="2077d-975">If no additional tempdb exists, it is recommended toocreate one (SAP Note [1752266]).</span></span>

<span data-ttu-id="2077d-976">這類系統 hello 應該 hello 另外建立 tempdb 上執行下列步驟：</span><span class="sxs-lookup"><span data-stu-id="2077d-976">For such systems hello following steps should be performed for hello additionally created tempdb:</span></span>

* <span data-ttu-id="2077d-977">移動 hello 第一次 tempdb 目錄 toohello 第一個檔案系統的 hello SAP 資料庫</span><span class="sxs-lookup"><span data-stu-id="2077d-977">Move hello first tempdb directory toohello first file system of hello SAP database</span></span>
* <span data-ttu-id="2077d-978">新增 hello 磁碟包含 hello SAP 資料庫的檔案系統的 tempdb 目錄的 tooeach</span><span class="sxs-lookup"><span data-stu-id="2077d-978">Add tempdb directories tooeach of hello disks containing a filesystem of hello SAP database</span></span>

<span data-ttu-id="2077d-979">此設定可讓 tempdb tooeither 耗用較多的空間，比可以 tooprovide hello 系統磁碟機。</span><span class="sxs-lookup"><span data-stu-id="2077d-979">This configuration enables tempdb tooeither consume more space than hello system drive is able tooprovide.</span></span> <span data-ttu-id="2077d-980">做為參考其中一個可以檢查現有的系統上，執行內部部署的 hello tempdb 目錄大小。</span><span class="sxs-lookup"><span data-stu-id="2077d-980">As a reference one can check hello tempdb directory sizes on existing systems, which run on-premises.</span></span> <span data-ttu-id="2077d-981">或者，這種組態會啟用針對 tempdb，不能提供與 hello 系統磁碟機的 IOPS 數目。</span><span class="sxs-lookup"><span data-stu-id="2077d-981">Or such a configuration would enable IOPS numbers against tempdb, which cannot be provided with hello system drive.</span></span> <span data-ttu-id="2077d-982">再次執行內部部署的系統可以針對 tempdb 使用的 toomonitor I/O 工作負載。</span><span class="sxs-lookup"><span data-stu-id="2077d-982">Again systems that are running on-premises can be used toomonitor I/O workload against tempdb.</span></span>

<span data-ttu-id="2077d-983">永遠不會放入 /mnt 或 /mnt/resource 的 hello VM 的任何 SAP ASE 目錄。</span><span class="sxs-lookup"><span data-stu-id="2077d-983">Never put any SAP ASE directories onto /mnt or /mnt/resource of hello VM.</span></span> <span data-ttu-id="2077d-984">即使 hello 物件保留在 hello tempdb 中只有暫時因為 /mnt 或 /mnt/resource 預設 Azure VM 暫存空間，這不是永久性的這也適用於 toohello tempdb。</span><span class="sxs-lookup"><span data-stu-id="2077d-984">This also applies toohello tempdb, even if hello objects kept in hello tempdb are only temporary because /mnt or /mnt/resource is a default Azure VM temp space, which is not persistent.</span></span> <span data-ttu-id="2077d-985">位於 hello Azure VM 的暫存空間更多詳細[這篇文章][virtual-machines-linux-how-to-attach-disk]</span><span class="sxs-lookup"><span data-stu-id="2077d-985">More details about hello Azure VM temp space can be found in [this article][virtual-machines-linux-how-to-attach-disk]</span></span>

#### <a name="impact-of-database-compression"></a><span data-ttu-id="2077d-986">資料庫壓縮的影響</span><span class="sxs-lookup"><span data-stu-id="2077d-986">Impact of Database Compression</span></span>
<span data-ttu-id="2077d-987">在組態中的 I/O 頻寬可能會變成限制因素，每個量值會減少 IOPS 可能有助於 toostretch hello 工作負載一次可以執行像是 Azure IaaS 案例中。</span><span class="sxs-lookup"><span data-stu-id="2077d-987">In configurations where I/O bandwidth can become a limiting factor, every measure, which reduces IOPS might help toostretch hello workload one can run in an IaaS scenario like Azure.</span></span> <span data-ttu-id="2077d-988">因此，強烈建議 toomake 確定 SAP ASE 壓縮會使用上傳現有的 SAP 資料庫 tooAzure 之前。</span><span class="sxs-lookup"><span data-stu-id="2077d-988">Therefore, it is strongly recommended toomake sure that SAP ASE compression is used before uploading an existing SAP database tooAzure.</span></span>

<span data-ttu-id="2077d-989">如果未實作上傳 tooAzure 之前 hello 建議 tooperform 壓縮是出於多種原因所造成：</span><span class="sxs-lookup"><span data-stu-id="2077d-989">hello recommendation tooperform compression before uploading tooAzure if it is not already implemented is given out of several reasons:</span></span>

* <span data-ttu-id="2077d-990">資料上傳 toobe tooAzure hello 量較低</span><span class="sxs-lookup"><span data-stu-id="2077d-990">hello amount of data toobe uploaded tooAzure is lower</span></span>
* <span data-ttu-id="2077d-991">hello hello 壓縮執行持續時間較短，假設有更多的 Cpu 或更高 I/O 頻寬或更少的 I/O 延遲內部部署可以使用更強的硬體</span><span class="sxs-lookup"><span data-stu-id="2077d-991">hello duration of hello compression execution is shorter assuming that one can use stronger hardware with more CPUs or higher I/O bandwidth or less I/O latency on-premises</span></span>
* <span data-ttu-id="2077d-992">較小的資料庫大小可能會導致 tooless 成本進行磁碟配置</span><span class="sxs-lookup"><span data-stu-id="2077d-992">Smaller database sizes might lead tooless costs for disk allocation</span></span>

<span data-ttu-id="2077d-993">資料壓縮和 LOB 壓縮可以在 Azure 虛擬機器上裝載的 VM 中運作，如同它在內部部署中的運作方式。</span><span class="sxs-lookup"><span data-stu-id="2077d-993">Data- and LOB-Compression work in a VM hosted in Azure Virtual Machines as it does on-premises.</span></span> <span data-ttu-id="2077d-994">如需有關如何 toocheck 如果壓縮已在使用中現有的 SAP ASE 資料庫，請檢查 SAP Note [1750510]。</span><span class="sxs-lookup"><span data-stu-id="2077d-994">For more details on how toocheck if compression is already in use in an existing SAP ASE database, check SAP Note [1750510].</span></span> <span data-ttu-id="2077d-995">如需有關資料庫壓縮的其他資訊，請參閱 SAP 附註 [2121797]。</span><span class="sxs-lookup"><span data-stu-id="2077d-995">For additional information regarding database compression, see SAP Note [2121797].</span></span>

#### <a name="using-dbacockpit-toomonitor-database-instances"></a><span data-ttu-id="2077d-996">使用 DBACockpit toomonitor 資料庫執行個體</span><span class="sxs-lookup"><span data-stu-id="2077d-996">Using DBACockpit toomonitor Database Instances</span></span>
<span data-ttu-id="2077d-997">適用於 SAP 系統，SAP ASE 將做為資料庫平台，hello DBACockpit 存取。 為交易 DBACockpit 中內嵌的瀏覽器視窗或 Webdynpro</span><span class="sxs-lookup"><span data-stu-id="2077d-997">For SAP systems, which are using SAP ASE as database platform, hello DBACockpit is accessible as embedded browser windows in transaction DBACockpit or as Webdynpro.</span></span> <span data-ttu-id="2077d-998">不過 hello 完整功能，以監視並管理 hello 資料庫可用於只 hello DBACockpit hello Webdynpro 實作。</span><span class="sxs-lookup"><span data-stu-id="2077d-998">However hello full functionality for monitoring and administering hello database is available in hello Webdynpro implementation of hello DBACockpit only.</span></span>

<span data-ttu-id="2077d-999">在內部部署與執行數個步驟的系統必須 tooenable hello DBACockpit hello Webdynpro 實作所使用的所有 SAP NetWeaver 功能。</span><span class="sxs-lookup"><span data-stu-id="2077d-999">As with on-premises systems several steps are required tooenable all SAP NetWeaver functionality used by hello Webdynpro implementation of hello DBACockpit.</span></span> <span data-ttu-id="2077d-1000">請依照 SAP Note [1245200] tooenable hello webdynpros 的使用方式，並產生 hello 必要的。</span><span class="sxs-lookup"><span data-stu-id="2077d-1000">Follow SAP Note [1245200] tooenable hello usage of webdynpros and generate hello required ones.</span></span> <span data-ttu-id="2077d-1001">時遵循上述備忘稿 hello 中的 hello 指示，您也會設定 hello 網際網路通訊管理員 (icm) 以及 hello 連接埠 toobe 用於 http 和 https 連線。</span><span class="sxs-lookup"><span data-stu-id="2077d-1001">When following hello instructions in hello above notes, you also configure hello Internet Communication Manager (icm) along with hello ports toobe used for http and https connections.</span></span> <span data-ttu-id="2077d-1002">hello http 的預設設定看起來像這樣：</span><span class="sxs-lookup"><span data-stu-id="2077d-1002">hello default setting for http looks like this:</span></span>

> <span data-ttu-id="2077d-1003">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="2077d-1003">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span></span>
> 
> <span data-ttu-id="2077d-1004">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="2077d-1004">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span></span>
> 
> 

<span data-ttu-id="2077d-1005">和產生交易 DBACockpit 中的 hello 連結看起來類似 toothis:</span><span class="sxs-lookup"><span data-stu-id="2077d-1005">and hello links generated in transaction DBACockpit will look similar toothis:</span></span>

> <span data-ttu-id="2077d-1006">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="2077d-1006">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> <span data-ttu-id="2077d-1007">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="2077d-1007">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> 

<span data-ttu-id="2077d-1008">取決於如何 hello Azure 虛擬機器裝載 hello SAP 系統連接的網站，透過多站台或 ExpressRoute （跨單位部署），您需要確定 toomake 該 ICM 可解析的完整主機名稱上使用 hello電腦嘗試 tooopen hello DBACockpit 從。</span><span class="sxs-lookup"><span data-stu-id="2077d-1008">Depending on if and how hello Azure Virtual Machine hosting hello SAP system is connected via site-to-site, multi-site or ExpressRoute (Cross-Premises deployment) you need toomake sure that ICM is using a fully qualified hostname that can be resolved on hello machine where you are trying tooopen hello DBACockpit from.</span></span> <span data-ttu-id="2077d-1009">請參閱 SAP 附註[773830] toounderstand ICM 如何決定 hello 取決於設定檔參數和 icm host_name_full 方式設定參數的完整的主機名稱明確必要。</span><span class="sxs-lookup"><span data-stu-id="2077d-1009">See SAP Note [773830] toounderstand how ICM determines hello fully qualified host name depending on profile parameters and set parameter icm/host_name_full explicitly if required.</span></span>

<span data-ttu-id="2077d-1010">如果您部署的 hello VM 在僅限雲端的情況下，不在內部部署與 Azure 之間的跨單位連線，您需要 toodefine，公用 IP 位址和 domainlabel 也一樣。</span><span class="sxs-lookup"><span data-stu-id="2077d-1010">If you deployed hello VM in a Cloud-Only scenario without cross-premises connectivity between on-premises and Azure, you need toodefine a public IP address and a domainlabel.</span></span> <span data-ttu-id="2077d-1011">hello hello 公用 DNS 名稱格式 hello VM 看起來像這樣：</span><span class="sxs-lookup"><span data-stu-id="2077d-1011">hello format of hello public DNS name of hello VM looks like this:</span></span>

> <span data-ttu-id="2077d-1012">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span><span class="sxs-lookup"><span data-stu-id="2077d-1012">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span></span>
> 
> 

<span data-ttu-id="2077d-1013">可以找到 toohello DNS 名稱相關的更多詳細資料[這裡][virtual-machines-azurerm-versus-azuresm]。</span><span class="sxs-lookup"><span data-stu-id="2077d-1013">More details related toohello DNS name can be found [here][virtual-machines-azurerm-versus-azuresm].</span></span>

<span data-ttu-id="2077d-1014">設定 hello SAP 設定檔參數 icm/host_name_full toohello hello Azure VM hello 連結的 DNS 名稱可能類似於：</span><span class="sxs-lookup"><span data-stu-id="2077d-1014">Setting hello SAP profile parameter icm/host_name_full toohello DNS name of hello Azure VM hello link might look similar to:</span></span>

> <span data-ttu-id="2077d-1015">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="2077d-1015">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> <span data-ttu-id="2077d-1016">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="2077d-1016">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> 

<span data-ttu-id="2077d-1017">在此情況下您需要 toomake 務必：</span><span class="sxs-lookup"><span data-stu-id="2077d-1017">In this case you need toomake sure to:</span></span>

* <span data-ttu-id="2077d-1018">在 hello hello TCP/IP 連接埠使用 toocommunicate icm 的 Azure 入口網站中新增輸入的規則 toohello 網路安全性群組</span><span class="sxs-lookup"><span data-stu-id="2077d-1018">Add Inbound rules toohello Network Security Group in hello Azure portal for hello TCP/IP ports used toocommunicate with ICM</span></span>
* <span data-ttu-id="2077d-1019">新增輸入的規則以 hello ICM hello TCP/IP 連接埠使用 toocommunicate 的 toohello Windows 防火牆設定</span><span class="sxs-lookup"><span data-stu-id="2077d-1019">Add Inbound rules toohello Windows Firewall configuration for hello TCP/IP ports used toocommunicate with hello ICM</span></span>

<span data-ttu-id="2077d-1020">建議您使用自動匯入的所有可用的更正，tooperiodically 套用 hello 更正集合 SAP 附註適用於 tooyour SAP 版本：</span><span class="sxs-lookup"><span data-stu-id="2077d-1020">For an automated imported of all corrections available, it is recommended tooperiodically apply hello correction collection SAP Note applicable tooyour SAP version:</span></span>

* <span data-ttu-id="2077d-1021">[1558958]</span><span class="sxs-lookup"><span data-stu-id="2077d-1021">[1558958]</span></span>
* <span data-ttu-id="2077d-1022">[1619967]</span><span class="sxs-lookup"><span data-stu-id="2077d-1022">[1619967]</span></span>
* <span data-ttu-id="2077d-1023">[1882376]</span><span class="sxs-lookup"><span data-stu-id="2077d-1023">[1882376]</span></span>

<span data-ttu-id="2077d-1024">針對 SAP ASE DBA Cockpit 的進一步資訊位於下列 SAP 附註的 hello:</span><span class="sxs-lookup"><span data-stu-id="2077d-1024">Further information about DBA Cockpit for SAP ASE can be found in hello following SAP Notes:</span></span>

* <span data-ttu-id="2077d-1025">[1605680]</span><span class="sxs-lookup"><span data-stu-id="2077d-1025">[1605680]</span></span>
* <span data-ttu-id="2077d-1026">[1757924]</span><span class="sxs-lookup"><span data-stu-id="2077d-1026">[1757924]</span></span>
* <span data-ttu-id="2077d-1027">[1757928]</span><span class="sxs-lookup"><span data-stu-id="2077d-1027">[1757928]</span></span>
* <span data-ttu-id="2077d-1028">[1758182]</span><span class="sxs-lookup"><span data-stu-id="2077d-1028">[1758182]</span></span>
* <span data-ttu-id="2077d-1029">[1758496]</span><span class="sxs-lookup"><span data-stu-id="2077d-1029">[1758496]</span></span>    
* <span data-ttu-id="2077d-1030">[1814258]</span><span class="sxs-lookup"><span data-stu-id="2077d-1030">[1814258]</span></span>
* <span data-ttu-id="2077d-1031">[1922555]</span><span class="sxs-lookup"><span data-stu-id="2077d-1031">[1922555]</span></span>
* <span data-ttu-id="2077d-1032">[1956005]</span><span class="sxs-lookup"><span data-stu-id="2077d-1032">[1956005]</span></span>

#### <a name="backuprecovery-considerations-for-sap-ase"></a><span data-ttu-id="2077d-1033">SAP ASE 的備份/復原考量</span><span class="sxs-lookup"><span data-stu-id="2077d-1033">Backup/Recovery Considerations for SAP ASE</span></span>
<span data-ttu-id="2077d-1034">將 SAP ASE 部署至 Azure 時，必須檢閱您的備份方法。</span><span class="sxs-lookup"><span data-stu-id="2077d-1034">When deploying SAP ASE into Azure your backup methodology must be reviewed.</span></span> <span data-ttu-id="2077d-1035">即使 hello 系統不是生產系統，SAP ASE 所裝載的 hello SAP 資料庫必須定期備份。</span><span class="sxs-lookup"><span data-stu-id="2077d-1035">Even if hello system is not a productive system, hello SAP database hosted by SAP ASE must be backed up periodically.</span></span> <span data-ttu-id="2077d-1036">因為 Azure 儲存體會保留三個影像，備份現在是較不重要，尤其是尊重 toocompensating 儲存體損毀。</span><span class="sxs-lookup"><span data-stu-id="2077d-1036">Since Azure Storage keeps three images, a backup is now less important in respect toocompensating a storage crash.</span></span> <span data-ttu-id="2077d-1037">hello 維護適當的備份與還原計劃的主要原因是，您可以藉由提供時間復原功能的中點補償邏輯/手動錯誤有更多。</span><span class="sxs-lookup"><span data-stu-id="2077d-1037">hello primary reason for maintaining a proper backup and restore plan is more that you can compensate for logical/manual errors by providing point in time recovery capabilities.</span></span> <span data-ttu-id="2077d-1038">因此 hello 的目標是 tooeither 使用備份 toorestore hello 資料庫備份 tooa 特定點 Azure tooseed 中的時間或 toouse hello 備份中另一個系統複製 hello 現有的資料庫。</span><span class="sxs-lookup"><span data-stu-id="2077d-1038">So hello goal is tooeither use backups toorestore hello database back tooa certain point in time or toouse hello backups in Azure tooseed another system by copying hello existing database.</span></span> <span data-ttu-id="2077d-1039">例如，您無法從傳輸的 2 層 SAP 組態 tooa 3 層系統設定 hello 相同系統還原的備份。</span><span class="sxs-lookup"><span data-stu-id="2077d-1039">For example, you could transfer from a 2-Tier SAP configuration tooa 3-Tier system setup of hello same system by restoring a backup.</span></span>

<span data-ttu-id="2077d-1040">備份和還原 Azure 運作中的資料庫 hello 相同方式就如同內部部署。</span><span class="sxs-lookup"><span data-stu-id="2077d-1040">Backing up and restoring a database in Azure works hello same way as it does on-premises.</span></span> <span data-ttu-id="2077d-1041">請參閱 SAP 附註︰</span><span class="sxs-lookup"><span data-stu-id="2077d-1041">See SAP Notes:</span></span>

* <span data-ttu-id="2077d-1042">[1588316]</span><span class="sxs-lookup"><span data-stu-id="2077d-1042">[1588316]</span></span>
* <span data-ttu-id="2077d-1043">[1585981]</span><span class="sxs-lookup"><span data-stu-id="2077d-1043">[1585981]</span></span>

<span data-ttu-id="2077d-1044">以取得建立傾印組態和排程備份的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="2077d-1044">for details on creating dump configurations and scheduling backups.</span></span> <span data-ttu-id="2077d-1045">根據您的策略和需求，您可以設定資料庫和記錄傾印 toodisk 到其中一個 hello 現有磁碟，或新增其他磁碟 hello 備份。</span><span class="sxs-lookup"><span data-stu-id="2077d-1045">Depending on your strategy and needs you can configure database and log dumps toodisk onto one of hello existing disks or add an additional disk for hello backup.</span></span> <span data-ttu-id="2077d-1046">tooreduce hello 危險資料遺失，就會發生錯誤的建議 toouse 沒有資料庫目錄/檔案所在的磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-1046">tooreduce hello danger of data loss in case of an error it is recommended toouse a disk where no database directory/file is located.</span></span>

<span data-ttu-id="2077d-1047">除了資料壓縮與 LOB 壓縮之外，SAP ASE 也會提供備份壓縮。</span><span class="sxs-lookup"><span data-stu-id="2077d-1047">Besides data- and LOB compression SAP ASE also offers backup compression.</span></span> <span data-ttu-id="2077d-1048">與 hello 資料庫和記錄空間小於 toooccupy 傾印它建議 toouse 備份壓縮。</span><span class="sxs-lookup"><span data-stu-id="2077d-1048">toooccupy less space with hello database and log dumps it is recommended toouse backup compression.</span></span> <span data-ttu-id="2077d-1049">如需詳細資訊，請參閱 SAP 附註 [1588316]。</span><span class="sxs-lookup"><span data-stu-id="2077d-1049">For more information, see SAP Note [1588316].</span></span> <span data-ttu-id="2077d-1050">壓縮 hello 備份也是重要的 tooreduce hello 數量資料 toobe 傳輸，如果您計劃 toodownload 備份或包含備份的傾印從 hello tooon 內部部署 Azure 虛擬機器的 Vhd。</span><span class="sxs-lookup"><span data-stu-id="2077d-1050">Compressing hello backup is also crucial tooreduce hello amount of data toobe transferred if you plan toodownload backups or VHDs containing backup dumps from hello Azure Virtual Machine tooon-premises.</span></span>

<span data-ttu-id="2077d-1051">請勿使用 hello Azure VM 的暫存空間 /mnt 或 /mnt/resource 做為資料庫或記錄檔傾印目的地。</span><span class="sxs-lookup"><span data-stu-id="2077d-1051">Do not use hello Azure VM temp space /mnt or /mnt/resource as database or log dump destination.</span></span>

#### <a name="performance-considerations-for-backupsrestores"></a><span data-ttu-id="2077d-1052">備份/還原的效能考量</span><span class="sxs-lookup"><span data-stu-id="2077d-1052">Performance Considerations for Backups/Restores</span></span>
<span data-ttu-id="2077d-1053">裸機部署，如同備份/還原效能是取決於磁碟區數目可以讀取以平行方式，而且這些磁碟區的哪些 hello 輸送量可能。</span><span class="sxs-lookup"><span data-stu-id="2077d-1053">As in bare-metal deployments, backup/restore performance is dependent on how many volumes can be read in parallel and what hello throughput of those volumes might be.</span></span> <span data-ttu-id="2077d-1054">此外，hello 備份壓縮所使用的 CPU 耗用量可能相當重要的角色上播放的 Vm 只向上 tooeight CPU 執行緒。</span><span class="sxs-lookup"><span data-stu-id="2077d-1054">In addition, hello CPU consumption used by backup compression may play a significant role on VMs with just up tooeight CPU threads.</span></span> <span data-ttu-id="2077d-1055">因此，您可以假設︰</span><span class="sxs-lookup"><span data-stu-id="2077d-1055">Therefore, one can assume:</span></span>

* <span data-ttu-id="2077d-1056">hello 較少 hello 數目所使用的磁碟 toostore hello 資料庫裝置、 hello 較小的 hello 整體讀取輸送量</span><span class="sxs-lookup"><span data-stu-id="2077d-1056">hello fewer hello number of disks used toostore hello database devices, hello smaller hello overall throughput in reading</span></span>
* <span data-ttu-id="2077d-1057">hello 數目較少 hello hello VM 中的 CPU 執行緒、 hello 更嚴重 hello 備份壓縮的影響</span><span class="sxs-lookup"><span data-stu-id="2077d-1057">hello smaller hello number of CPU threads in hello VM, hello more severe hello impact of backup compression</span></span>
* <span data-ttu-id="2077d-1058">hello 較少的目標 （Linux 軟體 RAID 磁碟） toowrite hello 來備份、 hello 較小者 hello 輸送量</span><span class="sxs-lookup"><span data-stu-id="2077d-1058">hello fewer targets (Linux software RAID, disks) toowrite hello backup to, hello lesser hello throughput</span></span>

<span data-ttu-id="2077d-1059">目標 toowrite toothere tooincrease hello 數目是兩個選項，可以根據需求使用/合併：</span><span class="sxs-lookup"><span data-stu-id="2077d-1059">tooincrease hello number of targets toowrite toothere are two options, which can be used/combined depending on your needs:</span></span>

* <span data-ttu-id="2077d-1060">透過順序 tooimprove hello IOPS 輸送量該等量磁碟區上的多個已掛接磁碟條狀配置 hello 備份目標磁碟區</span><span class="sxs-lookup"><span data-stu-id="2077d-1060">Striping hello backup target volume over multiple mounted disks in order tooimprove hello IOPS throughput on that striped volume</span></span>
* <span data-ttu-id="2077d-1061">建立傾印設定 SAP ASE 層級上時，它會使用多個目標目錄 toowrite hello 傾印</span><span class="sxs-lookup"><span data-stu-id="2077d-1061">Creating a dump configuration on SAP ASE level, which uses more than one target directory toowrite hello dump to</span></span>

<span data-ttu-id="2077d-1062">本指南的先前內容中已討論過在多個掛接的磁碟上等量劃分磁碟區的方式。</span><span class="sxs-lookup"><span data-stu-id="2077d-1062">Striping a volume over multiple mounted disks has been discussed earlier in this guide.</span></span> <span data-ttu-id="2077d-1063">如需有關 hello SAP ASE 傾印設定中使用多個目錄的詳細資訊，請參閱 toohello 文件，在預存程序 sp_config_dump，也就是使用的 toocreate hello 傾印組態上 hello [Sybase 資訊中心](http://infocenter.sybase.com/help/index.jsp).</span><span class="sxs-lookup"><span data-stu-id="2077d-1063">For more information on using multiple directories in hello SAP ASE dump configuration, refer toohello documentation on Stored Procedure sp_config_dump, which is used toocreate hello dump configuration on hello [Sybase Infocenter](http://infocenter.sybase.com/help/index.jsp).</span></span>

### <a name="disaster-recovery-with-azure-vms"></a><span data-ttu-id="2077d-1064">使用 Azure VM 的災害復原</span><span class="sxs-lookup"><span data-stu-id="2077d-1064">Disaster Recovery with Azure VMs</span></span>
#### <a name="data-replication-with-sap-sybase-replication-server"></a><span data-ttu-id="2077d-1065">利用 SAP Sybase 複寫伺服器的資料複寫</span><span class="sxs-lookup"><span data-stu-id="2077d-1065">Data Replication with SAP Sybase Replication Server</span></span>
<span data-ttu-id="2077d-1066">以 hello SAP Sybase 複寫伺服器 (SRS) SAP ASE 提供暖待命方案 tootransfer 資料庫交易 tooa 遠方位置，以非同步方式。</span><span class="sxs-lookup"><span data-stu-id="2077d-1066">With hello SAP Sybase Replication Server (SRS) SAP ASE provides a warm standby solution tootransfer database transactions tooa distant location asynchronously.</span></span> 

<span data-ttu-id="2077d-1067">hello 安裝及操作 SRS 的運作方式也會在內部部署，在 Azure 虛擬機器服務中裝載的 VM 中的功能。</span><span class="sxs-lookup"><span data-stu-id="2077d-1067">hello installation and operation of SRS works as well functionally in a VM hosted in Azure Virtual Machine Services as it does on-premises.</span></span>

<span data-ttu-id="2077d-1068">目前不支援透過 SAP 複寫伺服器的 ASE HADR。</span><span class="sxs-lookup"><span data-stu-id="2077d-1068">ASE HADR via SAP Replication Server is NOT supported at this point in time.</span></span> <span data-ttu-id="2077d-1069">它可能會進行測試並發行中 hello 未來的 Microsoft Azure 平台。</span><span class="sxs-lookup"><span data-stu-id="2077d-1069">It might be tested with and released for Microsoft Azure platforms in hello future.</span></span>

## <a name="specifics-toooracle-database-on-windows"></a><span data-ttu-id="2077d-1070">細節 tooOracle Windows 上的資料庫</span><span class="sxs-lookup"><span data-stu-id="2077d-1070">Specifics tooOracle Database on Windows</span></span>
<span data-ttu-id="2077d-1071">Microsoft Windows HYPER-V 和 Azure 的 Oracle toorun 支援 oracle 軟體。</span><span class="sxs-lookup"><span data-stu-id="2077d-1071">Oracle software is supported by Oracle toorun on Microsoft Windows Hyper-V and Azure.</span></span> <span data-ttu-id="2077d-1072">如需 Windows HYPER-V 和 Azure 的 hello 一般支援的詳細資訊，請檢查： <https://blogs.oracle.com/cloud/entry/oracle_and_microsoft_join_forces></span><span class="sxs-lookup"><span data-stu-id="2077d-1072">For details on hello general support of Windows Hyper-V and Azure, check: <https://blogs.oracle.com/cloud/entry/oracle_and_microsoft_join_forces></span></span> 

<span data-ttu-id="2077d-1073">下列 hello 一般支援，是也支援 hello 的 SAP 應用程式利用 Oracle 資料庫的特定案例。</span><span class="sxs-lookup"><span data-stu-id="2077d-1073">Following hello general support, hello specific scenario of SAP applications leveraging Oracle Databases is supported as well.</span></span> <span data-ttu-id="2077d-1074">這一部分 hello 文件中命名詳細資料。</span><span class="sxs-lookup"><span data-stu-id="2077d-1074">Details are named in this part of hello document.</span></span>

### <a name="oracle-version-support"></a><span data-ttu-id="2077d-1075">Oracle 版本支援</span><span class="sxs-lookup"><span data-stu-id="2077d-1075">Oracle Version Support</span></span>
<span data-ttu-id="2077d-1076">在 SAP 附註 [2039619] 中，可找到 Azure 虛擬機器上的 Oracle 執行 SAP 時所支援的 Oracle 版本和對應的 OS 版本。</span><span class="sxs-lookup"><span data-stu-id="2077d-1076">Oracle versions and corresponding OS versions, which are supported for running SAP on Oracle on Azure Virtual Machines can be found in SAP Note [2039619].</span></span>

<span data-ttu-id="2077d-1077">如需有關在 Oracle 上執行 SAP 商務套件的一般資訊，請參閱 1DX：<https://www.sap.com/community/topic/oracle.html></span><span class="sxs-lookup"><span data-stu-id="2077d-1077">General information about running SAP Business Suite on Oracle can be found in 1DX: <https://www.sap.com/community/topic/oracle.html></span></span>

### <a name="oracle-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="2077d-1078">在 Azure VM 中安裝 SAP 的 Oracle 組態指導方針</span><span class="sxs-lookup"><span data-stu-id="2077d-1078">Oracle Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="2077d-1079">儲存體組態</span><span class="sxs-lookup"><span data-stu-id="2077d-1079">Storage configuration</span></span>
<span data-ttu-id="2077d-1080">只支援 Oracle 使用 NTFS 格式化磁碟的單一執行個體。</span><span class="sxs-lookup"><span data-stu-id="2077d-1080">Only single instance Oracle using NTFS formatted disks is supported.</span></span> <span data-ttu-id="2077d-1081">所有資料庫檔案必須都儲存在 hello 基礎 Vhd 或受管理的磁碟上的 NTFS 檔案系統上。</span><span class="sxs-lookup"><span data-stu-id="2077d-1081">All database files must be stored on hello NTFS file system based on VHDs or Managed Disks.</span></span> <span data-ttu-id="2077d-1082">這些磁碟掛接的 toohello Azure VM，且都根據 Azure 分頁 BLOB 儲存體 (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) 或受管理的磁碟 (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>)。</span><span class="sxs-lookup"><span data-stu-id="2077d-1082">These disks are mounted toohello Azure VM and are based on Azure Page BLOB Storage (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) or Managed Disks (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>).</span></span> <span data-ttu-id="2077d-1083">任何類型的網路磁碟機或遠端共用 (例如 Azure 檔案服務)：</span><span class="sxs-lookup"><span data-stu-id="2077d-1083">Any kind of network drives or remote shares like Azure file services:</span></span>

* <span data-ttu-id="2077d-1084"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span><span class="sxs-lookup"><span data-stu-id="2077d-1084"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span></span> 
* <span data-ttu-id="2077d-1085"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span><span class="sxs-lookup"><span data-stu-id="2077d-1085"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span></span>

<span data-ttu-id="2077d-1086">就 Oracle 資料庫檔案而言，都「不」  支援使用！</span><span class="sxs-lookup"><span data-stu-id="2077d-1086">are **NOT** supported for Oracle database files!</span></span>

<span data-ttu-id="2077d-1087">使用根據 Azure 分頁 BLOB 儲存體或管理磁碟的磁碟，hello 的文件章節中所做的陳述式[Vm 和資料磁碟的快取][ dbms-guide-2.1]和[Microsoft Azure 儲存體] [ dbms-guide-2.3]套用 toodeployments 以 hello 以及 Oracle 資料庫。</span><span class="sxs-lookup"><span data-stu-id="2077d-1087">Using disks based on Azure Page BLOB Storage or Managed Disks, hello statements made in this document in chapter [Caching for VMs and data disks][dbms-guide-2.1] and [Microsoft Azure Storage][dbms-guide-2.3] apply toodeployments with hello Oracle Database as well.</span></span>

<span data-ttu-id="2077d-1088">如同稍早在 hello hello 文件的一般組件中所說明，存在 Azure 磁碟的 IOPS 輸送量的配額。</span><span class="sxs-lookup"><span data-stu-id="2077d-1088">As explained earlier in hello general part of hello document, quotas on IOPS throughput for Azure disks exist.</span></span> <span data-ttu-id="2077d-1089">hello 確切配額會根據 hello VM 類型使用。</span><span class="sxs-lookup"><span data-stu-id="2077d-1089">hello exact quotas are depending on hello VM type used.</span></span> <span data-ttu-id="2077d-1090">如需 VM 類型及其配額的清單，請參閱[這裡 (Linux)][virtual-machines-sizes-linux] 和[這裡 (Windows)][virtual-machines-sizes-windows]。</span><span class="sxs-lookup"><span data-stu-id="2077d-1090">A list of VM types with their quotas can be found [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="2077d-1091">tooidentify hello 支援的 Azure VM 類型，請參閱 tooSAP 注意[1928533]。</span><span class="sxs-lookup"><span data-stu-id="2077d-1091">tooidentify hello supported Azure VM types, refer tooSAP note [1928533].</span></span>

<span data-ttu-id="2077d-1092">每個磁碟 hello 目前 IOPS 配額滿足 hello 需求，因為它是可能 toostore 所有 hello 一個單一的掛接磁碟上的資料庫檔案。</span><span class="sxs-lookup"><span data-stu-id="2077d-1092">As long as hello current IOPS quota per disk satisfies hello requirements, it is possible toostore all hello DB files on one single mounted disk.</span></span> 

<span data-ttu-id="2077d-1093">如果需要更多的 IOPS，強烈建議 toouse 視窗儲存集區 （只可用在 Windows Server 2012 和更新版本） 或 Windows 等量的 Windows 2008 R2 toocreate 一個大型的邏輯裝置透過多個已掛接的磁碟 (請參閱章節[軟體 RAID] [ dbms-guide-2.2]的這份文件)。</span><span class="sxs-lookup"><span data-stu-id="2077d-1093">If more IOPS are required, it is strongly recommended toouse Window Storage Pools (only available in Windows Server 2012 and higher) or Windows striping for Windows 2008 R2 toocreate one large logical device over multiple mounted disks (see also chapter [Software RAID][dbms-guide-2.2] of this document).</span></span> <span data-ttu-id="2077d-1094">這種方法可以簡化 hello 管理負擔 toomanage hello 磁碟空間，並避免 hello 投入時間 toomanually 將檔案分散到多個掛接的磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-1094">This approach simplifies hello administration overhead toomanage hello disk space and avoids hello effort toomanually distribute files across multiple mounted disks.</span></span>

#### <a name="backup--restore"></a><span data-ttu-id="2077d-1095">備份 / 還原</span><span class="sxs-lookup"><span data-stu-id="2077d-1095">Backup / Restore</span></span>
<span data-ttu-id="2077d-1096">備份 / 還原功能、 hello SAP BR * 工具支援 Oracle 為 hello 相同方式與在標準的 Windows 伺服器作業系統和 HYPER-V。</span><span class="sxs-lookup"><span data-stu-id="2077d-1096">For backup / restore functionality, hello SAP BR*Tools for Oracle are supported in hello same way as on standard Windows Server Operating Systems and Hyper-V.</span></span> <span data-ttu-id="2077d-1097">Toodisk 備份與還原自磁碟也支援 oracle 復原管理員 (RMAN)。</span><span class="sxs-lookup"><span data-stu-id="2077d-1097">Oracle Recovery Manager (RMAN) is also supported for backups toodisk and restore from disk.</span></span>

#### <a name="high-availability"></a><span data-ttu-id="2077d-1098">高可用性</span><span class="sxs-lookup"><span data-stu-id="2077d-1098">High Availability</span></span>
<span data-ttu-id="2077d-1099">基於高可用性和災害復原目的支援 Oracle Data Guard。</span><span class="sxs-lookup"><span data-stu-id="2077d-1099">Oracle Data Guard is supported for high availability and disaster recovery purposes.</span></span> <span data-ttu-id="2077d-1100">如需詳細資料，請參閱[這份][virtual-machines-windows-classic-configure-oracle-data-guard]文件。</span><span class="sxs-lookup"><span data-stu-id="2077d-1100">Details can be found in [this][virtual-machines-windows-classic-configure-oracle-data-guard] documentation.</span></span>

#### <a name="other"></a><span data-ttu-id="2077d-1101">其他</span><span class="sxs-lookup"><span data-stu-id="2077d-1101">Other</span></span>
<span data-ttu-id="2077d-1102">此文件以 hello 以及 Oracle 資料庫的 Vm 部署的前三個章節述 hello 適用於所有其他的一般主題如同 Azure 可用性設定組或 SAP 的監視。</span><span class="sxs-lookup"><span data-stu-id="2077d-1102">All other general topics like Azure Availability Sets or SAP monitoring apply as described in hello first three chapters of this document for deployments of VMs with hello Oracle Database as well.</span></span>

## <a name="specifics-toooracle-database-on-oracle-linux"></a><span data-ttu-id="2077d-1103">細節 tooOracle Oracle Linux 上的資料庫</span><span class="sxs-lookup"><span data-stu-id="2077d-1103">Specifics tooOracle Database on Oracle Linux</span></span>
<span data-ttu-id="2077d-1104">Microsoft Windows HYPER-V 和 Azure 的 Oracle toorun 支援 oracle 軟體。</span><span class="sxs-lookup"><span data-stu-id="2077d-1104">Oracle software is supported by Oracle toorun on Microsoft Windows Hyper-V and Azure.</span></span> <span data-ttu-id="2077d-1105">如需 Windows HYPER-V 和 Azure 的 hello 一般支援的詳細資訊，請檢查： <https://blogs.oracle.com/cloud/entry/oracle_and_microsoft_join_forces></span><span class="sxs-lookup"><span data-stu-id="2077d-1105">For details on hello general support of Windows Hyper-V and Azure, check: <https://blogs.oracle.com/cloud/entry/oracle_and_microsoft_join_forces></span></span> 

<span data-ttu-id="2077d-1106">下列 hello 一般支援，是也支援 hello 的 SAP 應用程式利用 Oracle 資料庫的特定案例。</span><span class="sxs-lookup"><span data-stu-id="2077d-1106">Following hello general support, hello specific scenario of SAP applications leveraging Oracle Databases is supported as well.</span></span> <span data-ttu-id="2077d-1107">這一部分 hello 文件中命名詳細資料。</span><span class="sxs-lookup"><span data-stu-id="2077d-1107">Details are named in this part of hello document.</span></span>

### <a name="oracle-version-support"></a><span data-ttu-id="2077d-1108">Oracle 版本支援</span><span class="sxs-lookup"><span data-stu-id="2077d-1108">Oracle Version Support</span></span>
<span data-ttu-id="2077d-1109">在 SAP 附註 [2039619] 中，可找到 Azure 虛擬機器上的 Oracle 執行 SAP 時所支援的 Oracle 版本和對應的 OS 版本。</span><span class="sxs-lookup"><span data-stu-id="2077d-1109">Oracle versions and corresponding OS versions, which are supported for running SAP on Oracle on Azure Virtual Machines can be found in SAP Note [2039619].</span></span>

<span data-ttu-id="2077d-1110">如需有關在 Oracle 上執行 SAP 商務套件的一般資訊，請參閱 1DX：<https://www.sap.com/community/topic/oracle.html></span><span class="sxs-lookup"><span data-stu-id="2077d-1110">General information about running SAP Business Suite on Oracle can be found in 1DX: <https://www.sap.com/community/topic/oracle.html></span></span>

### <a name="oracle-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="2077d-1111">在 Azure VM 中安裝 SAP 的 Oracle 組態指導方針</span><span class="sxs-lookup"><span data-stu-id="2077d-1111">Oracle Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="2077d-1112">儲存體組態</span><span class="sxs-lookup"><span data-stu-id="2077d-1112">Storage configuration</span></span>
<span data-ttu-id="2077d-1113">只支援 Oracle 使用 ext3、ext4 和 xfs 格式化磁碟的單一執行個體。</span><span class="sxs-lookup"><span data-stu-id="2077d-1113">Only single instance Oracle using ext3, ext4, and xfs formatted disks is supported.</span></span> <span data-ttu-id="2077d-1114">所有的資料庫檔案都必須儲存於以 VHD 或受控磁碟為基礎的這些檔案系統上。</span><span class="sxs-lookup"><span data-stu-id="2077d-1114">All database files must be stored on these file systems based on VHDs or Managed Disks.</span></span> <span data-ttu-id="2077d-1115">這些磁碟掛接的 toohello Azure VM，且都根據 Azure 分頁 BLOB 儲存體 (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) 或受管理的磁碟 (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>)。</span><span class="sxs-lookup"><span data-stu-id="2077d-1115">These disks are mounted toohello Azure VM and are based on Azure Page BLOB Storage (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) or Managed Disks (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>).</span></span> <span data-ttu-id="2077d-1116">任何類型的網路磁碟機或遠端共用 (例如 Azure 檔案服務)：</span><span class="sxs-lookup"><span data-stu-id="2077d-1116">Any kind of network drives or remote shares like Azure file services:</span></span>

* <span data-ttu-id="2077d-1117"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span><span class="sxs-lookup"><span data-stu-id="2077d-1117"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span></span> 
* <span data-ttu-id="2077d-1118"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span><span class="sxs-lookup"><span data-stu-id="2077d-1118"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span></span>

<span data-ttu-id="2077d-1119">就 Oracle 資料庫檔案而言，都「不」  支援使用！</span><span class="sxs-lookup"><span data-stu-id="2077d-1119">are **NOT** supported for Oracle database files!</span></span>

<span data-ttu-id="2077d-1120">使用根據 Azure 分頁 BLOB 儲存體或管理磁碟的磁碟，hello 的文件章節中所做的陳述式[Vm 和資料磁碟的快取][ dbms-guide-2.1]和[Microsoft Azure 儲存體] [ dbms-guide-2.3]套用 toodeployments 以 hello 以及 Oracle 資料庫。</span><span class="sxs-lookup"><span data-stu-id="2077d-1120">Using disks based on Azure Page BLOB Storage or Managed Disks, hello statements made in this document in chapter [Caching for VMs and data disks][dbms-guide-2.1] and [Microsoft Azure Storage][dbms-guide-2.3] apply toodeployments with hello Oracle Database as well.</span></span>

<span data-ttu-id="2077d-1121">如同稍早在 hello hello 文件的一般組件中所說明，存在 Azure 磁碟的 IOPS 輸送量的配額。</span><span class="sxs-lookup"><span data-stu-id="2077d-1121">As explained earlier in hello general part of hello document, quotas on IOPS throughput for Azure disks exist.</span></span> <span data-ttu-id="2077d-1122">hello 確切配額會根據 hello VM 類型使用。</span><span class="sxs-lookup"><span data-stu-id="2077d-1122">hello exact quotas are depending on hello VM type used.</span></span> <span data-ttu-id="2077d-1123">如需 VM 類型及其配額的清單，請參閱[這裡 (Linux)][virtual-machines-sizes-linux] 和[這裡 (Windows)][virtual-machines-sizes-windows]。</span><span class="sxs-lookup"><span data-stu-id="2077d-1123">A list of VM types with their quotas can be found [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="2077d-1124">tooidentify hello 支援的 Azure VM 類型，請參閱 tooSAP 注意[1928533]</span><span class="sxs-lookup"><span data-stu-id="2077d-1124">tooidentify hello supported Azure VM types, refer tooSAP note [1928533]</span></span>

<span data-ttu-id="2077d-1125">每個磁碟 hello 目前 IOPS 配額滿足 hello 需求，因為它是可能 toostore 所有 hello 一個單一的掛接磁碟上的資料庫檔案。</span><span class="sxs-lookup"><span data-stu-id="2077d-1125">As long as hello current IOPS quota per disk satisfies hello requirements, it is possible toostore all hello DB files on one single mounted disk.</span></span> 

<span data-ttu-id="2077d-1126">如果需要更多的 IOPS，強烈建議 toouse LVM （邏輯磁碟區管理員） 或 MDADM toocreate 一個大型邏輯磁碟區上多個已掛接的磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-1126">If more IOPS are required, it is strongly recommended toouse LVM (Logical Volume Manager) or MDADM toocreate one large logical volume over multiple mounted disks.</span></span> <span data-ttu-id="2077d-1127">另請參閱本文件的[軟體 RAID][dbms-guide-2.2] 一章。</span><span class="sxs-lookup"><span data-stu-id="2077d-1127">See also chapter [Software RAID][dbms-guide-2.2] of this document.</span></span> <span data-ttu-id="2077d-1128">這種方法可以簡化 hello 管理負擔 toomanage hello 磁碟空間，並避免 hello 投入時間 toomanually 將檔案分散到多個掛接的磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-1128">This approach simplifies hello administration overhead toomanage hello disk space and avoids hello effort toomanually distribute files across multiple mounted disks.</span></span>

#### <a name="backup--restore"></a><span data-ttu-id="2077d-1129">備份 / 還原</span><span class="sxs-lookup"><span data-stu-id="2077d-1129">Backup / Restore</span></span>
<span data-ttu-id="2077d-1130">備份 / 還原功能、 hello SAP BR * 工具支援 Oracle 為 hello 相同方式與在裸機和 HYPER-V。</span><span class="sxs-lookup"><span data-stu-id="2077d-1130">For backup / restore functionality, hello SAP BR*Tools for Oracle are supported in hello same way as on bare metal and Hyper-V.</span></span> <span data-ttu-id="2077d-1131">Toodisk 備份與還原自磁碟也支援 oracle 復原管理員 (RMAN)。</span><span class="sxs-lookup"><span data-stu-id="2077d-1131">Oracle Recovery Manager (RMAN) is also supported for backups toodisk and restore from disk.</span></span>

#### <a name="high-availability"></a><span data-ttu-id="2077d-1132">高可用性</span><span class="sxs-lookup"><span data-stu-id="2077d-1132">High Availability</span></span>
<span data-ttu-id="2077d-1133">基於高可用性和災害復原目的支援 Oracle Data Guard。</span><span class="sxs-lookup"><span data-stu-id="2077d-1133">Oracle Data Guard is supported for high availability and disaster recovery purposes.</span></span> <span data-ttu-id="2077d-1134">如需詳細資料，請參閱[這份][virtual-machines-windows-classic-configure-oracle-data-guard]文件。</span><span class="sxs-lookup"><span data-stu-id="2077d-1134">Details can be found in [this][virtual-machines-windows-classic-configure-oracle-data-guard] documentation.</span></span>

#### <a name="other"></a><span data-ttu-id="2077d-1135">其他</span><span class="sxs-lookup"><span data-stu-id="2077d-1135">Other</span></span>
<span data-ttu-id="2077d-1136">此文件以 hello 以及 Oracle 資料庫的 Vm 部署的前三個章節述 hello 適用於所有其他的一般主題如同 Azure 可用性設定組或 SAP 的監視。</span><span class="sxs-lookup"><span data-stu-id="2077d-1136">All other general topics like Azure Availability Sets or SAP monitoring apply as described in hello first three chapters of this document for deployments of VMs with hello Oracle Database as well.</span></span>

## <a name="specifics-for-hello-sap-maxdb-database-on-windows"></a><span data-ttu-id="2077d-1137">環境的 hello Windows 上的 SAP MaxDB 資料庫</span><span class="sxs-lookup"><span data-stu-id="2077d-1137">Specifics for hello SAP MaxDB Database on Windows</span></span>
### <a name="sap-maxdb-version-support"></a><span data-ttu-id="2077d-1138">SAP MaxDB 版本支援</span><span class="sxs-lookup"><span data-stu-id="2077d-1138">SAP MaxDB Version Support</span></span>
<span data-ttu-id="2077d-1139">SAP 目前支援 SAP MaxDB 版本 7.9，以便與 Azure 中 SAP NetWeaver 架構的產品搭配使用。</span><span class="sxs-lookup"><span data-stu-id="2077d-1139">SAP currently supports SAP MaxDB version 7.9 for use with SAP NetWeaver-based products in Azure.</span></span> <span data-ttu-id="2077d-1140">在 SAP 服務商場提供 SAP MaxDB 伺服器、 或 JDBC 和 ODBC 驅動程式 toobe SAP NetWeaver 架構的產品搭配使用的所有更新等作業只透過 hello <https://support.sap.com/swdc>。</span><span class="sxs-lookup"><span data-stu-id="2077d-1140">All updates for SAP MaxDB server, or JDBC and ODBC drivers toobe used with SAP NetWeaver-based products are provided solely through hello SAP Service Marketplace at <https://support.sap.com/swdc>.</span></span>
<span data-ttu-id="2077d-1141">如需有關在 SAP MaxDB 上執行 SAP NetWeaver 的一般資訊，請參閱 <https://www.sap.com/community/topic/maxdb.html>。</span><span class="sxs-lookup"><span data-stu-id="2077d-1141">General information on running SAP NetWeaver on SAP MaxDB can be found at <https://www.sap.com/community/topic/maxdb.html>.</span></span>

### <a name="supported-microsoft-windows-versions-and-azure-vm-types-for-sap-maxdb-dbms"></a><span data-ttu-id="2077d-1142">針對 SAP MaxDB DBMS 支援的 Microsoft Windows 版本和 Azure VM 類型</span><span class="sxs-lookup"><span data-stu-id="2077d-1142">Supported Microsoft Windows Versions and Azure VM types for SAP MaxDB DBMS</span></span>
<span data-ttu-id="2077d-1143">在 Azure 上 SAP MaxDB DBMS toofind hello 支援 Microsoft Windows 版本，請參閱：</span><span class="sxs-lookup"><span data-stu-id="2077d-1143">toofind hello supported Microsoft Windows version for SAP MaxDB DBMS on Azure, see:</span></span>

* <span data-ttu-id="2077d-1144">[SAP 產品可用性對照表 (PAM)][sap-pam]</span><span class="sxs-lookup"><span data-stu-id="2077d-1144">[SAP Product Availability Matrix (PAM)][sap-pam]</span></span>
* <span data-ttu-id="2077d-1145">SAP 附註 [1928533]</span><span class="sxs-lookup"><span data-stu-id="2077d-1145">SAP Note [1928533]</span></span>

<span data-ttu-id="2077d-1146">強烈建議 toouse hello 最新版本的 hello 作業系統 Microsoft Windows 中，這是 Microsoft Windows 2012 R2。</span><span class="sxs-lookup"><span data-stu-id="2077d-1146">It is highly recommended toouse hello newest version of hello operating system Microsoft Windows, which is Microsoft Windows 2012 R2.</span></span>

### <a name="available-sap-maxdb-documentation"></a><span data-ttu-id="2077d-1147">可用的 SAP MaxDB 文件</span><span class="sxs-lookup"><span data-stu-id="2077d-1147">Available SAP MaxDB Documentation</span></span>
<span data-ttu-id="2077d-1148">您可以找到下列 SAP 附註的 hello hello 更新 SAP MaxDB 文件清單[767598]</span><span class="sxs-lookup"><span data-stu-id="2077d-1148">You can find hello updated list of SAP MaxDB documentation in hello following SAP Note [767598]</span></span>

### <a name="sap-maxdb-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="2077d-1149">在 Azure VM 中安裝 SAP 的 SAP MaxDB 組態指導方針</span><span class="sxs-lookup"><span data-stu-id="2077d-1149">SAP MaxDB Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <span data-ttu-id="2077d-1150"><a name="b48cfe3b-48e9-4f5b-a783-1d29155bd573"></a>儲存體組態</span><span class="sxs-lookup"><span data-stu-id="2077d-1150"><a name="b48cfe3b-48e9-4f5b-a783-1d29155bd573"></a>Storage configuration</span></span>
<span data-ttu-id="2077d-1151">SAP MaxDB 的 azure 儲存體最佳作法，請依照下列章節中所述的 hello 一般建議[RDBMS 部署結構][dbms-guide-2]。</span><span class="sxs-lookup"><span data-stu-id="2077d-1151">Azure storage best practices for SAP MaxDB follow hello general recommendations mentioned in chapter [Structure of an RDBMS Deployment][dbms-guide-2].</span></span>

> [!IMPORTANT]
> <span data-ttu-id="2077d-1152">如同其他資料庫，SAP MaxDB 也有資料和記錄檔。</span><span class="sxs-lookup"><span data-stu-id="2077d-1152">Like other databases, SAP MaxDB also has data and log files.</span></span> <span data-ttu-id="2077d-1153">不過，在 SAP MaxDB 用語 hello 正確詞彙是 「 磁碟區 」 （非 「 檔案 」）。</span><span class="sxs-lookup"><span data-stu-id="2077d-1153">However, in SAP MaxDB terminology hello correct term is “volume” (not “file”).</span></span> <span data-ttu-id="2077d-1154">例如，有 SAP MaxDB 資料磁碟區和記錄磁碟區。</span><span class="sxs-lookup"><span data-stu-id="2077d-1154">For example, there are SAP MaxDB data volumes and log volumes.</span></span> <span data-ttu-id="2077d-1155">請勿與作業系統磁碟區混淆。</span><span class="sxs-lookup"><span data-stu-id="2077d-1155">Do not confuse these with OS disk volumes.</span></span> 
> 
> 

<span data-ttu-id="2077d-1156">簡單地說，您必須︰</span><span class="sxs-lookup"><span data-stu-id="2077d-1156">In short you have to:</span></span>

* <span data-ttu-id="2077d-1157">如果您使用 Azure 儲存體帳戶，設定太保存 hello SAP MaxDB 資料和記錄磁碟區 （也就是檔案） 的 hello Azure 儲存體帳戶**本機備援儲存體 (LRS)**章節中所指定[Microsoft Azure 儲存體][dbms-guide-2.3].</span><span class="sxs-lookup"><span data-stu-id="2077d-1157">If you use Azure Storage accounts, set hello Azure storage account that holds hello SAP MaxDB data and log volumes (i.e. files) too**Local Redundant Storage (LRS)** as specified in chapter [Microsoft Azure Storage][dbms-guide-2.3].</span></span>
* <span data-ttu-id="2077d-1158">從記錄檔磁碟區 （也就是檔案） 的 hello IO 路徑 SAP MaxDB 資料磁碟區 （也就是檔案） 的個別 hello IO 路徑。</span><span class="sxs-lookup"><span data-stu-id="2077d-1158">Separate hello IO path for SAP MaxDB data volumes (i.e. files) from hello IO path for log volumes (i.e. files).</span></span> <span data-ttu-id="2077d-1159">這表示 SAP MaxDB 資料磁碟區 （也就是檔案） 有一個邏輯磁碟機上安裝的 toobe，而且 SAP MaxDB 記錄磁碟區 （也就是檔案） 有 toobe 安裝在另一個邏輯磁碟機。</span><span class="sxs-lookup"><span data-stu-id="2077d-1159">This means that SAP MaxDB data volumes (i.e. files) have toobe installed on one logical drive and SAP MaxDB log volumes (i.e. files) have toobe installed on another logical drive.</span></span>
* <span data-ttu-id="2077d-1160">集 hello 適當快取類型的每個磁碟，根據是否使用它的 SAP MaxDB 資料或記錄檔磁碟區 （也就是 「 檔案 」），以及您是否使用標準 Azure 或 Azure 高階儲存體，章節中所述[快取 Vm 和資料磁碟][dbms-guide-2.1].</span><span class="sxs-lookup"><span data-stu-id="2077d-1160">Set hello proper caching type for each disk, depending on whether you use it for SAP MaxDB data or log volumes (i.e. files), and whether you use Azure Standard or Azure Premium Storage, as described in chapter [Caching for VMs and data disks][dbms-guide-2.1].</span></span>
* <span data-ttu-id="2077d-1161">只要每個磁碟 hello 目前 IOPS 配額滿足 hello 需求，可能 toostore 單一掛接磁碟上的所有 hello 資料磁碟區，並也儲存在另一個單一掛接的磁碟上的所有資料庫記錄檔磁碟區。</span><span class="sxs-lookup"><span data-stu-id="2077d-1161">As long as hello current IOPS quota per disk satisfies hello requirements, it is possible toostore all hello data volumes on a single mounted disk, and also store all database log volumes on another single mounted disk.</span></span>
* <span data-ttu-id="2077d-1162">如果需要更多的 IOPS 及/或空格，強烈建議 toouse Microsoft 視窗儲存集區 （只用於 Microsoft Windows Server 2012 和更新版本） 或 Microsoft Windows 的 Microsoft Windows 2008 R2 toocreate 的條狀配置一個大型的邏輯裝置透過多個已掛接的磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-1162">If more IOPS and/or space are required, it is strongly recommended toouse Microsoft Window Storage Pools (only available in Microsoft Windows Server 2012 and higher) or Microsoft Windows striping for Microsoft Windows 2008 R2 toocreate one large logical device over multiple mounted disks.</span></span> <span data-ttu-id="2077d-1163">另請參閱本文件的[軟體 RAID][dbms-guide-2.2] 一章。</span><span class="sxs-lookup"><span data-stu-id="2077d-1163">See also chapter [Software RAID][dbms-guide-2.2] of this document.</span></span> <span data-ttu-id="2077d-1164">這種方法可以簡化 hello 管理負擔 toomanage hello 磁碟空間，並避免 hello 投入時間的手動將檔案分散到多個已掛接的磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-1164">This approach simplifies hello administration overhead toomanage hello disk space and avoids hello effort of manually distributing files across multiple mounted disks.</span></span>
* <span data-ttu-id="2077d-1165">如需最高 IOPS 需求 hello，您可以使用 Azure 高階儲存體，DS 系列和 GS 系列 Vm 上。</span><span class="sxs-lookup"><span data-stu-id="2077d-1165">For hello highest IOPS requirements, you can use Azure Premium Storage, which is available on DS-series and GS-series VMs.</span></span>

![適用於 SAP MaxDB DBMS 之 Azure IaaS VM 的參考組態][dbms-guide-figure-600]

#### <span data-ttu-id="2077d-1167"><a name="23c78d3b-ca5a-4e72-8a24-645d141a3f5d"></a>備份與還原</span><span class="sxs-lookup"><span data-stu-id="2077d-1167"><a name="23c78d3b-ca5a-4e72-8a24-645d141a3f5d"></a>Backup and Restore</span></span>
<span data-ttu-id="2077d-1168">將 SAP MaxDB 部署至 Azure 時，您必須檢閱備份方法。</span><span class="sxs-lookup"><span data-stu-id="2077d-1168">When deploying SAP MaxDB into Azure, you must review your backup methodology.</span></span> <span data-ttu-id="2077d-1169">即使 hello 系統不是生產系統，SAP MaxDB 所裝載的 hello SAP 資料庫必須定期備份。</span><span class="sxs-lookup"><span data-stu-id="2077d-1169">Even if hello system is not a productive system, hello SAP database hosted by SAP MaxDB must be backed up periodically.</span></span> <span data-ttu-id="2077d-1170">由於 Azure 儲存體會保留三個映像，因此在保護系統以免發生儲存體失敗以及更重要的操作或系統管理失敗方面，備份現在已變得較不重要。</span><span class="sxs-lookup"><span data-stu-id="2077d-1170">Since Azure Storage keeps three images, a backup is now less important in terms of protecting your system against storage failure and more important operational or administrative failures.</span></span> <span data-ttu-id="2077d-1171">hello 維護適當的備份與還原計劃的主要原因是，讓您可以藉由提供時間點復原功能的邏輯或手動錯誤補償。</span><span class="sxs-lookup"><span data-stu-id="2077d-1171">hello primary reason for maintaining a proper backup and restore plan is so that you can compensate for logical or manual errors by providing point-in-time recovery capabilities.</span></span> <span data-ttu-id="2077d-1172">Hello 的目標是讓 tooeither 使用備份 toorestore hello 資料庫 tooa 特定點 Azure tooseed 中的時間或 toouse hello 備份中的另一個系統複製 hello 現有的資料庫。</span><span class="sxs-lookup"><span data-stu-id="2077d-1172">So hello goal is tooeither use backups toorestore hello database tooa certain point in time or toouse hello backups in Azure tooseed another system by copying hello existing database.</span></span> <span data-ttu-id="2077d-1173">例如，您無法從傳輸的 2 層 SAP 組態 tooa 3 層系統設定 hello 相同系統還原的備份。</span><span class="sxs-lookup"><span data-stu-id="2077d-1173">For example, you could transfer from a 2-tier SAP configuration tooa 3-tier system setup of hello same system by restoring a backup.</span></span>

<span data-ttu-id="2077d-1174">備份和還原 Azure works hello 相同方式如同對內部部署系統，因此您可以使用標準的 SAP MaxDB 備份/還原工具，如下所述其中 hello SAP MaxDB 文件集文件中的資料庫所列於 SAP Note [767598].</span><span class="sxs-lookup"><span data-stu-id="2077d-1174">Backing up and restoring a database in Azure works hello same way as it does for on-premises systems, so you can use standard SAP MaxDB backup/restore tools, which are described in one of hello SAP MaxDB documentation documents listed in SAP Note [767598].</span></span> 

#### <span data-ttu-id="2077d-1175"><a name="77cd2fbb-307e-4cbf-a65f-745553f72d2c"></a>備份與還原的效能考量</span><span class="sxs-lookup"><span data-stu-id="2077d-1175"><a name="77cd2fbb-307e-4cbf-a65f-745553f72d2c"></a>Performance Considerations for Backup and Restore</span></span>
<span data-ttu-id="2077d-1176">與裸機部署備份和還原效能是取決於磁碟區數目可以讀取這些磁碟區的平行和 hello 輸送量。</span><span class="sxs-lookup"><span data-stu-id="2077d-1176">As in bare-metal deployments, backup and restore performance is dependent on how many volumes can be read in parallel and hello throughput of those volumes.</span></span> <span data-ttu-id="2077d-1177">此外，備份壓縮所使用的 CPU 耗用量 hello 可以播放相當重要的角色與 Vm 上 tooeight CPU 執行緒。</span><span class="sxs-lookup"><span data-stu-id="2077d-1177">In addition, hello CPU consumption used by backup compression can play a significant role on VMs with up tooeight CPU threads.</span></span> <span data-ttu-id="2077d-1178">因此，您可以假設︰</span><span class="sxs-lookup"><span data-stu-id="2077d-1178">Therefore, one can assume:</span></span>

* <span data-ttu-id="2077d-1179">hello 所使用的磁碟 toostore hello 資料庫裝置的較少 hello 數目、 hello 較低的 hello 整體讀取輸送量</span><span class="sxs-lookup"><span data-stu-id="2077d-1179">hello fewer hello number of disks used toostore hello database devices, hello lower hello overall read throughput</span></span>
* <span data-ttu-id="2077d-1180">hello 數目較少 hello hello VM 中的 CPU 執行緒、 hello 更嚴重 hello 備份壓縮的影響</span><span class="sxs-lookup"><span data-stu-id="2077d-1180">hello smaller hello number of CPU threads in hello VM, hello more severe hello impact of backup compression</span></span>
* <span data-ttu-id="2077d-1181">hello 較少 （等量磁碟區的目錄，磁碟） 的目標 toowrite hello 備份至 hello hello 輸送量更低</span><span class="sxs-lookup"><span data-stu-id="2077d-1181">hello fewer targets (Stripe Directories, disks) toowrite hello backup to, hello lower hello throughput</span></span>

<span data-ttu-id="2077d-1182">tooincrease hello 數目為目標來 toowrite，有兩個選項，您可以使用，可能是在組合中，根據您的需求：</span><span class="sxs-lookup"><span data-stu-id="2077d-1182">tooincrease hello number of targets toowrite to, there are two options that you can use, possibly in combination, depending on your needs:</span></span>

* <span data-ttu-id="2077d-1183">專門用來備份的個別磁碟區</span><span class="sxs-lookup"><span data-stu-id="2077d-1183">Dedicating separate volumes for backup</span></span>
* <span data-ttu-id="2077d-1184">透過順序 tooimprove hello IOPS 輸送量等量的磁碟區上的多個已掛接磁碟條狀配置 hello 備份目標磁碟區</span><span class="sxs-lookup"><span data-stu-id="2077d-1184">Striping hello backup target volume over multiple mounted disks in order tooimprove hello IOPS throughput on that striped disk volume</span></span>
* <span data-ttu-id="2077d-1185">有適用於下列各項的個別專用邏輯磁碟裝置︰</span><span class="sxs-lookup"><span data-stu-id="2077d-1185">Having separate dedicated logical disk devices for:</span></span>
  * <span data-ttu-id="2077d-1186">SAP MaxDB 備份磁碟區 (也就是檔案)</span><span class="sxs-lookup"><span data-stu-id="2077d-1186">SAP MaxDB backup volumes (i.e. files)</span></span>
  * <span data-ttu-id="2077d-1187">SAP MaxDB 資料磁碟區 (也就是檔案)</span><span class="sxs-lookup"><span data-stu-id="2077d-1187">SAP MaxDB data volumes (i.e. files)</span></span>
  * <span data-ttu-id="2077d-1188">SAP MaxDB 記錄磁碟區 (也就是檔案)</span><span class="sxs-lookup"><span data-stu-id="2077d-1188">SAP MaxDB log volumes (i.e. files)</span></span>

<span data-ttu-id="2077d-1189">關於在多個掛接的磁碟上等量劃分磁碟區，先前在本文件的[軟體 RAID][dbms-guide-2.2] 一章中已討論過。</span><span class="sxs-lookup"><span data-stu-id="2077d-1189">Striping a volume over multiple mounted disks has been discussed earlier in chapter [Software RAID][dbms-guide-2.2] of this document.</span></span> 

#### <span data-ttu-id="2077d-1190"><a name="f77c1436-9ad8-44fb-a331-8671342de818"></a>其他</span><span class="sxs-lookup"><span data-stu-id="2077d-1190"><a name="f77c1436-9ad8-44fb-a331-8671342de818"></a>Other</span></span>
<span data-ttu-id="2077d-1191">中所述 hello 與 hello SAP MaxDB 資料庫的 Vm 部署此文件的前三個章節，也適用於所有其他的一般主題例如 Azure 可用性設定組或 SAP 的監視。</span><span class="sxs-lookup"><span data-stu-id="2077d-1191">All other general topics such as Azure Availability Sets or SAP monitoring also apply as described in hello first three chapters of this document for deployments of VMs with hello SAP MaxDB database.</span></span>
<span data-ttu-id="2077d-1192">其他 SAP MaxDB 特定設定透明 tooAzure vm，而且不同於 SAP Note 列出的文件中描述[767598]和在這些 SAP 附註：</span><span class="sxs-lookup"><span data-stu-id="2077d-1192">Other SAP MaxDB-specific settings are transparent tooAzure VMs and are described in different documents listed in SAP Note [767598] and in these SAP notes:</span></span>

* <span data-ttu-id="2077d-1193">[826037]</span><span class="sxs-lookup"><span data-stu-id="2077d-1193">[826037]</span></span> 
* <span data-ttu-id="2077d-1194">[1139904]</span><span class="sxs-lookup"><span data-stu-id="2077d-1194">[1139904]</span></span>
* <span data-ttu-id="2077d-1195">[1173395]</span><span class="sxs-lookup"><span data-stu-id="2077d-1195">[1173395]</span></span>

## <a name="specifics-for-sap-livecache-on-windows"></a><span data-ttu-id="2077d-1196">Windows 上 SAP liveCache 專屬的詳細資料</span><span class="sxs-lookup"><span data-stu-id="2077d-1196">Specifics for SAP liveCache on Windows</span></span>
### <a name="sap-livecache-version-support"></a><span data-ttu-id="2077d-1197">SAP liveCache 版本支援</span><span class="sxs-lookup"><span data-stu-id="2077d-1197">SAP liveCache Version Support</span></span>
<span data-ttu-id="2077d-1198">「Azure 虛擬機器」中支援的 SAP liveCache 最低版本是針對 **EhP 2 for SAP SCM 7.0** 和更新版本發行的 **SAP LC/LCAPPS 10.0 SP 25** (包括 **liveCache 7.9.08.31** 和 **LCA-Build 25**)。</span><span class="sxs-lookup"><span data-stu-id="2077d-1198">Minimal version of SAP liveCache supported in Azure Virtual Machines is **SAP LC/LCAPPS 10.0 SP 25** including **liveCache 7.9.08.31** and **LCA-Build 25**, released for **EhP 2 for SAP SCM 7.0** and higher.</span></span>

### <a name="supported-microsoft-windows-versions-and-azure-vm-types-for-sap-livecache-dbms"></a><span data-ttu-id="2077d-1199">針對 SAP liveCache DBMS 支援的 Microsoft Windows 版本和 Azure VM 類型</span><span class="sxs-lookup"><span data-stu-id="2077d-1199">Supported Microsoft Windows Versions and Azure VM types for SAP liveCache DBMS</span></span>
<span data-ttu-id="2077d-1200">在 Azure 上 SAP liveCache toofind hello 支援 Microsoft Windows 版本，請參閱：</span><span class="sxs-lookup"><span data-stu-id="2077d-1200">toofind hello supported Microsoft Windows version for SAP liveCache on Azure, see:</span></span>

* <span data-ttu-id="2077d-1201">[SAP 產品可用性對照表 (PAM)][sap-pam]</span><span class="sxs-lookup"><span data-stu-id="2077d-1201">[SAP Product Availability Matrix (PAM)][sap-pam]</span></span>
* <span data-ttu-id="2077d-1202">SAP 附註 [1928533]</span><span class="sxs-lookup"><span data-stu-id="2077d-1202">SAP Note [1928533]</span></span>

<span data-ttu-id="2077d-1203">強烈建議 hello 作業系統的 Microsoft Windows Server toouse hello 最新版本。</span><span class="sxs-lookup"><span data-stu-id="2077d-1203">It is highly recommended toouse hello newest version of hello operating system Microsoft Windows Server.</span></span> 

### <a name="sap-livecache-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="2077d-1204">在 Azure VM 中安裝 SAP 的 SAP liveCache 組態指導方針</span><span class="sxs-lookup"><span data-stu-id="2077d-1204">SAP liveCache Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="recommended-azure-vm-types"></a><span data-ttu-id="2077d-1205">建議的 Azure VM 類型</span><span class="sxs-lookup"><span data-stu-id="2077d-1205">Recommended Azure VM Types</span></span>
<span data-ttu-id="2077d-1206">因為 SAP liveCache 是執行大量計算的應用程式，hello 容量和速度的 RAM 與 CPU 會有對 SAP liveCache 效能的主要影響。</span><span class="sxs-lookup"><span data-stu-id="2077d-1206">As SAP liveCache is an application that performs huge calculations, hello amount and speed of RAM and CPU has a major influence on SAP liveCache performance.</span></span> 

<span data-ttu-id="2077d-1207">針對 SAP 所支援的 hello Azure VM 類型 (SAP 附註[1928533])，所有的虛擬 CPU 資源配置的 toohello VM 都由專用的 hello hypervisor 實體的 CPU 資源。</span><span class="sxs-lookup"><span data-stu-id="2077d-1207">For hello Azure VM types supported by SAP (SAP Note [1928533]), all virtual CPU resources allocated toohello VM are backed by dedicated physical CPU resources of hello hypervisor.</span></span> <span data-ttu-id="2077d-1208">不會產生過度佈建 (因此不會產生 CPU 資源競爭)。</span><span class="sxs-lookup"><span data-stu-id="2077d-1208">No overprovisioning (and therefore no competition for CPU resources) takes place.</span></span>

<span data-ttu-id="2077d-1209">同樣地，SAP 支援的所有 Azure VM 執行個體類型，hello VM 記憶體都是對應的 100 %toohello 實體記憶體 – 過度佈建 （超額認可），例如，未使用。</span><span class="sxs-lookup"><span data-stu-id="2077d-1209">Similarly, for all Azure VM instance types supported by SAP, hello VM memory is 100% mapped toohello physical memory – overprovisioning (over-commitment), for example, is not used.</span></span>

<span data-ttu-id="2077d-1210">從這個觀點來看，強烈建議 toouse hello 新 D 系列或 DS 系列 （以與 Azure 高階儲存體一起使用） 的 Azure VM 類型，因為它們有 60%更快的處理器比 hello A 系列。</span><span class="sxs-lookup"><span data-stu-id="2077d-1210">From this perspective, it is highly recommended toouse hello new D- series or DS-series (in combination with Azure Premium Storage) Azure VM type, as they have 60% faster processors than hello A-series.</span></span> <span data-ttu-id="2077d-1211">Hello 最高的 RAM 和 CPU 負載，您可以使用 G 系列和最新 Intel® Xeon® 處理器 hello E5 v3 系列兩次 hello 記憶體，而且四次 hello 固態磁碟機 (Ssd) 的儲存 hello D （在搭配 Azure 高階儲存體） 的 GS 系列 Vm /DS 系列。</span><span class="sxs-lookup"><span data-stu-id="2077d-1211">For hello highest RAM and CPU load, you can use G-series and GS-series (in combination with Azure Premium Storage) VMs with hello latest Intel® Xeon® processor E5 v3 family, which have twice hello memory and four times hello solid state drive storage (SSDs) of hello D/DS-series.</span></span>

#### <a name="storage-configuration"></a><span data-ttu-id="2077d-1212">儲存體組態</span><span class="sxs-lookup"><span data-stu-id="2077d-1212">Storage Configuration</span></span>
<span data-ttu-id="2077d-1213">因為 SAP liveCache 根據 SAP MaxDB 技術，所有 hello Azure 儲存體的最佳作法建議章節中所述的 SAP MaxDB[儲存體設定][ dbms-guide-8.4.1]也都適用於 SAP liveCache。</span><span class="sxs-lookup"><span data-stu-id="2077d-1213">As SAP liveCache is based on SAP MaxDB technology, all hello Azure storage best practice recommendations mentioned for SAP MaxDB in chapter [Storage configuration][dbms-guide-8.4.1] are also valid for SAP liveCache.</span></span> 

#### <a name="dedicated-azure-vm-for-livecache"></a><span data-ttu-id="2077d-1214">liveCache 專用的 Azure VM</span><span class="sxs-lookup"><span data-stu-id="2077d-1214">Dedicated Azure VM for liveCache</span></span>
<span data-ttu-id="2077d-1215">因為 SAP liveCache 密集使用計算能力，正式上線使用強烈建議 toodeploy 專用 Azure 虛擬機器上。</span><span class="sxs-lookup"><span data-stu-id="2077d-1215">As SAP liveCache intensively uses computational power, for productive usage it is highly recommended toodeploy on a dedicated Azure Virtual Machine.</span></span> 

![適用於具生產力使用案例的 liveCache 專用的 Azure VM][dbms-guide-figure-700]

#### <a name="backup-and-restore"></a><span data-ttu-id="2077d-1217">備份與還原</span><span class="sxs-lookup"><span data-stu-id="2077d-1217">Backup and Restore</span></span>
<span data-ttu-id="2077d-1218">備份和還原，包括效能考量，已詳述於 hello 相關的 SAP MaxDB 章節[備份和還原][ dbms-guide-8.4.2]和[備份的效能考量還原和][dbms-guide-8.4.3]。</span><span class="sxs-lookup"><span data-stu-id="2077d-1218">Backup and restore, including performance considerations, are already described in hello relevant SAP MaxDB chapters [Backup and Restore][dbms-guide-8.4.2] and [Performance Considerations for Backup and Restore][dbms-guide-8.4.3].</span></span> 

#### <a name="other"></a><span data-ttu-id="2077d-1219">其他</span><span class="sxs-lookup"><span data-stu-id="2077d-1219">Other</span></span>
<span data-ttu-id="2077d-1220">其他一般的主題已詳述於 hello 相關 SAP MaxDB[這][ dbms-guide-8.4.4]章節。</span><span class="sxs-lookup"><span data-stu-id="2077d-1220">All other general topics are already described in hello relevant SAP MaxDB [this][dbms-guide-8.4.4] chapter.</span></span> 

## <a name="specifics-for-hello-sap-content-server-on-windows"></a><span data-ttu-id="2077d-1221">環境的 hello Windows 上的 SAP 內容伺服器</span><span class="sxs-lookup"><span data-stu-id="2077d-1221">Specifics for hello SAP Content Server on Windows</span></span>
<span data-ttu-id="2077d-1222">hello SAP 內容伺服器是個別伺服器元件 toostore 內容，例如以不同格式的電子文件。</span><span class="sxs-lookup"><span data-stu-id="2077d-1222">hello SAP Content Server is a separate, server-based component toostore content such as electronic documents in different formats.</span></span> <span data-ttu-id="2077d-1223">hello SAP 內容伺服器提供所開發的技術，而且只使用 toobe 跨應用程式的任何 SAP 應用程式。</span><span class="sxs-lookup"><span data-stu-id="2077d-1223">hello SAP Content Server is provided by development of technology and is toobe used cross-application for any SAP applications.</span></span> <span data-ttu-id="2077d-1224">它會安裝於不同的系統上。</span><span class="sxs-lookup"><span data-stu-id="2077d-1224">It is installed on a separate system.</span></span> <span data-ttu-id="2077d-1225">一般內容定型資料和從知識倉儲或技術的繪圖源自 hello mySAP PLM 文件管理系統的文件。</span><span class="sxs-lookup"><span data-stu-id="2077d-1225">Typical content is training material and documentation from Knowledge Warehouse or technical drawings originating from hello mySAP PLM Document Management System.</span></span> 

### <a name="sap-content-server-version-support"></a><span data-ttu-id="2077d-1226">SAP 內容伺服器版本支援</span><span class="sxs-lookup"><span data-stu-id="2077d-1226">SAP Content Server Version Support</span></span>
<span data-ttu-id="2077d-1227">SAP 目前支援：</span><span class="sxs-lookup"><span data-stu-id="2077d-1227">SAP currently supports:</span></span>

* <span data-ttu-id="2077d-1228">**SAP 內容伺服器**版本 **6.50 (和更新版本)**</span><span class="sxs-lookup"><span data-stu-id="2077d-1228">**SAP Content Server** with version **6.50 (and higher)**</span></span>
* <span data-ttu-id="2077d-1229">**SAP MaxDB 版本 7.9**</span><span class="sxs-lookup"><span data-stu-id="2077d-1229">**SAP MaxDB version 7.9**</span></span>
* <span data-ttu-id="2077d-1230">**Microsoft IIS (網際網路資訊伺服器) 版本 8.0 (和更新版本)**</span><span class="sxs-lookup"><span data-stu-id="2077d-1230">**Microsoft IIS (Internet Information Server) version 8.0 (and higher)**</span></span>

<span data-ttu-id="2077d-1231">強烈建議 toouse hello 最新版本的 SAP 內容伺服器，這在撰寫本文件的 hello 階段是**6.50 SP4**，與 hello 最新版本的**Microsoft IIS 8.5**。</span><span class="sxs-lookup"><span data-stu-id="2077d-1231">It is highly recommended toouse hello newest version of SAP Content Server, which at hello time of writing this document is **6.50 SP4**, and hello newest version of **Microsoft IIS 8.5**.</span></span> 

<span data-ttu-id="2077d-1232">檢查 SAP 內容伺服器與 Microsoft IIS 的最新支援的 hello 版本 hello [SAP 產品可用性矩陣 」 (PAM)][sap-pam]。</span><span class="sxs-lookup"><span data-stu-id="2077d-1232">Check hello latest supported versions of SAP Content Server and Microsoft IIS in hello [SAP Product Availability Matrix (PAM)][sap-pam].</span></span>

### <a name="supported-microsoft-windows-and-azure-vm-types-for-sap-content-server"></a><span data-ttu-id="2077d-1233">針對 SAP 內容伺服器支援的 Microsoft Windows 和 Azure VM 類型</span><span class="sxs-lookup"><span data-stu-id="2077d-1233">Supported Microsoft Windows and Azure VM types for SAP Content Server</span></span>
<span data-ttu-id="2077d-1234">toofind 支援的 Windows 版本，在 Azure 上 SAP 內容伺服器時，請參閱：</span><span class="sxs-lookup"><span data-stu-id="2077d-1234">toofind out supported Windows version for SAP Content Server on Azure, see:</span></span>

* <span data-ttu-id="2077d-1235">[SAP 產品可用性對照表 (PAM)][sap-pam]</span><span class="sxs-lookup"><span data-stu-id="2077d-1235">[SAP Product Availability Matrix (PAM)][sap-pam]</span></span>
* <span data-ttu-id="2077d-1236">SAP 附註 [1928533]</span><span class="sxs-lookup"><span data-stu-id="2077d-1236">SAP Note [1928533]</span></span>

<span data-ttu-id="2077d-1237">強烈建議 toouse hello 最新的 Microsoft Windows Server 版本。</span><span class="sxs-lookup"><span data-stu-id="2077d-1237">It is highly recommended toouse hello newest version of Microsoft Windows Server.</span></span>

### <a name="sap-content-server-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="2077d-1238">在 Azure VM 中安裝 SAP 的 SAP 內容伺服器組態指導方針</span><span class="sxs-lookup"><span data-stu-id="2077d-1238">SAP Content Server Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="2077d-1239">儲存體組態</span><span class="sxs-lookup"><span data-stu-id="2077d-1239">Storage Configuration</span></span>
<span data-ttu-id="2077d-1240">如果您設定 SAP 內容伺服器 toostore 檔案 hello SAP MaxDB 資料庫中，所有 Azure 儲存體最佳作法建議章節中所述的 SAP MaxDB[儲存體設定][ dbms-guide-8.4.1]也適用於 hello SAP 內容伺服器案例。</span><span class="sxs-lookup"><span data-stu-id="2077d-1240">If you configure SAP Content Server toostore files in hello SAP MaxDB database, all Azure storage best practices recommendation mentioned for SAP MaxDB in chapter [Storage Configuration][dbms-guide-8.4.1] are also valid for hello SAP Content Server scenario.</span></span> 

<span data-ttu-id="2077d-1241">如果您設定 SAP 內容伺服器 toostore 檔案 hello 檔案系統中，則建議 toouse 專屬的邏輯磁碟機。</span><span class="sxs-lookup"><span data-stu-id="2077d-1241">If you configure SAP Content Server toostore files in hello file system, it is recommended toouse a dedicated logical drive.</span></span> <span data-ttu-id="2077d-1242">使用 Windows 儲存空間可讓您 tooalso 增加邏輯磁碟的大小和 IOPS 輸送量章節中所述[軟體 RAID][dbms-guide-2.2]。</span><span class="sxs-lookup"><span data-stu-id="2077d-1242">Using Windows Storage Spaces enables you tooalso increase logical disk size and IOPS throughput, as described in chapter [Software RAID][dbms-guide-2.2].</span></span> 

#### <a name="sap-content-server-location"></a><span data-ttu-id="2077d-1243">SAP 內容伺服器位置</span><span class="sxs-lookup"><span data-stu-id="2077d-1243">SAP Content Server Location</span></span>
<span data-ttu-id="2077d-1244">SAP 內容伺服器已部署在 hello toobe 相同的 Azure 地區和 hello SAP 系統部署所在的 Azure VNET。</span><span class="sxs-lookup"><span data-stu-id="2077d-1244">SAP Content Server has toobe deployed in hello same Azure region and Azure VNET where hello SAP system is deployed.</span></span> <span data-ttu-id="2077d-1245">您是否想 toodeploy SAP 內容伺服器元件專用的 Azure VM 上或在 hello hello SAP 系統執行所在的相同 VM，就可用 toodecide。</span><span class="sxs-lookup"><span data-stu-id="2077d-1245">You are free toodecide whether you want toodeploy SAP Content Server components on a dedicated Azure VM or on hello same VM where hello SAP system is running.</span></span> 

![SAP 內容伺服器專用的 Azure VM][dbms-guide-figure-800]

#### <a name="sap-cache-server-location"></a><span data-ttu-id="2077d-1247">SAP 快取伺服器位置</span><span class="sxs-lookup"><span data-stu-id="2077d-1247">SAP Cache Server Location</span></span>
<span data-ttu-id="2077d-1248">hello SAP 快取伺服器是額外的伺服器端元件 tooprovide 存取 too(cached) 文件在本機。</span><span class="sxs-lookup"><span data-stu-id="2077d-1248">hello SAP Cache Server is an additional server-based component tooprovide access too(cached) documents locally.</span></span> <span data-ttu-id="2077d-1249">hello SAP 快取伺服器快取 SAP 內容伺服器 hello 文的件。</span><span class="sxs-lookup"><span data-stu-id="2077d-1249">hello SAP Cache Server caches hello documents of an SAP Content Server.</span></span> <span data-ttu-id="2077d-1250">如果文件 toobe 擷取一次以上，從不同位置，這會是 toooptimize 網路流量。</span><span class="sxs-lookup"><span data-stu-id="2077d-1250">This is toooptimize network traffic if documents have toobe retrieved more than once from different locations.</span></span> <span data-ttu-id="2077d-1251">hello 一般規則是該 hello SAP 快取伺服器必須存取 SAP 快取伺服器 hello toobe 實際關閉 toohello 用戶端。</span><span class="sxs-lookup"><span data-stu-id="2077d-1251">hello general rule is that hello SAP Cache Server has toobe physically close toohello client that accesses hello SAP Cache Server.</span></span> 

<span data-ttu-id="2077d-1252">您有兩個選擇：</span><span class="sxs-lookup"><span data-stu-id="2077d-1252">Here you have two options:</span></span>

1. <span data-ttu-id="2077d-1253">**用戶端是後端 SAP 系統**如果設定的 tooaccess SAP 內容伺服器後端 SAP 系統，SAP 系統是一個用戶端。</span><span class="sxs-lookup"><span data-stu-id="2077d-1253">**Client is a backend SAP system** If a backend SAP system is configured tooaccess SAP Content Server, that SAP system is a client.</span></span> <span data-ttu-id="2077d-1254">SAP 系統和 SAP 內容伺服器部署在 hello 相同 Azure 地區 – hello 中的相同的 Azure 資料中心 – 它們是實際關閉 tooeach 其他。</span><span class="sxs-lookup"><span data-stu-id="2077d-1254">As both SAP system and SAP Content Server are deployed in hello same Azure region – in hello same Azure datacenter – they are physically close tooeach other.</span></span> <span data-ttu-id="2077d-1255">因此，沒有任何需要 toohave 專用的 SAP 快取伺服器。</span><span class="sxs-lookup"><span data-stu-id="2077d-1255">Therefore, there is no need toohave a dedicated SAP Cache Server.</span></span> <span data-ttu-id="2077d-1256">SAP UI （SAP GUI 或 web 瀏覽器） 的用戶端存取 hello SAP 系統直接與 hello SAP 系統從 hello SAP 內容伺服器的擷取文件。</span><span class="sxs-lookup"><span data-stu-id="2077d-1256">SAP UI clients (SAP GUI or web browser) access hello SAP system directly, and hello SAP system retrieves documents from hello SAP Content Server.</span></span>
2. <span data-ttu-id="2077d-1257">**用戶端是在內部部署 web 瀏覽器**hello SAP 內容伺服器可以設定的 toobe 由 hello 網頁瀏覽器直接存取。</span><span class="sxs-lookup"><span data-stu-id="2077d-1257">**Client is an on-premises web browser** hello SAP Content Server can be configured toobe accessed directly by hello web browser.</span></span> <span data-ttu-id="2077d-1258">在此情況下，執行內部的網頁瀏覽器的用戶端 hello SAP 內容伺服器。</span><span class="sxs-lookup"><span data-stu-id="2077d-1258">In this case, a web browser running on–premises is a client of hello SAP Content Server.</span></span> <span data-ttu-id="2077d-1259">在內部部署資料中心與 Azure 資料中心會放置在不同實體位置 (其他理想的情況下關閉 tooeach) 中。</span><span class="sxs-lookup"><span data-stu-id="2077d-1259">On-premises datacenter and Azure datacenter are placed in different physical locations (ideally close tooeach other).</span></span> <span data-ttu-id="2077d-1260">您的內部部署資料中心是透過 Azure 站台對站台 VPN 或 ExpressRoute 連線的 tooAzure。</span><span class="sxs-lookup"><span data-stu-id="2077d-1260">Your on-premises datacenter is connected tooAzure via Azure Site-to-Site VPN or ExpressRoute.</span></span> <span data-ttu-id="2077d-1261">雖然這兩個選項可提供安全的 VPN 網路連線 tooAzure，站台對站台網路連線不提供 hello 在內部部署資料中心與 hello Azure 資料中心之間的網路頻寬和延遲 SLA。</span><span class="sxs-lookup"><span data-stu-id="2077d-1261">Although both options offer secure VPN network connection tooAzure, site-to-site network connection does not offer a network bandwidth and latency SLA between hello on-premises datacenter and hello Azure datacenter.</span></span> <span data-ttu-id="2077d-1262">總存取 toodocuments toospeed，您可以執行 hello 下列其中一種：</span><span class="sxs-lookup"><span data-stu-id="2077d-1262">toospeed up access toodocuments, you can do one of hello following:</span></span>
   1. <span data-ttu-id="2077d-1263">安裝 SAP 快取伺服器在內部，請關閉 toohello 內部 web 瀏覽器 (選項[這][ dbms-guide-900-sap-cache-server-on-premises]圖)</span><span class="sxs-lookup"><span data-stu-id="2077d-1263">Install SAP Cache Server on-premises, close toohello on-premises web browser (option on [this][dbms-guide-900-sap-cache-server-on-premises] Figure)</span></span>
   2. <span data-ttu-id="2077d-1264">設定 Azure ExpressRoute，提供內部部署的資料中心與 Azure 資料中心之間高速且低延遲的專用網路連接。</span><span class="sxs-lookup"><span data-stu-id="2077d-1264">Configure Azure ExpressRoute, which offers a high-speed and low-latency dedicated network connection between on-premises datacenter and Azure datacenter.</span></span>

<span data-ttu-id="2077d-1265">![選項 tooinstall SAP 快取伺服器在內部部署][dbms-guide-figure-900]
<a name="642f746c-e4d4-489d-bf63-73e80177a0a8"></a></span><span class="sxs-lookup"><span data-stu-id="2077d-1265">![Option tooinstall SAP Cache Server on-premises][dbms-guide-figure-900]
<a name="642f746c-e4d4-489d-bf63-73e80177a0a8"></a></span></span>

#### <a name="backup--restore"></a><span data-ttu-id="2077d-1266">備份 / 還原</span><span class="sxs-lookup"><span data-stu-id="2077d-1266">Backup / Restore</span></span>
<span data-ttu-id="2077d-1267">如果您設定 hello SAP 內容伺服器 toostore 檔案 hello SAP MaxDB 資料庫中，hello 備份/還原程序和效能考量已詳述於 SAP MaxDB 章[備份和還原][dbms-guide-8.4.2]和章節[的備份和還原效能考量][dbms-guide-8.4.3]。</span><span class="sxs-lookup"><span data-stu-id="2077d-1267">If you configure hello SAP Content Server toostore files in hello SAP MaxDB database, hello backup/restore procedure and performance considerations are already described in SAP MaxDB chapter [Backup and Restore][dbms-guide-8.4.2] and chapter [Performance Considerations for Backup and Restore][dbms-guide-8.4.3].</span></span> 

<span data-ttu-id="2077d-1268">如果您設定 hello 檔案系統中的 hello SAP 內容伺服器 toostore 檔案，其中一個選項是 tooexecute 手動備份/還原 hello 整個檔案結構的 hello 文件的所在位置。</span><span class="sxs-lookup"><span data-stu-id="2077d-1268">If you configure hello SAP Content Server toostore files in hello file system, one option is tooexecute manual backup/restore of hello whole file structure where hello documents are located.</span></span> <span data-ttu-id="2077d-1269">它是類似 tooSAP MaxDB 備份/還原，建議使用 toohave 專用的磁碟區備份的目的。</span><span class="sxs-lookup"><span data-stu-id="2077d-1269">Similar tooSAP MaxDB backup/restore, it is recommended toohave a dedicated disk volume for backup purpose.</span></span> 

#### <a name="other"></a><span data-ttu-id="2077d-1270">其他</span><span class="sxs-lookup"><span data-stu-id="2077d-1270">Other</span></span>
<span data-ttu-id="2077d-1271">其他 SAP 內容伺服器的特定設定透明 tooAzure vm 和各種文件和 SAP 附註所述：</span><span class="sxs-lookup"><span data-stu-id="2077d-1271">Other SAP Content Server specific settings are transparent tooAzure VMs and are described in various documents and SAP Notes:</span></span>

* <span data-ttu-id="2077d-1272"><https://service.sap.com/contentserver></span><span class="sxs-lookup"><span data-stu-id="2077d-1272"><https://service.sap.com/contentserver></span></span> 
* <span data-ttu-id="2077d-1273">SAP 附註 [1619726]</span><span class="sxs-lookup"><span data-stu-id="2077d-1273">SAP Note [1619726]</span></span>  

## <a name="specifics-tooibm-db2-for-luw-on-windows"></a><span data-ttu-id="2077d-1274">細節 tooIBM DB2 for luw 會在 Windows 上</span><span class="sxs-lookup"><span data-stu-id="2077d-1274">Specifics tooIBM DB2 for LUW on Windows</span></span>
<span data-ttu-id="2077d-1275">使用 Microsoft Azure，您可以輕鬆地移轉現有 SAP 執行的應用程式在 IBM DB2 for Linux、 UNIX 和 Windows (LUW) tooAzure 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="2077d-1275">With Microsoft Azure, you can easily migrate your existing SAP application running on IBM DB2 for Linux, UNIX, and Windows (LUW) tooAzure virtual machines.</span></span> <span data-ttu-id="2077d-1276">透過在 IBM DB2 for luw 會 SAP、 管理員和開發人員仍然可以使用的 hello 相同開發和管理工具，可在內部。</span><span class="sxs-lookup"><span data-stu-id="2077d-1276">With SAP on IBM DB2 for LUW, administrators and developers can still use hello same development and administration tools, which are available on-premises.</span></span>
<span data-ttu-id="2077d-1277">一般資訊執行 SAP Business Suite IBM DB2 for luw 會位在 hello SAP 社群網路 (SCN) 在<https://www.sap.com/community/topic/db2-for-linux-unix-and-windows.html>。</span><span class="sxs-lookup"><span data-stu-id="2077d-1277">General information about running SAP Business Suite on IBM DB2 for LUW can be found in hello SAP Community Network (SCN) at <https://www.sap.com/community/topic/db2-for-linux-unix-and-windows.html>.</span></span>

<span data-ttu-id="2077d-1278">如需有關 Azure 中 DB2 for LUW 上 SAP 的其他資訊和更新，請參閱 SAP 附註 [2233094]。</span><span class="sxs-lookup"><span data-stu-id="2077d-1278">For additional information and updates about SAP on DB2 for LUW on Azure, see SAP Note [2233094].</span></span> 

### <a name="ibm-db2-for-linux-unix-and-windows-version-support"></a><span data-ttu-id="2077d-1279">IBM DB2 for Linux, UNIX, and Windows 支援版本</span><span class="sxs-lookup"><span data-stu-id="2077d-1279">IBM DB2 for Linux, UNIX, and Windows Version Support</span></span>
<span data-ttu-id="2077d-1280">當 DB2 版本為 10.5 時，支援 Microsoft Azure 虛擬機器中 IBM DB2 for LUW 上的 SAP。</span><span class="sxs-lookup"><span data-stu-id="2077d-1280">SAP on IBM DB2 for LUW on Microsoft Azure Virtual Machine Services is supported as of DB2 version 10.5.</span></span>

<span data-ttu-id="2077d-1281">如需支援的 SAP 產品和 Azure VM 類型資訊，請參閱 tooSAP 注意[1928533]。</span><span class="sxs-lookup"><span data-stu-id="2077d-1281">For information about supported SAP products and Azure VM types, refer tooSAP Note [1928533].</span></span>

### <a name="ibm-db2-for-linux-unix-and-windows-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="2077d-1282">在 Azure VM 中安裝 SAP 的 IBM DB2 for Linux, UNIX, and Windows 組態指導方針</span><span class="sxs-lookup"><span data-stu-id="2077d-1282">IBM DB2 for Linux, UNIX, and Windows Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="2077d-1283">儲存體組態</span><span class="sxs-lookup"><span data-stu-id="2077d-1283">Storage Configuration</span></span>
<span data-ttu-id="2077d-1284">所有資料庫檔案必須都儲存在 hello NTFS 檔案系統，根據直接連接的磁碟上。</span><span class="sxs-lookup"><span data-stu-id="2077d-1284">All database files must be stored on hello NTFS file system based on directly attached disks.</span></span> <span data-ttu-id="2077d-1285">這些磁碟掛接的 toohello Azure VM，且都以 Azure 分頁 BLOB 儲存體 (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) 或受管理的磁碟 (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>)。</span><span class="sxs-lookup"><span data-stu-id="2077d-1285">These disks are mounted toohello Azure VM and are based in Azure Page BLOB Storage (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) or Managed Disks (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>).</span></span> <span data-ttu-id="2077d-1286">任何種類的網路磁碟機或遠端共用像下列 Azure 檔案服務的 hello 就**不**支援資料庫檔案：</span><span class="sxs-lookup"><span data-stu-id="2077d-1286">Any kind of network drives or remote shares like hello following Azure file services are **NOT** supported for database files:</span></span> 

* <span data-ttu-id="2077d-1287"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span><span class="sxs-lookup"><span data-stu-id="2077d-1287"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span></span>
* <span data-ttu-id="2077d-1288"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span><span class="sxs-lookup"><span data-stu-id="2077d-1288"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span></span>

<span data-ttu-id="2077d-1289">如果您使用根據 Azure 分頁 BLOB 儲存體或管理磁碟的磁碟，hello 的文件章節中所做的陳述式[RDBMS 部署結構][ dbms-guide-2]也適用於以 hello IBM DB2 toodeployments對於 LUW 資料庫。</span><span class="sxs-lookup"><span data-stu-id="2077d-1289">If you are using disks based on Azure Page BLOB Storage or Managed Disks, hello statements made in this document in chapter [Structure of an RDBMS Deployment][dbms-guide-2] also apply toodeployments with hello IBM DB2 for LUW Database.</span></span> 

<span data-ttu-id="2077d-1290">Hello 一般部份 hello 文件中稍早所述，存在對磁碟的 IOPS 輸送量的配額。</span><span class="sxs-lookup"><span data-stu-id="2077d-1290">As explained earlier in hello general part of hello document, quotas on IOPS throughput for disks exist.</span></span> <span data-ttu-id="2077d-1291">hello 確切的配額取決於 hello VM 類型使用。</span><span class="sxs-lookup"><span data-stu-id="2077d-1291">hello exact quotas depend on hello VM type used.</span></span> <span data-ttu-id="2077d-1292">如需 VM 類型及其配額的清單，請參閱[這裡 (Linux)][virtual-machines-sizes-linux] 和[這裡 (Windows)][virtual-machines-sizes-windows]。</span><span class="sxs-lookup"><span data-stu-id="2077d-1292">A list of VM types with their quotas can be found [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="2077d-1293">只要每個磁碟 hello 目前 IOPS 配額已足夠，很可能 toostore 所有 hello 一個單一的掛接磁碟上的資料庫檔案。</span><span class="sxs-lookup"><span data-stu-id="2077d-1293">As long as hello current IOPS quota per disk is sufficient, it is possible toostore all hello database files on one single mounted disk.</span></span> 

<span data-ttu-id="2077d-1294">效能考量也會參照 toochapter 資料安全性和效能考量的資料庫目錄 SAP 安裝指南中。</span><span class="sxs-lookup"><span data-stu-id="2077d-1294">For performance considerations also refer toochapter “Data Safety and Performance Considerations for Database Directories” in SAP installation guides.</span></span>

<span data-ttu-id="2077d-1295">或者，您可以使用 Windows 儲存集區 （只可用在 Windows Server 2012 和更新版本） 或 Windows 2008 R2 的 Windows 條狀配置章節所述[軟體 RAID] [ dbms-guide-2.2]的這份文件toocreate 一個大型邏輯裝置透過多個磁碟。</span><span class="sxs-lookup"><span data-stu-id="2077d-1295">Alternatively, you can use Windows Storage Pools (only available in Windows Server 2012 and higher) or Windows striping for Windows 2008 R2 as described in chapter [Software RAID][dbms-guide-2.2] of this document toocreate one large logical device over multiple disks.</span></span>
<span data-ttu-id="2077d-1296">包含針對 sapdata 和 saptmp 目錄 hello DB2 儲存體路徑 hello 磁碟，您必須指定實體磁碟磁區大小為 512 KB。</span><span class="sxs-lookup"><span data-stu-id="2077d-1296">For hello disks containing hello DB2 storage paths for your sapdata and saptmp directories, you must specify a physical disk sector size of 512 KB.</span></span> <span data-ttu-id="2077d-1297">使用 Windows 儲存集區，您必須建立 hello 存放集區以手動方式透過命令列介面使用 hello 參數"-LogicalSectorSizeDefault"。</span><span class="sxs-lookup"><span data-stu-id="2077d-1297">When using Windows Storage Pools, you must create hello storage pools  manually via command line interface using hello parameter „-LogicalSectorSizeDefault“.</span></span> <span data-ttu-id="2077d-1298">如需詳細資訊，請參閱 <https://technet.microsoft.com/itpro/powershell/windows/storage/new-storagepool>。</span><span class="sxs-lookup"><span data-stu-id="2077d-1298">For more information, see <https://technet.microsoft.com/itpro/powershell/windows/storage/new-storagepool>.</span></span>

#### <a name="backuprestore"></a><span data-ttu-id="2077d-1299">備份/還原</span><span class="sxs-lookup"><span data-stu-id="2077d-1299">Backup/Restore</span></span>
<span data-ttu-id="2077d-1300">hello 備份/還原功能，對於 IBM DB2 for luw 會支援 hello 相同方式與在標準的 Windows 伺服器作業系統和 HYPER-V。</span><span class="sxs-lookup"><span data-stu-id="2077d-1300">hello backup/restore functionality for IBM DB2 for LUW is supported in hello same way as on standard Windows Server Operating Systems and Hyper-V.</span></span>

<span data-ttu-id="2077d-1301">您必須確定您擁有恰當且有效的資料庫備份策略。</span><span class="sxs-lookup"><span data-stu-id="2077d-1301">You must make sure that you have a valid database backup strategy in place.</span></span> 

<span data-ttu-id="2077d-1302">裸機部署，如同備份/還原效能取決於磁碟區數目可以讀取以平行方式，而且這些磁碟區的哪些 hello 輸送量可能。</span><span class="sxs-lookup"><span data-stu-id="2077d-1302">As in bare-metal deployments, backup/restore performance depends on how many volumes can be read in parallel and what hello throughput of those volumes might be.</span></span> <span data-ttu-id="2077d-1303">此外，hello 備份壓縮所使用的 CPU 耗用量可能相當重要的角色上播放的 Vm 只向上 tooeight CPU 執行緒。</span><span class="sxs-lookup"><span data-stu-id="2077d-1303">In addition, hello CPU consumption used by backup compression may play a significant role on VMs with just up tooeight CPU threads.</span></span> <span data-ttu-id="2077d-1304">因此，您可以假設︰</span><span class="sxs-lookup"><span data-stu-id="2077d-1304">Therefore, one can assume:</span></span>

* <span data-ttu-id="2077d-1305">hello 較少 hello 數目所使用的磁碟 toostore hello 資料庫裝置、 hello 較小的 hello 整體讀取輸送量</span><span class="sxs-lookup"><span data-stu-id="2077d-1305">hello fewer hello number of disks used toostore hello database devices, hello smaller hello overall throughput in reading</span></span>
* <span data-ttu-id="2077d-1306">hello 數目較少 hello hello VM 中的 CPU 執行緒、 hello 更嚴重 hello 備份壓縮的影響</span><span class="sxs-lookup"><span data-stu-id="2077d-1306">hello smaller hello number of CPU threads in hello VM, hello more severe hello impact of backup compression</span></span>
* <span data-ttu-id="2077d-1307">hello 較少 （等量磁碟區的目錄，磁碟） 的目標 toowrite hello 備份至 hello hello 輸送量更低</span><span class="sxs-lookup"><span data-stu-id="2077d-1307">hello fewer targets (Stripe Directories, disks) toowrite hello backup to, hello lower hello throughput</span></span>

<span data-ttu-id="2077d-1308">tooincrease hello 數到目標 toowrite，兩個選項可以根據需求使用/合併：</span><span class="sxs-lookup"><span data-stu-id="2077d-1308">tooincrease hello number of targets toowrite to, two options can be used/combined depending on your needs:</span></span>

* <span data-ttu-id="2077d-1309">透過順序 tooimprove hello IOPS 輸送量該等量磁碟區上的多個磁碟條狀配置 hello 備份目標磁碟區</span><span class="sxs-lookup"><span data-stu-id="2077d-1309">Striping hello backup target volume over multiple disks in order tooimprove hello IOPS throughput on that striped volume</span></span>
* <span data-ttu-id="2077d-1310">使用多個目標目錄 toowrite hello 備份至</span><span class="sxs-lookup"><span data-stu-id="2077d-1310">Using more than one target directory toowrite hello backup to</span></span>

#### <a name="high-availability-and-disaster-recovery"></a><span data-ttu-id="2077d-1311">高可用性和災害復原</span><span class="sxs-lookup"><span data-stu-id="2077d-1311">High Availability and Disaster Recovery</span></span>
<span data-ttu-id="2077d-1312">不支援 Microsoft Cluster Server (MSCS)。</span><span class="sxs-lookup"><span data-stu-id="2077d-1312">Microsoft Cluster Server (MSCS) is not supported.</span></span>

<span data-ttu-id="2077d-1313">支援 DB2 高可用性災害復原 (HADR)。</span><span class="sxs-lookup"><span data-stu-id="2077d-1313">DB2 high availability disaster recovery (HADR) is supported.</span></span> <span data-ttu-id="2077d-1314">如果 hello 的 hello HA 組態的虛擬機器使用名稱解析，Azure 中的 hello 設定，與沒有差異是在內部部署的任何設定。</span><span class="sxs-lookup"><span data-stu-id="2077d-1314">If hello virtual machines of hello HA configuration have working name resolution, hello setup in Azure does not differ from any setup that is done on-premises.</span></span> <span data-ttu-id="2077d-1315">不建議 toorely 上只有 IP 解析。</span><span class="sxs-lookup"><span data-stu-id="2077d-1315">It is not recommended toorely on IP resolution only.</span></span>

<span data-ttu-id="2077d-1316">請勿 hello 儲存 hello 資料庫磁碟的儲存體帳戶使用異地複寫。</span><span class="sxs-lookup"><span data-stu-id="2077d-1316">Do not use Geo-Replication for hello storage accounts that store hello database disks.</span></span> <span data-ttu-id="2077d-1317">如需詳細資訊，請參閱 toochapter [Microsoft Azure 儲存體][ dbms-guide-2.3]和章節[高可用性和災害復原與 Azure Vm 搭配][ dbms-guide-3].</span><span class="sxs-lookup"><span data-stu-id="2077d-1317">For more information, refer toochapter [Microsoft Azure Storage][dbms-guide-2.3] and chapter [High Availability and Disaster Recovery with Azure VMs][dbms-guide-3].</span></span>

#### <a name="other"></a><span data-ttu-id="2077d-1318">其他</span><span class="sxs-lookup"><span data-stu-id="2077d-1318">Other</span></span>
<span data-ttu-id="2077d-1319">前三個章節的這份文件，以及部署的 Vm 與 IBM DB2 for luw 會述 hello 適用於所有其他的一般主題如同 Azure 可用性設定組或 SAP 的監視。</span><span class="sxs-lookup"><span data-stu-id="2077d-1319">All other general topics like Azure Availability Sets or SAP monitoring apply as described in hello first three chapters of this document for deployments of VMs with IBM DB2 for LUW as well.</span></span> 

<span data-ttu-id="2077d-1320">也請參閱 toochapter [SAP on Azure 摘要的 SQL Server 一般][dbms-guide-5.8]。</span><span class="sxs-lookup"><span data-stu-id="2077d-1320">Also refer toochapter [General SQL Server for SAP on Azure Summary][dbms-guide-5.8].</span></span>

## <a name="specifics-tooibm-db2-for-luw-on-linux"></a><span data-ttu-id="2077d-1321">細節 tooIBM DB2 for LUW on Linux</span><span class="sxs-lookup"><span data-stu-id="2077d-1321">Specifics tooIBM DB2 for LUW on Linux</span></span>
<span data-ttu-id="2077d-1322">使用 Microsoft Azure，您可以輕鬆地移轉現有 SAP 執行的應用程式在 IBM DB2 for Linux、 UNIX 和 Windows (LUW) tooAzure 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="2077d-1322">With Microsoft Azure, you can easily migrate your existing SAP application running on IBM DB2 for Linux, UNIX, and Windows (LUW) tooAzure virtual machines.</span></span> <span data-ttu-id="2077d-1323">透過在 IBM DB2 for luw 會 SAP、 管理員和開發人員仍然可以使用的 hello 相同開發和管理工具，可在內部。</span><span class="sxs-lookup"><span data-stu-id="2077d-1323">With SAP on IBM DB2 for LUW, administrators and developers can still use hello same development and administration tools, which are available on-premises.</span></span> <span data-ttu-id="2077d-1324">一般資訊執行 SAP Business Suite IBM DB2 for luw 會位在 hello SAP 社群網路 (SCN) 在<https://www.sap.com/community/topic/db2-for-linux-unix-and-windows.html>。</span><span class="sxs-lookup"><span data-stu-id="2077d-1324">General information about running SAP Business Suite on IBM DB2 for LUW can be found in hello SAP Community Network (SCN) at <https://www.sap.com/community/topic/db2-for-linux-unix-and-windows.html>.</span></span>

<span data-ttu-id="2077d-1325">如需有關 Azure 中 DB2 for LUW 上 SAP 的其他資訊和更新，請參閱 SAP 附註 [2233094]。</span><span class="sxs-lookup"><span data-stu-id="2077d-1325">For additional information and updates about SAP on DB2 for LUW on Azure, see SAP Note [2233094].</span></span>

### <a name="ibm-db2-for-linux-unix-and-windows-version-support"></a><span data-ttu-id="2077d-1326">IBM DB2 for Linux, UNIX, and Windows 支援版本</span><span class="sxs-lookup"><span data-stu-id="2077d-1326">IBM DB2 for Linux, UNIX, and Windows Version Support</span></span>
<span data-ttu-id="2077d-1327">當 DB2 版本為 10.5 時，支援 Microsoft Azure 虛擬機器中 IBM DB2 for LUW 上的 SAP。</span><span class="sxs-lookup"><span data-stu-id="2077d-1327">SAP on IBM DB2 for LUW on Microsoft Azure Virtual Machine Services is supported as of DB2 version 10.5.</span></span>

<span data-ttu-id="2077d-1328">如需支援的 SAP 產品和 Azure VM 類型資訊，請參閱 tooSAP 注意[1928533]。</span><span class="sxs-lookup"><span data-stu-id="2077d-1328">For information about supported SAP products and Azure VM types, refer tooSAP Note [1928533].</span></span>

### <a name="ibm-db2-for-linux-unix-and-windows-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="2077d-1329">在 Azure VM 中安裝 SAP 的 IBM DB2 for Linux, UNIX, and Windows 組態指導方針</span><span class="sxs-lookup"><span data-stu-id="2077d-1329">IBM DB2 for Linux, UNIX, and Windows Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="2077d-1330">儲存體組態</span><span class="sxs-lookup"><span data-stu-id="2077d-1330">Storage Configuration</span></span>
<span data-ttu-id="2077d-1331">所有的資料庫檔案都必須儲存於以直接連接磁碟為基礎的檔案系統上。</span><span class="sxs-lookup"><span data-stu-id="2077d-1331">All database files must be stored on a file system based on directly attached disks.</span></span> <span data-ttu-id="2077d-1332">這些磁碟掛接的 toohello Azure VM，且都以 Azure 分頁 BLOB 儲存體 (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) 或受管理的磁碟 (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>)。</span><span class="sxs-lookup"><span data-stu-id="2077d-1332">These disks are mounted toohello Azure VM and are based in Azure Page BLOB Storage (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) or Managed Disks (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>).</span></span> <span data-ttu-id="2077d-1333">任何種類的網路磁碟機或遠端共用像下列 Azure 檔案服務的 hello 就**不**支援資料庫檔案：</span><span class="sxs-lookup"><span data-stu-id="2077d-1333">Any kind of network drives or remote shares like hello following Azure file services are **NOT** supported for database files:</span></span>

* <span data-ttu-id="2077d-1334"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span><span class="sxs-lookup"><span data-stu-id="2077d-1334"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span></span>
* <span data-ttu-id="2077d-1335"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span><span class="sxs-lookup"><span data-stu-id="2077d-1335"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span></span>

<span data-ttu-id="2077d-1336">如果您使用根據 Azure 分頁 BLOB 儲存體磁碟，hello 的文件章節中所做的陳述式[RDBMS 部署結構][ dbms-guide-2]也套用 toodeployments 以 hello IBM DB2 for LUW 資料庫。</span><span class="sxs-lookup"><span data-stu-id="2077d-1336">If you are using disks based on Azure Page BLOB Storage, hello statements made in this document in chapter [Structure of an RDBMS Deployment][dbms-guide-2] also apply toodeployments with hello IBM DB2 for LUW Database.</span></span>

<span data-ttu-id="2077d-1337">Hello 一般部份 hello 文件中稍早所述，存在對磁碟的 IOPS 輸送量的配額。</span><span class="sxs-lookup"><span data-stu-id="2077d-1337">As explained earlier in hello general part of hello document, quotas on IOPS throughput for disks exist.</span></span> <span data-ttu-id="2077d-1338">hello 確切的配額取決於 hello VM 類型使用。</span><span class="sxs-lookup"><span data-stu-id="2077d-1338">hello exact quotas depend on hello VM type used.</span></span> <span data-ttu-id="2077d-1339">如需 VM 類型及其配額的清單，請參閱[這裡 (Linux)][virtual-machines-sizes-linux] 和[這裡 (Windows)][virtual-machines-sizes-windows]。</span><span class="sxs-lookup"><span data-stu-id="2077d-1339">A list of VM types with their quotas can be found [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="2077d-1340">只要每個磁碟 hello 目前 IOPS 配額已足夠，很可能 toostore 所有 hello 一個單一磁碟上的資料庫檔案。</span><span class="sxs-lookup"><span data-stu-id="2077d-1340">As long as hello current IOPS quota per disk is sufficient, it is possible toostore all hello database files on one single disk.</span></span>

<span data-ttu-id="2077d-1341">效能考量也會參照 toochapter 資料安全性和效能考量的資料庫目錄 SAP 安裝指南中。</span><span class="sxs-lookup"><span data-stu-id="2077d-1341">For performance considerations also refer toochapter “Data Safety and Performance Considerations for Database Directories” in SAP installation guides.</span></span>

<span data-ttu-id="2077d-1342">或者，您可以使用 LVM （邏輯磁碟區管理員） 或 MDADM 章節中所述[軟體 RAID] [ dbms-guide-2.2]此文件 toocreate 一個大型邏輯裝置的多個磁碟上。</span><span class="sxs-lookup"><span data-stu-id="2077d-1342">Alternatively, you can use LVM (Logical Volume Manager) or MDADM as described in chapter [Software RAID][dbms-guide-2.2] of this document toocreate one large logical device over multiple disks.</span></span>
<span data-ttu-id="2077d-1343">包含針對 sapdata 和 saptmp 目錄 hello DB2 儲存體路徑 hello 磁碟，您必須指定實體磁碟磁區大小為 512 KB。</span><span class="sxs-lookup"><span data-stu-id="2077d-1343">For hello disks containing hello DB2 storage paths for your sapdata and saptmp directories, you must specify a physical disk sector size of 512 KB.</span></span>

#### <a name="backuprestore"></a><span data-ttu-id="2077d-1344">備份/還原</span><span class="sxs-lookup"><span data-stu-id="2077d-1344">Backup/Restore</span></span>
<span data-ttu-id="2077d-1345">hello 備份/還原功能，對於 IBM DB2 for luw 會支援 hello 相同方式與在標準 Linux 安裝在內部。</span><span class="sxs-lookup"><span data-stu-id="2077d-1345">hello backup/restore functionality for IBM DB2 for LUW is supported in hello same way as on standard Linux installation on-premises.</span></span>

<span data-ttu-id="2077d-1346">您必須確定您擁有恰當且有效的資料庫備份策略。</span><span class="sxs-lookup"><span data-stu-id="2077d-1346">You must make sure that you have a valid database backup strategy in place.</span></span>

<span data-ttu-id="2077d-1347">裸機部署，如同備份/還原效能取決於磁碟區數目可以讀取以平行方式，而且這些磁碟區的哪些 hello 輸送量可能。</span><span class="sxs-lookup"><span data-stu-id="2077d-1347">As in bare-metal deployments, backup/restore performance depends on how many volumes can be read in parallel and what hello throughput of those volumes might be.</span></span> <span data-ttu-id="2077d-1348">此外，hello 備份壓縮所使用的 CPU 耗用量可能相當重要的角色上播放的 Vm 只向上 tooeight CPU 執行緒。</span><span class="sxs-lookup"><span data-stu-id="2077d-1348">In addition, hello CPU consumption used by backup compression may play a significant role on VMs with just up tooeight CPU threads.</span></span> <span data-ttu-id="2077d-1349">因此，您可以假設︰</span><span class="sxs-lookup"><span data-stu-id="2077d-1349">Therefore, one can assume:</span></span>

* <span data-ttu-id="2077d-1350">hello 較少 hello 數目所使用的磁碟 toostore hello 資料庫裝置、 hello 較小的 hello 整體讀取輸送量</span><span class="sxs-lookup"><span data-stu-id="2077d-1350">hello fewer hello number of disks used toostore hello database devices, hello smaller hello overall throughput in reading</span></span>
* <span data-ttu-id="2077d-1351">hello 數目較少 hello hello VM 中的 CPU 執行緒、 hello 更嚴重 hello 備份壓縮的影響</span><span class="sxs-lookup"><span data-stu-id="2077d-1351">hello smaller hello number of CPU threads in hello VM, hello more severe hello impact of backup compression</span></span>
* <span data-ttu-id="2077d-1352">hello 較少 （等量磁碟區的目錄，磁碟） 的目標 toowrite hello 備份至 hello hello 輸送量更低</span><span class="sxs-lookup"><span data-stu-id="2077d-1352">hello fewer targets (Stripe Directories, disks) toowrite hello backup to, hello lower hello throughput</span></span>

<span data-ttu-id="2077d-1353">tooincrease hello 數到目標 toowrite，兩個選項可以根據需求使用/合併：</span><span class="sxs-lookup"><span data-stu-id="2077d-1353">tooincrease hello number of targets toowrite to, two options can be used/combined depending on your needs:</span></span>

* <span data-ttu-id="2077d-1354">透過順序 tooimprove hello IOPS 輸送量該等量磁碟區上的多個磁碟條狀配置 hello 備份目標磁碟區</span><span class="sxs-lookup"><span data-stu-id="2077d-1354">Striping hello backup target volume over multiple disks in order tooimprove hello IOPS throughput on that striped volume</span></span>
* <span data-ttu-id="2077d-1355">使用多個目標目錄 toowrite hello 備份至</span><span class="sxs-lookup"><span data-stu-id="2077d-1355">Using more than one target directory toowrite hello backup to</span></span>

#### <a name="high-availability-and-disaster-recovery"></a><span data-ttu-id="2077d-1356">高可用性和災害復原</span><span class="sxs-lookup"><span data-stu-id="2077d-1356">High Availability and Disaster Recovery</span></span>
<span data-ttu-id="2077d-1357">支援 DB2 高可用性災害復原 (HADR)。</span><span class="sxs-lookup"><span data-stu-id="2077d-1357">DB2 high availability disaster recovery (HADR) is supported.</span></span> <span data-ttu-id="2077d-1358">如果 hello 的 hello HA 組態的虛擬機器使用名稱解析，Azure 中的 hello 設定，與沒有差異是在內部部署的任何設定。</span><span class="sxs-lookup"><span data-stu-id="2077d-1358">If hello virtual machines of hello HA configuration have working name resolution, hello setup in Azure does not differ from any setup that is done on-premises.</span></span> <span data-ttu-id="2077d-1359">不建議 toorely 上只有 IP 解析。</span><span class="sxs-lookup"><span data-stu-id="2077d-1359">It is not recommended toorely on IP resolution only.</span></span>

<span data-ttu-id="2077d-1360">請勿 hello 儲存 hello 資料庫磁碟的儲存體帳戶使用異地複寫。</span><span class="sxs-lookup"><span data-stu-id="2077d-1360">Do not use Geo-Replication for hello storage accounts that store hello database disks.</span></span> <span data-ttu-id="2077d-1361">如需詳細資訊，請參閱 toochapter [Microsoft Azure 儲存體][ dbms-guide-2.3]和章節[高可用性和災害復原與 Azure Vm 搭配][ dbms-guide-3].</span><span class="sxs-lookup"><span data-stu-id="2077d-1361">For more information, refer toochapter [Microsoft Azure Storage][dbms-guide-2.3] and chapter [High Availability and Disaster Recovery with Azure VMs][dbms-guide-3].</span></span>

#### <a name="other"></a><span data-ttu-id="2077d-1362">其他</span><span class="sxs-lookup"><span data-stu-id="2077d-1362">Other</span></span>
<span data-ttu-id="2077d-1363">前三個章節的這份文件，以及部署的 Vm 與 IBM DB2 for luw 會述 hello 適用於所有其他的一般主題如同 Azure 可用性設定組或 SAP 的監視。</span><span class="sxs-lookup"><span data-stu-id="2077d-1363">All other general topics like Azure Availability Sets or SAP monitoring apply as described in hello first three chapters of this document for deployments of VMs with IBM DB2 for LUW as well.</span></span>

<span data-ttu-id="2077d-1364">也請參閱 toochapter [SAP on Azure 摘要的 SQL Server 一般][dbms-guide-5.8]。</span><span class="sxs-lookup"><span data-stu-id="2077d-1364">Also refer toochapter [General SQL Server for SAP on Azure Summary][dbms-guide-5.8].</span></span>

