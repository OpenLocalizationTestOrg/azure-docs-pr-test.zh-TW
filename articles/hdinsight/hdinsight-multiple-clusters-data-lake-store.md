---
title: "利用一個 Azure Data Lake Store 帳戶使用多個 HDInsight 叢集 - Azure | Microsoft Docs"
description: "了解如何利用單一 Data Lake Store 帳戶來使用多個 HDInsight 叢集"
keywords: "hdinsight 儲存體,hdfs,結構化資料,非結構化資料, data lake store"
services: hdinsight,storage
documentationcenter: 
tags: azure-portal
author: nitinme
manager: jhubbard
editor: cgronlun
ms.service: hdinsight
ms.custom: hdinsightactive
ms.workload: big-data
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/02/2017
ms.author: nitinme
ms.openlocfilehash: 043141e8496a947f54564d29a1d7fb724fac5cda
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/11/2017
---
# <a name="use-multiple-hdinsight-clusters-with-an-azure-data-lake-store-account"></a><span data-ttu-id="ae4a8-104">利用一個 Azure Data Lake Store 帳戶使用多個 HDInsight 叢集</span><span class="sxs-lookup"><span data-stu-id="ae4a8-104">Use multiple HDInsight clusters with an Azure Data Lake Store account</span></span>

<span data-ttu-id="ae4a8-105">從 HDInsight 3.5 版開始，您可以使用 Azure Data Lake Store 帳戶建立 HDInsight 叢集，作為預設檔案系統。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-105">Starting with HDInsight version 3.5, you can create HDInsight clusters with  Azure Data Lake Store accounts as the default filesystem.</span></span>
<span data-ttu-id="ae4a8-106">Data Lake Store 支援無限制的儲存空間，不僅適合裝載大量資料，也適合裝載多個共用單一 Data Lake Store 帳戶的 HDInsight 叢集。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-106">Data Lake Store supports unlimited storage that makes it ideal not only for hosting large amounts of data; but also for hosting multiple HDInsight clusters that share a single Data Lake Store Account.</span></span> <span data-ttu-id="ae4a8-107">如需有關如何以 Data Lake Store 作為儲存體來建立 HDInsight 叢集的指示，請參閱[使用 Data Lake Store 建立 HDInsight 叢集](../data-lake-store/data-lake-store-hdinsight-hadoop-use-portal.md)。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-107">For instructionson how to create an HDInsight cluster with Data Lake Store as the storage, see [Create HDInsight clusters with Data Lake Store](../data-lake-store/data-lake-store-hdinsight-hadoop-use-portal.md).</span></span>

<span data-ttu-id="ae4a8-108">本文提供建議給 Data Lake Store 管理員來設定單一共用的 Data Lake Store 帳戶，此帳戶可以跨多個**作用中的** HDInsight 叢集使用。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-108">This article provides recommendations to the Data Lake store administrator for setting up a single and shared Data Lake Store Account that can be used across multiple **active** HDInsight clusters.</span></span> <span data-ttu-id="ae4a8-109">這些建議適用於將多個安全和不安全的 Hadoop 叢集裝載於共用的 Data Lake Store 帳戶上。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-109">These recommendations apply to hosting multiple secure as well as non-secure Hadoop clusters on a shared Data Lake store account.</span></span>


## <a name="data-lake-store-file-and-folder-level-acls"></a><span data-ttu-id="ae4a8-110">Data Lake Store 檔案和資料夾等級 ACL</span><span class="sxs-lookup"><span data-stu-id="ae4a8-110">Data Lake Store file and folder level ACLs</span></span>

<span data-ttu-id="ae4a8-111">本文的其餘部分假設您了解 Azure Data Lake Store 中的檔案和資料夾等級 ACL，這在 [Azure Data Lake Store 中的存取控制](../data-lake-store/data-lake-store-access-control.md)中有詳細的說明。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-111">The rest of this article assumes that you have a good knowledge of file and folder level ACLs in Azure Data Lake Store, which is described in detail at [Access control in Azure Data Lake Store](../data-lake-store/data-lake-store-access-control.md).</span></span>

## <a name="data-lake-store-setup-for-multiple-hdinsight-clusters"></a><span data-ttu-id="ae4a8-112">多個 HDInsight 叢集的 Data Lake Store 設定</span><span class="sxs-lookup"><span data-stu-id="ae4a8-112">Data Lake Store setup for multiple HDInsight clusters</span></span>
<span data-ttu-id="ae4a8-113">讓我們以兩層的資料夾階層為例子，說明利用一個 Data Lake Store 帳戶來使用多個 HDInsight 叢集時的建議。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-113">Let us take a two-level folder hierarchy to explain the recommendations for using mutilple HDInsight clusters with a Data Lake Store account.</span></span> <span data-ttu-id="ae4a8-114">假設您具有 Data Lake Store 帳戶，而資料夾結構為 **/clusters/finance**。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-114">Consider you have a Data Lake Store account with the folder structure **/clusters/finance**.</span></span> <span data-ttu-id="ae4a8-115">在此結構中，財務組織所需的所有叢集都可以使用 /clusters/finance 作為儲存位置。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-115">With this structure, all the clusters required by the Finance organization can use /clusters/finance as the storage location.</span></span> <span data-ttu-id="ae4a8-116">未來，如果有另一個組織 (假設是「行銷」) 需要使用同一個 Data Lake Store 帳戶建立 HDInsight 叢集，他們將會建立 /clusters/marketing。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-116">In the future, if another organization, say Marketing, wants to create HDInsight clusters using the same Data Lake Store account, they could create /clusters/marketing.</span></span> <span data-ttu-id="ae4a8-117">現在，我們只要使用 **/clusters/finance** 即可。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-117">For now, let's just use **/clusters/finance**.</span></span>

<span data-ttu-id="ae4a8-118">為了讓 HDInsight 叢集有效利用此資料夾結構，Data Lake Store 管理員必須指派適當的權限，如下表所述。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-118">To enable this folder structure to be effectively used by HDInsight clusters, the Data Lake Store administrator must assign appropriate permissions, as described in the table.</span></span> <span data-ttu-id="ae4a8-119">表格中顯示的權限對應至「存取 ACL」，而不是「預設 ACL」。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-119">The permissions shown in the table correspond to Access-ACLs, and not Default-ACLs.</span></span> 


|<span data-ttu-id="ae4a8-120">資料夾</span><span class="sxs-lookup"><span data-stu-id="ae4a8-120">Folder</span></span>  |<span data-ttu-id="ae4a8-121">權限</span><span class="sxs-lookup"><span data-stu-id="ae4a8-121">Permissions</span></span>  |<span data-ttu-id="ae4a8-122">擁有使用者</span><span class="sxs-lookup"><span data-stu-id="ae4a8-122">Owning user</span></span>  |<span data-ttu-id="ae4a8-123">擁有群組</span><span class="sxs-lookup"><span data-stu-id="ae4a8-123">Owning group</span></span>  | <span data-ttu-id="ae4a8-124">具名使用者</span><span class="sxs-lookup"><span data-stu-id="ae4a8-124">Named user</span></span> | <span data-ttu-id="ae4a8-125">具名使用者權限</span><span class="sxs-lookup"><span data-stu-id="ae4a8-125">Named user permissions</span></span> | <span data-ttu-id="ae4a8-126">具名群組</span><span class="sxs-lookup"><span data-stu-id="ae4a8-126">Named group</span></span> | <span data-ttu-id="ae4a8-127">具名群組權限</span><span class="sxs-lookup"><span data-stu-id="ae4a8-127">Named group permissions</span></span> |
|---------|---------|---------|---------|---------|---------|---------|---------|
|/ | <span data-ttu-id="ae4a8-128">rwxr-x--x</span><span class="sxs-lookup"><span data-stu-id="ae4a8-128">rwxr-x--x</span></span>  |<span data-ttu-id="ae4a8-129">admin</span><span class="sxs-lookup"><span data-stu-id="ae4a8-129">admin</span></span> |<span data-ttu-id="ae4a8-130">admin</span><span class="sxs-lookup"><span data-stu-id="ae4a8-130">admin</span></span>  |<span data-ttu-id="ae4a8-131">服務主體</span><span class="sxs-lookup"><span data-stu-id="ae4a8-131">Service principal</span></span> |<span data-ttu-id="ae4a8-132">--x</span><span class="sxs-lookup"><span data-stu-id="ae4a8-132">--x</span></span>  |<span data-ttu-id="ae4a8-133">FINGRP</span><span class="sxs-lookup"><span data-stu-id="ae4a8-133">FINGRP</span></span>   |<span data-ttu-id="ae4a8-134">r-x</span><span class="sxs-lookup"><span data-stu-id="ae4a8-134">r-x</span></span>         |
|<span data-ttu-id="ae4a8-135">/clusters</span><span class="sxs-lookup"><span data-stu-id="ae4a8-135">/clusters</span></span> | <span data-ttu-id="ae4a8-136">rwxr-x--x</span><span class="sxs-lookup"><span data-stu-id="ae4a8-136">rwxr-x--x</span></span> |<span data-ttu-id="ae4a8-137">admin</span><span class="sxs-lookup"><span data-stu-id="ae4a8-137">admin</span></span> |<span data-ttu-id="ae4a8-138">admin</span><span class="sxs-lookup"><span data-stu-id="ae4a8-138">admin</span></span> |<span data-ttu-id="ae4a8-139">服務主體</span><span class="sxs-lookup"><span data-stu-id="ae4a8-139">Service principal</span></span> |<span data-ttu-id="ae4a8-140">--x</span><span class="sxs-lookup"><span data-stu-id="ae4a8-140">--x</span></span>  |<span data-ttu-id="ae4a8-141">FINGRP</span><span class="sxs-lookup"><span data-stu-id="ae4a8-141">FINGRP</span></span> |<span data-ttu-id="ae4a8-142">r-x</span><span class="sxs-lookup"><span data-stu-id="ae4a8-142">r-x</span></span>         |
|<span data-ttu-id="ae4a8-143">/clusters/finance</span><span class="sxs-lookup"><span data-stu-id="ae4a8-143">/clusters/finance</span></span> | <span data-ttu-id="ae4a8-144">rwxr-x--t</span><span class="sxs-lookup"><span data-stu-id="ae4a8-144">rwxr-x--t</span></span> |<span data-ttu-id="ae4a8-145">admin</span><span class="sxs-lookup"><span data-stu-id="ae4a8-145">admin</span></span> |<span data-ttu-id="ae4a8-146">FINGRP</span><span class="sxs-lookup"><span data-stu-id="ae4a8-146">FINGRP</span></span>  |<span data-ttu-id="ae4a8-147">服務主體</span><span class="sxs-lookup"><span data-stu-id="ae4a8-147">Service principal</span></span> |<span data-ttu-id="ae4a8-148">rwx</span><span class="sxs-lookup"><span data-stu-id="ae4a8-148">rwx</span></span>  |-  |-     |

<span data-ttu-id="ae4a8-149">在表格中，</span><span class="sxs-lookup"><span data-stu-id="ae4a8-149">In the table,</span></span>

- <span data-ttu-id="ae4a8-150">**admin** 是 Data Lake Store 帳戶的建立者和管理員。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-150">**admin** is the creator and administrator of the Data Lake Store account.</span></span>
- <span data-ttu-id="ae4a8-151">**服務主體**是與帳戶相關聯的 Azure Active Directory (AAD) 服務主體。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-151">**Service principal** is the Azure Active Directory (AAD) service principal associated with the account.</span></span>
- <span data-ttu-id="ae4a8-152">**FINGRP** 是 AAD 中建立的使用者群組，內含來自財務組織的使用者。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-152">**FINGRP** is a user group created in AAD that contains users from the Finance organization.</span></span>

<span data-ttu-id="ae4a8-153">如需有關如何建立 AAD 應用程式 (這也會建立服務主體) 的指示，請參閱[建立 AAD 應用程式](../azure-resource-manager/resource-group-create-service-principal-portal.md#create-an-azure-active-directory-application)。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-153">For instructions on how to create an AAD application (that also creates a Service Principal), see [Create an AAD application](../azure-resource-manager/resource-group-create-service-principal-portal.md#create-an-azure-active-directory-application).</span></span> <span data-ttu-id="ae4a8-154">如需有關如何在 AAD 中建立使用者群組的指示，請參閱[在 Azure Active Directory 中管理群組](../active-directory/active-directory-accessmanagement-manage-groups.md)。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-154">For instructions on how to create a user group in AAD, see [Managing groups in Azure Active Directory](../active-directory/active-directory-accessmanagement-manage-groups.md).</span></span>

<span data-ttu-id="ae4a8-155">需要考慮的一些重要事項。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-155">Some key points to consider.</span></span>

- <span data-ttu-id="ae4a8-156">在叢集上使用儲存體帳戶**之前**，Data Lake Store 管理員必須以適當權限建立和佈建兩層的資料夾結構 (**/clusters/finance/**)。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-156">The two level folder structure (**/clusters/finance/**) must be created and provisioned with appropriate permissions by the Data Lake Store admin **before** using the storage account for clusters.</span></span> <span data-ttu-id="ae4a8-157">建立叢集時不會自動建立此結構。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-157">This structure is not created automatically while creating clusters.</span></span>
- <span data-ttu-id="ae4a8-158">上述範例建議將擁有群組 **/clusters/finance** 設為 **FINGRP**，並允許 **r-x** 讓 FINGRP 從根目錄開始存取整個資料夾階層。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-158">The example above recommends setting the owning group of **/clusters/finance** as **FINGRP** and permitting **r-x** access to FINGRP to the entire folder hierarchy starting from the root.</span></span> <span data-ttu-id="ae4a8-159">這可確保 FINGRP 的成員可以從根目錄開始瀏覽資料夾結構。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-159">This ensures that the members of FINGRP can navigate the folder structure starting from root.</span></span>
- <span data-ttu-id="ae4a8-160">當不同的 AAD 服務主體可以在 **/clusters/finance** 下建立叢集時，黏著位元 (在 **finance** 資料夾上設定時) 可確保一個服務主體所建立的資料夾無法被其他服務主體刪除。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-160">In the case when different AAD Service Principals can create clusters under **/clusters/finance**, the sticky-bit (when set on the **finance** folder) ensures that folders created by one Service Principal cannot be deleted by the other.</span></span>
- <span data-ttu-id="ae4a8-161">當資料夾結構和權限都備妥後，HDInsight 叢集建立程序就會在 **/clusters/finance/** 下建立特定的儲存位置。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-161">Once the folder structure and permissions are in place, HDInsight cluster creation process creates a cluster-specific storage loaction under **/clusters/finance/**.</span></span> <span data-ttu-id="ae4a8-162">例如，名稱為 fincluster01 之叢集的儲存體可能是 **/clusters/finance/fincluster01**。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-162">For example, the storage for a cluster with the name fincluster01 could be **/clusters/finance/fincluster01**.</span></span> <span data-ttu-id="ae4a8-163">下表顯示 HDInsight 叢集所建立之資料夾的擁有權和權限。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-163">The ownership and permissions for the folders created by HDInsight cluster is shown in the table here.</span></span>

    |<span data-ttu-id="ae4a8-164">資料夾</span><span class="sxs-lookup"><span data-stu-id="ae4a8-164">Folder</span></span>  |<span data-ttu-id="ae4a8-165">權限</span><span class="sxs-lookup"><span data-stu-id="ae4a8-165">Permissions</span></span>  |<span data-ttu-id="ae4a8-166">擁有使用者</span><span class="sxs-lookup"><span data-stu-id="ae4a8-166">Owning user</span></span>  |<span data-ttu-id="ae4a8-167">擁有群組</span><span class="sxs-lookup"><span data-stu-id="ae4a8-167">Owning group</span></span>  | <span data-ttu-id="ae4a8-168">具名使用者</span><span class="sxs-lookup"><span data-stu-id="ae4a8-168">Named user</span></span> | <span data-ttu-id="ae4a8-169">具名使用者權限</span><span class="sxs-lookup"><span data-stu-id="ae4a8-169">Named user permissions</span></span> | <span data-ttu-id="ae4a8-170">具名群組</span><span class="sxs-lookup"><span data-stu-id="ae4a8-170">Named group</span></span> | <span data-ttu-id="ae4a8-171">具名群組權限</span><span class="sxs-lookup"><span data-stu-id="ae4a8-171">Named group permissions</span></span> |
    |---------|---------|---------|---------|---------|---------|---------|---------|
    |<span data-ttu-id="ae4a8-172">/clusters/finanace/ fincluster01</span><span class="sxs-lookup"><span data-stu-id="ae4a8-172">/clusters/finanace/ fincluster01</span></span> | <span data-ttu-id="ae4a8-173">rwxr-x---</span><span class="sxs-lookup"><span data-stu-id="ae4a8-173">rwxr-x---</span></span>  |<span data-ttu-id="ae4a8-174">服務主體</span><span class="sxs-lookup"><span data-stu-id="ae4a8-174">Service Principal</span></span> |<span data-ttu-id="ae4a8-175">FINGRP</span><span class="sxs-lookup"><span data-stu-id="ae4a8-175">FINGRP</span></span>  |- |-  |-   |-  | 
   


## <a name="recommendations-for-job-input-and-output-data"></a><span data-ttu-id="ae4a8-176">作業輸入和輸出資料的相關建議</span><span class="sxs-lookup"><span data-stu-id="ae4a8-176">Recommendations for job input and output data</span></span>

<span data-ttu-id="ae4a8-177">我們建議將作業的輸入資料和作業的輸出儲存在 **/clusters** 以外的資料夾。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-177">We recommend that input data to a job, and the outputs from a job be stored in a folder outside **/clusters**.</span></span> <span data-ttu-id="ae4a8-178">這可確保即使刪除叢集特定的資料夾以回收部分儲存空間，作業輸入和輸出仍然可供未來使用。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-178">This ensures that even if the cluster-specific folder is deleted to reclaim some storage space,the job inputs and outputs are still available for future use.</span></span> <span data-ttu-id="ae4a8-179">在這種情況下，請確定用來儲存作業輸入和輸出的資料夾層級，有提供適當的存取等級給服務主體。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-179">In such a case, ensure that the folder hierarchy for storing the job inputs and outputs allows appropriate level of access for the Service Principal.</span></span>

## <a name="limit-on-clusters-sharing-a-single-storage-account"></a><span data-ttu-id="ae4a8-180">共用單一儲存體帳戶的叢集所受的限制</span><span class="sxs-lookup"><span data-stu-id="ae4a8-180">Limit on clusters sharing a single storage account</span></span>

<span data-ttu-id="ae4a8-181">可共用單一 Data Lake Store 帳戶的叢集數目上限，取決於這些叢集上執行的工作負載。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-181">The limit on the number of clusters that can share a single Data Lake Store account depends on the workload being run on those clusters.</span></span> <span data-ttu-id="ae4a8-182">如果共用儲存體帳戶的叢集太多，或工作負載非常繁重，可能會導致對儲存體帳戶的輸入/輸出進行節流。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-182">Having too many clusters or very heavy workloads on the clusters that share a storage account might cause the storage account ingress/egress to get throttled.</span></span>

## <a name="support-for-default-acls"></a><span data-ttu-id="ae4a8-183">預設 ACL 的支援</span><span class="sxs-lookup"><span data-stu-id="ae4a8-183">Support for Default-ACLs</span></span>

<span data-ttu-id="ae4a8-184">使用具名使用者存取權建立服務主體時 (如上表所示)，建議**不要**使用預設 ACL 來新增使用者。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-184">When creating a Service Principal with named-user access (as shown in the table above), we recommend **not** adding the named-user with a default-ACL.</span></span> <span data-ttu-id="ae4a8-185">如果使用預設 ACL 來佈建具名使用者存取權，將會導致將 770 權限指派給擁有使用者、擁有群組和其他人。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-185">Provisioning named-user access using default-ACLs results in the assignment of 770 permissions for owning-user, owning-group, and others.</span></span> <span data-ttu-id="ae4a8-186">雖然此預設值 770 不會取走擁有使用者 (7) 或擁有群組 (7) 的權限，但會取走其他人 (0) 的所有權限。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-186">While this default value of 770 does not take away permissions from owning-user (7) or owning-group (7), it takes away all permissions for others (0).</span></span> <span data-ttu-id="ae4a8-187">這會在一個特定使用案例中產生已知問題，[已知問題和因應措施](#known-issues-and-workarounds)一節對此有詳細的討論。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-187">This results in a known issue with one particular use-case that is discussed in detail in the [Known issues and workarounds](#known-issues-and-workarounds) section.</span></span>

## <a name="known-issues-and-workarounds"></a><span data-ttu-id="ae4a8-188">已知問題和因應措施</span><span class="sxs-lookup"><span data-stu-id="ae4a8-188">Known issues and workarounds</span></span>

<span data-ttu-id="ae4a8-189">本節列出搭配 Data Lake Store 使用 HDInsight 的已知問題及其因應措施。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-189">This section lists the known issues for using HDInsight with Data Lake Store, and their workarounds.</span></span>

### <a name="publicly-visible-localized-yarn-resources"></a><span data-ttu-id="ae4a8-190">公開可見的當地語系化 YARN 資源</span><span class="sxs-lookup"><span data-stu-id="ae4a8-190">Publicly visible localized YARN resources</span></span>

<span data-ttu-id="ae4a8-191">建立新的 Azure Data Lake Store 帳戶時，將會自動佈建根目錄並將存取 ACL 權限位元設為 770。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-191">When a new Azure Data Lake store account is created, the root directory is automatically provisioned with Access-ACL permission bits set to 770.</span></span> <span data-ttu-id="ae4a8-192">根資料夾的擁有使用者會設為帳戶建立使用者 (Data Lake Store 管理員)，而擁有群組會設為帳戶建立使用者的主要群組。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-192">The root folder’s owning user is set to the user that created the account (the Data Lake Store admin) and the owning group is set to the primary group of the user that created the account.</span></span> <span data-ttu-id="ae4a8-193">不會提供存取權給「其他人」。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-193">No access is provided for "others".</span></span>

<span data-ttu-id="ae4a8-194">已知這些設定會影響 [YARN 247](https://hwxmonarch.atlassian.net/browse/YARN-247) 中記錄的一個特定 HDInsight 使用案例。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-194">These settings are known to affect one specific HDInsight use-case captured in [YARN 247](https://hwxmonarch.atlassian.net/browse/YARN-247).</span></span> <span data-ttu-id="ae4a8-195">作業提交會失敗，錯誤訊息如下︰</span><span class="sxs-lookup"><span data-stu-id="ae4a8-195">Job submissions could fail with an error message similar to this:</span></span>

    Resource XXXX is not publicly accessible and as such cannot be part of the public cache.

<span data-ttu-id="ae4a8-196">如先前連結的 YARN JIRA 中所述，將公用資源當地語系化時，當地語系化人員會在遠端檔案系統上檢查所有要求之資源的權限，確保它們確實已公開。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-196">As stated in the YARN JIRA linked earlier, while localizing public resources, the localizer validates that all the requested resources are indeed public by checking their permissions on the remote file-system.</span></span> <span data-ttu-id="ae4a8-197">任何不符合該條件的 LocalResource 將會被拒絕進行當地語系化。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-197">Any LocalResource that does not fit that condition is rejected for localization.</span></span> <span data-ttu-id="ae4a8-198">權限檢查包括「其他人」的檔案讀取權限。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-198">The check for permissions, includes read-access to the file for "others".</span></span> <span data-ttu-id="ae4a8-199">在 Azure Data Lake 上裝載 HDInsight 叢集時，這種情況不會自動發生，因為 Azure Data Lake 會在根資料夾等級拒絕「其他人」的所有存取權。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-199">This scenario does not work out-of-the-box when hosting HDInsight clusters on Azure Data Lake, since Azure Data Lake denies all access to "others" at root folder level.</span></span>

#### <a name="workaround"></a><span data-ttu-id="ae4a8-200">因應措施</span><span class="sxs-lookup"><span data-stu-id="ae4a8-200">Workaround</span></span>
<span data-ttu-id="ae4a8-201">透過階層設定**其他人**的讀取和執行權限，例如在**/**、**/clusters** 和 **/clusters/finance**，如上表所示。</span><span class="sxs-lookup"><span data-stu-id="ae4a8-201">Set read-execute permissions for **others** through the hierarchy, for example,  at **/**, **/clusters** and **/clusters/finance** as shown in the table above.</span></span>

## <a name="see-also"></a><span data-ttu-id="ae4a8-202">另請參閱</span><span class="sxs-lookup"><span data-stu-id="ae4a8-202">See also</span></span>

* [<span data-ttu-id="ae4a8-203">建立以 Data Lake 存放區當做儲存體的 HDInsight 叢集</span><span class="sxs-lookup"><span data-stu-id="ae4a8-203">Create an HDInsight cluster with Data Lake Store as storage</span></span>](../data-lake-store/data-lake-store-hdinsight-hadoop-use-portal.md)


