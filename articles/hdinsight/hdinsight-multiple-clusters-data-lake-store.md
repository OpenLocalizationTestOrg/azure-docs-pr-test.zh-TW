---
title: "多個 HDInsight 叢集的 Azure Data Lake Store 帳戶-Azure aaaUse |Microsoft 文件"
description: "了解如何 toouse 多超過一個 HDInsight 叢集與單一 Data Lake Store 帳戶"
keywords: "hdinsight 儲存體,hdfs,結構化資料,非結構化資料, data lake store"
services: hdinsight,storage
documentationcenter: 
tags: azure-portal
author: nitinme
manager: jhubbard
editor: cgronlun
ms.service: hdinsight
ms.custom: hdinsightactive
ms.workload: big-data
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/02/2017
ms.author: nitinme
ms.openlocfilehash: 3a125b91fcc1e436270a1bd349f7a2d8f27e06fb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="use-multiple-hdinsight-clusters-with-an-azure-data-lake-store-account"></a><span data-ttu-id="53c45-104">利用一個 Azure Data Lake Store 帳戶使用多個 HDInsight 叢集</span><span class="sxs-lookup"><span data-stu-id="53c45-104">Use multiple HDInsight clusters with an Azure Data Lake Store account</span></span>

<span data-ttu-id="53c45-105">從 HDInsight 3.5 版開始，您可以建立 HDInsight 叢集與 Azure Data Lake Store 帳戶作為 hello 預設檔案系統。</span><span class="sxs-lookup"><span data-stu-id="53c45-105">Starting with HDInsight version 3.5, you can create HDInsight clusters with  Azure Data Lake Store accounts as hello default filesystem.</span></span>
<span data-ttu-id="53c45-106">Data Lake Store 支援無限制的儲存空間，不僅適合裝載大量資料，也適合裝載多個共用單一 Data Lake Store 帳戶的 HDInsight 叢集。</span><span class="sxs-lookup"><span data-stu-id="53c45-106">Data Lake Store supports unlimited storage that makes it ideal not only for hosting large amounts of data; but also for hosting multiple HDInsight clusters that share a single Data Lake Store Account.</span></span> <span data-ttu-id="53c45-107">Instructionson 如何 toocreate 在 HDInsight 叢集為 hello 存放裝置的資料湖存放區，請參閱[建立 HDInsight 叢集與資料湖存放區](../data-lake-store/data-lake-store-hdinsight-hadoop-use-portal.md)。</span><span class="sxs-lookup"><span data-stu-id="53c45-107">For instructionson how toocreate an HDInsight cluster with Data Lake Store as hello storage, see [Create HDInsight clusters with Data Lake Store](../data-lake-store/data-lake-store-hdinsight-hadoop-use-portal.md).</span></span>

<span data-ttu-id="53c45-108">本文章提供建議 toohello 資料湖存放區管理員來設定單一和共用資料湖存放區帳戶可跨多個**active** HDInsight 叢集。</span><span class="sxs-lookup"><span data-stu-id="53c45-108">This article provides recommendations toohello Data Lake store administrator for setting up a single and shared Data Lake Store Account that can be used across multiple **active** HDInsight clusters.</span></span> <span data-ttu-id="53c45-109">這些建議適用於的 toohosting 多個安全與不安全的 Hadoop 叢集共用的資料湖存放區帳戶。</span><span class="sxs-lookup"><span data-stu-id="53c45-109">These recommendations apply toohosting multiple secure as well as non-secure Hadoop clusters on a shared Data Lake store account.</span></span>


## <a name="data-lake-store-file-and-folder-level-acls"></a><span data-ttu-id="53c45-110">Data Lake Store 檔案和資料夾等級 ACL</span><span class="sxs-lookup"><span data-stu-id="53c45-110">Data Lake Store file and folder level ACLs</span></span>

<span data-ttu-id="53c45-111">hello 本文的其餘部分假設您已經有相當的認識，檔案與資料夾層級 Acl 的 Azure 資料湖存放區，在詳細資料中所述在[Azure 資料湖存放區中的存取控制](../data-lake-store/data-lake-store-access-control.md)。</span><span class="sxs-lookup"><span data-stu-id="53c45-111">hello rest of this article assumes that you have a good knowledge of file and folder level ACLs in Azure Data Lake Store, which is described in detail at [Access control in Azure Data Lake Store](../data-lake-store/data-lake-store-access-control.md).</span></span>

## <a name="data-lake-store-setup-for-multiple-hdinsight-clusters"></a><span data-ttu-id="53c45-112">多個 HDInsight 叢集的 Data Lake Store 設定</span><span class="sxs-lookup"><span data-stu-id="53c45-112">Data Lake Store setup for multiple HDInsight clusters</span></span>
<span data-ttu-id="53c45-113">讓我們需要兩個層級的資料夾階層 tooexplain hello 建議使用 Data Lake Store 帳戶的多個 HDInsight 叢集。</span><span class="sxs-lookup"><span data-stu-id="53c45-113">Let us take a two-level folder hierarchy tooexplain hello recommendations for using mutilple HDInsight clusters with a Data Lake Store account.</span></span> <span data-ttu-id="53c45-114">請考慮具有 hello 資料夾結構的 Data Lake Store 帳戶**/叢集/finance**。</span><span class="sxs-lookup"><span data-stu-id="53c45-114">Consider you have a Data Lake Store account with hello folder structure **/clusters/finance**.</span></span> <span data-ttu-id="53c45-115">此結構中，所有 hello 金融機構所需的 hello 叢集可以都使用 /clusters/finance hello 存放位置。</span><span class="sxs-lookup"><span data-stu-id="53c45-115">With this structure, all hello clusters required by hello Finance organization can use /clusters/finance as hello storage location.</span></span> <span data-ttu-id="53c45-116">在未來，如果另一個組織，說出行銷、 想要使用的 HDInsight 叢集 toocreate hello 相同 Data Lake Store 帳戶，他們無法建立 /clusters/marketing hello。</span><span class="sxs-lookup"><span data-stu-id="53c45-116">In hello future, if another organization, say Marketing, wants toocreate HDInsight clusters using hello same Data Lake Store account, they could create /clusters/marketing.</span></span> <span data-ttu-id="53c45-117">現在，我們只要使用 **/clusters/finance** 即可。</span><span class="sxs-lookup"><span data-stu-id="53c45-117">For now, let's just use **/clusters/finance**.</span></span>

<span data-ttu-id="53c45-118">此資料夾結構 toobe 有效地使用 HDInsight 叢集 tooenable，hello 資料湖存放區系統管理員必須指派適當的權限，hello 資料表中所述。</span><span class="sxs-lookup"><span data-stu-id="53c45-118">tooenable this folder structure toobe effectively used by HDInsight clusters, hello Data Lake Store administrator must assign appropriate permissions, as described in hello table.</span></span> <span data-ttu-id="53c45-119">hello hello 表所示的權限對應 tooAccess Acl，並不會進行預設 Acl。</span><span class="sxs-lookup"><span data-stu-id="53c45-119">hello permissions shown in hello table correspond tooAccess-ACLs, and not Default-ACLs.</span></span> 


|<span data-ttu-id="53c45-120">資料夾</span><span class="sxs-lookup"><span data-stu-id="53c45-120">Folder</span></span>  |<span data-ttu-id="53c45-121">權限</span><span class="sxs-lookup"><span data-stu-id="53c45-121">Permissions</span></span>  |<span data-ttu-id="53c45-122">擁有使用者</span><span class="sxs-lookup"><span data-stu-id="53c45-122">Owning user</span></span>  |<span data-ttu-id="53c45-123">擁有群組</span><span class="sxs-lookup"><span data-stu-id="53c45-123">Owning group</span></span>  | <span data-ttu-id="53c45-124">具名使用者</span><span class="sxs-lookup"><span data-stu-id="53c45-124">Named user</span></span> | <span data-ttu-id="53c45-125">具名使用者權限</span><span class="sxs-lookup"><span data-stu-id="53c45-125">Named user permissions</span></span> | <span data-ttu-id="53c45-126">具名群組</span><span class="sxs-lookup"><span data-stu-id="53c45-126">Named group</span></span> | <span data-ttu-id="53c45-127">具名群組權限</span><span class="sxs-lookup"><span data-stu-id="53c45-127">Named group permissions</span></span> |
|---------|---------|---------|---------|---------|---------|---------|---------|
|/ | <span data-ttu-id="53c45-128">rwxr-x--x</span><span class="sxs-lookup"><span data-stu-id="53c45-128">rwxr-x--x</span></span>  |<span data-ttu-id="53c45-129">admin</span><span class="sxs-lookup"><span data-stu-id="53c45-129">admin</span></span> |<span data-ttu-id="53c45-130">admin</span><span class="sxs-lookup"><span data-stu-id="53c45-130">admin</span></span>  |<span data-ttu-id="53c45-131">服務主體</span><span class="sxs-lookup"><span data-stu-id="53c45-131">Service principal</span></span> |<span data-ttu-id="53c45-132">--x</span><span class="sxs-lookup"><span data-stu-id="53c45-132">--x</span></span>  |<span data-ttu-id="53c45-133">FINGRP</span><span class="sxs-lookup"><span data-stu-id="53c45-133">FINGRP</span></span>   |<span data-ttu-id="53c45-134">r-x</span><span class="sxs-lookup"><span data-stu-id="53c45-134">r-x</span></span>         |
|<span data-ttu-id="53c45-135">/clusters</span><span class="sxs-lookup"><span data-stu-id="53c45-135">/clusters</span></span> | <span data-ttu-id="53c45-136">rwxr-x--x</span><span class="sxs-lookup"><span data-stu-id="53c45-136">rwxr-x--x</span></span> |<span data-ttu-id="53c45-137">admin</span><span class="sxs-lookup"><span data-stu-id="53c45-137">admin</span></span> |<span data-ttu-id="53c45-138">admin</span><span class="sxs-lookup"><span data-stu-id="53c45-138">admin</span></span> |<span data-ttu-id="53c45-139">服務主體</span><span class="sxs-lookup"><span data-stu-id="53c45-139">Service principal</span></span> |<span data-ttu-id="53c45-140">--x</span><span class="sxs-lookup"><span data-stu-id="53c45-140">--x</span></span>  |<span data-ttu-id="53c45-141">FINGRP</span><span class="sxs-lookup"><span data-stu-id="53c45-141">FINGRP</span></span> |<span data-ttu-id="53c45-142">r-x</span><span class="sxs-lookup"><span data-stu-id="53c45-142">r-x</span></span>         |
|<span data-ttu-id="53c45-143">/clusters/finance</span><span class="sxs-lookup"><span data-stu-id="53c45-143">/clusters/finance</span></span> | <span data-ttu-id="53c45-144">rwxr-x--t</span><span class="sxs-lookup"><span data-stu-id="53c45-144">rwxr-x--t</span></span> |<span data-ttu-id="53c45-145">admin</span><span class="sxs-lookup"><span data-stu-id="53c45-145">admin</span></span> |<span data-ttu-id="53c45-146">FINGRP</span><span class="sxs-lookup"><span data-stu-id="53c45-146">FINGRP</span></span>  |<span data-ttu-id="53c45-147">服務主體</span><span class="sxs-lookup"><span data-stu-id="53c45-147">Service principal</span></span> |<span data-ttu-id="53c45-148">rwx</span><span class="sxs-lookup"><span data-stu-id="53c45-148">rwx</span></span>  |-  |-     |

<span data-ttu-id="53c45-149">Hello 資料表中</span><span class="sxs-lookup"><span data-stu-id="53c45-149">In hello table,</span></span>

- <span data-ttu-id="53c45-150">**系統管理員**是 hello 建立者以及 「 hello Data Lake Store 帳戶系統管理員。</span><span class="sxs-lookup"><span data-stu-id="53c45-150">**admin** is hello creator and administrator of hello Data Lake Store account.</span></span>
- <span data-ttu-id="53c45-151">**服務主體**是 hello Azure Active Directory (AAD) 的服務主體與 hello 帳戶相關聯。</span><span class="sxs-lookup"><span data-stu-id="53c45-151">**Service principal** is hello Azure Active Directory (AAD) service principal associated with hello account.</span></span>
- <span data-ttu-id="53c45-152">**FINGRP**是在包含使用者從 hello 金融機構中的 AAD 中建立使用者群組。</span><span class="sxs-lookup"><span data-stu-id="53c45-152">**FINGRP** is a user group created in AAD that contains users from hello Finance organization.</span></span>

<span data-ttu-id="53c45-153">如需有關如何 toocreate 的 AAD 應用程式 （也會建立服務主體），請參閱指示[建立 AAD 應用程式](../azure-resource-manager/resource-group-create-service-principal-portal.md#create-an-azure-active-directory-application)。</span><span class="sxs-lookup"><span data-stu-id="53c45-153">For instructions on how toocreate an AAD application (that also creates a Service Principal), see [Create an AAD application](../azure-resource-manager/resource-group-create-service-principal-portal.md#create-an-azure-active-directory-application).</span></span> <span data-ttu-id="53c45-154">如需有關如何 toocreate 使用者群組在 AAD 時，請參閱指示[管理 Azure Active Directory 中的群組](../active-directory/active-directory-accessmanagement-manage-groups.md)。</span><span class="sxs-lookup"><span data-stu-id="53c45-154">For instructions on how toocreate a user group in AAD, see [Managing groups in Azure Active Directory](../active-directory/active-directory-accessmanagement-manage-groups.md).</span></span>

<span data-ttu-id="53c45-155">一些重點 tooconsider。</span><span class="sxs-lookup"><span data-stu-id="53c45-155">Some key points tooconsider.</span></span>

- <span data-ttu-id="53c45-156">hello 兩個層級的資料夾結構 (**/叢集/finance/**) 必須建立並佈建具有適當權限的 hello 資料湖存放區管理員**之前**hello 儲存體帳戶用於叢集。</span><span class="sxs-lookup"><span data-stu-id="53c45-156">hello two level folder structure (**/clusters/finance/**) must be created and provisioned with appropriate permissions by hello Data Lake Store admin **before** using hello storage account for clusters.</span></span> <span data-ttu-id="53c45-157">建立叢集時不會自動建立此結構。</span><span class="sxs-lookup"><span data-stu-id="53c45-157">This structure is not created automatically while creating clusters.</span></span>
- <span data-ttu-id="53c45-158">上述的 hello 範例建議設定 hello 擁有的群組**/叢集/finance**為**FINGRP** ，並且允許**r-x**存取 tooFINGRP toohello 整個資料夾階層從 hello 根目錄開始。</span><span class="sxs-lookup"><span data-stu-id="53c45-158">hello example above recommends setting hello owning group of **/clusters/finance** as **FINGRP** and permitting **r-x** access tooFINGRP toohello entire folder hierarchy starting from hello root.</span></span> <span data-ttu-id="53c45-159">這可確保 FINGRP hello 成員可瀏覽 hello 資料夾結構從根目錄開始。</span><span class="sxs-lookup"><span data-stu-id="53c45-159">This ensures that hello members of FINGRP can navigate hello folder structure starting from root.</span></span>
- <span data-ttu-id="53c45-160">在 hello 情況下如果不同的 AAD 服務主體可以建立叢集下的**/叢集/finance**，hello 自黏位元 (hello 上設定**finance**資料夾) 可確保一項服務所建立的資料夾無法刪除 hello 其他主體。</span><span class="sxs-lookup"><span data-stu-id="53c45-160">In hello case when different AAD Service Principals can create clusters under **/clusters/finance**, hello sticky-bit (when set on hello **finance** folder) ensures that folders created by one Service Principal cannot be deleted by hello other.</span></span>
- <span data-ttu-id="53c45-161">HDInsight 叢集建立程序之後 hello 資料夾結構與權限的位置，建立在特定叢集的儲存體 loaction **/叢集/finance/**。</span><span class="sxs-lookup"><span data-stu-id="53c45-161">Once hello folder structure and permissions are in place, HDInsight cluster creation process creates a cluster-specific storage loaction under **/clusters/finance/**.</span></span> <span data-ttu-id="53c45-162">例如，可能是與 hello 名稱 fincluster01 叢集 hello 存放裝置**/clusters/finance/fincluster01**。</span><span class="sxs-lookup"><span data-stu-id="53c45-162">For example, hello storage for a cluster with hello name fincluster01 could be **/clusters/finance/fincluster01**.</span></span> <span data-ttu-id="53c45-163">hello 擁有權和權限的 HDInsight 叢集所建立的 hello 資料夾表所示 hello 這裡。</span><span class="sxs-lookup"><span data-stu-id="53c45-163">hello ownership and permissions for hello folders created by HDInsight cluster is shown in hello table here.</span></span>

    |<span data-ttu-id="53c45-164">資料夾</span><span class="sxs-lookup"><span data-stu-id="53c45-164">Folder</span></span>  |<span data-ttu-id="53c45-165">權限</span><span class="sxs-lookup"><span data-stu-id="53c45-165">Permissions</span></span>  |<span data-ttu-id="53c45-166">擁有使用者</span><span class="sxs-lookup"><span data-stu-id="53c45-166">Owning user</span></span>  |<span data-ttu-id="53c45-167">擁有群組</span><span class="sxs-lookup"><span data-stu-id="53c45-167">Owning group</span></span>  | <span data-ttu-id="53c45-168">具名使用者</span><span class="sxs-lookup"><span data-stu-id="53c45-168">Named user</span></span> | <span data-ttu-id="53c45-169">具名使用者權限</span><span class="sxs-lookup"><span data-stu-id="53c45-169">Named user permissions</span></span> | <span data-ttu-id="53c45-170">具名群組</span><span class="sxs-lookup"><span data-stu-id="53c45-170">Named group</span></span> | <span data-ttu-id="53c45-171">具名群組權限</span><span class="sxs-lookup"><span data-stu-id="53c45-171">Named group permissions</span></span> |
    |---------|---------|---------|---------|---------|---------|---------|---------|
    |<span data-ttu-id="53c45-172">/clusters/finanace/ fincluster01</span><span class="sxs-lookup"><span data-stu-id="53c45-172">/clusters/finanace/ fincluster01</span></span> | <span data-ttu-id="53c45-173">rwxr-x---</span><span class="sxs-lookup"><span data-stu-id="53c45-173">rwxr-x---</span></span>  |<span data-ttu-id="53c45-174">服務主體</span><span class="sxs-lookup"><span data-stu-id="53c45-174">Service Principal</span></span> |<span data-ttu-id="53c45-175">FINGRP</span><span class="sxs-lookup"><span data-stu-id="53c45-175">FINGRP</span></span>  |- |-  |-   |-  | 
   


## <a name="recommendations-for-job-input-and-output-data"></a><span data-ttu-id="53c45-176">作業輸入和輸出資料的相關建議</span><span class="sxs-lookup"><span data-stu-id="53c45-176">Recommendations for job input and output data</span></span>

<span data-ttu-id="53c45-177">我們建議輸入資料 tooa 工作，並 hello 從作業的輸出儲存在外部的資料夾**/叢集**。</span><span class="sxs-lookup"><span data-stu-id="53c45-177">We recommend that input data tooa job, and hello outputs from a job be stored in a folder outside **/clusters**.</span></span> <span data-ttu-id="53c45-178">這可確保即使 hello 特定叢集的資料夾刪除的 tooreclaim 一些儲存空間、 hello 工作輸入和輸出仍然可供未來使用。</span><span class="sxs-lookup"><span data-stu-id="53c45-178">This ensures that even if hello cluster-specific folder is deleted tooreclaim some storage space,hello job inputs and outputs are still available for future use.</span></span> <span data-ttu-id="53c45-179">在這種情況下，請確定用於儲存 hello 工作輸入和輸出的 hello 資料夾階層允許適當的 hello 的存取層級服務主體。</span><span class="sxs-lookup"><span data-stu-id="53c45-179">In such a case, ensure that hello folder hierarchy for storing hello job inputs and outputs allows appropriate level of access for hello Service Principal.</span></span>

## <a name="limit-on-clusters-sharing-a-single-storage-account"></a><span data-ttu-id="53c45-180">共用單一儲存體帳戶的叢集所受的限制</span><span class="sxs-lookup"><span data-stu-id="53c45-180">Limit on clusters sharing a single storage account</span></span>

<span data-ttu-id="53c45-181">hello hello 可以共用單一的 Data Lake Store 帳戶的叢集數目上限取決於 hello 這些叢集上執行的工作負載。</span><span class="sxs-lookup"><span data-stu-id="53c45-181">hello limit on hello number of clusters that can share a single Data Lake Store account depends on hello workload being run on those clusters.</span></span> <span data-ttu-id="53c45-182">共用儲存體帳戶的 hello 叢集上有太多的叢集或非常繁重的工作負載可能會導致 hello 儲存體帳戶入口/出口 tooget 節流。</span><span class="sxs-lookup"><span data-stu-id="53c45-182">Having too many clusters or very heavy workloads on hello clusters that share a storage account might cause hello storage account ingress/egress tooget throttled.</span></span>

## <a name="support-for-default-acls"></a><span data-ttu-id="53c45-183">預設 ACL 的支援</span><span class="sxs-lookup"><span data-stu-id="53c45-183">Support for Default-ACLs</span></span>

<span data-ttu-id="53c45-184">當建立服務主體具有名為使用者存取權 （如 hello 如上表所示），我們建議您**不**新增 hello 名為使用者使用預設 ACL。</span><span class="sxs-lookup"><span data-stu-id="53c45-184">When creating a Service Principal with named-user access (as shown in hello table above), we recommend **not** adding hello named-user with a default-ACL.</span></span> <span data-ttu-id="53c45-185">使用預設 Acl 結果中 hello 分派 770 權限的使用者擁有、 主控群組和其他人的佈建名為使用者存取。</span><span class="sxs-lookup"><span data-stu-id="53c45-185">Provisioning named-user access using default-ACLs results in hello assignment of 770 permissions for owning-user, owning-group, and others.</span></span> <span data-ttu-id="53c45-186">雖然此預設值 770 不會取走擁有使用者 (7) 或擁有群組 (7) 的權限，但會取走其他人 (0) 的所有權限。</span><span class="sxs-lookup"><span data-stu-id="53c45-186">While this default value of 770 does not take away permissions from owning-user (7) or owning-group (7), it takes away all permissions for others (0).</span></span> <span data-ttu-id="53c45-187">這會導致一個特定使用案例，在 hello 中詳細討論的已知問題[的已知問題及因應措施](#known-issues-and-workarounds)> 一節。</span><span class="sxs-lookup"><span data-stu-id="53c45-187">This results in a known issue with one particular use-case that is discussed in detail in hello [Known issues and workarounds](#known-issues-and-workarounds) section.</span></span>

## <a name="known-issues-and-workarounds"></a><span data-ttu-id="53c45-188">已知問題和因應措施</span><span class="sxs-lookup"><span data-stu-id="53c45-188">Known issues and workarounds</span></span>

<span data-ttu-id="53c45-189">此區段會列出使用資料湖存放區，以及其因應措施的 HDInsight 的已知問題的 hello。</span><span class="sxs-lookup"><span data-stu-id="53c45-189">This section lists hello known issues for using HDInsight with Data Lake Store, and their workarounds.</span></span>

### <a name="publicly-visible-localized-yarn-resources"></a><span data-ttu-id="53c45-190">公開可見的當地語系化 YARN 資源</span><span class="sxs-lookup"><span data-stu-id="53c45-190">Publicly visible localized YARN resources</span></span>

<span data-ttu-id="53c45-191">建立新的 Azure 資料湖存放區帳戶時，hello 根目錄的自動佈建與存取 ACL 權限位元組 too770。</span><span class="sxs-lookup"><span data-stu-id="53c45-191">When a new Azure Data Lake store account is created, hello root directory is automatically provisioned with Access-ACL permission bits set too770.</span></span> <span data-ttu-id="53c45-192">hello 根資料夾的擁有使用者建立 hello 帳戶 （hello 資料湖存放區系統管理員） 設定 toohello 使用者並 hello 擁有群組設定 toohello 建立 hello 帳戶 hello 使用者的主要群組。</span><span class="sxs-lookup"><span data-stu-id="53c45-192">hello root folder’s owning user is set toohello user that created hello account (hello Data Lake Store admin) and hello owning group is set toohello primary group of hello user that created hello account.</span></span> <span data-ttu-id="53c45-193">不會提供存取權給「其他人」。</span><span class="sxs-lookup"><span data-stu-id="53c45-193">No access is provided for "others".</span></span>

<span data-ttu-id="53c45-194">這些設定稱為 tooaffect 一個特定 HDInsight 使用案例中擷取[YARN 247](https://hwxmonarch.atlassian.net/browse/YARN-247)。</span><span class="sxs-lookup"><span data-stu-id="53c45-194">These settings are known tooaffect one specific HDInsight use-case captured in [YARN 247](https://hwxmonarch.atlassian.net/browse/YARN-247).</span></span> <span data-ttu-id="53c45-195">工作提交失敗，錯誤訊息類似 toothis:</span><span class="sxs-lookup"><span data-stu-id="53c45-195">Job submissions could fail with an error message similar toothis:</span></span>

    Resource XXXX is not publicly accessible and as such cannot be part of hello public cache.

<span data-ttu-id="53c45-196">中所述 hello YARN JIRA 更早版本，連結時當地語系化公用資源，hello 定位器會驗證所有 hello 要求的資源為確實公用藉由檢查其 hello 遠端檔案系統上的權限。</span><span class="sxs-lookup"><span data-stu-id="53c45-196">As stated in hello YARN JIRA linked earlier, while localizing public resources, hello localizer validates that all hello requested resources are indeed public by checking their permissions on hello remote file-system.</span></span> <span data-ttu-id="53c45-197">任何不符合該條件的 LocalResource 將會被拒絕進行當地語系化。</span><span class="sxs-lookup"><span data-stu-id="53c45-197">Any LocalResource that does not fit that condition is rejected for localization.</span></span> <span data-ttu-id="53c45-198">hello 檢查權限，包括讀取權限 toohello 檔案的 「 其他人 」。</span><span class="sxs-lookup"><span data-stu-id="53c45-198">hello check for permissions, includes read-access toohello file for "others".</span></span> <span data-ttu-id="53c45-199">這種情況下無法運作的方塊外時裝載 Azure Data Lake，在 HDInsight 叢集，因為 Azure 資料湖太拒絕所有存取 「 其他 」 在根資料夾層級。</span><span class="sxs-lookup"><span data-stu-id="53c45-199">This scenario does not work out-of-the-box when hosting HDInsight clusters on Azure Data Lake, since Azure Data Lake denies all access too"others" at root folder level.</span></span>

#### <a name="workaround"></a><span data-ttu-id="53c45-200">因應措施</span><span class="sxs-lookup"><span data-stu-id="53c45-200">Workaround</span></span>
<span data-ttu-id="53c45-201">設定讀取執行權限**其他**透過 hello 階層，例如在 **/** ， **/叢集**和  **/叢集/finance** hello 如上表所示。</span><span class="sxs-lookup"><span data-stu-id="53c45-201">Set read-execute permissions for **others** through hello hierarchy, for example,  at **/**, **/clusters** and **/clusters/finance** as shown in hello table above.</span></span>

## <a name="see-also"></a><span data-ttu-id="53c45-202">另請參閱</span><span class="sxs-lookup"><span data-stu-id="53c45-202">See also</span></span>

* [<span data-ttu-id="53c45-203">建立以 Data Lake 存放區當做儲存體的 HDInsight 叢集</span><span class="sxs-lookup"><span data-stu-id="53c45-203">Create an HDInsight cluster with Data Lake Store as storage</span></span>](../data-lake-store/data-lake-store-hdinsight-hadoop-use-portal.md)


