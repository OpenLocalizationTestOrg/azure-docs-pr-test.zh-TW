---
title: "Hadoop 安全性 - 已加入網域的 HDInsight 叢集 - Azure | Microsoft Docs"
description: "了解 ..."
services: hdinsight
documentationcenter: 
author: saurinsh
manager: jhubbard
editor: cgronlun
tags: azure-portal
ms.assetid: 7dc6847d-10d4-4b5c-9c83-cc513cf91965
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 10/31/2016
ms.author: saurinsh
ms.openlocfilehash: 303be1d303df8074283cb1d37c74923cca80ae59
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/29/2017
---
# <a name="an-introduction-to-hadoop-security-with-domain-joined-hdinsight-clusters-preview"></a><span data-ttu-id="32eca-103">已加入網域之 HDInsight 叢集的 Hadoop 安全性簡介 (預覽)</span><span class="sxs-lookup"><span data-stu-id="32eca-103">An introduction to Hadoop security with domain-joined HDInsight clusters (Preview)</span></span>

<span data-ttu-id="32eca-104">到目前為止，Azure HDInsight 僅支援單一使用者本機系統管理員。這很適合用於比較小型的應用程式團隊或部門。</span><span class="sxs-lookup"><span data-stu-id="32eca-104">Azure HDInsight until today supported only a single user local admin. This worked great for smaller application teams or departments.</span></span> <span data-ttu-id="32eca-105">Hadoop 型工作負載在企業間越來越受青睞，而 Active Directory 型驗證、多使用者支援和角色型存取控制等企業級功能的需求日益重要。</span><span class="sxs-lookup"><span data-stu-id="32eca-105">As Hadoop based workloads gained more popularity in the enterprise sector, the need for enterprise grade capabilities like active directory based authentication, multi-user support, and role based access control became increasingly important.</span></span> <span data-ttu-id="32eca-106">使用已加入網域的 HDInsight 叢集時，您可以建立已加入 Active Directory 網域的 HDInsight 叢集、設定企業中可以透過 Azure Active Directory 進行驗證來登入 HDInsight 叢集的員工清單。</span><span class="sxs-lookup"><span data-stu-id="32eca-106">Using Domain-joined HDInsight clusters, you can create an HDInsight cluster joined to an Active Directory domain, configure a list of employees from the enterprise who can authenticate through Azure Active Directory to log on to HDInsight cluster.</span></span> <span data-ttu-id="32eca-107">企業外部的任何人都無法登入或存取此 HDInsight 叢集。</span><span class="sxs-lookup"><span data-stu-id="32eca-107">Anyone outside the enterprise cannot log on or access the HDInsight cluster.</span></span> <span data-ttu-id="32eca-108">企業系統管理員可以使用 [Apache Ranger](http://hortonworks.com/apache/ranger/)，針對 Hive 安全性設定角色型存取控制，進而將資料存取限制為僅限有需要時。</span><span class="sxs-lookup"><span data-stu-id="32eca-108">The enterprise admin can configure role based access control for Hive security using [Apache Ranger](http://hortonworks.com/apache/ranger/), thus restricting access to data to only as much as needed.</span></span> <span data-ttu-id="32eca-109">最後，系統管理員可以依照員工稽核資料存取，以及對存取控制原則所做的任何變更，因而達到高度的公司資源控管。</span><span class="sxs-lookup"><span data-stu-id="32eca-109">Finally, the admin can audit the data access by employees, and any changes done to access control policies, thus achieving a high degree of governance of their corporate resources.</span></span>

> [!NOTE]
> <span data-ttu-id="32eca-110">此預覽中所述的新功能僅適用於 Hive 工作負載之以 Linux 為基礎的 HDInsight 叢集。</span><span class="sxs-lookup"><span data-stu-id="32eca-110">The new features described in this preview are available only on Linux-based HDInsight clusters for Hive workload.</span></span> <span data-ttu-id="32eca-111">其他工作負載 (例如 HBase、Spark、Storm 和 Kafka) 將在未來版本中啟用。</span><span class="sxs-lookup"><span data-stu-id="32eca-111">The other workloads, such as HBase, Spark, Storm and Kafka, will be enabled in future releases.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="32eca-112">Oozie 未在已加入網域的 HDInsight 上啟用。</span><span class="sxs-lookup"><span data-stu-id="32eca-112">Oozie is not enabled on domain-joined HDInsight.</span></span>

## <a name="benefits"></a><span data-ttu-id="32eca-113">優點</span><span class="sxs-lookup"><span data-stu-id="32eca-113">Benefits</span></span>
<span data-ttu-id="32eca-114">企業安全性包含四大要件 – 周邊安全性、驗證、授權和加密。</span><span class="sxs-lookup"><span data-stu-id="32eca-114">Enterprise Security contains four big pillars – Perimeter Security, Authentication, Authorization, and Encryption.</span></span>

![已加入網域的 HDInsight 叢集優點要件](./media/hdinsight-domain-joined-introduction/hdinsight-domain-joined-four-pillars.png)<span data-ttu-id="32eca-116">。</span><span class="sxs-lookup"><span data-stu-id="32eca-116">.</span></span>

### <a name="perimeter-security"></a><span data-ttu-id="32eca-117">周邊安全性</span><span class="sxs-lookup"><span data-stu-id="32eca-117">Perimeter Security</span></span>
<span data-ttu-id="32eca-118">使用虛擬網路和閘道服務可達成 HDInsight 中的周邊安全性。</span><span class="sxs-lookup"><span data-stu-id="32eca-118">Perimeter security in HDInsight is achieved using virtual networks and Gateway service.</span></span> <span data-ttu-id="32eca-119">現今，企業系統管理員可以在虛擬網路內建立 HDInsight 叢集，並使用網路安全性群組 (輸入或輸出防火牆規則) 來限制虛擬網路的存取。</span><span class="sxs-lookup"><span data-stu-id="32eca-119">Today, an enterprise admin can create an HDInsight cluster inside a virtual network and use Network Security Groups (inbound or outbound firewall rules) to restrict access to the virtual network.</span></span> <span data-ttu-id="32eca-120">只有輸入防火牆規則中所定義的 IP 位址能夠與 HDInsight 叢集通訊，因而提供周邊安全性。</span><span class="sxs-lookup"><span data-stu-id="32eca-120">Only the IP addresses defined in the inbound firewall rules will be able to communicate with the HDInsight cluster, thus providing perimeter security.</span></span> <span data-ttu-id="32eca-121">使用閘道服務可以達成另一層的周邊安全性。</span><span class="sxs-lookup"><span data-stu-id="32eca-121">Another layer of perimeter security is achieved using Gateway service.</span></span> <span data-ttu-id="32eca-122">閘道是做為第一道防線的服務，可抵禦任何對於 HDInsight 叢集的連入要求。</span><span class="sxs-lookup"><span data-stu-id="32eca-122">The Gateway is the service which acts as first line of defense for any incoming request to the HDInsight cluster.</span></span> <span data-ttu-id="32eca-123">它會接受要求、進行驗證，然後只允許要求傳遞至叢集中的其他節點，因而對叢集中的其他名稱和資料節點提供周邊安全性。</span><span class="sxs-lookup"><span data-stu-id="32eca-123">It accepts the request, validates it and only then allows the request to pass to the other nodes in cluster, thus providing perimeter security to other name and data nodes in the cluster.</span></span>

### <a name="authentication"></a><span data-ttu-id="32eca-124">驗證</span><span class="sxs-lookup"><span data-stu-id="32eca-124">Authentication</span></span>
<span data-ttu-id="32eca-125">利用此公開預覽，企業系統管理員可以在[虛擬網路](https://azure.microsoft.com/services/virtual-network/)中佈建已加入網域的 HDInsight 叢集。</span><span class="sxs-lookup"><span data-stu-id="32eca-125">With this public preview, an enterprise admin can provision a Domain-joined HDInsight cluster, in a [virtual network](https://azure.microsoft.com/services/virtual-network/).</span></span> <span data-ttu-id="32eca-126">HDInsight 叢集的節點將會加入企業所管理的網域。</span><span class="sxs-lookup"><span data-stu-id="32eca-126">The nodes of the HDInsight cluster will be joined to the domain managed by the enterprise.</span></span> <span data-ttu-id="32eca-127">透過使用 [Azure Active Directory Domain Services](../active-directory-domain-services/active-directory-ds-overview.md) 即可達成此目的。</span><span class="sxs-lookup"><span data-stu-id="32eca-127">This is achieved through use of [Azure Active Directory Domain Services](../active-directory-domain-services/active-directory-ds-overview.md).</span></span> <span data-ttu-id="32eca-128">叢集中的所有節點便已加入企業所管理的網域。</span><span class="sxs-lookup"><span data-stu-id="32eca-128">All the nodes in the cluster are joined to a domain that the enterprise manages.</span></span> <span data-ttu-id="32eca-129">使用這項設定，企業員工可以使用其網域認證來登入叢集節點。</span><span class="sxs-lookup"><span data-stu-id="32eca-129">With this setup, the enterprise employees can log on to the cluster nodes using their domain credentials.</span></span> <span data-ttu-id="32eca-130">他們也可以使用其網域認證向其他已核准的端點 (例如 Hue、Ambari 檢視、ODBC、JDBC、PowerShell 和 REST API) 進行驗證，進而與叢集互動。</span><span class="sxs-lookup"><span data-stu-id="32eca-130">They can also use their domain credentials to authenticate with other approved endpoints like Hue, Ambari Views, ODBC, JDBC, PowerShell and REST APIs to interact with the cluster.</span></span> <span data-ttu-id="32eca-131">系統管理員可以完全控制透過這些端點與叢集互動的使用者數量。</span><span class="sxs-lookup"><span data-stu-id="32eca-131">The admin has full control over limiting the number of users interacting with the cluster via these endpoints.</span></span>

### <a name="authorization"></a><span data-ttu-id="32eca-132">授權</span><span class="sxs-lookup"><span data-stu-id="32eca-132">Authorization</span></span>
<span data-ttu-id="32eca-133">大多數企業所依循的最佳作法，就是並非每一位員工都能存取所有的企業資源。</span><span class="sxs-lookup"><span data-stu-id="32eca-133">A best practice followed by most enterprises is that not every employee has access to all enterprise resources.</span></span> <span data-ttu-id="32eca-134">同樣地，在此版本中，系統管理員可以針對叢集資源定義角色型存取控制原則。</span><span class="sxs-lookup"><span data-stu-id="32eca-134">Likewise, with this release, the admin can define role based access control policies for the cluster resources.</span></span> <span data-ttu-id="32eca-135">例如，系統管理員可以設定 [Apache Ranger](http://hortonworks.com/apache/ranger/) 以設定 Hive 的存取控制原則。</span><span class="sxs-lookup"><span data-stu-id="32eca-135">For example, the admin can configure [Apache Ranger](http://hortonworks.com/apache/ranger/) to set access control policies for Hive.</span></span> <span data-ttu-id="32eca-136">這項功能可確保員工只能存取他們要順利工作所需的資料量。</span><span class="sxs-lookup"><span data-stu-id="32eca-136">This functionality ensures that employees will be able to access only as much data as they need to be successful in their jobs.</span></span> <span data-ttu-id="32eca-137">叢集的 SSH 存取也僅限於系統管理員。</span><span class="sxs-lookup"><span data-stu-id="32eca-137">SSH access to the cluster is also restricted only to the administrator.</span></span>

### <a name="auditing"></a><span data-ttu-id="32eca-138">稽核</span><span class="sxs-lookup"><span data-stu-id="32eca-138">Auditing</span></span>
<span data-ttu-id="32eca-139">除了防止未經授權的使用者存取 HDInsight 叢集資源，以及保護資料安全以外，還要稽核所有對於叢集資源的存取，而且需有此資料才能追蹤未經授權或意外的資源存取。</span><span class="sxs-lookup"><span data-stu-id="32eca-139">Along with protecting the HDInsight cluster resources from unauthorized users, and securing the data, auditing of all access to the cluster resources, and the data is necessary to track unauthorized or unintentional access of the resources.</span></span> <span data-ttu-id="32eca-140">此預覽中，系統管理員可以檢視和報告所有對於 HDInsight 叢集資源和資料的存取。</span><span class="sxs-lookup"><span data-stu-id="32eca-140">With this preview, the admin can view and report all access to the HDInsight cluster resources and data.</span></span> <span data-ttu-id="32eca-141">系統管理員也可以檢視和報告在 Apache Ranger 支援的端點中對於存取控制原則進行的所有變更。</span><span class="sxs-lookup"><span data-stu-id="32eca-141">The admin can also view and report all changes to the access control policies done in Apache Ranger supported endpoints.</span></span> <span data-ttu-id="32eca-142">已加入網域的 HDInsight 叢集會使用熟悉的 Apache Ranger UI 來搜尋稽核記錄檔。</span><span class="sxs-lookup"><span data-stu-id="32eca-142">A Domain-joined HDInsight cluster uses the familiar Apache Ranger UI to search audit logs.</span></span> <span data-ttu-id="32eca-143">Ranger 會在後端使用 [Apache Solr](http://hortonworks.com/apache/solr/) 來儲存及搜尋記錄檔。</span><span class="sxs-lookup"><span data-stu-id="32eca-143">On the backend, Ranger uses [Apache Solr](http://hortonworks.com/apache/solr/) for storing and searching the logs.</span></span>

### <a name="encryption"></a><span data-ttu-id="32eca-144">加密</span><span class="sxs-lookup"><span data-stu-id="32eca-144">Encryption</span></span>
<span data-ttu-id="32eca-145">保護資料對於符合組織安全性和規範需求而言極為重要，而除了限制未經授權的員工存取資料以外，還應該透過加密方式加以保護。</span><span class="sxs-lookup"><span data-stu-id="32eca-145">Protecting data is important for meeting organizational security and compliance requirements, and along with restricting access to data from unauthorized employees, it should also be secured by encrypting it.</span></span> <span data-ttu-id="32eca-146">HDInsight 叢集的兩個資料存放區 (Azure 儲存體 Blob 和 Azure Data Lake 儲存體) 都支援透明的伺服器端待用[資料加密](../storage/common/storage-service-encryption.md)。</span><span class="sxs-lookup"><span data-stu-id="32eca-146">Both the data stores for HDInsight clusters, Azure Storage Blob, and Azure Data Lake Storage support transparent server-side [encryption of data](../storage/common/storage-service-encryption.md) at rest.</span></span> <span data-ttu-id="32eca-147">安全的 HDInsight 叢集會完美地與此伺服器端待用資料加密功能配合運作。</span><span class="sxs-lookup"><span data-stu-id="32eca-147">Secure HDInsight clusters will seamlessly work with this server side encryption of data at rest capability.</span></span>

## <a name="next-steps"></a><span data-ttu-id="32eca-148">後續步驟</span><span class="sxs-lookup"><span data-stu-id="32eca-148">Next steps</span></span>
* <span data-ttu-id="32eca-149">如需設定已加入網域的 HDInsight 叢集，請參閱[設定已加入網域的 HDInisight 叢集](hdinsight-domain-joined-configure.md)。</span><span class="sxs-lookup"><span data-stu-id="32eca-149">For configuring a Domain-joined HDInsight cluster, see [Configure Domain-joined HDInsight clusters](hdinsight-domain-joined-configure.md).</span></span>
* <span data-ttu-id="32eca-150">如需管理已加入網域的 HDInsight 叢集，請參閱[管理已加入網域的 HDInisight 叢集](hdinsight-domain-joined-manage.md)。</span><span class="sxs-lookup"><span data-stu-id="32eca-150">For managing a Domain-joined HDInsight clusters, see [Manage Domain-joined HDInsight clusters](hdinsight-domain-joined-manage.md).</span></span>
* <span data-ttu-id="32eca-151">如需設定 Hive 原則和執行 Hive 查詢，請參閱[針對已加入網域的 HDInisight 叢集設定 Hive 原則](hdinsight-domain-joined-run-hive.md)。</span><span class="sxs-lookup"><span data-stu-id="32eca-151">For configuring Hive policies and run Hive queries, see [Configure Hive policies for Domain-joined HDInsight clusters](hdinsight-domain-joined-run-hive.md).</span></span>
* <span data-ttu-id="32eca-152">若要在已加入網域的 HDInsight 叢集上使用 SSH 執行 Hive 查詢，請參閱[搭配 HDInsight 使用 SSH](hdinsight-hadoop-linux-use-ssh-unix.md#domainjoined)。</span><span class="sxs-lookup"><span data-stu-id="32eca-152">For running Hive queries using SSH on Domain-joined HDInsight clusters, see [Use SSH with HDInsight](hdinsight-hadoop-linux-use-ssh-unix.md#domainjoined).</span></span>
