---
title: "Azure HDInsight 上的 R 伺服器簡介 | Microsoft Docs"
description: "了解如何使用 HDInsight 上的 R 伺服器來建立適用於巨量資料分析的應用程式。"
services: hdinsight
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: 6dc21bf5-4429-435f-a0fb-eea856e0ea96
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 06/19/2017
ms.author: bradsev
ms.openlocfilehash: c88bf04f904d6784b882f524ac8737ca70003c91
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/29/2017
---
#<a name="introduction-to-r-server-and-open-source-r-capabilities-on-hdinsight"></a><span data-ttu-id="6e8fe-103">HDInsight 上的 R 伺服器與開放原始碼 R 功能簡介</span><span class="sxs-lookup"><span data-stu-id="6e8fe-103">Introduction to R Server and open-source R capabilities on HDInsight</span></span>

<span data-ttu-id="6e8fe-104">在 Azure 中建立 HDInsight 叢集時，可選擇 Microsoft R 伺服器作為部署選項。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-104">Microsoft R Server is available as a deployment option when you create HDInsight clusters in Azure.</span></span> <span data-ttu-id="6e8fe-105">這項新功能可讓資料科學家、統計學家以及 R 程式設計人員隨其所需存取 HDInsight 上可調整大小的分散式分析方法。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-105">This new capability provides data scientists, statisticians, and R programmers with on-demand access to scalable, distributed methods of analytics on HDInsight.</span></span>

<span data-ttu-id="6e8fe-106">您可以根據手邊的專案和工作調整叢集大小，並於不再需要時將它們終止。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-106">Clusters can be sized appropriately to the projects and tasks at hand and then torn down when they're no longer needed.</span></span> <span data-ttu-id="6e8fe-107">因為這些叢集屬於 Azure HDInsight 的一部分，所以具備企業級全年無休支援、99.9% 執行時間的 SLA，同時具備與 Azure 生態系統中其他元件整合的彈性。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-107">Since they're part of Azure HDInsight, these clusters come with enterprise-level 24/7 support, an SLA of 99.9% up-time, and the ability to integrate with other components in the Azure ecosystem.</span></span>

<span data-ttu-id="6e8fe-108">HDInsight 上的 R 伺服器所提供的最新功能，適用於幾乎任何大小的資料集上進行之以 R 為基礎的分析，且不論資料集是載入到 Azure Blob 或 Data Lake 儲存體。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-108">R Server on HDInsight provides the latest capabilities for R-based analytics on datasets of virtually any size, loaded to either Azure Blob or Data Lake storage.</span></span> <span data-ttu-id="6e8fe-109">R 伺服器是根據開放原始碼 R 所建置，因此您建置的 R 型應用程式可以利用 8000 多個開放原始碼 R 套件中的任何一個。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-109">Since R Server is built on open source R, the R-based applications you build can leverage any of the 8000+ open source R packages.</span></span> <span data-ttu-id="6e8fe-110">ScaleR 中的常式與 R 伺服器中包含的 Microsoft 巨量資料分析套件亦可用。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-110">The routines in ScaleR, Microsoft’s big data analytics package included with R Server, are also available.</span></span>

<span data-ttu-id="6e8fe-111">叢集的邊緣節點提供便利的地方，以便連線到叢集以及執行 R 指令碼。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-111">The edge node of a cluster provides a convenient place to connect to the cluster and to run your R scripts.</span></span> <span data-ttu-id="6e8fe-112">有了邊緣節點之後，即可選擇跨邊緣節點伺服器的核心，執行 ScaleR 的平行分散式函數。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-112">With an edge node, you have the option of running the parallelized distributed functions of ScaleR across the cores of the edge node server.</span></span> <span data-ttu-id="6e8fe-113">您也可以使用 ScaleR 的 Hadoop Map Reduce 或 Spark 計算內容，跨越叢集的節點來執行這些函數。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-113">You can also run them across the nodes of the cluster by using ScaleR’s Hadoop Map Reduce or Spark compute contexts.</span></span>

<span data-ttu-id="6e8fe-114">可以下載分析所產生的模型或預測，以便在內部部署使用。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-114">The models or predictions that result from analyses can be downloaded for use on-premises.</span></span> <span data-ttu-id="6e8fe-115">它們也可以在 Azure 中的其他地方實際運作，特別是透過 [Azure Machine Learning Studio](http://studio.azureml.net) [Web 服務](../machine-learning/machine-learning-publish-a-machine-learning-web-service.md)。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-115">They can also be operationalized elsewhere in Azure, in particular through [Azure Machine Learning Studio](http://studio.azureml.net) [web service](../machine-learning/machine-learning-publish-a-machine-learning-web-service.md).</span></span>

## <a name="get-started-with-r-on-hdinsight"></a><span data-ttu-id="6e8fe-116">開始使用 HDInsight 上的 R</span><span class="sxs-lookup"><span data-stu-id="6e8fe-116">Get started with R on HDInsight</span></span>
<span data-ttu-id="6e8fe-117">若要在 HDInsight 叢集中包含 R 伺服器，您必須在使用 Azure 入口網站建立 HDInsight 叢集的時候選取 R 伺服器叢集類型。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-117">To include R Server in an HDInsight cluster, you must select the R Server cluster type when creating an HDInsight cluster using the Azure portal.</span></span> <span data-ttu-id="6e8fe-118">R 伺服器叢集類型包括在叢集資料節點上的 R 伺服器，以及在邊緣節點上的 R 伺服器，可當作以 R 伺服器為基礎之分析的登陸區域。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-118">The R Server cluster type includes R Server on the data nodes of the cluster and on an edge node, which serves as a landing zone for R Server-based analytics.</span></span> <span data-ttu-id="6e8fe-119">請參閱[開始使用 HDInsight 上的 R 伺服器](hdinsight-hadoop-r-server-get-started.md)，以了解有關如何建立叢集的逐步解說。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-119">See [Getting Started with R Server on HDInsight](hdinsight-hadoop-r-server-get-started.md) for a walkthrough on how to create the cluster.</span></span>

## <a name="learn-about-data-storage-options"></a><span data-ttu-id="6e8fe-120">了解資料儲存體選項</span><span class="sxs-lookup"><span data-stu-id="6e8fe-120">Learn about data storage options</span></span>
<span data-ttu-id="6e8fe-121">HDInsight 叢集 HDFS 檔案系統的預設儲存體可以與 Azure 儲存體帳戶或 Azure Data Lake Store 關聯。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-121">Default storage for the HDFS file system of HDInsight clusters can be associated with either an Azure Storage account or an Azure Data Lake store.</span></span> <span data-ttu-id="6e8fe-122">此關聯可確保在分析期間，上傳至叢集儲存體的任何資料皆保有永續性。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-122">This association ensures that whatever data is uploaded to the cluster storage during analysis is made persistent.</span></span> <span data-ttu-id="6e8fe-123">有各種工具可用於處理將資料傳輸到您所選儲存體選項的作業，包括儲存體帳戶的入口網站型上傳工具，以及 [AzCopy](../storage/common/storage-use-azcopy.md) 公用程式。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-123">There are various tools for handling the data transfer to the storage option that you select, including the portal-based upload facility of the storage account and the [AzCopy](../storage/common/storage-use-azcopy.md) utility.</span></span>

<span data-ttu-id="6e8fe-124">不論使用中的儲存體選項為何，您都可以選擇在叢集佈建程序期間，新增其他 Blob 和 Data Lake 儲存體的存取權。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-124">You have the option of adding access to additional Blob and Data lake stores during the cluster provisioning process regardless of the primary storage option in use.</span></span> <span data-ttu-id="6e8fe-125">如需有關新增其他帳戶存取權的詳細資訊，請參閱[開始使用 HDInsight 上的 R 伺服器](https://docs.microsoft.com/azure/hdinsight/hdinsight-hadoop-r-server-get-started)。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-125">See [Getting started with R Server on HDInsight](https://docs.microsoft.com/azure/hdinsight/hdinsight-hadoop-r-server-get-started) for information on adding access to additional accounts.</span></span> <span data-ttu-id="6e8fe-126">若要深入了解如何使用多個儲存體帳戶，請參閱補充性[適用於 HDInsight 上 R 伺服器的 Azure 儲存體選項](https://docs.microsoft.com/azure/hdinsight/hdinsight-hadoop-r-server-storage)文章。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-126">See the supplementary [Azure Storage options for R Server on HDInsight](https://docs.microsoft.com/azure/hdinsight/hdinsight-hadoop-r-server-storage) article to learn more about using multiple storage accounts.</span></span>

<span data-ttu-id="6e8fe-127">您也可以將 [Azure 檔案](../storage/files/storage-how-to-use-files-linux.md)作為在邊緣節點上使用的儲存體選項。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-127">You can also use [Azure Files](../storage/files/storage-how-to-use-files-linux.md) as a storage option for use on the edge node.</span></span> <span data-ttu-id="6e8fe-128">Azure 檔案可讓您將建立於 Azure 儲存體的檔案共用掛接至 Linux 檔案系統。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-128">Azure Files enables you to mount a file share that was created in Azure Storage to the Linux file system.</span></span> <span data-ttu-id="6e8fe-129">如需適用於 HDInsight 叢集上 R 伺服器的這些資料儲存體選項詳細資訊，請參閱[適用於 HDInsight 叢集上的 R 伺服器的 Azure 儲存體選項](hdinsight-hadoop-r-server-storage.md)。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-129">For more information about these data storage options for R Server on HDInsight cluster, see [Azure Storage options for R Server on HDInsight clusters](hdinsight-hadoop-r-server-storage.md).</span></span>

## <a name="access-r-server-on-the-cluster"></a><span data-ttu-id="6e8fe-130">存取叢集上的 R 伺服器</span><span class="sxs-lookup"><span data-stu-id="6e8fe-130">Access R Server on the cluster</span></span>
<span data-ttu-id="6e8fe-131">您可以使用瀏覽器連線到邊緣節點上的 R 伺服器，但前提是您必須已經在佈建程序期間選擇包括 RStudio Server。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-131">You can connect to R Server on the edge node using a browser, provided you’ve chosen to include RStudio Server during the provisioning process.</span></span> <span data-ttu-id="6e8fe-132">若未在叢集佈建期間安裝它，您可以稍後新增它。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-132">If you did not install it when provisioning the cluster, you can add it later.</span></span> <span data-ttu-id="6e8fe-133">如需在建立叢集之後安裝 RStudio Server 的相關資訊，請參閱[在 HDInsight 叢集上安裝 RStudio Server](hdinsight-hadoop-r-server-install-r-studio.md)。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-133">For information about installing RStudio Server after a cluster is created, see [Installing RStudio Server on HDInsight clusters](hdinsight-hadoop-r-server-install-r-studio.md).</span></span> <span data-ttu-id="6e8fe-134">您也可以使用 SSH/PuTTY 來存取 R 主控台，以連線到 R 伺服器。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-134">You can also connect to the R Server by using SSH/PuTTY to access the R console.</span></span> 

## <a name="develop-and-run-r-scripts"></a><span data-ttu-id="6e8fe-135">開發和執行 R 指令碼</span><span class="sxs-lookup"><span data-stu-id="6e8fe-135">Develop and run R scripts</span></span>
<span data-ttu-id="6e8fe-136">您所建立與執行的 R 指令碼，可以任意運用 8000 多種開放原始碼 R 套件，以及 ScaleR 程式庫中的平行與分散式常式。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-136">The R scripts you create and run can use any of the 8000+ open source R packages in addition to the parallelized and distributed routines available in the ScaleR library.</span></span> <span data-ttu-id="6e8fe-137">一般而言，以 R 伺服器在邊緣節點上執行的指令碼會在該節點上的 R 解譯器內執行。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-137">In general, a script that is run with R Server on the edge node runs within the R interpreter on that node.</span></span> <span data-ttu-id="6e8fe-138">但是必須以設定為 Hadoop Map Reduce (RxHadoopMR) 或 Spark (RxSpark) 之計算內容呼叫 ScaleR 函數的那些步驟除外。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-138">The exceptions are those steps that need to call a ScaleR function with a compute context that is set to Hadoop Map Reduce (RxHadoopMR) or Spark (RxSpark).</span></span> <span data-ttu-id="6e8fe-139">在此情況中，函數會以分散方式，跨越與參考資料相關聯之叢集的那些資料 (工作) 節點執行。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-139">In this case, the function runs in a distributed fashion across those data (task) nodes of the cluster that are associated with the data referenced.</span></span> <span data-ttu-id="6e8fe-140">如需不同計算內容選項的詳細資訊，請參閱[適用於 HDInsight 上 R 伺服器的計算內容選項](hdinsight-hadoop-r-server-compute-contexts.md)。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-140">For more information about the different compute context options, see [Compute context options for R Server on HDInsight](hdinsight-hadoop-r-server-compute-contexts.md).</span></span>

## <a name="operationalize-a-model"></a><span data-ttu-id="6e8fe-141">模型運作</span><span class="sxs-lookup"><span data-stu-id="6e8fe-141">Operationalize a model</span></span>
<span data-ttu-id="6e8fe-142">完成資料模型化時，可以在 Azure 中或內部部署中運作模型，以為新的資料進行預測。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-142">When your data modeling is complete, you can operationalize the model to make predictions for new data either from Azure and on-premises.</span></span> <span data-ttu-id="6e8fe-143">這個程序稱為評分。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-143">This process is known as scoring.</span></span> <span data-ttu-id="6e8fe-144">評分可在 HDInsight、Azure Machine Learning 或內部部署中完成。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-144">Scoring can be done in HDInsight, Azure Machine Learning, or on-premises.</span></span>

### <a name="score-in-hdinsight"></a><span data-ttu-id="6e8fe-145">在 HDInsight 中評分</span><span class="sxs-lookup"><span data-stu-id="6e8fe-145">Score in HDInsight</span></span>
<span data-ttu-id="6e8fe-146">若要在 HDInsight 中評分，可以針對已載入至儲存體帳戶的新資料檔案，撰寫可呼叫模型的 R 函數以進行預測。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-146">To score in HDInsight, write an R function that calls your model to make predictions for a new data file that you've loaded to your storage account.</span></span> <span data-ttu-id="6e8fe-147">然後將預測存回儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-147">Then save the predictions back to the storage account.</span></span> <span data-ttu-id="6e8fe-148">您可以視需要在叢集的邊緣節點上執行常式，或使用排程作業來進行。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-148">You can run the routine on-demand on the edge node of your cluster or by using a scheduled job.</span></span>  

### <a name="score-in-azure-machine-learning-aml"></a><span data-ttu-id="6e8fe-149">Azure Machine Learning 中的評分 (AML)</span><span class="sxs-lookup"><span data-stu-id="6e8fe-149">Score in Azure Machine Learning (AML)</span></span>
<span data-ttu-id="6e8fe-150">若要使用 AML Web 服務來評分，請使用 Azure Machine Learning R 套件開放原始碼 (稱為 [AzureML](https://cran.r-project.org/web/packages/AzureML/vignettes/getting_started.html)) 來將您的模型發佈為 Azure Web 服務。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-150">To score using an AML web service, use the open source Azure Machine Learning R package known as [AzureML](https://cran.r-project.org/web/packages/AzureML/vignettes/getting_started.html) to publish your model as an Azure web service.</span></span> <span data-ttu-id="6e8fe-151">為了方便起見，此套件已預先安裝在邊緣節點。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-151">For convenience, this package is pre-installed on the edge node.</span></span> <span data-ttu-id="6e8fe-152">接下來，使用 Machine Learning 中的功能建立 Web 服務的使用者介面，然後呼叫評分所需的 Web 服務。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-152">Next, use the facilities in Machine Learning to create a user interface for the web service, and then call the web service as needed for scoring.</span></span>

<span data-ttu-id="6e8fe-153">如果您選擇這個選項，就必須將所有 ScaleR 模型物件轉換成對等的開放原始碼模型物件，才可搭配 Web 服務使用。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-153">If you choose this option, you need to convert any ScaleR model objects to equivalent open-source model objects for use with the web service.</span></span> <span data-ttu-id="6e8fe-154">針對此轉換，您可以使用 ScaleR 強制型轉函數 (例如，適用於集成模型的 `as.randomForest()`) 來完成。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-154">Use ScaleR coercion functions, such as `as.randomForest()` for ensemble-based models, for this conversion.</span></span>

### <a name="score-on-premises"></a><span data-ttu-id="6e8fe-155">內部部署評分</span><span class="sxs-lookup"><span data-stu-id="6e8fe-155">Score on-premises</span></span>
<span data-ttu-id="6e8fe-156">若要在建立模型之後進行內部部署評分，可以在 R 中將模型序列化，下載它、將它還原序列化，然後使用它進行新資料的評分。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-156">To score on-premises after creating your model, you can serialize the model in R, download it, de-serialize it, and then use it for scoring new data.</span></span> <span data-ttu-id="6e8fe-157">您可以使用上述[在 HDInsight 中評分](#scoring-in-hdinsight)所描述的方法，或使用 [DeployR](https://deployr.revolutionanalytics.com/) 進行新資料的評分。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-157">You can score new data by using the approach described earlier in [Scoring in HDInsight](#scoring-in-hdinsight) or by using [DeployR](https://deployr.revolutionanalytics.com/).</span></span>

## <a name="maintain-the-cluster"></a><span data-ttu-id="6e8fe-158">維護叢集</span><span class="sxs-lookup"><span data-stu-id="6e8fe-158">Maintain the cluster</span></span>
### <a name="install-and-maintain-r-packages"></a><span data-ttu-id="6e8fe-159">安裝及維護 R 套件</span><span class="sxs-lookup"><span data-stu-id="6e8fe-159">Install and maintain R packages</span></span>
<span data-ttu-id="6e8fe-160">由於 R 指令碼大多數的步驟會在邊緣節點上執行，因此在邊緣節點上需要有大多數您所使用的 R 套件。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-160">Most of the R packages that you use are required on the edge node since most steps of your R scripts run there.</span></span> <span data-ttu-id="6e8fe-161">若要在邊緣節點上安裝其他 R 套件，可以在 R 中使用一般 `install.packages()` 方法。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-161">To install additional R packages on the edge node, you can use the usual `install.packages()` method in R.</span></span>

<span data-ttu-id="6e8fe-162">如果您只是在整個叢集中使用來自 ScaleR 程式庫的常式，則通常不需要在資料節點上安裝其他 R 套件。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-162">If you are just using routines from the ScaleR library across the cluster, you do not usually need to install additional R packages on the data nodes.</span></span> <span data-ttu-id="6e8fe-163">但是，您可能需要其他套件，以支援在資料節點上使用 **rxExec** 或 **RxDataStep** 執行。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-163">However, you might need additional packages to support the use of **rxExec** or **RxDataStep** execution on the data nodes.</span></span>

<span data-ttu-id="6e8fe-164">在這些案例中，您可以在建立叢集之後，使用指令碼動作來安裝其他套件。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-164">In these cases, the additional packages can be installed with a script action after you create the cluster.</span></span> <span data-ttu-id="6e8fe-165">如需詳細資訊，請參閱[建立含 R 伺服器的 HDInsight 叢集](hdinsight-hadoop-r-server-get-started.md)。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-165">For more information, see [Creating an HDInsight cluster with R Server](hdinsight-hadoop-r-server-get-started.md).</span></span>   

### <a name="change-hadoop-map-reduce-memory-settings"></a><span data-ttu-id="6e8fe-166">變更 Hadoop Map Reduce 記憶體設定</span><span class="sxs-lookup"><span data-stu-id="6e8fe-166">Change Hadoop Map Reduce memory settings</span></span>
<span data-ttu-id="6e8fe-167">您可以在執行 Map Reduce 作業時，修改叢集以變更 R 伺服器的可用記憶體數目。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-167">A cluster can be modified to change the amount of memory that's available to R Server when it's running a Map Reduce job.</span></span> <span data-ttu-id="6e8fe-168">若要修改叢集，請使用可透過叢集的 Azure 入口網站刀鋒視窗存取的 Apache Ambari UI。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-168">To modify a cluster, use the Apache Ambari UI that's available through the Azure portal blade for your cluster.</span></span> <span data-ttu-id="6e8fe-169">如需如何存取叢集的 Ambari UI 的指示，請參閱[使用 Ambari Web UI 管理 HDInsight 叢集](hdinsight-hadoop-manage-ambari.md)。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-169">For instructions about how to access the Ambari UI for your cluster, see [Manage HDInsight clusters using the Ambari Web UI](hdinsight-hadoop-manage-ambari.md).</span></span>

<span data-ttu-id="6e8fe-170">您也可以在 **RxHadoopMR** 的呼叫中使用 Hadoop 參數，變更 R 伺服器可用的記憶體數目，如下所示：</span><span class="sxs-lookup"><span data-stu-id="6e8fe-170">It's also possible to change the amount of memory that's available to R Server by using Hadoop switches in the call to **RxHadoopMR** as follows:</span></span>

    hadoopSwitches = "-libjars /etc/hadoop/conf -Dmapred.job.map.memory.mb=6656"  

### <a name="scale-your-cluster"></a><span data-ttu-id="6e8fe-171">調整叢集的大小</span><span class="sxs-lookup"><span data-stu-id="6e8fe-171">Scale your cluster</span></span>
<span data-ttu-id="6e8fe-172">您可以透過入口網站，相應增加或相應減少現有的叢集。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-172">An existing cluster can be scaled up or down through the portal.</span></span> <span data-ttu-id="6e8fe-173">藉由調整，您可以取得處理較大型工作所需的額外處理能力，或於叢集閒置時調回處理能力。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-173">By scaling, you can gain the additional capacity that you might need for larger processing tasks, or you can scale back a cluster when it is idle.</span></span> <span data-ttu-id="6e8fe-174">如需如何調整叢集規模的指示，請參閱[管理 HDInsight 叢集](hdinsight-administer-use-portal-linux.md)。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-174">For instructions about how to scale a cluster, see [Manage HDInsight clusters](hdinsight-administer-use-portal-linux.md).</span></span>

### <a name="maintain-the-system"></a><span data-ttu-id="6e8fe-175">維護系統</span><span class="sxs-lookup"><span data-stu-id="6e8fe-175">Maintain the system</span></span>
<span data-ttu-id="6e8fe-176">離峰期間，系統會在 HDInsight 叢集的基底 Linux VM 上執行維護，以套用 OS 修補程式和其他更新。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-176">Maintenance to apply OS patches and other updates is performed on the underlying Linux VMs in an HDInsight cluster during off-hours.</span></span> <span data-ttu-id="6e8fe-177">一般而言，維護作業會在每星期一和星期四上午 3:30 (以 VM 的本地時間為準) 進行。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-177">Typically, maintenance is done at 3:30 AM (based on the local time for the VM) every Monday and Thursday.</span></span> <span data-ttu-id="6e8fe-178">執行更新時，系統會以一次僅影響四分之一以內叢集的方式進行。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-178">Updates are performed in such a way that they don't impact more than a quarter of the cluster at a time.</span></span>  

<span data-ttu-id="6e8fe-179">由於前端節點是備援節點，且並非所有資料節點都會受到影響，因此在這段期間執行的任何工作可能會變慢。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-179">Since the head nodes are redundant and not all data nodes are impacted, any jobs that are running during this time might slow down.</span></span> <span data-ttu-id="6e8fe-180">不過，應該都可執行完成。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-180">They should still run to completion, however.</span></span> <span data-ttu-id="6e8fe-181">除非發生需要重建叢集的嚴重失敗，否則您擁有的任何自訂軟體或本機資料，在這些維護事件中皆會保留。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-181">Any custom software or local data that you have is preserved across these maintenance events unless a catastrophic failure occurs that requires a cluster rebuild.</span></span>

## <a name="learn-about-ide-options-for-r-server-on-an-hdinsight-cluster"></a><span data-ttu-id="6e8fe-182">了解適用於 HDInsight 叢集上 R 伺服器的 IDE 選項</span><span class="sxs-lookup"><span data-stu-id="6e8fe-182">Learn about IDE options for R Server on an HDInsight cluster</span></span>
<span data-ttu-id="6e8fe-183">HDInsight 叢集的 Linux 邊緣節點，是 R 型分析的登陸區域。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-183">The Linux edge node of an HDInsight cluster is the landing zone for R-based analysis.</span></span> <span data-ttu-id="6e8fe-184">HDInsight 的最近幾個版本，提供在邊緣節點上將社群版 [RStudio Server ](https://www.rstudio.com/products/rstudio-server/) \(英文\) 安裝為瀏覽器型 IDE 的預設選項。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-184">Recent versions of HDInsight provide a default option for installing the community version of [RStudio Server](https://www.rstudio.com/products/rstudio-server/) on the edge node as a browser-based IDE.</span></span> <span data-ttu-id="6e8fe-185">比起僅使用 R 主控台，使用 RStudio Server 當作開發及執行 R 指令碼的 IDE 可大幅提升生產力。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-185">Use of RStudio Server as an IDE for the development and execution of R scripts can be considerably more productive than just using the R console.</span></span> <span data-ttu-id="6e8fe-186">如果您選擇不要在建立叢集的時候新增 RStudio Server，而想要稍後再新增，請參閱[在 HDInsight 叢集上安裝 R Studio Server](https://docs.microsoft.com/azure/hdinsight/hdinsight-hadoop-r-server-install-r-studio)。+</span><span class="sxs-lookup"><span data-stu-id="6e8fe-186">If you chose not to add RStudio Server when creating the cluster but would like to add it later, then see [Installing R Studio Server on HDInsight clusters](https://docs.microsoft.com/azure/hdinsight/hdinsight-hadoop-r-server-install-r-studio).+</span></span>

<span data-ttu-id="6e8fe-187">另一個完整 IDE 選項是安裝電腦 IDE 並透過使用遠端 Map Reduce 或 Spark 計算內容，使用它來存取叢集。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-187">Another full IDE option is to install a desktop IDE and use it to access the cluster through use of a remote Map Reduce or Spark compute context.</span></span> <span data-ttu-id="6e8fe-188">選項包括 Microsoft 的 [Visual Studio R 工具](https://www.visualstudio.com/features/rtvs-vs.aspx) (RTVS)、RStudio 與 Walware 的 Eclipse 型 [StatET](http://www.walware.de/goto/statet)。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-188">Options include Microsoft’s [R Tools for Visual Studio](https://www.visualstudio.com/features/rtvs-vs.aspx) (RTVS), RStudio, and Walware’s Eclipse-based [StatET](http://www.walware.de/goto/statet).</span></span>

<span data-ttu-id="6e8fe-189">最後，透過 SSH 或 PuTY 連線，您就可以在 Linux 命令提示字元中輸入 **R** 來存取邊緣節點上的 R 伺服器主控台。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-189">Lastly, you can access the R Server console on the edge node by typing **R** at the Linux command prompt after connecting via SSH or PuTY.</span></span> <span data-ttu-id="6e8fe-190">使用主控台介面時，在另一個視窗中針對 R 指令碼開發執行文字編輯器，並視需要剪下指令碼區段並貼上到 R 主控台中是非常方便的。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-190">When using the console interface, it is convenient to run a text editor for R script development in another window, and cut and paste sections of your script into the R console as needed.</span></span>

## <a name="learn-about-pricing"></a><span data-ttu-id="6e8fe-191">了解價格</span><span class="sxs-lookup"><span data-stu-id="6e8fe-191">Learn about pricing</span></span>
<span data-ttu-id="6e8fe-192">與含 R 伺服器的 HDInsight 叢集相關聯的費用結構，類似於標準 HDInsight 叢集的費用。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-192">The fees that are associated with an HDInsight cluster with R Server are structured similarly to the fees for the standard HDInsight clusters.</span></span> <span data-ttu-id="6e8fe-193">以各種名稱、資料和邊緣節點的基礎 VM 大小為基準，再加上彈性工時加費。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-193">They are based on the sizing of the underlying VMs across the name, data, and edge nodes, with the addition of a core-hour uplift.</span></span> <span data-ttu-id="6e8fe-194">如需 HDInsight 價格及 30 天免費試用的詳細資訊，請參閱 [HDInsight 定價](https://azure.microsoft.com/pricing/details/hdinsight/)。</span><span class="sxs-lookup"><span data-stu-id="6e8fe-194">For more information about HDInsight pricing, and the availability of a 30-day free trial, see [HDInsight pricing](https://azure.microsoft.com/pricing/details/hdinsight/).</span></span>

## <a name="next-steps"></a><span data-ttu-id="6e8fe-195">後續步驟</span><span class="sxs-lookup"><span data-stu-id="6e8fe-195">Next steps</span></span>
<span data-ttu-id="6e8fe-196">若要深入了解如何搭配 HDInsight 叢集使用 R 伺服器，請參閱下列主題：</span><span class="sxs-lookup"><span data-stu-id="6e8fe-196">To learn more about how to use R Server with HDInsight clusters, see the following topics:</span></span>

* [<span data-ttu-id="6e8fe-197">開始使用 HDInsight 上的 R 伺服器</span><span class="sxs-lookup"><span data-stu-id="6e8fe-197">Getting started with R Server on HDInsight</span></span>](hdinsight-hadoop-r-server-get-started.md)
* [<span data-ttu-id="6e8fe-198">將 RStudio Server 新增至 HDInsight (若未在建立叢集期間安裝)</span><span class="sxs-lookup"><span data-stu-id="6e8fe-198">Add RStudio Server to HDInsight (if not installed during cluster creation)</span></span>](hdinsight-hadoop-r-server-install-r-studio.md)
* [<span data-ttu-id="6e8fe-199">適用於 HDInsight 中 R 伺服器的計算內容選項</span><span class="sxs-lookup"><span data-stu-id="6e8fe-199">Compute context options for R Server on HDInsight</span></span>](hdinsight-hadoop-r-server-compute-contexts.md)
* [<span data-ttu-id="6e8fe-200">適用於 HDInsight R 伺服器的 Azure 儲存體選項</span><span class="sxs-lookup"><span data-stu-id="6e8fe-200">Azure Storage options for R Server on HDInsight</span></span>](hdinsight-hadoop-r-server-storage.md)
