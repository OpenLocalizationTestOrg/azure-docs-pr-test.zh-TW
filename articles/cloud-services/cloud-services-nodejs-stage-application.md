---
title: "aaaStage 雲端服務部署 (Node.js) |Microsoft 文件"
description: "深入了解如何 toodeploy 您的 Azure 應用程式 tooa 預備環境，然後將使用虛擬 IP (VIP) 交換 tooa 生產環境部署。"
services: cloud-services
documentationcenter: nodejs
author: TomArcher
manager: routlaw
editor: 
ms.assetid: d65d26a6-b424-49cd-a88c-7ef46bb112a8
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: nodejs
ms.topic: article
ms.date: 08/17/2017
ms.author: tarcher
ms.openlocfilehash: 0656c84ac444a10f152f441265f85141347bf1fb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="staging-an-application-in-azure"></a><span data-ttu-id="a0a29-103">在 Azure 中預備應用程式</span><span class="sxs-lookup"><span data-stu-id="a0a29-103">Staging an Application in Azure</span></span>
<span data-ttu-id="a0a29-104">已封裝應用程式可以是已部署的 toohello 預備環境中 Azure toobe 移動 toohello 生產環境之前，測試的環境中的 hello 應用程式是在 hello 網際網路上存取。</span><span class="sxs-lookup"><span data-stu-id="a0a29-104">A packaged application can be deployed toohello staging environment in Azure toobe tested before you move it toohello production environment in which hello application is accessible on hello Internet.</span></span> <span data-ttu-id="a0a29-105">預備環境是與 hello 生產環境中，完全相同，不同之處在於您只能存取 hello 分段混亂格式的 url，也就由 Azure 產生的應用程式。</span><span class="sxs-lookup"><span data-stu-id="a0a29-105">The staging environment is exactly like hello production environment, except that you can only access hello staged application with an obfuscated URL that is generated by Azure.</span></span> <span data-ttu-id="a0a29-106">確認您的應用程式正常運作之後，它可以部署的 toohello 實際執行環境所執行的虛擬 IP (VIP) 交換。</span><span class="sxs-lookup"><span data-stu-id="a0a29-106">After you have verified that your application is working correctly, it can be deployed toohello production environment by performing a Virtual IP (VIP) swap.</span></span>

> [!NOTE]
> <span data-ttu-id="a0a29-107">hello 本文章中的步驟僅適用於 toonode 應用程式裝載為 Azure 雲端服務。</span><span class="sxs-lookup"><span data-stu-id="a0a29-107">hello steps in this article only apply toonode applications hosted as an Azure Cloud Service.</span></span>
> 
> 

## <a name="step-1-stage-an-application"></a><span data-ttu-id="a0a29-108">步驟 1：預備應用程式</span><span class="sxs-lookup"><span data-stu-id="a0a29-108">Step 1: Stage an Application</span></span>
<span data-ttu-id="a0a29-109">這項工作涵蓋 toostage 使用應用程式如何 hello **Microsoft Azure PowerShell**。</span><span class="sxs-lookup"><span data-stu-id="a0a29-109">This task covers how toostage an application by using hello **Microsoft Azure PowerShell**.</span></span>

1. <span data-ttu-id="a0a29-110">當發行服務，只需傳遞 hello **-插槽**hello 參數**發行 AzureServiceProject** cmdlet。</span><span class="sxs-lookup"><span data-stu-id="a0a29-110">When publishing a service, simply pass hello **-Slot** parameter to hello **Publish-AzureServiceProject** cmdlet.</span></span>
   
   ```powershell
   Publish-AzureServiceProject -Slot staging
   ```
2. <span data-ttu-id="a0a29-111">登入 toohello [Azure 傳統入口網站]選取**雲端服務**。</span><span class="sxs-lookup"><span data-stu-id="a0a29-111">Log on toohello [Azure classic portal] and select **Cloud Services**.</span></span> <span data-ttu-id="a0a29-112">建立 hello 雲端服務之後，與 hello**臨時**也更新資料行狀態**執行**，按一下 hello 服務名稱。</span><span class="sxs-lookup"><span data-stu-id="a0a29-112">After hello cloud service is created and hello **Staging** column status has been updated too**Running**, click on hello service name.</span></span>
   
   ![portal displaying a running service][cloud-service]
3. <span data-ttu-id="a0a29-114">選取 hello**儀表板**，然後選取**臨時**。</span><span class="sxs-lookup"><span data-stu-id="a0a29-114">Select hello **Dashboard**, and then select **Staging**.</span></span>
   
   ![cloud service dashboard][cloud-service-dashboard]
4. <span data-ttu-id="a0a29-116">請注意在 hello hello 值**網站 URL**項目 toohello 權限。</span><span class="sxs-lookup"><span data-stu-id="a0a29-116">Note hello value in hello **Site URL** entry toohello right.</span></span> <span data-ttu-id="a0a29-117">hello DNS 名稱是 Azure 產生模糊化內部識別碼。</span><span class="sxs-lookup"><span data-stu-id="a0a29-117">hello DNS name is an obfuscated internal ID that Azure generated.</span></span>
   
    ![site url][cloud-service-staging-url]

<span data-ttu-id="a0a29-119">現在您可以確認 hello 應用程式中使用預備網站 URL 的 hello 預備環境的 hello 正常運作。</span><span class="sxs-lookup"><span data-stu-id="a0a29-119">Now you can verify that hello application is working correctly in hello staging environment by using hello staging site URL.</span></span>

## <a name="step-2-upgrade-an-application-in-production-by-swapping-vips"></a><span data-ttu-id="a0a29-120">步驟 2：交換 VIP 將應用程式升級至生產環境</span><span class="sxs-lookup"><span data-stu-id="a0a29-120">Step 2: Upgrade an Application in Production by Swapping VIPs</span></span>
<span data-ttu-id="a0a29-121">驗證的應用程式在預備環境的 hello 升級的版本之後，您可以快速地使其可用於生產交換 hello hello 預備與生產環境的虛擬 Ip (Vip)。</span><span class="sxs-lookup"><span data-stu-id="a0a29-121">After you have verified hello upgraded version of an application in the staging environment, you can quickly make it available in production by swapping hello virtual IPs (VIPs) of hello staging and production environments.</span></span>

> [!NOTE]
> <span data-ttu-id="a0a29-122">這個步驟假設您有已部署應用程式 tooproduction 和設置的 hello 升級的版本的應用程式。</span><span class="sxs-lookup"><span data-stu-id="a0a29-122">This step assumes that you have already deployed an application tooproduction and staged hello upgraded version of the application.</span></span>
> 
> 

1. <span data-ttu-id="a0a29-123">登入 hello [Azure 傳統入口網站]，按一下 **雲端服務**，然後選取 hello 服務名稱。</span><span class="sxs-lookup"><span data-stu-id="a0a29-123">Log into hello [Azure classic portal], click **Cloud Services** and then select hello service name.</span></span>
2. <span data-ttu-id="a0a29-124">從 hello**儀表板**，選取**臨時**，然後按一下**交換**hello hello 頁底端。</span><span class="sxs-lookup"><span data-stu-id="a0a29-124">From hello **Dashboard**, select **Staging**, and then click **Swap** at hello bottom of hello page.</span></span> <span data-ttu-id="a0a29-125">這會開啟 hello VIP 交換對話方塊。</span><span class="sxs-lookup"><span data-stu-id="a0a29-125">This opens hello VIP Swap dialog.</span></span>
   
   ![vip swap dialog][vip-swap-dialog]
3. <span data-ttu-id="a0a29-127">檢閱 hello 資訊，然後按一下**確定**。</span><span class="sxs-lookup"><span data-stu-id="a0a29-127">Review hello information, and then click **OK**.</span></span> <span data-ttu-id="a0a29-128">兩個部署的 hello 開始更新預備部署交換器 tooproduction 和 hello 生產部署交換器 toostaging hello 做。</span><span class="sxs-lookup"><span data-stu-id="a0a29-128">hello two deployments begin updating as hello staging deployment switches tooproduction and hello production deployment switches toostaging.</span></span>

<span data-ttu-id="a0a29-129">您已成功暫置部署，而且升級生產環境部署在預備環境中的 hello 部署交換 Vip。</span><span class="sxs-lookup"><span data-stu-id="a0a29-129">You have successfully staged a deployment and upgraded a production deployment by swapping VIPs with hello deployment in staging.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="a0a29-130">其他資源</span><span class="sxs-lookup"><span data-stu-id="a0a29-130">Additional Resources</span></span>
* <span data-ttu-id="a0a29-131">[如何在 Azure 中的交換 Vip 的服務升級 tooProduction tooDeploy]</span><span class="sxs-lookup"><span data-stu-id="a0a29-131">[How tooDeploy a Service Upgrade tooProduction by Swapping VIPs in Azure]</span></span>

[Azure 傳統入口網站]: http://manage.windowsazure.com
[cloud-service]: ./media/cloud-services-nodejs-stage-application/staging-cloud-service-running.png
[cloud-service-dashboard]: ./media/cloud-services-nodejs-stage-application/cloud-service-dashboard-staging.png
[cloud-service-staging-url]: ./media/cloud-services-nodejs-stage-application/cloud-service-staging-url.png
[vip-swap-dialog]: ./media/cloud-services-nodejs-stage-application/vip-swap-dialog.png
[如何在 Azure 中的交換 Vip 的服務升級 tooProduction tooDeploy]: cloud-services-how-to-manage.md#how-to-swap-deployments-to-promote-a-staged-deployment-to-production
