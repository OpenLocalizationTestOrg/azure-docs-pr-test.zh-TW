---
title: "aaaUnderstand Azure AD 應用程式 Proxy 連接器 |Microsoft 文件"
description: "涵蓋有關 Azure AD 應用程式 Proxy 連接器 hello 基本概念。"
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: 294cb26803ef7cf8be9f3af0678d6d2e64f6cc14
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="understand-azure-ad-application-proxy-connectors"></a><span data-ttu-id="80956-103">了解 Azure AD 應用程式 Proxy 連接器</span><span class="sxs-lookup"><span data-stu-id="80956-103">Understand Azure AD Application Proxy connectors</span></span>

<span data-ttu-id="80956-104">連接器是讓 Azure AD 應用程式 Proxy 運作的關鍵。</span><span class="sxs-lookup"><span data-stu-id="80956-104">Connectors are what make Azure AD Application Proxy possible.</span></span> <span data-ttu-id="80956-105">它們是簡單且容易 toodeploy 和維護和進階功能強大。</span><span class="sxs-lookup"><span data-stu-id="80956-105">They are simple, easy toodeploy and maintain, and super powerful.</span></span> <span data-ttu-id="80956-106">本文將告訴您哪些連接器，其運作方式以及一些建議 toooptimize 您的部署。</span><span class="sxs-lookup"><span data-stu-id="80956-106">This article discusses what connectors are, how they work, and some suggestions for how toooptimize your deployment.</span></span> 

## <a name="what-is-an-application-proxy-connector"></a><span data-ttu-id="80956-107">什麼是應用程式 Proxy 連接器</span><span class="sxs-lookup"><span data-stu-id="80956-107">What is an Application Proxy connector</span></span>

<span data-ttu-id="80956-108">連接器是坐在內部部署，並促進 hello 輸出連線 toohello 應用程式 Proxy 服務的輕量級代理程式。</span><span class="sxs-lookup"><span data-stu-id="80956-108">Connectors are lightweight agents that sit on-premises and facilitate hello outbound connection toohello Application Proxy service.</span></span> <span data-ttu-id="80956-109">必須有存取 toohello 後端應用程式的 Windows 伺服器上安裝連接器。</span><span class="sxs-lookup"><span data-stu-id="80956-109">Connectors must be installed on a Windows Server that has access toohello backend application.</span></span> <span data-ttu-id="80956-110">您可以將連接器組織成與處理流量 toospecific 應用程式的每個群組的連接器群組。</span><span class="sxs-lookup"><span data-stu-id="80956-110">You can organize connectors into connector groups, with each group handling traffic toospecific applications.</span></span> <span data-ttu-id="80956-111">連接器的負載平衡，並可協助您的網路結構 toooptimize。</span><span class="sxs-lookup"><span data-stu-id="80956-111">Connectors load-balance automatically, and can help toooptimize your network structure.</span></span> 

## <a name="requirements-and-deployment"></a><span data-ttu-id="80956-112">需求和部署</span><span class="sxs-lookup"><span data-stu-id="80956-112">Requirements and deployment</span></span>

<span data-ttu-id="80956-113">toodeploy 應用程式 Proxy 成功，您必須至少一個連接器，但我們建議下列兩個或多個大於提供恢復功能。</span><span class="sxs-lookup"><span data-stu-id="80956-113">toodeploy Application Proxy successfully, you need at least one connector, but we recommend two or more for greater resiliency.</span></span> <span data-ttu-id="80956-114">Windows Server 2012 R2 或 2016年的機器上安裝 hello 連接器。</span><span class="sxs-lookup"><span data-stu-id="80956-114">Install hello connector on a Windows Server 2012 R2 or 2016 machine.</span></span> <span data-ttu-id="80956-115">hello 連接器需要 toobe 無法 toocommunicate hello 應用程式 Proxy 服務以及您所發行的 hello 在內部部署應用程式。</span><span class="sxs-lookup"><span data-stu-id="80956-115">hello connector needs toobe able toocommunicate with hello Application Proxy service as well as hello on-premises applications that you publish.</span></span> 

<span data-ttu-id="80956-116">如需 hello hello 連接器伺服器的網路需求的詳細資訊，請參閱[開始使用應用程式 Proxy 並安裝連接器](active-directory-application-proxy-enable.md)。</span><span class="sxs-lookup"><span data-stu-id="80956-116">For more information about hello network requirements for hello connector server, see [Get started with Application Proxy and install a connector](active-directory-application-proxy-enable.md).</span></span>

## <a name="maintenance"></a><span data-ttu-id="80956-117">維護 </span><span class="sxs-lookup"><span data-stu-id="80956-117">Maintenance</span></span>
<span data-ttu-id="80956-118">hello 連接器與 hello 服務處理的所有 hello 高可用性工作。</span><span class="sxs-lookup"><span data-stu-id="80956-118">hello connectors and hello service take care of all hello high availability tasks.</span></span> <span data-ttu-id="80956-119">它們可以動態新增或移除。</span><span class="sxs-lookup"><span data-stu-id="80956-119">They can be added or removed dynamically.</span></span> <span data-ttu-id="80956-120">新要求到達每次它會路由的 tooone hello 連接器的目前可用。</span><span class="sxs-lookup"><span data-stu-id="80956-120">Each time a new request arrives it is routed tooone of hello connectors that is currently available.</span></span> <span data-ttu-id="80956-121">如果連接器暫時無法使用，它不會回應 toothis 流量。</span><span class="sxs-lookup"><span data-stu-id="80956-121">If a connector is temporarily not available, it doesn't respond toothis traffic.</span></span>

<span data-ttu-id="80956-122">hello 連接器是無狀態，與 hello 電腦上有任何組態資料。</span><span class="sxs-lookup"><span data-stu-id="80956-122">hello connectors are stateless and have no configuration data on hello machine.</span></span> <span data-ttu-id="80956-123">hello 他們儲存的資料是 hello 設定連接 hello 服務和其驗證憑證。</span><span class="sxs-lookup"><span data-stu-id="80956-123">hello only data they store is hello settings for connecting hello service and its authentication certificate.</span></span> <span data-ttu-id="80956-124">當他們連線 toohello 服務時，它們會提取 hello 所需的所有設定資料，而且每隔幾分鐘的時間重新整理。</span><span class="sxs-lookup"><span data-stu-id="80956-124">When they connect toohello service, they pull all hello required configuration data and refresh it every couple of minutes.</span></span>

<span data-ttu-id="80956-125">連接器也輪詢是否 hello 伺服器 toofind hello 連接器較新版本。</span><span class="sxs-lookup"><span data-stu-id="80956-125">Connectors also poll hello server toofind out whether there is a newer version of hello connector.</span></span> <span data-ttu-id="80956-126">如果找到，hello 連接器自行更新。</span><span class="sxs-lookup"><span data-stu-id="80956-126">If one is found, hello connectors update themselves.</span></span>

<span data-ttu-id="80956-127">您可以監視您的連接器，從 hello 機器，執行使用 hello 事件記錄檔和效能計數器。</span><span class="sxs-lookup"><span data-stu-id="80956-127">You can monitor your connectors from hello machine they are running on, using either hello event log and performance counters.</span></span> <span data-ttu-id="80956-128">或者，您可以檢視其狀態從 hello 應用程式 Proxy hello Azure 入口網站頁面：</span><span class="sxs-lookup"><span data-stu-id="80956-128">Or you can view their status from hello Application Proxy page of hello Azure portal:</span></span>

 ![Azure AD 應用程式 Proxy 連接器](./media/application-proxy-understand-connectors/app-proxy-connectors.png)

<span data-ttu-id="80956-130">您不需要 toomanually 刪除未使用的連接器。</span><span class="sxs-lookup"><span data-stu-id="80956-130">You don't have toomanually delete connectors that are unused.</span></span> <span data-ttu-id="80956-131">當執行連接器時，它會保持有效在連接 toohello 服務。</span><span class="sxs-lookup"><span data-stu-id="80956-131">When a connector is running, it remains active as it connects toohello service.</span></span> <span data-ttu-id="80956-132">未使用的連接器會標記為_非作用中_，且將在未作用 10 天之後移除。</span><span class="sxs-lookup"><span data-stu-id="80956-132">Unused connectors are tagged as _inactive_ and are removed after 10 days of inactivity.</span></span> <span data-ttu-id="80956-133">如果您想 toouninstall 連接器，不過，hello 連接器服務和 hello Updater 服務從伺服器解除安裝 hello。</span><span class="sxs-lookup"><span data-stu-id="80956-133">If you do want toouninstall a connector, though, uninstall both hello Connector service and hello Updater service from hello server.</span></span> <span data-ttu-id="80956-134">重新啟動電腦 toofully 移除 hello 服務。</span><span class="sxs-lookup"><span data-stu-id="80956-134">Restart your computer toofully remove hello service.</span></span>

## <a name="automatic-updates"></a><span data-ttu-id="80956-135">自動更新</span><span class="sxs-lookup"><span data-stu-id="80956-135">Automatic updates</span></span>

<span data-ttu-id="80956-136">Azure AD 提供的所有部署的 hello 連接器的自動更新。</span><span class="sxs-lookup"><span data-stu-id="80956-136">Azure AD provides automatic updates for all hello connectors that you deploy.</span></span> <span data-ttu-id="80956-137">只要 hello 應用程式 Proxy 連接器更新程式服務正在執行，會自動更新的連接器。</span><span class="sxs-lookup"><span data-stu-id="80956-137">As long as hello Application Proxy Connector Updater service is running, your connectors update automatically.</span></span> <span data-ttu-id="80956-138">如果您沒有看到 hello 連接器更新程式服務在您的伺服器上，您需要[重新安裝您的連接器](active-directory-application-proxy-enable.md)tooget 任何更新。</span><span class="sxs-lookup"><span data-stu-id="80956-138">If you don’t see hello Connector Updater service on your server, you need too[reinstall your connector](active-directory-application-proxy-enable.md) tooget any updates.</span></span> 

<span data-ttu-id="80956-139">如果您不想 toowait 自動更新 toocome tooyour 連接器，您可以執行手動升級。</span><span class="sxs-lookup"><span data-stu-id="80956-139">If you don't want toowait for an automatic update toocome tooyour connector, you can perform a manual upgrade.</span></span> <span data-ttu-id="80956-140">移 toohello[連接器的下載頁面](https://download.msappproxy.net/subscription/d3c8b69d-6bf7-42be-a529-3fe9c2e70c90/connector/download)hello 伺服器上，您的連接器並選取**下載**。</span><span class="sxs-lookup"><span data-stu-id="80956-140">Go toohello [connector download page](https://download.msappproxy.net/subscription/d3c8b69d-6bf7-42be-a529-3fe9c2e70c90/connector/download) on hello server where your connector is located and select **Download**.</span></span> <span data-ttu-id="80956-141">此程序就會啟動 hello 本機連接器的升級。</span><span class="sxs-lookup"><span data-stu-id="80956-141">This process kicks off an upgrade for hello local connector.</span></span> 

<span data-ttu-id="80956-142">為租用戶與多個連接器 hello 自動更新目標一個連接器，在您的環境中的每個群組 tooprevent 停機時間的時間。</span><span class="sxs-lookup"><span data-stu-id="80956-142">For tenants with multiple connectors, hello automatic updates target one connector at a time in each group tooprevent downtime in your environment.</span></span> 

<span data-ttu-id="80956-143">如果是下列情況，連接器更新時可能會遭遇停機︰</span><span class="sxs-lookup"><span data-stu-id="80956-143">You may experience downtime when your connector updates if:</span></span>  
- <span data-ttu-id="80956-144">您只有一個連接器。</span><span class="sxs-lookup"><span data-stu-id="80956-144">You only have one connector.</span></span> <span data-ttu-id="80956-145">tooavoid 這個停機時間並提升高可用性，建議您安裝第二個連接器和[建立連接器群組](active-directory-application-proxy-connectors-azure-portal.md)。</span><span class="sxs-lookup"><span data-stu-id="80956-145">tooavoid this downtime and improve high availability, we recommend you install a second connector and [create a connector group](active-directory-application-proxy-connectors-azure-portal.md).</span></span>  
- <span data-ttu-id="80956-146">連接器已交易的 hello 中間 hello 更新開始時。</span><span class="sxs-lookup"><span data-stu-id="80956-146">A connector was in hello middle of a transaction when hello update began.</span></span> <span data-ttu-id="80956-147">雖然遺失 hello 起始交易，則您的瀏覽器自動重試 hello 作業，或您可以重新整理您的頁面。</span><span class="sxs-lookup"><span data-stu-id="80956-147">Although hello initial transaction is lost, your browser should automatically retry hello operation or you can refresh your page.</span></span> <span data-ttu-id="80956-148">重新傳送嗨要求，hello 流量時，路由的 tooa 備份連接器。</span><span class="sxs-lookup"><span data-stu-id="80956-148">When hello request is resent, hello traffic is routed tooa backup connector.</span></span>

## <a name="creating-connector-groups"></a><span data-ttu-id="80956-149">建立連接器群組</span><span class="sxs-lookup"><span data-stu-id="80956-149">Creating connector groups</span></span>

<span data-ttu-id="80956-150">連接器群組可讓您 tooassign 特定連接器 tooserve 特定應用程式。</span><span class="sxs-lookup"><span data-stu-id="80956-150">Connector groups enable you tooassign specific connectors tooserve specific applications.</span></span> <span data-ttu-id="80956-151">您可以的連接器的數字群組在一起，並接著每個應用程式 tooa 將群組指派。</span><span class="sxs-lookup"><span data-stu-id="80956-151">You can group a number of connectors together, and then assign each application tooa group.</span></span> 

<span data-ttu-id="80956-152">連接器群組可讓您更輕鬆 toomanage 大型部署。</span><span class="sxs-lookup"><span data-stu-id="80956-152">Connector groups make it easier toomanage large deployments.</span></span> <span data-ttu-id="80956-153">它們也會改善延遲租用戶的應用程式裝載在不同的區域，因為您可以建立以位置為基礎的連接器群組 tooserve 只有本機應用程式。</span><span class="sxs-lookup"><span data-stu-id="80956-153">They also improve latency for tenants that have applications hosted in different regions, because you can create location-based connector groups tooserve only local applications.</span></span> 

<span data-ttu-id="80956-154">toolearn 進一步了解連接器群組，請參閱[發行應用程式在不同的網路和使用連接器群組的位置](active-directory-application-proxy-connectors-azure-portal.md)。</span><span class="sxs-lookup"><span data-stu-id="80956-154">toolearn more about connector groups, see [Publish applications on separate networks and locations using connector groups](active-directory-application-proxy-connectors-azure-portal.md).</span></span>

## <a name="security-and-networking"></a><span data-ttu-id="80956-155">安全性和網路服務</span><span class="sxs-lookup"><span data-stu-id="80956-155">Security and networking</span></span>

<span data-ttu-id="80956-156">連接器可以安裝在外面 toosend 要求 toohello 應用程式 Proxy 服務的 hello 網路上的任何位置。</span><span class="sxs-lookup"><span data-stu-id="80956-156">Connectors can be installed anywhere on hello network that allows them toosend requests toohello Application Proxy service.</span></span> <span data-ttu-id="80956-157">重要的是該 hello 執行電腦 hello 連接器也有存取 tooyour 應用程式。</span><span class="sxs-lookup"><span data-stu-id="80956-157">What's important is that hello computer running hello connector also has access tooyour apps.</span></span> <span data-ttu-id="80956-158">您可以在您的公司網路內或在 hello 雲端執行的虛擬機器上安裝連接器。</span><span class="sxs-lookup"><span data-stu-id="80956-158">You can install connectors inside of your corporate network or on a virtual machine that runs in hello cloud.</span></span> <span data-ttu-id="80956-159">可以在非軍事區域 (DMZ) 內執行連接器，但並非必要，因為所有流量都是輸出的，因此您的網路都能保持安全。</span><span class="sxs-lookup"><span data-stu-id="80956-159">Connectors can run within a demilitarized zone (DMZ), but it's not necessary because all traffic is outbound so your network stays secure.</span></span>

<span data-ttu-id="80956-160">連接器僅會傳送輸出要求。</span><span class="sxs-lookup"><span data-stu-id="80956-160">Connectors only send outbound requests.</span></span> <span data-ttu-id="80956-161">hello 傳出流量會傳送 toohello 應用程式 Proxy 服務和 toohello 發行的應用程式。</span><span class="sxs-lookup"><span data-stu-id="80956-161">hello outbound traffic is sent toohello Application Proxy service and toohello published applications.</span></span> <span data-ttu-id="80956-162">您不需要 tooopen 輸入連接埠，因為流量流這兩種方式，一旦建立工作階段為止。</span><span class="sxs-lookup"><span data-stu-id="80956-162">You don't have tooopen inbound ports because traffic flows both ways once a session is established.</span></span> <span data-ttu-id="80956-163">您尚未 tooset 之間 hello 連接器的負載平衡設定，或透過您的防火牆設定的傳入的存取。</span><span class="sxs-lookup"><span data-stu-id="80956-163">You don't have tooset up load balancing between hello connectors or configure inbound access through your firewalls.</span></span> 

<span data-ttu-id="80956-164">如需設定輸出防火牆規則的詳細資訊，請參閱[使用現有的內部部署 Proxy 伺服器](application-proxy-working-with-proxy-servers.md)。</span><span class="sxs-lookup"><span data-stu-id="80956-164">For more information about configuring outbound firewall rules, see [Work with existing on-premises proxy servers](application-proxy-working-with-proxy-servers.md).</span></span>

<span data-ttu-id="80956-165">使用 hello [Azure AD 應用程式 Proxy 連接器連接埠測試工具](https://aadap-portcheck.connectorporttest.msappproxy.net/)tooverify 連接器可達到 hello 應用程式 Proxy 服務。</span><span class="sxs-lookup"><span data-stu-id="80956-165">Use hello [Azure AD Application Proxy Connector Ports Test Tool](https://aadap-portcheck.connectorporttest.msappproxy.net/) tooverify that your connector can reach hello Application Proxy service.</span></span> <span data-ttu-id="80956-166">最少，請確定 hello 美國中部地區和 hello 區域最接近 tooyou 具有所有綠色的核取記號。</span><span class="sxs-lookup"><span data-stu-id="80956-166">At a minimum, make sure that hello Central US region and hello region closest tooyou have all green checkmarks.</span></span> <span data-ttu-id="80956-167">除此之外，綠色勾選記號越多代表恢復能力越佳。</span><span class="sxs-lookup"><span data-stu-id="80956-167">Beyond that, more green checkmarks means greater resiliency.</span></span> 

## <a name="performance-and-scalability"></a><span data-ttu-id="80956-168">效能和延展性</span><span class="sxs-lookup"><span data-stu-id="80956-168">Performance and scalability</span></span>

<span data-ttu-id="80956-169">Hello 應用程式 Proxy 服務的小數位數是透明的但小數位數是連接器的因素。</span><span class="sxs-lookup"><span data-stu-id="80956-169">Scale for hello Application Proxy service is transparent, but scale is a factor for connectors.</span></span> <span data-ttu-id="80956-170">您需要 toohave 足夠連接器 toohandle 尖峰流量。</span><span class="sxs-lookup"><span data-stu-id="80956-170">You need toohave enough connectors toohandle peak traffic.</span></span> <span data-ttu-id="80956-171">不過，您不需要 tooconfigure 負載平衡，因為連接器群組內的所有連接器自動都負載平衡。</span><span class="sxs-lookup"><span data-stu-id="80956-171">However, you don't need tooconfigure load balancing because all connectors within a connector group automatically load balance.</span></span>

<span data-ttu-id="80956-172">接點是無狀態，因為它們不會影響的使用者或工作階段的 hello 數目。</span><span class="sxs-lookup"><span data-stu-id="80956-172">Since connectors are stateless, they are not affected by hello number of users or sessions.</span></span> <span data-ttu-id="80956-173">相反地，其會回應 toohello 要求數目以及其裝載大小。</span><span class="sxs-lookup"><span data-stu-id="80956-173">Instead, they respond toohello number of requests and their payload size.</span></span> <span data-ttu-id="80956-174">以標準 Web 流量而言，一台普通電腦每秒可以處理幾千個要求。</span><span class="sxs-lookup"><span data-stu-id="80956-174">With standard web traffic, an average machine can handle a couple thousand requests per second.</span></span> <span data-ttu-id="80956-175">hello 特定容量取決於 hello 確切的電腦的特性。</span><span class="sxs-lookup"><span data-stu-id="80956-175">hello specific capacity depends on hello exact machine characteristics.</span></span> 

<span data-ttu-id="80956-176">hello 連接器效能受限於 CPU 和網路功能。</span><span class="sxs-lookup"><span data-stu-id="80956-176">hello connector performance is bound by CPU and networking.</span></span> <span data-ttu-id="80956-177">CPU 效能需要 SSL 加密和解密，但網路是重要的 tooget 快速連線 toohello 應用程式，在 Azure 中的 hello 線上服務。</span><span class="sxs-lookup"><span data-stu-id="80956-177">CPU performance is needed for SSL encryption and decryption, while networking is important tooget fast connectivity toohello applications and hello online service in Azure.</span></span>

<span data-ttu-id="80956-178">相反地，連接器發行需要較少的記憶體。</span><span class="sxs-lookup"><span data-stu-id="80956-178">In contrast, memory is less of an issue for connectors.</span></span> <span data-ttu-id="80956-179">hello 線上服務會處理大部分的 hello 處理和所有未經驗證的流量。</span><span class="sxs-lookup"><span data-stu-id="80956-179">hello online service takes care of much of hello processing and all unauthenticated traffic.</span></span> <span data-ttu-id="80956-180">因應 hello 雲端中的所有項目是完成 hello 雲端中。</span><span class="sxs-lookup"><span data-stu-id="80956-180">Everything that can be done in hello cloud is done in hello cloud.</span></span> 

<span data-ttu-id="80956-181">會影響效能的另一個因素是 hello 品質 hello 網路之間 hello 連接器，包括：</span><span class="sxs-lookup"><span data-stu-id="80956-181">Another factor that affects performance is hello quality of hello networking between hello connectors, including:</span></span> 

* <span data-ttu-id="80956-182">**hello 線上服務**： 緩慢或高延遲連線 toohello Azure 影響 hello 連接器效能的應用程式 Proxy 服務。</span><span class="sxs-lookup"><span data-stu-id="80956-182">**hello online service**: Slow or high-latency connections toohello Application Proxy service in Azure influence hello connector performance.</span></span> <span data-ttu-id="80956-183">Hello 獲得最佳效能，請使用 Express Route 連接組織 tooAzure。</span><span class="sxs-lookup"><span data-stu-id="80956-183">For hello best performance, connect your organization tooAzure with Express Route.</span></span> <span data-ttu-id="80956-184">否則，必須確定該連接 tooAzure 會盡可能有效率地處理網路團隊。</span><span class="sxs-lookup"><span data-stu-id="80956-184">Otherwise, have your networking team ensure that connections tooAzure are handled as efficiently as possible.</span></span> 
* <span data-ttu-id="80956-185">**hello 後端應用程式**： 在某些情況下，有其他 hello 連接器與 hello 後端應用程式可能變慢或無法連線之間的 proxy。</span><span class="sxs-lookup"><span data-stu-id="80956-185">**hello backend applications**: In some cases, there are additional proxies between hello connector and hello backend applications that can slow or prevent connections.</span></span> <span data-ttu-id="80956-186">tootroubleshoot 此案例中，開啟瀏覽器從 hello 連接器伺服器，然後再次嘗試 tooaccess hello 應用程式。</span><span class="sxs-lookup"><span data-stu-id="80956-186">tootroubleshoot this scenario, open a browser from hello connector server and try tooaccess hello application.</span></span> <span data-ttu-id="80956-187">如果您在 Azure 中執行 hello 連接器，但 hello 應用程式會在內部部署，hello 體驗可能會使用者的預期。</span><span class="sxs-lookup"><span data-stu-id="80956-187">If you run hello connectors in Azure but hello applications are on-premises, hello experience might not be what your users expect.</span></span>
* <span data-ttu-id="80956-188">**hello 網域控制站**: hello 連接器上執行 SSO 使用 Kerberos 限制委派，如果他們傳送嗨要求 toohello 後端之前，先連絡 hello 網域控制站。</span><span class="sxs-lookup"><span data-stu-id="80956-188">**hello domain controllers**: If hello connectors perform SSO using Kerberos Constrained Delegation, they contact hello domain controllers before sending hello request toohello backend.</span></span> <span data-ttu-id="80956-189">hello 連接器具有的 Kerberos 票證快取，但在忙碌的環境中 hello 回應 hello 網域控制站可能會影響效能。</span><span class="sxs-lookup"><span data-stu-id="80956-189">hello connectors have a cache of Kerberos tickets, but in a busy environment hello responsiveness of hello domain controllers can affect performance.</span></span> <span data-ttu-id="80956-190">在 Azure 中執行、但與內部部署之網域控制器通訊的連接器會更常發生這個問題。</span><span class="sxs-lookup"><span data-stu-id="80956-190">This issue is more common for connectors that run in Azure but communicate with domain controllers that are on-premises.</span></span> 

<span data-ttu-id="80956-191">如需將您網路最佳化的詳細資訊，請參閱[使用 Azure Active Directory 應用程式 Proxy 時的網路拓撲考量](application-proxy-network-topology-considerations.md)。</span><span class="sxs-lookup"><span data-stu-id="80956-191">For more information about optimizing your network, see [Network topology considerations when using Azure Active Directory Application Proxy](application-proxy-network-topology-considerations.md).</span></span>

## <a name="domain-joining"></a><span data-ttu-id="80956-192">加入網域</span><span class="sxs-lookup"><span data-stu-id="80956-192">Domain joining</span></span>

<span data-ttu-id="80956-193">連接器可以在未加入網域的電腦上執行。</span><span class="sxs-lookup"><span data-stu-id="80956-193">Connectors can run on a machine that is not domain-joined.</span></span> <span data-ttu-id="80956-194">不過，如果您想單一登入 (SSO) tooapplications 使用整合式 Windows 驗證 (IWA)，您需要加入網域的電腦。</span><span class="sxs-lookup"><span data-stu-id="80956-194">However, if you want single sign-on (SSO) tooapplications that use Integrated Windows Authentication (IWA), you need a domain-joined machine.</span></span> <span data-ttu-id="80956-195">在此情況下，hello 連接器的電腦必須可以執行的聯結的 tooa 網域[Kerberos](https://web.mit.edu/kerberos)限制委派，代表 hello 的 hello 使用者發行的應用程式。</span><span class="sxs-lookup"><span data-stu-id="80956-195">In this case, hello connector machines must be joined tooa domain that can perform [Kerberos](https://web.mit.edu/kerberos) Constrained Delegation on behalf of hello users for hello published applications.</span></span>

<span data-ttu-id="80956-196">連接器也可以聯結的 toodomains 或有部分信任中或僅限 tooread 網域控制站的樹系。</span><span class="sxs-lookup"><span data-stu-id="80956-196">Connectors can also be joined toodomains or forests that have a partial trust, or tooread-only domain controllers.</span></span>

## <a name="connector-deployments-on-hardened-environments"></a><span data-ttu-id="80956-197">強化環境上的連接器部署</span><span class="sxs-lookup"><span data-stu-id="80956-197">Connector deployments on hardened environments</span></span>

<span data-ttu-id="80956-198">連接器部署通常都直截了當，不需要特殊組態。</span><span class="sxs-lookup"><span data-stu-id="80956-198">Usually, connector deployment is straightforward and requires no special configuration.</span></span> <span data-ttu-id="80956-199">不過，應該考量一些獨特的情況︰</span><span class="sxs-lookup"><span data-stu-id="80956-199">However, there are some unique conditions that should be considered:</span></span>

* <span data-ttu-id="80956-200">限制 hello 輸出流量的組織必須[開啟必要的連接埠](active-directory-application-proxy-enable.md#open-your-ports)。</span><span class="sxs-lookup"><span data-stu-id="80956-200">Organizations that limit hello outbound traffic must [open required ports](active-directory-application-proxy-enable.md#open-your-ports).</span></span>
* <span data-ttu-id="80956-201">與 FIPS 相容的電腦可能會需要的 toochange 其組態 tooallow hello 連接器處理程序 toogenerate 並儲存憑證。</span><span class="sxs-lookup"><span data-stu-id="80956-201">FIPS-compliant machines might be required toochange their configuration tooallow hello connector processes toogenerate and store a certificate.</span></span>
* <span data-ttu-id="80956-202">網路要求該問題 hello 鎖定其環境 hello 程序為基礎的組織有 toomake 確定這兩個連接器服務已啟用的 tooaccess 所有所需的連接埠和 Ip。</span><span class="sxs-lookup"><span data-stu-id="80956-202">Organizations that lock down their environment based on hello processes that issue hello networking requests have toomake sure that both connector services are enabled tooaccess all required ports and IPs.</span></span>
* <span data-ttu-id="80956-203">在某些情況下，輸出的正向 proxy 可能會中斷 hello 雙向的憑證驗證，並導致 hello 通訊 toofail。</span><span class="sxs-lookup"><span data-stu-id="80956-203">In some cases, outbound forward proxies may break hello two-way certificate authentication and cause hello communication toofail.</span></span>

## <a name="connector-authentication"></a><span data-ttu-id="80956-204">連接器驗證</span><span class="sxs-lookup"><span data-stu-id="80956-204">Connector authentication</span></span>

<span data-ttu-id="80956-205">tooprovide 安全的服務，連接器 tooauthenticate 朝 hello 服務，且 hello 服務具有 tooauthenticate 朝 hello 連接器。</span><span class="sxs-lookup"><span data-stu-id="80956-205">tooprovide a secure service, connectors have tooauthenticate toward hello service, and hello service has tooauthenticate toward hello connector.</span></span> <span data-ttu-id="80956-206">進行此驗證 hello 連接器起始 hello 連線時，使用用戶端和伺服器憑證。</span><span class="sxs-lookup"><span data-stu-id="80956-206">This authentication is done using client and server certificates when hello connectors initiate hello connection.</span></span> <span data-ttu-id="80956-207">此方式 hello 系統管理員的使用者名稱和密碼不會儲存在 hello 連接器電腦上。</span><span class="sxs-lookup"><span data-stu-id="80956-207">This way hello administrator’s username and password are not stored on hello connector machine.</span></span>

<span data-ttu-id="80956-208">使用 hello 憑證是特定 toohello 應用程式 Proxy 服務。</span><span class="sxs-lookup"><span data-stu-id="80956-208">hello certificates used are specific toohello Application Proxy service.</span></span> <span data-ttu-id="80956-209">建立 hello 初始註冊期間便會自動更新 hello 連接器每隔幾個月。</span><span class="sxs-lookup"><span data-stu-id="80956-209">They get created during hello initial registration and are automatically renewed by hello connectors every couple of months.</span></span> 

<span data-ttu-id="80956-210">如果未連接連接器 toohello 幾個月，其憑證的服務可能已過時。</span><span class="sxs-lookup"><span data-stu-id="80956-210">If a connector is not connected toohello service for several months, its certificates may be outdated.</span></span> <span data-ttu-id="80956-211">在此情況下，解除安裝再重新安裝 hello 連接器 tootrigger 註冊。</span><span class="sxs-lookup"><span data-stu-id="80956-211">In this case, uninstall and reinstall hello connector tootrigger registration.</span></span> <span data-ttu-id="80956-212">您可以執行下列 PowerShell 命令的 hello:</span><span class="sxs-lookup"><span data-stu-id="80956-212">You can run hello following PowerShell commands:</span></span>

```
Import-module AppProxyPSModule
Register-AppProxyConnector
```

## <a name="under-hello-hood"></a><span data-ttu-id="80956-213">Hello 幕後</span><span class="sxs-lookup"><span data-stu-id="80956-213">Under hello hood</span></span>

<span data-ttu-id="80956-214">連接器根據 Windows Server Web 應用程式 Proxy，因此大部分的 hello 相同的管理工具，包括 Windows 事件記錄檔</span><span class="sxs-lookup"><span data-stu-id="80956-214">Connectors are based on Windows Server Web Application Proxy, so they have most of hello same management tools including Windows Event Logs</span></span>

 ![管理事件記錄檔以 hello 事件檢視器](./media/application-proxy-understand-connectors/event-view-window.png)

<span data-ttu-id="80956-216">和 Windows 效能計數器管理事件記錄。</span><span class="sxs-lookup"><span data-stu-id="80956-216">and Windows performance counters.</span></span> 

 ![加入以 hello 效能監視器計數器 toohello 連接器](./media/application-proxy-understand-connectors/performance-monitor.png)

<span data-ttu-id="80956-218">hello 連接器有系統管理員和工作階段記錄檔。</span><span class="sxs-lookup"><span data-stu-id="80956-218">hello connectors have both admin and session logs.</span></span> <span data-ttu-id="80956-219">hello 系統管理記錄檔包含索引鍵的事件和其錯誤。</span><span class="sxs-lookup"><span data-stu-id="80956-219">hello admin logs include key events and their errors.</span></span> <span data-ttu-id="80956-220">hello 工作階段記錄檔包含所有的 hello 交易，而且其處理詳細資料。</span><span class="sxs-lookup"><span data-stu-id="80956-220">hello session logs include all hello transactions and their processing details.</span></span> 

<span data-ttu-id="80956-221">toosee hello 記錄，到 toohello 事件檢視器中，開啟 hello**檢視**功能表上，並啟用**顯示分析與偵錯記錄檔**。</span><span class="sxs-lookup"><span data-stu-id="80956-221">toosee hello logs, go toohello Event Viewer, open hello **View** menu, and enable **Show analytic and debug logs**.</span></span> <span data-ttu-id="80956-222">然後，讓他們 toostart 收集事件。</span><span class="sxs-lookup"><span data-stu-id="80956-222">Then, enable them toostart collecting events.</span></span> <span data-ttu-id="80956-223">這些記錄不會出現在 Windows Server 2012 R2 中的 Web 應用程式 Proxy hello 連接器會根據較新版本。</span><span class="sxs-lookup"><span data-stu-id="80956-223">These logs do not appear in Web Application Proxy in Windows Server 2012 R2, as hello connectors are based on a more recent version.</span></span>

<span data-ttu-id="80956-224">您可以檢查 hello hello 服務 視窗中的 hello 服務狀態。</span><span class="sxs-lookup"><span data-stu-id="80956-224">You can examine hello state of hello service in hello Services window.</span></span> <span data-ttu-id="80956-225">hello 連接器包含兩個 Windows 服務： hello 實際的連接器，以及 hello 更新程式。</span><span class="sxs-lookup"><span data-stu-id="80956-225">hello connector comprises two Windows Services: hello actual connector, and hello updater.</span></span> <span data-ttu-id="80956-226">兩者都必須執行所有的 hello 時間。</span><span class="sxs-lookup"><span data-stu-id="80956-226">Both of them must run all hello time.</span></span>

 ![AzureAD 服務本機](./media/application-proxy-understand-connectors/aad-connector-services.png)

## <a name="next-steps"></a><span data-ttu-id="80956-228">後續步驟</span><span class="sxs-lookup"><span data-stu-id="80956-228">Next steps</span></span>


* [<span data-ttu-id="80956-229">使用連接器群組在個別的網路和位置上發佈應用程式</span><span class="sxs-lookup"><span data-stu-id="80956-229">Publish applications on separate networks and locations using connector groups</span></span>](active-directory-application-proxy-connectors-azure-portal.md)
* [<span data-ttu-id="80956-230">使用現有的內部部署 Proxy 伺服器</span><span class="sxs-lookup"><span data-stu-id="80956-230">Work with existing on-premises proxy servers</span></span>](application-proxy-working-with-proxy-servers.md)
* [<span data-ttu-id="80956-231">針對應用程式 Proxy 和連接器錯誤進行疑難排解</span><span class="sxs-lookup"><span data-stu-id="80956-231">Troubleshoot Application Proxy and connector errors</span></span>](active-directory-application-proxy-troubleshoot.md)
* [<span data-ttu-id="80956-232">Toosilently hello Azure AD 應用程式 Proxy 連接器的安裝方式</span><span class="sxs-lookup"><span data-stu-id="80956-232">How toosilently install hello Azure AD Application Proxy Connector</span></span>](active-directory-application-proxy-silent-installation.md)

