---
title: "Azure AD Connect 同步： 了解 hello 預設組態 |Microsoft 文件"
description: "本文章說明 Azure AD Connect 同步處理中的 hello 預設組態。"
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: ed876f22-6892-4b9d-acbe-6a2d112f1cd1
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 1cf95759af913cad8a1393839d3a836434e7c9bc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-sync-understanding-hello-default-configuration"></a><span data-ttu-id="46217-103">Azure AD Connect 同步： 了解 hello 預設組態</span><span class="sxs-lookup"><span data-stu-id="46217-103">Azure AD Connect sync: Understanding hello default configuration</span></span>
<span data-ttu-id="46217-104">本文說明 hello 鶈蜪設定規則。</span><span class="sxs-lookup"><span data-stu-id="46217-104">This article explains hello out-of-box configuration rules.</span></span> <span data-ttu-id="46217-105">並說明 hello 規則，以及這些規則影響 hello 組態的方式。</span><span class="sxs-lookup"><span data-stu-id="46217-105">It documents hello rules and how these rules impact hello configuration.</span></span> <span data-ttu-id="46217-106">它也會引導您透過 Azure AD Connect 同步處理的 hello 預設組態。hello 目標是 hello 讀取器瞭解運作 hello 組態模型中，名為宣告式佈建在真實世界範例。</span><span class="sxs-lookup"><span data-stu-id="46217-106">It also walks you through hello default configuration of Azure AD Connect sync. hello goal is that hello reader understands how hello configuration model, named declarative provisioning, is working in a real-world example.</span></span> <span data-ttu-id="46217-107">本文假設您已安裝並設定 Azure AD Connect 同步處理使用 hello 安裝精靈。</span><span class="sxs-lookup"><span data-stu-id="46217-107">This article assumes that you have already installed and configure Azure AD Connect sync using hello installation wizard.</span></span>

<span data-ttu-id="46217-108">toounderstand hello 模型的詳細資料 hello 組態，讀取[了解宣告式佈建](active-directory-aadconnectsync-understanding-declarative-provisioning.md)。</span><span class="sxs-lookup"><span data-stu-id="46217-108">toounderstand hello details of hello configuration model, read [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span></span>

## <a name="out-of-box-rules-from-on-premises-tooazure-ad"></a><span data-ttu-id="46217-109">從內部部署 tooAzure AD 鶈蜪規則</span><span class="sxs-lookup"><span data-stu-id="46217-109">Out-of-box rules from on-premises tooAzure AD</span></span>
<span data-ttu-id="46217-110">hello 下列運算式可以找到 hello 鶈蜪組態中。</span><span class="sxs-lookup"><span data-stu-id="46217-110">hello following expressions can be found in hello out-of-box configuration.</span></span>

### <a name="user-out-of-box-rules"></a><span data-ttu-id="46217-111">使用者現成可用的規則</span><span class="sxs-lookup"><span data-stu-id="46217-111">User out-of-box rules</span></span>
<span data-ttu-id="46217-112">這些規則也適用於 toohello iNetOrgPerson 物件類型。</span><span class="sxs-lookup"><span data-stu-id="46217-112">These rules also apply toohello iNetOrgPerson object type.</span></span>

<span data-ttu-id="46217-113">使用者物件必須滿足下列 toobe 同步處理的 hello:</span><span class="sxs-lookup"><span data-stu-id="46217-113">A user object must satisfy hello following toobe synchronized:</span></span>

* <span data-ttu-id="46217-114">必須具有 sourceAnchor。</span><span class="sxs-lookup"><span data-stu-id="46217-114">Must have a sourceAnchor.</span></span>
* <span data-ttu-id="46217-115">之後 hello 物件已在 Azure AD 中建立，則無法變更 sourceAnchor。</span><span class="sxs-lookup"><span data-stu-id="46217-115">After hello object has been created in Azure AD, then sourceAnchor cannot change.</span></span> <span data-ttu-id="46217-116">如果 hello 值已變更的內部部署，hello 物件就會停止同步處理直到 hello sourceAnchor 變更後 tooits 先前的值。</span><span class="sxs-lookup"><span data-stu-id="46217-116">If hello value is changed on-premises, hello object stops synchronizing until hello sourceAnchor is changed back tooits previous value.</span></span>
* <span data-ttu-id="46217-117">必須有 hello accountEnabled (userAccountControl) 屬性擴展。</span><span class="sxs-lookup"><span data-stu-id="46217-117">Must have hello accountEnabled (userAccountControl) attribute populated.</span></span> <span data-ttu-id="46217-118">在內部部署 Active Directory 中，一律會存在並填入此屬性。</span><span class="sxs-lookup"><span data-stu-id="46217-118">With an on-premises Active Directory, this attribute is always present and populated.</span></span>

<span data-ttu-id="46217-119">下列使用者物件的 hello 是**不**tooAzure AD 同步處理：</span><span class="sxs-lookup"><span data-stu-id="46217-119">hello following user objects are **not** synchronized tooAzure AD:</span></span>

* <span data-ttu-id="46217-120">`IsPresent([isCriticalSystemObject])`。</span><span class="sxs-lookup"><span data-stu-id="46217-120">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="46217-121">確定在 Active Directory 中，許多的鶈蜪物件，例如 hello 內建的 administrator 帳戶，不會同步處理。</span><span class="sxs-lookup"><span data-stu-id="46217-121">Ensure many out-of-box objects in Active Directory, such as hello built-in administrator account, are not synchronized.</span></span>
* <span data-ttu-id="46217-122">`IsPresent([sAMAccountName]) = False`。</span><span class="sxs-lookup"><span data-stu-id="46217-122">`IsPresent([sAMAccountName]) = False`.</span></span> <span data-ttu-id="46217-123">請確定沒有 sAMAccountName 屬性的使用者物件不會同步處理。</span><span class="sxs-lookup"><span data-stu-id="46217-123">Ensure user objects with no sAMAccountName attribute are not synchronized.</span></span> <span data-ttu-id="46217-124">這種情況實際上只會發生在從 NT4 升級的網域中。</span><span class="sxs-lookup"><span data-stu-id="46217-124">This case would only practically happen in a domain upgraded from NT4.</span></span>
* <span data-ttu-id="46217-125">`Left([sAMAccountName], 4) = "AAD_"`，`Left([sAMAccountName], 5) = "MSOL_"`。</span><span class="sxs-lookup"><span data-stu-id="46217-125">`Left([sAMAccountName], 4) = "AAD_"`, `Left([sAMAccountName], 5) = "MSOL_"`.</span></span> <span data-ttu-id="46217-126">不要同步處理 hello Azure AD Connect 同步處理和與其舊版所使用的服務帳戶。</span><span class="sxs-lookup"><span data-stu-id="46217-126">Do not synchronize hello service account used by Azure AD Connect sync and its earlier versions.</span></span>
* <span data-ttu-id="46217-127">請勿同步處理不會在 Exchange Online 中運作的 Exchange 帳戶。</span><span class="sxs-lookup"><span data-stu-id="46217-127">Do not synchronize Exchange accounts that would not work in Exchange Online.</span></span>
  * `[sAMAccountName] = "SUPPORT_388945a0"`
  * `Left([mailNickname], 14) = "SystemMailbox{"`
  * `(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`
  * `(Left([sAMAccountName], 4) = "CAS_" && (InStr([sAMAccountName], "}")> 0))`
* <span data-ttu-id="46217-128">請勿同步處理不會在 Exchange Online 中運作的物件。</span><span class="sxs-lookup"><span data-stu-id="46217-128">Do not synchronize objects that would not work in Exchange Online.</span></span>
  `CBool(IIF(IsPresent([msExchRecipientTypeDetails]),BitAnd([msExchRecipientTypeDetails],&H21C07000) > 0,NULL))`  
  <span data-ttu-id="46217-129">此位元遮罩 (& H21C07000) 會篩選出 hello 下列物件：</span><span class="sxs-lookup"><span data-stu-id="46217-129">This bitmask (&H21C07000) would filter out hello following objects:</span></span>
  * <span data-ttu-id="46217-130">擁有郵件功能的公用資料夾</span><span class="sxs-lookup"><span data-stu-id="46217-130">Mail-enabled Public Folder</span></span>
  * <span data-ttu-id="46217-131">系統服務員信箱</span><span class="sxs-lookup"><span data-stu-id="46217-131">System Attendant Mailbox</span></span>
  * <span data-ttu-id="46217-132">信箱資料庫信箱 (系統信箱)</span><span class="sxs-lookup"><span data-stu-id="46217-132">Mailbox Database Mailbox (System Mailbox)</span></span>
  * <span data-ttu-id="46217-133">萬用安全性群組 (不會對使用者套用，但因舊版因素而存在)</span><span class="sxs-lookup"><span data-stu-id="46217-133">Universal Security Group (wouldn't apply for a user, but is present for legacy reasons)</span></span>
  * <span data-ttu-id="46217-134">非萬用群組 (不會對使用者套用，但因舊版因素而存在)</span><span class="sxs-lookup"><span data-stu-id="46217-134">Non-Universal Group (wouldn't apply for a user, but is present for legacy reasons)</span></span>
  * <span data-ttu-id="46217-135">信箱計劃</span><span class="sxs-lookup"><span data-stu-id="46217-135">Mailbox Plan</span></span>
  * <span data-ttu-id="46217-136">探索信箱</span><span class="sxs-lookup"><span data-stu-id="46217-136">Discovery Mailbox</span></span>
* <span data-ttu-id="46217-137">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`。</span><span class="sxs-lookup"><span data-stu-id="46217-137">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="46217-138">請不要同步處理任何複寫犧牲者物件。</span><span class="sxs-lookup"><span data-stu-id="46217-138">Do not synchronize any replication victim objects.</span></span>

<span data-ttu-id="46217-139">適用於下列屬性的規則 hello:</span><span class="sxs-lookup"><span data-stu-id="46217-139">hello following attribute rules apply:</span></span>

* <span data-ttu-id="46217-140">`sourceAnchor <- IIF([msExchRecipientTypeDetails]=2,NULL,..)`。</span><span class="sxs-lookup"><span data-stu-id="46217-140">`sourceAnchor <- IIF([msExchRecipientTypeDetails]=2,NULL,..)`.</span></span> <span data-ttu-id="46217-141">hello sourceAnchor 屬性不被由連結信箱。</span><span class="sxs-lookup"><span data-stu-id="46217-141">hello sourceAnchor attribute is not contributed from a linked mailbox.</span></span> <span data-ttu-id="46217-142">它會假設，如果發現連結的信箱，稍後加入 hello 實際的帳戶。</span><span class="sxs-lookup"><span data-stu-id="46217-142">It is assumed that if a linked mailbox has been found, hello actual account is joined later.</span></span>
* <span data-ttu-id="46217-143">Exchange 相關的屬性只有當同步處理 hello 屬性**mailNickName**的值。</span><span class="sxs-lookup"><span data-stu-id="46217-143">Exchange related attributes are only synchronized if hello attribute **mailNickName** has a value.</span></span>
* <span data-ttu-id="46217-144">多個樹系時，屬性會耗用 hello 順序中：</span><span class="sxs-lookup"><span data-stu-id="46217-144">When there are multiple forests, then attributes are consumed in hello following order:</span></span>
  1. <span data-ttu-id="46217-145">Toosign 中相關的屬性 （如範例 userPrincipalName) 會造成從 hello 樹系中使用已啟用的帳戶。</span><span class="sxs-lookup"><span data-stu-id="46217-145">Attributes related toosign-in (for example userPrincipalName) are contributed from hello forest with an enabled account.</span></span>
  2. <span data-ttu-id="46217-146">可以在 Exchange GAL （全域通訊清單） 中找到的屬性被由 hello 與 Exchange 信箱的樹系。</span><span class="sxs-lookup"><span data-stu-id="46217-146">Attributes that can be found in an Exchange GAL (Global Address List) are contributed from hello forest with an Exchange Mailbox.</span></span>
  3. <span data-ttu-id="46217-147">如果找不到信箱，則這些屬性可來自於任何樹系。</span><span class="sxs-lookup"><span data-stu-id="46217-147">If no mailbox can be found, then these attributes can come from any forest.</span></span>
  4. <span data-ttu-id="46217-148">Exchange 相關的屬性 （技術屬性未顯示在 hello GAL） 從 hello 樹系提供其中`mailNickname ISNOTNULL`。</span><span class="sxs-lookup"><span data-stu-id="46217-148">Exchange related attributes (technical attributes not visible in hello GAL) are contributed from hello forest where `mailNickname ISNOTNULL`.</span></span>
  5. <span data-ttu-id="46217-149">如果有多個樹系，就可以滿足這些規則，其中一個規則，然後 hello hello 連接器 （樹系） 的建立順序 （日期/時間） 是使用的 toodetermine 哪個樹系佔 hello 屬性。</span><span class="sxs-lookup"><span data-stu-id="46217-149">If there are multiple forests that would satisfy one of these rules, then hello creation order (date/time) of hello Connectors (forests) is used toodetermine which forest contributes hello attributes.</span></span>

### <a name="contact-out-of-box-rules"></a><span data-ttu-id="46217-150">連絡人現成可用的規則</span><span class="sxs-lookup"><span data-stu-id="46217-150">Contact out-of-box rules</span></span>
<span data-ttu-id="46217-151">連絡人物件必須滿足下列 toobe 同步處理的 hello:</span><span class="sxs-lookup"><span data-stu-id="46217-151">A contact object must satisfy hello following toobe synchronized:</span></span>

* <span data-ttu-id="46217-152">hello 連絡人必須是擁有郵件功能。</span><span class="sxs-lookup"><span data-stu-id="46217-152">hello contact must be mail-enabled.</span></span> <span data-ttu-id="46217-153">已驗證以 hello 下列規則：</span><span class="sxs-lookup"><span data-stu-id="46217-153">It is verified with hello following rules:</span></span>
  * <span data-ttu-id="46217-154">`IsPresent([proxyAddresses]) = True)`。</span><span class="sxs-lookup"><span data-stu-id="46217-154">`IsPresent([proxyAddresses]) = True)`.</span></span> <span data-ttu-id="46217-155">必須先填入 hello proxyAddresses 屬性。</span><span class="sxs-lookup"><span data-stu-id="46217-155">hello proxyAddresses attribute must be populated.</span></span>
  * <span data-ttu-id="46217-156">主要電子郵件地址可以找到 hello proxyAddresses 屬性或 hello mail 屬性中。</span><span class="sxs-lookup"><span data-stu-id="46217-156">A primary email address can be found in either hello proxyAddresses attribute or hello mail attribute.</span></span> <span data-ttu-id="46217-157">hello 與否 @ 是使用的 tooverify hello 內容是電子郵件地址。</span><span class="sxs-lookup"><span data-stu-id="46217-157">hello presence of an @ is used tooverify that hello content is an email address.</span></span> <span data-ttu-id="46217-158">這兩個規則的其中一個必須評估的 tooTrue。</span><span class="sxs-lookup"><span data-stu-id="46217-158">One of these two rules must be evaluated tooTrue.</span></span>
    * <span data-ttu-id="46217-159">`(Contains([proxyAddresses], "SMTP:") > 0) && (InStr(Item([proxyAddresses], Contains([proxyAddresses], "SMTP:")), "@") > 0))`。</span><span class="sxs-lookup"><span data-stu-id="46217-159">`(Contains([proxyAddresses], "SMTP:") > 0) && (InStr(Item([proxyAddresses], Contains([proxyAddresses], "SMTP:")), "@") > 0))`.</span></span> <span data-ttu-id="46217-160">是否有與項目"SMTP:"，而且如果沒有，可以 @ 是 hello 字串中找到？</span><span class="sxs-lookup"><span data-stu-id="46217-160">Is there an entry with "SMTP:" and if there is, can an @ be found in hello string?</span></span>
    * <span data-ttu-id="46217-161">`(IsPresent([mail]) = True && (InStr([mail], "@") > 0)`。</span><span class="sxs-lookup"><span data-stu-id="46217-161">`(IsPresent([mail]) = True && (InStr([mail], "@") > 0)`.</span></span> <span data-ttu-id="46217-162">Hello mail 屬性填入，而且如果是，可以是 @ 是 hello 字串中找到？</span><span class="sxs-lookup"><span data-stu-id="46217-162">Is hello mail attribute populated and if it is, can an @ be found in hello string?</span></span>

<span data-ttu-id="46217-163">hello 下列連絡人物件是**不**tooAzure AD 同步處理：</span><span class="sxs-lookup"><span data-stu-id="46217-163">hello following contact objects are **not** synchronized tooAzure AD:</span></span>

* <span data-ttu-id="46217-164">`IsPresent([isCriticalSystemObject])`。</span><span class="sxs-lookup"><span data-stu-id="46217-164">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="46217-165">請確定沒有標記為重要的連絡人物件進行同步處理。</span><span class="sxs-lookup"><span data-stu-id="46217-165">Ensure no contact objects marked as critical are synchronized.</span></span> <span data-ttu-id="46217-166">不應該是任何使用預設組態的項目。</span><span class="sxs-lookup"><span data-stu-id="46217-166">Shouldn't be any with a default configuration.</span></span>
* <span data-ttu-id="46217-167">`((InStr([displayName], "(MSOL)") > 0) && (CBool([msExchHideFromAddressLists])))`。</span><span class="sxs-lookup"><span data-stu-id="46217-167">`((InStr([displayName], "(MSOL)") > 0) && (CBool([msExchHideFromAddressLists])))`.</span></span>
* <span data-ttu-id="46217-168">`(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`。</span><span class="sxs-lookup"><span data-stu-id="46217-168">`(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`.</span></span> <span data-ttu-id="46217-169">這些物件無法在 Exchange Online 中運作。</span><span class="sxs-lookup"><span data-stu-id="46217-169">These objects wouldn't work in Exchange Online.</span></span>
* <span data-ttu-id="46217-170">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`。</span><span class="sxs-lookup"><span data-stu-id="46217-170">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="46217-171">請不要同步處理任何複寫犧牲者物件。</span><span class="sxs-lookup"><span data-stu-id="46217-171">Do not synchronize any replication victim objects.</span></span>

### <a name="group-out-of-box-rules"></a><span data-ttu-id="46217-172">群組現成可用的規則</span><span class="sxs-lookup"><span data-stu-id="46217-172">Group out-of-box rules</span></span>
<span data-ttu-id="46217-173">群組物件必須滿足下列 toobe 同步處理的 hello:</span><span class="sxs-lookup"><span data-stu-id="46217-173">A group object must satisfy hello following toobe synchronized:</span></span>

* <span data-ttu-id="46217-174">擁有的成員必須少於 50,000 個。</span><span class="sxs-lookup"><span data-stu-id="46217-174">Must have less than 50,000 members.</span></span> <span data-ttu-id="46217-175">這個計數會 hello hello 內部群組的成員數目。</span><span class="sxs-lookup"><span data-stu-id="46217-175">This count is hello number of members in hello on-premises group.</span></span>
  * <span data-ttu-id="46217-176">如果同步處理開始 hello 第一次之前，它具有多個成員，則 hello 群組不會同步。</span><span class="sxs-lookup"><span data-stu-id="46217-176">If it has more members before synchronization starts hello first time, hello group is not synchronized.</span></span>
  * <span data-ttu-id="46217-177">如果成員的 hello 數目成長從最初建立時，然後到達 50,000 的成員，它會停止同步處理，直到 hello 成員資格計數低於 50000 一次時。</span><span class="sxs-lookup"><span data-stu-id="46217-177">If hello number of members grow from when it was initially created, then when it reaches 50,000 members it stops synchronizing until hello membership count is lower than 50,000 again.</span></span>
  * <span data-ttu-id="46217-178">注意： Azure AD 也強制 hello 50,000 的成員資格計數。</span><span class="sxs-lookup"><span data-stu-id="46217-178">Note: hello 50,000 membership count is also enforced by Azure AD.</span></span> <span data-ttu-id="46217-179">您不能 toosynchronize 群組與多個成員，即使您修改或移除此規則。</span><span class="sxs-lookup"><span data-stu-id="46217-179">You are not able toosynchronize groups with more members even if you modify or remove this rule.</span></span>
* <span data-ttu-id="46217-180">如果 hello 群組**發佈群組**，則也必須是擁有郵件功能。</span><span class="sxs-lookup"><span data-stu-id="46217-180">If hello group is a **Distribution Group**, then it must also be mail enabled.</span></span> <span data-ttu-id="46217-181">請參閱 [連絡人現成可用的規則](#contact-out-of-box-rules) ，以了解強制執行此規則的情形。</span><span class="sxs-lookup"><span data-stu-id="46217-181">See [Contact out-of-box rules](#contact-out-of-box-rules) for this rule is enforced.</span></span>

<span data-ttu-id="46217-182">下列群組物件的 hello 是**不**tooAzure AD 同步處理：</span><span class="sxs-lookup"><span data-stu-id="46217-182">hello following group objects are **not** synchronized tooAzure AD:</span></span>

* <span data-ttu-id="46217-183">`IsPresent([isCriticalSystemObject])`。</span><span class="sxs-lookup"><span data-stu-id="46217-183">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="46217-184">確定在 Active Directory 中，許多的鶈蜪物件，例如 hello 內建的 administrators 群組，不會同步處理。</span><span class="sxs-lookup"><span data-stu-id="46217-184">Ensure many out-of-box objects in Active Directory, such as hello built-in administrators group, are not synchronized.</span></span>
* <span data-ttu-id="46217-185">`[sAMAccountName] = "MSOL_AD_Sync_RichCoexistence"`。</span><span class="sxs-lookup"><span data-stu-id="46217-185">`[sAMAccountName] = "MSOL_AD_Sync_RichCoexistence"`.</span></span> <span data-ttu-id="46217-186">DirSync 所使用的舊版群組。</span><span class="sxs-lookup"><span data-stu-id="46217-186">Legacy group used by DirSync.</span></span>
* <span data-ttu-id="46217-187">`BitAnd([msExchRecipientTypeDetails],&amp;H40000000)`。</span><span class="sxs-lookup"><span data-stu-id="46217-187">`BitAnd([msExchRecipientTypeDetails],&amp;H40000000)`.</span></span> <span data-ttu-id="46217-188">角色群組。</span><span class="sxs-lookup"><span data-stu-id="46217-188">Role Group.</span></span>
* <span data-ttu-id="46217-189">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`。</span><span class="sxs-lookup"><span data-stu-id="46217-189">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="46217-190">請不要同步處理任何複寫犧牲者物件。</span><span class="sxs-lookup"><span data-stu-id="46217-190">Do not synchronize any replication victim objects.</span></span>

### <a name="foreignsecurityprincipal-out-of-box-rules"></a><span data-ttu-id="46217-191">ForeignSecurityPrincipal 現成可用的規則</span><span class="sxs-lookup"><span data-stu-id="46217-191">ForeignSecurityPrincipal out-of-box rules</span></span>
<span data-ttu-id="46217-192">Fsp 聯結太 「 任何 」 (\*) hello metaverse 中的物件。</span><span class="sxs-lookup"><span data-stu-id="46217-192">FSPs are joined too"any" (\*) object in hello metaverse.</span></span> <span data-ttu-id="46217-193">實際上，此聯結只會針對使用者和安全性群組執行。</span><span class="sxs-lookup"><span data-stu-id="46217-193">In reality, this join only happens for users and security groups.</span></span> <span data-ttu-id="46217-194">此組態可確保跨樹系成員資格會進行解析，並正確地顯示在 Azure AD 中。</span><span class="sxs-lookup"><span data-stu-id="46217-194">This configuration ensures that cross-forest memberships are resolved and represented correctly in Azure AD.</span></span>

### <a name="computer-out-of-box-rules"></a><span data-ttu-id="46217-195">電腦現成可用的規則</span><span class="sxs-lookup"><span data-stu-id="46217-195">Computer out-of-box rules</span></span>
<span data-ttu-id="46217-196">電腦物件必須滿足下列 toobe 同步處理的 hello:</span><span class="sxs-lookup"><span data-stu-id="46217-196">A computer object must satisfy hello following toobe synchronized:</span></span>

* <span data-ttu-id="46217-197">`userCertificate ISNOTNULL`。</span><span class="sxs-lookup"><span data-stu-id="46217-197">`userCertificate ISNOTNULL`.</span></span> <span data-ttu-id="46217-198">只有 Windows 10 電腦會填入此屬性。</span><span class="sxs-lookup"><span data-stu-id="46217-198">Only Windows 10 computers populate this attribute.</span></span> <span data-ttu-id="46217-199">所有具有此屬性值的電腦物件都會進行同步處理。</span><span class="sxs-lookup"><span data-stu-id="46217-199">All computer objects with a value in this attribute are synchronized.</span></span>

## <a name="understanding-hello-out-of-box-rules-scenario"></a><span data-ttu-id="46217-200">了解 hello 鶈蜪規則案例</span><span class="sxs-lookup"><span data-stu-id="46217-200">Understanding hello out-of-box rules scenario</span></span>
<span data-ttu-id="46217-201">在此範例中，我們會使用具有一個帳戶樹系 (A)、一個資源樹系 (R) 和一個 Azure AD 目錄的部署。</span><span class="sxs-lookup"><span data-stu-id="46217-201">In this example, we are using a deployment with one account forest (A), one resource forest (R), and one Azure AD directory.</span></span>

![含案例說明的圖片](./media/active-directory-aadconnectsync-understanding-default-configuration/scenario.png)

<span data-ttu-id="46217-203">此設定會假設沒有 hello 帳戶樹系中已啟用的帳戶，而且具有連結信箱的 hello 資源樹系中停用的帳戶。</span><span class="sxs-lookup"><span data-stu-id="46217-203">In this configuration, it is assumed there is an enabled account in hello account forest and a disabled account in hello resource forest with a linked mailbox.</span></span>

<span data-ttu-id="46217-204">我們的目標與 hello 預設組態是：</span><span class="sxs-lookup"><span data-stu-id="46217-204">Our goal with hello default configuration is:</span></span>

* <span data-ttu-id="46217-205">屬性相關 toosign 中從 hello 樹系與 hello 啟用帳戶同步。</span><span class="sxs-lookup"><span data-stu-id="46217-205">Attributes related toosign-in are synchronized from hello forest with hello enabled account.</span></span>
* <span data-ttu-id="46217-206">可以在 hello GAL （全域通訊清單） 中找到的屬性會從 hello 與 hello 信箱的樹系同步處理。</span><span class="sxs-lookup"><span data-stu-id="46217-206">Attributes that can be found in hello GAL (Global Address List) are synchronized from hello forest with hello mailbox.</span></span> <span data-ttu-id="46217-207">如果找不到信箱，則會使用任何其他樹系。</span><span class="sxs-lookup"><span data-stu-id="46217-207">If no mailbox can be found, any other forest is used.</span></span>
* <span data-ttu-id="46217-208">如果找到連結的信箱，hello 連結已啟用的帳戶必須找到的 hello 物件匯出 toobe tooAzure AD。</span><span class="sxs-lookup"><span data-stu-id="46217-208">If a linked mailbox is found, hello linked enabled account must be found for hello object toobe exported tooAzure AD.</span></span>

### <a name="synchronization-rule-editor"></a><span data-ttu-id="46217-209">同步處理規則編輯器</span><span class="sxs-lookup"><span data-stu-id="46217-209">Synchronization Rule Editor</span></span>
<span data-ttu-id="46217-210">hello 組態即可檢視及變更與 hello 工具同步處理規則編輯器 」 (SRE)，可以找到捷徑 tooit hello [開始] 功能表中。</span><span class="sxs-lookup"><span data-stu-id="46217-210">hello configuration can be viewed and changed with hello tool Synchronization Rules Editor (SRE) and a shortcut tooit can be found in hello start menu.</span></span>

![同步處理規則編輯器圖示](./media/active-directory-aadconnectsync-understanding-default-configuration/sre.png)

<span data-ttu-id="46217-212">hello SRE 是一個資源套件工具並安裝 Azure AD Connect 同步處理。toobe 無法 toostart，您必須是 hello ADSyncAdmins 群組的成員。</span><span class="sxs-lookup"><span data-stu-id="46217-212">hello SRE is a resource kit tool and it is installed with Azure AD Connect sync. toobe able toostart it, you must be a member of hello ADSyncAdmins group.</span></span> <span data-ttu-id="46217-213">在它啟動時，您會看到如下的畫面：</span><span class="sxs-lookup"><span data-stu-id="46217-213">When it starts, you see something like this:</span></span>

![同步處理規則 (輸入)](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulesinbound.png)

<span data-ttu-id="46217-215">在此窗格中，您會看到所有為您的組態建立的同步處理規則。</span><span class="sxs-lookup"><span data-stu-id="46217-215">In this pane, you see all Synchronization Rules created for your configuration.</span></span> <span data-ttu-id="46217-216">Hello 資料表中的每一行都是一個同步處理規則。</span><span class="sxs-lookup"><span data-stu-id="46217-216">Each line in hello table is one Synchronization Rule.</span></span> <span data-ttu-id="46217-217">toohello 留在 規則類型，會列出兩種不同類型的 hello： 輸入及輸出。</span><span class="sxs-lookup"><span data-stu-id="46217-217">toohello left under Rule Types, hello two different types are listed: Inbound and Outbound.</span></span> <span data-ttu-id="46217-218">輸入和輸出來自 hello 的 hello metaverse 的檢視。</span><span class="sxs-lookup"><span data-stu-id="46217-218">Inbound and Outbound is from hello view of hello metaverse.</span></span> <span data-ttu-id="46217-219">您是主要進入 toofocus hello 上的輸入本概觀中的規則。</span><span class="sxs-lookup"><span data-stu-id="46217-219">You are mainly going toofocus on hello inbound rules in this overview.</span></span> <span data-ttu-id="46217-220">hello 的同步處理規則的實際清單取決在 AD 中的 hello 偵測到結構描述。</span><span class="sxs-lookup"><span data-stu-id="46217-220">hello actual list of Synchronization Rules depends on hello detected schema in AD.</span></span> <span data-ttu-id="46217-221">在上述的 hello 圖片，hello 帳戶樹系 (fabrikamonline.com) 沒有任何服務，例如 Exchange 和 Lync，以及任何同步處理規則已建立這些服務。</span><span class="sxs-lookup"><span data-stu-id="46217-221">In hello picture above, hello account forest (fabrikamonline.com) does not have any services, such as Exchange and Lync, and no Synchronization Rules have been created for these services.</span></span> <span data-ttu-id="46217-222">不過，在 hello 資源樹系 (res.fabrikamonline.com) 您找到的同步處理規則針對這些服務。</span><span class="sxs-lookup"><span data-stu-id="46217-222">However, in hello resource forest (res.fabrikamonline.com) you find Synchronization Rules for these services.</span></span> <span data-ttu-id="46217-223">hello 規則 hello 內容是偵測到的 hello 版本而有所不同。</span><span class="sxs-lookup"><span data-stu-id="46217-223">hello content of hello rules is different depending on hello version detected.</span></span> <span data-ttu-id="46217-224">比方說，在 Exchange 2013 的部署中，屬性流程比在 Exchange 2010/2007 中設定的多。</span><span class="sxs-lookup"><span data-stu-id="46217-224">For example, in a deployment with Exchange 2013 there are more attribute flows configured than in Exchange 2010/2007.</span></span>

### <a name="synchronization-rule"></a><span data-ttu-id="46217-225">同步處理規則</span><span class="sxs-lookup"><span data-stu-id="46217-225">Synchronization Rule</span></span>
<span data-ttu-id="46217-226">同步處理規則是一個組態物件，當滿足條件時會有一組屬性進行流動。</span><span class="sxs-lookup"><span data-stu-id="46217-226">A Synchronization Rule is a configuration object with a set of attributes flowing when a condition is satisfied.</span></span> <span data-ttu-id="46217-227">它也是連接器空間中的之物件的相關的 tooan hello metaverse，稱為物件的方式使用的 toodescribe**聯結**或**符合**。</span><span class="sxs-lookup"><span data-stu-id="46217-227">It is also used toodescribe how an object in a connector space is related tooan object in hello metaverse, known as **join** or **match**.</span></span> <span data-ttu-id="46217-228">hello 同步化規則具有優先順序值，指出其與其他 tooeach 的關聯。</span><span class="sxs-lookup"><span data-stu-id="46217-228">hello Synchronization Rules have a precedence value indicating how they relate tooeach other.</span></span> <span data-ttu-id="46217-229">較小的數值與同步處理規則的優先順序，並在屬性流程發生衝突時，較高的優先順序 wins hello 衝突解決。</span><span class="sxs-lookup"><span data-stu-id="46217-229">A Synchronization Rule with a lower numeric value has a higher precedence and in an attribute flow conflict, higher precedence wins hello conflict resolution.</span></span>

<span data-ttu-id="46217-230">例如，查看同步處理規則 hello**中 from AD – User AccountEnabled**。</span><span class="sxs-lookup"><span data-stu-id="46217-230">As an example, look at hello Synchronization Rule **In from AD – User AccountEnabled**.</span></span> <span data-ttu-id="46217-231">標示 hello SRE 中的這一行，並選取**編輯**。</span><span class="sxs-lookup"><span data-stu-id="46217-231">Mark this line in hello SRE and select **Edit**.</span></span>

<span data-ttu-id="46217-232">由於這項規則的預設規則，當您開啟 hello 規則時收到警告。</span><span class="sxs-lookup"><span data-stu-id="46217-232">Since this rule is an out-of-box rule, you receive a warning when you open hello rule.</span></span> <span data-ttu-id="46217-233">您不應做任何[變更 tooout 之 規則](active-directory-aadconnectsync-best-practices-changing-default-configuration.md)，所以系統會詢問您要的情況為何。</span><span class="sxs-lookup"><span data-stu-id="46217-233">You should not make any [changes tooout-of-box rules](active-directory-aadconnectsync-best-practices-changing-default-configuration.md), so you are asked what your intentions are.</span></span> <span data-ttu-id="46217-234">在此情況下，您只想 tooview hello 規則。</span><span class="sxs-lookup"><span data-stu-id="46217-234">In this case, you only want tooview hello rule.</span></span> <span data-ttu-id="46217-235">請選取 [否] 。</span><span class="sxs-lookup"><span data-stu-id="46217-235">Select **No**.</span></span>

![同步處理規則警告](./media/active-directory-aadconnectsync-understanding-default-configuration/warningeditrule.png)

<span data-ttu-id="46217-237">同步處理規則具有四個組態區段：說明、範圍篩選器、聯結規則及轉換。</span><span class="sxs-lookup"><span data-stu-id="46217-237">A Synchronization Rule has four configuration sections: Description, Scoping filter, Join rules, and Transformations.</span></span>

#### <a name="description"></a><span data-ttu-id="46217-238">說明</span><span class="sxs-lookup"><span data-stu-id="46217-238">Description</span></span>
<span data-ttu-id="46217-239">hello 第一個區段提供基本的資訊，例如名稱和描述。</span><span class="sxs-lookup"><span data-stu-id="46217-239">hello first section provides basic information such as a name and description.</span></span>

![<span data-ttu-id="46217-240">同步處理規則編輯器中的說明索引標籤</span><span class="sxs-lookup"><span data-stu-id="46217-240">Description tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncruledescription.png)

<span data-ttu-id="46217-241">您也可以找到連接的系統此規則相關的物件類型中 hello 連線的系統中套用，以及 hello metaverse 物件類型的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="46217-241">You also find information about which connected system this rule is related to, which object type in hello connected system it applies to, and hello metaverse object type.</span></span> <span data-ttu-id="46217-242">hello metaverse 物件類型時，一定會人不論 hello 來源物件類型是使用者、 iNetOrgPerson 或 contact。</span><span class="sxs-lookup"><span data-stu-id="46217-242">hello metaverse object type is always person regardless when hello source object type is a user, iNetOrgPerson, or contact.</span></span> <span data-ttu-id="46217-243">它會建立為泛型類型，應該永遠不會變更 hello metaverse 物件類型。</span><span class="sxs-lookup"><span data-stu-id="46217-243">hello metaverse object type should never change so it is created as a generic type.</span></span> <span data-ttu-id="46217-244">可以設定 hello 連結類型，tooJoin、 StickyJoin 或 Provision。</span><span class="sxs-lookup"><span data-stu-id="46217-244">hello Link Type can be set tooJoin, StickyJoin, or Provision.</span></span> <span data-ttu-id="46217-245">這個設定可以與 hello 聯結規則 區段一起運作，並涵蓋的更新版本。</span><span class="sxs-lookup"><span data-stu-id="46217-245">This setting works together with hello Join Rules section and is covered later.</span></span>

<span data-ttu-id="46217-246">您也可以看到此同步處理規則用於密碼同步。如果使用者在此同步處理規則的範圍內，hello 密碼會同步處理，從內部部署 toocloud （假設您已啟用 hello 密碼同步功能）。</span><span class="sxs-lookup"><span data-stu-id="46217-246">You can also see that this sync rule is used for password sync. If a user is in scope for this sync rule, hello password is synchronized from on-premises toocloud (assuming you have enabled hello password sync feature).</span></span>

#### <a name="scoping-filter"></a><span data-ttu-id="46217-247">範圍篩選器</span><span class="sxs-lookup"><span data-stu-id="46217-247">Scoping filter</span></span>
<span data-ttu-id="46217-248">hello 篩選範圍 區段時，使用的 tooconfigure 應套用同步處理規則。</span><span class="sxs-lookup"><span data-stu-id="46217-248">hello Scoping Filter section is used tooconfigure when a Synchronization Rule should apply.</span></span> <span data-ttu-id="46217-249">因為您正在查看的同步處理規則 hello hello 名稱表示只應套用於啟用的使用者，設定 hello 領域因此 hello AD 屬性**userAccountControl**必須不具有 hello 設定位元 2。</span><span class="sxs-lookup"><span data-stu-id="46217-249">Since hello name of hello Synchronization Rule you are looking at indicates it should only be applied for enabled users, hello scope is configured so hello AD attribute **userAccountControl** must not have hello bit 2 set.</span></span> <span data-ttu-id="46217-250">當 hello 同步處理引擎會在 AD 中尋找使用者時，它會套用此同步處理規則時**userAccountControl**設定 toohello 十進位值 512 （已啟用的一般使用者）。</span><span class="sxs-lookup"><span data-stu-id="46217-250">When hello sync engine finds a user in AD, it applies this sync rule when **userAccountControl** is set toohello decimal value 512 (enabled normal user).</span></span> <span data-ttu-id="46217-251">它不會套用 hello 規則 hello 使用者有時**userAccountControl**設定 too514 （已停用的一般使用者）。</span><span class="sxs-lookup"><span data-stu-id="46217-251">It does not apply hello rule when hello user has **userAccountControl** set too514 (disabled normal user).</span></span>

![<span data-ttu-id="46217-252">同步處理規則編輯器中的範圍索引標籤</span><span class="sxs-lookup"><span data-stu-id="46217-252">Scoping tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulescopingfilter.png)

<span data-ttu-id="46217-253">hello 範圍篩選器包含群組，但可以巢狀的子句。</span><span class="sxs-lookup"><span data-stu-id="46217-253">hello scoping filter has Groups and Clauses that can be nested.</span></span> <span data-ttu-id="46217-254">同步處理規則 tooapply 必須滿足群組內的所有子句。</span><span class="sxs-lookup"><span data-stu-id="46217-254">All clauses inside a group must be satisfied for a Synchronization Rule tooapply.</span></span> <span data-ttu-id="46217-255">定義了多個群組，然後至少一個群組必須滿足 hello 規則 tooapply。</span><span class="sxs-lookup"><span data-stu-id="46217-255">When multiple groups are defined, then at least one group must be satisfied for hello rule tooapply.</span></span> <span data-ttu-id="46217-256">也就是說，系統會在群組間評估邏輯 OR ，而在單一群組中評估邏輯 AND。</span><span class="sxs-lookup"><span data-stu-id="46217-256">That is, a logical OR is evaluated between groups and a logical AND is evaluated inside a group.</span></span> <span data-ttu-id="46217-257">這項設定的範例，請參閱 hello 輸出同步處理規則**出 tooAAD – Group Join**。</span><span class="sxs-lookup"><span data-stu-id="46217-257">An example of this configuration can be found in hello outbound Synchronization Rule **Out tooAAD – Group Join**.</span></span> <span data-ttu-id="46217-258">同步處理篩選器有數個群組，例如，一個適用於安全性群組 (`securityEnabled EQUAL True`) 的群組，和一個適用於通訊群組 (`securityEnabled EQUAL False`) 的群組。</span><span class="sxs-lookup"><span data-stu-id="46217-258">There are several synchronization filter groups, for example one for security groups (`securityEnabled EQUAL True`) and one for distribution groups (`securityEnabled EQUAL False`).</span></span>

![<span data-ttu-id="46217-259">同步處理規則編輯器中的範圍索引標籤</span><span class="sxs-lookup"><span data-stu-id="46217-259">Scoping tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulescopingfilterout.png)

<span data-ttu-id="46217-260">此規則會使用的 toodefine 群組應該佈建的 tooAzure AD。</span><span class="sxs-lookup"><span data-stu-id="46217-260">This rule is used toodefine which Groups should be provisioned tooAzure AD.</span></span> <span data-ttu-id="46217-261">通訊群組必須是擁有郵件功能 toobe 與 Azure AD 同步處理，但對於安全性群組而言電子郵件不需要。</span><span class="sxs-lookup"><span data-stu-id="46217-261">Distribution Groups must be mail enabled toobe synchronized with Azure AD, but for security groups an email is not required.</span></span>

#### <a name="join-rules"></a><span data-ttu-id="46217-262">聯結規則</span><span class="sxs-lookup"><span data-stu-id="46217-262">Join rules</span></span>
<span data-ttu-id="46217-263">hello 第三個區段都是使用的 tooconfigure hello 連接器空間中的物件與 tooobjects hello metaverse 中的關聯。</span><span class="sxs-lookup"><span data-stu-id="46217-263">hello third section is used tooconfigure how objects in hello connector space relate tooobjects in hello metaverse.</span></span> <span data-ttu-id="46217-264">hello 您稍早查看的規則沒有任何組態，聯結規則，而是會在進行 toolook**中 from AD – User Join**。</span><span class="sxs-lookup"><span data-stu-id="46217-264">hello rule you have looked at earlier does not have any configuration for Join Rules, so instead you are going toolook at **In from AD – User Join**.</span></span>

![<span data-ttu-id="46217-265">同步處理規則編輯器中的聯結規則索引標籤</span><span class="sxs-lookup"><span data-stu-id="46217-265">Join rules tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulejoinrules.png)

<span data-ttu-id="46217-266">hello 聯結規則 hello 內容取決於 hello 相符 hello 安裝精靈中選取的選項。</span><span class="sxs-lookup"><span data-stu-id="46217-266">hello content of hello join rule depends on hello matching option selected in hello installation wizard.</span></span> <span data-ttu-id="46217-267">以輸入的規則評估 hello 開頭 hello 來源連接器空間中的物件，而且 hello 聯結規則中的每個群組會依序評估。</span><span class="sxs-lookup"><span data-stu-id="46217-267">For an inbound rule, hello evaluation starts with an object in hello source connector space and each group in hello join rules is evaluated in sequence.</span></span> <span data-ttu-id="46217-268">如果來源物件是一個評估的 toomatch 物件在 hello 使用其中一種 hello 聯結規則的 metaverse，hello 物件會加入。</span><span class="sxs-lookup"><span data-stu-id="46217-268">If a source object is evaluated toomatch exactly one object in hello metaverse using one of hello join rules, hello objects are joined.</span></span> <span data-ttu-id="46217-269">如果已評估所有規則，而且沒有相符項目，則會使用 hello 連結類型在 hello [描述] 頁面。</span><span class="sxs-lookup"><span data-stu-id="46217-269">If all rules have been evaluated and there is no match, then hello Link Type on hello description page is used.</span></span> <span data-ttu-id="46217-270">如果此組態設定得**佈建**，然後 hello 目標，hello metaverse 中建立新的物件。</span><span class="sxs-lookup"><span data-stu-id="46217-270">If this configuration is set too**Provision**, then a new object is created in hello target, hello metaverse.</span></span> <span data-ttu-id="46217-271">新的物件 toohello metaverse 太也稱為 tooprovision**專案**物件 toohello metaverse。</span><span class="sxs-lookup"><span data-stu-id="46217-271">tooprovision a new object toohello metaverse is also known as too**project** an object toohello metaverse.</span></span>

<span data-ttu-id="46217-272">hello 聯結規則只評估一次。</span><span class="sxs-lookup"><span data-stu-id="46217-272">hello join rules are only evaluated once.</span></span> <span data-ttu-id="46217-273">當連接器空間物件和 metaverse 物件聯結在一起時，它們會保留聯結 hello hello 同步處理規則範圍是仍然滿足為。</span><span class="sxs-lookup"><span data-stu-id="46217-273">When a connector space object and a metaverse object are joined, they remain joined as long as hello scope of hello Synchronization Rule is still satisfied.</span></span>

<span data-ttu-id="46217-274">評估同步處理規則時，只有一個具有已定義聯結規則的同步處理規則必須在範圍內。</span><span class="sxs-lookup"><span data-stu-id="46217-274">When evaluating Synchronization Rules, only one Synchronization Rule with join rules defined must be in scope.</span></span> <span data-ttu-id="46217-275">如果發現多個具有聯結規則的同步處理規則用於單一物件，就會擲回錯誤。</span><span class="sxs-lookup"><span data-stu-id="46217-275">If multiple Synchronization Rules with join rules are found for one object, an error is thrown.</span></span> <span data-ttu-id="46217-276">基於這個理由，hello 最佳作法是的 toohave 只能有一個具有聯結的同步處理規則定義多個同步處理規則的物件範圍時。</span><span class="sxs-lookup"><span data-stu-id="46217-276">For this reason, hello best practice is toohave only one Synchronization Rule with join defined when multiple Synchronization Rules are in scope for an object.</span></span> <span data-ttu-id="46217-277">在 hello 鶈蜪組態中的 Azure AD Connect 同步處理，這些規則可以找到藉由查看 hello 名稱，並且尋找與 hello word**聯結**hello hello 名稱結尾處。</span><span class="sxs-lookup"><span data-stu-id="46217-277">In hello out-of-box configuration for Azure AD Connect sync, these rules can be found by looking at hello name and find those with hello word **Join** at hello end of hello name.</span></span> <span data-ttu-id="46217-278">另一個同步處理規則 hello 物件聯結在一起，或佈建 hello 目標中的新物件時，同步處理規則沒有定義任何聯結規則適用於 hello 屬性流程。</span><span class="sxs-lookup"><span data-stu-id="46217-278">A Synchronization Rule without any join rules defined applies hello attribute flows when another Synchronization Rule joined hello objects together or provisioned a new object in hello target.</span></span>

<span data-ttu-id="46217-279">如果您查看 hello 圖片上方時，您可以看到該 hello 規則正嘗試 toojoin **objectSID**與**msExchMasterAccountSid** (Exchange) 和**msRTCSIP OriginatorSid** (Lync)，這是我們預期的帳戶-資源樹系拓撲中。</span><span class="sxs-lookup"><span data-stu-id="46217-279">If you look at hello picture above, you can see that hello rule is trying toojoin **objectSID** with **msExchMasterAccountSid** (Exchange) and **msRTCSIP-OriginatorSid** (Lync), which is what we expect in an account-resource forest topology.</span></span> <span data-ttu-id="46217-280">Hello 尋找所有樹系上的相同規則。</span><span class="sxs-lookup"><span data-stu-id="46217-280">You find hello same rule on all forests.</span></span> <span data-ttu-id="46217-281">hello 假設是每個樹系，可能是 「 帳戶 」 或 「 資源樹系。</span><span class="sxs-lookup"><span data-stu-id="46217-281">hello assumption is that every forest could be either an account or resource forest.</span></span> <span data-ttu-id="46217-282">如果您有駐留在單一樹系，且沒有 toobe 加入帳戶，也可以運作這項設定。</span><span class="sxs-lookup"><span data-stu-id="46217-282">This configuration also works if you have accounts that live in a single forest and do not have toobe joined.</span></span>

#### <a name="transformations"></a><span data-ttu-id="46217-283">轉換</span><span class="sxs-lookup"><span data-stu-id="46217-283">Transformations</span></span>
<span data-ttu-id="46217-284">hello 轉換區段定義當聯結 hello 物件且滿足 hello 範圍篩選時，套用 toohello 目標物件的所有屬性流程。</span><span class="sxs-lookup"><span data-stu-id="46217-284">hello transformation section defines all attribute flows that apply toohello target object when hello objects are joined and hello scope filter is satisfied.</span></span> <span data-ttu-id="46217-285">返回 toohello**中 from AD – User AccountEnabled**同步處理規則，尋找下列轉換 hello:</span><span class="sxs-lookup"><span data-stu-id="46217-285">Going back toohello **In from AD – User AccountEnabled** Synchronization Rule, you find hello following transformations:</span></span>

![<span data-ttu-id="46217-286">同步處理規則編輯器中的轉換索引標籤</span><span class="sxs-lookup"><span data-stu-id="46217-286">Transformations tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncruletransformations.png)

<span data-ttu-id="46217-287">tooput 在內容中，在帳戶資源樹系部署中，此組態是預期的 toofind hello 帳戶樹系中已啟用的帳戶和停用的帳戶在 hello 資源樹系 Exchange 和 Lync 設定。</span><span class="sxs-lookup"><span data-stu-id="46217-287">tooput this configuration in context, in an Account-Resource forest deployment, it is expected toofind an enabled account in hello account forest and a disabled account in hello resource forest with Exchange and Lync settings.</span></span> <span data-ttu-id="46217-288">hello 您正在查看的同步處理規則包含所需的登入的 hello 屬性，這些屬性應該從 hello 樹系沒有已啟用的帳戶。</span><span class="sxs-lookup"><span data-stu-id="46217-288">hello Synchronization Rule you are looking at contains hello attributes required for sign-in and these attributes should flow from hello forest where there is an enabled account.</span></span> <span data-ttu-id="46217-289">這些屬性流程會全部放在一個同步處理規則中。</span><span class="sxs-lookup"><span data-stu-id="46217-289">All these attribute flows are put together in one Synchronization Rule.</span></span>

<span data-ttu-id="46217-290">轉換可具有不同類型：Constant、Direct 和 Expression。</span><span class="sxs-lookup"><span data-stu-id="46217-290">A transformation can have different types: Constant, Direct, and Expression.</span></span>

* <span data-ttu-id="46217-291">Constant 流程會一律流送硬式編碼值。</span><span class="sxs-lookup"><span data-stu-id="46217-291">A constant flow always flows a hardcoded value.</span></span> <span data-ttu-id="46217-292">在上述的 hello 情況下，它一律會將 hello 值**True**中名為 hello metaverse 屬性**accountEnabled**。</span><span class="sxs-lookup"><span data-stu-id="46217-292">In hello case above, it always sets hello value **True** in hello metaverse attribute named **accountEnabled**.</span></span>
* <span data-ttu-id="46217-293">「 直接 」 流程一律傳送 hello hello 做為來源 toohello 目標屬性中的 hello 屬性值為是。</span><span class="sxs-lookup"><span data-stu-id="46217-293">A direct flow always flows hello value of hello attribute in hello source toohello target attribute as-is.</span></span>
* <span data-ttu-id="46217-294">hello 第三個流程類型是運算式，它可讓您更進階的組態。</span><span class="sxs-lookup"><span data-stu-id="46217-294">hello third flow type is Expression and it allows for more advanced configurations.</span></span>

<span data-ttu-id="46217-295">hello 運算式語言是 VBA (Visual Basic 應用程式)，因此人員體驗的 Microsoft Office 或 VBScript 會辨識 hello 格式。</span><span class="sxs-lookup"><span data-stu-id="46217-295">hello expression language is VBA (Visual Basic for Applications), so people with experience of Microsoft Office or VBScript will recognize hello format.</span></span> <span data-ttu-id="46217-296">屬性會包在方括號之中，例如 [attributeName]。</span><span class="sxs-lookup"><span data-stu-id="46217-296">Attributes are enclosed in square brackets, [attributeName].</span></span> <span data-ttu-id="46217-297">屬性名稱和函式名稱會區分大小寫，但 hello 同步處理規則編輯器會評估 hello 運算式，並提供警告如果 hello 運算式無效。</span><span class="sxs-lookup"><span data-stu-id="46217-297">Attribute names and function names are case-sensitive, but hello Synchronization Rules Editor evaluates hello expressions and provide a warning if hello expression is not valid.</span></span> <span data-ttu-id="46217-298">所有運算式將會以具有巢狀函式的單一行表示。</span><span class="sxs-lookup"><span data-stu-id="46217-298">All expressions are expressed on a single line with nested functions.</span></span> <span data-ttu-id="46217-299">tooshow hello 電源的 hello 設定語言，以下是 pwdLastSet，但插入額外的註解的 hello 流程：</span><span class="sxs-lookup"><span data-stu-id="46217-299">tooshow hello power of hello configuration language, here is hello flow for pwdLastSet, but with additional comments inserted:</span></span>

```
// If-then-else
IIF(
// (hello evaluation for IIF) Is hello attribute pwdLastSet present in AD?
IsPresent([pwdLastSet]),
// (hello True part of IIF) If it is, then from right tooleft, convert hello AD time format tooa .Net datetime, change it toohello time format used by Azure AD, and finally convert it tooa string.
CStr(FormatDateTime(DateFromNum([pwdLastSet]),"yyyyMMddHHmmss.0Z")),
// (hello False part of IIF) Nothing toocontribute
NULL
)
```

<span data-ttu-id="46217-300">請參閱[了解宣告式佈建運算式](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md)如需有關屬性流程中的 hello 運算式語言。</span><span class="sxs-lookup"><span data-stu-id="46217-300">See [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) for more information on hello expression language for attribute flows.</span></span>

### <a name="precedence"></a><span data-ttu-id="46217-301">優先順序</span><span class="sxs-lookup"><span data-stu-id="46217-301">Precedence</span></span>
<span data-ttu-id="46217-302">您現在已看一些個別的同步處理規則，但 hello 規則會在 hello 組態中一起運作。</span><span class="sxs-lookup"><span data-stu-id="46217-302">You have now looked at some individual Synchronization Rules, but hello rules work together in hello configuration.</span></span> <span data-ttu-id="46217-303">在某些情況下，屬性值由多個同步處理規則 toohello 相同的目標屬性。</span><span class="sxs-lookup"><span data-stu-id="46217-303">In some cases, an attribute value is contributed from multiple synchronization rules toohello same target attribute.</span></span> <span data-ttu-id="46217-304">在此情況下，屬性優先順序是使用的 toodetermine wins 用屬性。</span><span class="sxs-lookup"><span data-stu-id="46217-304">In this case, attribute precedence is used toodetermine which attribute wins.</span></span> <span data-ttu-id="46217-305">例如，查看 hello 屬性 sourceAnchor。</span><span class="sxs-lookup"><span data-stu-id="46217-305">As an example, look at hello attribute sourceAnchor.</span></span> <span data-ttu-id="46217-306">這個屬性是無法在 tooAzure AD toosign 重要屬性 toobe。</span><span class="sxs-lookup"><span data-stu-id="46217-306">This attribute is an important attribute toobe able toosign in tooAzure AD.</span></span> <span data-ttu-id="46217-307">您可以在兩個不同的同步處理規則中看到此屬性的屬性流程：**In from AD – User AccountEnabled** 和 **In from AD – User Common**。</span><span class="sxs-lookup"><span data-stu-id="46217-307">You can find an attribute flow for this attribute in two different Synchronization Rules, **In from AD – User AccountEnabled** and **In from AD – User Common**.</span></span> <span data-ttu-id="46217-308">由於 tooSynchronization 規則優先順序，hello sourceAnchor 屬性被由 hello 樹系中使用已啟用的帳戶第一次當有數個物件聯結的 toohello metaverse 物件。</span><span class="sxs-lookup"><span data-stu-id="46217-308">Due tooSynchronization Rule precedence, hello sourceAnchor attribute is contributed from hello forest with an enabled account first when there are several objects joined toohello metaverse object.</span></span> <span data-ttu-id="46217-309">如果已啟用的帳戶，則 hello 同步處理引擎會使用 hello 所有同步處理規則**中 from AD – User Common**。</span><span class="sxs-lookup"><span data-stu-id="46217-309">If there are no enabled accounts, then hello sync engine uses hello catch-all Synchronization Rule **In from AD – User Common**.</span></span> <span data-ttu-id="46217-310">此組態可確保即使是已停用的帳戶，仍有 sourceAnchor。</span><span class="sxs-lookup"><span data-stu-id="46217-310">This configuration ensures that even for accounts that are disabled, there is still a sourceAnchor.</span></span>

![同步處理規則 (輸入)](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulesinbound.png)

<span data-ttu-id="46217-312">同步處理規則的 hello 優先順序是由 hello 安裝精靈設定群組中。</span><span class="sxs-lookup"><span data-stu-id="46217-312">hello precedence for Synchronization Rules is set in groups by hello installation wizard.</span></span> <span data-ttu-id="46217-313">在群組中的所有規則都有 hello 名稱相同，但它們所連接的連接的 toodifferent 目錄。</span><span class="sxs-lookup"><span data-stu-id="46217-313">All rules in a group have hello same name, but they are connected toodifferent connected directories.</span></span> <span data-ttu-id="46217-314">hello 安裝精靈會讓 hello 規則**中 from AD – User Join**最高優先順序，且它會逐一查看所有連接的 AD 目錄。</span><span class="sxs-lookup"><span data-stu-id="46217-314">hello installation wizard gives hello rule **In from AD – User Join** highest precedence and it iterates over all connected AD directories.</span></span> <span data-ttu-id="46217-315">接著會繼續與 hello 下一步 群組中預先定義的順序的規則。</span><span class="sxs-lookup"><span data-stu-id="46217-315">It then continues with hello next groups of rules in a predefined order.</span></span> <span data-ttu-id="46217-316">群組內，hello 規則會加入 hello 順序 hello hello 精靈中所加入的連接器。</span><span class="sxs-lookup"><span data-stu-id="46217-316">Inside a group, hello rules are added in hello order hello Connectors were added in hello wizard.</span></span> <span data-ttu-id="46217-317">如果透過 hello 精靈加入另一個連接器，hello 同步處理規則已重新排列和每個群組中最後插入 hello 新連接器的規則。</span><span class="sxs-lookup"><span data-stu-id="46217-317">If another Connector is added through hello wizard, hello Synchronization Rules are reordered and hello new Connector’s rules are inserted last in each group.</span></span>

### <a name="putting-it-all-together"></a><span data-ttu-id="46217-318">總整理</span><span class="sxs-lookup"><span data-stu-id="46217-318">Putting it all together</span></span>
<span data-ttu-id="46217-319">我們現在充分瞭解同步處理規則 toobe 無法 toounderstand hello 組態以 hello 的運作方式不同的同步處理規則。</span><span class="sxs-lookup"><span data-stu-id="46217-319">We now know enough about Synchronization Rules toobe able toounderstand how hello configuration works with hello different Synchronization Rules.</span></span> <span data-ttu-id="46217-320">如果您查詢的使用者和 hello 屬性會造成 toohello metaverse，hello 規則會套用順序的 hello:</span><span class="sxs-lookup"><span data-stu-id="46217-320">If you look at a user and hello attributes that are contributed toohello metaverse, hello rules are applied in hello following order:</span></span>

| <span data-ttu-id="46217-321">名稱</span><span class="sxs-lookup"><span data-stu-id="46217-321">Name</span></span> | <span data-ttu-id="46217-322">註解</span><span class="sxs-lookup"><span data-stu-id="46217-322">Comment</span></span> |
|:--- |:--- |
| <span data-ttu-id="46217-323">In from AD - User Join</span><span class="sxs-lookup"><span data-stu-id="46217-323">In from AD – User Join</span></span> |<span data-ttu-id="46217-324">聯結連接器空間物件與 Metaverse 的規則。</span><span class="sxs-lookup"><span data-stu-id="46217-324">Rule for joining connector space objects with metaverse.</span></span> |
| <span data-ttu-id="46217-325">In from AD – UserAccount Enabled</span><span class="sxs-lookup"><span data-stu-id="46217-325">In from AD – UserAccount Enabled</span></span> |<span data-ttu-id="46217-326">登入 tooAzure AD 和 Office 365 所需的屬性。</span><span class="sxs-lookup"><span data-stu-id="46217-326">Attributes required for sign-in tooAzure AD and Office 365.</span></span> <span data-ttu-id="46217-327">我們想要從啟用的 hello 帳戶的這些屬性。</span><span class="sxs-lookup"><span data-stu-id="46217-327">We want these attributes from hello enabled account.</span></span> |
| <span data-ttu-id="46217-328">In from AD – User Common from Exchange</span><span class="sxs-lookup"><span data-stu-id="46217-328">In from AD – User Common from Exchange</span></span> |<span data-ttu-id="46217-329">Hello 全域通訊清單中找到的屬性。</span><span class="sxs-lookup"><span data-stu-id="46217-329">Attributes found in hello Global Address List.</span></span> <span data-ttu-id="46217-330">我們假設 hello 資料品質最佳 hello 我們已在此找到 hello 使用者信箱的樹系中。</span><span class="sxs-lookup"><span data-stu-id="46217-330">We assume hello data quality is best in hello forest where we have found hello user’s mailbox.</span></span> |
| <span data-ttu-id="46217-331">In from AD – User Common</span><span class="sxs-lookup"><span data-stu-id="46217-331">In from AD – User Common</span></span> |<span data-ttu-id="46217-332">Hello 全域通訊清單中找到的屬性。</span><span class="sxs-lookup"><span data-stu-id="46217-332">Attributes found in hello Global Address List.</span></span> <span data-ttu-id="46217-333">如果找不到信箱，任何聯結的物件都可以構成 hello 屬性值。</span><span class="sxs-lookup"><span data-stu-id="46217-333">In case we didn’t find a mailbox, any other joined object can contribute hello attribute value.</span></span> |
| <span data-ttu-id="46217-334">In from AD – User Exchange</span><span class="sxs-lookup"><span data-stu-id="46217-334">In from AD – User Exchange</span></span> |<span data-ttu-id="46217-335">只有在偵測到 Exchange 後才存在。</span><span class="sxs-lookup"><span data-stu-id="46217-335">Only exists if Exchange has been detected.</span></span> <span data-ttu-id="46217-336">它會流送所有基礎結構 Exchange 屬性。</span><span class="sxs-lookup"><span data-stu-id="46217-336">It flows all infrastructure Exchange attributes.</span></span> |
| <span data-ttu-id="46217-337">In from AD – User Lync</span><span class="sxs-lookup"><span data-stu-id="46217-337">In from AD – User Lync</span></span> |<span data-ttu-id="46217-338">只有在偵測到 Lync 後才存在。</span><span class="sxs-lookup"><span data-stu-id="46217-338">Only exists if Lync has been detected.</span></span> <span data-ttu-id="46217-339">它會流送所有基礎結構 Lync 屬性。</span><span class="sxs-lookup"><span data-stu-id="46217-339">It flows all infrastructure Lync attributes.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="46217-340">後續步驟</span><span class="sxs-lookup"><span data-stu-id="46217-340">Next steps</span></span>
* <span data-ttu-id="46217-341">深入了解 hello 組態模型[了解宣告式佈建](active-directory-aadconnectsync-understanding-declarative-provisioning.md)。</span><span class="sxs-lookup"><span data-stu-id="46217-341">Read more about hello configuration model in [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span></span>
* <span data-ttu-id="46217-342">如需詳細資訊中的 hello 運算式語言[了解宣告式佈建運算式](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md)。</span><span class="sxs-lookup"><span data-stu-id="46217-342">Read more about hello expression language in [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span></span>
* <span data-ttu-id="46217-343">繼續閱讀 hello 鶈蜪組態中的運作方式[了解使用者和連絡人](active-directory-aadconnectsync-understanding-users-and-contacts.md)</span><span class="sxs-lookup"><span data-stu-id="46217-343">Continue reading how hello out-of-box configuration works in [Understanding Users and Contacts](active-directory-aadconnectsync-understanding-users-and-contacts.md)</span></span>
* <span data-ttu-id="46217-344">請參閱 toomake 實際變更使用中的宣告式佈建[toomake 變更 toohello 預設組態的方式](active-directory-aadconnectsync-change-the-configuration.md)。</span><span class="sxs-lookup"><span data-stu-id="46217-344">See how toomake a practical change using declarative provisioning in [How toomake a change toohello default configuration](active-directory-aadconnectsync-change-the-configuration.md).</span></span>

<span data-ttu-id="46217-345">**概觀主題**</span><span class="sxs-lookup"><span data-stu-id="46217-345">**Overview topics**</span></span>

* [<span data-ttu-id="46217-346">Azure AD Connect 同步處理：了解及自訂同步處理</span><span class="sxs-lookup"><span data-stu-id="46217-346">Azure AD Connect sync: Understand and customize synchronization</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="46217-347">整合內部部署身分識別與 Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="46217-347">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)

