---
title: "Azure AD Connect 同步：設定篩選 | Microsoft Docs"
description: "說明如何在 Azure AD Connect 同步處理篩選 tooconfigure。"
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: 880facf6-1192-40e9-8181-544c0759d506
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/12/2017
ms.author: billmath
ms.openlocfilehash: 97979b508c560a6de6cb091b1b621bc1d51b25c4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-sync-configure-filtering"></a><span data-ttu-id="790fd-103">Azure AD Connect 同步處理：設定篩選</span><span class="sxs-lookup"><span data-stu-id="790fd-103">Azure AD Connect sync: Configure filtering</span></span>
<span data-ttu-id="790fd-104">使用篩選功能可讓您控制內部部署目錄中的哪些物件應該出現在 Azure Active Directory 中。</span><span class="sxs-lookup"><span data-stu-id="790fd-104">By using filtering, you can control which objects appear in Azure Active Directory (Azure AD) from your on-premises directory.</span></span> <span data-ttu-id="790fd-105">hello 預設組態會 hello 設定樹系中的所有網域中的所有物件。</span><span class="sxs-lookup"><span data-stu-id="790fd-105">hello default configuration takes all objects in all domains in hello configured forests.</span></span> <span data-ttu-id="790fd-106">一般情況下，這是建議的組態 hello。</span><span class="sxs-lookup"><span data-stu-id="790fd-106">In general, this is hello recommended configuration.</span></span> <span data-ttu-id="790fd-107">完整的全域通訊清單對於使用 Exchange Online 和商務用 Skype 等 Office 365 工作負載的使用者來說十分方便，因為如此一來，他們就可以傳送電子郵件和呼叫每個人。</span><span class="sxs-lookup"><span data-stu-id="790fd-107">Users using Office 365 workloads, such as Exchange Online and Skype for Business, benefit from a complete Global Address List so they can send email and call everyone.</span></span> <span data-ttu-id="790fd-108">Hello 預設組態，他們必須使用相同的經驗，他們必須在內部部署 Exchange 或 Lync 實作 hello。</span><span class="sxs-lookup"><span data-stu-id="790fd-108">With hello default configuration, they would have hello same experience that they would have with an on-premises implementation of Exchange or Lync.</span></span>

<span data-ttu-id="790fd-109">在某些情況下不過，您需要進行一些變更 toohello 預設設定。</span><span class="sxs-lookup"><span data-stu-id="790fd-109">In some cases however, you're required make some changes toohello default configuration.</span></span> <span data-ttu-id="790fd-110">這裡有一些範例：</span><span class="sxs-lookup"><span data-stu-id="790fd-110">Here are some examples:</span></span>

* <span data-ttu-id="790fd-111">您計劃 toouse hello[多 Azure AD 目錄拓撲](active-directory-aadconnect-topologies.md#each-object-only-once-in-an-azure-ad-tenant)。</span><span class="sxs-lookup"><span data-stu-id="790fd-111">You plan toouse hello [multi-Azure AD directory topology](active-directory-aadconnect-topologies.md#each-object-only-once-in-an-azure-ad-tenant).</span></span> <span data-ttu-id="790fd-112">然後，您需要 tooapply 篩選 toocontrol 哪個物件處於已同步處理的 tooa 特定 Azure AD 目錄。</span><span class="sxs-lookup"><span data-stu-id="790fd-112">Then you need tooapply a filter toocontrol which objects are synchronized tooa particular Azure AD directory.</span></span>
* <span data-ttu-id="790fd-113">您要執行 Azure 或 Office 365 試驗，因此只想要使用 Azure AD 中的部分使用者。</span><span class="sxs-lookup"><span data-stu-id="790fd-113">You run a pilot for Azure or Office 365 and you only want a subset of users in Azure AD.</span></span> <span data-ttu-id="790fd-114">在 hello 小型試驗，就不重要 toohave 完整的全域通訊清單 toodemonstrate hello 功能。</span><span class="sxs-lookup"><span data-stu-id="790fd-114">In hello small pilot, it's not important toohave a complete Global Address List toodemonstrate hello functionality.</span></span>
* <span data-ttu-id="790fd-115">Azure AD 中有很多您不需要的服務帳戶和其他非個人帳戶。</span><span class="sxs-lookup"><span data-stu-id="790fd-115">You have many service accounts and other nonpersonal accounts that you don't want in Azure AD.</span></span>
* <span data-ttu-id="790fd-116">為了符合法規，您不能刪除任何內部部署的使用者帳戶。</span><span class="sxs-lookup"><span data-stu-id="790fd-116">For compliance reasons, you don't delete any user accounts on-premises.</span></span> <span data-ttu-id="790fd-117">你只能停用它們。</span><span class="sxs-lookup"><span data-stu-id="790fd-117">You only disable them.</span></span> <span data-ttu-id="790fd-118">但在 Azure AD 中，您只想使用中帳戶 toobe 存在。</span><span class="sxs-lookup"><span data-stu-id="790fd-118">But in Azure AD, you only want active accounts toobe present.</span></span>

<span data-ttu-id="790fd-119">本文件涵蓋如何 tooconfigure hello 不同篩選方法。</span><span class="sxs-lookup"><span data-stu-id="790fd-119">This article covers how tooconfigure hello different filtering methods.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="790fd-120">Microsoft 不支援修改或操作正式記載的 hello 動作之外的 Azure AD Connect 同步處理。</span><span class="sxs-lookup"><span data-stu-id="790fd-120">Microsoft doesn't support modifying or operating Azure AD Connect sync outside of hello actions that are formally documented.</span></span> <span data-ttu-id="790fd-121">任何這些動作都可能會導致 Azure AD Connect 同步處理的不一致或不受支援狀態。如此一來，Microsoft 無法提供這類部署的技術支援人員。</span><span class="sxs-lookup"><span data-stu-id="790fd-121">Any of these actions might result in an inconsistent or unsupported state of Azure AD Connect sync. As a result, Microsoft can't provide technical support for such deployments.</span></span>

## <a name="basics-and-important-notes"></a><span data-ttu-id="790fd-122">基本概念和重要事項</span><span class="sxs-lookup"><span data-stu-id="790fd-122">Basics and important notes</span></span>
<span data-ttu-id="790fd-123">在 Azure AD Connect 同步處理中，您隨時都能啟用篩選功能。</span><span class="sxs-lookup"><span data-stu-id="790fd-123">In Azure AD Connect sync, you can enable filtering at any time.</span></span> <span data-ttu-id="790fd-124">如果您使用預設設定的目錄同步作業啟動，然後設定 篩選時，會被篩選掉的 hello 物件不再同步的 tooAzure AD。</span><span class="sxs-lookup"><span data-stu-id="790fd-124">If you start with a default configuration of directory synchronization and then configure filtering, hello objects that are filtered out are no longer synchronized tooAzure AD.</span></span> <span data-ttu-id="790fd-125">因為這項變更，系統會在 Azure AD 中，刪除 Azure AD 中先前已同步處理但接著篩選出的所有物件。</span><span class="sxs-lookup"><span data-stu-id="790fd-125">Because of this change, any objects in Azure AD that were previously synchronized but were then filtered are deleted in Azure AD.</span></span>

<span data-ttu-id="790fd-126">開始進行的變更 toofiltering 之前，請確定您[停用排程的工作的 hello](#disable-scheduled-task)讓您不小心不要匯出您還沒有尚未確認 toobe 正確的變更。</span><span class="sxs-lookup"><span data-stu-id="790fd-126">Before you start making changes toofiltering, make sure that you [disable hello scheduled task](#disable-scheduled-task) so you don't accidentally export changes that you haven't yet verified toobe correct.</span></span>

<span data-ttu-id="790fd-127">因為篩選可以移除在 hello 的許多物件相同的時間，您想要確定新的篩選器都正確無誤，然後再開始匯出任何 toomake 變更 tooAzure AD。</span><span class="sxs-lookup"><span data-stu-id="790fd-127">Because filtering can remove many objects at hello same time, you want toomake sure that your new filters are correct before you start exporting any changes tooAzure AD.</span></span> <span data-ttu-id="790fd-128">在您完成 hello 組態步驟之後，我們強烈建議您遵循 hello[驗證步驟](#apply-and-verify-changes)您匯出，並讓變更 tooAzure AD 之前。</span><span class="sxs-lookup"><span data-stu-id="790fd-128">After you've completed hello configuration steps, we strongly recommend that you follow hello [verification steps](#apply-and-verify-changes) before you export and make changes tooAzure AD.</span></span>

<span data-ttu-id="790fd-129">您無法刪除許多物件不小心 hello tooprotect 功能 」[防止被意外刪除](active-directory-aadconnectsync-feature-prevent-accidental-deletes.md)」 預設為開啟。</span><span class="sxs-lookup"><span data-stu-id="790fd-129">tooprotect you from deleting many objects by accident, hello feature "[prevent accidental deletes](active-directory-aadconnectsync-feature-prevent-accidental-deletes.md)" is on by default.</span></span> <span data-ttu-id="790fd-130">如果您刪除到期的許多物件 toofiltering (依預設 500)，您需要在此發行項 tooallow hello toofollow hello 步驟刪除 toogo 透過 tooAzure AD。</span><span class="sxs-lookup"><span data-stu-id="790fd-130">If you delete many objects due toofiltering (500 by default), you need toofollow hello steps in this article tooallow hello deletes toogo through tooAzure AD.</span></span>

<span data-ttu-id="790fd-131">如果您使用組建 2015 年 11 月之前 ([1.0.9125](active-directory-aadconnect-version-history.md#1091250))、 進行變更 tooa 篩選組態，並使用密碼同步處理，則您需要 tootrigger 完整同步處理所有密碼之後您已經完成 hello 設定。</span><span class="sxs-lookup"><span data-stu-id="790fd-131">If you use a build before November 2015 ([1.0.9125](active-directory-aadconnect-version-history.md#1091250)), make a change tooa filter configuration, and use password synchronization, then you need tootrigger a full sync of all passwords after you've completed hello configuration.</span></span> <span data-ttu-id="790fd-132">如需如何 tootrigger 密碼完整同步處理步驟，請參閱[觸發完整同步處理所有密碼](active-directory-aadconnectsync-troubleshoot-password-synchronization.md#trigger-a-full-sync-of-all-passwords)。</span><span class="sxs-lookup"><span data-stu-id="790fd-132">For steps on how tootrigger a password full sync, see [Trigger a full sync of all passwords](active-directory-aadconnectsync-troubleshoot-password-synchronization.md#trigger-a-full-sync-of-all-passwords).</span></span> <span data-ttu-id="790fd-133">如果您要建置 1.0.9125 或更新版本中，然後 hello regular**完整同步處理**動作也會計算是否應該同步處理密碼，以及是否不再需要這個額外步驟。</span><span class="sxs-lookup"><span data-stu-id="790fd-133">If you're on build 1.0.9125 or later, then hello regular **full synchronization** action also calculates whether passwords should be synchronized and if this extra step is no longer required.</span></span>

<span data-ttu-id="790fd-134">如果**使用者**而意外刪除物件在 Azure AD 中由於篩選錯誤，您可以重新建立 hello 使用者物件在 Azure AD 中移除篩選組態。</span><span class="sxs-lookup"><span data-stu-id="790fd-134">If **user** objects were inadvertently deleted in Azure AD because of a filtering error, you can recreate hello user objects in Azure AD by removing your filtering configurations.</span></span> <span data-ttu-id="790fd-135">然後您可以再次同步處理您的目錄。</span><span class="sxs-lookup"><span data-stu-id="790fd-135">Then you can synchronize your directories again.</span></span> <span data-ttu-id="790fd-136">這個動作會從 hello 資源回收筒還原 hello 使用者，在 Azure AD 中。</span><span class="sxs-lookup"><span data-stu-id="790fd-136">This action restores hello users from hello recycle bin in Azure AD.</span></span> <span data-ttu-id="790fd-137">不過，您無法取消刪除其他物件類型。</span><span class="sxs-lookup"><span data-stu-id="790fd-137">However, you can't undelete other object types.</span></span> <span data-ttu-id="790fd-138">例如，如果您不小心刪除安全性群組，而它是使用的 tooACL 資源，hello 群組和其 Acl 無法復原。</span><span class="sxs-lookup"><span data-stu-id="790fd-138">For example, if you accidentally delete a security group and it was used tooACL a resource, hello group and its ACLs can't be recovered.</span></span>

<span data-ttu-id="790fd-139">Azure AD Connect 只會刪除它一次被視為 toobe 範圍中的物件。</span><span class="sxs-lookup"><span data-stu-id="790fd-139">Azure AD Connect only deletes objects that it has once considered toobe in scope.</span></span> <span data-ttu-id="790fd-140">如果 Azure AD 中有物件是由另一個同步處理引擎所建立且不在範圍內，則新增篩選並不會移除這些物件。</span><span class="sxs-lookup"><span data-stu-id="790fd-140">If there are objects in Azure AD that were created by another sync engine and these objects aren't in scope, adding filtering doesn't remove them.</span></span> <span data-ttu-id="790fd-141">例如，如果您開始在 Azure AD 中建立您的整個目錄的完整副本的 DirSync 伺服器，而且您安裝新的 Azure AD Connect 同步處理伺服器以平行方式從 hello 開頭啟用篩選條件時，Azure AD Connect 並不會移除額外的 hello以 DirSync 所建立的物件。</span><span class="sxs-lookup"><span data-stu-id="790fd-141">For example, if you start with a DirSync server that created a complete copy of your entire directory in Azure AD, and you install a new Azure AD Connect sync server in parallel with filtering enabled from hello beginning, Azure AD Connect doesn't remove hello extra objects that are created by DirSync.</span></span>

<span data-ttu-id="790fd-142">當您安裝或升級 Azure AD Connect tooa 較新版本時，會保留 hello 篩選組態。</span><span class="sxs-lookup"><span data-stu-id="790fd-142">hello filtering configuration is retained when you install or upgrade tooa newer version of Azure AD Connect.</span></span> <span data-ttu-id="790fd-143">其永遠 hello 組態的最佳作法 tooverify 不慎未變更後的第一次同步處理循環執行 hello 之前升級 tooa 較新版本。</span><span class="sxs-lookup"><span data-stu-id="790fd-143">It's always a best practice tooverify that hello configuration wasn't inadvertently changed after an upgrade tooa newer version before running hello first synchronization cycle.</span></span>

<span data-ttu-id="790fd-144">如果您有多個樹系，則您必須套用篩選此主題 tooevery 樹系中所述設定的 hello (假設您想要 hello 相同所有組態)。</span><span class="sxs-lookup"><span data-stu-id="790fd-144">If you have more than one forest, then you must apply hello filtering configurations that are described in this topic tooevery forest (assuming that you want hello same configuration for all of them).</span></span>

### <a name="disable-hello-scheduled-task"></a><span data-ttu-id="790fd-145">停用 hello 排定的工作</span><span class="sxs-lookup"><span data-stu-id="790fd-145">Disable hello scheduled task</span></span>
<span data-ttu-id="790fd-146">toodisable hello 內建排程器觸發 un ciclo de sincronización 每隔 30 分鐘，請遵循下列步驟：</span><span class="sxs-lookup"><span data-stu-id="790fd-146">toodisable hello built-in scheduler that triggers a synchronization cycle every 30 minutes, follow these steps:</span></span>

1. <span data-ttu-id="790fd-147">移 tooa PowerShell 命令提示字元。</span><span class="sxs-lookup"><span data-stu-id="790fd-147">Go tooa PowerShell prompt.</span></span>
2. <span data-ttu-id="790fd-148">執行`Set-ADSyncScheduler -SyncCycleEnabled $False`toodisable hello 排程器。</span><span class="sxs-lookup"><span data-stu-id="790fd-148">Run `Set-ADSyncScheduler -SyncCycleEnabled $False` toodisable hello scheduler.</span></span>
3. <span data-ttu-id="790fd-149">變更 hello 會記載在本文中。</span><span class="sxs-lookup"><span data-stu-id="790fd-149">Make hello changes that are documented in this article.</span></span>
4. <span data-ttu-id="790fd-150">執行`Set-ADSyncScheduler -SyncCycleEnabled $True`tooenable hello 排程器一次。</span><span class="sxs-lookup"><span data-stu-id="790fd-150">Run `Set-ADSyncScheduler -SyncCycleEnabled $True` tooenable hello scheduler again.</span></span>

<span data-ttu-id="790fd-151">**如果您使用 1.1.105.0 之前的 Azure AD Connect 組建**</span><span class="sxs-lookup"><span data-stu-id="790fd-151">**If you use an Azure AD Connect build before 1.1.105.0**</span></span>  
<span data-ttu-id="790fd-152">toodisable hello 排程的工作的觸發程序 un ciclo de sincronización 每隔三小時，請遵循下列步驟：</span><span class="sxs-lookup"><span data-stu-id="790fd-152">toodisable hello scheduled task that triggers a synchronization cycle every three hours, follow these steps:</span></span>

1. <span data-ttu-id="790fd-153">啟動**工作排程器**從 hello**啟動**功能表。</span><span class="sxs-lookup"><span data-stu-id="790fd-153">Start **Task Scheduler** from hello **Start** menu.</span></span>
2. <span data-ttu-id="790fd-154">直接在**工作排程器程式庫**，尋找名為 「 hello 任務**Azure AD Sync Scheduler**，按一下滑鼠右鍵，然後選取**停用**。</span><span class="sxs-lookup"><span data-stu-id="790fd-154">Directly under **Task Scheduler Library**, find hello task named **Azure AD Sync Scheduler**, right-click, and select **Disable**.</span></span>  
   <span data-ttu-id="790fd-155">![](./media/active-directory-aadconnectsync-configure-filtering/taskscheduler.png)</span><span class="sxs-lookup"><span data-stu-id="790fd-155">![Task Scheduler](./media/active-directory-aadconnectsync-configure-filtering/taskscheduler.png)</span></span>  
3. <span data-ttu-id="790fd-156">您現在可以進行組態變更，並從 hello 手動執行 hello 同步處理引擎**同步處理服務管理員**主控台。</span><span class="sxs-lookup"><span data-stu-id="790fd-156">You can now make configuration changes and run hello sync engine manually from hello **Synchronization Service Manager** console.</span></span>

<span data-ttu-id="790fd-157">完成篩選的所有變更之後，別忘了回 toocome 和**啟用**hello 工作一次。</span><span class="sxs-lookup"><span data-stu-id="790fd-157">After you've completed all your filtering changes, don't forget toocome back and **Enable** hello task again.</span></span>

## <a name="filtering-options"></a><span data-ttu-id="790fd-158">篩選選項</span><span class="sxs-lookup"><span data-stu-id="790fd-158">Filtering options</span></span>
<span data-ttu-id="790fd-159">您可以套用下列篩選組態類型 toohello 目錄同步作業工具的 hello:</span><span class="sxs-lookup"><span data-stu-id="790fd-159">You can apply hello following filtering configuration types toohello directory synchronization tool:</span></span>

* <span data-ttu-id="790fd-160">[**群組為基礎**](#group-based-filtering)： 單一的群組為基礎的篩選只能設定初始安裝上使用 hello 安裝精靈。</span><span class="sxs-lookup"><span data-stu-id="790fd-160">[**Group-based**](#group-based-filtering): Filtering based on a single group can only be configured on initial installation by using hello installation wizard.</span></span>
* <span data-ttu-id="790fd-161">[**網域型**](#domain-based-filtering)： 使用此選項，您可以選取哪些網域同步處理 tooAzure AD。</span><span class="sxs-lookup"><span data-stu-id="790fd-161">[**Domain-based**](#domain-based-filtering): By using this option, you can select which domains synchronize tooAzure AD.</span></span> <span data-ttu-id="790fd-162">您也可以加入和從 hello 同步作業引擎組態移除網域，當您安裝 Azure AD Connect 同步處理之後，請變更 tooyour 在內部部署基礎結構。</span><span class="sxs-lookup"><span data-stu-id="790fd-162">You can also add and remove domains from hello sync engine configuration when you make changes tooyour on-premises infrastructure after you install Azure AD Connect sync.</span></span>
* <span data-ttu-id="790fd-163">[**組織單位 (OU) – 基礎**](#organizational-unitbased-filtering)： 使用此選項，您可以選取哪些 Ou 同步 tooAzure AD。</span><span class="sxs-lookup"><span data-stu-id="790fd-163">[**Organizational unit (OU)–based**](#organizational-unitbased-filtering): By using this option, you can select which OUs synchronize tooAzure AD.</span></span> <span data-ttu-id="790fd-164">此選項會套用在所選組織單位中的所有物件類型上。</span><span class="sxs-lookup"><span data-stu-id="790fd-164">This option is for all object types in selected OUs.</span></span>
* <span data-ttu-id="790fd-165">[**屬性為基礎**](#attribute-based-filtering)： 使用此選項，您可以篩選根據 hello 物件上的屬性值的物件。</span><span class="sxs-lookup"><span data-stu-id="790fd-165">[**Attribute-based**](#attribute-based-filtering): By using this option, you can filter objects based on attribute values on hello objects.</span></span> <span data-ttu-id="790fd-166">您也可以讓不同物件類型透用不同篩選器。</span><span class="sxs-lookup"><span data-stu-id="790fd-166">You can also have different filters for different object types.</span></span>

<span data-ttu-id="790fd-167">您可以使用多個篩選選項 hello 在相同的時間。</span><span class="sxs-lookup"><span data-stu-id="790fd-167">You can use multiple filtering options at hello same time.</span></span> <span data-ttu-id="790fd-168">例如，您可以使用組織單位型篩選 tooonly 包含一個 OU 中的物件。</span><span class="sxs-lookup"><span data-stu-id="790fd-168">For example, you can use OU-based filtering tooonly include objects in one OU.</span></span> <span data-ttu-id="790fd-169">在 hello 相同時間，您可以進一步使用屬性型篩選 toofilter hello 物件。</span><span class="sxs-lookup"><span data-stu-id="790fd-169">At hello same time, you can use attribute-based filtering toofilter hello objects further.</span></span> <span data-ttu-id="790fd-170">當您使用多個篩選的方法時，hello 篩選器會使用邏輯"AND"hello 篩選之間。</span><span class="sxs-lookup"><span data-stu-id="790fd-170">When you use multiple filtering methods, hello filters use a logical "AND" between hello filters.</span></span>

## <a name="domain-based-filtering"></a><span data-ttu-id="790fd-171">網域型篩選</span><span class="sxs-lookup"><span data-stu-id="790fd-171">Domain-based filtering</span></span>
<span data-ttu-id="790fd-172">本章節提供您與 hello 步驟 tooconfigure 網域篩選。</span><span class="sxs-lookup"><span data-stu-id="790fd-172">This section provides you with hello steps tooconfigure your domain filter.</span></span> <span data-ttu-id="790fd-173">如果您加入或移除網域樹系中，安裝 Azure AD Connect 之後，您也可以 tooupdate hello 篩選組態。</span><span class="sxs-lookup"><span data-stu-id="790fd-173">If you added or removed domains in your forest after you installed Azure AD Connect, you also have tooupdate hello filtering configuration.</span></span>

<span data-ttu-id="790fd-174">hello 慣用的方式 toochange 網域為基礎的篩選不執行 hello 安裝精靈，並將變更[網域和 OU 篩選](active-directory-aadconnect-get-started-custom.md#domain-and-ou-filtering)。</span><span class="sxs-lookup"><span data-stu-id="790fd-174">hello preferred way toochange domain-based filtering is by running hello installation wizard and changing [domain and OU filtering](active-directory-aadconnect-get-started-custom.md#domain-and-ou-filtering).</span></span> <span data-ttu-id="790fd-175">hello 安裝精靈會自動記錄在本主題的所有 hello 工作。</span><span class="sxs-lookup"><span data-stu-id="790fd-175">hello installation wizard automates all hello tasks that are documented in this topic.</span></span>

<span data-ttu-id="790fd-176">如果您因為某種原因無法 toorun hello 安裝精靈，您只應該遵循這些步驟。</span><span class="sxs-lookup"><span data-stu-id="790fd-176">You should only follow these steps if you're unable toorun hello installation wizard for some reason.</span></span>

<span data-ttu-id="790fd-177">網域型篩選組態包含下列步驟：</span><span class="sxs-lookup"><span data-stu-id="790fd-177">Domain-based filtering configuration consists of these steps:</span></span>

1. <span data-ttu-id="790fd-178">[選取 hello 網域](#select-domains-to-be-synchronized)想 tooinclude hello 同步處理。</span><span class="sxs-lookup"><span data-stu-id="790fd-178">[Select hello domains](#select-domains-to-be-synchronized) that you want tooinclude in hello synchronization.</span></span>
2. <span data-ttu-id="790fd-179">如需每個加入和移除網域，調整 hello[執行設定檔](#update-run-profiles)。</span><span class="sxs-lookup"><span data-stu-id="790fd-179">For each added and removed domain, adjust hello [run profiles](#update-run-profiles).</span></span>
3. <span data-ttu-id="790fd-180">[套用並驗證變更](#apply-and-verify-changes)。</span><span class="sxs-lookup"><span data-stu-id="790fd-180">[Apply and verify changes](#apply-and-verify-changes).</span></span>

### <a name="select-hello-domains-toobe-synchronized"></a><span data-ttu-id="790fd-181">選取 hello 網域 toobe 同步處理</span><span class="sxs-lookup"><span data-stu-id="790fd-181">Select hello domains toobe synchronized</span></span>
<span data-ttu-id="790fd-182">tooset hello 網域篩選，請執行下列步驟 hello:</span><span class="sxs-lookup"><span data-stu-id="790fd-182">tooset hello domain filter, do hello following steps:</span></span>

1. <span data-ttu-id="790fd-183">登入執行 Azure AD Connect 同步處理所使用的帳戶成員的 hello toohello 伺服器**ADSyncAdmins**安全性群組。</span><span class="sxs-lookup"><span data-stu-id="790fd-183">Sign in toohello server that is running Azure AD Connect sync by using an account that is a member of hello **ADSyncAdmins** security group.</span></span>
2. <span data-ttu-id="790fd-184">啟動**同步處理服務**從 hello**啟動**功能表。</span><span class="sxs-lookup"><span data-stu-id="790fd-184">Start **Synchronization Service** from hello **Start** menu.</span></span>
3. <span data-ttu-id="790fd-185">選取**連接器**，並在 hello**連接器**清單中，選取與 hello 類型 hello 連接器**Active Directory 網域服務**。</span><span class="sxs-lookup"><span data-stu-id="790fd-185">Select **Connectors**, and in hello **Connectors** list, select hello Connector with hello type **Active Directory Domain Services**.</span></span> <span data-ttu-id="790fd-186">在 [動作] 中選取 [屬性]。</span><span class="sxs-lookup"><span data-stu-id="790fd-186">In **Actions**, select **Properties**.</span></span>  
   <span data-ttu-id="790fd-187">![連接器屬性](./media/active-directory-aadconnectsync-configure-filtering/connectorproperties.png)</span><span class="sxs-lookup"><span data-stu-id="790fd-187">![Connector properties](./media/active-directory-aadconnectsync-configure-filtering/connectorproperties.png)</span></span>  
4. <span data-ttu-id="790fd-188">按一下 [設定目錄分割] 。</span><span class="sxs-lookup"><span data-stu-id="790fd-188">Click **Configure Directory Partitions**.</span></span>
5. <span data-ttu-id="790fd-189">在 hello**選取目錄分割**清單，選取，然後視需要取消選取網域。</span><span class="sxs-lookup"><span data-stu-id="790fd-189">In hello **Select directory partitions** list, select and unselect domains as needed.</span></span> <span data-ttu-id="790fd-190">確認已選取您想 toosynchronize 只有 hello 資料分割。</span><span class="sxs-lookup"><span data-stu-id="790fd-190">Verify that only hello partitions that you want toosynchronize are selected.</span></span>  
   <span data-ttu-id="790fd-191">![分割數](./media/active-directory-aadconnectsync-configure-filtering/connectorpartitions.png)</span><span class="sxs-lookup"><span data-stu-id="790fd-191">![Partitions](./media/active-directory-aadconnectsync-configure-filtering/connectorpartitions.png)</span></span>  
   <span data-ttu-id="790fd-192">如果您已變更您的內部部署 Active Directory 基礎結構和加入或移除 hello 樹系的網域，然後按一下 hello**重新整理**按鈕 tooget 更新清單。</span><span class="sxs-lookup"><span data-stu-id="790fd-192">If you've changed your on-premises Active Directory infrastructure and added or removed domains from hello forest, then click hello **Refresh** button tooget an updated list.</span></span> <span data-ttu-id="790fd-193">當您重新整理時，系統會要求您提供認證。</span><span class="sxs-lookup"><span data-stu-id="790fd-193">When you refresh, you're asked for credentials.</span></span> <span data-ttu-id="790fd-194">提供讀取權限 tooWindows Server Active Directory 中的任何認證。</span><span class="sxs-lookup"><span data-stu-id="790fd-194">Provide any credentials with read access tooWindows Server Active Directory.</span></span> <span data-ttu-id="790fd-195">不一定會在 [hello] 對話方塊中預先填入的 toobe hello 使用者。</span><span class="sxs-lookup"><span data-stu-id="790fd-195">It doesn't have toobe hello user that is prepopulated in hello dialog box.</span></span>  
   <span data-ttu-id="790fd-196">![需要重新整理](./media/active-directory-aadconnectsync-configure-filtering/refreshneeded.png)</span><span class="sxs-lookup"><span data-stu-id="790fd-196">![Refresh needed](./media/active-directory-aadconnectsync-configure-filtering/refreshneeded.png)</span></span>  
6. <span data-ttu-id="790fd-197">當您完成時，關閉 hello**屬性**按一下**確定**。</span><span class="sxs-lookup"><span data-stu-id="790fd-197">When you're done, close hello **Properties** dialog by clicking **OK**.</span></span> <span data-ttu-id="790fd-198">如果您將網域移除 hello 樹系時，快顯訊息會顯示已移除網域，並將清除該組態。</span><span class="sxs-lookup"><span data-stu-id="790fd-198">If you removed domains from hello forest, a message pop-up says that a domain was removed and that configuration will be cleaned up.</span></span>
7. <span data-ttu-id="790fd-199">繼續 tooadjust hello[執行設定檔](#update-run-profiles)。</span><span class="sxs-lookup"><span data-stu-id="790fd-199">Continue tooadjust hello [run profiles](#update-run-profiles).</span></span>

### <a name="update-hello-run-profiles"></a><span data-ttu-id="790fd-200">更新執行的 hello 設定檔</span><span class="sxs-lookup"><span data-stu-id="790fd-200">Update hello run profiles</span></span>
<span data-ttu-id="790fd-201">如果您已更新網域篩選，您也需要 tooupdate hello 執行設定檔。</span><span class="sxs-lookup"><span data-stu-id="790fd-201">If you've updated your domain filter, you also need tooupdate hello run profiles.</span></span>

1. <span data-ttu-id="790fd-202">在 hello**連接器**清單中，請確定已選取您在 hello 上一個步驟中變更連接器該 hello。</span><span class="sxs-lookup"><span data-stu-id="790fd-202">In hello **Connectors** list, make sure that hello Connector that you changed in hello previous step is selected.</span></span> <span data-ttu-id="790fd-203">在 [動作] 中選取 [設定執行設定檔]。</span><span class="sxs-lookup"><span data-stu-id="790fd-203">In **Actions**, select **Configure Run Profiles**.</span></span>  
   <span data-ttu-id="790fd-204">![連接器執行設定檔 1](./media/active-directory-aadconnectsync-configure-filtering/connectorrunprofiles1.png)</span><span class="sxs-lookup"><span data-stu-id="790fd-204">![Connector run profiles 1](./media/active-directory-aadconnectsync-configure-filtering/connectorrunprofiles1.png)</span></span>  
2. <span data-ttu-id="790fd-205">尋找並找出下列設定檔的 hello:</span><span class="sxs-lookup"><span data-stu-id="790fd-205">Find and identify hello following profiles:</span></span>
    * <span data-ttu-id="790fd-206">完整匯入</span><span class="sxs-lookup"><span data-stu-id="790fd-206">Full Import</span></span>
    * <span data-ttu-id="790fd-207">完整同步處理</span><span class="sxs-lookup"><span data-stu-id="790fd-207">Full Synchronization</span></span>
    * <span data-ttu-id="790fd-208">差異匯入</span><span class="sxs-lookup"><span data-stu-id="790fd-208">Delta Import</span></span>
    * <span data-ttu-id="790fd-209">差異同步處理</span><span class="sxs-lookup"><span data-stu-id="790fd-209">Delta Synchronization</span></span>
    * <span data-ttu-id="790fd-210">匯出</span><span class="sxs-lookup"><span data-stu-id="790fd-210">Export</span></span>
3. <span data-ttu-id="790fd-211">針對每個設定檔中，調整 hello**加入**和**移除**網域。</span><span class="sxs-lookup"><span data-stu-id="790fd-211">For each profile, adjust hello **added** and **removed** domains.</span></span>
    1. <span data-ttu-id="790fd-212">針對每個 hello 五個設定檔，請勿 hello 下列步驟針對每個**加入**網域：</span><span class="sxs-lookup"><span data-stu-id="790fd-212">For each of hello five profiles, do hello following steps for each **added** domain:</span></span>
        1. <span data-ttu-id="790fd-213">選取執行 hello 設定檔，然後按一下**新步驟**。</span><span class="sxs-lookup"><span data-stu-id="790fd-213">Select hello run profile and click **New Step**.</span></span>
        2. <span data-ttu-id="790fd-214">在 hello**設定步驟** 頁面的 hello**類型**下拉式選單選取 hello 以 hello 身分 hello 設定檔的名稱相同的步驟類型設定。</span><span class="sxs-lookup"><span data-stu-id="790fd-214">On hello **Configure Step** page, in hello **Type** drop-down menu, select hello step type with hello same name as hello profile that you're configuring.</span></span> <span data-ttu-id="790fd-215">然後按 [下一步] 。</span><span class="sxs-lookup"><span data-stu-id="790fd-215">Then click **Next**.</span></span>  
        <span data-ttu-id="790fd-216">![連接器執行設定檔 2](./media/active-directory-aadconnectsync-configure-filtering/runprofilesnewstep1.png)</span><span class="sxs-lookup"><span data-stu-id="790fd-216">![Connector run profiles 2](./media/active-directory-aadconnectsync-configure-filtering/runprofilesnewstep1.png)</span></span>  
        3. <span data-ttu-id="790fd-217">在 hello**連接器設定** 頁面的 hello**磁碟分割**下拉式功能表、 選取 hello 您已新增的 tooyour 網域篩選的 hello 網域名稱。</span><span class="sxs-lookup"><span data-stu-id="790fd-217">On hello **Connector Configuration** page, in hello **Partition** drop-down menu, select hello name of hello domain that you've added tooyour domain filter.</span></span>  
        <span data-ttu-id="790fd-218">![連接器執行設定檔 3](./media/active-directory-aadconnectsync-configure-filtering/runprofilesnewstep2.png)</span><span class="sxs-lookup"><span data-stu-id="790fd-218">![Connector run profiles 3](./media/active-directory-aadconnectsync-configure-filtering/runprofilesnewstep2.png)</span></span>  
        4. <span data-ttu-id="790fd-219">tooclose hello**設定執行設定檔**] 對話方塊中，按一下 [**完成**。</span><span class="sxs-lookup"><span data-stu-id="790fd-219">tooclose hello **Configure Run Profile** dialog, click **Finish**.</span></span>
    2. <span data-ttu-id="790fd-220">針對每個 hello 五個設定檔，請勿 hello 下列步驟針對每個**移除**網域：</span><span class="sxs-lookup"><span data-stu-id="790fd-220">For each of hello five profiles, do hello following steps for each **removed** domain:</span></span>
        1. <span data-ttu-id="790fd-221">選取執行 hello 設定檔。</span><span class="sxs-lookup"><span data-stu-id="790fd-221">Select hello run profile.</span></span>
        2. <span data-ttu-id="790fd-222">如果 hello**值**的 hello**分割**屬性是 GUID，執行步驟並按一下選取的 hello**刪除步驟**。</span><span class="sxs-lookup"><span data-stu-id="790fd-222">If hello **Value** of hello **Partition** attribute is a GUID, select hello run step and click **Delete Step**.</span></span>  
        <span data-ttu-id="790fd-223">![連接器執行設定檔 4](./media/active-directory-aadconnectsync-configure-filtering/runprofilesdeletestep.png)</span><span class="sxs-lookup"><span data-stu-id="790fd-223">![Connector run profiles 4](./media/active-directory-aadconnectsync-configure-filtering/runprofilesdeletestep.png)</span></span>  
    3. <span data-ttu-id="790fd-224">驗證您的變更。</span><span class="sxs-lookup"><span data-stu-id="790fd-224">Verify your change.</span></span> <span data-ttu-id="790fd-225">應該會列出您想 toosynchronize 每個網域，做為每個執行設定檔的步驟。</span><span class="sxs-lookup"><span data-stu-id="790fd-225">Each domain that you want toosynchronize should be listed as a step in each run profile.</span></span>
4. <span data-ttu-id="790fd-226">tooclose hello**設定執行設定檔**] 對話方塊中，按一下 [**確定**。</span><span class="sxs-lookup"><span data-stu-id="790fd-226">tooclose hello **Configure Run Profiles** dialog, click **OK**.</span></span>
5.  <span data-ttu-id="790fd-227">toocomplete hello 組態中，您需要 toorun**完整匯入**和**差異同步處理**。繼續閱讀 hello 區段[套用並驗證變更](#apply-and-verify-changes)。</span><span class="sxs-lookup"><span data-stu-id="790fd-227">toocomplete hello configuration, you need toorun a **Full import** and a **Delta sync**. Continue reading hello section [Apply and verify changes](#apply-and-verify-changes).</span></span>

## <a name="organizational-unitbased-filtering"></a><span data-ttu-id="790fd-228">組織單位型篩選</span><span class="sxs-lookup"><span data-stu-id="790fd-228">Organizational unit–based filtering</span></span>
<span data-ttu-id="790fd-229">hello 慣用的方式 toochange OU 為基礎的篩選不執行 hello 安裝精靈，並將變更[網域和 OU 篩選](active-directory-aadconnect-get-started-custom.md#domain-and-ou-filtering)。</span><span class="sxs-lookup"><span data-stu-id="790fd-229">hello preferred way toochange OU-based filtering is by running hello installation wizard and changing [domain and OU filtering](active-directory-aadconnect-get-started-custom.md#domain-and-ou-filtering).</span></span> <span data-ttu-id="790fd-230">hello 安裝精靈會自動記錄在本主題的所有 hello 工作。</span><span class="sxs-lookup"><span data-stu-id="790fd-230">hello installation wizard automates all hello tasks that are documented in this topic.</span></span>

<span data-ttu-id="790fd-231">如果您因為某種原因無法 toorun hello 安裝精靈，您只應該遵循這些步驟。</span><span class="sxs-lookup"><span data-stu-id="790fd-231">You should only follow these steps if you're unable toorun hello installation wizard for some reason.</span></span>

<span data-ttu-id="790fd-232">tooconfigure 組織單位型篩選，執行下列步驟 hello:</span><span class="sxs-lookup"><span data-stu-id="790fd-232">tooconfigure organizational unit–based filtering, do hello following steps:</span></span>

1. <span data-ttu-id="790fd-233">登入執行 Azure AD Connect 同步處理所使用的帳戶成員的 hello toohello 伺服器**ADSyncAdmins**安全性群組。</span><span class="sxs-lookup"><span data-stu-id="790fd-233">Sign in toohello server that is running Azure AD Connect sync by using an account that is a member of hello **ADSyncAdmins** security group.</span></span>
2. <span data-ttu-id="790fd-234">啟動**同步處理服務**從 hello**啟動**功能表。</span><span class="sxs-lookup"><span data-stu-id="790fd-234">Start **Synchronization Service** from hello **Start** menu.</span></span>
3. <span data-ttu-id="790fd-235">選取**連接器**，並在 hello**連接器**清單中，選取與 hello 類型 hello 連接器**Active Directory 網域服務**。</span><span class="sxs-lookup"><span data-stu-id="790fd-235">Select **Connectors**, and in hello **Connectors** list, select hello Connector with hello type **Active Directory Domain Services**.</span></span> <span data-ttu-id="790fd-236">在 [動作] 中選取 [屬性]。</span><span class="sxs-lookup"><span data-stu-id="790fd-236">In **Actions**, select **Properties**.</span></span>  
   <span data-ttu-id="790fd-237">![連接器屬性](./media/active-directory-aadconnectsync-configure-filtering/connectorproperties.png)</span><span class="sxs-lookup"><span data-stu-id="790fd-237">![Connector properties](./media/active-directory-aadconnectsync-configure-filtering/connectorproperties.png)</span></span>  
4. <span data-ttu-id="790fd-238">按一下**設定目錄分割**，選取您想 tooconfigure，然後再按一下 hello 網域**容器**。</span><span class="sxs-lookup"><span data-stu-id="790fd-238">Click **Configure Directory Partitions**, select hello domain that you want tooconfigure, and then click **Containers**.</span></span>
5. <span data-ttu-id="790fd-239">當系統提示您需要時提供讀取權限 tooyour 內部部署 Active Directory 的任何認證。</span><span class="sxs-lookup"><span data-stu-id="790fd-239">When you're prompted, provide any credentials with read access tooyour on-premises Active Directory.</span></span> <span data-ttu-id="790fd-240">不一定會在 [hello] 對話方塊中預先填入的 toobe hello 使用者。</span><span class="sxs-lookup"><span data-stu-id="790fd-240">It doesn't have toobe hello user that is prepopulated in hello dialog box.</span></span>
6. <span data-ttu-id="790fd-241">在 hello**選取容器**對話方塊中，您不想 toosynchronize 與 hello 雲端目錄，然後再按一下清除 hello Ou**確定**。</span><span class="sxs-lookup"><span data-stu-id="790fd-241">In hello **Select Containers** dialog box, clear hello OUs that you don’t want toosynchronize with hello cloud directory, and then click **OK**.</span></span>  
   <span data-ttu-id="790fd-242">![Hello 選取容器 對話方塊中的 Ou](./media/active-directory-aadconnectsync-configure-filtering/ou.png)</span><span class="sxs-lookup"><span data-stu-id="790fd-242">![OUs in hello Select Containers dialog box](./media/active-directory-aadconnectsync-configure-filtering/ou.png)</span></span>  
   * <span data-ttu-id="790fd-243">hello**電腦**為您的 Windows 10 電腦 toobe 已順利同步處理 tooAzure AD 應該選取的容器。</span><span class="sxs-lookup"><span data-stu-id="790fd-243">hello **Computers** container should be selected for your Windows 10 computers toobe successfully synchronized tooAzure AD.</span></span> <span data-ttu-id="790fd-244">如果加入網域的電腦位於其他組織單位，請確定已選取這些電腦。</span><span class="sxs-lookup"><span data-stu-id="790fd-244">If your domain-joined computers are located in other OUs, make sure those are selected.</span></span>
   * <span data-ttu-id="790fd-245">hello **ForeignSecurityPrincipals**應該選取容器，如果您有多個樹系信任。</span><span class="sxs-lookup"><span data-stu-id="790fd-245">hello **ForeignSecurityPrincipals** container should be selected if you have multiple forests with trusts.</span></span> <span data-ttu-id="790fd-246">此容器允許跨樹系安全性群組成員資格 toobe 解析。</span><span class="sxs-lookup"><span data-stu-id="790fd-246">This container allows cross-forest security group membership toobe resolved.</span></span>
   * <span data-ttu-id="790fd-247">hello **RegisteredDevices**應該選取 OU，如果您啟用 hello 裝置回寫功能。</span><span class="sxs-lookup"><span data-stu-id="790fd-247">hello **RegisteredDevices** OU should be selected if you enabled hello device writeback feature.</span></span> <span data-ttu-id="790fd-248">如果您使用另一個回寫功能，例如群組回寫，請確定已選取這些位置。</span><span class="sxs-lookup"><span data-stu-id="790fd-248">If you use another writeback feature, such as group writeback, make sure these locations are selected.</span></span>
   * <span data-ttu-id="790fd-249">選取使用者、iNetOrgPersons、群組、連絡人和電腦所在位置的其他 OU。</span><span class="sxs-lookup"><span data-stu-id="790fd-249">Select any other OU where Users, iNetOrgPersons, Groups, Contacts, and Computers are located.</span></span> <span data-ttu-id="790fd-250">在 hello 圖片中，所有這些 Ou 位於 hello ManagedObjects OU 中。</span><span class="sxs-lookup"><span data-stu-id="790fd-250">In hello picture, all these OUs are located in hello ManagedObjects OU.</span></span>
   * <span data-ttu-id="790fd-251">如果您使用群組為基礎的篩選，hello hello 群組所在的 OU 必須包含。</span><span class="sxs-lookup"><span data-stu-id="790fd-251">If you use group-based filtering, then hello OU where hello group is located must be included.</span></span>
   * <span data-ttu-id="790fd-252">請注意，您可以設定是否為同步處理新 hello 篩選組態完成之後才加入的 Ou，或未同步處理。</span><span class="sxs-lookup"><span data-stu-id="790fd-252">Note that you can configure whether new OUs that are added after hello filtering configuration finishes are synchronized or not synchronized.</span></span> <span data-ttu-id="790fd-253">請參閱 hello 下一節，如需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="790fd-253">See hello next section for details.</span></span>
7. <span data-ttu-id="790fd-254">當您完成時，關閉 hello**屬性**按一下**確定**。</span><span class="sxs-lookup"><span data-stu-id="790fd-254">When you're done, close hello **Properties** dialog by clicking **OK**.</span></span>
8. <span data-ttu-id="790fd-255">toocomplete hello 組態中，您需要 toorun**完整匯入**和**差異同步處理**。繼續閱讀 hello 區段[套用並驗證變更](#apply-and-verify-changes)。</span><span class="sxs-lookup"><span data-stu-id="790fd-255">toocomplete hello configuration, you need toorun a **Full import** and a **Delta sync**. Continue reading hello section [Apply and verify changes](#apply-and-verify-changes).</span></span>

### <a name="synchronize-new-ous"></a><span data-ttu-id="790fd-256">同步處理新 OU</span><span class="sxs-lookup"><span data-stu-id="790fd-256">Synchronize new OUs</span></span>
<span data-ttu-id="790fd-257">依預設，設定篩選之後，會同步處理建立的新 OU。</span><span class="sxs-lookup"><span data-stu-id="790fd-257">New OUs that are created after filtering has been configured are synchronized by default.</span></span> <span data-ttu-id="790fd-258">此狀態是以所選取的核取方塊表示。</span><span class="sxs-lookup"><span data-stu-id="790fd-258">This state is indicated by a selected check box.</span></span> <span data-ttu-id="790fd-259">您也可以取消選取某些子 OU。</span><span class="sxs-lookup"><span data-stu-id="790fd-259">You can also unselect some sub-OUs.</span></span> <span data-ttu-id="790fd-260">tooget 這種行為，直到它變成白色藍色的核取記號 （其預設狀態），請按一下 [hello] 方塊。</span><span class="sxs-lookup"><span data-stu-id="790fd-260">tooget this behavior, click hello box until it becomes white with a blue check mark (its default state).</span></span> <span data-ttu-id="790fd-261">然後取消選取任何的子 Ou，您不想 toosynchronize。</span><span class="sxs-lookup"><span data-stu-id="790fd-261">Then unselect any sub-OUs that you don't want toosynchronize.</span></span>

<span data-ttu-id="790fd-262">如果會同步處理所有的子 Ou，然後 hello 方塊是白色的藍色的核取記號。</span><span class="sxs-lookup"><span data-stu-id="790fd-262">If all sub-OUs are synchronized, then hello box is white with a blue check mark.</span></span>  
![所有方塊皆選取的 OU](./media/active-directory-aadconnectsync-configure-filtering/ousyncnewall.png)

<span data-ttu-id="790fd-264">如果某些子 Ou 已取消選取，hello 方塊是灰色的白色核取記號。</span><span class="sxs-lookup"><span data-stu-id="790fd-264">If some sub-OUs have been unselected, then hello box is gray with a white check mark.</span></span>  
![部分子 OU 未選取的 OU](./media/active-directory-aadconnectsync-configure-filtering/ousyncnew.png)

<span data-ttu-id="790fd-266">使用此設定時，在 ManagedObjects 之下建立的新 OU 會同步處理。</span><span class="sxs-lookup"><span data-stu-id="790fd-266">With this configuration, a new OU that was created under ManagedObjects is synchronized.</span></span>

<span data-ttu-id="790fd-267">hello Azure AD Connect 的安裝精靈一律會建立此設定。</span><span class="sxs-lookup"><span data-stu-id="790fd-267">hello Azure AD Connect installation wizard always creates this configuration.</span></span>

### <a name="dont-synchronize-new-ous"></a><span data-ttu-id="790fd-268">不要同步處理新 OU</span><span class="sxs-lookup"><span data-stu-id="790fd-268">Don't synchronize new OUs</span></span>
<span data-ttu-id="790fd-269">您可以設定 hello 同步處理引擎 toonot hello 篩選組態完成後，同步處理新的 Ou。</span><span class="sxs-lookup"><span data-stu-id="790fd-269">You can configure hello sync engine toonot synchronize new OUs after hello filtering configuration has finished.</span></span> <span data-ttu-id="790fd-270">此狀態會表示 hello 出現任何核取記號的實心灰色 hello 方塊的 UI 中。</span><span class="sxs-lookup"><span data-stu-id="790fd-270">This state is indicated in hello UI by hello box appearing solid gray with no check mark.</span></span> <span data-ttu-id="790fd-271">tooget 這種行為，直到它變成白色沒有核取記號，請按一下 [hello] 方塊。</span><span class="sxs-lookup"><span data-stu-id="790fd-271">tooget this behavior, click hello box until it becomes white with no check mark.</span></span> <span data-ttu-id="790fd-272">然後，選取 hello 的子 Ou 的 toosynchronize。</span><span class="sxs-lookup"><span data-stu-id="790fd-272">Then select hello sub-OUs that you want toosynchronize.</span></span>

![含 hello 根未選取的 OU](./media/active-directory-aadconnectsync-configure-filtering/oudonotsyncnew.png)

<span data-ttu-id="790fd-274">使用此設定時，在 ManagedObjects 之下建立的新 OU 不會同步處理。</span><span class="sxs-lookup"><span data-stu-id="790fd-274">With this configuration, a new OU that was created under ManagedObjects isn't synchronized.</span></span>

## <a name="attribute-based-filtering"></a><span data-ttu-id="790fd-275">屬性型篩選</span><span class="sxs-lookup"><span data-stu-id="790fd-275">Attribute-based filtering</span></span>
<span data-ttu-id="790fd-276">請確定您使用 hello 2015 年 11 月 ([1.0.9125](active-directory-aadconnect-version-history.md#1091250)) 或更新的組建，這些步驟 toowork。</span><span class="sxs-lookup"><span data-stu-id="790fd-276">Make sure that you're using hello November 2015 ([1.0.9125](active-directory-aadconnect-version-history.md#1091250)) or later build for these steps toowork.</span></span>

<span data-ttu-id="790fd-277">屬性為基礎的篩選是 hello 最有彈性的方式 toofilter 物件。</span><span class="sxs-lookup"><span data-stu-id="790fd-277">Attribute-based filtering is hello most flexible way toofilter objects.</span></span> <span data-ttu-id="790fd-278">您可以使用 hello 冪[宣告式佈建](active-directory-aadconnectsync-understanding-declarative-provisioning.md)toocontrol 幾乎各個層面物件時同步處理 tooAzure AD。</span><span class="sxs-lookup"><span data-stu-id="790fd-278">You can use hello power of [declarative provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md) toocontrol almost every aspect of when an object is synchronized tooAzure AD.</span></span>

<span data-ttu-id="790fd-279">您可以套用[輸入](#inbound-filtering)從 Active Directory toohello metaverse，篩選和[輸出](#outbound-filtering)hello metaverse tooAzure AD 從篩選。</span><span class="sxs-lookup"><span data-stu-id="790fd-279">You can apply [inbound](#inbound-filtering) filtering from Active Directory toohello metaverse, and [outbound](#outbound-filtering) filtering from hello metaverse tooAzure AD.</span></span> <span data-ttu-id="790fd-280">我們建議您套用輸入篩選，因為這是最簡單 toomaintain 的 hello。</span><span class="sxs-lookup"><span data-stu-id="790fd-280">We recommend that you apply inbound filtering because that is hello easiest toomaintain.</span></span> <span data-ttu-id="790fd-281">您應該只使用輸出篩選，如果它需要從多個樹系 toojoin 物件 hello 評估才會發生。</span><span class="sxs-lookup"><span data-stu-id="790fd-281">You should only use outbound filtering if it's required toojoin objects from more than one forest before hello evaluation can take place.</span></span>

### <a name="inbound-filtering"></a><span data-ttu-id="790fd-282">輸入篩選</span><span class="sxs-lookup"><span data-stu-id="790fd-282">Inbound filtering</span></span>
<span data-ttu-id="790fd-283">輸入篩選使用 hello 預設設定，其中將 tooAzure AD 物件必須 hello metaverse 屬性 cloudFiltered 未設定 tooa 值 toobe 同步處理。</span><span class="sxs-lookup"><span data-stu-id="790fd-283">Inbound filtering uses hello default configuration, where objects going tooAzure AD must have hello metaverse attribute cloudFiltered not set tooa value toobe synchronized.</span></span> <span data-ttu-id="790fd-284">如果這個屬性的值設定得**True**，然後 hello 物件未同步。</span><span class="sxs-lookup"><span data-stu-id="790fd-284">If this attribute's value is set too**True**, then hello object isn't synchronized.</span></span> <span data-ttu-id="790fd-285">不應該太設定**False**，所設計。</span><span class="sxs-lookup"><span data-stu-id="790fd-285">It shouldn't be set too**False**, by design.</span></span> <span data-ttu-id="790fd-286">toomake 確定其他規則有 hello 能力 toocontribute 值，這個屬性只應該 toohave hello 值**True**或**NULL** （不存在）。</span><span class="sxs-lookup"><span data-stu-id="790fd-286">toomake sure other rules have hello ability toocontribute a value, this attribute is only supposed toohave hello values **True** or **NULL** (absent).</span></span>

<span data-ttu-id="790fd-287">在輸入篩選，您可以使用 hello 冪**範圍**toodetermine 物件 toosynchronize 或同步處理。</span><span class="sxs-lookup"><span data-stu-id="790fd-287">In inbound filtering, you use hello power of **scope** toodetermine which objects toosynchronize or not synchronize.</span></span> <span data-ttu-id="790fd-288">這是您在其中進行調整 toofit 您自己組織的需求。</span><span class="sxs-lookup"><span data-stu-id="790fd-288">This is where you make adjustments toofit your own organization's requirements.</span></span> <span data-ttu-id="790fd-289">hello 範圍模組有**群組**和**子句**toodetermine 在範圍內同步處理規則時。</span><span class="sxs-lookup"><span data-stu-id="790fd-289">hello scope module has a **group** and a **clause** toodetermine when a sync rule is in scope.</span></span> <span data-ttu-id="790fd-290">「群組」會包含一個或多個「子句」。</span><span class="sxs-lookup"><span data-stu-id="790fd-290">A group contains one or many clauses.</span></span> <span data-ttu-id="790fd-291">多個子句之間會有邏輯 "AND"，而多個群組之間會有邏輯 "OR"。</span><span class="sxs-lookup"><span data-stu-id="790fd-291">There is a logical "AND" between multiple clauses, and a logical "OR" between multiple groups.</span></span>

<span data-ttu-id="790fd-292">讓我們看看以下範例：</span><span class="sxs-lookup"><span data-stu-id="790fd-292">Let us look at an example:</span></span>  
<span data-ttu-id="790fd-293">![範圍](./media/active-directory-aadconnectsync-configure-filtering/scope.png)</span><span class="sxs-lookup"><span data-stu-id="790fd-293">![Scope](./media/active-directory-aadconnectsync-configure-filtering/scope.png)</span></span>  
<span data-ttu-id="790fd-294">這應該解讀為 **(department = IT) OR (department = Sales AND c = US)**。</span><span class="sxs-lookup"><span data-stu-id="790fd-294">This should be read as **(department = IT) OR (department = Sales AND c = US)**.</span></span>

<span data-ttu-id="790fd-295">在 hello 遵循範例和步驟，您使用 hello 使用者物件為例，但是您可以使用此所有物件類型。</span><span class="sxs-lookup"><span data-stu-id="790fd-295">In hello following samples and steps, you use hello user object as an example, but you can use this for all object types.</span></span>

<span data-ttu-id="790fd-296">在下列範例的 hello，hello 優先順序值開頭都是 50。</span><span class="sxs-lookup"><span data-stu-id="790fd-296">In hello following samples, hello precedence value starts with 50.</span></span> <span data-ttu-id="790fd-297">這可以是任何未使用的數字，但是應該小於 100。</span><span class="sxs-lookup"><span data-stu-id="790fd-297">This can be any number not used, but should be lower than 100.</span></span>

#### <a name="negative-filtering-do-not-sync-these"></a><span data-ttu-id="790fd-298">負面篩選：「不同步處理這些項目」</span><span class="sxs-lookup"><span data-stu-id="790fd-298">Negative filtering: "do not sync these"</span></span>
<span data-ttu-id="790fd-299">在下列範例的 hello，篩選出 （不同步處理） 的所有使用者其中**extensionAttribute15** hello 值**NoSync**。</span><span class="sxs-lookup"><span data-stu-id="790fd-299">In hello following example, you filter out (not synchronize) all users where **extensionAttribute15** has hello value **NoSync**.</span></span>

1. <span data-ttu-id="790fd-300">登入執行 Azure AD Connect 同步處理所使用的帳戶成員的 hello toohello 伺服器**ADSyncAdmins**安全性群組。</span><span class="sxs-lookup"><span data-stu-id="790fd-300">Sign in toohello server that is running Azure AD Connect sync by using an account that is a member of hello **ADSyncAdmins** security group.</span></span>
2. <span data-ttu-id="790fd-301">啟動**同步處理規則編輯器**從 hello**啟動**功能表。</span><span class="sxs-lookup"><span data-stu-id="790fd-301">Start **Synchronization Rules Editor** from hello **Start** menu.</span></span>
3. <span data-ttu-id="790fd-302">確定已選取 輸入，然後按一下新增規則。</span><span class="sxs-lookup"><span data-stu-id="790fd-302">Make sure **Inbound** is selected, and click **Add New Rule**.</span></span>
4. <span data-ttu-id="790fd-303">指定 hello 規則的描述性名稱，例如"*中 from AD – User DoNotSyncFilter*"。</span><span class="sxs-lookup"><span data-stu-id="790fd-303">Give hello rule a descriptive name, such as "*In from AD – User DoNotSyncFilter*".</span></span> <span data-ttu-id="790fd-304">選取 hello 正確樹系中，選取**使用者**為 hello **CS 物件類型**，然後選取**人員**為 hello **MV 物件類型**。</span><span class="sxs-lookup"><span data-stu-id="790fd-304">Select hello correct forest, select **User** as hello **CS object type**, and select **Person** as hello **MV object type**.</span></span> <span data-ttu-id="790fd-305">在 [連結類型] 中，選取 [聯結]。</span><span class="sxs-lookup"><span data-stu-id="790fd-305">In **Link Type**, select **Join**.</span></span> <span data-ttu-id="790fd-306">在 [優先順序] 中，輸入目前沒有被其他「同步化規則」使用的值 (例如 50)，然後按 [下一步]。</span><span class="sxs-lookup"><span data-stu-id="790fd-306">In **Precedence**, type a value that isn't currently used by another synchronization rule (for example 50), and then click **Next**.</span></span>  
   <span data-ttu-id="790fd-307">![輸入 1 描述](./media/active-directory-aadconnectsync-configure-filtering/inbound1.png)</span><span class="sxs-lookup"><span data-stu-id="790fd-307">![Inbound 1 description](./media/active-directory-aadconnectsync-configure-filtering/inbound1.png)</span></span>  
5. <span data-ttu-id="790fd-308">在 [範圍設定篩選] 中，按一下 [新增群組]，然後按一下 [新增子句]。</span><span class="sxs-lookup"><span data-stu-id="790fd-308">In **Scoping filter**, click **Add Group**, and click **Add Clause**.</span></span> <span data-ttu-id="790fd-309">在 [屬性] 中，選取 [ExtensionAttribute15]。</span><span class="sxs-lookup"><span data-stu-id="790fd-309">In **Attribute**, select **ExtensionAttribute15**.</span></span> <span data-ttu-id="790fd-310">請確定**運算子**設定得**相等**，然後輸入 hello 值**NoSync**在 hello**值**方塊。</span><span class="sxs-lookup"><span data-stu-id="790fd-310">Make sure that **Operator** is set too**EQUAL**, and type hello value **NoSync** in hello **Value** box.</span></span> <span data-ttu-id="790fd-311">按一下 [下一步] 。</span><span class="sxs-lookup"><span data-stu-id="790fd-311">Click **Next**.</span></span>  
   <span data-ttu-id="790fd-312">![輸入 2 範圍](./media/active-directory-aadconnectsync-configure-filtering/inbound2.png)</span><span class="sxs-lookup"><span data-stu-id="790fd-312">![Inbound 2 scope](./media/active-directory-aadconnectsync-configure-filtering/inbound2.png)</span></span>  
6. <span data-ttu-id="790fd-313">保留 hello**聯結**空的規則，然後按一下**下一步**。</span><span class="sxs-lookup"><span data-stu-id="790fd-313">Leave hello **Join** rules empty, and then click **Next**.</span></span>
7. <span data-ttu-id="790fd-314">按一下**新增轉換**，選取 hello **FlowType**為**常數**，然後選取**cloudFiltered**為 hello **目標屬性**。</span><span class="sxs-lookup"><span data-stu-id="790fd-314">Click **Add Transformation**, select hello **FlowType** as **Constant**, and select **cloudFiltered** as hello **Target Attribute**.</span></span> <span data-ttu-id="790fd-315">在 hello**來源**文字方塊中，輸入**True**。</span><span class="sxs-lookup"><span data-stu-id="790fd-315">In hello **Source** text box, type **True**.</span></span> <span data-ttu-id="790fd-316">按一下**新增**toosave hello 規則。</span><span class="sxs-lookup"><span data-stu-id="790fd-316">Click **Add** toosave hello rule.</span></span>  
   <span data-ttu-id="790fd-317">![輸入 3 轉換](./media/active-directory-aadconnectsync-configure-filtering/inbound3.png)</span><span class="sxs-lookup"><span data-stu-id="790fd-317">![Inbound 3 transformation](./media/active-directory-aadconnectsync-configure-filtering/inbound3.png)</span></span>
8. <span data-ttu-id="790fd-318">toocomplete hello 組態中，您需要 toorun**完整同步處理**。繼續閱讀 hello 區段[套用並驗證變更](#apply-and-verify-changes)。</span><span class="sxs-lookup"><span data-stu-id="790fd-318">toocomplete hello configuration, you need toorun a **Full sync**. Continue reading hello section [Apply and verify changes](#apply-and-verify-changes).</span></span>

#### <a name="positive-filtering-only-sync-these"></a><span data-ttu-id="790fd-319">正面篩選：「只同步處理這些項目」</span><span class="sxs-lookup"><span data-stu-id="790fd-319">Positive filtering: "only sync these"</span></span>
<span data-ttu-id="790fd-320">表示正進行篩選，可以更具有挑戰性，因為您也可以不是同步處理，例如會議室明顯 toobe tooconsider 物件。</span><span class="sxs-lookup"><span data-stu-id="790fd-320">Expressing positive filtering can be more challenging because you also have tooconsider objects that aren't obvious toobe synchronized, such as conference rooms.</span></span> <span data-ttu-id="790fd-321">您也是進行 toooverride hello 預設篩選 hello 鶈蜪規則中**中 from AD-User Join**。</span><span class="sxs-lookup"><span data-stu-id="790fd-321">You are also going toooverride hello default filter in hello out-of-box rule **In from AD - User Join**.</span></span> <span data-ttu-id="790fd-322">當您建立自訂篩選時，請確定 toonot 包含重要的系統物件，複寫衝突物件、 特殊的信箱和 hello 服務帳戶的 Azure AD Connect。</span><span class="sxs-lookup"><span data-stu-id="790fd-322">When you create your custom filter, make sure toonot include critical system objects, replication conflict objects, special mailboxes, and hello service accounts for Azure AD Connect.</span></span>

<span data-ttu-id="790fd-323">hello 正數的篩選選項需要兩個同步處理規則。</span><span class="sxs-lookup"><span data-stu-id="790fd-323">hello positive filtering option requires two sync rules.</span></span> <span data-ttu-id="790fd-324">您的物件 toosynchronize hello 正確的範圍內的情況下，需要一個規則 （或幾個）。</span><span class="sxs-lookup"><span data-stu-id="790fd-324">You need one rule (or several) with hello correct scope of objects toosynchronize.</span></span> <span data-ttu-id="790fd-325">您也需要篩選出尚未被識別為應進行同步處理物件之所有物件的第二個全面涵蓋同步處理規則。</span><span class="sxs-lookup"><span data-stu-id="790fd-325">You also need a second catch-all sync rule that filters out all objects that haven't yet been identified as an object that should be synchronized.</span></span>

<span data-ttu-id="790fd-326">在下列範例的 hello，您只同步處理使用者物件，其中 hello 部門屬性都具有 hello 值**銷售**。</span><span class="sxs-lookup"><span data-stu-id="790fd-326">In hello following example, you only synchronize user objects where hello department attribute has hello value **Sales**.</span></span>

1. <span data-ttu-id="790fd-327">登入執行 Azure AD Connect 同步處理所使用的帳戶成員的 hello toohello 伺服器**ADSyncAdmins**安全性群組。</span><span class="sxs-lookup"><span data-stu-id="790fd-327">Sign in toohello server that is running Azure AD Connect sync by using an account that is a member of hello **ADSyncAdmins** security group.</span></span>
2. <span data-ttu-id="790fd-328">啟動**同步處理規則編輯器**從 hello**啟動**功能表。</span><span class="sxs-lookup"><span data-stu-id="790fd-328">Start **Synchronization Rules Editor** from hello **Start** menu.</span></span>
3. <span data-ttu-id="790fd-329">確定已選取 輸入，然後按一下新增規則。</span><span class="sxs-lookup"><span data-stu-id="790fd-329">Make sure **Inbound** is selected, and click **Add New Rule**.</span></span>
4. <span data-ttu-id="790fd-330">指定 hello 規則的描述性名稱，例如"*中 from AD – 使用者銷售同步*"。</span><span class="sxs-lookup"><span data-stu-id="790fd-330">Give hello rule a descriptive name, such as "*In from AD – User Sales sync*".</span></span> <span data-ttu-id="790fd-331">選取 hello 正確樹系中，選取**使用者**為 hello **CS 物件類型**，然後選取**人員**為 hello **MV 物件類型**。</span><span class="sxs-lookup"><span data-stu-id="790fd-331">Select hello correct forest, select **User** as hello **CS object type**, and select **Person** as hello **MV object type**.</span></span> <span data-ttu-id="790fd-332">在 [連結類型] 中，選取 [聯結]。</span><span class="sxs-lookup"><span data-stu-id="790fd-332">In **Link Type**, select **Join**.</span></span> <span data-ttu-id="790fd-333">在 [優先順序] 中，輸入目前沒有被其他「同步化規則」使用的值 (例如 51)，然後按 [下一步]。</span><span class="sxs-lookup"><span data-stu-id="790fd-333">In **Precedence**, type a value that isn't currently used by another synchronization rule (for example 51), and then click **Next**.</span></span>  
   <span data-ttu-id="790fd-334">![輸入 4 描述](./media/active-directory-aadconnectsync-configure-filtering/inbound4.png)</span><span class="sxs-lookup"><span data-stu-id="790fd-334">![Inbound 4 description](./media/active-directory-aadconnectsync-configure-filtering/inbound4.png)</span></span>  
5. <span data-ttu-id="790fd-335">在 [範圍設定篩選] 中，按一下 [新增群組]，然後按一下 [新增子句]。</span><span class="sxs-lookup"><span data-stu-id="790fd-335">In **Scoping filter**, click **Add Group**, and click **Add Clause**.</span></span> <span data-ttu-id="790fd-336">在 [屬性] 中，選取 [部門]。</span><span class="sxs-lookup"><span data-stu-id="790fd-336">In **Attribute**, select **department**.</span></span> <span data-ttu-id="790fd-337">請確定運算子設定太**等於**，然後輸入 hello 值**銷售**在 hello**值**方塊。</span><span class="sxs-lookup"><span data-stu-id="790fd-337">Make sure that Operator is set too**EQUAL**, and type hello value **Sales** in hello **Value** box.</span></span> <span data-ttu-id="790fd-338">按一下 [下一步] 。</span><span class="sxs-lookup"><span data-stu-id="790fd-338">Click **Next**.</span></span>  
   <span data-ttu-id="790fd-339">![輸入 5 範圍](./media/active-directory-aadconnectsync-configure-filtering/inbound5.png)</span><span class="sxs-lookup"><span data-stu-id="790fd-339">![Inbound 5 scope](./media/active-directory-aadconnectsync-configure-filtering/inbound5.png)</span></span>  
6. <span data-ttu-id="790fd-340">保留 hello**聯結**空的規則，然後按一下**下一步**。</span><span class="sxs-lookup"><span data-stu-id="790fd-340">Leave hello **Join** rules empty, and then click **Next**.</span></span>
7. <span data-ttu-id="790fd-341">按一下**新增轉換**，選取**常數**為 hello **FlowType**，並選取 hello **cloudFiltered**為 hello **目標屬性**。</span><span class="sxs-lookup"><span data-stu-id="790fd-341">Click **Add Transformation**, select **Constant** as hello **FlowType**, and select hello **cloudFiltered** as hello **Target Attribute**.</span></span> <span data-ttu-id="790fd-342">在 hello**來源**方塊中，輸入**False**。</span><span class="sxs-lookup"><span data-stu-id="790fd-342">In hello **Source** box, type **False**.</span></span> <span data-ttu-id="790fd-343">按一下**新增**toosave hello 規則。</span><span class="sxs-lookup"><span data-stu-id="790fd-343">Click **Add** toosave hello rule.</span></span>  
   <span data-ttu-id="790fd-344">![輸入 6 轉換](./media/active-directory-aadconnectsync-configure-filtering/inbound6.png)</span><span class="sxs-lookup"><span data-stu-id="790fd-344">![Inbound 6 transformation](./media/active-directory-aadconnectsync-configure-filtering/inbound6.png)</span></span>  
   <span data-ttu-id="790fd-345">這是特殊案例，明確地設定 cloudFiltered 太**False**。</span><span class="sxs-lookup"><span data-stu-id="790fd-345">This is a special case where you explicitly set cloudFiltered too**False**.</span></span>
8. <span data-ttu-id="790fd-346">我們現在有 toocreate hello 全面性的同步處理規則。</span><span class="sxs-lookup"><span data-stu-id="790fd-346">We now have toocreate hello catch-all sync rule.</span></span> <span data-ttu-id="790fd-347">指定 hello 規則的描述性名稱，例如"*中 from AD – User Catch all 篩選*"。</span><span class="sxs-lookup"><span data-stu-id="790fd-347">Give hello rule a descriptive name, such as "*In from AD – User Catch-all filter*".</span></span> <span data-ttu-id="790fd-348">選取 hello 正確樹系中，選取**使用者**為 hello **CS 物件類型**，然後選取**人員**為 hello **MV 物件類型**。</span><span class="sxs-lookup"><span data-stu-id="790fd-348">Select hello correct forest, select **User** as hello **CS object type**, and select **Person** as hello **MV object type**.</span></span> <span data-ttu-id="790fd-349">在 [連結類型] 中，選取 [聯結]。</span><span class="sxs-lookup"><span data-stu-id="790fd-349">In **Link Type**, select **Join**.</span></span> <span data-ttu-id="790fd-350">在 [優先順序] 中，輸入目前沒有被其他「同步化規則」使用的值 (例如 99)。</span><span class="sxs-lookup"><span data-stu-id="790fd-350">In **Precedence**, type a value that isn't currently used by another Synchronization Rule (for example 99).</span></span> <span data-ttu-id="790fd-351">您已選取 （較低優先順序） 高於 hello 上一次同步處理規則的優先順序值。</span><span class="sxs-lookup"><span data-stu-id="790fd-351">You've selected a precedence value that is higher (lower precedence) than hello previous sync rule.</span></span> <span data-ttu-id="790fd-352">但是，您也留了一些空間，讓您可以新增多個篩選的同步處理規則稍後當您想同步處理其他部門 toostart 時。</span><span class="sxs-lookup"><span data-stu-id="790fd-352">But you've also left some room so that you can add more filtering sync rules later when you want toostart synchronizing additional departments.</span></span> <span data-ttu-id="790fd-353">按一下 [下一步] 。</span><span class="sxs-lookup"><span data-stu-id="790fd-353">Click **Next**.</span></span>  
   <span data-ttu-id="790fd-354">![輸入 7 描述](./media/active-directory-aadconnectsync-configure-filtering/inbound7.png)</span><span class="sxs-lookup"><span data-stu-id="790fd-354">![Inbound 7 description](./media/active-directory-aadconnectsync-configure-filtering/inbound7.png)</span></span>  
9. <span data-ttu-id="790fd-355">將 [範圍設定篩選] 保留空白，然後按 [下一步]。</span><span class="sxs-lookup"><span data-stu-id="790fd-355">Leave **Scoping filter** empty, and click **Next**.</span></span> <span data-ttu-id="790fd-356">空白的篩選器指出該 hello 規則套用的 toobe tooall 物件。</span><span class="sxs-lookup"><span data-stu-id="790fd-356">An empty filter indicates that hello rule is toobe applied tooall objects.</span></span>
10. <span data-ttu-id="790fd-357">保留 hello**聯結**空的規則，然後按一下**下一步**。</span><span class="sxs-lookup"><span data-stu-id="790fd-357">Leave hello **Join** rules empty, and then click **Next**.</span></span>
11. <span data-ttu-id="790fd-358">按一下**新增轉換**，選取**常數**為 hello **FlowType**，然後選取**cloudFiltered**為 hello **目標屬性**。</span><span class="sxs-lookup"><span data-stu-id="790fd-358">Click **Add Transformation**, select **Constant** as hello **FlowType**, and select **cloudFiltered** as hello **Target Attribute**.</span></span> <span data-ttu-id="790fd-359">在 hello**來源**方塊中，輸入**True**。</span><span class="sxs-lookup"><span data-stu-id="790fd-359">In hello **Source** box, type **True**.</span></span> <span data-ttu-id="790fd-360">按一下**新增**toosave hello 規則。</span><span class="sxs-lookup"><span data-stu-id="790fd-360">Click **Add** toosave hello rule.</span></span>  
    <span data-ttu-id="790fd-361">![輸入 3 轉換](./media/active-directory-aadconnectsync-configure-filtering/inbound3.png)</span><span class="sxs-lookup"><span data-stu-id="790fd-361">![Inbound 3 transformation](./media/active-directory-aadconnectsync-configure-filtering/inbound3.png)</span></span>  
12. <span data-ttu-id="790fd-362">toocomplete hello 組態中，您需要 toorun**完整同步處理**。繼續閱讀 hello 區段[套用並驗證變更](#apply-and-verify-changes)。</span><span class="sxs-lookup"><span data-stu-id="790fd-362">toocomplete hello configuration, you need toorun a **Full sync**. Continue reading hello section [Apply and verify changes](#apply-and-verify-changes).</span></span>

<span data-ttu-id="790fd-363">如果需要您可以建立更多的 hello hello 同步處理中納入多個物件的第一種類型的規則。</span><span class="sxs-lookup"><span data-stu-id="790fd-363">If you need to, you can create more rules of hello first type where you include more objects in hello synchronization.</span></span>

### <a name="outbound-filtering"></a><span data-ttu-id="790fd-364">輸出篩選</span><span class="sxs-lookup"><span data-stu-id="790fd-364">Outbound filtering</span></span>
<span data-ttu-id="790fd-365">在某些情況下，它會篩選 hello 物件已經在 hello metaverse 中聯結時，才需要 toodo hello。</span><span class="sxs-lookup"><span data-stu-id="790fd-365">In some cases, it's necessary toodo hello filtering only after hello objects have joined in hello metaverse.</span></span> <span data-ttu-id="790fd-366">例如，可能需要 toolook hello mail 屬性從 hello 資源樹系，以及從 hello 帳戶樹系，如果物件應該同步處理的 toodetermine hello userPrincipalName 屬性。</span><span class="sxs-lookup"><span data-stu-id="790fd-366">For example, it might be necessary toolook at hello mail attribute from hello resource forest, and hello userPrincipalName attribute from hello account forest, toodetermine if an object should be synchronized.</span></span> <span data-ttu-id="790fd-367">在這些情況下，您可以建立 hello hello 輸出規則上的篩選。</span><span class="sxs-lookup"><span data-stu-id="790fd-367">In these cases, you create hello filtering on hello outbound rule.</span></span>

<span data-ttu-id="790fd-368">在此範例中，您變更 hello 篩選，以便只有使用者具有其郵件與結尾的 userPrincipalName@contoso.com會同步處理：</span><span class="sxs-lookup"><span data-stu-id="790fd-368">In this example, you change hello filtering so that only users that have both their mail and userPrincipalName ending in @contoso.com are synchronized:</span></span>

1. <span data-ttu-id="790fd-369">登入執行 Azure AD Connect 同步處理所使用的帳戶成員的 hello toohello 伺服器**ADSyncAdmins**安全性群組。</span><span class="sxs-lookup"><span data-stu-id="790fd-369">Sign in toohello server that is running Azure AD Connect sync by using an account that is a member of hello **ADSyncAdmins** security group.</span></span>
2. <span data-ttu-id="790fd-370">啟動**同步處理規則編輯器**從 hello**啟動**功能表。</span><span class="sxs-lookup"><span data-stu-id="790fd-370">Start **Synchronization Rules Editor** from hello **Start** menu.</span></span>
3. <span data-ttu-id="790fd-371">在 [規則類型] 下方按一下 [輸出]。</span><span class="sxs-lookup"><span data-stu-id="790fd-371">Under **Rules Type**, click **Outbound**.</span></span>
4. <span data-ttu-id="790fd-372">尋找名為 hello 規則**出 tooAAD – User Join**，然後按一下**編輯**。</span><span class="sxs-lookup"><span data-stu-id="790fd-372">Find hello rule named **Out tooAAD – User Join**, and click **Edit**.</span></span>
5. <span data-ttu-id="790fd-373">在 hello 快顯視窗，請回答**是**toocreate hello 規則的複本。</span><span class="sxs-lookup"><span data-stu-id="790fd-373">In hello pop-up, answer **Yes** toocreate a copy of hello rule.</span></span>
6. <span data-ttu-id="790fd-374">在 hello**描述**頁面上，變更**優先順序**tooan 未使用的值，例如 50。</span><span class="sxs-lookup"><span data-stu-id="790fd-374">On hello **Description** page, change **Precedence** tooan unused value, such as 50.</span></span>
7. <span data-ttu-id="790fd-375">按一下**範圍篩選**在 hello 左側的導覽，然後按一下 **Add 子句**。</span><span class="sxs-lookup"><span data-stu-id="790fd-375">Click **Scoping filter** on hello left-hand navigation, and then click **Add clause**.</span></span> <span data-ttu-id="790fd-376">在 [屬性] 中，選取 [郵件]。</span><span class="sxs-lookup"><span data-stu-id="790fd-376">In **Attribute**, select **mail**.</span></span> <span data-ttu-id="790fd-377">在 [運算子] 中，選取 [ENDSWITH]。</span><span class="sxs-lookup"><span data-stu-id="790fd-377">In **Operator**, select **ENDSWITH**.</span></span> <span data-ttu-id="790fd-378">在 值 中，輸入 **@contoso.com**，然後按一下新增子句。</span><span class="sxs-lookup"><span data-stu-id="790fd-378">In **Value**, type **@contoso.com**, and then click **Add clause**.</span></span> <span data-ttu-id="790fd-379">在 [屬性] 中，選取 [userPrincipalName]。</span><span class="sxs-lookup"><span data-stu-id="790fd-379">In **Attribute**, select **userPrincipalName**.</span></span> <span data-ttu-id="790fd-380">在 [運算子] 中，選取 [ENDSWITH]。</span><span class="sxs-lookup"><span data-stu-id="790fd-380">In **Operator**, select **ENDSWITH**.</span></span> <span data-ttu-id="790fd-381">在 [值] 中，輸入 **@contoso.com**。</span><span class="sxs-lookup"><span data-stu-id="790fd-381">In **Value**, type **@contoso.com**.</span></span>
8. <span data-ttu-id="790fd-382">按一下 [儲存] 。</span><span class="sxs-lookup"><span data-stu-id="790fd-382">Click **Save**.</span></span>
9. <span data-ttu-id="790fd-383">toocomplete hello 組態中，您需要 toorun**完整同步處理**。繼續閱讀 hello 區段[套用並驗證變更](#apply-and-verify-changes)。</span><span class="sxs-lookup"><span data-stu-id="790fd-383">toocomplete hello configuration, you need toorun a **Full sync**. Continue reading hello section [Apply and verify changes](#apply-and-verify-changes).</span></span>

## <a name="apply-and-verify-changes"></a><span data-ttu-id="790fd-384">套用並驗證變更</span><span class="sxs-lookup"><span data-stu-id="790fd-384">Apply and verify changes</span></span>
<span data-ttu-id="790fd-385">進行組態變更之後，您必須套用 toohello hello 系統中已有的物件。</span><span class="sxs-lookup"><span data-stu-id="790fd-385">After you've made your configuration changes, you must apply them toohello objects that are already present in hello system.</span></span> <span data-ttu-id="790fd-386">它也可能是應該處理的 hello 物件不是目前的 hello 同步處理引擎 (和 hello 同步處理引擎需要 tooread hello 來源系統再次 tooverify 其內容)。</span><span class="sxs-lookup"><span data-stu-id="790fd-386">It might also be that hello objects that aren't currently in hello sync engine should be processed (and hello sync engine needs tooread hello source system again tooverify its content).</span></span>

<span data-ttu-id="790fd-387">如果您使用變更 hello 組態**網域**或**組織單位**篩選，則您需要 toodo**完整匯入**，後面接著**差異同步處理**。</span><span class="sxs-lookup"><span data-stu-id="790fd-387">If you changed hello configuration by using **domain** or **organizational-unit** filtering, then you need toodo a **Full import**, followed by **Delta synchronization**.</span></span>

<span data-ttu-id="790fd-388">如果您使用變更 hello 組態**屬性**篩選，則您需要 toodo**完整同步處理**。</span><span class="sxs-lookup"><span data-stu-id="790fd-388">If you changed hello configuration by using **attribute** filtering, then you need toodo a **Full synchronization**.</span></span>

<span data-ttu-id="790fd-389">下列步驟 hello:</span><span class="sxs-lookup"><span data-stu-id="790fd-389">Do hello following steps:</span></span>

1. <span data-ttu-id="790fd-390">啟動**同步處理服務**從 hello**啟動**功能表。</span><span class="sxs-lookup"><span data-stu-id="790fd-390">Start **Synchronization Service** from hello **Start** menu.</span></span>
2. <span data-ttu-id="790fd-391">選取 [連接器]。</span><span class="sxs-lookup"><span data-stu-id="790fd-391">Select **Connectors**.</span></span> <span data-ttu-id="790fd-392">在 hello**連接器**清單中，選取您所做的設定變更之前的連接器 hello。</span><span class="sxs-lookup"><span data-stu-id="790fd-392">In hello **Connectors** list, select hello Connector where you made a configuration change earlier.</span></span> <span data-ttu-id="790fd-393">在 [動作] 中，選取 [執行]。</span><span class="sxs-lookup"><span data-stu-id="790fd-393">In **Actions**, select **Run**.</span></span>  
   <span data-ttu-id="790fd-394">![連接器執行](./media/active-directory-aadconnectsync-configure-filtering/connectorrun.png)</span><span class="sxs-lookup"><span data-stu-id="790fd-394">![Connector run](./media/active-directory-aadconnectsync-configure-filtering/connectorrun.png)</span></span>  
3. <span data-ttu-id="790fd-395">在**執行設定檔**，選取在 hello 上一節所提到的 hello 作業。</span><span class="sxs-lookup"><span data-stu-id="790fd-395">In **Run profiles**, select hello operation that was mentioned in hello previous section.</span></span> <span data-ttu-id="790fd-396">如果您需要 toorun 兩個動作，執行第二個之後 hello hello 第一個已完成。</span><span class="sxs-lookup"><span data-stu-id="790fd-396">If you need toorun two actions, run hello second after hello first one has finished.</span></span> <span data-ttu-id="790fd-397">(hello**狀態**資料行是**閒置**hello 選取連接器。)</span><span class="sxs-lookup"><span data-stu-id="790fd-397">(hello **State** column is **Idle** for hello selected connector.)</span></span>

<span data-ttu-id="790fd-398">Hello 同步處理後，會匯出的分段的 toobe 所有變更。</span><span class="sxs-lookup"><span data-stu-id="790fd-398">After hello synchronization, all changes are staged toobe exported.</span></span> <span data-ttu-id="790fd-399">您實際上會在 Azure AD 進行 hello 變更之前，您會想 tooverify 所有這些變更正確。</span><span class="sxs-lookup"><span data-stu-id="790fd-399">Before you actually make hello changes in Azure AD, you want tooverify that all these changes are correct.</span></span>

1. <span data-ttu-id="790fd-400">啟動命令提示字元，然後移過`%Program Files%\Microsoft Azure AD Sync\bin`。</span><span class="sxs-lookup"><span data-stu-id="790fd-400">Start a command prompt, and go too`%Program Files%\Microsoft Azure AD Sync\bin`.</span></span>
2. <span data-ttu-id="790fd-401">執行 `csexport "Name of Connector" %temp%\export.xml /f:x`。</span><span class="sxs-lookup"><span data-stu-id="790fd-401">Run `csexport "Name of Connector" %temp%\export.xml /f:x`.</span></span>  
   <span data-ttu-id="790fd-402">同步處理服務 」 hello hello 連接器名稱。</span><span class="sxs-lookup"><span data-stu-id="790fd-402">hello name of hello Connector is in Synchronization Service.</span></span> <span data-ttu-id="790fd-403">其名稱類似的 too"contoso.com – AAD"Azure ad。</span><span class="sxs-lookup"><span data-stu-id="790fd-403">It has a name similar too"contoso.com – AAD" for Azure AD.</span></span>
3. <span data-ttu-id="790fd-404">執行 `CSExportAnalyzer %temp%\export.xml > %temp%\export.csv`。</span><span class="sxs-lookup"><span data-stu-id="790fd-404">Run `CSExportAnalyzer %temp%\export.xml > %temp%\export.csv`.</span></span>
4. <span data-ttu-id="790fd-405">現在您在 %temp% 中已經有名稱為 export.csv 的檔案，可在 Microsoft Excel 中加以檢查。</span><span class="sxs-lookup"><span data-stu-id="790fd-405">You now have a file in %temp% named export.csv that can be examined in Microsoft Excel.</span></span> <span data-ttu-id="790fd-406">此檔案包含所有即將 toobe 匯出的 hello 變更。</span><span class="sxs-lookup"><span data-stu-id="790fd-406">This file contains all hello changes that are about toobe exported.</span></span>
5. <span data-ttu-id="790fd-407">請 hello 必要的變更 toohello 資料或組態，以及執行這些步驟一次 （匯入、 同步處理及驗證） 直到 hello toobe 匯出相關的變更是您所預期。</span><span class="sxs-lookup"><span data-stu-id="790fd-407">Make hello necessary changes toohello data or configuration, and run these steps again (Import, Synchronize, and Verify) until hello changes that are about toobe exported are what you expect.</span></span>

<span data-ttu-id="790fd-408">當您感到滿意後時，將匯出 hello 變更 tooAzure AD。</span><span class="sxs-lookup"><span data-stu-id="790fd-408">When you're satisfied, export hello changes tooAzure AD.</span></span>

1. <span data-ttu-id="790fd-409">選取 [連接器]。</span><span class="sxs-lookup"><span data-stu-id="790fd-409">Select **Connectors**.</span></span> <span data-ttu-id="790fd-410">在 hello**連接器**清單中，選取 hello Azure AD 連接器。</span><span class="sxs-lookup"><span data-stu-id="790fd-410">In hello **Connectors** list, select hello Azure AD Connector.</span></span> <span data-ttu-id="790fd-411">在 [動作] 中，選取 [執行]。</span><span class="sxs-lookup"><span data-stu-id="790fd-411">In **Actions**, select **Run**.</span></span>
2. <span data-ttu-id="790fd-412">在 [執行設定檔] 中，選取 [匯出]。</span><span class="sxs-lookup"><span data-stu-id="790fd-412">In **Run profiles**, select **Export**.</span></span>
3. <span data-ttu-id="790fd-413">如果您的組態變更刪除許多物件，然後您看到錯誤在 hello 匯出 hello 數目超過設定的 hello 臨界值 （依預設 500） 時。</span><span class="sxs-lookup"><span data-stu-id="790fd-413">If your configuration changes delete many objects, then you see an error in hello export when hello number is more than hello configured threshold (by default 500).</span></span> <span data-ttu-id="790fd-414">如果您看到此錯誤，則您需要 tootemporarily 停用 hello"[防止被意外刪除](active-directory-aadconnectsync-feature-prevent-accidental-deletes.md)」 功能。</span><span class="sxs-lookup"><span data-stu-id="790fd-414">If you see this error, then you need tootemporarily disable hello "[prevent accidental deletes](active-directory-aadconnectsync-feature-prevent-accidental-deletes.md)" feature.</span></span>

<span data-ttu-id="790fd-415">現在它會將時間 tooenable hello 排程器是一次。</span><span class="sxs-lookup"><span data-stu-id="790fd-415">Now it's time tooenable hello scheduler again.</span></span>

1. <span data-ttu-id="790fd-416">啟動**工作排程器**從 hello**啟動**功能表。</span><span class="sxs-lookup"><span data-stu-id="790fd-416">Start **Task Scheduler** from hello **Start** menu.</span></span>
2. <span data-ttu-id="790fd-417">直接在**工作排程器程式庫**，尋找名為 「 hello 任務**Azure AD Sync Scheduler**，按一下滑鼠右鍵，然後選取**啟用**。</span><span class="sxs-lookup"><span data-stu-id="790fd-417">Directly under **Task Scheduler Library**, find hello task named **Azure AD Sync Scheduler**, right-click, and select **Enable**.</span></span>

## <a name="group-based-filtering"></a><span data-ttu-id="790fd-418">群組型篩選</span><span class="sxs-lookup"><span data-stu-id="790fd-418">Group-based filtering</span></span>
<span data-ttu-id="790fd-419">您可以設定群組為基礎的篩選 hello 第一次您使用安裝 Azure AD Connect[自訂安裝](active-directory-aadconnect-get-started-custom.md#sync-filtering-based-on-groups)。</span><span class="sxs-lookup"><span data-stu-id="790fd-419">You can configure group-based filtering hello first time that you install Azure AD Connect by using [custom installation](active-directory-aadconnect-get-started-custom.md#sync-filtering-based-on-groups).</span></span> <span data-ttu-id="790fd-420">它的主要是讓您想要只同步處理的物件 toobe 一小群試驗部署。</span><span class="sxs-lookup"><span data-stu-id="790fd-420">It's intended for a pilot deployment where you want only a small set of objects toobe synchronized.</span></span> <span data-ttu-id="790fd-421">當您停用群組型篩選時，無法將它重新啟用。</span><span class="sxs-lookup"><span data-stu-id="790fd-421">When you disable group-based filtering, it can't be enabled again.</span></span> <span data-ttu-id="790fd-422">它有*不支援*toouse 群組為基礎的自訂組態中的篩選。</span><span class="sxs-lookup"><span data-stu-id="790fd-422">It's *not supported* toouse group-based filtering in a custom configuration.</span></span> <span data-ttu-id="790fd-423">它有只支援 tooconfigure 這項功能使用 hello 安裝精靈。</span><span class="sxs-lookup"><span data-stu-id="790fd-423">It's only supported tooconfigure this feature by using hello installation wizard.</span></span> <span data-ttu-id="790fd-424">當您完成您的試驗時，然後使用其中一個 hello 其他篩選選項本主題中。</span><span class="sxs-lookup"><span data-stu-id="790fd-424">When you've completed your pilot, then use one of hello other filtering options in this topic.</span></span> <span data-ttu-id="790fd-425">使用組織單位型篩選時搭配以群組為基礎的篩選，則必須包含 hello hello 群組及其成員的所在位置的 OU。</span><span class="sxs-lookup"><span data-stu-id="790fd-425">When using OU-based filtering in conjunction with group-based filtering, hello OU(s) where hello group and its members are located must be included.</span></span>

<span data-ttu-id="790fd-426">同步處理多個 AD 樹系時，您可藉由為每個 AD 連接器指定不同的群組，設定以群組為基礎的篩選。</span><span class="sxs-lookup"><span data-stu-id="790fd-426">When synchronizing multiple AD forests, you can configure group-based filtering by specifying a different group for each AD connector.</span></span> <span data-ttu-id="790fd-427">如果您想 toosynchronize AD 樹系中的使用者和 hello 相同的使用者有一或多對應 FSP （外部安全性主體） 物件中其他 AD 樹系中，您必須確定該 hello 使用者物件和所有其相對應 FSP 物件會都在以群組為基礎篩選的範圍。</span><span class="sxs-lookup"><span data-stu-id="790fd-427">If you wish toosynchronize a user in one AD forest and hello same user has one or more corresponding FSP (Foreign Security Principal) objects in other AD forests, you must ensure that hello user object and all its corresponding FSP objects are within group-based filtering scope.</span></span> <span data-ttu-id="790fd-428">如果其中一個或多個 hello FSP 物件會排除群組為基礎的篩選，hello 使用者物件將無法同步處理的 tooAzure AD。</span><span class="sxs-lookup"><span data-stu-id="790fd-428">If one or more of hello FSP objects are excluded by group-based filtering, hello user object will not be synchronized tooAzure AD.</span></span>

## <a name="next-steps"></a><span data-ttu-id="790fd-429">後續步驟</span><span class="sxs-lookup"><span data-stu-id="790fd-429">Next steps</span></span>
- <span data-ttu-id="790fd-430">深入了解 [Azure AD Connect 同步](active-directory-aadconnectsync-whatis.md) 組態。</span><span class="sxs-lookup"><span data-stu-id="790fd-430">Learn more about [Azure AD Connect sync](active-directory-aadconnectsync-whatis.md) configuration.</span></span>
- <span data-ttu-id="790fd-431">深入了解[整合內部部署身分識別與 Azure AD](active-directory-aadconnect.md)。</span><span class="sxs-lookup"><span data-stu-id="790fd-431">Learn more about [integrating your on-premises identities with Azure AD](active-directory-aadconnect.md).</span></span>
