---
title: "Azure AD Connect：針對同步處理期間的錯誤進行疑難排解 | Microsoft Docs"
description: "說明如何針對 Azure AD Connect 同步處理期間發生的錯誤進行疑難排解。"
services: active-directory
documentationcenter: 
author: karavar
manager: samueld
editor: curtand
ms.assetid: 2209d5ce-0a64-447b-be3a-6f06d47995f8
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: billmath
ms.openlocfilehash: 5a319de69c4e142414ab8f2be980a6576acbf8bb
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/03/2017
---
# <a name="troubleshooting-errors-during-synchronization"></a><span data-ttu-id="c2ebf-103">針對同步處理期間的錯誤進行疑難排解</span><span class="sxs-lookup"><span data-stu-id="c2ebf-103">Troubleshooting Errors during synchronization</span></span>
<span data-ttu-id="c2ebf-104">將身分識別資料從 Windows Server Active Directory (AD DS) 同步處理至 Azure Active Directory (Azure AD) 時，可能會發生錯誤。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-104">Errors could occur when identity data is synchronized from Windows Server Active Directory (AD DS) to Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="c2ebf-105">本文提供不同類型的同步處理錯誤概觀、某些可能導致這些錯誤的案例，以及修正錯誤的可能方式。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-105">This article provides an overview of different types of sync errors, some of the possible scenarios that cause those errors and potential ways to fix the errors.</span></span> <span data-ttu-id="c2ebf-106">本文包含常見的錯誤類型，不一定涵蓋所有可能的錯誤。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-106">This article includes the common error types and may not cover all the possible errors.</span></span>

 <span data-ttu-id="c2ebf-107">本文假設讀者已熟悉 [Azure AD 與 Azure AD Connect 的基礎設計概念](active-directory-aadconnect-design-concepts.md)。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-107">This article assumes the reader is familiar with the underlying [design concepts of Azure AD and Azure AD Connect](active-directory-aadconnect-design-concepts.md).</span></span>

<span data-ttu-id="c2ebf-108">使用最新版的 Azure AD Connect \(2016年 8 月或更新版本\)，在 [Azure 入口網站](https://aka.ms/aadconnecthealth)中可取得「同步處理錯誤」報告做為 Azure AD Connect Health for Sync 的一部分。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-108">With the latest version of Azure AD Connect \(August 2016 or higher\), a report of Synchronization Errors is available in the [Azure Portal](https://aka.ms/aadconnecthealth) as part of Azure AD Connect Health for sync.</span></span>

<span data-ttu-id="c2ebf-109">從 2016 年 9 月 1 日開始，預設會針對所有「新的」Azure Active Directory 租用戶啟用 [Azure Active Directory 重複屬性恢復](active-directory-aadconnectsyncservice-duplicate-attribute-resiliency.md)功能。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-109">Starting September 1, 2016 [Azure Active Directory Duplicate Attribute Resiliency](active-directory-aadconnectsyncservice-duplicate-attribute-resiliency.md) feature will be enabled by default for all the *new* Azure Active Directory Tenants.</span></span> <span data-ttu-id="c2ebf-110">這項功能會針對未來幾個月內的現有租用戶自動啟用。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-110">This feature will be automatically enabled for existing tenants in the upcoming months.</span></span>

<span data-ttu-id="c2ebf-111">Azure AD Connect 會從其保持同步的目錄執行 3 種作業︰匯入、同步處理及匯出。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-111">Azure AD Connect performs 3 types of operations from the directories it keeps in sync: Import, Synchronization and Export.</span></span> <span data-ttu-id="c2ebf-112">錯誤可能會發生於所有作業中。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-112">Errors can take place in all the operations.</span></span> <span data-ttu-id="c2ebf-113">本文主要著重於在匯出至 Azure AD 期間的錯誤。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-113">This article mainly focuses on errors during Export to Azure AD.</span></span>

## <a name="errors-during-export-to-azure-ad"></a><span data-ttu-id="c2ebf-114">匯出至 Azure AD 期間的錯誤</span><span class="sxs-lookup"><span data-stu-id="c2ebf-114">Errors during Export to Azure AD</span></span>
<span data-ttu-id="c2ebf-115">下一節說明使用 Azure AD 連接器匯出至 Azure AD 的作業期間內可能發生的各類型同步處理錯誤。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-115">Following section describes different types of synchronization errors that can occur during the export operation to Azure AD using the Azure AD connector.</span></span> <span data-ttu-id="c2ebf-116">此連接器可經由 "contoso.onmicrosoft.com" 格式的名稱加以識別。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-116">This connector can be identified by the name format being "contoso.*onmicrosoft.com*".</span></span>
<span data-ttu-id="c2ebf-117">匯出至 Azure AD 期間發生的錯誤，表示 Azure AD connect \(同步處理引擎\) 在 Azure Active Directory 上嘗試的\(新增、更新、刪除等\)作業失敗。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-117">Errors during Export to Azure AD indicate that the operation \(add, update, delete etc.\) attempted by Azure AD Connect \(Sync Engine\) on Azure Active Directory failed.</span></span>

![匯出錯誤概觀](./media/active-directory-aadconnect-troubleshoot-sync-errors/Export_Errors_Overview_01.png)

## <a name="data-mismatch-errors"></a><span data-ttu-id="c2ebf-119">資料不符錯誤</span><span class="sxs-lookup"><span data-stu-id="c2ebf-119">Data Mismatch Errors</span></span>
### <a name="invalidsoftmatch"></a><span data-ttu-id="c2ebf-120">InvalidSoftMatch</span><span class="sxs-lookup"><span data-stu-id="c2ebf-120">InvalidSoftMatch</span></span>
#### <a name="description"></a><span data-ttu-id="c2ebf-121">說明</span><span class="sxs-lookup"><span data-stu-id="c2ebf-121">Description</span></span>
* <span data-ttu-id="c2ebf-122">當 Azure AD Connect \(同步處理引擎\)指示 Azure Active Directory 新增或更新物件時，Azure AD 會比對使用 **sourceAnchor** 屬性的連入物件與 Azure AD 中物件的 **immutableId** 屬性。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-122">When Azure AD Connect \(sync engine\) instructs Azure Active Directory to add or update objects, Azure AD matches the incoming object using the **sourceAnchor** attribute to the **immutableId** attribute of objects in Azure AD.</span></span> <span data-ttu-id="c2ebf-123">此種比對稱為**完全比對**。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-123">This match is called a **Hard Match**.</span></span>
* <span data-ttu-id="c2ebf-124">當 Azure AD **找不到**有任何物件符合 **immutableId** 屬性與連入物件的 **sourceAnchor** 屬性時，在佈建新物件之前，它會改回使用 ProxyAddresses 和 UserPrincipalName 屬性來尋找相符項目。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-124">When Azure AD **does not find** any object that matches the **immutableId** attribute with the **sourceAnchor** attribute of the incoming object, before provisioning a new object, it falls back to use the ProxyAddresses and UserPrincipalName attributes to find a match.</span></span> <span data-ttu-id="c2ebf-125">此種比對稱為**大致比對**。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-125">This match is called a **Soft Match**.</span></span> <span data-ttu-id="c2ebf-126">「大致比對」的設計用來比對 Azure AD 中已存在的物件 (也就是源自 Azure AD) 與在同步處理期間進行新增/更新的新物件 (代表內部部署上的相同實體 (使用者、群組))。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-126">The Soft Match is designed to match objects already present in Azure AD (that are sourced in Azure AD) with the new objects being added/updated during synchronization that represent the same entity (users, groups) on premises.</span></span>
* <span data-ttu-id="c2ebf-127">**InvalidSoftMatch** 發生於完全比對找不到任何相符物件，**而且**大致比對找到相符物件，但該物件具有的 immutableId 值不同於連入物件的 SourceAnchor 值時，就表示相符的物件已經與內部部署 Active Directory 上的另一個物件同步處理。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-127">**InvalidSoftMatch** error occurs when the hard match does not find any matching object **AND** soft match finds a matching object but that object has a different value of *immutableId* than the incoming object's *SourceAnchor*, suggesting that the matching object was synchronized with another object from on premises Active Directory.</span></span>

<span data-ttu-id="c2ebf-128">換句話說，若要讓大致比對得以運作，要進行大致比對的物件不得有任何的 immutableId 值。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-128">In other words, in order for the soft match to work, the object to be soft-matched with should not have any value for the *immutableId*.</span></span> <span data-ttu-id="c2ebf-129">如果任何已設定 immutableId 值的物件完全比對失敗，但滿足大致比對準則，則作業會導致 InvalidSoftMatch 同步處理錯誤。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-129">If any object with *immutableId* set with a value is failing the hard-match but satisfying the soft-match criteria, the operation would result in an InvalidSoftMatch synchronization error.</span></span>

<span data-ttu-id="c2ebf-130">Azure Active Directory 結構描述不允許兩個或多個物件的下列屬性具有相同的值。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-130">Azure Active Directory schema does not allow two or more objects to have the same value of the following attributes.</span></span> <span data-ttu-id="c2ebf-131">\(這不是詳盡的清單。\)</span><span class="sxs-lookup"><span data-stu-id="c2ebf-131">\(This is not an exhaustive list.\)</span></span>

* <span data-ttu-id="c2ebf-132">ProxyAddresses</span><span class="sxs-lookup"><span data-stu-id="c2ebf-132">ProxyAddresses</span></span>
* <span data-ttu-id="c2ebf-133">UserPrincipalName</span><span class="sxs-lookup"><span data-stu-id="c2ebf-133">UserPrincipalName</span></span>
* <span data-ttu-id="c2ebf-134">onPremisesSecurityIdentifier</span><span class="sxs-lookup"><span data-stu-id="c2ebf-134">onPremisesSecurityIdentifier</span></span>
* <span data-ttu-id="c2ebf-135">ObjectId</span><span class="sxs-lookup"><span data-stu-id="c2ebf-135">ObjectId</span></span>

> [!NOTE]
> <span data-ttu-id="c2ebf-136">[Azure AD 屬性重複屬性恢復](active-directory-aadconnectsyncservice-duplicate-attribute-resiliency.md)功能也正當作 Azure Active Directory 的預設行為推出。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-136">[Azure AD Attribute Duplicate Attribute Resiliency](active-directory-aadconnectsyncservice-duplicate-attribute-resiliency.md) feature is also being rolled out as the default behavior of Azure Active Directory.</span></span>  <span data-ttu-id="c2ebf-137">讓 Azure AD 能夠更彈性地處理內部部署 AD 環境中重複的 ProxyAddresses 和 UserPrincipalName 屬性，將會減少 Azure AD Connect (以及其他同步處理用戶端) 所看到的同步處理錯誤數目。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-137">This will reduce the number of synchronization errors seen by Azure AD Connect (as well as other sync clients) by making Azure AD more resilient in the way it handles duplicated ProxyAddresses and UserPrincipalName attributes present in on premises AD environments.</span></span> <span data-ttu-id="c2ebf-138">這項功能無法修復重複錯誤。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-138">This feature does not fix the duplication errors.</span></span> <span data-ttu-id="c2ebf-139">因此資料仍然需要修復。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-139">So the data still needs to be fixed.</span></span> <span data-ttu-id="c2ebf-140">但可讓您佈建由於 Azure AD 中的重複值而無法佈建的新物件。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-140">But it allows provisioning of new objects which are otherwise blocked from being provisioned due to duplicated values in Azure AD.</span></span> <span data-ttu-id="c2ebf-141">這也會減少傳回至同步處理用戶端的同步處理錯誤數目。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-141">This will also reduce the number of synchronization errors returned to the synchronization client.</span></span>
> <span data-ttu-id="c2ebf-142">如果您的租用戶已啟用這項功能，則不會在新物件的佈建過程中看到 InvalidSoftMatch 同步處理錯誤。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-142">If this feature is enabled for your Tenant, you will not see the InvalidSoftMatch synchronization errors seen during provisioning of new objects.</span></span>
>
>

#### <a name="example-scenarios-for-invalidsoftmatch"></a><span data-ttu-id="c2ebf-143">InvalidSoftMatch 的範例案例</span><span class="sxs-lookup"><span data-stu-id="c2ebf-143">Example Scenarios for InvalidSoftMatch</span></span>
1. <span data-ttu-id="c2ebf-144">內部部署 Active Directory 中存在兩個或多個具有相同 ProxyAddresses 屬性值的物件。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-144">Two or more objects with the same value of ProxyAddresses attribute exists in on premises Active Directory.</span></span> <span data-ttu-id="c2ebf-145">只有一個會在 Azure AD 中佈建。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-145">Only one is getting provisioned in Azure AD.</span></span>
2. <span data-ttu-id="c2ebf-146">內部部署 Active Directory 中存在兩個或多個具有相同 userPrincipalName 值的物件。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-146">Two or more objects with the same value of userPrincipalName exists in on premises Active Directory.</span></span> <span data-ttu-id="c2ebf-147">只有一個會在 Azure AD 中佈建。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-147">Only one is getting provisioned in Azure AD.</span></span>
3. <span data-ttu-id="c2ebf-148">內部部署 Active Directory 中新增的物件具有與 Azure Active Directory 中現有物件相同的 ProxyAddresses 屬性值。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-148">An object was added in the on premises Active Directory with the same value of ProxyAddresses attribute as that of an existing object in Azure Active Directory.</span></span> <span data-ttu-id="c2ebf-149">在內部部署新增的物件並未佈建於 Azure Active Directory 中。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-149">The object added on premises is not getting provisioned in Azure Active Directory.</span></span>
4. <span data-ttu-id="c2ebf-150">內部部署 Active Directory 中新增的物件具有與 Azure Active Directory 中的帳戶相同的 userPrincipalName 屬性值。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-150">An object was added in on premises Active Directory with the same value of userPrincipalName attribute as that of an account in Azure Active Directory.</span></span> <span data-ttu-id="c2ebf-151">此物件並未佈建於 Azure Active Directory 中。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-151">The object is not getting provisioned in Azure Active Directory.</span></span>
5. <span data-ttu-id="c2ebf-152">同步處理的帳戶已從樹系 A 移到樹系 B。Azure AD Connect (同步處理引擎) 使用 ObjectGUID 屬性來計算 SourceAnchor。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-152">A synced account was moved from Forest A to Forest B. Azure AD Connect (sync engine) was using ObjectGUID attribute to compute the SourceAnchor.</span></span> <span data-ttu-id="c2ebf-153">在樹系移動之後，SourceAnchor 的值會不同。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-153">After the forest move, the value of the SourceAnchor is different.</span></span> <span data-ttu-id="c2ebf-154">新物件 (來自樹系 B) 與 Azure AD 中的現有物件同步處理失敗。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-154">The new object (from Forest B) is failing to sync with the existing object in Azure AD.</span></span>
6. <span data-ttu-id="c2ebf-155">同步處理的物件會意外從內部部署 Active Directory 中刪除，而在 Active Directory 中針對相同的實體 (例如使用者) 建立新物件，而不需刪除 Azure Active Directory 中的帳戶。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-155">A synced object got accidentally deleted from on premises Active Directory and a new object was created in Active Directory for the same entity (such as user) without deleting the account in Azure Active Directory.</span></span> <span data-ttu-id="c2ebf-156">新的帳戶與現有的 Azure AD 物件同步處理失敗。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-156">The new account fails to sync with the existing Azure AD object.</span></span>
7. <span data-ttu-id="c2ebf-157">Azure AD Connect 解除安裝後再重新安裝。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-157">Azure AD Connect was uninstalled and re-installed.</span></span> <span data-ttu-id="c2ebf-158">在重新安裝期間，會選擇不同的屬性做為 SourceAnchor。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-158">During the re-installation, a different attribute was chosen as the SourceAnchor.</span></span> <span data-ttu-id="c2ebf-159">所有先前同步處理的物件都停止與 InvalidSoftMatch 錯誤同步處理。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-159">All the objects that had previously synced stopped syncing with InvalidSoftMatch error.</span></span>

#### <a name="example-case"></a><span data-ttu-id="c2ebf-160">範例案例︰</span><span class="sxs-lookup"><span data-stu-id="c2ebf-160">Example case:</span></span>
1. <span data-ttu-id="c2ebf-161">**Bob Smith** 是 Azure Active Directory 中已從 *contoso.com* 的內部部署 Active Directory 同步處理的使用者</span><span class="sxs-lookup"><span data-stu-id="c2ebf-161">**Bob Smith** is a synced user in Azure Active Directory from on premises Active Directory of *contoso.com*</span></span>
2. <span data-ttu-id="c2ebf-162">Bob Smith 的 **UserPrincipalName** 已設定為 **bobs@contoso.com**。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-162">Bob Smith's **UserPrincipalName** is set as **bobs@contoso.com**.</span></span>
3. <span data-ttu-id="c2ebf-163">**"abcdefghijklmnopqrstuv=="** 是 Azure AD Connect 使用 Bob Smith 的 **objectGUID** 從內部部署 Active Directory 計算的 **SourceAnchor**，這是 Azure Active Directory 中 Bob Smith 的 **immutableId**。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-163">**"abcdefghijklmnopqrstuv=="** is the **SourceAnchor** calculated by Azure AD Connect using Bob Smith's **objectGUID** from on premises Active Directory, which is the **immutableId** for Bob Smith in Azure Active Directory.</span></span>
4. <span data-ttu-id="c2ebf-164">Bob 也具有 **proxyAddresses** 屬性的下列值︰</span><span class="sxs-lookup"><span data-stu-id="c2ebf-164">Bob also has following values for the **proxyAddresses** attribute:</span></span>
   * smtp:bobs@contoso.com
   * smtp:bob.smith@contoso.com
   * **smtp:bob@contoso.com**
5. <span data-ttu-id="c2ebf-165">新使用者 **Bob Taylor** 已新增至內部部署 Active Directory。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-165">A new user, **Bob Taylor**, is added to the on premises Active Directory.</span></span>
6. <span data-ttu-id="c2ebf-166">Bob Taylor 的 **UserPrincipalName** 已設為 **bobt@contoso.com**。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-166">Bob Taylor's **UserPrincipalName** is set as **bobt@contoso.com**.</span></span>
7. <span data-ttu-id="c2ebf-167">**"abcdefghijkl0123456789==""** 是 Azure AD Connect 使用 Bob Taylor 的 **objectGUID** 從內部部署 Active Directory 計算的 **sourceAnchor**。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-167">**"abcdefghijkl0123456789==""** is the **sourceAnchor** calculated by Azure AD Connect using Bob Taylor's **objectGUID** from on premises Active Directory.</span></span> <span data-ttu-id="c2ebf-168">Bob Taylor 的物件尚未同步處理至 Azure Active Directory。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-168">Bob Taylor's object has NOT synced to Azure Active Directory yet.</span></span>
8. <span data-ttu-id="c2ebf-169">Bob Taylor 具有 proxyAddresses 屬性的下列值︰</span><span class="sxs-lookup"><span data-stu-id="c2ebf-169">Bob Taylor has the following values for the proxyAddresses attribute</span></span>
   * smtp:bobt@contoso.com
   * smtp:bob.taylor@contoso.com
   * **smtp:bob@contoso.com**
9. <span data-ttu-id="c2ebf-170">在同步處理期間，Azure AD Connect 會辨識內部部署 Active Directory 中的 Bob Taylor 新增，並要求 Azure AD 進行相同的變更。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-170">During sync, Azure AD Connect will recognize the addition of Bob Taylor in on premises Active Directory and ask Azure AD to make the same change.</span></span>
10. <span data-ttu-id="c2ebf-171">Azure AD 會先執行完全比對。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-171">Azure AD will first perform hard match.</span></span> <span data-ttu-id="c2ebf-172">也就是說，它會搜尋是否有任何物件的 immutableId 等於 "abcdefghijkl0123456789=="。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-172">That is, it will search if there is any object with the immutableId equal to "abcdefghijkl0123456789==".</span></span> <span data-ttu-id="c2ebf-173">完全比對會失敗，因為 Azure AD 中沒有其他物件具有該 immutableId。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-173">Hard Match will fail as no other object in Azure AD will have that immutableId.</span></span>
11. <span data-ttu-id="c2ebf-174">Azure AD 會接著嘗試大致比對 Bob Taylor。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-174">Azure AD will then attempt to soft-match Bob Taylor.</span></span> <span data-ttu-id="c2ebf-175">也就是說，它會搜尋是否有任何物件的 proxyAddresses 等於上述三個值，包括 smtp:bob@contoso.com</span><span class="sxs-lookup"><span data-stu-id="c2ebf-175">That is, it will search if there is any object with proxyAddresses equal to the three values, including smtp:bob@contoso.com</span></span>
12. <span data-ttu-id="c2ebf-176">Azure AD 會找到 Bob Smith 的物件以比對大致相符準則。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-176">Azure AD will find Bob Smith's object to match the soft-match criteria.</span></span> <span data-ttu-id="c2ebf-177">但此物件 immutableId 的值等於 "abcdefghijklmnopqrstuv=="。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-177">But this object has the value of immutableId = "abcdefghijklmnopqrstuv==".</span></span> <span data-ttu-id="c2ebf-178">這表示此物件已從內部部署 Active Directory 中的另一個物件同步處理。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-178">which indicates this object was synced from another object from on premises Active Directory.</span></span> <span data-ttu-id="c2ebf-179">因此，Azure AD 無法大致比對這些物件，並會導致 **InvalidSoftMatch** 同步處理錯誤。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-179">Thus, Azure AD cannot soft-match these objects and results in an **InvalidSoftMatch** sync error.</span></span>

#### <a name="how-to-fix-invalidsoftmatch-error"></a><span data-ttu-id="c2ebf-180">如何修正 InvalidSoftMatch 錯誤</span><span class="sxs-lookup"><span data-stu-id="c2ebf-180">How to fix InvalidSoftMatch error</span></span>
<span data-ttu-id="c2ebf-181">InvalidSoftMatch 錯誤的最常見原因是兩個具有不同 SourceAnchor \(immutableId\) 的物件具有相同的 ProxyAddresses 和/或 UserPrincipalName 屬性值，而這兩個物件使用於 Azure AD 上的大致比對程序。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-181">The most common reason for the InvalidSoftMatch error is two objects with different SourceAnchor \(immutableId\) have the same value for the ProxyAddresses and/or UserPrincipalName attributes, which are used during the soft-match process on Azure AD.</span></span> <span data-ttu-id="c2ebf-182">若要修正無效的大致比對：</span><span class="sxs-lookup"><span data-stu-id="c2ebf-182">In order to fix the Invalid Soft Match</span></span>

1. <span data-ttu-id="c2ebf-183">找出造成錯誤的重複 proxyAddresses、userPrincipalName 或其他屬性值。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-183">Identify the duplicated proxyAddresses, userPrincipalName or other attribute value that's causing the error.</span></span> <span data-ttu-id="c2ebf-184">同時找出哪兩個 \( 或多個\) 物件與衝突有關。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-184">Also identify which two \(or more\) objects are involved in the conflict.</span></span> <span data-ttu-id="c2ebf-185">[Azure AD Connect Health for Sync](https://aka.ms/aadchsyncerrors) 所產生的報告可協助您找出這兩個物件。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-185">The report generated by [Azure AD Connect Health for sync](https://aka.ms/aadchsyncerrors) can help you identify the two objects.</span></span>
2. <span data-ttu-id="c2ebf-186">找出哪個物件應該繼續擁有重複的值，以及哪個物件不該如此。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-186">Identify which object should continue to have the duplicated value and which object should not.</span></span>
3. <span data-ttu-id="c2ebf-187">移除物件中不該具有該值的重複值。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-187">Remove the duplicated value from the object that should NOT have that value.</span></span> <span data-ttu-id="c2ebf-188">請注意，您應該在物件源自的目錄中進行變更。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-188">Note that you should make the change in the directory where the object is sourced from.</span></span> <span data-ttu-id="c2ebf-189">在某些情況下，您可能需要刪除其中一個衝突的物件。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-189">In some cases, you may need to delete one of the objects in conflict.</span></span>
4. <span data-ttu-id="c2ebf-190">如果您在內部部署 AD 中進行變更，請讓 Azure AD Connect 同步處理變更。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-190">If you made the change in the on premises AD, let Azure AD Connect sync the change.</span></span>

<span data-ttu-id="c2ebf-191">請注意，Azure AD Connect Health for Sync 內的同步處理錯誤報告會每隔 30 分鐘更新一次，包含最近同步處理嘗試的錯誤。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-191">Note that Sync error report within Azure AD Connect Health for sync is updated every 30 minutes and includes the errors from the latest synchronization attempt.</span></span>

> [!NOTE]
> <span data-ttu-id="c2ebf-192">根據定義，不得在物件的存留期間變更 ImmutableId 。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-192">ImmutableId, by definition, should not change in the lifetime of the object.</span></span> <span data-ttu-id="c2ebf-193">如果設定 Azure AD Connect 時未牢記上述清單中的一些案例，您最後可能會遇到以下情況：Azure AD Connect 針對 AD 物件計算不同的 SourceAnchor 值，其代表具有您要繼續使用之現有 Azure AD 物件的相同實體 (相同的使用者/群組/連絡人等)。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-193">If Azure AD Connect was not configured with some of the scenarios in mind from the above list, you could end up in a situation where Azure AD Connect calculates a different value of the SourceAnchor for the AD object that represents the same entity (same user/group/contact etc) that has an existing Azure AD Object that you wish to continue using.</span></span>
>
>

#### <a name="related-articles"></a><span data-ttu-id="c2ebf-194">相關文章</span><span class="sxs-lookup"><span data-stu-id="c2ebf-194">Related Articles</span></span>
* [<span data-ttu-id="c2ebf-195">重複或無效的屬性會防止 Office 365 進行目錄同步作業</span><span class="sxs-lookup"><span data-stu-id="c2ebf-195">Duplicate or invalid attributes prevent directory synchronization in Office 365</span></span>](https://support.microsoft.com/en-us/kb/2647098)

### <a name="objecttypemismatch"></a><span data-ttu-id="c2ebf-196">ObjectTypeMismatch</span><span class="sxs-lookup"><span data-stu-id="c2ebf-196">ObjectTypeMismatch</span></span>
#### <a name="description"></a><span data-ttu-id="c2ebf-197">說明</span><span class="sxs-lookup"><span data-stu-id="c2ebf-197">Description</span></span>
<span data-ttu-id="c2ebf-198">當 Azure AD 嘗試大致比對兩個物件時，兩個不同「物件類型」(例如使用者、群組、連絡人等) 的物件可能具有相同的屬性值來執行大致比對。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-198">When Azure AD attempts to soft match two objects, it is possible that two objects of different "object type" (such as User, Group, Contact etc.) have the same values for the attributes used to perform the soft match.</span></span> <span data-ttu-id="c2ebf-199">Azure AD 中不允許這些屬性重複，因為作業可能會導致 "ObjectTypeMismatch" 同步處理錯誤。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-199">As duplication of these attributes is not permitted in Azure AD, the operation can result in "ObjectTypeMismatch" synchronization error.</span></span>

#### <a name="example-scenarios-for-objecttypemismatch-error"></a><span data-ttu-id="c2ebf-200">ObjectTypeMismatch 錯誤的示範案例</span><span class="sxs-lookup"><span data-stu-id="c2ebf-200">Example Scenarios for ObjectTypeMismatch error</span></span>
* <span data-ttu-id="c2ebf-201">在 Office 365 中建立擁有郵件功能的安全性群組。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-201">A mail enabled security group is created in Office 365.</span></span> <span data-ttu-id="c2ebf-202">系統管理員會使用與 Office 365 群組相同的 ProxyAddresses 屬性值，在內部部署 AD (尚未同步處理至 Azure AD) 中新增使用者或連絡人。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-202">Admin adds a new user or contact in on premises AD (that's not synchronized to Azure AD yet) with the same value for the ProxyAddresses attribute as that of the Office 365 group.</span></span>

#### <a name="example-case"></a><span data-ttu-id="c2ebf-203">範例案例</span><span class="sxs-lookup"><span data-stu-id="c2ebf-203">Example case</span></span>
1. <span data-ttu-id="c2ebf-204">系統管理員在 Office 365 中針對稅務部門建立擁有郵件功能的新安全性群組，並為其提供電子郵件地址 tax@contoso.com。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-204">Admin creates a new mail enabled security group in Office 365 for the Tax department and provides an email address as tax@contoso.com.</span></span> <span data-ttu-id="c2ebf-205">這會為此群組指派值為 **smtp:tax@contoso.com** 的 ProxyAddresses 屬性</span><span class="sxs-lookup"><span data-stu-id="c2ebf-205">This assigns the ProxyAddresses attribute for this group with the value of **smtp:tax@contoso.com**</span></span>
2. <span data-ttu-id="c2ebf-206">新使用者會加入 Contoso.com，並針對 proxyAddress 為 **smtp:tax@contoso.com** 的內部部署使用者建立帳戶</span><span class="sxs-lookup"><span data-stu-id="c2ebf-206">A new user joins Contoso.com and an account is created for the user on premises with the proxyAddress as **smtp:tax@contoso.com**</span></span>
3. <span data-ttu-id="c2ebf-207">當 Azure AD Connect 將同步處理新的使用者帳戶時，它會收到 "ObjectTypeMismatch" 錯誤。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-207">When Azure AD Connect will sync the new user account, it will get the "ObjectTypeMismatch" error.</span></span>

#### <a name="how-to-fix-objecttypemismatch-error"></a><span data-ttu-id="c2ebf-208">如何修正 ObjectTypeMismatch 錯誤</span><span class="sxs-lookup"><span data-stu-id="c2ebf-208">How to fix ObjectTypeMismatch error</span></span>
<span data-ttu-id="c2ebf-209">ObjectTypeMismatch 錯誤的最常見原因是兩個不同類型 (使用者、群組、連絡人等) 的物件具有相同的 ProxyAddresses 屬性值。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-209">The most common reason for the ObjectTypeMismatch error is two objects of different type (User, Group, Contact etc.) have the same value for the ProxyAddresses attribute.</span></span> <span data-ttu-id="c2ebf-210">若要修正 ObjectTypeMismatch：</span><span class="sxs-lookup"><span data-stu-id="c2ebf-210">In order to fix the ObjectTypeMismatch:</span></span>

1. <span data-ttu-id="c2ebf-211">找出造成錯誤的重複 proxyAddresses (或其他屬性) 值。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-211">Identify the duplicated proxyAddresses (or other attribute) value that's causing the error.</span></span> <span data-ttu-id="c2ebf-212">同時找出哪兩個 \( 或多個\) 物件與衝突有關。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-212">Also identify which two \(or more\) objects are involved in the conflict.</span></span> <span data-ttu-id="c2ebf-213">[Azure AD Connect Health for Sync](https://aka.ms/aadchsyncerrors) 所產生的報告可協助您找出這兩個物件。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-213">The report generated by [Azure AD Connect Health for sync](https://aka.ms/aadchsyncerrors) can help you identify the two objects.</span></span>
2. <span data-ttu-id="c2ebf-214">找出哪個物件應該繼續擁有重複的值，以及哪個物件不該如此。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-214">Identify which object should continue to have the duplicated value and which object should not.</span></span>
3. <span data-ttu-id="c2ebf-215">移除物件中不該具有該值的重複值。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-215">Remove the duplicated value from the object that should NOT have that value.</span></span> <span data-ttu-id="c2ebf-216">請注意，您應該在物件源自的目錄中進行變更。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-216">Note that you should make the change in the directory where the object is sourced from.</span></span> <span data-ttu-id="c2ebf-217">在某些情況下，您可能需要刪除其中一個衝突的物件。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-217">In some cases, you may need to delete one of the objects in conflict.</span></span>
4. <span data-ttu-id="c2ebf-218">如果您在內部部署 AD 中進行變更，請讓 Azure AD Connect 同步處理變更。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-218">If you made the change in the on premises AD, let Azure AD Connect sync the change.</span></span> <span data-ttu-id="c2ebf-219">Azure AD Connect Health for Sync 內的同步處理錯誤報告會每隔 30 分鐘更新一次，包含最近同步處理嘗試的錯誤。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-219">Sync error report within Azure AD Connect Health for sync gets updated every 30 minutes and includes the errors from the latest synchronization attempt.</span></span>

## <a name="duplicate-attributes"></a><span data-ttu-id="c2ebf-220">重複的屬性</span><span class="sxs-lookup"><span data-stu-id="c2ebf-220">Duplicate Attributes</span></span>
### <a name="attributevaluemustbeunique"></a><span data-ttu-id="c2ebf-221">AttributeValueMustBeUnique</span><span class="sxs-lookup"><span data-stu-id="c2ebf-221">AttributeValueMustBeUnique</span></span>
#### <a name="description"></a><span data-ttu-id="c2ebf-222">說明</span><span class="sxs-lookup"><span data-stu-id="c2ebf-222">Description</span></span>
<span data-ttu-id="c2ebf-223">Azure Active Directory 結構描述不允許兩個或多個物件的下列屬性具有相同的值。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-223">Azure Active Directory schema does not allow two or more objects to have the same value of the following attributes.</span></span> <span data-ttu-id="c2ebf-224">也就是強制 Azure AD 中的每個物件在指定的執行個體具有這些屬性的唯一值。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-224">That is each object in Azure AD is forced to have a unique value of these attributes at a given instance.</span></span>

* <span data-ttu-id="c2ebf-225">ProxyAddresses</span><span class="sxs-lookup"><span data-stu-id="c2ebf-225">ProxyAddresses</span></span>
* <span data-ttu-id="c2ebf-226">UserPrincipalName</span><span class="sxs-lookup"><span data-stu-id="c2ebf-226">UserPrincipalName</span></span>

<span data-ttu-id="c2ebf-227">如果 Azure AD Connect 嘗試新增物件，或以指派給 Azure Active Directory 中另一個物件的上述屬性值更新現有的物件，作業會導致 "AttributeValueMustBeUnique" 同步處理錯誤。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-227">If Azure AD Connect attempts to add a new object or update an existing object with a value for the above attributes that is already assigned to another object in Azure Active Directory, the operation results in the "AttributeValueMustBeUnique" sync error.</span></span>

#### <a name="possible-scenarios"></a><span data-ttu-id="c2ebf-228">可能的案例︰</span><span class="sxs-lookup"><span data-stu-id="c2ebf-228">Possible Scenarios:</span></span>
1. <span data-ttu-id="c2ebf-229">重複的值指派給已同步處理的物件，但該物件與另一個已同步處理的物件發生衝突。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-229">Duplicate value is assigned to an already synced object, which conflicts with another synced object.</span></span>

#### <a name="example-case"></a><span data-ttu-id="c2ebf-230">範例案例︰</span><span class="sxs-lookup"><span data-stu-id="c2ebf-230">Example case:</span></span>
1. <span data-ttu-id="c2ebf-231">**Bob Smith** 是 Azure Active Directory 中已從 contoso.com 的內部部署 Active Directory 同步處理的使用者</span><span class="sxs-lookup"><span data-stu-id="c2ebf-231">**Bob Smith** is a synced user in Azure Active Directory from on premises Active Directory of contoso.com</span></span>
2. <span data-ttu-id="c2ebf-232">Bob Smith 的內部部署 **UserPrincipalName** 已設定為 **bobs@contoso.com**。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-232">Bob Smith's **UserPrincipalName** on premises is set as **bobs@contoso.com**.</span></span>
3. <span data-ttu-id="c2ebf-233">Bob 也具有 **proxyAddresses** 屬性的下列值︰</span><span class="sxs-lookup"><span data-stu-id="c2ebf-233">Bob also has following values for the **proxyAddresses** attribute:</span></span>
   * smtp:bobs@contoso.com
   * smtp:bob.smith@contoso.com
   * **smtp:bob@contoso.com**
4. <span data-ttu-id="c2ebf-234">新使用者 **Bob Taylor** 已新增至內部部署 Active Directory。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-234">A new user, **Bob Taylor**, is added to the on premises Active Directory.</span></span>
5. <span data-ttu-id="c2ebf-235">Bob Taylor 的 **UserPrincipalName** 已設為 **bobt@contoso.com**。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-235">Bob Taylor's **UserPrincipalName** is set as **bobt@contoso.com**.</span></span>
6. <span data-ttu-id="c2ebf-236">**Bob Taylor** 具有 **ProxyAddresses** 屬性的下列值。i.</span><span class="sxs-lookup"><span data-stu-id="c2ebf-236">**Bob Taylor** has the following values for the **ProxyAddresses** attribute i.</span></span> <span data-ttu-id="c2ebf-237">smtp:bobt@contoso.com ii.</span><span class="sxs-lookup"><span data-stu-id="c2ebf-237">smtp:bobt@contoso.com ii.</span></span> <span data-ttu-id="c2ebf-238">smtp:bob.taylor@contoso.com</span><span class="sxs-lookup"><span data-stu-id="c2ebf-238">smtp:bob.taylor@contoso.com</span></span>
7. <span data-ttu-id="c2ebf-239">Bob Taylor 物件已成功與 Azure AD 同步處理。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-239">Bob Taylor's object is synchronized with Azure AD successfully.</span></span>
8. <span data-ttu-id="c2ebf-240">系統管理員決定使用下列的值更新 Bob Taylor 的 **ProxyAddresses** 屬性︰i.</span><span class="sxs-lookup"><span data-stu-id="c2ebf-240">Admin decided to update Bob Taylor's **ProxyAddresses** attribute with the following value: i.</span></span> **smtp:bob@contoso.com**
9. <span data-ttu-id="c2ebf-241">Azure AD 將嘗試使用上述的值更新 Bob Taylor 在 Azure AD 中的物件，但該作業將會失敗，因為該 ProxyAddresses 值已指派給 Bob Smith，因而導致 "AttributeValueMustBeUnique" 錯誤。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-241">Azure AD will attempt to update Bob Taylor's object in Azure AD with the above value, but that operation will fail as that ProxyAddresses value is already assigned to Bob Smith, resulting in "AttributeValueMustBeUnique" error.</span></span>

#### <a name="how-to-fix-attributevaluemustbeunique-error"></a><span data-ttu-id="c2ebf-242">如何修正 AttributeValueMustBeUnique 錯誤</span><span class="sxs-lookup"><span data-stu-id="c2ebf-242">How to fix AttributeValueMustBeUnique error</span></span>
<span data-ttu-id="c2ebf-243">AttributeValueMustBeUnique 錯誤的最常見原因是兩個具有不同 SourceAnchor \(immutableId\) 的物件具有相同的 ProxyAddresses 和/或 UserPrincipalName 屬性值。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-243">The most common reason for the AttributeValueMustBeUnique error is two objects with different SourceAnchor \(immutableId\) have the same value for the ProxyAddresses and/or UserPrincipalName attributes.</span></span> <span data-ttu-id="c2ebf-244">若要修正 AttributeValueMustBeUnique 錯誤：</span><span class="sxs-lookup"><span data-stu-id="c2ebf-244">In order to fix AttributeValueMustBeUnique error</span></span>

1. <span data-ttu-id="c2ebf-245">找出造成錯誤的重複 proxyAddresses、userPrincipalName 或其他屬性值。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-245">Identify the duplicated proxyAddresses, userPrincipalName or other attribute value that's causing the error.</span></span> <span data-ttu-id="c2ebf-246">同時找出哪兩個 \( 或多個\) 物件與衝突有關。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-246">Also identify which two \(or more\) objects are involved in the conflict.</span></span> <span data-ttu-id="c2ebf-247">[Azure AD Connect Health for Sync](https://aka.ms/aadchsyncerrors) 所產生的報告可協助您找出這兩個物件。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-247">The report generated by [Azure AD Connect Health for sync](https://aka.ms/aadchsyncerrors) can help you identify the two objects.</span></span>
2. <span data-ttu-id="c2ebf-248">找出哪個物件應該繼續擁有重複的值，以及哪個物件不該如此。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-248">Identify which object should continue to have the duplicated value and which object should not.</span></span>
3. <span data-ttu-id="c2ebf-249">移除物件中不該具有該值的重複值。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-249">Remove the duplicated value from the object that should NOT have that value.</span></span> <span data-ttu-id="c2ebf-250">請注意，您應該在物件源自的目錄中進行變更。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-250">Note that you should make the change in the directory where the object is sourced from.</span></span> <span data-ttu-id="c2ebf-251">在某些情況下，您可能需要刪除其中一個衝突的物件。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-251">In some cases, you may need to delete one of the objects in conflict.</span></span>
4. <span data-ttu-id="c2ebf-252">如果您在內部部署 AD 中進行變更，請讓 Azure AD Connect 同步處理變更，以便修正錯誤。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-252">If you made the change in the on premises AD, let Azure AD Connect sync the change for the error to get fixed.</span></span>

#### <a name="related-articles"></a><span data-ttu-id="c2ebf-253">相關文章</span><span class="sxs-lookup"><span data-stu-id="c2ebf-253">Related Articles</span></span>
<span data-ttu-id="c2ebf-254">-[重複或無效的屬性會防止 Office 365 進行目錄同步作業](https://support.microsoft.com/en-us/kb/2647098)</span><span class="sxs-lookup"><span data-stu-id="c2ebf-254">-[Duplicate or invalid attributes prevent directory synchronization in Office 365](https://support.microsoft.com/en-us/kb/2647098)</span></span>

## <a name="data-validation-failures"></a><span data-ttu-id="c2ebf-255">資料驗證失敗</span><span class="sxs-lookup"><span data-stu-id="c2ebf-255">Data Validation Failures</span></span>
### <a name="identitydatavalidationfailed"></a><span data-ttu-id="c2ebf-256">IdentityDataValidationFailed</span><span class="sxs-lookup"><span data-stu-id="c2ebf-256">IdentityDataValidationFailed</span></span>
#### <a name="description"></a><span data-ttu-id="c2ebf-257">說明</span><span class="sxs-lookup"><span data-stu-id="c2ebf-257">Description</span></span>
<span data-ttu-id="c2ebf-258">Azure Active Directory 會先對資料本身強制執行各種限制，然後才允許該資料寫入目錄中。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-258">Azure Active Directory enforces various restrictions on the data itself before allowing that data to be written into the directory.</span></span> <span data-ttu-id="c2ebf-259">這是為了確保使用者在使用相依於這項資料的應用程式時，能獲得最棒的體驗。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-259">This is to ensure that end users get the best possible experiences while using the applications that depend on this data.</span></span>

#### <a name="scenarios"></a><span data-ttu-id="c2ebf-260">案例</span><span class="sxs-lookup"><span data-stu-id="c2ebf-260">Scenarios</span></span>
<span data-ttu-id="c2ebf-261">a.</span><span class="sxs-lookup"><span data-stu-id="c2ebf-261">a.</span></span> <span data-ttu-id="c2ebf-262">UserPrincipalName 屬性值具有無效/不支援的字元。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-262">The UserPrincipalName attribute value has invalid/unsupported characters.</span></span>
<span data-ttu-id="c2ebf-263">b.</span><span class="sxs-lookup"><span data-stu-id="c2ebf-263">b.</span></span> <span data-ttu-id="c2ebf-264">UserPrincipalName 屬性不符合所需的格式。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-264">The UserPrincipalName attribute does not follow the required format.</span></span>

#### <a name="how-to-fix-identitydatavalidationfailed-error"></a><span data-ttu-id="c2ebf-265">如何修正 IdentityDataValidationFailed 錯誤</span><span class="sxs-lookup"><span data-stu-id="c2ebf-265">How to fix IdentityDataValidationFailed error</span></span>
<span data-ttu-id="c2ebf-266">a.</span><span class="sxs-lookup"><span data-stu-id="c2ebf-266">a.</span></span> <span data-ttu-id="c2ebf-267">確定 userPrincipalName 屬性具有支援的字元和所需的格式。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-267">Ensure that the userPrincipalName attribute has supported characters and required format.</span></span>

#### <a name="related-articles"></a><span data-ttu-id="c2ebf-268">相關文章</span><span class="sxs-lookup"><span data-stu-id="c2ebf-268">Related Articles</span></span>
* [<span data-ttu-id="c2ebf-269">準備透過 Office 365 目錄同步作業佈建使用者</span><span class="sxs-lookup"><span data-stu-id="c2ebf-269">Prepare to provision users through directory synchronization to Office 365</span></span>](https://support.office.com/en-us/article/Prepare-to-provision-users-through-directory-synchronization-to-Office-365-01920974-9e6f-4331-a370-13aea4e82b3e)

### <a name="federateddomainchangeerror"></a><span data-ttu-id="c2ebf-270">FederatedDomainChangeError</span><span class="sxs-lookup"><span data-stu-id="c2ebf-270">FederatedDomainChangeError</span></span>
#### <a name="description"></a><span data-ttu-id="c2ebf-271">說明</span><span class="sxs-lookup"><span data-stu-id="c2ebf-271">Description</span></span>
<span data-ttu-id="c2ebf-272">這是一個特殊情況，會在使用者的 UserPrincipalName 尾碼從一個同盟網域變更為另一個同盟網域時，導致發生 **"FederatedDomainChangeError"** 同步處理錯誤。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-272">This is a specific case that results in a **"FederatedDomainChangeError"** sync error when the suffix of a user's UserPrincipalName is changed from one federated domain to another federated domain.</span></span>

#### <a name="scenarios"></a><span data-ttu-id="c2ebf-273">案例</span><span class="sxs-lookup"><span data-stu-id="c2ebf-273">Scenarios</span></span>
<span data-ttu-id="c2ebf-274">對於已同步處理的使用者，UserPrincipalName 尾碼從一個同盟網域變更為另一個內部部署的同盟網域。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-274">For a synchronized user, the UserPrincipalName suffix was changed from one federated domain to another federated domain on premises.</span></span> <span data-ttu-id="c2ebf-275">例如，UserPrincipalName = bob@contoso.com 已變更為 UserPrincipalName = bob@fabrikam.com。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-275">For example, *UserPrincipalName = bob@contoso.com* was changed to *UserPrincipalName = bob@fabrikam.com*.</span></span>

#### <a name="example"></a><span data-ttu-id="c2ebf-276">範例</span><span class="sxs-lookup"><span data-stu-id="c2ebf-276">Example</span></span>
1. <span data-ttu-id="c2ebf-277">Bob Smith (contoso.com 的帳戶) 新增為 Active Directory 中具有 UserPrincipalName bob@contoso.com 的新使用者</span><span class="sxs-lookup"><span data-stu-id="c2ebf-277">Bob Smith, an account for Contoso.com, gets added as a new user in Active Directory with the UserPrincipalName bob@contoso.com</span></span>
2. <span data-ttu-id="c2ebf-278">Bob 移至 Contoso.com 的不同部門 (名為 Fabrikam.com)，而他的 UserPrincipalName 變更為 bob@fabrikam.com</span><span class="sxs-lookup"><span data-stu-id="c2ebf-278">Bob moves to a different division of Contoso.com called Fabrikam.com and his UserPrincipalName is changed to bob@fabrikam.com</span></span>
3. <span data-ttu-id="c2ebf-279">Contoso.com 和 fabrikam.com 網域都是使用 Azure Active Directory 的同盟網域。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-279">Both contoso.com and fabrikam.com domains are federated domains with Azure Active Directory.</span></span>
4. <span data-ttu-id="c2ebf-280">Bob 的 userPrincipalName 並不會更新，而導致發生 "FederatedDomainChangeError" 同步處理錯誤。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-280">Bob's userPrincipalName does not get updated and results in a "FederatedDomainChangeError" sync error.</span></span>

#### <a name="how-to-fix"></a><span data-ttu-id="c2ebf-281">修正方式</span><span class="sxs-lookup"><span data-stu-id="c2ebf-281">How to fix</span></span>
<span data-ttu-id="c2ebf-282">如果使用者的 UserPrincipalName 尾碼從 bob@**contoso.com** 更新為 bob@**fabrikam.com**，其中 **contoso.com** 與 **fabrikam.com** 都是**同盟網域**，則遵循這些步驟來修正同步處理錯誤</span><span class="sxs-lookup"><span data-stu-id="c2ebf-282">If a user's UserPrincipalName suffix was updated from bob@**contoso.com** to bob@**fabrikam.com**, where both **contoso.com** and **fabrikam.com** are **federated domains**, then follow these steps to fix the sync error</span></span>

1. <span data-ttu-id="c2ebf-283">將 Azure AD 中使用者的 UserPrincipalName 從 bob@contoso.com 更新為 bob@contoso.onmicrosoft.com。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-283">Update the user's UserPrincipalName in Azure AD from bob@contoso.com to bob@contoso.onmicrosoft.com.</span></span> <span data-ttu-id="c2ebf-284">您可以使用以下 PowerShell 命令搭配 Azure AD PowerShell 模組：`Set-MsolUserPrincipalName -UserPrincipalName bob@contoso.com -NewUserPrincipalName bob@contoso.onmicrosoft.com`</span><span class="sxs-lookup"><span data-stu-id="c2ebf-284">You can use the following PowerShell command with the Azure AD PowerShell Module: `Set-MsolUserPrincipalName -UserPrincipalName bob@contoso.com -NewUserPrincipalName bob@contoso.onmicrosoft.com`</span></span>
2. <span data-ttu-id="c2ebf-285">允許下一個同步處理週期嘗試進行同步處理。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-285">Allow the next sync cycle to attempt synchronization.</span></span> <span data-ttu-id="c2ebf-286">這次同步處理將會成功，而且 Bob 的 UserPrincipalName 會如預期般更新為 bob@fabrikam.com。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-286">This time synchronization will be successful and it will update the UserPrincipalName of Bob to bob@fabrikam.com as expected.</span></span>

#### <a name="related-articles"></a><span data-ttu-id="c2ebf-287">相關文章</span><span class="sxs-lookup"><span data-stu-id="c2ebf-287">Related Articles</span></span>
* [<span data-ttu-id="c2ebf-288">在您將使用者帳戶的 UPN 變更為使用不同的同盟網域後，Azure Active Directory 同步作業工具未同步處理變更</span><span class="sxs-lookup"><span data-stu-id="c2ebf-288">Changes aren't synced by the Azure Active Directory Sync tool after you change the UPN of a user account to use a different federated domain</span></span>](https://support.microsoft.com/en-us/help/2669550/changes-aren-t-synced-by-the-azure-active-directory-sync-tool-after-you-change-the-upn-of-a-user-account-to-use-a-different-federated-domain)

## <a name="largeobject"></a><span data-ttu-id="c2ebf-289">LargeObject</span><span class="sxs-lookup"><span data-stu-id="c2ebf-289">LargeObject</span></span>
### <a name="description"></a><span data-ttu-id="c2ebf-290">說明</span><span class="sxs-lookup"><span data-stu-id="c2ebf-290">Description</span></span>
<span data-ttu-id="c2ebf-291">當屬性超過 Azure Active Directory 結構描述所設定的允許大小限制、長度限制或計數限制時，同步處理作業會導致 **LargeObject** 或 **ExceededAllowedLength** 同步處理錯誤。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-291">When an attribute exceeds the allowed size limit, length limit or count limit set by Azure Active Directory schema, the synchronization operation results in the **LargeObject** or **ExceededAllowedLength** sync error.</span></span> <span data-ttu-id="c2ebf-292">此錯誤通常會發生於下列屬性</span><span class="sxs-lookup"><span data-stu-id="c2ebf-292">Typically this error occurs for the following attributes</span></span>

* <span data-ttu-id="c2ebf-293">userCertificate</span><span class="sxs-lookup"><span data-stu-id="c2ebf-293">userCertificate</span></span>
* <span data-ttu-id="c2ebf-294">userSMIMECertificate</span><span class="sxs-lookup"><span data-stu-id="c2ebf-294">userSMIMECertificate</span></span>
* <span data-ttu-id="c2ebf-295">thumbnailPhoto</span><span class="sxs-lookup"><span data-stu-id="c2ebf-295">thumbnailPhoto</span></span>
* <span data-ttu-id="c2ebf-296">proxyAddresses</span><span class="sxs-lookup"><span data-stu-id="c2ebf-296">proxyAddresses</span></span>

### <a name="possible-scenarios"></a><span data-ttu-id="c2ebf-297">可能的案例</span><span class="sxs-lookup"><span data-stu-id="c2ebf-297">Possible Scenarios</span></span>
1. <span data-ttu-id="c2ebf-298">Bob 的 userCertificate 屬性儲存太多指派給 Bob 的憑證。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-298">Bob's userCertificate attribute is storing too many certificates assigned to Bob.</span></span> <span data-ttu-id="c2ebf-299">這些可能包含已過期的舊版憑證。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-299">These may include older, expired certificates.</span></span> <span data-ttu-id="c2ebf-300">固定限制為 15 個憑證。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-300">The hard limit is 15 certificates.</span></span> <span data-ttu-id="c2ebf-301">如需有關如何處理 userCertificate 屬性引起之 LargeObject 錯誤的詳細資訊，請參閱[處理 userCertificate 屬性所造成的 LargeObject 錯誤](active-directory-aadconnectsync-largeobjecterror-usercertificate.md)一文。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-301">For more information on how to handle LargeObject errors with userCertificate attribute, please refer to article [Handling LargeObject errors caused by userCertificate attribute](active-directory-aadconnectsync-largeobjecterror-usercertificate.md).</span></span>
2. <span data-ttu-id="c2ebf-302">Bob 的 userSMIMECertificate 屬性儲存太多指派給 Bob 的憑證。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-302">Bob's userSMIMECertificate attribute is storing too many certificates assigned to Bob.</span></span> <span data-ttu-id="c2ebf-303">這些可能包含已過期的舊版憑證。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-303">These may include older, expired certificates.</span></span> <span data-ttu-id="c2ebf-304">固定限制為 15 個憑證。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-304">The hard limit is 15 certificates.</span></span>
3. <span data-ttu-id="c2ebf-305">Bob 在 Active Directory 中設定的 thumbnailPhoto 太大，以致於無法在 Azure AD 中進行同步處理。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-305">Bob's thumbnailPhoto set in Active Directory is too large to be synced in Azure AD.</span></span>
4. <span data-ttu-id="c2ebf-306">在 Active Directory 中自動填入 ProxyAddresses 屬性期間，一個物件被指派太多 ProxyAddresses。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-306">During automatic population of the ProxyAddresses attribute in Active Directory, an object has too many ProxyAddresses assigned.</span></span>

### <a name="how-to-fix"></a><span data-ttu-id="c2ebf-307">修正方式</span><span class="sxs-lookup"><span data-stu-id="c2ebf-307">How to fix</span></span>
1. <span data-ttu-id="c2ebf-308">確定造成錯誤的屬性在允許的限制內。</span><span class="sxs-lookup"><span data-stu-id="c2ebf-308">Ensure that the attribute causing the error is within the allowed limitation.</span></span>

## <a name="related-links"></a><span data-ttu-id="c2ebf-309">相關連結</span><span class="sxs-lookup"><span data-stu-id="c2ebf-309">Related links</span></span>
* [<span data-ttu-id="c2ebf-310">在 Active Directory 管理中心找出 Active Directory 物件</span><span class="sxs-lookup"><span data-stu-id="c2ebf-310">Locate Active Directory Objects in Active Directory Administrative Center</span></span>](https://technet.microsoft.com/library/dd560661.aspx)
* [<span data-ttu-id="c2ebf-311">如何使用 Azure Active Directory PowerShell 查詢 Azure Active Directory 中的物件</span><span class="sxs-lookup"><span data-stu-id="c2ebf-311">How to query Azure Active Directory for an object using Azure Active Directory PowerShell</span></span>](https://msdn.microsoft.com/library/azure/jj151815.aspx)
