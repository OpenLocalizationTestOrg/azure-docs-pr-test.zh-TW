---
title: "如何使用存取控制 (Java) | Microsoft Docs"
description: "了解如何在 Azure 中利用 Java 來開發及使用存取控制。"
services: active-directory
documentationcenter: java
author: rmcmurray
manager: erikre
editor: 
ms.assetid: 247dfd59-0221-4193-97ec-4f3ebe01d3c7
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: Java
ms.topic: article
ms.date: 04/25/2017
ms.author: robmcm
ms.custom: aaddev
ms.openlocfilehash: 698403d181e1fee09bb4692290c92203ded97ba4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/11/2017
---
# <a name="how-to-authenticate-web-users-with-azure-access-control-service-using-eclipse"></a><span data-ttu-id="52cff-103">如何使用 Eclipse 搭配 Azure 存取控制服務來驗證 Web 使用者</span><span class="sxs-lookup"><span data-stu-id="52cff-103">How to Authenticate Web Users with Azure Access Control Service Using Eclipse</span></span>
<span data-ttu-id="52cff-104">本指南說明如何在 Azure Toolkit for Eclipse 內使用 Azure 存取控制服務 (ACS)。</span><span class="sxs-lookup"><span data-stu-id="52cff-104">This guide will show you how to use the Azure Access Control Service (ACS) within the Azure Toolkit for Eclipse.</span></span> <span data-ttu-id="52cff-105">如需 ACS 的詳細資訊，請參閱 [後續步驟](#next_steps) 一節。</span><span class="sxs-lookup"><span data-stu-id="52cff-105">For more information on ACS, see the [Next steps](#next_steps) section.</span></span>

> [!NOTE]
> <span data-ttu-id="52cff-106">Azure Access Services Control Filter 是社群技術預覽。</span><span class="sxs-lookup"><span data-stu-id="52cff-106">The Azure Access Services Control Filter is a community technology preview.</span></span> <span data-ttu-id="52cff-107">由於是發行前軟體，Microsoft 尚未提供正式支援。</span><span class="sxs-lookup"><span data-stu-id="52cff-107">As pre-release software, it is not formally supported by Microsoft.</span></span>
> 
> 

## <a name="what-is-acs"></a><span data-ttu-id="52cff-108">什麼是 ACS？</span><span class="sxs-lookup"><span data-stu-id="52cff-108">What is ACS?</span></span>
<span data-ttu-id="52cff-109">大部分開發人員都不是身分識別專家，因而通常不想花時間為其應用程式和服務開發驗證與授權機制。</span><span class="sxs-lookup"><span data-stu-id="52cff-109">Most developers are not identity experts and generally do not want to spend time developing authentication and authorization mechanisms for their applications and services.</span></span> <span data-ttu-id="52cff-110">ACS 是一項 Azure 服務，可讓您輕鬆驗證需要存取您的 Web 應用程式與服務的使用者，而不必將複雜的驗證邏輯至分解成您的程式碼。</span><span class="sxs-lookup"><span data-stu-id="52cff-110">ACS is an Azure service that provides an easy way of authenticating users who need to access your web applications and services without having to factor complex authentication logic into your code.</span></span>

<span data-ttu-id="52cff-111">以下是 ACS 中提供的功能：</span><span class="sxs-lookup"><span data-stu-id="52cff-111">The following features are available in ACS:</span></span>

* <span data-ttu-id="52cff-112">與 Windows Identity Foundation (WIF) 整合。</span><span class="sxs-lookup"><span data-stu-id="52cff-112">Integration with Windows Identity Foundation (WIF).</span></span>
* <span data-ttu-id="52cff-113">支援熱門的 Web 身分識別提供者 (IP)，包括 Windows Live ID、Google、Yahoo! 和 Facebook。</span><span class="sxs-lookup"><span data-stu-id="52cff-113">Support for popular web identity providers (IPs) including Windows Live ID, Google, Yahoo!, and Facebook.</span></span>
* <span data-ttu-id="52cff-114">支援 Active Directory Federation Services (AD FS) 2.0。</span><span class="sxs-lookup"><span data-stu-id="52cff-114">Support for Active Directory Federation Services (AD FS) 2.0.</span></span>
* <span data-ttu-id="52cff-115">一項開放式資料通訊協定 (OData) 型管理服務，可用來對 ACS 設定進行程式設計存取。</span><span class="sxs-lookup"><span data-stu-id="52cff-115">An Open Data Protocol (OData)-based management service that provides programmatic access to ACS settings.</span></span>
* <span data-ttu-id="52cff-116">一個管理入口網站，可用來對 ACS 設定進行系統管理存取。</span><span class="sxs-lookup"><span data-stu-id="52cff-116">A Management Portal that allows administrative access to the ACS settings.</span></span>

<span data-ttu-id="52cff-117">如需 ACS 的詳細資訊，請參閱[存取控制服務 2.0][Access Control Service 2.0]。</span><span class="sxs-lookup"><span data-stu-id="52cff-117">For more information about ACS, see [Access Control Service 2.0][Access Control Service 2.0].</span></span>

## <a name="concepts"></a><span data-ttu-id="52cff-118">概念</span><span class="sxs-lookup"><span data-stu-id="52cff-118">Concepts</span></span>
<span data-ttu-id="52cff-119">Azure ACS 是以宣告式身分識別為原則來打造，後者是為內部部署上或雲端中執行的應用程式建立驗證機制的一致方式。</span><span class="sxs-lookup"><span data-stu-id="52cff-119">Azure ACS is built on the principals of claims-based identity - a consistent approach to creating authentication mechanisms for applications running on-premises or in the cloud.</span></span> <span data-ttu-id="52cff-120">宣告式身分識別是應用程式與服務在遇到本身組織內、其他組織內與網際網路上的使用者時，常用來取得所需關於這些使用者之身分識別資訊的方式。</span><span class="sxs-lookup"><span data-stu-id="52cff-120">Claims-based identity provides a common way for applications and services to acquire the identity information they need about users inside their organization, in other organizations, and on the Internet.</span></span>

<span data-ttu-id="52cff-121">若要完成本指南中的工作，您應該了解下列概念：</span><span class="sxs-lookup"><span data-stu-id="52cff-121">To complete the tasks in this guide, you should understand the following concepts:</span></span>

<span data-ttu-id="52cff-122">**用戶端** - 在本作法指南的內容中，這是指用來嘗試存取您 Web 應用程式的瀏覽器。</span><span class="sxs-lookup"><span data-stu-id="52cff-122">**Client** - In the context of this how-to guide, this is a browser that is attempting to gain access to your web application.</span></span>

<span data-ttu-id="52cff-123">**信賴憑證者 (RP) 應用程式** - RP 應用程式指的是將驗證工作交給外部授權單位負責的網站或服務。</span><span class="sxs-lookup"><span data-stu-id="52cff-123">**Relying party (RP) application** - An RP application is a website or service that outsources authentication to one external authority.</span></span> <span data-ttu-id="52cff-124">以身分識別的行話來說，就是 RP 信任該授權單位。</span><span class="sxs-lookup"><span data-stu-id="52cff-124">In identity jargon, we say that the RP trusts that authority.</span></span> <span data-ttu-id="52cff-125">本指南將說明如何設定您的應用程式來信任 ACS。</span><span class="sxs-lookup"><span data-stu-id="52cff-125">This guide explains how to configure your application to trust ACS.</span></span>

<span data-ttu-id="52cff-126">**權杖** - 權杖指的是一種安全性資料集合，通常會在順利驗證使用者時發出。</span><span class="sxs-lookup"><span data-stu-id="52cff-126">**Token** - A token is a collection of security data that is usually issued upon successful authentication of a user.</span></span> <span data-ttu-id="52cff-127">其包含一組 *宣告*，即已驗證之使用者的屬性。</span><span class="sxs-lookup"><span data-stu-id="52cff-127">It contains a set of *claims*, attributes of the authenticated user.</span></span> <span data-ttu-id="52cff-128">宣告可以代表使用者的名稱、使用者所屬角色的識別碼，或使用者的年紀等等。</span><span class="sxs-lookup"><span data-stu-id="52cff-128">A claim can represent a user's name, an identifier for a role a user belongs to, a user's age, and so on.</span></span> <span data-ttu-id="52cff-129">權杖通常具有數位簽章，表示它可以永遠回溯至其簽發者，而且其內容無法篡改。</span><span class="sxs-lookup"><span data-stu-id="52cff-129">A token is usually digitally signed, which means it can always be sourced back to its issuer, and its content cannot be tampered with.</span></span> <span data-ttu-id="52cff-130">使用者需要取得 RP 應用程式的存取權時，需出示由 RP 應用程式信任的授權單位所簽發的有效權杖。</span><span class="sxs-lookup"><span data-stu-id="52cff-130">A user gains access to a RP application by presenting a valid token issued by an authority that the RP application trusts.</span></span>

<span data-ttu-id="52cff-131">**身分識別提供者 (IP)** - IP 是負責驗證使用者身分識別並簽發安全性權杖的授權單位。</span><span class="sxs-lookup"><span data-stu-id="52cff-131">**Identity Provider (IP)** - An IP is an authority that authenticates user identities and issues security tokens.</span></span> <span data-ttu-id="52cff-132">簽發權杖的實際工作是透過稱為 Security Token Service (STS) 的特殊服務來實作。</span><span class="sxs-lookup"><span data-stu-id="52cff-132">The actual work of issuing tokens is implemented though a special service called Security Token Service (STS).</span></span> <span data-ttu-id="52cff-133">典型的 IP 範例包括 Windows Live ID、Facebook、商業使用者存放庫 (如 Active Directory) 等等。</span><span class="sxs-lookup"><span data-stu-id="52cff-133">Typical examples of IPs include Windows Live ID, Facebook, business user repositories (like Active Directory), and so on.</span></span>
<span data-ttu-id="52cff-134">當 ACS 已設定為信任某個 IP 時，系統將接受並驗證該 IP 所簽發的權杖。</span><span class="sxs-lookup"><span data-stu-id="52cff-134">When ACS is configured to trust an IP, the system will accept and validate tokens issued by that IP.</span></span> <span data-ttu-id="52cff-135">ACS 可以一次信任多個 IP，表示當您的應用程式信任 ACS 時，您可以立即從 ACS 代表您信任的所有 IP，從而將您的應用程式提供給所有已驗證的使用者。</span><span class="sxs-lookup"><span data-stu-id="52cff-135">ACS can trust multiple IPs at once, which means that when your application trusts ACS, you can instantly offer your application to all the authenticated users from all the IPs that ACS trusts on your behalf.</span></span>

<span data-ttu-id="52cff-136">**同盟提供者 (FP)** - IP 直接有使用者的資料，並會使用其認證來驗證他們，以及簽發關於其身分的宣告。</span><span class="sxs-lookup"><span data-stu-id="52cff-136">**Federation Provider (FP)** - IPs have direct knowledge of users, and authenticate them using their credentials and issue claims about what they know about them.</span></span> <span data-ttu-id="52cff-137">同盟提供者 (FP) 是不同種類的授權單位：不是直接驗證使用者，而是擔任一個 RP 與一個或多個 IP 之間的媒介和代理驗證。</span><span class="sxs-lookup"><span data-stu-id="52cff-137">A Federation Provider (FP) is a different kind of authority: rather than authenticating users directly, it acts as an intermediary and brokers authentication between one RP and one or more IPs.</span></span> <span data-ttu-id="52cff-138">IP 和 FP 都會簽發安全性權杖，因此它們都會使用 Security Token Services (STS)。</span><span class="sxs-lookup"><span data-stu-id="52cff-138">Both IPs and FPs issue security tokens, hence they both use Security Token Services (STS).</span></span> <span data-ttu-id="52cff-139">ACS 是一種 FP。</span><span class="sxs-lookup"><span data-stu-id="52cff-139">ACS is one FP.</span></span>

<span data-ttu-id="52cff-140">**ACS 規則引擎** - 用來將傳入的權杖從信任的 IP 轉換為 RP 所耗用之權杖的邏輯，是以簡單的宣告轉換規則格式來編寫程式碼。</span><span class="sxs-lookup"><span data-stu-id="52cff-140">**ACS Rule Engine** - The logic used to transform incoming tokens from trusted IPs to tokens meant to be consumed by the RP is codified in form of simple claims transformation rules.</span></span> <span data-ttu-id="52cff-141">ACS 以規則引擎為其特色，仔細套用您對 RP 所指定的任何轉換邏輯。</span><span class="sxs-lookup"><span data-stu-id="52cff-141">ACS features a rule engine that takes care of applying whatever transformation logic you specified for your RP.</span></span>

<span data-ttu-id="52cff-142">**ACS 命名空間** - 命名空間是您用於組織設定之 ACS 的最上層分割區。</span><span class="sxs-lookup"><span data-stu-id="52cff-142">**ACS Namespace** - A namespace is a top level partition of ACS that you use for organizing your settings.</span></span> <span data-ttu-id="52cff-143">命名空間會保留一個清單，其列出您信任的 IP、您要供應的 RP 應用程式、您預期規則引擎處理傳入權杖時所使用的規則等等。</span><span class="sxs-lookup"><span data-stu-id="52cff-143">A namespace holds a list of IPs you trust, the RP applications you want to serve, the rules that you expect the rule engine to process incoming tokens with, and so on.</span></span> <span data-ttu-id="52cff-144">命名空間會公開應用程式和開發人員將使用的各種端點，以取得 ACS 來執行其功能。</span><span class="sxs-lookup"><span data-stu-id="52cff-144">A namespace exposes various endpoints that will be used by the application and the developer to get ACS to perform its function.</span></span>

<span data-ttu-id="52cff-145">下圖顯示 ACS 驗證與 Web 應用程式如何搭配運作：</span><span class="sxs-lookup"><span data-stu-id="52cff-145">The following figure shows how ACS authentication works with a web application:</span></span>

![ACS flow diagram][acs_flow]

1. <span data-ttu-id="52cff-147">用戶端 (在此案例中是指瀏覽器) 向 RP 要求一個頁面。</span><span class="sxs-lookup"><span data-stu-id="52cff-147">The client (in this case a browser) requests a page from the RP.</span></span>
2. <span data-ttu-id="52cff-148">因為要求尚未經過驗證，所以 RP 將使用者重新導向至信任的授權單位 (即 ACS)。</span><span class="sxs-lookup"><span data-stu-id="52cff-148">Since the request is not yet authenticated, the RP redirects the user to the authority that it trusts, which is ACS.</span></span> <span data-ttu-id="52cff-149">ACS 列出已為此 RP 指定的 IP，供使用者選擇。</span><span class="sxs-lookup"><span data-stu-id="52cff-149">The ACS presents the user with the choice of IPs that were specified for this RP.</span></span> <span data-ttu-id="52cff-150">使用者選取適當的 IP。</span><span class="sxs-lookup"><span data-stu-id="52cff-150">The user selects the appropriate IP.</span></span>
3. <span data-ttu-id="52cff-151">用戶端瀏覽至 IP 的驗證頁面，並提示使用者登入。</span><span class="sxs-lookup"><span data-stu-id="52cff-151">The client browses to the IP's authentication page, and prompts the user to log on.</span></span>
4. <span data-ttu-id="52cff-152">在用戶端經過驗證後 (例如，輸入了身分識別認證)，IP 即簽發安全性權杖。</span><span class="sxs-lookup"><span data-stu-id="52cff-152">After the client is authenticated (for example, the identity credentials are entered), the IP issues a security token.</span></span>
5. <span data-ttu-id="52cff-153">在簽發安全性權杖後，IP 會重新導向用戶端至 ACS，而且用戶端會傳送 IP 所簽發的安全性權杖給 ACS。</span><span class="sxs-lookup"><span data-stu-id="52cff-153">After issuing a security token, the IP redirects the client to ACS and the client sends the security token issued by the IP to ACS.</span></span>
6. <span data-ttu-id="52cff-154">ACS 驗證 IP 所簽發的安全性權杖、將此權杖中的身分識別宣告輸入至 ACS 規則引擎、計算輸出的身分識別宣告，然後簽發含有這些輸出宣告的新安全性權杖。</span><span class="sxs-lookup"><span data-stu-id="52cff-154">ACS validates the security token issued by the IP, inputs the identity claims in this token into the ACS rules engine, calculates the output identity claims, and issues a new security token that contains these output claims.</span></span>
7. <span data-ttu-id="52cff-155">ACS 將用戶端重新導向至 RP。</span><span class="sxs-lookup"><span data-stu-id="52cff-155">ACS redirects the client to the RP.</span></span> <span data-ttu-id="52cff-156">用戶端將 ACS 所簽發的全新安全性權杖傳送給 RP。</span><span class="sxs-lookup"><span data-stu-id="52cff-156">The client sends the new security token issued by ACS to the RP.</span></span> <span data-ttu-id="52cff-157">RP 在 ACS 所簽發的安全性權杖上驗證簽章及宣告，然後傳回原先要求的頁面。</span><span class="sxs-lookup"><span data-stu-id="52cff-157">The RP validates the signature on the security token issued by ACS, validates the claims in this token, and returns the page that was originally requested.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="52cff-158">必要條件</span><span class="sxs-lookup"><span data-stu-id="52cff-158">Prerequisites</span></span>
<span data-ttu-id="52cff-159">若要完成本指南中的工作，您需要有下列項目：</span><span class="sxs-lookup"><span data-stu-id="52cff-159">To complete the tasks in this guide, you will need the following:</span></span>

* <span data-ttu-id="52cff-160">Java Developer Kit (JDK) 1.6 版或更新版本。</span><span class="sxs-lookup"><span data-stu-id="52cff-160">A Java Developer Kit (JDK), v 1.6 or later.</span></span>
* <span data-ttu-id="52cff-161">Eclipse IDE for Java EE Developers (Indigo 或更新版本)。</span><span class="sxs-lookup"><span data-stu-id="52cff-161">Eclipse IDE for Java EE Developers, Indigo or later.</span></span> <span data-ttu-id="52cff-162">這可透過 <http://www.eclipse.org/downloads/> 下載。</span><span class="sxs-lookup"><span data-stu-id="52cff-162">This can be downloaded from <http://www.eclipse.org/downloads/>.</span></span> 
* <span data-ttu-id="52cff-163">Java 型 Web 伺服器或應用程式伺服器的散發套件，例如 Apache Tomcat、GlassFish、JBoss Application Server 或 Jetty。</span><span class="sxs-lookup"><span data-stu-id="52cff-163">A distribution of a Java-based web server or application server, such as Apache Tomcat, GlassFish, JBoss Application Server, or Jetty.</span></span>
* <span data-ttu-id="52cff-164">Azure 訂用帳戶，可從 <http://www.microsoft.com/windowsazure/offers/> 取得。</span><span class="sxs-lookup"><span data-stu-id="52cff-164">an Azure subscription, which can be acquired from <http://www.microsoft.com/windowsazure/offers/>.</span></span>
* <span data-ttu-id="52cff-165">Azure Toolkit for Eclipse，2014 年 4 月版本或更新版本。</span><span class="sxs-lookup"><span data-stu-id="52cff-165">The Azure Toolkit for Eclipse, April 2014 release or later.</span></span> <span data-ttu-id="52cff-166">如需詳細資訊，請參閱 [安裝 Azure Toolkit for Eclipse](http://msdn.microsoft.com/library/windowsazure/hh690946.aspx)。</span><span class="sxs-lookup"><span data-stu-id="52cff-166">For more information, see [Installing the Azure Toolkit for Eclipse](http://msdn.microsoft.com/library/windowsazure/hh690946.aspx).</span></span>
* <span data-ttu-id="52cff-167">要與您應用程式搭配使用的 X.509 憑證。</span><span class="sxs-lookup"><span data-stu-id="52cff-167">An X.509 certificate to use with your application.</span></span> <span data-ttu-id="52cff-168">您需要此憑證同時具有公開憑證 (.cer) 和 個人資訊交換 (.PFX) 格式。</span><span class="sxs-lookup"><span data-stu-id="52cff-168">You will need this certificate in both public certificate (.cer) and Personal Information Exchange (.PFX) format.</span></span> <span data-ttu-id="52cff-169">(本教學課程稍後將描述建立此憑證的選項)。</span><span class="sxs-lookup"><span data-stu-id="52cff-169">(Options for creating this certificate will be described later in this tutorial).</span></span>
* <span data-ttu-id="52cff-170">熟悉 [在 Eclipse 建立 Azure 的 Hello World 應用程式](http://msdn.microsoft.com/library/windowsazure/hh690944.aspx)(英文) 中所討論的 Azure 計算模擬器和部署技術。</span><span class="sxs-lookup"><span data-stu-id="52cff-170">Familiarity with the Azure compute emulator and deployment techniques discussed at [Creating a Hello World Application for Azure in Eclipse](http://msdn.microsoft.com/library/windowsazure/hh690944.aspx).</span></span>

## <a name="create-an-acs-namespace"></a><span data-ttu-id="52cff-171">建立 ACS 命名空間</span><span class="sxs-lookup"><span data-stu-id="52cff-171">Create an ACS Namespace</span></span>
<span data-ttu-id="52cff-172">若要在 Azure 開始使用存取控制服務 (ACS)，您必須建立 ACS 命名空間。</span><span class="sxs-lookup"><span data-stu-id="52cff-172">To begin using Access Control Service (ACS) in Azure, you must create an ACS namespace.</span></span> <span data-ttu-id="52cff-173">此命名空間可提供從您的應用程式內定址 ACS 資源的唯一範圍。</span><span class="sxs-lookup"><span data-stu-id="52cff-173">The namespace provides a unique scope for addressing ACS resources from within your application.</span></span>

1. <span data-ttu-id="52cff-174">登入 [Azure 管理入口網站][Azure Management Portal]。</span><span class="sxs-lookup"><span data-stu-id="52cff-174">Log into the [Azure Management Portal][Azure Management Portal].</span></span>
2. <span data-ttu-id="52cff-175">按一下 [Active Directory] 。</span><span class="sxs-lookup"><span data-stu-id="52cff-175">Click **Active Directory**.</span></span> 
3. <span data-ttu-id="52cff-176">若要建立新的「存取控制」命名空間，請依序按一下 [新增]、[應用程式服務]、[存取控制]，然後按一下 [快速建立]。</span><span class="sxs-lookup"><span data-stu-id="52cff-176">To create a new Access Control namespace, click **New**, click **App Services**, click **Access Control**, and then click **Quick Create**.</span></span> 
4. <span data-ttu-id="52cff-177">輸入命名空間的名稱。</span><span class="sxs-lookup"><span data-stu-id="52cff-177">Enter a name for the namespace.</span></span> <span data-ttu-id="52cff-178">Azure 會確認名稱是否具唯一性。</span><span class="sxs-lookup"><span data-stu-id="52cff-178">Azure verifies that the name is unique.</span></span>
5. <span data-ttu-id="52cff-179">選取使用命名空間的地區。</span><span class="sxs-lookup"><span data-stu-id="52cff-179">Select the region in which the namespace is used.</span></span> <span data-ttu-id="52cff-180">為了獲得最佳效能，請使用您要在其中部署應用程式的地區。</span><span class="sxs-lookup"><span data-stu-id="52cff-180">For the best performance, use the region in which you are deploying your application.</span></span>
6. <span data-ttu-id="52cff-181">如果您有多個訂用帳戶，請選取要對 ACS 命名空間使用的訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="52cff-181">If you have more than one subscription, select the subscription that you want to use for the ACS namespace.</span></span>
7. <span data-ttu-id="52cff-182">按一下 [建立] 。</span><span class="sxs-lookup"><span data-stu-id="52cff-182">Click **Create**.</span></span>

<span data-ttu-id="52cff-183">Azure 即會建立並啟動命名空間。</span><span class="sxs-lookup"><span data-stu-id="52cff-183">Azure creates and activates the namespace.</span></span> <span data-ttu-id="52cff-184">等到新命名空間的狀態變成 [作用中]  之後再繼續。</span><span class="sxs-lookup"><span data-stu-id="52cff-184">Wait until the status of the new namespace is **Active** before continuing.</span></span> 

## <a name="add-identity-providers"></a><span data-ttu-id="52cff-185">新增身分識別提供者</span><span class="sxs-lookup"><span data-stu-id="52cff-185">Add identity providers</span></span>
<span data-ttu-id="52cff-186">在此工作中，您會新增 IP，以與您的 RP 應用程式搭配使用進行驗證。</span><span class="sxs-lookup"><span data-stu-id="52cff-186">In this task, you add IPs to use with your RP application for authentication.</span></span> <span data-ttu-id="52cff-187">基於示範目的，此工作會顯示如何新增 Windows Live 作為 IP，但是您可以使用 ACS 管理入口網站中列出的任一個 IP。</span><span class="sxs-lookup"><span data-stu-id="52cff-187">For demonstration purposes, this task shows how to add Windows Live as an IP, but you could use any of the IPs listed in the ACS Management Portal.</span></span>

1. <span data-ttu-id="52cff-188">在 [Azure 管理入口網站][Azure Management Portal]中，按一下 [Active Directory]、選取存取控制命名空間，然後按一下 [管理]。</span><span class="sxs-lookup"><span data-stu-id="52cff-188">In the [Azure Management Portal][Azure Management Portal], click **Active Directory**, select an Access Control namespace, and then click **Manage**.</span></span> <span data-ttu-id="52cff-189">即會開啟 ACS 管理入口網站。</span><span class="sxs-lookup"><span data-stu-id="52cff-189">The ACS Management Portal opens.</span></span>
2. <span data-ttu-id="52cff-190">在 ACS 管理入口網站的左導覽窗格中，按一下 [身分識別提供者] 。</span><span class="sxs-lookup"><span data-stu-id="52cff-190">In the left navigation pane of the ACS Management Portal, click **Identity providers**.</span></span>
3. <span data-ttu-id="52cff-191">依預設會啟用 Windows Live ID，而且無法刪除。</span><span class="sxs-lookup"><span data-stu-id="52cff-191">Windows Live ID is enabled by default, and cannot be deleted.</span></span> <span data-ttu-id="52cff-192">基於本教學課程的目的，只會使用 Windows Live ID。</span><span class="sxs-lookup"><span data-stu-id="52cff-192">For purposes of this tutorial, only Windows Live ID is used.</span></span> <span data-ttu-id="52cff-193">不過，本畫面就是您可以按一下 [新增]  按鈕來新增其他 IP 的畫面。</span><span class="sxs-lookup"><span data-stu-id="52cff-193">This screen, however, is where you could add other IPs, by clicking the **Add** button.</span></span>

<span data-ttu-id="52cff-194">現在已啟用 Windows Live ID 作為 ACS 命名空間的 IP。</span><span class="sxs-lookup"><span data-stu-id="52cff-194">Windows Live ID is now enabled as an IP for your ACS namespace.</span></span> <span data-ttu-id="52cff-195">接著，您可以指定 Java Web 應用程式 (將在稍後建立) 作為 RP。</span><span class="sxs-lookup"><span data-stu-id="52cff-195">Next, you specify your Java web application (to be created later) as an RP.</span></span>

## <a name="add-a-relying-party-application"></a><span data-ttu-id="52cff-196">新增信賴憑證者應用程式</span><span class="sxs-lookup"><span data-stu-id="52cff-196">Add a relying party application</span></span>
<span data-ttu-id="52cff-197">在此工作中，您可以設定 ACS，將 Java Web 應用程式辨識為有效的 RP 應用程式。</span><span class="sxs-lookup"><span data-stu-id="52cff-197">In this task, you configure ACS to recognize your Java web application as a valid RP application.</span></span>

1. <span data-ttu-id="52cff-198">在 ACS 管理入口網站上，按一下 [Relying party applications] 。</span><span class="sxs-lookup"><span data-stu-id="52cff-198">On the ACS Management Portal, click **Relying party applications**.</span></span>
2. <span data-ttu-id="52cff-199">在 [信賴憑證者應用程式] 頁面上，按一下 [新增]。</span><span class="sxs-lookup"><span data-stu-id="52cff-199">On the **Relying Party Applications** page, click **Add**.</span></span>
3. <span data-ttu-id="52cff-200">在 [Relying party applications]  頁面上，執行下列動作：</span><span class="sxs-lookup"><span data-stu-id="52cff-200">On the **Add Relying Party Application** page, do the following:</span></span>
   
   1. <span data-ttu-id="52cff-201">在 [名稱] 中，輸入 RP 的名稱。</span><span class="sxs-lookup"><span data-stu-id="52cff-201">In **Name**, type the name of the RP.</span></span> <span data-ttu-id="52cff-202">基於本教學課程的目的，輸入 **Azure Web App**。</span><span class="sxs-lookup"><span data-stu-id="52cff-202">For purposes of this tutorial, type **Azure Web App**.</span></span>
   2. <span data-ttu-id="52cff-203">在 [模式] 中，選取 [手動輸入設定]。</span><span class="sxs-lookup"><span data-stu-id="52cff-203">In **Mode**, select **Enter settings manually**.</span></span>
   3. <span data-ttu-id="52cff-204">在 [領域] 中，輸入 ACS 所簽發的安全性權杖要套用至的 URI。</span><span class="sxs-lookup"><span data-stu-id="52cff-204">In **Realm**, type the URI to which the security token issued by ACS applies.</span></span> <span data-ttu-id="52cff-205">針對此工作，輸入 **http://localhost:8080/**。</span><span class="sxs-lookup"><span data-stu-id="52cff-205">For this task, type **http://localhost:8080/**.</span></span>
      <span data-ttu-id="52cff-206">![Relying party realm for use in compute emulator][relying_party_realm_emulator]</span><span class="sxs-lookup"><span data-stu-id="52cff-206">![Relying party realm for use in compute emulator][relying_party_realm_emulator]</span></span>
   4. <span data-ttu-id="52cff-207">在 [傳回 URL]  中，輸入 ACS 傳回安全性權杖的 URL。</span><span class="sxs-lookup"><span data-stu-id="52cff-207">In **Return URL,** type the URL to which ACS returns the security token.</span></span> <span data-ttu-id="52cff-208">針對此工作，輸入 **http://localhost:8080/MyACSHelloWorld/index.jsp**
      ![要在計算模擬器中使用的信賴憑證者傳回 URL][relying_party_return_url_emulator]</span><span class="sxs-lookup"><span data-stu-id="52cff-208">For this task, type **http://localhost:8080/MyACSHelloWorld/index.jsp**
![Relying party return URL for use in compute emulator][relying_party_return_url_emulator]</span></span>
   5. <span data-ttu-id="52cff-209">在其餘的欄位中接受預設值。</span><span class="sxs-lookup"><span data-stu-id="52cff-209">Accept the default values in the rest of the fields.</span></span>
4. <span data-ttu-id="52cff-210">按一下 [儲存] 。</span><span class="sxs-lookup"><span data-stu-id="52cff-210">Click **Save**.</span></span>

<span data-ttu-id="52cff-211">您現在已順利設定 Java Web 應用程式，當它在 Azure 計算模擬器 (在 http://localhost:8080/) 執行時，將成為 ACS 命名空間中的 RP。</span><span class="sxs-lookup"><span data-stu-id="52cff-211">You have now successfully configured your Java web application when it is run in the Azure compute emulator (at http://localhost:8080/) to be an RP in your ACS namespace.</span></span> <span data-ttu-id="52cff-212">接著，建立 ACS 用來為 RP 處理宣告的規則。</span><span class="sxs-lookup"><span data-stu-id="52cff-212">Next, create the rules that ACS uses to process claims for the RP.</span></span>

## <a name="create-rules"></a><span data-ttu-id="52cff-213">建立規則</span><span class="sxs-lookup"><span data-stu-id="52cff-213">Create rules</span></span>
<span data-ttu-id="52cff-214">在此工作中，您可以定義規則，驅使從 IP 傳遞至 RP 的宣告方法。</span><span class="sxs-lookup"><span data-stu-id="52cff-214">In this task, you define the rules that drive how claims are passed from IPs to your RP.</span></span> <span data-ttu-id="52cff-215">基於本指南的目的，我們只會將 ACS 設定成直接在輸出權杖中複製輸入宣告類型和值，而不會篩選或修改它們。</span><span class="sxs-lookup"><span data-stu-id="52cff-215">For the purpose of this guide, we will simply configure ACS to copy the input claim types and values directly in the output token, without filtering or modifying them.</span></span>

1. <span data-ttu-id="52cff-216">在 ACS 管理入口網站主頁面上，按一下 [規則群組] 。</span><span class="sxs-lookup"><span data-stu-id="52cff-216">On the ACS Management Portal main page, click **Rule groups**.</span></span>
2. <span data-ttu-id="52cff-217">在 [規則群組] 頁面上，按一下 [Azure Web 應用程式的預設規則群組]。</span><span class="sxs-lookup"><span data-stu-id="52cff-217">On the **Rule Groups** page, click **Default Rule Group for Azure Web App**.</span></span>
3. <span data-ttu-id="52cff-218">在 [編輯規則群組] 頁面上，按一下 [產生]。</span><span class="sxs-lookup"><span data-stu-id="52cff-218">On the **Edit Rule Group** page, click **Generate**.</span></span>
4. <span data-ttu-id="52cff-219">在 [產生規則：Azure Web 應用程式的預設規則群組] 頁面上，確定已核取 Windows Live ID，然後按一下 [產生]。</span><span class="sxs-lookup"><span data-stu-id="52cff-219">On the **Generate Rules: Default Rule Group for Azure Web App** page, ensure Windows Live ID is checked and then click **Generate**.</span></span>    
5. <span data-ttu-id="52cff-220">在 [編輯規則群組] 頁面上，按一下 [儲存]。</span><span class="sxs-lookup"><span data-stu-id="52cff-220">On the **Edit Rule Group** page, click **Save**.</span></span>

## <a name="upload-a-certificate-to-your-acs-namespace"></a><span data-ttu-id="52cff-221">將憑證上傳至您的 ACS 命名空間</span><span class="sxs-lookup"><span data-stu-id="52cff-221">Upload a certificate to your ACS namespace</span></span>
<span data-ttu-id="52cff-222">在此工作中，您可以上傳 .PFX 憑證，這將用來簽發 ACS 命名空間所建立的權杖要求。</span><span class="sxs-lookup"><span data-stu-id="52cff-222">In this task, you upload a .PFX certificate that will be used to sign token requests created by your ACS namespace.</span></span>

1. <span data-ttu-id="52cff-223">在 ACS 管理入口網站主頁面上，按一下 [Certificates and keys] 。</span><span class="sxs-lookup"><span data-stu-id="52cff-223">On the ACS Management Portal main page, click **Certificates and keys**.</span></span>
2. <span data-ttu-id="52cff-224">在 [憑證與金鑰] 頁面上，按一下 [權杖簽署] 上面的 [新增]。</span><span class="sxs-lookup"><span data-stu-id="52cff-224">On the **Certificates and Keys** page, click **Add** above **Token Signing**.</span></span>
3. <span data-ttu-id="52cff-225">在 [Add Token-Signing Certificate or Key]  頁面上：</span><span class="sxs-lookup"><span data-stu-id="52cff-225">On the **Add Token-Signing Certificate or Key** page:</span></span>
   1. <span data-ttu-id="52cff-226">在 [用於] 區段中，按一下 [信賴憑證者應用程式]，然後選取 [Azure Web 應用程式] \(您先前設定為信賴憑證者應用程式的名稱)。</span><span class="sxs-lookup"><span data-stu-id="52cff-226">In the **Used for** section, click **Relying Party Application** and select **Azure Web App** (which you previously set as the name of your relying party application).</span></span>
   2. <span data-ttu-id="52cff-227">在 [類型] 區段中，選取 [X.509 憑證]。</span><span class="sxs-lookup"><span data-stu-id="52cff-227">In the **Type** section, select **X.509 Certificate**.</span></span>
   3. <span data-ttu-id="52cff-228">在 [憑證] 區段中，按一下瀏覽按鈕並瀏覽至您想要使用的 X.509 憑證檔案。</span><span class="sxs-lookup"><span data-stu-id="52cff-228">In the **Certificate** section, click the browse button and navigate to the X.509 certificate file that you want to use.</span></span> <span data-ttu-id="52cff-229">這將為 .PFX 檔案。</span><span class="sxs-lookup"><span data-stu-id="52cff-229">This will be a .PFX file.</span></span> <span data-ttu-id="52cff-230">選取該檔案、按一下 [開啟]，然後在 [密碼] 文字方塊中輸入憑證密碼。</span><span class="sxs-lookup"><span data-stu-id="52cff-230">Select the file, click **Open**,  and then enter the certificate password in the **Password** text box.</span></span> <span data-ttu-id="52cff-231">請注意，基於測試目的，您可能使用自我簽署憑證。</span><span class="sxs-lookup"><span data-stu-id="52cff-231">Note that for testing purposes, you may use a self-signed-certificate.</span></span> <span data-ttu-id="52cff-232">如果要建立自我簽署憑證，請使用 [ACS 篩選器程式庫] 對話方塊 (稍後將說明) 中的 [新增] 按鈕，或 **encutil.exe** 公用程式 (來自 Azure Starter Kit for Java 的[專案網站][project website])。</span><span class="sxs-lookup"><span data-stu-id="52cff-232">To create a self-signed certificate, use the **New** button in the **ACS Filter Library** dialog (described later), or use the **encutil.exe** utility from the [project website][project website] of the Azure Starter Kit for Java.</span></span>
   4. <span data-ttu-id="52cff-233">確定已核取 [設為主要]。</span><span class="sxs-lookup"><span data-stu-id="52cff-233">Ensure that **Make Primary** is checked.</span></span> <span data-ttu-id="52cff-234">您的 [新增權杖簽署憑證或金鑰] 頁面應該會看起來如下。</span><span class="sxs-lookup"><span data-stu-id="52cff-234">Your **Add Token-Signing Certificate or Key** page should look similar to the following.</span></span>
       <span data-ttu-id="52cff-235">![新增權杖簽署憑證][add_token_signing_cert]</span><span class="sxs-lookup"><span data-stu-id="52cff-235">![Add token-signing certificate][add_token_signing_cert]</span></span>
   5. <span data-ttu-id="52cff-236">按一下 [儲存] 以儲存您的設定，然後關閉 [新增權杖簽署憑證或金鑰] 頁面。</span><span class="sxs-lookup"><span data-stu-id="52cff-236">Click **Save** to save your settings and close the **Add Token-Signing Certificate or Key** page.</span></span>

<span data-ttu-id="52cff-237">接著，檢閱應用程式整合頁面中的資訊，並複製您將 Java Web 應用程式設定成使用 ACS 所需的 URI。</span><span class="sxs-lookup"><span data-stu-id="52cff-237">Next, review the information in the Application Integration page and copy the URI that you will need to configure your Java web application to use ACS.</span></span>

## <a name="review-the-application-integration-page"></a><span data-ttu-id="52cff-238">檢閱 [應用程式整合] 頁面</span><span class="sxs-lookup"><span data-stu-id="52cff-238">Review the Application Integration page</span></span>
<span data-ttu-id="52cff-239">您可以找到將 Java Web 應用程式 (RP 應用程式) 設定成在 ASC 管理入口網站的應用程式整合頁面上使用 ACS 所需的所有資訊和程式碼。</span><span class="sxs-lookup"><span data-stu-id="52cff-239">You can find all the information and the code necessary to configure your Java web application (the RP application) to work with ACS on the Application Integration page of the ACS Management Portal.</span></span> <span data-ttu-id="52cff-240">設定 Java Web 應用程式進行結盟驗證時，您將需要此資訊。</span><span class="sxs-lookup"><span data-stu-id="52cff-240">You will need this information when configuring your Java web application for federated authentication.</span></span>

1. <span data-ttu-id="52cff-241">在 ACS 管理入口網站上，按一下 [Application integration] 。</span><span class="sxs-lookup"><span data-stu-id="52cff-241">On the ACS Management Portal, click **Application integration**.</span></span>  
2. <span data-ttu-id="52cff-242">在 [應用程式整合] 頁面中，按一下 [登入頁面]。</span><span class="sxs-lookup"><span data-stu-id="52cff-242">In the **Application Integration** page, click **Login Pages**.</span></span>
3. <span data-ttu-id="52cff-243">在 [登入頁面整合] 頁面中，按一下 [Azure Web 應用程式]。</span><span class="sxs-lookup"><span data-stu-id="52cff-243">In the **Login Page Integration** page, click **Azure Web App**.</span></span>

<span data-ttu-id="52cff-244">在 [登入頁面整合：Azure Web 應用程式] 頁面中，[選項 1：連結至 ACS 主控的登入頁面] 中列出的 URL 將會用於 Java Web 應用程式中。</span><span class="sxs-lookup"><span data-stu-id="52cff-244">In the **Login Page Integration: Azure Web App** page, the URL listed in **Option 1: Link to an ACS-hosted login page** will be used in your Java web application.</span></span> <span data-ttu-id="52cff-245">將 Azure 存取控制服務篩選器程式庫新增至 Java 應用程式時，您將需要此值。</span><span class="sxs-lookup"><span data-stu-id="52cff-245">You will need this value when you add the Azure Access Control Services Filter library to your Java application.</span></span>

## <a name="create-a-java-web-application"></a><span data-ttu-id="52cff-246">建立 Java Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="52cff-246">Create a Java web application</span></span>
1. <span data-ttu-id="52cff-247">在 Eclipse 內，於功能表上按一下 [File] \(檔案)、按一下 [New] \(新增)，然後按一下 [Dynamic Web Project] \(動態 Web 專案)。</span><span class="sxs-lookup"><span data-stu-id="52cff-247">Within Eclipse, at the menu click **File**, click **New**, and then click **Dynamic Web Project**.</span></span> <span data-ttu-id="52cff-248">(如果在按一下 [File] \(檔案)、[New] \(新增) 後沒有看到 [Dynamic Web Project] \(動態 Web 專案) 列為可用的專案，則請執行下列動作：依序按一下 [File] \(檔案)、[New] \(新增)、[Project] \(專案)，展開 [Web]，按一下 [Dynamic Web Project] \(動態 Web 專案)，然後按 [Next] \(下一步))。基於本教學課程的目的，將專案命名為 **MyACSHelloWorld**。</span><span class="sxs-lookup"><span data-stu-id="52cff-248">(If you don't see **Dynamic Web Project** listed as an available project after clicking **File**, **New**, then do the following: click **File**, click **New**, click **Project**, expand **Web**, click **Dynamic Web Project**, and click **Next**.) For purposes of this tutorial, name the project **MyACSHelloWorld**.</span></span> <span data-ttu-id="52cff-249">(確定您使用此名稱，本教學課程中的後續步驟預期您的 WAR 檔案將命名為 MyACSHelloWorld)。</span><span class="sxs-lookup"><span data-stu-id="52cff-249">(Ensure you use this name, subsequent steps in this tutorial expect your WAR file to be named MyACSHelloWorld).</span></span> <span data-ttu-id="52cff-250">您的畫面將出現，如下所示：</span><span class="sxs-lookup"><span data-stu-id="52cff-250">Your screen will appear similar to the following:</span></span>
   
    ![Create a Hello World project for ACS exampple][create_acs_hello_world]
   
    <span data-ttu-id="52cff-252">按一下 [完成] 。</span><span class="sxs-lookup"><span data-stu-id="52cff-252">Click **Finish**.</span></span>
2. <span data-ttu-id="52cff-253">在 Eclipse 的專案總管檢視內，展開 **MyACSHelloWorld**。</span><span class="sxs-lookup"><span data-stu-id="52cff-253">Within Eclipse's Project Explorer view, expand **MyACSHelloWorld**.</span></span> <span data-ttu-id="52cff-254">在 [WebContent] 上按一下滑鼠右鍵、按一下 [新增]，然後按一下 [JSP 檔案]。</span><span class="sxs-lookup"><span data-stu-id="52cff-254">Right-click **WebContent**, click **New**, and then click **JSP File**.</span></span>
3. <span data-ttu-id="52cff-255">在 [New JSP File] \(新增 JSP 檔案) 對話方塊中，將檔案命名為 **index.jsp**。</span><span class="sxs-lookup"><span data-stu-id="52cff-255">In the **New JSP File** dialog, name the file **index.jsp**.</span></span> <span data-ttu-id="52cff-256">將父資料夾保留為 MyACSHelloWorld/WebContent、如下所示：</span><span class="sxs-lookup"><span data-stu-id="52cff-256">Keep the parent folder as MyACSHelloWorld/WebContent, as shown in the following:</span></span>
   
    ![Add a JSP file for ACS example][add_jsp_file_acs]
   
    <span data-ttu-id="52cff-258">按一下 [下一步] 。</span><span class="sxs-lookup"><span data-stu-id="52cff-258">Click **Next**.</span></span>
4. <span data-ttu-id="52cff-259">在 [Select JSP Template] \(選取 JSP 範本) 對話方塊中，選取 [New JSP File (html)] \(新增 JSP 檔案 (html))，然後按一下 [Finish] \(完成)。</span><span class="sxs-lookup"><span data-stu-id="52cff-259">In the **Select JSP Template** dialog, select **New JSP File (html)** and click **Finish**.</span></span>
5. <span data-ttu-id="52cff-260">在 Eclipse 中開啟 index.jsp 檔案時，請加入文字以顯示 **Hello ACS World!**</span><span class="sxs-lookup"><span data-stu-id="52cff-260">When the index.jsp file opens in Eclipse, add in text to display **Hello ACS World!**</span></span> <span data-ttu-id="52cff-261">(在現有的 `<body>` 元素內加入)。</span><span class="sxs-lookup"><span data-stu-id="52cff-261">within the existing `<body>` element.</span></span> <span data-ttu-id="52cff-262">您更新的 `<body>` 內容應該出現如下：</span><span class="sxs-lookup"><span data-stu-id="52cff-262">Your updated `<body>` content should appear as the following:</span></span>
   
        <body>
          <b><% out.println("Hello ACS World!"); %></b>
        </body>
   
    <span data-ttu-id="52cff-263">儲存 index.jsp。</span><span class="sxs-lookup"><span data-stu-id="52cff-263">Save index.jsp.</span></span>

## <a name="add-the-acs-filter-library-to-your-application"></a><span data-ttu-id="52cff-264">將 ACS 篩選器程式庫新增至您的應用程式</span><span class="sxs-lookup"><span data-stu-id="52cff-264">Add the ACS Filter library to your application</span></span>
1. <span data-ttu-id="52cff-265">在 Eclipse 的 [Project Explorer] \(專案總管) 中，於 **MyACSHelloWorld** 上按一下滑鼠右鍵、按一下 [Build Path] \(組建路徑)，然後按一下 [Configure Build Path] \(設定組建路徑)。</span><span class="sxs-lookup"><span data-stu-id="52cff-265">In Eclipse's Project Explorer, right-click **MyACSHelloWorld**, click **Build Path**, and then click **Configure Build Path**.</span></span>
2. <span data-ttu-id="52cff-266">在 [Java Build Path] \(Java 組建路徑) 對話方塊中，按一下 [Libraries] \(程式庫) 索引標籤。</span><span class="sxs-lookup"><span data-stu-id="52cff-266">In the **Java Build Path** dialog, click the **Libraries** tab.</span></span>
3. <span data-ttu-id="52cff-267">按一下 [新增程式庫] 。</span><span class="sxs-lookup"><span data-stu-id="52cff-267">Click **Add Library**.</span></span>
4. <span data-ttu-id="52cff-268">按一下 [Azure Access Control Services Filter (by MS Open Tech)] \(Azure 存取控制服務篩選器 (MS Open Tech 提供))，然後按 [Next] \(下一步)。</span><span class="sxs-lookup"><span data-stu-id="52cff-268">Click **Azure Access Control Services Filter (by MS Open Tech)** and then click **Next**.</span></span> <span data-ttu-id="52cff-269">隨即會顯示 [Azure Access Control Services Filter] \(Azure 存取控制服務篩選器) 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="52cff-269">The **Azure Access Control Services Filter** dialog is displayed.</span></span>  <span data-ttu-id="52cff-270">(視您安裝 Eclipse 的位置而定，[Location] \(位置) 欄位可能會有不同的路徑，而視軟體更新而定，版本號碼也可能不同)。</span><span class="sxs-lookup"><span data-stu-id="52cff-270">(The **Location** field may have a different path, depending on where you installed Eclipse, and the version number could be different, depending on software updates.)</span></span>
   
    ![Add ACS Filter library][add_acs_filter_lib]
5. <span data-ttu-id="52cff-272">使用已開啟至「管理入口網站」之 [登入頁面整合] 頁面的瀏覽器，複製 [選項 1：連結至 ACS 主控的登入頁面] 欄位中列出的 URL，然後將它貼到 Eclipse 對話方塊的 [ACS Authentication Endpoint] \(ACS 驗證端點) 欄位中。</span><span class="sxs-lookup"><span data-stu-id="52cff-272">Using a browser opened to the **Login Page Integration** page of the Management Portal, copy the URL listed in the **Option 1: Link to an ACS-hosted login page** field and paste it into the **ACS Authentication Endpoint** field of the Eclipse dialog.</span></span>
6. <span data-ttu-id="52cff-273">使用已開啟至「管理入口網站」之 [編輯信賴憑證者應用程式] 頁面的瀏覽器，複製 [領域] 欄位中列出的 URL，然後將它貼到 Eclipse 對話方塊的 [Relying Party Realm] \(信賴憑證者領域) 欄位中。</span><span class="sxs-lookup"><span data-stu-id="52cff-273">Using a browser opened to the **Edit Relying Party Application** page of the Management Portal, copy the URL listed in the **Realm** field and paste it into the **Relying Party Realm** field of the Eclipse dialog.</span></span>
7. <span data-ttu-id="52cff-274">在 Eclipse 對話方塊的 [Security] \(安全性) 區段中，如果您想要使用現有的憑證，請按一下 [Browse] \(瀏覽)、瀏覽至您想要使用的憑證、選取它，然後按一下 [Open] \(開啟)。</span><span class="sxs-lookup"><span data-stu-id="52cff-274">Within the **Security** section of the Eclipse dialog, if you want to use an existing certificate, click **Browse**, navigate to the certificate you want to use, select it, and click **Open**.</span></span> <span data-ttu-id="52cff-275">或者，如果您想要建立新的憑證，請按一下 [New] \(新增) 以顯示 [New Certificate] \(新增憑證) 對話方塊，然後為新憑證指定密碼、.cer 檔案的名稱，以及 .pfx 檔案的名稱。</span><span class="sxs-lookup"><span data-stu-id="52cff-275">Or, if you want to create a new certificate, click **New** to display the **New Certificate** dialog, then specify the password, name of the .cer file, and name of the .pfx file for the new certificate.</span></span>
8. <span data-ttu-id="52cff-276">核取 [Embed the certificate in the WAR file] \(將憑證內嵌在 WAR 檔案中)。</span><span class="sxs-lookup"><span data-stu-id="52cff-276">Check **Embed the certificate in the WAR file**.</span></span> <span data-ttu-id="52cff-277">以此方式內含憑證，可將其併入您的部署中，而不需要您將它手動新增為元件。</span><span class="sxs-lookup"><span data-stu-id="52cff-277">Embedding the certificate in this manner includes it in your deployment without requiring you to manually add it as a component.</span></span> <span data-ttu-id="52cff-278">(如果您必須改為將憑證儲存在 WAR 檔案外部，則您可以將憑證新增為角色元件，並取消核取 [Embed the certificate in the WAR file] \(將憑證內嵌在 WAR 檔案中)。)</span><span class="sxs-lookup"><span data-stu-id="52cff-278">(If instead you must store your certificate externally from your WAR file, you could add the certificate as a role component and uncheck **Embed the certificate in the WAR file**.)</span></span>
9. <span data-ttu-id="52cff-279">[選用] 將 [Require HTTPS connections]  維持核取狀態。</span><span class="sxs-lookup"><span data-stu-id="52cff-279">[Optional] Keep **Require HTTPS connections** checked.</span></span> <span data-ttu-id="52cff-280">如果設定此選項，您將需要使用 HTTPS 通訊協定存取應用程式。</span><span class="sxs-lookup"><span data-stu-id="52cff-280">If you set this option, you'll need to access your application using the HTTPS protocol.</span></span> <span data-ttu-id="52cff-281">如果不想要要求 HTTPS 連接，請取消核取此選項。</span><span class="sxs-lookup"><span data-stu-id="52cff-281">If you don't want to require HTTPS connections, uncheck this option.</span></span>
10. <span data-ttu-id="52cff-282">為了部署至計算模擬器，您的 [Azure ACS Filter]  設定將看起來如下。</span><span class="sxs-lookup"><span data-stu-id="52cff-282">For a deployment to the compute emulator, your **Azure ACS Filter** settings will look similar to the following.</span></span>
    
    ![Azure ACS Filter settings for a deployment to the compute emulator][add_acs_filter_lib_emulator]
11. <span data-ttu-id="52cff-284">按一下 [完成] 。</span><span class="sxs-lookup"><span data-stu-id="52cff-284">Click **Finish**.</span></span>
12. <span data-ttu-id="52cff-285">當呈現一個對話方塊，描述將建立 web.xml 檔案時，請按一下 [是]  。</span><span class="sxs-lookup"><span data-stu-id="52cff-285">Click **Yes** when presented with with a dialog box stating that a web.xml file will be created.</span></span>
13. <span data-ttu-id="52cff-286">按一下 [OK] \(確定) 以關閉 [Java Build Path] \(Java 組建路徑) 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="52cff-286">Click **OK** to close the **Java Build Path** dialog.</span></span>

## <a name="deploy-to-the-compute-emulator"></a><span data-ttu-id="52cff-287">部署至計算模擬器</span><span class="sxs-lookup"><span data-stu-id="52cff-287">Deploy to the compute emulator</span></span>
1. <span data-ttu-id="52cff-288">在 Eclipse 的 [Project Explorer] \(專案總管) 中，於 [MyACSHelloWorld] 上按一下滑鼠右鍵、按一下 [Azure]，然後按一下 [Package for Azure] \(適用於 Azure 的套件)。</span><span class="sxs-lookup"><span data-stu-id="52cff-288">In Eclipse's Project Explorer, right-click **MyACSHelloWorld**, click **Azure**, and then click **Package for Azure**.</span></span>
2. <span data-ttu-id="52cff-289">針對 [Project name] \(專案名稱) 輸入 **MyAzureACSProject**，然後按 [Next] \(下一步)。</span><span class="sxs-lookup"><span data-stu-id="52cff-289">For **Project name**, type **MyAzureACSProject** and click **Next**.</span></span>
3. <span data-ttu-id="52cff-290">選取 JDK 和應用程式伺服器。</span><span class="sxs-lookup"><span data-stu-id="52cff-290">Select a JDK and application server.</span></span> <span data-ttu-id="52cff-291">([在 Eclipse 中建立 Azure 的 Hello World 應用程式](http://msdn.microsoft.com/library/windowsazure/hh690944.aspx)教學課程中有這些步驟的詳細說明)。</span><span class="sxs-lookup"><span data-stu-id="52cff-291">(These steps are covered in detail in the [Creating a Hello World Application for Azure in Eclipse](http://msdn.microsoft.com/library/windowsazure/hh690944.aspx) tutorial).</span></span>
4. <span data-ttu-id="52cff-292">按一下 [完成] 。</span><span class="sxs-lookup"><span data-stu-id="52cff-292">Click **Finish**.</span></span>
5. <span data-ttu-id="52cff-293">按一下 [Run in Azure Emulator]  按鈕。</span><span class="sxs-lookup"><span data-stu-id="52cff-293">Click the **Run in Azure Emulator** button.</span></span>
6. <span data-ttu-id="52cff-294">在計算模擬器中啟動 Java Web 應用程式後，請關閉瀏覽器的所有執行個體 (以便任何目前瀏覽器工作階段不會干擾 ACS 登入測試)。</span><span class="sxs-lookup"><span data-stu-id="52cff-294">After your Java web application starts in the compute emulator, close all instances of your browser (so that any current browser sessions do not interfere with your ACS login test).</span></span>
7. <span data-ttu-id="52cff-295">在瀏覽器中開啟 <http://localhost:8080/MyACSHelloWorld/> 來執行應用程式 (或如果您已核取 [Require HTTPS connections] \(需要 HTTPS 連線)，則請開啟 <https://localhost:8080/MyACSHelloWorld/>)。</span><span class="sxs-lookup"><span data-stu-id="52cff-295">Run your application by opening <http://localhost:8080/MyACSHelloWorld/> in your browser (or <https://localhost:8080/MyACSHelloWorld/> if you checked **Require HTTPS connections**).</span></span> <span data-ttu-id="52cff-296">系統應該提示您進行 Windows Live ID 登入，然後應該將您帶至為信賴憑證者應用程式指定的傳回 URL。</span><span class="sxs-lookup"><span data-stu-id="52cff-296">You should be prompted for a Windows Live ID login, then you should be taken to the return URL specified for your relying party application.</span></span>
8. <span data-ttu-id="52cff-297">當完成了檢視應用程式時，請按一下 [Reset Azure Emulator]  按鈕。</span><span class="sxs-lookup"><span data-stu-id="52cff-297">When you have finished viewing your application, click the **Reset Azure Emulator** button.</span></span>

## <a name="deploy-to-azure"></a><span data-ttu-id="52cff-298">部署至 Azure</span><span class="sxs-lookup"><span data-stu-id="52cff-298">Deploy to Azure</span></span>
<span data-ttu-id="52cff-299">若要部署至 Azure，您將需要 ACS 命名空間的信賴憑證者領域和傳回 URL。</span><span class="sxs-lookup"><span data-stu-id="52cff-299">To deploy to Azure, you'll need to change the relying party realm and return URL for your ACS namespace.</span></span>

1. <span data-ttu-id="52cff-300">在「Azure 管理入口網站」內，於 [編輯管理入口網站信賴憑證者] 頁面中，將 [領域] 修改成所部署站台的 URL。</span><span class="sxs-lookup"><span data-stu-id="52cff-300">Within the Azure Management Portal, in the **Edit Relying Party Application** page, modify **Realm** to be the URL of your deployed site.</span></span> <span data-ttu-id="52cff-301">將 **example** 取代成您為部署指定的 DNS 名稱。</span><span class="sxs-lookup"><span data-stu-id="52cff-301">Replace **example** with the DNS name you specified for your deployment.</span></span>
   
    ![Relying party realm for use in production][relying_party_realm_production]
2. <span data-ttu-id="52cff-303">將 [傳回 URL] 修改成應用程式的 URL。</span><span class="sxs-lookup"><span data-stu-id="52cff-303">Modify **Return URL** to be the URL of your application.</span></span> <span data-ttu-id="52cff-304">將 **example** 取代成您為部署指定的 DNS 名稱。</span><span class="sxs-lookup"><span data-stu-id="52cff-304">Replace **example** with the DNS name you specified for your deployment.</span></span>
   
    ![Relying party return URL for use in production][relying_party_return_url_production]
3. <span data-ttu-id="52cff-306">按一下 [儲存]  ，以儲存您更新的信賴憑證者領域及傳回 URL 變更。</span><span class="sxs-lookup"><span data-stu-id="52cff-306">Click **Save** to save your updated replying party realm and return URL changes.</span></span>
4. <span data-ttu-id="52cff-307">將 [Login Page Integration]  頁面在瀏覽器中維持開啟狀態，您將需要立即從中複製。</span><span class="sxs-lookup"><span data-stu-id="52cff-307">Keep the **Login Page Integration** page open in your browser, you'll need to copy from it shortly.</span></span>
5. <span data-ttu-id="52cff-308">在 Eclipse 的 [Project Explorer] \(專案總管) 中，於 **MyACSHelloWorld** 上按一下滑鼠右鍵、按一下 [Build Path] \(組建路徑)，然後按一下 [Configure Build Path] \(設定組建路徑)。</span><span class="sxs-lookup"><span data-stu-id="52cff-308">In Eclipse's Project Explorer, right-click **MyACSHelloWorld**, click **Build Path**, and then click **Configure Build Path**.</span></span>
6. <span data-ttu-id="52cff-309">按一下 [Libraries] \(程式庫) 索引標籤、按一下 [Azure Access Control Services Filter] \(Azure 存取控制服務篩選器)，然後按一下 [Edit] \(編輯)。</span><span class="sxs-lookup"><span data-stu-id="52cff-309">Click the **Libraries** tab, click **Azure Access Control Services Filter**, and then click **Edit**.</span></span>
7. <span data-ttu-id="52cff-310">使用已開啟至「管理入口網站」之 [登入頁面整合] 頁面的瀏覽器，複製 [選項 1：連結至 ACS 主控的登入頁面] 欄位中列出的 URL，然後將它貼到 Eclipse 對話方塊的 [ACS Authentication Endpoint] \(ACS 驗證端點) 欄位中。</span><span class="sxs-lookup"><span data-stu-id="52cff-310">Using a browser opened to the **Login Page Integration** page of the Management Portal, copy the URL listed in the **Option 1: Link to an ACS-hosted login page** field and paste it into the **ACS Authentication Endpoint** field of the Eclipse dialog.</span></span>
8. <span data-ttu-id="52cff-311">使用已開啟至「管理入口網站」之 [編輯信賴憑證者應用程式] 頁面的瀏覽器，複製 [領域] 欄位中列出的 URL，然後將它貼到 Eclipse 對話方塊的 [Relying Party Realm] \(信賴憑證者領域) 欄位中。</span><span class="sxs-lookup"><span data-stu-id="52cff-311">Using a browser opened to the **Edit Relying Party Application** page of the Management Portal, copy the URL listed in the **Realm** field and paste it into the **Relying Party Realm** field of the Eclipse dialog.</span></span>
9. <span data-ttu-id="52cff-312">在 Eclipse 對話方塊的 [Security] \(安全性) 區段中，如果您想要使用現有的憑證，請按一下 [Browse] \(瀏覽)、瀏覽至您想要使用的憑證、選取它，然後按一下 [Open] \(開啟)。</span><span class="sxs-lookup"><span data-stu-id="52cff-312">Within the **Security** section of the Eclipse dialog, if you want to use an existing certificate, click **Browse**, navigate to the certificate you want to use, select it, and click **Open**.</span></span> <span data-ttu-id="52cff-313">或者，如果您想要建立新的憑證，請按一下 [New] \(新增) 以顯示 [New Certificate] \(新增憑證) 對話方塊，然後為新憑證指定密碼、.cer 檔案的名稱，以及 .pfx 檔案的名稱。</span><span class="sxs-lookup"><span data-stu-id="52cff-313">Or, if you want to create a new certificate, click **New** to display the **New Certificate** dialog, then specify the password, name of the .cer file, and name of the .pfx file for the new certificate.</span></span>
10. <span data-ttu-id="52cff-314">將 [Embed the certificate in the WAR file]  維持核取狀態，假設您想要將憑證內含在 WAR 檔案。</span><span class="sxs-lookup"><span data-stu-id="52cff-314">Keep **Embed the certificate in the WAR file** checked, assuming you want to embed the certificate in the WAR file.</span></span>
11. <span data-ttu-id="52cff-315">[選用] 將 [Require HTTPS connections]  維持核取狀態。</span><span class="sxs-lookup"><span data-stu-id="52cff-315">[Optional] Keep **Require HTTPS connections** checked.</span></span> <span data-ttu-id="52cff-316">如果設定此選項，您將需要使用 HTTPS 通訊協定存取應用程式。</span><span class="sxs-lookup"><span data-stu-id="52cff-316">If you set this option, you'll need to access your application using the HTTPS protocol.</span></span> <span data-ttu-id="52cff-317">如果不想要要求 HTTPS 連接，請取消核取此選項。</span><span class="sxs-lookup"><span data-stu-id="52cff-317">If you don't want to require HTTPS connections, uncheck this option.</span></span>
12. <span data-ttu-id="52cff-318">為了部署至計算模擬器，您的 Azure ACS 篩選器設定將看起來如下。</span><span class="sxs-lookup"><span data-stu-id="52cff-318">For a deployment to Azure, your Azure ACS Filter settings will look similar to the following.</span></span>
    
    ![Azure ACS Filter settings for a production deployment][add_acs_filter_lib_production]
13. <span data-ttu-id="52cff-320">按一下 [Finish] \(完成) 以關閉 [Edit Library] \(編輯程式庫) 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="52cff-320">Click **Finish** to close the **Edit Library** dialog.</span></span>
14. <span data-ttu-id="52cff-321">按一下 [OK] \(確定) 以關閉 [Properties for MyACSHelloWorld] \(MyACSHelloWorld 的屬性) 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="52cff-321">Click **OK** to close the **Properties for MyACSHelloWorld** dialog.</span></span>
15. <span data-ttu-id="52cff-322">在 Eclipse 中，按一下 [Publish to Azure Cloud] \(發佈至 Azure 雲端) 按鈕。</span><span class="sxs-lookup"><span data-stu-id="52cff-322">In Eclipse, click the **Publish to Azure Cloud** button.</span></span> <span data-ttu-id="52cff-323">回應提示，就像在[在 Eclipse 中建立 Azure 的 Hello World 應用程式](http://msdn.microsoft.com/library/windowsazure/hh690944.aspx)主題的**將應用程式部署至 Azure**一節中所做一樣。</span><span class="sxs-lookup"><span data-stu-id="52cff-323">Respond to the prompts, similar as done in the **To deploy your application to Azure** section of the [Creating a Hello World Application for Azure in Eclipse](http://msdn.microsoft.com/library/windowsazure/hh690944.aspx) topic.</span></span> 

<span data-ttu-id="52cff-324">在部署了 Web 應用程式後，請關閉任何開啟的瀏覽器工作階段、執行 Web 應用程式，而且系統應該提示您利用 Windows Live ID 認證登入，然後傳送至信賴憑證者應用程式的傳回 URL。</span><span class="sxs-lookup"><span data-stu-id="52cff-324">After your web application has been deployed, close any open browser sessions, run your web application, and you should be prompted to sign in with Windows Live ID credentials, followed by being sent to the return URL of your relying party application.</span></span>

<span data-ttu-id="52cff-325">當您完成使用r ACS Hello World 應用程式時，請記住刪除部署 (您可以在 [在 Eclipse 建立 Azure 的 Hello World 應用程式](http://msdn.microsoft.com/library/windowsazure/hh690944.aspx) (英文) 主題中了解如何刪除部署。</span><span class="sxs-lookup"><span data-stu-id="52cff-325">When you are done using your ACS Hello World application, remember to delete the deployment (you can learn how to delete a deployment in the [Creating a Hello World Application for Azure in Eclipse](http://msdn.microsoft.com/library/windowsazure/hh690944.aspx) topic).</span></span>

## <span data-ttu-id="52cff-326"><a name="next_steps"></a>接續步驟</span><span class="sxs-lookup"><span data-stu-id="52cff-326"><a name="next_steps"></a>Next steps</span></span>
<span data-ttu-id="52cff-327">若要檢查 ACS 傳回給應用程式的安全性聲明標記語言 (SAML)，請參閱 [如何檢視 Azure 存取控制服務傳回的 SAML][How to view SAML returned by the Azure Access Control Service]。</span><span class="sxs-lookup"><span data-stu-id="52cff-327">For an examination of the Security Assertion Markup Language (SAML) returned by ACS to your application, see [How to view SAML returned by the Azure Access Control Service][How to view SAML returned by the Azure Access Control Service].</span></span> <span data-ttu-id="52cff-328">若要進一步探索 ACS 功能及試試其他更精緻的案例，請參閱 [存取控制服務 2.0][Access Control Service 2.0]。</span><span class="sxs-lookup"><span data-stu-id="52cff-328">To further explore ACS's functionality and to experiment with more sophisticated scenarios, see [Access Control Service 2.0][Access Control Service 2.0].</span></span>

<span data-ttu-id="52cff-329">同時，此範例也使用了 [Embed the certificate in the WAR file]  選項。</span><span class="sxs-lookup"><span data-stu-id="52cff-329">Also, this example used the **Embed the certificate in the WAR file** option.</span></span> <span data-ttu-id="52cff-330">此選項可讓您輕易部署憑證。</span><span class="sxs-lookup"><span data-stu-id="52cff-330">This option makes it simple to deploy the certificate.</span></span> <span data-ttu-id="52cff-331">如果您想要改為讓簽署憑證與 WAR 檔案維持分開狀態，則可以使用下列技術：</span><span class="sxs-lookup"><span data-stu-id="52cff-331">If instead you want to keep your signing certificate separate from your WAR file, you can use the following technique:</span></span>

1. <span data-ttu-id="52cff-332">在 [Azure Access Control Services Filter] \(Azure 存取控制服務篩選器) 對話方塊的 [安全性] \(Security) 區段內，輸入 **${env.JAVA_HOME}/mycert.cer**，然後取消核取 [Embed the certificate in the WAR file] \(將憑證內嵌在 WAR 檔案中)。</span><span class="sxs-lookup"><span data-stu-id="52cff-332">Within the **Security** section of the **Azure Access Control Services Filter** dialog, type **${env.JAVA_HOME}/mycert.cer** and uncheck **Embed the certificate in the WAR file**.</span></span> <span data-ttu-id="52cff-333">(如果憑證檔案名稱不同，請調整 mycert.cer。)按一下 [Finish] \(完成) 以關閉對話方塊。</span><span class="sxs-lookup"><span data-stu-id="52cff-333">(Adjust mycert.cer if your certificate file name is different.) Click **Finish** to close the dialog.</span></span>
2. <span data-ttu-id="52cff-334">複製憑證作為部署中的元件：在 Eclipse 的 [Project Explorer] \(專案總管) 中，展開 [MyAzureACSProject]、於 [WorkerRole1] 上按一下滑鼠右鍵、按一下 [Properties] \(屬性)、展開 [Azure Role] \(Azure 角色)，然後按一下 [Components] \(元件)。</span><span class="sxs-lookup"><span data-stu-id="52cff-334">Copy the certificate as a component in your deployment: In Eclipse's Project Explorer, expand **MyAzureACSProject**, right-click **WorkerRole1**, click **Properties**, expand **Azure Role**, and click **Components**.</span></span>
3. <span data-ttu-id="52cff-335">按一下 [新增] 。</span><span class="sxs-lookup"><span data-stu-id="52cff-335">Click **Add**.</span></span>
4. <span data-ttu-id="52cff-336">在 [新增元件]  對話方塊中：</span><span class="sxs-lookup"><span data-stu-id="52cff-336">Within the **Add Component** dialog:</span></span>
   
   1. <span data-ttu-id="52cff-337">在 [匯入]  區段中：</span><span class="sxs-lookup"><span data-stu-id="52cff-337">In the **Import** section:</span></span>
      1. <span data-ttu-id="52cff-338">使用 [檔案]  按鈕，導覽至您要使用的憑證。</span><span class="sxs-lookup"><span data-stu-id="52cff-338">Use the **File** button to navigate to the certificate you want to use.</span></span> 
      2. <span data-ttu-id="52cff-339">針對 [Method] \(方法)，選取 [copy] \(複製)。</span><span class="sxs-lookup"><span data-stu-id="52cff-339">For **Method**, select **copy**.</span></span>
   2. <span data-ttu-id="52cff-340">對於 [As Name] ，按一下文字方塊並接受預設名稱。</span><span class="sxs-lookup"><span data-stu-id="52cff-340">For **As Name**, click on the text box and accept the default name.</span></span>
   3. <span data-ttu-id="52cff-341">在 [部署]  區段中：</span><span class="sxs-lookup"><span data-stu-id="52cff-341">In the **Deploy** section:</span></span>
      1. <span data-ttu-id="52cff-342">針對 [Method] \(方法)，選取 [copy] \(複製)。</span><span class="sxs-lookup"><span data-stu-id="52cff-342">For **Method**, select **copy**.</span></span>
      2. <span data-ttu-id="52cff-343">針對 [To directory] \(目的地目錄)，輸入 **%JAVA_HOME%**。</span><span class="sxs-lookup"><span data-stu-id="52cff-343">For **To directory**, type **%JAVA_HOME%**.</span></span>
   4. <span data-ttu-id="52cff-344">您的 [新增元件]  對話方塊應該看起來如下。</span><span class="sxs-lookup"><span data-stu-id="52cff-344">Your **Add Component** dialog should look similar to the following.</span></span>
      
       ![Add certificate component][add_cert_component]
   5. <span data-ttu-id="52cff-346">按一下 [確定] 。</span><span class="sxs-lookup"><span data-stu-id="52cff-346">Click **OK**.</span></span>

<span data-ttu-id="52cff-347">此時，您的憑證將併入部署中。</span><span class="sxs-lookup"><span data-stu-id="52cff-347">At this point, your certificate would be included in your deployment.</span></span> <span data-ttu-id="52cff-348">請注意，無論您是否將憑證內含在 WAR 檔案，或將它當作元件新增至部署，都需要依[將憑證上傳至 ACS 命名空間][Upload a certificate to your ACS namespace]一節所述，將憑證上傳至命名空間。</span><span class="sxs-lookup"><span data-stu-id="52cff-348">Note that regardless of whether you embed the certificate in the WAR file or add it as a component to your deployment, you need to upload the certificate to your namespace as described in the [Upload a certificate to your ACS namespace][Upload a certificate to your ACS namespace] section.</span></span>

[What is ACS?]: #what-is
[Concepts]: #concepts
[Prerequisites]: #pre
[Create a Java web application]: #create-java-app
[Create an ACS Namespace]: #create-namespace
[Add Identity Providers]: #add-IP
[Add a Relying Party Application]: #add-RP
[Create Rules]: #create-rules
[Upload a certificate to your ACS namespace]: #upload-certificate
[Review the Application Integration Page]: #review-app-int
[Configure Trust between ACS and Your ASP.NET Web Application]: #config-trust
[Add the ACS Filter library to your application]: #add_acs_filter_library
[Deploy to the compute emulator]: #deploy_compute_emulator
[Deploy to Azure]: #deploy_azure
[Next steps]: #next_steps
[project website]: http://wastarterkit4java.codeplex.com/releases/view/61026
[How to view SAML returned by the Azure Access Control Service]: active-directory-java-view-saml-returned-by-access-control.md
[Access Control Service 2.0]: http://go.microsoft.com/fwlink/?LinkID=212360
[Windows Identity Foundation]: http://www.microsoft.com/download/en/details.aspx?id=17331
[Windows Identity Foundation SDK]: http://www.microsoft.com/download/en/details.aspx?id=4451
[Azure Management Portal]: https://manage.windowsazure.com
[acs_flow]: ./media/active-directory-java-authenticate-users-access-control-eclipse/ACSFlow.png

<!-- Eclipse-specific -->
[add_acs_filter_lib]: ./media/active-directory-java-authenticate-users-access-control-eclipse/AddACSFilterLibrary.png
[add_acs_filter_lib_emulator]: ./media/active-directory-java-authenticate-users-access-control-eclipse/AddACSFilterLibraryEmulator.png
[add_acs_filter_lib_production]: ./media/active-directory-java-authenticate-users-access-control-eclipse/AddACSFilterLibraryProduction.png

[relying_party_realm_emulator]: ./media/active-directory-java-authenticate-users-access-control-eclipse/RelyingPartyRealmEmulator.png
[relying_party_return_url_emulator]: ./media/active-directory-java-authenticate-users-access-control-eclipse/RelyingPartyReturnURLEmulator.png
[relying_party_realm_production]: ./media/active-directory-java-authenticate-users-access-control-eclipse/RelyingPartyRealmProduction.png
[relying_party_return_url_production]: ./media/active-directory-java-authenticate-users-access-control-eclipse/RelyingPartyReturnURLProduction.png
[add_cert_component]: ./media/active-directory-java-authenticate-users-access-control-eclipse/AddCertificateComponent.png
[add_jsp_file_acs]: ./media/active-directory-java-authenticate-users-access-control-eclipse/AddJSPFileACS.png
[create_acs_hello_world]: ./media/active-directory-java-authenticate-users-access-control-eclipse/CreateACSHelloWorld.png
[add_token_signing_cert]: ./media/active-directory-java-authenticate-users-access-control-eclipse/AddTokenSigningCertificate.png

