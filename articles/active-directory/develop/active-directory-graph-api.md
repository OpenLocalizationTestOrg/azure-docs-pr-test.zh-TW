---
title: "aaaAzure Active Directory Graph API |Microsoft 文件"
description: "概觀和快速入門指南 hello Graph API 允許以程式設計方式存取 tooAzure AD 透過 REST API 端點。"
services: active-directory
documentationcenter: 
author: viv-liu
manager: mbaldwin
editor: mbaldwin
ms.assetid: 5471ad74-20b3-44df-a2b5-43cde2c0a045
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/27/2017
ms.author: viviali
ms.custom: aaddev
ms.openlocfilehash: cde1dd86b0ca1dc24a5b46dc578b6245ba98751f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="azure-active-directory-graph-api"></a><span data-ttu-id="ff3eb-103">Azure Active Directory 圖形 API</span><span class="sxs-lookup"><span data-stu-id="ff3eb-103">Azure Active Directory Graph API</span></span>
> [!IMPORTANT]
> <span data-ttu-id="ff3eb-104">我們強烈建議您改用[Microsoft Graph](https://graph.microsoft.io/)而不是 Azure AD Graph API tooaccess Azure Active Directory 資源。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-104">We strongly recommend that you use [Microsoft Graph](https://graph.microsoft.io/) instead of Azure AD Graph API tooaccess Azure Active Directory resources.</span></span> <span data-ttu-id="ff3eb-105">我們的開發工作現在是針對 Microsoft Graph，並沒有針對 Azure AD Graph API 規劃的進一步增強功能 。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-105">Our development efforts are now concentrated on Microsoft Graph and no further enhancements are planned for Azure AD Graph API.</span></span> <span data-ttu-id="ff3eb-106">有極少數的情況下，Azure AD Graph API 仍可能適合;如需詳細資訊，請參閱 hello [Microsoft Graph 或 hello Azure AD Graph](https://dev.office.com/blogs/microsoft-graph-or-azure-ad-graph) hello Office 開發人員中心中的部落格文章。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-106">There are a very limited number of scenarios for which Azure AD Graph API might still be appropriate; for more information, see hello [Microsoft Graph or hello Azure AD Graph](https://dev.office.com/blogs/microsoft-graph-or-azure-ad-graph) blog post in hello Office Dev Center.</span></span>
> 
> 

<span data-ttu-id="ff3eb-107">hello Azure Active Directory Graph API 提供以程式設計方式存取 tooAzure AD 透過 REST API 端點。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-107">hello Azure Active Directory Graph API provides programmatic access tooAzure AD through REST API endpoints.</span></span> <span data-ttu-id="ff3eb-108">應用程式可以使用 hello Graph API tooperform 建立、 讀取、 更新和刪除 (CRUD) 作業目錄資料和物件。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-108">Applications can use hello Graph API tooperform create, read, update, and delete (CRUD) operations on directory data and objects.</span></span> <span data-ttu-id="ff3eb-109">例如，hello Graph API 支援下列使用者物件的一般作業的 hello:</span><span class="sxs-lookup"><span data-stu-id="ff3eb-109">For example, hello Graph API supports hello following common operations for a user object:</span></span>

* <span data-ttu-id="ff3eb-110">在目錄中建立新的使用者</span><span class="sxs-lookup"><span data-stu-id="ff3eb-110">Create a new user in a directory</span></span>
* <span data-ttu-id="ff3eb-111">取得使用者的詳細屬性，例如其群組</span><span class="sxs-lookup"><span data-stu-id="ff3eb-111">Get a user’s detailed properties, such as their groups</span></span>
* <span data-ttu-id="ff3eb-112">更新使用者的屬性 (例如其位置和電話號碼)，或變更其密碼</span><span class="sxs-lookup"><span data-stu-id="ff3eb-112">Update a user’s properties, such as their location and phone number, or change their password</span></span>
* <span data-ttu-id="ff3eb-113">檢查使用者在角色型存取方面的群組成員資格</span><span class="sxs-lookup"><span data-stu-id="ff3eb-113">Check a user’s group membership for role-based access</span></span>
* <span data-ttu-id="ff3eb-114">停用使用者帳戶或完全刪除</span><span class="sxs-lookup"><span data-stu-id="ff3eb-114">Disable a user’s account or delete it entirely</span></span>

<span data-ttu-id="ff3eb-115">在加法 toouser 物件中，您可以執行類似的作業，例如群組和應用程式的其他物件。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-115">In addition toouser objects, you can perform similar operations on other objects such as groups and applications.</span></span> <span data-ttu-id="ff3eb-116">toocall hello 必須向 Azure AD Graph API 目錄，hello 應用程式，而且被設定 tooallow 存取 toohello 目錄。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-116">toocall hello Graph API on a directory, hello application must be registered with Azure AD and be configured tooallow access toohello directory.</span></span> <span data-ttu-id="ff3eb-117">這通常是透過使用者或系統管理員同意流程來達成。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-117">This is normally achieved through a user or admin consent flow.</span></span>

<span data-ttu-id="ff3eb-118">使用 toobegin hello Azure Active Directory Graph API，請參閱 hello [Graph API 快速入門指南](active-directory-graph-api-quickstart.md)，或檢視 hello[互動式圖形 API 參考文件](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog)。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-118">toobegin using hello Azure Active Directory Graph API, see hello [Graph API Quickstart Guide](active-directory-graph-api-quickstart.md), or view hello [interactive Graph API reference documentation](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog).</span></span>

## <a name="features"></a><span data-ttu-id="ff3eb-119">特性</span><span class="sxs-lookup"><span data-stu-id="ff3eb-119">Features</span></span>
<span data-ttu-id="ff3eb-120">hello Graph API 提供下列功能的 hello:</span><span class="sxs-lookup"><span data-stu-id="ff3eb-120">hello Graph API provides hello following features:</span></span>

* <span data-ttu-id="ff3eb-121">**REST API 端點**: hello Graph API 是 RESTful 服務會使用標準 HTTP 要求存取的端點所組成。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-121">**REST API Endpoints**: hello Graph API is a RESTful service comprised of endpoints that are accessed using standard HTTP requests.</span></span> <span data-ttu-id="ff3eb-122">hello Graph API 要求和回應支援 XML 或 Javascript 物件標記法 (JSON) 內容類型。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-122">hello Graph API supports XML or Javascript Object Notation (JSON) content types for requests and responses.</span></span> <span data-ttu-id="ff3eb-123">如需詳細資訊，請參閱 [Azure AD Graph REST API 參考](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog)。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-123">For more information, see [Azure AD Graph REST API Reference](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog).</span></span>
* <span data-ttu-id="ff3eb-124">**向 Azure AD 驗證**: Graph API 必須經過附加 JSON Web Token (JWT) hello hello 要求授權標頭中的每個要求 toohello。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-124">**Authentication with Azure AD**: Every request toohello Graph API must be authenticated by appending a JSON Web Token (JWT) in hello Authorization header of hello request.</span></span> <span data-ttu-id="ff3eb-125">取得此權杖的要求 tooAzure AD 的權杖端點，提供有效的認證。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-125">This token is acquired by making a request tooAzure AD’s token endpoint and providing valid credentials.</span></span> <span data-ttu-id="ff3eb-126">您可以使用 OAuth 2.0 用戶端認證流程 hello 或 hello 授權碼授與流程 tooacquire 語彙基元 toocall hello 圖形。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-126">You can use hello OAuth 2.0 client credentials flow or hello authorization code grant flow tooacquire a token toocall hello Graph.</span></span> <span data-ttu-id="ff3eb-127">如需詳細資訊，請參閱 [Azure AD 中的 OAuth 2.0](https://msdn.microsoft.com/library/azure/dn645545.aspx)。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-127">For more information, [OAuth 2.0 in Azure AD](https://msdn.microsoft.com/library/azure/dn645545.aspx).</span></span>
* <span data-ttu-id="ff3eb-128">**以角色為基礎的授權 (RBAC)**： 安全性群組都使用的 tooperform RBAC hello Graph API 中。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-128">**Role-Based Authorization (RBAC)**: Security groups are used tooperform RBAC in hello Graph API.</span></span> <span data-ttu-id="ff3eb-129">例如，如果使用者是否能存取 tooa 特定資源，您會想 toodetermine，hello 應用程式可以呼叫 hello[檢查群組成員資格 （可轉移）](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/groups-operations#FunctionsandactionsongroupsCheckmembershipinaspecificgrouptransitive)作業，它會傳回 true 或 false。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-129">For example, if you want toodetermine whether a user has access tooa specific resource, hello application can call hello [Check Group Membership (transitive)](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/groups-operations#FunctionsandactionsongroupsCheckmembershipinaspecificgrouptransitive) operation, which returns true or false.</span></span>
* <span data-ttu-id="ff3eb-130">**差異查詢**： 如果您需要 toocheck 的兩個時間週期，而不需要 toomake 之間目錄中的變更頻繁的查詢 toohello Graph API，您就可以提出差異查詢要求。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-130">**Differential Query**: If you want toocheck for changes in a directory between two time periods without having toomake frequent queries toohello Graph API, you can make a differential query request.</span></span> <span data-ttu-id="ff3eb-131">此類型的要求會傳回先前差異查詢要求 hello 與 hello 目前要求之間所做的只有 hello 變更。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-131">This type of request will return only hello changes made between hello previous differential query request and hello current request.</span></span> <span data-ttu-id="ff3eb-132">如需詳細資訊，請參閱 [Azure AD Graph API 差異查詢](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-differential-query)。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-132">For more information, see [Azure AD Graph API Differential Query](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-differential-query).</span></span>
* <span data-ttu-id="ff3eb-133">**目錄延伸模組**： 如果您正在開發需要 tooread 或寫入的唯一屬性為目錄物件的應用程式，您可以註冊及使用 hello Graph API 中使用延伸模組值。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-133">**Directory Extensions**: If you are developing an application that needs tooread or write unique properties for directory objects, you can register and use extension values by using hello Graph API.</span></span> <span data-ttu-id="ff3eb-134">比方說，如果您的應用程式需要每個使用者的 Skype ID 屬性，您可以在 hello 目錄中註冊 hello 新屬性，並將予以提供每個使用者物件上。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-134">For example, if your application requires a Skype ID property for each user, you can register hello new property in hello directory and it will be available on every user object.</span></span> <span data-ttu-id="ff3eb-135">如需詳細資訊，請參閱 [Azure AD Graph API 目錄結構描述延伸模組](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-directory-schema-extensions)。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-135">For more information, see [Azure AD Graph API Directory Schema Extensions](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-directory-schema-extensions).</span></span>
* <span data-ttu-id="ff3eb-136">**受到權限範圍**: AAD Graph API 會公開權限範圍，以啟用安全/同意存取 tooAAD 資料，並支援各種不同的用戶端應用程式類型，包括：</span><span class="sxs-lookup"><span data-stu-id="ff3eb-136">**Secured by permission scopes**: AAD Graph API exposes permission scopes that enable secure/consented access tooAAD data, and support a variety of client app types, including:</span></span>
  
  * <span data-ttu-id="ff3eb-137">會提供委派的使用者介面的存取透過授權 toodata 從 hello 登入的使用者 （委派）</span><span class="sxs-lookup"><span data-stu-id="ff3eb-137">those with a user interface which are given delegated access toodata via authorization from hello signed-in user (delegated)</span></span>
  * <span data-ttu-id="ff3eb-138">使用服務/服務精靈用戶端 (應用程式角色) 等應用程式定義角色型存取控制的類型</span><span class="sxs-lookup"><span data-stu-id="ff3eb-138">those that use application-define role-based access control such as service/daemon clients (app roles)</span></span>
    
    <span data-ttu-id="ff3eb-139">同時委派和應用程式角色權限範圍代表 hello Graph API 所公開的權限，而且可以透過應用程式註冊權限的用戶端應用程式要求[hello Azure 入口網站中的功能](https://portal.azure.com)。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-139">Both delegated and app role permission scopes represent a privilege exposed by hello Graph API and can be requested by client applications through application registration permissions [features in hello Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="ff3eb-140">用戶端可以確認 hello 權限範圍授與 toothem 檢查收到 hello 委派的權限的存取權杖中的 hello 範圍 ("scp") 宣告與 hello 角色 （「 角色 」） 宣告的應用程式角色權限。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-140">Clients can verify hello permission scopes granted toothem by inspecting hello scope (“scp”) claim received in hello access token for delegated permissions and hello roles (“roles”) claim for app role permissions.</span></span> <span data-ttu-id="ff3eb-141">深入了解 [Azure AD 圖形 API 權限範圍](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-permission-scopes)。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-141">Learn more about [Azure AD Graph API Permission Scopes](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-permission-scopes).</span></span>

## <a name="scenarios"></a><span data-ttu-id="ff3eb-142">案例</span><span class="sxs-lookup"><span data-stu-id="ff3eb-142">Scenarios</span></span>
<span data-ttu-id="ff3eb-143">hello Graph API 可讓許多應用程式案例。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-143">hello Graph API enables many application scenarios.</span></span> <span data-ttu-id="ff3eb-144">下列案例的 hello 是最常見的 hello:</span><span class="sxs-lookup"><span data-stu-id="ff3eb-144">hello following scenarios are hello most common:</span></span>

* <span data-ttu-id="ff3eb-145">**企業營運 (單一租用戶) 應用程式**：在此案例中，企業開發人員任職於具有 Office 365 訂用帳戶的組織中。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-145">**Line of Business (Single Tenant) Application**: In this scenario, an enterprise developer works for an organization that has an Office 365 subscription.</span></span> <span data-ttu-id="ff3eb-146">hello 開發人員正在建置 web 應用程式與互動的 Azure AD tooperform 工作，例如指派授權 tooa 使用者。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-146">hello developer is building a web application that interacts with Azure AD tooperform tasks such assigning a license tooa user.</span></span> <span data-ttu-id="ff3eb-147">這項工作需要存取 toohello Graph API，因此 hello 開發人員在 Azure AD 中註冊 hello 單一租用戶應用程式，並設定讀取和寫入 hello Graph API 的權限。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-147">This task requires access toohello Graph API, so hello developer registers hello single tenant application in Azure AD and configures read and write permissions for hello Graph API.</span></span> <span data-ttu-id="ff3eb-148">然後 hello 應用程式是設定的 toouse，可能是它自己的認證，或這些 hello 目前登入的使用者 tooacquire 語彙基元 toocall hello Graph API。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-148">Then hello application is configured toouse either its own credentials or those of hello currently sign-in user tooacquire a token toocall hello Graph API.</span></span>
* <span data-ttu-id="ff3eb-149">**軟體即服務應用程式 (多租用戶)**：在此案例中，獨立軟體廠商 (ISV) 正在開發託管的多租用戶 Web 應用程式，目的是為使用 Azure AD 的其他組織提供使用者管理功能。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-149">**Software as a Service Application (Multi-Tenant)**: In this scenario, an independent software vendor (ISV) is developing hosted multi-tenant web application that provides user management features for other organizations that use Azure AD.</span></span> <span data-ttu-id="ff3eb-150">這些功能都需要存取 toodirectory 物件，並因此 hello 應用程式所需要的 toocall hello Graph API。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-150">These features require access toodirectory objects, and so hello application needs toocall hello Graph API.</span></span> <span data-ttu-id="ff3eb-151">hello 開發人員在 Azure AD 中註冊 hello 應用程式、 將它設定 toorequire 讀取和 hello Graph API 的寫入權限，然後啟用外部存取，讓其他組織可同意 toouse hello 應用程式，在他們的目錄。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-151">hello developer registers hello application in Azure AD, configures it toorequire read and write permissions for hello Graph API, and then enables external access so that other organizations can consent toouse hello application in their directory.</span></span> <span data-ttu-id="ff3eb-152">當另一個組織中的使用者進行驗證 toohello 應用程式的 hello 第一次時，它們會顯示以 hello hello 應用程式所要求的權限的同意對話方塊。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-152">When a user in another organization authenticates toohello application for hello first time, they are shown a consent dialog with hello permissions hello application is requesting.</span></span>  <span data-ttu-id="ff3eb-153">這些要求的權限 toohello Graph API hello 使用者的目錄中授與同意然後會提供 hello 應用程式。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-153">Granting consent will then give hello application those requested permissions toohello Graph API in hello user’s directory.</span></span> <span data-ttu-id="ff3eb-154">如需有關 hello 同意架構的詳細資訊，請參閱[hello 同意架構的概觀](active-directory-integrating-applications.md)。</span><span class="sxs-lookup"><span data-stu-id="ff3eb-154">For more information on hello consent framework, see [Overview of hello Consent Framework](active-directory-integrating-applications.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="ff3eb-155">另請參閱</span><span class="sxs-lookup"><span data-stu-id="ff3eb-155">See Also</span></span>
[<span data-ttu-id="ff3eb-156">Azure AD Graph API 快速入門指南</span><span class="sxs-lookup"><span data-stu-id="ff3eb-156">Azure AD Graph API Quickstart Guide</span></span>](active-directory-graph-api-quickstart.md)

[<span data-ttu-id="ff3eb-157">AD Graph REST 文件</span><span class="sxs-lookup"><span data-stu-id="ff3eb-157">AD Graph REST documentation</span></span>](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog)

[<span data-ttu-id="ff3eb-158">Azure Active Directory 開發人員指南</span><span class="sxs-lookup"><span data-stu-id="ff3eb-158">Azure Active Directory developer's guide</span></span>](active-directory-developers-guide.md)

