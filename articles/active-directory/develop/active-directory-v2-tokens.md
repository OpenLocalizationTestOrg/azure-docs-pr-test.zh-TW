---
title: "aaaAzure Active Directory v2.0 權杖參考 |Microsoft 文件"
description: "hello 類型的權杖與 hello Azure AD v2.0 端點所發出的宣告"
services: active-directory
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: dc58c282-9684-4b38-b151-f3e079f034fd
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/07/2017
ms.author: dastrock
ms.custom: aaddev
ms.openlocfilehash: 29eb5c3402aeae302ee7c6234488520495f85904
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="azure-active-directory-v20-tokens-reference"></a><span data-ttu-id="a3917-103">Azure Active Directory v2.0 權杖參考</span><span class="sxs-lookup"><span data-stu-id="a3917-103">Azure Active Directory v2.0 tokens reference</span></span>
<span data-ttu-id="a3917-104">hello Azure Active Directory (Azure AD) v2.0 端點發出幾種類型的安全性權杖，在每個[驗證流程](active-directory-v2-flows.md)。</span><span class="sxs-lookup"><span data-stu-id="a3917-104">hello Azure Active Directory (Azure AD) v2.0 endpoint emits several types of security tokens in each [authentication flow](active-directory-v2-flows.md).</span></span> <span data-ttu-id="a3917-105">此參考描述 hello 格式、 安全性的特性，以及每種類型的語彙基元的內容。</span><span class="sxs-lookup"><span data-stu-id="a3917-105">This reference describes hello format, security characteristics, and contents of each type of token.</span></span>

> [!NOTE]
> <span data-ttu-id="a3917-106">hello v2.0 端點不支援所有的 Azure Active Directory 的案例和功能。</span><span class="sxs-lookup"><span data-stu-id="a3917-106">hello v2.0 endpoint does not support all Azure Active Directory scenarios and features.</span></span> <span data-ttu-id="a3917-107">toodetermine 是否應該使用 hello v2.0 端點，閱讀有關[v2.0 限制](active-directory-v2-limitations.md)。</span><span class="sxs-lookup"><span data-stu-id="a3917-107">toodetermine whether you should use hello v2.0 endpoint, read about [v2.0 limitations](active-directory-v2-limitations.md).</span></span>
>
>

## <a name="types-of-tokens"></a><span data-ttu-id="a3917-108">權杖的類型</span><span class="sxs-lookup"><span data-stu-id="a3917-108">Types of tokens</span></span>
<span data-ttu-id="a3917-109">hello v2.0 端點支援 hello [OAuth 2.0 授權通訊協定](active-directory-v2-protocols.md)，它會使用存取權杖和重新整理權杖。</span><span class="sxs-lookup"><span data-stu-id="a3917-109">hello v2.0 endpoint supports hello [OAuth 2.0 authorization protocol](active-directory-v2-protocols.md), which uses access tokens and refresh tokens.</span></span> <span data-ttu-id="a3917-110">hello v2.0 端點也支援驗證和登入透過[OpenID Connect](active-directory-v2-protocols.md)。</span><span class="sxs-lookup"><span data-stu-id="a3917-110">hello v2.0 endpoint also supports authentication and sign-in via [OpenID Connect](active-directory-v2-protocols.md).</span></span> <span data-ttu-id="a3917-111">OpenID Connect 導入了第三種類型的語彙基元，hello ID 語彙基元。</span><span class="sxs-lookup"><span data-stu-id="a3917-111">OpenID Connect introduces a third type of token, hello ID token.</span></span> <span data-ttu-id="a3917-112">這些權杖中的每一個都是以「持有人」權杖來表示。</span><span class="sxs-lookup"><span data-stu-id="a3917-112">Each of these tokens is represented as a *bearer* token.</span></span>

<span data-ttu-id="a3917-113">承載權杖是輕巧型的安全性權杖會授與 hello 承載存取 tooa 受保護資源。</span><span class="sxs-lookup"><span data-stu-id="a3917-113">A bearer token is a lightweight security token that grants hello bearer access tooa protected resource.</span></span> <span data-ttu-id="a3917-114">hello 持有者是指可出示 hello 語彙基元任何一方。</span><span class="sxs-lookup"><span data-stu-id="a3917-114">hello bearer is any party that can present hello token.</span></span> <span data-ttu-id="a3917-115">雖然合作對象必須向 Azure AD tooreceive hello 持有者權杖，如果步驟在傳輸與儲存期間不會採用 toosecure hello 語彙基元，它可以攔截和使用非預期的合作對象。</span><span class="sxs-lookup"><span data-stu-id="a3917-115">Although a party must authenticate with Azure AD tooreceive hello bearer token, if steps are not taken toosecure hello token during transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="a3917-116">某些安全性權杖有內建機制 tooprevent 未經授權的合作對象不使用它們，但持有人權杖。</span><span class="sxs-lookup"><span data-stu-id="a3917-116">Some security tokens have a built-in mechanism tooprevent unauthorized parties from using them, but bearer tokens do not.</span></span> <span data-ttu-id="a3917-117">持有人權杖必須在安全的通道 (例如傳輸層安全性 (HTTPS)) 中傳輸。</span><span class="sxs-lookup"><span data-stu-id="a3917-117">Bearer tokens must be transported in a secure channel such as transport layer security (HTTPS).</span></span> <span data-ttu-id="a3917-118">如果沒有這種類型的安全性傳輸持有者權杖，惡意的合作對象無法使用"攔截攻擊"tooacquire hello 語彙基元，並使用它未經授權的存取 tooa 受保護的資源。</span><span class="sxs-lookup"><span data-stu-id="a3917-118">If a bearer token is transmitted without this type of security, a malicious party could use a "man-in-the-middle attack" tooacquire hello token and use it for unauthorized access tooa protected resource.</span></span> <span data-ttu-id="a3917-119">hello 儲存或快取持有者權杖供以後使用時，適用相同的安全性原則。</span><span class="sxs-lookup"><span data-stu-id="a3917-119">hello same security principles apply when storing or caching bearer tokens for later use.</span></span> <span data-ttu-id="a3917-120">請一律確保您的應用程式以安全的方式傳輸和儲存持有人權杖。</span><span class="sxs-lookup"><span data-stu-id="a3917-120">Always ensure that your app securely transmits and stores bearer tokens.</span></span> <span data-ttu-id="a3917-121">如需了解持有人權杖的更多安全性考量，請參閱 [RFC 6750 第 5 節](http://tools.ietf.org/html/rfc6750)。</span><span class="sxs-lookup"><span data-stu-id="a3917-121">For more security considerations for bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="a3917-122">許多 hello hello v2.0 端點所發出的權杖會實作為 JSON Web 權杖 (Jwt)。</span><span class="sxs-lookup"><span data-stu-id="a3917-122">Many of hello tokens issued by hello v2.0 endpoint are implemented as JSON Web Tokens (JWTs).</span></span> <span data-ttu-id="a3917-123">JWT 是兩個合作對象之間的壓縮、 URL 安全的方式 tootransfer 資訊。</span><span class="sxs-lookup"><span data-stu-id="a3917-123">A JWT is a compact, URL-safe way tootransfer information between two parties.</span></span> <span data-ttu-id="a3917-124">JWT 中的 hello 資訊稱為*宣告*。</span><span class="sxs-lookup"><span data-stu-id="a3917-124">hello information in a JWT is called a *claim*.</span></span> <span data-ttu-id="a3917-125">它是 hello 持有者的相關資訊的判斷提示和 hello 權杖的主體。</span><span class="sxs-lookup"><span data-stu-id="a3917-125">It's an assertion of information about hello bearer and subject of hello token.</span></span> <span data-ttu-id="a3917-126">JWT 中的 hello 宣告是編碼，以及如何序列化為傳輸的 JavaScript Object Notation (JSON) 物件。</span><span class="sxs-lookup"><span data-stu-id="a3917-126">hello claims in a JWT are JavaScript Object Notation (JSON) objects that are encoded and serialized for transmission.</span></span> <span data-ttu-id="a3917-127">由於 hello Jwt 發給 hello v2.0 端點簽署，但是不會加密，因此，您可以輕鬆地檢查 JWT hello 內容以進行偵錯。</span><span class="sxs-lookup"><span data-stu-id="a3917-127">Because hello JWTs issued by hello v2.0 endpoint are signed but not encrypted, you can easily inspect hello contents of a JWT for debugging purposes.</span></span> <span data-ttu-id="a3917-128">如需 Jwt 的詳細資訊，請參閱 hello [JWT 規格](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html)。</span><span class="sxs-lookup"><span data-stu-id="a3917-128">For more information about JWTs, see hello [JWT specification](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span></span>

### <a name="id-tokens"></a><span data-ttu-id="a3917-129">ID 權杖</span><span class="sxs-lookup"><span data-stu-id="a3917-129">ID tokens</span></span>
<span data-ttu-id="a3917-130">識別碼權杖是您的應用程式使用 [OpenID Connect](active-directory-v2-protocols.md) 來執行驗證時所收到的一種登入安全性權杖形式。</span><span class="sxs-lookup"><span data-stu-id="a3917-130">An ID token is a form of sign-in security token that your app receives when it performs authentication by using [OpenID Connect](active-directory-v2-protocols.md).</span></span> <span data-ttu-id="a3917-131">ID 語彙基元會表示為[Jwt](#types-of-tokens)，且其中包含您可以在 tooyour 應用程式中使用 toosign hello 使用者的宣告。</span><span class="sxs-lookup"><span data-stu-id="a3917-131">ID tokens are represented as [JWTs](#types-of-tokens), and they contain claims that you can use toosign hello user in tooyour app.</span></span> <span data-ttu-id="a3917-132">您可以使用 hello 宣告中的 ID 語彙基元，以各種方式。</span><span class="sxs-lookup"><span data-stu-id="a3917-132">You can use hello claims in an ID token in various ways.</span></span> <span data-ttu-id="a3917-133">一般而言，系統管理員 」 應用程式中使用識別碼權杖 toodisplay 帳戶資訊或 toomake 存取控制決定。</span><span class="sxs-lookup"><span data-stu-id="a3917-133">Typically, admins use ID tokens toodisplay account information or toomake access control decisions in an app.</span></span> <span data-ttu-id="a3917-134">hello v2.0 端點發出 ID 語彙基元，其具有一組一致的宣告，不論 hello 登入的使用者類型只能有一個的類型。</span><span class="sxs-lookup"><span data-stu-id="a3917-134">hello v2.0 endpoint issues only one type of ID token, which has a consistent set of claims, regardless of hello type of user that is signed in.</span></span> <span data-ttu-id="a3917-135">hello 格式和內容的 ID 語彙基元是個人的 Microsoft 帳戶使用者和工作或學校帳戶 hello 相同。</span><span class="sxs-lookup"><span data-stu-id="a3917-135">hello format and content of ID tokens are hello same for personal Microsoft account users and for work or school accounts.</span></span>

<span data-ttu-id="a3917-136">目前識別碼權杖已簽署但未加密。</span><span class="sxs-lookup"><span data-stu-id="a3917-136">Currently, ID tokens are signed but not encrypted.</span></span> <span data-ttu-id="a3917-137">當您的應用程式收到的 ID 語彙基元時，它必須[驗證 hello 簽章](#validating-tokens)tooprove hello 權杖的真實性，並驗證 hello 語彙基元 tooprove 中的幾個宣告其有效性。</span><span class="sxs-lookup"><span data-stu-id="a3917-137">When your app receives an ID token, it must [validate hello signature](#validating-tokens) tooprove hello token's authenticity and validate a few claims in hello token tooprove its validity.</span></span> <span data-ttu-id="a3917-138">hello 宣告驗證的應用程式而異案例的需求，但您的應用程式必須執行一些[常見的宣告驗證](#validating-tokens)在每個案例。</span><span class="sxs-lookup"><span data-stu-id="a3917-138">hello claims validated by an app vary depending on scenario requirements, but your app must perform some [common claim validations](#validating-tokens) in every scenario.</span></span>

<span data-ttu-id="a3917-139">我們提供 hello 有關中的識別碼權杖中宣告的完整詳細資料 hello 下列各節，此外 tooa 範例 ID 語彙基元。</span><span class="sxs-lookup"><span data-stu-id="a3917-139">We give you hello full details about claims in ID tokens in hello following sections, in addition tooa sample ID token.</span></span> <span data-ttu-id="a3917-140">請注意，識別碼權杖中的宣告不會以特定順序傳回。</span><span class="sxs-lookup"><span data-stu-id="a3917-140">Note that claims in ID tokens are not returned in a specific order.</span></span> <span data-ttu-id="a3917-141">此外，隨時都可以在識別碼權杖中導入新的宣告。</span><span class="sxs-lookup"><span data-stu-id="a3917-141">Also, new claims can be introduced into ID tokens at any time.</span></span> <span data-ttu-id="a3917-142">導入新宣告時，您的應用程式應該不會發生中斷的現象。</span><span class="sxs-lookup"><span data-stu-id="a3917-142">Your app should not break when new claims are introduced.</span></span> <span data-ttu-id="a3917-143">hello 下列清單包含您的應用程式目前可以可靠地解譯的 hello 宣告。</span><span class="sxs-lookup"><span data-stu-id="a3917-143">hello following list includes hello claims that your app currently can reliably interpret.</span></span> <span data-ttu-id="a3917-144">您可以找到更多詳細資料中 hello [OpenID Connect 規格](http://openid.net/specs/openid-connect-core-1_0.html)。</span><span class="sxs-lookup"><span data-stu-id="a3917-144">You can find more details in hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>

#### <a name="sample-id-token"></a><span data-ttu-id="a3917-145">範例 ID 權杖</span><span class="sxs-lookup"><span data-stu-id="a3917-145">Sample ID token</span></span>
```
eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6Ik1uQ19WWmNBVGZNNXBPWWlKSE1iYTlnb0VLWSJ9.eyJhdWQiOiI2NzMxZGU3Ni0xNGE2LTQ5YWUtOTdiYy02ZWJhNjkxNDM5MWUiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vYjk0MTk4MTgtMDlhZi00OWMyLWIwYzMtNjUzYWRjMWYzNzZlL3YyLjAiLCJpYXQiOjE0NTIyODUzMzEsIm5iZiI6MTQ1MjI4NTMzMSwiZXhwIjoxNDUyMjg5MjMxLCJuYW1lIjoiQmFiZSBSdXRoIiwibm9uY2UiOiIxMjM0NSIsIm9pZCI6ImExZGJkZGU4LWU0ZjktNDU3MS1hZDkzLTMwNTllMzc1MGQyMyIsInByZWZlcnJlZF91c2VybmFtZSI6InRoZWdyZWF0YmFtYmlub0BueXkub25taWNyb3NvZnQuY29tIiwic3ViIjoiTUY0Zi1nZ1dNRWppMTJLeW5KVU5RWnBoYVVUdkxjUXVnNWpkRjJubDAxUSIsInRpZCI6ImI5NDE5ODE4LTA5YWYtNDljMi1iMGMzLTY1M2FkYzFmMzc2ZSIsInZlciI6IjIuMCJ9.p_rYdrtJ1oCmgDBggNHB9O38KTnLCMGbMDODdirdmZbmJcTHiZDdtTc-hguu3krhbtOsoYM2HJeZM3Wsbp_YcfSKDY--X_NobMNsxbT7bqZHxDnA2jTMyrmt5v2EKUnEeVtSiJXyO3JWUq9R0dO-m4o9_8jGP6zHtR62zLaotTBYHmgeKpZgTFB9WtUq8DVdyMn_HSvQEfz-LWqckbcTwM_9RNKoGRVk38KChVJo4z5LkksYRarDo8QgQ7xEKmYmPvRr_I7gvM2bmlZQds2OeqWLB1NSNbFZqyFOCgYn3bAQ-nEQSKwBaA36jYGPOVG2r2Qv1uKcpSOxzxaQybzYpQ
```

> [!TIP]
> <span data-ttu-id="a3917-146">作法，tooinspect hello 宣告在 hello 範例識別碼權杖中，貼上到 hello 範例識別碼權杖[calebb.net](http://calebb.net/)。</span><span class="sxs-lookup"><span data-stu-id="a3917-146">For practice, tooinspect hello claims in hello sample ID token, paste hello sample ID token into [calebb.net](http://calebb.net/).</span></span>
>
>

#### <a name="claims-in-id-tokens"></a><span data-ttu-id="a3917-147">ID 權杖中的宣告</span><span class="sxs-lookup"><span data-stu-id="a3917-147">Claims in ID tokens</span></span>
| <span data-ttu-id="a3917-148">名稱</span><span class="sxs-lookup"><span data-stu-id="a3917-148">Name</span></span> | <span data-ttu-id="a3917-149">宣告</span><span class="sxs-lookup"><span data-stu-id="a3917-149">Claim</span></span> | <span data-ttu-id="a3917-150">範例值</span><span class="sxs-lookup"><span data-stu-id="a3917-150">Example value</span></span> | <span data-ttu-id="a3917-151">說明</span><span class="sxs-lookup"><span data-stu-id="a3917-151">Description</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="a3917-152">audience</span><span class="sxs-lookup"><span data-stu-id="a3917-152">audience</span></span> |`aud` |`6731de76-14a6-49ae-97bc-6eba6914391e` |<span data-ttu-id="a3917-153">識別 hello 預期收件者的 hello 語彙基元。</span><span class="sxs-lookup"><span data-stu-id="a3917-153">Identifies hello intended recipient of hello token.</span></span> <span data-ttu-id="a3917-154">在 ID 權杖 hello 對象會是指派 tooyour hello Microsoft 應用程式註冊入口網站中的應用程式的應用程式的應用程式識別碼。</span><span class="sxs-lookup"><span data-stu-id="a3917-154">In ID tokens, hello audience is your app's Application ID, assigned tooyour app in hello Microsoft Application Registration Portal.</span></span> <span data-ttu-id="a3917-155">您的應用程式應該驗證此值，並拒絕 hello 語彙基元，如果 hello 值不相符。</span><span class="sxs-lookup"><span data-stu-id="a3917-155">Your app should validate this value, and reject hello token if hello value does not match.</span></span> |
| <span data-ttu-id="a3917-156">簽發者</span><span class="sxs-lookup"><span data-stu-id="a3917-156">issuer</span></span> |`iss` |`https://login.microsoftonline.com/b9419818-09af-49c2-b0c3-653adc1f376e/v2.0 ` |<span data-ttu-id="a3917-157">識別 hello 安全性權杖服務 (STS) 建構，並傳回 hello 語彙基元和 hello Azure AD 租用戶中的 hello 驗證使用者。</span><span class="sxs-lookup"><span data-stu-id="a3917-157">Identifies hello security token service (STS) that constructs and returns hello token, and hello Azure AD tenant in which hello user was authenticated.</span></span> <span data-ttu-id="a3917-158">您的應用程式應該先驗證 hello issuer 宣告 hello 語彙基元的 tooensure 來自 hello v2.0 端點。</span><span class="sxs-lookup"><span data-stu-id="a3917-158">Your app should validate hello issuer claim tooensure that hello token came from hello v2.0 endpoint.</span></span> <span data-ttu-id="a3917-159">它也應該使用的登入 toohello 應用程式的租用戶 hello 宣告 toorestrict hello 集合 hello GUID 部分。</span><span class="sxs-lookup"><span data-stu-id="a3917-159">It also should use hello GUID portion of hello claim toorestrict hello set of tenants that can sign in toohello app.</span></span> <span data-ttu-id="a3917-160">hello 指出該 hello 使用者的 GUID 就是取用者的使用者帳戶是在 microsoft `9188040d-6c67-4c5b-b112-36a304b66dad`。</span><span class="sxs-lookup"><span data-stu-id="a3917-160">hello GUID that indicates that hello user is a consumer user from a Microsoft account is `9188040d-6c67-4c5b-b112-36a304b66dad`.</span></span> |
| <span data-ttu-id="a3917-161">簽發時間</span><span class="sxs-lookup"><span data-stu-id="a3917-161">issued at</span></span> |`iat` |`1452285331` |<span data-ttu-id="a3917-162">hello 的 hello 權杖的發出時間，表示在 epoch 時間。</span><span class="sxs-lookup"><span data-stu-id="a3917-162">hello time at which hello token was issued, represented in epoch time.</span></span> |
| <span data-ttu-id="a3917-163">到期時間</span><span class="sxs-lookup"><span data-stu-id="a3917-163">expiration time</span></span> |`exp` |`1452289231` |<span data-ttu-id="a3917-164">hello 時間在哪一個 hello 權杖就會變成無效，表示在 epoch 時間。</span><span class="sxs-lookup"><span data-stu-id="a3917-164">hello time at which hello token becomes invalid, represented in epoch time.</span></span> <span data-ttu-id="a3917-165">您的應用程式應該使用此宣告 tooverify hello 的有效性 hello 權杖存留期。</span><span class="sxs-lookup"><span data-stu-id="a3917-165">Your app should use this claim tooverify hello validity of hello token lifetime.</span></span> |
| <span data-ttu-id="a3917-166">生效時間</span><span class="sxs-lookup"><span data-stu-id="a3917-166">not before</span></span> |`nbf` |`1452285331` |<span data-ttu-id="a3917-167">hello 的 hello 權杖生效的時間，表示在 epoch 時間。</span><span class="sxs-lookup"><span data-stu-id="a3917-167">hello time at which hello token becomes valid, represented in epoch time.</span></span> <span data-ttu-id="a3917-168">它是通常為 hello 發行時間 hello 相同。</span><span class="sxs-lookup"><span data-stu-id="a3917-168">It is usually hello same as hello issuance time.</span></span> <span data-ttu-id="a3917-169">您的應用程式應該使用此宣告 tooverify hello 的有效性 hello 權杖存留期。</span><span class="sxs-lookup"><span data-stu-id="a3917-169">Your app should use this claim tooverify hello validity of hello token lifetime.</span></span> |
| <span data-ttu-id="a3917-170">版本</span><span class="sxs-lookup"><span data-stu-id="a3917-170">version</span></span> |`ver` |`2.0` |<span data-ttu-id="a3917-171">hello hello 識別碼權杖，Azure AD 所定義的版本。</span><span class="sxs-lookup"><span data-stu-id="a3917-171">hello version of hello ID token, as defined by Azure AD.</span></span> <span data-ttu-id="a3917-172">Hello v2.0 端點，hello 值是`2.0`。</span><span class="sxs-lookup"><span data-stu-id="a3917-172">For hello v2.0 endpoint, hello value is `2.0`.</span></span> |
| <span data-ttu-id="a3917-173">租用戶識別碼</span><span class="sxs-lookup"><span data-stu-id="a3917-173">tenant ID</span></span> |`tid` |`b9419818-09af-49c2-b0c3-653adc1f376e` |<span data-ttu-id="a3917-174">代表 hello 使用者的 hello Azure AD 租用戶的 GUID 是從。</span><span class="sxs-lookup"><span data-stu-id="a3917-174">A GUID that represents hello Azure AD tenant that hello user is from.</span></span> <span data-ttu-id="a3917-175">公司及學校帳戶 hello GUID 是組織的所屬 hello hello 使用者識別碼 hello 固定租用戶。</span><span class="sxs-lookup"><span data-stu-id="a3917-175">For work and school accounts, hello GUID is hello immutable tenant ID of hello organization that hello user belongs to.</span></span> <span data-ttu-id="a3917-176">Hello 值就是個人的帳戶， `9188040d-6c67-4c5b-b112-36a304b66dad`。</span><span class="sxs-lookup"><span data-stu-id="a3917-176">For personal accounts, hello value is `9188040d-6c67-4c5b-b112-36a304b66dad`.</span></span> <span data-ttu-id="a3917-177">hello`profile`範圍無須在順序 tooreceive 此宣告。</span><span class="sxs-lookup"><span data-stu-id="a3917-177">hello `profile` scope is required in order tooreceive this claim.</span></span> |
| <span data-ttu-id="a3917-178">代碼雜湊</span><span class="sxs-lookup"><span data-stu-id="a3917-178">code hash</span></span> |`c_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="a3917-179">hello 的 ID 語彙基元發行使用 OAuth 2.0 授權碼時，才 hello 程式碼的雜湊一併併入 ID 語彙基元。</span><span class="sxs-lookup"><span data-stu-id="a3917-179">hello code hash is included in ID tokens only when hello ID token is issued with an OAuth 2.0 authorization code.</span></span> <span data-ttu-id="a3917-180">它可以是使用的 toovalidate hello 真實性的授權碼。</span><span class="sxs-lookup"><span data-stu-id="a3917-180">It can be used toovalidate hello authenticity of an authorization code.</span></span> <span data-ttu-id="a3917-181">如需有關執行此驗證的詳細資訊，請參閱 hello [OpenID Connect 規格](http://openid.net/specs/openid-connect-core-1_0.html)。</span><span class="sxs-lookup"><span data-stu-id="a3917-181">For details about performing this validation, see hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span> |
| <span data-ttu-id="a3917-182">存取權杖雜湊</span><span class="sxs-lookup"><span data-stu-id="a3917-182">access token hash</span></span> |`at_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="a3917-183">hello 的 ID 語彙基元發出以 OAuth 2.0 存取權杖時，才 hello 存取語彙基元雜湊一併併入 ID 語彙基元。</span><span class="sxs-lookup"><span data-stu-id="a3917-183">hello access token hash is included in ID tokens only when hello ID token is issued with an OAuth 2.0 access token.</span></span> <span data-ttu-id="a3917-184">它可以是使用的 toovalidate hello 真實性的存取權杖。</span><span class="sxs-lookup"><span data-stu-id="a3917-184">It can be used toovalidate hello authenticity of an access token.</span></span> <span data-ttu-id="a3917-185">如需有關執行此驗證的詳細資訊，請參閱 hello [OpenID Connect 規格](http://openid.net/specs/openid-connect-core-1_0.html)。</span><span class="sxs-lookup"><span data-stu-id="a3917-185">For details about performing this validation, see hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span> |
| <span data-ttu-id="a3917-186">nonce</span><span class="sxs-lookup"><span data-stu-id="a3917-186">nonce</span></span> |`nonce` |`12345` |<span data-ttu-id="a3917-187">hello nonce 是一種策略的緩和權杖重新執行攻擊。</span><span class="sxs-lookup"><span data-stu-id="a3917-187">hello nonce is a strategy for mitigating token replay attacks.</span></span> <span data-ttu-id="a3917-188">您的應用程式可以利用 hello 授權要求中指定的 nonce`nonce`查詢參數。</span><span class="sxs-lookup"><span data-stu-id="a3917-188">Your app can specify a nonce in an authorization request by using hello `nonce` query parameter.</span></span> <span data-ttu-id="a3917-189">您提供 hello 要求中的 hello 值，就會發出在 hello ID 語彙基元的`nonce`未經修改的宣告。</span><span class="sxs-lookup"><span data-stu-id="a3917-189">hello value you provide in hello request is emitted in hello ID token's `nonce` claim, unmodified.</span></span> <span data-ttu-id="a3917-190">您的應用程式可以確認它指定 hello 要求時，其使用特定的 ID 語彙基元關聯 hello 應用程式工作階段的 hello 值 hello 值。</span><span class="sxs-lookup"><span data-stu-id="a3917-190">Your app can verify hello value against hello value it specified on hello request, which associates hello app's session with a specific ID token.</span></span> <span data-ttu-id="a3917-191">您的應用程式應該執行這項驗證 hello 識別碼權杖驗證程序期間。</span><span class="sxs-lookup"><span data-stu-id="a3917-191">Your app should perform this validation during hello ID token validation process.</span></span> |
| <span data-ttu-id="a3917-192">名稱</span><span class="sxs-lookup"><span data-stu-id="a3917-192">name</span></span> |`name` |`Babe Ruth` |<span data-ttu-id="a3917-193">hello 名稱宣告會提供人類看得懂的值，識別 hello 權杖主體的 hello。</span><span class="sxs-lookup"><span data-stu-id="a3917-193">hello name claim provides a human-readable value that identifies hello subject of hello token.</span></span> <span data-ttu-id="a3917-194">hello 值不保證唯一的它是可變動的而且是 toobe 設計 toobe 只用於顯示用途。</span><span class="sxs-lookup"><span data-stu-id="a3917-194">hello value is not guaranteed toobe unique, it is mutable, and it's designed toobe used only for display purposes.</span></span> <span data-ttu-id="a3917-195">hello`profile`範圍無須在順序 tooreceive 此宣告。</span><span class="sxs-lookup"><span data-stu-id="a3917-195">hello `profile` scope is required in order tooreceive this claim.</span></span> |
| <span data-ttu-id="a3917-196">電子郵件</span><span class="sxs-lookup"><span data-stu-id="a3917-196">email</span></span> |`email` |`thegreatbambino@nyy.onmicrosoft.com` |<span data-ttu-id="a3917-197">如果有的話，hello 使用者帳戶，與相關聯的 hello 主要電子郵件地址。</span><span class="sxs-lookup"><span data-stu-id="a3917-197">hello primary email address associated with hello user account, if one exists.</span></span> <span data-ttu-id="a3917-198">其值是可變動的，並且可能隨著時間改變。</span><span class="sxs-lookup"><span data-stu-id="a3917-198">Its value is mutable and might change over time.</span></span> <span data-ttu-id="a3917-199">hello`email`範圍無須在順序 tooreceive 此宣告。</span><span class="sxs-lookup"><span data-stu-id="a3917-199">hello `email` scope is required in order tooreceive this claim.</span></span> |
| <span data-ttu-id="a3917-200">慣用的使用者名稱</span><span class="sxs-lookup"><span data-stu-id="a3917-200">preferred username</span></span> |`preferred_username` |`thegreatbambino@nyy.onmicrosoft.com` |<span data-ttu-id="a3917-201">hello 代表 hello v2.0 端點中的 hello 使用者的主要使用者名稱。</span><span class="sxs-lookup"><span data-stu-id="a3917-201">hello primary username that represents hello user in hello v2.0 endpoint.</span></span> <span data-ttu-id="a3917-202">它可以是電子郵件地址、電話號碼或未指定格式的一般使用者名稱。</span><span class="sxs-lookup"><span data-stu-id="a3917-202">It could be an email address, phone number, or a generic username without a specified format.</span></span> <span data-ttu-id="a3917-203">其值是可變動的，並且可能隨著時間改變。</span><span class="sxs-lookup"><span data-stu-id="a3917-203">Its value is mutable and might change over time.</span></span> <span data-ttu-id="a3917-204">hello`profile`範圍無須在順序 tooreceive 此宣告。</span><span class="sxs-lookup"><span data-stu-id="a3917-204">hello `profile` scope is required in order tooreceive this claim.</span></span> |
| <span data-ttu-id="a3917-205">主旨</span><span class="sxs-lookup"><span data-stu-id="a3917-205">subject</span></span> |`sub` |`MF4f-ggWMEji12KynJUNQZphaUTvLcQug5jdF2nl01Q` | <span data-ttu-id="a3917-206">hello 主體的 hello 權杖判斷提示的相關資訊，例如 hello 使用者應用程式。</span><span class="sxs-lookup"><span data-stu-id="a3917-206">hello principal about which hello token asserts information, such as hello user of an app.</span></span> <span data-ttu-id="a3917-207">這個值不可變，而且無法重新指派或重複使用。</span><span class="sxs-lookup"><span data-stu-id="a3917-207">This value is immutable and cannot be reassigned or reused.</span></span> <span data-ttu-id="a3917-208">它可以使用的 tooperform 授權檢查，例如當 hello 語彙基元是使用的 tooaccess 資源，並可用來當做資料庫資料表中的索引鍵。</span><span class="sxs-lookup"><span data-stu-id="a3917-208">It can be used tooperform authorization checks safely, such as when hello token is used tooaccess a resource, and can be used as a key in database tables.</span></span> <span data-ttu-id="a3917-209">因為 hello 主體一律存在於 hello 語彙基元的 Azure AD 會發出，我們建議您在一般用途的授權系統中使用此值。</span><span class="sxs-lookup"><span data-stu-id="a3917-209">Because hello subject is always present in hello tokens that Azure AD issues, we recommend using this value in a general-purpose authorization system.</span></span> <span data-ttu-id="a3917-210">hello 主旨，不過，這會為成對識別碼-它是唯一的 tooa 特定應用程式識別碼。</span><span class="sxs-lookup"><span data-stu-id="a3917-210">hello subject is, however, a pairwise identifier - it is unique tooa particular application ID.</span></span>  <span data-ttu-id="a3917-211">因此，如果單一使用者登入兩個不同的應用程式使用兩個不同的用戶端識別碼，這些應用程式會收到 hello 主體宣告的兩個不同的值。</span><span class="sxs-lookup"><span data-stu-id="a3917-211">Therefore, if a single user signs into two different apps using two different client IDs, those apps will receive two different values for hello subject claim.</span></span>  <span data-ttu-id="a3917-212">視您的架構和隱私權需求而定，這不一定是您想要的。</span><span class="sxs-lookup"><span data-stu-id="a3917-212">This may or may not be desired depending on your architecture and privacy requirements.</span></span> |
| <span data-ttu-id="a3917-213">物件識別碼</span><span class="sxs-lookup"><span data-stu-id="a3917-213">object ID</span></span> |`oid` |`a1dbdde8-e4f9-4571-ad93-3059e3750d23` | <span data-ttu-id="a3917-214">hello 程式物件的不可變識別碼 hello Microsoft 身分識別系統中，在此情況下，使用者帳戶。</span><span class="sxs-lookup"><span data-stu-id="a3917-214">hello immutable identifier for an object in hello Microsoft identity system, in this case, a user account.</span></span>  <span data-ttu-id="a3917-215">它也可以使用的 tooperform 授權檢查安全無虞地並做為資料庫資料表中的索引鍵。</span><span class="sxs-lookup"><span data-stu-id="a3917-215">It can also be used tooperform authorization checks safely and as a key in database tables.</span></span> <span data-ttu-id="a3917-216">這個識別碼可唯一識別 hello 使用者，跨應用程式-兩個不同的應用程式登入相同的使用者將會收到的 hello hello 相同值在 hello`oid`宣告。</span><span class="sxs-lookup"><span data-stu-id="a3917-216">This ID uniquely identifies hello user across applications - two different applications signing in hello same user will receive hello same value in hello `oid` claim.</span></span>  <span data-ttu-id="a3917-217">這表示 tooMicrosoft 線上服務，例如 hello Microsoft Graph 進行查詢時，可以使用它。</span><span class="sxs-lookup"><span data-stu-id="a3917-217">This means that it can be used when making queries tooMicrosoft online services, such as hello Microsoft Graph.</span></span>  <span data-ttu-id="a3917-218">hello Microsoft Graph 會傳回這個識別碼，表示為 hello`id`屬性指定的使用者帳戶。</span><span class="sxs-lookup"><span data-stu-id="a3917-218">hello Microsoft Graph will return this ID as hello `id` property for a given user account.</span></span>  <span data-ttu-id="a3917-219">因為 hello`oid`可讓多個應用程式 toocorrelate 使用者 hello`profile`範圍無須在順序 tooreceive 此宣告。</span><span class="sxs-lookup"><span data-stu-id="a3917-219">Because hello `oid` allows multiple apps toocorrelate users, hello `profile` scope is required in order tooreceive this claim.</span></span> <span data-ttu-id="a3917-220">請注意，是否單一使用者存在於多個租用戶，hello 使用者，將會包含每個租用戶中是不同的物件識別碼-視為不同的帳戶，即使 hello 使用者登入每個帳戶與 hello 相同的認證。</span><span class="sxs-lookup"><span data-stu-id="a3917-220">Note that if a single user exists in multiple tenants, hello user will contain a different object ID in each tenant - they are considered different accounts, even though hello user logs into each account with hello same credentials.</span></span> |

### <a name="access-tokens"></a><span data-ttu-id="a3917-221">存取權杖</span><span class="sxs-lookup"><span data-stu-id="a3917-221">Access tokens</span></span>
<span data-ttu-id="a3917-222">目前，可以取用 hello v2.0 端點所發出的存取權杖，只供 Microsoft 服務。</span><span class="sxs-lookup"><span data-stu-id="a3917-222">Currently, access tokens issued by hello v2.0 endpoint can be consumed only by Microsoft Services.</span></span> <span data-ttu-id="a3917-223">您的應用程式應該不需要 tooperform 任何驗證或檢查存取權杖的任何 hello 目前支援的案例。</span><span class="sxs-lookup"><span data-stu-id="a3917-223">Your apps shouldn't need tooperform any validation or inspection of access tokens for any of hello currently supported scenarios.</span></span> <span data-ttu-id="a3917-224">您可以將存取權杖視為完全不透明。</span><span class="sxs-lookup"><span data-stu-id="a3917-224">You can treat access tokens as completely opaque.</span></span> <span data-ttu-id="a3917-225">它們是您的應用程式，可以在 HTTP 要求中傳遞 tooMicrosoft 只是字串。</span><span class="sxs-lookup"><span data-stu-id="a3917-225">They are just strings that your app can pass tooMicrosoft in HTTP requests.</span></span>

<span data-ttu-id="a3917-226">在未來，hello v2.0 附近的 hello 端點將介紹您應用程式 tooreceive 存取權杖的 hello 能力，從其他用戶端。</span><span class="sxs-lookup"><span data-stu-id="a3917-226">In hello near future, hello v2.0 endpoint will introduce hello ability for your app tooreceive access tokens from other clients.</span></span> <span data-ttu-id="a3917-227">在這段時間，將會更新這個參考主題中的 hello 資訊 hello 資訊，您需要您的應用程式 tooperform 存取權杖的驗證和其他類似的工作。</span><span class="sxs-lookup"><span data-stu-id="a3917-227">At that time, hello information in this reference topic will be updated with hello information that you need for your app tooperform access token validation and other similar tasks.</span></span>

<span data-ttu-id="a3917-228">當您從 hello v2.0 端點要求存取權杖時，hello v2.0 端點也會傳回應用程式 toouse hello 存取權杖的相關中繼資料。</span><span class="sxs-lookup"><span data-stu-id="a3917-228">When you request an access token from hello v2.0 endpoint, hello v2.0 endpoint also returns metadata about hello access token for your app toouse.</span></span> <span data-ttu-id="a3917-229">這項資訊包括 hello hello 存取權杖和 hello 範圍，它是有效的到期時間。</span><span class="sxs-lookup"><span data-stu-id="a3917-229">This information includes hello expiry time of hello access token and hello scopes for which it is valid.</span></span> <span data-ttu-id="a3917-230">您的應用程式會使用此中繼資料 tooperform 智慧型權杖快取存取而不需要自行 tooparse 開啟 hello 存取權杖。</span><span class="sxs-lookup"><span data-stu-id="a3917-230">Your app uses this metadata tooperform intelligent caching of access tokens without having tooparse open hello access token itself.</span></span>

### <a name="refresh-tokens"></a><span data-ttu-id="a3917-231">重新整理權杖</span><span class="sxs-lookup"><span data-stu-id="a3917-231">Refresh tokens</span></span>
<span data-ttu-id="a3917-232">重新整理權杖是安全性權杖，您的應用程式可以使用 tooget 新存取語彙基元中 OAuth 2.0 流程。</span><span class="sxs-lookup"><span data-stu-id="a3917-232">Refresh tokens are security tokens that your app can use tooget new access tokens in an OAuth 2.0 flow.</span></span> <span data-ttu-id="a3917-233">您的應用程式可以使用代表使用者重新整理語彙基元 tooachieve 長期存取 tooresources，而不需要與 hello 使用者互動。</span><span class="sxs-lookup"><span data-stu-id="a3917-233">Your app can use refresh tokens tooachieve long-term access tooresources on behalf of a user without requiring interaction with hello user.</span></span>

<span data-ttu-id="a3917-234">重新整理權杖屬於多資源權杖。</span><span class="sxs-lookup"><span data-stu-id="a3917-234">Refresh tokens are multi-resource.</span></span> <span data-ttu-id="a3917-235">一個資源的權杖要求期間收到重新整理權杖可用來兌換存取權杖 tooa 完全不同的資源。</span><span class="sxs-lookup"><span data-stu-id="a3917-235">A refresh token received during a token request for one resource can be redeemed for access tokens tooa completely different resource.</span></span>

<span data-ttu-id="a3917-236">tooreceive 重新整理權杖的回應中的您的應用程式必須要求，以及被授與 hello`offline_acesss`範圍。</span><span class="sxs-lookup"><span data-stu-id="a3917-236">tooreceive a refresh in a token response, your app must request and be granted hello `offline_acesss` scope.</span></span> <span data-ttu-id="a3917-237">深入了解 hello toolearn`offline_access`範圍，請參閱 hello[同意和範圍](active-directory-v2-scopes.md)發行項。</span><span class="sxs-lookup"><span data-stu-id="a3917-237">toolearn more about hello `offline_access` scope, see hello [consent and scopes](active-directory-v2-scopes.md) article.</span></span>

<span data-ttu-id="a3917-238">重新整理權杖，而且永遠會為，完全不透明 tooyour 應用程式。</span><span class="sxs-lookup"><span data-stu-id="a3917-238">Refresh tokens are, and always will be, completely opaque tooyour app.</span></span> <span data-ttu-id="a3917-239">它們所發行的 hello Azure AD v2.0 端點和可只檢查及 hello v2.0 端點所解譯。</span><span class="sxs-lookup"><span data-stu-id="a3917-239">They are issued by hello Azure AD v2.0 endpoint and can only be inspected and interpreted by hello v2.0 endpoint.</span></span> <span data-ttu-id="a3917-240">它們是長時間執行，但您的應用程式應該不會寫入任何時段將持續重新整理權杖的 tooexpect。</span><span class="sxs-lookup"><span data-stu-id="a3917-240">They are long-lived, but your app should not be written tooexpect that a refresh token will last for any period of time.</span></span> <span data-ttu-id="a3917-241">重新整理權杖可能會因為各種原因而隨時失效。</span><span class="sxs-lookup"><span data-stu-id="a3917-241">Refresh tokens can be invalidated at any moment for various reasons.</span></span> <span data-ttu-id="a3917-242">只有您的應用程式 tooknow 如果重新整理權杖是有效的方式為 tooattempt tooredeem hello 它藉由權杖要求 toohello v2.0 端點。</span><span class="sxs-lookup"><span data-stu-id="a3917-242">hello only way for your app tooknow if a refresh token is valid is tooattempt tooredeem it by making a token request toohello v2.0 endpoint.</span></span>

<span data-ttu-id="a3917-243">當您兌換新存取權杖的重新整理語彙基元 (如果您的應用程式已被授與 hello 和`offline_access`範圍)，hello 權杖回應中收到新的重新整理權杖。</span><span class="sxs-lookup"><span data-stu-id="a3917-243">When you redeem a refresh token for a new access token (and if your app had been granted hello `offline_access` scope), you receive a new refresh token in hello token response.</span></span> <span data-ttu-id="a3917-244">將 hello 剛發行的重新整理語彙基元，tooreplace hello 使用儲存在 hello 要求。</span><span class="sxs-lookup"><span data-stu-id="a3917-244">Save hello newly issued refresh token, tooreplace hello one you used in hello request.</span></span> <span data-ttu-id="a3917-245">這可保證您的重新整理權杖儘可能長期保持有效。</span><span class="sxs-lookup"><span data-stu-id="a3917-245">This guarantees that your refresh tokens remain valid for as long as possible.</span></span>

## <a name="validating-tokens"></a><span data-ttu-id="a3917-246">驗證權杖</span><span class="sxs-lookup"><span data-stu-id="a3917-246">Validating tokens</span></span>
<span data-ttu-id="a3917-247">目前，hello 只應該在需要您的應用程式的權杖驗證 tooperform 正在驗證 ID 語彙基元。</span><span class="sxs-lookup"><span data-stu-id="a3917-247">Currently, hello only token validation your apps should need tooperform is validating ID tokens.</span></span> <span data-ttu-id="a3917-248">toovalidate ID 權杖，您的應用程式應該先驗證 hello 識別碼權杖中的兩個 hello ID 權杖簽章與 hello 宣告。</span><span class="sxs-lookup"><span data-stu-id="a3917-248">toovalidate an ID token, your app should validate both hello ID token's signature and hello claims in hello ID token.</span></span>

<!-- TODO: Link -->
<span data-ttu-id="a3917-249">Microsoft 提供程式庫和程式碼範例，示範您如何 tooeasily 處理權杖驗證。</span><span class="sxs-lookup"><span data-stu-id="a3917-249">Microsoft provides libraries and code samples that show you how tooeasily handle token validation.</span></span> <span data-ttu-id="a3917-250">在 hello 下一步 區段中，我們將描述 hello 基礎程序。</span><span class="sxs-lookup"><span data-stu-id="a3917-250">In hello next sections, we describe hello underlying process.</span></span> <span data-ttu-id="a3917-251">此外，也有數個協力廠商開放原始碼程式庫可用於 JWT 驗證。</span><span class="sxs-lookup"><span data-stu-id="a3917-251">Several third-party open-source libraries also are available for JWT validation.</span></span> <span data-ttu-id="a3917-252">幾乎每個平台和語言都有至少一個程式庫選項。</span><span class="sxs-lookup"><span data-stu-id="a3917-252">There's at least one library option for almost every platform and language.</span></span>

### <a name="validate-hello-signature"></a><span data-ttu-id="a3917-253">驗證 hello 簽章</span><span class="sxs-lookup"><span data-stu-id="a3917-253">Validate hello signature</span></span>
<span data-ttu-id="a3917-254">JWT 包含三個區段，並以 hello 分隔`.`字元。</span><span class="sxs-lookup"><span data-stu-id="a3917-254">A JWT contains three segments, which are separated by hello `.` character.</span></span> <span data-ttu-id="a3917-255">hello 第一個區段稱為 hello*標頭*，hello 第二個區段為 hello*主體*，和 hello 第三個區段為 hello*簽章*。</span><span class="sxs-lookup"><span data-stu-id="a3917-255">hello first segment is known as hello *header*, hello second segment is hello *body*, and hello third segment is hello *signature*.</span></span> <span data-ttu-id="a3917-256">hello 簽章區段，讓它可以信任的應用程式，可以是 hello 的 ID 語彙基元使用的 toovalidate hello 真確性。</span><span class="sxs-lookup"><span data-stu-id="a3917-256">hello signature segment can be used toovalidate hello authenticity of hello ID token so that it can be trusted by your app.</span></span>

<span data-ttu-id="a3917-257">ID 權杖是經由業界標準非對稱式加密演算法 (例如 RSA 256) 進行簽署。</span><span class="sxs-lookup"><span data-stu-id="a3917-257">ID tokens are signed by using industry-standard asymmetric encryption algorithms, such as RSA 256.</span></span> <span data-ttu-id="a3917-258">hello 的標頭 hello 的 ID 語彙基元擁有 hello 索引鍵的相關資訊，並使用 toosign hello token 的加密方法。</span><span class="sxs-lookup"><span data-stu-id="a3917-258">hello header of hello ID token has information about hello key and encryption method used toosign hello token.</span></span> <span data-ttu-id="a3917-259">例如：</span><span class="sxs-lookup"><span data-stu-id="a3917-259">For example:</span></span>

```
{
  "typ": "JWT",
  "alg": "RS256",
  "kid": "MnC_VZcATfM5pOYiJHMba9goEKY"
}
```

<span data-ttu-id="a3917-260">hello`alg`宣告表示已使用的 toosign hello 語彙基元的 hello 演算法。</span><span class="sxs-lookup"><span data-stu-id="a3917-260">hello `alg` claim indicates hello algorithm that was used toosign hello token.</span></span> <span data-ttu-id="a3917-261">hello`kid`宣告表示已使用的 toosign hello 語彙基元的 hello 公用金鑰。</span><span class="sxs-lookup"><span data-stu-id="a3917-261">hello `kid` claim indicates hello public key that was used toosign hello token.</span></span>

<span data-ttu-id="a3917-262">在任何時間，hello v2.0 端點可能會使用任何一組特定的公開-私密金鑰組簽署 ID 語彙基元。</span><span class="sxs-lookup"><span data-stu-id="a3917-262">At any time, hello v2.0 endpoint might sign an ID token by using any one of a specific set of public-private key pairs.</span></span> <span data-ttu-id="a3917-263">hello v2.0 端點定期旋轉 hello 可能索引鍵集中，因此您的應用程式應撰寫的 toohandle 這些金鑰會自動變更。</span><span class="sxs-lookup"><span data-stu-id="a3917-263">hello v2.0 endpoint periodically rotates hello possible set of keys, so your app should be written toohandle those key changes automatically.</span></span> <span data-ttu-id="a3917-264">合理的頻率 toocheck 更新 toohello 公開金鑰 hello v2.0 端點所使用的是每隔 24 小時。</span><span class="sxs-lookup"><span data-stu-id="a3917-264">A reasonable frequency toocheck for updates toohello public keys used by hello v2.0 endpoint is every 24 hours.</span></span>

<span data-ttu-id="a3917-265">您可以取得簽章使用 hello OpenID Connect 中繼資料文件位於需要 toovalidate hello 簽章的金鑰資料的 hello:</span><span class="sxs-lookup"><span data-stu-id="a3917-265">You can acquire hello signing key data that you need toovalidate hello signature by using hello OpenID Connect metadata document located at:</span></span>

```
https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration
```

> [!TIP]
> <span data-ttu-id="a3917-266">在瀏覽器中的 hello URL 再試一次 ！</span><span class="sxs-lookup"><span data-stu-id="a3917-266">Try hello URL in a browser!</span></span>
>
>

<span data-ttu-id="a3917-267">此中繼資料文件是 hello 的資訊的有數項有用，例如 hello 位置的不同端點的驗證所需的 OpenID Connect 的 JSON 物件。</span><span class="sxs-lookup"><span data-stu-id="a3917-267">This metadata document is a JSON object that has several useful pieces of information, such as hello location of hello various endpoints required for OpenID Connect authentication.</span></span>  <span data-ttu-id="a3917-268">hello 文件也包含*jwks_uri*，讓 hello 組之公開金鑰的 hello 位置使用 toosign 語彙基元。</span><span class="sxs-lookup"><span data-stu-id="a3917-268">hello document also includes a *jwks_uri*, which gives hello location of hello set of public keys used toosign tokens.</span></span> <span data-ttu-id="a3917-269">位於 hello jwks_uri hello JSON 文件的所有 hello 公用金鑰資訊正在使用中。</span><span class="sxs-lookup"><span data-stu-id="a3917-269">hello JSON document located at hello jwks_uri has all hello public key information that is currently in use.</span></span> <span data-ttu-id="a3917-270">您的應用程式可以使用 hello`kid`宣告中的這份文件中的公開金鑰已使用的 toosign hello JWT 標頭 tooselect 語彙基元。</span><span class="sxs-lookup"><span data-stu-id="a3917-270">Your app can use hello `kid` claim in hello JWT header tooselect which public key in this document has been used toosign a token.</span></span> <span data-ttu-id="a3917-271">然後會使用正確的公用金鑰 hello 和 hello 指定的演算法執行簽章驗證。</span><span class="sxs-lookup"><span data-stu-id="a3917-271">It then performs signature validation by using hello correct public key and hello indicated algorithm.</span></span>

<span data-ttu-id="a3917-272">執行簽章驗證是 hello 範圍外的這份文件。</span><span class="sxs-lookup"><span data-stu-id="a3917-272">Performing signature validation is outside hello scope of this document.</span></span> <span data-ttu-id="a3917-273">許多開放原始碼程式庫會提供 toohelp 您與此。</span><span class="sxs-lookup"><span data-stu-id="a3917-273">Many open-source libraries are available toohelp you with this.</span></span>

### <a name="validate-hello-claims"></a><span data-ttu-id="a3917-274">驗證 hello 宣告</span><span class="sxs-lookup"><span data-stu-id="a3917-274">Validate hello claims</span></span>
<span data-ttu-id="a3917-275">當您的應用程式收到的 ID 語彙基元，在使用者登入時，它也應該執行對 hello 宣告少數檢查 hello 的 ID 語彙基元中。</span><span class="sxs-lookup"><span data-stu-id="a3917-275">When your app receives an ID token upon user sign-in, it should also perform a few checks against hello claims in hello ID token.</span></span> <span data-ttu-id="a3917-276">包含但不限於：</span><span class="sxs-lookup"><span data-stu-id="a3917-276">These include but are not limited to:</span></span>

* <span data-ttu-id="a3917-277">**對象**宣告 hello 的 ID 語彙基元的 tooverify 已預定的 toobe 指定 tooyour 應用程式</span><span class="sxs-lookup"><span data-stu-id="a3917-277">**audience** claim, tooverify that hello ID token was intended toobe given tooyour app</span></span>
* <span data-ttu-id="a3917-278">**不能早**和**到期時間**宣告 hello 的 ID 語彙基元的 tooverify 尚未過期。</span><span class="sxs-lookup"><span data-stu-id="a3917-278">**not before** and **expiration time** claims, tooverify that hello ID token has not expired</span></span>
* <span data-ttu-id="a3917-279">**簽發者**宣告 hello 語彙基元的 tooverify hello v2.0 端點所發出 tooyour 應用程式</span><span class="sxs-lookup"><span data-stu-id="a3917-279">**issuer** claim, tooverify that hello token was issued tooyour app by hello v2.0 endpoint</span></span>
* <span data-ttu-id="a3917-280">**Nonce** - 作為權杖重新執行攻擊的緩和措施</span><span class="sxs-lookup"><span data-stu-id="a3917-280">**nonce**, as a token replay attack mitigation</span></span>

<span data-ttu-id="a3917-281">宣告驗證，您的應用程式應執行的完整清單，請參閱 hello [OpenID Connect 規格](http://openid.net/specs/openid-connect-core-1_0.html#IDTokenValidation)。</span><span class="sxs-lookup"><span data-stu-id="a3917-281">For a full list of claim validations that your app should perform, see hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html#IDTokenValidation).</span></span>

<span data-ttu-id="a3917-282">這些宣告的 hello 預期值的詳細資料會包含在 hello [ID 權杖](# ID tokens)> 一節。</span><span class="sxs-lookup"><span data-stu-id="a3917-282">Details of hello expected values for these claims are included in hello [ID tokens](# ID tokens) section.</span></span>

## <a name="token-lifetimes"></a><span data-ttu-id="a3917-283">權杖存留期</span><span class="sxs-lookup"><span data-stu-id="a3917-283">Token lifetimes</span></span>
<span data-ttu-id="a3917-284">我們提供下列僅供貴的權杖存留期的 hello。</span><span class="sxs-lookup"><span data-stu-id="a3917-284">We provide hello following token lifetimes for your information only.</span></span> <span data-ttu-id="a3917-285">hello 資訊可能有助於在您開發及偵錯應用程式。</span><span class="sxs-lookup"><span data-stu-id="a3917-285">hello information might help you as you develop and debug apps.</span></span> <span data-ttu-id="a3917-286">您的應用程式不應該寫入 tooexpect 任何這些存留期 tooremain 常數。</span><span class="sxs-lookup"><span data-stu-id="a3917-286">Your apps should not be written tooexpect any of these lifetimes tooremain constant.</span></span> <span data-ttu-id="a3917-287">權杖存留期可以而且將會隨時變更。</span><span class="sxs-lookup"><span data-stu-id="a3917-287">Token lifetimes can and will change at any time.</span></span>

| <span data-ttu-id="a3917-288">權杖</span><span class="sxs-lookup"><span data-stu-id="a3917-288">Token</span></span> | <span data-ttu-id="a3917-289">存留期</span><span class="sxs-lookup"><span data-stu-id="a3917-289">Lifetime</span></span> | <span data-ttu-id="a3917-290">說明</span><span class="sxs-lookup"><span data-stu-id="a3917-290">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="a3917-291">識別碼權杖 (工作或學校帳戶)</span><span class="sxs-lookup"><span data-stu-id="a3917-291">ID tokens (work or school accounts)</span></span> |<span data-ttu-id="a3917-292">1 小時</span><span class="sxs-lookup"><span data-stu-id="a3917-292">1 hour</span></span> |<span data-ttu-id="a3917-293">識別碼權杖的有效期通常為 1 小時。</span><span class="sxs-lookup"><span data-stu-id="a3917-293">ID tokens typically are valid for 1 hour.</span></span> <span data-ttu-id="a3917-294">您的 web 應用程式可以使用這個相同的存留期 toomaintain 自己的工作階段與 hello 使用者 （建議），或者您可以選擇完全不同的工作階段存留期。</span><span class="sxs-lookup"><span data-stu-id="a3917-294">Your web app can use this same lifetime toomaintain its own session with hello user (recommended), or you can choose a completely different session lifetime.</span></span> <span data-ttu-id="a3917-295">如果您的應用程式需要 tooget 新的 ID 語彙基元，它需要新的登入 toomake toohello v2.0 授權端點的要求。</span><span class="sxs-lookup"><span data-stu-id="a3917-295">If your app needs tooget a new ID token, it needs toomake a new sign-in request toohello v2.0 authorize endpoint.</span></span> <span data-ttu-id="a3917-296">如果 hello 使用者擁有有效的瀏覽器工作階段與 hello v2.0 端點，hello 使用者可能不是必要的 tooenter 其認證一次。</span><span class="sxs-lookup"><span data-stu-id="a3917-296">If hello user has a valid browser session with hello v2.0 endpoint, hello user might not be required tooenter their credentials again.</span></span> |
| <span data-ttu-id="a3917-297">識別碼權杖 (個人帳戶)</span><span class="sxs-lookup"><span data-stu-id="a3917-297">ID tokens (personal accounts)</span></span> |<span data-ttu-id="a3917-298">24 小時</span><span class="sxs-lookup"><span data-stu-id="a3917-298">24 hours</span></span> |<span data-ttu-id="a3917-299">個人帳戶的識別碼權杖有效期通常為 24 小時。</span><span class="sxs-lookup"><span data-stu-id="a3917-299">ID tokens for personal accounts typically are valid for 24 hours.</span></span> <span data-ttu-id="a3917-300">您的 web 應用程式可以使用這個相同的存留期 toomaintain 自己的工作階段與 hello 使用者 （建議），或者您可以選擇完全不同的工作階段存留期。</span><span class="sxs-lookup"><span data-stu-id="a3917-300">Your web app can use this same lifetime toomaintain its own session with hello user (recommended), or you can choose a completely different session lifetime.</span></span> <span data-ttu-id="a3917-301">如果您的應用程式需要 tooget 新的 ID 語彙基元，它需要新的登入 toomake toohello v2.0 授權端點的要求。</span><span class="sxs-lookup"><span data-stu-id="a3917-301">If your app needs tooget a new ID token, it needs toomake a new sign-in request toohello v2.0 authorize endpoint.</span></span> <span data-ttu-id="a3917-302">如果 hello 使用者擁有有效的瀏覽器工作階段與 hello v2.0 端點，hello 使用者可能不是必要的 tooenter 其認證一次。</span><span class="sxs-lookup"><span data-stu-id="a3917-302">If hello user has a valid browser session with hello v2.0 endpoint, hello user might not be required tooenter their credentials again.</span></span> |
| <span data-ttu-id="a3917-303">存取權杖 (工作或學校帳戶)</span><span class="sxs-lookup"><span data-stu-id="a3917-303">Access tokens (work or school accounts)</span></span> |<span data-ttu-id="a3917-304">1 小時</span><span class="sxs-lookup"><span data-stu-id="a3917-304">1 hour</span></span> |<span data-ttu-id="a3917-305">以語彙基元回應 hello 語彙基元的中繼資料的一部分。</span><span class="sxs-lookup"><span data-stu-id="a3917-305">Indicated in token responses as part of hello token metadata.</span></span> |
| <span data-ttu-id="a3917-306">存取權杖 (個人帳戶)</span><span class="sxs-lookup"><span data-stu-id="a3917-306">Access tokens (personal accounts)</span></span> |<span data-ttu-id="a3917-307">1 小時</span><span class="sxs-lookup"><span data-stu-id="a3917-307">1 hour</span></span> |<span data-ttu-id="a3917-308">以語彙基元回應 hello 語彙基元的中繼資料的一部分。</span><span class="sxs-lookup"><span data-stu-id="a3917-308">Indicated in token responses as part of hello token metadata.</span></span> <span data-ttu-id="a3917-309">可以為代表個人帳戶簽發的存取權杖設定不同的存留期，但通常是一小時。</span><span class="sxs-lookup"><span data-stu-id="a3917-309">Access tokens that are issued on behalf of personal accounts can be configured for a different lifetime, but 1 hour is typical.</span></span> |
| <span data-ttu-id="a3917-310">重新整理權杖 (工作或學校帳戶)</span><span class="sxs-lookup"><span data-stu-id="a3917-310">Refresh tokens (work or school account)</span></span> |<span data-ttu-id="a3917-311">向上 too14 天</span><span class="sxs-lookup"><span data-stu-id="a3917-311">Up too14 days</span></span> |<span data-ttu-id="a3917-312">單一重新整理權杖的有效期最多 14 天。</span><span class="sxs-lookup"><span data-stu-id="a3917-312">A single refresh token is valid for a maximum of 14 days.</span></span> <span data-ttu-id="a3917-313">不過，hello 重新整理權杖可能會變成無效隨時基於各種原因，因此您的應用程式應該繼續 tootry toouse 重新整理權杖，直到它失敗，或直到您的應用程式會將它取代新的重新整理權杖。</span><span class="sxs-lookup"><span data-stu-id="a3917-313">However, hello refresh token might become invalid at any time for various reasons, so your app should continue tootry toouse a refresh token until it fails, or until your app replaces it with a new refresh token.</span></span> <span data-ttu-id="a3917-314">重新整理權杖也會變成無效，如果已經 90 天 hello 使用者輸入其認證。</span><span class="sxs-lookup"><span data-stu-id="a3917-314">A refresh token also becomes invalid if it has been 90 days since hello user has entered their credentials.</span></span> |
| <span data-ttu-id="a3917-315">重新整理權杖 (個人帳戶)</span><span class="sxs-lookup"><span data-stu-id="a3917-315">Refresh tokens (personal accounts)</span></span> |<span data-ttu-id="a3917-316">Too1 年</span><span class="sxs-lookup"><span data-stu-id="a3917-316">Up too1 year</span></span> |<span data-ttu-id="a3917-317">單一重新整理權杖的有效期最多 1 年。</span><span class="sxs-lookup"><span data-stu-id="a3917-317">A single refresh token is valid for a maximum of 1 year.</span></span> <span data-ttu-id="a3917-318">不過，hello 重新整理權杖可能在任何時間，因為各種原因而變成無效，因此您的應用程式應該繼續 tootry toouse 重新整理權杖，直到它失敗。</span><span class="sxs-lookup"><span data-stu-id="a3917-318">However, hello refresh token might become invalid at any time for various reasons, so your app should continue tootry toouse a refresh token until it fails.</span></span> |
| <span data-ttu-id="a3917-319">授權碼 (工作或學校帳戶)</span><span class="sxs-lookup"><span data-stu-id="a3917-319">Authorization codes (work or school accounts)</span></span> |<span data-ttu-id="a3917-320">10 分鐘</span><span class="sxs-lookup"><span data-stu-id="a3917-320">10 minutes</span></span> |<span data-ttu-id="a3917-321">授權碼刻意存留較短，而且應該立即贖回存取權杖和重新整理權杖時收到 hello 語彙基元。</span><span class="sxs-lookup"><span data-stu-id="a3917-321">Authorization codes are purposely short-lived, and should be immediately redeemed for access tokens and refresh tokens when hello tokens are received.</span></span> |
| <span data-ttu-id="a3917-322">授權碼 (個人帳戶)</span><span class="sxs-lookup"><span data-stu-id="a3917-322">Authorization codes (personal accounts)</span></span> |<span data-ttu-id="a3917-323">5 分鐘</span><span class="sxs-lookup"><span data-stu-id="a3917-323">5 minutes</span></span> |<span data-ttu-id="a3917-324">授權碼刻意存留較短，而且應該立即贖回存取權杖和重新整理權杖時收到 hello 語彙基元。</span><span class="sxs-lookup"><span data-stu-id="a3917-324">Authorization codes are purposely short-lived, and should be immediately redeemed for access tokens and refresh tokens when hello tokens are received.</span></span> <span data-ttu-id="a3917-325">代表個人帳戶簽發的授權碼是供單次使用。</span><span class="sxs-lookup"><span data-stu-id="a3917-325">Authorization codes that are issued on behalf of personal accounts are for one-time use.</span></span> |
