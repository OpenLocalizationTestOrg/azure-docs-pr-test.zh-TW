---
title: "應用程式 Proxy aaaTroubleshoot |Microsoft 文件"
description: "涵蓋如何在 Azure AD Application Proxy tootroubleshoot 錯誤。"
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 970caafb-40b8-483c-bb46-c8b032a4fb74
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/21/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: H1Hack27Feb2017; it-pro
ms.openlocfilehash: d426708a2ee32da6674987b5794602ed984b06b3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-application-proxy-problems-and-error-messages"></a><span data-ttu-id="2f300-103">針對應用程式 Proxy 問題和錯誤訊息進行疑難排解</span><span class="sxs-lookup"><span data-stu-id="2f300-103">Troubleshoot Application Proxy problems and error messages</span></span>
<span data-ttu-id="2f300-104">如果在存取發行的應用程式，或在發行應用程式，就會發生錯誤，檢查下列選項 toosee，如果 Microsoft Azure AD 應用程式 Proxy 正常運作的 hello:</span><span class="sxs-lookup"><span data-stu-id="2f300-104">If errors occur in accessing a published application or in publishing applications, check hello following options toosee if Microsoft Azure AD Application Proxy is working correctly:</span></span>

* <span data-ttu-id="2f300-105">開啟 hello Windows 服務主控台並確認該 hello **Microsoft AAD 應用程式 Proxy 連接器**服務已啟用且正在執行。</span><span class="sxs-lookup"><span data-stu-id="2f300-105">Open hello Windows Services console and verify that hello **Microsoft AAD Application Proxy Connector** service is enabled and running.</span></span> <span data-ttu-id="2f300-106">您也可以在 hello 應用程式 Proxy 服務屬性頁面 toolook hello 下列影像所示：</span><span class="sxs-lookup"><span data-stu-id="2f300-106">You may also want toolook at hello Application Proxy service properties page, as shown in hello following image:</span></span>  
  <span data-ttu-id="2f300-107">![[Microsoft AAD 應用程式 Proxy 連接器屬性] 視窗螢幕擷取畫面](./media/active-directory-application-proxy-troubleshoot/connectorproperties.png)</span><span class="sxs-lookup"><span data-stu-id="2f300-107">![Microsoft AAD Application Proxy Connector Properties window screenshot](./media/active-directory-application-proxy-troubleshoot/connectorproperties.png)</span></span>
* <span data-ttu-id="2f300-108">開啟 [事件檢視器]，然後在 [應用程式及服務記錄檔] > [Microsoft] > [AadApplicationProxy] > [Connector] > [Admin] 中尋找「應用程式 Proxy」連接器事件。</span><span class="sxs-lookup"><span data-stu-id="2f300-108">Open Event Viewer and look for Application Proxy connector events in **Applications and Services Logs** > **Microsoft** > **AadApplicationProxy** > **Connector** > **Admin**.</span></span>
* <span data-ttu-id="2f300-109">如有需要更詳細的記錄檔可用的[開啟 hello 應用程式 Proxy 連接器工作階段記錄](application-proxy-understand-connectors.md#under-the-hood)。</span><span class="sxs-lookup"><span data-stu-id="2f300-109">If needed, more detailed logs are available by [turning on hello Application Proxy connector session logs](application-proxy-understand-connectors.md#under-the-hood).</span></span>

<span data-ttu-id="2f300-110">如需 hello Azure AD 疑難排解工具的詳細資訊，請參閱[疑難排解工具 toovalidate 連接器網路必要條件](https://blogs.technet.microsoft.com/applicationproxyblog/2015/09/03/troubleshooting-tool-to-validate-connector-networking-prerequisites)。</span><span class="sxs-lookup"><span data-stu-id="2f300-110">For more information about hello Azure AD Troubleshooting tool, see [Troubleshooting tool toovalidate connector networking prerequisites](https://blogs.technet.microsoft.com/applicationproxyblog/2015/09/03/troubleshooting-tool-to-validate-connector-networking-prerequisites).</span></span>

## <a name="hello-page-is-not-rendered-correctly"></a><span data-ttu-id="2f300-111">無法正確呈現 hello 頁面</span><span class="sxs-lookup"><span data-stu-id="2f300-111">hello page is not rendered correctly</span></span>
<span data-ttu-id="2f300-112">您可能會遇到應用程式轉譯有問題或運作不正確，但沒有收到特定錯誤訊息的情況。</span><span class="sxs-lookup"><span data-stu-id="2f300-112">You may have problems with your application rendering or functioning incorrectly without receiving specific error messages.</span></span> <span data-ttu-id="2f300-113">如果您發行 hello 文件路徑，但卻 hello 應用程式需要存在於該路徑的外部的內容，也可能會發生。</span><span class="sxs-lookup"><span data-stu-id="2f300-113">This can occur if you published hello article path, but hello application requires content that exists outside that path.</span></span>

<span data-ttu-id="2f300-114">比方說，如果您發行 hello 路徑 https://yourapp/app 但 hello 應用程式會呼叫 https://yourapp/media 映像，它們將不會呈現。</span><span class="sxs-lookup"><span data-stu-id="2f300-114">For example, if you publish hello path https://yourapp/app but hello application calls images in https://yourapp/media, they won't be rendered.</span></span> <span data-ttu-id="2f300-115">請確定您發行使用 hello 最高的層級路徑相關的所有內容都需要 tooinclude hello 應用程式。</span><span class="sxs-lookup"><span data-stu-id="2f300-115">Make sure that you publish hello application using hello highest level path you need tooinclude all relevant content.</span></span> <span data-ttu-id="2f300-116">在此範例中，它會是 http://yourapp/。</span><span class="sxs-lookup"><span data-stu-id="2f300-116">In this example, it would be http://yourapp/.</span></span>

<span data-ttu-id="2f300-117">如果您變更您的路徑 tooinclude 參考內容，但仍然需要使用者 tooland hello 路徑中的更深層連結，請參閱 hello 部落格文章[hello Azure AD 存取面板和 Office 365 應用程式中的應用程式 Proxy 應用程式的設定 hello 右邊連結啟動器](https://blogs.technet.microsoft.com/applicationproxyblog/2016/04/06/setting-the-right-link-for-application-proxy-applications-in-the-azure-ad-access-panel-and-office-365-app-launcher/)。</span><span class="sxs-lookup"><span data-stu-id="2f300-117">If you change your path tooinclude referenced content, but still need users tooland on a deeper link in hello path, see hello blog post [Setting hello right link for Application Proxy applications in hello Azure AD access panel and Office 365 app launcher](https://blogs.technet.microsoft.com/applicationproxyblog/2016/04/06/setting-the-right-link-for-application-proxy-applications-in-the-azure-ad-access-panel-and-office-365-app-launcher/).</span></span>

## <a name="connector-errors"></a><span data-ttu-id="2f300-118">連接器錯誤</span><span class="sxs-lookup"><span data-stu-id="2f300-118">Connector errors</span></span>

<span data-ttu-id="2f300-119">使用 hello [Azure AD 應用程式 Proxy 連接器連接埠測試工具](https://aadap-portcheck.connectorporttest.msappproxy.net/)tooverify 連接器可達到 hello 應用程式 Proxy 服務。</span><span class="sxs-lookup"><span data-stu-id="2f300-119">Use hello [Azure AD Application Proxy Connector Ports Test Tool](https://aadap-portcheck.connectorporttest.msappproxy.net/) tooverify that your connector can reach hello Application Proxy service.</span></span> <span data-ttu-id="2f300-120">最少，請確定 hello 美國中部地區和 hello 區域最接近 tooyou 具有所有綠色的核取記號。</span><span class="sxs-lookup"><span data-stu-id="2f300-120">At a minimum, make sure that hello Central US region and hello region closest tooyou have all green checkmarks.</span></span> <span data-ttu-id="2f300-121">除此之外，綠色勾選記號越多代表恢復能力越佳。</span><span class="sxs-lookup"><span data-stu-id="2f300-121">Beyond that, more green checkmarks means greater resiliency.</span></span> 

<span data-ttu-id="2f300-122">如果登錄失敗 hello 連接器精靈安裝期間，有兩種方式 tooview hello hello 失敗原因。</span><span class="sxs-lookup"><span data-stu-id="2f300-122">If registration fails during hello Connector wizard installation, there are two ways tooview hello reason for hello failure.</span></span> <span data-ttu-id="2f300-123">請查看下 hello 事件記錄檔**應用程式和服務 Logs\Microsoft\AadApplicationProxy\Connector\Admin**，或執行的 hello 下列 Windows PowerShell 命令：</span><span class="sxs-lookup"><span data-stu-id="2f300-123">Either look in hello event log under **Applications and Services Logs\Microsoft\AadApplicationProxy\Connector\Admin**, or run hello following Windows PowerShell command:</span></span>

    Get-EventLog application –source “Microsoft AAD Application Proxy Connector” –EntryType “Error” –Newest 1

<span data-ttu-id="2f300-124">一旦您找到 hello Connector 錯誤 hello 事件記錄檔中的，使用此表格的常見錯誤 tooresolve hello 問題：</span><span class="sxs-lookup"><span data-stu-id="2f300-124">Once you find hello Connector error from hello event log, use this table of common errors tooresolve hello problem:</span></span>

| <span data-ttu-id="2f300-125">錯誤</span><span class="sxs-lookup"><span data-stu-id="2f300-125">Error</span></span> | <span data-ttu-id="2f300-126">建議的步驟</span><span class="sxs-lookup"><span data-stu-id="2f300-126">Recommended steps</span></span> |
| ----- | ----------------- |
| <span data-ttu-id="2f300-127">連接器註冊失敗： 請確定您啟用應用程式 Proxy hello Azure 管理入口網站中，而且您輸入您的 Active Directory 使用者名稱和密碼正確。</span><span class="sxs-lookup"><span data-stu-id="2f300-127">Connector registration failed: Make sure you enabled Application Proxy in hello Azure Management Portal and that you entered your Active Directory user name and password correctly.</span></span> <span data-ttu-id="2f300-128">錯誤︰「發生一或多個錯誤。」</span><span class="sxs-lookup"><span data-stu-id="2f300-128">Error: 'One or more errors occurred.'</span></span> | <span data-ttu-id="2f300-129">如果您關閉 hello 註冊視窗而不用登入 tooAzure AD，請再次執行 hello 連接器精靈，並註冊 hello 連接器。</span><span class="sxs-lookup"><span data-stu-id="2f300-129">If you closed hello registration window without signing in tooAzure AD, run hello Connector wizard again and register hello Connector.</span></span> <br><br> <span data-ttu-id="2f300-130">如果 hello 註冊視窗隨即開啟，並立即關閉但不允許您 toolog 中的，您可能會收到這個錯誤。</span><span class="sxs-lookup"><span data-stu-id="2f300-130">If hello registration window opens and then immediately closes without allowing you toolog in, you will probably get this error.</span></span> <span data-ttu-id="2f300-131">您的系統有網路錯誤時，就會發生此錯誤。</span><span class="sxs-lookup"><span data-stu-id="2f300-131">This error occurs when there is a networking error on your system.</span></span> <span data-ttu-id="2f300-132">請確定它是從瀏覽器 tooa 公用網站可能 tooconnect 和 hello 通訊埠已開啟中所指定[應用程式 Proxy 必要條件](active-directory-application-proxy-enable.md)。</span><span class="sxs-lookup"><span data-stu-id="2f300-132">Make sure that it is possible tooconnect from a browser tooa public website and that hello ports are open as specified in [Application Proxy prerequisites](active-directory-application-proxy-enable.md).</span></span> |
| <span data-ttu-id="2f300-133">清除錯誤 hello 註冊視窗中顯示。</span><span class="sxs-lookup"><span data-stu-id="2f300-133">Clear error is presented in hello registration window.</span></span> <span data-ttu-id="2f300-134">無法繼續</span><span class="sxs-lookup"><span data-stu-id="2f300-134">Cannot proceed</span></span> | <span data-ttu-id="2f300-135">如果您看到此錯誤，然後 hello 視窗關閉時，您可以輸入 hello 錯誤的使用者名稱或密碼。</span><span class="sxs-lookup"><span data-stu-id="2f300-135">If you see this error and then hello window closes, you entered hello wrong username or password.</span></span> <span data-ttu-id="2f300-136">請再試一次。</span><span class="sxs-lookup"><span data-stu-id="2f300-136">Try again.</span></span> |
| <span data-ttu-id="2f300-137">連接器註冊失敗： 請確定您啟用應用程式 Proxy hello Azure 管理入口網站中，而且您輸入您的 Active Directory 使用者名稱和密碼正確。</span><span class="sxs-lookup"><span data-stu-id="2f300-137">Connector registration failed: Make sure you enabled Application Proxy in hello Azure Management Portal and that you entered your Active Directory user name and password correctly.</span></span> <span data-ttu-id="2f300-138">錯誤: ' AADSTS50059: hello 要求中找到沒有租用戶識別資訊，或隱含任何所提供的認證和服務以進行搜尋失敗主體的 URI。</span><span class="sxs-lookup"><span data-stu-id="2f300-138">Error: 'AADSTS50059: No tenant-identifying information found in either hello request or implied by any provided credentials and search by service principal URI has failed.</span></span> | <span data-ttu-id="2f300-139">您嘗試 toosign 中使用 Microsoft 帳戶與非網域屬於 hello 目錄 hello 組織識別碼嘗試 tooaccess。</span><span class="sxs-lookup"><span data-stu-id="2f300-139">You are trying toosign in using a Microsoft Account and not a domain that is part of hello organization ID of hello directory you are trying tooaccess.</span></span> <span data-ttu-id="2f300-140">請確定該 hello 管理員屬於 hello 相同的網域名稱為 hello 租用戶網域，例如，如果 hello Azure AD 網域為 contoso.com，hello admin 應該是admin@contoso.com。</span><span class="sxs-lookup"><span data-stu-id="2f300-140">Make sure that hello admin is part of hello same domain name as hello tenant domain, for example, if hello Azure AD domain is contoso.com, hello admin should be admin@contoso.com.</span></span> |
| <span data-ttu-id="2f300-141">無法 tooretrieve hello 目前的執行原則執行 PowerShell 指令碼。</span><span class="sxs-lookup"><span data-stu-id="2f300-141">Failed tooretrieve hello current execution policy for running PowerShell scripts.</span></span> | <span data-ttu-id="2f300-142">如果 hello 連接器安裝失敗，請檢查 toomake 確定未停用 PowerShell 執行原則。</span><span class="sxs-lookup"><span data-stu-id="2f300-142">If hello Connector installation fails, check toomake sure that PowerShell execution policy is not disabled.</span></span> <br><br><span data-ttu-id="2f300-143">1.開啟 hello 群組原則編輯器。</span><span class="sxs-lookup"><span data-stu-id="2f300-143">1. Open hello Group Policy Editor.</span></span><br><span data-ttu-id="2f300-144">2.跳過**電腦設定** > **系統管理範本** > **Windows 元件** >  **Windows PowerShell**按兩下**Turn on Script Execution**。</span><span class="sxs-lookup"><span data-stu-id="2f300-144">2. Go too**Computer Configuration** > **Administrative Templates** > **Windows Components** > **Windows PowerShell** and double-click **Turn on Script Execution**.</span></span><br><span data-ttu-id="2f300-145">3.hello 執行原則可以設定 tooeither**未設定**或**啟用**。</span><span class="sxs-lookup"><span data-stu-id="2f300-145">3. hello execution policy can be set tooeither **Not Configured** or **Enabled**.</span></span> <span data-ttu-id="2f300-146">如果設定太**啟用**，請確定在 選項，hello 執行原則設定 tooeither**允許本機指令碼和遠端簽署指令碼**或太**允許所有指令碼**。</span><span class="sxs-lookup"><span data-stu-id="2f300-146">If set too**Enabled**, make sure that under Options, hello Execution Policy is set tooeither **Allow local scripts and remote signed scripts** or too**Allow all scripts**.</span></span> |
| <span data-ttu-id="2f300-147">連接器無法 toodownload hello 組態。</span><span class="sxs-lookup"><span data-stu-id="2f300-147">Connector failed toodownload hello configuration.</span></span> | <span data-ttu-id="2f300-148">hello 連接器的用戶端憑證，用來驗證，過期。</span><span class="sxs-lookup"><span data-stu-id="2f300-148">hello Connector’s client certificate, which is used for authentication, expired.</span></span> <span data-ttu-id="2f300-149">如果您擁有的 hello 連接器安裝在 proxy 背景時，這也可能發生。</span><span class="sxs-lookup"><span data-stu-id="2f300-149">This may also occur if you have hello Connector installed behind a proxy.</span></span> <span data-ttu-id="2f300-150">在此情況下，hello Connector 無法存取網際網路 hello 而且不會無法 tooprovide 應用程式 tooremote 使用者。</span><span class="sxs-lookup"><span data-stu-id="2f300-150">In this case, hello Connector cannot access hello Internet and will not be able tooprovide applications tooremote users.</span></span> <span data-ttu-id="2f300-151">更新信任手動使用 hello`Register-AppProxyConnector`中 Windows PowerShell cmdlet。</span><span class="sxs-lookup"><span data-stu-id="2f300-151">Renew trust manually using hello `Register-AppProxyConnector` cmdlet in Windows PowerShell.</span></span> <span data-ttu-id="2f300-152">如果您的連接器位於 proxy 後方，則必要 toogrant 網際網路存取 toohello 連接器帳戶 「 網路服務 」 和 「 本機系統 」。</span><span class="sxs-lookup"><span data-stu-id="2f300-152">If your Connector is behind a proxy, it is necessary toogrant Internet access toohello Connector accounts “network services” and “local system.”</span></span> <span data-ttu-id="2f300-153">這可藉由授與它們存取 toohello Proxy 或藉由設定這些 toobypass hello proxy。</span><span class="sxs-lookup"><span data-stu-id="2f300-153">This can be accomplished either by granting them access toohello Proxy or by setting them toobypass hello proxy.</span></span> |
| <span data-ttu-id="2f300-154">連接器註冊失敗： 請確定您是全域管理員的您 Active Directory tooregister hello 連接器。</span><span class="sxs-lookup"><span data-stu-id="2f300-154">Connector registration failed: Make sure you are a Global Administrator of your Active Directory tooregister hello Connector.</span></span> <span data-ttu-id="2f300-155">錯誤: ' hello 註冊要求遭到拒絕。 」</span><span class="sxs-lookup"><span data-stu-id="2f300-155">Error: 'hello registration request was denied.'</span></span> | <span data-ttu-id="2f300-156">您正嘗試在與 toolog hello 別名不是此網域的系統管理員。</span><span class="sxs-lookup"><span data-stu-id="2f300-156">hello alias you're trying toolog in with isn't an admin on this domain.</span></span> <span data-ttu-id="2f300-157">您的連接器一律會安裝 hello 目錄擁有 hello 使用者的網域。</span><span class="sxs-lookup"><span data-stu-id="2f300-157">Your Connector is always installed for hello directory that owns hello user’s domain.</span></span> <span data-ttu-id="2f300-158">請確定您嘗試在與 toosign hello 系統管理員帳戶具有通用權限 toohello Azure AD 租用戶。</span><span class="sxs-lookup"><span data-stu-id="2f300-158">Make sure that hello admin account you are trying toosign in with has global permissions toohello Azure AD tenant.</span></span> |

## <a name="kerberos-errors"></a><span data-ttu-id="2f300-159">Kerberos 錯誤</span><span class="sxs-lookup"><span data-stu-id="2f300-159">Kerberos errors</span></span>

<span data-ttu-id="2f300-160">下表涵蓋常見的 hello 來自 Kerberos 安裝和組態，而且有建議的解決方式的錯誤。</span><span class="sxs-lookup"><span data-stu-id="2f300-160">This table covers hello more common errors that come from Kerberos setup and configuration, and includes suggestions for resolution.</span></span>

| <span data-ttu-id="2f300-161">錯誤</span><span class="sxs-lookup"><span data-stu-id="2f300-161">Error</span></span> | <span data-ttu-id="2f300-162">建議的步驟</span><span class="sxs-lookup"><span data-stu-id="2f300-162">Recommended steps</span></span> |
| ----- | ----------------- |
| <span data-ttu-id="2f300-163">無法 tooretrieve hello 目前的執行原則執行 PowerShell 指令碼。</span><span class="sxs-lookup"><span data-stu-id="2f300-163">Failed tooretrieve hello current execution policy for running PowerShell scripts.</span></span> | <span data-ttu-id="2f300-164">如果 hello 連接器安裝失敗，請檢查 toomake 確定未停用 PowerShell 執行原則。</span><span class="sxs-lookup"><span data-stu-id="2f300-164">If hello Connector installation fails, check toomake sure that PowerShell execution policy is not disabled.</span></span><br><br><span data-ttu-id="2f300-165">1.開啟 hello 群組原則編輯器。</span><span class="sxs-lookup"><span data-stu-id="2f300-165">1. Open hello Group Policy Editor.</span></span><br><span data-ttu-id="2f300-166">2.跳過**電腦設定** > **系統管理範本** > **Windows 元件** >  **Windows PowerShell**按兩下**Turn on Script Execution**。</span><span class="sxs-lookup"><span data-stu-id="2f300-166">2. Go too**Computer Configuration** > **Administrative Templates** > **Windows Components** > **Windows PowerShell** and double-click **Turn on Script Execution**.</span></span><br><span data-ttu-id="2f300-167">3.hello 執行原則可以設定 tooeither**未設定**或**啟用**。</span><span class="sxs-lookup"><span data-stu-id="2f300-167">3. hello execution policy can be set tooeither **Not Configured** or **Enabled**.</span></span> <span data-ttu-id="2f300-168">如果設定太**啟用**，請確定在 選項，hello 執行原則設定 tooeither**允許本機指令碼和遠端簽署指令碼**或太**允許所有指令碼**。</span><span class="sxs-lookup"><span data-stu-id="2f300-168">If set too**Enabled**, make sure that under Options, hello Execution Policy is set tooeither **Allow local scripts and remote signed scripts** or too**Allow all scripts**.</span></span> |
| <span data-ttu-id="2f300-169">12008-azure AD 超過 hello 允許 Kerberos 驗證的次數上限 toohello 後端伺服器。</span><span class="sxs-lookup"><span data-stu-id="2f300-169">12008 - Azure AD exceeded hello maximum number of permitted Kerberos authentication attempts toohello backend server.</span></span> | <span data-ttu-id="2f300-170">此錯誤可能表示 Azure AD 之間設定不正確，hello 後端應用程式伺服器或兩台電腦上的日期和時間設定問題。</span><span class="sxs-lookup"><span data-stu-id="2f300-170">This error may indicate incorrect configuration between Azure AD and hello backend application server, or a problem in time and date configuration on both machines.</span></span> <span data-ttu-id="2f300-171">hello 後端伺服器拒絕 Azure AD 所建立的 hello Kerberos 票證。</span><span class="sxs-lookup"><span data-stu-id="2f300-171">hello backend server declined hello Kerberos ticket created by Azure AD.</span></span> <span data-ttu-id="2f300-172">驗證 Azure AD 和 hello 後端應用程式伺服器設定正確。</span><span class="sxs-lookup"><span data-stu-id="2f300-172">Verify that Azure AD and hello backend application server are configured correctly.</span></span> <span data-ttu-id="2f300-173">請確定 hello 日期和時間設定在 hello Azure AD 和 hello 後端應用程式伺服器會同步處理。</span><span class="sxs-lookup"><span data-stu-id="2f300-173">Make sure that hello time and date configuration on hello Azure AD and hello backend application server are synchronized.</span></span> |
| <span data-ttu-id="2f300-174">13016-azure AD 無法擷取 Kerberos 票證代表 hello 使用者，因為沒有任何 UPN 的 hello edge 權杖或 hello 存取 cookie 中。</span><span class="sxs-lookup"><span data-stu-id="2f300-174">13016 - Azure AD cannot retrieve a Kerberos ticket on behalf of hello user because there is no UPN in hello edge token or in hello access cookie.</span></span> | <span data-ttu-id="2f300-175">沒有 hello STS 組態有問題。</span><span class="sxs-lookup"><span data-stu-id="2f300-175">There is a problem with hello STS configuration.</span></span> <span data-ttu-id="2f300-176">在 hello STS 修正的 hello UPN 宣告組態。</span><span class="sxs-lookup"><span data-stu-id="2f300-176">Fix hello UPN claim configuration in hello STS.</span></span> |
| <span data-ttu-id="2f300-177">13019-azure AD 無法擷取 Kerberos 票證代表 hello 使用者，因為發生下列一般 API 錯誤的 hello。</span><span class="sxs-lookup"><span data-stu-id="2f300-177">13019 - Azure AD cannot retrieve a Kerberos ticket on behalf of hello user because of hello following general API error.</span></span> | <span data-ttu-id="2f300-178">這個事件可能表示 Azure AD 之間設定不正確和 hello 網域控制站伺服器或兩台電腦上的日期和時間設定問題。</span><span class="sxs-lookup"><span data-stu-id="2f300-178">This event may indicate incorrect configuration between Azure AD and hello domain controller server, or a problem in time and date configuration on both machines.</span></span> <span data-ttu-id="2f300-179">hello 網域控制站拒絕 Azure AD 所建立的 hello Kerberos 票證。</span><span class="sxs-lookup"><span data-stu-id="2f300-179">hello domain controller declined hello Kerberos ticket created by Azure AD.</span></span> <span data-ttu-id="2f300-180">驗證 Azure AD 和 hello 後端應用程式伺服器設定正確，尤其是 hello SPN 組態。</span><span class="sxs-lookup"><span data-stu-id="2f300-180">Verify that Azure AD and hello backend application server are configured correctly, especially hello SPN configuration.</span></span> <span data-ttu-id="2f300-181">請確定 hello Azure AD 網域 toohello 相同的網域為 hello hello 網域控制站的網域控制站 tooensure 建立與 Azure AD 的信任關係。</span><span class="sxs-lookup"><span data-stu-id="2f300-181">Make sure hello Azure AD is domain joined toohello same domain as hello domain controller tooensure that hello domain controller establishes trust with Azure AD.</span></span> <span data-ttu-id="2f300-182">請確定 hello 日期和時間設定在 hello Azure AD 和 hello 網域控制站會同步處理。</span><span class="sxs-lookup"><span data-stu-id="2f300-182">Make sure that hello time and date configuration on hello Azure AD and hello domain controller are synchronized.</span></span> |
| <span data-ttu-id="2f300-183">13020-azure AD 無法擷取 Kerberos 票證代表 hello 使用者，因為並未定義 hello 後端伺服器 SPN。</span><span class="sxs-lookup"><span data-stu-id="2f300-183">13020 - Azure AD cannot retrieve a Kerberos ticket on behalf of hello user because hello backend server SPN is not defined.</span></span> | <span data-ttu-id="2f300-184">這個事件可能表示 Azure AD 之間設定不正確和 hello 網域控制站伺服器或兩台電腦上的日期和時間設定問題。</span><span class="sxs-lookup"><span data-stu-id="2f300-184">This event may indicate incorrect configuration between Azure AD and hello domain controller server, or a problem in time and date configuration on both machines.</span></span> <span data-ttu-id="2f300-185">hello 網域控制站拒絕 Azure AD 所建立的 hello Kerberos 票證。</span><span class="sxs-lookup"><span data-stu-id="2f300-185">hello domain controller declined hello Kerberos ticket created by Azure AD.</span></span> <span data-ttu-id="2f300-186">驗證 Azure AD 和 hello 後端應用程式伺服器設定正確，尤其是 hello SPN 組態。</span><span class="sxs-lookup"><span data-stu-id="2f300-186">Verify that Azure AD and hello backend application server are configured correctly, especially hello SPN configuration.</span></span> <span data-ttu-id="2f300-187">請確定 hello Azure AD 網域 toohello 相同的網域為 hello hello 網域控制站的網域控制站 tooensure 建立與 Azure AD 的信任關係。</span><span class="sxs-lookup"><span data-stu-id="2f300-187">Make sure hello Azure AD is domain joined toohello same domain as hello domain controller tooensure that hello domain controller establishes trust with Azure AD.</span></span> <span data-ttu-id="2f300-188">請確定 hello 日期和時間設定在 hello Azure AD 和 hello 網域控制站會同步處理。</span><span class="sxs-lookup"><span data-stu-id="2f300-188">Make sure that hello time and date configuration on hello Azure AD and hello domain controller are synchronized.</span></span> |
| <span data-ttu-id="2f300-189">13022-azure AD 無法驗證 hello 使用者，因為 hello 後端伺服器會回應與 HTTP 401 錯誤 tooKerberos 驗證嘗試。</span><span class="sxs-lookup"><span data-stu-id="2f300-189">13022 - Azure AD cannot authenticate hello user because hello backend server responds tooKerberos authentication attempts with an HTTP 401 error.</span></span> | <span data-ttu-id="2f300-190">此事件可能表示 Azure AD 之間設定不正確，而且 hello 後端應用程式伺服器或兩台電腦上的日期和時間設定問題。</span><span class="sxs-lookup"><span data-stu-id="2f300-190">This event may indicate incorrect configuration between Azure AD and hello backend application server, or a problem in time and date configuration on both machines.</span></span> <span data-ttu-id="2f300-191">hello 後端伺服器拒絕 Azure AD 所建立的 hello Kerberos 票證。</span><span class="sxs-lookup"><span data-stu-id="2f300-191">hello backend server declined hello Kerberos ticket created by Azure AD.</span></span> <span data-ttu-id="2f300-192">驗證 Azure AD 和 hello 後端應用程式伺服器設定正確。</span><span class="sxs-lookup"><span data-stu-id="2f300-192">Verify that Azure AD and hello backend application server are configured correctly.</span></span> <span data-ttu-id="2f300-193">請確定 hello 日期和時間設定在 hello Azure AD 和 hello 後端應用程式伺服器會同步處理。</span><span class="sxs-lookup"><span data-stu-id="2f300-193">Make sure that hello time and date configuration on hello Azure AD and hello backend application server are synchronized.</span></span> |

## <a name="end-user-errors"></a><span data-ttu-id="2f300-194">使用者錯誤</span><span class="sxs-lookup"><span data-stu-id="2f300-194">End-user errors</span></span>

<span data-ttu-id="2f300-195">這份清單包含試 tooaccess hello 應用程式及失敗時，您的使用者可能會遇到的錯誤。</span><span class="sxs-lookup"><span data-stu-id="2f300-195">This list covers errors that your end users might encounter when they try tooaccess hello app and fail.</span></span> 

| <span data-ttu-id="2f300-196">錯誤</span><span class="sxs-lookup"><span data-stu-id="2f300-196">Error</span></span> | <span data-ttu-id="2f300-197">建議的步驟</span><span class="sxs-lookup"><span data-stu-id="2f300-197">Recommended steps</span></span> |
| ----- | ----------------- |
| <span data-ttu-id="2f300-198">hello 網站無法顯示 hello 頁面。</span><span class="sxs-lookup"><span data-stu-id="2f300-198">hello website cannot display hello page.</span></span> | <span data-ttu-id="2f300-199">如果 hello 應用程式是 IWA 應用程式，您發行的 tooaccess hello 應用程式時，使用者可能會收到這個錯誤。</span><span class="sxs-lookup"><span data-stu-id="2f300-199">Your user may get this error when trying tooaccess hello app you published if hello application is an IWA application.</span></span> <span data-ttu-id="2f300-200">hello 定義此應用程式可能不正確的 SPN。</span><span class="sxs-lookup"><span data-stu-id="2f300-200">hello defined SPN for this application may be incorrect.</span></span> <span data-ttu-id="2f300-201">對於 IWA 應用程式，請確定該 hello 為此應用程式設定的 SPN 正確。</span><span class="sxs-lookup"><span data-stu-id="2f300-201">For IWA apps, make sure that hello SPN configured for this application is correct.</span></span> |
| <span data-ttu-id="2f300-202">hello 網站無法顯示 hello 頁面。</span><span class="sxs-lookup"><span data-stu-id="2f300-202">hello website cannot display hello page.</span></span> | <span data-ttu-id="2f300-203">如果 hello 應用程式是 OWA 應用程式，您發行的 tooaccess hello 應用程式時，使用者可能會收到這個錯誤。</span><span class="sxs-lookup"><span data-stu-id="2f300-203">Your user may get this error when trying tooaccess hello app you published if hello application is an OWA application.</span></span> <span data-ttu-id="2f300-204">這可能被因 hello 下列其中一種：</span><span class="sxs-lookup"><span data-stu-id="2f300-204">This could be caused by one of hello following:</span></span><br><li><span data-ttu-id="2f300-205">hello 定義此應用程式不正確的 SPN。</span><span class="sxs-lookup"><span data-stu-id="2f300-205">hello defined SPN for this application is incorrect.</span></span> <span data-ttu-id="2f300-206">請確定該 hello 為此應用程式設定的 SPN 正確。</span><span class="sxs-lookup"><span data-stu-id="2f300-206">Make sure that hello SPN configured for this application is correct.</span></span></li><li><span data-ttu-id="2f300-207">hello，使用者嘗試 tooaccess hello 應用程式使用 Microsoft 帳戶，而不是 hello 中，適當的公司帳戶 toosign 或 hello 使用者是 guest 使用者。</span><span class="sxs-lookup"><span data-stu-id="2f300-207">hello user who tried tooaccess hello application is using a Microsoft account rather than hello proper corporate account toosign in, or hello user is a guest user.</span></span> <span data-ttu-id="2f300-208">請確定 hello 使用者登入時使用公司帳戶相符項目 hello 網域的 hello 發行應用程式。</span><span class="sxs-lookup"><span data-stu-id="2f300-208">Make sure hello user signs in using their corporate account that matches hello domain of hello published application.</span></span> <span data-ttu-id="2f300-209">Microsoft 帳戶使用者和來賓無法存取 IWA 應用程式。</span><span class="sxs-lookup"><span data-stu-id="2f300-209">Microsoft Account users and guest cannot access IWA applications.</span></span></li><li><span data-ttu-id="2f300-210">此應用程式在 hello 由內部部署端未正確定義 hello 使用者嘗試 tooaccess hello 應用程式。</span><span class="sxs-lookup"><span data-stu-id="2f300-210">hello user who tried tooaccess hello application is not properly defined for this application on hello on-prem side.</span></span> <span data-ttu-id="2f300-211">請確定此使用者擁有 hello 適當的權限，為這個 hello 由內部部署電腦上的後端應用程式所定義。</span><span class="sxs-lookup"><span data-stu-id="2f300-211">Make sure that this user has hello proper permissions as defined for this backend application on hello on-prem machine.</span></span> |
| <span data-ttu-id="2f300-212">無法存取此公司應用程式。</span><span class="sxs-lookup"><span data-stu-id="2f300-212">This corporate app can’t be accessed.</span></span> <span data-ttu-id="2f300-213">您為未獲授權的 tooaccess 此應用程式。</span><span class="sxs-lookup"><span data-stu-id="2f300-213">You are not authorized tooaccess this application.</span></span> <span data-ttu-id="2f300-214">授權失敗。</span><span class="sxs-lookup"><span data-stu-id="2f300-214">Authorization failed.</span></span> <span data-ttu-id="2f300-215">請確定 tooassign hello 使用者具有存取 toothis 應用程式。</span><span class="sxs-lookup"><span data-stu-id="2f300-215">Make sure tooassign hello user with access toothis application.</span></span> | <span data-ttu-id="2f300-216">嘗試您發行，則他們使用 Microsoft 帳戶而不是在其公司帳戶 toosign tooaccess hello 應用程式時，您的使用者可能會收到這個錯誤。</span><span class="sxs-lookup"><span data-stu-id="2f300-216">Your users may get this error when trying tooaccess hello app you published if they use Microsoft accounts instead of their corporate account toosign in.</span></span> <span data-ttu-id="2f300-217">來賓使用者也可能會發生此錯誤。</span><span class="sxs-lookup"><span data-stu-id="2f300-217">Guest users may also get this error.</span></span> <span data-ttu-id="2f300-218">Microsoft 帳戶使用者和來賓無法存取 IWA 應用程式。</span><span class="sxs-lookup"><span data-stu-id="2f300-218">Microsoft Account users and guests cannot access IWA applications.</span></span> <span data-ttu-id="2f300-219">請確定 hello 使用者登入時使用公司帳戶相符項目 hello 網域的 hello 發行應用程式。</span><span class="sxs-lookup"><span data-stu-id="2f300-219">Make sure hello user signs in using their corporate account that matches hello domain of hello published application.</span></span><br><br><span data-ttu-id="2f300-220">您可能未指派 hello 這個應用程式的使用者。</span><span class="sxs-lookup"><span data-stu-id="2f300-220">You may not have assigned hello user for this application.</span></span> <span data-ttu-id="2f300-221">移 toohello**應用程式** 索引標籤，然後在**使用者和群組**，指派給此使用者或使用者群組 toothis 應用程式。</span><span class="sxs-lookup"><span data-stu-id="2f300-221">Go toohello **Application** tab, and under **Users and Groups**, assign this user or user group toothis application.</span></span> |
| <span data-ttu-id="2f300-222">無法立即存取此公司應用程式。</span><span class="sxs-lookup"><span data-stu-id="2f300-222">This corporate app can’t be accessed right now.</span></span> <span data-ttu-id="2f300-223">請稍後再試一次...hello 連接器已逾時。</span><span class="sxs-lookup"><span data-stu-id="2f300-223">Please try again later…hello connector timed out.</span></span> | <span data-ttu-id="2f300-224">嘗試 tooaccess hello 應用程式，您發行，則為此應用程式在 hello 由內部部署端未正確定義時，您的使用者可能會收到這個錯誤。</span><span class="sxs-lookup"><span data-stu-id="2f300-224">Your users may get this error when trying tooaccess hello app you published if they are not properly defined for this application on hello on-prem side.</span></span> <span data-ttu-id="2f300-225">請確定您的使用者具有這個 hello 由內部部署電腦上的後端應用程式定義 hello 適當的權限。</span><span class="sxs-lookup"><span data-stu-id="2f300-225">Make sure that your users have hello proper permissions as defined for this backend application on hello on-prem machine.</span></span> |
| <span data-ttu-id="2f300-226">無法存取此公司應用程式。</span><span class="sxs-lookup"><span data-stu-id="2f300-226">This corporate app can’t be accessed.</span></span> <span data-ttu-id="2f300-227">您為未獲授權的 tooaccess 此應用程式。</span><span class="sxs-lookup"><span data-stu-id="2f300-227">You are not authorized tooaccess this application.</span></span> <span data-ttu-id="2f300-228">授權失敗。</span><span class="sxs-lookup"><span data-stu-id="2f300-228">Authorization failed.</span></span> <span data-ttu-id="2f300-229">請確定該 hello 使用者具有 Azure Active Directory Premium 或 Basic 授權。</span><span class="sxs-lookup"><span data-stu-id="2f300-229">Make sure that hello user has a license for Azure Active Directory Premium or Basic.</span></span> | <span data-ttu-id="2f300-230">嘗試 tooaccess hello 應用程式，如果未明確指派給這些 Premium/Basic 授權 hello 訂閱者的系統管理員，您發行時，您的使用者可能會收到這個錯誤。</span><span class="sxs-lookup"><span data-stu-id="2f300-230">Your users may get this error when trying tooaccess hello app you published if they weren't explicitly assigned with a Premium/Basic license by hello subscriber’s administrator.</span></span> <span data-ttu-id="2f300-231">移 toohello 訂閱者的 Active Directory**授權**索引標籤，請確定此使用者或使用者群組已指派 Premium 或 Basic 授權。</span><span class="sxs-lookup"><span data-stu-id="2f300-231">Go toohello subscriber’s Active Directory **Licenses** tab and make sure that this user or user group is assigned a Premium or Basic license.</span></span> |

## <a name="my-error-wasnt-listed-here"></a><span data-ttu-id="2f300-232">此處未列出我的錯誤</span><span class="sxs-lookup"><span data-stu-id="2f300-232">My error wasn't listed here</span></span>

<span data-ttu-id="2f300-233">如果您遇到錯誤或是此疑難排解指南中未列出的 Azure AD Application Proxy 問題，我們希望 toohear 資訊，請參閱。</span><span class="sxs-lookup"><span data-stu-id="2f300-233">If you encounter an error or problem with Azure AD Application Proxy that isn't listed in this troubleshooting guide, we'd like toohear about it.</span></span> <span data-ttu-id="2f300-234">傳送電子郵件 tooour[意見反應小組](mailto:aadapfeedback@microsoft.com)與 hello hello 您遇到的錯誤詳細資料。</span><span class="sxs-lookup"><span data-stu-id="2f300-234">Send an email tooour [feedback team](mailto:aadapfeedback@microsoft.com) with hello details of hello error you encountered.</span></span>

## <a name="see-also"></a><span data-ttu-id="2f300-235">另請參閱</span><span class="sxs-lookup"><span data-stu-id="2f300-235">See also</span></span>
* [<span data-ttu-id="2f300-236">啟用 Azure Active Directory 的應用程式 Proxy</span><span class="sxs-lookup"><span data-stu-id="2f300-236">Enable Application Proxy for Azure Active Directory</span></span>](active-directory-application-proxy-enable.md)
* [<span data-ttu-id="2f300-237">使用應用程式 Proxy 發行應用程式</span><span class="sxs-lookup"><span data-stu-id="2f300-237">Publish applications with Application Proxy</span></span>](active-directory-application-proxy-publish.md)
* [<span data-ttu-id="2f300-238">啟用單一登入</span><span class="sxs-lookup"><span data-stu-id="2f300-238">Enable single sign-on</span></span>](active-directory-application-proxy-sso-using-kcd.md)
* [<span data-ttu-id="2f300-239">啟用條件式存取</span><span class="sxs-lookup"><span data-stu-id="2f300-239">Enable conditional access</span></span>](active-directory-application-proxy-conditional-access.md)


<!--Image references-->
[1]: ./media/active-directory-application-proxy-troubleshoot/connectorproperties.png
[2]: ./media/active-directory-application-proxy-troubleshoot/sessionlog.png
