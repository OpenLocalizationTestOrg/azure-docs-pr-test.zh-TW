---
title: "由於在 Azure 搜尋 aaaModeling |Microsoft 文件"
description: "了解使用「Azure 搜尋服務」時常見的多租用戶 SaaS 應用程式設計模式。"
services: search
manager: jhubbard
author: ashmaka
documentationcenter: 
ms.assetid: 72e9696a-553b-47dc-9e05-a82db0ebf094
ms.service: search
ms.devlang: NA
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 10/26/2016
ms.author: ashmaka
ms.openlocfilehash: dd46cda772d32566b9aaa18d407f12fdf178bd43
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="design-patterns-for-multitenant-saas-applications-and-azure-search"></a><span data-ttu-id="247b9-103">多租用戶 SaaS 應用程式與 Azure 搜尋服務的設計模式</span><span class="sxs-lookup"><span data-stu-id="247b9-103">Design patterns for multitenant SaaS applications and Azure Search</span></span>
<span data-ttu-id="247b9-104">多租用戶應用程式是一個範本提供 hello 相同服務和功能，tooany 數目的租用戶將無法檢視或共用的任何其他租用戶的 hello 資料。</span><span class="sxs-lookup"><span data-stu-id="247b9-104">A multitenant application is one that provides hello same services and capabilities tooany number of tenants who cannot see or share hello data of any other tenant.</span></span> <span data-ttu-id="247b9-105">本文件將討論以「Azure 搜尋服務」建置的多租用戶應用程式的租用戶隔離策略。</span><span class="sxs-lookup"><span data-stu-id="247b9-105">This document discusses tenant isolation strategies for multitenant applications built with Azure Search.</span></span>

## <a name="azure-search-concepts"></a><span data-ttu-id="247b9-106">Azure 搜尋服務概念</span><span class="sxs-lookup"><span data-stu-id="247b9-106">Azure Search concepts</span></span>
<span data-ttu-id="247b9-107">為搜尋做為服務方案，Azure 搜尋可讓開發人員 tooadd 豐富的搜尋體驗 tooapplications 而不需要管理任何基礎結構，或成為中搜尋的專家。</span><span class="sxs-lookup"><span data-stu-id="247b9-107">As a search-as-a-service solution, Azure Search allows developers tooadd rich search experiences tooapplications without managing any infrastructure or becoming an expert in search.</span></span> <span data-ttu-id="247b9-108">資料上傳 toohello 服務，然後儲存在 hello 雲端。</span><span class="sxs-lookup"><span data-stu-id="247b9-108">Data is uploaded toohello service and then stored in hello cloud.</span></span> <span data-ttu-id="247b9-109">使用簡單要求 toohello Azure 搜尋 API，hello 資料可以然後修改並搜尋。</span><span class="sxs-lookup"><span data-stu-id="247b9-109">Using simple requests toohello Azure Search API, hello data can then be modified and searched.</span></span> <span data-ttu-id="247b9-110">Hello 服務的概觀位於[本文](http://aka.ms/whatisazsearch)。</span><span class="sxs-lookup"><span data-stu-id="247b9-110">An overview of hello service can be found in [this article](http://aka.ms/whatisazsearch).</span></span> <span data-ttu-id="247b9-111">之前討論的設計模式時，它是重要的 toounderstand 一些概念，在 Azure 搜尋。</span><span class="sxs-lookup"><span data-stu-id="247b9-111">Before discussing design patterns, it is important toounderstand some concepts in Azure Search.</span></span>

### <a name="search-services-indexes-fields-and-documents"></a><span data-ttu-id="247b9-112">搜尋服務、索引、欄位及文件</span><span class="sxs-lookup"><span data-stu-id="247b9-112">Search services, indexes, fields, and documents</span></span>
<span data-ttu-id="247b9-113">當使用 Azure Search，其中一個訂閱 tooa*搜尋服務*。</span><span class="sxs-lookup"><span data-stu-id="247b9-113">When using Azure Search, one subscribes tooa *search service*.</span></span> <span data-ttu-id="247b9-114">資料上傳的 tooAzure 搜尋，它會儲存在*索引*hello 搜尋服務中。</span><span class="sxs-lookup"><span data-stu-id="247b9-114">As data is uploaded tooAzure Search, it is stored in an *index* within hello search service.</span></span> <span data-ttu-id="247b9-115">單一服務內可能會有好幾個索引。</span><span class="sxs-lookup"><span data-stu-id="247b9-115">There can be a number of indexes within a single service.</span></span> <span data-ttu-id="247b9-116">toouse hello 熟悉的概念的資料庫，hello 搜尋服務可以比擬 tooa 資料庫時在服務中的 hello 索引可以比擬 tootables 資料庫內。</span><span class="sxs-lookup"><span data-stu-id="247b9-116">toouse hello familiar concepts of databases, hello search service can be likened tooa database while hello indexes within a service can be likened tootables within a database.</span></span>

<span data-ttu-id="247b9-117">搜尋服務內的每個索引都有自己的結構描述，此結構描述是由一些可自訂的「欄位」 所定義。</span><span class="sxs-lookup"><span data-stu-id="247b9-117">Each index within a search service has its own schema, which is defined by a number of customizable *fields*.</span></span> <span data-ttu-id="247b9-118">資料在個別的 hello 表單中加入 tooan Azure 搜尋索引*文件*。</span><span class="sxs-lookup"><span data-stu-id="247b9-118">Data is added tooan Azure Search index in hello form of individual *documents*.</span></span> <span data-ttu-id="247b9-119">每份文件必須上傳的 tooa 特定的索引，而且必須符合該索引的結構描述。</span><span class="sxs-lookup"><span data-stu-id="247b9-119">Each document must be uploaded tooa particular index and must fit that index's schema.</span></span> <span data-ttu-id="247b9-120">搜尋時使用 Azure 搜尋資料，來發出 hello 全文檢索搜尋查詢，針對特定的索引。</span><span class="sxs-lookup"><span data-stu-id="247b9-120">When searching data using Azure Search, hello full-text search queries are issued against a particular index.</span></span>  <span data-ttu-id="247b9-121">toocompare 資料庫的這些概念 toothose，欄位可以比擬 toocolumns 資料表中的，而且文件可以比擬 toorows。</span><span class="sxs-lookup"><span data-stu-id="247b9-121">toocompare these concepts toothose of a database, fields can be likened toocolumns in a table and documents can be likened toorows.</span></span>

### <a name="scalability"></a><span data-ttu-id="247b9-122">延展性</span><span class="sxs-lookup"><span data-stu-id="247b9-122">Scalability</span></span>
<span data-ttu-id="247b9-123">Azure 搜尋中的任何服務 hello 標準[定價層](https://azure.microsoft.com/pricing/details/search/)可以調整以兩個維度： 儲存體和可用性。</span><span class="sxs-lookup"><span data-stu-id="247b9-123">Any Azure Search service in hello Standard [pricing tier](https://azure.microsoft.com/pricing/details/search/) can scale in two dimensions: storage and availability.</span></span>

* <span data-ttu-id="247b9-124">*資料分割*可以加入 tooincrease hello 儲存的搜尋服務。</span><span class="sxs-lookup"><span data-stu-id="247b9-124">*Partitions* can be added tooincrease hello storage of a search service.</span></span>
* <span data-ttu-id="247b9-125">*複本*可以加入 tooa 服務 tooincrease hello 輸送量搜尋服務可以處理的要求。</span><span class="sxs-lookup"><span data-stu-id="247b9-125">*Replicas* can be added tooa service tooincrease hello throughput of requests that a search service can handle.</span></span>

<span data-ttu-id="247b9-126">加入和移除資料分割和複本，在將允許 hello 容量 hello 搜尋服務 toogrow hello 需要編寫小量的資料和流量 hello 應用程式需求。</span><span class="sxs-lookup"><span data-stu-id="247b9-126">Adding and removing partitions and replicas at will allow hello capacity of hello search service toogrow with hello amount of data and traffic hello application demands.</span></span> <span data-ttu-id="247b9-127">中的順序搜尋服務 tooachieve 讀取[SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/)，它需要兩個複本。</span><span class="sxs-lookup"><span data-stu-id="247b9-127">In order for a search service tooachieve a read [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), it requires two replicas.</span></span> <span data-ttu-id="247b9-128">若要為服務 tooachieve 讀寫[SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/)，它需要三個複本。</span><span class="sxs-lookup"><span data-stu-id="247b9-128">In order for a service tooachieve a read-write [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), it requires three replicas.</span></span>

### <a name="service-and-index-limits-in-azure-search"></a><span data-ttu-id="247b9-129">Azure 搜尋服務中的服務和索引限制</span><span class="sxs-lookup"><span data-stu-id="247b9-129">Service and index limits in Azure Search</span></span>
<span data-ttu-id="247b9-130">有幾個不同[定價層](https://azure.microsoft.com/pricing/details/search/)在 Azure 搜尋中，每個 hello 層都有不同[限制和配額](search-limits-quotas-capacity.md)。</span><span class="sxs-lookup"><span data-stu-id="247b9-130">There are a few different [pricing tiers](https://azure.microsoft.com/pricing/details/search/) in Azure Search, each of hello tiers has different [limits and quotas](search-limits-quotas-capacity.md).</span></span> <span data-ttu-id="247b9-131">部分這些限制是在 hello 服務層級，有些在 hello 索引層級，而有些是在 hello 資料分割層級。</span><span class="sxs-lookup"><span data-stu-id="247b9-131">Some of these limits are at hello service-level, some are at hello index-level, and some are at hello partition-level.</span></span>

|  | <span data-ttu-id="247b9-132">基本</span><span class="sxs-lookup"><span data-stu-id="247b9-132">Basic</span></span> | <span data-ttu-id="247b9-133">Standard1</span><span class="sxs-lookup"><span data-stu-id="247b9-133">Standard1</span></span> | <span data-ttu-id="247b9-134">Standard2</span><span class="sxs-lookup"><span data-stu-id="247b9-134">Standard2</span></span> | <span data-ttu-id="247b9-135">Standard3</span><span class="sxs-lookup"><span data-stu-id="247b9-135">Standard3</span></span> | <span data-ttu-id="247b9-136">Standard3 HD</span><span class="sxs-lookup"><span data-stu-id="247b9-136">Standard3 HD</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="247b9-137">每項服務的複本數目上限</span><span class="sxs-lookup"><span data-stu-id="247b9-137">Maximum Replicas per Service</span></span> |<span data-ttu-id="247b9-138">3</span><span class="sxs-lookup"><span data-stu-id="247b9-138">3</span></span> |<span data-ttu-id="247b9-139">12</span><span class="sxs-lookup"><span data-stu-id="247b9-139">12</span></span> |<span data-ttu-id="247b9-140">12</span><span class="sxs-lookup"><span data-stu-id="247b9-140">12</span></span> |<span data-ttu-id="247b9-141">12</span><span class="sxs-lookup"><span data-stu-id="247b9-141">12</span></span> |<span data-ttu-id="247b9-142">12</span><span class="sxs-lookup"><span data-stu-id="247b9-142">12</span></span> |
| <span data-ttu-id="247b9-143">每項服務的資料分割數目上限</span><span class="sxs-lookup"><span data-stu-id="247b9-143">Maximum Partitions per Service</span></span> |<span data-ttu-id="247b9-144">1</span><span class="sxs-lookup"><span data-stu-id="247b9-144">1</span></span> |<span data-ttu-id="247b9-145">12</span><span class="sxs-lookup"><span data-stu-id="247b9-145">12</span></span> |<span data-ttu-id="247b9-146">12</span><span class="sxs-lookup"><span data-stu-id="247b9-146">12</span></span> |<span data-ttu-id="247b9-147">12</span><span class="sxs-lookup"><span data-stu-id="247b9-147">12</span></span> |<span data-ttu-id="247b9-148">1</span><span class="sxs-lookup"><span data-stu-id="247b9-148">1</span></span> |
| <span data-ttu-id="247b9-149">每項服務的搜尋單位數目上限 (複本數*資料分割數)</span><span class="sxs-lookup"><span data-stu-id="247b9-149">Maximum Search Units (Replicas*Partitions) per Service</span></span> |<span data-ttu-id="247b9-150">3</span><span class="sxs-lookup"><span data-stu-id="247b9-150">3</span></span> |<span data-ttu-id="247b9-151">36</span><span class="sxs-lookup"><span data-stu-id="247b9-151">36</span></span> |<span data-ttu-id="247b9-152">36</span><span class="sxs-lookup"><span data-stu-id="247b9-152">36</span></span> |<span data-ttu-id="247b9-153">36</span><span class="sxs-lookup"><span data-stu-id="247b9-153">36</span></span> |<span data-ttu-id="247b9-154">36 (最多 3 個資料分割)</span><span class="sxs-lookup"><span data-stu-id="247b9-154">36 (max 3 partitions)</span></span> |
| <span data-ttu-id="247b9-155">每項服務的文件數目上限</span><span class="sxs-lookup"><span data-stu-id="247b9-155">Maximum Documents per Service</span></span> |<span data-ttu-id="247b9-156">100 萬</span><span class="sxs-lookup"><span data-stu-id="247b9-156">1 million</span></span> |<span data-ttu-id="247b9-157">1 億 8000 萬</span><span class="sxs-lookup"><span data-stu-id="247b9-157">180 million</span></span> |<span data-ttu-id="247b9-158">7 億 2000 萬</span><span class="sxs-lookup"><span data-stu-id="247b9-158">720 million</span></span> |<span data-ttu-id="247b9-159">140 億</span><span class="sxs-lookup"><span data-stu-id="247b9-159">1.4 billion</span></span> |<span data-ttu-id="247b9-160">6 億</span><span class="sxs-lookup"><span data-stu-id="247b9-160">600 million</span></span> |
| <span data-ttu-id="247b9-161">每項服務的儲存體上限</span><span class="sxs-lookup"><span data-stu-id="247b9-161">Maximum Storage per Service</span></span> |<span data-ttu-id="247b9-162">2 GB</span><span class="sxs-lookup"><span data-stu-id="247b9-162">2 GB</span></span> |<span data-ttu-id="247b9-163">300 GB</span><span class="sxs-lookup"><span data-stu-id="247b9-163">300 GB</span></span> |<span data-ttu-id="247b9-164">1.2 TB</span><span class="sxs-lookup"><span data-stu-id="247b9-164">1.2 TB</span></span> |<span data-ttu-id="247b9-165">2.4 TB</span><span class="sxs-lookup"><span data-stu-id="247b9-165">2.4 TB</span></span> |<span data-ttu-id="247b9-166">600 GB</span><span class="sxs-lookup"><span data-stu-id="247b9-166">600 GB</span></span> |
| <span data-ttu-id="247b9-167">每個資料分割的文件數目上限</span><span class="sxs-lookup"><span data-stu-id="247b9-167">Maximum Documents per Partition</span></span> |<span data-ttu-id="247b9-168">100 萬</span><span class="sxs-lookup"><span data-stu-id="247b9-168">1 million</span></span> |<span data-ttu-id="247b9-169">1500 萬</span><span class="sxs-lookup"><span data-stu-id="247b9-169">15 million</span></span> |<span data-ttu-id="247b9-170">6000 萬</span><span class="sxs-lookup"><span data-stu-id="247b9-170">60 million</span></span> |<span data-ttu-id="247b9-171">1 億 2000 萬</span><span class="sxs-lookup"><span data-stu-id="247b9-171">120 million</span></span> |<span data-ttu-id="247b9-172">2 億</span><span class="sxs-lookup"><span data-stu-id="247b9-172">200 million</span></span> |
| <span data-ttu-id="247b9-173">每個資料分割的儲存體上限</span><span class="sxs-lookup"><span data-stu-id="247b9-173">Maximum Storage per Partition</span></span> |<span data-ttu-id="247b9-174">2 GB</span><span class="sxs-lookup"><span data-stu-id="247b9-174">2 GB</span></span> |<span data-ttu-id="247b9-175">25 GB</span><span class="sxs-lookup"><span data-stu-id="247b9-175">25 GB</span></span> |<span data-ttu-id="247b9-176">100 GB</span><span class="sxs-lookup"><span data-stu-id="247b9-176">100 GB</span></span> |<span data-ttu-id="247b9-177">200 GB</span><span class="sxs-lookup"><span data-stu-id="247b9-177">200 GB</span></span> |<span data-ttu-id="247b9-178">200 GB</span><span class="sxs-lookup"><span data-stu-id="247b9-178">200 GB</span></span> |
| <span data-ttu-id="247b9-179">每項服務的索引數目上限</span><span class="sxs-lookup"><span data-stu-id="247b9-179">Maximum Indexes per Service</span></span> |<span data-ttu-id="247b9-180">5</span><span class="sxs-lookup"><span data-stu-id="247b9-180">5</span></span> |<span data-ttu-id="247b9-181">50</span><span class="sxs-lookup"><span data-stu-id="247b9-181">50</span></span> |<span data-ttu-id="247b9-182">200</span><span class="sxs-lookup"><span data-stu-id="247b9-182">200</span></span> |<span data-ttu-id="247b9-183">200</span><span class="sxs-lookup"><span data-stu-id="247b9-183">200</span></span> |<span data-ttu-id="247b9-184">3000 (最多 1000 個索引/資料分割)</span><span class="sxs-lookup"><span data-stu-id="247b9-184">3000 (max 1000 indexes/partition)</span></span> |

#### <a name="s3-high-density"></a><span data-ttu-id="247b9-185">S3 高密度</span><span class="sxs-lookup"><span data-stu-id="247b9-185">S3 High Density'</span></span>
<span data-ttu-id="247b9-186">在 Azure 搜尋 S3 定價層中，沒有特別針對多租用戶案例而設計的 hello 高密度 (HD) 模式的選項。</span><span class="sxs-lookup"><span data-stu-id="247b9-186">In Azure Search’s S3 pricing tier, there is an option for hello High Density (HD) mode designed specifically for multitenant scenarios.</span></span> <span data-ttu-id="247b9-187">在許多情況下，就需要 toosupport 大量的較小的租用戶的簡單和成本效益的單一服務 tooachieve hello 權益下。</span><span class="sxs-lookup"><span data-stu-id="247b9-187">In many cases, it is necessary toosupport a large number of smaller tenants under a single service tooachieve hello benefits of simplicity and cost efficiency.</span></span>

<span data-ttu-id="247b9-188">S3 HD 允許的 hello 許多小型索引 toobe hello 能力 tooscale hello 能力 toohost 的單一服務中的多個索引使用資料分割索引時，您可以壓縮單一搜尋服務的 hello 管理下。</span><span class="sxs-lookup"><span data-stu-id="247b9-188">S3 HD allows for hello many small indexes toobe packed under hello management of a single search service by trading hello ability tooscale out indexes using partitions for hello ability toohost more indexes in a single service.</span></span>

<span data-ttu-id="247b9-189">具體而言，S3 服務可能會有介於 1 到 200 一起可能裝載 too1.4 100 億文件的索引。</span><span class="sxs-lookup"><span data-stu-id="247b9-189">Concretely, an S3 service could have between 1 and 200 indexes that together could host up too1.4 billion documents.</span></span> <span data-ttu-id="247b9-190">S3 HD 另一方面上 hello 可讓個別索引 tooonly 向上 too1 百萬個文件，但它可以處理上每個資料分割 （向上 too3000 每個服務) 為 200 萬，每個資料分割的總文件計數 too1000 索引 (向上 too600 百萬個，每個服務)。</span><span class="sxs-lookup"><span data-stu-id="247b9-190">An S3 HD on hello other hand would allow individual indexes tooonly go up too1 million documents, but it can handle up too1000 indexes per partition (up too3000 per service) with a total document count of 200 million per partition (up too600 million per service).</span></span>

## <a name="considerations-for-multitenant-applications"></a><span data-ttu-id="247b9-191">多租用戶應用程式的考量</span><span class="sxs-lookup"><span data-stu-id="247b9-191">Considerations for multitenant applications</span></span>
<span data-ttu-id="247b9-192">多租用戶應用程式必須有效地發佈間 hello 租用戶的資源時保留某種程度的隱私權之間 hello 各種租用戶。</span><span class="sxs-lookup"><span data-stu-id="247b9-192">Multitenant applications must effectively distribute resources among hello tenants while preserving some level of privacy between hello various tenants.</span></span> <span data-ttu-id="247b9-193">設計這類應用程式的 hello 架構時，有一些考量：</span><span class="sxs-lookup"><span data-stu-id="247b9-193">There are a few considerations when designing hello architecture for such an application:</span></span>

* <span data-ttu-id="247b9-194">*隔離租用戶：*應用程式開發人員需要 tootake 適當措施 tooensure 沒有租用戶有未經授權或不想要存取 toohello 資料的其他租用戶。</span><span class="sxs-lookup"><span data-stu-id="247b9-194">*Tenant isolation:* Application developers need tootake appropriate measures tooensure that no tenants have unauthorized or unwanted access toohello data of other tenants.</span></span> <span data-ttu-id="247b9-195">以外的資料隱私權的 hello 觀點而言，租用戶隔離策略需要有效的管理共用的資源，並防止在含有雜訊的鄰近項目。</span><span class="sxs-lookup"><span data-stu-id="247b9-195">Beyond hello perspective of data privacy, tenant isolation strategies require effective management of shared resources and protection from noisy neighbors.</span></span>
* <span data-ttu-id="247b9-196">*雲端資源成本︰* 與任何其他應用程式一樣，軟體解決方案作為多租用戶應用程式的元件，必須保有成本競爭力。</span><span class="sxs-lookup"><span data-stu-id="247b9-196">*Cloud resource cost:* As with any other application, software solutions must remain cost competitive as a component of a multitenant application.</span></span>
* <span data-ttu-id="247b9-197">*容易的作業：*開發多租用戶的架構時, hello hello 應用程式的營運影響和複雜度是重要的考量。</span><span class="sxs-lookup"><span data-stu-id="247b9-197">*Ease of Operations:* When developing a multitenant architecture, hello impact on hello application's operations and complexity is an important consideration.</span></span> <span data-ttu-id="247b9-198">Azure 搜尋服務具有 [99.9% 的 SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/)。</span><span class="sxs-lookup"><span data-stu-id="247b9-198">Azure Search has a [99.9% SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span></span>
* <span data-ttu-id="247b9-199">*全域的足跡：*多租用戶應用程式可能需要分散至各 hello 地球 tooeffectively serve 租用戶。</span><span class="sxs-lookup"><span data-stu-id="247b9-199">*Global footprint:* Multitenant applications may need tooeffectively serve tenants which are distributed across hello globe.</span></span>
* <span data-ttu-id="247b9-200">*延展性：*應用程式開發人員需要的 tooconsider 之間維護夠低層級的應用程式的複雜性和租用戶數目與設計 hello 應用程式 tooscale 如何先協調和 hello 租用戶資料的大小和工作負載。</span><span class="sxs-lookup"><span data-stu-id="247b9-200">*Scalability:* Application developers need tooconsider how they reconcile between maintaining a sufficiently low level of application complexity and designing hello application tooscale with number of tenants and hello size of tenants' data and workload.</span></span>

<span data-ttu-id="247b9-201">Azure Search 提供了幾個可以使用的 tooisolate 租用戶資料和工作負載的界限。</span><span class="sxs-lookup"><span data-stu-id="247b9-201">Azure Search offers a few boundaries that can be used tooisolate tenants’ data and workload.</span></span>

## <a name="modeling-multitenancy-with-azure-search"></a><span data-ttu-id="247b9-202">使用 Azure 搜尋服務來建立多租用戶模型</span><span class="sxs-lookup"><span data-stu-id="247b9-202">Modeling multitenancy with Azure Search</span></span>
<span data-ttu-id="247b9-203">在多租用戶案例的 hello 情況下，hello 應用程式開發人員使用一或多個搜尋服務，並將其租用戶之間服務、 索引或兩者。</span><span class="sxs-lookup"><span data-stu-id="247b9-203">In hello case of a multitenant scenario, hello application developer consumes one or more search services and divide their tenants among services, indexes, or both.</span></span> <span data-ttu-id="247b9-204">建立多租用戶案例模型時，「Azure 搜尋服務」有幾個常見的模式︰</span><span class="sxs-lookup"><span data-stu-id="247b9-204">Azure Search has a few common patterns when modeling a multitenant scenario:</span></span>

1. <span data-ttu-id="247b9-205">*每個租用戶都使用專屬索引︰* 每個租用戶在與其他租用戶共用的搜尋服務內都有自己的索引。</span><span class="sxs-lookup"><span data-stu-id="247b9-205">*Index per tenant:* Each tenant has its own index within a search service that is shared with other tenants.</span></span>
2. <span data-ttu-id="247b9-206">*每個租用戶都使用專屬服務︰* 每個租用戶都有自己的專用「Azure 搜尋服務」服務，可提供最高層級的資料和工作負載分隔。</span><span class="sxs-lookup"><span data-stu-id="247b9-206">*Service per tenant:* Each tenant has its own dedicated Azure Search service, offering highest level of data and workload separation.</span></span>
3. <span data-ttu-id="247b9-207">*兩者混合︰* 針對較大且較活躍的租用戶會指派專用服務，而針對較小的租用戶則會在共用服務內指派個別的索引。</span><span class="sxs-lookup"><span data-stu-id="247b9-207">*Mix of both:* Larger, more-active tenants are assigned dedicated services while smaller tenants are assigned individual indexes within shared services.</span></span>

## <a name="1-index-per-tenant"></a><span data-ttu-id="247b9-208">1.每個租用戶都使用專屬索引</span><span class="sxs-lookup"><span data-stu-id="247b9-208">1. Index per tenant</span></span>
![Hello 索引每個租用戶模型的 portrayal](./media/search-modeling-multitenant-saas-applications/azure-search-index-per-tenant.png)

<span data-ttu-id="247b9-210">在「每個租用戶都使用專屬索引」模型中，多個租用戶會佔用單一的「Azure 搜尋服務」，其中每個租用戶都有自己的索引。</span><span class="sxs-lookup"><span data-stu-id="247b9-210">In an index-per-tenant model, multiple tenants occupy a single Azure Search service where each tenant has their own index.</span></span>

<span data-ttu-id="247b9-211">租用戶可達到資料隔離的目的，因為所有搜尋要求和文件作業都是在「Azure 搜尋服務」的索引層級發出。</span><span class="sxs-lookup"><span data-stu-id="247b9-211">Tenants achieve data isolation because all search requests and document operations are issued at an index level in Azure Search.</span></span> <span data-ttu-id="247b9-212">Hello 應用程式層，在沒有 hello 需要感知 toodirect hello 各種租用戶流量 toohello 適當的索引，同時也在所有租用戶之間管理 hello 服務層級的資源。</span><span class="sxs-lookup"><span data-stu-id="247b9-212">In hello application layer, there is hello need awareness toodirect hello various tenants’ traffic toohello proper indexes while also managing resources at hello service level across all tenants.</span></span>

<span data-ttu-id="247b9-213">Hello 索引每個租用戶模型的索引鍵屬性是 hello 應用程式開發人員 toooversubscribe hello 容量 hello 應用程式的租用戶之間搜尋服務的 hello 功能。</span><span class="sxs-lookup"><span data-stu-id="247b9-213">A key attribute of hello index-per-tenant model is hello ability for hello application developer toooversubscribe hello capacity of a search service among hello application’s tenants.</span></span> <span data-ttu-id="247b9-214">如果 hello 租用戶有分散工作負載的分配、 hello 最佳組合的租用戶可以搜尋服務編製索引 tooaccommodate 數目高作用中的大量資源的租用戶時同時處理冗長的較不活躍的租用戶。</span><span class="sxs-lookup"><span data-stu-id="247b9-214">If hello tenants have an uneven distribution of workload, hello optimal combination of tenants can be distributed across a search service’s indexes tooaccommodate a number of highly active, resource-intensive tenants while simultaneously serving a long tail of less active tenants.</span></span> <span data-ttu-id="247b9-215">hello 代價是 hello 無法 hello 模型 toohandle 的情況下每個租用戶同時高度使用中。</span><span class="sxs-lookup"><span data-stu-id="247b9-215">hello trade-off is hello inability of hello model toohandle situations where each tenant is concurrently highly active.</span></span>

<span data-ttu-id="247b9-216">hello 索引每個租用戶模型提供了變數成本模型，在整個 Azure 搜尋服務購買前期 hello 基礎以及後續填入與租用戶。</span><span class="sxs-lookup"><span data-stu-id="247b9-216">hello index-per-tenant model provides hello basis for a variable cost model, where an entire Azure Search service is bought up-front and then subsequently filled with tenants.</span></span> <span data-ttu-id="247b9-217">這可讓您未使用的容量 toobe 指定試用和可用的帳戶。</span><span class="sxs-lookup"><span data-stu-id="247b9-217">This allows for unused capacity toobe designated for trials and free accounts.</span></span>

<span data-ttu-id="247b9-218">對於具有通用的使用量應用程式，hello 索引每個租用戶模型可能不是最有效率的 hello。</span><span class="sxs-lookup"><span data-stu-id="247b9-218">For applications with a global footprint, hello index-per-tenant model may not be hello most efficient.</span></span> <span data-ttu-id="247b9-219">如果應用程式的租用戶已分配給 hello 地球，則可能需要針對每個區域，而可能重複的成本透過每個個別的服務。</span><span class="sxs-lookup"><span data-stu-id="247b9-219">If an application's tenants are distributed across hello globe, a separate service may be necessary for each region which may duplicate costs across each of them.</span></span>

<span data-ttu-id="247b9-220">Azure 搜尋可讓您的 hello 個別索引和索引 toogrow 的 hello 總數 hello 小數位數。</span><span class="sxs-lookup"><span data-stu-id="247b9-220">Azure Search allows for hello scale of both hello individual indexes and hello total number of indexes toogrow.</span></span> <span data-ttu-id="247b9-221">如果適當的定價層選擇，資料分割和複本可以加入 toohello 整個搜尋服務時 hello 服務內的個別索引成長至過大儲存體或流量。</span><span class="sxs-lookup"><span data-stu-id="247b9-221">If an appropriate pricing tier is chosen, partitions and replicas can be added toohello entire search service when an individual index within hello service grows too large in terms of storage or traffic.</span></span>

<span data-ttu-id="247b9-222">如果 hello 總數索引變得太大的單一服務，另一個服務已佈建 toobe tooaccommodate hello 新租用戶。</span><span class="sxs-lookup"><span data-stu-id="247b9-222">If hello total number of indexes grows too large for a single service, another service has toobe provisioned tooaccommodate hello new tenants.</span></span> <span data-ttu-id="247b9-223">如果索引有 toobe 加入新的服務時，搜尋服務之間移動，hello hello 索引資料已 toobe 手動複製從一個索引 toohello 其他 Azure 搜尋不允許移動索引 toobe 如下。</span><span class="sxs-lookup"><span data-stu-id="247b9-223">If indexes have toobe moved between search services as new services are added, hello data from hello index has toobe manually copied from one index toohello other as Azure Search does not allow for an index toobe moved.</span></span>

## <a name="2-service-per-tenant"></a><span data-ttu-id="247b9-224">2.每個租用戶都使用專屬服務</span><span class="sxs-lookup"><span data-stu-id="247b9-224">2. Service per tenant</span></span>
![Hello 服務每個租用戶模型的 portrayal](./media/search-modeling-multitenant-saas-applications/azure-search-service-per-tenant.png)

<span data-ttu-id="247b9-226">在「每個租用戶都使用專屬服務」架構中，每個租用戶都有自己的搜尋服務。</span><span class="sxs-lookup"><span data-stu-id="247b9-226">In a service-per-tenant architecture, each tenant has its own search service.</span></span>

<span data-ttu-id="247b9-227">在此模型中，hello 應用程式會在達到 hello 其租用戶隔離的最大層級。</span><span class="sxs-lookup"><span data-stu-id="247b9-227">In this model, hello application achieves hello maximum level of isolation for its tenants.</span></span> <span data-ttu-id="247b9-228">每項服務除了有個別的 API 金鑰之外，還有專用的儲存體和輸送量來處理搜尋要求。</span><span class="sxs-lookup"><span data-stu-id="247b9-228">Each service has dedicated storage and throughput for handling search request as well as separate API keys.</span></span>

<span data-ttu-id="247b9-229">針對其中每個租用戶中有較大的耗用量或 hello 工作負載從租用戶 tootenant 小變化性的應用程式，hello 每個租用戶的服務模型會是有效的選擇，因為資源不會跨各種租用戶工作負載共用。</span><span class="sxs-lookup"><span data-stu-id="247b9-229">For applications where each tenant has a large footprint or hello workload has little variability from tenant tootenant, hello service-per-tenant model is an effective choice as resources are not shared across various tenants’ workloads.</span></span>

<span data-ttu-id="247b9-230">每個租用戶模型的服務也提供可預測的固定成本模型的 hello 優點。</span><span class="sxs-lookup"><span data-stu-id="247b9-230">A service per tenant model also offers hello benefit of a predictable, fixed cost model.</span></span> <span data-ttu-id="247b9-231">沒有任何整個搜尋服務中的前期投資租用戶 toofill 之前，不過 hello 成本的各個租用戶高於索引每個租用戶模型。</span><span class="sxs-lookup"><span data-stu-id="247b9-231">There is no up-front investment in an entire search service until there is a tenant toofill it, however hello cost-per-tenant is higher than an index-per-tenant model.</span></span>

<span data-ttu-id="247b9-232">hello 服務每個租用戶模型是有效率的選擇有通用的耗用量的應用程式。</span><span class="sxs-lookup"><span data-stu-id="247b9-232">hello service-per-tenant model is an efficient choice for applications with a global footprint.</span></span> <span data-ttu-id="247b9-233">分散的租用戶，很容易 toohave 中的每個租用戶的服務 hello 適當區域。</span><span class="sxs-lookup"><span data-stu-id="247b9-233">With geographically-distributed tenants, it is easy toohave each tenant's service in hello appropriate region.</span></span>

<span data-ttu-id="247b9-234">個別租用戶 outgrow 其服務時會調整此模式中的 hello 挑戰。</span><span class="sxs-lookup"><span data-stu-id="247b9-234">hello challenges in scaling this pattern arise when individual tenants outgrow their service.</span></span> <span data-ttu-id="247b9-235">Azure 搜尋目前不支援升級 hello 定價層的搜尋服務，因此必須手動複製 toobe tooa 新服務的所有資料。</span><span class="sxs-lookup"><span data-stu-id="247b9-235">Azure Search does not currently support upgrading hello pricing tier of a search service, so all data would have toobe manually copied tooa new service.</span></span>

## <a name="3-mixing-both-models"></a><span data-ttu-id="247b9-236">3.混合兩種模型</span><span class="sxs-lookup"><span data-stu-id="247b9-236">3. Mixing both models</span></span>
<span data-ttu-id="247b9-237">建立多租用戶模型的另一種模式是將「每個租用戶都使用專屬索引」與「每個租用戶都使用專屬服務」策略混合。</span><span class="sxs-lookup"><span data-stu-id="247b9-237">Another pattern for modeling multitenancy is mixing both index-per-tenant and service-per-tenant strategies.</span></span>

<span data-ttu-id="247b9-238">混合 hello 兩個模式，應用程式的最大的租用戶可以佔用專用的服務，而 hello 長尾的作用中的較小的租用戶小於可佔用索引中的共用服務。</span><span class="sxs-lookup"><span data-stu-id="247b9-238">By mixing hello two patterns, an application's largest tenants can occupy dedicated services while hello long tail of less active, smaller tenants can occupy indexes in a shared service.</span></span> <span data-ttu-id="247b9-239">此模型可確保 hello 最大的租用戶有一直居高效能從 hello 服務，同時又能夠協助 tooprotect hello 較小的租用戶，從任何有很多雜訊的鄰近項目。</span><span class="sxs-lookup"><span data-stu-id="247b9-239">This model ensures that hello largest tenants have consistently high performance from hello service while helping tooprotect hello smaller tenants from any noisy neighbors.</span></span>

<span data-ttu-id="247b9-240">不過，實作此策略需要有遠見來預測哪些租用戶需要的是專用服務，而哪些租用戶需要的是共用服務中的索引。</span><span class="sxs-lookup"><span data-stu-id="247b9-240">However, implementing this strategy relies foresight in predicting which tenants will require a dedicated service versus an index in a shared service.</span></span> <span data-ttu-id="247b9-241">應用程式的複雜度增加 hello 需要 toomanage 這兩個的這些多的模型。</span><span class="sxs-lookup"><span data-stu-id="247b9-241">Application complexity increases with hello need toomanage both of these multitenancy models.</span></span>

## <a name="achieving-even-finer-granularity"></a><span data-ttu-id="247b9-242">達到更精細的細微度</span><span class="sxs-lookup"><span data-stu-id="247b9-242">Achieving even finer granularity</span></span>
<span data-ttu-id="247b9-243">Azure 搜尋中的設計模式 toomodel 多租用戶案例上方 hello 假設統一範圍，其中每個租用戶是應用程式的整個執行個體。</span><span class="sxs-lookup"><span data-stu-id="247b9-243">hello above design patterns toomodel multitenant scenarios in Azure Search assume a uniform scope where each tenant is a whole instance of an application.</span></span> <span data-ttu-id="247b9-244">不過，應用程式有時可能是處理許多較小的範圍。</span><span class="sxs-lookup"><span data-stu-id="247b9-244">However, applications can sometimes handle many smaller scopes.</span></span>

<span data-ttu-id="247b9-245">如果服務每個租用戶和租用戶索引每個模型不是不夠小的範圍，則可能 toomodel 索引 tooachieve 資料粒度更細微程度。</span><span class="sxs-lookup"><span data-stu-id="247b9-245">If service-per-tenant and index-per-tenant models are not sufficiently small scopes, it is possible toomodel an index tooachieve an even finer degree of granularity.</span></span>

<span data-ttu-id="247b9-246">toohave 單一索引不同的用戶端端點行為不同，欄位可以是針對每個可能的用戶端指定某個值加入的 tooan 索引。</span><span class="sxs-lookup"><span data-stu-id="247b9-246">toohave a single index behave differently for different client endpoints, a field can be added tooan index which designates a certain value for each possible client.</span></span> <span data-ttu-id="247b9-247">每次用戶端會呼叫 Azure 搜尋 tooquery 或修改索引、 hello hello 用戶端應用程式程式碼指定 hello 適當的值，該欄位使用 Azure Search[篩選](https://msdn.microsoft.com/library/azure/dn798921.aspx)在查詢階段的功能。</span><span class="sxs-lookup"><span data-stu-id="247b9-247">Each time a client calls Azure Search tooquery or modify an index, hello code from hello client application specifies hello appropriate value for that field using Azure Search's [filter](https://msdn.microsoft.com/library/azure/dn798921.aspx) capability at query time.</span></span>

<span data-ttu-id="247b9-248">這個方法可以是不同的使用者帳戶、 個別的權限層級，以及甚至完全不同的應用程式使用的 tooachieve 功能。</span><span class="sxs-lookup"><span data-stu-id="247b9-248">This method can be used tooachieve functionality of separate user accounts, separate permission levels, and even completely separate applications.</span></span>

> [!NOTE]
> <span data-ttu-id="247b9-249">使用 hello 方法上述 tooconfigure 單一索引 tooserve 多個租用戶會影響 hello 搜尋結果的相關性。</span><span class="sxs-lookup"><span data-stu-id="247b9-249">Using hello approach described above tooconfigure a single index tooserve multiple tenants affects hello relevance of search results.</span></span> <span data-ttu-id="247b9-250">搜尋相關性分數計算索引層級範圍，而不是租用戶層級範圍，讓所有租用戶的資料併入 hello 相關性分數的基礎統計資料，例如 「 詞彙頻率。</span><span class="sxs-lookup"><span data-stu-id="247b9-250">Search relevance scores are computed at an index-level scope, not a tenant-level scope, so all tenants' data is incorporated in hello relevance scores' underlying statistics such as term frequency.</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="247b9-251">後續步驟</span><span class="sxs-lookup"><span data-stu-id="247b9-251">Next steps</span></span>
<span data-ttu-id="247b9-252">Azure 搜尋是令人信服的選擇對於許多應用程式，[深入了解有關 hello 服務的強大功能](http://aka.ms/whatisazsearch)。</span><span class="sxs-lookup"><span data-stu-id="247b9-252">Azure Search is a compelling choice for many applications, [read more about hello service's robust capabilities](http://aka.ms/whatisazsearch).</span></span> <span data-ttu-id="247b9-253">當評估 hello 各種設計多租用戶應用程式的模式，請考慮 hello[各種不同的定價層](https://azure.microsoft.com/pricing/details/search/)和個別的 hello[服務限制](search-limits-quotas-capacity.md)toobest 量身訂做的 Azure 搜尋 toofit應用程式工作負載和架構的所有大小。</span><span class="sxs-lookup"><span data-stu-id="247b9-253">When evaluating hello various design patterns for multitenant applications, consider hello [various pricing tiers](https://azure.microsoft.com/pricing/details/search/) and hello respective [service limits](search-limits-quotas-capacity.md) toobest tailor Azure Search toofit application workloads and architectures of all sizes.</span></span>

<span data-ttu-id="247b9-254">Azure 搜尋和多租用戶案例相關的任何問題可以導向tooazuresearch_contact@microsoft.com。</span><span class="sxs-lookup"><span data-stu-id="247b9-254">Any questions about Azure Search and multitenant scenarios can be directed tooazuresearch_contact@microsoft.com.</span></span>

