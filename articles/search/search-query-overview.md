---
title: "查詢 Azure 搜尋服務索引 | Microsoft Docs"
description: "在 Azure 搜尋服務中建立搜尋查詢，並使用搜尋參數來篩選及排序搜尋結果。"
services: search
manager: jhubbard
documentationcenter: 
author: ashmaka
ms.assetid: 69205d7a-363f-4b92-a53f-6ca818a3d2c7
ms.service: search
ms.devlang: na
ms.workload: search
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.date: 04/26/2017
ms.author: ashmaka
ms.openlocfilehash: a22b82829df4659681940267e64c98d345453958
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/11/2017
---
# <a name="query-your-azure-search-index"></a><span data-ttu-id="cddc2-103">查詢 Azure 搜尋服務索引</span><span class="sxs-lookup"><span data-stu-id="cddc2-103">Query your Azure Search index</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="cddc2-104">概觀</span><span class="sxs-lookup"><span data-stu-id="cddc2-104">Overview</span></span>](search-query-overview.md)
> * [<span data-ttu-id="cddc2-105">入口網站</span><span class="sxs-lookup"><span data-stu-id="cddc2-105">Portal</span></span>](search-explorer.md)
> * [<span data-ttu-id="cddc2-106">.NET</span><span class="sxs-lookup"><span data-stu-id="cddc2-106">.NET</span></span>](search-query-dotnet.md)
> * [<span data-ttu-id="cddc2-107">REST</span><span class="sxs-lookup"><span data-stu-id="cddc2-107">REST</span></span>](search-query-rest-api.md)
> 
> 

<span data-ttu-id="cddc2-108">在提交搜尋要求給 Azure 搜尋服務時，除了在應用程式搜尋方塊中實際輸入的單字以外，還可以指定幾個參數。</span><span class="sxs-lookup"><span data-stu-id="cddc2-108">When submitting search requests to Azure Search, there are a number of parameters that can be specified alongside the actual words that are typed into the search box of your application.</span></span> <span data-ttu-id="cddc2-109">這些查詢參數可讓您更深入地控制[全文檢索搜尋體驗](search-lucene-query-architecture.md)。</span><span class="sxs-lookup"><span data-stu-id="cddc2-109">These query parameters allow you to achieve some deeper control of the [full-text search experience](search-lucene-query-architecture.md).</span></span>

<span data-ttu-id="cddc2-110">以下清單簡短說明查詢參數在 Azure 搜尋服務中的常見用法。</span><span class="sxs-lookup"><span data-stu-id="cddc2-110">Below is a list that briefly explains common uses of the query parameters in Azure Search.</span></span> <span data-ttu-id="cddc2-111">如需查詢參數和其行為的完整說明，請參閱 [REST API](https://docs.microsoft.com/rest/api/searchservice/Search-Documents) 和 [.NET SDK](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.models.searchparameters#microsoft_azure_search_models_searchparameters#properties_summary) 的詳細資料頁面。</span><span class="sxs-lookup"><span data-stu-id="cddc2-111">For full coverage of query parameters and their behavior, please see the detailed pages for the [REST API](https://docs.microsoft.com/rest/api/searchservice/Search-Documents) and [.NET SDK](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.models.searchparameters#microsoft_azure_search_models_searchparameters#properties_summary).</span></span>

## <a name="types-of-queries"></a><span data-ttu-id="cddc2-112">查詢類型</span><span class="sxs-lookup"><span data-stu-id="cddc2-112">Types of queries</span></span>
<span data-ttu-id="cddc2-113">Azure 搜尋服務提供許多選項可建立功能極為強大的查詢。</span><span class="sxs-lookup"><span data-stu-id="cddc2-113">Azure Search offers many options to create extremely powerful queries.</span></span> <span data-ttu-id="cddc2-114">您將會使用的兩個主要查詢類型是 `search` 和 `filter`。</span><span class="sxs-lookup"><span data-stu-id="cddc2-114">The two main types of query you will use are `search` and `filter`.</span></span> <span data-ttu-id="cddc2-115">`search` 查詢可在索引的所有可搜尋欄位中搜尋一或多個字詞，而且運作方式就如同您對 Google 或 Bing 等搜尋引擎的期待。</span><span class="sxs-lookup"><span data-stu-id="cddc2-115">A `search` query searches for one or more terms in all *searchable* fields in your index, and works the way you would expect a search engine like Google or Bing to work.</span></span> <span data-ttu-id="cddc2-116">`filter` 查詢可跨索引的所有可篩選欄位評估布林運算式。</span><span class="sxs-lookup"><span data-stu-id="cddc2-116">A `filter` query evaluates a boolean expression over all *filterable* fields in an index.</span></span> <span data-ttu-id="cddc2-117">與 `search` 查詢不同的是，`filter` 查詢會完全符合欄位內容，也就是對字串欄位區分大小寫。</span><span class="sxs-lookup"><span data-stu-id="cddc2-117">Unlike `search` queries, `filter` queries match the exact contents of a field, which means they are case-sensitive for string fields.</span></span>

<span data-ttu-id="cddc2-118">您可以同時或個別使用搜尋和篩選。</span><span class="sxs-lookup"><span data-stu-id="cddc2-118">You can use searches and filters together or separately.</span></span> <span data-ttu-id="cddc2-119">如果同時使用，就會先將篩選套用到整個索引，再對篩選結果執行搜尋。</span><span class="sxs-lookup"><span data-stu-id="cddc2-119">If you use them together, the filter is applied first to the entire index, and then the search is performed on the results of the filter.</span></span> <span data-ttu-id="cddc2-120">由於篩選能夠減少搜尋查詢需要處理的資料集合，因此對於提升查詢效能方面是很實用的技術。</span><span class="sxs-lookup"><span data-stu-id="cddc2-120">Filters can therefore be a useful technique to improve query performance since they reduce the set of documents that the search query needs to process.</span></span>

<span data-ttu-id="cddc2-121">篩選運算式的語法是 [OData 篩選語言](https://docs.microsoft.com/rest/api/searchservice/OData-Expression-Syntax-for-Azure-Search)的子集。</span><span class="sxs-lookup"><span data-stu-id="cddc2-121">The syntax for filter expressions is a subset of the [OData filter language](https://docs.microsoft.com/rest/api/searchservice/OData-Expression-Syntax-for-Azure-Search).</span></span> <span data-ttu-id="cddc2-122">對於搜尋查詢，您可以使用[簡化語法](https://docs.microsoft.com/rest/api/searchservice/Simple-query-syntax-in-Azure-Search)或 [Lucene 查詢語法](https://docs.microsoft.com/rest/api/searchservice/Lucene-query-syntax-in-Azure-Search)，下面會有這兩種語法的討論。</span><span class="sxs-lookup"><span data-stu-id="cddc2-122">For search queries you can use either the [simplified syntax](https://docs.microsoft.com/rest/api/searchservice/Simple-query-syntax-in-Azure-Search) or the [Lucene query syntax](https://docs.microsoft.com/rest/api/searchservice/Lucene-query-syntax-in-Azure-Search) which are discussed below.</span></span>

### <a name="simple-query-syntax"></a><span data-ttu-id="cddc2-123">簡單查詢語法</span><span class="sxs-lookup"><span data-stu-id="cddc2-123">Simple query syntax</span></span>
<span data-ttu-id="cddc2-124">[簡單查詢語法](https://docs.microsoft.com/rest/api/searchservice/Simple-query-syntax-in-Azure-Search) 是 Azure 搜尋服務所使用的預設查詢語言。</span><span class="sxs-lookup"><span data-stu-id="cddc2-124">The [simple query syntax](https://docs.microsoft.com/rest/api/searchservice/Simple-query-syntax-in-Azure-Search) is the default query language used in Azure Search.</span></span> <span data-ttu-id="cddc2-125">簡單查詢語法支援許多常見的搜尋運算子，包括 AND、OR、NOT、片語、尾碼和優先順序運算子。</span><span class="sxs-lookup"><span data-stu-id="cddc2-125">The simple query syntax supports a number of common search operators including the AND, OR, NOT, phrase, suffix, and precedence operators.</span></span>

### <a name="lucene-query-syntax"></a><span data-ttu-id="cddc2-126">Lucene 查詢語法</span><span class="sxs-lookup"><span data-stu-id="cddc2-126">Lucene query syntax</span></span>
<span data-ttu-id="cddc2-127">[Lucene 查詢語法](https://docs.microsoft.com/rest/api/searchservice/Lucene-query-syntax-in-Azure-Search)可讓您使用被開發做為 [Apache Lucene](https://lucene.apache.org/core/4_10_2/queryparser/org/apache/lucene/queryparser/classic/package-summary.html) 一部分且廣為採用的易懂查詢語言。</span><span class="sxs-lookup"><span data-stu-id="cddc2-127">The [Lucene query syntax](https://docs.microsoft.com/rest/api/searchservice/Lucene-query-syntax-in-Azure-Search) allows you to use the widely-adopted and expressive query language developed as part of [Apache Lucene](https://lucene.apache.org/core/4_10_2/queryparser/org/apache/lucene/queryparser/classic/package-summary.html).</span></span>

<span data-ttu-id="cddc2-128">使用此查詢語法可讓您輕鬆獲得下列功能︰[欄位範圍的查詢](https://docs.microsoft.com/rest/api/searchservice/Lucene-query-syntax-in-Azure-Search#bkmk_fields)、[模糊搜尋](https://docs.microsoft.com/rest/api/searchservice/Lucene-query-syntax-in-Azure-Search#bkmk_fuzzy)、[鄰近搜尋](https://docs.microsoft.com/rest/api/searchservice/Lucene-query-syntax-in-Azure-Search#bkmk_proximity)、[詞彙提升](https://docs.microsoft.com/rest/api/searchservice/Lucene-query-syntax-in-Azure-Search#bkmk_termboost)、[規則運算式搜尋](https://docs.microsoft.com/rest/api/searchservice/Lucene-query-syntax-in-Azure-Search#bkmk_regex), [萬用字元搜尋](https://docs.microsoft.com/rest/api/searchservice/Lucene-query-syntax-in-Azure-Search#bkmk_wildcard)、[語法基礎](https://docs.microsoft.com/rest/api/searchservice/Lucene-query-syntax-in-Azure-Search#bkmk_syntax)和[使用布林運算子的查詢](https://docs.microsoft.com/rest/api/searchservice/Lucene-query-syntax-in-Azure-Search#bkmk_boolean)。</span><span class="sxs-lookup"><span data-stu-id="cddc2-128">Using this query syntax allows you to easily achieve the following capabilities: [Field-scoped queries](https://docs.microsoft.com/rest/api/searchservice/Lucene-query-syntax-in-Azure-Search#bkmk_fields), [fuzzy search](https://docs.microsoft.com/rest/api/searchservice/Lucene-query-syntax-in-Azure-Search#bkmk_fuzzy), [proximity search](https://docs.microsoft.com/rest/api/searchservice/Lucene-query-syntax-in-Azure-Search#bkmk_proximity), [term boosting](https://docs.microsoft.com/rest/api/searchservice/Lucene-query-syntax-in-Azure-Search#bkmk_termboost), [regular expression search](https://docs.microsoft.com/rest/api/searchservice/Lucene-query-syntax-in-Azure-Search#bkmk_regex), [wildcard search](https://docs.microsoft.com/rest/api/searchservice/Lucene-query-syntax-in-Azure-Search#bkmk_wildcard), [syntax fundamentals](https://docs.microsoft.com/rest/api/searchservice/Lucene-query-syntax-in-Azure-Search#bkmk_syntax), and [queries using boolean operators](https://docs.microsoft.com/rest/api/searchservice/Lucene-query-syntax-in-Azure-Search#bkmk_boolean).</span></span>

## <a name="ordering-results"></a><span data-ttu-id="cddc2-129">排序結果</span><span class="sxs-lookup"><span data-stu-id="cddc2-129">Ordering results</span></span>
<span data-ttu-id="cddc2-130">收到搜尋查詢的結果時，您可以要求 Azure 搜尋服務提供依特定欄位值排序的結果。</span><span class="sxs-lookup"><span data-stu-id="cddc2-130">When receiving results for a search query, you can request that Azure Search serves the results ordered by values in a specific field.</span></span> <span data-ttu-id="cddc2-131">根據預設，Azure 搜尋服務會以每份文件的搜尋分數排名 (衍生自 [TF-IDF](https://en.wikipedia.org/wiki/Tf%E2%80%93idf)) 來排序搜尋結果。</span><span class="sxs-lookup"><span data-stu-id="cddc2-131">By default, Azure Search orders the search results based on the rank of each document's search score, which is derived from [TF-IDF](https://en.wikipedia.org/wiki/Tf%E2%80%93idf).</span></span>

<span data-ttu-id="cddc2-132">如果您想要讓 Azure 搜尋服務在傳回結果時是以搜尋分數以外的值來排序，您可以使用 `orderby` 搜尋參數。</span><span class="sxs-lookup"><span data-stu-id="cddc2-132">If you want Azure Search to return your results ordered by a value other than the search score, you can use the `orderby` search parameter.</span></span> <span data-ttu-id="cddc2-133">您可以指定 `orderby` 參數的值，納入欄位名稱和 [`geo.distance()` 函式](https://docs.microsoft.com/rest/api/searchservice/OData-Expression-Syntax-for-Azure-Search)的呼叫以獲得地理空間值。</span><span class="sxs-lookup"><span data-stu-id="cddc2-133">You can specify the value of the `orderby` parameter to include field names and calls to the [`geo.distance()` function](https://docs.microsoft.com/rest/api/searchservice/OData-Expression-Syntax-for-Azure-Search) for geospatial values.</span></span> <span data-ttu-id="cddc2-134">每個運算式後面都可以加上 `asc` 來表示要以遞增順序要求結果，而加上 `desc` 則表示要以遞減順序要求結果。</span><span class="sxs-lookup"><span data-stu-id="cddc2-134">Each expression can be followed by `asc` to indicate that results are requested in ascending order, and `desc` to indicate that results are requested in descending order.</span></span> <span data-ttu-id="cddc2-135">預設排名為遞增順序。</span><span class="sxs-lookup"><span data-stu-id="cddc2-135">The default ranking ascending order.</span></span>

## <a name="paging"></a><span data-ttu-id="cddc2-136">分頁</span><span class="sxs-lookup"><span data-stu-id="cddc2-136">Paging</span></span>
<span data-ttu-id="cddc2-137">Azure 搜尋服務可讓您輕鬆地對搜尋結果分頁。</span><span class="sxs-lookup"><span data-stu-id="cddc2-137">Azure Search makes it easy to implement paging of search results.</span></span> <span data-ttu-id="cddc2-138">透過使用 `top` 和 `skip` 參數，您就可以順利地發出搜尋要求，將所收到的整組搜尋結果分拆成方便管理且經過排序的子集，輕鬆實現良好的搜尋 UI 做法。</span><span class="sxs-lookup"><span data-stu-id="cddc2-138">By using the `top` and `skip` parameters, you can smoothly issue search requests that allow you to receive the total set of search results in manageable, ordered subsets that easily enable good search UI practices.</span></span> <span data-ttu-id="cddc2-139">在收到這些分拆成較小子集的結果時，您也會收到整組搜尋結果中所含文件的計數。</span><span class="sxs-lookup"><span data-stu-id="cddc2-139">When receiving these smaller subsets of results, you can also receive the count of documents in the total set of search results.</span></span>

<span data-ttu-id="cddc2-140">您可以在 [如何在 Azure 搜尋服務中對搜尋結果分頁](search-pagination-page-layout.md)一文中深入了解如何對搜尋結果分頁。</span><span class="sxs-lookup"><span data-stu-id="cddc2-140">You can learn more about paging search results in the article [How to page search results in Azure Search](search-pagination-page-layout.md).</span></span>

## <a name="hit-highlighting"></a><span data-ttu-id="cddc2-141">搜尋結果醒目提示</span><span class="sxs-lookup"><span data-stu-id="cddc2-141">Hit highlighting</span></span>
<span data-ttu-id="cddc2-142">在 Azure 搜尋服務中，只要使用 `highlight`、`highlightPreTag` 和 `highlightPostTag` 參數就可強調提示搜尋結果中符合搜尋查詢的確切部分。</span><span class="sxs-lookup"><span data-stu-id="cddc2-142">In Azure Search, emphasizing the exact portion of search results that match the search query is made easy by using the `highlight`, `highlightPreTag`, and `highlightPostTag` parameters.</span></span> <span data-ttu-id="cddc2-143">您可以指定哪些可搜尋欄位應該強調其相符的文字，以及指定要在 Azure 搜尋服務傳回的相符文字開頭和結尾附加的確切字串標記。</span><span class="sxs-lookup"><span data-stu-id="cddc2-143">You can specify which *searchable* fields should have their matched text emphasized as well as specifying the exact string tags to append to the start and end of the matched text that Azure Search returns.</span></span>

## <a name="try-out-query-syntax"></a><span data-ttu-id="cddc2-144">嘗試執行查詢語法</span><span class="sxs-lookup"><span data-stu-id="cddc2-144">Try out query syntax</span></span>

<span data-ttu-id="cddc2-145">若要了解語法差異，最好的方法是提交查詢並檢視結果。</span><span class="sxs-lookup"><span data-stu-id="cddc2-145">The best way to understand syntax differences is by submitting queries and reviewing results.</span></span>

+ <span data-ttu-id="cddc2-146">在 Azure 入口網站中使用[資料總管](search-explorer.md)。</span><span class="sxs-lookup"><span data-stu-id="cddc2-146">Use [Search Explorer](search-explorer.md) in the Azure portal.</span></span> <span data-ttu-id="cddc2-147">藉由部署[範例索引](search-get-started-portal.md)，您可以使用入口網站中的工具在幾分鐘內查詢索引。</span><span class="sxs-lookup"><span data-stu-id="cddc2-147">By deploying [the sample index](search-get-started-portal.md), you can query the index in minutes using tools in the portal.</span></span>

+ <span data-ttu-id="cddc2-148">使用 [Fiddler](search-fiddler.md) 或 Chrome Postman，將查詢提交至您已上傳到搜尋服務中的索引。</span><span class="sxs-lookup"><span data-stu-id="cddc2-148">Use [Fiddler](search-fiddler.md) or Chrome Postman to submit queries to an index that you have uploaded to your search service.</span></span> <span data-ttu-id="cddc2-149">這兩個工具都支援 REST 呼叫 HTTP 端點。</span><span class="sxs-lookup"><span data-stu-id="cddc2-149">Both tools support REST calls to an HTTP endpoint.</span></span> 