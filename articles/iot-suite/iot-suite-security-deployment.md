---
title: "aaaSecure 物聯網部署 |Microsoft 文件"
description: "此發行項詳細資料時，如何 toosecure IoT 部署"
services: 
suite: iot-suite
documentationcenter: 
author: YuriDio
manager: timlt
editor: 
ms.assetid: 95c23341-16b0-4954-b3f2-d2e82ab7b367
ms.service: iot-suite
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/24/2017
ms.author: yurid
ms.openlocfilehash: befba8f2009279c2217dcd3496d529139134ec01
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="secure-your-iot-deployment"></a><span data-ttu-id="71e6e-103">保護您的 IoT 部署</span><span class="sxs-lookup"><span data-stu-id="71e6e-103">Secure your IoT deployment</span></span>
<span data-ttu-id="71e6e-104">這篇文章會提供 hello 下一個層級的詳細資料，來保護 hello Azure IoT 為基礎的物聯網 (IoT) 基礎結構。</span><span class="sxs-lookup"><span data-stu-id="71e6e-104">This article provides hello next level of detail for securing hello Azure IoT-based Internet of Things (IoT) infrastructure.</span></span> <span data-ttu-id="71e6e-105">它會連結 tooimplementation 設定及部署每個元件的層級詳細資料。</span><span class="sxs-lookup"><span data-stu-id="71e6e-105">It links tooimplementation level details for configuring and deploying each component.</span></span> <span data-ttu-id="71e6e-106">另外也會提供各種競爭方法之間的比較和選擇。</span><span class="sxs-lookup"><span data-stu-id="71e6e-106">It also provides comparisons and choices between various competing methods.</span></span>

<span data-ttu-id="71e6e-107">保護 hello Azure IoT 部署可分為下列三個安全性區域的 hello:</span><span class="sxs-lookup"><span data-stu-id="71e6e-107">Securing hello Azure IoT deployment can be divided into hello following three security areas:</span></span>

* <span data-ttu-id="71e6e-108">**裝置安全性**： 保護 hello IoT 裝置部署在 hello wild 時。</span><span class="sxs-lookup"><span data-stu-id="71e6e-108">**Device Security**: Securing hello IoT device while it is deployed in hello wild.</span></span>
* <span data-ttu-id="71e6e-109">**連線安全性**： 確保 hello IoT 裝置與 IoT 中樞之間傳輸的所有資料是機密和竄改。</span><span class="sxs-lookup"><span data-stu-id="71e6e-109">**Connection Security**: Ensuring all data transmitted between hello IoT device and IoT Hub is confidential and tamper-proof.</span></span>
* <span data-ttu-id="71e6e-110">**雲端安全性**： 提供的方法 toosecure 資料，而它通過，並儲存在 hello 雲端。</span><span class="sxs-lookup"><span data-stu-id="71e6e-110">**Cloud Security**: Providing a means toosecure data while it moves through, and is stored in hello cloud.</span></span>

![三個安全性區域][img-overview]

## <a name="secure-device-provisioning-and-authentication"></a><span data-ttu-id="71e6e-112">保護裝置佈建和驗證</span><span class="sxs-lookup"><span data-stu-id="71e6e-112">Secure device provisioning and authentication</span></span>
<span data-ttu-id="71e6e-113">hello Azure IoT 套件 hello 下列兩種方法來保護 IoT 裝置：</span><span class="sxs-lookup"><span data-stu-id="71e6e-113">hello Azure IoT Suite secures IoT devices by hello following two methods:</span></span>

* <span data-ttu-id="71e6e-114">藉由提供每個裝置，可供 hello 裝置 toocommunicate hello IoT 中樞與唯一識別索引鍵 （安全性權杖）。</span><span class="sxs-lookup"><span data-stu-id="71e6e-114">By providing a unique identity key (security tokens) for each device, which can be used by hello device toocommunicate with hello IoT Hub.</span></span>
* <span data-ttu-id="71e6e-115">使用裝置上[X.509 憑證][ lnk-x509]和表示 tooauthenticate hello 裝置 toohello IoT 中樞與私密金鑰。</span><span class="sxs-lookup"><span data-stu-id="71e6e-115">By using an on-device [X.509 certificate][lnk-x509] and private key as a means tooauthenticate hello device toohello IoT Hub.</span></span> <span data-ttu-id="71e6e-116">這種驗證方法可確保該 hello hello 裝置上不知道私密金鑰外 hello 裝置在任何時候，提供較高的安全性等級。</span><span class="sxs-lookup"><span data-stu-id="71e6e-116">This authentication method ensures that hello private key on hello device is not known outside hello device at any time, providing a higher level of security.</span></span>

<span data-ttu-id="71e6e-117">hello 安全性權杖的方法會提供每個呼叫 hello 裝置 tooIoT 集線器所建立的關聯 hello 對稱金鑰 tooeach 呼叫的驗證。</span><span class="sxs-lookup"><span data-stu-id="71e6e-117">hello security token method provides authentication for each call made by hello device tooIoT Hub by associating hello symmetric key tooeach call.</span></span> <span data-ttu-id="71e6e-118">X.509 為基礎的驗證 hello TLS 連線建立過程 hello 實體層允許 IoT 裝置的驗證。</span><span class="sxs-lookup"><span data-stu-id="71e6e-118">X.509-based authentication allows authentication of an IoT device at hello physical layer as part of hello TLS connection establishment.</span></span> <span data-ttu-id="71e6e-119">hello 安全性權杖為基礎的方法可以用沒有 hello X.509 驗證這是較不安全的模式。</span><span class="sxs-lookup"><span data-stu-id="71e6e-119">hello security-token-based method can be used without hello X.509 authentication which is a less secure pattern.</span></span> <span data-ttu-id="71e6e-120">hello hello 兩個方法之間的選擇主要取決於如何安全 hello 的裝置必須驗證 toobe 和安全存放裝置 hello 裝置上的可用性 (toostore hello 私用金鑰安全地)。</span><span class="sxs-lookup"><span data-stu-id="71e6e-120">hello choice between hello two methods is primarily dictated by how secure hello device authentication needs toobe, and availability of secure storage on hello device (toostore hello private key securely).</span></span>

## <a name="iot-hub-security-tokens"></a><span data-ttu-id="71e6e-121">IoT 中樞安全性權杖</span><span class="sxs-lookup"><span data-stu-id="71e6e-121">IoT Hub security tokens</span></span>
<span data-ttu-id="71e6e-122">IoT 中樞將會使用安全性權杖 tooauthenticate 裝置與服務 tooavoid 傳送 hello 網路上的索引鍵。</span><span class="sxs-lookup"><span data-stu-id="71e6e-122">IoT Hub uses security tokens tooauthenticate devices and services tooavoid sending keys on hello network.</span></span> <span data-ttu-id="71e6e-123">此外，安全性權杖有時效性和範圍的限制。</span><span class="sxs-lookup"><span data-stu-id="71e6e-123">Additionally, security tokens are limited in time validity and scope.</span></span> <span data-ttu-id="71e6e-124">Azure IoT SDK 能在不需要任何特殊組態的情況下自動產生權杖。</span><span class="sxs-lookup"><span data-stu-id="71e6e-124">Azure IoT SDKs automatically generate tokens without requiring any special configuration.</span></span> <span data-ttu-id="71e6e-125">不過，某些情況下，需要 hello 使用者 toogenerate，並直接使用安全性權杖。</span><span class="sxs-lookup"><span data-stu-id="71e6e-125">Some scenarios, however, require hello user toogenerate and use security tokens directly.</span></span> <span data-ttu-id="71e6e-126">這些包括 hello hello MQTT、 AMQP 或 HTTP 介面，直接使用或 hello hello 語彙基元服務模式實作。</span><span class="sxs-lookup"><span data-stu-id="71e6e-126">These include hello direct use of hello MQTT, AMQP, or HTTP surfaces, or hello implementation of hello token service pattern.</span></span>

<span data-ttu-id="71e6e-127">Hello 結構的 hello 安全性權杖和其使用方式的更多詳細資料位於 hello 下列文章：</span><span class="sxs-lookup"><span data-stu-id="71e6e-127">More details on hello structure of hello security token and its usage can be found in hello following articles:</span></span>

* <span data-ttu-id="71e6e-128">[安全性權杖結構][lnk-security-tokens]</span><span class="sxs-lookup"><span data-stu-id="71e6e-128">[Security token structure][lnk-security-tokens]</span></span>
* <span data-ttu-id="71e6e-129">[將 SAS 權杖當做裝置][lnk-sas-tokens]</span><span class="sxs-lookup"><span data-stu-id="71e6e-129">[Using SAS tokens as a device][lnk-sas-tokens]</span></span>

<span data-ttu-id="71e6e-130">每個 IoT 中樞[身分識別登錄][ lnk-identity-registry]可以使用的 toocreate hello 服務，如，其中包含執行中雲端到裝置訊息和 tooallow 存取 toohello 佇列中的每一裝置資源面對裝置的端點。</span><span class="sxs-lookup"><span data-stu-id="71e6e-130">Each IoT Hub has an [identity registry][lnk-identity-registry] that can be used toocreate per-device resources in hello service, such as a queue that contains in-flight cloud-to-device messages, and tooallow access toohello device-facing endpoints.</span></span> <span data-ttu-id="71e6e-131">hello IoT 中樞身分識別登錄機提供安全地儲存裝置的身分識別與安全性金鑰的解決方案。</span><span class="sxs-lookup"><span data-stu-id="71e6e-131">hello IoT Hub identity registry provides secure storage of device identities and security keys for a solution.</span></span> <span data-ttu-id="71e6e-132">新增一或多個裝置身分識別 tooan 允許清單或封鎖清單，啟用裝置存取的完整控制權。</span><span class="sxs-lookup"><span data-stu-id="71e6e-132">Individual or groups of device identities can be added tooan allow list, or a block list, enabling complete control over device access.</span></span> <span data-ttu-id="71e6e-133">hello 下列文章提供更多詳細資料 hello 結構 hello 身分識別登錄和支援的作業。</span><span class="sxs-lookup"><span data-stu-id="71e6e-133">hello following articles provide more details on hello structure of hello identity registry and supported operations.</span></span>

<span data-ttu-id="71e6e-134">[IoT 中樞支援 MQTT、AMQP 和 HTTP][lnk-protocols] 之類的通訊協定。</span><span class="sxs-lookup"><span data-stu-id="71e6e-134">[IoT Hub supports protocols such as MQTT, AMQP, and HTTP][lnk-protocols].</span></span> <span data-ttu-id="71e6e-135">每個這些通訊協定以不同的方式使用 hello IoT 裝置 tooIoT 中樞從安全性權杖：</span><span class="sxs-lookup"><span data-stu-id="71e6e-135">Each of these protocols use security tokens from hello IoT device tooIoT Hub differently:</span></span>

* <span data-ttu-id="71e6e-136">AMQP: SASL 純文字和 AMQP 宣告式安全性 ({policyName}@sas.root。 {iothubName} IoT 中樞層級語彙基元; hello 案例{deviceId} 發生裝置範圍語彙基元)。</span><span class="sxs-lookup"><span data-stu-id="71e6e-136">AMQP: SASL PLAIN and AMQP Claims-based security ({policyName}@sas.root.{iothubName} in hello case of IoT hub-level tokens; {deviceId} in case of device-scoped tokens).</span></span>
* <span data-ttu-id="71e6e-137">MQTT: Hello {ClientId}，{IoThubhostname} 為連接的封包使用 {deviceId} / {deviceId} 中 hello **Username**欄位和 SAS 權杖中 hello**密碼**欄位。</span><span class="sxs-lookup"><span data-stu-id="71e6e-137">MQTT: CONNECT packet uses {deviceId} as hello {ClientId}, {IoThubhostname}/{deviceId} in hello **Username** field and a SAS token in hello **Password** field.</span></span>
* <span data-ttu-id="71e6e-138">HTTP: Hello 授權要求標頭中是有效的語彙基元。</span><span class="sxs-lookup"><span data-stu-id="71e6e-138">HTTP: Valid token is in hello authorization request header.</span></span>

<span data-ttu-id="71e6e-139">IoT 中樞身分識別登錄可以是使用的 tooconfigure 每一裝置的安全性認證和存取控制。</span><span class="sxs-lookup"><span data-stu-id="71e6e-139">IoT Hub identity registry can be used tooconfigure per-device security credentials and access control.</span></span> <span data-ttu-id="71e6e-140">但是，如果 IoT 解決方案已經大幅投資[自訂裝置身分識別登錄及/或驗證配置][lnk-custom-auth]，則可藉由建立權杖服務，將現有基礎結構與 IoT 中樞整合。</span><span class="sxs-lookup"><span data-stu-id="71e6e-140">However, if an IoT solution already has a significant investment in a [custom device identity registry and/or authentication scheme][lnk-custom-auth], it can be integrated into an existing infrastructure with IoT Hub by creating a token service.</span></span>

### <a name="x509-certificate-based-device-authentication"></a><span data-ttu-id="71e6e-141">X.509 憑證型裝置驗證</span><span class="sxs-lookup"><span data-stu-id="71e6e-141">X.509 certificate-based device authentication</span></span>
<span data-ttu-id="71e6e-142">hello 使用[裝置為基礎的 X.509 憑證][ lnk-protocols]和其相關聯的私人和公用金鑰組 hello 實體層級允許額外的驗證。</span><span class="sxs-lookup"><span data-stu-id="71e6e-142">hello use of a [device-based X.509 certificate][lnk-protocols] and its associated private and public key pair allows additional authentication at hello physical layer.</span></span> <span data-ttu-id="71e6e-143">hello 私密金鑰 hello 裝置安全地儲存，並不是外部 hello 裝置可探索。</span><span class="sxs-lookup"><span data-stu-id="71e6e-143">hello private key is stored securely in hello device and is not discoverable outside hello device.</span></span> <span data-ttu-id="71e6e-144">hello X.509 憑證包含 hello 裝置，例如裝置識別碼的相關資訊以及其他組織的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="71e6e-144">hello X.509 certificate contains information about hello device, such as device ID, and other organizational details.</span></span> <span data-ttu-id="71e6e-145">Hello 憑證的簽章是使用 hello 私密金鑰所產生。</span><span class="sxs-lookup"><span data-stu-id="71e6e-145">A signature of hello certificate is generated by using hello private key.</span></span>

<span data-ttu-id="71e6e-146">高層級裝置佈建流程：</span><span class="sxs-lookup"><span data-stu-id="71e6e-146">High-level device provisioning flow:</span></span>

* <span data-ttu-id="71e6e-147">建立關聯的識別項 tooa 實體裝置 – 裝置身分識別及/或裝置製造或 commissioning 期間的 X.509 憑證相關聯的 toohello 裝置。</span><span class="sxs-lookup"><span data-stu-id="71e6e-147">Associate an identifier tooa physical device – device identity and/or X.509 certificate associated toohello device during device manufacturing or commissioning.</span></span>
* <span data-ttu-id="71e6e-148">在 IoT 中樞-裝置身分識別和相關聯的裝置資訊 hello IoT 中樞身分識別登錄中建立對應的識別項目。</span><span class="sxs-lookup"><span data-stu-id="71e6e-148">Create a corresponding identity entry in IoT Hub – device identity and associated device information in hello IoT Hub identity registry.</span></span>
* <span data-ttu-id="71e6e-149">在 IoT 中樞身分識別登錄中安全地儲存 X.509 憑證指紋。</span><span class="sxs-lookup"><span data-stu-id="71e6e-149">Securely store X.509 certificate thumbprint in IoT Hub identity registry.</span></span>

### <a name="root-certificate-on-device"></a><span data-ttu-id="71e6e-150">裝置上的根憑證</span><span class="sxs-lookup"><span data-stu-id="71e6e-150">Root certificate on device</span></span>
<span data-ttu-id="71e6e-151">建立 IoT 中樞與安全 TLS 連線，時 hello IoT 裝置會驗證使用屬於 hello 裝置 SDK 的根憑證的 IoT 中樞。</span><span class="sxs-lookup"><span data-stu-id="71e6e-151">While establishing a secure TLS connection with IoT Hub, hello IoT device authenticates IoT Hub using a root certificate which is part of hello device SDK.</span></span> <span data-ttu-id="71e6e-152">若是 hello C client SDK hello 憑證位於 hello 資料夾下"\\c\\憑證"hello hello 儲存機制根目錄下。</span><span class="sxs-lookup"><span data-stu-id="71e6e-152">For hello C client SDK hello certificate is located under hello folder "\\c\\certs" under hello root of hello repo.</span></span> <span data-ttu-id="71e6e-153">雖然這些根憑證是長效的，但它們仍會過期或遭到撤銷。</span><span class="sxs-lookup"><span data-stu-id="71e6e-153">Though these root certificates are long-lived, they still may expire or be revoked.</span></span> <span data-ttu-id="71e6e-154">如果沒有任何方法，更新 hello 裝置上的 hello 憑證 hello 的裝置可能無法再 toosubsequently 連接 toohello IoT 中樞 （或任何其他雲端服務）。</span><span class="sxs-lookup"><span data-stu-id="71e6e-154">If there is no way of updating hello certificate on hello device, hello device may not be able toosubsequently connect toohello IoT Hub (or any other cloud service).</span></span> <span data-ttu-id="71e6e-155">一旦部署 hello IoT 裝置具有表示 tooupdate hello 根憑證會有效地降低此風險。</span><span class="sxs-lookup"><span data-stu-id="71e6e-155">Having a means tooupdate hello root certificate once hello IoT device is deployed will effectively mitigate this risk.</span></span>

## <a name="securing-hello-connection"></a><span data-ttu-id="71e6e-156">保護 hello 連線</span><span class="sxs-lookup"><span data-stu-id="71e6e-156">Securing hello connection</span></span>
<span data-ttu-id="71e6e-157">Hello IoT 裝置與 IoT 中樞之間的網際網路連線是使用 hello 傳輸層安全性 (TLS) 標準來保護。</span><span class="sxs-lookup"><span data-stu-id="71e6e-157">Internet connection between hello IoT device and IoT Hub is secured using hello Transport Layer Security (TLS) standard.</span></span> <span data-ttu-id="71e6e-158">Azure IoT 支援 [TLS 1.2][lnk-tls12]、TLS 1.1 和 TLS 1.0 (依此順序)。</span><span class="sxs-lookup"><span data-stu-id="71e6e-158">Azure IoT supports [TLS 1.2][lnk-tls12], TLS 1.1 and TLS 1.0, in this order.</span></span> <span data-ttu-id="71e6e-159">針對 TLS 1.0 的支援僅為提供回溯相容性。</span><span class="sxs-lookup"><span data-stu-id="71e6e-159">Support for TLS 1.0 is provided for backward compatibility only.</span></span> <span data-ttu-id="71e6e-160">因為它提供 hello 大部分的安全性建議 toouse TLS 1.2。</span><span class="sxs-lookup"><span data-stu-id="71e6e-160">It is recommended toouse TLS 1.2 since it provides hello most security.</span></span>

<span data-ttu-id="71e6e-161">Azure IoT 套件支援的加密套件，遵循這個順序的 hello。</span><span class="sxs-lookup"><span data-stu-id="71e6e-161">Azure IoT Suite supports hello following Cipher Suites, in this order.</span></span>

| <span data-ttu-id="71e6e-162">加密套件</span><span class="sxs-lookup"><span data-stu-id="71e6e-162">Cipher Suite</span></span> | <span data-ttu-id="71e6e-163">長度</span><span class="sxs-lookup"><span data-stu-id="71e6e-163">Length</span></span> |
| --- | --- |
| <span data-ttu-id="71e6e-164">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA384 (0xc028) ECDH secp384r1 (相等於</span><span class="sxs-lookup"><span data-stu-id="71e6e-164">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA384 (0xc028) ECDH secp384r1 (eq.</span></span> <span data-ttu-id="71e6e-165">7680 位元 RSA) FS</span><span class="sxs-lookup"><span data-stu-id="71e6e-165">7680 bits RSA) FS</span></span> |<span data-ttu-id="71e6e-166">256</span><span class="sxs-lookup"><span data-stu-id="71e6e-166">256</span></span> |
| <span data-ttu-id="71e6e-167">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0xc027) ECDH secp256r1 (相等於</span><span class="sxs-lookup"><span data-stu-id="71e6e-167">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0xc027) ECDH secp256r1 (eq.</span></span> <span data-ttu-id="71e6e-168">3072 位元 RSA) FS</span><span class="sxs-lookup"><span data-stu-id="71e6e-168">3072 bits RSA) FS</span></span> |<span data-ttu-id="71e6e-169">128</span><span class="sxs-lookup"><span data-stu-id="71e6e-169">128</span></span> |
| <span data-ttu-id="71e6e-170">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA (0xc014) ECDH secp384r1 (相等於</span><span class="sxs-lookup"><span data-stu-id="71e6e-170">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA (0xc014) ECDH secp384r1 (eq.</span></span> <span data-ttu-id="71e6e-171">7680 位元 RSA) FS</span><span class="sxs-lookup"><span data-stu-id="71e6e-171">7680 bits RSA) FS</span></span> |<span data-ttu-id="71e6e-172">256</span><span class="sxs-lookup"><span data-stu-id="71e6e-172">256</span></span> |
| <span data-ttu-id="71e6e-173">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA (0xc013) ECDH secp256r1 (相等於</span><span class="sxs-lookup"><span data-stu-id="71e6e-173">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA (0xc013) ECDH secp256r1 (eq.</span></span> <span data-ttu-id="71e6e-174">3072 位元 RSA) FS</span><span class="sxs-lookup"><span data-stu-id="71e6e-174">3072 bits RSA) FS</span></span> |<span data-ttu-id="71e6e-175">128</span><span class="sxs-lookup"><span data-stu-id="71e6e-175">128</span></span> |
| <span data-ttu-id="71e6e-176">TLS\_RSA\_WITH\_AES\_256\_GCM\_SHA384 (0x9d)</span><span class="sxs-lookup"><span data-stu-id="71e6e-176">TLS\_RSA\_WITH\_AES\_256\_GCM\_SHA384 (0x9d)</span></span> |<span data-ttu-id="71e6e-177">256</span><span class="sxs-lookup"><span data-stu-id="71e6e-177">256</span></span> |
| <span data-ttu-id="71e6e-178">TLS\_RSA\_WITH\_AES\_128\_GCM\_SHA256 (0x9c)</span><span class="sxs-lookup"><span data-stu-id="71e6e-178">TLS\_RSA\_WITH\_AES\_128\_GCM\_SHA256 (0x9c)</span></span> |<span data-ttu-id="71e6e-179">128</span><span class="sxs-lookup"><span data-stu-id="71e6e-179">128</span></span> |
| <span data-ttu-id="71e6e-180">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA256 (0x3d)</span><span class="sxs-lookup"><span data-stu-id="71e6e-180">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA256 (0x3d)</span></span> |<span data-ttu-id="71e6e-181">256</span><span class="sxs-lookup"><span data-stu-id="71e6e-181">256</span></span> |
| <span data-ttu-id="71e6e-182">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0x3c)</span><span class="sxs-lookup"><span data-stu-id="71e6e-182">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0x3c)</span></span> |<span data-ttu-id="71e6e-183">128</span><span class="sxs-lookup"><span data-stu-id="71e6e-183">128</span></span> |
| <span data-ttu-id="71e6e-184">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA (0x35)</span><span class="sxs-lookup"><span data-stu-id="71e6e-184">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA (0x35)</span></span> |<span data-ttu-id="71e6e-185">256</span><span class="sxs-lookup"><span data-stu-id="71e6e-185">256</span></span> |
| <span data-ttu-id="71e6e-186">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA (0x2f)</span><span class="sxs-lookup"><span data-stu-id="71e6e-186">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA (0x2f)</span></span> |<span data-ttu-id="71e6e-187">128</span><span class="sxs-lookup"><span data-stu-id="71e6e-187">128</span></span> |
| <span data-ttu-id="71e6e-188">TLS\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA (0xa)</span><span class="sxs-lookup"><span data-stu-id="71e6e-188">TLS\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA (0xa)</span></span> |<span data-ttu-id="71e6e-189">112</span><span class="sxs-lookup"><span data-stu-id="71e6e-189">112</span></span> |

## <a name="securing-hello-cloud"></a><span data-ttu-id="71e6e-190">保護 hello 雲端</span><span class="sxs-lookup"><span data-stu-id="71e6e-190">Securing hello cloud</span></span>
<span data-ttu-id="71e6e-191">Azure IoT 中樞允許針對每個安全性金鑰定義[存取控制原則][lnk-protocols]。</span><span class="sxs-lookup"><span data-stu-id="71e6e-191">Azure IoT Hub allows definition of [access control policies][lnk-protocols] for each security key.</span></span> <span data-ttu-id="71e6e-192">它會使用下列的 IoT 中樞端點的權限 toogrant 存取 tooeach 組 hello。</span><span class="sxs-lookup"><span data-stu-id="71e6e-192">It uses hello following set of permissions toogrant access tooeach of IoT Hub's endpoints.</span></span> <span data-ttu-id="71e6e-193">權限限制 hello 存取 tooan IoT 中樞根據功能。</span><span class="sxs-lookup"><span data-stu-id="71e6e-193">Permissions limit hello access tooan IoT Hub based on functionality.</span></span>

* <span data-ttu-id="71e6e-194">**RegistryRead**。</span><span class="sxs-lookup"><span data-stu-id="71e6e-194">**RegistryRead**.</span></span> <span data-ttu-id="71e6e-195">授與讀取存取 toohello 身分識別登錄。</span><span class="sxs-lookup"><span data-stu-id="71e6e-195">Grants read access toohello identity registry.</span></span> <span data-ttu-id="71e6e-196">如需詳細資訊，請參閱[身分識別登錄][lnk-identity-registry]。</span><span class="sxs-lookup"><span data-stu-id="71e6e-196">For more information, see [identity registry][lnk-identity-registry].</span></span>
* <span data-ttu-id="71e6e-197">**RegistryReadWrite**。</span><span class="sxs-lookup"><span data-stu-id="71e6e-197">**RegistryReadWrite**.</span></span> <span data-ttu-id="71e6e-198">授與讀取和寫入存取 toohello 身分識別登錄。</span><span class="sxs-lookup"><span data-stu-id="71e6e-198">Grants read and write access toohello identity registry.</span></span> <span data-ttu-id="71e6e-199">如需詳細資訊，請參閱[身分識別登錄][lnk-identity-registry]。</span><span class="sxs-lookup"><span data-stu-id="71e6e-199">For more information, see [identity registry][lnk-identity-registry].</span></span>
* <span data-ttu-id="71e6e-200">**ServiceConnect**。</span><span class="sxs-lookup"><span data-stu-id="71e6e-200">**ServiceConnect**.</span></span> <span data-ttu-id="71e6e-201">授與存取 toocloud 面對服務的通訊和監視端點。</span><span class="sxs-lookup"><span data-stu-id="71e6e-201">Grants access toocloud service-facing communication and monitoring endpoints.</span></span> <span data-ttu-id="71e6e-202">例如，它會授與權限 tooback 端雲端服務 tooreceive 裝置到雲端訊息、 將雲端到裝置訊息傳送和擷取 hello 對應傳遞通知。</span><span class="sxs-lookup"><span data-stu-id="71e6e-202">For example, it grants permission tooback-end cloud services tooreceive device-to-cloud messages, send cloud-to-device messages, and retrieve hello corresponding delivery acknowledgments.</span></span>
* <span data-ttu-id="71e6e-203">**DeviceConnect**。</span><span class="sxs-lookup"><span data-stu-id="71e6e-203">**DeviceConnect**.</span></span> <span data-ttu-id="71e6e-204">授與存取 toodevice 向端點。</span><span class="sxs-lookup"><span data-stu-id="71e6e-204">Grants access toodevice-facing endpoints.</span></span> <span data-ttu-id="71e6e-205">例如，它會授與權限 toosend 裝置到雲端訊息並接收雲端到裝置訊息。</span><span class="sxs-lookup"><span data-stu-id="71e6e-205">For example, it grants permission toosend device-to-cloud messages and receive cloud-to-device messages.</span></span> <span data-ttu-id="71e6e-206">裝置會使用此權限。</span><span class="sxs-lookup"><span data-stu-id="71e6e-206">This permission is used by devices.</span></span>

<span data-ttu-id="71e6e-207">有兩種方式 tooobtain **DeviceConnect**與 IoT 中樞與的權限[安全性語彙基元][lnk-sas-tokens]： 使用裝置識別的索引鍵或共用的存取金鑰。</span><span class="sxs-lookup"><span data-stu-id="71e6e-207">There are two ways tooobtain **DeviceConnect** permissions with IoT Hub with [security tokens][lnk-sas-tokens]: using a device identity key, or a shared access key.</span></span> <span data-ttu-id="71e6e-208">此外，它是重要的 toonote 裝置可以存取的所有功能所設計，具有前置詞端點上公開`/devices/{deviceId}`。</span><span class="sxs-lookup"><span data-stu-id="71e6e-208">Moreover, it is important toonote that all functionality accessible from devices is exposed by design on endpoints with prefix `/devices/{deviceId}`.</span></span>

<span data-ttu-id="71e6e-209">[服務元件只會產生安全性權杖][ lnk-service-tokens]使用共用存取原則授與 hello 適當的權限。</span><span class="sxs-lookup"><span data-stu-id="71e6e-209">[Service components can only generate security tokens][lnk-service-tokens] using shared access policies granting hello appropriate permissions.</span></span>

<span data-ttu-id="71e6e-210">Azure IoT 中樞及其他服務，這可能屬於 hello 方案允許使用者使用 hello Azure Active Directory 的管理。</span><span class="sxs-lookup"><span data-stu-id="71e6e-210">Azure IoT Hub and other services which may be part of hello solution allow management of users using hello Azure Active Directory.</span></span>

<span data-ttu-id="71e6e-211">由 Azure IoT 中樞內嵌的資料可供各種不同服務使用，例如 Azure 串流分析和 Azure Blob 儲存體。</span><span class="sxs-lookup"><span data-stu-id="71e6e-211">Data ingested by Azure IoT Hub can be consumed by a variety of services such as Azure Stream Analytics and Azure blob storage.</span></span> <span data-ttu-id="71e6e-212">這些服務允許管理存取。</span><span class="sxs-lookup"><span data-stu-id="71e6e-212">These services allow management access.</span></span> <span data-ttu-id="71e6e-213">在下面深入了解這些服務和可用選項：</span><span class="sxs-lookup"><span data-stu-id="71e6e-213">Read more about these services and available options below:</span></span>

* <span data-ttu-id="71e6e-214">[Azure Cosmos DB][lnk-docdb]： 管理裝置 hello 的中繼資料的半結構化資料的可擴充、 完全編製索引的資料庫服務您佈建，例如屬性、 組態和安全性內容。</span><span class="sxs-lookup"><span data-stu-id="71e6e-214">[Azure Cosmos DB][lnk-docdb]: A scalable, fully-indexed database service for semi-structured data that manages metadata for hello devices you provision, such as attributes, configuration, and security properties.</span></span> <span data-ttu-id="71e6e-215">Cosmos DB 提供高效能且高輸送量的處理、無從驗證結構描述的資料索引編製，以及豐富的 SQL 查詢介面。</span><span class="sxs-lookup"><span data-stu-id="71e6e-215">Cosmos DB offers high-performance and high-throughput processing, schema-agnostic indexing of data, and a rich SQL query interface.</span></span>
* <span data-ttu-id="71e6e-216">[Azure Stream Analytics][lnk-asa]： 即時資料流處理，可讓您 toorapidly hello 雲端中開發和部署低成本的分析解決方案 toouncover 即時見解，並從裝置感應器基礎結構，以及應用程式。</span><span class="sxs-lookup"><span data-stu-id="71e6e-216">[Azure Stream Analytics][lnk-asa]: Real-time stream processing in hello cloud that enables you toorapidly develop and deploy a low-cost analytics solution toouncover real-time insights from devices, sensors, infrastructure, and applications.</span></span> <span data-ttu-id="71e6e-217">從此完全受管理服務的 hello 資料可以調整 tooany 磁碟區，但仍然達到高輸送量、 低延遲、 和恢復功能。</span><span class="sxs-lookup"><span data-stu-id="71e6e-217">hello data from this fully-managed service can scale tooany volume while still achieving high throughput, low latency, and resiliency.</span></span>
* <span data-ttu-id="71e6e-218">[Azure 應用程式服務][lnk-appservices]： 雲端平台 toobuild 強大 web 和行動裝置應用程式連接的任何位置; toodata hello 雲端或內部部署中。</span><span class="sxs-lookup"><span data-stu-id="71e6e-218">[Azure App Services][lnk-appservices]: A cloud platform toobuild powerful web and mobile apps that connect toodata anywhere; in hello cloud or on-premises.</span></span> <span data-ttu-id="71e6e-219">建置吸引客戶參與的 iOS、Android 和 Windows 版行動應用程式。</span><span class="sxs-lookup"><span data-stu-id="71e6e-219">Build engaging mobile apps for iOS, Android, and Windows.</span></span> <span data-ttu-id="71e6e-220">整合您的軟體為服務 (SaaS) 和企業應用程式的全新連線 toodozens 的雲端服務和企業應用程式。</span><span class="sxs-lookup"><span data-stu-id="71e6e-220">Integrate with your Software as a Service (SaaS) and enterprise applications with out-of-the-box connectivity toodozens of cloud-based services and enterprise applications.</span></span> <span data-ttu-id="71e6e-221">您最愛的語言和 IDE 中的程式碼 （.NET、 Node.js、 PHP、 Python 或 Java） toobuild web 應用程式和應用程式開發介面比以前更快。</span><span class="sxs-lookup"><span data-stu-id="71e6e-221">Code in your favorite language and IDE (.NET, Node.js, PHP, Python, or Java) toobuild web apps and APIs faster than ever.</span></span>
* <span data-ttu-id="71e6e-222">[邏輯應用程式][lnk-logicapps]: hello Logic Apps 功能的 Azure 應用程式服務可協助整合 IoT 解決方案 tooyour 現有的業務系統和自動化工作流程處理序。</span><span class="sxs-lookup"><span data-stu-id="71e6e-222">[Logic Apps][lnk-logicapps]: hello Logic Apps feature of Azure App Service helps integrate your IoT solution tooyour existing line-of-business systems and automate workflow processes.</span></span> <span data-ttu-id="71e6e-223">邏輯應用程式可讓開發人員 toodesign 工作流程的觸發程序從開始，然後再執行一系列的步驟-規則和使用功能強大的連接器 toointegrate 與您的商務程序的動作。</span><span class="sxs-lookup"><span data-stu-id="71e6e-223">Logic Apps enables developers toodesign workflows that start from a trigger and then execute a series of steps—rules and actions that use powerful connectors toointegrate with your business processes.</span></span> <span data-ttu-id="71e6e-224">邏輯應用程式提供的方塊外連線 tooa vast 的生態系統 SaaS，雲端為基礎，並在內部部署應用程式。</span><span class="sxs-lookup"><span data-stu-id="71e6e-224">Logic Apps offers out-of-the-box connectivity tooa vast ecosystem of SaaS, cloud-based, and on-premises applications.</span></span>
* <span data-ttu-id="71e6e-225">[Azure blob 儲存體][lnk-blob]： 您的裝置傳送 toohello 雲端的 hello 資料的可靠且經濟的雲端儲存體。</span><span class="sxs-lookup"><span data-stu-id="71e6e-225">[Azure blob storage][lnk-blob]: Reliable, economical cloud storage for hello data that your devices send toohello cloud.</span></span>

## <a name="conclusion"></a><span data-ttu-id="71e6e-226">結論</span><span class="sxs-lookup"><span data-stu-id="71e6e-226">Conclusion</span></span>
<span data-ttu-id="71e6e-227">本文提供使用 Azure IoT 設計和部署 IoT 基礎結構的實作層級詳細資料概觀。</span><span class="sxs-lookup"><span data-stu-id="71e6e-227">This article provides overview of implementation level details for designing and deploying an IoT infrastructure using Azure IoT.</span></span> <span data-ttu-id="71e6e-228">設定每個元件 toobe 安全是金鑰保護 hello 整體 IoT 基礎結構。</span><span class="sxs-lookup"><span data-stu-id="71e6e-228">Configuring each component toobe secure is key in securing hello overall IoT infrastructure.</span></span> <span data-ttu-id="71e6e-229">Azure IoT 中可用的 hello 設計選項提供某種程度的彈性和選擇。不過，每個選項可能會有安全性隱憂。</span><span class="sxs-lookup"><span data-stu-id="71e6e-229">hello design choices available in Azure IoT provide some level of flexibility and choice; however, each choice may have security implications.</span></span> <span data-ttu-id="71e6e-230">建議您透過風險/成本評估謹慎評估每個選擇。</span><span class="sxs-lookup"><span data-stu-id="71e6e-230">It is recommended that each of these choices be evaluated through a risk/cost assessment.</span></span>

## <a name="see-also"></a><span data-ttu-id="71e6e-231">另請參閱</span><span class="sxs-lookup"><span data-stu-id="71e6e-231">See also</span></span>
<span data-ttu-id="71e6e-232">您也可以探索 hello 的某些其他特性和功能 hello IoT 套件預先設定的解決方案：</span><span class="sxs-lookup"><span data-stu-id="71e6e-232">You can also explore some of hello other features and capabilities of hello IoT Suite preconfigured solutions:</span></span>

* <span data-ttu-id="71e6e-233">[預先設定的預防性維護解決方案概觀][lnk-predictive-overview]</span><span class="sxs-lookup"><span data-stu-id="71e6e-233">[Predictive maintenance preconfigured solution overview][lnk-predictive-overview]</span></span>
* <span data-ttu-id="71e6e-234">[IoT 套件的常見問題集][lnk-faq]</span><span class="sxs-lookup"><span data-stu-id="71e6e-234">[Frequently asked questions for IoT Suite][lnk-faq]</span></span>

<span data-ttu-id="71e6e-235">您可以閱讀 IoT 中樞中的安全性[控制存取 tooIoT 中樞][ lnk-devguide-security] hello IoT 中樞開發人員指南 》 中。</span><span class="sxs-lookup"><span data-stu-id="71e6e-235">You can read about IoT Hub security in [Control access tooIoT Hub][lnk-devguide-security] in hello IoT Hub developer guide.</span></span>


[img-overview]: media/iot-suite-security-deployment/overview.png

[lnk-security-tokens]: ../iot-hub/iot-hub-devguide-security.md#security-token-structure
[lnk-sas-tokens]: ../iot-hub/iot-hub-devguide-security.md#use-sas-tokens-in-a-device-app
[lnk-identity-registry]: ../iot-hub/iot-hub-devguide-identity-registry.md
[lnk-protocols]: ../iot-hub/iot-hub-devguide-security.md
[lnk-custom-auth]: ../iot-hub/iot-hub-devguide-security.md#custom-device-authentication
[lnk-x509]: http://www.itu.int/rec/T-REC-X.509-201210-I/en
[lnk-tls12]: https://tools.ietf.org/html/rfc5246
[lnk-service-tokens]: ../iot-hub/iot-hub-devguide-security.md#use-security-tokens-from-service-components
[lnk-docdb]: https://azure.microsoft.com/services/documentdb/
[lnk-asa]: https://azure.microsoft.com/services/stream-analytics/
[lnk-appservices]: https://azure.microsoft.com/services/app-service/
[lnk-logicapps]: https://azure.microsoft.com/services/app-service/logic/
[lnk-blob]: https://azure.microsoft.com/services/storage/

[lnk-predictive-overview]: iot-suite-predictive-overview.md
[lnk-faq]: iot-suite-faq.md
[lnk-devguide-security]: ../iot-hub/iot-hub-devguide-security.md
