---
title: "aaaCryptography-Microsoft 威脅模型化工具-Azure |Microsoft 文件"
description: "hello 威脅模型化工具中公開的威脅防護功能"
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: cab981bf116a0e76bbf44fe0f0a1a3650e4ab0f8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="security-frame-cryptography--mitigations"></a><span data-ttu-id="e807a-103">安全性架構︰密碼編譯 | 風險降低</span><span class="sxs-lookup"><span data-stu-id="e807a-103">Security Frame: Cryptography | Mitigations</span></span> 
| <span data-ttu-id="e807a-104">產品/服務</span><span class="sxs-lookup"><span data-stu-id="e807a-104">Product/Service</span></span> | <span data-ttu-id="e807a-105">文章</span><span class="sxs-lookup"><span data-stu-id="e807a-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="e807a-106">**Web 應用程式**</span><span class="sxs-lookup"><span data-stu-id="e807a-106">**Web Application**</span></span> | <ul><li>[<span data-ttu-id="e807a-107">只使用核准的對稱區塊編碼器和金鑰長度</span><span class="sxs-lookup"><span data-stu-id="e807a-107">Use only approved symmetric block ciphers and key lengths</span></span>](#cipher-length)</li><li>[<span data-ttu-id="e807a-108">針對對稱編碼器使用核准的區塊編碼器模式和初始化向量</span><span class="sxs-lookup"><span data-stu-id="e807a-108">Use approved block cipher modes and initialization vectors for symmetric ciphers</span></span>](#vector-ciphers)</li><li>[<span data-ttu-id="e807a-109">使用核准的非對稱演算法、金鑰長度和填補</span><span class="sxs-lookup"><span data-stu-id="e807a-109">Use approved asymmetric algorithms, key lengths, and padding</span></span>](#padding)</li><li>[<span data-ttu-id="e807a-110">使用核准的亂數產生器</span><span class="sxs-lookup"><span data-stu-id="e807a-110">Use approved random number generators</span></span>](#numgen)</li><li>[<span data-ttu-id="e807a-111">請勿使用對稱串流編碼器</span><span class="sxs-lookup"><span data-stu-id="e807a-111">Do not use symmetric stream ciphers</span></span>](#stream-ciphers)</li><li>[<span data-ttu-id="e807a-112">使用核准的 MAC/HMAC/索引雜湊演算法</span><span class="sxs-lookup"><span data-stu-id="e807a-112">Use approved MAC/HMAC/keyed hash algorithms</span></span>](#mac-hash)</li><li>[<span data-ttu-id="e807a-113">只使用核准的密碼編譯雜湊函式</span><span class="sxs-lookup"><span data-stu-id="e807a-113">Use only approved cryptographic hash functions</span></span>](#hash-functions)</li></ul> |
| <span data-ttu-id="e807a-114">**資料庫**</span><span class="sxs-lookup"><span data-stu-id="e807a-114">**Database**</span></span> | <ul><li>[<span data-ttu-id="e807a-115">在 hello 資料庫中使用強式加密演算法 tooencrypt 資料</span><span class="sxs-lookup"><span data-stu-id="e807a-115">Use strong encryption algorithms tooencrypt data in hello database</span></span>](#strong-db)</li><li>[<span data-ttu-id="e807a-116">SSIS 套件應予以加密和數位簽章</span><span class="sxs-lookup"><span data-stu-id="e807a-116">SSIS packages should be encrypted and digitally signed</span></span>](#ssis-signed)</li><li>[<span data-ttu-id="e807a-117">新增數位簽章 toocritical 資料庫安全性實體</span><span class="sxs-lookup"><span data-stu-id="e807a-117">Add digital signature toocritical database securables</span></span>](#securables-db)</li><li>[<span data-ttu-id="e807a-118">使用 SQL server EKM tooprotect 加密金鑰</span><span class="sxs-lookup"><span data-stu-id="e807a-118">Use SQL server EKM tooprotect encryption keys</span></span>](#ekm-keys)</li><li>[<span data-ttu-id="e807a-119">如果加密金鑰不能展現的 tooDatabase 引擎，使用永遠加密功能</span><span class="sxs-lookup"><span data-stu-id="e807a-119">Use AlwaysEncrypted feature if encryption keys should not be revealed tooDatabase engine</span></span>](#keys-engine)</li></ul> |
| <span data-ttu-id="e807a-120">**IoT 裝置**</span><span class="sxs-lookup"><span data-stu-id="e807a-120">**IoT Device**</span></span> | <ul><li>[<span data-ttu-id="e807a-121">在 IoT 裝置上安全地儲存密碼編譯金鑰</span><span class="sxs-lookup"><span data-stu-id="e807a-121">Store Cryptographic Keys securely on IoT Device</span></span>](#keys-iot)</li></ul> | 
| <span data-ttu-id="e807a-122">**IoT 雲端閘道**</span><span class="sxs-lookup"><span data-stu-id="e807a-122">**IoT Cloud Gateway**</span></span> | <ul><li>[<span data-ttu-id="e807a-123">產生的隨機對稱金鑰的長度足夠驗證 tooIoT 中樞</span><span class="sxs-lookup"><span data-stu-id="e807a-123">Generate a random symmetric key of sufficient length for authentication tooIoT Hub</span></span>](#random-hub)</li></ul> | 
| <span data-ttu-id="e807a-124">**Dynamics CRM 行動用戶端**</span><span class="sxs-lookup"><span data-stu-id="e807a-124">**Dynamics CRM Mobile Client**</span></span> | <ul><li>[<span data-ttu-id="e807a-125">確定已備妥需要使用 PIN 並允許遠端抹除的裝置管理原則</span><span class="sxs-lookup"><span data-stu-id="e807a-125">Ensure a device management policy is in place that requires a use PIN and allows remote wiping</span></span>](#pin-remote)</li></ul> | 
| <span data-ttu-id="e807a-126">**Dynamics CRM Outlook 用戶端**</span><span class="sxs-lookup"><span data-stu-id="e807a-126">**Dynamics CRM Outlook Client**</span></span> | <ul><li>[<span data-ttu-id="e807a-127">確定已備妥需要 PIN/密碼/自動鎖定並會加密所有資料的裝置管理原則 (例如 Bitlocker)</span><span class="sxs-lookup"><span data-stu-id="e807a-127">Ensure a device management policy is in place that requires a PIN/password/auto lock and encrypts all data (e.g. Bitlocker)</span></span>](#bitlocker)</li></ul> | 
| <span data-ttu-id="e807a-128">**Identity Server**</span><span class="sxs-lookup"><span data-stu-id="e807a-128">**Identity Server**</span></span> | <ul><li>[<span data-ttu-id="e807a-129">確定在使用 Identity Server 時會變換簽署金鑰</span><span class="sxs-lookup"><span data-stu-id="e807a-129">Ensure that signing keys are rolled over when using Identity Server</span></span>](#rolled-server)</li><li>[<span data-ttu-id="e807a-130">確定 Identity Server 會使用密碼編譯增強式用戶端識別碼和用戶端祕密</span><span class="sxs-lookup"><span data-stu-id="e807a-130">Ensure that cryptographically strong client ID, client secret are used in Identity Server</span></span>](#client-server)</li></ul> | 

## <span data-ttu-id="e807a-131"><a id="cipher-length"></a>只使用核准的對稱區塊編碼器和金鑰長度</span><span class="sxs-lookup"><span data-stu-id="e807a-131"><a id="cipher-length"></a>Use only approved symmetric block ciphers and key lengths</span></span>

| <span data-ttu-id="e807a-132">Title</span><span class="sxs-lookup"><span data-stu-id="e807a-132">Title</span></span>                   | <span data-ttu-id="e807a-133">詳細資料</span><span class="sxs-lookup"><span data-stu-id="e807a-133">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="e807a-134">**元件**</span><span class="sxs-lookup"><span data-stu-id="e807a-134">**Component**</span></span>               | <span data-ttu-id="e807a-135">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="e807a-135">Web Application</span></span> | 
| <span data-ttu-id="e807a-136">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="e807a-136">**SDL Phase**</span></span>               | <span data-ttu-id="e807a-137">建置</span><span class="sxs-lookup"><span data-stu-id="e807a-137">Build</span></span> |  
| <span data-ttu-id="e807a-138">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="e807a-138">**Applicable Technologies**</span></span> | <span data-ttu-id="e807a-139">泛型</span><span class="sxs-lookup"><span data-stu-id="e807a-139">Generic</span></span> |
| <span data-ttu-id="e807a-140">**屬性**</span><span class="sxs-lookup"><span data-stu-id="e807a-140">**Attributes**</span></span>              | <span data-ttu-id="e807a-141">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-141">N/A</span></span>  |
| <span data-ttu-id="e807a-142">**參考**</span><span class="sxs-lookup"><span data-stu-id="e807a-142">**References**</span></span>              | <span data-ttu-id="e807a-143">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-143">N/A</span></span>  |
| <span data-ttu-id="e807a-144">**步驟**</span><span class="sxs-lookup"><span data-stu-id="e807a-144">**Steps**</span></span> | <p><span data-ttu-id="e807a-145">對稱的區塊密碼和相關聯的金鑰長度的已明確地核准您的組織中的 hello 密碼編譯警告器，必須使用產品。</span><span class="sxs-lookup"><span data-stu-id="e807a-145">Products must use only those symmetric block ciphers and associated key lengths which have been explicitly approved by hello Crypto Advisor in your organization.</span></span> <span data-ttu-id="e807a-146">在 Microsoft 核准對稱演算法包括 hello 遵循區塊密碼：</span><span class="sxs-lookup"><span data-stu-id="e807a-146">Approved symmetric algorithms at Microsoft include hello following block ciphers:</span></span></p><ul><li><span data-ttu-id="e807a-147">對於新的程式碼，可接受 AES-128、AES-192 和 AES-256</span><span class="sxs-lookup"><span data-stu-id="e807a-147">For new code AES-128, AES-192, and AES-256 are acceptable</span></span></li><li><span data-ttu-id="e807a-148">對於現有程式碼的回溯相容性，可接受三金鑰 3DES</span><span class="sxs-lookup"><span data-stu-id="e807a-148">For backward compatibility with existing code, three-key 3DES is acceptable</span></span></li><li><span data-ttu-id="e807a-149">對於使用對稱區塊編碼器的產品︰</span><span class="sxs-lookup"><span data-stu-id="e807a-149">For products using symmetric block ciphers:</span></span><ul><li><span data-ttu-id="e807a-150">新的程式碼需要進階加密標準 (AES)</span><span class="sxs-lookup"><span data-stu-id="e807a-150">Advanced Encryption Standard (AES) is required for new code</span></span></li><li><span data-ttu-id="e807a-151">為了回溯相容性，現有程式碼允許三金鑰三重資料加密標準 (3DES)</span><span class="sxs-lookup"><span data-stu-id="e807a-151">Three-key triple Data Encryption Standard (3DES) is permissible in existing code for backward compatibility</span></span></li><li><span data-ttu-id="e807a-152">其他所有區塊編碼器 (包括 RC2、DES、兩金鑰 3DES、DESX 和 Skipjack) 只能用於解密舊資料，若用於加密，則必須加以取代</span><span class="sxs-lookup"><span data-stu-id="e807a-152">All other block ciphers, including RC2, DES, 2 Key 3DES, DESX, and Skipjack, may only be used for decrypting old data, and must be replaced if used for encryption</span></span></li></ul></li><li><span data-ttu-id="e807a-153">對稱區塊加密演算法需要至少 128 位元的金鑰長度。</span><span class="sxs-lookup"><span data-stu-id="e807a-153">For symmetric block encryption algorithms, a minimum key length of 128 bits is required.</span></span> <span data-ttu-id="e807a-154">hello 僅建議用於新的程式碼的區塊加密演算法是 AES （AES 128、 AES 192 和 AES 256 均可接受）</span><span class="sxs-lookup"><span data-stu-id="e807a-154">hello only block encryption algorithm recommended for new code is AES (AES-128, AES-192 and AES-256 are all acceptable)</span></span></li><li><span data-ttu-id="e807a-155">三個索引鍵 3DES 是目前可接受，如果已在使用中現有的程式碼。建議您轉換 tooAES。</span><span class="sxs-lookup"><span data-stu-id="e807a-155">Three-key 3DES is currently acceptable if already in use in existing code; transition tooAES is recommended.</span></span> <span data-ttu-id="e807a-156">DES、DESX、RC2 和 Skipjack 不再被視為是安全的。</span><span class="sxs-lookup"><span data-stu-id="e807a-156">DES, DESX, RC2, and Skipjack are no longer considered secure.</span></span> <span data-ttu-id="e807a-157">這些演算法可能只用於解密 hello 起見，回溯相容性的現有資料，應該重新加密資料使用建議的區塊編碼器</span><span class="sxs-lookup"><span data-stu-id="e807a-157">These algorithms may only be used for decrypting existing data for hello sake of backward-compatibility, and data should be re-encrypted using a recommended block cipher</span></span></li></ul><p><span data-ttu-id="e807a-158">請注意，所有的對稱區塊編碼器都必須搭配核准的編碼器模式使用，此模式需要使用適當的初始化向量 (IV)。</span><span class="sxs-lookup"><span data-stu-id="e807a-158">Please note that all symmetric block ciphers must be used with an approved cipher mode, which requires use of an appropriate initialization vector (IV).</span></span> <span data-ttu-id="e807a-159">適當的 IV 通常是亂數，而絕不會是常數值</span><span class="sxs-lookup"><span data-stu-id="e807a-159">An appropriate IV, is typically a random number and never a constant value</span></span></p><p><span data-ttu-id="e807a-160">貴組織的密碼編譯面板檢閱之後，可能會允許將使用舊版或其他未核准的密碼編譯演算法和較小的金鑰長度 hello 讀取現有資料 （相對於的 toowriting 新資料）。</span><span class="sxs-lookup"><span data-stu-id="e807a-160">hello use of legacy or otherwise unapproved crypto algorithms and smaller key lengths for reading existing data (as opposed toowriting new data) may be permitted after your organization's Crypto Board review.</span></span> <span data-ttu-id="e807a-161">不過，您必須針對這項需求申請例外狀況。</span><span class="sxs-lookup"><span data-stu-id="e807a-161">However, you must file for an exception against this requirement.</span></span> <span data-ttu-id="e807a-162">此外，在企業部署中的產品時應該考慮警告系統管理員不安全加密編譯是使用的 tooread 資料。</span><span class="sxs-lookup"><span data-stu-id="e807a-162">Additionally, in enterprise deployments, products should consider warning administrators when weak crypto is used tooread data.</span></span> <span data-ttu-id="e807a-163">此類警告應清楚說明原因並提供可採取的動作。</span><span class="sxs-lookup"><span data-stu-id="e807a-163">Such warnings should be explanatory and actionable.</span></span> <span data-ttu-id="e807a-164">在某些情況下，可能是適當 toohave 群組原則控制 hello 使用弱式密碼編譯</span><span class="sxs-lookup"><span data-stu-id="e807a-164">In some cases, it may be appropriate toohave Group Policy control hello use of weak crypto</span></span></p><p><span data-ttu-id="e807a-165">為了實現受管理的密碼編譯靈活性所允許的 .NET 演算法 (依偏好順序)</span><span class="sxs-lookup"><span data-stu-id="e807a-165">Allowed .NET algorithms for managed crypto agility (in order of preference)</span></span></p><ul><li><span data-ttu-id="e807a-166">AesCng (符合 FIPS 規範)</span><span class="sxs-lookup"><span data-stu-id="e807a-166">AesCng (FIPS compliant)</span></span></li><li><span data-ttu-id="e807a-167">AuthenticatedAesCng (符合 FIPS 規範)</span><span class="sxs-lookup"><span data-stu-id="e807a-167">AuthenticatedAesCng (FIPS compliant)</span></span></li><li><span data-ttu-id="e807a-168">AESCryptoServiceProvider (符合 FIPS 規範)</span><span class="sxs-lookup"><span data-stu-id="e807a-168">AESCryptoServiceProvider (FIPS compliant)</span></span></li><li><span data-ttu-id="e807a-169">AESManaged (不符合 FIPS 規範)</span><span class="sxs-lookup"><span data-stu-id="e807a-169">AESManaged (non-FIPS-compliant)</span></span></li></ul><p><span data-ttu-id="e807a-170">請注意 無這些演算法可以指定透過 hello`SymmetricAlgorithm.Create`或`CryptoConfig.CreateFromName`而不進行變更 toohello machine.config 檔案的方法。</span><span class="sxs-lookup"><span data-stu-id="e807a-170">Please note that none of these algorithms can be specified via hello `SymmetricAlgorithm.Create` or `CryptoConfig.CreateFromName` methods without making changes toohello machine.config file.</span></span> <span data-ttu-id="e807a-171">此外，請注意 AES.NET 先前 too.NET 3.5 版本中的名為`RijndaelManaged`，和`AesCng`和`AuthenticatedAesCng`是 > 可透過 CodePlex 和 hello 基礎作業系統所需 CNG</span><span class="sxs-lookup"><span data-stu-id="e807a-171">Also, note that AES in versions of .NET prior too.NET 3.5 is named `RijndaelManaged`, and `AesCng` and `AuthenticatedAesCng` are >available through CodePlex and require CNG in hello underlying OS</span></span></p>

## <span data-ttu-id="e807a-172"><a id="vector-ciphers"></a>針對對稱編碼器使用核准的區塊編碼器模式和初始化向量</span><span class="sxs-lookup"><span data-stu-id="e807a-172"><a id="vector-ciphers"></a>Use approved block cipher modes and initialization vectors for symmetric ciphers</span></span>

| <span data-ttu-id="e807a-173">Title</span><span class="sxs-lookup"><span data-stu-id="e807a-173">Title</span></span>                   | <span data-ttu-id="e807a-174">詳細資料</span><span class="sxs-lookup"><span data-stu-id="e807a-174">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="e807a-175">**元件**</span><span class="sxs-lookup"><span data-stu-id="e807a-175">**Component**</span></span>               | <span data-ttu-id="e807a-176">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="e807a-176">Web Application</span></span> | 
| <span data-ttu-id="e807a-177">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="e807a-177">**SDL Phase**</span></span>               | <span data-ttu-id="e807a-178">建置</span><span class="sxs-lookup"><span data-stu-id="e807a-178">Build</span></span> |  
| <span data-ttu-id="e807a-179">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="e807a-179">**Applicable Technologies**</span></span> | <span data-ttu-id="e807a-180">泛型</span><span class="sxs-lookup"><span data-stu-id="e807a-180">Generic</span></span> |
| <span data-ttu-id="e807a-181">**屬性**</span><span class="sxs-lookup"><span data-stu-id="e807a-181">**Attributes**</span></span>              | <span data-ttu-id="e807a-182">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-182">N/A</span></span>  |
| <span data-ttu-id="e807a-183">**參考**</span><span class="sxs-lookup"><span data-stu-id="e807a-183">**References**</span></span>              | <span data-ttu-id="e807a-184">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-184">N/A</span></span>  |
| <span data-ttu-id="e807a-185">**步驟**</span><span class="sxs-lookup"><span data-stu-id="e807a-185">**Steps**</span></span> | <span data-ttu-id="e807a-186">所有的對稱區塊編碼器都必須搭配核准的對稱編碼器模式使用。</span><span class="sxs-lookup"><span data-stu-id="e807a-186">All symmetric block ciphers must be used with an approved symmetric cipher mode.</span></span> <span data-ttu-id="e807a-187">僅將核准的 hello 模式是 CBC 及 CTS。</span><span class="sxs-lookup"><span data-stu-id="e807a-187">hello only approved modes are CBC and CTS.</span></span> <span data-ttu-id="e807a-188">特別是，您應該避免 hello 電子代碼活頁簿 (ECB) 模式的作業;使用 ECB 需要您的組織 Crypto 面板檢閱。</span><span class="sxs-lookup"><span data-stu-id="e807a-188">In particular, hello electronic code book (ECB) mode of operation should be avoided; use of ECB requires your organization's Crypto Board review.</span></span> <span data-ttu-id="e807a-189">OFB、CFB、CTR、CCM 和 GCM 或其他任何加密模式的使用，全都必須通過組織的密碼編譯委員會審核。</span><span class="sxs-lookup"><span data-stu-id="e807a-189">All usage of OFB, CFB, CTR, CCM, and GCM or any other encryption mode must be reviewed by your organization's Crypto Board.</span></span> <span data-ttu-id="e807a-190">重複使用相同 hello 與在 「 資料流這類編碼器模式中，「 CTR，例如區塊加密的初始化向量 (IV) 可能會導致加密的資料 toobe 揭露。</span><span class="sxs-lookup"><span data-stu-id="e807a-190">Reusing hello same initialization vector (IV) with block ciphers in "streaming ciphers modes," such as CTR, may cause encrypted data toobe revealed.</span></span> <span data-ttu-id="e807a-191">所有的對稱區塊編碼器也必須搭配適當的初始化向量 (IV) 使用。</span><span class="sxs-lookup"><span data-stu-id="e807a-191">All symmetric block ciphers must also be used with an appropriate initialization vector (IV).</span></span> <span data-ttu-id="e807a-192">適當的 IV 是指密碼編譯增強式亂數，而絕不會是常數值。</span><span class="sxs-lookup"><span data-stu-id="e807a-192">An appropriate IV is a cryptographically strong, random number and never a constant value.</span></span> |

## <span data-ttu-id="e807a-193"><a id="padding"></a>使用核准的非對稱演算法、金鑰長度和填補</span><span class="sxs-lookup"><span data-stu-id="e807a-193"><a id="padding"></a>Use approved asymmetric algorithms, key lengths, and padding</span></span>

| <span data-ttu-id="e807a-194">Title</span><span class="sxs-lookup"><span data-stu-id="e807a-194">Title</span></span>                   | <span data-ttu-id="e807a-195">詳細資料</span><span class="sxs-lookup"><span data-stu-id="e807a-195">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="e807a-196">**元件**</span><span class="sxs-lookup"><span data-stu-id="e807a-196">**Component**</span></span>               | <span data-ttu-id="e807a-197">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="e807a-197">Web Application</span></span> | 
| <span data-ttu-id="e807a-198">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="e807a-198">**SDL Phase**</span></span>               | <span data-ttu-id="e807a-199">建置</span><span class="sxs-lookup"><span data-stu-id="e807a-199">Build</span></span> |  
| <span data-ttu-id="e807a-200">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="e807a-200">**Applicable Technologies**</span></span> | <span data-ttu-id="e807a-201">泛型</span><span class="sxs-lookup"><span data-stu-id="e807a-201">Generic</span></span> |
| <span data-ttu-id="e807a-202">**屬性**</span><span class="sxs-lookup"><span data-stu-id="e807a-202">**Attributes**</span></span>              | <span data-ttu-id="e807a-203">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-203">N/A</span></span>  |
| <span data-ttu-id="e807a-204">**參考**</span><span class="sxs-lookup"><span data-stu-id="e807a-204">**References**</span></span>              | <span data-ttu-id="e807a-205">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-205">N/A</span></span>  |
| <span data-ttu-id="e807a-206">**步驟**</span><span class="sxs-lookup"><span data-stu-id="e807a-206">**Steps**</span></span> | <p><span data-ttu-id="e807a-207">禁止的密碼編譯演算法的 hello 使用引進了極大的風險 tooproduct 安全性，且必須予以避免。</span><span class="sxs-lookup"><span data-stu-id="e807a-207">hello use of banned cryptographic algorithms introduces significant risk tooproduct security and must be avoided.</span></span> <span data-ttu-id="e807a-208">產品只能使用組織的密碼編譯委員會已明確核准的密碼編譯演算法及相關聯的金鑰長度和填補。</span><span class="sxs-lookup"><span data-stu-id="e807a-208">Products must use only those cryptographic algorithms and associated key lengths and padding that have been explicitly approved by your organization's Crypto Board.</span></span></p><ul><li><span data-ttu-id="e807a-209">**RSA-** 可用於加密、金鑰交換和簽章。</span><span class="sxs-lookup"><span data-stu-id="e807a-209">**RSA-** may be used for encryption, key exchange and signature.</span></span> <span data-ttu-id="e807a-210">RSA 加密，必須使用只進行 hello OAEP 或 RSA KEM 填補模式。</span><span class="sxs-lookup"><span data-stu-id="e807a-210">RSA encryption must use only hello OAEP or RSA-KEM padding modes.</span></span> <span data-ttu-id="e807a-211">現有程式碼只能在為了相容性因素時使用 PKCS #1 v1.5 填補模式。</span><span class="sxs-lookup"><span data-stu-id="e807a-211">Existing code may use PKCS #1 v1.5 padding mode for compatibility only.</span></span> <span data-ttu-id="e807a-212">明確禁止使用 null 填補。</span><span class="sxs-lookup"><span data-stu-id="e807a-212">Use of null padding is explicitly banned.</span></span> <span data-ttu-id="e807a-213">新的程式碼需要 > = 2048 位元的金鑰。</span><span class="sxs-lookup"><span data-stu-id="e807a-213">Keys >= 2048 bits is required for new code.</span></span> <span data-ttu-id="e807a-214">在經過貴組織的密碼編譯委員會審核之後，現有程式碼也可支援 < 2048 位元的金鑰，但只能用於實現回溯相容性。</span><span class="sxs-lookup"><span data-stu-id="e807a-214">Existing code may support keys < 2048 bits only for backwards compatibility after a review by your organization's Crypto Board.</span></span> <span data-ttu-id="e807a-215">< 1024 位元的金鑰只能用於解密/驗證舊資料，若用於加密或簽署作業，則必須加以取代</span><span class="sxs-lookup"><span data-stu-id="e807a-215">Keys < 1024 bits may only be used for decrypting/verifying old data, and must be replaced if used for encryption or signing operations</span></span></li><li><span data-ttu-id="e807a-216">**ECDSA-** 只能用於簽章。</span><span class="sxs-lookup"><span data-stu-id="e807a-216">**ECDSA-** may be used for signature only.</span></span> <span data-ttu-id="e807a-217">新的程式碼需要金鑰位元數 > = 256 的 ECDSA。</span><span class="sxs-lookup"><span data-stu-id="e807a-217">ECDSA with >=256-bit keys is required for new code.</span></span> <span data-ttu-id="e807a-218">ECDSA 為基礎的簽章必須使用其中一個 hello 三個核准 NIST 曲線 (P-256、 P-384 或 P521)。</span><span class="sxs-lookup"><span data-stu-id="e807a-218">ECDSA-based signatures must use one of hello three NIST approved curves (P-256, P-384, or P521).</span></span> <span data-ttu-id="e807a-219">在經過貴組織的密碼編譯委員會審核之後，才能使用已經過徹底分析的曲線。</span><span class="sxs-lookup"><span data-stu-id="e807a-219">Curves that have been thoroughly analyzed may be used only after a review with your organization's Crypto Board.</span></span></li><li><span data-ttu-id="e807a-220">**ECDH-** 只能用於金鑰交換。</span><span class="sxs-lookup"><span data-stu-id="e807a-220">**ECDH-** may be used for key exchange only.</span></span> <span data-ttu-id="e807a-221">新的程式碼需要金鑰位元數 > = 256 的 ECDH。</span><span class="sxs-lookup"><span data-stu-id="e807a-221">ECDH with >=256-bit keys is required for new code.</span></span> <span data-ttu-id="e807a-222">ECDH 為基礎的金鑰交換必須使用其中一個 hello 三個核准 NIST 曲線 (P-256、 P-384 或 P521)。</span><span class="sxs-lookup"><span data-stu-id="e807a-222">ECDH-based key exchange must use one of hello three NIST approved curves (P-256, P-384, or P521).</span></span> <span data-ttu-id="e807a-223">在經過貴組織的密碼編譯委員會審核之後，才能使用已經過徹底分析的曲線。</span><span class="sxs-lookup"><span data-stu-id="e807a-223">Curves that have been thoroughly analyzed may be used only after a review with your organization's Crypto Board.</span></span></li><li><span data-ttu-id="e807a-224">**DSA-** 在經過貴組織的密碼編譯委員會審核並核准之後即可接受。</span><span class="sxs-lookup"><span data-stu-id="e807a-224">**DSA-** may be acceptable after review and approval from your organization's Crypto Board.</span></span> <span data-ttu-id="e807a-225">請連絡您的安全性 advisor tooschedule 貴組織的密碼編譯面板檢閱。</span><span class="sxs-lookup"><span data-stu-id="e807a-225">Contact your security advisor tooschedule your organization's Crypto Board review.</span></span> <span data-ttu-id="e807a-226">如果貴用戶使用 DSA 核准之後，請注意，您將需要 tooprohibit 使用金鑰的長度小於 2048 位元。</span><span class="sxs-lookup"><span data-stu-id="e807a-226">If your use of DSA is approved, note that you will need tooprohibit use of keys less than 2048 bits in length.</span></span> <span data-ttu-id="e807a-227">自 Windows 8 開始，CNG 支援長度為 2048 位元 (含) 以上的金鑰。</span><span class="sxs-lookup"><span data-stu-id="e807a-227">CNG supports 2048-bit and greater key lengths as of Windows 8.</span></span></li><li><span data-ttu-id="e807a-228">**Diffie-Hellman-** 只能用於工作階段金鑰管理。</span><span class="sxs-lookup"><span data-stu-id="e807a-228">**Diffie-Hellman-** may be used for session key management only.</span></span> <span data-ttu-id="e807a-229">新的程式碼需要長度 > = 2048 位元的金鑰。</span><span class="sxs-lookup"><span data-stu-id="e807a-229">Key length >= 2048 bits is required for new code.</span></span> <span data-ttu-id="e807a-230">在經過貴組織的密碼編譯委員會審核之後，現有程式碼也可支援長度 < 2048 位元的金鑰，但只能用於實現回溯相容性。</span><span class="sxs-lookup"><span data-stu-id="e807a-230">Existing code may support key lengths < 2048 bits only for backwards compatibility after a review by your organization's Crypto Board.</span></span> <span data-ttu-id="e807a-231">不得使用 < 1024 位元的金鑰。</span><span class="sxs-lookup"><span data-stu-id="e807a-231">Keys < 1024 bits may not be used.</span></span></li><ul>

## <span data-ttu-id="e807a-232"><a id="numgen"></a>使用核准的亂數產生器</span><span class="sxs-lookup"><span data-stu-id="e807a-232"><a id="numgen"></a>Use approved random number generators</span></span>

| <span data-ttu-id="e807a-233">Title</span><span class="sxs-lookup"><span data-stu-id="e807a-233">Title</span></span>                   | <span data-ttu-id="e807a-234">詳細資料</span><span class="sxs-lookup"><span data-stu-id="e807a-234">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="e807a-235">**元件**</span><span class="sxs-lookup"><span data-stu-id="e807a-235">**Component**</span></span>               | <span data-ttu-id="e807a-236">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="e807a-236">Web Application</span></span> | 
| <span data-ttu-id="e807a-237">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="e807a-237">**SDL Phase**</span></span>               | <span data-ttu-id="e807a-238">建置</span><span class="sxs-lookup"><span data-stu-id="e807a-238">Build</span></span> |  
| <span data-ttu-id="e807a-239">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="e807a-239">**Applicable Technologies**</span></span> | <span data-ttu-id="e807a-240">泛型</span><span class="sxs-lookup"><span data-stu-id="e807a-240">Generic</span></span> |
| <span data-ttu-id="e807a-241">**屬性**</span><span class="sxs-lookup"><span data-stu-id="e807a-241">**Attributes**</span></span>              | <span data-ttu-id="e807a-242">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-242">N/A</span></span>  |
| <span data-ttu-id="e807a-243">**參考**</span><span class="sxs-lookup"><span data-stu-id="e807a-243">**References**</span></span>              | <span data-ttu-id="e807a-244">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-244">N/A</span></span>  |
| <span data-ttu-id="e807a-245">**步驟**</span><span class="sxs-lookup"><span data-stu-id="e807a-245">**Steps**</span></span> | <p><span data-ttu-id="e807a-246">產品必須使用核准的亂數產生器。</span><span class="sxs-lookup"><span data-stu-id="e807a-246">Products must use approved random number generators.</span></span> <span data-ttu-id="e807a-247">虛擬亂數的函式，例如 hello C 執行階段函式 rand、 hello.NET Framework 類別 System.Random 或系統函數，例如 GetTickCount 必須，因此，永遠不會使用這類程式碼中。</span><span class="sxs-lookup"><span data-stu-id="e807a-247">Pseudorandom functions such as hello C runtime function rand, hello .NET Framework class System.Random, or system functions such as GetTickCount must, therefore, never be used in such code.</span></span> <span data-ttu-id="e807a-248">禁止使用 hello 雙重橢圓曲線亂數產生器 (DUAL_EC_DRBG) 演算法</span><span class="sxs-lookup"><span data-stu-id="e807a-248">Use of hello dual elliptic curve random number generator (DUAL_EC_DRBG) algorithm is prohibited</span></span></p><ul><li><span data-ttu-id="e807a-249">**CNG-** BCryptGenRandom （hello BCRYPT_USE_SYSTEM_PREFERRED_RNG 旗標，除非 hello 呼叫端執行的任何 IRQL 大於 0 [也就是 PASSIVE_LEVEL] 建議使用）</span><span class="sxs-lookup"><span data-stu-id="e807a-249">**CNG-** BCryptGenRandom(use of hello BCRYPT_USE_SYSTEM_PREFERRED_RNG flag recommended unless hello caller might run at any IRQL greater than 0 [that is, PASSIVE_LEVEL])</span></span></li><li><span data-ttu-id="e807a-250">**CAPI-** cryptGenRandom</span><span class="sxs-lookup"><span data-stu-id="e807a-250">**CAPI-** cryptGenRandom</span></span></li><li><span data-ttu-id="e807a-251">**Win32/64-** RtlGenRandom (新的實作應該使用 BCryptGenRandom 或 CryptGenRandom) * rand_s * SystemPrng (適用於核心模式)</span><span class="sxs-lookup"><span data-stu-id="e807a-251">**Win32/64-** RtlGenRandom (new implementations should use BCryptGenRandom or CryptGenRandom) * rand_s * SystemPrng (for kernel mode)</span></span></li><li><span data-ttu-id="e807a-252">**.NET-** RNGCryptoServiceProvider 或 RNGCng</span><span class="sxs-lookup"><span data-stu-id="e807a-252">**.NET-** RNGCryptoServiceProvider or RNGCng</span></span></li><li><span data-ttu-id="e807a-253">**Windows 市集應用程式-** Windows.Security.Cryptography.CryptographicBuffer.GenerateRandom 或 .GenerateRandomNumber</span><span class="sxs-lookup"><span data-stu-id="e807a-253">**Windows Store Apps-** Windows.Security.Cryptography.CryptographicBuffer.GenerateRandom or .GenerateRandomNumber</span></span></li><li><span data-ttu-id="e807a-254">**Apple OS X (10.7+)/iOS(2.0+)-** int SecRandomCopyBytes (SecRandomRef 隨機 size_t 計數、 uint8_t*位元組)</li><li>**Apple OS X (< 10.7)-** 使用 /開發人員/隨機 tooretrieve 隨機數字</span><span class="sxs-lookup"><span data-stu-id="e807a-254">**Apple OS X (10.7+)/iOS(2.0+)-** int SecRandomCopyBytes (SecRandomRef random, size_t count, uint8_t *bytes )</li><li>**Apple OS X (<10.7)-** Use /dev/random tooretrieve random numbers</span></span></li><li><span data-ttu-id="e807a-255">**Java (包括 Google Android Java 程式碼)-** java.security.SecureRandom 類別。</span><span class="sxs-lookup"><span data-stu-id="e807a-255">**Java(including Google Android Java code)-** java.security.SecureRandom class.</span></span> <span data-ttu-id="e807a-256">請注意，針對 Android 4.3 (軟糖 Bean)，開發人員必須遵循的 hello，Android 建議的因應措施更新他們的應用程式 tooexplicitly 初始化 hello PRNG 與從 /dev/urandom 或 /dev/random entropy</span><span class="sxs-lookup"><span data-stu-id="e807a-256">Note that for Android 4.3 (Jelly Bean), developers must follow hello Android recommended workaround and update their applications tooexplicitly initialize hello PRNG with entropy from /dev/urandom or /dev/random</span></span></li></ul>|

## <span data-ttu-id="e807a-257"><a id="stream-ciphers"></a>請勿使用對稱串流編碼器</span><span class="sxs-lookup"><span data-stu-id="e807a-257"><a id="stream-ciphers"></a>Do not use symmetric stream ciphers</span></span>

| <span data-ttu-id="e807a-258">Title</span><span class="sxs-lookup"><span data-stu-id="e807a-258">Title</span></span>                   | <span data-ttu-id="e807a-259">詳細資料</span><span class="sxs-lookup"><span data-stu-id="e807a-259">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="e807a-260">**元件**</span><span class="sxs-lookup"><span data-stu-id="e807a-260">**Component**</span></span>               | <span data-ttu-id="e807a-261">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="e807a-261">Web Application</span></span> | 
| <span data-ttu-id="e807a-262">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="e807a-262">**SDL Phase**</span></span>               | <span data-ttu-id="e807a-263">建置</span><span class="sxs-lookup"><span data-stu-id="e807a-263">Build</span></span> |  
| <span data-ttu-id="e807a-264">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="e807a-264">**Applicable Technologies**</span></span> | <span data-ttu-id="e807a-265">泛型</span><span class="sxs-lookup"><span data-stu-id="e807a-265">Generic</span></span> |
| <span data-ttu-id="e807a-266">**屬性**</span><span class="sxs-lookup"><span data-stu-id="e807a-266">**Attributes**</span></span>              | <span data-ttu-id="e807a-267">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-267">N/A</span></span>  |
| <span data-ttu-id="e807a-268">**參考**</span><span class="sxs-lookup"><span data-stu-id="e807a-268">**References**</span></span>              | <span data-ttu-id="e807a-269">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-269">N/A</span></span>  |
| <span data-ttu-id="e807a-270">**步驟**</span><span class="sxs-lookup"><span data-stu-id="e807a-270">**Steps**</span></span> | <span data-ttu-id="e807a-271">不得使用對稱串流編碼器，例如 RC4。</span><span class="sxs-lookup"><span data-stu-id="e807a-271">Symmetric stream ciphers, such as RC4, must not be used.</span></span> <span data-ttu-id="e807a-272">產品不該使用對稱串流編碼器，而該使用區塊編碼器，特別是金鑰長度至少 128 位元的 AES。</span><span class="sxs-lookup"><span data-stu-id="e807a-272">Instead of symmetric stream ciphers, products should use a block cipher, specifically AES with a key length of at least 128 bits.</span></span> |

## <span data-ttu-id="e807a-273"><a id="mac-hash"></a>使用核准的 MAC/HMAC/索引雜湊演算法</span><span class="sxs-lookup"><span data-stu-id="e807a-273"><a id="mac-hash"></a>Use approved MAC/HMAC/keyed hash algorithms</span></span>

| <span data-ttu-id="e807a-274">Title</span><span class="sxs-lookup"><span data-stu-id="e807a-274">Title</span></span>                   | <span data-ttu-id="e807a-275">詳細資料</span><span class="sxs-lookup"><span data-stu-id="e807a-275">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="e807a-276">**元件**</span><span class="sxs-lookup"><span data-stu-id="e807a-276">**Component**</span></span>               | <span data-ttu-id="e807a-277">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="e807a-277">Web Application</span></span> | 
| <span data-ttu-id="e807a-278">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="e807a-278">**SDL Phase**</span></span>               | <span data-ttu-id="e807a-279">建置</span><span class="sxs-lookup"><span data-stu-id="e807a-279">Build</span></span> |  
| <span data-ttu-id="e807a-280">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="e807a-280">**Applicable Technologies**</span></span> | <span data-ttu-id="e807a-281">泛型</span><span class="sxs-lookup"><span data-stu-id="e807a-281">Generic</span></span> |
| <span data-ttu-id="e807a-282">**屬性**</span><span class="sxs-lookup"><span data-stu-id="e807a-282">**Attributes**</span></span>              | <span data-ttu-id="e807a-283">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-283">N/A</span></span>  |
| <span data-ttu-id="e807a-284">**參考**</span><span class="sxs-lookup"><span data-stu-id="e807a-284">**References**</span></span>              | <span data-ttu-id="e807a-285">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-285">N/A</span></span>  |
| <span data-ttu-id="e807a-286">**步驟**</span><span class="sxs-lookup"><span data-stu-id="e807a-286">**Steps**</span></span> | <p><span data-ttu-id="e807a-287">產品只能使用核准的訊息驗證碼 (MAC) 或雜湊式訊息驗證碼 (HMAC) 演算法。</span><span class="sxs-lookup"><span data-stu-id="e807a-287">Products must use only approved message authentication code (MAC) or hash-based message authentication code (HMAC) algorithms.</span></span></p><p><span data-ttu-id="e807a-288">訊息驗證碼 (MAC) 是一段資訊附加的 tooa 訊息，可讓其收件者 tooverify 兩者 hello hello 寄件者及其 hello 完整性的 hello 訊息使用祕密金鑰。</span><span class="sxs-lookup"><span data-stu-id="e807a-288">A message authentication code (MAC) is a piece of information attached tooa message that allows its recipient tooverify both hello authenticity of hello sender and hello integrity of hello message using a secret key.</span></span> <span data-ttu-id="e807a-289">hello 使用任一雜湊 MAC ([HMAC](http://csrc.nist.gov/publications/nistpubs/800-107-rev1/sp800-107-rev1.pdf)) 或[區塊編碼器型 MAC](http://csrc.nist.gov/publications/nistpubs/800-38B/SP_800-38B.pdf)是允許的只要所有基礎的雜湊或對稱式加密演算法也使用; 核准目前這包含 hello HMAC SHA2 函式 （hmac-sha256、 HMAC SHA384 及 hmac-sha512） 和 hello CMAC/OMAC1 和 OMAC2 區塊編碼器為基礎的 Mac （這些 AES 為基礎）。</span><span class="sxs-lookup"><span data-stu-id="e807a-289">hello use of either a hash-based MAC ([HMAC](http://csrc.nist.gov/publications/nistpubs/800-107-rev1/sp800-107-rev1.pdf)) or [block-cipher-based MAC](http://csrc.nist.gov/publications/nistpubs/800-38B/SP_800-38B.pdf) is permissible as long as all underlying hash or symmetric encryption algorithms are also approved for use; currently this includes hello HMAC-SHA2 functions (HMAC-SHA256, HMAC-SHA384 and HMAC-SHA512) and hello CMAC/OMAC1 and OMAC2 block cipher-based MACs (these are based on AES).</span></span></p><p><span data-ttu-id="e807a-290">使用的 HMAC SHA1 可能會允許平台相容性，但您將會是必要的 toofile 例外狀況 toothis 程序，並接受貴組織的密碼編譯的檢閱。</span><span class="sxs-lookup"><span data-stu-id="e807a-290">Use of HMAC-SHA1 may be permissible for platform compatibility, but you will be required toofile an exception toothis procedure and undergo your organization's Crypto review.</span></span> <span data-ttu-id="e807a-291">不允許的小於 128 位元 Hmac tooless 截斷。</span><span class="sxs-lookup"><span data-stu-id="e807a-291">Truncation of HMACs tooless than 128 bits is not permitted.</span></span> <span data-ttu-id="e807a-292">使用客戶方法 toohash 索引鍵和資料未獲得核准，並必須經過組織的密碼編譯面板檢閱先前 toouse。</span><span class="sxs-lookup"><span data-stu-id="e807a-292">Using customer methods toohash a key and data is not approved, and must undergo your organization's Crypto Board review prior toouse.</span></span></p>|

## <span data-ttu-id="e807a-293"><a id="hash-functions"></a>只使用核准的密碼編譯雜湊函式</span><span class="sxs-lookup"><span data-stu-id="e807a-293"><a id="hash-functions"></a>Use only approved cryptographic hash functions</span></span>

| <span data-ttu-id="e807a-294">Title</span><span class="sxs-lookup"><span data-stu-id="e807a-294">Title</span></span>                   | <span data-ttu-id="e807a-295">詳細資料</span><span class="sxs-lookup"><span data-stu-id="e807a-295">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="e807a-296">**元件**</span><span class="sxs-lookup"><span data-stu-id="e807a-296">**Component**</span></span>               | <span data-ttu-id="e807a-297">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="e807a-297">Web Application</span></span> | 
| <span data-ttu-id="e807a-298">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="e807a-298">**SDL Phase**</span></span>               | <span data-ttu-id="e807a-299">建置</span><span class="sxs-lookup"><span data-stu-id="e807a-299">Build</span></span> |  
| <span data-ttu-id="e807a-300">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="e807a-300">**Applicable Technologies**</span></span> | <span data-ttu-id="e807a-301">泛型</span><span class="sxs-lookup"><span data-stu-id="e807a-301">Generic</span></span> |
| <span data-ttu-id="e807a-302">**屬性**</span><span class="sxs-lookup"><span data-stu-id="e807a-302">**Attributes**</span></span>              | <span data-ttu-id="e807a-303">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-303">N/A</span></span>  |
| <span data-ttu-id="e807a-304">**參考**</span><span class="sxs-lookup"><span data-stu-id="e807a-304">**References**</span></span>              | <span data-ttu-id="e807a-305">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-305">N/A</span></span>  |
| <span data-ttu-id="e807a-306">**步驟**</span><span class="sxs-lookup"><span data-stu-id="e807a-306">**Steps**</span></span> | <p><span data-ttu-id="e807a-307">產品必須使用 hello sha-2 系列雜湊演算法 （SHA256、 SHA384 及 SHA512）。</span><span class="sxs-lookup"><span data-stu-id="e807a-307">Products must use hello SHA-2 family of hash algorithms (SHA256, SHA384, and SHA512).</span></span> <span data-ttu-id="e807a-308">如果需要較短的雜湊，例如順序 toofit hello 短 MD5 雜湊納入考量，使用這項設計的資料結構中的 128 位元輸出長度產品團隊可能會截斷 hello SHA2 雜湊 (通常為 SHA256) 的其中一個。</span><span class="sxs-lookup"><span data-stu-id="e807a-308">If a shorter hash is needed, such as a 128-bit output length in order toofit a data structure designed with hello shorter MD5 hash in mind, product teams may truncate one of hello SHA2 hashes (typically SHA256).</span></span> <span data-ttu-id="e807a-309">請注意，SHA384 是 SHA512 的截斷版本。</span><span class="sxs-lookup"><span data-stu-id="e807a-309">Note that SHA384 is a truncated version of SHA512.</span></span> <span data-ttu-id="e807a-310">不允許針對安全性目的 tooless 小於 128 位元的加密編譯雜湊截斷。</span><span class="sxs-lookup"><span data-stu-id="e807a-310">Truncation of cryptographic hashes for security purposes tooless than 128 bits is not permitted.</span></span> <span data-ttu-id="e807a-311">新的程式碼不能使用 hello MD2、 MD4、 MD5、 SHA 0、 sha-1 或 RIPEMD 雜湊演算法。</span><span class="sxs-lookup"><span data-stu-id="e807a-311">New code must not use hello MD2, MD4, MD5, SHA-0, SHA-1, or RIPEMD hash algorithms.</span></span> <span data-ttu-id="e807a-312">這些演算法在計算時可能會發生雜湊衝突，而結果便是打斷演算法。</span><span class="sxs-lookup"><span data-stu-id="e807a-312">Hash collisions are computationally feasible for these algorithms, which effectively breaks them.</span></span></p><p><span data-ttu-id="e807a-313">為了實現受管理的密碼編譯靈活性所允許的 .NET 雜湊演算法 (依偏好順序)：</span><span class="sxs-lookup"><span data-stu-id="e807a-313">Allowed .NET hash algorithms for managed crypto agility (in order of preference):</span></span></p><ul><li><span data-ttu-id="e807a-314">SHA512Cng (符合 FIPS 規範)</span><span class="sxs-lookup"><span data-stu-id="e807a-314">SHA512Cng (FIPS compliant)</span></span></li><li><span data-ttu-id="e807a-315">SHA384Cng (符合 FIPS 規範)</span><span class="sxs-lookup"><span data-stu-id="e807a-315">SHA384Cng (FIPS compliant)</span></span></li><li><span data-ttu-id="e807a-316">SHA256Cng (符合 FIPS 規範)</span><span class="sxs-lookup"><span data-stu-id="e807a-316">SHA256Cng (FIPS compliant)</span></span></li><li><span data-ttu-id="e807a-317">SHA512Managed （非 FIPS 相容） （使用 SHA512 做為演算法名稱呼叫 tooHashAlgorithm.Create 或 CryptoConfig.CreateFromName 中）</span><span class="sxs-lookup"><span data-stu-id="e807a-317">SHA512Managed (non-FIPS-compliant) (use SHA512 as algorithm name in calls tooHashAlgorithm.Create or CryptoConfig.CreateFromName)</span></span></li><li><span data-ttu-id="e807a-318">SHA384Managed （非 FIPS 相容） （使用 SHA384 演算法名稱呼叫 tooHashAlgorithm.Create 或 CryptoConfig.CreateFromName）</span><span class="sxs-lookup"><span data-stu-id="e807a-318">SHA384Managed (non-FIPS-compliant) (use SHA384 as algorithm name in calls tooHashAlgorithm.Create or CryptoConfig.CreateFromName)</span></span></li><li><span data-ttu-id="e807a-319">SHA256Managed （非 FIPS 相容） （使用 SHA256 演算法名稱呼叫 tooHashAlgorithm.Create 或 CryptoConfig.CreateFromName）</span><span class="sxs-lookup"><span data-stu-id="e807a-319">SHA256Managed (non-FIPS-compliant) (use SHA256 as algorithm name in calls tooHashAlgorithm.Create or CryptoConfig.CreateFromName)</span></span></li><li><span data-ttu-id="e807a-320">SHA512CryptoServiceProvider (符合 FIPS 規範)</span><span class="sxs-lookup"><span data-stu-id="e807a-320">SHA512CryptoServiceProvider (FIPS compliant)</span></span></li><li><span data-ttu-id="e807a-321">SHA256CryptoServiceProvider (符合 FIPS 規範)</span><span class="sxs-lookup"><span data-stu-id="e807a-321">SHA256CryptoServiceProvider (FIPS compliant)</span></span></li><li><span data-ttu-id="e807a-322">SHA384CryptoServiceProvider (符合 FIPS 規範)</span><span class="sxs-lookup"><span data-stu-id="e807a-322">SHA384CryptoServiceProvider (FIPS compliant)</span></span></li></ul>| 

## <span data-ttu-id="e807a-323"><a id="strong-db"></a>在 hello 資料庫中使用強式加密演算法 tooencrypt 資料</span><span class="sxs-lookup"><span data-stu-id="e807a-323"><a id="strong-db"></a>Use strong encryption algorithms tooencrypt data in hello database</span></span>

| <span data-ttu-id="e807a-324">Title</span><span class="sxs-lookup"><span data-stu-id="e807a-324">Title</span></span>                   | <span data-ttu-id="e807a-325">詳細資料</span><span class="sxs-lookup"><span data-stu-id="e807a-325">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="e807a-326">**元件**</span><span class="sxs-lookup"><span data-stu-id="e807a-326">**Component**</span></span>               | <span data-ttu-id="e807a-327">資料庫</span><span class="sxs-lookup"><span data-stu-id="e807a-327">Database</span></span> | 
| <span data-ttu-id="e807a-328">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="e807a-328">**SDL Phase**</span></span>               | <span data-ttu-id="e807a-329">建置</span><span class="sxs-lookup"><span data-stu-id="e807a-329">Build</span></span> |  
| <span data-ttu-id="e807a-330">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="e807a-330">**Applicable Technologies**</span></span> | <span data-ttu-id="e807a-331">泛型</span><span class="sxs-lookup"><span data-stu-id="e807a-331">Generic</span></span> |
| <span data-ttu-id="e807a-332">**屬性**</span><span class="sxs-lookup"><span data-stu-id="e807a-332">**Attributes**</span></span>              | <span data-ttu-id="e807a-333">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-333">N/A</span></span>  |
| <span data-ttu-id="e807a-334">**參考**</span><span class="sxs-lookup"><span data-stu-id="e807a-334">**References**</span></span>              | <span data-ttu-id="e807a-335">[選擇加密演算法](https://technet.microsoft.com/library/ms345262(v=sql.130).aspx)</span><span class="sxs-lookup"><span data-stu-id="e807a-335">[Choosing an encryption algorithm](https://technet.microsoft.com/library/ms345262(v=sql.130).aspx)</span></span> |
| <span data-ttu-id="e807a-336">**步驟**</span><span class="sxs-lookup"><span data-stu-id="e807a-336">**Steps**</span></span> | <span data-ttu-id="e807a-337">加密演算法會定義未經授權的使用者無法輕鬆反轉的資料轉換。</span><span class="sxs-lookup"><span data-stu-id="e807a-337">Encryption algorithms define data transformations that cannot be easily reversed by unauthorized users.</span></span> <span data-ttu-id="e807a-338">SQL Server 可讓系統管理員和開發人員 toochoose 數種演算法，包括 DES、 Triple DES、 TRIPLE_DES_3KEY、 RC2、 RC4、 128 位元 RC4、 DESX、 128 位元 AES、 192 位元 AES 和 256 位元 AES 中</span><span class="sxs-lookup"><span data-stu-id="e807a-338">SQL Server allows administrators and developers toochoose from among several algorithms, including DES, Triple DES, TRIPLE_DES_3KEY, RC2, RC4, 128-bit RC4, DESX, 128-bit AES, 192-bit AES, and 256-bit AES</span></span> |

## <span data-ttu-id="e807a-339"><a id="ssis-signed"></a>SSIS 套件應予以加密和數位簽章</span><span class="sxs-lookup"><span data-stu-id="e807a-339"><a id="ssis-signed"></a>SSIS packages should be encrypted and digitally signed</span></span>

| <span data-ttu-id="e807a-340">Title</span><span class="sxs-lookup"><span data-stu-id="e807a-340">Title</span></span>                   | <span data-ttu-id="e807a-341">詳細資料</span><span class="sxs-lookup"><span data-stu-id="e807a-341">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="e807a-342">**元件**</span><span class="sxs-lookup"><span data-stu-id="e807a-342">**Component**</span></span>               | <span data-ttu-id="e807a-343">資料庫</span><span class="sxs-lookup"><span data-stu-id="e807a-343">Database</span></span> | 
| <span data-ttu-id="e807a-344">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="e807a-344">**SDL Phase**</span></span>               | <span data-ttu-id="e807a-345">建置</span><span class="sxs-lookup"><span data-stu-id="e807a-345">Build</span></span> |  
| <span data-ttu-id="e807a-346">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="e807a-346">**Applicable Technologies**</span></span> | <span data-ttu-id="e807a-347">泛型</span><span class="sxs-lookup"><span data-stu-id="e807a-347">Generic</span></span> |
| <span data-ttu-id="e807a-348">**屬性**</span><span class="sxs-lookup"><span data-stu-id="e807a-348">**Attributes**</span></span>              | <span data-ttu-id="e807a-349">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-349">N/A</span></span>  |
| <span data-ttu-id="e807a-350">**參考**</span><span class="sxs-lookup"><span data-stu-id="e807a-350">**References**</span></span>              | <span data-ttu-id="e807a-351">[識別來源的封裝使用數位簽章 hello](https://msdn.microsoft.com/library/ms141174.aspx)，[威脅和弱點安全防護 (Integration Services)](https://msdn.microsoft.com/library/bb522559.aspx)</span><span class="sxs-lookup"><span data-stu-id="e807a-351">[Identify hello Source of Packages with Digital Signatures](https://msdn.microsoft.com/library/ms141174.aspx), [Threat and Vulnerability Mitigation (Integration Services)](https://msdn.microsoft.com/library/bb522559.aspx)</span></span> |
| <span data-ttu-id="e807a-352">**步驟**</span><span class="sxs-lookup"><span data-stu-id="e807a-352">**Steps**</span></span> | <span data-ttu-id="e807a-353">hello 的來源封裝為個別的 hello 或建立 hello 封裝的組織。</span><span class="sxs-lookup"><span data-stu-id="e807a-353">hello source of a package is hello individual or organization that created hello package.</span></span> <span data-ttu-id="e807a-354">執行來自未知或未受信任來源的套件可能有風險。</span><span class="sxs-lookup"><span data-stu-id="e807a-354">Running a package from an unknown or untrusted source might be risky.</span></span> <span data-ttu-id="e807a-355">未經授權 tooprevent 的竄改的 SSIS 封裝，應使用數位簽章。</span><span class="sxs-lookup"><span data-stu-id="e807a-355">tooprevent unauthorized tampering of SSIS packages, digital signatures should be used.</span></span> <span data-ttu-id="e807a-356">此外，在儲存體/傳輸期間的 hello 封裝 tooensure hello 機密性，SSIS 封裝有 toobe 加密</span><span class="sxs-lookup"><span data-stu-id="e807a-356">Also, tooensure hello confidentiality of hello packages during storage/transit, SSIS packages have toobe encrypted</span></span> |

## <span data-ttu-id="e807a-357"><a id="securables-db"></a>新增數位簽章 toocritical 資料庫安全性實體</span><span class="sxs-lookup"><span data-stu-id="e807a-357"><a id="securables-db"></a>Add digital signature toocritical database securables</span></span>

| <span data-ttu-id="e807a-358">Title</span><span class="sxs-lookup"><span data-stu-id="e807a-358">Title</span></span>                   | <span data-ttu-id="e807a-359">詳細資料</span><span class="sxs-lookup"><span data-stu-id="e807a-359">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="e807a-360">**元件**</span><span class="sxs-lookup"><span data-stu-id="e807a-360">**Component**</span></span>               | <span data-ttu-id="e807a-361">資料庫</span><span class="sxs-lookup"><span data-stu-id="e807a-361">Database</span></span> | 
| <span data-ttu-id="e807a-362">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="e807a-362">**SDL Phase**</span></span>               | <span data-ttu-id="e807a-363">建置</span><span class="sxs-lookup"><span data-stu-id="e807a-363">Build</span></span> |  
| <span data-ttu-id="e807a-364">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="e807a-364">**Applicable Technologies**</span></span> | <span data-ttu-id="e807a-365">泛型</span><span class="sxs-lookup"><span data-stu-id="e807a-365">Generic</span></span> |
| <span data-ttu-id="e807a-366">**屬性**</span><span class="sxs-lookup"><span data-stu-id="e807a-366">**Attributes**</span></span>              | <span data-ttu-id="e807a-367">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-367">N/A</span></span>  |
| <span data-ttu-id="e807a-368">**參考**</span><span class="sxs-lookup"><span data-stu-id="e807a-368">**References**</span></span>              | [<span data-ttu-id="e807a-369">新增簽章 (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="e807a-369">ADD SIGNATURE (Transact-SQL)</span></span>](https://msdn.microsoft.com/library/ms181700) |
| <span data-ttu-id="e807a-370">**步驟**</span><span class="sxs-lookup"><span data-stu-id="e807a-370">**Steps**</span></span> | <span data-ttu-id="e807a-371">在 hello 資料庫完整性的重大安全性實體之 toobe 驗證的情況下，應使用數位簽章。</span><span class="sxs-lookup"><span data-stu-id="e807a-371">In cases where hello integrity of a critical database securable has toobe verified, digital signatures should be used.</span></span> <span data-ttu-id="e807a-372">資料庫安全性實體 (例如預存程序、函式、組件或觸發程序) 可以加上數位簽章。</span><span class="sxs-lookup"><span data-stu-id="e807a-372">Database securables such as a stored procedure, function, assembly, or trigger can be digitally signed.</span></span> <span data-ttu-id="e807a-373">以下是時這非常有用的範例： 讓我們說出 ISV （獨立軟體廠商） 提供支援 tooa 軟體傳遞 tooone 客戶的營業。</span><span class="sxs-lookup"><span data-stu-id="e807a-373">Below is an example of when this can be useful: Let us say an ISV (Independent Software Vendor) has provided support tooa software delivered tooone of their customers.</span></span> <span data-ttu-id="e807a-374">之後，才提供支援，hello ISV 會想 tooensure hello 軟體中安全性實體的資料庫已不會遭不小心或惡意的嘗試。</span><span class="sxs-lookup"><span data-stu-id="e807a-374">Before providing support, hello ISV would want tooensure that a database securable in hello software was not tampered either by mistake or by a malicious attempt.</span></span> <span data-ttu-id="e807a-375">如果安全性實體的 hello 經過數位簽署，hello ISV 可以驗證其數位簽章，並驗證其完整性。</span><span class="sxs-lookup"><span data-stu-id="e807a-375">If hello securable is digitally signed, hello ISV can verify its digital signature and validate its integrity.</span></span>| 

## <span data-ttu-id="e807a-376"><a id="ekm-keys"></a>使用 SQL server EKM tooprotect 加密金鑰</span><span class="sxs-lookup"><span data-stu-id="e807a-376"><a id="ekm-keys"></a>Use SQL server EKM tooprotect encryption keys</span></span>

| <span data-ttu-id="e807a-377">Title</span><span class="sxs-lookup"><span data-stu-id="e807a-377">Title</span></span>                   | <span data-ttu-id="e807a-378">詳細資料</span><span class="sxs-lookup"><span data-stu-id="e807a-378">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="e807a-379">**元件**</span><span class="sxs-lookup"><span data-stu-id="e807a-379">**Component**</span></span>               | <span data-ttu-id="e807a-380">資料庫</span><span class="sxs-lookup"><span data-stu-id="e807a-380">Database</span></span> | 
| <span data-ttu-id="e807a-381">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="e807a-381">**SDL Phase**</span></span>               | <span data-ttu-id="e807a-382">建置</span><span class="sxs-lookup"><span data-stu-id="e807a-382">Build</span></span> |  
| <span data-ttu-id="e807a-383">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="e807a-383">**Applicable Technologies**</span></span> | <span data-ttu-id="e807a-384">泛型</span><span class="sxs-lookup"><span data-stu-id="e807a-384">Generic</span></span> |
| <span data-ttu-id="e807a-385">**屬性**</span><span class="sxs-lookup"><span data-stu-id="e807a-385">**Attributes**</span></span>              | <span data-ttu-id="e807a-386">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-386">N/A</span></span>  |
| <span data-ttu-id="e807a-387">**參考**</span><span class="sxs-lookup"><span data-stu-id="e807a-387">**References**</span></span>              | <span data-ttu-id="e807a-388">[SQL Server 可延伸金鑰管理 (EKM)](https://msdn.microsoft.com/library/bb895340)、[使用 Azure Key Vault 的可延伸金鑰管理 (SQL Server)](https://msdn.microsoft.com/library/dn198405)</span><span class="sxs-lookup"><span data-stu-id="e807a-388">[SQL Server Extensible Key Management (EKM)](https://msdn.microsoft.com/library/bb895340), [Extensible Key Management Using Azure Key Vault (SQL Server)](https://msdn.microsoft.com/library/dn198405)</span></span> |
| <span data-ttu-id="e807a-389">**步驟**</span><span class="sxs-lookup"><span data-stu-id="e807a-389">**Steps**</span></span> | <span data-ttu-id="e807a-390">SQL Server 可延伸金鑰管理可讓您保護儲存在外部裝置中，例如智慧卡、 USB 裝置或 EKM/HSM 模組 hello 資料庫檔案 toobe hello 加密金鑰。</span><span class="sxs-lookup"><span data-stu-id="e807a-390">SQL Server Extensible Key Management enables hello encryption keys that protect hello database files toobe stored in an off-box device such as a smartcard, USB device, or EKM/HSM module.</span></span> <span data-ttu-id="e807a-391">這也會讓資料庫管理員 （除了 hello sysadmin 群組的成員） 的資料保護。</span><span class="sxs-lookup"><span data-stu-id="e807a-391">This also enables data protection from database administrators (except members of hello sysadmin group).</span></span> <span data-ttu-id="e807a-392">資料可以加密所使用的加密金鑰只 hello 資料庫使用者存取 tooon hello 外部 EKM/HSM 模組。</span><span class="sxs-lookup"><span data-stu-id="e807a-392">Data can be encrypted by using encryption keys that only hello database user has access tooon hello external EKM/HSM module.</span></span> |

## <span data-ttu-id="e807a-393"><a id="keys-engine"></a>如果加密金鑰不能展現的 tooDatabase 引擎，使用永遠加密功能</span><span class="sxs-lookup"><span data-stu-id="e807a-393"><a id="keys-engine"></a>Use AlwaysEncrypted feature if encryption keys should not be revealed tooDatabase engine</span></span>

| <span data-ttu-id="e807a-394">Title</span><span class="sxs-lookup"><span data-stu-id="e807a-394">Title</span></span>                   | <span data-ttu-id="e807a-395">詳細資料</span><span class="sxs-lookup"><span data-stu-id="e807a-395">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="e807a-396">**元件**</span><span class="sxs-lookup"><span data-stu-id="e807a-396">**Component**</span></span>               | <span data-ttu-id="e807a-397">資料庫</span><span class="sxs-lookup"><span data-stu-id="e807a-397">Database</span></span> | 
| <span data-ttu-id="e807a-398">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="e807a-398">**SDL Phase**</span></span>               | <span data-ttu-id="e807a-399">建置</span><span class="sxs-lookup"><span data-stu-id="e807a-399">Build</span></span> |  
| <span data-ttu-id="e807a-400">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="e807a-400">**Applicable Technologies**</span></span> | <span data-ttu-id="e807a-401">SQL Azure、OnPrem</span><span class="sxs-lookup"><span data-stu-id="e807a-401">SQL Azure, OnPrem</span></span> |
| <span data-ttu-id="e807a-402">**屬性**</span><span class="sxs-lookup"><span data-stu-id="e807a-402">**Attributes**</span></span>              | <span data-ttu-id="e807a-403">SQL 版本 - V12、MsSQL2016</span><span class="sxs-lookup"><span data-stu-id="e807a-403">SQL Version - V12, MsSQL2016</span></span> |
| <span data-ttu-id="e807a-404">**參考**</span><span class="sxs-lookup"><span data-stu-id="e807a-404">**References**</span></span>              | [<span data-ttu-id="e807a-405">永遠加密 (資料庫引擎)</span><span class="sxs-lookup"><span data-stu-id="e807a-405">Always Encrypted (Database Engine)</span></span>](https://msdn.microsoft.com/library/mt163865) |
| <span data-ttu-id="e807a-406">**步驟**</span><span class="sxs-lookup"><span data-stu-id="e807a-406">**Steps**</span></span> | <span data-ttu-id="e807a-407">永遠加密已設計功能 tooprotect 敏感性資料，像是信用卡號碼或國家身分證字號 （例如美國社會安全號碼），儲存在 Azure SQL Database 或 SQL Server 資料庫中。</span><span class="sxs-lookup"><span data-stu-id="e807a-407">Always Encrypted is a feature designed tooprotect sensitive data, such as credit card numbers or national identification numbers (e.g. U.S. social security numbers), stored in Azure SQL Database or SQL Server databases.</span></span> <span data-ttu-id="e807a-408">一律加密可讓用戶端 tooencrypt 用戶端應用程式內的機密資料，並永遠不會顯示 hello 加密金鑰 toohello Database Engine （SQL Database 或 SQL Server）。</span><span class="sxs-lookup"><span data-stu-id="e807a-408">Always Encrypted allows clients tooencrypt sensitive data inside client applications and never reveal hello encryption keys toohello Database Engine (SQL Database or SQL Server).</span></span> <span data-ttu-id="e807a-409">如此一來，「 永遠加密 」 的區隔擁有者 hello 資料 （且可以檢視） 和管理者 hello 資料 （但應該不具備存取權）</span><span class="sxs-lookup"><span data-stu-id="e807a-409">As a result, Always Encrypted provides a separation between those who own hello data (and can view it) and those who manage hello data (but should have no access)</span></span> |

## <span data-ttu-id="e807a-410"><a id="keys-iot"></a>在 IoT 裝置上安全地儲存密碼編譯金鑰</span><span class="sxs-lookup"><span data-stu-id="e807a-410"><a id="keys-iot"></a>Store Cryptographic Keys securely on IoT Device</span></span>

| <span data-ttu-id="e807a-411">Title</span><span class="sxs-lookup"><span data-stu-id="e807a-411">Title</span></span>                   | <span data-ttu-id="e807a-412">詳細資料</span><span class="sxs-lookup"><span data-stu-id="e807a-412">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="e807a-413">**元件**</span><span class="sxs-lookup"><span data-stu-id="e807a-413">**Component**</span></span>               | <span data-ttu-id="e807a-414">IoT 裝置</span><span class="sxs-lookup"><span data-stu-id="e807a-414">IoT Device</span></span> | 
| <span data-ttu-id="e807a-415">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="e807a-415">**SDL Phase**</span></span>               | <span data-ttu-id="e807a-416">建置</span><span class="sxs-lookup"><span data-stu-id="e807a-416">Build</span></span> |  
| <span data-ttu-id="e807a-417">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="e807a-417">**Applicable Technologies**</span></span> | <span data-ttu-id="e807a-418">泛型</span><span class="sxs-lookup"><span data-stu-id="e807a-418">Generic</span></span> |
| <span data-ttu-id="e807a-419">**屬性**</span><span class="sxs-lookup"><span data-stu-id="e807a-419">**Attributes**</span></span>              | <span data-ttu-id="e807a-420">裝置作業系統 - Windows IoT 核心版、裝置連線能力 - Azure IoT 裝置 SDK</span><span class="sxs-lookup"><span data-stu-id="e807a-420">Device OS - Windows IoT Core, Device Connectivity - Azure IoT device SDKs</span></span> |
| <span data-ttu-id="e807a-421">**參考**</span><span class="sxs-lookup"><span data-stu-id="e807a-421">**References**</span></span>              | <span data-ttu-id="e807a-422">[Windows IoT 核心版上的 TPM](https://developer.microsoft.com/windows/iot/docs/tpm)、[設定 Windows IoT 核心版上的 TPM](https://developer.microsoft.com/windows/iot/win10/setuptpm)、[Azure IoT 裝置 SDK TPM](https://github.com/Azure/azure-iot-hub-vs-cs/wiki/Device-Provisioning-with-TPM)</span><span class="sxs-lookup"><span data-stu-id="e807a-422">[TPM on Windows IoT Core](https://developer.microsoft.com/windows/iot/docs/tpm), [Set up TPM on Windows IoT Core](https://developer.microsoft.com/windows/iot/win10/setuptpm), [Azure IoT Device SDK TPM](https://github.com/Azure/azure-iot-hub-vs-cs/wiki/Device-Provisioning-with-TPM)</span></span> |
| <span data-ttu-id="e807a-423">**步驟**</span><span class="sxs-lookup"><span data-stu-id="e807a-423">**Steps**</span></span> | <span data-ttu-id="e807a-424">在硬體保護的儲存體 (如 TPM 或智慧卡晶片) 中安全地對稱或憑證私密金鑰。</span><span class="sxs-lookup"><span data-stu-id="e807a-424">Symmetric or Certificate Private keys securely in a hardware protected storage like TPM or Smart Card chips.</span></span> <span data-ttu-id="e807a-425">Windows 10 IoT 核心版支援 hello 使用者的 TPM，而且有數個可用的相容 Tpm: https://developer.microsoft.com/windows/iot/win10/tpm。</span><span class="sxs-lookup"><span data-stu-id="e807a-425">Windows 10 IoT Core supports hello user of a TPM and there are several compatible TPMs that can be used: https://developer.microsoft.com/windows/iot/win10/tpm.</span></span> <span data-ttu-id="e807a-426">它會建議 toouse 韌體或離散的 TPM。</span><span class="sxs-lookup"><span data-stu-id="e807a-426">It is recommended toouse a Firmware or Discrete TPM.</span></span> <span data-ttu-id="e807a-427">軟體 TPM 只應用於開發和測試用途。</span><span class="sxs-lookup"><span data-stu-id="e807a-427">A Software TPM should only be used for development and testing purposes.</span></span> <span data-ttu-id="e807a-428">一旦 TPM 而且 hello 金鑰佈建中，產生 hello 語彙基元的 hello 程式碼應該寫入不含硬式編碼的任何敏感資訊。</span><span class="sxs-lookup"><span data-stu-id="e807a-428">Once a TPM is available and hello keys are provisioned in it, hello code that generates hello token should be written without hard coding any sensitive information in it.</span></span> | 

### <a name="example"></a><span data-ttu-id="e807a-429">範例</span><span class="sxs-lookup"><span data-stu-id="e807a-429">Example</span></span>
```
TpmDevice myDevice = new TpmDevice(0);
// Use logical device 0 on hello TPM 
string hubUri = myDevice.GetHostName(); 
string deviceId = myDevice.GetDeviceId(); 
string sasToken = myDevice.GetSASToken(); 

var deviceClient = DeviceClient.Create( hubUri, AuthenticationMethodFactory. CreateAuthenticationWithToken(deviceId, sasToken), TransportType.Amqp); 
```
<span data-ttu-id="e807a-430">可以看出 hello 裝置主索引鍵不存在 hello 程式碼中。</span><span class="sxs-lookup"><span data-stu-id="e807a-430">As can be seen, hello device primary key is not present in hello code.</span></span> <span data-ttu-id="e807a-431">相反地，它會儲存在 hello TPM 在插槽 0。</span><span class="sxs-lookup"><span data-stu-id="e807a-431">Instead, it is stored in hello TPM at slot 0.</span></span> <span data-ttu-id="e807a-432">TPM 的裝置會產生短期 SAS 權杖，然後使用 tooconnect toohello IoT 中樞。</span><span class="sxs-lookup"><span data-stu-id="e807a-432">TPM device generates a short-lived SAS token that is then used tooconnect toohello IoT Hub.</span></span> 

## <span data-ttu-id="e807a-433"><a id="random-hub"></a>產生的隨機對稱金鑰的長度足夠驗證 tooIoT 中樞</span><span class="sxs-lookup"><span data-stu-id="e807a-433"><a id="random-hub"></a>Generate a random symmetric key of sufficient length for authentication tooIoT Hub</span></span>

| <span data-ttu-id="e807a-434">Title</span><span class="sxs-lookup"><span data-stu-id="e807a-434">Title</span></span>                   | <span data-ttu-id="e807a-435">詳細資料</span><span class="sxs-lookup"><span data-stu-id="e807a-435">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="e807a-436">**元件**</span><span class="sxs-lookup"><span data-stu-id="e807a-436">**Component**</span></span>               | <span data-ttu-id="e807a-437">IoT 雲端閘道</span><span class="sxs-lookup"><span data-stu-id="e807a-437">IoT Cloud Gateway</span></span> | 
| <span data-ttu-id="e807a-438">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="e807a-438">**SDL Phase**</span></span>               | <span data-ttu-id="e807a-439">建置</span><span class="sxs-lookup"><span data-stu-id="e807a-439">Build</span></span> |  
| <span data-ttu-id="e807a-440">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="e807a-440">**Applicable Technologies**</span></span> | <span data-ttu-id="e807a-441">泛型</span><span class="sxs-lookup"><span data-stu-id="e807a-441">Generic</span></span> |
| <span data-ttu-id="e807a-442">**屬性**</span><span class="sxs-lookup"><span data-stu-id="e807a-442">**Attributes**</span></span>              | <span data-ttu-id="e807a-443">閘道選擇 - Azure IoT 中樞</span><span class="sxs-lookup"><span data-stu-id="e807a-443">Gateway choice - Azure IoT Hub</span></span> |
| <span data-ttu-id="e807a-444">**參考**</span><span class="sxs-lookup"><span data-stu-id="e807a-444">**References**</span></span>              | <span data-ttu-id="e807a-445">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-445">N/A</span></span>  |
| <span data-ttu-id="e807a-446">**步驟**</span><span class="sxs-lookup"><span data-stu-id="e807a-446">**Steps**</span></span> | <span data-ttu-id="e807a-447">IoT 中樞包含裝置身分識別登錄，在佈建裝置時，會自動產生隨機的對稱金鑰。</span><span class="sxs-lookup"><span data-stu-id="e807a-447">IoT Hub contains a device Identity Registry and while provisioning a device, automatically generates a random Symmetric key.</span></span> <span data-ttu-id="e807a-448">建議的 toouse hello Azure IoT 中樞身分識別登錄 toogenerate hello 索引鍵的這項功能用於驗證。</span><span class="sxs-lookup"><span data-stu-id="e807a-448">It is recommended toouse this feature of hello Azure IoT Hub Identity Registry toogenerate hello key used for authentication.</span></span> <span data-ttu-id="e807a-449">也可以建立 hello 裝置時，指定索引鍵 toobe IoT 中樞。</span><span class="sxs-lookup"><span data-stu-id="e807a-449">IoT Hub also allows for a key toobe specified while creating hello device.</span></span> <span data-ttu-id="e807a-450">如果裝置佈建期間 IoT 中樞外部產生金鑰，則建議 toocreate 的隨機對稱金鑰或至少 256 位元。</span><span class="sxs-lookup"><span data-stu-id="e807a-450">If a key is generated outside of IoT Hub during device provisioning, it is recommended toocreate a random symmetric key or at least 256 bits.</span></span> |

## <span data-ttu-id="e807a-451"><a id="pin-remote"></a>確定已備妥需要使用 PIN 並允許遠端抹除的裝置管理原則</span><span class="sxs-lookup"><span data-stu-id="e807a-451"><a id="pin-remote"></a>Ensure a device management policy is in place that requires a use PIN and allows remote wiping</span></span>

| <span data-ttu-id="e807a-452">Title</span><span class="sxs-lookup"><span data-stu-id="e807a-452">Title</span></span>                   | <span data-ttu-id="e807a-453">詳細資料</span><span class="sxs-lookup"><span data-stu-id="e807a-453">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="e807a-454">**元件**</span><span class="sxs-lookup"><span data-stu-id="e807a-454">**Component**</span></span>               | <span data-ttu-id="e807a-455">Dynamics CRM 行動用戶端</span><span class="sxs-lookup"><span data-stu-id="e807a-455">Dynamics CRM Mobile Client</span></span> | 
| <span data-ttu-id="e807a-456">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="e807a-456">**SDL Phase**</span></span>               | <span data-ttu-id="e807a-457">部署</span><span class="sxs-lookup"><span data-stu-id="e807a-457">Deployment</span></span> |  
| <span data-ttu-id="e807a-458">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="e807a-458">**Applicable Technologies**</span></span> | <span data-ttu-id="e807a-459">泛型</span><span class="sxs-lookup"><span data-stu-id="e807a-459">Generic</span></span> |
| <span data-ttu-id="e807a-460">**屬性**</span><span class="sxs-lookup"><span data-stu-id="e807a-460">**Attributes**</span></span>              | <span data-ttu-id="e807a-461">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-461">N/A</span></span>  |
| <span data-ttu-id="e807a-462">**參考**</span><span class="sxs-lookup"><span data-stu-id="e807a-462">**References**</span></span>              | <span data-ttu-id="e807a-463">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-463">N/A</span></span>  |
| <span data-ttu-id="e807a-464">**步驟**</span><span class="sxs-lookup"><span data-stu-id="e807a-464">**Steps**</span></span> | <span data-ttu-id="e807a-465">確定已備妥需要使用 PIN 並允許遠端抹除的裝置管理原則</span><span class="sxs-lookup"><span data-stu-id="e807a-465">Ensure a device management policy is in place that requires a use PIN and allows remote wiping</span></span> |

## <span data-ttu-id="e807a-466"><a id="bitlocker"></a>確定已備妥需要 PIN/密碼/自動鎖定並會加密所有資料的裝置管理原則 (例如 Bitlocker)</span><span class="sxs-lookup"><span data-stu-id="e807a-466"><a id="bitlocker"></a>Ensure a device management policy is in place that requires a PIN/password/auto lock and encrypts all data (e.g. Bitlocker)</span></span>

| <span data-ttu-id="e807a-467">Title</span><span class="sxs-lookup"><span data-stu-id="e807a-467">Title</span></span>                   | <span data-ttu-id="e807a-468">詳細資料</span><span class="sxs-lookup"><span data-stu-id="e807a-468">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="e807a-469">**元件**</span><span class="sxs-lookup"><span data-stu-id="e807a-469">**Component**</span></span>               | <span data-ttu-id="e807a-470">Dynamics CRM Outlook 用戶端</span><span class="sxs-lookup"><span data-stu-id="e807a-470">Dynamics CRM Outlook Client</span></span> | 
| <span data-ttu-id="e807a-471">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="e807a-471">**SDL Phase**</span></span>               | <span data-ttu-id="e807a-472">建置</span><span class="sxs-lookup"><span data-stu-id="e807a-472">Build</span></span> |  
| <span data-ttu-id="e807a-473">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="e807a-473">**Applicable Technologies**</span></span> | <span data-ttu-id="e807a-474">泛型</span><span class="sxs-lookup"><span data-stu-id="e807a-474">Generic</span></span> |
| <span data-ttu-id="e807a-475">**屬性**</span><span class="sxs-lookup"><span data-stu-id="e807a-475">**Attributes**</span></span>              | <span data-ttu-id="e807a-476">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-476">N/A</span></span>  |
| <span data-ttu-id="e807a-477">**參考**</span><span class="sxs-lookup"><span data-stu-id="e807a-477">**References**</span></span>              | <span data-ttu-id="e807a-478">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-478">N/A</span></span>  |
| <span data-ttu-id="e807a-479">**步驟**</span><span class="sxs-lookup"><span data-stu-id="e807a-479">**Steps**</span></span> | <span data-ttu-id="e807a-480">確定已備妥需要 PIN/密碼/自動鎖定並會加密所有資料的裝置管理原則 (例如 Bitlocker)</span><span class="sxs-lookup"><span data-stu-id="e807a-480">Ensure a device management policy is in place that requires a PIN/password/auto lock and encrypts all data (e.g. Bitlocker)</span></span> |

## <span data-ttu-id="e807a-481"><a id="rolled-server"></a>確定在使用 Identity Server 時會變換簽署金鑰</span><span class="sxs-lookup"><span data-stu-id="e807a-481"><a id="rolled-server"></a>Ensure that signing keys are rolled over when using Identity Server</span></span>

| <span data-ttu-id="e807a-482">Title</span><span class="sxs-lookup"><span data-stu-id="e807a-482">Title</span></span>                   | <span data-ttu-id="e807a-483">詳細資料</span><span class="sxs-lookup"><span data-stu-id="e807a-483">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="e807a-484">**元件**</span><span class="sxs-lookup"><span data-stu-id="e807a-484">**Component**</span></span>               | <span data-ttu-id="e807a-485">Identity Server</span><span class="sxs-lookup"><span data-stu-id="e807a-485">Identity Server</span></span> | 
| <span data-ttu-id="e807a-486">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="e807a-486">**SDL Phase**</span></span>               | <span data-ttu-id="e807a-487">部署</span><span class="sxs-lookup"><span data-stu-id="e807a-487">Deployment</span></span> |  
| <span data-ttu-id="e807a-488">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="e807a-488">**Applicable Technologies**</span></span> | <span data-ttu-id="e807a-489">泛型</span><span class="sxs-lookup"><span data-stu-id="e807a-489">Generic</span></span> |
| <span data-ttu-id="e807a-490">**屬性**</span><span class="sxs-lookup"><span data-stu-id="e807a-490">**Attributes**</span></span>              | <span data-ttu-id="e807a-491">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-491">N/A</span></span>  |
| <span data-ttu-id="e807a-492">**參考**</span><span class="sxs-lookup"><span data-stu-id="e807a-492">**References**</span></span>              | [<span data-ttu-id="e807a-493">Identity Server - 金鑰、簽章和密碼編譯</span><span class="sxs-lookup"><span data-stu-id="e807a-493">Identity Server - Keys, Signatures and Cryptography </span></span>](https://identityserver.github.io/Documentation/docsv2/configuration/crypto.html) |
| <span data-ttu-id="e807a-494">**步驟**</span><span class="sxs-lookup"><span data-stu-id="e807a-494">**Steps**</span></span> | <span data-ttu-id="e807a-495">確定在使用 Identity Server 時會變換簽署金鑰。</span><span class="sxs-lookup"><span data-stu-id="e807a-495">Ensure that signing keys are rolled over when using Identity Server.</span></span> <span data-ttu-id="e807a-496">hello 參考一節中的 hello 連結說明如何這應該計劃而不會造成中斷 tooapplications 信賴憑證者身分識別的伺服器上。</span><span class="sxs-lookup"><span data-stu-id="e807a-496">hello link in hello references section explains how this should be planned without causing outages tooapplications relying on Identity Server.</span></span> |

## <span data-ttu-id="e807a-497"><a id="client-server"></a>確定 Identity Server 會使用密碼編譯增強式用戶端識別碼和用戶端祕密</span><span class="sxs-lookup"><span data-stu-id="e807a-497"><a id="client-server"></a>Ensure that cryptographically strong client ID, client secret are used in Identity Server</span></span>

| <span data-ttu-id="e807a-498">Title</span><span class="sxs-lookup"><span data-stu-id="e807a-498">Title</span></span>                   | <span data-ttu-id="e807a-499">詳細資料</span><span class="sxs-lookup"><span data-stu-id="e807a-499">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="e807a-500">**元件**</span><span class="sxs-lookup"><span data-stu-id="e807a-500">**Component**</span></span>               | <span data-ttu-id="e807a-501">Identity Server</span><span class="sxs-lookup"><span data-stu-id="e807a-501">Identity Server</span></span> | 
| <span data-ttu-id="e807a-502">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="e807a-502">**SDL Phase**</span></span>               | <span data-ttu-id="e807a-503">建置</span><span class="sxs-lookup"><span data-stu-id="e807a-503">Build</span></span> |  
| <span data-ttu-id="e807a-504">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="e807a-504">**Applicable Technologies**</span></span> | <span data-ttu-id="e807a-505">泛型</span><span class="sxs-lookup"><span data-stu-id="e807a-505">Generic</span></span> |
| <span data-ttu-id="e807a-506">**屬性**</span><span class="sxs-lookup"><span data-stu-id="e807a-506">**Attributes**</span></span>              | <span data-ttu-id="e807a-507">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-507">N/A</span></span>  |
| <span data-ttu-id="e807a-508">**參考**</span><span class="sxs-lookup"><span data-stu-id="e807a-508">**References**</span></span>              | <span data-ttu-id="e807a-509">N/A</span><span class="sxs-lookup"><span data-stu-id="e807a-509">N/A</span></span>  |
| <span data-ttu-id="e807a-510">**步驟**</span><span class="sxs-lookup"><span data-stu-id="e807a-510">**Steps**</span></span> | <p><span data-ttu-id="e807a-511">確定 Identity Server 會使用密碼編譯增強式用戶端識別碼和用戶端祕密。</span><span class="sxs-lookup"><span data-stu-id="e807a-511">Ensure that cryptographically strong client ID, client secret are used in Identity Server.</span></span> <span data-ttu-id="e807a-512">產生用戶端識別碼和密碼時，應使用下列指導方針的 hello:</span><span class="sxs-lookup"><span data-stu-id="e807a-512">hello following guidelines should be used while generating a client ID and secret:</span></span></p><ul><li><span data-ttu-id="e807a-513">產生隨機 GUID 為 hello 用戶端識別碼</span><span class="sxs-lookup"><span data-stu-id="e807a-513">Generate a random GUID as hello client ID</span></span></li><li><span data-ttu-id="e807a-514">產生密碼編譯隨機的 256 位元金鑰做為 hello 密碼</span><span class="sxs-lookup"><span data-stu-id="e807a-514">Generate a cryptographically random 256-bit key as hello secret</span></span></li></ul>|
