---
title: "Azure 記錄與稽核 | Microsoft Docs"
description: "了解如何使用記錄資料來取得應用程式的深入解析。"
services: security
documentationcenter: na
author: UnifyCloud
manager: swadhwa
editor: TomSh
ms.assetid: 
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 04/27/2017
ms.author: TomSh
ms.openlocfilehash: 9e5c929251259a86944121e504dc033bc99e3bc4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/11/2017
---
# <a name="azure-logging-and-auditing"></a><span data-ttu-id="f7121-103">Azure 記錄與稽核</span><span class="sxs-lookup"><span data-stu-id="f7121-103">Azure Logging and Auditing</span></span>
## <a name="introduction"></a><span data-ttu-id="f7121-104">簡介</span><span class="sxs-lookup"><span data-stu-id="f7121-104">Introduction</span></span>
### <a name="overview"></a><span data-ttu-id="f7121-105">概觀</span><span class="sxs-lookup"><span data-stu-id="f7121-105">Overview</span></span>
<span data-ttu-id="f7121-106">為了協助目前和潛在的 Azure 客戶了解和使用可在 Azure 平台上和周圍取得的各種安全性相關功能，Microsoft 開發了一系列的技術白皮書、安全性概觀、最佳作法及檢查清單。</span><span class="sxs-lookup"><span data-stu-id="f7121-106">To assist current and prospective Azure customers in understanding and using the various security-related capabilities available in and surrounding the Azure Platform, Microsoft has developed a series of white papers, security overviews, best practices, and checklists.</span></span> <span data-ttu-id="f7121-107">主題範圍兼具廣度與深度，並會定期更新。</span><span class="sxs-lookup"><span data-stu-id="f7121-107">The topics range in terms of breadth and depth and are updated periodically.</span></span> <span data-ttu-id="f7121-108">本文件是該系列的一部分，以下的＜摘要＞一節將會摘要說明。</span><span class="sxs-lookup"><span data-stu-id="f7121-108">This document is part of that series as summarized in the following Abstract section.</span></span>
### <a name="azure-platform"></a><span data-ttu-id="f7121-109">Azure 平台</span><span class="sxs-lookup"><span data-stu-id="f7121-109">Azure Platform</span></span>
<span data-ttu-id="f7121-110">Azure 是一個公開且彈性的雲端服務平台，支援最廣泛的作業系統、程式設計語言、架構、工具、資料庫及裝置等選擇。</span><span class="sxs-lookup"><span data-stu-id="f7121-110">Azure is an open and flexible cloud service platform that supports the broadest selection of operating systems, programming languages, frameworks, tools, databases,and devices.</span></span>

<span data-ttu-id="f7121-111">例如，您可以：</span><span class="sxs-lookup"><span data-stu-id="f7121-111">For example, you can:</span></span>
-   <span data-ttu-id="f7121-112">透過 Docker 整合執行 Linux 容器。</span><span class="sxs-lookup"><span data-stu-id="f7121-112">Run Linux containers with Docker integration.</span></span>

-   <span data-ttu-id="f7121-113">使用 JavaScript、Python、.NET、PHP、Java 和 Node.js 建置應用程式。</span><span class="sxs-lookup"><span data-stu-id="f7121-113">Build apps with JavaScript, Python, .NET, PHP, Java,and Node.js</span></span>

-   <span data-ttu-id="f7121-114">建置 iOS、Android 和 Windows 裝置的後端。</span><span class="sxs-lookup"><span data-stu-id="f7121-114">Build back-ends for iOS, Android,and Windows devices.</span></span>

<span data-ttu-id="f7121-115">Azure 公用雲端服務支援數百萬名開發人員和 IT 專家早已仰賴和信任的相同技術。</span><span class="sxs-lookup"><span data-stu-id="f7121-115">Azure public cloud services support the same technologies millions of developers and IT professionals already rely on and trust.</span></span>

<span data-ttu-id="f7121-116">當您建置 IT 資產或將其移轉至雲端提供者時，您可以依賴該組織的能力來保護您的應用程式和資料，並利用他們所提供的安全性控制來管理您雲端架構資產的安全性。</span><span class="sxs-lookup"><span data-stu-id="f7121-116">When you build on, or migrate IT assets to, a cloud provider, you are relying on that organization’s abilities to protect your applications and data with the services and the controls they provide to manage the security of your cloud-based assets.</span></span>

<span data-ttu-id="f7121-117">Azure 的基礎結構設計涵蓋設備與應用程式，可同時裝載數以百萬計的客戶，並提供可靠的基礎供企業符合其安全性需求。</span><span class="sxs-lookup"><span data-stu-id="f7121-117">Azure’s infrastructure is designed from the facility to applications for hosting millions of customers simultaneously, and it provides a trustworthy foundation upon which businesses can meet their security needs.</span></span> <span data-ttu-id="f7121-118">此外，Azure 也為您提供各式各樣可設定的安全性選項及加以控制的功能，讓您可以自訂安全性以符合部署的特殊需求。</span><span class="sxs-lookup"><span data-stu-id="f7121-118">In addition, Azure provides you with a wide array of configurable security options and the ability to control them so that you can customize security to meet the unique requirements of your deployments.</span></span> <span data-ttu-id="f7121-119">本文件將協助您符合這些需求。</span><span class="sxs-lookup"><span data-stu-id="f7121-119">This document will helps you meet these requirements.</span></span>

### <a name="abstract"></a><span data-ttu-id="f7121-120">摘要</span><span class="sxs-lookup"><span data-stu-id="f7121-120">Abstract</span></span>
<span data-ttu-id="f7121-121">安全性相關事件的稽核和記錄及相關警示是有效資料保護策略中的重要元件。</span><span class="sxs-lookup"><span data-stu-id="f7121-121">Auditing and logging of security-related events, and related alerts, are important components in an effective data protection strategy.</span></span> <span data-ttu-id="f7121-122">安全性記錄和報告會提供可疑活動的電子記錄，並協助您偵測可能指出從外部嘗試或成功滲透網路以及內部攻擊的模式。</span><span class="sxs-lookup"><span data-stu-id="f7121-122">Security logs and reports provide you with an electronic record of suspicious activities and help you detect patterns that may indicate attempted or successful external penetration of the network, as well as internal attacks.</span></span> <span data-ttu-id="f7121-123">您可以使用稽核來監視使用者活動、文件合規性、執行鑑識分析等等。</span><span class="sxs-lookup"><span data-stu-id="f7121-123">You can use auditing to monitor user activity, document regulatory compliance, perform forensic analysis, and more.</span></span> <span data-ttu-id="f7121-124">警示會在安全性事件發生時提供即時通知。</span><span class="sxs-lookup"><span data-stu-id="f7121-124">Alerts provide immediate notification when security events occur.</span></span>

<span data-ttu-id="f7121-125">Microsoft Azure 服務和產品提供可設定的安全性稽核和記錄選項，以協助您識別安全性原則和機制間的差距，並解決這些差距以協助防止破壞。</span><span class="sxs-lookup"><span data-stu-id="f7121-125">Microsoft Azure services and products provide you with configurable security auditing and logging options to help you identify gaps in your security policies and mechanisms, and address those gaps to help prevent breaches.</span></span> <span data-ttu-id="f7121-126">Microsoft 服務提供下列一些 (在某些情況下，是全部) 選項︰集中監視、記錄及分析系統，以提供持續可見性；即時警示；以及報告來協助您管理裝置和服務所產生的大量資訊。</span><span class="sxs-lookup"><span data-stu-id="f7121-126">Microsoft services offer some (and in some cases, all) of the following options: centralized monitoring, logging, and analysis systems to provide continuous visibility; timely alerts; and reports to help you manage the large amount of information generated by devices and services.</span></span>

<span data-ttu-id="f7121-127">Microsoft Azure 記錄資料可以匯出到安全性事件和事件管理 (SIEM) 系統來進行分析，並與協力廠商稽核解決方案整合。</span><span class="sxs-lookup"><span data-stu-id="f7121-127">Microsoft Azure log data can be exported to Security Incident and Event Management (SIEM) systems for analysis and integrates with third-party auditing solutions.</span></span>

<span data-ttu-id="f7121-128">本技術白皮書介紹如何從裝載於 Azure 上的服務產生、收集及分析安全性記錄，並可協助您深入了解 Azure 部署的安全性。</span><span class="sxs-lookup"><span data-stu-id="f7121-128">This whitepaper provides an introduction for generating, collecting, and analyzing security logs from services hosted on Azure, and it can help you gain security insights into your Azure deployments.</span></span> <span data-ttu-id="f7121-129">本技術白皮書的範圍僅限於建置及部署於 Azure 中的應用程式和服務。</span><span class="sxs-lookup"><span data-stu-id="f7121-129">The scope of this white paper is limited to applications and services built and deployed in Azure.</span></span>

> [!Note]
> <span data-ttu-id="f7121-130">此處包含的特定建議可能導致資料、網路或計算資源使用量增加，因而提高您的授權或訂用帳戶成本。</span><span class="sxs-lookup"><span data-stu-id="f7121-130">Certain recommendations contained herein may result in increased data, network, or compute resource usage, and increase your license or subscription costs.</span></span>

## <a name="types-of-logs-in-azure"></a><span data-ttu-id="f7121-131">Azure 中的記錄類型</span><span class="sxs-lookup"><span data-stu-id="f7121-131">Types of logs in Azure</span></span>
<span data-ttu-id="f7121-132">雲端應用程式相當複雜，且具有許多移動組件。</span><span class="sxs-lookup"><span data-stu-id="f7121-132">Cloud applications are complex with many moving parts.</span></span> <span data-ttu-id="f7121-133">記錄會提供資料，以確保應用程式持續運作並以健全狀態執行。</span><span class="sxs-lookup"><span data-stu-id="f7121-133">Logs provide data to ensure that your application stays up and running in a healthy state.</span></span> <span data-ttu-id="f7121-134">它也可協助您預防潛在問題，或是針對過去所發生的問題進行疑難排解。</span><span class="sxs-lookup"><span data-stu-id="f7121-134">It also helps you to stave off potential problems or troubleshoot past ones.</span></span> <span data-ttu-id="f7121-135">除此之外，您還可以使用記錄資料來深入解析應用程式。</span><span class="sxs-lookup"><span data-stu-id="f7121-135">In addition, you can use logging data to gain deep insights about your application.</span></span> <span data-ttu-id="f7121-136">這些知識可協助您提升應用程式效能或維護性，或是將原本需要手動介入的動作自動化。</span><span class="sxs-lookup"><span data-stu-id="f7121-136">That knowledge can help you to improve application performance or maintainability, or automate actions that would otherwise require manual intervention.</span></span>

<span data-ttu-id="f7121-137">Azure 會為每項 Azure 服務產生大量記錄。</span><span class="sxs-lookup"><span data-stu-id="f7121-137">Azure produces extensive logging for every Azure service.</span></span> <span data-ttu-id="f7121-138">這些記錄檔會分類為這幾種主要類型︰</span><span class="sxs-lookup"><span data-stu-id="f7121-138">These logs are categorized by these main types:</span></span>
-   <span data-ttu-id="f7121-139">**控制/管理記錄**可讓您看到 Azure Resource Manager 的 CREATE、UPDATE 和 DELETE 作業。</span><span class="sxs-lookup"><span data-stu-id="f7121-139">**Control/management logs** give visibility into the Azure Resource Manager CREATE, UPDATE, and DELETE operations.</span></span> <span data-ttu-id="f7121-140">[Azure 活動記錄](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-activity-logs)是這個記錄類型的一個範例。</span><span class="sxs-lookup"><span data-stu-id="f7121-140">[Azure Activity Logs](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-activity-logs) is an example of this type of log.</span></span>

-   <span data-ttu-id="f7121-141">**資料層面的記錄**可讓您看到使用 Azure 資源時所引發的事件。</span><span class="sxs-lookup"><span data-stu-id="f7121-141">**Data plane logs** give visibility into the events raised as part of the usage of an Azure resource.</span></span> <span data-ttu-id="f7121-142">這個記錄類型的範例是虛擬機器中的 Windows 事件系統、安全性和應用程式記錄，以及透過 Azure 監視器設定的[診斷記錄](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs)。</span><span class="sxs-lookup"><span data-stu-id="f7121-142">Examples of this type of log are the Windows event System, Security, and Application logs in a virtual machine and the [Diagnostics Logs](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs) configured through Azure Monitor</span></span>


-   <span data-ttu-id="f7121-143">**已處理的事件**提供分析已代替您處理之事件/警示的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="f7121-143">**Processed events** give information about analyzed events/alerts that have been processed on your behalf.</span></span> <span data-ttu-id="f7121-144">這個類型的範例是 [Azure 資訊安全中心警示](https://docs.microsoft.com/azure/security-center/security-center-managing-and-responding-alerts)，[Azure 資訊安全中心](https://docs.microsoft.com/azure/security-center/security-center-intro)已在其中處理和分析您的訂用帳戶，並提供簡要的安全性警示。</span><span class="sxs-lookup"><span data-stu-id="f7121-144">Examples of this type are [Azure Security Center Alerts](https://docs.microsoft.com/azure/security-center/security-center-managing-and-responding-alerts) where [Azure Security Center](https://docs.microsoft.com/azure/security-center/security-center-intro) has processed and analyzed your subscription and provides concise security alerts</span></span>

<span data-ttu-id="f7121-145">下表列出 Azure 中提供的最重要記錄類型。</span><span class="sxs-lookup"><span data-stu-id="f7121-145">The following table list most important type of logs available in Azure.</span></span>

| <span data-ttu-id="f7121-146">記錄分類</span><span class="sxs-lookup"><span data-stu-id="f7121-146">Log Category</span></span> | <span data-ttu-id="f7121-147">記錄類型</span><span class="sxs-lookup"><span data-stu-id="f7121-147">Log Type</span></span> | <span data-ttu-id="f7121-148">使用方式</span><span class="sxs-lookup"><span data-stu-id="f7121-148">Usages</span></span> | <span data-ttu-id="f7121-149">整合</span><span class="sxs-lookup"><span data-stu-id="f7121-149">Integration</span></span> |
| ------------ | -------- | ------ | ----------- |
|[<span data-ttu-id="f7121-150">活動記錄</span><span class="sxs-lookup"><span data-stu-id="f7121-150">Activity Logs</span></span>](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/monitoring-overview-activity-logs)|<span data-ttu-id="f7121-151">Azure Resource Manager 資源上控制層面的事件</span><span class="sxs-lookup"><span data-stu-id="f7121-151">Control-plane events on Azure Resource Manager resources</span></span>| <span data-ttu-id="f7121-152">讓您了解訂用帳戶中的資源所執行之作業。</span><span class="sxs-lookup"><span data-stu-id="f7121-152">Provide insight into the operations that were performed on resources in your subscription.</span></span>| <span data-ttu-id="f7121-153">REST API 與 [Azure 監視器](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/monitoring-overview-activity-logs)</span><span class="sxs-lookup"><span data-stu-id="f7121-153">Rest API & [Azure Monitor](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/monitoring-overview-activity-logs)</span></span>|
|[<span data-ttu-id="f7121-154">Azure 診斷記錄</span><span class="sxs-lookup"><span data-stu-id="f7121-154">Azure Diagnostic Logs</span></span>](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs)|<span data-ttu-id="f7121-155">關於訂用帳戶中 Azure Resource Manager 作業的經常性資料</span><span class="sxs-lookup"><span data-stu-id="f7121-155">frequent data about the operation of Azure Resource Manager resources in subscription</span></span>|   <span data-ttu-id="f7121-156">讓您了解資源自行執行的作業</span><span class="sxs-lookup"><span data-stu-id="f7121-156">Provide insight into operations that your resource performed itself</span></span>| <span data-ttu-id="f7121-157">Azure 監視器、[資料流](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs)</span><span class="sxs-lookup"><span data-stu-id="f7121-157">Azure Monitor, [Stream](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs)</span></span>|
|[<span data-ttu-id="f7121-158">AAD 報告</span><span class="sxs-lookup"><span data-stu-id="f7121-158">AAD Reporting</span></span>](https://docs.microsoft.com/en-us/azure/active-directory/active-directory-reporting-azure-portal)|<span data-ttu-id="f7121-159">記錄和報告</span><span class="sxs-lookup"><span data-stu-id="f7121-159">Logs and Reports</span></span>|<span data-ttu-id="f7121-160">使用者登入活動，以及使用者和群組管理相關的系統活動資訊</span><span class="sxs-lookup"><span data-stu-id="f7121-160">User sign-in activities & System activity information about users and group management</span></span>|[<span data-ttu-id="f7121-161">Graph API</span><span class="sxs-lookup"><span data-stu-id="f7121-161">Graph API</span></span>](https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-graph-api-quickstart)|
|[<span data-ttu-id="f7121-162">雲端服務與虛擬機器</span><span class="sxs-lookup"><span data-stu-id="f7121-162">Virtual Machine & Cloud Services</span></span>](https://docs.microsoft.com/en-us/azure/cloud-services/cloud-services-dotnet-diagnostics-storage)|<span data-ttu-id="f7121-163">Windows 事件記錄與 Linux Syslog</span><span class="sxs-lookup"><span data-stu-id="f7121-163">Windows Event log & Linux Syslog</span></span>|  <span data-ttu-id="f7121-164">在虛擬機器上擷取系統資料和記錄資料，並將該資料傳送到您所選擇的儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="f7121-164">Captures system data and logging data on the virtual machines and transfers that data into a storage account of your choice.</span></span>|   <span data-ttu-id="f7121-165">使用 [WAD](https://docs.microsoft.com/en-us/azure/azure-diagnostics) (Windows Azure 診斷儲存體) 的 Windows 和 Azure 監視器上的 Linux</span><span class="sxs-lookup"><span data-stu-id="f7121-165">Windows using [WAD](https://docs.microsoft.com/en-us/azure/azure-diagnostics) (Windows Azure Diagnostics storage) and Linux in Azure monitor</span></span>|
|[<span data-ttu-id="f7121-166">Storage Analytics</span><span class="sxs-lookup"><span data-stu-id="f7121-166">Storage Analytics</span></span>](https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/storage-analytics)|<span data-ttu-id="f7121-167">儲存體記錄，並提供儲存體帳戶的計量資料</span><span class="sxs-lookup"><span data-stu-id="f7121-167">Storage logging and provides metrics data for a storage account</span></span>|<span data-ttu-id="f7121-168">讓您了解追蹤要求、分析使用趨勢，以及診斷儲存體帳戶的問題。</span><span class="sxs-lookup"><span data-stu-id="f7121-168">Provides insight into trace requests, analyze usage trends, and diagnose issues with your storage account.</span></span>|  <span data-ttu-id="f7121-169">REST API 或[用戶端程式庫](https://msdn.microsoft.com/en-us/library/azure/mt347887.aspx)</span><span class="sxs-lookup"><span data-stu-id="f7121-169">REST API or the [client library](https://msdn.microsoft.com/en-us/library/azure/mt347887.aspx)</span></span>|
|[<span data-ttu-id="f7121-170">NSG (網路安全性群組) 流程記錄</span><span class="sxs-lookup"><span data-stu-id="f7121-170">NSG (Network Security Group) Flow Logs</span></span>](https://docs.microsoft.com/en-us/azure/network-watcher/network-watcher-nsg-flow-logging-overview)|<span data-ttu-id="f7121-171">JSON 格式，並顯示每個規則的輸出和輸入流程</span><span class="sxs-lookup"><span data-stu-id="f7121-171">JSON format and shows outbound and inbound flows on a per rule basis</span></span>|<span data-ttu-id="f7121-172">檢視透過網路安全性群組輸入和輸出 IP 流量的相關資訊</span><span class="sxs-lookup"><span data-stu-id="f7121-172">View information about ingress and egress IP traffic through a Network Security Group</span></span>|[<span data-ttu-id="f7121-173">網路監看員</span><span class="sxs-lookup"><span data-stu-id="f7121-173">Network Watcher</span></span>](https://docs.microsoft.com/en-us/azure/network-watcher/network-watcher-monitoring-overview)|
|[<span data-ttu-id="f7121-174">Application Insight</span><span class="sxs-lookup"><span data-stu-id="f7121-174">Application insight</span></span>](https://docs.microsoft.com/en-us/azure/application-insights/app-insights-overview)|<span data-ttu-id="f7121-175">記錄、例外狀況及自訂診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-175">Logs, exceptions,and custom diagnostics</span></span>|  <span data-ttu-id="f7121-176">多個平台上的 Web 開發人員所適用的應用程式效能管理 (APM) 服務。</span><span class="sxs-lookup"><span data-stu-id="f7121-176">Application Performance Management (APM) service for web developers on multiple platforms.</span></span>| <span data-ttu-id="f7121-177">REST API、[Power BI](https://powerbi.microsoft.com/en-us/documentation/powerbi-azure-and-power-bi/)</span><span class="sxs-lookup"><span data-stu-id="f7121-177">REST API, [Power BI](https://powerbi.microsoft.com/en-us/documentation/powerbi-azure-and-power-bi/)</span></span>|
|<span data-ttu-id="f7121-178">處理資料/安全性警示</span><span class="sxs-lookup"><span data-stu-id="f7121-178">Process Data / Security Alert</span></span>| <span data-ttu-id="f7121-179">Azure 資訊安全中心警示，OMS 警示</span><span class="sxs-lookup"><span data-stu-id="f7121-179">Azure Security Center Alert, OMS Alert</span></span>| <span data-ttu-id="f7121-180">資訊安全資訊與警示。</span><span class="sxs-lookup"><span data-stu-id="f7121-180">Security information and alerts.</span></span>|   <span data-ttu-id="f7121-181">REST API、JSON</span><span class="sxs-lookup"><span data-stu-id="f7121-181">REST APIs, JSON</span></span>|

### <a name="activity-log"></a><span data-ttu-id="f7121-182">活動記錄檔</span><span class="sxs-lookup"><span data-stu-id="f7121-182">Activity Log</span></span>
<span data-ttu-id="f7121-183">[Azure 活動記錄](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-activity-logs)能讓您了解訂用帳戶中的資源所執行之作業。</span><span class="sxs-lookup"><span data-stu-id="f7121-183">The [Azure Activity Log](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-activity-logs), provides insight into the operations that were performed on resources in your subscription.</span></span> <span data-ttu-id="f7121-184">活動記錄之前稱做「稽核記錄」或「作業記錄」，因為它會報告訂用帳戶中[控制層面的事件 (英文)](https://driftboatdave.com/2016/10/13/azure-auditing-options-for-your-custom-reporting-needs/)。</span><span class="sxs-lookup"><span data-stu-id="f7121-184">The Activity Log was previously known as “Audit Logs” or “Operational Logs,” since it reports [control-plane events](https://driftboatdave.com/2016/10/13/azure-auditing-options-for-your-custom-reporting-needs/) for your subscriptions.</span></span> <span data-ttu-id="f7121-185">您可以使用活動記錄，來判斷訂用帳戶中的資源上所採用之任何寫入作業 (PUT、POST、DELETE) 的「內容、對象和時間」。</span><span class="sxs-lookup"><span data-stu-id="f7121-185">Using the Activity Log, you can determine the “what, who, and when” for any write operations (PUT, POST, DELETE) taken on the resources in your subscription.</span></span> <span data-ttu-id="f7121-186">您也可以了解作業的狀態和其他相關屬性。</span><span class="sxs-lookup"><span data-stu-id="f7121-186">You can also understand the status of the operation and other relevant properties.</span></span> <span data-ttu-id="f7121-187">活動記錄檔不包含讀取作業 (GET)。</span><span class="sxs-lookup"><span data-stu-id="f7121-187">The Activity Log does not include read (GET) operations.</span></span>

<span data-ttu-id="f7121-188">這裡的 PUT、POST、DELETE 是指資源上活動記錄包含的所有寫入作業。</span><span class="sxs-lookup"><span data-stu-id="f7121-188">Here PUT, POST, DELETE refers to all the write operations activity log contains on the resources.</span></span> <span data-ttu-id="f7121-189">例如，您可以在進行疑難排解時使用活動記錄來尋找錯誤，或是監視組織中使用者修改資源的方式。</span><span class="sxs-lookup"><span data-stu-id="f7121-189">For example, you can use the activity logs to find an error when troubleshooting or to monitor how a user in your organization modified a resource.</span></span>

![活動記錄檔](./media/azure-log-audit/azure-log-audit-fig1.png)


<span data-ttu-id="f7121-191">您可以使用 Azure 入口網站、[CLI](https://docs.microsoft.com/azure/storage/storage-azure-cli)、PowerShell Cmdlet、[Azure 監視器 REST API](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-rest-api-walkthrough)，從活動記錄擷取事件。</span><span class="sxs-lookup"><span data-stu-id="f7121-191">You can retrieve events from your Activity Log using the Azure portal, [CLI](https://docs.microsoft.com/azure/storage/storage-azure-cli), PowerShell cmdlets, and [Azure Monitor REST API](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-rest-api-walkthrough).</span></span> <span data-ttu-id="f7121-192">活動記錄的資料保留期限為 19 天。</span><span class="sxs-lookup"><span data-stu-id="f7121-192">Activity logs have 19-day data retention period.</span></span>

<span data-ttu-id="f7121-193">整合案例</span><span class="sxs-lookup"><span data-stu-id="f7121-193">Integration Scenarios</span></span>
-   [<span data-ttu-id="f7121-194">建立電子郵件或可觸發關閉活動記錄檔事件的 webhook 警示。</span><span class="sxs-lookup"><span data-stu-id="f7121-194">Create an email or webhook alert that triggers off an Activity Log event.</span></span>](https://docs.microsoft.com/azure/monitoring-and-diagnostics/insights-auditlog-to-webhook-email)

-   <span data-ttu-id="f7121-195">[將活動記錄串流至事件中樞](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-stream-activity-logs-event-hubs)，以供第三方服務或自訂的分析解決方案 (如 PowerBI) 擷取。</span><span class="sxs-lookup"><span data-stu-id="f7121-195">[Stream it to an Event Hub](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-stream-activity-logs-event-hubs) for ingestion by a third-party service or custom analytics solution such as PowerBI.</span></span>

-   <span data-ttu-id="f7121-196">使用 [PowerBI 內容套件](https://powerbi.microsoft.com/documentation/powerbi-content-pack-azure-audit-logs/)，在 PowerBI 中分析活動記錄。</span><span class="sxs-lookup"><span data-stu-id="f7121-196">Analyze it in PowerBI using the [PowerBI content pack.](https://powerbi.microsoft.com/documentation/powerbi-content-pack-azure-audit-logs/)</span></span>

-   <span data-ttu-id="f7121-197">[將活動記錄儲存到儲存體帳戶，以供封存或手動檢查](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-archive-activity-log)。</span><span class="sxs-lookup"><span data-stu-id="f7121-197">[Save it to a Storage Account for archival or manual inspection.](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-archive-activity-log)</span></span> <span data-ttu-id="f7121-198">您可以使用記錄設定檔來指定保留時間 (以天為單位)。</span><span class="sxs-lookup"><span data-stu-id="f7121-198">You can specify the retention time (in days) using Log Profiles.</span></span>

-   <span data-ttu-id="f7121-199">在 Azure 入口網站中查詢和檢視活動記錄。</span><span class="sxs-lookup"><span data-stu-id="f7121-199">Query and view it in the Azure portal.</span></span>

-   <span data-ttu-id="f7121-200">透過 PowerShell Cmdlet、CLI 或 REST API 查詢活動記錄。</span><span class="sxs-lookup"><span data-stu-id="f7121-200">Query it via PowerShell Cmdlet, CLI, or REST API.</span></span>

-   <span data-ttu-id="f7121-201">將活動記錄與記錄設定檔匯出至 [Log Analytics](https://docs.microsoft.com/azure/log-analytics/log-analytics-overview)。</span><span class="sxs-lookup"><span data-stu-id="f7121-201">Export the Activity Log with Log Profiles to [log Analytics](https://docs.microsoft.com/azure/log-analytics/log-analytics-overview).</span></span>

<span data-ttu-id="f7121-202">您可以使用並非發出記錄的同一個訂用帳戶中的儲存體帳戶或[事件中樞命名空間](https://docs.microsoft.com/azure/event-hubs/event-hubs-resource-manager-namespace-event-hub-enable-archive)。</span><span class="sxs-lookup"><span data-stu-id="f7121-202">You can use a storage account or [event hub namespace](https://docs.microsoft.com/azure/event-hubs/event-hubs-resource-manager-namespace-event-hub-enable-archive) that is not in the same subscription as the one emitting log.</span></span> <span data-ttu-id="f7121-203">進行此設定的使用者必須具有這兩個訂用帳戶的適當 [RBAC](https://docs.microsoft.com/azure/active-directory/role-based-access-control-configure) 存取權。</span><span class="sxs-lookup"><span data-stu-id="f7121-203">The user who configures the setting must have the appropriate [RBAC](https://docs.microsoft.com/azure/active-directory/role-based-access-control-configure) access to both subscriptions</span></span>
### <a name="azure-diagnostic-logs"></a><span data-ttu-id="f7121-204">Azure 診斷記錄</span><span class="sxs-lookup"><span data-stu-id="f7121-204">Azure Diagnostic Logs</span></span>
<span data-ttu-id="f7121-205">Azure 診斷記錄是由資源發出的，提供有關該資源之作業的豐富、經常性資料。</span><span class="sxs-lookup"><span data-stu-id="f7121-205">Azure Diagnostic Logs are emitted by a resource that provide rich, frequent data about the operation of that resource.</span></span> <span data-ttu-id="f7121-206">這些記錄的內容會因資源類型而不同 (例如，[Windows 事件系統記錄檔](https://docs.microsoft.com/azure/log-analytics/log-analytics-data-sources-windows-events)是 VM 之診斷記錄的一個分類，而 [Blob、表格及佇列記錄](https://docs.microsoft.com/azure/storage/storage-monitor-storage-account)是儲存體帳戶之診斷記錄檔的分類)，而且與活動記錄不同，後者可讓您深入了解在訂用帳戶中的資源上執行之作業。</span><span class="sxs-lookup"><span data-stu-id="f7121-206">The content of these logs varies by resource type (for example, [Windows event system logs](https://docs.microsoft.com/azure/log-analytics/log-analytics-data-sources-windows-events)are one category of Diagnostic Log for VMs and [blob, table, and queue logs](https://docs.microsoft.com/azure/storage/storage-monitor-storage-account) are categories of Diagnostic Logs for storage accounts) and differ from the Activity Log, which provides insight into the operations that were performed on resources in your subscription.</span></span>

![Azure 診斷記錄](./media/azure-log-audit/azure-log-audit-fig2.png)

<span data-ttu-id="f7121-208">Azure 診斷記錄提供多個組態選項，亦即 Azure 入口網站、使用 PowerShell、命令列介面 (CLI) 和 REST API。</span><span class="sxs-lookup"><span data-stu-id="f7121-208">Azure Diagnostics logs offer multiple configuration options that is,Azure portal, using PowerShell, Command-line interface (CLI),and REST API.</span></span>

<span data-ttu-id="f7121-209">**整合案例**</span><span class="sxs-lookup"><span data-stu-id="f7121-209">**Integration Scenarios**</span></span>
-   <span data-ttu-id="f7121-210">將診斷記錄檔儲存到 [儲存體帳戶](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-archive-diagnostic-logs) 以利稽核或手動檢查。</span><span class="sxs-lookup"><span data-stu-id="f7121-210">Save them to a [Storage Account](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-archive-diagnostic-logs) for auditing or manual inspection.</span></span> <span data-ttu-id="f7121-211">您可以使用診斷設定來指定保留時間 (以天為單位)。</span><span class="sxs-lookup"><span data-stu-id="f7121-211">You can specify the retention time (in days) using the Diagnostic Settings.</span></span>

-   <span data-ttu-id="f7121-212">[將診斷記錄串流至事件中樞](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-stream-diagnostic-logs-to-event-hubs)，以供第三方服務或自訂的分析解決方案 (如 [PowerBI](https://powerbi.microsoft.com/documentation/powerbi-azure-and-power-bi/)) 擷取。</span><span class="sxs-lookup"><span data-stu-id="f7121-212">[Stream them to Event Hubs](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-stream-diagnostic-logs-to-event-hubs) for ingestion by a third-party service or custom analytics solution such as [PowerBI.](https://powerbi.microsoft.com/documentation/powerbi-azure-and-power-bi/)</span></span>

-   <span data-ttu-id="f7121-213">以 [OMS Log Analytics](https://docs.microsoft.com/azure/log-analytics/log-analytics-overview) 分析記錄。</span><span class="sxs-lookup"><span data-stu-id="f7121-213">Analyze them with [OMS Log Analytics.](https://docs.microsoft.com/azure/log-analytics/log-analytics-overview)</span></span>

<span data-ttu-id="f7121-214">**支援的服務、診斷記錄的結構描述，以及每個資源類型支援的記錄分類**</span><span class="sxs-lookup"><span data-stu-id="f7121-214">**Supported services, schema for Diagnostic Logs and supported log categories per resource type**</span></span>


| <span data-ttu-id="f7121-215">服務</span><span class="sxs-lookup"><span data-stu-id="f7121-215">Service</span></span> | <span data-ttu-id="f7121-216">結構描述與文件</span><span class="sxs-lookup"><span data-stu-id="f7121-216">Schema & Docs</span></span> | <span data-ttu-id="f7121-217">資源類型</span><span class="sxs-lookup"><span data-stu-id="f7121-217">Resource Type</span></span> | <span data-ttu-id="f7121-218">類別</span><span class="sxs-lookup"><span data-stu-id="f7121-218">Category</span></span> |
| ------- | ------------- | ------------- | -------- |
|<span data-ttu-id="f7121-219">負載平衡器</span><span class="sxs-lookup"><span data-stu-id="f7121-219">Load Balancer</span></span>| [<span data-ttu-id="f7121-220">Azure 負載平衡器的記錄檔分析 (預覽)</span><span class="sxs-lookup"><span data-stu-id="f7121-220">Log analytics for Azure Load Balancer (Preview)</span></span>](https://docs.microsoft.com/en-us/azure/load-balancer/load-balancer-monitor-log)|<span data-ttu-id="f7121-221">Microsoft.Network/loadBalancers</span><span class="sxs-lookup"><span data-stu-id="f7121-221">Microsoft.Network/loadBalancers</span></span>|  <span data-ttu-id="f7121-222">LoadBalancerAlertEvent</span><span class="sxs-lookup"><span data-stu-id="f7121-222">LoadBalancerAlertEvent</span></span>|
|||<span data-ttu-id="f7121-223">Microsoft.Network/loadBalancers</span><span class="sxs-lookup"><span data-stu-id="f7121-223">Microsoft.Network/loadBalancers</span></span>| <span data-ttu-id="f7121-224">LoadBalancerProbeHealthStatus</span><span class="sxs-lookup"><span data-stu-id="f7121-224">LoadBalancerProbeHealthStatus</span></span>
|<span data-ttu-id="f7121-225">網路安全性群組</span><span class="sxs-lookup"><span data-stu-id="f7121-225">Network Security Groups</span></span>|[<span data-ttu-id="f7121-226">網路安全性群組 (NSG) 的記錄檔分析</span><span class="sxs-lookup"><span data-stu-id="f7121-226">Log analytics for network security groups (NSGs)</span></span>](https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-nsg-manage-log)|<span data-ttu-id="f7121-227">Microsoft.Network/networksecuritygroups</span><span class="sxs-lookup"><span data-stu-id="f7121-227">Microsoft.Network/networksecuritygroups</span></span>|<span data-ttu-id="f7121-228">NetworkSecurityGroupEvent</span><span class="sxs-lookup"><span data-stu-id="f7121-228">NetworkSecurityGroupEvent</span></span>|
|||<span data-ttu-id="f7121-229">Microsoft.Network/networksecuritygroups</span><span class="sxs-lookup"><span data-stu-id="f7121-229">Microsoft.Network/networksecuritygroups</span></span>|<span data-ttu-id="f7121-230">NetworkSecurityGroupRuleCounter</span><span class="sxs-lookup"><span data-stu-id="f7121-230">NetworkSecurityGroupRuleCounter</span></span>|
|<span data-ttu-id="f7121-231">應用程式閘道</span><span class="sxs-lookup"><span data-stu-id="f7121-231">Application Gateways</span></span>|[<span data-ttu-id="f7121-232">應用程式閘道的診斷記錄功能</span><span class="sxs-lookup"><span data-stu-id="f7121-232">Diagnostics Logging for Application Gateway</span></span>](https://docs.microsoft.com/en-us/azure/application-gateway/application-gateway-diagnostics)|<span data-ttu-id="f7121-233">Microsoft.Network/applicationGateways</span><span class="sxs-lookup"><span data-stu-id="f7121-233">Microsoft.Network/applicationGateways</span></span>|<span data-ttu-id="f7121-234">ApplicationGatewayAccessLog</span><span class="sxs-lookup"><span data-stu-id="f7121-234">ApplicationGatewayAccessLog</span></span>|
|||<span data-ttu-id="f7121-235">Microsoft.Network/applicationGateways</span><span class="sxs-lookup"><span data-stu-id="f7121-235">Microsoft.Network/applicationGateways</span></span>|<span data-ttu-id="f7121-236">ApplicationGatewayPerformanceLog</span><span class="sxs-lookup"><span data-stu-id="f7121-236">ApplicationGatewayPerformanceLog</span></span>|
|||<span data-ttu-id="f7121-237">Microsoft.Network/applicationGateways</span><span class="sxs-lookup"><span data-stu-id="f7121-237">Microsoft.Network/applicationGateways</span></span>|<span data-ttu-id="f7121-238">ApplicationGatewayFirewallLog</span><span class="sxs-lookup"><span data-stu-id="f7121-238">ApplicationGatewayFirewallLog</span></span>|
|<span data-ttu-id="f7121-239">金鑰保存庫</span><span class="sxs-lookup"><span data-stu-id="f7121-239">Key Vault</span></span>|[<span data-ttu-id="f7121-240">Azure 金鑰保存庫記錄</span><span class="sxs-lookup"><span data-stu-id="f7121-240">Azure Key Vault Logging</span></span>](https://docs.microsoft.com/en-us/azure/key-vault/key-vault-logging)|<span data-ttu-id="f7121-241">Microsoft.KeyVault/vaults</span><span class="sxs-lookup"><span data-stu-id="f7121-241">Microsoft.KeyVault/vaults</span></span>|<span data-ttu-id="f7121-242">AuditEvent</span><span class="sxs-lookup"><span data-stu-id="f7121-242">AuditEvent</span></span>|
|<span data-ttu-id="f7121-243">Azure 搜尋服務</span><span class="sxs-lookup"><span data-stu-id="f7121-243">Azure Search</span></span>|[<span data-ttu-id="f7121-244">啟用和使用搜尋流量分析</span><span class="sxs-lookup"><span data-stu-id="f7121-244">Enabling and using Search Traffic Analytics</span></span>](https://docs.microsoft.com/en-us/azure/search/search-traffic-analytics)|<span data-ttu-id="f7121-245">Microsoft.Search/searchServices</span><span class="sxs-lookup"><span data-stu-id="f7121-245">Microsoft.Search/searchServices</span></span>|<span data-ttu-id="f7121-246">OperationLogs</span><span class="sxs-lookup"><span data-stu-id="f7121-246">OperationLogs</span></span>|
|<span data-ttu-id="f7121-247">Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="f7121-247">Data Lake Store</span></span>|[<span data-ttu-id="f7121-248">存取 Azure Data Lake Store 的診斷記錄</span><span class="sxs-lookup"><span data-stu-id="f7121-248">Accessing diagnostic logs for Azure Data Lake Store</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-diagnostic-logs)|<span data-ttu-id="f7121-249">Microsoft.DataLakeStore/accounts</span><span class="sxs-lookup"><span data-stu-id="f7121-249">Microsoft.DataLakeStore/accounts</span></span>|<span data-ttu-id="f7121-250">稽核</span><span class="sxs-lookup"><span data-stu-id="f7121-250">Audit</span></span>|
|<span data-ttu-id="f7121-251">Data Lake Analytics</span><span class="sxs-lookup"><span data-stu-id="f7121-251">Data Lake Analytics</span></span>|[<span data-ttu-id="f7121-252">存取 Azure Data Lake Analytics 的診斷記錄</span><span class="sxs-lookup"><span data-stu-id="f7121-252">Accessing diagnostic logs for Azure Data Lake Analytics</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-analytics/data-lake-analytics-diagnostic-logs)|<span data-ttu-id="f7121-253">Microsoft.DataLakeAnalytics/accounts</span><span class="sxs-lookup"><span data-stu-id="f7121-253">Microsoft.DataLakeAnalytics/accounts</span></span>|<span data-ttu-id="f7121-254">稽核</span><span class="sxs-lookup"><span data-stu-id="f7121-254">Audit</span></span>|
|||<span data-ttu-id="f7121-255">Microsoft.DataLakeAnalytics/accounts</span><span class="sxs-lookup"><span data-stu-id="f7121-255">Microsoft.DataLakeAnalytics/accounts</span></span>|<span data-ttu-id="f7121-256">要求</span><span class="sxs-lookup"><span data-stu-id="f7121-256">Requests</span></span>|
|||<span data-ttu-id="f7121-257">Microsoft.DataLakeStore/accounts</span><span class="sxs-lookup"><span data-stu-id="f7121-257">Microsoft.DataLakeStore/accounts</span></span>|<span data-ttu-id="f7121-258">要求</span><span class="sxs-lookup"><span data-stu-id="f7121-258">Requests</span></span>|
|<span data-ttu-id="f7121-259">Logic Apps</span><span class="sxs-lookup"><span data-stu-id="f7121-259">Logic Apps</span></span>|[<span data-ttu-id="f7121-260">Logic Apps B2B 自訂追蹤結構描述</span><span class="sxs-lookup"><span data-stu-id="f7121-260">Logic Apps B2B custom tracking schema</span></span>](https://docs.microsoft.com/en-us/azure/logic-apps/logic-apps-track-integration-account-custom-tracking-schema)|<span data-ttu-id="f7121-261">Microsoft.Logic/workflows</span><span class="sxs-lookup"><span data-stu-id="f7121-261">Microsoft.Logic/workflows</span></span>|<span data-ttu-id="f7121-262">WorkflowRuntime</span><span class="sxs-lookup"><span data-stu-id="f7121-262">WorkflowRuntime</span></span>|
|||<span data-ttu-id="f7121-263">Microsoft.Logic/integrationAccounts</span><span class="sxs-lookup"><span data-stu-id="f7121-263">Microsoft.Logic/integrationAccounts</span></span>|<span data-ttu-id="f7121-264">IntegrationAccountTrackingEvents</span><span class="sxs-lookup"><span data-stu-id="f7121-264">IntegrationAccountTrackingEvents</span></span>|
|<span data-ttu-id="f7121-265">Azure Batch</span><span class="sxs-lookup"><span data-stu-id="f7121-265">Azure Batch</span></span>|[<span data-ttu-id="f7121-266">Azure Batch 診斷記錄</span><span class="sxs-lookup"><span data-stu-id="f7121-266">Azure Batch diagnostic logging</span></span>](https://docs.microsoft.com/en-us/azure/batch/batch-diagnostics)|<span data-ttu-id="f7121-267">Microsoft.Batch/batchAccounts</span><span class="sxs-lookup"><span data-stu-id="f7121-267">Microsoft.Batch/batchAccounts</span></span>|<span data-ttu-id="f7121-268">ServiceLog</span><span class="sxs-lookup"><span data-stu-id="f7121-268">ServiceLog</span></span>|
|<span data-ttu-id="f7121-269">Azure 自動化</span><span class="sxs-lookup"><span data-stu-id="f7121-269">Azure Automation</span></span>|[<span data-ttu-id="f7121-270">Azure 自動化的記錄檔分析</span><span class="sxs-lookup"><span data-stu-id="f7121-270">Log analytics for Azure Automation</span></span>](https://docs.microsoft.com/en-us/azure/automation/automation-manage-send-joblogs-log-analytics)|<span data-ttu-id="f7121-271">Microsoft.Automation/automationAccounts</span><span class="sxs-lookup"><span data-stu-id="f7121-271">Microsoft.Automation/automationAccounts</span></span>|<span data-ttu-id="f7121-272">JobLogs</span><span class="sxs-lookup"><span data-stu-id="f7121-272">JobLogs</span></span>|
|||<span data-ttu-id="f7121-273">Microsoft.Automation/automationAccounts</span><span class="sxs-lookup"><span data-stu-id="f7121-273">Microsoft.Automation/automationAccounts</span></span>|<span data-ttu-id="f7121-274">JobStreams</span><span class="sxs-lookup"><span data-stu-id="f7121-274">JobStreams</span></span>|
|<span data-ttu-id="f7121-275">事件中樞</span><span class="sxs-lookup"><span data-stu-id="f7121-275">Event Hubs</span></span>|[<span data-ttu-id="f7121-276">Azure 事件中樞診斷記錄</span><span class="sxs-lookup"><span data-stu-id="f7121-276">Azure Event Hubs diagnostic logs</span></span>](https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-diagnostic-logs)|<span data-ttu-id="f7121-277">Microsoft.EventHub/namespaces</span><span class="sxs-lookup"><span data-stu-id="f7121-277">Microsoft.EventHub/namespaces</span></span>|<span data-ttu-id="f7121-278">ArchiveLogs</span><span class="sxs-lookup"><span data-stu-id="f7121-278">ArchiveLogs</span></span>|
|||<span data-ttu-id="f7121-279">Microsoft.EventHub/namespaces</span><span class="sxs-lookup"><span data-stu-id="f7121-279">Microsoft.EventHub/namespaces</span></span>|<span data-ttu-id="f7121-280">OperationalLogs</span><span class="sxs-lookup"><span data-stu-id="f7121-280">OperationalLogs</span></span>|
|<span data-ttu-id="f7121-281">串流分析</span><span class="sxs-lookup"><span data-stu-id="f7121-281">Stream Analytics</span></span>|[<span data-ttu-id="f7121-282">作業診斷記錄</span><span class="sxs-lookup"><span data-stu-id="f7121-282">Job diagnostic logs</span></span>](https://docs.microsoft.com/en-us/azure/stream-analytics/stream-analytics-job-diagnostic-logs)|<span data-ttu-id="f7121-283">Microsoft.StreamAnalytics/streamingjobs</span><span class="sxs-lookup"><span data-stu-id="f7121-283">Microsoft.StreamAnalytics/streamingjobs</span></span>|<span data-ttu-id="f7121-284">執行</span><span class="sxs-lookup"><span data-stu-id="f7121-284">Execution</span></span>|
|||<span data-ttu-id="f7121-285">Microsoft.StreamAnalytics/streamingjobs</span><span class="sxs-lookup"><span data-stu-id="f7121-285">Microsoft.StreamAnalytics/streamingjobs</span></span>|<span data-ttu-id="f7121-286">編寫</span><span class="sxs-lookup"><span data-stu-id="f7121-286">Authoring</span></span>|
|<span data-ttu-id="f7121-287">服務匯流排</span><span class="sxs-lookup"><span data-stu-id="f7121-287">Service Bus</span></span>|[<span data-ttu-id="f7121-288">Azure 服務匯流排診斷記錄</span><span class="sxs-lookup"><span data-stu-id="f7121-288">Azure Service Bus diagnostic logs</span></span>](https://docs.microsoft.com/en-us/azure/service-bus-messaging/service-bus-diagnostic-logs)|<span data-ttu-id="f7121-289">Microsoft.ServiceBus/namespaces</span><span class="sxs-lookup"><span data-stu-id="f7121-289">Microsoft.ServiceBus/namespaces</span></span>|<span data-ttu-id="f7121-290">OperationalLogs</span><span class="sxs-lookup"><span data-stu-id="f7121-290">OperationalLogs</span></span>|

### <a name="azure-active-directory-reporting"></a><span data-ttu-id="f7121-291">Azure Active Directory 報告</span><span class="sxs-lookup"><span data-stu-id="f7121-291">Azure Active Directory Reporting</span></span>
<span data-ttu-id="f7121-292">Azure Active Directory (Azure AD) 包括您的目錄的安全性、活動和稽核報告。</span><span class="sxs-lookup"><span data-stu-id="f7121-292">Azure Active Directory (Azure AD) includes security, activity, and audit reports for your directory.</span></span> <span data-ttu-id="f7121-293">[Azure Active Directory 稽核報告](https://docs.microsoft.com/azure/active-directory/active-directory-reporting-guide)可協助客戶識別其 Azure Active Directory 中發生的特殊權限動作。</span><span class="sxs-lookup"><span data-stu-id="f7121-293">The [Azure Active Directory Audit Report](https://docs.microsoft.com/azure/active-directory/active-directory-reporting-guide) helps customers to identify privileged actions that occurred in their Azure Active Directory.</span></span> <span data-ttu-id="f7121-294">特殊權限動作包括提高權限變更 (例如，角色建立或密碼重設)、原則設定變更 (例如密碼原則) 或目錄設定變更 (例如，網域同盟設定變更)。</span><span class="sxs-lookup"><span data-stu-id="f7121-294">Privileged actions include elevation changes (for example, role creation or password resets), changing policy configurations (for example password policies), or changes to directory configuration (for example, changes to domain federation settings).</span></span>

<span data-ttu-id="f7121-295">報告會提供的稽核記錄包括事件名稱、執行動作的執行者、受變更影響的目標資源，以及日期和時間 (UTC)。</span><span class="sxs-lookup"><span data-stu-id="f7121-295">The reports provide the audit record for the event name, the actor who performed the action, the target resource affected by the change, and the date and time (in UTC).</span></span> <span data-ttu-id="f7121-296">客戶能透過 [Azure 入口網站](https://portal.azure.com/)擷取其 Azure Active Directory 的稽核事件清單，如[檢視您的稽核記錄](https://docs.microsoft.com/azure/active-directory/active-directory-reporting-azure-portal)中所述。</span><span class="sxs-lookup"><span data-stu-id="f7121-296">Customers are able to retrieve the list of audit events for their Azure Active Directory via the [Azure portal](https://portal.azure.com/), as described in [View your Audit Logs](https://docs.microsoft.com/azure/active-directory/active-directory-reporting-azure-portal).</span></span> <span data-ttu-id="f7121-297">以下是包含的報告清單：</span><span class="sxs-lookup"><span data-stu-id="f7121-297">Here's a list of the reports included:</span></span>

| <span data-ttu-id="f7121-298">安全性報告</span><span class="sxs-lookup"><span data-stu-id="f7121-298">Security reports</span></span> | <span data-ttu-id="f7121-299">活動報告</span><span class="sxs-lookup"><span data-stu-id="f7121-299">Activity reports</span></span> | <span data-ttu-id="f7121-300">稽核報告</span><span class="sxs-lookup"><span data-stu-id="f7121-300">Audit reports</span></span> |
| :--------------- | :--------------- | :------------ |
|<span data-ttu-id="f7121-301">從不明來源登入</span><span class="sxs-lookup"><span data-stu-id="f7121-301">Sign-ins from unknown sources</span></span>| <span data-ttu-id="f7121-302">應用程式使用情況：摘要</span><span class="sxs-lookup"><span data-stu-id="f7121-302">Application usage: summary</span></span>| <span data-ttu-id="f7121-303">目錄稽核報告</span><span class="sxs-lookup"><span data-stu-id="f7121-303">Directory audit report</span></span>|
|<span data-ttu-id="f7121-304">在多次失敗後登入</span><span class="sxs-lookup"><span data-stu-id="f7121-304">Sign-ins after multiple failures</span></span>|  <span data-ttu-id="f7121-305">應用程式使用情況：詳細</span><span class="sxs-lookup"><span data-stu-id="f7121-305">Application usage: detailed</span></span>||
|<span data-ttu-id="f7121-306">從多個地理區域登入</span><span class="sxs-lookup"><span data-stu-id="f7121-306">Sign-ins from multiple geographies</span></span>|    <span data-ttu-id="f7121-307">應用程式儀表板</span><span class="sxs-lookup"><span data-stu-id="f7121-307">Application dashboard</span></span>||
|<span data-ttu-id="f7121-308">從具有可疑活動的 IP 位址登入</span><span class="sxs-lookup"><span data-stu-id="f7121-308">Sign-ins from IP addresses with suspicious activity</span></span>|   <span data-ttu-id="f7121-309">帳戶佈建錯誤</span><span class="sxs-lookup"><span data-stu-id="f7121-309">Account provisioning errors</span></span>||
|<span data-ttu-id="f7121-310">異常的登入活動</span><span class="sxs-lookup"><span data-stu-id="f7121-310">Irregular sign-in activity</span></span>|    <span data-ttu-id="f7121-311">個別使用者裝置</span><span class="sxs-lookup"><span data-stu-id="f7121-311">Individual user devices</span></span>||
|<span data-ttu-id="f7121-312">從可能受感染的裝置登入</span><span class="sxs-lookup"><span data-stu-id="f7121-312">Sign-ins from possibly infected devices</span></span>|   <span data-ttu-id="f7121-313">個別使用者活動</span><span class="sxs-lookup"><span data-stu-id="f7121-313">Individual user Activity</span></span>||
|<span data-ttu-id="f7121-314">具有異常登入活動的使用者</span><span class="sxs-lookup"><span data-stu-id="f7121-314">Users with anomalous sign-in activity</span></span>| <span data-ttu-id="f7121-315">群組活動報告</span><span class="sxs-lookup"><span data-stu-id="f7121-315">Groups activity report</span></span>||
||<span data-ttu-id="f7121-316">密碼重設登錄活動報告</span><span class="sxs-lookup"><span data-stu-id="f7121-316">Password Reset Registration Activity Report</span></span>||
||<span data-ttu-id="f7121-317">密碼重設活動</span><span class="sxs-lookup"><span data-stu-id="f7121-317">Password reset activity</span></span>|||

<span data-ttu-id="f7121-318">這些報告的資料對您的應用程式 (例如 SIEM 系統、稽核和商業智慧工具) 非常有用。</span><span class="sxs-lookup"><span data-stu-id="f7121-318">The data of these reports can be useful to your applications, such as SIEM systems, audit, and business intelligence tools.</span></span> <span data-ttu-id="f7121-319">Azure AD 報告 API 透過一組以 REST 為基礎的 API 提供資料的程式設計方式存取。</span><span class="sxs-lookup"><span data-stu-id="f7121-319">The Azure AD reporting APIs provide programmatic access to the data through a set of REST-based APIs.</span></span> <span data-ttu-id="f7121-320">您可以從各種程式設計語言和工具呼叫這些 [API](https://docs.microsoft.com/azure/active-directory/active-directory-reporting-api-getting-started)。</span><span class="sxs-lookup"><span data-stu-id="f7121-320">You can call these [APIs](https://docs.microsoft.com/azure/active-directory/active-directory-reporting-api-getting-started) from various programming languages and tools.</span></span>

<span data-ttu-id="f7121-321">Azure AD 稽核報告中的事件會保留 180 天。</span><span class="sxs-lookup"><span data-stu-id="f7121-321">Events in the Azure AD Audit report are retained for 180 days.</span></span>

> [!Note]
> <span data-ttu-id="f7121-322">如需保留報告的詳細資訊，請參閱 [Azure Active Directory 報告保留原則](https://docs.microsoft.com/azure/active-directory/active-directory-reporting-retention)。</span><span class="sxs-lookup"><span data-stu-id="f7121-322">For more information about retention on reports, see [Azure Active Directory Report Retention Policies.](https://docs.microsoft.com/azure/active-directory/active-directory-reporting-retention)</span></span>

<span data-ttu-id="f7121-323">若是對於儲存其稽核事件較長的保留時間感興趣的客戶，報告 API 可用來定期將[稽核事件](https://docs.microsoft.com/azure/active-directory/active-directory-reporting-audit-events)提取至不同的資料存放區。</span><span class="sxs-lookup"><span data-stu-id="f7121-323">For customers interested in storing their audit events for longer retention periods, the Reporting API can be used to regularly pull [audit events](https://docs.microsoft.com/azure/active-directory/active-directory-reporting-audit-events) into a separate data store.</span></span>

### <a name="virtual-machine-logs-using-azure-diagnostics"></a><span data-ttu-id="f7121-324">使用 Azure 診斷的虛擬機器記錄</span><span class="sxs-lookup"><span data-stu-id="f7121-324">Virtual Machine logs using Azure Diagnostics</span></span>
<span data-ttu-id="f7121-325">[Azure 診斷](https://docs.microsoft.com/azure/azure-diagnostics)是 Azure 中可對部署的應用程式啟用診斷資料收集的功能。</span><span class="sxs-lookup"><span data-stu-id="f7121-325">[Azure Diagnostics](https://docs.microsoft.com/azure/azure-diagnostics) is the capability within Azure that enables the collection of diagnostic data on a deployed application.</span></span> <span data-ttu-id="f7121-326">您可以使用來自數個不同來源的診斷延伸模組。</span><span class="sxs-lookup"><span data-stu-id="f7121-326">You can use the diagnostics extension from several different sources.</span></span> <span data-ttu-id="f7121-327">目前支援 [Azure 雲端服務的 Web 和背景工作角色](https://docs.microsoft.com/azure/cloud-services/cloud-services-choose-me)。</span><span class="sxs-lookup"><span data-stu-id="f7121-327">Currently supported are [Azure Cloud Service Web and Worker Roles](https://docs.microsoft.com/azure/cloud-services/cloud-services-choose-me),</span></span>

![使用 Azure 診斷的虛擬機器記錄](./media/azure-log-audit/azure-log-audit-fig3.png)

<span data-ttu-id="f7121-329">執行 Microsoft Windows 和[Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-overview) 的 [Azure 虛擬機器](https://azure.microsoft.com/documentation/learning-paths/virtual-machines/)。</span><span class="sxs-lookup"><span data-stu-id="f7121-329">[Azure Virtual Machines](https://azure.microsoft.com/documentation/learning-paths/virtual-machines/) running Microsoft Windows and [Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-overview).</span></span>

<span data-ttu-id="f7121-330">您可以使用下列方式，在虛擬機器上啟用 Azure 診斷：</span><span class="sxs-lookup"><span data-stu-id="f7121-330">You can enable Azure Diagnostic on a virtual machine using following:</span></span>

-   <span data-ttu-id="f7121-331">使用 Visual Studio，請參閱[使用 Visual Studio 來追蹤 Microsoft Azure 虛擬機器](https://docs.microsoft.com/azure/vs-azure-tools-debug-cloud-services-virtual-machines)</span><span class="sxs-lookup"><span data-stu-id="f7121-331">Using Visual Studio, see [Use Visual Studio to trace Azure Virtual Machines](https://docs.microsoft.com/azure/vs-azure-tools-debug-cloud-services-virtual-machines)</span></span>

-   [<span data-ttu-id="f7121-332">從遠端在 Azure 虛擬機器上設定 Azure 診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-332">Set up Azure Diagnostics on an Azure Virtual Machine Remotely</span></span>](https://docs.microsoft.com/azure/virtual-machines-dotnet-diagnostics)

-   [<span data-ttu-id="f7121-333">使用 PowerShell 在 Azure 虛擬機器上設定診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-333">Use PowerShell to set up diagnostics on Azure Virtual Machines</span></span>](https://docs.microsoft.com/azure/virtual-machines/virtual-machines-windows-ps-extensions-diagnostics?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)

-   [<span data-ttu-id="f7121-334">使用 Azure Resource Manager 範本建立具有監視和診斷的 Windows 虛擬機器</span><span class="sxs-lookup"><span data-stu-id="f7121-334">Create a Windows Virtual machine with monitoring and diagnostics using Azure Resource Manager Template</span></span>](https://docs.microsoft.com/azure/virtual-machines/virtual-machines-windows-extensions-diagnostics-template?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)

### <a name="storage-analytics"></a><span data-ttu-id="f7121-335">儲存體分析</span><span class="sxs-lookup"><span data-stu-id="f7121-335">Storage Analytics</span></span>
<span data-ttu-id="f7121-336">[Azure 儲存體分析](https://docs.microsoft.com/rest/api/storageservices/fileservices/storage-analytics)會執行記錄，並提供儲存體帳戶的計量資料。</span><span class="sxs-lookup"><span data-stu-id="f7121-336">[Azure Storage Analytics](https://docs.microsoft.com/rest/api/storageservices/fileservices/storage-analytics) performs logging and provides metrics data for a storage account.</span></span> <span data-ttu-id="f7121-337">您可以使用此資料來追蹤要求、分析使用量趨勢，以及診斷儲存體帳戶的問題。</span><span class="sxs-lookup"><span data-stu-id="f7121-337">You can use this data to trace requests, analyze usage trends, and diagnose issues with your storage account.</span></span> <span data-ttu-id="f7121-338">儲存體分析記錄適用於 [Blob、佇列及表格服務](https://docs.microsoft.com/azure/storage/storage-introduction)。</span><span class="sxs-lookup"><span data-stu-id="f7121-338">Storage Analytics logging is available for the [Blob, Queue, and Table services.](https://docs.microsoft.com/azure/storage/storage-introduction)</span></span> <span data-ttu-id="f7121-339">儲存體分析會記錄對儲存體服務之成功和失敗要求的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="f7121-339">Storage Analytics logs detailed information about successful and failed requests to a storage service.</span></span>

<span data-ttu-id="f7121-340">這項資訊可用來監視個別要求，並診斷儲存體服務的問題。</span><span class="sxs-lookup"><span data-stu-id="f7121-340">This information can be used to monitor individual requests and to diagnose issues with a storage service.</span></span> <span data-ttu-id="f7121-341">系統會以最佳方式來記錄要求。</span><span class="sxs-lookup"><span data-stu-id="f7121-341">Requests are logged on a best-effort basis.</span></span> <span data-ttu-id="f7121-342">只有在對服務端點提出要求時，才會建立記錄項目。</span><span class="sxs-lookup"><span data-stu-id="f7121-342">Log entries are created only if there are requests made against the service endpoint.</span></span> <span data-ttu-id="f7121-343">例如，如果儲存體帳戶在其 Blob 端點中有活動，而不是在其表格或佇列端點中，則只會建立關於 Blob 服務的記錄。</span><span class="sxs-lookup"><span data-stu-id="f7121-343">For example, if a storage account has activity in its Blob endpoint but not in its Table or Queue endpoints, only logs pertaining to the Blob service is created.</span></span>

<span data-ttu-id="f7121-344">若要使用儲存體分析，您必須針對想要監視的每個服務個別啟用它。</span><span class="sxs-lookup"><span data-stu-id="f7121-344">To use Storage Analytics, you must enable it individually for each service you want to monitor.</span></span> <span data-ttu-id="f7121-345">您可以在 [Azure 入口網站](https://portal.azure.com/)中啟用它；如需詳細資訊，請參閱[在 Azure 入口網站中監視儲存體帳戶](https://docs.microsoft.com/azure/storage/storage-monitor-storage-account)。</span><span class="sxs-lookup"><span data-stu-id="f7121-345">You can enable it in the [Azure portal](https://portal.azure.com/); for details, see [Monitor a storage account in the Azure portal.](https://docs.microsoft.com/azure/storage/storage-monitor-storage-account)</span></span> <span data-ttu-id="f7121-346">您也可以利用程式設計方式，透過 REST API 或用戶端程式庫來啟用儲存體分析。</span><span class="sxs-lookup"><span data-stu-id="f7121-346">You can also enable Storage Analytics programmatically via the REST API or the client library.</span></span> <span data-ttu-id="f7121-347">使用 [設定服務屬性] 作業，分別為各個服務啟用儲存體分析。</span><span class="sxs-lookup"><span data-stu-id="f7121-347">Use the Set Service Properties operation to enable Storage Analytics individually for each service.</span></span>

<span data-ttu-id="f7121-348">彙總的資料會儲存於已知的 Blob (用於記錄) 和已知的資料表 (用於度量) 中，您可以使用 Blob 服務和資料表服務 API 來存取。</span><span class="sxs-lookup"><span data-stu-id="f7121-348">The aggregated data is stored in a well-known blob (for logging) and in well-known tables (for metrics), which may be accessed using the Blob service and Table service APIs.</span></span>

<span data-ttu-id="f7121-349">儲存體分析在儲存的資料量上有 20 TB 的限制，但此限制與儲存體帳戶的總限制無關。</span><span class="sxs-lookup"><span data-stu-id="f7121-349">Storage Analytics has a 20-TB limit on the amount of stored data that is independent of the total limit for your storage account.</span></span> <span data-ttu-id="f7121-350">所有記錄都會儲存在名為 $logs 之容器內的[區塊 Blob](https://docs.microsoft.com/azure/storage/storage-analytics) 中，該容器是在針對儲存體帳戶啟用儲存體分析時自動建立的。</span><span class="sxs-lookup"><span data-stu-id="f7121-350">All logs are stored in [block blobs](https://docs.microsoft.com/azure/storage/storage-analytics) in a container named $logs, which are automatically created when Storage Analytics is enabled for a storage account.</span></span>

> [!Note]
> <span data-ttu-id="f7121-351">如需計費和資料保留原則的詳細資訊，請參閱[儲存體分析和計費](https://docs.microsoft.com/rest/api/storageservices/fileservices/storage-analytics-and-billing)。</span><span class="sxs-lookup"><span data-stu-id="f7121-351">For more information on billing and data retention policies, see [Storage Analytics and Billing.](https://docs.microsoft.com/rest/api/storageservices/fileservices/storage-analytics-and-billing)</span></span>
>
> [!Note]
> <span data-ttu-id="f7121-352">如需儲存體帳戶限制的詳細資訊，請參閱 [Azure 儲存體延展性和效能目標](https://docs.microsoft.com/azure/storage/storage-scalability-targets)。</span><span class="sxs-lookup"><span data-stu-id="f7121-352">For more information on storage account limits, see [Azure Storage Scalability and Performance Targets.](https://docs.microsoft.com/azure/storage/storage-scalability-targets)</span></span>

<span data-ttu-id="f7121-353">系統會記錄下列類型的已驗證與匿名要求。</span><span class="sxs-lookup"><span data-stu-id="f7121-353">The following types of authenticated and anonymous requests are logged.</span></span>



| <span data-ttu-id="f7121-354">已驗證</span><span class="sxs-lookup"><span data-stu-id="f7121-354">Authenticated</span></span>  | <span data-ttu-id="f7121-355">匿名</span><span class="sxs-lookup"><span data-stu-id="f7121-355">Anonymous</span></span>|
| :------------- | :-------------|
| <span data-ttu-id="f7121-356">成功的要求</span><span class="sxs-lookup"><span data-stu-id="f7121-356">Successful requests</span></span> | <span data-ttu-id="f7121-357">成功的要求</span><span class="sxs-lookup"><span data-stu-id="f7121-357">Successful requests</span></span> |
|<span data-ttu-id="f7121-358">失敗的要求，包括逾時、節流、網路、授權和其他錯誤</span><span class="sxs-lookup"><span data-stu-id="f7121-358">Failed requests, including timeout, throttling, network, authorization, and other errors</span></span> | <span data-ttu-id="f7121-359">使用共用存取簽章 (SAS) 的要求，包括失敗和成功的要求</span><span class="sxs-lookup"><span data-stu-id="f7121-359">Requests using a Shared Access Signature (SAS), including failed and successful requests</span></span> |
| <span data-ttu-id="f7121-360">使用共用存取簽章 (SAS) 的要求，包括失敗和成功的要求</span><span class="sxs-lookup"><span data-stu-id="f7121-360">Requests using a Shared Access Signature (SAS), including failed and successful requests</span></span> |<span data-ttu-id="f7121-361">用戶端與伺服器的逾時錯誤</span><span class="sxs-lookup"><span data-stu-id="f7121-361">Time out errors for both client and server</span></span> |
|   <span data-ttu-id="f7121-362">分析資料的要求</span><span class="sxs-lookup"><span data-stu-id="f7121-362">Requests to analytics data</span></span> |    <span data-ttu-id="f7121-363">失敗的 GET 要求，錯誤碼為 304 (未修改)</span><span class="sxs-lookup"><span data-stu-id="f7121-363">Failed GET requests with error code 304 (Not Modified)</span></span> |
| <span data-ttu-id="f7121-364">系統不會記錄儲存體分析本身所提出的要求 (例如，記錄檔的建立或刪除)。</span><span class="sxs-lookup"><span data-stu-id="f7121-364">Requests made by Storage Analytics itself, such as log creation or deletion, are not logged.</span></span> <span data-ttu-id="f7121-365">記錄資料的完整清單記錄於[儲存體分析記錄作業和狀態訊息](https://docs.microsoft.com/rest/api/storageservices/fileservices/storage-analytics-logged-operations-and-status-messages)及[儲存體分析記錄檔格式](https://docs.microsoft.com/rest/api/storageservices/fileservices/storage-analytics-log-format)主題中。</span><span class="sxs-lookup"><span data-stu-id="f7121-365">A full list of the logged data is documented in the [Storage Analytics Logged Operations and Status Messages](https://docs.microsoft.com/rest/api/storageservices/fileservices/storage-analytics-logged-operations-and-status-messages) and [Storage Analytics Log Format](https://docs.microsoft.com/rest/api/storageservices/fileservices/storage-analytics-log-format) topics.</span></span> | <span data-ttu-id="f7121-366">系統不會記錄所有其他失敗的匿名要求。</span><span class="sxs-lookup"><span data-stu-id="f7121-366">All other failed anonymous requests are not logged.</span></span> <span data-ttu-id="f7121-367">記錄資料的完整清單記錄於[儲存體分析記錄作業和狀態訊息](https://docs.microsoft.com/rest/api/storageservices/fileservices/storage-analytics-logged-operations-and-status-messages)及[儲存體分析記錄格式](https://docs.microsoft.com/rest/api/storageservices/fileservices/storage-analytics-log-format)中。</span><span class="sxs-lookup"><span data-stu-id="f7121-367">A full list of the logged data is documented in the [Storage Analytics Logged Operations and Status Messages](https://docs.microsoft.com/rest/api/storageservices/fileservices/storage-analytics-logged-operations-and-status-messages) and [Storage Analytics Log Format](https://docs.microsoft.com/rest/api/storageservices/fileservices/storage-analytics-log-format).</span></span> |

### <a name="azure-networking-logs"></a><span data-ttu-id="f7121-368">Azure 網路記錄</span><span class="sxs-lookup"><span data-stu-id="f7121-368">Azure networking logs</span></span>
<span data-ttu-id="f7121-369">Azure 中的網路記錄和監視功能相當完善，主要涵蓋分類有二種：</span><span class="sxs-lookup"><span data-stu-id="f7121-369">Network logging and monitoring in Azure is comprehensive and covers two broad categories:</span></span>

-   <span data-ttu-id="f7121-370">[網路監看員](https://docs.microsoft.com/azure/network-watcher/network-watcher-monitoring-overview#network-watcher)：網路監看員的功能隨附了案例式網路監視。</span><span class="sxs-lookup"><span data-stu-id="f7121-370">[Network Watcher](https://docs.microsoft.com/azure/network-watcher/network-watcher-monitoring-overview#network-watcher) - Scenario-based network monitoring is provided with the features in Network Watcher.</span></span> <span data-ttu-id="f7121-371">這項服務包括封包擷取、下一個躍點、IP 流量驗證、安全性群組檢視、NSG 流量記錄。</span><span class="sxs-lookup"><span data-stu-id="f7121-371">This service includes packet capture, next hop, IP flow verify, security group view, NSG flow logs.</span></span> <span data-ttu-id="f7121-372">案例層級監視可提供端對端的網路資源檢視，而非個別的網路資源監視。</span><span class="sxs-lookup"><span data-stu-id="f7121-372">Scenario level monitoring provides an end to end view of network resources in contrast to individual network resource monitoring.</span></span>

-   <span data-ttu-id="f7121-373">[資源監視](https://docs.microsoft.com/azure/network-watcher/network-watcher-monitoring-overview#network-resource-level-monitoring)：資源層級監視由診斷記錄、計量、疑難排解和資源健康狀態這四個功能所組成。</span><span class="sxs-lookup"><span data-stu-id="f7121-373">[Resource monitoring](https://docs.microsoft.com/azure/network-watcher/network-watcher-monitoring-overview#network-resource-level-monitoring) - Resource level monitoring comprises of four features, diagnostic logs, metrics, troubleshooting, and resource health.</span></span> <span data-ttu-id="f7121-374">這些功能全是建置在網路資源層級。</span><span class="sxs-lookup"><span data-stu-id="f7121-374">All these features are built at the network resource level.</span></span>

![Azure 網路記錄](./media/azure-log-audit/azure-log-audit-fig4.png)

<span data-ttu-id="f7121-376">網路監看員是一項區域性服務，可讓您監視與診斷位於和進出 Azure 的網路案例層級條件。</span><span class="sxs-lookup"><span data-stu-id="f7121-376">Network Watcher is a regional service that enables you to monitor and diagnose conditions at a network scenario level in, to, and from Azure.</span></span> <span data-ttu-id="f7121-377">網路監看員提供的網路診斷和視覺效果工具，可幫助您了解、診斷及洞悉您在 Azure 中的網路。</span><span class="sxs-lookup"><span data-stu-id="f7121-377">Network diagnostic and visualization tools available with Network Watcher help you understand, diagnose, and gain insights to your network in Azure.</span></span>

<span data-ttu-id="f7121-378">**NSG 流程記錄**：網路安全性群組的流程記錄可讓您擷取群組中安全性規則所允許或拒絕之流量的相關記錄。</span><span class="sxs-lookup"><span data-stu-id="f7121-378">**NSG Flow logging** - Flow logs for Network Security Groups enable you to capture logs related to traffic that are allowed or denied by the security rules in the group.</span></span> <span data-ttu-id="f7121-379">這些流程記錄是以 JSON 格式撰寫，會顯示每個規則的輸出和輸入流程、套用流程的目標 NIC、有關流程的 5 個 Tuple 資訊 (來源/目的地 IP、來源/目的地連接埠、通訊協定)，以及流量是被允許或拒絕的。</span><span class="sxs-lookup"><span data-stu-id="f7121-379">These flow logs are written in JSON format and show outbound and inbound flows on a per rule basis, the NIC the flow applies to, 5-tuple information about the flow (Source/Destination IP, Source/Destination Port, Protocol), and if the traffic was allowed or denied.</span></span>

### <a name="network-security-group-flow-logging"></a><span data-ttu-id="f7121-380">網路安全性群組流程記錄</span><span class="sxs-lookup"><span data-stu-id="f7121-380">Network Security Group Flow Logging</span></span>

<span data-ttu-id="f7121-381">[網路安全性群組流程記錄](https://docs.microsoft.com/azure/network-watcher/network-watcher-nsg-flow-logging-overview)是網路監看員的一項功能，可讓您檢視透過網路安全性群組輸入和輸出 IP 流量的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="f7121-381">[Network Security Group flow logs](https://docs.microsoft.com/azure/network-watcher/network-watcher-nsg-flow-logging-overview) are a feature of Network Watcher that allows you to view information about ingress and egress IP traffic through a Network Security Group.</span></span> <span data-ttu-id="f7121-382">這些流程記錄是以 JSON 格式撰寫，會顯示每個規則的輸出和輸入流程、套用流程的目標 NIC、有關流程的 5 個 Tuple 資訊 (來源/目的地 IP、來源/目的地連接埠、通訊協定)，以及流量是被允許或拒絕的。</span><span class="sxs-lookup"><span data-stu-id="f7121-382">These flow logs are written in JSON format and show outbound and inbound flows on a per rule basis, the NIC the flow applies to, 5-tuple information about the flow (Source/Destination IP, Source/Destination Port, Protocol), and if the traffic was allowed or denied.</span></span>

<span data-ttu-id="f7121-383">雖然流程記錄檔是以「網路安全性群組」為目標，但其顯示方式與其他記錄檔不同。</span><span class="sxs-lookup"><span data-stu-id="f7121-383">While flow logs target Network Security Groups, they are not displayed the same as the other logs.</span></span> <span data-ttu-id="f7121-384">流程記錄只會儲存於儲存體帳戶內。</span><span class="sxs-lookup"><span data-stu-id="f7121-384">Flow logs are stored only within a storage account.</span></span>

<span data-ttu-id="f7121-385">在其他記錄上看到的保留原則也同樣適用於流量記錄。</span><span class="sxs-lookup"><span data-stu-id="f7121-385">The same retention policies as seen on other logs apply to flow logs.</span></span> <span data-ttu-id="f7121-386">記錄的保留原則可設定為 1 天到 365 天。</span><span class="sxs-lookup"><span data-stu-id="f7121-386">Logs have a retention policy that can be set from 1 day to 365 days.</span></span> <span data-ttu-id="f7121-387">如果未設定保留原則，則會永遠保留記錄檔。</span><span class="sxs-lookup"><span data-stu-id="f7121-387">If a retention policy is not set, the logs are maintained forever.</span></span>

<span data-ttu-id="f7121-388">**診斷記錄**</span><span class="sxs-lookup"><span data-stu-id="f7121-388">**Diagnostic logs**</span></span>

<span data-ttu-id="f7121-389">網路資源會定期和自發地建立事件，並記錄到儲存體帳戶、傳送到事件中樞或 Log Analytics。</span><span class="sxs-lookup"><span data-stu-id="f7121-389">Periodic and spontaneous events are created by network resources and logged in storage accounts, sent to an Event Hub, or Log Analytics.</span></span> <span data-ttu-id="f7121-390">這些記錄可讓您深入了解資源的健全狀況。</span><span class="sxs-lookup"><span data-stu-id="f7121-390">These logs provide insights into the health of a resource.</span></span> <span data-ttu-id="f7121-391">您可以在 Power BI 和 Log Analytics 等工具中檢視這些記錄。</span><span class="sxs-lookup"><span data-stu-id="f7121-391">These logs can be viewed in tools such as Power BI and Log Analytics.</span></span> <span data-ttu-id="f7121-392">若要了解如何檢視診斷記錄，請瀏覽 [Log Analytics](https://docs.microsoft.com/azure/log-analytics/log-analytics-azure-networking-analytics)。</span><span class="sxs-lookup"><span data-stu-id="f7121-392">To learn how to view diagnostic logs, visit [Log Analytics.](https://docs.microsoft.com/azure/log-analytics/log-analytics-azure-networking-analytics)</span></span>

![診斷記錄檔](./media/azure-log-audit/azure-log-audit-fig5.png)

<span data-ttu-id="f7121-394">診斷記錄適用於[負載平衡器](https://docs.microsoft.com/azure/load-balancer/load-balancer-monitor-log)、[網路安全性群組](https://docs.microsoft.com/azure/virtual-network/virtual-network-nsg-manage-log)、路由和[應用程式閘道](https://docs.microsoft.com/azure/application-gateway/application-gateway-diagnostics)。</span><span class="sxs-lookup"><span data-stu-id="f7121-394">Diagnostic logs are available for [Load Balancer](https://docs.microsoft.com/azure/load-balancer/load-balancer-monitor-log), [Network Security Groups](https://docs.microsoft.com/azure/virtual-network/virtual-network-nsg-manage-log), Routes, and [Application Gateway.](https://docs.microsoft.com/azure/application-gateway/application-gateway-diagnostics)</span></span>

<span data-ttu-id="f7121-395">網路監看員提供診斷記錄檢視。</span><span class="sxs-lookup"><span data-stu-id="f7121-395">Network Watcher provides a diagnostic logs view.</span></span> <span data-ttu-id="f7121-396">此檢視包含所有支援診斷記錄的網路資源。</span><span class="sxs-lookup"><span data-stu-id="f7121-396">This view contains all networking resources that support diagnostic logging.</span></span> <span data-ttu-id="f7121-397">從這個檢視中，您可以方便且快速地啟用和停用網路資源。</span><span class="sxs-lookup"><span data-stu-id="f7121-397">From this view, you can enable and disable networking resources conveniently and quickly.</span></span>


<span data-ttu-id="f7121-398">除了先前的記錄功能，網路監看員目前具有下列功能：</span><span class="sxs-lookup"><span data-stu-id="f7121-398">In addition to preceding logging capabilities, Network Watcher currently has the following capabilities:</span></span>
- <span data-ttu-id="f7121-399">[拓撲](https://docs.microsoft.com/azure/network-watcher/network-watcher-topology-overview)：提供網路層級檢視，顯示資源群組中網路資源之間的各種相互連線和關聯。</span><span class="sxs-lookup"><span data-stu-id="f7121-399">[Topology](https://docs.microsoft.com/azure/network-watcher/network-watcher-topology-overview) - Provides a network level view showing the various interconnections and associations between network resources in a resource group.</span></span>

- <span data-ttu-id="f7121-400">[變數封包擷取](https://docs.microsoft.com/azure/network-watcher/network-watcher-packet-capture-overview)：擷取進出虛擬機器的封包資料。</span><span class="sxs-lookup"><span data-stu-id="f7121-400">[Variable Packet capture](https://docs.microsoft.com/azure/network-watcher/network-watcher-packet-capture-overview) - Captures packet data in and out of a virtual machine.</span></span> <span data-ttu-id="f7121-401">進階篩選選項和微調控制項 (例如，能夠設定時間和大小限制) 可讓您靈活擷取資料。封包資料可以 .cap 格式儲存在 Blob 存放區或本機磁碟上。</span><span class="sxs-lookup"><span data-stu-id="f7121-401">Advanced filtering options and fine-tuned controls such as being able to set time and size limitations provide versatility.The packet data can be stored in a blob store or on the local disk in .cap format.</span></span>

-   <span data-ttu-id="f7121-402">[IP 流程驗證](https://docs.microsoft.com/azure/network-watcher/network-watcher-ip-flow-verify-overview)：根據流程資訊 5 個 Tuple 封包參數 (目的地 IP、來源 IP、目的地連接埠、來源連接埠和通訊協定) 檢查是否允許或拒絕封包。</span><span class="sxs-lookup"><span data-stu-id="f7121-402">[IP flow verifies](https://docs.microsoft.com/azure/network-watcher/network-watcher-ip-flow-verify-overview) - Checks if a packet is allowed or denied based on flow information 5-tuple packet parameters (Destination IP, Source IP, Destination Port, Source Port, and Protocol).</span></span> <span data-ttu-id="f7121-403">如果封包遭到安全性群組拒絕，則會傳回拒絕封包的規則和群組。</span><span class="sxs-lookup"><span data-stu-id="f7121-403">If the packet is denied by a security group, the rule and group that denied the packet is returned.</span></span>

-   <span data-ttu-id="f7121-404">[下一個躍點](https://docs.microsoft.com/azure/network-watcher/network-watcher-next-hop-overview)：決定在 Azure 網路網狀架構中路由傳送之封包的下一個躍點，讓您得以診斷任何設定錯誤的使用者定義路由。</span><span class="sxs-lookup"><span data-stu-id="f7121-404">[Next hop](https://docs.microsoft.com/azure/network-watcher/network-watcher-next-hop-overview) - Determines the next hop for packets being routed in the Azure Network Fabric, enabling you to diagnose any misconfigured user-defined routes.</span></span>

-   <span data-ttu-id="f7121-405">[安全性群組檢視](https://docs.microsoft.com/azure/network-watcher/network-watcher-security-group-view-overview)：取得要在 VM 上套用的有效和已套用安全性規則。</span><span class="sxs-lookup"><span data-stu-id="f7121-405">[Security group view](https://docs.microsoft.com/azure/network-watcher/network-watcher-security-group-view-overview) - Gets the effective and applied security rules that are applied on a VM.</span></span>

-   <span data-ttu-id="f7121-406">[虛擬網路閘道和連線疑難排解](https://docs.microsoft.com/azure/network-watcher/network-watcher-troubleshoot-manage-rest)：能夠針對虛擬網路閘道和連線進行疑難排解。</span><span class="sxs-lookup"><span data-stu-id="f7121-406">[Virtual Network Gateway and Connection troubleshooting](https://docs.microsoft.com/azure/network-watcher/network-watcher-troubleshoot-manage-rest) - Provides the ability to troubleshoot Virtual Network Gateways and Connections.</span></span>

-   <span data-ttu-id="f7121-407">[網路訂用帳戶限制](https://docs.microsoft.com/azure/network-watcher/network-watcher-monitoring-overview#network-subscription-limits)：可讓您根據限制檢視網路資源使用量。</span><span class="sxs-lookup"><span data-stu-id="f7121-407">[Network subscription limits](https://docs.microsoft.com/azure/network-watcher/network-watcher-monitoring-overview#network-subscription-limits) - Enables you to view network resource usage against limits.</span></span>

### <a name="application-insight"></a><span data-ttu-id="f7121-408">Application Insight</span><span class="sxs-lookup"><span data-stu-id="f7121-408">Application insight</span></span>

<span data-ttu-id="f7121-409">[Application Insights](https://docs.microsoft.com/azure/application-insights/app-insights-overview) 是多個平台上的 Web 開發人員所適用的可延伸應用程式效能管理 (APM) 服務。</span><span class="sxs-lookup"><span data-stu-id="f7121-409">[Application Insights](https://docs.microsoft.com/azure/application-insights/app-insights-overview) is an extensible Application Performance Management (APM) service for web developers on multiple platforms.</span></span> <span data-ttu-id="f7121-410">您可以使用它來監視即時 Web 應用程式。</span><span class="sxs-lookup"><span data-stu-id="f7121-410">Use it to monitor your live web application.</span></span> <span data-ttu-id="f7121-411">它會自動偵測效能異常。</span><span class="sxs-lookup"><span data-stu-id="f7121-411">It is automatically detect performance anomalies.</span></span> <span data-ttu-id="f7121-412">其中包括強大的分析工具可協助您診斷問題，並了解使用者實際如何運用您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="f7121-412">It includes powerful analytics tools to help you diagnose issues and to understand what users actually do with your app.</span></span>

 <span data-ttu-id="f7121-413">它是設計來協助您持續改善效能和可用性。</span><span class="sxs-lookup"><span data-stu-id="f7121-413">It's designed to help you continuously improve performance and usability.</span></span>

 <span data-ttu-id="f7121-414">它適用於各種不同平台上的應用程式，包括裝載在內部部署或雲端的 .NET、Node.js 和 J2EE。</span><span class="sxs-lookup"><span data-stu-id="f7121-414">It works for apps on a wide variety of platforms including .NET, Node.js and J2EE, hosted on-premises or in the cloud.</span></span> <span data-ttu-id="f7121-415">它可與您的 devOps 程序整合，並有與各種開發工具的連接點。</span><span class="sxs-lookup"><span data-stu-id="f7121-415">It integrates with your devOps process, and has connection points to various development tools.</span></span>

![Application Insight](./media/azure-log-audit/azure-log-audit-fig6.png)

<span data-ttu-id="f7121-417">Application Insights 是以開發小組為目標，以協助您了解您的應用程式的執行和使用情況。</span><span class="sxs-lookup"><span data-stu-id="f7121-417">Application Insights is aimed at the development team, to help you understand how your app is performing and how it's being used.</span></span> <span data-ttu-id="f7121-418">它可監視︰</span><span class="sxs-lookup"><span data-stu-id="f7121-418">It monitors:</span></span>

-   <span data-ttu-id="f7121-419">**要求率、回應時間和失敗率** - 找出哪些頁面在每天哪些時段最受歡迎，以及使用者位於何處。</span><span class="sxs-lookup"><span data-stu-id="f7121-419">**Request rates, response times, and failure rates** - Find out which pages are most popular, at what times of day, and where your users are.</span></span> <span data-ttu-id="f7121-420">查看哪些頁面的表現最好。</span><span class="sxs-lookup"><span data-stu-id="f7121-420">See which pages perform best.</span></span> <span data-ttu-id="f7121-421">如果您的回應時間和失敗率隨著要求增加而提高，您或許有資源配置問題。</span><span class="sxs-lookup"><span data-stu-id="f7121-421">If your response times and failure rates go high when there are more requests, then perhaps you have a resourcing problem.</span></span>

-   <span data-ttu-id="f7121-422">**相依比率、回應時間和失敗率** - 找出外部服務是否會使您降低效能。</span><span class="sxs-lookup"><span data-stu-id="f7121-422">**Dependency rates, response times, and failure rates** - Find out whether external services are slowing you down.</span></span>

-   <span data-ttu-id="f7121-423">**例外狀況**：分析彙總的統計資料，或挑選特定執行個體並深入了解堆疊追蹤和相關要求。</span><span class="sxs-lookup"><span data-stu-id="f7121-423">**Exceptions** - Analyze the aggregated statistics, or pick specific instances and drill into the stack trace and related requests.</span></span> <span data-ttu-id="f7121-424">伺服器和瀏覽器例外狀況都會報告。</span><span class="sxs-lookup"><span data-stu-id="f7121-424">Both server and browser exceptions are reported.</span></span>

-   <span data-ttu-id="f7121-425">**頁面檢視和載入效能** - 由使用者的瀏覽器報告。</span><span class="sxs-lookup"><span data-stu-id="f7121-425">**Page views and load performance** - reported by your users' browsers.</span></span>

-   <span data-ttu-id="f7121-426">來自網頁的 **AJAX 呼叫** - 比率、回應時間和失敗率。</span><span class="sxs-lookup"><span data-stu-id="f7121-426">**AJAX calls** from web pages - rates, response times, and failure rates.</span></span>

-   <span data-ttu-id="f7121-427">**使用者和工作階段計數**。</span><span class="sxs-lookup"><span data-stu-id="f7121-427">**User and session counts**.</span></span>

-   <span data-ttu-id="f7121-428">Windows 或 Linux 伺服器電腦中的**效能計數器**，例如 CPU、記憶體和網路使用量。</span><span class="sxs-lookup"><span data-stu-id="f7121-428">**Performance counters** from your Windows or Linux server machines, such as CPU, memory, and network usage.</span></span>

-   <span data-ttu-id="f7121-429">來自 Docker 或 Azure 的**主機診斷**。</span><span class="sxs-lookup"><span data-stu-id="f7121-429">**Host diagnostics** from Docker or Azure.</span></span>

-   <span data-ttu-id="f7121-430">來自您應用程式的**診斷追蹤記錄檔** - 讓您使追蹤事件與要求相互關聯。</span><span class="sxs-lookup"><span data-stu-id="f7121-430">**Diagnostic trace logs** from your app - so that you can correlate trace events with requests.</span></span>

-   <span data-ttu-id="f7121-431">您在用戶端或伺服器程式碼中自行撰寫的**自訂事件和計量**，可追蹤商業事件，例如售出的項目或獲勝的遊戲。</span><span class="sxs-lookup"><span data-stu-id="f7121-431">**Custom events and metrics** that you write yourself in the client or server code, to track business events such as items sold or games won.</span></span>

<span data-ttu-id="f7121-432">**整合案例及描述清單：**</span><span class="sxs-lookup"><span data-stu-id="f7121-432">**List Of Integration Scenarios and Description:**</span></span>

| <span data-ttu-id="f7121-433">整合案例</span><span class="sxs-lookup"><span data-stu-id="f7121-433">Integration Scenarios</span></span> | <span data-ttu-id="f7121-434">說明</span><span class="sxs-lookup"><span data-stu-id="f7121-434">Description</span></span> |
| --------------------- | :---------- |
|[<span data-ttu-id="f7121-435">應用程式對應</span><span class="sxs-lookup"><span data-stu-id="f7121-435">Application map</span></span>](https://docs.microsoft.com/en-us/azure/application-insights/app-insights-app-map)|<span data-ttu-id="f7121-436">應用程式的元件，包含重要計量和警示。</span><span class="sxs-lookup"><span data-stu-id="f7121-436">The components of your app, with key metrics and alerts.</span></span>||
|[<span data-ttu-id="f7121-437">執行個體資料的診斷搜尋</span><span class="sxs-lookup"><span data-stu-id="f7121-437">Diagnostic search for instance data</span></span>](https://docs.microsoft.com/en-us/azure/application-insights/app-insights-diagnostic-search)| <span data-ttu-id="f7121-438">搜尋和篩選事件，例如要求、例外狀況、相依性呼叫、記錄追蹤，以及頁面檢視。</span><span class="sxs-lookup"><span data-stu-id="f7121-438">Search and filter events such as requests, exceptions, dependency calls, log traces, and page views.</span></span>||
|[<span data-ttu-id="f7121-439">彙總資料的計量瀏覽器</span><span class="sxs-lookup"><span data-stu-id="f7121-439">Metrics Explorer for aggregated data</span></span>](https://docs.microsoft.com/en-us/azure/application-insights/app-insights-metrics-explorer)|<span data-ttu-id="f7121-440">瀏覽、篩選和分割彙總的資料，例如，要求、錯誤和例外狀況的比率；回應時間、頁面載入時間。</span><span class="sxs-lookup"><span data-stu-id="f7121-440">Explore, filter, and segment aggregated data such as rates of requests, failures, and exceptions; response times, page load times.</span></span>||
|[<span data-ttu-id="f7121-441">儀表板</span><span class="sxs-lookup"><span data-stu-id="f7121-441">Dashboards</span></span>](https://docs.microsoft.com/en-us/azure/application-insights/app-insights-dashboards#dashboards)|<span data-ttu-id="f7121-442">來自多個資源的交互式資料並與其他人員共用。</span><span class="sxs-lookup"><span data-stu-id="f7121-442">Mash up data from multiple resources and share with others.</span></span> <span data-ttu-id="f7121-443">非常適用於多元件的應用程式，以及小組聊天室中的連續顯示。</span><span class="sxs-lookup"><span data-stu-id="f7121-443">Great for multi-component applications, and for continuous display in the team room.</span></span>||
|[<span data-ttu-id="f7121-444">即時計量串流</span><span class="sxs-lookup"><span data-stu-id="f7121-444">Live Metrics Stream</span></span>](https://docs.microsoft.com/en-us/azure/application-insights/app-insights-live-stream)|<span data-ttu-id="f7121-445">當您部署新的組建時，請觀看這些近乎即時的效能指標，以確定一切如預期運作。</span><span class="sxs-lookup"><span data-stu-id="f7121-445">When you deploy a new build, watch these near-real-time performance indicators to make sure everything works as expected.</span></span>||
|[<span data-ttu-id="f7121-446">分析</span><span class="sxs-lookup"><span data-stu-id="f7121-446">Analytics</span></span>](https://docs.microsoft.com/en-us/azure/application-insights/app-insights-analytics)|<span data-ttu-id="f7121-447">使用這個功能強大的查詢語言，回答有關您應用程式效能和使用方式的艱難問題。</span><span class="sxs-lookup"><span data-stu-id="f7121-447">Answer tough questions about your app's performance and usage by using this powerful query language.</span></span>||
|[<span data-ttu-id="f7121-448">自動和手動警示</span><span class="sxs-lookup"><span data-stu-id="f7121-448">Automatic and manual alerts</span></span>](https://docs.microsoft.com/en-us/azure/application-insights/app-insights-alerts)|<span data-ttu-id="f7121-449">如果在常見模式之外發生一些狀況，則自動警示會適應您應用程式的一般遙測和觸發程式模式。</span><span class="sxs-lookup"><span data-stu-id="f7121-449">Automatic alerts adapt to your app's normal patterns of telemetry and trigger when there's something outside the usual pattern.</span></span> <span data-ttu-id="f7121-450">您也可以在自訂或標準計量的特定層級上設定警示。</span><span class="sxs-lookup"><span data-stu-id="f7121-450">You can also set alerts on particular levels of custom or standard metrics.</span></span>||
|[<span data-ttu-id="f7121-451">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="f7121-451">Visual Studio</span></span>](https://docs.microsoft.com/en-us/azure/application-insights/app-insights-visual-studio)|<span data-ttu-id="f7121-452">查看程式碼中的效能資料。</span><span class="sxs-lookup"><span data-stu-id="f7121-452">See performance data in the code.</span></span> <span data-ttu-id="f7121-453">從堆疊追蹤移至程式碼。</span><span class="sxs-lookup"><span data-stu-id="f7121-453">Go to code from stack traces.</span></span>||
|[<span data-ttu-id="f7121-454">Power BI</span><span class="sxs-lookup"><span data-stu-id="f7121-454">Power BI</span></span>](https://docs.microsoft.com/en-us/azure/application-insights/app-insights-export-power-bi)|<span data-ttu-id="f7121-455">整合使用量計量和其他商業智慧。</span><span class="sxs-lookup"><span data-stu-id="f7121-455">Integrate usage metrics with other business intelligence.</span></span>||
|[<span data-ttu-id="f7121-456">REST API</span><span class="sxs-lookup"><span data-stu-id="f7121-456">REST API</span></span>](https://dev.applicationinsights.io/)|<span data-ttu-id="f7121-457">撰寫程式碼，對您的計量和未經處理資料執行查詢。</span><span class="sxs-lookup"><span data-stu-id="f7121-457">Write code to run queries over your metrics and raw data.</span></span>||
|[<span data-ttu-id="f7121-458">連續匯出</span><span class="sxs-lookup"><span data-stu-id="f7121-458">Continuous export</span></span>](https://docs.microsoft.com/en-us/azure/application-insights/app-insights-export-telemetry)|<span data-ttu-id="f7121-459">將送達的未經處理資料大量匯出至儲存體。</span><span class="sxs-lookup"><span data-stu-id="f7121-459">Bulk export of raw data to storage when it arrives.</span></span>||

### <a name="azure-security-center-alerts"></a><span data-ttu-id="f7121-460">Azure 資訊安全中心警示</span><span class="sxs-lookup"><span data-stu-id="f7121-460">Azure Security Center Alerts</span></span>
<span data-ttu-id="f7121-461">[Azure 資訊安全中心](https://docs.microsoft.com/azure/security-center/security-center-intro)會自動收集、分析及整合您 Azure 資源、網路和已連接的合作夥伴解決方案 (例如，防火牆和端點保護解決方案) 的記錄資料，來偵測真正的威脅並減少誤判情形。</span><span class="sxs-lookup"><span data-stu-id="f7121-461">[Azure Security Center](https://docs.microsoft.com/azure/security-center/security-center-intro) automatically collects, analyzes, and integrates log data from your Azure resources, the network, and connected partner solutions, like firewall and endpoint protection solutions, to detect real threats and reduce false positives.</span></span> <span data-ttu-id="f7121-462">「資訊安全中心」會顯示優先安全性警示清單，以及需要您快速調查問題的資訊，和如何修復攻擊行為的建議。</span><span class="sxs-lookup"><span data-stu-id="f7121-462">A list of prioritized security alerts is shown in Security Center along with the information you need to quickly investigate the problem and recommendations for how to remediate an attack.</span></span>

<span data-ttu-id="f7121-463">資訊安全中心威脅偵測的運作方式如下：從您的 Azure 資源、網路及已連線的協力廠商解決方案自動收集安全性資訊。</span><span class="sxs-lookup"><span data-stu-id="f7121-463">Security Center threat detection works by automatically collecting security information from your Azure resources, the network, and connected partner solutions.</span></span> <span data-ttu-id="f7121-464">它會分析這項資訊 (通常是來自多個來源的相互關聯資訊) 以識別威脅。</span><span class="sxs-lookup"><span data-stu-id="f7121-464">It analyzes this information, often correlating information from multiple sources, to identify threats.</span></span> <span data-ttu-id="f7121-465">資訊安全中心的安全性警示會排定優先順序，並提供如何補救威脅的建議。</span><span class="sxs-lookup"><span data-stu-id="f7121-465">Security alerts are prioritized in Security Center along with recommendations on how to remediate the threat.</span></span>

![Azure 資訊安全中心](./media/azure-log-audit/azure-log-audit-fig7.png)

<span data-ttu-id="f7121-467">資訊安全中心會運用進階安全性分析，其遠勝於以簽章為基礎的方法。</span><span class="sxs-lookup"><span data-stu-id="f7121-467">Security Center employs advanced security analytics, which go far beyond signature-based approaches.</span></span> <span data-ttu-id="f7121-468">對於大量資料和[機器學習服務 (英文)](https://azure.microsoft.com/blog/machine-learning-in-azure-security-center/) 技術的突破適用於評估整個雲端網狀架構的事件：使用手動方式來偵測無法識別的威脅，以及預測攻擊的演化。</span><span class="sxs-lookup"><span data-stu-id="f7121-468">Breakthroughs in large data and [machine learning](https://azure.microsoft.com/blog/machine-learning-in-azure-security-center/) technologies are applied to evaluate events across the entire cloud fabric – detecting threats that would be impossible to identify using manual approaches and predicting the evolution of attacks.</span></span> <span data-ttu-id="f7121-469">這些安全性分析包括︰</span><span class="sxs-lookup"><span data-stu-id="f7121-469">These security analytics include:</span></span>

-   <span data-ttu-id="f7121-470">**整合性威脅情報**：運用 Microsoft 產品和服務、Microsoft 數位犯罪防治中心 (DCU)、Microsoft Security Response Center (MSRC) 以及外部摘要的全域威脅情報，尋找已知的不良執行者。</span><span class="sxs-lookup"><span data-stu-id="f7121-470">**Integrated threat intelligence:** looks for known bad actors by applying global threat intelligence from Microsoft products and services, the Microsoft Digital Crimes Unit (DCU), the Microsoft Security Response Center (MSRC), and external feeds.</span></span>

-   <span data-ttu-id="f7121-471">**行為分析**：套用已知模式來探索惡意行為。</span><span class="sxs-lookup"><span data-stu-id="f7121-471">**Behavioral analytics:** applies known patterns to discover malicious behavior.</span></span>

-   <span data-ttu-id="f7121-472">**異常偵測**︰使用統計剖析來建置歷程基準。</span><span class="sxs-lookup"><span data-stu-id="f7121-472">**Anomaly detection:** uses statistical profiling to build a historical baseline.</span></span> <span data-ttu-id="f7121-473">它會對偏離已確立基準 (符合潛在攻擊向量) 的情況提出警示。</span><span class="sxs-lookup"><span data-stu-id="f7121-473">It alerts on deviations from established baselines that conform to a potential attack vector.</span></span>


<span data-ttu-id="f7121-474">許多安全性作業和事件回應小組依賴安全性資訊及事件管理 (SIEM) 方案對安全性警示進行分級和調查做為起點。</span><span class="sxs-lookup"><span data-stu-id="f7121-474">Many security operations and incident response teams rely on a Security Information and Event Management (SIEM) solution as the starting point for triaging and investigating security alerts.</span></span> <span data-ttu-id="f7121-475">利用 Azure 記錄整合，客戶可以將資訊安全中心警示，以及 Azure 診斷和 Azure 稽核記錄檔所收集的虛擬機器安全性事件，與其 Log Analytics 或 SIEM 方案以接近即時的方式進行同步處理。</span><span class="sxs-lookup"><span data-stu-id="f7121-475">With Azure log integration, customers can sync Security Center alerts and virtual machine security events, collected by Azure Diagnostics and Azure Audit Logs, with their log analytics or SIEM solution in near real time.</span></span>


## <a name="log-analytics"></a><span data-ttu-id="f7121-476">Log Analytics</span><span class="sxs-lookup"><span data-stu-id="f7121-476">Log Analytics</span></span>

<span data-ttu-id="f7121-477">Log Analytics 是 [Operations Management Suite (OMS)](https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-overview) 中的一項服務，可協助您收集和分析雲端和內部部署環境中的資源所產生的資料。</span><span class="sxs-lookup"><span data-stu-id="f7121-477">Log Analytics is a service in [Operations Management Suite (OMS)](https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-overview) that helps you collect and analyze data generated by resources in your cloud and on-premises environments.</span></span> <span data-ttu-id="f7121-478">它可讓您在所有工作負載和伺服器之間 (無論其實體位置為何)，使用整合式搜尋和自訂儀表板輕易地分析數百萬筆記錄，提供您即時的深入資訊。</span><span class="sxs-lookup"><span data-stu-id="f7121-478">It gives you real-time insights using integrated search and custom dashboards to readily analyze millions of records across all your workloads and servers regardless of their physical location.</span></span>

![Log Analytics](./media/azure-log-audit/azure-log-audit-fig8.png)

<span data-ttu-id="f7121-480">Log Analytics 的中心是裝載在 Azure 雲端的 OMS 存放庫。</span><span class="sxs-lookup"><span data-stu-id="f7121-480">At the center of Log Analytics is the OMS repository,which is hosted in the Azure cloud.</span></span> <span data-ttu-id="f7121-481">資料會藉由設定資料來源以及將方案新增至訂用帳戶中，而從連接的來源收集到存放庫。</span><span class="sxs-lookup"><span data-stu-id="f7121-481">Data is collected into the repository from connected sources by configuring data sources and adding solutions to your subscription.</span></span> <span data-ttu-id="f7121-482">資料來源和方案都會建立不同的記錄類型，它們具有自己的屬性集，但仍可以一起分析，以便查詢存放庫。</span><span class="sxs-lookup"><span data-stu-id="f7121-482">Data sources and solutions will each create different record types that have their own set of properties but may still be analyzed together in queries to the repository.</span></span> <span data-ttu-id="f7121-483">這可讓您使用相同的工具和方法，來處理由不同來源收集的不同類型的資料。</span><span class="sxs-lookup"><span data-stu-id="f7121-483">This allows you to use the same tools and methods to work with different kinds of data collected by different sources.</span></span>

<span data-ttu-id="f7121-484">連接的來源是指產生 Log Analytics 所收集資料的電腦和其他資源。</span><span class="sxs-lookup"><span data-stu-id="f7121-484">Connected sources are the computers and other resources that generate data collected by Log Analytics.</span></span> <span data-ttu-id="f7121-485">這可包括安裝在直接連接之 [Windows](https://docs.microsoft.com/azure/log-analytics/log-analytics-windows-agents) 和 [Linux](https://docs.microsoft.com/azure/log-analytics/log-analytics-linux-agents) 電腦的代理程式，或[已連接的 System Center Operations Manager 管理群組](https://docs.microsoft.com/azure/log-analytics/log-analytics-om-agents)中的代理程式。</span><span class="sxs-lookup"><span data-stu-id="f7121-485">This can include agents installed on [Windows](https://docs.microsoft.com/azure/log-analytics/log-analytics-windows-agents) and [Linux](https://docs.microsoft.com/azure/log-analytics/log-analytics-linux-agents) computers that connect directly or agents in [a connected System Center Operations Manager management group.](https://docs.microsoft.com/azure/log-analytics/log-analytics-om-agents)</span></span> <span data-ttu-id="f7121-486">Log Analytics 也可以從 [Azure 儲存體](https://docs.microsoft.com/azure/log-analytics/log-analytics-azure-storage)收集資料。</span><span class="sxs-lookup"><span data-stu-id="f7121-486">Log Analytics can also collect data from [Azure storage.](https://docs.microsoft.com/azure/log-analytics/log-analytics-azure-storage)</span></span>

<span data-ttu-id="f7121-487">[資料來源](https://docs.microsoft.com/azure/log-analytics/log-analytics-data-sources) 是從每一個已連接來源收集的不同種類的資料。</span><span class="sxs-lookup"><span data-stu-id="f7121-487">[Data sources](https://docs.microsoft.com/azure/log-analytics/log-analytics-data-sources) are the different kinds of data collected from each connected source.</span></span> <span data-ttu-id="f7121-488">這包括來自 [Windows](https://docs.microsoft.com/azure/log-analytics/log-analytics-data-sources-windows-events) 和 Linux 代理程式的事件和[效能資料](https://docs.microsoft.com/azure/log-analytics/log-analytics-data-sources-performance-counters)，以及像是 [IIS 記錄](https://docs.microsoft.com/azure/log-analytics/log-analytics-data-sources-iis-logs)和[自訂文字記錄](https://docs.microsoft.com/azure/log-analytics/log-analytics-data-sources-custom-logs)等來源。</span><span class="sxs-lookup"><span data-stu-id="f7121-488">This includes events and [performance data](https://docs.microsoft.com/azure/log-analytics/log-analytics-data-sources-performance-counters) from [Windows](https://docs.microsoft.com/azure/log-analytics/log-analytics-data-sources-windows-events) and Linux agents in addition to sources such as [IIS logs](https://docs.microsoft.com/azure/log-analytics/log-analytics-data-sources-iis-logs), and [custom text logs.](https://docs.microsoft.com/azure/log-analytics/log-analytics-data-sources-custom-logs)</span></span> <span data-ttu-id="f7121-489">您設定想要收集的每個資料來源，組態會自動傳遞到每一個已連接的來源。</span><span class="sxs-lookup"><span data-stu-id="f7121-489">You configure each data source that you want to collect, and the configuration is automatically delivered to each connected source.</span></span>

<span data-ttu-id="f7121-490">有四種不同的方式可[收集 Azure 服務的記錄和計量](https://docs.microsoft.com/azure/log-analytics/log-analytics-azure-storage)：</span><span class="sxs-lookup"><span data-stu-id="f7121-490">There are four different ways of [collecting logs and metrics for Azure services:](https://docs.microsoft.com/azure/log-analytics/log-analytics-azure-storage)</span></span>
1.  <span data-ttu-id="f7121-491">Azure 診斷直達 Log Analytics (下表中的診斷)</span><span class="sxs-lookup"><span data-stu-id="f7121-491">Azure diagnostics direct to Log Analytics (Diagnostics in the following table)</span></span>

2.  <span data-ttu-id="f7121-492">Azure 診斷至 Azure 儲存體至 Log Analytics (下表中的儲存體)</span><span class="sxs-lookup"><span data-stu-id="f7121-492">Azure diagnostics to Azure storage to Log Analytics (Storage in the following table)</span></span>

3.  <span data-ttu-id="f7121-493">Azure 服務的連接器 (下表中的連接器)</span><span class="sxs-lookup"><span data-stu-id="f7121-493">Connectors for Azure services (Connectors in the following table)</span></span>

4.  <span data-ttu-id="f7121-494">使用指令碼來收集，再將資料公佈至 Log Analytics (下表中的空格，適用於未列出的服務)</span><span class="sxs-lookup"><span data-stu-id="f7121-494">Scripts to collect and then post data into Log Analytics (blanks in the following table and for services that are not listed)</span></span>

| <span data-ttu-id="f7121-495">服務</span><span class="sxs-lookup"><span data-stu-id="f7121-495">Service</span></span> | <span data-ttu-id="f7121-496">資源類型</span><span class="sxs-lookup"><span data-stu-id="f7121-496">Resource Type</span></span> | <span data-ttu-id="f7121-497">記錄檔</span><span class="sxs-lookup"><span data-stu-id="f7121-497">Logs</span></span> | <span data-ttu-id="f7121-498">度量</span><span class="sxs-lookup"><span data-stu-id="f7121-498">Metrics</span></span> | <span data-ttu-id="f7121-499">方案</span><span class="sxs-lookup"><span data-stu-id="f7121-499">Solution</span></span> |
| :------ | :------------ | :--- | :------ | :------- |
|<span data-ttu-id="f7121-500">應用程式閘道</span><span class="sxs-lookup"><span data-stu-id="f7121-500">Application gateways</span></span>|  <span data-ttu-id="f7121-501">Microsoft.Network/</span><span class="sxs-lookup"><span data-stu-id="f7121-501">Microsoft.Network/</span></span><br><span data-ttu-id="f7121-502">applicationGateways</span><span class="sxs-lookup"><span data-stu-id="f7121-502">applicationGateways</span></span>|  <span data-ttu-id="f7121-503">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-503">Diagnostics</span></span>|<span data-ttu-id="f7121-504">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-504">Diagnostics</span></span>|    <span data-ttu-id="f7121-505">[Azure 應用程式](https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-azure-networking-analytics#azure-application-gateway-analytics-solution-in-log-analytics)[閘道分析](https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-azure-networking-analytics#azure-application-gateway-analytics-solution-in-log-analytics)</span><span class="sxs-lookup"><span data-stu-id="f7121-505">[Azure Application](https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-azure-networking-analytics#azure-application-gateway-analytics-solution-in-log-analytics) [Gateway Analytics](https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-azure-networking-analytics#azure-application-gateway-analytics-solution-in-log-analytics)</span></span>|
|<span data-ttu-id="f7121-506">Application insights</span><span class="sxs-lookup"><span data-stu-id="f7121-506">Application insights</span></span>||     <span data-ttu-id="f7121-507">連接器</span><span class="sxs-lookup"><span data-stu-id="f7121-507">Connector</span></span>|  <span data-ttu-id="f7121-508">連接器</span><span class="sxs-lookup"><span data-stu-id="f7121-508">Connector</span></span>|  <span data-ttu-id="f7121-509">[Application Insights](https://blogs.technet.microsoft.com/msoms/2016/09/26/application-insights-connector-in-oms/) [ 連接器 (預覽) (英文)](https://blogs.technet.microsoft.com/msoms/2016/09/26/application-insights-connector-in-oms/)</span><span class="sxs-lookup"><span data-stu-id="f7121-509">[Application Insights](https://blogs.technet.microsoft.com/msoms/2016/09/26/application-insights-connector-in-oms/) [Connector (Preview)](https://blogs.technet.microsoft.com/msoms/2016/09/26/application-insights-connector-in-oms/)</span></span>|
|<span data-ttu-id="f7121-510">自動化帳戶</span><span class="sxs-lookup"><span data-stu-id="f7121-510">Automation accounts</span></span>|   <span data-ttu-id="f7121-511">Microsoft.Automation/</span><span class="sxs-lookup"><span data-stu-id="f7121-511">Microsoft.Automation/</span></span><br><span data-ttu-id="f7121-512">AutomationAccounts</span><span class="sxs-lookup"><span data-stu-id="f7121-512">AutomationAccounts</span></span>|    <span data-ttu-id="f7121-513">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-513">Diagnostics</span></span>||       [<span data-ttu-id="f7121-514">詳細資訊</span><span class="sxs-lookup"><span data-stu-id="f7121-514">More information</span></span>](https://docs.microsoft.com/en-us/azure/automation/automation-manage-send-joblogs-log-analytics)|
|<span data-ttu-id="f7121-515">Batch 帳戶</span><span class="sxs-lookup"><span data-stu-id="f7121-515">Batch accounts</span></span>|    <span data-ttu-id="f7121-516">Microsoft.Batch/</span><span class="sxs-lookup"><span data-stu-id="f7121-516">Microsoft.Batch/</span></span><br><span data-ttu-id="f7121-517">batchAccounts</span><span class="sxs-lookup"><span data-stu-id="f7121-517">batchAccounts</span></span>|  <span data-ttu-id="f7121-518">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-518">Diagnostics</span></span>|    <span data-ttu-id="f7121-519">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-519">Diagnostics</span></span>||
|<span data-ttu-id="f7121-520">傳統雲端服務</span><span class="sxs-lookup"><span data-stu-id="f7121-520">Classic cloud services</span></span>||       <span data-ttu-id="f7121-521">儲存體</span><span class="sxs-lookup"><span data-stu-id="f7121-521">Storage</span></span>||       [<span data-ttu-id="f7121-522">詳細資訊</span><span class="sxs-lookup"><span data-stu-id="f7121-522">More information</span></span>](https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-azure-storage-iis-table)|
|<span data-ttu-id="f7121-523">辨識服務</span><span class="sxs-lookup"><span data-stu-id="f7121-523">Cognitive services</span></span>|    <span data-ttu-id="f7121-524">Microsoft.CognitiveServices/</span><span class="sxs-lookup"><span data-stu-id="f7121-524">Microsoft.CognitiveServices/</span></span><br><span data-ttu-id="f7121-525">accounts</span><span class="sxs-lookup"><span data-stu-id="f7121-525">accounts</span></span>|       <span data-ttu-id="f7121-526">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-526">Diagnostics</span></span>|||
|<span data-ttu-id="f7121-527">Data Lake Analytics</span><span class="sxs-lookup"><span data-stu-id="f7121-527">Data Lake analytics</span></span>|   <span data-ttu-id="f7121-528">Microsoft.DataLakeAnalytics/</span><span class="sxs-lookup"><span data-stu-id="f7121-528">Microsoft.DataLakeAnalytics/</span></span><br><span data-ttu-id="f7121-529">accounts</span><span class="sxs-lookup"><span data-stu-id="f7121-529">accounts</span></span>|   <span data-ttu-id="f7121-530">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-530">Diagnostics</span></span>|||
|<span data-ttu-id="f7121-531">Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="f7121-531">Data Lake store</span></span>|   <span data-ttu-id="f7121-532">Microsoft.DataLakeStore/</span><span class="sxs-lookup"><span data-stu-id="f7121-532">Microsoft.DataLakeStore/</span></span><br><span data-ttu-id="f7121-533">accounts</span><span class="sxs-lookup"><span data-stu-id="f7121-533">accounts</span></span>|   <span data-ttu-id="f7121-534">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-534">Diagnostics</span></span>|||
|<span data-ttu-id="f7121-535">事件中樞命名空間</span><span class="sxs-lookup"><span data-stu-id="f7121-535">Event Hub namespace</span></span>|   <span data-ttu-id="f7121-536">Microsoft.EventHub/</span><span class="sxs-lookup"><span data-stu-id="f7121-536">Microsoft.EventHub/</span></span><br><span data-ttu-id="f7121-537">namespaces</span><span class="sxs-lookup"><span data-stu-id="f7121-537">namespaces</span></span>|  <span data-ttu-id="f7121-538">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-538">Diagnostics</span></span>|    <span data-ttu-id="f7121-539">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-539">Diagnostics</span></span>||
|<span data-ttu-id="f7121-540">IoT 中樞</span><span class="sxs-lookup"><span data-stu-id="f7121-540">IoT Hubs</span></span>|  <span data-ttu-id="f7121-541">Microsoft.Devices/</span><span class="sxs-lookup"><span data-stu-id="f7121-541">Microsoft.Devices/</span></span><br><span data-ttu-id="f7121-542">IotHubs</span><span class="sxs-lookup"><span data-stu-id="f7121-542">IotHubs</span></span>||     <span data-ttu-id="f7121-543">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-543">Diagnostics</span></span>||
|<span data-ttu-id="f7121-544">金鑰保存庫</span><span class="sxs-lookup"><span data-stu-id="f7121-544">Key Vault</span></span>| <span data-ttu-id="f7121-545">Microsoft.KeyVault/</span><span class="sxs-lookup"><span data-stu-id="f7121-545">Microsoft.KeyVault/</span></span><br><span data-ttu-id="f7121-546">vaults</span><span class="sxs-lookup"><span data-stu-id="f7121-546">vaults</span></span>|  <span data-ttu-id="f7121-547">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-547">Diagnostics</span></span>  || [<span data-ttu-id="f7121-548">金鑰保存庫分析</span><span class="sxs-lookup"><span data-stu-id="f7121-548">KeyVault Analytics</span></span>](https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-azure-key-vault)|
|<span data-ttu-id="f7121-549">負載平衡器</span><span class="sxs-lookup"><span data-stu-id="f7121-549">Load Balancers</span></span>|    <span data-ttu-id="f7121-550">Microsoft.Network/</span><span class="sxs-lookup"><span data-stu-id="f7121-550">Microsoft.Network/</span></span><br><span data-ttu-id="f7121-551">loadBalancers</span><span class="sxs-lookup"><span data-stu-id="f7121-551">loadBalancers</span></span>|    <span data-ttu-id="f7121-552">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-552">Diagnostics</span></span>|||
|<span data-ttu-id="f7121-553">Logic Apps</span><span class="sxs-lookup"><span data-stu-id="f7121-553">Logic Apps</span></span>|    <span data-ttu-id="f7121-554">Microsoft.Logic/</span><span class="sxs-lookup"><span data-stu-id="f7121-554">Microsoft.Logic/</span></span><br><span data-ttu-id="f7121-555">workflows</span><span class="sxs-lookup"><span data-stu-id="f7121-555">workflows</span></span>|  <span data-ttu-id="f7121-556">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-556">Diagnostics</span></span>|    <span data-ttu-id="f7121-557">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-557">Diagnostics</span></span>||
||<span data-ttu-id="f7121-558">Microsoft.Logic/</span><span class="sxs-lookup"><span data-stu-id="f7121-558">Microsoft.Logic/</span></span><br><span data-ttu-id="f7121-559">integrationAccounts</span><span class="sxs-lookup"><span data-stu-id="f7121-559">integrationAccounts</span></span>||||
|<span data-ttu-id="f7121-560">網路安全性群組</span><span class="sxs-lookup"><span data-stu-id="f7121-560">Network Security Groups</span></span>|   <span data-ttu-id="f7121-561">Microsoft.Network/</span><span class="sxs-lookup"><span data-stu-id="f7121-561">Microsoft.Network/</span></span><br><span data-ttu-id="f7121-562">networksecuritygroups</span><span class="sxs-lookup"><span data-stu-id="f7121-562">networksecuritygroups</span></span>|<span data-ttu-id="f7121-563">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-563">Diagnostics</span></span>||   [<span data-ttu-id="f7121-564">Azure 網路安全性群組分析</span><span class="sxs-lookup"><span data-stu-id="f7121-564">Azure Network Security Group Analytics</span></span>](https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-azure-networking-analytics#azure-network-security-group-analytics-solution-in-log-analytics)|
|<span data-ttu-id="f7121-565">復原保存庫</span><span class="sxs-lookup"><span data-stu-id="f7121-565">Recovery vaults</span></span>|   <span data-ttu-id="f7121-566">Microsoft.RecoveryServices/</span><span class="sxs-lookup"><span data-stu-id="f7121-566">Microsoft.RecoveryServices/</span></span><br><span data-ttu-id="f7121-567">vaults</span><span class="sxs-lookup"><span data-stu-id="f7121-567">vaults</span></span>|||[<span data-ttu-id="f7121-568">Azure 復原服務分析 (預覽)</span><span class="sxs-lookup"><span data-stu-id="f7121-568">Azure Recovery Services Analytics (Preview)</span></span>](https://github.com/krnese/AzureDeploy/blob/master/OMS/MSOMS/Solutions/recoveryservices/)|
|<span data-ttu-id="f7121-569">搜尋服務</span><span class="sxs-lookup"><span data-stu-id="f7121-569">Search services</span></span>|   <span data-ttu-id="f7121-570">Microsoft.Search/</span><span class="sxs-lookup"><span data-stu-id="f7121-570">Microsoft.Search/</span></span><br><span data-ttu-id="f7121-571">searchServices</span><span class="sxs-lookup"><span data-stu-id="f7121-571">searchServices</span></span>|    <span data-ttu-id="f7121-572">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-572">Diagnostics</span></span>|    <span data-ttu-id="f7121-573">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-573">Diagnostics</span></span>||
|<span data-ttu-id="f7121-574">服務匯流排命名空間</span><span class="sxs-lookup"><span data-stu-id="f7121-574">Service Bus namespace</span></span>| <span data-ttu-id="f7121-575">Microsoft.ServiceBus/</span><span class="sxs-lookup"><span data-stu-id="f7121-575">Microsoft.ServiceBus/</span></span><br><span data-ttu-id="f7121-576">namespaces</span><span class="sxs-lookup"><span data-stu-id="f7121-576">namespaces</span></span>|    <span data-ttu-id="f7121-577">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-577">Diagnostics</span></span>|<span data-ttu-id="f7121-578">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-578">Diagnostics</span></span>|    [<span data-ttu-id="f7121-579">服務匯流排分析 (預覽)</span><span class="sxs-lookup"><span data-stu-id="f7121-579">Service Bus Analytics (Preview)</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/oms-servicebus-solution)|
|<span data-ttu-id="f7121-580">Service Fabric</span><span class="sxs-lookup"><span data-stu-id="f7121-580">Service Fabric</span></span>||       <span data-ttu-id="f7121-581">儲存體</span><span class="sxs-lookup"><span data-stu-id="f7121-581">Storage</span></span>||    [<span data-ttu-id="f7121-582">Service Fabric Analytics (Service Fabric 分析) (預覽)</span><span class="sxs-lookup"><span data-stu-id="f7121-582">Service Fabric Analytics (Preview)</span></span>](https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-service-fabric)|
|<span data-ttu-id="f7121-583">SQL (v12)</span><span class="sxs-lookup"><span data-stu-id="f7121-583">SQL (v12)</span></span>| <span data-ttu-id="f7121-584">Microsoft.Sql/</span><span class="sxs-lookup"><span data-stu-id="f7121-584">Microsoft.Sql/</span></span><br><span data-ttu-id="f7121-585">servers/</span><span class="sxs-lookup"><span data-stu-id="f7121-585">servers/</span></span><br><span data-ttu-id="f7121-586">資料庫</span><span class="sxs-lookup"><span data-stu-id="f7121-586">databases</span></span>||       <span data-ttu-id="f7121-587">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-587">Diagnostics</span></span>||
||<span data-ttu-id="f7121-588">Microsoft.Sql/</span><span class="sxs-lookup"><span data-stu-id="f7121-588">Microsoft.Sql/</span></span><br><span data-ttu-id="f7121-589">servers/</span><span class="sxs-lookup"><span data-stu-id="f7121-589">servers/</span></span><br><span data-ttu-id="f7121-590">elasticPools</span><span class="sxs-lookup"><span data-stu-id="f7121-590">elasticPools</span></span>||||
|<span data-ttu-id="f7121-591">儲存體</span><span class="sxs-lookup"><span data-stu-id="f7121-591">Storage</span></span>|||         <span data-ttu-id="f7121-592">指令碼</span><span class="sxs-lookup"><span data-stu-id="f7121-592">Script</span></span>| [<span data-ttu-id="f7121-593">Azure 儲存體分析 (預覽)</span><span class="sxs-lookup"><span data-stu-id="f7121-593">Azure Storage Analytics (Preview)</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/oms-azure-storage-analytics-solution)|
|<span data-ttu-id="f7121-594">虛擬機器</span><span class="sxs-lookup"><span data-stu-id="f7121-594">Virtual Machines</span></span>|  <span data-ttu-id="f7121-595">Microsoft.Compute/</span><span class="sxs-lookup"><span data-stu-id="f7121-595">Microsoft.Compute/</span></span><br><span data-ttu-id="f7121-596">virtualMachines</span><span class="sxs-lookup"><span data-stu-id="f7121-596">virtualMachines</span></span>|  <span data-ttu-id="f7121-597">擴充功能</span><span class="sxs-lookup"><span data-stu-id="f7121-597">Extension</span></span>|  <span data-ttu-id="f7121-598">分機</span><span class="sxs-lookup"><span data-stu-id="f7121-598">Extension</span></span>||
||||<span data-ttu-id="f7121-599">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-599">Diagnostics</span></span>||
|<span data-ttu-id="f7121-600">虛擬機器擴展集</span><span class="sxs-lookup"><span data-stu-id="f7121-600">Virtual Machines scale sets</span></span>|   <span data-ttu-id="f7121-601">Microsoft.Compute/</span><span class="sxs-lookup"><span data-stu-id="f7121-601">Microsoft.Compute/</span></span><br><span data-ttu-id="f7121-602">virtualMachines</span><span class="sxs-lookup"><span data-stu-id="f7121-602">virtualMachines</span></span>    ||<span data-ttu-id="f7121-603">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-603">Diagnostics</span></span>||
||<span data-ttu-id="f7121-604">Microsoft.Compute/</span><span class="sxs-lookup"><span data-stu-id="f7121-604">Microsoft.Compute/</span></span><br><span data-ttu-id="f7121-605">virtualMachineScaleSets/</span><span class="sxs-lookup"><span data-stu-id="f7121-605">virtualMachineScaleSets/</span></span><br><span data-ttu-id="f7121-606">virtualMachines</span><span class="sxs-lookup"><span data-stu-id="f7121-606">virtualMachines</span></span>||||
|<span data-ttu-id="f7121-607">Web 伺服器陣列</span><span class="sxs-lookup"><span data-stu-id="f7121-607">Web Server farms</span></span>|<span data-ttu-id="f7121-608">Microsoft.Web/</span><span class="sxs-lookup"><span data-stu-id="f7121-608">Microsoft.Web/</span></span><br><span data-ttu-id="f7121-609">serverfarms</span><span class="sxs-lookup"><span data-stu-id="f7121-609">serverfarms</span></span>||   <span data-ttu-id="f7121-610">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-610">Diagnostics</span></span>
|<span data-ttu-id="f7121-611">網站</span><span class="sxs-lookup"><span data-stu-id="f7121-611">Web Sites</span></span>| <span data-ttu-id="f7121-612">Microsoft.Web/</span><span class="sxs-lookup"><span data-stu-id="f7121-612">Microsoft.Web/</span></span><br><span data-ttu-id="f7121-613">sites</span><span class="sxs-lookup"><span data-stu-id="f7121-613">sites</span></span> ||      <span data-ttu-id="f7121-614">診斷</span><span class="sxs-lookup"><span data-stu-id="f7121-614">Diagnostics</span></span>|    [<span data-ttu-id="f7121-615">詳細資訊</span><span class="sxs-lookup"><span data-stu-id="f7121-615">More information</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/101-webappazure-oms-monitoring)|
||<span data-ttu-id="f7121-616">Microsoft.Web/</span><span class="sxs-lookup"><span data-stu-id="f7121-616">Microsoft.Web/</span></span><br><span data-ttu-id="f7121-617">sites/</span><span class="sxs-lookup"><span data-stu-id="f7121-617">sites/</span></span><br><span data-ttu-id="f7121-618">slots</span><span class="sxs-lookup"><span data-stu-id="f7121-618">slots</span></span>|||||


## <a name="log-integration-with-on-premises-siem-systems"></a><span data-ttu-id="f7121-619">與內部部署之 SIEM 系統整合的記錄</span><span class="sxs-lookup"><span data-stu-id="f7121-619">Log integration with on-premises SIEM systems</span></span>
<span data-ttu-id="f7121-620">[Azure 記錄整合](https://www.microsoft.com/download/details.aspx?id=53324)可讓您將來自 Azure 資源的未經處理記錄，整合到內部部署**安全性資訊及事件管理 (SIEM) 系統**內。</span><span class="sxs-lookup"><span data-stu-id="f7121-620">[Azure log integration](https://www.microsoft.com/download/details.aspx?id=53324) enables you to integrate raw logs from your Azure resources in to your on-premises **Security Information and Event Management (SIEM) systems**.</span></span>

![記錄整合](./media/azure-log-audit/azure-log-audit-fig9.png)

<span data-ttu-id="f7121-622">Azure 記錄整合會從您的 Windows (WAD) 虛擬機器、Azure 活動記錄，Azure 資訊安全中心警示和 Azure 資源提供者記錄收集 Azure 診斷。</span><span class="sxs-lookup"><span data-stu-id="f7121-622">Azure log integration collects Azure Diagnostics from your Windows (WAD) virtual machines, Azure Activity Logs, Azure Security Center alerts,and Azure Resource Provider logs.</span></span> <span data-ttu-id="f7121-623">這項整合提供您內部部署或在雲端中所有資產統一的儀表板，以便您彙總、相互關聯、分析和警示安全性事件。</span><span class="sxs-lookup"><span data-stu-id="f7121-623">This integration provides a unified dashboard for all your assets, on-premises or in the cloud, so that you can aggregate, correlate, analyze, and alert for security events.</span></span>



<span data-ttu-id="f7121-624">Azure 記錄整合目前支援整合 Azure 活動記錄、您 Azure 訂用帳戶中 Windows 虛擬機器的 Windows 事件記錄檔、Azure 資訊安全中心警示、Azure 診斷記錄及 Azure Active Directory 稽核記錄。</span><span class="sxs-lookup"><span data-stu-id="f7121-624">Azure log integration currently supports integration of Azure Activity Logs, Windows Event log from Windows virtual machine in your Azure subscription, Azure Security Center alerts, Azure Diagnostic logs and Azure Active Directory audit logs.</span></span>

| <span data-ttu-id="f7121-625">記錄類型</span><span class="sxs-lookup"><span data-stu-id="f7121-625">Log type</span></span> | <span data-ttu-id="f7121-626">支援 JSON 的記錄分析 (Splunk、ArcSight、Qradar)</span><span class="sxs-lookup"><span data-stu-id="f7121-626">Log analytics supporting JSON (Splunk, ArcSight, Qradar)</span></span> |
| :------- | :-------------------------------------------------------- |
|<span data-ttu-id="f7121-627">AAD 稽核記錄</span><span class="sxs-lookup"><span data-stu-id="f7121-627">AAD Audit logs</span></span>|    <span data-ttu-id="f7121-628">yes</span><span class="sxs-lookup"><span data-stu-id="f7121-628">yes</span></span>|
|<span data-ttu-id="f7121-629">活動記錄檔</span><span class="sxs-lookup"><span data-stu-id="f7121-629">Activity Logs</span></span>| <span data-ttu-id="f7121-630">是</span><span class="sxs-lookup"><span data-stu-id="f7121-630">Yes</span></span>|
|<span data-ttu-id="f7121-631">ASC 警示</span><span class="sxs-lookup"><span data-stu-id="f7121-631">ASC Alerts</span></span> |<span data-ttu-id="f7121-632">是</span><span class="sxs-lookup"><span data-stu-id="f7121-632">Yes</span></span>|
|<span data-ttu-id="f7121-633">診斷記錄 (資源記錄)</span><span class="sxs-lookup"><span data-stu-id="f7121-633">Diagnostics Logs (resource logs)</span></span>|  <span data-ttu-id="f7121-634">是</span><span class="sxs-lookup"><span data-stu-id="f7121-634">Yes</span></span>|
|<span data-ttu-id="f7121-635">VM 記錄</span><span class="sxs-lookup"><span data-stu-id="f7121-635">VM logs</span></span>|   <span data-ttu-id="f7121-636">是，透過轉送的事件，而非透過 JSON</span><span class="sxs-lookup"><span data-stu-id="f7121-636">Yes via Forwarded events and not through JSON</span></span>|


<span data-ttu-id="f7121-637">下表說明記錄分類和 SIEM 整合詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="f7121-637">The following table explains the Log category and SIEM integration detail.</span></span>

<span data-ttu-id="f7121-638">[開始使用 Azure 記錄整合](https://docs.microsoft.com/azure/security/security-azure-log-integration-get-started)：這個教學課程會逐步引導您安裝 Azure 記錄整合，以及整合來自 Azure WAD 儲存體的記錄、Azure 活動記錄、Azure 資訊安全中心警示以及 Azure Active Directory 稽核記錄。</span><span class="sxs-lookup"><span data-stu-id="f7121-638">[Get started with Azure log integration](https://docs.microsoft.com/azure/security/security-azure-log-integration-get-started) - Tutorial walks you through installation of Azure log integration and integrating logs from Azure WAD storage, Azure Activity Logs, Azure Security Center alerts,and Azure Active Directory audit logs.</span></span>

<span data-ttu-id="f7121-639">整合案例</span><span class="sxs-lookup"><span data-stu-id="f7121-639">Integration Scenarios</span></span>

-   <span data-ttu-id="f7121-640">[合作夥伴設定步驟](https://blogs.msdn.microsoft.com/azuresecurity/2016/08/23/azure-log-siem-configuration-steps/) – 此部落格文章說明如何設定 Azure 記錄整合，以搭配使用合作夥伴解決方案 Splunk、HP ArcSight 和 IBM QRadar。</span><span class="sxs-lookup"><span data-stu-id="f7121-640">[Partner configuration steps](https://blogs.msdn.microsoft.com/azuresecurity/2016/08/23/azure-log-siem-configuration-steps/) – This blog post shows you how to configure Azure log integration to work with partner solutions Splunk, HP ArcSight, and IBM QRadar.</span></span>

-   <span data-ttu-id="f7121-641">[Azure 記錄整合常見問題集 (FAQ)](https://docs.microsoft.com/azure/security/security-azure-log-integration-faq) - 此常見問題集會回答有關 Azure 記錄整合的問題。</span><span class="sxs-lookup"><span data-stu-id="f7121-641">[Azure log Integration frequently asked questions (FAQ)](https://docs.microsoft.com/azure/security/security-azure-log-integration-faq) - This FAQ answers questions about Azure log integration.</span></span>

-   <span data-ttu-id="f7121-642">[以 Azure 記錄整合來整合資訊安全中心警示](https://docs.microsoft.com/azure/security-center/security-center-integrating-alerts-with-log-integration) - 這份文件說明如何將資訊安全中心警示以及 Azure 診斷和 Azure 稽核記錄檔所收集的虛擬機器安全性事件，與您的 Log Analytics 或 SIEM 方案進行同步處理。</span><span class="sxs-lookup"><span data-stu-id="f7121-642">[Integrating Security Center alerts with Azure log Integration](https://docs.microsoft.com/azure/security-center/security-center-integrating-alerts-with-log-integration) – This document shows you how to sync Security Center alerts, along with virtual machine security events collected by Azure Diagnostics and Azure Audit Logs, with your log analytics or SIEM solution.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f7121-643">後續步驟</span><span class="sxs-lookup"><span data-stu-id="f7121-643">Next Steps</span></span>

- [<span data-ttu-id="f7121-644">稽核和記錄</span><span class="sxs-lookup"><span data-stu-id="f7121-644">Auditing and logging</span></span>](https://www.microsoft.com/trustcenter/security/auditingandlogging)

<span data-ttu-id="f7121-645">藉由保持可見度並快速回應即時安全性警示來保護資料。</span><span class="sxs-lookup"><span data-stu-id="f7121-645">Protect data by maintaining visibility and responding quickly to timely security alerts</span></span>

- [<span data-ttu-id="f7121-646">Azure 中的安全性記錄和稽核記錄收集 (英文)</span><span class="sxs-lookup"><span data-stu-id="f7121-646">Security Logging and Audit Log Collection within Azure</span></span>](https://azure.microsoft.com/resources/videos/security-logging-and-audit-log-collection/)

<span data-ttu-id="f7121-647">您需要強制執行哪些設定，以確定您的 Azure 執行個體正在收集正確的安全性和稽核記錄。</span><span class="sxs-lookup"><span data-stu-id="f7121-647">What settings you need to enforce to make sure your Azure instances are collecting the correct Security and Audit logs.</span></span>

- [<span data-ttu-id="f7121-648">設定網站集合的稽核設定</span><span class="sxs-lookup"><span data-stu-id="f7121-648">Configure audit settings for a site collection</span></span>](https://support.office.com/article/Configure-audit-settings-for-a-site-collection-A9920C97-38C0-44F2-8BCB-4CF1E2AE22D2?ui=&rs=&ad=US)

<span data-ttu-id="f7121-649">身為網站集合管理員，可擷取特定使用者所採取的動作歷程記錄，也可以擷取特定日期範圍內所採取的動作歷程記錄。</span><span class="sxs-lookup"><span data-stu-id="f7121-649">As a site collection administrator, one can retrieve the history of actions taken by a particular user and can also retrieve the history of actions taken during a particular date range.</span></span> 

- [<span data-ttu-id="f7121-650">搜尋 Office 365 安全與規範中心的稽核記錄</span><span class="sxs-lookup"><span data-stu-id="f7121-650">Search the audit log in the Office 365 Security & Compliance Center</span></span>](https://support.office.com/article/Search-the-audit-log-in-the-Office-365-Security-Compliance-Center-0d4d0f35-390b-4518-800e-0c7ec95e946c?ui=&rs=&ad=US)

<span data-ttu-id="f7121-651">您可以使用 Office 365 安全與規範中心來搜尋整合的稽核記錄，以檢視您 Office 365 組織中的使用者和系統管理員活動。</span><span class="sxs-lookup"><span data-stu-id="f7121-651">One can use the Office 365 Security & Compliance Center to search the unified audit log to view user and administrator activity in your Office 365 organization.</span></span>


