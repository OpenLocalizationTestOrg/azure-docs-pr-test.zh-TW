---
title: "aaaAzure Service Fabric 安全性最佳作法 |Microsoft 文件"
description: "本文提供一組 Azure Service Fabric 安全性的最佳做法。"
services: security
documentationcenter: na
author: unifycloud
manager: swadhwa
editor: tomsh
ms.assetid: 
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/04/2017
ms.author: tomsh
ms.openlocfilehash: 483a21240da17d56bb4641653093ddcbad379d6a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="azure-service-fabric-security-best-practices"></a><span data-ttu-id="c50a9-103">Azure Service Fabric 安全性最佳做法</span><span class="sxs-lookup"><span data-stu-id="c50a9-103">Azure Service Fabric security best practices</span></span>
<span data-ttu-id="c50a9-104">在 Azure 上部署應用程式很快速、輕鬆且符合成本效益。</span><span class="sxs-lookup"><span data-stu-id="c50a9-104">Deploying an application on Azure is fast, easy, and cost-effective.</span></span> <span data-ttu-id="c50a9-105">部署雲端應用程式中實際的有用 toohave 之前的最佳做法 tooassist 評估您的應用程式針對清單重要和建議的最佳作法。</span><span class="sxs-lookup"><span data-stu-id="c50a9-105">Before deploying cloud application in production useful toohave a best practice tooassist in evaluating your application against a list of essential and recommended best practices.</span></span>

<span data-ttu-id="c50a9-106">Azure Service Fabric 是分散式的系統平台，可讓您輕鬆 toopackage、 部署及管理可擴充且可靠的 microservices。</span><span class="sxs-lookup"><span data-stu-id="c50a9-106">Azure Service Fabric is a distributed systems platform that makes it easy toopackage, deploy, and manage scalable and reliable microservices.</span></span> <span data-ttu-id="c50a9-107">服務網狀架構也會討論 hello 在開發和管理雲端應用程式的重大挑戰。</span><span class="sxs-lookup"><span data-stu-id="c50a9-107">Service Fabric also addresses hello significant challenges in developing and managing cloud applications.</span></span> <span data-ttu-id="c50a9-108">開發人員與管理員能夠避免複雜的基礎結構問題，專注於實作關鍵且嚴格要求之可調整、可信賴且可管理的工作負載。</span><span class="sxs-lookup"><span data-stu-id="c50a9-108">Developers and administrators can avoid complex infrastructure problems and focus on implementing mission-critical, demanding workloads that are scalable, reliable, and manageable.</span></span> 

<span data-ttu-id="c50a9-109">針對每個最佳做法，我們會說明︰</span><span class="sxs-lookup"><span data-stu-id="c50a9-109">For each best practice, we explain:</span></span>

-   <span data-ttu-id="c50a9-110">哪些 hello 最佳作法是</span><span class="sxs-lookup"><span data-stu-id="c50a9-110">What hello best practice is</span></span>
-   <span data-ttu-id="c50a9-111">為什麼要 tooenable 該最佳作法</span><span class="sxs-lookup"><span data-stu-id="c50a9-111">Why you want tooenable that best practice</span></span>
-   <span data-ttu-id="c50a9-112">如果您無法 tooenable hello 最佳作法，可能 hello 結果</span><span class="sxs-lookup"><span data-stu-id="c50a9-112">What might be hello result if you fail tooenable hello best practice</span></span>
-   <span data-ttu-id="c50a9-113">如何了解 tooenable hello 最佳作法</span><span class="sxs-lookup"><span data-stu-id="c50a9-113">How you can learn tooenable hello best practice</span></span>

<span data-ttu-id="c50a9-114">我們目前已有下列安全性最佳作法時，Azure Service Fabric hello:</span><span class="sxs-lookup"><span data-stu-id="c50a9-114">We currently have hello following Azure Service Fabric security best practices:</span></span>

-   <span data-ttu-id="c50a9-115">使用 Azure 資源 Manager(ARM) 範本和服務網狀架構 Azure PowerShell 模組 toocreate 安全叢集</span><span class="sxs-lookup"><span data-stu-id="c50a9-115">Use Azure Resource Manager(ARM) template and Service Fabric Azure PowerShell Module toocreate secure cluster</span></span>
-   <span data-ttu-id="c50a9-116">使用 X.509 憑證</span><span class="sxs-lookup"><span data-stu-id="c50a9-116">Use X.509 certificates</span></span>
-   <span data-ttu-id="c50a9-117">設定安全性原則</span><span class="sxs-lookup"><span data-stu-id="c50a9-117">Configure security policies</span></span>
-   <span data-ttu-id="c50a9-118">Reliable Actors 安全性設定</span><span class="sxs-lookup"><span data-stu-id="c50a9-118">Reliable Actors security configuration</span></span>
-   <span data-ttu-id="c50a9-119">設定 Azure Service Fabric 的 SSL</span><span class="sxs-lookup"><span data-stu-id="c50a9-119">Configure SSL for Azure Service Fabric</span></span>
-   <span data-ttu-id="c50a9-120">Azure Service Fabric 的網路隔離/安全性</span><span class="sxs-lookup"><span data-stu-id="c50a9-120">Network Isolation/Security with Azure Service Fabric</span></span>
-   <span data-ttu-id="c50a9-121">設定金鑰保存庫以提供安全性</span><span class="sxs-lookup"><span data-stu-id="c50a9-121">Set up a key vault for security</span></span>
-   <span data-ttu-id="c50a9-122">指派使用者 tooroles</span><span class="sxs-lookup"><span data-stu-id="c50a9-122">Assign users tooroles</span></span>


## <a name="best-practices-for-securing-your-cluster"></a><span data-ttu-id="c50a9-123">保護叢集的最佳做法</span><span class="sxs-lookup"><span data-stu-id="c50a9-123">Best practices for securing your cluster</span></span>

<span data-ttu-id="c50a9-124">**概觀**</span><span class="sxs-lookup"><span data-stu-id="c50a9-124">**Big Picture**</span></span>

<span data-ttu-id="c50a9-125">一律使用安全的叢集</span><span class="sxs-lookup"><span data-stu-id="c50a9-125">Always use a secure cluster</span></span>
-   <span data-ttu-id="c50a9-126">叢集安全性 - 使用憑證</span><span class="sxs-lookup"><span data-stu-id="c50a9-126">Cluster security – use Certificates</span></span>
-   <span data-ttu-id="c50a9-127">用戶端存取 (系統管理員和唯讀) - 使用 AAD</span><span class="sxs-lookup"><span data-stu-id="c50a9-127">Client access (Admin and Read only) – use AAD</span></span>

<span data-ttu-id="c50a9-128">使用自動化部署</span><span class="sxs-lookup"><span data-stu-id="c50a9-128">Use automated deployments</span></span>
-   <span data-ttu-id="c50a9-129">使用指令碼 toogenerate、 部署和彙總機密資料</span><span class="sxs-lookup"><span data-stu-id="c50a9-129">Use scripts toogenerate, deploy and, roll over secrets</span></span>
-   <span data-ttu-id="c50a9-130">Hello 密碼 KV，為所有其他用戶端存取使用 AD</span><span class="sxs-lookup"><span data-stu-id="c50a9-130">Keep hello secrets in KV, use AD for all other client access</span></span>
-   <span data-ttu-id="c50a9-131">任何人應該不具有存取 toothem 未經驗證。</span><span class="sxs-lookup"><span data-stu-id="c50a9-131">No human should have access toothem without authentication.</span></span>

<span data-ttu-id="c50a9-132">此外，請考慮下列 hello:</span><span class="sxs-lookup"><span data-stu-id="c50a9-132">Additionally, consider hello following:</span></span>
-   <span data-ttu-id="c50a9-133">使用網路安全性群組 (NSG) 建立 DMZ</span><span class="sxs-lookup"><span data-stu-id="c50a9-133">Create DMZs using Network Security Groups (NSGs)</span></span>
-   <span data-ttu-id="c50a9-134">您的叢集使用叢集 Vm 或 toomanage 跳躍伺服器 tooRDP</span><span class="sxs-lookup"><span data-stu-id="c50a9-134">Use Jump servers tooRDP into cluster VMs or toomanage your cluster</span></span>

<span data-ttu-id="c50a9-135">叢集必須是安全的 tooprevent 未經授權的使用者連接 tooyour 叢集，尤其是當它已在其上執行的實際執行工作負載。</span><span class="sxs-lookup"><span data-stu-id="c50a9-135">Clusters must be secured tooprevent unauthorized users from connecting tooyour cluster, especially when it has production workloads running on it.</span></span> <span data-ttu-id="c50a9-136">雖然可能 toocreate 不安全的叢集，這樣做可讓匿名使用者 tooconnect tooit，如果它會公開管理端點 toohello 公用網際網路。</span><span class="sxs-lookup"><span data-stu-id="c50a9-136">Although it is possible toocreate an unsecured cluster, doing so allows anonymous users tooconnect tooit, if it exposes management endpoints toohello public Internet.</span></span>

<span data-ttu-id="c50a9-137">技術用 tooimplement 這些案例。</span><span class="sxs-lookup"><span data-stu-id="c50a9-137">Technologies used tooimplement those scenarios.</span></span> <span data-ttu-id="c50a9-138">hello[叢集安全性案例](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security)是：</span><span class="sxs-lookup"><span data-stu-id="c50a9-138">hello [cluster security scenarios](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security) are:</span></span>

-   <span data-ttu-id="c50a9-139">節點-安全性-本保護 hello Vm 與 hello 叢集中的電腦之間的通訊。</span><span class="sxs-lookup"><span data-stu-id="c50a9-139">Node-to-node security- This secures communication between hello VMs and computers in hello cluster.</span></span> <span data-ttu-id="c50a9-140">這可確保只有授權的 toojoin hello 叢集的電腦可以參與裝載應用程式和服務 hello 叢集中。</span><span class="sxs-lookup"><span data-stu-id="c50a9-140">This ensures that only computers that are authorized toojoin hello cluster can participate in hosting applications and services in hello cluster.</span></span>
<span data-ttu-id="c50a9-141">在 Azure 上執行的叢集或在 Windows 上執行的獨立叢集可以使用[憑證安全性](https://docs.microsoft.com/azure/service-fabric/service-fabric-windows-cluster-x509-security)或針對 Windows Server 機器使用 [Windows 安全性](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-windows-cluster-windows-security)。</span><span class="sxs-lookup"><span data-stu-id="c50a9-141">Clusters running on Azure or standalone clusters running on Windows can use either [Certificate Security](https://docs.microsoft.com/azure/service-fabric/service-fabric-windows-cluster-x509-security) or [Windows Security](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-windows-cluster-windows-security) for Windows Server machines.</span></span>
-   <span data-ttu-id="c50a9-142">用戶端對節點安全性-本保護 Service Fabric 用戶端與 hello 叢集中的個別節點之間的通訊。</span><span class="sxs-lookup"><span data-stu-id="c50a9-142">Client-to-node security- This secures communication between a Service Fabric client and individual nodes in hello cluster.</span></span>
-   <span data-ttu-id="c50a9-143">角色型存取控制 (RBAC)-您指定 hello 系統管理員和使用者用戶端角色的叢集建立 hello 次藉由提供不同的身分識別 （憑證，AAD 等） 針對每個。</span><span class="sxs-lookup"><span data-stu-id="c50a9-143">Role-based access control (RBAC) - You specify hello administrator and user client roles at hello time of cluster creation by providing separate identities (certificates, AAD etc.) for each.</span></span>
-   <span data-ttu-id="c50a9-144">安全性建議-Azure 適用的叢集，我們建議您為節點對節點安全性使用用戶端的安全性 tooauthenticate AAD 和憑證。</span><span class="sxs-lookup"><span data-stu-id="c50a9-144">Security Recommendations-For Azure clusters, it is recommended that you use AAD security tooauthenticate clients and certificates for node-to-node security.</span></span>

<span data-ttu-id="c50a9-145">tooconfigure hello 獨立 Windows 叢集，請參閱[獨立 windows 叢集進行設定](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-manifest)。</span><span class="sxs-lookup"><span data-stu-id="c50a9-145">tooconfigure hello standalone Windows cluster, see [configure settings for standalone windows cluster](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-manifest).</span></span>

<span data-ttu-id="c50a9-146">使用 Azure Resource Manager 範本和服務網狀架構 Azure PowerShell 模組 toocreate 安全叢集。</span><span class="sxs-lookup"><span data-stu-id="c50a9-146">Use Azure Resource Manager templates and Service Fabric Azure PowerShell Module toocreate secure cluster.</span></span>
<span data-ttu-id="c50a9-147">[此處](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm)提供的逐步指南可逐步引導您使用 Azure Resource Manager 在 Azure 中設定安全的 Azure Service Fabric 叢集。</span><span class="sxs-lookup"><span data-stu-id="c50a9-147">A step-by-step guide walks you through setting up a secure Azure Service Fabric cluster in Azure by using Azure Resource Manager is available [here](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm).</span></span>

<span data-ttu-id="c50a9-148">使用您的叢集 hello Azure Resource Manager 範本 toocustomize</span><span class="sxs-lookup"><span data-stu-id="c50a9-148">Use hello Azure Resource Manager template toocustomize your cluster</span></span>
-   <span data-ttu-id="c50a9-149">設定 VM VHD 的受管理儲存體</span><span class="sxs-lookup"><span data-stu-id="c50a9-149">Setup-managed storage for VM VHDs</span></span>

<span data-ttu-id="c50a9-150">使用 hello Azure Resource Manager 範本 toodrive 變更 tooyour 資源群組</span><span class="sxs-lookup"><span data-stu-id="c50a9-150">Use hello Azure Resource Manager template toodrive changes tooyour Resource Group</span></span>
-   <span data-ttu-id="c50a9-151">輕鬆進行設定管理</span><span class="sxs-lookup"><span data-stu-id="c50a9-151">Easy configuration management</span></span>
-   <span data-ttu-id="c50a9-152">稽核</span><span class="sxs-lookup"><span data-stu-id="c50a9-152">Auditing</span></span>

<span data-ttu-id="c50a9-153">將叢集設定視為程式碼</span><span class="sxs-lookup"><span data-stu-id="c50a9-153">Treat your cluster configuration as Code</span></span>
-   <span data-ttu-id="c50a9-154">徹底檢查選擇 toodeploy hello 組態</span><span class="sxs-lookup"><span data-stu-id="c50a9-154">Be thorough in checking hello configurations you choose toodeploy</span></span>
-   <span data-ttu-id="c50a9-155">請避免直接使用隱含命令 tootweak 資源</span><span class="sxs-lookup"><span data-stu-id="c50a9-155">Avoid using implicit commands tootweak your resources directly</span></span>

<span data-ttu-id="c50a9-156">Hello 的許多層面[Service Fabric 應用程式生命週期](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-lifecycle)可以自動化。</span><span class="sxs-lookup"><span data-stu-id="c50a9-156">Many aspects of hello [Service Fabric application lifecycle](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-lifecycle) can be automated.</span></span> <span data-ttu-id="c50a9-157">[Azure Service Fabric PowerShell 模組](https://docs.microsoft.com/azure/service-fabric/service-fabric-deploy-remove-applications#upload-the-application-package)會將部署、升級、移除和測試 Azure Service Fabric 應用程式的常見工作自動化。</span><span class="sxs-lookup"><span data-stu-id="c50a9-157">[Service Fabric Azure PowerShell Module](https://docs.microsoft.com/azure/service-fabric/service-fabric-deploy-remove-applications#upload-the-application-package) automates common tasks for deploying, upgrading, removing, and testing Azure Service Fabric applications.</span></span> <span data-ttu-id="c50a9-158">也可使用應用程式管理的 Managed 和 HTTP API。</span><span class="sxs-lookup"><span data-stu-id="c50a9-158">Managed and HTTP APIs for app management are also available.</span></span>

## <a name="use-x509-certificates"></a><span data-ttu-id="c50a9-159">使用 X.509 憑證</span><span class="sxs-lookup"><span data-stu-id="c50a9-159">Use X.509 certificates</span></span>
<span data-ttu-id="c50a9-160">請務必使用 X.509 憑證或 Windows 安全性來保護叢集。</span><span class="sxs-lookup"><span data-stu-id="c50a9-160">Clusters should always be secured using X.509 certificates or Windows security.</span></span> <span data-ttu-id="c50a9-161">在叢集建立期間只能設定安全性而且不可能 tooenable 安全性之後建立 hello 叢集。</span><span class="sxs-lookup"><span data-stu-id="c50a9-161">Security is only configured at cluster creation time and it is not possible tooenable security after hello cluster is created.</span></span>

<span data-ttu-id="c50a9-162">如果您要指定[叢集憑證](https://docs.microsoft.com/azure/service-fabric/service-fabric-windows-cluster-x509-security)，設定 ClusterCredentialType tooX509 hello 值。</span><span class="sxs-lookup"><span data-stu-id="c50a9-162">If you are specifying a [cluster certificate](https://docs.microsoft.com/azure/service-fabric/service-fabric-windows-cluster-x509-security), set hello value of ClusterCredentialType tooX509.</span></span> <span data-ttu-id="c50a9-163">如果您指定的外部連接的伺服器憑證時，設定 hello ServerCredentialType tooX509。</span><span class="sxs-lookup"><span data-stu-id="c50a9-163">If you are specifying server certificate for outside connections, set hello ServerCredentialType tooX509.</span></span>

-   <span data-ttu-id="c50a9-164">執行生產環境工作負載之叢集中所使用的憑證應該是使用已正確設定的 Windows Server 憑證服務來建立，或是從已核准的憑證授權單位 (CA) 取得。</span><span class="sxs-lookup"><span data-stu-id="c50a9-164">Certificates used in clusters running production workloads should be created by using a correctly configured Windows Server certificate service or obtained from an approved Certificate Authority (CA).</span></span>
-   <span data-ttu-id="c50a9-165">絕對不要在生產環境中使用以 MakeCert.exe 這類工具建立的暫時或測試憑證。</span><span class="sxs-lookup"><span data-stu-id="c50a9-165">Never use any temporary or test certificates in production that are created with tools such as MakeCert.exe.</span></span>
-   <span data-ttu-id="c50a9-166">您可以使用自我簽署憑證，但應該只用於測試叢集，不應該在生產環境中使用。</span><span class="sxs-lookup"><span data-stu-id="c50a9-166">You can use a self-signed certificate, but should only do so for test clusters and not in production.</span></span>

<span data-ttu-id="c50a9-167">如果 hello 叢集是較不安全。</span><span class="sxs-lookup"><span data-stu-id="c50a9-167">If hello cluster is unsecure.</span></span> <span data-ttu-id="c50a9-168">任何人都可以匿名方式連線並執行管理作業，所以一律要使用 X.509 憑證或 Windows 安全性來保護生產叢集。</span><span class="sxs-lookup"><span data-stu-id="c50a9-168">Anyone can connect anonymously and perform management operations, so production clusters should always be secured using X.509 certificates or Windows security.</span></span>

<span data-ttu-id="c50a9-169">更多如何 tooenable 憑證中 service fabric 叢集，請參閱，toolearn[新增或移除憑證的 service fabric 叢集](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-update-certs-azure)。</span><span class="sxs-lookup"><span data-stu-id="c50a9-169">toolearn more how tooenable certificates in service fabric cluster see, [add or remove certificates for a service fabric cluster](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-update-certs-azure).</span></span>

## <a name="configure-security-policies"></a><span data-ttu-id="c50a9-170">設定安全性原則</span><span class="sxs-lookup"><span data-stu-id="c50a9-170">Configure security policies</span></span>
<span data-ttu-id="c50a9-171">Service Fabric 也有助於安全 hello 資源所使用的應用程式中的 hello 使用者帳戶-部署的 hello 時段，例如、 檔案、 目錄和憑證。</span><span class="sxs-lookup"><span data-stu-id="c50a9-171">Service Fabric also helps secure hello resources that are used by applications at hello time of deployment under hello user accounts--for example, files, directories, and certificates.</span></span> <span data-ttu-id="c50a9-172">如此一來，即使在共用主控環境中，執行中的應用程式就不會彼此干擾。</span><span class="sxs-lookup"><span data-stu-id="c50a9-172">This makes running applications, even in a shared hosted environment, more secure from one another.</span></span>

-   <span data-ttu-id="c50a9-173">使用 Active Directory 網域群組或使用者： 您可以執行 Active Directory 使用者或群組帳戶的 hello 服務 hello 認證。</span><span class="sxs-lookup"><span data-stu-id="c50a9-173">Use an Active Directory domain group or user: You can run hello service under hello credentials for an Active Directory user or group account.</span></span> <span data-ttu-id="c50a9-174">這是在您網域內的內部部署 Active Directory，與 Azure Active Directory (Azure AD) 無關。</span><span class="sxs-lookup"><span data-stu-id="c50a9-174">This is Active Directory on-premises within your domain and is not with Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="c50a9-175">使用網域使用者或群組，然後您可以存取其他資源 （例如，檔案共用） 的 hello 網域中已授與權限。</span><span class="sxs-lookup"><span data-stu-id="c50a9-175">By using a domain user or group, you can then access other resources in hello domain (for example, file shares) that have been granted permissions.</span></span>

-   <span data-ttu-id="c50a9-176">指定 HTTP 和 HTTPS 端點的安全性存取原則： 如果您套用 RunAs 原則 tooa 服務 hello 服務資訊清單宣告使用 hello HTTP 通訊協定的端點資源，您必須指定連接埠配置 toothese SecurityAccessPolicy tooensure端點會正確地存取控制列 hello 服務執行的 RunAs 使用者帳戶。</span><span class="sxs-lookup"><span data-stu-id="c50a9-176">Assign a security access policy for HTTP and HTTPS endpoints: If you apply a RunAs policy tooa service and hello service manifest declares endpoint resources with hello HTTP protocol, you must specify a SecurityAccessPolicy tooensure that ports allocated toothese endpoints are correctly access-controlled listed for hello RunAs user account that hello service runs under.</span></span> <span data-ttu-id="c50a9-177">否則，http.sys 並沒有存取 toohello 服務，而失敗，將呼叫收到 hello 用戶端。</span><span class="sxs-lookup"><span data-stu-id="c50a9-177">Otherwise, http.sys does not have access toohello service, and you get failures with calls from hello client.</span></span>
<span data-ttu-id="c50a9-178">toolearn 更啟用服務網狀架構，請參閱 < 安全性原則[設定您的應用程式的安全性原則](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-runas-security)。</span><span class="sxs-lookup"><span data-stu-id="c50a9-178">toolearn more enable security policies in service fabric see, [configure security policies for your application](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-runas-security).</span></span>

## <a name="reliable-actors-security-configuration"></a><span data-ttu-id="c50a9-179">Reliable Actors 安全性設定</span><span class="sxs-lookup"><span data-stu-id="c50a9-179">Reliable Actors security configuration</span></span>
<span data-ttu-id="c50a9-180">服務網狀架構 Reliable Actors 是 hello 執行者設計模式的實作。</span><span class="sxs-lookup"><span data-stu-id="c50a9-180">Service Fabric Reliable Actors is an implementation of hello actor design pattern.</span></span> <span data-ttu-id="c50a9-181">如同任何軟體設計模式中，是否 toouse 特定的模式會根據軟體設計問題 hello 決策符合 hello 模式。</span><span class="sxs-lookup"><span data-stu-id="c50a9-181">As with any software design pattern, hello decision whether toouse a specific pattern is made based on whether or not a software design problem fits hello pattern.</span></span>

<span data-ttu-id="c50a9-182">做為一般的指導，請考慮 hello actor 模式 toomodel 您的問題或案例如果：</span><span class="sxs-lookup"><span data-stu-id="c50a9-182">As general guidance, consider hello actor pattern toomodel your problem or scenario if:</span></span>
-   <span data-ttu-id="c50a9-183">您的問題領域涉及大量 (數千個或更多) 小型、獨立且隔離的狀態和邏輯單位。</span><span class="sxs-lookup"><span data-stu-id="c50a9-183">Your problem space involves a large number (thousands or more) of small, independent, and isolated units of state and logic.</span></span>
-   <span data-ttu-id="c50a9-184">您想使用單一執行緒的物件不需要重大的互動，舉凡外部元件，包括跨的執行者集合查詢狀態 toowork。</span><span class="sxs-lookup"><span data-stu-id="c50a9-184">You want toowork with single-threaded objects that do not require significant interaction from external components, including querying state across a set of actors.</span></span>
-   <span data-ttu-id="c50a9-185">您的動作項目執行個體將不會藉由發出 I/O 作業，使用無法預期的延遲來封鎖呼叫端。</span><span class="sxs-lookup"><span data-stu-id="c50a9-185">Your actor instances won't block callers with unpredictable delays by issuing I/O operations.</span></span>

<span data-ttu-id="c50a9-186">在 Service Fabric 動作項目會實作在 hello Reliable Actors framework： 動作項目模式的應用程式架構之上[Service Fabric 可靠服務](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction)。</span><span class="sxs-lookup"><span data-stu-id="c50a9-186">In Service Fabric, actors are implemented in hello Reliable Actors framework: An actor-pattern-based application framework built on top of [Service Fabric Reliable Services](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction).</span></span> <span data-ttu-id="c50a9-187">您撰寫的每個 Reliable Actor 服務實際上都是已資料分割的具狀態可靠服務。</span><span class="sxs-lookup"><span data-stu-id="c50a9-187">Each Reliable Actor service you write is actually a partitioned, stateful Reliable Service.</span></span>
<span data-ttu-id="c50a9-188">每個動作項目定義為動作項目類型的執行個體，相同 toohello 方式.NET 物件的.NET 型別執行個體。</span><span class="sxs-lookup"><span data-stu-id="c50a9-188">Every actor is defined as an instance of an actor type, identical toohello way a .NET object is an instance of a .NET type.</span></span> <span data-ttu-id="c50a9-189">例如，可能實作計算機 hello 功能動作項目類型，可能是該類型的不同節點分散叢集的許多參與者。</span><span class="sxs-lookup"><span data-stu-id="c50a9-189">For example, there may be an actor type that implements hello functionality of a calculator and there could be many actors of that type that are distributed on various nodes across a cluster.</span></span> <span data-ttu-id="c50a9-190">每一個這類的動作項目都有唯一的動作項目識別碼識別。</span><span class="sxs-lookup"><span data-stu-id="c50a9-190">Each such actor is uniquely identified by an actor ID.</span></span>

<span data-ttu-id="c50a9-191">[複寫器的安全性組態](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-actors-kvsactorstateprovider-configuration)會用在複寫期間使用的 toosecure hello 通訊通道。</span><span class="sxs-lookup"><span data-stu-id="c50a9-191">[Replicator security configurations](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-actors-kvsactorstateprovider-configuration) are used toosecure hello communication channel that is used during replication.</span></span> <span data-ttu-id="c50a9-192">這表示服務無法看到彼此的複寫流量，確保 hello 資料，則高可用性的安全。</span><span class="sxs-lookup"><span data-stu-id="c50a9-192">This means that services cannot see each other's replication traffic, ensuring that hello data that is made highly available is also secure.</span></span> <span data-ttu-id="c50a9-193">依預設，空白的安全性組態區段會妨礙複寫安全性。</span><span class="sxs-lookup"><span data-stu-id="c50a9-193">By default, an empty security configuration section prevents replication security.</span></span>
<span data-ttu-id="c50a9-194">複寫器的組態設定，負責建立 hello 動作項目狀態提供者狀態可靠 hello 複寫器。</span><span class="sxs-lookup"><span data-stu-id="c50a9-194">Replicator configurations configure hello replicator that is responsible for making hello Actor State Provider state highly reliable.</span></span>

## <a name="configure-ssl-for-azure-service-fabric"></a><span data-ttu-id="c50a9-195">設定 Azure Service Fabric 的 SSL</span><span class="sxs-lookup"><span data-stu-id="c50a9-195">Configure SSL for Azure Service Fabric</span></span>

<span data-ttu-id="c50a9-196">伺服器驗證： [Authenticates](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm) hello 叢集管理端點 tooa 管理用戶端，以便 hello 管理用戶端會知道它正在交涉 toohello 實際叢集。</span><span class="sxs-lookup"><span data-stu-id="c50a9-196">Server authentication: [Authenticates](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm) hello cluster management endpoints tooa management client, so that hello management client knows it is talking toohello real cluster.</span></span> <span data-ttu-id="c50a9-197">此憑證也會提供[SSL](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-cluster-creation-via-arm) hello HTTPS 管理 API 和透過 HTTPS 的 Service Fabric 總管。</span><span class="sxs-lookup"><span data-stu-id="c50a9-197">This certificate also provides an [SSL](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-cluster-creation-via-arm) for hello HTTPS management API and for Service Fabric Explorer over HTTPS.</span></span>
<span data-ttu-id="c50a9-198">您必須為您的叢集取得自訂網域名稱。</span><span class="sxs-lookup"><span data-stu-id="c50a9-198">You must obtain a custom domain name for your cluster.</span></span> <span data-ttu-id="c50a9-199">當您從 CA 要求憑證時，hello 憑證的主體名稱必須符合 hello 自訂網域名稱用於您的叢集。</span><span class="sxs-lookup"><span data-stu-id="c50a9-199">When you request a certificate from a CA, hello certificate's subject name must match hello custom domain name that you use for your cluster.</span></span>

<span data-ttu-id="c50a9-200">tooconfigure SSL 應用程式，您必須先 tooget 已簽署的憑證授權單位 (CA)，受信任的協力廠商簽發憑證，針對此用途的 SSL 憑證。</span><span class="sxs-lookup"><span data-stu-id="c50a9-200">tooconfigure SSL for an application, you first need tooget an SSL certificate that has been signed by a Certificate Authority (CA), a trusted third party who issues certificates for this purpose.</span></span> <span data-ttu-id="c50a9-201">如果您還沒有其中一個，您會需要公司銷售的 SSL 憑證的其中一個 tooobtain。</span><span class="sxs-lookup"><span data-stu-id="c50a9-201">If you do not already have one, you need tooobtain one from a company that sells SSL certificates.</span></span>

<span data-ttu-id="c50a9-202">hello 憑證必須符合下列需求的 SSL 憑證在 Azure 中的 hello:</span><span class="sxs-lookup"><span data-stu-id="c50a9-202">hello certificate must meet hello following requirements for SSL certificates in Azure:</span></span>
-   <span data-ttu-id="c50a9-203">hello 憑證必須包含私密金鑰。</span><span class="sxs-lookup"><span data-stu-id="c50a9-203">hello certificate must contain a private key.</span></span>
-   <span data-ttu-id="c50a9-204">金鑰交換，可匯出 tooa 個人資訊交換 (.pfx) 檔案，就必須建立 hello 憑證。</span><span class="sxs-lookup"><span data-stu-id="c50a9-204">hello certificate must be created for key exchange, exportable tooa Personal Information Exchange (.pfx) file.</span></span>
-   <span data-ttu-id="c50a9-205">hello 憑證的主體名稱必須符合 hello 用網域 tooaccess hello 雲端服務。</span><span class="sxs-lookup"><span data-stu-id="c50a9-205">hello certificate's subject name must match hello domain used tooaccess hello cloud service.</span></span> <span data-ttu-id="c50a9-206">您無法從 hello cloudapp.net 網域的憑證授權單位 (CA) 取得 SSL 憑證。</span><span class="sxs-lookup"><span data-stu-id="c50a9-206">You cannot obtain an SSL certificate from a certificate authority (CA) for hello cloudapp.net domain.</span></span> <span data-ttu-id="c50a9-207">您必須取得的自訂網域名稱 toouse 時存取您的服務。</span><span class="sxs-lookup"><span data-stu-id="c50a9-207">You must acquire a custom domain name toouse when access your service.</span></span> <span data-ttu-id="c50a9-208">當您從 CA 要求憑證時，hello 憑證的主體名稱必須符合 hello 自訂網域名稱使用 tooaccess 您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="c50a9-208">When you request a certificate from a CA, hello certificate's subject name must match hello custom domain name used tooaccess your application.</span></span> <span data-ttu-id="c50a9-209">例如，如果您的自訂網域名稱為 contoso.com，則您需向 CA 要求 **.contoso.com** 或 **www.contoso.com.** 憑證。</span><span class="sxs-lookup"><span data-stu-id="c50a9-209">For example, if your custom domain name is contoso.com you would request a certificate from your CA for **.contoso.com** or **www.contoso.com.**</span></span>
-   <span data-ttu-id="c50a9-210">hello 憑證必須使用至少 2048年位元加密。</span><span class="sxs-lookup"><span data-stu-id="c50a9-210">hello certificate must use a minimum of 2048-bit encryption.</span></span>

<span data-ttu-id="c50a9-211">HTTP 是不安全，並且很主旨 tooeavesdropping 攻擊，因為 hello hello web 瀏覽器 toohello web 伺服器或其他端點之間傳送的資料會以純文字傳送。</span><span class="sxs-lookup"><span data-stu-id="c50a9-211">HTTP is insecure and is subject tooeavesdropping attacks because hello data being transferred from hello web browser toohello web server or between other endpoints, is transmitted in plaintext.</span></span> <span data-ttu-id="c50a9-212">這表示攻擊者可以攔截並檢視敏感性資料，例如信用卡詳細資料和帳戶登入。</span><span class="sxs-lookup"><span data-stu-id="c50a9-212">This means attackers can intercept and view sensitive data, such as credit card details and account logins.</span></span> <span data-ttu-id="c50a9-213">當資料使用 HTTPS 透過瀏覽器傳送或張貼時，SSL 可確保這類資訊經過加密及保護以避免遭到攔截。</span><span class="sxs-lookup"><span data-stu-id="c50a9-213">When data is sent or posted through a browser using HTTPS, SSL ensures that such information is encrypted and secure from interception.</span></span>

<span data-ttu-id="c50a9-214">詳細資訊，請參閱 toolearn，[設定 azure 應用程式的 SSL](https://docs.microsoft.com/azure/cloud-services/cloud-services-configure-ssl-certificate)。</span><span class="sxs-lookup"><span data-stu-id="c50a9-214">toolearn more, see, [Configure SSL for azure application](https://docs.microsoft.com/azure/cloud-services/cloud-services-configure-ssl-certificate).</span></span>

## <a name="network-isolationsecurity-with-azure-service-fabric"></a><span data-ttu-id="c50a9-215">Azure Service Fabric 的網路隔離/安全性</span><span class="sxs-lookup"><span data-stu-id="c50a9-215">Network Isolation/Security with Azure Service Fabric</span></span>
<span data-ttu-id="c50a9-216">使用[Azure 資源管理員 (ARM) 範本](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-authoring-templates)設定三個節點類型的範例為安全的叢集和 toocontrol hello 傳入和傳出網路流量使用網路安全性群組。</span><span class="sxs-lookup"><span data-stu-id="c50a9-216">Use [Azure Resource Manager (ARM) template](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-authoring-templates) as a sample for setting up a three nodetype secure cluster and toocontrol hello inbound and outbound network traffic using Network Security Groups.</span></span>

<span data-ttu-id="c50a9-217">hello 範本具有每 hello 虛擬機器規模 set(VMSS) toocontrol hello 流量進出 hello VMSS 網路安全性群組。</span><span class="sxs-lookup"><span data-stu-id="c50a9-217">hello template has a Network Security Group for each of hello virtual machine scale set(VMSS) toocontrol hello traffic in and out of hello VMSS.</span></span> <span data-ttu-id="c50a9-218">做為預設值，hello 規則會設定所有 hello 流量所需的 tooallow hello 系統服務與 hello 應用程式連接埠 hello 範本中指定。</span><span class="sxs-lookup"><span data-stu-id="c50a9-218">As a default, hello rules are set up tooallow all hello traffic needed by hello system services and hello application ports specified in hello template.</span></span> <span data-ttu-id="c50a9-219">檢閱這些規則並進行變更 toofit 您的需求，包括加入任何新的應用程式。</span><span class="sxs-lookup"><span data-stu-id="c50a9-219">Review those rules and make changes toofit your needs, including add any new ones for your applications.</span></span>

<span data-ttu-id="c50a9-220">如需詳細資訊，請參閱 [Azure Service Fabric - 常見網路案例](https://docs.microsoft.com/azure/service-fabric/service-fabric-patterns-networking)。</span><span class="sxs-lookup"><span data-stu-id="c50a9-220">For more information, see [Azure Service Fabric – Common Networking Scenarios](https://docs.microsoft.com/azure/service-fabric/service-fabric-patterns-networking).</span></span>

## <a name="set-up-a-key-vault-for-security"></a><span data-ttu-id="c50a9-221">設定金鑰保存庫以提供安全性</span><span class="sxs-lookup"><span data-stu-id="c50a9-221">Set up a key vault for security</span></span>
<span data-ttu-id="c50a9-222">憑證用於 Service Fabric tooprovide 驗證和加密 toosecure 叢集，而它的應用程式的各個層面。</span><span class="sxs-lookup"><span data-stu-id="c50a9-222">Certificates are used in Service Fabric tooprovide authentication and encryption toosecure various aspects of a cluster and its applications.</span></span>

<span data-ttu-id="c50a9-223">服務網狀架構會使用 X.509 憑證 toosecure 叢集，並提供應用程式的安全性功能。</span><span class="sxs-lookup"><span data-stu-id="c50a9-223">Service Fabric uses X.509 certificates toosecure a cluster and provide application security features.</span></span> <span data-ttu-id="c50a9-224">您也使用金鑰保存庫[管理憑證](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-update-certs-azure)在 Azure 中的 Service Fabric 叢集。</span><span class="sxs-lookup"><span data-stu-id="c50a9-224">You use Key Vault too[manage certificates](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-update-certs-azure) for Service Fabric clusters in Azure.</span></span> <span data-ttu-id="c50a9-225">在 Azure 中部署叢集時，會負責建立 Service Fabric 叢集的 hello Azure 資源提供者就會從金鑰保存庫提取憑證，並 hello 叢集 Vm 上進行安裝。</span><span class="sxs-lookup"><span data-stu-id="c50a9-225">When a cluster is deployed in Azure, hello Azure resource provider that's responsible for creating Service Fabric clusters pulls certificates from Key Vault and installs them on hello cluster VMs.</span></span>

<span data-ttu-id="c50a9-226">hello 之間的關聯性[Azure 金鑰保存庫](https://docs.microsoft.com/azure/key-vault/key-vault-secure-your-key-vault)、 service fabric 叢集，並使用憑證時它會建立叢集儲存在金鑰保存庫中的 hello Azure 資源提供者。</span><span class="sxs-lookup"><span data-stu-id="c50a9-226">hello relationship between [Azure Key Vault](https://docs.microsoft.com/azure/key-vault/key-vault-secure-your-key-vault), a service fabric cluster, and hello Azure resource provider that uses certificates stored in a key vault when it creates a cluster.</span></span>

<span data-ttu-id="c50a9-227">**建立資源群組**hello 第一個步驟是 toocreate 特別針對金鑰保存庫的資源群組。</span><span class="sxs-lookup"><span data-stu-id="c50a9-227">**Create a resource group** hello first step is toocreate a resource group specifically for your key vault.</span></span> <span data-ttu-id="c50a9-228">我們建議您將 hello 金鑰保存庫放入自己的資源群組。</span><span class="sxs-lookup"><span data-stu-id="c50a9-228">We recommend that you put hello key vault into its own resource group.</span></span> <span data-ttu-id="c50a9-229">這個動作可讓您移除 hello 運算和存放裝置資源群組，包括 hello 資源群組包含 Service Fabric 叢集，而不會遺失您的金鑰和密碼。</span><span class="sxs-lookup"><span data-stu-id="c50a9-229">This action lets you remove hello compute and storage resource groups, including hello resource group that contains your Service Fabric cluster, without losing your keys and secrets.</span></span> <span data-ttu-id="c50a9-230">包含金鑰保存庫中的 hello 資源群組必須在 hello 與正在使用它的 hello 叢集相同的區域。</span><span class="sxs-lookup"><span data-stu-id="c50a9-230">hello resource group that contains your key vault must be in hello same region as hello cluster that is using it.</span></span>

<span data-ttu-id="c50a9-231">**在 hello 新資源群組中建立金鑰保存庫**部署 tooallow hello 計算資源提供者從它的 tooget 憑證，並將它安裝在虛擬機器執行個體，就必須啟用 hello 金鑰保存庫。</span><span class="sxs-lookup"><span data-stu-id="c50a9-231">**Create a key vault in hello new resource group** hello key vault must be enabled for deployment tooallow hello compute resource provider tooget certificates from it and install it on virtual machine instances.</span></span>
<span data-ttu-id="c50a9-232">更多如何查看 tooset Azure 金鑰保存庫註冊，toolearn[開始使用 Azure 金鑰保存庫](https://docs.microsoft.com/azure/key-vault/key-vault-get-started)。</span><span class="sxs-lookup"><span data-stu-id="c50a9-232">toolearn more how tooset up Azure key vault see, [Get started with Azure Key Vault](https://docs.microsoft.com/azure/key-vault/key-vault-get-started).</span></span>

## <a name="assign-users-roles"></a><span data-ttu-id="c50a9-233">對使用者指派角色</span><span class="sxs-lookup"><span data-stu-id="c50a9-233">Assign users roles</span></span>
<span data-ttu-id="c50a9-234">您已建立 hello 應用程式 toorepresent 您的叢集之後，您的使用者 toohello 將角色指派支援的 Service Fabric： 唯讀和系統管理員。您可以使用 hello Azure 傳統入口網站來指派 hello 角色。</span><span class="sxs-lookup"><span data-stu-id="c50a9-234">After you have created hello applications toorepresent your cluster, assign your users toohello roles supported by Service Fabric: read-only and admin. You can assign hello roles by using hello Azure classic portal.</span></span>

>[!Note]
> <span data-ttu-id="c50a9-235">如需 Service Fabric 中角色的詳細資訊，請參閱 [角色型存取控制 (適用於 Service Fabric 用戶端)](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-roles)。</span><span class="sxs-lookup"><span data-stu-id="c50a9-235">For more information about roles in Service Fabric, see [Role-based access control for Service Fabric clients](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-roles).</span></span>

<span data-ttu-id="c50a9-236">Azure Service Fabric 支援兩種不同的存取控制類型的用戶端的連線的 tooa [Service Fabric 叢集](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm)： 系統管理員和使用者。</span><span class="sxs-lookup"><span data-stu-id="c50a9-236">Azure Service Fabric supports two different access control types for clients that are connected tooa [Service Fabric cluster](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm): administrator and user.</span></span> <span data-ttu-id="c50a9-237">存取控制可讓 hello 叢集系統管理員 toolimit 存取 toocertain 叢集作業會針對不同使用者群組，讓 hello 叢集更安全。</span><span class="sxs-lookup"><span data-stu-id="c50a9-237">Access control allows hello cluster administrator toolimit access toocertain cluster operations for different groups of users, making hello cluster more secure.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c50a9-238">後續步驟</span><span class="sxs-lookup"><span data-stu-id="c50a9-238">Next steps</span></span>
- <span data-ttu-id="c50a9-239">設定 Service Fabric [開發環境](https://docs.microsoft.com/azure/service-fabric/service-fabric-get-started)。</span><span class="sxs-lookup"><span data-stu-id="c50a9-239">Setting up your Service Fabric [development environment](https://docs.microsoft.com/azure/service-fabric/service-fabric-get-started).</span></span>
- <span data-ttu-id="c50a9-240">了解 [Service Fabric 支援選項](https://docs.microsoft.com/azure/service-fabric/service-fabric-support)。</span><span class="sxs-lookup"><span data-stu-id="c50a9-240">Learn about [Service Fabric support options](https://docs.microsoft.com/azure/service-fabric/service-fabric-support).</span></span>

