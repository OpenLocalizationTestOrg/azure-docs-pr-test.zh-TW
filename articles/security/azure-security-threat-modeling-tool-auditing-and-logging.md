---
title: "aaaAuditing 和記錄-Microsoft 威脅模型化工具-Azure |Microsoft 文件"
description: "hello 威脅模型化工具中公開的威脅防護功能"
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: f28988833eba251b6ceb8bbd47cde37e871af609
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="security-frame-auditing-and-logging--mitigations"></a><span data-ttu-id="4e23d-103">安全框架︰稽核和記錄 | 緩和措施</span><span class="sxs-lookup"><span data-stu-id="4e23d-103">Security Frame: Auditing and Logging | Mitigations</span></span> 
| <span data-ttu-id="4e23d-104">產品/服務</span><span class="sxs-lookup"><span data-stu-id="4e23d-104">Product/Service</span></span> | <span data-ttu-id="4e23d-105">文章</span><span class="sxs-lookup"><span data-stu-id="4e23d-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="4e23d-106">**Dynamics CRM**</span><span class="sxs-lookup"><span data-stu-id="4e23d-106">**Dynamics CRM**</span></span>    | <ul><li>[<span data-ttu-id="4e23d-107">在您的解決方案中識別敏感性實體及實作變更稽核</span><span class="sxs-lookup"><span data-stu-id="4e23d-107">Identify sensitive entities in your solution and implement change auditing</span></span>](#sensitive-entities)</li></ul> |
| <span data-ttu-id="4e23d-108">**Web 應用程式**</span><span class="sxs-lookup"><span data-stu-id="4e23d-108">**Web Application**</span></span> | <ul><li>[<span data-ttu-id="4e23d-109">確保稽核和記錄會強制執行 hello 應用程式</span><span class="sxs-lookup"><span data-stu-id="4e23d-109">Ensure that auditing and logging is enforced on hello application</span></span>](#auditing)</li><li>[<span data-ttu-id="4e23d-110">確保施行記錄輪替和區隔功能</span><span class="sxs-lookup"><span data-stu-id="4e23d-110">Ensure that log rotation and separation are in place</span></span>](#log-rotation)</li><li>[<span data-ttu-id="4e23d-111">請確定 hello 應用程式不會記錄敏感的使用者資料</span><span class="sxs-lookup"><span data-stu-id="4e23d-111">Ensure that hello application does not log sensitive user data</span></span>](#log-sensitive-data)</li><li>[<span data-ttu-id="4e23d-112">確保稽核和記錄檔有限制存取</span><span class="sxs-lookup"><span data-stu-id="4e23d-112">Ensure that Audit and Log Files have Restricted Access</span></span>](#log-restricted-access)</li><li>[<span data-ttu-id="4e23d-113">確保已記錄使用者管理事件</span><span class="sxs-lookup"><span data-stu-id="4e23d-113">Ensure that User Management Events are Logged</span></span>](#user-management)</li><li>[<span data-ttu-id="4e23d-114">請確認 hello 系統具有內建的防禦不當使用</span><span class="sxs-lookup"><span data-stu-id="4e23d-114">Ensure that hello system has inbuilt defenses against misuse</span></span>](#inbuilt-defenses)</li><li>[<span data-ttu-id="4e23d-115">在 Azure App Service 中針對 Web 應用程式啟用診斷記錄功能</span><span class="sxs-lookup"><span data-stu-id="4e23d-115">Enable diagnostics logging for web apps in Azure App Service</span></span>](#diagnostics-logging)</li></ul> |
| <span data-ttu-id="4e23d-116">**資料庫**</span><span class="sxs-lookup"><span data-stu-id="4e23d-116">**Database**</span></span> | <ul><li>[<span data-ttu-id="4e23d-117">確保已在 SQL Server 上啟用登入稽核功能</span><span class="sxs-lookup"><span data-stu-id="4e23d-117">Ensure that login auditing is enabled on SQL Server</span></span>](#identify-sensitive-entities)</li><li>[<span data-ttu-id="4e23d-118">在 Azure SQL 上啟用威脅偵測功能</span><span class="sxs-lookup"><span data-stu-id="4e23d-118">Enable Threat detection on Azure SQL</span></span>](#threat-detection)</li></ul> |
| <span data-ttu-id="4e23d-119">**Azure 儲存體**</span><span class="sxs-lookup"><span data-stu-id="4e23d-119">**Azure Storage**</span></span> | <ul><li>[<span data-ttu-id="4e23d-120">使用 Azure 儲存體的 Azure 儲存體分析 tooaudit 存取</span><span class="sxs-lookup"><span data-stu-id="4e23d-120">Use Azure Storage Analytics tooaudit access of Azure Storage</span></span>](#analytics)</li></ul> |
| <span data-ttu-id="4e23d-121">**WCF**</span><span class="sxs-lookup"><span data-stu-id="4e23d-121">**WCF**</span></span> | <ul><li>[<span data-ttu-id="4e23d-122">實作足夠的記錄</span><span class="sxs-lookup"><span data-stu-id="4e23d-122">Implement sufficient Logging</span></span>](#sufficient-logging)</li><li>[<span data-ttu-id="4e23d-123">實作足夠的稽核失敗處理</span><span class="sxs-lookup"><span data-stu-id="4e23d-123">Implement sufficient Audit Failure Handling</span></span>](#audit-failure-handling)</li></ul> |
| <span data-ttu-id="4e23d-124">**Web API**</span><span class="sxs-lookup"><span data-stu-id="4e23d-124">**Web API**</span></span> | <ul><li>[<span data-ttu-id="4e23d-125">確保在 Web API 上強制執行稽核和記錄功能</span><span class="sxs-lookup"><span data-stu-id="4e23d-125">Ensure that auditing and logging is enforced on Web API</span></span>](#logging-web-api)</li></ul> |
| <span data-ttu-id="4e23d-126">**IoT 現場閘道**</span><span class="sxs-lookup"><span data-stu-id="4e23d-126">**IoT Field Gateway**</span></span> | <ul><li>[<span data-ttu-id="4e23d-127">確保在現場閘道上強制執行適當的稽核和記錄功能</span><span class="sxs-lookup"><span data-stu-id="4e23d-127">Ensure that appropriate auditing and logging is enforced on Field Gateway</span></span>](#logging-field-gateway)</li></ul> |
| <span data-ttu-id="4e23d-128">**IoT 雲端閘道**</span><span class="sxs-lookup"><span data-stu-id="4e23d-128">**IoT Cloud Gateway**</span></span> | <ul><li>[<span data-ttu-id="4e23d-129">確保在雲端閘道上強制執行適當的稽核和記錄功能</span><span class="sxs-lookup"><span data-stu-id="4e23d-129">Ensure that appropriate auditing and logging is enforced on Cloud Gateway</span></span>](#logging-cloud-gateway)</li></ul> |

## <span data-ttu-id="4e23d-130"><a id="sensitive-entities"></a>在您的解決方案中識別敏感性實體及實作變更稽核</span><span class="sxs-lookup"><span data-stu-id="4e23d-130"><a id="sensitive-entities"></a>Identify sensitive entities in your solution and implement change auditing</span></span>

| <span data-ttu-id="4e23d-131">Title</span><span class="sxs-lookup"><span data-stu-id="4e23d-131">Title</span></span>                   | <span data-ttu-id="4e23d-132">詳細資料</span><span class="sxs-lookup"><span data-stu-id="4e23d-132">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4e23d-133">**元件**</span><span class="sxs-lookup"><span data-stu-id="4e23d-133">**Component**</span></span>               | <span data-ttu-id="4e23d-134">Dynamics CRM</span><span class="sxs-lookup"><span data-stu-id="4e23d-134">Dynamics CRM</span></span> | 
| <span data-ttu-id="4e23d-135">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="4e23d-135">**SDL Phase**</span></span>               | <span data-ttu-id="4e23d-136">建置</span><span class="sxs-lookup"><span data-stu-id="4e23d-136">Build</span></span> |  
| <span data-ttu-id="4e23d-137">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="4e23d-137">**Applicable Technologies**</span></span> | <span data-ttu-id="4e23d-138">泛型</span><span class="sxs-lookup"><span data-stu-id="4e23d-138">Generic</span></span> |
| <span data-ttu-id="4e23d-139">**屬性**</span><span class="sxs-lookup"><span data-stu-id="4e23d-139">**Attributes**</span></span>              | <span data-ttu-id="4e23d-140">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-140">N/A</span></span>  |
| <span data-ttu-id="4e23d-141">**參考**</span><span class="sxs-lookup"><span data-stu-id="4e23d-141">**References**</span></span>              | <span data-ttu-id="4e23d-142">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-142">N/A</span></span>  |
| <span data-ttu-id="4e23d-143">**步驟**</span><span class="sxs-lookup"><span data-stu-id="4e23d-143">**Steps**</span></span>                   | <span data-ttu-id="4e23d-144">識別您的解決方案中包含敏感性資料的實體，以及在這些實體和現場實作變更稽核</span><span class="sxs-lookup"><span data-stu-id="4e23d-144">Identify entities in your solution containing sensitive data and implement change auditing on those entities and fields</span></span> |

## <span data-ttu-id="4e23d-145"><a id="auditing"></a>確保稽核和記錄會強制執行 hello 應用程式</span><span class="sxs-lookup"><span data-stu-id="4e23d-145"><a id="auditing"></a>Ensure that auditing and logging is enforced on hello application</span></span>

| <span data-ttu-id="4e23d-146">Title</span><span class="sxs-lookup"><span data-stu-id="4e23d-146">Title</span></span>                   | <span data-ttu-id="4e23d-147">詳細資料</span><span class="sxs-lookup"><span data-stu-id="4e23d-147">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4e23d-148">**元件**</span><span class="sxs-lookup"><span data-stu-id="4e23d-148">**Component**</span></span>               | <span data-ttu-id="4e23d-149">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="4e23d-149">Web Application</span></span> | 
| <span data-ttu-id="4e23d-150">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="4e23d-150">**SDL Phase**</span></span>               | <span data-ttu-id="4e23d-151">建置</span><span class="sxs-lookup"><span data-stu-id="4e23d-151">Build</span></span> |  
| <span data-ttu-id="4e23d-152">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="4e23d-152">**Applicable Technologies**</span></span> | <span data-ttu-id="4e23d-153">泛型</span><span class="sxs-lookup"><span data-stu-id="4e23d-153">Generic</span></span> |
| <span data-ttu-id="4e23d-154">**屬性**</span><span class="sxs-lookup"><span data-stu-id="4e23d-154">**Attributes**</span></span>              | <span data-ttu-id="4e23d-155">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-155">N/A</span></span>  |
| <span data-ttu-id="4e23d-156">**參考**</span><span class="sxs-lookup"><span data-stu-id="4e23d-156">**References**</span></span>              | <span data-ttu-id="4e23d-157">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-157">N/A</span></span>  |
| <span data-ttu-id="4e23d-158">**步驟**</span><span class="sxs-lookup"><span data-stu-id="4e23d-158">**Steps**</span></span>                   | <span data-ttu-id="4e23d-159">在所有元件上啟用稽核和記錄。</span><span class="sxs-lookup"><span data-stu-id="4e23d-159">Enable auditing and logging on all components.</span></span> <span data-ttu-id="4e23d-160">稽核記錄檔應擷取使用者內容。</span><span class="sxs-lookup"><span data-stu-id="4e23d-160">Audit logs should capture user context.</span></span> <span data-ttu-id="4e23d-161">識別所有重要的事件及記錄這些事件。</span><span class="sxs-lookup"><span data-stu-id="4e23d-161">Identify all important events and log those events.</span></span> <span data-ttu-id="4e23d-162">實作集中式記錄</span><span class="sxs-lookup"><span data-stu-id="4e23d-162">Implement centralized logging</span></span> |

## <span data-ttu-id="4e23d-163"><a id="log-rotation"></a>確保施行記錄輪替和區隔功能</span><span class="sxs-lookup"><span data-stu-id="4e23d-163"><a id="log-rotation"></a>Ensure that log rotation and separation are in place</span></span>

| <span data-ttu-id="4e23d-164">Title</span><span class="sxs-lookup"><span data-stu-id="4e23d-164">Title</span></span>                   | <span data-ttu-id="4e23d-165">詳細資料</span><span class="sxs-lookup"><span data-stu-id="4e23d-165">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4e23d-166">**元件**</span><span class="sxs-lookup"><span data-stu-id="4e23d-166">**Component**</span></span>               | <span data-ttu-id="4e23d-167">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="4e23d-167">Web Application</span></span> | 
| <span data-ttu-id="4e23d-168">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="4e23d-168">**SDL Phase**</span></span>               | <span data-ttu-id="4e23d-169">建置</span><span class="sxs-lookup"><span data-stu-id="4e23d-169">Build</span></span> |  
| <span data-ttu-id="4e23d-170">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="4e23d-170">**Applicable Technologies**</span></span> | <span data-ttu-id="4e23d-171">泛型</span><span class="sxs-lookup"><span data-stu-id="4e23d-171">Generic</span></span> |
| <span data-ttu-id="4e23d-172">**屬性**</span><span class="sxs-lookup"><span data-stu-id="4e23d-172">**Attributes**</span></span>              | <span data-ttu-id="4e23d-173">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-173">N/A</span></span>  |
| <span data-ttu-id="4e23d-174">**參考**</span><span class="sxs-lookup"><span data-stu-id="4e23d-174">**References**</span></span>              | <span data-ttu-id="4e23d-175">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-175">N/A</span></span>  |
| <span data-ttu-id="4e23d-176">**步驟**</span><span class="sxs-lookup"><span data-stu-id="4e23d-176">**Steps**</span></span>                   | <p><span data-ttu-id="4e23d-177">記錄輪替是一個自動化程序，使用於封存過時記錄檔的系統管理作業中。</span><span class="sxs-lookup"><span data-stu-id="4e23d-177">Log rotation is an automated process used in system administration in which dated log files are archived.</span></span> <span data-ttu-id="4e23d-178">經常執行的大型應用程式伺服器會記錄每一個要求： 在 hello 表面之過於笨重的記錄檔，記錄檔輪替是方式 toolimit hello hello 記錄檔的大小總計同時，仍允許的最新事件的分析。</span><span class="sxs-lookup"><span data-stu-id="4e23d-178">Servers which run large applications often log every request: in hello face of bulky logs, log rotation is a way toolimit hello total size of hello logs while still allowing analysis of recent events.</span></span> </p><p><span data-ttu-id="4e23d-179">記錄區隔基本上表示您需要的 toostore 記錄檔存放於不同的磁碟分割為 OS/應用程式執行所在中順序 tooavert 阻絕服務攻擊，或 hello 降級應用程式的效能</span><span class="sxs-lookup"><span data-stu-id="4e23d-179">Log separation basically means that you have toostore your log files on a different partition as where your OS/application is running on in order tooavert a Denial of service attack or hello downgrading of your application its performance</span></span></p>|

## <span data-ttu-id="4e23d-180"><a id="log-sensitive-data"></a>請確定 hello 應用程式不會記錄敏感的使用者資料</span><span class="sxs-lookup"><span data-stu-id="4e23d-180"><a id="log-sensitive-data"></a>Ensure that hello application does not log sensitive user data</span></span>

| <span data-ttu-id="4e23d-181">Title</span><span class="sxs-lookup"><span data-stu-id="4e23d-181">Title</span></span>                   | <span data-ttu-id="4e23d-182">詳細資料</span><span class="sxs-lookup"><span data-stu-id="4e23d-182">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4e23d-183">**元件**</span><span class="sxs-lookup"><span data-stu-id="4e23d-183">**Component**</span></span>               | <span data-ttu-id="4e23d-184">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="4e23d-184">Web Application</span></span> | 
| <span data-ttu-id="4e23d-185">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="4e23d-185">**SDL Phase**</span></span>               | <span data-ttu-id="4e23d-186">建置</span><span class="sxs-lookup"><span data-stu-id="4e23d-186">Build</span></span> |  
| <span data-ttu-id="4e23d-187">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="4e23d-187">**Applicable Technologies**</span></span> | <span data-ttu-id="4e23d-188">泛型</span><span class="sxs-lookup"><span data-stu-id="4e23d-188">Generic</span></span> |
| <span data-ttu-id="4e23d-189">**屬性**</span><span class="sxs-lookup"><span data-stu-id="4e23d-189">**Attributes**</span></span>              | <span data-ttu-id="4e23d-190">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-190">N/A</span></span>  |
| <span data-ttu-id="4e23d-191">**參考**</span><span class="sxs-lookup"><span data-stu-id="4e23d-191">**References**</span></span>              | <span data-ttu-id="4e23d-192">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-192">N/A</span></span>  |
| <span data-ttu-id="4e23d-193">**步驟**</span><span class="sxs-lookup"><span data-stu-id="4e23d-193">**Steps**</span></span>                   | <p><span data-ttu-id="4e23d-194">請檢查您不要登在使用者送出 tooyour 站台的任何機密資料。</span><span class="sxs-lookup"><span data-stu-id="4e23d-194">Check that you do not log any sensitive data that a user submits tooyour site.</span></span> <span data-ttu-id="4e23d-195">檢查刻意的記錄，以及設計問題所造成的副作用。</span><span class="sxs-lookup"><span data-stu-id="4e23d-195">Check for intentional logging as well as side effects caused by design issues.</span></span> <span data-ttu-id="4e23d-196">敏感性資料的範例包括︰</span><span class="sxs-lookup"><span data-stu-id="4e23d-196">Examples of sensitive data include:</span></span></p><ul><li><span data-ttu-id="4e23d-197">使用者認證</span><span class="sxs-lookup"><span data-stu-id="4e23d-197">User Credentials</span></span></li><li><span data-ttu-id="4e23d-198">社會安全號碼或其他識別資訊</span><span class="sxs-lookup"><span data-stu-id="4e23d-198">Social Security number or other identifying information</span></span></li><li><span data-ttu-id="4e23d-199">信用卡號碼或其他財務資訊</span><span class="sxs-lookup"><span data-stu-id="4e23d-199">Credit card numbers or other financial information</span></span></li><li><span data-ttu-id="4e23d-200">健康狀態資訊</span><span class="sxs-lookup"><span data-stu-id="4e23d-200">Health information</span></span></li><li><span data-ttu-id="4e23d-201">私用金鑰或其他可能使用的 toodecrypt 加密資訊的資料</span><span class="sxs-lookup"><span data-stu-id="4e23d-201">Private keys or other data that could be used toodecrypt encrypted information</span></span></li><li><span data-ttu-id="4e23d-202">可用的系統或應用程式資訊 toomore 有效攻擊 hello 應用程式</span><span class="sxs-lookup"><span data-stu-id="4e23d-202">System or application information that can be used toomore effectively attack hello application</span></span></li></ul>|

## <span data-ttu-id="4e23d-203"><a id="log-restricted-access"></a>確保稽核和記錄檔有限制存取</span><span class="sxs-lookup"><span data-stu-id="4e23d-203"><a id="log-restricted-access"></a>Ensure that Audit and Log Files have Restricted Access</span></span>

| <span data-ttu-id="4e23d-204">Title</span><span class="sxs-lookup"><span data-stu-id="4e23d-204">Title</span></span>                   | <span data-ttu-id="4e23d-205">詳細資料</span><span class="sxs-lookup"><span data-stu-id="4e23d-205">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4e23d-206">**元件**</span><span class="sxs-lookup"><span data-stu-id="4e23d-206">**Component**</span></span>               | <span data-ttu-id="4e23d-207">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="4e23d-207">Web Application</span></span> | 
| <span data-ttu-id="4e23d-208">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="4e23d-208">**SDL Phase**</span></span>               | <span data-ttu-id="4e23d-209">建置</span><span class="sxs-lookup"><span data-stu-id="4e23d-209">Build</span></span> |  
| <span data-ttu-id="4e23d-210">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="4e23d-210">**Applicable Technologies**</span></span> | <span data-ttu-id="4e23d-211">泛型</span><span class="sxs-lookup"><span data-stu-id="4e23d-211">Generic</span></span> |
| <span data-ttu-id="4e23d-212">**屬性**</span><span class="sxs-lookup"><span data-stu-id="4e23d-212">**Attributes**</span></span>              | <span data-ttu-id="4e23d-213">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-213">N/A</span></span>  |
| <span data-ttu-id="4e23d-214">**參考**</span><span class="sxs-lookup"><span data-stu-id="4e23d-214">**References**</span></span>              | <span data-ttu-id="4e23d-215">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-215">N/A</span></span>  |
| <span data-ttu-id="4e23d-216">**步驟**</span><span class="sxs-lookup"><span data-stu-id="4e23d-216">**Steps**</span></span>                   | <p><span data-ttu-id="4e23d-217">請檢查適當地設定 tooensure 存取權限 toolog 檔案。</span><span class="sxs-lookup"><span data-stu-id="4e23d-217">Check tooensure access rights toolog files are appropriately set.</span></span> <span data-ttu-id="4e23d-218">應用程式帳戶應具有唯寫權限，而操作人員和支援人員應具有所需的唯讀權限。</span><span class="sxs-lookup"><span data-stu-id="4e23d-218">Application accounts should have write-only access and operators and support personnel should have read-only access as needed.</span></span></p><p><span data-ttu-id="4e23d-219">系統管理員帳戶是 hello 唯一帳戶應該具有完整存取權。</span><span class="sxs-lookup"><span data-stu-id="4e23d-219">Administrators accounts are hello only accounts which should have full access.</span></span> <span data-ttu-id="4e23d-220">請檢查記錄檔上的 Windows ACL 檔案 tooensure 會適當地限制：</span><span class="sxs-lookup"><span data-stu-id="4e23d-220">Check Windows ACL on log files tooensure they are properly restricted:</span></span></p><ul><li><span data-ttu-id="4e23d-221">應用程式帳戶應具有唯寫權限</span><span class="sxs-lookup"><span data-stu-id="4e23d-221">Application accounts should have write-only access</span></span></li><li><span data-ttu-id="4e23d-222">操作人員和支援人員應具有所需的唯讀存取權限</span><span class="sxs-lookup"><span data-stu-id="4e23d-222">Operators and support personnel should have read-only access as needed</span></span></li><li><span data-ttu-id="4e23d-223">系統管理員是 hello 僅帳戶應該具有完整存取權</span><span class="sxs-lookup"><span data-stu-id="4e23d-223">Administrators are hello only accounts that should have full access</span></span></li></ul>|

## <span data-ttu-id="4e23d-224"><a id="user-management"></a>確保已記錄使用者管理事件</span><span class="sxs-lookup"><span data-stu-id="4e23d-224"><a id="user-management"></a>Ensure that User Management Events are Logged</span></span>

| <span data-ttu-id="4e23d-225">Title</span><span class="sxs-lookup"><span data-stu-id="4e23d-225">Title</span></span>                   | <span data-ttu-id="4e23d-226">詳細資料</span><span class="sxs-lookup"><span data-stu-id="4e23d-226">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4e23d-227">**元件**</span><span class="sxs-lookup"><span data-stu-id="4e23d-227">**Component**</span></span>               | <span data-ttu-id="4e23d-228">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="4e23d-228">Web Application</span></span> | 
| <span data-ttu-id="4e23d-229">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="4e23d-229">**SDL Phase**</span></span>               | <span data-ttu-id="4e23d-230">建置</span><span class="sxs-lookup"><span data-stu-id="4e23d-230">Build</span></span> |  
| <span data-ttu-id="4e23d-231">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="4e23d-231">**Applicable Technologies**</span></span> | <span data-ttu-id="4e23d-232">泛型</span><span class="sxs-lookup"><span data-stu-id="4e23d-232">Generic</span></span> |
| <span data-ttu-id="4e23d-233">**屬性**</span><span class="sxs-lookup"><span data-stu-id="4e23d-233">**Attributes**</span></span>              | <span data-ttu-id="4e23d-234">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-234">N/A</span></span>  |
| <span data-ttu-id="4e23d-235">**參考**</span><span class="sxs-lookup"><span data-stu-id="4e23d-235">**References**</span></span>              | <span data-ttu-id="4e23d-236">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-236">N/A</span></span>  |
| <span data-ttu-id="4e23d-237">**步驟**</span><span class="sxs-lookup"><span data-stu-id="4e23d-237">**Steps**</span></span>                   | <p><span data-ttu-id="4e23d-238">確定 hello 應用程式會監視使用者管理事件，例如成功和失敗的使用者登入，密碼重設密碼變更、 帳戶鎖定、 使用者註冊。</span><span class="sxs-lookup"><span data-stu-id="4e23d-238">Ensure that hello application monitors user management events such as successful and failed user logins, password resets, password changes, account lockout, user registration.</span></span> <span data-ttu-id="4e23d-239">這樣可協助 toodetect 及回應 toopotentially 可疑的行為。</span><span class="sxs-lookup"><span data-stu-id="4e23d-239">Doing this helps toodetect and react toopotentially suspicious behavior.</span></span> <span data-ttu-id="4e23d-240">它也可以讓 toogather 作業資料。例如，tootrack 正在存取 hello 應用程式</span><span class="sxs-lookup"><span data-stu-id="4e23d-240">It also enables toogather operations data; for example, tootrack who is accessing hello application</span></span></p>|

## <span data-ttu-id="4e23d-241"><a id="inbuilt-defenses"></a>請確認 hello 系統具有內建的防禦不當使用</span><span class="sxs-lookup"><span data-stu-id="4e23d-241"><a id="inbuilt-defenses"></a>Ensure that hello system has inbuilt defenses against misuse</span></span>

| <span data-ttu-id="4e23d-242">Title</span><span class="sxs-lookup"><span data-stu-id="4e23d-242">Title</span></span>                   | <span data-ttu-id="4e23d-243">詳細資料</span><span class="sxs-lookup"><span data-stu-id="4e23d-243">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4e23d-244">**元件**</span><span class="sxs-lookup"><span data-stu-id="4e23d-244">**Component**</span></span>               | <span data-ttu-id="4e23d-245">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="4e23d-245">Web Application</span></span> | 
| <span data-ttu-id="4e23d-246">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="4e23d-246">**SDL Phase**</span></span>               | <span data-ttu-id="4e23d-247">建置</span><span class="sxs-lookup"><span data-stu-id="4e23d-247">Build</span></span> |  
| <span data-ttu-id="4e23d-248">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="4e23d-248">**Applicable Technologies**</span></span> | <span data-ttu-id="4e23d-249">泛型</span><span class="sxs-lookup"><span data-stu-id="4e23d-249">Generic</span></span> |
| <span data-ttu-id="4e23d-250">**屬性**</span><span class="sxs-lookup"><span data-stu-id="4e23d-250">**Attributes**</span></span>              | <span data-ttu-id="4e23d-251">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-251">N/A</span></span>  |
| <span data-ttu-id="4e23d-252">**參考**</span><span class="sxs-lookup"><span data-stu-id="4e23d-252">**References**</span></span>              | <span data-ttu-id="4e23d-253">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-253">N/A</span></span>  |
| <span data-ttu-id="4e23d-254">**步驟**</span><span class="sxs-lookup"><span data-stu-id="4e23d-254">**Steps**</span></span>                   | <p><span data-ttu-id="4e23d-255">應備妥控制項，以便在發生應用程式誤用時擲回安全性例外狀況。</span><span class="sxs-lookup"><span data-stu-id="4e23d-255">Controls should be in place which throw security exception in case of application misuse.</span></span> <span data-ttu-id="4e23d-256">例如，如果輸入的驗證就定位，攻擊者嘗試 tooinject 惡意程式碼，不符合 hello regex，安全性例外狀況可能會擲回可能會誤用系統是用來指示</span><span class="sxs-lookup"><span data-stu-id="4e23d-256">E.g., If input validation is in place and an attacker attempts tooinject malicious code that does not match hello regex, a security exception can be thrown which can be an indicative of system misuse</span></span></p><p><span data-ttu-id="4e23d-257">例如，我們建議 toohave 記錄的安全性例外狀況並採取行動的 hello 下列問題：</span><span class="sxs-lookup"><span data-stu-id="4e23d-257">For example, it is recommended toohave security exceptions logged and actions taken for hello following issues:</span></span></p><ul><li><span data-ttu-id="4e23d-258">輸入驗證</span><span class="sxs-lookup"><span data-stu-id="4e23d-258">Input validation</span></span></li><li><span data-ttu-id="4e23d-259">CSRF 違規</span><span class="sxs-lookup"><span data-stu-id="4e23d-259">CSRF violations</span></span></li><li><span data-ttu-id="4e23d-260">暴力密碼破解 (每項資源之每個使用者的要求數目上限)</span><span class="sxs-lookup"><span data-stu-id="4e23d-260">Brute force (upper limit for number of requests per user per resource)</span></span></li><li><span data-ttu-id="4e23d-261">檔案上傳違規</span><span class="sxs-lookup"><span data-stu-id="4e23d-261">File upload violations</span></span></li><ul>|

## <span data-ttu-id="4e23d-262"><a id="diagnostics-logging"></a>在 Azure App Service 中針對 Web 應用程式啟用診斷記錄功能</span><span class="sxs-lookup"><span data-stu-id="4e23d-262"><a id="diagnostics-logging"></a>Enable diagnostics logging for web apps in Azure App Service</span></span>

| <span data-ttu-id="4e23d-263">Title</span><span class="sxs-lookup"><span data-stu-id="4e23d-263">Title</span></span>                   | <span data-ttu-id="4e23d-264">詳細資料</span><span class="sxs-lookup"><span data-stu-id="4e23d-264">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4e23d-265">**元件**</span><span class="sxs-lookup"><span data-stu-id="4e23d-265">**Component**</span></span>               | <span data-ttu-id="4e23d-266">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="4e23d-266">Web Application</span></span> | 
| <span data-ttu-id="4e23d-267">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="4e23d-267">**SDL Phase**</span></span>               | <span data-ttu-id="4e23d-268">建置</span><span class="sxs-lookup"><span data-stu-id="4e23d-268">Build</span></span> |  
| <span data-ttu-id="4e23d-269">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="4e23d-269">**Applicable Technologies**</span></span> | <span data-ttu-id="4e23d-270">泛型</span><span class="sxs-lookup"><span data-stu-id="4e23d-270">Generic</span></span> |
| <span data-ttu-id="4e23d-271">**屬性**</span><span class="sxs-lookup"><span data-stu-id="4e23d-271">**Attributes**</span></span>              | <span data-ttu-id="4e23d-272">EnvironmentType - Azure</span><span class="sxs-lookup"><span data-stu-id="4e23d-272">EnvironmentType - Azure</span></span> |
| <span data-ttu-id="4e23d-273">**參考**</span><span class="sxs-lookup"><span data-stu-id="4e23d-273">**References**</span></span>              | <span data-ttu-id="4e23d-274">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-274">N/A</span></span>  |
| <span data-ttu-id="4e23d-275">**步驟**</span><span class="sxs-lookup"><span data-stu-id="4e23d-275">**Steps**</span></span> | <p><span data-ttu-id="4e23d-276">Azure 提供內建的診斷 tooassist 與應用程式服務進行偵錯 web 應用程式。</span><span class="sxs-lookup"><span data-stu-id="4e23d-276">Azure provides built-in diagnostics tooassist with debugging an App Service web app.</span></span> <span data-ttu-id="4e23d-277">它也適用於 tooAPI 應用程式和行動裝置應用程式。</span><span class="sxs-lookup"><span data-stu-id="4e23d-277">It also applies tooAPI apps and mobile apps.</span></span> <span data-ttu-id="4e23d-278">App Service web 應用程式提供記錄資訊從 hello web 伺服器和 hello web 應用程式的診斷的功能。</span><span class="sxs-lookup"><span data-stu-id="4e23d-278">App Service web apps provide diagnostic functionality for logging information from both hello web server and hello web application.</span></span></p><p><span data-ttu-id="4e23d-279">這些資訊邏輯上可區分為 Web 伺服器診斷和應用程式診斷</span><span class="sxs-lookup"><span data-stu-id="4e23d-279">These are logically separated into web server diagnostics and application diagnostics</span></span></p>|

## <span data-ttu-id="4e23d-280"><a id="identify-sensitive-entities"></a>確保已在 SQL Server 上啟用登入稽核功能</span><span class="sxs-lookup"><span data-stu-id="4e23d-280"><a id="identify-sensitive-entities"></a>Ensure that login auditing is enabled on SQL Server</span></span>

| <span data-ttu-id="4e23d-281">Title</span><span class="sxs-lookup"><span data-stu-id="4e23d-281">Title</span></span>                   | <span data-ttu-id="4e23d-282">詳細資料</span><span class="sxs-lookup"><span data-stu-id="4e23d-282">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4e23d-283">**元件**</span><span class="sxs-lookup"><span data-stu-id="4e23d-283">**Component**</span></span>               | <span data-ttu-id="4e23d-284">資料庫</span><span class="sxs-lookup"><span data-stu-id="4e23d-284">Database</span></span> | 
| <span data-ttu-id="4e23d-285">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="4e23d-285">**SDL Phase**</span></span>               | <span data-ttu-id="4e23d-286">建置</span><span class="sxs-lookup"><span data-stu-id="4e23d-286">Build</span></span> |  
| <span data-ttu-id="4e23d-287">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="4e23d-287">**Applicable Technologies**</span></span> | <span data-ttu-id="4e23d-288">泛型</span><span class="sxs-lookup"><span data-stu-id="4e23d-288">Generic</span></span> |
| <span data-ttu-id="4e23d-289">**屬性**</span><span class="sxs-lookup"><span data-stu-id="4e23d-289">**Attributes**</span></span>              | <span data-ttu-id="4e23d-290">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-290">N/A</span></span>  |
| <span data-ttu-id="4e23d-291">**參考**</span><span class="sxs-lookup"><span data-stu-id="4e23d-291">**References**</span></span>              | [<span data-ttu-id="4e23d-292">設定登入稽核</span><span class="sxs-lookup"><span data-stu-id="4e23d-292">Configure Login Auditing</span></span>](https://msdn.microsoft.com/library/ms175850.aspx) |
| <span data-ttu-id="4e23d-293">**步驟**</span><span class="sxs-lookup"><span data-stu-id="4e23d-293">**Steps**</span></span> | <p><span data-ttu-id="4e23d-294">稽核登入資料庫伺服器必須啟用 toodetect/確認的密碼破解攻擊。</span><span class="sxs-lookup"><span data-stu-id="4e23d-294">Database Server login auditing must be enabled toodetect/confirm password guessing attacks.</span></span> <span data-ttu-id="4e23d-295">請務必 toocapture 失敗的登入。</span><span class="sxs-lookup"><span data-stu-id="4e23d-295">It is important toocapture failed login attempts.</span></span> <span data-ttu-id="4e23d-296">擷取成功和失敗的登入嘗試，可在鑑識調查期間提供額外的好處</span><span class="sxs-lookup"><span data-stu-id="4e23d-296">Capturing both successful and failed login attempts provides additional benefit during forensic investigations</span></span></p>|

## <span data-ttu-id="4e23d-297"><a id="threat-detection"></a>在 Azure SQL 上啟用威脅偵測功能</span><span class="sxs-lookup"><span data-stu-id="4e23d-297"><a id="threat-detection"></a>Enable Threat detection on Azure SQL</span></span>

| <span data-ttu-id="4e23d-298">Title</span><span class="sxs-lookup"><span data-stu-id="4e23d-298">Title</span></span>                   | <span data-ttu-id="4e23d-299">詳細資料</span><span class="sxs-lookup"><span data-stu-id="4e23d-299">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4e23d-300">**元件**</span><span class="sxs-lookup"><span data-stu-id="4e23d-300">**Component**</span></span>               | <span data-ttu-id="4e23d-301">資料庫</span><span class="sxs-lookup"><span data-stu-id="4e23d-301">Database</span></span> | 
| <span data-ttu-id="4e23d-302">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="4e23d-302">**SDL Phase**</span></span>               | <span data-ttu-id="4e23d-303">建置</span><span class="sxs-lookup"><span data-stu-id="4e23d-303">Build</span></span> |  
| <span data-ttu-id="4e23d-304">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="4e23d-304">**Applicable Technologies**</span></span> | <span data-ttu-id="4e23d-305">SQL Azure</span><span class="sxs-lookup"><span data-stu-id="4e23d-305">SQL Azure</span></span> |
| <span data-ttu-id="4e23d-306">**屬性**</span><span class="sxs-lookup"><span data-stu-id="4e23d-306">**Attributes**</span></span>              | <span data-ttu-id="4e23d-307">SQL 版本 - V12</span><span class="sxs-lookup"><span data-stu-id="4e23d-307">SQL Version - V12</span></span> |
| <span data-ttu-id="4e23d-308">**參考**</span><span class="sxs-lookup"><span data-stu-id="4e23d-308">**References**</span></span>              | [<span data-ttu-id="4e23d-309">開始使用 SQL Database 威脅偵測</span><span class="sxs-lookup"><span data-stu-id="4e23d-309">Get Started with SQL Database Threat Detection</span></span>](https://azure.microsoft.com/documentation/articles/sql-database-threat-detection-get-started/)|
| <span data-ttu-id="4e23d-310">**步驟**</span><span class="sxs-lookup"><span data-stu-id="4e23d-310">**Steps**</span></span> |<p><span data-ttu-id="4e23d-311">威脅偵測偵測到潛在的安全性威脅 toohello 資料庫異常資料庫活動。</span><span class="sxs-lookup"><span data-stu-id="4e23d-311">Threat Detection detects anomalous database activities indicating potential security threats toohello database.</span></span> <span data-ttu-id="4e23d-312">它提供新的圖層的安全性，這可讓客戶 toodetect 及回應 toopotential 威脅，在發生異常的活動提供安全性警示。</span><span class="sxs-lookup"><span data-stu-id="4e23d-312">It provides a new layer of security, which enables customers toodetect and respond toopotential threats as they occur by providing security alerts on anomalous activities.</span></span></p><p><span data-ttu-id="4e23d-313">使用者可以瀏覽 hello 可疑使用 Azure SQL Database 稽核 toodetermine 如果他們未導致嘗試 tooaccess，破壞的事件，或利用 hello 資料庫中的資料。</span><span class="sxs-lookup"><span data-stu-id="4e23d-313">Users can explore hello suspicious events using Azure SQL Database Auditing toodetermine if they result from an attempt tooaccess, breach or exploit data in hello database.</span></span></p><p><span data-ttu-id="4e23d-314">威脅偵測會使簡單 tooaddress 潛在威脅 toohello 資料庫沒有 hello 需要 toobe 安全性專家或管理進階的安全性的監視系統</span><span class="sxs-lookup"><span data-stu-id="4e23d-314">Threat Detection makes it simple tooaddress potential threats toohello database without hello need toobe a security expert or manage advanced security monitoring systems</span></span></p>|

## <span data-ttu-id="4e23d-315"><a id="analytics"></a>使用 Azure 儲存體的 Azure 儲存體分析 tooaudit 存取</span><span class="sxs-lookup"><span data-stu-id="4e23d-315"><a id="analytics"></a>Use Azure Storage Analytics tooaudit access of Azure Storage</span></span>

| <span data-ttu-id="4e23d-316">Title</span><span class="sxs-lookup"><span data-stu-id="4e23d-316">Title</span></span>                   | <span data-ttu-id="4e23d-317">詳細資料</span><span class="sxs-lookup"><span data-stu-id="4e23d-317">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4e23d-318">**元件**</span><span class="sxs-lookup"><span data-stu-id="4e23d-318">**Component**</span></span>               | <span data-ttu-id="4e23d-319">Azure 儲存體</span><span class="sxs-lookup"><span data-stu-id="4e23d-319">Azure Storage</span></span> | 
| <span data-ttu-id="4e23d-320">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="4e23d-320">**SDL Phase**</span></span>               | <span data-ttu-id="4e23d-321">部署</span><span class="sxs-lookup"><span data-stu-id="4e23d-321">Deployment</span></span> |  
| <span data-ttu-id="4e23d-322">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="4e23d-322">**Applicable Technologies**</span></span> | <span data-ttu-id="4e23d-323">泛型</span><span class="sxs-lookup"><span data-stu-id="4e23d-323">Generic</span></span> |
| <span data-ttu-id="4e23d-324">**屬性**</span><span class="sxs-lookup"><span data-stu-id="4e23d-324">**Attributes**</span></span>              | <span data-ttu-id="4e23d-325">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-325">N/A</span></span> |
| <span data-ttu-id="4e23d-326">**參考**</span><span class="sxs-lookup"><span data-stu-id="4e23d-326">**References**</span></span>              | [<span data-ttu-id="4e23d-327">使用儲存體分析 toomonitor 授權類型</span><span class="sxs-lookup"><span data-stu-id="4e23d-327">Using Storage Analytics toomonitor authorization type</span></span>](https://azure.microsoft.com/documentation/articles/storage-security-guide/#storage-analytics) |
| <span data-ttu-id="4e23d-328">**步驟**</span><span class="sxs-lookup"><span data-stu-id="4e23d-328">**Steps**</span></span> | <p><span data-ttu-id="4e23d-329">每個儲存體帳戶，一個可啟用 Azure 儲存體分析 tooperform 記錄和度量資料存放區。</span><span class="sxs-lookup"><span data-stu-id="4e23d-329">For each storage account, one can enable Azure Storage Analytics tooperform logging and store metrics data.</span></span> <span data-ttu-id="4e23d-330">hello 儲存體分析記錄檔提供重要的資訊，例如當使用者存取儲存體時的其他人使用的驗證方法。</span><span class="sxs-lookup"><span data-stu-id="4e23d-330">hello storage analytics logs provide important information such as authentication method used by someone when they access storage.</span></span></p><p><span data-ttu-id="4e23d-331">這可以是非常有幫助您緊密會保護存取 toostorage 如果項目。</span><span class="sxs-lookup"><span data-stu-id="4e23d-331">This can be really helpful if you are tightly guarding access toostorage.</span></span> <span data-ttu-id="4e23d-332">比方說，在 Blob 儲存體中，您可以設定所有 hello 容器 tooprivate 和整個應用程式實作 hello SAS 服務使用。</span><span class="sxs-lookup"><span data-stu-id="4e23d-332">For example, in Blob Storage you can set all of hello containers tooprivate and implement hello use of an SAS service throughout your applications.</span></span> <span data-ttu-id="4e23d-333">然後您可以檢查 hello 記錄定期 toosee 如果使用 hello 儲存體帳戶金鑰，這可能表示有安全性的漏洞，存取您的 blob 或 hello blob 是公用的但它們不應該是。</span><span class="sxs-lookup"><span data-stu-id="4e23d-333">Then you can check hello logs regularly toosee if your blobs are accessed using hello storage account keys, which may indicate a breach of security, or if hello blobs are public but they shouldn’t be.</span></span></p>|

## <span data-ttu-id="4e23d-334"><a id="sufficient-logging"></a>實作足夠的記錄</span><span class="sxs-lookup"><span data-stu-id="4e23d-334"><a id="sufficient-logging"></a>Implement sufficient Logging</span></span>

| <span data-ttu-id="4e23d-335">Title</span><span class="sxs-lookup"><span data-stu-id="4e23d-335">Title</span></span>                   | <span data-ttu-id="4e23d-336">詳細資料</span><span class="sxs-lookup"><span data-stu-id="4e23d-336">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4e23d-337">**元件**</span><span class="sxs-lookup"><span data-stu-id="4e23d-337">**Component**</span></span>               | <span data-ttu-id="4e23d-338">WCF</span><span class="sxs-lookup"><span data-stu-id="4e23d-338">WCF</span></span> | 
| <span data-ttu-id="4e23d-339">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="4e23d-339">**SDL Phase**</span></span>               | <span data-ttu-id="4e23d-340">建置</span><span class="sxs-lookup"><span data-stu-id="4e23d-340">Build</span></span> |  
| <span data-ttu-id="4e23d-341">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="4e23d-341">**Applicable Technologies**</span></span> | <span data-ttu-id="4e23d-342">.NET Framework</span><span class="sxs-lookup"><span data-stu-id="4e23d-342">.NET Framework</span></span> |
| <span data-ttu-id="4e23d-343">**屬性**</span><span class="sxs-lookup"><span data-stu-id="4e23d-343">**Attributes**</span></span>              | <span data-ttu-id="4e23d-344">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-344">N/A</span></span>  |
| <span data-ttu-id="4e23d-345">**參考**</span><span class="sxs-lookup"><span data-stu-id="4e23d-345">**References**</span></span>              | <span data-ttu-id="4e23d-346">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx)、[Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html)</span><span class="sxs-lookup"><span data-stu-id="4e23d-346">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html)</span></span> |
| <span data-ttu-id="4e23d-347">**步驟**</span><span class="sxs-lookup"><span data-stu-id="4e23d-347">**Steps**</span></span> | <p><span data-ttu-id="4e23d-348">hello 缺乏適當的稽核記錄安全性事件之後，可能會妨礙鑑識投入時間。</span><span class="sxs-lookup"><span data-stu-id="4e23d-348">hello lack of a proper audit trail after a security incident can hamper forensic efforts.</span></span> <span data-ttu-id="4e23d-349">Windows Communication Foundation (WCF) 提供 hello 能力 toolog 成功及/或失敗的驗證嘗試。</span><span class="sxs-lookup"><span data-stu-id="4e23d-349">Windows Communication Foundation (WCF) offers hello ability toolog successful and/or failed authentication attempts.</span></span></p><p><span data-ttu-id="4e23d-350">記錄失敗的驗證嘗試可以警告系統管理員可能的暴力破解攻擊。</span><span class="sxs-lookup"><span data-stu-id="4e23d-350">Logging failed authentication attempts can warn administrators of potential brute-force attacks.</span></span> <span data-ttu-id="4e23d-351">同樣地，記錄成功的驗證事件可以在合法帳戶遭到入侵時提供有用的稽核線索。</span><span class="sxs-lookup"><span data-stu-id="4e23d-351">Similarly, logging successful authentication events can provide a useful audit trail when a legitimate account is compromised.</span></span> <span data-ttu-id="4e23d-352">啟用 WCF 的服務安全性稽核功能</span><span class="sxs-lookup"><span data-stu-id="4e23d-352">Enable WCF's service security audit feature</span></span> |

### <a name="example"></a><span data-ttu-id="4e23d-353">範例</span><span class="sxs-lookup"><span data-stu-id="4e23d-353">Example</span></span>
<span data-ttu-id="4e23d-354">hello 以下是啟用稽核功能的範例組態</span><span class="sxs-lookup"><span data-stu-id="4e23d-354">hello following is an example configuration with auditing enabled</span></span>
```
<system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior name=""NewBehavior"">
                <serviceSecurityAudit auditLogLocation=""Default""
                suppressAuditFailure=""false"" 
                serviceAuthorizationAuditLevel=""SuccessAndFailure""
                messageAuthenticationAuditLevel=""SuccessAndFailure"" />
                ...
            </behavior>
        </servicebehaviors>
    </behaviors>
</system.serviceModel>
```

## <span data-ttu-id="4e23d-355"><a id="audit-failure-handling"></a>實作足夠的稽核失敗處理</span><span class="sxs-lookup"><span data-stu-id="4e23d-355"><a id="audit-failure-handling"></a>Implement sufficient Audit Failure Handling</span></span>

| <span data-ttu-id="4e23d-356">Title</span><span class="sxs-lookup"><span data-stu-id="4e23d-356">Title</span></span>                   | <span data-ttu-id="4e23d-357">詳細資料</span><span class="sxs-lookup"><span data-stu-id="4e23d-357">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4e23d-358">**元件**</span><span class="sxs-lookup"><span data-stu-id="4e23d-358">**Component**</span></span>               | <span data-ttu-id="4e23d-359">WCF</span><span class="sxs-lookup"><span data-stu-id="4e23d-359">WCF</span></span> | 
| <span data-ttu-id="4e23d-360">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="4e23d-360">**SDL Phase**</span></span>               | <span data-ttu-id="4e23d-361">建置</span><span class="sxs-lookup"><span data-stu-id="4e23d-361">Build</span></span> |  
| <span data-ttu-id="4e23d-362">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="4e23d-362">**Applicable Technologies**</span></span> | <span data-ttu-id="4e23d-363">.NET Framework</span><span class="sxs-lookup"><span data-stu-id="4e23d-363">.NET Framework</span></span> |
| <span data-ttu-id="4e23d-364">**屬性**</span><span class="sxs-lookup"><span data-stu-id="4e23d-364">**Attributes**</span></span>              | <span data-ttu-id="4e23d-365">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-365">N/A</span></span>  |
| <span data-ttu-id="4e23d-366">**參考**</span><span class="sxs-lookup"><span data-stu-id="4e23d-366">**References**</span></span>              | <span data-ttu-id="4e23d-367">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx)、[Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html)</span><span class="sxs-lookup"><span data-stu-id="4e23d-367">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html)</span></span> |
| <span data-ttu-id="4e23d-368">**步驟**</span><span class="sxs-lookup"><span data-stu-id="4e23d-368">**Steps**</span></span> | <p><span data-ttu-id="4e23d-369">開發的方案設定 toogenerate toowrite tooan 稽核記錄失敗時，例外狀況。</span><span class="sxs-lookup"><span data-stu-id="4e23d-369">Developed solution is configured not toogenerate an exception when it fails toowrite tooan audit log.</span></span> <span data-ttu-id="4e23d-370">如果設定 WCF toothrow 無法 toowrite tooan 稽核記錄檔、 hello 程式將不會收到通知 hello 失敗，且時重要的安全性事件稽核的 ca 可能不會發生例外狀況。</span><span class="sxs-lookup"><span data-stu-id="4e23d-370">If WCF is configured not toothrow an exception when it is unable toowrite tooan audit log, hello program will not be notified of hello failure and auditing of critical security events may not occur.</span></span></p>|

### <a name="example"></a><span data-ttu-id="4e23d-371">範例</span><span class="sxs-lookup"><span data-stu-id="4e23d-371">Example</span></span>
<span data-ttu-id="4e23d-372">hello `<behavior/>` hello 底下的 WCF 組態檔項目會指示 WCF toonot WCF 失敗 toowrite tooan 稽核記錄檔時，通知 hello 應用程式。</span><span class="sxs-lookup"><span data-stu-id="4e23d-372">hello `<behavior/>` element of hello WCF configuration file below instructs WCF toonot notify hello application when WCF fails toowrite tooan audit log.</span></span>
````
<behaviors>
    <serviceBehaviors>
        <behavior name="NewBehavior">
            <serviceSecurityAudit auditLogLocation="Application"
            suppressAuditFailure="true"
            serviceAuthorizationAuditLevel="Success"
            messageAuthenticationAuditLevel="Success" />
        </behavior>
    </serviceBehaviors>
</behaviors>
````
<span data-ttu-id="4e23d-373">設定 WCF toonotify hello 程式，每當它是無法 toowrite tooan 稽核記錄檔。</span><span class="sxs-lookup"><span data-stu-id="4e23d-373">Configure WCF toonotify hello program whenever it is unable toowrite tooan audit log.</span></span> <span data-ttu-id="4e23d-374">hello 程式應該都不會維持稽核記錄的地方 tooalert hello 組織中有替代通知配置。</span><span class="sxs-lookup"><span data-stu-id="4e23d-374">hello program should have an alternative notification scheme in place tooalert hello organization that audit trails are not being maintained.</span></span> 

## <span data-ttu-id="4e23d-375"><a id="logging-web-api"></a>確保在 Web API 上強制執行稽核和記錄功能</span><span class="sxs-lookup"><span data-stu-id="4e23d-375"><a id="logging-web-api"></a>Ensure that auditing and logging is enforced on Web API</span></span>

| <span data-ttu-id="4e23d-376">Title</span><span class="sxs-lookup"><span data-stu-id="4e23d-376">Title</span></span>                   | <span data-ttu-id="4e23d-377">詳細資料</span><span class="sxs-lookup"><span data-stu-id="4e23d-377">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4e23d-378">**元件**</span><span class="sxs-lookup"><span data-stu-id="4e23d-378">**Component**</span></span>               | <span data-ttu-id="4e23d-379">Web API</span><span class="sxs-lookup"><span data-stu-id="4e23d-379">Web API</span></span> | 
| <span data-ttu-id="4e23d-380">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="4e23d-380">**SDL Phase**</span></span>               | <span data-ttu-id="4e23d-381">建置</span><span class="sxs-lookup"><span data-stu-id="4e23d-381">Build</span></span> |  
| <span data-ttu-id="4e23d-382">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="4e23d-382">**Applicable Technologies**</span></span> | <span data-ttu-id="4e23d-383">泛型</span><span class="sxs-lookup"><span data-stu-id="4e23d-383">Generic</span></span> |
| <span data-ttu-id="4e23d-384">**屬性**</span><span class="sxs-lookup"><span data-stu-id="4e23d-384">**Attributes**</span></span>              | <span data-ttu-id="4e23d-385">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-385">N/A</span></span>  |
| <span data-ttu-id="4e23d-386">**參考**</span><span class="sxs-lookup"><span data-stu-id="4e23d-386">**References**</span></span>              | <span data-ttu-id="4e23d-387">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-387">N/A</span></span>  |
| <span data-ttu-id="4e23d-388">**步驟**</span><span class="sxs-lookup"><span data-stu-id="4e23d-388">**Steps**</span></span> | <span data-ttu-id="4e23d-389">在 Web API 上啟用稽核和記錄功能。</span><span class="sxs-lookup"><span data-stu-id="4e23d-389">Enable auditing and logging on Web APIs.</span></span> <span data-ttu-id="4e23d-390">稽核記錄檔應擷取使用者內容。</span><span class="sxs-lookup"><span data-stu-id="4e23d-390">Audit logs should capture user context.</span></span> <span data-ttu-id="4e23d-391">識別所有重要的事件及記錄這些事件。</span><span class="sxs-lookup"><span data-stu-id="4e23d-391">Identify all important events and log those events.</span></span> <span data-ttu-id="4e23d-392">實作集中式記錄</span><span class="sxs-lookup"><span data-stu-id="4e23d-392">Implement centralized logging</span></span> |

## <span data-ttu-id="4e23d-393"><a id="logging-field-gateway"></a>確保在現場閘道上強制執行適當的稽核和記錄功能</span><span class="sxs-lookup"><span data-stu-id="4e23d-393"><a id="logging-field-gateway"></a>Ensure that appropriate auditing and logging is enforced on Field Gateway</span></span>

| <span data-ttu-id="4e23d-394">Title</span><span class="sxs-lookup"><span data-stu-id="4e23d-394">Title</span></span>                   | <span data-ttu-id="4e23d-395">詳細資料</span><span class="sxs-lookup"><span data-stu-id="4e23d-395">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4e23d-396">**元件**</span><span class="sxs-lookup"><span data-stu-id="4e23d-396">**Component**</span></span>               | <span data-ttu-id="4e23d-397">IoT 現場閘道</span><span class="sxs-lookup"><span data-stu-id="4e23d-397">IoT Field Gateway</span></span> | 
| <span data-ttu-id="4e23d-398">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="4e23d-398">**SDL Phase**</span></span>               | <span data-ttu-id="4e23d-399">建置</span><span class="sxs-lookup"><span data-stu-id="4e23d-399">Build</span></span> |  
| <span data-ttu-id="4e23d-400">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="4e23d-400">**Applicable Technologies**</span></span> | <span data-ttu-id="4e23d-401">泛型</span><span class="sxs-lookup"><span data-stu-id="4e23d-401">Generic</span></span> |
| <span data-ttu-id="4e23d-402">**屬性**</span><span class="sxs-lookup"><span data-stu-id="4e23d-402">**Attributes**</span></span>              | <span data-ttu-id="4e23d-403">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-403">N/A</span></span>  |
| <span data-ttu-id="4e23d-404">**參考**</span><span class="sxs-lookup"><span data-stu-id="4e23d-404">**References**</span></span>              | <span data-ttu-id="4e23d-405">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-405">N/A</span></span>  |
| <span data-ttu-id="4e23d-406">**步驟**</span><span class="sxs-lookup"><span data-stu-id="4e23d-406">**Steps**</span></span> | <p><span data-ttu-id="4e23d-407">當多個裝置連線 tooa 欄位閘道時，請確認連接嘗試和個別裝置 （成功或失敗） 的驗證狀態會記錄 hello 欄位閘道上進行維護。</span><span class="sxs-lookup"><span data-stu-id="4e23d-407">When multiple devices connect tooa Field Gateway, ensure that connection attempts and authentication status (success or failure) for individual devices are logged and maintained on hello Field Gateway.</span></span></p><p><span data-ttu-id="4e23d-408">此外，在欄位閘道維護 hello 的情況下 IoT 中樞認證的個別裝置，請確定這些認證擷取時，執行稽核。開發程序 tooperiodically 上載 hello 記錄 tooAzure IoT 中樞/儲存體長期保留的。</span><span class="sxs-lookup"><span data-stu-id="4e23d-408">Also, in cases where Field Gateway is maintaining hello IoT Hub credentials for individual devices, ensure that auditing is performed when these credentials are retrieved.Develop a process tooperiodically upload hello logs tooAzure IoT Hub/storage for long term retention.</span></span></p> |

## <span data-ttu-id="4e23d-409"><a id="logging-cloud-gateway"></a>確保在雲端閘道上強制執行適當的稽核和記錄功能</span><span class="sxs-lookup"><span data-stu-id="4e23d-409"><a id="logging-cloud-gateway"></a>Ensure that appropriate auditing and logging is enforced on Cloud Gateway</span></span>

| <span data-ttu-id="4e23d-410">Title</span><span class="sxs-lookup"><span data-stu-id="4e23d-410">Title</span></span>                   | <span data-ttu-id="4e23d-411">詳細資料</span><span class="sxs-lookup"><span data-stu-id="4e23d-411">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="4e23d-412">**元件**</span><span class="sxs-lookup"><span data-stu-id="4e23d-412">**Component**</span></span>               | <span data-ttu-id="4e23d-413">IoT 雲端閘道</span><span class="sxs-lookup"><span data-stu-id="4e23d-413">IoT Cloud Gateway</span></span> | 
| <span data-ttu-id="4e23d-414">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="4e23d-414">**SDL Phase**</span></span>               | <span data-ttu-id="4e23d-415">建置</span><span class="sxs-lookup"><span data-stu-id="4e23d-415">Build</span></span> |  
| <span data-ttu-id="4e23d-416">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="4e23d-416">**Applicable Technologies**</span></span> | <span data-ttu-id="4e23d-417">泛型</span><span class="sxs-lookup"><span data-stu-id="4e23d-417">Generic</span></span> |
| <span data-ttu-id="4e23d-418">**屬性**</span><span class="sxs-lookup"><span data-stu-id="4e23d-418">**Attributes**</span></span>              | <span data-ttu-id="4e23d-419">N/A</span><span class="sxs-lookup"><span data-stu-id="4e23d-419">N/A</span></span>  |
| <span data-ttu-id="4e23d-420">**參考**</span><span class="sxs-lookup"><span data-stu-id="4e23d-420">**References**</span></span>              | [<span data-ttu-id="4e23d-421">簡介 tooIoT 中樞作業監視</span><span class="sxs-lookup"><span data-stu-id="4e23d-421">Introduction tooIoT Hub operations monitoring</span></span>](https://azure.microsoft.com/documentation/articles/iot-hub-operations-monitoring/) |
| <span data-ttu-id="4e23d-422">**步驟**</span><span class="sxs-lookup"><span data-stu-id="4e23d-422">**Steps**</span></span> | <p><span data-ttu-id="4e23d-423">設計用來收集及儲存透過 IoT 中樞作業監視所蒐集的稽核資料。</span><span class="sxs-lookup"><span data-stu-id="4e23d-423">Design for collecting and storing audit data gathered through IoT Hub Operations Monitoring.</span></span> <span data-ttu-id="4e23d-424">啟用下列監視類別目錄的 hello:</span><span class="sxs-lookup"><span data-stu-id="4e23d-424">Enable hello following monitoring categories:</span></span></p><ul><li><span data-ttu-id="4e23d-425">裝置身分識別作業</span><span class="sxs-lookup"><span data-stu-id="4e23d-425">Device identity operations</span></span></li><li><span data-ttu-id="4e23d-426">裝置到雲端通訊</span><span class="sxs-lookup"><span data-stu-id="4e23d-426">Device-to-cloud communications</span></span></li><li><span data-ttu-id="4e23d-427">雲端到裝置通訊</span><span class="sxs-lookup"><span data-stu-id="4e23d-427">Cloud-to-device communications</span></span></li><li><span data-ttu-id="4e23d-428">連線</span><span class="sxs-lookup"><span data-stu-id="4e23d-428">Connections</span></span></li><li><span data-ttu-id="4e23d-429">檔案上傳</span><span class="sxs-lookup"><span data-stu-id="4e23d-429">File uploads</span></span></li></ul>|
