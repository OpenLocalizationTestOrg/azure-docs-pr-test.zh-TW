---
title: "aaaAzure 服務網狀架構安全性概觀 |Microsoft 文件"
description: "本文章提供 hello Azure service fabric 安全性的概觀。"
services: security
documentationcenter: na
author: unifycloud
manager: swadhwa
editor: tomsh
ms.assetid: 
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/04/2017
ms.author: tomsh
ms.openlocfilehash: ec5355983c5d59f4e0c3b855965f03ac47f1a4c1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="azure-service-fabric-security-overview"></a><span data-ttu-id="30393-103">Azure Service Fabric 安全性概觀</span><span class="sxs-lookup"><span data-stu-id="30393-103">Azure Service Fabric security overview</span></span>
<span data-ttu-id="30393-104">[Azure Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-overview)是分散式的系統平台，可讓您輕鬆 toopackage，部署及管理可擴充且可靠的微服務。</span><span class="sxs-lookup"><span data-stu-id="30393-104">[Azure Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-overview) is a distributed systems platform that makes it easy toopackage, deploy, and manage scalable and reliable micro-services.</span></span> <span data-ttu-id="30393-105">Service Fabric 處理 hello 在開發和管理雲端應用程式的重大挑戰。</span><span class="sxs-lookup"><span data-stu-id="30393-105">Service Fabric addresses hello significant challenges in developing and managing cloud applications.</span></span> <span data-ttu-id="30393-106">開發人員與管理員能夠避免複雜的基礎結構問題，專注於實作關鍵且嚴格要求之可調整、可信賴且可管理的工作負載。</span><span class="sxs-lookup"><span data-stu-id="30393-106">Developers and administrators can avoid complex infrastructure problems and focus on implementing mission-critical, demanding workloads that are scalable, reliable, and manageable.</span></span>

<span data-ttu-id="30393-107">Azure Service Fabric 安全性概觀本文著重於 hello 下列區域：</span><span class="sxs-lookup"><span data-stu-id="30393-107">This Azure Service Fabric Security Overview article focuses on hello following areas:</span></span>

-   <span data-ttu-id="30393-108">保護您的叢集</span><span class="sxs-lookup"><span data-stu-id="30393-108">Securing your cluster</span></span>
-   <span data-ttu-id="30393-109">監視和診斷</span><span class="sxs-lookup"><span data-stu-id="30393-109">Monitoring and diagnostics</span></span>
-   <span data-ttu-id="30393-110">使用憑證提供保護</span><span class="sxs-lookup"><span data-stu-id="30393-110">Secure using Certificates</span></span>
-   <span data-ttu-id="30393-111">角色型存取控制 (RBAC)</span><span class="sxs-lookup"><span data-stu-id="30393-111">Role-based access control (RBAC)</span></span>
-   <span data-ttu-id="30393-112">使用 Windows 安全性保護叢集</span><span class="sxs-lookup"><span data-stu-id="30393-112">Secure cluster using Windows security</span></span>
-   <span data-ttu-id="30393-113">在 Service Fabric 中設定應用程式安全性</span><span class="sxs-lookup"><span data-stu-id="30393-113">Configure application security in Service Fabric</span></span>
-   <span data-ttu-id="30393-114">保護 Azure Service Fabric 安全性中服務的通訊安全</span><span class="sxs-lookup"><span data-stu-id="30393-114">Secure communication for services in Azure Service Fabric Security</span></span>

## <a name="securing-your-cluster"></a><span data-ttu-id="30393-115">保護您的叢集</span><span class="sxs-lookup"><span data-stu-id="30393-115">Securing your cluster</span></span>
<span data-ttu-id="30393-116">Azure Service Fabric 是 orchestrator 服務的跨叢集的電腦，叢集必須是安全的 tooprevent 未經授權的使用者連接 tooyour 叢集，尤其是當它已在其上執行的實際執行工作負載。</span><span class="sxs-lookup"><span data-stu-id="30393-116">Azure Service Fabric is an orchestrator of services across a cluster of machines, Clusters must be secured tooprevent unauthorized users from connecting tooyour cluster, especially when it has production workloads running on it.</span></span> <span data-ttu-id="30393-117">雖然可能 toocreate 不安全的叢集，這樣做可讓匿名使用者 tooconnect tooit，如果它會公開管理端點 toohello 公用網際網路。</span><span class="sxs-lookup"><span data-stu-id="30393-117">Although it is possible toocreate an unsecured cluster, doing so allows anonymous users tooconnect tooit, if it exposes management endpoints toohello public Internet.</span></span>

<span data-ttu-id="30393-118">本節概略說明 hello 安全性案例的叢集在 Azure 或獨立執行，並 hello 各種所用技術 tooimplement 這些案例。</span><span class="sxs-lookup"><span data-stu-id="30393-118">This section provides an overview of hello security scenarios for clusters running on Azure or standalone and hello various technologies used tooimplement those scenarios.</span></span> <span data-ttu-id="30393-119">hello 叢集安全性案例包括：</span><span class="sxs-lookup"><span data-stu-id="30393-119">hello cluster security scenarios are:</span></span>

-   <span data-ttu-id="30393-120">節點對節點安全性</span><span class="sxs-lookup"><span data-stu-id="30393-120">Node-to-node security</span></span>
-   <span data-ttu-id="30393-121">用戶端對節點安全性</span><span class="sxs-lookup"><span data-stu-id="30393-121">Client-to-node security</span></span>

### <a name="node-to-node-security"></a><span data-ttu-id="30393-122">節點對節點安全性</span><span class="sxs-lookup"><span data-stu-id="30393-122">Node-to-node security</span></span>
<span data-ttu-id="30393-123">保護 hello Vm 或 hello 叢集中的機器之間的通訊。</span><span class="sxs-lookup"><span data-stu-id="30393-123">Secures communication between hello VMs or machines in hello cluster.</span></span> <span data-ttu-id="30393-124">這可確保只有授權的 toojoin hello 叢集的電腦可以參與裝載應用程式和服務 hello 叢集中。</span><span class="sxs-lookup"><span data-stu-id="30393-124">This ensures that only computers that are authorized toojoin hello cluster can participate in hosting applications and services in hello cluster.</span></span>

<span data-ttu-id="30393-125">在 Azure 上執行的叢集或在 Windows 上執行的獨立叢集可以使用[憑證安全性](https://msdn.microsoft.com/library/ff649801.aspx)或針對 Windows Server 機器使用 [Windows 安全性](https://msdn.microsoft.com/library/ff649396.aspx)。</span><span class="sxs-lookup"><span data-stu-id="30393-125">Clusters running on Azure or standalone clusters running on Windows can use either [Certificate Security](https://msdn.microsoft.com/library/ff649801.aspx) or [Windows Security](https://msdn.microsoft.com/library/ff649396.aspx) for Windows Server machines.</span></span>

<span data-ttu-id="30393-126">**節點對節點憑證安全性**</span><span class="sxs-lookup"><span data-stu-id="30393-126">**Node-to-node certificate security**</span></span>

<span data-ttu-id="30393-127">服務網狀架構會使用 X.509 伺服器憑證，當您建立叢集時，您指定為 hello 節點型別組態的一部分。</span><span class="sxs-lookup"><span data-stu-id="30393-127">Service Fabric uses X.509 server certificates that you specify as a part of hello node-type configurations when you create a cluster.</span></span> <span data-ttu-id="30393-128">若要快速了解這些憑證是什麼，以及如何取得或建立這些憑證，請參閱[這篇文章](https://docs.microsoft.com/dotnet/framework/wcf/feature-details/working-with-certificates)。</span><span class="sxs-lookup"><span data-stu-id="30393-128">A quick overview of what these certificates are and [how you can acquire or create them is provided in this article](https://docs.microsoft.com/dotnet/framework/wcf/feature-details/working-with-certificates).</span></span>

<span data-ttu-id="30393-129">憑證的安全性設定時建立 hello 叢集透過 hello Azure 入口網站、 Azure Resource Manager 範本或獨立 JSON 範本。</span><span class="sxs-lookup"><span data-stu-id="30393-129">Certificate security is configured while creating hello cluster either through hello Azure portal, Azure Resource Manager templates, or a standalone JSON template.</span></span> <span data-ttu-id="30393-130">您可以指定用於憑證變換的主要憑證和選用次要憑證。</span><span class="sxs-lookup"><span data-stu-id="30393-130">You can specify a primary certificate and an optional secondary certificate that is used for certificate rollovers.</span></span> <span data-ttu-id="30393-131">hello 您指定的主要和次要憑證應不同於 hello 管理用戶端以及您針對指定的唯讀用戶端憑證[用戶端對節點安全性](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-cluster-security)。</span><span class="sxs-lookup"><span data-stu-id="30393-131">hello primary and secondary certificates you specify should be different than hello admin client and read-only client certificates you specify for  [Client-to-node security](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-cluster-security).</span></span>

### <a name="client-to-node-security"></a><span data-ttu-id="30393-132">用戶端對節點安全性</span><span class="sxs-lookup"><span data-stu-id="30393-132">Client-to-node security</span></span>
<span data-ttu-id="30393-133">使用用戶端身分識別來設定用戶端 toonode 安全性。</span><span class="sxs-lookup"><span data-stu-id="30393-133">Client toonode security is configured using Client Identities.</span></span> <span data-ttu-id="30393-134">tooestablish 之間的信任的用戶端與 hello 叢集中，您必須設定 hello 叢集 tooknow 可以信任哪些用戶端身分識別。</span><span class="sxs-lookup"><span data-stu-id="30393-134">tooestablish trust between a client and hello cluster, you must configure hello cluster tooknow which client identities that it can trust.</span></span> <span data-ttu-id="30393-135">這有兩種不同的方式可以完成：</span><span class="sxs-lookup"><span data-stu-id="30393-135">This can be done in two different ways:</span></span>

-   <span data-ttu-id="30393-136">指定可以連接的 hello 網域群組使用者或</span><span class="sxs-lookup"><span data-stu-id="30393-136">Specify hello domain group users that can connect or</span></span>
-   <span data-ttu-id="30393-137">指定可以連接的 hello 網域節點使用者。</span><span class="sxs-lookup"><span data-stu-id="30393-137">Specify hello domain node users that can connect.</span></span>

<span data-ttu-id="30393-138">Service Fabric 支援兩種不同的存取控制類型的用戶端的連線的 tooa Service Fabric 叢集：</span><span class="sxs-lookup"><span data-stu-id="30393-138">Service Fabric supports two different access control types for clients that are connected tooa Service Fabric cluster:</span></span>

-   <span data-ttu-id="30393-139">系統管理員</span><span class="sxs-lookup"><span data-stu-id="30393-139">Administrator</span></span>
-   <span data-ttu-id="30393-140">User</span><span class="sxs-lookup"><span data-stu-id="30393-140">User</span></span>

<span data-ttu-id="30393-141">存取控制提供 hello hello 能力叢集系統管理員 toolimit 存取 toocertain 類型的使用者，使 hello 叢集更安全的不同群組的叢集操作。</span><span class="sxs-lookup"><span data-stu-id="30393-141">Access control provides hello ability for hello cluster administrator toolimit access toocertain types of cluster operations for different groups of users, making hello cluster more secure.</span></span> <span data-ttu-id="30393-142">系統管理員具有完整存取 toomanagement 功能 （包括讀取/寫入功能）。</span><span class="sxs-lookup"><span data-stu-id="30393-142">Administrators have full access toomanagement capabilities (including read/write capabilities).</span></span> <span data-ttu-id="30393-143">使用者，根據預設，具有讀取權限 toomanagement 功能 （例如，查詢功能） 和 hello 能力 tooresolve 應用程式和服務。</span><span class="sxs-lookup"><span data-stu-id="30393-143">Users, by default, have only read access toomanagement capabilities (for example, query capabilities), and hello ability tooresolve applications and services.</span></span>

<span data-ttu-id="30393-144">**用戶端對節點憑證安全性**</span><span class="sxs-lookup"><span data-stu-id="30393-144">**Client-to-node certificate security**</span></span>

<span data-ttu-id="30393-145">用戶端對節點憑證的安全性設定時建立 hello 叢集透過 hello Azure 入口網站中，資源管理員範本或藉由指定的系統管理員用戶端憑證及/或使用者的用戶端憑證的獨立 JSON 範本。</span><span class="sxs-lookup"><span data-stu-id="30393-145">Client-to-node certificate security is configured while creating hello cluster either through hello Azure portal, Resource Manager Templates or a standalone JSON template by specifying an admin client certificate and/or a user client certificate.</span></span> <span data-ttu-id="30393-146">hello 管理用戶端和使用者用戶端憑證指定應該不同於您指定的節點到節點安全性 hello 主要和次要憑證。</span><span class="sxs-lookup"><span data-stu-id="30393-146">hello admin client and user client certificates you specify should be different than hello primary and secondary certificates you specify for Node-to-node security.</span></span>

<span data-ttu-id="30393-147">連接 toohello 叢集使用 hello 管理憑證的用戶端具有完整存取 toomanagement 功能。</span><span class="sxs-lookup"><span data-stu-id="30393-147">Clients connecting toohello cluster using hello admin certificate have full access toomanagement capabilities.</span></span> <span data-ttu-id="30393-148">連接 toohello 叢集使用 hello 唯讀使用者用戶端憑證的用戶端擁有讀取權限 toomanagement 功能。</span><span class="sxs-lookup"><span data-stu-id="30393-148">Clients connecting toohello cluster using hello read-only user client certificate have only read access toomanagement capabilities.</span></span> <span data-ttu-id="30393-149">在 word 中，這些憑證用於 hello 角色為基礎的存取控制 (RBAC)。</span><span class="sxs-lookup"><span data-stu-id="30393-149">In other word these certificates are used for hello role bases access control (RBAC).</span></span>

<span data-ttu-id="30393-150">讀取 Azure[設定叢集，利用 Azure 資源管理員範本](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm)toolearn tooconfigure 憑證安全性在叢集中的方式。</span><span class="sxs-lookup"><span data-stu-id="30393-150">For Azure read [Set up a cluster by using an Azure Resource Manager template](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm) toolearn how tooconfigure certificate security in a cluster.</span></span>

<span data-ttu-id="30393-151">**Azure 上的用戶端對節點 Azure Active Directory (AAD) 安全性**</span><span class="sxs-lookup"><span data-stu-id="30393-151">**Client-to-node Azure Active Directory (AAD) security on Azure**</span></span>

<span data-ttu-id="30393-152">在 Azure 上執行的叢集也可以保護存取使用 Azure Active Directory (AAD) toohello 管理端點。</span><span class="sxs-lookup"><span data-stu-id="30393-152">Clusters running on Azure can also secure access toohello management endpoints using Azure Active Directory (AAD).</span></span> <span data-ttu-id="30393-153">請參閱[設定叢集，利用 Azure 資源管理員範本](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm)如需如何 toocreate hello 需要 AAD 成品時，如何 toopopulate 期間叢集建立和 tooconnect toothose 之後叢集的方式。</span><span class="sxs-lookup"><span data-stu-id="30393-153">See [Set up a cluster by using an Azure Resource Manager template](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm) for information on how toocreate hello necessary AAD artifacts, how toopopulate them during cluster creation, and how tooconnect toothose clusters afterwards.</span></span>

<span data-ttu-id="30393-154">AAD 讓組織 （又稱為租用戶） toomanage 使用者存取 tooapplications，它們分成網頁型登入 UI 的應用程式和原生用戶端體驗的應用程式。</span><span class="sxs-lookup"><span data-stu-id="30393-154">AAD enables organizations (known as tenants) toomanage user access tooapplications, which are divided into applications with a web-based login UI and applications with a native client experience.</span></span>

<span data-ttu-id="30393-155">Service Fabric 叢集提供數個進入點 tooits 的管理功能，包括 hello web Service Fabric Explorer 和 Visual Studio。</span><span class="sxs-lookup"><span data-stu-id="30393-155">A Service Fabric cluster offers several entry points tooits management functionality, including hello web-based Service Fabric Explorer and Visual Studio.</span></span> <span data-ttu-id="30393-156">如此一來，您會建立兩個 AAD 應用程式 toocontrol 存取 toohello 叢集、 一個 web 應用程式和一個原生應用程式。</span><span class="sxs-lookup"><span data-stu-id="30393-156">As a result, you create two AAD applications toocontrol access toohello cluster, one web application and one native application.</span></span>
<span data-ttu-id="30393-157">Azure 的叢集，建議您使用用戶端的安全性 tooauthenticate AAD 和憑證節點對節點的安全性。</span><span class="sxs-lookup"><span data-stu-id="30393-157">For Azure clusters, it is recommended that you use AAD security tooauthenticate clients and certificates for node-to-node security.</span></span>

<span data-ttu-id="30393-158">對於獨立 Windows Server 叢集，如果您有 Windows Server 2012 R2 和 Active Directory，建議您使用 Windows 安全性與群組管理帳戶 (GMA)。</span><span class="sxs-lookup"><span data-stu-id="30393-158">For standalone Windows Server clusters, it is recommended that you use Windows security with group managed accounts (GMA) if you have Windows Server 2012 R2 and Active Directory.</span></span> <span data-ttu-id="30393-159">否則仍然使用 Windows 安全性與 Windows 帳戶。</span><span class="sxs-lookup"><span data-stu-id="30393-159">Otherwise still use Windows security with Windows accounts.</span></span>

## <a name="monitoring-and-diagnostics-for-azure-service-fabric"></a><span data-ttu-id="30393-160">對 Azure Service Fabric 進行監視和診斷</span><span class="sxs-lookup"><span data-stu-id="30393-160">Monitoring and diagnostics for Azure Service Fabric</span></span>
<span data-ttu-id="30393-161">[監視和診斷](https://docs.microsoft.com/azure/service-fabric/service-fabric-diagnostics-overview)是重大 toodeveloping 測試和任何環境中部署應用程式和服務。</span><span class="sxs-lookup"><span data-stu-id="30393-161">[Monitoring and diagnostics](https://docs.microsoft.com/azure/service-fabric/service-fabric-diagnostics-overview) are critical toodeveloping, testing, and deploying applications and services in any environment.</span></span> <span data-ttu-id="30393-162">如果您要規劃和實作監視和診斷功能，以協助確保應用程式和服務可在本機開發環境或生產環境中如預期般運作，Service Fabric 解決方案就是理想之選。</span><span class="sxs-lookup"><span data-stu-id="30393-162">Service Fabric solutions work best when you plan and implement monitoring and diagnostics that help ensure applications and services are working as expected in a local development environment or in production.</span></span>

<span data-ttu-id="30393-163">從安全性觀點來看，hello 主要目標的監視和診斷要：</span><span class="sxs-lookup"><span data-stu-id="30393-163">From a security perspective, hello main goals of monitoring and diagnostics are to:</span></span>

-   <span data-ttu-id="30393-164">偵測及診斷可能是由於在 tooa 安全性事件的硬體和基礎結構問題。</span><span class="sxs-lookup"><span data-stu-id="30393-164">Detect and diagnose hardware and infrastructure issues that might be due tooa security event.</span></span>
-   <span data-ttu-id="30393-165">偵測可能提供入侵指標 (Indicator of Compromise，IoC) 的軟體和應用程式問題。</span><span class="sxs-lookup"><span data-stu-id="30393-165">Detect software and app issues which could provide indicator of compromise (IoC).</span></span>
-   <span data-ttu-id="30393-166">了解資源耗用量 toohelp 避免不小心阻絕服務。</span><span class="sxs-lookup"><span data-stu-id="30393-166">Understand resource consumption toohelp prevent inadvertent denial of service.</span></span>

<span data-ttu-id="30393-167">hello 整體的工作流程的監視和診斷包含三個步驟：</span><span class="sxs-lookup"><span data-stu-id="30393-167">hello overall workflow of monitoring and diagnostics consists of three steps:</span></span>

-   <span data-ttu-id="30393-168">**事件產生：**這包括在 hello 基礎結構 （叢集） 和應用程式 / 服務層級的事件記錄檔、 追蹤 （自訂的事件）。</span><span class="sxs-lookup"><span data-stu-id="30393-168">**Event generation:** this includes events (logs, traces, custom events) at both hello infrastructure (cluster) and application / service level.</span></span> <span data-ttu-id="30393-169">深入了解[基礎結構層級事件](https://docs.microsoft.com/azure/service-fabric/service-fabric-diagnostics-event-generation-infra)和[應用程式層級事件](https://docs.microsoft.com/azure/service-fabric/service-fabric-diagnostics-event-generation-app)toounderstand 所提供內容和 tooadd 如何進一步檢測。</span><span class="sxs-lookup"><span data-stu-id="30393-169">Read more about [infrastructure level events](https://docs.microsoft.com/azure/service-fabric/service-fabric-diagnostics-event-generation-infra) and [application level events](https://docs.microsoft.com/azure/service-fabric/service-fabric-diagnostics-event-generation-app) toounderstand what is provided and how tooadd further instrumentation.</span></span>
-   <span data-ttu-id="30393-170">**事件彙總：**產生的事件需要 toobe 收集並彙總，然後才能顯示。</span><span class="sxs-lookup"><span data-stu-id="30393-170">**Event aggregation:** generated events need toobe collected and aggregated before they can be displayed.</span></span> <span data-ttu-id="30393-171">我們通常建議使用[Azure 診斷](https://docs.microsoft.com/azure/service-fabric/service-fabric-diagnostics-event-aggregation-wad)（比較類似 tooagent 為基礎的記錄檔集合） 或[EventFlow](https://docs.microsoft.com/azure/service-fabric/service-fabric-diagnostics-event-aggregation-eventflow) （同處理序記錄檔集合）。</span><span class="sxs-lookup"><span data-stu-id="30393-171">We typically recommend using [Azure Diagnostics](https://docs.microsoft.com/azure/service-fabric/service-fabric-diagnostics-event-aggregation-wad) (more similar tooagent-based log collection) or [EventFlow](https://docs.microsoft.com/azure/service-fabric/service-fabric-diagnostics-event-aggregation-eventflow) (in-process log collection).</span></span>
-   <span data-ttu-id="30393-172">**分析：**事件需要 toobe 視覺化且可存取某些格式、 tooallow 分析及顯示所需。</span><span class="sxs-lookup"><span data-stu-id="30393-172">**Analysis:** events need toobe visualized and accessible in some format, tooallow for analysis and display as needed.</span></span> <span data-ttu-id="30393-173">有數個很好的平台 toohello 分析和視覺效果的監視和診斷資料時存在於 hello 市場。</span><span class="sxs-lookup"><span data-stu-id="30393-173">There are several great platforms that exist in hello market when it comes toohello analysis and visualization of monitoring and diagnostics data.</span></span> <span data-ttu-id="30393-174">hello 建議的兩個是[OMS](https://docs.microsoft.com/azure/service-fabric/service-fabric-diagnostics-event-analysis-oms)和[Application Insights](https://docs.microsoft.com/azure/service-fabric/service-fabric-diagnostics-event-analysis-appinsights)到期 tootheir 更佳的整合服務的網狀架構。</span><span class="sxs-lookup"><span data-stu-id="30393-174">hello two that we recommend are [OMS](https://docs.microsoft.com/azure/service-fabric/service-fabric-diagnostics-event-analysis-oms) and [Application Insights](https://docs.microsoft.com/azure/service-fabric/service-fabric-diagnostics-event-analysis-appinsights) due tootheir better integration with Service Fabric.</span></span>

<span data-ttu-id="30393-175">您也可以使用[Azure 監視器](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview)toomonitor 許多 hello Azure Service Fabric 叢集建立所在的資源。</span><span class="sxs-lookup"><span data-stu-id="30393-175">You can also use [Azure Monitor](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview) toomonitor many of hello Azure resources on which a Service Fabric cluster is built.</span></span>

<span data-ttu-id="30393-176">監視是不同的服務可以觀賞健全狀況和 hello 健康情況模型階層中的任何項目載入跨服務和報表的健全狀況。</span><span class="sxs-lookup"><span data-stu-id="30393-176">A watchdog is a separate service that can watch health and load across services, and report health for anything in hello health model hierarchy.</span></span> <span data-ttu-id="30393-177">這可協助防止將不會偵測根據 hello 檢視的單一服務的錯誤。</span><span class="sxs-lookup"><span data-stu-id="30393-177">This can help prevent errors that would not be detected based on hello view of a single service.</span></span> <span data-ttu-id="30393-178">Watchdogs 也是很好的起點 toohost 程式碼執行修復動作，而不需使用者互動 （例如，在特定時間間隔內清除記錄檔儲存體中）。</span><span class="sxs-lookup"><span data-stu-id="30393-178">Watchdogs are also a good place toohost code that performs remedial actions without user interaction (for example, cleaning up log files in storage at certain time intervals).</span></span> <span data-ttu-id="30393-179">您可以在[這裡](https://azure.microsoft.com/resources/samples/service-fabric-watchdog-service/)找到範例監視程式服務實作。</span><span class="sxs-lookup"><span data-stu-id="30393-179">You can find a sample watchdog service implementation [here](https://azure.microsoft.com/resources/samples/service-fabric-watchdog-service/).</span></span>

## <a name="secure-using-certificates"></a><span data-ttu-id="30393-180">使用憑證提供保護</span><span class="sxs-lookup"><span data-stu-id="30393-180">Secure using Certificates</span></span>
<span data-ttu-id="30393-181">它使用的憑證，會告訴如何 toosecure hello 溝通 hello 獨立 Windows 叢集的不同節點，以及如何 tooauthenticate 連接的用戶端 toothis 叢集會使用 X.509 憑證。</span><span class="sxs-lookup"><span data-stu-id="30393-181">Using certificates, it tells how toosecure hello communication between hello various nodes of your standalone Windows cluster, as well as how tooauthenticate clients connecting toothis cluster, using X.509 certificates.</span></span> <span data-ttu-id="30393-182">這樣可以確保，只有授權的使用者可以存取 hello 叢集 hello 部署之應用程式執行管理工作。</span><span class="sxs-lookup"><span data-stu-id="30393-182">This ensures that only authorized users can access hello cluster, hello deployed applications and perform management tasks.</span></span> <span data-ttu-id="30393-183">建立 hello 叢集時，應該 hello 叢集上啟用憑證安全性。</span><span class="sxs-lookup"><span data-stu-id="30393-183">Certificate security should be enabled on hello cluster when hello cluster is created.</span></span>

### <a name="x509-certificates-and-service-fabric"></a><span data-ttu-id="30393-184">X.509 憑證和 Service Fabric</span><span class="sxs-lookup"><span data-stu-id="30393-184">X.509 certificates and Service Fabric</span></span>
<span data-ttu-id="30393-185">X.509 數位憑證是常用的 tooauthenticate 用戶端和伺服器與 tooencrypt 以及數位簽署訊息。</span><span class="sxs-lookup"><span data-stu-id="30393-185">X.509 digital certificates are commonly used tooauthenticate clients and servers and tooencrypt and digitally sign messages.</span></span>

<span data-ttu-id="30393-186">hello 下表列出您必須在叢集設定的 hello 憑證：</span><span class="sxs-lookup"><span data-stu-id="30393-186">hello following table lists hello certificates that you will need on your cluster setup:</span></span>

|<span data-ttu-id="30393-187">憑證資訊設定</span><span class="sxs-lookup"><span data-stu-id="30393-187">Certificate Information Setting</span></span> |<span data-ttu-id="30393-188">說明</span><span class="sxs-lookup"><span data-stu-id="30393-188">Description</span></span>|
|-------------------------------|-----------|
|<span data-ttu-id="30393-189">ClusterCertificate</span><span class="sxs-lookup"><span data-stu-id="30393-189">ClusterCertificate</span></span>|    <span data-ttu-id="30393-190">此憑證是在叢集上的 hello 節點之間需要的 toosecure hello 通訊。</span><span class="sxs-lookup"><span data-stu-id="30393-190">This certificate is required toosecure hello communication between hello nodes on a cluster.</span></span> <span data-ttu-id="30393-191">您可以使用兩個不同的憑證 (主要和次要) 進行更新。</span><span class="sxs-lookup"><span data-stu-id="30393-191">You can use two different certificates, a primary and a secondary for upgrade.</span></span>|
|<span data-ttu-id="30393-192">ServerCertificate</span><span class="sxs-lookup"><span data-stu-id="30393-192">ServerCertificate</span></span>| <span data-ttu-id="30393-193">當它嘗試 tooconnect toothis 叢集時，此憑證會呈現 toohello 用戶端。</span><span class="sxs-lookup"><span data-stu-id="30393-193">This certificate is presented toohello client when it tries tooconnect toothis cluster.</span></span> <span data-ttu-id="30393-194">您可以使用兩個不同的伺服器憑證 (主要和次要) 進行更新。</span><span class="sxs-lookup"><span data-stu-id="30393-194">You can use two different server certificates, a primary and a secondary for upgrade.</span></span>|
|<span data-ttu-id="30393-195">ClientCertificateThumbprints</span><span class="sxs-lookup"><span data-stu-id="30393-195">ClientCertificateThumbprints</span></span>|  <span data-ttu-id="30393-196">這是一組您想 tooinstall hello 驗證用戶端上的憑證。</span><span class="sxs-lookup"><span data-stu-id="30393-196">This is a set of certificates that you want tooinstall on hello authenticated clients.</span></span>|
|<span data-ttu-id="30393-197">ClientCertificateCommonNames</span><span class="sxs-lookup"><span data-stu-id="30393-197">ClientCertificateCommonNames</span></span>|  <span data-ttu-id="30393-198">設定 hello 的一般名稱的第一個用戶端憑證 hello hello CertificateCommonName。</span><span class="sxs-lookup"><span data-stu-id="30393-198">Set hello common name of hello first client certificate for hello CertificateCommonName.</span></span> <span data-ttu-id="30393-199">hello CertificateIssuerThumbprint 是 hello hello 簽發者，此憑證的指紋。</span><span class="sxs-lookup"><span data-stu-id="30393-199">hello CertificateIssuerThumbprint is hello thumbprint for hello issuer of this certificate.</span></span>|
|<span data-ttu-id="30393-200">ReverseProxyCertificate</span><span class="sxs-lookup"><span data-stu-id="30393-200">ReverseProxyCertificate</span></span>|   <span data-ttu-id="30393-201">這是選擇性的憑證，可以指定是否要讓 toosecure 您[反向 Proxy](https://docs.microsoft.com/azure/service-fabric/service-fabric-reverseproxy)。</span><span class="sxs-lookup"><span data-stu-id="30393-201">This is an optional certificate that can be specified if you want toosecure your [Reverse Proxy](https://docs.microsoft.com/azure/service-fabric/service-fabric-reverseproxy).</span></span>|

<span data-ttu-id="30393-202">如需保護憑證的詳細資訊，[請按一下這裡](https://docs.microsoft.com/azure/service-fabric/service-fabric-windows-cluster-x509-security)。</span><span class="sxs-lookup"><span data-stu-id="30393-202">For more information on securing certificates, [click here](https://docs.microsoft.com/azure/service-fabric/service-fabric-windows-cluster-x509-security).</span></span>

## <a name="role-based-access-control-rbac"></a><span data-ttu-id="30393-203">角色型存取控制 (RBAC)</span><span class="sxs-lookup"><span data-stu-id="30393-203">Role-based access control (RBAC)</span></span>
<span data-ttu-id="30393-204">存取控制可讓 hello 叢集系統管理員 toolimit 存取 toocertain 叢集作業會針對不同使用者群組，讓 hello 叢集更安全。</span><span class="sxs-lookup"><span data-stu-id="30393-204">Access control allows hello cluster administrator toolimit access toocertain cluster operations for different groups of users, making hello cluster more secure.</span></span> <span data-ttu-id="30393-205">兩個不同的存取控制項類型支援連接 tooa 叢集的用戶端： 系統管理員角色和使用者角色。</span><span class="sxs-lookup"><span data-stu-id="30393-205">Two different access control types are supported for clients connecting tooa cluster: Administrator role and User role.</span></span>

<span data-ttu-id="30393-206">系統管理員具有完整存取 toomanagement 功能 （包括讀取/寫入功能）。</span><span class="sxs-lookup"><span data-stu-id="30393-206">Administrators have full access toomanagement capabilities (including read/write capabilities).</span></span> <span data-ttu-id="30393-207">使用者，根據預設，具有讀取權限 toomanagement 功能 （例如，查詢功能） 和 hello 能力 tooresolve 應用程式和服務。</span><span class="sxs-lookup"><span data-stu-id="30393-207">Users, by default, have only read access toomanagement capabilities (for example, query capabilities), and hello ability tooresolve applications and services.</span></span>

<span data-ttu-id="30393-208">您指定 hello 系統管理員和使用者用戶端角色 hello 叢集建立時提供不同的身分識別 （憑證，AAD 等） 針對每個。</span><span class="sxs-lookup"><span data-stu-id="30393-208">You specify hello administrator and user client roles at hello time of cluster creation by providing separate identities (certificates, AAD etc.) for each.</span></span> <span data-ttu-id="30393-209">如需有關 hello 預設存取控制設定，以及如何 toochange hello 預設設定的詳細資訊，請參閱[角色型存取控制服務網狀架構用戶端](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-roles)。</span><span class="sxs-lookup"><span data-stu-id="30393-209">For more information on hello default access control settings and how toochange hello default settings, see [Role based access control for Service Fabric clients](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-roles).</span></span>

## <a name="secure-standalone-cluster-using-windows-security"></a><span data-ttu-id="30393-210">使用 Windows 安全性保護獨立叢集</span><span class="sxs-lookup"><span data-stu-id="30393-210">Secure standalone cluster using Windows security</span></span>
<span data-ttu-id="30393-211">tooprevent 未經授權存取 tooa Service Fabric 叢集，您必須保護 hello 叢集。</span><span class="sxs-lookup"><span data-stu-id="30393-211">tooprevent unauthorized access tooa Service Fabric cluster, you must secure hello cluster.</span></span> <span data-ttu-id="30393-212">Hello 叢集中執行生產工作負載時，安全性是特別重要。</span><span class="sxs-lookup"><span data-stu-id="30393-212">Security is especially important when hello cluster runs production workloads.</span></span> <span data-ttu-id="30393-213">本主題描述如何使用 Windows 安全性的 tooconfigure 節點對節點和用戶端對節點安全性 hello 追蹤檔案。</span><span class="sxs-lookup"><span data-stu-id="30393-213">It describes how tooconfigure node-to-node and client-to-node security by using Windows security in hello ClusterConfig.JSON file.</span></span>

<span data-ttu-id="30393-214">**使用 gMSA 設定 Windows 安全性**</span><span class="sxs-lookup"><span data-stu-id="30393-214">**Configure Windows security using gMSA**</span></span>

<span data-ttu-id="30393-215">藉由設定已設定的節點 toonode 安全性[ClustergMSAIdentity](https://docs.microsoft.com/azure/service-fabric/service-fabric-windows-cluster-windows-security)當 service fabric 需要 toorun 下 gMSA。</span><span class="sxs-lookup"><span data-stu-id="30393-215">Node toonode security is configured by setting [ClustergMSAIdentity](https://docs.microsoft.com/azure/service-fabric/service-fabric-windows-cluster-windows-security) when service fabric needs toorun under gMSA.</span></span> <span data-ttu-id="30393-216">在訂單 toobuild 節點之間的信任關係，他們必須撰寫知道彼此的存在。</span><span class="sxs-lookup"><span data-stu-id="30393-216">In order toobuild trust relationships between nodes, they must be made aware of each other.</span></span>

<span data-ttu-id="30393-217">使用 ClientIdentities 設定用戶端 toonode 安全性。</span><span class="sxs-lookup"><span data-stu-id="30393-217">Client toonode security is configured using ClientIdentities.</span></span> <span data-ttu-id="30393-218">在用戶端與 hello 叢集之間的順序 tooestablish 信任，您必須設定 hello 叢集 tooknow 可以信任哪些用戶端身分識別。</span><span class="sxs-lookup"><span data-stu-id="30393-218">In order tooestablish trust between a client and hello cluster, you must configure hello cluster tooknow which client identities that it can trust.</span></span>

<span data-ttu-id="30393-219">**使用電腦群組設定 Windows 安全性**</span><span class="sxs-lookup"><span data-stu-id="30393-219">**Configure Windows security using a machine group**</span></span>

<span data-ttu-id="30393-220">使用 ClusterIdentity，如果您想 toouse 機器群組在 Active Directory 網域內的設定會設定節點 toonode 安全性。</span><span class="sxs-lookup"><span data-stu-id="30393-220">Node toonode security is configured by setting using ClusterIdentity if you want toouse a machine group within an Active Directory Domain.</span></span> <span data-ttu-id="30393-221">如需詳細資訊，請參閱[在 Active Directory 中建立電腦群組 (Create a Machine Group in Active Directory)](https://msdn.microsoft.com/library/aa545347)。</span><span class="sxs-lookup"><span data-stu-id="30393-221">For more information, see [Create a Machine Group in Active Directory](https://msdn.microsoft.com/library/aa545347).</span></span>

<span data-ttu-id="30393-222">用戶端對節點安全性是使用 ClientIdentities 來設定的。</span><span class="sxs-lookup"><span data-stu-id="30393-222">Client-to-node security is configured by using ClientIdentities.</span></span> <span data-ttu-id="30393-223">tooestablish 之間的信任的用戶端與 hello 叢集中，您必須設定 hello 叢集 tooknow hello 用戶端 hello 叢集的身分識別可以信任。</span><span class="sxs-lookup"><span data-stu-id="30393-223">tooestablish trust between a client and hello cluster, you must configure hello cluster tooknow hello client identities that hello cluster can trust.</span></span> <span data-ttu-id="30393-224">您可以透過兩種不同方式建立信任︰</span><span class="sxs-lookup"><span data-stu-id="30393-224">You can establish trust in two different ways:</span></span>

-   <span data-ttu-id="30393-225">指定可以連接的 hello 網域群組使用者。</span><span class="sxs-lookup"><span data-stu-id="30393-225">Specify hello domain group users that can connect.</span></span>
-   <span data-ttu-id="30393-226">指定可以連接的 hello 網域節點使用者。</span><span class="sxs-lookup"><span data-stu-id="30393-226">Specify hello domain node users that can connect.</span></span>

## <a name="configure-application-security-in-service-fabric"></a><span data-ttu-id="30393-227">在 Service Fabric 中設定應用程式安全性</span><span class="sxs-lookup"><span data-stu-id="30393-227">Configure application security in Service Fabric</span></span>
### <a name="managing-secrets-in-service-fabric-applications"></a><span data-ttu-id="30393-228">管理 Service Fabric 應用程式中的密碼</span><span class="sxs-lookup"><span data-stu-id="30393-228">Managing secrets in Service Fabric applications</span></span>
<span data-ttu-id="30393-229">此方法可協助管理 Service Fabric 應用程式中的密碼。</span><span class="sxs-lookup"><span data-stu-id="30393-229">This method helps in managing secrets in a Service Fabric application.</span></span> <span data-ttu-id="30393-230">密碼可以是任何機密資訊，例如儲存體連接字串、密碼或其他不會以純文字處理的值。</span><span class="sxs-lookup"><span data-stu-id="30393-230">Secrets can be any sensitive information, such as storage connection strings, passwords, or other values that should not be handled in plain text.</span></span>

<span data-ttu-id="30393-231">這種方法使用[Azure 金鑰保存庫](https://docs.microsoft.com/azure/key-vault/key-vault-whatis)toomanage 金鑰和密碼。</span><span class="sxs-lookup"><span data-stu-id="30393-231">This approach uses [Azure Key Vault](https://docs.microsoft.com/azure/key-vault/key-vault-whatis) toomanage keys and secrets.</span></span> <span data-ttu-id="30393-232">不過，應用程式中使用的密碼是雲端 tooallow 無從驗證平台應用程式部署的 toobe tooa 叢集裝載的任何位置。</span><span class="sxs-lookup"><span data-stu-id="30393-232">However, using secrets in an application is cloud platform-agnostic tooallow applications toobe deployed tooa cluster hosted anywhere.</span></span> <span data-ttu-id="30393-233">此流程有四個主要步驟︰</span><span class="sxs-lookup"><span data-stu-id="30393-233">There are four main steps in this flow:</span></span>

-   <span data-ttu-id="30393-234">取得資料編密憑證。</span><span class="sxs-lookup"><span data-stu-id="30393-234">Obtain a data encipherment certificate.</span></span>
-   <span data-ttu-id="30393-235">在您的叢集安裝 hello 憑證。</span><span class="sxs-lookup"><span data-stu-id="30393-235">Install hello certificate in your cluster.</span></span>
-   <span data-ttu-id="30393-236">時部署應用程式與 hello 憑證加密密碼的值，並將它們插入服務 Settings.xml 組態檔。</span><span class="sxs-lookup"><span data-stu-id="30393-236">Encrypt secret values when deploying an application with hello certificate and inject them into a service's Settings.xml configuration file.</span></span>
-   <span data-ttu-id="30393-237">讀取加密值超出 Settings.xml 解密與 hello 相同的加密憑證。</span><span class="sxs-lookup"><span data-stu-id="30393-237">Read encrypted values out of Settings.xml by decrypting with hello same encipherment certificate.</span></span>

>[!Note]
><span data-ttu-id="30393-238">深入了解[管理 Service Fabric 應用程式中的密碼](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-secret-management)。</span><span class="sxs-lookup"><span data-stu-id="30393-238">Learn more about [Managing secrets in Service Fabric applications](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-secret-management).</span></span>

### <a name="configure-security-policies-for-your-application"></a><span data-ttu-id="30393-239">設定應用程式的安全性原則</span><span class="sxs-lookup"><span data-stu-id="30393-239">Configure security policies for your application</span></span>
<span data-ttu-id="30393-240">使用 Azure Service Fabric 安全性，您可以協助安全 hello 叢集中不同的使用者帳戶下執行的應用程式。</span><span class="sxs-lookup"><span data-stu-id="30393-240">By using Azure Service Fabric Security, you can help secure applications that are running in hello cluster under different user accounts.</span></span> <span data-ttu-id="30393-241">服務網狀架構安全性也有助於安全 hello 資源所使用的應用程式中的 hello 使用者帳戶-部署的 hello 時段，例如、 檔案、 目錄和憑證。</span><span class="sxs-lookup"><span data-stu-id="30393-241">Service Fabric Security also helps secure hello resources that are used by applications at hello time of deployment under hello user accounts--for example, files, directories, and certificates.</span></span> <span data-ttu-id="30393-242">如此一來，即使在共用主控環境中，執行中的應用程式就不會彼此干擾。</span><span class="sxs-lookup"><span data-stu-id="30393-242">This makes running applications, even in a shared hosted environment, more secure from one another.</span></span>
<span data-ttu-id="30393-243">hello 步驟包括：</span><span class="sxs-lookup"><span data-stu-id="30393-243">hello steps include:</span></span>

-   <span data-ttu-id="30393-244">設定服務安裝程式的進入點的 hello 原則。</span><span class="sxs-lookup"><span data-stu-id="30393-244">Configure hello policy for a service setup entry point.</span></span>
-   <span data-ttu-id="30393-245">從安裝程式進入點啟動 PowerShell 命令。</span><span class="sxs-lookup"><span data-stu-id="30393-245">Start PowerShell commands from a setup entry point.</span></span>
-   <span data-ttu-id="30393-246">使用主控台重新導向進行本機偵錯。</span><span class="sxs-lookup"><span data-stu-id="30393-246">Use console redirection for local debugging.</span></span>
-   <span data-ttu-id="30393-247">設定服務程式碼封裝的原則。</span><span class="sxs-lookup"><span data-stu-id="30393-247">Configure a policy for service code packages.</span></span>
-   <span data-ttu-id="30393-248">為 HTTP 和 HTTPS 端點指派安全性存取原則。</span><span class="sxs-lookup"><span data-stu-id="30393-248">Assign a security access policy for HTTP and HTTPS endpoints.</span></span>

## <a name="secure-communication-for-services-in-azure-service-fabric-security"></a><span data-ttu-id="30393-249">保護 Azure Service Fabric 安全性中服務的通訊安全</span><span class="sxs-lookup"><span data-stu-id="30393-249">Secure communication for services in Azure Service Fabric security</span></span>
<span data-ttu-id="30393-250">安全性是 hello 通訊的最重要的層面的其中一個。</span><span class="sxs-lookup"><span data-stu-id="30393-250">Security is one of hello most important aspects of communication.</span></span> <span data-ttu-id="30393-251">hello 可靠的服務應用程式架構會提供數的預先建立的通訊堆疊，可以使用的 tooimprove 安全性的工具。</span><span class="sxs-lookup"><span data-stu-id="30393-251">hello Reliable Services application framework provides a few prebuilt communication stacks and tools that can be used tooimprove security.</span></span>

-   <span data-ttu-id="30393-252">[協助保護使用服務遠端處理時的服務安全](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-secure-communication)。</span><span class="sxs-lookup"><span data-stu-id="30393-252">[Help secure a service when you're using service remoting](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-secure-communication).</span></span>
-   <span data-ttu-id="30393-253">[協助保護使用 WCF 通訊堆疊時的服務安全](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-secure-communication#help-secure-a-service-when-youre-using-a-wcf-based-communication-stack)。</span><span class="sxs-lookup"><span data-stu-id="30393-253">[Help secure a service when you're using a WCF-based communication stack](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-secure-communication#help-secure-a-service-when-youre-using-a-wcf-based-communication-stack).</span></span>

## <a name="next-steps"></a><span data-ttu-id="30393-254">後續步驟</span><span class="sxs-lookup"><span data-stu-id="30393-254">Next steps</span></span>
- <span data-ttu-id="30393-255">如需叢集安全性的概念資訊，請參閱[使用 Resource Manager 範本在 Azure 中建立叢集](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm)和 [Azure 入口網站](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-portal)。</span><span class="sxs-lookup"><span data-stu-id="30393-255">For conceptual information about cluster security, see [create a cluster in Azure using a Resource Manager template](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm) and [Azure portal](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-portal).</span></span>
- <span data-ttu-id="30393-256">如需詳細資訊，請參閱 [Service Fabric 叢集安全性](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security)。</span><span class="sxs-lookup"><span data-stu-id="30393-256">Learn more about, see [Service Fabric cluster security](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security).</span></span>
