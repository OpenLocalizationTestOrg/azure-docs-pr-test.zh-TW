---
title: "授權 - Microsoft Threat Modeling Tool - Azure | Microsoft Docs"
description: "降低威脅模型化工具所暴露的威脅"
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: 312a66544a5e64daa86b4902b57d4050f1f66af5
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/29/2017
---
# <a name="security-frame-authorization--mitigations"></a><span data-ttu-id="d2985-103">安全框架︰授權 | 緩和措施</span><span class="sxs-lookup"><span data-stu-id="d2985-103">Security Frame: Authorization | Mitigations</span></span> 
| <span data-ttu-id="d2985-104">產品/服務</span><span class="sxs-lookup"><span data-stu-id="d2985-104">Product/Service</span></span> | <span data-ttu-id="d2985-105">文章</span><span class="sxs-lookup"><span data-stu-id="d2985-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="d2985-106">**電腦信任邊界**</span><span class="sxs-lookup"><span data-stu-id="d2985-106">**Machine Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="d2985-107">確保設定正確的 ACL 以將未經授權的存取限制於裝置上的資料</span><span class="sxs-lookup"><span data-stu-id="d2985-107">Ensure that proper ACLs are configured to restrict unauthorized access to data on the device</span></span>](#acl-restricted-access)</li><li>[<span data-ttu-id="d2985-108">確保敏感性使用者特有應用程式內容會儲存在使用者設定檔目錄中</span><span class="sxs-lookup"><span data-stu-id="d2985-108">Ensure that sensitive user-specific application content is stored in user-profile directory</span></span>](#sensitive-directory)</li><li>[<span data-ttu-id="d2985-109">確保已部署的應用程式是以最低權限執行</span><span class="sxs-lookup"><span data-stu-id="d2985-109">Ensure that the deployed applications are run with least privileges</span></span>](#deployed-privileges)</li></ul> |
| <span data-ttu-id="d2985-110">**Web 應用程式**</span><span class="sxs-lookup"><span data-stu-id="d2985-110">**Web Application**</span></span> | <ul><li>[<span data-ttu-id="d2985-111">在處理商務邏輯流程時強制執行循序步驟順序</span><span class="sxs-lookup"><span data-stu-id="d2985-111">Enforce sequential step order when processing business logic flows</span></span>](#sequential-logic)</li><li>[<span data-ttu-id="d2985-112">實作速率限制機制以防止列舉</span><span class="sxs-lookup"><span data-stu-id="d2985-112">Implement rate limiting mechanism to prevent enumeration</span></span>](#rate-enumeration)</li><li>[<span data-ttu-id="d2985-113">確保施行適當的授權並遵循最低權限的原則</span><span class="sxs-lookup"><span data-stu-id="d2985-113">Ensure that proper authorization is in place and principle of least privileges is followed</span></span>](#principle-least-privilege)</li><li>[<span data-ttu-id="d2985-114">商務邏輯和資源存取授權決策不應以傳入的要求參數為基礎</span><span class="sxs-lookup"><span data-stu-id="d2985-114">Business logic and resource access authorization decisions should not be based on incoming request parameters</span></span>](#logic-request-parameters)</li><li>[<span data-ttu-id="d2985-115">確保無法透過強迫瀏覽來列舉或存取內容和資源</span><span class="sxs-lookup"><span data-stu-id="d2985-115">Ensure that content and resources are not enumerable or accessible via forceful browsing</span></span>](#enumerable-browsing)</li></ul> |
| <span data-ttu-id="d2985-116">**資料庫**</span><span class="sxs-lookup"><span data-stu-id="d2985-116">**Database**</span></span> | <ul><li>[<span data-ttu-id="d2985-117">確保使用最低權限的帳戶連線到資料庫伺服器</span><span class="sxs-lookup"><span data-stu-id="d2985-117">Ensure that least-privileged accounts are used to connect to Database server</span></span>](#privileged-server)</li><li>[<span data-ttu-id="d2985-118">實作資料列層級安全性 RLS，以防止租用戶存取彼此的資料</span><span class="sxs-lookup"><span data-stu-id="d2985-118">Implement Row Level Security RLS to prevent tenants from accessing each other's data</span></span>](#rls-tenants)</li><li>[<span data-ttu-id="d2985-119">系統管理員角色只能具備有效的必要使用者</span><span class="sxs-lookup"><span data-stu-id="d2985-119">Sysadmin role should only have valid necessary users</span></span>](#sysadmin-users)</li></ul> |
| <span data-ttu-id="d2985-120">**IoT 雲端閘道**</span><span class="sxs-lookup"><span data-stu-id="d2985-120">**IoT Cloud Gateway**</span></span> | <ul><li>[<span data-ttu-id="d2985-121">使用最低權限的權杖連線到雲端閘道</span><span class="sxs-lookup"><span data-stu-id="d2985-121">Connect to Cloud Gateway using least-privileged tokens</span></span>](#cloud-least-privileged)</li></ul> |
| <span data-ttu-id="d2985-122">**Azure 事件中樞**</span><span class="sxs-lookup"><span data-stu-id="d2985-122">**Azure Event Hub**</span></span> | <ul><li>[<span data-ttu-id="d2985-123">使用僅限傳送權限 SAS 金鑰來產生裝置權杖</span><span class="sxs-lookup"><span data-stu-id="d2985-123">Use a send-only permissions SAS Key for generating device tokens</span></span>](#sendonly-sas)</li><li>[<span data-ttu-id="d2985-124">請勿使用可供直接存取事件中樞的存取權杖</span><span class="sxs-lookup"><span data-stu-id="d2985-124">Do not use access tokens that provide direct access to the Event Hub</span></span>](#access-tokens-hub)</li><li>[<span data-ttu-id="d2985-125">使用具有所需最低權限的 SAS 金鑰來連線到事件中樞</span><span class="sxs-lookup"><span data-stu-id="d2985-125">Connect to Event Hub using SAS keys that have the minimum permissions required</span></span>](#sas-minimum-permissions)</li></ul> |
| <span data-ttu-id="d2985-126">**Azure Document DB**</span><span class="sxs-lookup"><span data-stu-id="d2985-126">**Azure Document DB**</span></span> | <ul><li>[<span data-ttu-id="d2985-127">盡可能使用資源權杖來連線到 DocumentDB</span><span class="sxs-lookup"><span data-stu-id="d2985-127">Use resource tokens to connect to DocumentDB whenever possible</span></span>](#resource-docdb)</li></ul> |
| <span data-ttu-id="d2985-128">**Azure 信任邊界**</span><span class="sxs-lookup"><span data-stu-id="d2985-128">**Azure Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="d2985-129">使用 RBAC 啟用 Azure 訂用帳戶的精細存取管理</span><span class="sxs-lookup"><span data-stu-id="d2985-129">Enable fine-grained access management to Azure Subscription using RBAC</span></span>](#grained-rbac)</li></ul> |
| <span data-ttu-id="d2985-130">**Service Fabric 信任邊界**</span><span class="sxs-lookup"><span data-stu-id="d2985-130">**Service Fabric Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="d2985-131">使用 RBAC 限制用戶端對於叢集作業的存取</span><span class="sxs-lookup"><span data-stu-id="d2985-131">Restrict client's access to cluster operations using RBAC</span></span>](#cluster-rbac)</li></ul> |
| <span data-ttu-id="d2985-132">**Dynamics CRM**</span><span class="sxs-lookup"><span data-stu-id="d2985-132">**Dynamics CRM**</span></span> | <ul><li>[<span data-ttu-id="d2985-133">執行安全性模型化並視需要使用欄位層級安全性</span><span class="sxs-lookup"><span data-stu-id="d2985-133">Perform security modeling and use Field Level Security where required</span></span>](#modeling-field)</li></ul> |
| <span data-ttu-id="d2985-134">**Dynamics CRM 入口網站**</span><span class="sxs-lookup"><span data-stu-id="d2985-134">**Dynamics CRM Portal**</span></span> | <ul><li>[<span data-ttu-id="d2985-135">執行入口網站帳戶的安全性模型化，並記住，入口網站的安全性模型與 CRM 的其餘部分不同</span><span class="sxs-lookup"><span data-stu-id="d2985-135">Perform security modeling of portal accounts keeping in mind that the security model for the portal differs from the rest of CRM</span></span>](#portal-security)</li></ul> |
| <span data-ttu-id="d2985-136">**Azure 儲存體**</span><span class="sxs-lookup"><span data-stu-id="d2985-136">**Azure Storage**</span></span> | <ul><li>[<span data-ttu-id="d2985-137">在 Azure 表格儲存體中授與某個實體範圍的精細權限</span><span class="sxs-lookup"><span data-stu-id="d2985-137">Grant fine-grained permission on a range of entities in Azure Table Storage</span></span>](#permission-entities)</li><li>[<span data-ttu-id="d2985-138">使用 Azure Resource Manager 啟用 Azure 儲存體帳戶的角色型存取控制 (RBAC)</span><span class="sxs-lookup"><span data-stu-id="d2985-138">Enable Role-Based Access Control (RBAC) to Azure storage account using Azure Resource Manager</span></span>](#rbac-azure-manager)</li></ul> |
| <span data-ttu-id="d2985-139">**行動用戶端**</span><span class="sxs-lookup"><span data-stu-id="d2985-139">**Mobile Client**</span></span> | <ul><li>[<span data-ttu-id="d2985-140">實作隱含的越獄或 Root 權限入侵偵測</span><span class="sxs-lookup"><span data-stu-id="d2985-140">Implement implicit jailbreak or rooting detection</span></span>](#rooting-detection)</li></ul> |
| <span data-ttu-id="d2985-141">**WCF**</span><span class="sxs-lookup"><span data-stu-id="d2985-141">**WCF**</span></span> | <ul><li>[<span data-ttu-id="d2985-142">WCF 中的弱式類別參考</span><span class="sxs-lookup"><span data-stu-id="d2985-142">Weak Class Reference in WCF</span></span>](#weak-class-wcf)</li><li>[<span data-ttu-id="d2985-143">WCF 實作授權控制</span><span class="sxs-lookup"><span data-stu-id="d2985-143">WCF-Implement Authorization control</span></span>](#wcf-authz)</li></ul> |
| <span data-ttu-id="d2985-144">**Web API**</span><span class="sxs-lookup"><span data-stu-id="d2985-144">**Web API**</span></span> | <ul><li>[<span data-ttu-id="d2985-145">在 ASP.NET Web API 中實作適當的授權機制</span><span class="sxs-lookup"><span data-stu-id="d2985-145">Implement proper authorization mechanism in ASP.NET Web API</span></span>](#authz-aspnet)</li></ul> |
| <span data-ttu-id="d2985-146">**IoT 裝置**</span><span class="sxs-lookup"><span data-stu-id="d2985-146">**IoT Device**</span></span> | <ul><li>[<span data-ttu-id="d2985-147">如果支援各種需要不同權限層級的動作，則在裝置中執行授權檢查</span><span class="sxs-lookup"><span data-stu-id="d2985-147">Perform authorization checks in the device if it supports various actions that require different permission levels</span></span>](#device-permission)</li></ul> |
| <span data-ttu-id="d2985-148">**IoT 現場閘道**</span><span class="sxs-lookup"><span data-stu-id="d2985-148">**IoT Field Gateway**</span></span> | <ul><li>[<span data-ttu-id="d2985-149">如果支援各種需要不同權限層級的動作，則在現場閘道中執行授權檢查</span><span class="sxs-lookup"><span data-stu-id="d2985-149">Perform authorization checks in the Field Gateway if it supports various actions that require different permission levels</span></span>](#field-permission)</li></ul> |

## <span data-ttu-id="d2985-150"><a id="acl-restricted-access"></a>確保設定正確的 ACL 以將未經授權的存取限制於裝置上的資料</span><span class="sxs-lookup"><span data-stu-id="d2985-150"><a id="acl-restricted-access"></a>Ensure that proper ACLs are configured to restrict unauthorized access to data on the device</span></span>

| <span data-ttu-id="d2985-151">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-151">Title</span></span>                   | <span data-ttu-id="d2985-152">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-152">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-153">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-153">**Component**</span></span>               | <span data-ttu-id="d2985-154">電腦信任邊界</span><span class="sxs-lookup"><span data-stu-id="d2985-154">Machine Trust Boundary</span></span> | 
| <span data-ttu-id="d2985-155">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-155">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-156">部署</span><span class="sxs-lookup"><span data-stu-id="d2985-156">Deployment</span></span> |  
| <span data-ttu-id="d2985-157">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-157">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-158">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-158">Generic</span></span> |
| <span data-ttu-id="d2985-159">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-159">**Attributes**</span></span>              | <span data-ttu-id="d2985-160">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-160">N/A</span></span>  |
| <span data-ttu-id="d2985-161">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-161">**References**</span></span>              | <span data-ttu-id="d2985-162">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-162">N/A</span></span>  |
| <span data-ttu-id="d2985-163">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-163">**Steps**</span></span> | <span data-ttu-id="d2985-164">確保設定正確的 ACL 以將未經授權的存取限制於裝置上的資料</span><span class="sxs-lookup"><span data-stu-id="d2985-164">Ensure that proper ACLs are configured to restrict unauthorized access to data on the device</span></span>|

## <span data-ttu-id="d2985-165"><a id="sensitive-directory"></a>確保敏感性使用者特有應用程式內容會儲存在使用者設定檔目錄中</span><span class="sxs-lookup"><span data-stu-id="d2985-165"><a id="sensitive-directory"></a>Ensure that sensitive user-specific application content is stored in user-profile directory</span></span>

| <span data-ttu-id="d2985-166">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-166">Title</span></span>                   | <span data-ttu-id="d2985-167">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-167">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-168">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-168">**Component**</span></span>               | <span data-ttu-id="d2985-169">電腦信任邊界</span><span class="sxs-lookup"><span data-stu-id="d2985-169">Machine Trust Boundary</span></span> | 
| <span data-ttu-id="d2985-170">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-170">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-171">部署</span><span class="sxs-lookup"><span data-stu-id="d2985-171">Deployment</span></span> |  
| <span data-ttu-id="d2985-172">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-172">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-173">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-173">Generic</span></span> |
| <span data-ttu-id="d2985-174">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-174">**Attributes**</span></span>              | <span data-ttu-id="d2985-175">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-175">N/A</span></span>  |
| <span data-ttu-id="d2985-176">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-176">**References**</span></span>              | <span data-ttu-id="d2985-177">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-177">N/A</span></span>  |
| <span data-ttu-id="d2985-178">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-178">**Steps**</span></span> | <span data-ttu-id="d2985-179">確保敏感性使用者特有應用程式內容會儲存在使用者設定檔目錄中。</span><span class="sxs-lookup"><span data-stu-id="d2985-179">Ensure that sensitive user-specific application content is stored in user-profile directory.</span></span> <span data-ttu-id="d2985-180">這是為了防止多位電腦使用者存取彼此的資料。</span><span class="sxs-lookup"><span data-stu-id="d2985-180">This is to prevent multiple users of the machine from accessing each other's data.</span></span>|

## <span data-ttu-id="d2985-181"><a id="deployed-privileges"></a>確保已部署的應用程式是以最低權限執行</span><span class="sxs-lookup"><span data-stu-id="d2985-181"><a id="deployed-privileges"></a>Ensure that the deployed applications are run with least privileges</span></span>

| <span data-ttu-id="d2985-182">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-182">Title</span></span>                   | <span data-ttu-id="d2985-183">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-183">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-184">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-184">**Component**</span></span>               | <span data-ttu-id="d2985-185">電腦信任邊界</span><span class="sxs-lookup"><span data-stu-id="d2985-185">Machine Trust Boundary</span></span> | 
| <span data-ttu-id="d2985-186">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-186">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-187">部署</span><span class="sxs-lookup"><span data-stu-id="d2985-187">Deployment</span></span> |  
| <span data-ttu-id="d2985-188">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-188">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-189">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-189">Generic</span></span> |
| <span data-ttu-id="d2985-190">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-190">**Attributes**</span></span>              | <span data-ttu-id="d2985-191">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-191">N/A</span></span>  |
| <span data-ttu-id="d2985-192">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-192">**References**</span></span>              | <span data-ttu-id="d2985-193">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-193">N/A</span></span>  |
| <span data-ttu-id="d2985-194">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-194">**Steps**</span></span> | <span data-ttu-id="d2985-195">確保已部署的應用程式是以最低權限執行。</span><span class="sxs-lookup"><span data-stu-id="d2985-195">Ensure that the deployed application is run with least privileges.</span></span> |

## <span data-ttu-id="d2985-196"><a id="sequential-logic"></a>在處理商務邏輯流程時強制執行循序步驟順序</span><span class="sxs-lookup"><span data-stu-id="d2985-196"><a id="sequential-logic"></a>Enforce sequential step order when processing business logic flows</span></span>

| <span data-ttu-id="d2985-197">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-197">Title</span></span>                   | <span data-ttu-id="d2985-198">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-198">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-199">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-199">**Component**</span></span>               | <span data-ttu-id="d2985-200">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="d2985-200">Web Application</span></span> | 
| <span data-ttu-id="d2985-201">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-201">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-202">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-202">Build</span></span> |  
| <span data-ttu-id="d2985-203">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-203">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-204">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-204">Generic</span></span> |
| <span data-ttu-id="d2985-205">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-205">**Attributes**</span></span>              | <span data-ttu-id="d2985-206">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-206">N/A</span></span>  |
| <span data-ttu-id="d2985-207">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-207">**References**</span></span>              | <span data-ttu-id="d2985-208">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-208">N/A</span></span>  |
| <span data-ttu-id="d2985-209">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-209">**Steps**</span></span> | <span data-ttu-id="d2985-210">若要確認此階段是經由正版使用者執行，您可以強制應用程式只能依照循序步驟順序處理商務邏輯流程 (以現實人類時間處理所有的步驟)，而不處理順序混亂、另一位使用者已略過的步驟、已處理的步驟，或太快提交的交易。</span><span class="sxs-lookup"><span data-stu-id="d2985-210">In order to verify that this stage was run through by a genuine user you want to enforce the application to only process business logic flows in sequential step order, with all steps being processed in realistic human time, and not process out of order, skipped steps, processed steps from another user, or too quickly submitted transactions.</span></span>|

## <span data-ttu-id="d2985-211"><a id="rate-enumeration"></a>實作速率限制機制以防止列舉</span><span class="sxs-lookup"><span data-stu-id="d2985-211"><a id="rate-enumeration"></a>Implement rate limiting mechanism to prevent enumeration</span></span>

| <span data-ttu-id="d2985-212">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-212">Title</span></span>                   | <span data-ttu-id="d2985-213">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-213">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-214">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-214">**Component**</span></span>               | <span data-ttu-id="d2985-215">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="d2985-215">Web Application</span></span> | 
| <span data-ttu-id="d2985-216">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-216">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-217">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-217">Build</span></span> |  
| <span data-ttu-id="d2985-218">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-218">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-219">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-219">Generic</span></span> |
| <span data-ttu-id="d2985-220">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-220">**Attributes**</span></span>              | <span data-ttu-id="d2985-221">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-221">N/A</span></span>  |
| <span data-ttu-id="d2985-222">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-222">**References**</span></span>              | <span data-ttu-id="d2985-223">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-223">N/A</span></span>  |
| <span data-ttu-id="d2985-224">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-224">**Steps**</span></span> | <span data-ttu-id="d2985-225">確保敏感性識別碼是隨機的。</span><span class="sxs-lookup"><span data-stu-id="d2985-225">Ensure that sensitive identifiers are random.</span></span> <span data-ttu-id="d2985-226">在匿名頁面上實作 CAPTCHA 控制。</span><span class="sxs-lookup"><span data-stu-id="d2985-226">Implement CAPTCHA control on anonymous pages.</span></span> <span data-ttu-id="d2985-227">確保錯誤和例外狀況不得顯示特定資料</span><span class="sxs-lookup"><span data-stu-id="d2985-227">Ensure that error and exception should not reveal specific data</span></span>|

## <span data-ttu-id="d2985-228"><a id="principle-least-privilege"></a>確保施行適當的授權並遵循最低權限的原則</span><span class="sxs-lookup"><span data-stu-id="d2985-228"><a id="principle-least-privilege"></a>Ensure that proper authorization is in place and principle of least privileges is followed</span></span>

| <span data-ttu-id="d2985-229">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-229">Title</span></span>                   | <span data-ttu-id="d2985-230">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-230">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-231">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-231">**Component**</span></span>               | <span data-ttu-id="d2985-232">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="d2985-232">Web Application</span></span> | 
| <span data-ttu-id="d2985-233">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-233">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-234">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-234">Build</span></span> |  
| <span data-ttu-id="d2985-235">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-235">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-236">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-236">Generic</span></span> |
| <span data-ttu-id="d2985-237">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-237">**Attributes**</span></span>              | <span data-ttu-id="d2985-238">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-238">N/A</span></span>  |
| <span data-ttu-id="d2985-239">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-239">**References**</span></span>              | <span data-ttu-id="d2985-240">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-240">N/A</span></span>  |
| <span data-ttu-id="d2985-241">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-241">**Steps**</span></span> | <p><span data-ttu-id="d2985-242">原則表示只能夠提供該使用者所需的權限給使用者帳戶。</span><span class="sxs-lookup"><span data-stu-id="d2985-242">The principle means giving a user account only those privileges which are essential to that users work.</span></span> <span data-ttu-id="d2985-243">例如，備份使用者不必安裝軟體︰因此，備份使用者只有權限執行備份和備份相關應用程式。</span><span class="sxs-lookup"><span data-stu-id="d2985-243">For example, a backup user does not need to install software: hence, the backup user has rights only to run backup and backup-related applications.</span></span> <span data-ttu-id="d2985-244">任何其他權限 (例如安裝新的軟體) 都會遭到封鎖。</span><span class="sxs-lookup"><span data-stu-id="d2985-244">Any other privileges, such as installing new software, are blocked.</span></span> <span data-ttu-id="d2985-245">此原則也適用於通常在一般使用者帳戶中作業的個人電腦使用者，而且只會在情況絕對必要時，才會開啟特殊權限、受密碼保護的帳戶 (也就是超級使用者)。</span><span class="sxs-lookup"><span data-stu-id="d2985-245">The principle applies also to a personal computer user who usually does work in a normal user account, and opens a privileged, password protected account (that is, a superuser) only when the situation absolutely demands it.</span></span> </p><p><span data-ttu-id="d2985-246">此原則也可適用於您的 Web 應用程式。</span><span class="sxs-lookup"><span data-stu-id="d2985-246">This principle can also be applied to your web-applications.</span></span> <span data-ttu-id="d2985-247">與其完全相依於使用工作階段的角色型驗證方法，我們寧願透過以資料庫為基礎的驗證系統將權限指派給使用者。</span><span class="sxs-lookup"><span data-stu-id="d2985-247">Instead of solely depending on role-based authentication methods using sessions, we rather want to assign privileges to users by means of a Database-Based Authentication system.</span></span> <span data-ttu-id="d2985-248">我們仍使用工作階段，以便識別使用者是否已正確登入，只是現在我們不會將特定角色指派給該使用者，而會將相關權限指派給他，以確認他有權在系統上執行哪些動作。</span><span class="sxs-lookup"><span data-stu-id="d2985-248">We still use sessions in order to identify if the user was logged in correctly, only now instead of assigning that user with a specific role we assign him with privileges to verify which actions he is privileged to perform on the system.</span></span> <span data-ttu-id="d2985-249">此外，這個方法的大問題是，每當使用者必須獲派較少的權限時，便會立即套用您的變更，因為指派不會依賴必須先到期的工作階段。</span><span class="sxs-lookup"><span data-stu-id="d2985-249">Also a big pro of this method is, whenever a user has to be assigned fewer privileges your changes will be applied on the fly since the assigning does not depend on the session which otherwise had to expire first.</span></span></p>|

## <span data-ttu-id="d2985-250"><a id="logic-request-parameters"></a>商務邏輯和資源存取授權決策不應以傳入的要求參數為基礎</span><span class="sxs-lookup"><span data-stu-id="d2985-250"><a id="logic-request-parameters"></a>Business logic and resource access authorization decisions should not be based on incoming request parameters</span></span>

| <span data-ttu-id="d2985-251">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-251">Title</span></span>                   | <span data-ttu-id="d2985-252">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-252">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-253">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-253">**Component**</span></span>               | <span data-ttu-id="d2985-254">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="d2985-254">Web Application</span></span> | 
| <span data-ttu-id="d2985-255">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-255">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-256">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-256">Build</span></span> |  
| <span data-ttu-id="d2985-257">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-257">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-258">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-258">Generic</span></span> |
| <span data-ttu-id="d2985-259">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-259">**Attributes**</span></span>              | <span data-ttu-id="d2985-260">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-260">N/A</span></span>  |
| <span data-ttu-id="d2985-261">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-261">**References**</span></span>              | <span data-ttu-id="d2985-262">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-262">N/A</span></span>  |
| <span data-ttu-id="d2985-263">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-263">**Steps**</span></span> | <span data-ttu-id="d2985-264">每當您檢查使用者是否受限於檢閱特定資料時，應在伺服器端處理存取限制。</span><span class="sxs-lookup"><span data-stu-id="d2985-264">Whenever you are checking whether a user is restricted to review certain data, the access restrictions should be processed server-side.</span></span> <span data-ttu-id="d2985-265">UserID 應儲存在登入時的工作階段變數內，且應用於從資料庫擷取使用者資料</span><span class="sxs-lookup"><span data-stu-id="d2985-265">The userID should be stored inside of a session variable on login and should be used to retrieve user data from the database</span></span> |

### <a name="example"></a><span data-ttu-id="d2985-266">範例</span><span class="sxs-lookup"><span data-stu-id="d2985-266">Example</span></span>
```SQL
SELECT data 
FROM personaldata 
WHERE userID=:id < - session var 
```
<span data-ttu-id="d2985-267">可能的攻擊者目前無法竄改及變更應用程式作業，因為會在伺服器端處理用於擷取資料的識別碼。</span><span class="sxs-lookup"><span data-stu-id="d2985-267">Now an possible attacker can not tamper and change the application operation since the identifier for retrieving the data is handled server-side.</span></span>

## <span data-ttu-id="d2985-268"><a id="enumerable-browsing"></a>確保無法透過強迫瀏覽來列舉或存取內容和資源</span><span class="sxs-lookup"><span data-stu-id="d2985-268"><a id="enumerable-browsing"></a>Ensure that content and resources are not enumerable or accessible via forceful browsing</span></span>

| <span data-ttu-id="d2985-269">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-269">Title</span></span>                   | <span data-ttu-id="d2985-270">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-270">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-271">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-271">**Component**</span></span>               | <span data-ttu-id="d2985-272">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="d2985-272">Web Application</span></span> | 
| <span data-ttu-id="d2985-273">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-273">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-274">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-274">Build</span></span> |  
| <span data-ttu-id="d2985-275">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-275">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-276">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-276">Generic</span></span> |
| <span data-ttu-id="d2985-277">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-277">**Attributes**</span></span>              | <span data-ttu-id="d2985-278">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-278">N/A</span></span>  |
| <span data-ttu-id="d2985-279">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-279">**References**</span></span>              | <span data-ttu-id="d2985-280">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-280">N/A</span></span>  |
| <span data-ttu-id="d2985-281">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-281">**Steps**</span></span> | <p><span data-ttu-id="d2985-282">敏感性靜態和組態檔不得保留在 web 根目錄中。</span><span class="sxs-lookup"><span data-stu-id="d2985-282">Sensitive static and configuration files should not be kept in the web-root.</span></span> <span data-ttu-id="d2985-283">對於不需要公開的內容，則應套用適當的存取控制項，或移除內容本身。</span><span class="sxs-lookup"><span data-stu-id="d2985-283">For content not required to be public, either proper access controls should be applied or removal of the content itself.</span></span></p><p><span data-ttu-id="d2985-284">此外，強迫瀏覽通常結合暴力密碼破解技術，會儘可能嘗試存取較多的 URL 以列舉伺服器上的目錄和檔案，藉此搜集資訊。</span><span class="sxs-lookup"><span data-stu-id="d2985-284">Also, forceful browsing is usually combined with Brute Force techniques to gather information by attempting to access as many URLs as possible to enumerate directories and files on a server.</span></span> <span data-ttu-id="d2985-285">攻擊者可能會檢查常見現有檔案的所有變化。</span><span class="sxs-lookup"><span data-stu-id="d2985-285">Attackers may check for all variations of commonly existing files.</span></span> <span data-ttu-id="d2985-286">例如，密碼檔案搜尋會包含下列檔案：psswd.txt、password.htm、password.dat 和其他變化。</span><span class="sxs-lookup"><span data-stu-id="d2985-286">For example, a password file search would encompass files including psswd.txt, password.htm, password.dat, and other variations.</span></span></p><p><span data-ttu-id="d2985-287">若要避免這個問題，應包含暴力密碼破解嘗試偵測功能。</span><span class="sxs-lookup"><span data-stu-id="d2985-287">To mitigate this, capabilities for detection of brute force attempts should be included.</span></span></p>|

## <span data-ttu-id="d2985-288"><a id="privileged-server"></a>確保使用最低權限的帳戶連線到資料庫伺服器</span><span class="sxs-lookup"><span data-stu-id="d2985-288"><a id="privileged-server"></a>Ensure that least-privileged accounts are used to connect to Database server</span></span>

| <span data-ttu-id="d2985-289">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-289">Title</span></span>                   | <span data-ttu-id="d2985-290">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-290">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-291">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-291">**Component**</span></span>               | <span data-ttu-id="d2985-292">資料庫</span><span class="sxs-lookup"><span data-stu-id="d2985-292">Database</span></span> | 
| <span data-ttu-id="d2985-293">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-293">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-294">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-294">Build</span></span> |  
| <span data-ttu-id="d2985-295">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-295">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-296">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-296">Generic</span></span> |
| <span data-ttu-id="d2985-297">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-297">**Attributes**</span></span>              | <span data-ttu-id="d2985-298">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-298">N/A</span></span>  |
| <span data-ttu-id="d2985-299">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-299">**References**</span></span>              | <span data-ttu-id="d2985-300">[SQL Database 權限階層](https://msdn.microsoft.com/library/ms191465)、[SQL Database 安全性實體](https://msdn.microsoft.com/library/ms190401)</span><span class="sxs-lookup"><span data-stu-id="d2985-300">[SQL Database permissions hierarchy](https://msdn.microsoft.com/library/ms191465), [SQL database securables](https://msdn.microsoft.com/library/ms190401)</span></span> |
| <span data-ttu-id="d2985-301">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-301">**Steps**</span></span> | <span data-ttu-id="d2985-302">應該使用最低權限的帳戶連線到資料庫。</span><span class="sxs-lookup"><span data-stu-id="d2985-302">Least-privileged accounts should be used to connect to the database.</span></span> <span data-ttu-id="d2985-303">應用程式登入應受限於資料庫，應該只能執行所選的程序。</span><span class="sxs-lookup"><span data-stu-id="d2985-303">Application login should be restricted in the database and should only execute selected stored procedures.</span></span> <span data-ttu-id="d2985-304">應用程式的登入應該沒有直接的資料表存取權。</span><span class="sxs-lookup"><span data-stu-id="d2985-304">Application's login should have no direct table access.</span></span> |

## <span data-ttu-id="d2985-305"><a id="rls-tenants"></a>實作資料列層級安全性 RLS，以防止租用戶存取彼此的資料</span><span class="sxs-lookup"><span data-stu-id="d2985-305"><a id="rls-tenants"></a>Implement Row Level Security RLS to prevent tenants from accessing each other's data</span></span>

| <span data-ttu-id="d2985-306">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-306">Title</span></span>                   | <span data-ttu-id="d2985-307">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-307">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-308">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-308">**Component**</span></span>               | <span data-ttu-id="d2985-309">資料庫</span><span class="sxs-lookup"><span data-stu-id="d2985-309">Database</span></span> | 
| <span data-ttu-id="d2985-310">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-310">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-311">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-311">Build</span></span> |  
| <span data-ttu-id="d2985-312">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-312">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-313">Sql Azure、OnPrem</span><span class="sxs-lookup"><span data-stu-id="d2985-313">Sql Azure, OnPrem</span></span> |
| <span data-ttu-id="d2985-314">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-314">**Attributes**</span></span>              | <span data-ttu-id="d2985-315">SQL 版本 - V12、SQL 版本 - MsSQL2016</span><span class="sxs-lookup"><span data-stu-id="d2985-315">SQL Version - V12, SQL Version - MsSQL2016</span></span> |
| <span data-ttu-id="d2985-316">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-316">**References**</span></span>              | [<span data-ttu-id="d2985-317">SQL Server 資料列層級安全性 (RLS)</span><span class="sxs-lookup"><span data-stu-id="d2985-317">SQL Server Row-Level Security (RLS)</span></span>](https://msdn.microsoft.com/library/azure/dn765131.aspx) |
| <span data-ttu-id="d2985-318">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-318">**Steps**</span></span> | <p><span data-ttu-id="d2985-319">資料列層級安全性讓客戶能夠根據執行查詢之使用者的特性 (例如，群組成員資格或執行內容) 來控制資料庫資料表中的資料列存取。</span><span class="sxs-lookup"><span data-stu-id="d2985-319">Row-Level Security enables customers to control access to rows in a database table based on the characteristics of the user executing a query (e.g., group membership or execution context).</span></span></p><p><span data-ttu-id="d2985-320">資料列層級安全性 (RLS) 可簡化應用程式安全性的設計和編碼。</span><span class="sxs-lookup"><span data-stu-id="d2985-320">Row-Level Security (RLS) simplifies the design and coding of security in your application.</span></span> <span data-ttu-id="d2985-321">RLS 可讓您實作資料的資料列存取限制。</span><span class="sxs-lookup"><span data-stu-id="d2985-321">RLS enables you to implement restrictions on data row access.</span></span> <span data-ttu-id="d2985-322">例如，確保背景工作角色只能存取其部門相關資料列，或將客戶的資料存取權限制為其公司的相關資料。</span><span class="sxs-lookup"><span data-stu-id="d2985-322">For example ensuring that workers can access only those data rows that are pertinent to their department, or restricting a customer's data access to only the data relevant to their company.</span></span></p><p><span data-ttu-id="d2985-323">存取限制邏輯位於資料庫層，而不是遠離另一個應用程式層中的資料。</span><span class="sxs-lookup"><span data-stu-id="d2985-323">The access restriction logic is located in the database tier rather than away from the data in another application tier.</span></span> <span data-ttu-id="d2985-324">資料庫系統會在每次嘗試從任何層存取該資料時套用存取限制。</span><span class="sxs-lookup"><span data-stu-id="d2985-324">The database system applies the access restrictions every time that data access is attempted from any tier.</span></span> <span data-ttu-id="d2985-325">這可藉由縮小安全性系統的接觸區，讓安全性系統更加可靠和健全。</span><span class="sxs-lookup"><span data-stu-id="d2985-325">This makes the security system more reliable and robust by reducing the surface area of the security system.</span></span></p><p>|

<span data-ttu-id="d2985-326">請注意，最新的資料庫功能 RLS 只適用於 2016 以後的 SQL Server 和 Azure SQL Database。</span><span class="sxs-lookup"><span data-stu-id="d2985-326">Please note that RLS as an out-of-the-box database feature is applicable only to SQL Server starting 2016 and Azure SQL database.</span></span> <span data-ttu-id="d2985-327">如果未實作最新的 RLS 功能，則應確保資料存取是受限的。使用檢視和程序</span><span class="sxs-lookup"><span data-stu-id="d2985-327">If the out-of-the-box RLS feature is not implemented, it should be ensured that data access is restricted Using Views and Procedures</span></span>

## <span data-ttu-id="d2985-328"><a id="sysadmin-users"></a>系統管理員角色只能具備有效的必要使用者</span><span class="sxs-lookup"><span data-stu-id="d2985-328"><a id="sysadmin-users"></a>Sysadmin role should only have valid necessary users</span></span>

| <span data-ttu-id="d2985-329">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-329">Title</span></span>                   | <span data-ttu-id="d2985-330">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-330">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-331">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-331">**Component**</span></span>               | <span data-ttu-id="d2985-332">資料庫</span><span class="sxs-lookup"><span data-stu-id="d2985-332">Database</span></span> | 
| <span data-ttu-id="d2985-333">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-333">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-334">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-334">Build</span></span> |  
| <span data-ttu-id="d2985-335">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-335">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-336">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-336">Generic</span></span> |
| <span data-ttu-id="d2985-337">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-337">**Attributes**</span></span>              | <span data-ttu-id="d2985-338">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-338">N/A</span></span>  |
| <span data-ttu-id="d2985-339">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-339">**References**</span></span>              | <span data-ttu-id="d2985-340">[SQL Database 權限階層](https://msdn.microsoft.com/library/ms191465)、[SQL Database 安全性實體](https://msdn.microsoft.com/library/ms190401)</span><span class="sxs-lookup"><span data-stu-id="d2985-340">[SQL Database permissions hierarchy](https://msdn.microsoft.com/library/ms191465), [SQL database securables](https://msdn.microsoft.com/library/ms190401)</span></span> |
| <span data-ttu-id="d2985-341">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-341">**Steps**</span></span> | <span data-ttu-id="d2985-342">SysAdmin 固定伺服器角色的成員應該非常有限，而且永遠不會包含應用程式所用的帳戶。</span><span class="sxs-lookup"><span data-stu-id="d2985-342">Members of the SysAdmin fixed server role should be very limited and never contain accounts used by applications.</span></span>  <span data-ttu-id="d2985-343">請檢閱角色的使用者清單，並移除任何不必要的帳戶</span><span class="sxs-lookup"><span data-stu-id="d2985-343">Please review the list of users in the role and remove any unnecessary accounts</span></span>|

## <span data-ttu-id="d2985-344"><a id="cloud-least-privileged"></a>使用最低權限的權杖連線到雲端閘道</span><span class="sxs-lookup"><span data-stu-id="d2985-344"><a id="cloud-least-privileged"></a>Connect to Cloud Gateway using least-privileged tokens</span></span>

| <span data-ttu-id="d2985-345">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-345">Title</span></span>                   | <span data-ttu-id="d2985-346">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-346">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-347">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-347">**Component**</span></span>               | <span data-ttu-id="d2985-348">IoT 雲端閘道</span><span class="sxs-lookup"><span data-stu-id="d2985-348">IoT Cloud Gateway</span></span> | 
| <span data-ttu-id="d2985-349">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-349">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-350">部署</span><span class="sxs-lookup"><span data-stu-id="d2985-350">Deployment</span></span> |  
| <span data-ttu-id="d2985-351">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-351">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-352">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-352">Generic</span></span> |
| <span data-ttu-id="d2985-353">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-353">**Attributes**</span></span>              | <span data-ttu-id="d2985-354">閘道選擇 - Azure IoT 中樞</span><span class="sxs-lookup"><span data-stu-id="d2985-354">Gateway choice - Azure IoT Hub</span></span> |
| <span data-ttu-id="d2985-355">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-355">**References**</span></span>              | [<span data-ttu-id="d2985-356">IoT 中樞存取控制</span><span class="sxs-lookup"><span data-stu-id="d2985-356">Iot Hub Access Control</span></span>](https://azure.microsoft.com/documentation/articles/iot-hub-devguide/#Security) |
| <span data-ttu-id="d2985-357">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-357">**Steps**</span></span> | <span data-ttu-id="d2985-358">提供連線到雲端閘道 (IoT 中樞) 之各種元件的最低權限。</span><span class="sxs-lookup"><span data-stu-id="d2985-358">Provide least privilege permissions to various components that connect to Cloud Gateway (IoT Hub).</span></span> <span data-ttu-id="d2985-359">典型範例 – 裝置管理/佈建元件使用登錄讀取/寫入時、事件處理器 (ASA) 使用服務連線。</span><span class="sxs-lookup"><span data-stu-id="d2985-359">Typical example is – Device management/provisioning component uses registryread/write, Event Processor (ASA) uses Service Connect.</span></span> <span data-ttu-id="d2985-360">使用裝置認證的個別裝置連接</span><span class="sxs-lookup"><span data-stu-id="d2985-360">Individual devices connect using Device credentials</span></span>|

## <span data-ttu-id="d2985-361"><a id="sendonly-sas"></a>使用僅限傳送權限 SAS 金鑰來產生裝置權杖</span><span class="sxs-lookup"><span data-stu-id="d2985-361"><a id="sendonly-sas"></a>Use a send-only permissions SAS Key for generating device tokens</span></span>

| <span data-ttu-id="d2985-362">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-362">Title</span></span>                   | <span data-ttu-id="d2985-363">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-363">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-364">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-364">**Component**</span></span>               | <span data-ttu-id="d2985-365">Azure 事件中樞</span><span class="sxs-lookup"><span data-stu-id="d2985-365">Azure Event Hub</span></span> | 
| <span data-ttu-id="d2985-366">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-366">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-367">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-367">Build</span></span> |  
| <span data-ttu-id="d2985-368">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-368">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-369">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-369">Generic</span></span> |
| <span data-ttu-id="d2985-370">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-370">**Attributes**</span></span>              | <span data-ttu-id="d2985-371">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-371">N/A</span></span>  |
| <span data-ttu-id="d2985-372">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-372">**References**</span></span>              | [<span data-ttu-id="d2985-373">事件中樞驗證和安全性模型概觀</span><span class="sxs-lookup"><span data-stu-id="d2985-373">Event Hubs authentication and security model overview</span></span>](https://azure.microsoft.com/documentation/articles/event-hubs-authentication-and-security-model-overview/) |
| <span data-ttu-id="d2985-374">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-374">**Steps**</span></span> | <span data-ttu-id="d2985-375">SAS 金鑰用來產生個別的裝置權杖。</span><span class="sxs-lookup"><span data-stu-id="d2985-375">A SAS key is used to generate individual device tokens.</span></span> <span data-ttu-id="d2985-376">針對指定的發佈者產生裝置權杖時使用僅限傳送的權限 SAS 金鑰</span><span class="sxs-lookup"><span data-stu-id="d2985-376">Use a send-only permissions SAS key while generating the device token for a given publisher</span></span>|

## <span data-ttu-id="d2985-377"><a id="access-tokens-hub"></a>請勿使用可供直接存取事件中樞的存取權杖</span><span class="sxs-lookup"><span data-stu-id="d2985-377"><a id="access-tokens-hub"></a>Do not use access tokens that provide direct access to the Event Hub</span></span>

| <span data-ttu-id="d2985-378">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-378">Title</span></span>                   | <span data-ttu-id="d2985-379">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-379">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-380">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-380">**Component**</span></span>               | <span data-ttu-id="d2985-381">Azure 事件中樞</span><span class="sxs-lookup"><span data-stu-id="d2985-381">Azure Event Hub</span></span> | 
| <span data-ttu-id="d2985-382">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-382">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-383">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-383">Build</span></span> |  
| <span data-ttu-id="d2985-384">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-384">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-385">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-385">Generic</span></span> |
| <span data-ttu-id="d2985-386">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-386">**Attributes**</span></span>              | <span data-ttu-id="d2985-387">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-387">N/A</span></span>  |
| <span data-ttu-id="d2985-388">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-388">**References**</span></span>              | [<span data-ttu-id="d2985-389">事件中樞驗證和安全性模型概觀</span><span class="sxs-lookup"><span data-stu-id="d2985-389">Event Hubs authentication and security model overview</span></span>](https://azure.microsoft.com/documentation/articles/event-hubs-authentication-and-security-model-overview/) |
| <span data-ttu-id="d2985-390">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-390">**Steps**</span></span> | <span data-ttu-id="d2985-391">應不會將授與事件中樞直接存取權的權杖提供給裝置。</span><span class="sxs-lookup"><span data-stu-id="d2985-391">A token that grants direct access to the event hub should not be given to the device.</span></span> <span data-ttu-id="d2985-392">使用裝置的最低權限權杖 (僅可供存取發佈者)，有助於識別惡意或遭到入侵的裝置，並將它列入黑名單。</span><span class="sxs-lookup"><span data-stu-id="d2985-392">Using a least privileged token for the device that gives access only to a publisher would help identify and blacklist it if found to be a rogue or compromised device.</span></span>|

## <span data-ttu-id="d2985-393"><a id="sas-minimum-permissions"></a>使用具有所需最低權限的 SAS 金鑰來連線到事件中樞</span><span class="sxs-lookup"><span data-stu-id="d2985-393"><a id="sas-minimum-permissions"></a>Connect to Event Hub using SAS keys that have the minimum permissions required</span></span>

| <span data-ttu-id="d2985-394">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-394">Title</span></span>                   | <span data-ttu-id="d2985-395">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-395">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-396">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-396">**Component**</span></span>               | <span data-ttu-id="d2985-397">Azure 事件中樞</span><span class="sxs-lookup"><span data-stu-id="d2985-397">Azure Event Hub</span></span> | 
| <span data-ttu-id="d2985-398">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-398">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-399">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-399">Build</span></span> |  
| <span data-ttu-id="d2985-400">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-400">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-401">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-401">Generic</span></span> |
| <span data-ttu-id="d2985-402">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-402">**Attributes**</span></span>              | <span data-ttu-id="d2985-403">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-403">N/A</span></span>  |
| <span data-ttu-id="d2985-404">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-404">**References**</span></span>              | [<span data-ttu-id="d2985-405">事件中樞驗證和安全性模型概觀</span><span class="sxs-lookup"><span data-stu-id="d2985-405">Event Hubs authentication and security model overview</span></span>](https://azure.microsoft.com/documentation/articles/event-hubs-authentication-and-security-model-overview/) |
| <span data-ttu-id="d2985-406">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-406">**Steps**</span></span> | <span data-ttu-id="d2985-407">將最低權限提供給連線到事件中樞的各種後端應用程式。</span><span class="sxs-lookup"><span data-stu-id="d2985-407">Provide least privilege permissions to various back-end applications that connect to the Event Hub.</span></span> <span data-ttu-id="d2985-408">為每個後端應用程式產生個別的 SAS 金鑰，並且僅提供必要的權限 (傳送、接收或管理) 給它們。</span><span class="sxs-lookup"><span data-stu-id="d2985-408">Generate separate SAS keys for each back-end application and only provide the required permissions - Send, Receive or Manage to them.</span></span>|

## <span data-ttu-id="d2985-409"><a id="resource-docdb"></a>盡可能使用資源權杖來連線到 Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="d2985-409"><a id="resource-docdb"></a>Use resource tokens to connect to Cosmos DB whenever possible</span></span>

| <span data-ttu-id="d2985-410">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-410">Title</span></span>                   | <span data-ttu-id="d2985-411">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-411">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-412">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-412">**Component**</span></span>               | <span data-ttu-id="d2985-413">Azure Document DB</span><span class="sxs-lookup"><span data-stu-id="d2985-413">Azure Document DB</span></span> | 
| <span data-ttu-id="d2985-414">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-414">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-415">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-415">Build</span></span> |  
| <span data-ttu-id="d2985-416">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-416">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-417">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-417">Generic</span></span> |
| <span data-ttu-id="d2985-418">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-418">**Attributes**</span></span>              | <span data-ttu-id="d2985-419">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-419">N/A</span></span>  |
| <span data-ttu-id="d2985-420">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-420">**References**</span></span>              | <span data-ttu-id="d2985-421">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-421">N/A</span></span>  |
| <span data-ttu-id="d2985-422">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-422">**Steps**</span></span> | <span data-ttu-id="d2985-423">資源權杖會與 DocumentDB 權限資源相關聯，並擷取資料庫使用者與使用者所具備之特定 DocumentDB 應用程式資源 (例如集合、文件) 權限之間的關係。</span><span class="sxs-lookup"><span data-stu-id="d2985-423">A resource token is associated with a DocumentDB permission resource and captures the relationship between the user of a database and the permission that user has for a specific DocumentDB application resource (e.g. collection, document).</span></span> <span data-ttu-id="d2985-424">如果無法放心託付用戶端處理主要或唯讀金鑰，則一律使用資源權杖來存取 DocumentDB - 就像一般使用者應用程式 (行動裝置或桌上型電腦用戶端)。從後端應用程式使用主要金鑰或唯讀金鑰，以便安全地儲存這些金鑰。</span><span class="sxs-lookup"><span data-stu-id="d2985-424">Always use a resource token to access the DocumentDB if the client cannot be trusted with handling master or read-only keys - like an end user application like a mobile or desktop client.Use Master key or read-only keys from backend applications which can store these keys securely.</span></span>|

## <span data-ttu-id="d2985-425"><a id="grained-rbac"></a>使用 RBAC 啟用 Azure 訂用帳戶的精細存取管理</span><span class="sxs-lookup"><span data-stu-id="d2985-425"><a id="grained-rbac"></a>Enable fine-grained access management to Azure Subscription using RBAC</span></span>

| <span data-ttu-id="d2985-426">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-426">Title</span></span>                   | <span data-ttu-id="d2985-427">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-427">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-428">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-428">**Component**</span></span>               | <span data-ttu-id="d2985-429">Azure 信任邊界</span><span class="sxs-lookup"><span data-stu-id="d2985-429">Azure Trust Boundary</span></span> | 
| <span data-ttu-id="d2985-430">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-430">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-431">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-431">Build</span></span> |  
| <span data-ttu-id="d2985-432">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-432">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-433">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-433">Generic</span></span> |
| <span data-ttu-id="d2985-434">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-434">**Attributes**</span></span>              | <span data-ttu-id="d2985-435">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-435">N/A</span></span>  |
| <span data-ttu-id="d2985-436">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-436">**References**</span></span>              | [<span data-ttu-id="d2985-437">使用角色指派來管理 Azure 訂用帳戶資源的存取權</span><span class="sxs-lookup"><span data-stu-id="d2985-437">Use role assignments to manage access to your Azure subscription resources</span></span>](https://azure.microsoft.com/documentation/articles/role-based-access-control-configure/)  |
| <span data-ttu-id="d2985-438">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-438">**Steps**</span></span> | <span data-ttu-id="d2985-439">Azure 角色型存取控制 (RBAC) 可以對 Azure 進行更細緻的存取權管理。</span><span class="sxs-lookup"><span data-stu-id="d2985-439">Azure Role-Based Access Control (RBAC) enables fine-grained access management for Azure.</span></span> <span data-ttu-id="d2985-440">使用 RBAC，您可以僅授與使用者執行其作業所需的存取權。</span><span class="sxs-lookup"><span data-stu-id="d2985-440">Using RBAC, you can grant only the amount of access that users need to perform their jobs.</span></span>|

## <span data-ttu-id="d2985-441"><a id="cluster-rbac"></a>使用 RBAC 限制用戶端對於叢集作業的存取</span><span class="sxs-lookup"><span data-stu-id="d2985-441"><a id="cluster-rbac"></a>Restrict client's access to cluster operations using RBAC</span></span>

| <span data-ttu-id="d2985-442">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-442">Title</span></span>                   | <span data-ttu-id="d2985-443">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-443">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-444">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-444">**Component**</span></span>               | <span data-ttu-id="d2985-445">Service Fabric 信任邊界</span><span class="sxs-lookup"><span data-stu-id="d2985-445">Service Fabric Trust Boundary</span></span> | 
| <span data-ttu-id="d2985-446">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-446">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-447">部署</span><span class="sxs-lookup"><span data-stu-id="d2985-447">Deployment</span></span> |  
| <span data-ttu-id="d2985-448">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-448">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-449">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-449">Generic</span></span> |
| <span data-ttu-id="d2985-450">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-450">**Attributes**</span></span>              | <span data-ttu-id="d2985-451">環境 - Azure</span><span class="sxs-lookup"><span data-stu-id="d2985-451">Environment - Azure</span></span> |
| <span data-ttu-id="d2985-452">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-452">**References**</span></span>              | [<span data-ttu-id="d2985-453">Service Fabric 用戶端的角色型存取控制</span><span class="sxs-lookup"><span data-stu-id="d2985-453">Role-based access control for Service Fabric clients</span></span>](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security-roles/) |
| <span data-ttu-id="d2985-454">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-454">**Steps**</span></span> | <p><span data-ttu-id="d2985-455">Azure Service Fabric 針對連線到 Service Fabric 叢集的用戶端，支援兩種不同的存取控制類型：系統管理員和使用者。</span><span class="sxs-lookup"><span data-stu-id="d2985-455">Azure Service Fabric supports two different access control types for clients that are connected to a Service Fabric cluster: administrator and user.</span></span> <span data-ttu-id="d2985-456">存取控制可讓叢集系統管理員針對不同的使用者群組限制特定叢集作業的存取權，讓叢集更加安全。</span><span class="sxs-lookup"><span data-stu-id="d2985-456">Access control allows the cluster administrator to limit access to certain cluster operations for different groups of users, making the cluster more secure.</span></span></p><p><span data-ttu-id="d2985-457">系統管理員可以完整存取管理功能 (包括讀取/寫入功能)。</span><span class="sxs-lookup"><span data-stu-id="d2985-457">Administrators have full access to management capabilities (including read/write capabilities).</span></span> <span data-ttu-id="d2985-458">使用者預設只具有管理功能的讀取存取權 (例如查詢功能)，以及解析應用程式和服務的能力。</span><span class="sxs-lookup"><span data-stu-id="d2985-458">Users, by default, have only read access to management capabilities (for example, query capabilities), and the ability to resolve applications and services.</span></span></p><p><span data-ttu-id="d2985-459">您可在建立叢集時為每個角色提供個別的憑證，以指定兩個用戶端角色 (系統管理員和用戶端)。</span><span class="sxs-lookup"><span data-stu-id="d2985-459">You specify the two client roles (administrator and client) at the time of cluster creation by providing separate certificates for each.</span></span></p>|

## <span data-ttu-id="d2985-460"><a id="modeling-field"></a>執行安全性模型化並視需要使用欄位層級安全性</span><span class="sxs-lookup"><span data-stu-id="d2985-460"><a id="modeling-field"></a>Perform security modeling and use Field Level Security where required</span></span>

| <span data-ttu-id="d2985-461">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-461">Title</span></span>                   | <span data-ttu-id="d2985-462">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-462">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-463">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-463">**Component**</span></span>               | <span data-ttu-id="d2985-464">Dynamics CRM</span><span class="sxs-lookup"><span data-stu-id="d2985-464">Dynamics CRM</span></span> | 
| <span data-ttu-id="d2985-465">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-465">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-466">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-466">Build</span></span> |  
| <span data-ttu-id="d2985-467">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-467">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-468">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-468">Generic</span></span> |
| <span data-ttu-id="d2985-469">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-469">**Attributes**</span></span>              | <span data-ttu-id="d2985-470">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-470">N/A</span></span>  |
| <span data-ttu-id="d2985-471">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-471">**References**</span></span>              | <span data-ttu-id="d2985-472">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-472">N/A</span></span>  |
| <span data-ttu-id="d2985-473">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-473">**Steps**</span></span> | <span data-ttu-id="d2985-474">執行安全性模型化並視需要使用欄位層級安全性</span><span class="sxs-lookup"><span data-stu-id="d2985-474">Perform security modeling and use Field Level Security where required</span></span>|

## <span data-ttu-id="d2985-475"><a id="portal-security"></a>執行入口網站帳戶的安全性模型化，並記住，入口網站的安全性模型與 CRM 的其餘部分不同</span><span class="sxs-lookup"><span data-stu-id="d2985-475"><a id="portal-security"></a>Perform security modeling of portal accounts keeping in mind that the security model for the portal differs from the rest of CRM</span></span>

| <span data-ttu-id="d2985-476">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-476">Title</span></span>                   | <span data-ttu-id="d2985-477">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-477">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-478">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-478">**Component**</span></span>               | <span data-ttu-id="d2985-479">Dynamics CRM 入口網站</span><span class="sxs-lookup"><span data-stu-id="d2985-479">Dynamics CRM Portal</span></span> | 
| <span data-ttu-id="d2985-480">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-480">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-481">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-481">Build</span></span> |  
| <span data-ttu-id="d2985-482">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-482">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-483">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-483">Generic</span></span> |
| <span data-ttu-id="d2985-484">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-484">**Attributes**</span></span>              | <span data-ttu-id="d2985-485">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-485">N/A</span></span>  |
| <span data-ttu-id="d2985-486">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-486">**References**</span></span>              | <span data-ttu-id="d2985-487">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-487">N/A</span></span>  |
| <span data-ttu-id="d2985-488">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-488">**Steps**</span></span> | <span data-ttu-id="d2985-489">執行入口網站帳戶的安全性模型化，並記住，入口網站的安全性模型與 CRM 的其餘部分不同</span><span class="sxs-lookup"><span data-stu-id="d2985-489">Perform security modeling of portal accounts keeping in mind that the security model for the portal differs from the rest of CRM</span></span>|

## <span data-ttu-id="d2985-490"><a id="permission-entities"></a>在 Azure 表格儲存體中授與某個實體範圍的精細權限</span><span class="sxs-lookup"><span data-stu-id="d2985-490"><a id="permission-entities"></a>Grant fine-grained permission on a range of entities in Azure Table Storage</span></span>

| <span data-ttu-id="d2985-491">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-491">Title</span></span>                   | <span data-ttu-id="d2985-492">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-492">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-493">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-493">**Component**</span></span>               | <span data-ttu-id="d2985-494">Azure 儲存體</span><span class="sxs-lookup"><span data-stu-id="d2985-494">Azure Storage</span></span> | 
| <span data-ttu-id="d2985-495">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-495">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-496">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-496">Build</span></span> |  
| <span data-ttu-id="d2985-497">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-497">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-498">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-498">Generic</span></span> |
| <span data-ttu-id="d2985-499">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-499">**Attributes**</span></span>              | <span data-ttu-id="d2985-500">StorageType - 資料表</span><span class="sxs-lookup"><span data-stu-id="d2985-500">StorageType - Table</span></span> |
| <span data-ttu-id="d2985-501">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-501">**References**</span></span>              | [<span data-ttu-id="d2985-502">如何使用 SAS 將存取權委派給 Azure 儲存體帳戶中的物件</span><span class="sxs-lookup"><span data-stu-id="d2985-502">How to delegate access to objects in your Azure storage account using SAS</span></span>](https://azure.microsoft.com/documentation/articles/storage-security-guide/#_data-plane-security) |
| <span data-ttu-id="d2985-503">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-503">**Steps**</span></span> | <span data-ttu-id="d2985-504">在特定商務案例中，Azure 表格儲存體可能必須儲存能滿足不同合作夥伴需求的敏感性資料。</span><span class="sxs-lookup"><span data-stu-id="d2985-504">In certain business scenarios, Azure Table Storage may be required to store sensitive data that caters to different parties.</span></span> <span data-ttu-id="d2985-505">例如，屬於不同的國家/地區的敏感性資料。</span><span class="sxs-lookup"><span data-stu-id="d2985-505">E.g., sensitive data pertaining to different countries.</span></span> <span data-ttu-id="d2985-506">在這類情況下，藉由指定資料分割和資料列金鑰範圍來建構 SAS 簽章，使用者便可存取特定國家/地區特有的資料。</span><span class="sxs-lookup"><span data-stu-id="d2985-506">In such cases, SAS signatures can be constructed by specifying the partition and row key ranges, such that a user can access data specific to a particular country.</span></span>| 

## <span data-ttu-id="d2985-507"><a id="rbac-azure-manager"></a>使用 Azure Resource Manager 啟用 Azure 儲存體帳戶的角色型存取控制 (RBAC)</span><span class="sxs-lookup"><span data-stu-id="d2985-507"><a id="rbac-azure-manager"></a>Enable Role-Based Access Control (RBAC) to Azure storage account using Azure Resource Manager</span></span>

| <span data-ttu-id="d2985-508">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-508">Title</span></span>                   | <span data-ttu-id="d2985-509">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-509">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-510">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-510">**Component**</span></span>               | <span data-ttu-id="d2985-511">Azure 儲存體</span><span class="sxs-lookup"><span data-stu-id="d2985-511">Azure Storage</span></span> | 
| <span data-ttu-id="d2985-512">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-512">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-513">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-513">Build</span></span> |  
| <span data-ttu-id="d2985-514">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-514">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-515">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-515">Generic</span></span> |
| <span data-ttu-id="d2985-516">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-516">**Attributes**</span></span>              | <span data-ttu-id="d2985-517">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-517">N/A</span></span>  |
| <span data-ttu-id="d2985-518">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-518">**References**</span></span>              | [<span data-ttu-id="d2985-519">如何使用角色型存取控制 (RBAC) 保護儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="d2985-519">How to secure your storage account with Role-Based Access Control (RBAC)</span></span>](https://azure.microsoft.com/documentation/articles/storage-security-guide/#management-plane-security) |
| <span data-ttu-id="d2985-520">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-520">**Steps**</span></span> | <p><span data-ttu-id="d2985-521">當您建立新的儲存體帳戶時，可以選取傳統或 Azure Resource Manager 的部署模型。</span><span class="sxs-lookup"><span data-stu-id="d2985-521">When you create a new storage account, you select a deployment model of Classic or Azure Resource Manager.</span></span> <span data-ttu-id="d2985-522">在 Azure 中建立資源的傳統模型只允許以孤注一擲的方式存取訂用帳戶，接著存取儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="d2985-522">The Classic model of creating resources in Azure only allows all-or-nothing access to the subscription, and in turn, the storage account.</span></span></p><p><span data-ttu-id="d2985-523">使用 Azure Resource Manager 模型，您可以將儲存體帳戶放置於資源群組中，並使用 Azure Active Directory 來控制該特定儲存體帳戶之管理平面的存取。</span><span class="sxs-lookup"><span data-stu-id="d2985-523">With the Azure Resource Manager model, you put the storage account in a resource group and control access to the management plane of that specific storage account using Azure Active Directory.</span></span> <span data-ttu-id="d2985-524">例如，您可以為特定使用者提供存取儲存體帳戶金鑰的能力，而其他使用者可以檢視儲存體帳戶的相關資訊，但是無法存取儲存體帳戶金鑰。</span><span class="sxs-lookup"><span data-stu-id="d2985-524">For example, you can give specific users the ability to access the storage account keys, while other users can view information about the storage account, but cannot access the storage account keys.</span></span></p>|

## <span data-ttu-id="d2985-525"><a id="rooting-detection"></a>實作隱含的越獄或 Root 權限入侵偵測</span><span class="sxs-lookup"><span data-stu-id="d2985-525"><a id="rooting-detection"></a>Implement implicit jailbreak or rooting detection</span></span>

| <span data-ttu-id="d2985-526">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-526">Title</span></span>                   | <span data-ttu-id="d2985-527">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-527">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-528">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-528">**Component**</span></span>               | <span data-ttu-id="d2985-529">行動用戶端</span><span class="sxs-lookup"><span data-stu-id="d2985-529">Mobile Client</span></span> | 
| <span data-ttu-id="d2985-530">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-530">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-531">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-531">Build</span></span> |  
| <span data-ttu-id="d2985-532">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-532">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-533">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-533">Generic</span></span> |
| <span data-ttu-id="d2985-534">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-534">**Attributes**</span></span>              | <span data-ttu-id="d2985-535">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-535">N/A</span></span>  |
| <span data-ttu-id="d2985-536">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-536">**References**</span></span>              | <span data-ttu-id="d2985-537">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-537">N/A</span></span>  |
| <span data-ttu-id="d2985-538">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-538">**Steps**</span></span> | <p><span data-ttu-id="d2985-539">如果電話遭到 Root 權限或越獄入侵，應用程式應保護其本身的組態和使用者資料。</span><span class="sxs-lookup"><span data-stu-id="d2985-539">Application should safeguard its own configuration and user data in case if phone is rooted or jail broken.</span></span> <span data-ttu-id="d2985-540">Root 權限/越獄入侵意味著未經授權的存取，一般使用者不會在自己的電話上這麼做。</span><span class="sxs-lookup"><span data-stu-id="d2985-540">Rooting/jail breaking implies unauthorized access, which normal users won't do on their own phones.</span></span> <span data-ttu-id="d2985-541">因此在應用程式啟動時，應用程式應具有隱含的偵測邏輯，以偵測電話的 Root 權限是否已遭到入侵。</span><span class="sxs-lookup"><span data-stu-id="d2985-541">Therefore application should have implicit detection logic on application startup, to detect if the phone has been rooted.</span></span></p><p><span data-ttu-id="d2985-542">偵測邏輯可直接存取通常只有根使用者可以存取的檔案，例如︰</span><span class="sxs-lookup"><span data-stu-id="d2985-542">The detection logic can be simply accessing files which normally only root user can access, for example:</span></span></p><ul><li><span data-ttu-id="d2985-543">/system/app/Superuser.apk</span><span class="sxs-lookup"><span data-stu-id="d2985-543">/system/app/Superuser.apk</span></span></li><li><span data-ttu-id="d2985-544">/sbin/su</span><span class="sxs-lookup"><span data-stu-id="d2985-544">/sbin/su</span></span></li><li><span data-ttu-id="d2985-545">/system/bin/su</span><span class="sxs-lookup"><span data-stu-id="d2985-545">/system/bin/su</span></span></li><li><span data-ttu-id="d2985-546">/system/xbin/su</span><span class="sxs-lookup"><span data-stu-id="d2985-546">/system/xbin/su</span></span></li><li><span data-ttu-id="d2985-547">/data/local/xbin/su</span><span class="sxs-lookup"><span data-stu-id="d2985-547">/data/local/xbin/su</span></span></li><li><span data-ttu-id="d2985-548">/data/local/bin/su</span><span class="sxs-lookup"><span data-stu-id="d2985-548">/data/local/bin/su</span></span></li><li><span data-ttu-id="d2985-549">/system/sd/xbin/su</span><span class="sxs-lookup"><span data-stu-id="d2985-549">/system/sd/xbin/su</span></span></li><li><span data-ttu-id="d2985-550">/system/bin/failsafe/su</span><span class="sxs-lookup"><span data-stu-id="d2985-550">/system/bin/failsafe/su</span></span></li><li><span data-ttu-id="d2985-551">/data/local/su</span><span class="sxs-lookup"><span data-stu-id="d2985-551">/data/local/su</span></span></li></ul><p><span data-ttu-id="d2985-552">如果應用程式可以存取上述任何檔案，這表示應用程式是以根使用者身分執行。</span><span class="sxs-lookup"><span data-stu-id="d2985-552">If the application can access any of these files, it denotes that the application is running as root user.</span></span></p>|

## <span data-ttu-id="d2985-553"><a id="weak-class-wcf"></a>WCF 中的弱式類別參考</span><span class="sxs-lookup"><span data-stu-id="d2985-553"><a id="weak-class-wcf"></a>Weak Class Reference in WCF</span></span>

| <span data-ttu-id="d2985-554">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-554">Title</span></span>                   | <span data-ttu-id="d2985-555">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-555">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-556">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-556">**Component**</span></span>               | <span data-ttu-id="d2985-557">WCF</span><span class="sxs-lookup"><span data-stu-id="d2985-557">WCF</span></span> | 
| <span data-ttu-id="d2985-558">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-558">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-559">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-559">Build</span></span> |  
| <span data-ttu-id="d2985-560">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-560">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-561">泛型、NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="d2985-561">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="d2985-562">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-562">**Attributes**</span></span>              | <span data-ttu-id="d2985-563">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-563">N/A</span></span>  |
| <span data-ttu-id="d2985-564">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-564">**References**</span></span>              | <span data-ttu-id="d2985-565">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx)、[Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html)</span><span class="sxs-lookup"><span data-stu-id="d2985-565">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html)</span></span> |
| <span data-ttu-id="d2985-566">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-566">**Steps**</span></span> | <p><span data-ttu-id="d2985-567">系統會使用弱式類別參考，其可讓攻擊者執行未經授權的程式碼。</span><span class="sxs-lookup"><span data-stu-id="d2985-567">The system uses a weak class reference, which might allow an attacker to execute unauthorized code.</span></span> <span data-ttu-id="d2985-568">程式會參考非唯一識別的使用者定義類別。</span><span class="sxs-lookup"><span data-stu-id="d2985-568">The program references a user-defined class that is not uniquely identified.</span></span> <span data-ttu-id="d2985-569">當 .NET 載入此弱式識別的類別時，CLR 類型載入器會以指定的順序在下列位置中搜尋此類別︰</span><span class="sxs-lookup"><span data-stu-id="d2985-569">When .NET loads this weakly identified class, the CLR type loader searches for the class in the following locations in the specified order:</span></span></p><ol><li><span data-ttu-id="d2985-570">如果已知道類型的組件，則載入器會搜尋組態檔的重新導向位置、GAC、使用組態資訊的目前組件，以及應用程式基底目錄</span><span class="sxs-lookup"><span data-stu-id="d2985-570">If the assembly of the type is known, the loader searches the configuration file's redirect locations, GAC, the current assembly using configuration information, and the application base directory</span></span></li><li><span data-ttu-id="d2985-571">如果不知道組件，載入器會搜尋目前組件、mscorlib 以及 TypeResolve 事件處理常式所傳回的位置</span><span class="sxs-lookup"><span data-stu-id="d2985-571">If the assembly is unknown, the loader searches the current assembly, mscorlib, and the location returned by the TypeResolve event handler</span></span></li><li><span data-ttu-id="d2985-572">可以使用攔截程序修改此 CLR 搜尋順序，例如類型轉送機制和 AppDomain.TypeResolve 事件</span><span class="sxs-lookup"><span data-stu-id="d2985-572">This CLR search order can be modified with hooks such as the Type Forwarding mechanism and the AppDomain.TypeResolve event</span></span></li></ol><p><span data-ttu-id="d2985-573">如果攻擊者建立具有相同名稱的替代類別，並將它放在 CLR 會先載入的替代位置，藉此利用 CLR 搜尋順序，則 CLR 會在無意中執行攻擊者提供的程式碼</span><span class="sxs-lookup"><span data-stu-id="d2985-573">If an attacker exploits the CLR search order by creating an alternative class with the same name and placing it in an alternative location that the CLR will load first, the CLR will unintentionally execute the attacker-supplied code</span></span></p>|

### <a name="example"></a><span data-ttu-id="d2985-574">範例</span><span class="sxs-lookup"><span data-stu-id="d2985-574">Example</span></span>
<span data-ttu-id="d2985-575">下列 WCF 組態檔的 `<behaviorExtensions/>` 元素會指示 WCF 將自訂行為類別新增至特定 WCF 擴充功能。</span><span class="sxs-lookup"><span data-stu-id="d2985-575">The `<behaviorExtensions/>` element of the WCF configuration file below instructs WCF to add a custom behavior class to a particular WCF extension.</span></span>
```
<system.serviceModel>
    <extensions>
        <behaviorExtensions>
            <add name=""myBehavior"" type=""MyBehavior"" />
        </behaviorExtensions>
    </extensions>
</system.serviceModel>
```
<span data-ttu-id="d2985-576">使用完整 (強式) 名稱來唯一識別類型，可進一步提高您系統的安全性。</span><span class="sxs-lookup"><span data-stu-id="d2985-576">Using fully qualified (strong) names uniquely identifies a type and further increases security of your system.</span></span> <span data-ttu-id="d2985-577">在 machine.config 和 app.config 檔案中註冊類型時，使用完整組件名稱。</span><span class="sxs-lookup"><span data-stu-id="d2985-577">Use fully qualified assembly names when registering types in the machine.config and app.config files.</span></span>

### <a name="example"></a><span data-ttu-id="d2985-578">範例</span><span class="sxs-lookup"><span data-stu-id="d2985-578">Example</span></span>
<span data-ttu-id="d2985-579">下列 WCF 組態檔的 `<behaviorExtensions/>` 元素會指示 WCF 將強式參照的自訂行為類別新增至特定 WCF 擴充功能。</span><span class="sxs-lookup"><span data-stu-id="d2985-579">The `<behaviorExtensions/>` element of the WCF configuration file below instructs WCF to add strongly-referenced custom behavior class to a particular WCF extension.</span></span>
```
<system.serviceModel>
    <extensions>
        <behaviorExtensions>
            <add name=""myBehavior"" type=""Microsoft.ServiceModel.Samples.MyBehaviorSection, MyBehavior,
            Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"" />
        </behaviorExtensions>
    </extensions>
</system.serviceModel>
```

## <span data-ttu-id="d2985-580"><a id="wcf-authz"></a>WCF 實作授權控制</span><span class="sxs-lookup"><span data-stu-id="d2985-580"><a id="wcf-authz"></a>WCF-Implement Authorization control</span></span>

| <span data-ttu-id="d2985-581">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-581">Title</span></span>                   | <span data-ttu-id="d2985-582">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-582">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-583">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-583">**Component**</span></span>               | <span data-ttu-id="d2985-584">WCF</span><span class="sxs-lookup"><span data-stu-id="d2985-584">WCF</span></span> | 
| <span data-ttu-id="d2985-585">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-585">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-586">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-586">Build</span></span> |  
| <span data-ttu-id="d2985-587">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-587">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-588">泛型、NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="d2985-588">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="d2985-589">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-589">**Attributes**</span></span>              | <span data-ttu-id="d2985-590">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-590">N/A</span></span>  |
| <span data-ttu-id="d2985-591">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-591">**References**</span></span>              | <span data-ttu-id="d2985-592">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx)、[Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html)</span><span class="sxs-lookup"><span data-stu-id="d2985-592">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html)</span></span> |
| <span data-ttu-id="d2985-593">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-593">**Steps**</span></span> | <p><span data-ttu-id="d2985-594">此服務並不會使用授權控制。</span><span class="sxs-lookup"><span data-stu-id="d2985-594">This service does not use an authorization control.</span></span> <span data-ttu-id="d2985-595">當用戶端呼叫特定 WCF 服務時，WCF 會提供各種授權方案，以確認呼叫端有權在伺服器上執行此服務方法。</span><span class="sxs-lookup"><span data-stu-id="d2985-595">When a client calls a particular WCF service, WCF provides various authorization schemes that verify that the caller has permission to execute the service method on the server.</span></span> <span data-ttu-id="d2985-596">如果未針對 WCF 服務啟用授權控制，經過驗證的使用者可以獲得權限提升。</span><span class="sxs-lookup"><span data-stu-id="d2985-596">If authorization controls are not enabled for WCF services, an authenticated user can achieve privilege escalation.</span></span></p>|

### <a name="example"></a><span data-ttu-id="d2985-597">範例</span><span class="sxs-lookup"><span data-stu-id="d2985-597">Example</span></span>
<span data-ttu-id="d2985-598">下列組態會指示 WCF 不要在執行服務時檢查用戶端的授權層級︰</span><span class="sxs-lookup"><span data-stu-id="d2985-598">The following configuration instructs WCF to not check the authorization level of the client when executing the service:</span></span>
```
<behaviors>
    <serviceBehaviors>
        <behavior>
            ...
            <serviceAuthorization principalPermissionMode=""None"" />
        </behavior>
    </serviceBehaviors>
</behaviors>
```
<span data-ttu-id="d2985-599">使用服務授權方案來確認服務方法的呼叫端獲得授權執行這項操作。</span><span class="sxs-lookup"><span data-stu-id="d2985-599">Use a service authorization scheme to verify that the caller of the service method is authorized to do so.</span></span> <span data-ttu-id="d2985-600">WCF 提供兩種模式，並允許定義自訂授權方案。</span><span class="sxs-lookup"><span data-stu-id="d2985-600">WCF provides two modes and allows the definition of a custom authorization scheme.</span></span> <span data-ttu-id="d2985-601">UseWindowsGroups 模式會使用 Windows 角色和使用者進行驗證，而 UseAspNetRoles 模式會使用 ASP.NET 角色提供者 (例如 SQL Server) 進行驗證。</span><span class="sxs-lookup"><span data-stu-id="d2985-601">The UseWindowsGroups mode uses Windows roles and users and the UseAspNetRoles mode uses an ASP.NET role provider, such as SQL Server, to authenticate.</span></span>

### <a name="example"></a><span data-ttu-id="d2985-602">範例</span><span class="sxs-lookup"><span data-stu-id="d2985-602">Example</span></span>
<span data-ttu-id="d2985-603">下列組態會指示 WCF 在執行 [新增] 服務之前，確定用戶端屬於系統管理員群組︰</span><span class="sxs-lookup"><span data-stu-id="d2985-603">The following configuration instructs WCF to make sure that the client is part of the Administrators group before executing the Add service:</span></span>
```
<behaviors>
    <serviceBehaviors>
        <behavior>
            ...
            <serviceAuthorization principalPermissionMode=""UseWindowsGroups"" />
        </behavior>
    </serviceBehaviors>
</behaviors>
```
<span data-ttu-id="d2985-604">然後會宣告此服務，如下所示：</span><span class="sxs-lookup"><span data-stu-id="d2985-604">The service is then declared as the following:</span></span>
```
[PrincipalPermission(SecurityAction.Demand,
Role = ""Builtin\\Administrators"")]
public double Add(double n1, double n2)
{
double result = n1 + n2;
return result;
}
```

## <span data-ttu-id="d2985-605"><a id="authz-aspnet"></a>在 ASP.NET Web API 中實作適當的授權機制</span><span class="sxs-lookup"><span data-stu-id="d2985-605"><a id="authz-aspnet"></a>Implement proper authorization mechanism in ASP.NET Web API</span></span>

| <span data-ttu-id="d2985-606">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-606">Title</span></span>                   | <span data-ttu-id="d2985-607">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-607">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-608">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-608">**Component**</span></span>               | <span data-ttu-id="d2985-609">Web API</span><span class="sxs-lookup"><span data-stu-id="d2985-609">Web API</span></span> | 
| <span data-ttu-id="d2985-610">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-610">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-611">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-611">Build</span></span> |  
| <span data-ttu-id="d2985-612">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-612">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-613">泛型、MVC5</span><span class="sxs-lookup"><span data-stu-id="d2985-613">Generic, MVC5</span></span> |
| <span data-ttu-id="d2985-614">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-614">**Attributes**</span></span>              | <span data-ttu-id="d2985-615">N/A、識別提供者 - ADFS、識別提供者 - Azure AD</span><span class="sxs-lookup"><span data-stu-id="d2985-615">N/A, Identity Provider - ADFS, Identity Provider - Azure AD</span></span> |
| <span data-ttu-id="d2985-616">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-616">**References**</span></span>              | [<span data-ttu-id="d2985-617">ASP.NET Web API 中的驗證與授權</span><span class="sxs-lookup"><span data-stu-id="d2985-617">Authentication and Authorization in ASP.NET Web API</span></span>](http://www.asp.net/web-api/overview/security/authentication-and-authorization-in-aspnet-web-api) |
| <span data-ttu-id="d2985-618">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-618">**Steps**</span></span> | <p><span data-ttu-id="d2985-619">如果應用程式依賴 Azure AD 或 ADFS 宣告作為識別提供者，即可從 Azure AD 或 ADFS 宣告擷取應用程式使用者的角色資訊，否則應用程式本身可能會提供此資訊。</span><span class="sxs-lookup"><span data-stu-id="d2985-619">Role information for the application users can be derived from Azure AD or ADFS claims if the application relies on them as Identity provider or the application itself might provided it.</span></span> <span data-ttu-id="d2985-620">在任何這類情況下，自訂授權實作應驗證使用者角色資訊。</span><span class="sxs-lookup"><span data-stu-id="d2985-620">In any of these cases, the custom authorization implementation should validate the user role information.</span></span></p><p><span data-ttu-id="d2985-621">如果應用程式依賴 Azure AD 或 ADFS 宣告作為識別提供者，即可從 Azure AD 或 ADFS 宣告擷取應用程式使用者的角色資訊，否則應用程式本身可能會提供此資訊。</span><span class="sxs-lookup"><span data-stu-id="d2985-621">Role information for the application users can be derived from Azure AD or ADFS claims if the application relies on them as Identity provider or the application itself might provided it.</span></span> <span data-ttu-id="d2985-622">在任何這類情況下，自訂授權實作應驗證使用者角色資訊。</span><span class="sxs-lookup"><span data-stu-id="d2985-622">In any of these cases, the custom authorization implementation should validate the user role information.</span></span></p>

### <a name="example"></a><span data-ttu-id="d2985-623">範例</span><span class="sxs-lookup"><span data-stu-id="d2985-623">Example</span></span>
```C#
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, Inherited = true, AllowMultiple = true)]
public class ApiAuthorizeAttribute : System.Web.Http.AuthorizeAttribute
{
        public async override Task OnAuthorizationAsync(HttpActionContext actionContext, CancellationToken cancellationToken)
        {
            if (actionContext == null)
            {
                throw new Exception();
            }

            if (!string.IsNullOrEmpty(base.Roles))
            {
                bool isAuthorized = ValidateRoles(actionContext);
                if (!isAuthorized)
                {
                    HandleUnauthorizedRequest(actionContext);
                }
            }

            base.OnAuthorization(actionContext);
        }

public bool ValidateRoles(actionContext)
{
   //Authorization logic here; returns true or false
}

}
```
<span data-ttu-id="d2985-624">應使用上述屬性裝飾所有需要保護的控制器和動作方法。</span><span class="sxs-lookup"><span data-stu-id="d2985-624">All the controllers and action methods which needs to protected should be decorated with above attribute.</span></span>
```C#
[ApiAuthorize]
public class CustomController : ApiController
{
     //Application code goes here
}
```

## <span data-ttu-id="d2985-625"><a id="device-permission"></a>如果支援各種需要不同權限層級的動作，則在裝置中執行授權檢查</span><span class="sxs-lookup"><span data-stu-id="d2985-625"><a id="device-permission"></a>Perform authorization checks in the device if it supports various actions that require different permission levels</span></span>

| <span data-ttu-id="d2985-626">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-626">Title</span></span>                   | <span data-ttu-id="d2985-627">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-627">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-628">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-628">**Component**</span></span>               | <span data-ttu-id="d2985-629">IoT 裝置</span><span class="sxs-lookup"><span data-stu-id="d2985-629">IoT Device</span></span> | 
| <span data-ttu-id="d2985-630">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-630">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-631">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-631">Build</span></span> |  
| <span data-ttu-id="d2985-632">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-632">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-633">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-633">Generic</span></span> |
| <span data-ttu-id="d2985-634">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-634">**Attributes**</span></span>              | <span data-ttu-id="d2985-635">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-635">N/A</span></span>  |
| <span data-ttu-id="d2985-636">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-636">**References**</span></span>              | <span data-ttu-id="d2985-637">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-637">N/A</span></span>  |
| <span data-ttu-id="d2985-638">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-638">**Steps**</span></span> | <p><span data-ttu-id="d2985-639">裝置應授權呼叫端檢查呼叫端是否具有執行所要求動作的必要權限。</span><span class="sxs-lookup"><span data-stu-id="d2985-639">The Device should authorize the caller to check if the caller has the required permissions to perform the action requested.</span></span> <span data-ttu-id="d2985-640">例如：假設裝置是可從雲端監視的「智慧型門鎖」，而且會提供遠端鎖定大門等功能。</span><span class="sxs-lookup"><span data-stu-id="d2985-640">For e.g. Lets say the device is a Smart Door Lock that can be monitored from the cloud, plus it provides functionalities like Remotely locking the door.</span></span></p><p><span data-ttu-id="d2985-641">只有在有人實際帶著卡片接近大門時，「智慧型門鎖」才會提供解除鎖定功能。</span><span class="sxs-lookup"><span data-stu-id="d2985-641">The Smart Door Lock provides unlocking functionality only when someone physically comes near the door with a Card.</span></span> <span data-ttu-id="d2985-642">在此案例中，遠端命令和控制項的實作方式應該如下：不提供任何將大門解除鎖定的功能，因為雲端閘道未經授權傳送命令來將大門解除鎖定。</span><span class="sxs-lookup"><span data-stu-id="d2985-642">In this case, the implementation of the remote command and control should be done in such a way that it does not provide any functionality to unlock the door as the cloud gateway is not authorized to send a command to unlock the door.</span></span></p>|

## <span data-ttu-id="d2985-643"><a id="field-permission"></a>如果支援各種需要不同權限層級的動作，則在現場閘道中執行授權檢查</span><span class="sxs-lookup"><span data-stu-id="d2985-643"><a id="field-permission"></a>Perform authorization checks in the Field Gateway if it supports various actions that require different permission levels</span></span>

| <span data-ttu-id="d2985-644">Title</span><span class="sxs-lookup"><span data-stu-id="d2985-644">Title</span></span>                   | <span data-ttu-id="d2985-645">詳細資料</span><span class="sxs-lookup"><span data-stu-id="d2985-645">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d2985-646">**元件**</span><span class="sxs-lookup"><span data-stu-id="d2985-646">**Component**</span></span>               | <span data-ttu-id="d2985-647">IoT 現場閘道</span><span class="sxs-lookup"><span data-stu-id="d2985-647">IoT Field Gateway</span></span> | 
| <span data-ttu-id="d2985-648">**SDL 階段**</span><span class="sxs-lookup"><span data-stu-id="d2985-648">**SDL Phase**</span></span>               | <span data-ttu-id="d2985-649">建置</span><span class="sxs-lookup"><span data-stu-id="d2985-649">Build</span></span> |  
| <span data-ttu-id="d2985-650">**適用的技術**</span><span class="sxs-lookup"><span data-stu-id="d2985-650">**Applicable Technologies**</span></span> | <span data-ttu-id="d2985-651">泛型</span><span class="sxs-lookup"><span data-stu-id="d2985-651">Generic</span></span> |
| <span data-ttu-id="d2985-652">**屬性**</span><span class="sxs-lookup"><span data-stu-id="d2985-652">**Attributes**</span></span>              | <span data-ttu-id="d2985-653">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-653">N/A</span></span>  |
| <span data-ttu-id="d2985-654">**參考**</span><span class="sxs-lookup"><span data-stu-id="d2985-654">**References**</span></span>              | <span data-ttu-id="d2985-655">N/A</span><span class="sxs-lookup"><span data-stu-id="d2985-655">N/A</span></span>  |
| <span data-ttu-id="d2985-656">**步驟**</span><span class="sxs-lookup"><span data-stu-id="d2985-656">**Steps**</span></span> | <span data-ttu-id="d2985-657">現場閘道應授權呼叫端檢查呼叫端是否具有執行所要求動作的必要權限。</span><span class="sxs-lookup"><span data-stu-id="d2985-657">The Field Gateway should authorize the caller to check if the caller has the required permissions to perform the action requested.</span></span> <span data-ttu-id="d2985-658">例如︰系統管理員使用者介面/API 應使用不同的權限來設定與其連線的現場閘道 v/s 裝置。</span><span class="sxs-lookup"><span data-stu-id="d2985-658">For e.g. there should be different permissions for an admin user interface/API used to configure a field gateway v/s devices that connect to it.</span></span>|
