---
title: "在 Azure 中的 PaaS 資料庫 aaaSecuring |Microsoft 文件"
description: " 了解用來保護 PaaS Web 與行動應用程式的 Azure SQL Database 和 SQL 資料倉儲安全性最佳做法。 "
services: security
documentationcenter: na
author: techlake
manager: MBaldwin
editor: 
ms.assetid: 
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 07/11/2017
ms.author: terrylan
ms.openlocfilehash: a7f9a2846b59dcb05e82f2ad88b41c5213295603
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="securing-paas-databases-in-azure"></a><span data-ttu-id="c87e0-103">保護 Azure 中的 PaaS 資料庫</span><span class="sxs-lookup"><span data-stu-id="c87e0-103">Securing PaaS databases in Azure</span></span>

<span data-ttu-id="c87e0-104">在本文中，我們將說明用來保護 PaaS Web 與行動應用程式的 [Azure SQL Database](https://azure.microsoft.com/services/sql-database/) 和 [SQL 資料倉儲](https://azure.microsoft.com/services/sql-data-warehouse/)安全性最佳做法。</span><span class="sxs-lookup"><span data-stu-id="c87e0-104">In this article, we discuss a collection of [Azure SQL Database](https://azure.microsoft.com/services/sql-database/) and [SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/) security best practices for securing your PaaS web and mobile applications.</span></span> <span data-ttu-id="c87e0-105">這些最佳作法從我們的經驗與 Azure 和 hello 經驗的客戶想自己。</span><span class="sxs-lookup"><span data-stu-id="c87e0-105">These best practices are derived from our experience with Azure and hello experiences of customers like yourself.</span></span>

## <a name="azure-sql-database-and-sql-data-warehouse"></a><span data-ttu-id="c87e0-106">Azure SQL Database 和 SQL 資料倉儲</span><span class="sxs-lookup"><span data-stu-id="c87e0-106">Azure SQL Database and SQL Data Warehouse</span></span>
<span data-ttu-id="c87e0-107">[Azure SQL Database](../sql-database/sql-database-technical-overview.md) 和 [SQL 資料倉儲](../sql-data-warehouse/sql-data-warehouse-overview-what-is.md)可為您的網際網路型應用程式提供關聯式資料庫服務。</span><span class="sxs-lookup"><span data-stu-id="c87e0-107">[Azure SQL Database](../sql-database/sql-database-technical-overview.md) and [SQL Data Warehouse](../sql-data-warehouse/sql-data-warehouse-overview-what-is.md) provide a relational database service for your Internet-based applications.</span></span> <span data-ttu-id="c87e0-108">讓我們來了解當使用 PaaS 部署中的 Azure SQL Database 和「SQL 資料倉儲」時，可協助保護您應用程式和資料的服務：</span><span class="sxs-lookup"><span data-stu-id="c87e0-108">Let’s look at services that help protect your applications and data when using Azure SQL Database and SQL Data Warehouse in a PaaS deployment:</span></span>

- <span data-ttu-id="c87e0-109">Azure Active Directory 驗證 (而不是 SQL Server 驗證)</span><span class="sxs-lookup"><span data-stu-id="c87e0-109">Azure Active Directory authentication (instead of SQL Server authentication)</span></span>
- <span data-ttu-id="c87e0-110">Azure SQL 防火牆</span><span class="sxs-lookup"><span data-stu-id="c87e0-110">Azure SQL firewall</span></span>
- <span data-ttu-id="c87e0-111">透明資料加密 (TDE)</span><span class="sxs-lookup"><span data-stu-id="c87e0-111">Transparent Data Encryption (TDE)</span></span>

## <a name="best-practices"></a><span data-ttu-id="c87e0-112">最佳作法</span><span class="sxs-lookup"><span data-stu-id="c87e0-112">Best practices</span></span>

### <a name="use-a-centralized-identity-repository-for-authentication-and-authorization"></a><span data-ttu-id="c87e0-113">使用集中式身分識別儲存機制來進行驗證和授權</span><span class="sxs-lookup"><span data-stu-id="c87e0-113">Use a centralized identity repository for authentication and authorization</span></span>

<span data-ttu-id="c87e0-114">Azure SQL 資料庫可以是下列其中一種驗證設定的 toouse:</span><span class="sxs-lookup"><span data-stu-id="c87e0-114">Azure SQL databases can be configured toouse one of two types of authentication:</span></span>

- <span data-ttu-id="c87e0-115">「SQL 驗證」會使用使用者名稱和密碼。</span><span class="sxs-lookup"><span data-stu-id="c87e0-115">**SQL Authentication** uses a username and password.</span></span> <span data-ttu-id="c87e0-116">當您為您的資料庫建立 hello 邏輯伺服器時，您可以指定 「 伺服器管理員 」 的登入使用者名稱和密碼。</span><span class="sxs-lookup"><span data-stu-id="c87e0-116">When you created hello logical server for your database, you specified a "server admin" login with a username and password.</span></span> <span data-ttu-id="c87e0-117">使用這些認證時，您可以驗證該伺服器上的 tooany 資料庫 hello 資料庫擁有者。</span><span class="sxs-lookup"><span data-stu-id="c87e0-117">Using these credentials, you can authenticate tooany database on that server as hello database owner.</span></span>

- <span data-ttu-id="c87e0-118">「Azure Active Directory 驗證」會使用由 Azure Active Directory 管理的身分識別，並且受管理網域和整合式網域都支援此驗證。</span><span class="sxs-lookup"><span data-stu-id="c87e0-118">**Azure Active Directory Authentication** uses identities managed by Azure Active Directory and is supported for managed and integrated domains.</span></span> <span data-ttu-id="c87e0-119">toouse Azure Active Directory 驗證，您必須建立另一個伺服器系統管理員稱為 hello"Azure AD admin"，這允許 tooadminister Azure AD 使用者和群組。</span><span class="sxs-lookup"><span data-stu-id="c87e0-119">toouse Azure Active Directory Authentication, you must create another server admin called hello "Azure AD admin," which is allowed tooadminister Azure AD users and groups.</span></span> <span data-ttu-id="c87e0-120">此管理員也可以執行一般伺服器管理員可執行的所有作業。</span><span class="sxs-lookup"><span data-stu-id="c87e0-120">This admin can also perform all operations that a regular server admin can.</span></span>

<span data-ttu-id="c87e0-121">[Azure Active Directory 驗證](../active-directory/develop/active-directory-authentication-scenarios.md)機制來使用身分識別中 Azure Active Directory (AD) 連線 tooAzure SQL Database 和 SQL 資料倉儲。</span><span class="sxs-lookup"><span data-stu-id="c87e0-121">[Azure Active Directory authentication](../active-directory/develop/active-directory-authentication-scenarios.md) is a mechanism of connecting tooAzure SQL Database and SQL Data Warehouse by using identities in Azure Active Directory (AD).</span></span> <span data-ttu-id="c87e0-122">Azure AD 提供替代 tooSQL 伺服器驗證，因此您可以停止的使用者身分識別的 hello 擴散到資料庫伺服器。</span><span class="sxs-lookup"><span data-stu-id="c87e0-122">Azure AD provides an alternative tooSQL Server authentication so you can stop hello proliferation of user identities across database servers.</span></span> <span data-ttu-id="c87e0-123">Azure AD 驗證可讓您 toocentrally 管理的資料庫使用者與其他 Microsoft 服務，在單一集中位置的 hello 身分識別。</span><span class="sxs-lookup"><span data-stu-id="c87e0-123">Azure AD authentication enables you toocentrally manage hello identities of database users and other Microsoft services in one central location.</span></span> <span data-ttu-id="c87e0-124">中央識別碼管理 toomanage 資料庫使用者提供單一位置，並簡化權限管理。</span><span class="sxs-lookup"><span data-stu-id="c87e0-124">Central ID management provides a single place toomanage database users and simplifies permission management.</span></span>  

<span data-ttu-id="c87e0-125">使用 Azure AD 驗證而不使用 SQL Server 驗證的好處包括：</span><span class="sxs-lookup"><span data-stu-id="c87e0-125">Benefits of using Azure AD authentication instead of SQL authentication include:</span></span>

- <span data-ttu-id="c87e0-126">允許在單一位置變換密碼。</span><span class="sxs-lookup"><span data-stu-id="c87e0-126">Allows password rotation in a single place.</span></span>
- <span data-ttu-id="c87e0-127">使用外部 Azure AD 群組來管理資料庫權限。</span><span class="sxs-lookup"><span data-stu-id="c87e0-127">Manages database permissions using external Azure AD groups.</span></span>
- <span data-ttu-id="c87e0-128">藉由啟用整合式 Windows 驗證和 Azure AD 支援的其他形式驗證來避免儲存密碼。</span><span class="sxs-lookup"><span data-stu-id="c87e0-128">Eliminates storing passwords by enabling integrated Windows authentication and other forms of authentication supported by Azure AD.</span></span>
- <span data-ttu-id="c87e0-129">使用自主資料庫使用者 tooauthenticate 識別 hello 資料庫層級。</span><span class="sxs-lookup"><span data-stu-id="c87e0-129">Uses contained database users tooauthenticate identities at hello database level.</span></span>
- <span data-ttu-id="c87e0-130">支援權杖為基礎的驗證連接 tooSQL 資料庫應用程式。</span><span class="sxs-lookup"><span data-stu-id="c87e0-130">Supports token-based authentication for applications connecting tooSQL Database.</span></span>
- <span data-ttu-id="c87e0-131">支援本機 Azure AD 的 ADFS (網域同盟) 或原生使用者/密碼驗證，而不需進行網域同步處理。</span><span class="sxs-lookup"><span data-stu-id="c87e0-131">Supports ADFS (domain federation) or native user/password authentication for a local Azure AD without domain synchronization.</span></span>
- <span data-ttu-id="c87e0-132">支援來自 SQL Server Management Studio 之使用「Active Directory 通用驗證」(包括 [Multi-Factor Authentication (MFA)](../multi-factor-authentication/multi-factor-authentication.md)) 的連線。</span><span class="sxs-lookup"><span data-stu-id="c87e0-132">Supports connections from SQL Server Management Studio that use Active Directory Universal Authentication, which includes [Multi-Factor Authentication (MFA)](../multi-factor-authentication/multi-factor-authentication.md).</span></span> <span data-ttu-id="c87e0-133">MFA 包含增強式驗證功能，其中提供一系列簡易的驗證選項，例如電話、簡訊、含有 PIN 的智慧卡或行動應用程式通知。</span><span class="sxs-lookup"><span data-stu-id="c87e0-133">MFA includes strong authentication with a range of easy verification options — phone call, text message, smart cards with pin, or mobile app notification.</span></span> <span data-ttu-id="c87e0-134">如需詳細資訊，請參閱 [適用於與 SQL Database 和 SQL 資料倉儲搭配使用之 Azure AD MFA 的 SSMS 支援](../sql-database/sql-database-ssms-mfa-authentication.md)。</span><span class="sxs-lookup"><span data-stu-id="c87e0-134">For more information, see [SSMS support for Azure AD MFA with SQL Database and SQL Data Warehouse](../sql-database/sql-database-ssms-mfa-authentication.md).</span></span>

<span data-ttu-id="c87e0-135">toolearn 進一步了解 Azure AD 驗證，請參閱：</span><span class="sxs-lookup"><span data-stu-id="c87e0-135">toolearn more about Azure AD authentication, see:</span></span>

- [<span data-ttu-id="c87e0-136">TooSQL 資料庫或 SQL 資料倉儲使用 Azure Active Directory 驗證連接</span><span class="sxs-lookup"><span data-stu-id="c87e0-136">Connecting tooSQL Database or SQL Data Warehouse By Using Azure Active Directory Authentication</span></span>](../sql-database/sql-database-aad-authentication.md)
- [<span data-ttu-id="c87e0-137">驗證 tooAzure SQL 資料倉儲</span><span class="sxs-lookup"><span data-stu-id="c87e0-137">Authentication tooAzure SQL Data Warehouse</span></span>](../sql-data-warehouse/sql-data-warehouse-authentication.md)
- [<span data-ttu-id="c87e0-138">使用 Azure AD 驗證之 Azure SQL DB 的權杖型驗證支援 (英文)</span><span class="sxs-lookup"><span data-stu-id="c87e0-138">Token-based authentication support for Azure SQL DB using Azure AD authentication</span></span>](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/)

> [!NOTE]
> <span data-ttu-id="c87e0-139">請參閱 Azure Active Directory 是您的環境，適合 tooensure [Azure AD 的功能和限制](../sql-database/sql-database-aad-authentication.md#azure-ad-features-and-limitations)，具體來說 hello 其他考量。</span><span class="sxs-lookup"><span data-stu-id="c87e0-139">tooensure that Azure Active Directory is a good fit for your environment, see [Azure AD features and limitations](../sql-database/sql-database-aad-authentication.md#azure-ad-features-and-limitations), specifically hello additional considerations.</span></span>
>
>

### <a name="restrict-access-based-on-ip-address"></a><span data-ttu-id="c87e0-140">根據 IP 位址限制存取</span><span class="sxs-lookup"><span data-stu-id="c87e0-140">Restrict Access based on IP Address</span></span>
<span data-ttu-id="c87e0-141">您可以建立指定可接受之 IP 位址範圍的防火牆規則。</span><span class="sxs-lookup"><span data-stu-id="c87e0-141">You can create firewall rules that specify ranges of acceptable IP addresses.</span></span> <span data-ttu-id="c87e0-142">這些規則可以 hello 伺服器和資料庫層級上的目標。</span><span class="sxs-lookup"><span data-stu-id="c87e0-142">These rules can be targeted at both hello server and database levels.</span></span> <span data-ttu-id="c87e0-143">我們建議使用資料庫層級防火牆規則時可能 tooenhance 安全性和 toomake 更容易移植您的資料庫。</span><span class="sxs-lookup"><span data-stu-id="c87e0-143">We recommend using database-level firewall rules whenever possible tooenhance security and toomake your database more portable.</span></span> <span data-ttu-id="c87e0-144">伺服器層級防火牆規則最適合用於系統管理員，當您已擁有 hello 的許多資料庫相同的存取需求，但您不想 toospend 個別設定每個資料庫的時間。</span><span class="sxs-lookup"><span data-stu-id="c87e0-144">Server-level firewall rules are best used for administrators and when you have many databases that have hello same access requirements but you don't want toospend time configuring each database individually.</span></span>

<span data-ttu-id="c87e0-145">SQL Database 的預設來源 IP 位址限制會允許來自任何 Azure 位址 (包括其他訂用帳戶和租用戶) 的存取。</span><span class="sxs-lookup"><span data-stu-id="c87e0-145">SQL Database’s default source IP address restrictions allow access from any Azure address (including other subscriptions and tenants).</span></span> <span data-ttu-id="c87e0-146">您可以限制此 tooonly 允許您 IP 位址 tooaccess hello 執行個體。</span><span class="sxs-lookup"><span data-stu-id="c87e0-146">You can restrict this tooonly allow your IP addresses tooaccess hello instance.</span></span> <span data-ttu-id="c87e0-147">即使在有 SQL 防火牆和 IP 位址限制的情況下，仍然需要增強式驗證。</span><span class="sxs-lookup"><span data-stu-id="c87e0-147">Even with your SQL firewall and IP address restrictions, strong authentication is still needed.</span></span> <span data-ttu-id="c87e0-148">請參閱 hello 稍早在本文中所提供的建議。</span><span class="sxs-lookup"><span data-stu-id="c87e0-148">See hello recommendations made earlier in this article.</span></span>

<span data-ttu-id="c87e0-149">toolearn 深入了解 Azure SQL 防火牆和 IP 限制，請參閱：</span><span class="sxs-lookup"><span data-stu-id="c87e0-149">toolearn more about Azure SQL Firewall and IP restrictions, see:</span></span>

- [<span data-ttu-id="c87e0-150">Azure SQL Database 存取控制</span><span class="sxs-lookup"><span data-stu-id="c87e0-150">Azure SQL Database access control</span></span>](../sql-database/sql-database-control-access.md)
- [<span data-ttu-id="c87e0-151">設定 Azure SQL Database 防火牆規則 - 概觀</span><span class="sxs-lookup"><span data-stu-id="c87e0-151">Configure Azure SQL Database firewall rules - overview</span></span>](../sql-database/sql-database-firewall-configure.md)
- [<span data-ttu-id="c87e0-152">設定使用 hello Azure 入口網站的 Azure SQL Database 伺服器層級防火牆規則</span><span class="sxs-lookup"><span data-stu-id="c87e0-152">Configure an Azure SQL Database server-level firewall rule using hello Azure portal</span></span>](../sql-database/sql-database-configure-firewall-settings.md)

### <a name="encryption-of-data-at-rest"></a><span data-ttu-id="c87e0-153">待用資料加密</span><span class="sxs-lookup"><span data-stu-id="c87e0-153">Encryption of data at rest</span></span>
<span data-ttu-id="c87e0-154">[透明資料加密 (TDE)](https://msdn.microsoft.com/library/azure/bb934049) 預設為啟用。</span><span class="sxs-lookup"><span data-stu-id="c87e0-154">[Transparent Data Encryption (TDE)](https://msdn.microsoft.com/library/azure/bb934049) is enabled by default.</span></span> <span data-ttu-id="c87e0-155">TDE 會透明加密 SQL Server、Azure SQL Database 和 Azure SQL 資料倉儲資料和記錄檔。</span><span class="sxs-lookup"><span data-stu-id="c87e0-155">TDE transparently encrypts SQL Server, Azure SQL Database, and Azure SQL Data Warehouse data and log files.</span></span> <span data-ttu-id="c87e0-156">TDE 會保護免於遭受洩露的直接存取 toohello 檔案或其備份。</span><span class="sxs-lookup"><span data-stu-id="c87e0-156">TDE protects against a compromise of direct access toohello files or their backup.</span></span> <span data-ttu-id="c87e0-157">這可讓您在靜止 tooencrypt 資料而不需要變更現有的應用程式。</span><span class="sxs-lookup"><span data-stu-id="c87e0-157">This enables you tooencrypt data at rest without changing existing applications.</span></span> <span data-ttu-id="c87e0-158">TDE 一律保持啟用。不過，這不會停止攻擊者使用 hello 一般存取路徑。</span><span class="sxs-lookup"><span data-stu-id="c87e0-158">TDE should always stay enabled; however, this will not stop an attacker using hello normal access path.</span></span> <span data-ttu-id="c87e0-159">TDE 會提供許多的法律、 規定與方針各種產業中建立與 hello 能力 toocomply。</span><span class="sxs-lookup"><span data-stu-id="c87e0-159">TDE provides hello ability toocomply with many laws, regulations, and guidelines established in various industries.</span></span>

<span data-ttu-id="c87e0-160">Azure SQL 會管理 TDE 的金鑰相關問題。</span><span class="sxs-lookup"><span data-stu-id="c87e0-160">Azure SQL manages key related issues for TDE.</span></span> <span data-ttu-id="c87e0-161">Tde，在內部部署特殊必須特別小心 tooensure 復原能力，移動資料庫時。</span><span class="sxs-lookup"><span data-stu-id="c87e0-161">As with TDE, on premise special care must be taken tooensure recoverability and when moving databases.</span></span> <span data-ttu-id="c87e0-162">在更複雜的情況下，hello 金鑰可以明確地管理 Azure 金鑰保存庫中透過可延伸金鑰管理 (請參閱[SQL Server 使用 EKM 啟用 TDE](/security/encryption/enable-tde-on-sql-server-using-ekm))。</span><span class="sxs-lookup"><span data-stu-id="c87e0-162">In more sophisticated scenarios, hello keys can be explicitly managed in Azure Key Vault through extensible key management (see [Enable TDE on SQL Server Using EKM](/security/encryption/enable-tde-on-sql-server-using-ekm)).</span></span> <span data-ttu-id="c87e0-163">也可以透過 Azure Key Vault BYOK 功能，實行自備金鑰 (BYOK)。</span><span class="sxs-lookup"><span data-stu-id="c87e0-163">This also allows for Bring Your Own Key (BYOK) through Azure Key Vaults BYOK capability.</span></span>

<span data-ttu-id="c87e0-164">Azure SQL 可透過 [Always Encrypted](/sql/relational-databases/security/encryption/always-encrypted-database-engine) 提供資料行加密。</span><span class="sxs-lookup"><span data-stu-id="c87e0-164">Azure SQL provides encryption for columns through [Always Encrypted](/sql/relational-databases/security/encryption/always-encrypted-database-engine).</span></span> <span data-ttu-id="c87e0-165">這可讓只有獲得授權的應用程式存取 toosensitive 資料行。</span><span class="sxs-lookup"><span data-stu-id="c87e0-165">This allows only authorized applications access toosensitive columns.</span></span> <span data-ttu-id="c87e0-166">使用這類加密限於 SQL 查詢加密資料行 tooequality 為基礎的值。</span><span class="sxs-lookup"><span data-stu-id="c87e0-166">Using this kind of encryption limits SQL queries for encrypted columns tooequality-based values.</span></span>

<span data-ttu-id="c87e0-167">應用程式層級加密也應該用於選擇性資料。</span><span class="sxs-lookup"><span data-stu-id="c87e0-167">Application level encryption should also be used for selective data.</span></span> <span data-ttu-id="c87e0-168">加密的資料保留在 hello 正確的國家/地區中的索引鍵有時可以減輕資料 sovereignty 考量。</span><span class="sxs-lookup"><span data-stu-id="c87e0-168">Data sovereignty concerns can sometimes be mitigated by encrypting data with a key that is kept in hello correct country.</span></span> <span data-ttu-id="c87e0-169">這可防止甚至意外的資料傳輸造成問題，因為它是不可能 toodecrypt hello hello 索引鍵，假設較強的演算法沒有資料的使用 （例如 AES 256)。</span><span class="sxs-lookup"><span data-stu-id="c87e0-169">This prevents even accidental data transfer from causing an issue since it is impossible toodecrypt hello data without hello key, assuming a strong algorithm is used (such as AES 256).</span></span>

<span data-ttu-id="c87e0-170">您可以使用額外的預防措施 toohelp 安全 hello 資料庫，例如設計安全的系統、 加密機密的資產，以及 hello 資料庫伺服器周圍建立防火牆。</span><span class="sxs-lookup"><span data-stu-id="c87e0-170">You can use additional precautions toohelp secure hello database such as designing a secure system, encrypting confidential assets, and building a firewall around hello database servers.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c87e0-171">後續步驟</span><span class="sxs-lookup"><span data-stu-id="c87e0-171">Next steps</span></span>
<span data-ttu-id="c87e0-172">本文介紹您 tooa 集合的 SQL Database 和 SQL 資料倉儲安全性最佳作法來保護您的 PaaS web 與行動應用程式。</span><span class="sxs-lookup"><span data-stu-id="c87e0-172">This article introduced you tooa collection of SQL Database and SQL Data Warehouse security best practices for securing your PaaS web and mobile applications.</span></span> <span data-ttu-id="c87e0-173">toolearn 深入了解保護您的 PaaS 部署，請參閱：</span><span class="sxs-lookup"><span data-stu-id="c87e0-173">toolearn more about securing your PaaS deployments, see:</span></span>

- [<span data-ttu-id="c87e0-174">保護 PaaS 部署</span><span class="sxs-lookup"><span data-stu-id="c87e0-174">Securing PaaS deployments</span></span>](security-paas-deployments.md)
- [<span data-ttu-id="c87e0-175">使用 Azure App Service 來保護 PaaS Web 與行動應用程式</span><span class="sxs-lookup"><span data-stu-id="c87e0-175">Securing PaaS web and mobile applications using Azure App Services</span></span>](security-paas-applications-using-app-services.md)
