---
title: "Azure 網路安全性 | Microsoft Docs"
description: "了解雲端式計算服務，其中包含各式各樣的計算執行個體和服務，可自動相應增加或縮小以符合您應用程式或企業的需求。"
services: security
documentationcenter: na
author: UnifyCloud
manager: swadhwa
editor: TomSh
ms.assetid: 
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/24/2017
ms.author: TomSh
ms.openlocfilehash: 6ab59dd02391287a1effc0b51502bb7eb90db319
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/18/2017
---
# <a name="azure-network-security"></a><span data-ttu-id="5a5f7-103">Azure 網路安全性</span><span class="sxs-lookup"><span data-stu-id="5a5f7-103">Azure network security</span></span>

<span data-ttu-id="5a5f7-104">我們知道安全性是雲端中的首要工作和其重要性，因為您可在其中找到精確且及時的 Azure 安全性資訊。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-104">We know that security is job one in the cloud and how important it is that you find accurate and timely information about Azure security.</span></span> <span data-ttu-id="5a5f7-105">針對您的應用程式和服務使用 Azure 的最佳原因之一，就是可以利用 Azure 的各種安全性工具和功能。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-105">One of the best reasons to use Azure for your applications and services is to take advantage of Azure’s wide array of security tools and capabilities.</span></span> <span data-ttu-id="5a5f7-106">這些工具和功能可協助您在 Azure 平台上建立安全的解決方案。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-106">These tools and capabilities help make it possible to create secure solutions on the Azure platform.</span></span>

<span data-ttu-id="5a5f7-107">Microsoft Azure 提供客戶資料的機密性、完整性和可用性，同時也能釐清責任。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-107">Microsoft Azure provides confidentiality, integrity, and availability of customer data, while also enabling transparent accountability.</span></span> <span data-ttu-id="5a5f7-108">為了協助您從客戶的觀點深入了解如何在 Microsoft Azure 內實作一組網路安全性控制，因而編寫了本文＜Azure 網路安全性＞來提供可透過 Microsoft Azure 取得之網路安全性控制的完整介紹。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-108">To help you better understand the collection of network security controls implemented within Microsoft Azure from the customer's perspective, this article, “Azure Network Security", is written to provide a comprehensive look at the network security controls available with Microsoft Azure.</span></span>

<span data-ttu-id="5a5f7-109">這份文件旨在說明您可以設定的各種網路控制，以增強您在 Azure 中部署之解決方案的安全性。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-109">This paper is intended to inform you about the wide range of network controls that you can configure to enhance the security of the solutions you deploy in Azure.</span></span> <span data-ttu-id="5a5f7-110">如果您對於 Microsoft 如何保護 Azure 平台本身的網路網狀架構有興趣，請參閱 [Microsoft 信任中心](https://www.microsoft.com/trustcenter/security/azure-security)的 Azure 安全性一節。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-110">If you are interested in what Microsoft does to secure the network fabric of the Azure platform itself,  see the Azure security section in the [Microsoft Trust Center](https://www.microsoft.com/trustcenter/security/azure-security).</span></span>

## <a name="azure-platform"></a><span data-ttu-id="5a5f7-111">Azure 平台</span><span class="sxs-lookup"><span data-stu-id="5a5f7-111">Azure platform</span></span>

<span data-ttu-id="5a5f7-112">Azure 是一個公用雲端服務平台，支援廣泛的作業系統、程式設計語言、架構、工具、資料庫及裝置等選擇。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-112">Azure is a public cloud service platform that supports a broad selection of operating systems, programming languages, frameworks, tools, databases, and devices.</span></span>  <span data-ttu-id="5a5f7-113">它可以透過 Docker 整合執行 Linux 容器；使用 JavaScript、Python、.NET、PHP、Java 及 Node.js 建置應用程式；為 iOS、Android 及 Windows 裝置建置後端。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-113">It can run Linux containers with Docker integration; build apps with JavaScript, Python, .NET, PHP, Java, and Node.js; build back-ends for iOS, Android, and Windows devices.</span></span> <span data-ttu-id="5a5f7-114">Azure 雲端服務支援數百萬名開發人員和 IT 專家早已仰賴和信任的相同技術。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-114">Azure cloud services support the same technologies millions of developers and IT professionals already rely on and trust.</span></span>

<span data-ttu-id="5a5f7-115">當您建置 IT 資產或將其移轉至公用雲端服務提供者時，您正是依賴該組織的能力，利用他們提供來管理您雲端架構資產安全性的服務與控制，來保護您的應用程式和資料。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-115">When you build on, or migrate IT assets to, a public cloud service provider, you are relying on that organization’s abilities to protect your applications and data with the services and the controls they provide to manage the security of your cloud-based assets.</span></span>

<span data-ttu-id="5a5f7-116">Azure 的基礎結構設計涵蓋設備與應用程式，可同時裝載數以百萬計的客戶，並提供可靠的基礎供企業符合其安全性需求。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-116">Azure’s infrastructure is designed from the facility to applications for hosting millions of customers simultaneously, and it provides a trustworthy foundation upon which businesses can meet their security requirements.</span></span> <span data-ttu-id="5a5f7-117">此外，Azure 也為您提供各式各樣可設定的安全性選項及控制它們的功能，讓您能夠自訂安全性以符合組織部署的特殊需求。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-117">In addition, Azure provides you with an extensive collection of configurable security options and the ability to control them so that you can customize security to meet the unique requirements of your organization’s deployments.</span></span>

## <a name="abstract"></a><span data-ttu-id="5a5f7-118">摘要</span><span class="sxs-lookup"><span data-stu-id="5a5f7-118">Abstract</span></span>

<span data-ttu-id="5a5f7-119">Microsoft 公用雲端服務提供超大規模的服務和基礎結構、企業級的功能，以及許多混合式連線選項。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-119">Microsoft public cloud services deliver hyper-scale services and infrastructure, enterprise-grade capabilities, and many choices for hybrid connectivity.</span></span> <span data-ttu-id="5a5f7-120">您可以選擇透過網際網路或透過 Azure ExpressRoute (提供私人網路連線能力) 存取這些服務。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-120">You can choose to access these services either via the Internet or with Azure ExpressRoute, which provides private network connectivity.</span></span> <span data-ttu-id="5a5f7-121">Microsoft Azure 平台可讓您順暢地將基礎結構延伸至雲端並建置多層式架構。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-121">The Microsoft Azure platform allows you to seamlessly extend your infrastructure into the cloud and build multi-tier architectures.</span></span> <span data-ttu-id="5a5f7-122">另外，協力廠商可以提供安全性服務和虛擬設備，以啟用增強的功能。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-122">Additionally, third parties can enable enhanced capabilities by offering security services and virtual appliances.</span></span>

<span data-ttu-id="5a5f7-123">Azure 的網路服務設計可將彈性、可用性、復原、安全性和完整性最大化。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-123">Azure’s network services maximize flexibility, availability, resiliency, security, and integrity by design.</span></span> <span data-ttu-id="5a5f7-124">這份白皮書提供 Azure 網路功能的詳細資料，以及客戶如何使用 Azure 原生安全性功能來協助保護其資訊資產的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-124">This white paper provides details on the networking functions of Azure and information on how customers can use Azure’s native security features to help protect their information assets.</span></span>

<span data-ttu-id="5a5f7-125">本白皮書的預定對象包括：</span><span class="sxs-lookup"><span data-stu-id="5a5f7-125">The intended audiences for this whitepaper include:</span></span>

- <span data-ttu-id="5a5f7-126">尋求 Azure 中可用和支援安全性解決方案的技術管理員、網路管理員和開發人員。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-126">Technical managers, network administrators, and developers who are looking for security solutions available and supported in Azure.</span></span>

-   <span data-ttu-id="5a5f7-127">想要進一步了解 Azure 公用雲端網路安全性討論中相關 Azure 網路技術和服務的 SME 或商務程序主管。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-127">SMEs or business process executives who want to get a high-level overview the Azure networking technologies and services that are relevant in discussions around network security in the Azure public cloud.</span></span>

## <a name="azure-networking-big-picture"></a><span data-ttu-id="5a5f7-128">Azure 網路服務概觀</span><span class="sxs-lookup"><span data-stu-id="5a5f7-128">Azure networking big picture</span></span>
<span data-ttu-id="5a5f7-129">Microsoft Azure 包括強大網路基礎結構以支援您的應用程式和服務連線需求。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-129">Microsoft Azure includes a robust networking infrastructure to support your application and service connectivity requirements.</span></span> <span data-ttu-id="5a5f7-130">在 Azure 的資源之間、內部部署與 Azure 託管資源之間，以及到網際網路和 Azure 與來自網際網路和 Azure，可能會有網路連線。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-130">Network connectivity is possible between resources located in Azure, between on-premises and Azure hosted resources, and to and from the Internet and Azure.</span></span>

![Azure 網路服務概觀](media/azure-network-security/azure-network-security-fig-1.png)

<span data-ttu-id="5a5f7-132">[Azure 網路基礎結構](https://docs.microsoft.com/azure/virtual-machines/windows/infrastructure-networking-guidelines)可讓 Azure 資源與虛擬網路 (VNet) 彼此安全地連線。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-132">The [Azure network infrastructure](https://docs.microsoft.com/azure/virtual-machines/windows/infrastructure-networking-guidelines) enables you to securely connect Azure resources to each other with virtual networks (VNets).</span></span> <span data-ttu-id="5a5f7-133">VNet 是您的網路在雲端中的身分。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-133">A VNet is a representation of your own network in the cloud.</span></span> <span data-ttu-id="5a5f7-134">VNet 是專屬於您訂用帳戶的 Azure 雲端網路邏輯隔離。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-134">A VNet is a logical isolation of the Azure cloud network dedicated to your subscription.</span></span> <span data-ttu-id="5a5f7-135">您可以將 VNet 連線到內部部署網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-135">You can connect VNets to your on-premises networks.</span></span>

<span data-ttu-id="5a5f7-136">Azure 支援內部部署網路的專用 WAN 連結連線以及採用 [ExpressRoute](https://docs.microsoft.com/azure/expressroute/expressroute-introduction)的 Azure 虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-136">Azure supports dedicated WAN link connectivity to your on-premises network and an Azure Virtual Network with [ExpressRoute](https://docs.microsoft.com/azure/expressroute/expressroute-introduction).</span></span> <span data-ttu-id="5a5f7-137">Azure 與網站之間的連結會使用不經由公用網際網路的專用連線。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-137">The link between Azure and your site uses a dedicated connection that does not go over the public Internet.</span></span> <span data-ttu-id="5a5f7-138">如果 Azure 應用程式正在多個資料中心內執行，您可使用 [Azure 流量管理員](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview)，以智慧方式將使用者的要求路由傳送到應用程式的各執行個體。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-138">If your Azure application is running in multiple datacenters, you can use [Azure Traffic Manager](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview) to route requests from users intelligently across instances of the application.</span></span> <span data-ttu-id="5a5f7-139">您也可以將流量路由傳送到不在 Azure 中執行的服務，只要可以從網際網路存取這些服務即可。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-139">You can also route traffic to services not running in Azure if they are accessible from the Internet.</span></span>

## <a name="enterprise-view-of-azure-networking-components"></a><span data-ttu-id="5a5f7-140">Azure 網路元件的企業觀點</span><span class="sxs-lookup"><span data-stu-id="5a5f7-140">Enterprise view of Azure networking components</span></span>
<span data-ttu-id="5a5f7-141">Azure 有許多與網路安全性討論的網路元件。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-141">Azure has many networking components that are relevant to network security discussions.</span></span> <span data-ttu-id="5a5f7-142">我們會說明這些網路元件，並著重於與其相關的安全性問題。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-142">we describe these networking components and focus on the security issues related to them.</span></span>

> [!Note]
> <span data-ttu-id="5a5f7-143">我們不會說明 Azure 網路的所有 – 我們只討論為您在 Azure 中部署的服務和應用程式規劃和設計安全網路基礎結構的關鍵元件。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-143">Not all aspects of Azure networking are described – we discuss only those considered to be pivotal in planning and designing a secure network infrastructure around your services and applications you deploy in Azure.</span></span>

<span data-ttu-id="5a5f7-144">本白皮書涵蓋下列 Azure 網路企業功能：</span><span class="sxs-lookup"><span data-stu-id="5a5f7-144">In this paper, will be cover the following Azure networking enterprise capabilities:</span></span>

-   <span data-ttu-id="5a5f7-145">基本網路連線</span><span class="sxs-lookup"><span data-stu-id="5a5f7-145">Basic network connectivity</span></span>

-   <span data-ttu-id="5a5f7-146">混合式連線</span><span class="sxs-lookup"><span data-stu-id="5a5f7-146">Hybrid Connectivity</span></span>

-   <span data-ttu-id="5a5f7-147">安全性控制</span><span class="sxs-lookup"><span data-stu-id="5a5f7-147">Security Controls</span></span>

-   <span data-ttu-id="5a5f7-148">網路驗證</span><span class="sxs-lookup"><span data-stu-id="5a5f7-148">Network Validation</span></span>

### <a name="basic-network-connectivity"></a><span data-ttu-id="5a5f7-149">基本網路連線</span><span class="sxs-lookup"><span data-stu-id="5a5f7-149">Basic network connectivity</span></span>

<span data-ttu-id="5a5f7-150">[Azure 虛擬網路](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview)服務可讓 Azure 資源與虛擬網路 (VNet) 安全地彼此連線。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-150">The [Azure Virtual Network](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview)  service enables you to securely connect Azure resources to each other with virtual networks (VNet).</span></span> <span data-ttu-id="5a5f7-151">VNet 是您的網路在雲端中的身分。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-151">A VNet is a representation of your own network in the cloud.</span></span> <span data-ttu-id="5a5f7-152">VNet 是專屬於您訂用帳戶的 Azure 網路基礎結構邏輯隔離。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-152">A VNet is a logical isolation of the Azure network infrastructure dedicated to your subscription.</span></span> <span data-ttu-id="5a5f7-153">您可以也 Vnet 彼此連線並連線到您使用站對站 Vpn 的內部部署網路和專用[WAN 連結](https://docs.microsoft.com/azure/expressroute/expressroute-introduction)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-153">You can also connect VNets to each other and to your on-premises networks using site-to-site VPNs￼ and dedicated [WAN links](https://docs.microsoft.com/azure/expressroute/expressroute-introduction).</span></span>

![基本網路連線](media/azure-network-security/azure-network-security-fig-2.png)

<span data-ttu-id="5a5f7-155">了解您使用 VM 在 Azure 中裝載伺服器，問題後，問題視這些 VM 如何連線到網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-155">With the understanding that you use VMs to host servers in Azure, the question is how those VMs connect to a network.</span></span> <span data-ttu-id="5a5f7-156">答案是 VM 會連線到 [Azure 虛擬網路](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-156">The answer is that VMs connect to an [Azure Virtual Network](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview).</span></span>

<span data-ttu-id="5a5f7-157">Azure 虛擬網路就像您在內部部署環境中搭配自己的虛擬化平台解決方案使用的虛擬網路，例如 Microsoft Hyper-V 或 VMware。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-157">Azure Virtual Networks are like the virtual networks you use on-premises with your own virtualization platform solutions, such as Microsoft Hyper-V or VMware.</span></span>

#### <a name="intra-vnet-connectivity"></a><span data-ttu-id="5a5f7-158">VNet 內部連線</span><span class="sxs-lookup"><span data-stu-id="5a5f7-158">Intra-VNet connectivity</span></span>

<span data-ttu-id="5a5f7-159">您可以將 VNet 互相連線，讓連線至任一 VNet 的資源能夠跨越 VNet 彼此通訊。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-159">You can connect VNets to each other, enabling resources connected to either VNet to communicate with each other across VNets.</span></span> <span data-ttu-id="5a5f7-160">您可以使用下列一個或兩個選項將 VNet 彼此連線：</span><span class="sxs-lookup"><span data-stu-id="5a5f7-160">You can use either or both of the following options to connect VNets to each other:</span></span>

- <span data-ttu-id="5a5f7-161">**對等互連︰**讓連線至相同 Azure 位置內不同 Azure VNet 的資源彼此通訊。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-161">**Peering:** Enables resources connected to different Azure VNets within the same Azure location to communicate with each other.</span></span> <span data-ttu-id="5a5f7-162">如果資源已連線到相同的 VNet，則跨越 VNet 的頻寬和延遲就一樣。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-162">The bandwidth and latency across the VNet is the same as if the resources were connected to the same VNet.</span></span> <span data-ttu-id="5a5f7-163">若要深入了解對等互連，請參閱[虛擬網路對等互連](https://docs.microsoft.com/azure/virtual-network/virtual-network-peering-overview)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-163">To learn more about peering, read [Virtual network peering](https://docs.microsoft.com/azure/virtual-network/virtual-network-peering-overview).</span></span>

 ![對等互連](media/azure-network-security/azure-network-security-fig-3.png)

- <span data-ttu-id="5a5f7-165">**VNet 對 VNet 連線︰**讓連線至相同或不同 Azure 位置內不同 Azure VNet 的資源彼此通訊。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-165">**VNet-to-VNet connection:** Enables resources connected to different Azure VNet within the same, or different Azure locations.</span></span> <span data-ttu-id="5a5f7-166">不同於對等互連，VNet 之間的頻寬有限，因為流量必須通過 Azure VPN 閘道。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-166">Unlike peering, bandwidth is limited between VNets because traffic must flow through an Azure VPN Gateway.</span></span>

![VNet 對 VNet 連線](media/azure-network-security/azure-network-security-fig-4.png)


<span data-ttu-id="5a5f7-168">若要深入了解如何透過 VNet 對 VNet 連線來連線 VNet，請閱讀[設定 VNet 對 VNet 連線](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal?toc=%2fazure%2fvirtual-network%2ftoc.json)一文。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-168">To learn more about connecting VNets with a VNet-to-VNet connection, read the [Configure a VNet-to-VNet connection article](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span>

#### <a name="azure-virtual-network-capabilities"></a><span data-ttu-id="5a5f7-169">Azure 虛擬網路功能：</span><span class="sxs-lookup"><span data-stu-id="5a5f7-169">Azure virtual network capabilities:</span></span>

<span data-ttu-id="5a5f7-170">如您所見，Azure 虛擬網路會提供虛擬機器來連線到網路，使其能夠以安全的方式連線到其他網路資源。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-170">As you can see, an Azure Virtual Network provides virtual machines to connect to the network so that they can connect to other network resources in a secure fashion.</span></span> <span data-ttu-id="5a5f7-171">不過，基本連線能力只是起頭。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-171">However, basic connectivity is just the beginning.</span></span> <span data-ttu-id="5a5f7-172">Azure 虛擬網路服務的下列功能揭露 Azure 虛擬網路的安全性特性：</span><span class="sxs-lookup"><span data-stu-id="5a5f7-172">The following capabilities of the Azure Virtual Network service expose security characteristics of the Azure Virtual Network:</span></span>

-   <span data-ttu-id="5a5f7-173">隔離</span><span class="sxs-lookup"><span data-stu-id="5a5f7-173">Isolation</span></span>

-   <span data-ttu-id="5a5f7-174">網際網路連線</span><span class="sxs-lookup"><span data-stu-id="5a5f7-174">Internet connectivity</span></span>

-   <span data-ttu-id="5a5f7-175">Azure 資源連線</span><span class="sxs-lookup"><span data-stu-id="5a5f7-175">Azure resource connectivity</span></span>

-   <span data-ttu-id="5a5f7-176">VNet 連線</span><span class="sxs-lookup"><span data-stu-id="5a5f7-176">VNet connectivity</span></span>

-   <span data-ttu-id="5a5f7-177">內部部署連線能力</span><span class="sxs-lookup"><span data-stu-id="5a5f7-177">On-premises connectivity</span></span>

-   <span data-ttu-id="5a5f7-178">流量篩選</span><span class="sxs-lookup"><span data-stu-id="5a5f7-178">Traffic filtering</span></span>

-   <span data-ttu-id="5a5f7-179">路由</span><span class="sxs-lookup"><span data-stu-id="5a5f7-179">Routing</span></span>

<span data-ttu-id="5a5f7-180">**隔離**</span><span class="sxs-lookup"><span data-stu-id="5a5f7-180">**Isolation**</span></span>

<span data-ttu-id="5a5f7-181">VNet 會彼此[隔離](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-181">VNets are [isolated](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) from one another.</span></span> <span data-ttu-id="5a5f7-182">您可以為使用相同 [CIDR](https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing) 位址區塊的開發、測試和生產環境建立個別的 VNet。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-182">You can create separate VNets for development, testing, and production that use the same [CIDR](https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing) address blocks.</span></span> <span data-ttu-id="5a5f7-183">相反地，您可以建立多個使用不同 CIDR 位址區塊的 VNet 並將這些網路連接在一起。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-183">Conversely, you can create multiple VNets that use different CIDR address blocks and connect networks together.</span></span> <span data-ttu-id="5a5f7-184">您可以將 VNet 分成多個子網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-184">You can segment a VNet into multiple subnets.</span></span>

<span data-ttu-id="5a5f7-185">Azure 會針對連線至 VNet 的 VM 和[雲端服務](https://azure.microsoft.com/services/cloud-services/)角色執行個體提供內部名稱解析。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-185">Azure provides internal name resolution for VMs and [Cloud Services](https://azure.microsoft.com/services/cloud-services/) role instances connected to a VNet.</span></span> <span data-ttu-id="5a5f7-186">您可以選擇地將 VNet 設定成使用自己的 DNS 伺服器，而不是使用 Azure 內部名稱解析。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-186">You can optionally configure a VNet to use your own DNS servers, instead of using Azure internal name resolution.</span></span>

<span data-ttu-id="5a5f7-187">您可以在每個 Azure [訂用帳戶](https://docs.microsoft.com/azure/azure-glossary-cloud-terminology?toc=%2fazure%2fvirtual-network%2ftoc.json)和 Azure [區域](https://docs.microsoft.com/azure/azure-glossary-cloud-terminology?toc=%2fazure%2fvirtual-network%2ftoc.json)內實作多個 VNet。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-187">You can implement multiple VNets within each Azure [subscription](https://docs.microsoft.com/azure/azure-glossary-cloud-terminology?toc=%2fazure%2fvirtual-network%2ftoc.json) and Azure [region](https://docs.microsoft.com/azure/azure-glossary-cloud-terminology?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span> <span data-ttu-id="5a5f7-188">每個 VNet 會與其他 VNet 隔離。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-188">Each VNet is isolated from other VNets.</span></span> <span data-ttu-id="5a5f7-189">對於每個 VNet，您可以︰</span><span class="sxs-lookup"><span data-stu-id="5a5f7-189">For each VNet you can:</span></span>

-   <span data-ttu-id="5a5f7-190">使用公用和私人 (RFC 1918) 位址指定自訂私人 IP 位址空間。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-190">Specify a custom private IP address space using public and private (RFC 1918) addresses.</span></span> <span data-ttu-id="5a5f7-191">Azure 會從您指派的位址空間，將私人 IP 位址指派給連線至 VNet 的資源。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-191">Azure assigns resources connected to the VNet a private IP address from the address space, you assign.</span></span>

-   <span data-ttu-id="5a5f7-192">將 VNet 分成一或多個子網路，並將 VNet 位址空間的一部分配置給每個子網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-192">Segment the VNet into one or more subnets and allocate a portion of the VNet address space to each subnet.</span></span>

-   <span data-ttu-id="5a5f7-193">使用 Azure 提供的名稱解析，或指定自有的 DNS 伺服器以供連線至 VNet 的資源使用。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-193">Use Azure-provided name resolution or specify your own DNS server for use by resources connected to a VNet.</span></span> <span data-ttu-id="5a5f7-194">若要深入了解 VNet 中的名稱解析，請閱讀 [VM 和雲端服務的名稱解析](https://docs.microsoft.com/azure/virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-194">To learn more about name resolution in VNets, read the [Name resolution for VMs and Cloud Services](https://docs.microsoft.com/azure/virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances).</span></span>

<span data-ttu-id="5a5f7-195">**網際網路連線**</span><span class="sxs-lookup"><span data-stu-id="5a5f7-195">**Internet connectivity**</span></span>

<span data-ttu-id="5a5f7-196">根據預設，連線至 VNet 的所有 [Azure 虛擬機器 (VM)](https://docs.microsoft.com/azure/virtual-machines/windows/) 和雲端服務角色執行個體都可以存取網際網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-196">All [Azure Virtual Machines (VM)](https://docs.microsoft.com/azure/virtual-machines/windows/) and Cloud Services role instances connected to a VNet have access to the Internet, by default.</span></span> <span data-ttu-id="5a5f7-197">您也可以視需要啟用特定資源的輸入存取。根據預設，連線至 VNet 的所有 Azure 虛擬機器 (VM) 和雲端服務角色執行個體都可以存取網際網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-197">You can also enable inbound access to specific resources, as needed.(VM) and Cloud Services role instances connected to a VNet have access to the Internet,by default.</span></span> <span data-ttu-id="5a5f7-198">您也可以視需要啟用特定資源的輸入存取。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-198">You can also enable inbound access to specific resources, as needed.</span></span>

<span data-ttu-id="5a5f7-199">根據預設，連線至 VNet 的所有資源都具有網際網路的輸出連線能力。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-199">All resources connected to a VNet have outbound connectivity to the Internet by default.</span></span> <span data-ttu-id="5a5f7-200">資源的私人 IP 位址會由 Azure 基礎結構進行來源網路位址轉譯 (SNAT) 成為公用 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-200">The private IP address of the resource is source network address translated (SNAT) to a public IP address by the Azure infrastructure.</span></span> <span data-ttu-id="5a5f7-201">您可以實作自訂路由和流量篩選，以變更預設連線能力。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-201">You can change the default connectivity by implementing custom routing and traffic filtering.</span></span> <span data-ttu-id="5a5f7-202">若要深入了解輸出網際網路連線能力，請閱讀[了解 Azure 中的輸出連線](https://docs.microsoft.com/azure/load-balancer/load-balancer-outbound-connections?toc=%2fazure%2fvirtual-network%2ftoc.json)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-202">To learn more about outbound Internet connectivity, read the [Understanding outbound connections in Azure](https://docs.microsoft.com/azure/load-balancer/load-balancer-outbound-connections?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span>

<span data-ttu-id="5a5f7-203">若要進行從網際網路通對 Azure 資源的輸入通訊，或進行對網際網路的輸出通訊 (未經 SNAT)，則必須指派公用 IP 位址給資源。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-203">To communicate inbound to Azure resources from the Internet, or to communicate outbound to the Internet without SNAT, a resource must be assigned a public IP address.</span></span> <span data-ttu-id="5a5f7-204">若要深入了解公用 IP 位址，請閱讀[公用 IP 位址](https://docs.microsoft.com/azure/virtual-network/virtual-network-public-ip-address)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-204">To learn more about public IP addresses, read the [Public IP addresses](https://docs.microsoft.com/azure/virtual-network/virtual-network-public-ip-address).</span></span>

<span data-ttu-id="5a5f7-205">**Azure 資源連線能力**</span><span class="sxs-lookup"><span data-stu-id="5a5f7-205">**Azure resource connectivity**</span></span>

<span data-ttu-id="5a5f7-206">[Azure 資源](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) (例如雲端服務和 VM) 可以連線至相同的 VNet。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-206">[Azure resources](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) such as Cloud Services and VMs can be connected to the same VNet.</span></span> <span data-ttu-id="5a5f7-207">如果資源位於不同的子網路，則可使用私人 IP 位址彼此連接。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-207">The resources can connect to each other using private IP addresses, even if they are in different subnets.</span></span> <span data-ttu-id="5a5f7-208">Azure 會提供子網路、VNet 和內部部署網路之間的預設路由，因此您不必設定及管理路由。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-208">Azure provides default routing between subnets, VNets, and on-premises networks, so you don't have to configure and manage routes.</span></span>

<span data-ttu-id="5a5f7-209">您可以將數個 Azure 資源連線至 VNet，例如虛擬機器 (VM)、雲端服務、App Service 環境及虛擬機器擴展集。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-209">You can connect several Azure resources to a VNet, such as Virtual Machines (VM), Cloud Services, App Service Environments, and Virtual Machine Scale Sets.</span></span> <span data-ttu-id="5a5f7-210">VM 會透過網路介面 (NIC) 連線至 VNet 內的子網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-210">VMs connect to a subnet within a VNet through a network interface (NIC).</span></span> <span data-ttu-id="5a5f7-211">若要深入了解 NIC，請閱讀[網路介面](https://docs.microsoft.com/azure/virtual-network/virtual-network-network-interface)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-211">To learn more about NICs, read the [Network interfaces](https://docs.microsoft.com/azure/virtual-network/virtual-network-network-interface).</span></span>

<span data-ttu-id="5a5f7-212">**VNet 連線能力**</span><span class="sxs-lookup"><span data-stu-id="5a5f7-212">**VNet connectivity**</span></span>

<span data-ttu-id="5a5f7-213">[VNet](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) 可以彼此連線，讓連線至任何 VNet 的資源能夠與任何其他 VNet 上的任何資源進行通訊。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-213">[VNets](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) can be connected to each other, enabling resources connected to any VNet to communicate with any resource on any other VNet.</span></span>

<span data-ttu-id="5a5f7-214">您可以將 VNet 互相連線，讓連線至任一 VNet 的資源能夠跨越 VNet 彼此通訊。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-214">You can connect VNets to each other, enabling resources connected to either VNet to communicate with each other across VNets.</span></span> <span data-ttu-id="5a5f7-215">您可以使用下列一個或兩個選項將 VNet 彼此連線：</span><span class="sxs-lookup"><span data-stu-id="5a5f7-215">You can use either or both of the following options to connect VNets to each other:</span></span>

- <span data-ttu-id="5a5f7-216">**對等互連︰**讓連線至相同 Azure 位置內不同 Azure VNet 的資源彼此通訊。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-216">**Peering:** Enables resources connected to different Azure VNets within the same Azure location to communicate with each other.</span></span> <span data-ttu-id="5a5f7-217">如果資源已連線到相同的 VNet，則跨越 VNet 的頻寬和延遲就一樣。若要深入了解對等互連，請閱讀[虛擬網路對等互連](https://docs.microsoft.com/azure/virtual-network/virtual-network-peering-overview)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-217">The bandwidth and latency across the VNets is the same as if the resources were connected to the same VNet.To learn more about peering, read the [Virtual network peering](https://docs.microsoft.com/azure/virtual-network/virtual-network-peering-overview).</span></span>

- <span data-ttu-id="5a5f7-218">**VNet 對 VNet 連線︰**讓連線至相同或不同 Azure 位置內不同 Azure VNet 的資源彼此通訊。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-218">**VNet-to-VNet connection:** Enables resources connected to different Azure VNet within the same, or different Azure locations.</span></span> <span data-ttu-id="5a5f7-219">不同於對等互連，VNet 之間的頻寬有限，因為流量必須通過 Azure VPN 閘道。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-219">Unlike peering, bandwidth is limited between VNets because traffic must flow through an Azure VPN Gateway.</span></span> <span data-ttu-id="5a5f7-220">若要深入了解如何透過 VNet 對 VNet 連線來連線 VNet。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-220">To learn more about connecting VNets with a VNet-to-VNet connection.</span></span> <span data-ttu-id="5a5f7-221">若要深入了解，請參閱[設定 VNet 對 VNet 連線](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal?toc=%2fazure%2fvirtual-network%2ftoc.json)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-221">To learn more, read the [Configure a VNet-to-VNet connection](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal?toc=%2fazure%2fvirtual-network%2ftoc.json) .</span></span>

<span data-ttu-id="5a5f7-222">**內部部署連線能力**</span><span class="sxs-lookup"><span data-stu-id="5a5f7-222">**On-premises connectivity**</span></span>

<span data-ttu-id="5a5f7-223">VNet 可以透過您的網路與 Azure 之間的私人網路連線，或透過經由網際網路的站對站 VPN 連線，連線到[內部部署](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview)網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-223">VNets can be connected to [on-premises](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) networks through private network connections between your network and Azure, or through a site-to-site VPN connection over the Internet.</span></span>

<span data-ttu-id="5a5f7-224">您可以使用下列選項的任意組合，將內部部署網路連線至 VNet︰</span><span class="sxs-lookup"><span data-stu-id="5a5f7-224">You can connect your on-premises network to a VNet using any combination of the following options:</span></span>

- <span data-ttu-id="5a5f7-225">**點對站虛擬私人網路 (VPN)：**建立於一部連線到您網路的電腦與 VNet 之間。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-225">**Point-to-site virtual private network (VPN):** Established between a single PC connected to your network and the VNet.</span></span> <span data-ttu-id="5a5f7-226">如果您剛開始使用 Azure，此連線類型就很適合您，也適用於開發人員，因為它幾乎不需要變更您現有的網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-226">This connection type is great if you're just getting started with Azure, or for developers, because it requires little or no changes to your existing network.</span></span> <span data-ttu-id="5a5f7-227">連線會使用 SSTP 通訊協定，透過網際網路提供電腦與 VNet 之間的加密通訊。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-227">The connection uses the SSTP protocol to provide encrypted communication over the Internet between the PC and the VNet.</span></span> <span data-ttu-id="5a5f7-228">點對站 VPN 的延遲無法預期，因為流量會周遊網際網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-228">The latency for a point-to-site VPN is unpredictable since the traffic traverses the Internet.</span></span>

- <span data-ttu-id="5a5f7-229">**站對站 VPN：**建立於 VPN 裝置與 Azure VPN 閘道之間。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-229">**Site-to-site VPN:** Established between your VPN device and an Azure VPN Gateway.</span></span> <span data-ttu-id="5a5f7-230">此連線類型可讓您授權的任何內部部署資源存取 VNet。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-230">This connection type enables any on-premises resource you authorize to access a VNet.</span></span> <span data-ttu-id="5a5f7-231">此連線是 IPsec/IKE VPN，可透過網際網路提供內部部署裝置與 Azure VPN 閘道之間的加密通訊。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-231">The connection is an IPsec/IKE VPN that provides encrypted communication over the Internet between your on-premises device and the Azure VPN gateway.</span></span> <span data-ttu-id="5a5f7-232">站對站連線的延遲無法預期，因為流量會周遊網際網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-232">The latency for a site-to-site connection is unpredictable since the traffic traverses the Internet.</span></span>

- <span data-ttu-id="5a5f7-233">**Azure ExpressRoute：**透過 ExpressRoute 合作夥伴，建立於您的網路與 Azure 之間。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-233">**Azure ExpressRoute:** Established between your network and Azure, through an ExpressRoute partner.</span></span> <span data-ttu-id="5a5f7-234">此連線是私人連線。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-234">This connection is private.</span></span> <span data-ttu-id="5a5f7-235">流量不會周遊網際網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-235">Traffic does not traverse the Internet.</span></span> <span data-ttu-id="5a5f7-236">ExpressRoute 連線的延遲無法預期，因為流量不會周遊網際網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-236">The latency for an ExpressRoute connection is predictable since traffic doesn't traverse the Internet.</span></span> <span data-ttu-id="5a5f7-237">若要深入了解所有先前的連線選項，請閱讀[連線拓撲圖](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%2fazure%2fvirtual-network%2ftoc.json)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-237">To learn more about all the previous connection options, read the [Connection topology diagrams](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span>

<span data-ttu-id="5a5f7-238">**流量篩選**</span><span class="sxs-lookup"><span data-stu-id="5a5f7-238">**Traffic filtering**</span></span>

<span data-ttu-id="5a5f7-239">可以依照來源 IP 位址和連接埠、目的地 IP 位址和連接埠以及通訊協定，對 VM 和雲端服務角色執行個體[網路流量](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview)進行輸入及輸出的篩選。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-239">VM and Cloud Services role instances [network traffic](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) can be filtered inbound and outbound by source IP address and port, destination IP address and port, and protocol.</span></span>

<span data-ttu-id="5a5f7-240">您可以使用下列一個或兩個選項，篩選子網路之間的網路流量︰</span><span class="sxs-lookup"><span data-stu-id="5a5f7-240">You can filter network traffic between subnets using either or both of the following options:</span></span>

- <span data-ttu-id="5a5f7-241">**網路安全性群組 (NSG)：**每個 NSG 可以包含多個輸入和輸出安全性規則，讓您依照來源和目的地 IP 位址、連接埠和通訊協定篩選流量。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-241">**Network security groups (NSG):** Each NSG can contain multiple inbound and outbound security rules that enable you to filter traffic by source and destination IP address, port, and protocol.</span></span> <span data-ttu-id="5a5f7-242">您可以將 NSG 套用至 VM 中的每個 NIC。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-242">You can apply an NSG to each NIC in a VM.</span></span> <span data-ttu-id="5a5f7-243">您也可以將 NSG 套用至 NIC 或其他 Azure 資源所連線的子網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-243">You can also apply an NSG to the subnet a NIC, or other Azure resource, is connected to.</span></span> <span data-ttu-id="5a5f7-244">若要深入了解 NSG，請閱讀[網路安全性群組](https://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-244">To learn more about NSGs, read the [Network security groups](https://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg).</span></span>

- <span data-ttu-id="5a5f7-245">**虛擬網路設備：**虛擬網路設備是執行軟體的 VM，該軟體可執行網路功能 (例如防火牆)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-245">**Virtual Network Appliances:** A virtual network appliance is a VM running software that performs a network function, such as a firewall.</span></span> <span data-ttu-id="5a5f7-246">請檢視 Azure Marketplace 中可用的 NVA 清單。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-246">View a list of available NVAs in the Azure Marketplace.</span></span> <span data-ttu-id="5a5f7-247">此外，也可取得提供 WAN 最佳化和其他網路流量功能的 NVA。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-247">NVAs are also available that provide WAN optimization and other network traffic functions.</span></span> <span data-ttu-id="5a5f7-248">NVA 通常使用於使用者定義或 BGP 路由。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-248">NVAs are typically used with user-defined or BGP routes.</span></span> <span data-ttu-id="5a5f7-249">您也可以使用 NVA 來篩選 VNet 之間的流量。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-249">You can also use an NVA to filter traffic between VNets.</span></span>

<span data-ttu-id="5a5f7-250">**路由**</span><span class="sxs-lookup"><span data-stu-id="5a5f7-250">**Routing**</span></span>

<span data-ttu-id="5a5f7-251">您可以透過設定自己的路由，或使用透過網路閘道的 BGP 路由，選擇性地覆寫 Azure 的預設路由。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-251">You can optionally override Azure's default routing by configuring your own routes, or using BGP routes through a network gateway.</span></span>

<span data-ttu-id="5a5f7-252">根據預設，Azure 會建立路由表，讓連線至任何 VNet 中任何子網路的資源彼此通訊。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-252">Azure creates route tables that enable resources connected to any subnet in any VNet to communicate with each other, by default.</span></span> <span data-ttu-id="5a5f7-253">您可以實作下列一個或兩個選項，覆寫 Azure 所建立的預設路由︰</span><span class="sxs-lookup"><span data-stu-id="5a5f7-253">You can implement either or both of the following options to override the default routes Azure creates:</span></span>

- <span data-ttu-id="5a5f7-254">**使用者定義的路由︰**您可以建立自訂路由表，其中的路由可控制每個子網路的流量會路由傳送至的位置。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-254">**User-defined routes:** You can create custom route tables with routes that control where traffic is routed to for each subnet.</span></span> <span data-ttu-id="5a5f7-255">若要深入了解使用者定義的路由，請閱讀[使用者定義的路由](https://docs.microsoft.com/azure/virtual-network/virtual-networks-udr-overview)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-255">To learn more about user-defined routes, read the [User-defined routes](https://docs.microsoft.com/azure/virtual-network/virtual-networks-udr-overview).</span></span>

- <span data-ttu-id="5a5f7-256">**BGP 路由︰**如果您使用 Azure VPN 閘道或 ExpressRoute 連線將 VNet 連線至內部部署網路，則可將 BGP 路由傳播至 VNet。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-256">**BGP routes:** If you connect your VNet to your on-premises network using an Azure VPN Gateway or ExpressRoute connection, you can propagate BGP routes to your VNets.</span></span>

### <a name="hybrid-internet-connectivity-connect-to-an-on-premises-network"></a><span data-ttu-id="5a5f7-257">混合式網際網路連線：連線到內部部署網路</span><span class="sxs-lookup"><span data-stu-id="5a5f7-257">Hybrid internet connectivity: Connect to an on-premises network</span></span>
<span data-ttu-id="5a5f7-258">您可以使用下列選項的任意組合，將內部部署網路連線至 VNet︰</span><span class="sxs-lookup"><span data-stu-id="5a5f7-258">You can connect your on-premises network to a VNet using any combination of the following options:</span></span>

-   <span data-ttu-id="5a5f7-259">網際網路連線</span><span class="sxs-lookup"><span data-stu-id="5a5f7-259">Internet connectivity</span></span>

-   <span data-ttu-id="5a5f7-260">點對站 VPN (P2S VPN)</span><span class="sxs-lookup"><span data-stu-id="5a5f7-260">Point-to-site VPN (P2S VPN)</span></span>

-   <span data-ttu-id="5a5f7-261">站對站 VPN (S2S VPN)</span><span class="sxs-lookup"><span data-stu-id="5a5f7-261">Site-to-Site VPN (S2S VPN)</span></span>

-   <span data-ttu-id="5a5f7-262">ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="5a5f7-262">ExpressRoute</span></span>

#### <a name="internet-connectivity"></a><span data-ttu-id="5a5f7-263">網際網路連線</span><span class="sxs-lookup"><span data-stu-id="5a5f7-263">Internet Connectivity</span></span>

<span data-ttu-id="5a5f7-264">如其名所示，網際網路連線可讓不同的公用端點接觸留存在虛擬網路中的工作負載，以便從網際網路存取您的工作負載。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-264">As its name suggests, Internet connectivity makes your workloads accessible from the Internet, by having you expose different public endpoints to workloads that live inside the virtual network.</span></span> <span data-ttu-id="5a5f7-265">使用[網際網路對向負載平衡器](https://docs.microsoft.com/azure/load-balancer/load-balancer-internet-overview)，或只要將公用 IP 位址指派給 VM，即可公開這些工作負載。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-265">These workloads could be exposed using [Internet-facing Load Balancer](https://docs.microsoft.com/azure/load-balancer/load-balancer-internet-overview) or simply assigning a public IP address to the  VM.</span></span> <span data-ttu-id="5a5f7-266">如此一來，網際網路上的任何項目就能夠觸達該虛擬機器，前提是主機防火牆、[網路安全性群組 (NSG)](https://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg) 和[使用者定義的路由](https://docs.microsoft.com/azure/virtual-network/virtual-networks-udr-overview)允許該情況發生。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-266">This way, it becomes possible for anything on the Internet to be able to reach that virtual machine, provided a host firewall, [network security groups (NSG)](https://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg), and [User-Defined Routes](https://docs.microsoft.com/azure/virtual-network/virtual-networks-udr-overview) allow that to happen.</span></span>

<span data-ttu-id="5a5f7-267">在此案例中，您可以讓需要公開的應用程式接觸網際網路，而且能夠從任何位置或從特定位置連線至該應用程式 (視您的工作負載組態而定)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-267">In this scenario, you could expose an application that needs to be public to the Internet and be able to connect to it from anywhere, or from specific locations depending on the configuration of your workloads.</span></span>

#### <a name="point-to-site-vpn-or-site-to-site-vpn"></a><span data-ttu-id="5a5f7-268">點對站 VPN 或站對站 VPN</span><span class="sxs-lookup"><span data-stu-id="5a5f7-268">Point-to-Site VPN or Site-to-Site VPN</span></span>
<span data-ttu-id="5a5f7-269">這兩者屬於相同的類別。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-269">These two falls into the same category.</span></span> <span data-ttu-id="5a5f7-270">兩者都要求您的 VNet 擁有 VPN 閘道，而且您可以使用 VPN 用戶端連線到它，讓您的工作站成為[點對站組態](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal)的一部分，也可以設定內部部署 [VPN 裝置](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpn-devices)使其能夠終止站對站 VPN。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-270">They both need your VNet to have a VPN Gateway and you can connect to it using either a VPN Client for your workstation as part of the [Point-to-Site configuration](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal) or you can configure your on-premises [VPN device](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpn-devices) to be able to terminate a site-to-site VPN.</span></span> <span data-ttu-id="5a5f7-271">如此一來，內部部署裝置可以連線到 VNet 中的資源。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-271">This way, on-premises devices can connect to resources within the VNet.</span></span>

<span data-ttu-id="5a5f7-272">點對站 (P2S) 設定可讓您建立從個別的用戶端電腦到虛擬網路的安全連線。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-272">A Point-to-Site (P2S) configuration lets you create a secure connection from an individual client computer to a virtual network.</span></span> <span data-ttu-id="5a5f7-273">P2S 是透過 SSTP (安全通訊端通道通訊協定) 的 VPN 連線。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-273">P2S is a VPN connection over SSTP (Secure Socket Tunneling Protocol).</span></span>

![點對站 VPN](media/azure-network-security/azure-network-security-fig-5.png)

<span data-ttu-id="5a5f7-275">當您想要從遠端位置 (例如從住家或會議中心) 連線至 VNet 時，或只有幾個需要連線至虛擬網路的用戶端時，點對站連線是很實用的解決方案。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-275">Point-to-Site connections are useful when you want to connect to your VNet from a remote location, such as from home or a conference center, or when you only have a few clients that need to connect to a virtual network.</span></span>

<span data-ttu-id="5a5f7-276">P2S 連線不需要 VPN 裝置或公眾對應 IP 位址即可運作。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-276">P2S connections do not require a VPN device or a public-facing IP address.</span></span> <span data-ttu-id="5a5f7-277">您可從用戶端電腦建立 VPN 連線。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-277">You establish the VPN connection from the client computer.</span></span> <span data-ttu-id="5a5f7-278">因此，不建議透過 P2S 連線到 Azure，以免需要持續從許多內部部署裝置和電腦連線到您的 Azure 網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-278">Therefore, P2S is not recommended way to connect to Azure in case you need a persistent connection from many on-premises devices and computers to your Azure network.</span></span>

![站對站 VPN](media/azure-network-security/azure-network-security-fig-6.png)

> [!Note]
> <span data-ttu-id="5a5f7-280">如需有關點對站連線的詳細資訊，請參閱[點對站常見問題集](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-point-to-site-classic-azure-portal)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-280">For more information about Point-to-Site connections, see the [Point-to-Site FA v Q](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-point-to-site-classic-azure-portal).</span></span>

<span data-ttu-id="5a5f7-281">站對站 VPN 閘道連線可用來透過 IPsec/IKE (IKEv1 或 IKEv2) VPN 通道，將內部部署網路連線到 Azure 虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-281">A Site-to-Site VPN gateway connection is used to connect your on-premises network to an Azure virtual network over an IPsec/IKE (IKEv1 or IKEv2) VPN tunnel.</span></span>

<span data-ttu-id="5a5f7-282">此類型的連線需要位於內部部署的 VPN 裝置，且您已對該裝置指派對外開放的公用 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-282">This type of connection requires a VPN device located on-premises that has an externally facing public IP address assigned to it.</span></span> <span data-ttu-id="5a5f7-283">此連線透過網際網路進行，可讓您在您的網路與 Azure 之間的加密連結內的「輸送」資訊。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-283">This connection takes place over the Internet and allows you to “tunnel” information inside an encrypted link between your network and Azure.</span></span> <span data-ttu-id="5a5f7-284">站對站 VPN 是安全成熟的技術，各種規模的企業已部署數十年。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-284">Site-to-site VPN is a secure, mature technology that has been deployed by enterprises of all sizes for decades.</span></span> <span data-ttu-id="5a5f7-285">使用 [IPsec 通道模式](https://technet.microsoft.com/library/cc786385.aspx)可執行通道加密。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-285">Tunnel encryption is performed using [IPsec tunnel mode](https://technet.microsoft.com/library/cc786385.aspx).</span></span>

<span data-ttu-id="5a5f7-286">雖然站對站 VPN 是受信任、可靠且已確立的技術，通道中的流量會周遊網際網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-286">While site-to-site VPN is a trusted, reliable, and established technology, traffic within the tunnel does traverse the Internet.</span></span> <span data-ttu-id="5a5f7-287">此外，最大頻寬相對受限於大約 200 Mbps。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-287">In addition, bandwidth is relatively constrained to a maximum of about 200 Mbps.</span></span>

<span data-ttu-id="5a5f7-288">如果您需要跨單位連線的例外安全性或效能層級，建議您對跨單位連線使用 Azure ExpressRoute。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-288">If you require an exceptional level of security or performance for your cross-premises connections, we recommend that you use Azure ExpressRoute for your cross-premises connectivity.</span></span> <span data-ttu-id="5a5f7-289">ExpressRoute 是內部部署位置或 Exchange 主機服務提供者之間專用的 WAN 連結。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-289">ExpressRoute is a dedicated WAN link between your on-premises location or an Exchange hosting provider.</span></span> <span data-ttu-id="5a5f7-290">因為這是電信公司連線，所以您的資料不會透過網際網路傳輸，因此不會暴露於網際網路通訊固有的潛在風險。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-290">Because this is a telco connection, your data doesn’t travel over the Internet and therefore is not exposed to the potential risks inherent in Internet communications.</span></span>

> [!Note]
> <span data-ttu-id="5a5f7-291">如需 VPN 閘道的詳細資訊，請參閱[關於 VPN 閘道](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-291">For more information about VPN gateways, see About [VPN gateway](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways).</span></span>

#### <a name="dedicated-wan-link"></a><span data-ttu-id="5a5f7-292">專用的 WAN 連結</span><span class="sxs-lookup"><span data-stu-id="5a5f7-292">Dedicated WAN link</span></span>
<span data-ttu-id="5a5f7-293">Microsoft Azure ExpressRoute 可讓您透過連線提供者所提供的專用私人連線，將內部部署網路擴充至 Azure。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-293">Microsoft Azure ExpressRoute lets you extend your on-premises networks into the Azure over a dedicated private connection facilitated by a connectivity provider.</span></span>

<span data-ttu-id="5a5f7-294">ExpressRoute 連線不會經過公用網際網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-294">ExpressRoute connections do not go over the public Internet.</span></span> <span data-ttu-id="5a5f7-295">相較於一般網際網路連線，這可讓 ExpressRoute 連線提供更可靠、更快速、延遲更短和更安全的連線。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-295">This allows ExpressRoute connections to offer more reliability, faster speeds, lower latencies, and higher security than typical connections over the Internet.</span></span>

![ <span data-ttu-id="5a5f7-296">專用的 WAN 連結</span><span class="sxs-lookup"><span data-stu-id="5a5f7-296">Dedicated WAN Link</span></span>](media/azure-network-security/azure-network-security-fig-7.png)

> [!Note]
> <span data-ttu-id="5a5f7-297">如需如何使用 ExpressRoute 將您的網路連線至 Microsoft 的詳細資訊，請參閱 [ExpressRoute 連線模型](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways)和 [ExpressRoute 技術概觀](https://docs.microsoft.com/azure/expressroute/expressroute-introduction)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-297">For information on how to connect your network to Microsoft using ExpressRoute, see [ExpressRoute connectivity models](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways) and [ExpressRoute technical overview](https://docs.microsoft.com/azure/expressroute/expressroute-introduction).</span></span>

<span data-ttu-id="5a5f7-298">如同站對站 VPN 選項，ExpressRoute 也可讓您連線到不一定只在一個 VNet 中的資源。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-298">As with the site-to-site VPN options, ExpressRoute also allows you to connect to resources that are not necessarily in only one VNet.</span></span> <span data-ttu-id="5a5f7-299">事實上，視 SKU 而定，您可以連線到 10 個 VNet。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-299">In fact, depending on the SKU, you can connect to 10 VNets.</span></span> <span data-ttu-id="5a5f7-300">如果您有[進階附加元件](https://docs.microsoft.com/azure/expressroute/expressroute-faqs)，則可能連線至最多 100 個 VNet (視頻寬而定)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-300">If you have the [premium add-on](https://docs.microsoft.com/azure/expressroute/expressroute-faqs), connections to up to 100 VNets are possible, depending on bandwidth.</span></span> <span data-ttu-id="5a5f7-301">若要深入了解這些連線類型的外觀，請閱讀[連線拓撲圖](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%2fazure%2fvirtual-network%2ftoc.json)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-301">To learn more about what these types of connections look like, read [Connection topology diagrams](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span>

### <a name="security-controls"></a><span data-ttu-id="5a5f7-302">安全性控制</span><span class="sxs-lookup"><span data-stu-id="5a5f7-302">Security controls</span></span>
<span data-ttu-id="5a5f7-303">Azure 虛擬網路可提供與其他虛擬網路隔離的安全、邏輯網路，並支援您在內部部署網路上使用的許多安全性控制。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-303">An Azure Virtual Network provides a secure, logical network that is isolated from other virtual networks and supports many security controls that you use on your on-premises networks.</span></span> <span data-ttu-id="5a5f7-304">客戶可使用子網路建立自己的結構：他們使用自己的私人 IP 位址範圍、設定路由表、網路安全性群組、存取控制清單 (ACL)、閘道和虛擬設備，以在雲端執行其工作負載。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-304">Customers create their own structure by using: subnets—they use their own private IP address range, configure route tables, network security groups, access control lists (ACLs), gateways, and virtual appliances to run their workloads in the cloud.</span></span>

<span data-ttu-id="5a5f7-305">以下是您可以在 Azure 虛擬網路上使用的安全性控制：</span><span class="sxs-lookup"><span data-stu-id="5a5f7-305">The following are security controls you can use on your Azure Virtual Networks:</span></span>

-   <span data-ttu-id="5a5f7-306">網路存取控制</span><span class="sxs-lookup"><span data-stu-id="5a5f7-306">Network Access Controls</span></span>

-   <span data-ttu-id="5a5f7-307">使用者定義的路由</span><span class="sxs-lookup"><span data-stu-id="5a5f7-307">User-Defined Routes</span></span>

-   <span data-ttu-id="5a5f7-308">網路安全性設備</span><span class="sxs-lookup"><span data-stu-id="5a5f7-308">Network Security Appliance</span></span>

-   <span data-ttu-id="5a5f7-309">應用程式閘道</span><span class="sxs-lookup"><span data-stu-id="5a5f7-309">Application Gateway</span></span>

-   <span data-ttu-id="5a5f7-310">Azure Web 應用程式防火牆</span><span class="sxs-lookup"><span data-stu-id="5a5f7-310">Azure Web Application Firewall</span></span>

-   <span data-ttu-id="5a5f7-311">網路可用性控制</span><span class="sxs-lookup"><span data-stu-id="5a5f7-311">Network Availability Control</span></span>

#### <a name="network-access-controls"></a><span data-ttu-id="5a5f7-312">網路存取控制</span><span class="sxs-lookup"><span data-stu-id="5a5f7-312">Network access controls</span></span>
<span data-ttu-id="5a5f7-313">雖然 Azure 虛擬網路 (VNet) 是 Azure 網路模型的基石並可提供隔離和保護，但[網路安全性群組群組 (NSG)](https://blogs.msdn.microsoft.com/igorpag/2016/05/14/azure-network-security-groups-nsg-best-practices-and-lessons-learned/)是您用來在網路層級強制執行和控制網路流量規則的主要工具。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-313">While the Azure Virtual Network (VNet) is the cornerstone of Azure networking model and provides isolation and protection, the [Network Security Groups (NSG)](https://blogs.msdn.microsoft.com/igorpag/2016/05/14/azure-network-security-groups-nsg-best-practices-and-lessons-learned/) are the main tool you use to enforce and control network traffic rules at the network level.</span></span>

![ <span data-ttu-id="5a5f7-314">網路存取控制</span><span class="sxs-lookup"><span data-stu-id="5a5f7-314">Network Access Controls</span></span>](media/azure-network-security/azure-network-security-fig-8.png)


<span data-ttu-id="5a5f7-315">您可以從客戶網路上的系統，透過跨單位連線或直接網際網路通訊，允許或拒絕虛擬網路內的工作負載，以控制存取權。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-315">You can control access by permitting or denying communication between the workloads within a virtual network, from systems on customer’s networks via cross-premises connectivity, or direct Internet communication.</span></span>

<span data-ttu-id="5a5f7-316">在圖表中，VNet 和 NSG 都位於 Azure 整體安全性堆疊的特定層中，其中的 NSG、UDR 和網路虛擬設備可用來建立安全性界限，以保護受保護網路中的應用程式部署。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-316">In the diagram, both VNets and NSGs reside in a specific layer in the Azure overall security stack, where NSGs, UDR, and network virtual appliances can be used to create security boundaries to protect the application deployments in the protected network.</span></span>

<span data-ttu-id="5a5f7-317">NSG 使用 5 個 Tuple 來評估流量 (且使用於您為 NSG 設定的規則)：</span><span class="sxs-lookup"><span data-stu-id="5a5f7-317">NSGs use a 5-tuple to evaluate traffic (and are used in the rules you configure for the NSG):</span></span>

-   [<span data-ttu-id="5a5f7-318">來源和目的地 IP 位址</span><span class="sxs-lookup"><span data-stu-id="5a5f7-318">Source and destination IP address</span></span>](https://support.microsoft.com/help/969029/the-functionality-for-source-ip-address-selection-in-windows-server-2008-and-in-windows-vista-differs-from-the-corresponding-functionality-in-earlier-versions-of-windows)

-   [<span data-ttu-id="5a5f7-319">來源和目的地連接埠</span><span class="sxs-lookup"><span data-stu-id="5a5f7-319">Source and destination port</span></span>](https://technet.microsoft.com/library/dd197515)

-   <span data-ttu-id="5a5f7-320">通訊協定：[傳輸控制通訊協定 (TCP)](https://technet.microsoft.com/library/cc940037.aspx) 或[使用者資料包通訊協定 (UDP)](https://technet.microsoft.com/library/cc940034.aspx)</span><span class="sxs-lookup"><span data-stu-id="5a5f7-320">Protocol: [Transmission Control Protocol (TCP)](https://technet.microsoft.com/library/cc940037.aspx) or [User Datagram Protocol (UDP)](https://technet.microsoft.com/library/cc940034.aspx)</span></span>

<span data-ttu-id="5a5f7-321">這表示您可以控制單一 VM 與一組 VM、單一 VM 與另一個單一 VM，或整個子網路之間的存取。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-321">This means you can control access between a single VM and a group of VMs, or a single VM to another single VM, or between entire subnets.</span></span> <span data-ttu-id="5a5f7-322">同樣地，請記住，這是簡單的具狀態封包篩選，而不是完整的封包檢查。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-322">Again, keep in mind that this is simple stateful packet filtering, not full packet inspection.</span></span> <span data-ttu-id="5a5f7-323">網路安全性群組中沒有通訊協定驗證或網路層級 IDS 或 IPS 功能。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-323">There is no protocol validation or network level IDS or IPS capability in a Network Security Group.</span></span>

<span data-ttu-id="5a5f7-324">NSG 隨附一些您應該注意的內建規則。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-324">An NSG comes with some built-in rules that you should be aware of.</span></span> <span data-ttu-id="5a5f7-325">它們是：</span><span class="sxs-lookup"><span data-stu-id="5a5f7-325">These are:</span></span>

-   <span data-ttu-id="5a5f7-326">**允許特定虛擬網路內的所有流量：**相同 Azure 虛擬網路上的所有 VM 可以彼此通訊。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-326">**Allow all traffic within a specific virtual network:** All VMs on the same Azure Virtual Network can communicate with each other.</span></span>

-   <span data-ttu-id="5a5f7-327">**允許 Azure 負載平衡輸入：** 此規則允許從 Azure 負載平衡器的任何來源位址到任何目的地位址的流量。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-327">**Allow Azure load balancing to inbound:** This rule allows traffic from any source address to any destination address for the Azure load balancer.</span></span>

-   <span data-ttu-id="5a5f7-328">**拒絕所有輸入：** 此規則會封鎖您已明確允許且源自網際網路的所有流量。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-328">**Deny all inbound:** This rule blocks all traffic sourcing from the Internet that you have explicitly allowed.</span></span>

-   <span data-ttu-id="5a5f7-329">**允許輸出至網際網路的所有流量：**此規則允許 VM 起始對網際網路的連線。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-329">**Allow all traffic outbound to the Internet:** This rule allows VMs to initiate connections to the Internet.</span></span> <span data-ttu-id="5a5f7-330">如果您不想起始這些連線，您需要建立規則來封鎖這些連線，或強制執行強制通道。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-330">If you do not want these connections initiated, you need to create a rule to block those connections or enforce forced tunneling.</span></span>

#### <a name="system-routes-and-user-defined-routes"></a><span data-ttu-id="5a5f7-331">系統路由和使用者定義的路由</span><span class="sxs-lookup"><span data-stu-id="5a5f7-331">System routes and user-defined routes</span></span>

<span data-ttu-id="5a5f7-332">當您在 Azure 中將虛擬機器 (VM) 新增到虛擬網路 (VNet) 時，您會發現 VM 能自動透過網路彼此通訊。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-332">When you add virtual machines (VMs) to a virtual network (VNet) in Azure, you  notice that the VMs are able to communicate with each other over the network, automatically.</span></span> <span data-ttu-id="5a5f7-333">您不需要指定閘道，即使 VM 位於不同子網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-333">You do not need to specify a gateway, even though the VMs are in different subnets.</span></span>

<span data-ttu-id="5a5f7-334">VM 到公開網際網路的通訊同樣適用，甚至當存在 Azure 到您的資料中心的混合連線時，也適用於您的內部網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-334">The same is true for communication from the VMs to the public Internet, and even to your on-premises network when a hybrid connection from Azure to your own datacenter is present.</span></span>

![系統路由](media/azure-network-security/azure-network-security-fig-9.png)

<span data-ttu-id="5a5f7-336">這個通訊流程是可能的，因為 Azure 會使用一連串系統路由來定義 IP 流量流動的方式。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-336">This flow of communication is possible because Azure uses a series of system routes to define how IP traffic flows.</span></span> <span data-ttu-id="5a5f7-337">系統路由控制下列案例的通訊流程：</span><span class="sxs-lookup"><span data-stu-id="5a5f7-337">System routes control the flow of communication in the following scenarios:</span></span>

-   <span data-ttu-id="5a5f7-338">從同一子網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-338">From within the same subnet.</span></span>

-   <span data-ttu-id="5a5f7-339">從 VNet 中的子網路到另一個子網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-339">From a subnet to another within a VNet.</span></span>

-   <span data-ttu-id="5a5f7-340">從 VM 到網際網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-340">From VMs to the Internet.</span></span>

-   <span data-ttu-id="5a5f7-341">透過 VPN 閘道從 VNet 到另一個 VNet。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-341">From a VNet to another VNet through a VPN gateway.</span></span>

-   <span data-ttu-id="5a5f7-342">透過 VNet 對等互連 ([服務鏈結](https://docs.microsoft.com/azure/virtual-network/virtual-network-peering-overview))，從 VNet 到另一個 VNet。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-342">From a VNet to another VNet through VNet Peering ([Service Chaining](https://docs.microsoft.com/azure/virtual-network/virtual-network-peering-overview)).</span></span>

-   <span data-ttu-id="5a5f7-343">透過 VPN 閘道從 VNet 到您的內部網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-343">From a VNet to your on-premises network through a VPN gateway.</span></span>

<span data-ttu-id="5a5f7-344">許多企業都有嚴格的安全性和合規性需求，而需要內部檢查所有的網路封包，以強制執行特定原則。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-344">Many enterprises have strict security and compliance requirements that require on-premises inspection of all network packets to enforce specific polices.</span></span> <span data-ttu-id="5a5f7-345">Azure 提供的機制稱為[強制通道](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-forced-tunneling)，其藉由建立自訂路由或透過 ExpressRoute 或 VPN 的[邊界閘道通訊協定 (BGP)](https://docs.microsoft.com/windows-server/remote/remote-access/bgp/border-gateway-protocol-bgp) 公告，將來自 VM 的流量路由傳送至內部部署環境。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-345">Azure provides a mechanism called [forced tunneling](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-forced-tunneling) that routes traffic from the VMs to on-premises by creating a custom route or by [Border Gateway Protocol (BGP)](https://docs.microsoft.com/windows-server/remote/remote-access/bgp/border-gateway-protocol-bgp) advertisements through ExpressRoute or VPN.</span></span>

<span data-ttu-id="5a5f7-346">Azure 中的強制通道會透過虛擬網路使用者定義路由 (UDR) 進行設定。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-346">Forced tunneling in Azure is configured via virtual network user-defined routes (UDR).</span></span> <span data-ttu-id="5a5f7-347">將流量重新導向至在內部部署網站時，會表示為至 Azure VPN 閘道的「預設路由」。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-347">Redirecting traffic to an on-premises site is expressed as a Default Route to the Azure VPN gateway.</span></span>

<span data-ttu-id="5a5f7-348">下節列出 Azure 虛擬網路路由表和路由目前的限制：</span><span class="sxs-lookup"><span data-stu-id="5a5f7-348">The following section lists the current limitation of the routing table and routes for an Azure Virtual Network:</span></span>

-   <span data-ttu-id="5a5f7-349">每個虛擬網路的子網路皆有內建的系統路由表。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-349">Each virtual network subnet has a built-in, system routing table.</span></span> <span data-ttu-id="5a5f7-350">系統路由表具有下列 3 個路由群組：</span><span class="sxs-lookup"><span data-stu-id="5a5f7-350">The system routing table has the following three groups of routes:</span></span>

 -  <span data-ttu-id="5a5f7-351">**本機 VNet 路由：** 直接連接到相同虛擬網路中的目的地 VM</span><span class="sxs-lookup"><span data-stu-id="5a5f7-351">**Local VNet routes:** Directly to the destination VMs in the same virtual network</span></span>

 - <span data-ttu-id="5a5f7-352">**內部部署路由：** 連接到 Azure VPN 閘道</span><span class="sxs-lookup"><span data-stu-id="5a5f7-352">**On premises routes:** To the Azure VPN gateway</span></span>

 -  <span data-ttu-id="5a5f7-353">**預設路由：** 直接連接到網際網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-353">**Default route:** Directly to the Internet.</span></span> <span data-ttu-id="5a5f7-354">系統將會卸除尚未由前兩個路由涵蓋之私人 IP 位址目的地的封包。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-354">Packets destined to the private IP addresses not covered by the previous two routes are dropped.</span></span>

-   <span data-ttu-id="5a5f7-355">隨著使用者定義路由的發行，您可以建立路由表以新增預設路由，然後建立路由表與 VNet 子網路的關聯，以便啟用這些子網路上的強制通道。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-355">With the release of user-defined routes, you can create a routing table to add a default route, and then associate the routing table to your VNet subnet to enable forced tunneling on those subnets.</span></span>

-   <span data-ttu-id="5a5f7-356">您需要在連接到虛擬網路的內部部署本機網站間設定「預設網站」。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-356">You need to set a "default site" among the cross-premises local sites connected to the virtual network.</span></span>

-   <span data-ttu-id="5a5f7-357">強制通道必須與具有動態路由 VPN 閘道 (非靜態閘道) 的 VNet 相關聯。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-357">Forced tunneling must be associated with a VNet that has a dynamic routing VPN gateway (not a static gateway).</span></span>

- <span data-ttu-id="5a5f7-358">ExpressRoute 強制通道不會透過這項機制進行設定，相反地，將由透過 ExpressRoute BGP 對等互連工作階段的廣告預設路由進行啟用。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-358">ExpressRoute forced tunneling is not configured via this mechanism, but instead, is enabled by advertising a default route via the ExpressRoute BGP peering sessions.</span></span>

> [!Note]
> <span data-ttu-id="5a5f7-359">如需詳細資訊，請參閱 [ExpressRoute 文件](https://azure.microsoft.com/documentation/services/expressroute/)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-359">For more information, see the [ExpressRoute Documentation](https://azure.microsoft.com/documentation/services/expressroute/) for more information.</span></span>

#### <a name="network-security-appliances"></a><span data-ttu-id="5a5f7-360">網路安全性設備</span><span class="sxs-lookup"><span data-stu-id="5a5f7-360">Network security appliances</span></span>
<span data-ttu-id="5a5f7-361">雖然網路安全性群組和使用者定義路由可以在 [OSI 模型](https://en.wikipedia.org/wiki/OSI_model)的網路和傳輸層提供特定網路安全性測量，但在某些情況下，您會想要或需要在更高層級的網路堆疊啟用安全性。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-361">While Network Security Groups and User-Defined Routes can provide a certain measure of network security at the network and transport layers of the [OSI model](https://en.wikipedia.org/wiki/OSI_model), there are going to be situations where you want or need to enable security at higher levels of the networking stack.</span></span> <span data-ttu-id="5a5f7-362">在這類情況下，建議您部署 Azure 合作夥伴所提供的虛擬網路安全性應用裝置。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-362">In such situations, we recommend that you deploy virtual network security appliances provided by Azure partners.</span></span>

![網路安全性設備](./media/azure-network-security/azure-network-security-fig-10.png)

<span data-ttu-id="5a5f7-364">Azure 網路安全性設備可改善 VNet 安全性和網路功能，這些功能透過 [Azure Marketplace](https://azuremarketplace.microsoft.com) 由許多廠商提供。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-364">Azure network security appliances improve VNet security and network functions, and they’re available from numerous vendors via the [Azure Marketplace](https://azuremarketplace.microsoft.com).</span></span> <span data-ttu-id="5a5f7-365">可以部署這些虛擬安全性設備以提供：</span><span class="sxs-lookup"><span data-stu-id="5a5f7-365">These virtual security appliances can be deployed to provide:</span></span>

-   <span data-ttu-id="5a5f7-366">高可用性的防火牆</span><span class="sxs-lookup"><span data-stu-id="5a5f7-366">Highly available firewalls</span></span>

-   <span data-ttu-id="5a5f7-367">入侵預防</span><span class="sxs-lookup"><span data-stu-id="5a5f7-367">Intrusion prevention</span></span>

-   <span data-ttu-id="5a5f7-368">入侵偵測</span><span class="sxs-lookup"><span data-stu-id="5a5f7-368">Intrusion detection</span></span>

-   <span data-ttu-id="5a5f7-369">Web 應用程式防火牆 (WAF)</span><span class="sxs-lookup"><span data-stu-id="5a5f7-369">Web application firewalls (WAFs)</span></span>

-   <span data-ttu-id="5a5f7-370">WAN 最佳化</span><span class="sxs-lookup"><span data-stu-id="5a5f7-370">WAN optimization</span></span>

-   <span data-ttu-id="5a5f7-371">路由</span><span class="sxs-lookup"><span data-stu-id="5a5f7-371">Routing</span></span>

-   <span data-ttu-id="5a5f7-372">負載平衡</span><span class="sxs-lookup"><span data-stu-id="5a5f7-372">Load balancing</span></span>

-   <span data-ttu-id="5a5f7-373">VPN</span><span class="sxs-lookup"><span data-stu-id="5a5f7-373">VPN</span></span>

-   <span data-ttu-id="5a5f7-374">憑證管理</span><span class="sxs-lookup"><span data-stu-id="5a5f7-374">Certificate management</span></span>

-   <span data-ttu-id="5a5f7-375">Active Directory</span><span class="sxs-lookup"><span data-stu-id="5a5f7-375">Active Directory</span></span>

-   <span data-ttu-id="5a5f7-376">多重要素驗證</span><span class="sxs-lookup"><span data-stu-id="5a5f7-376">Multifactor authentication</span></span>

#### <a name="application-gateway"></a><span data-ttu-id="5a5f7-377">應用程式閘道</span><span class="sxs-lookup"><span data-stu-id="5a5f7-377">Application gateway</span></span>

<span data-ttu-id="5a5f7-378">[Microsoft Azure 應用程式閘道](https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction)是專用的虛擬設備，它會以服務形式提供應用程式傳遞控制器 (ADC)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-378">[Microsoft Azure Application Gateway](https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction) is a dedicated virtual appliance that provides an application delivery controller (ADC) as a service.</span></span>

 ![應用程式閘道](./media/azure-network-security/azure-network-security-fig-11.png)

<span data-ttu-id="5a5f7-380">應用程式閘道可將 CPU 密集 SSL 終止卸載至應用程式閘道 (SSL-offloading)，讓您最佳化 Web 伺服陣列的效能和可用性。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-380">Application Gateway enables you to optimize web farm performance and availability by offloading CPU intensive SSL termination to the application gateway (SSL-offloading).</span></span> <span data-ttu-id="5a5f7-381">它也提供其他第 7 層路由功能，包括：</span><span class="sxs-lookup"><span data-stu-id="5a5f7-381">It also provides other layer 7 routing capabilities including:</span></span>

-   <span data-ttu-id="5a5f7-382">傳入流量的循環配置資源散發</span><span class="sxs-lookup"><span data-stu-id="5a5f7-382">Round-robin distribution of incoming traffic</span></span>

-   <span data-ttu-id="5a5f7-383">Cookie 型工作階段同質</span><span class="sxs-lookup"><span data-stu-id="5a5f7-383">Cookie-based session affinity</span></span>

-   <span data-ttu-id="5a5f7-384">URL 路徑型路由</span><span class="sxs-lookup"><span data-stu-id="5a5f7-384">URL path-based routing</span></span>

-   <span data-ttu-id="5a5f7-385">在單一應用程式閘道後面裝載多個網站的功能</span><span class="sxs-lookup"><span data-stu-id="5a5f7-385">Ability to host multiple websites behind a single Application Gateway</span></span>


<span data-ttu-id="5a5f7-386">[Web 應用程式防火牆 (WAF)](https://docs.microsoft.com/azure/application-gateway/application-gateway-web-application-firewall-overview) 也會提供為應用程式閘道的一部分。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-386">A [web application firewall (WAF)](https://docs.microsoft.com/azure/application-gateway/application-gateway-web-application-firewall-overview) is also provided as part of the application gateway.</span></span> <span data-ttu-id="5a5f7-387">這會保護 Web 應用程式免於遭遇常見的 Web 弱點和攻擊。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-387">This provides protection to web applications from common web vulnerabilities and exploits.</span></span> <span data-ttu-id="5a5f7-388">應用程式閘道可以設定為網際網路對向閘道、內部專用閘道或兩者混合。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-388">Application Gateway can be configured as an Internet facing gateway, internal only gateway, or a combination of both.</span></span>

<span data-ttu-id="5a5f7-389">可以在偵測或預防模式中執行應用程式閘道 WAF。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-389">Application Gateway WAF can be run in detection or prevention mode.</span></span> <span data-ttu-id="5a5f7-390">常見的使用案例是讓系統管理員在偵測模式中執行，以觀察惡意模式的流量。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-390">A common use case is for administrators to run in detection mode to observe traffic for malicious patterns.</span></span> <span data-ttu-id="5a5f7-391">一旦偵測到潛在的漏洞，尋求預防模式來封鎖可疑的傳入流量。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-391">Once potential exploits are detected, turning to prevention mode blocks suspicious incoming traffic.</span></span>

 ![應用程式閘道](./media/azure-network-security/azure-network-security-fig-12.png)

<span data-ttu-id="5a5f7-393">此外，應用程式閘道 WAF 可協助您監視 Web 應用程式來抵禦攻擊，方法是使用與 [Azure 監視器](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview)和 [Azure 資訊安全中心](https://azure.microsoft.com/services/security-center/)整合的即時 WAF 記錄，追蹤 WAF 警示並輕鬆地監視趨勢。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-393">In addition, Application Gateway WAF helps you monitor web applications against attacks using a real-time WAF log that is integrated with [Azure Monitor](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview) and [Azure Security Center](https://azure.microsoft.com/services/security-center/) to track WAF alerts and easily monitor trends.</span></span>

<span data-ttu-id="5a5f7-394">JSON 格式化記錄會直接移至客戶的儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-394">The JSON formatted log goes directly to the customer’s storage account.</span></span> <span data-ttu-id="5a5f7-395">您可以完全掌控這些記錄，而且可以套用自己的保留原則。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-395">You have full control over these logs and can apply your own retention policies.</span></span>

<span data-ttu-id="5a5f7-396">您也可以使用 [Azure 記錄整合](https://aka.ms/AzLog)，將這些記錄內嵌至自己的分析系統中。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-396">You can also ingest these logs into your own analytics system using [Azure Log Integration](https://aka.ms/AzLog).</span></span> <span data-ttu-id="5a5f7-397">WAF 記錄也會與 [Operations Management Suite (OMS)](https://www.microsoft.com/cloud-platform/operations-management-suite) 整合，以便您使用 OMS 記錄分析來執行複雜精細的查詢。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-397">WAF logs are also integrated with [Operations Management Suite (OMS)](https://www.microsoft.com/cloud-platform/operations-management-suite) so you can use OMS log analytics to execute sophisticated fine-grained queries.</span></span>

#### <a name="azure-web-application-firewall-waf"></a><span data-ttu-id="5a5f7-398">Azure Web 應用程式防火牆 (WAF)</span><span class="sxs-lookup"><span data-stu-id="5a5f7-398">Azure web application firewall (WAF)</span></span>

<span data-ttu-id="5a5f7-399">Web 應用程式已逐漸成為利用常見已知弱點的惡意攻擊目標，例如 SQL 插入式、跨網站指令碼攻擊，以及出現在 [OWASP 前 10 大](https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project)中的其他攻擊。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-399">Web applications are increasingly targets of malicious attacks that exploit common known vulnerabilities, such as SQL injection, cross site scripting attacks, and other attacks that appear in the [OWASP top 10](https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project).</span></span> <span data-ttu-id="5a5f7-400">若要防止應用程式發生這類攻擊，需要對多層次的應用程式拓撲執行嚴格的維護、修補和監視。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-400">Preventing such exploits in the application requires rigorous maintenance, patching, and monitoring at multiple layers of the application topology.</span></span>

 ![Azure Web 應用程式防火牆 (WAF)](./media/azure-network-security/azure-network-security-fig-13.png)

<span data-ttu-id="5a5f7-402">集中式 [Web 應用程式防火牆 (WAF)](https://docs.microsoft.com/azure/application-gateway/application-gateway-web-application-firewall-overview) 可以防禦 Web 攻擊並簡化安全性管理，而不需要變更任何應用程式。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-402">A centralized [web application firewall (WAF)](https://docs.microsoft.com/azure/application-gateway/application-gateway-web-application-firewall-overview) can protect against web attacks and simplifies security management without requiring any application changes.</span></span>

<span data-ttu-id="5a5f7-403">相較於保護每個個別的 Web 應用程式，WAF 方案還可透過在中央位置修補已知弱點，更快地因應安全性威脅。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-403">A WAF solution can also react to a security threat faster by patching a known vulnerability at a central location versus securing each of individual web applications.</span></span> <span data-ttu-id="5a5f7-404">現有的應用程式閘道可以輕易地轉換成已啟用 Web 應用程式防火牆的應用程式閘道。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-404">Existing application gateways can be converted to a web application firewall enabled application gateway easily.</span></span>

#### <a name="network-availability-controls"></a><span data-ttu-id="5a5f7-405">網路可用性控制</span><span class="sxs-lookup"><span data-stu-id="5a5f7-405">Network availability controls</span></span>

<span data-ttu-id="5a5f7-406">有不同的選項可使用 Microsoft Azure 來分散網路流量。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-406">There are different options to distribute network traffic using Microsoft Azure.</span></span> <span data-ttu-id="5a5f7-407">這些選項的運作方式彼此間會有差異，其具備不同的功能組合並支援不同的案例。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-407">These options work differently from each other, having a different feature set and support different scenarios.</span></span> <span data-ttu-id="5a5f7-408">它們每個都可單獨使用，或組合在一起。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-408">They can each be used in isolation, or combining them.</span></span>

<span data-ttu-id="5a5f7-409">以下是網路可用性控制：</span><span class="sxs-lookup"><span data-stu-id="5a5f7-409">Following are the Network availability controls:</span></span>

-   <span data-ttu-id="5a5f7-410">Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="5a5f7-410">Azure Load Balancer</span></span>

-   <span data-ttu-id="5a5f7-411">應用程式閘道</span><span class="sxs-lookup"><span data-stu-id="5a5f7-411">Application Gateway</span></span>

-   <span data-ttu-id="5a5f7-412">流量管理員</span><span class="sxs-lookup"><span data-stu-id="5a5f7-412">Traffic Manager</span></span>

<span data-ttu-id="5a5f7-413">**Azure Load Balancer**</span><span class="sxs-lookup"><span data-stu-id="5a5f7-413">**Azure Load balancer**</span></span>

<span data-ttu-id="5a5f7-414">為您的應用程式提供高可用性和網路效能。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-414">Delivers high availability and network performance to your applications.</span></span> <span data-ttu-id="5a5f7-415">這是 Layer 4 (TCP、UDP) 負載平衡器，可將連入流量分配到負載平衡集中所定義服務的狀況良好執行個體。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-415">It is a Layer 4 (TCP, UDP) load balancer that distributes incoming traffic among healthy instances of services defined in a load-balanced set.</span></span>

 ![Azure Load Balancer](media/azure-network-security/azure-network-security-fig-14.png)


<span data-ttu-id="5a5f7-417">Azure Load Balancer 可以設定為：</span><span class="sxs-lookup"><span data-stu-id="5a5f7-417">Azure Load Balancer can be configured to:</span></span>

-   <span data-ttu-id="5a5f7-418">對虛擬機器的連入網際網路流量進行負載平衡。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-418">Load balance incoming Internet traffic to virtual machines.</span></span> <span data-ttu-id="5a5f7-419">這個組態稱為 [網際網路面向的負載平衡](https://docs.microsoft.com/azure/load-balancer/load-balancer-internet-overview)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-419">This configuration is known as [Internet-facing load balancing](https://docs.microsoft.com/azure/load-balancer/load-balancer-internet-overview).</span></span>

-   <span data-ttu-id="5a5f7-420">平衡虛擬網路中的虛擬機器之間、雲端服務中的虛擬機器之間，或內部部署電腦與跨單位部署虛擬網路中的虛擬機器之間的流量負載。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-420">Load balance traffic between virtual machines in a virtual network, between virtual machines in cloud services, or between on-premises computers and virtual machines in a cross-premises virtual network.</span></span> <span data-ttu-id="5a5f7-421">這個組態稱為 [內部負載平衡](https://docs.microsoft.com/azure/load-balancer/load-balancer-internal-overview)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-421">This configuration is known as [internal load balancing](https://docs.microsoft.com/azure/load-balancer/load-balancer-internal-overview).</span></span>

-   <span data-ttu-id="5a5f7-422">將外部流量轉送到特定的虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-422">Forward external traffic to a specific virtual machine.</span></span>

<span data-ttu-id="5a5f7-423">雲端中的所有資源都需要可從網際網路觸及的公用 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-423">All resources in the cloud need a public IP address to be reachable from the Internet.</span></span> <span data-ttu-id="5a5f7-424">Azure 中的雲端基礎結構會針對其資源使用無法路由傳送的 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-424">The cloud infrastructure in Azure uses non-routable IP addresses for its resources.</span></span> <span data-ttu-id="5a5f7-425">Azure 會使用具有公用 IP 位址的網路位址轉譯 (NAT) 來與網際網路通訊。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-425">Azure uses network address translation (NAT) with public IP addresses to communicate to the Internet.</span></span>

 <span data-ttu-id="5a5f7-426">**應用程式閘道**</span><span class="sxs-lookup"><span data-stu-id="5a5f7-426">**Application gateway**</span></span>

 <span data-ttu-id="5a5f7-427">應用程式閘道是在應用程式層級 (OSI 網路參考堆疊中的第 7 層) 上運作。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-427">Application Gateway works at the application layer (Layer 7 in the OSI network reference stack).</span></span> <span data-ttu-id="5a5f7-428">它會用來當做反向 Proxy 服務，終止用戶端連線，並將要求轉寄到後端端點。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-428">It acts as a reverse-proxy service, terminating the client connection and forwarding requests to back-end endpoints.</span></span>

 <span data-ttu-id="5a5f7-429">**流量管理員**</span><span class="sxs-lookup"><span data-stu-id="5a5f7-429">**Traffic manager**</span></span>

<span data-ttu-id="5a5f7-430">Microsoft Azure 流量管理員可讓您控制使用者流量，將流量分散到不同資料中心的服務端點。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-430">Microsoft Azure Traffic Manager allows you to control the distribution of user traffic for service endpoints in different datacenters.</span></span> <span data-ttu-id="5a5f7-431">流量管理員支援的服務端點包括 Azure VM、Web Apps 和雲端服務。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-431">Service endpoints supported by Traffic Manager include Azure VMs, Web Apps, and cloud services.</span></span> <span data-ttu-id="5a5f7-432">您也可以將流量管理員使用於外部、非 Azure 端點。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-432">You can also use Traffic Manager with external, non-Azure endpoints.</span></span>

<span data-ttu-id="5a5f7-433">流量管理員會使用網域名稱系統 (DNS)，根據[流量路由方法](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-routing-methods)和端點的健全狀況，將用戶端要求導向到最適當的端點。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-433">Traffic Manager uses the Domain Name System (DNS) to direct client requests to the most appropriate endpoint based on a [traffic-routing method](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-routing-methods) and the health of the endpoints.</span></span> <span data-ttu-id="5a5f7-434">流量管理員提供各種流量路由方法，以符合不同的應用程式需求、端點健全狀況[監視](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-monitoring)、及自動容錯移轉。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-434">Traffic Manager provides a range of traffic-routing methods to suit different application needs, endpoint health [monitoring](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-monitoring), and automatic failover.</span></span> <span data-ttu-id="5a5f7-435">流量管理員可針對失敗彈性應變，包括整個 Azure 區域失敗。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-435">Traffic Manager is resilient to failure, including the failure of an entire Azure region.</span></span>

<span data-ttu-id="5a5f7-436">Azure 流量管理員可讓您控制流量分散到應用程式端點的方式。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-436">Azure Traffic Manager enables you to control the distribution of traffic across your application endpoints.</span></span> <span data-ttu-id="5a5f7-437">端點是裝載於 Azure 內部或外部的任何網際網路對向服務。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-437">An endpoint is any Internet-facing service hosted inside or outside of Azure.</span></span>

<span data-ttu-id="5a5f7-438">流量管理員提供兩大優點︰</span><span class="sxs-lookup"><span data-stu-id="5a5f7-438">Traffic Manager provides two key benefits:</span></span>

-   <span data-ttu-id="5a5f7-439">根據其中一種[流量路由方法](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-routing-methods)分散流量。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-439">Distribution of traffic according to one of several [traffic-routing methods](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-routing-methods).</span></span>

-   <span data-ttu-id="5a5f7-440">[連續監視端點健康狀態](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-monitoring)以及在端點失敗時自動容錯移轉。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-440">[Continuous monitoring of endpoint health](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-monitoring) and automatic failover when endpoints fail.</span></span>

<span data-ttu-id="5a5f7-441">當用戶端嘗試連接至服務時，它必須先將服務的 DNS 名稱解析為 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-441">When a client attempts to connect to a service, it must first resolve the DNS name of the service to an IP address.</span></span> <span data-ttu-id="5a5f7-442">然後用戶端才能連接到該 IP 位址以存取服務。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-442">The client then connects to that IP address to access the service.</span></span> <span data-ttu-id="5a5f7-443">流量管理員會使用 DNS，根據流量路由方法的規則，將用戶端導向特定的服務端點。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-443">Traffic Manager uses DNS to direct clients to specific service endpoints based on the rules of the traffic-routing method.</span></span> <span data-ttu-id="5a5f7-444">用戶端會直接連線至選取的端點。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-444">Clients connect to the selected endpoint directly.</span></span> <span data-ttu-id="5a5f7-445">流量管理員不是 Proxy 或閘道。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-445">Traffic Manager is not a proxy or a gateway.</span></span> <span data-ttu-id="5a5f7-446">流量管理員看不到在用戶端與服務之間傳遞的流量。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-446">Traffic Manager does not see the traffic passing between the client and the service.</span></span>

### <a name="azure-network-validation"></a><span data-ttu-id="5a5f7-447">Azure 網路驗證</span><span class="sxs-lookup"><span data-stu-id="5a5f7-447">Azure network validation</span></span>

<span data-ttu-id="5a5f7-448">Azure 網路驗證以確定正在運作的 Azure 網路，因為它已設定且可在完成驗證是使用服務和功能可用來監視網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-448">Azure network validation is to ensure that the Azure network is operating as it is configured and validation can be done using the services and features available to monitor the network.</span></span> <span data-ttu-id="5a5f7-449">利用 Azure 網路監看員，您可以存取多項記錄和診斷功能，進而深入了解您的網路效能與健康情況。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-449">With Azure Network Watcher, you can access a plethora of logging and diagnostic capabilities that empower you with insights to understand your network performance and health.</span></span> <span data-ttu-id="5a5f7-450">這些功能可透過入口網站、Power Shell、CLI、Rest API 和 SDK 存取。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-450">These capabilities are accessible via Portal, Power Shell, CLI, Rest API and SDK.</span></span>

<span data-ttu-id="5a5f7-451">Azure 作業安全性是指使用者可在 Microsoft Azure 中用來保護其資料、應用程式和其他資產的服務、控制及功能。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-451">Azure Operational Security refers to the services, controls, and features available to users for protecting their data, applications, and other assets in Microsoft Azure.</span></span> <span data-ttu-id="5a5f7-452">Azure 作業安全性的基礎架構涵蓋透過 Microsoft 特有之各種功能獲得的知識，包括 Microsoft 安全性開發週期 (SDL)、Microsoft Security Response Center 方案，以及對網路安全性威脅型態的深層認知。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-452">Azure Operational Security is built on a framework that incorporates the knowledge gained through a various capabilities that are unique to Microsoft, including the Microsoft Security Development Lifecycle (SDL), the Microsoft Security Response Centre program, and deep awareness of the cyber security threat landscape.</span></span>

-   [<span data-ttu-id="5a5f7-453">Azure Operations Management Suite</span><span class="sxs-lookup"><span data-stu-id="5a5f7-453">Azure Operations Management Suite</span></span>](https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-overview)

-   [<span data-ttu-id="5a5f7-454">Azure 資訊安全中心</span><span class="sxs-lookup"><span data-stu-id="5a5f7-454">Azure Security Center</span></span>](https://docs.microsoft.com/azure/security-center/security-center-intro)

-   [<span data-ttu-id="5a5f7-455">Azure 監視器</span><span class="sxs-lookup"><span data-stu-id="5a5f7-455">Azure Monitor</span></span>](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview)

-   [<span data-ttu-id="5a5f7-456">Azure 網路監看員</span><span class="sxs-lookup"><span data-stu-id="5a5f7-456">Azure Network watcher</span></span>](https://docs.microsoft.com/azure/network-watcher/network-watcher-monitoring-overview)

-   [<span data-ttu-id="5a5f7-457">Azure 儲存體分析</span><span class="sxs-lookup"><span data-stu-id="5a5f7-457">Azure Storage analytics</span></span>](https://docs.microsoft.com/rest/api/storageservices/fileservices/storage-analytics)

-   <span data-ttu-id="5a5f7-458">Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="5a5f7-458">Azure Resource Manager</span></span>

#### <a name="azure-resource-manager"></a><span data-ttu-id="5a5f7-459">Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="5a5f7-459">Azure resource manager</span></span>

<span data-ttu-id="5a5f7-460">操作 Microsoft Azure 的人員和程序或許是平台最重要的安全性特性。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-460">The people and processes that operate Microsoft Azure are perhaps the most important security feature of the platform.</span></span> <span data-ttu-id="5a5f7-461">這一節說明 Microsoft 的全域資料中心基礎結構中，可協助您增強及維護安全性、持續性和隱私權的功能。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-461">This section describes features of Microsoft’s global datacenter infrastructure that help enhance and maintain security, continuity, and privacy.</span></span>

<span data-ttu-id="5a5f7-462">應用程式的基礎結構通常由許多元件所組成 – 或許是虛擬機器、儲存體帳戶和虛擬網路，或者 web 應用程式、資料庫、資料庫伺服器和第三方服務。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-462">The infrastructure for your application is typically made up of many components – maybe a virtual machine, storage account, and virtual network, or a web app, database, database server, and third-party services.</span></span> <span data-ttu-id="5a5f7-463">您看不到這些元件作為個別的實體，而是看到它們作為單一實體相關且彼此相依的組件。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-463">You do not see these components as separate entities, instead you see them as related and interdependent parts of a single entity.</span></span> <span data-ttu-id="5a5f7-464">您會想要將其當成群組來部署、管理和監視。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-464">You want to deploy, manage, and monitor them as a group.</span></span> <span data-ttu-id="5a5f7-465">Azure Resource Manager 可讓您將方案中的資源作為群組使用。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-465">Azure Resource Manager enables you to work with the resources in your solution as a group.</span></span>

<span data-ttu-id="5a5f7-466">您可以透過單一、協調的作業來部署、更新或刪除方案的所有資源。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-466">You can deploy, update, or delete all the resources for your solution in a single, coordinated operation.</span></span> <span data-ttu-id="5a5f7-467">您會使用部署的範本，且該範本可以用於不同的環境，例如測試、預備和生產環境。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-467">You use a template for deployment and that template can work for different environments such as testing, staging, and production.</span></span> <span data-ttu-id="5a5f7-468">Resource Manager 會提供安全性、稽核和標記功能，以協助您在部署後管理您的資源。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-468">Resource Manager provides security, auditing, and tagging features to help you manage your resources after deployment.</span></span>

<span data-ttu-id="5a5f7-469">**使用 Resource Manager 的優點**</span><span class="sxs-lookup"><span data-stu-id="5a5f7-469">**The benefits of using Resource Manager**</span></span>

<span data-ttu-id="5a5f7-470">Resource Manager 會提供數個優點：</span><span class="sxs-lookup"><span data-stu-id="5a5f7-470">Resource Manager provides several benefits:</span></span>

-   <span data-ttu-id="5a5f7-471">您可以以群組形式部署、管理及監視方案的所有資源，而不是個別處理這些資源。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-471">You can deploy, manage, and monitor all the resources for your solution as a group, rather than handling these resources individually.</span></span>

-   <span data-ttu-id="5a5f7-472">您可以在整個方案週期重複部署方案，並確信您的資源會部署在一致的狀態中。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-472">You can repeatedly deploy your solution throughout the development lifecycle and have confidence your resources are deployed in a consistent state.</span></span>

-   <span data-ttu-id="5a5f7-473">您可以透過宣告式範本而非指令碼來管理基礎結構。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-473">You can manage your infrastructure through declarative templates rather than scripts.</span></span>

-   <span data-ttu-id="5a5f7-474">您可以定義之間的相依性，使得以正確的順序部署資源。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-474">You can define the dependencies between resources, so they are deployed in the correct order.</span></span>

-   <span data-ttu-id="5a5f7-475">因為角色型存取控制 (RBAC) 會原生整合至管理平台，您可以將存取控制套用至資源群組中的所有服務。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-475">You can apply access control to all services in your resource group because Role-Based Access Control (RBAC) is natively integrated into the management platform.</span></span>

-   <span data-ttu-id="5a5f7-476">您可以將標籤套用至資源，以便以邏輯方式組織訂用帳戶中的所有資源。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-476">You can apply tags to resources to logically organize all the resources in your subscription.</span></span>

-   <span data-ttu-id="5a5f7-477">您可以檢視共用標籤之資源群組的成本，以釐清您的組織的計費方式。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-477">You can clarify your organization's billing by viewing costs for a group of resources sharing tag.</span></span>

> [!Note]
> <span data-ttu-id="5a5f7-478">Resource Manager 提供一個部署和管理方案的新方式。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-478">Resource Manager provides a new way to deploy and manage your solutions.</span></span> <span data-ttu-id="5a5f7-479">如果您使用較舊的部署模型並想要了解這些變更，請參閱[瞭解Resource Manager 部署和傳統部署](https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-deployment-model)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-479">If you used the earlier deployment model and want to learn about the changes, see [Understanding Resource Manager deployment and classic deployment](https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-deployment-model).</span></span>

## <a name="azure-network-logging-and-monitoring"></a><span data-ttu-id="5a5f7-480">Azure 網路記錄和監視</span><span class="sxs-lookup"><span data-stu-id="5a5f7-480">Azure network logging and monitoring</span></span>

<span data-ttu-id="5a5f7-481">Azure 提供許多工具來監視、預防、偵測及回應網路安全性事件。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-481">Azure offers many tools to monitor, prevent, detect, and respond to network security events.</span></span> <span data-ttu-id="5a5f7-482">可供您在此領域中使用的最強大工具包括：</span><span class="sxs-lookup"><span data-stu-id="5a5f7-482">Some of the most powerful tools available to you in this area include:</span></span>

-   <span data-ttu-id="5a5f7-483">網路監看員</span><span class="sxs-lookup"><span data-stu-id="5a5f7-483">Network Watcher</span></span>

-   <span data-ttu-id="5a5f7-484">網路資源層級監視</span><span class="sxs-lookup"><span data-stu-id="5a5f7-484">Network Resource Level Monitoring</span></span>

-   <span data-ttu-id="5a5f7-485">Log Analytics</span><span class="sxs-lookup"><span data-stu-id="5a5f7-485">Log Analytics</span></span>

### <a name="network-watcher"></a><span data-ttu-id="5a5f7-486">網路監看員</span><span class="sxs-lookup"><span data-stu-id="5a5f7-486">Network watcher</span></span>

<span data-ttu-id="5a5f7-487">[網路監看員](https://docs.microsoft.com/azure/network-watcher/network-watcher-monitoring-overview) - 網路監看員的功能隨附了案例式監視。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-487">[Network Watcher](https://docs.microsoft.com/azure/network-watcher/network-watcher-monitoring-overview) - Scenario-based monitoring is provided with the features in Network Watcher.</span></span> <span data-ttu-id="5a5f7-488">這項服務包括封包擷取、下一個躍點、IP 流量驗證、安全性群組檢視、NSG 流量記錄。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-488">This service includes packet capture, next hop, IP flow verify, security group view, NSG flow logs.</span></span> <span data-ttu-id="5a5f7-489">案例層級監視可提供端對端的網路資源檢視，而非個別的網路資源監視。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-489">Scenario level monitoring provides an end to end view of network resources in contrast to individual network resource monitoring.</span></span>

 ![網路監看員](./media/azure-network-security/azure-network-security-fig-15.png)

<span data-ttu-id="5a5f7-491">網路監看員是一項區域性服務，可讓您監視與診斷位於和進出 Azure 的網路案例層級條件。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-491">Network Watcher is a regional service that enables you to monitor and diagnose conditions at a network scenario level in, to, and from Azure.</span></span> <span data-ttu-id="5a5f7-492">網路監看員提供的網路診斷和視覺效果工具，可幫助您了解、診斷及洞悉您在 Azure 中的網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-492">Network diagnostic and visualization tools available with Network Watcher help you understand, diagnose, and gain insights to your network in Azure.</span></span>

<span data-ttu-id="5a5f7-493">網路監看員目前具有下列功能︰</span><span class="sxs-lookup"><span data-stu-id="5a5f7-493">Network Watcher currently has the following capabilities:</span></span>

#### <a name="topology"></a><span data-ttu-id="5a5f7-494">拓撲</span><span class="sxs-lookup"><span data-stu-id="5a5f7-494">Topology</span></span>

<span data-ttu-id="5a5f7-495">[拓撲](https://docs.microsoft.com/azure/network-watcher/network-watcher-topology-overview)會傳回虛擬網路中的網路資源之圖形。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-495">[Topology](https://docs.microsoft.com/azure/network-watcher/network-watcher-topology-overview) returns a graph of network resources in a virtual network.</span></span> <span data-ttu-id="5a5f7-496">此圖描述了資源之間的互相連線來代表端對端網路連線。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-496">The graph depicts the interconnection between the resources to represent the end to end network connectivity.</span></span> <span data-ttu-id="5a5f7-497">在入口網站中，拓撲會依每個虛擬網路為基礎傳回資源物件。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-497">In the portal, Topology returns the resource objects on as per virtual network basis.</span></span> <span data-ttu-id="5a5f7-498">即使在不會顯示的資源群組中，關聯性會依網路監看員區域外部的資源之間的線條描述。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-498">The relationships are depicted by lines between the resources outside of the Network Watcher region, even if in the resource group will not be displayed.</span></span> <span data-ttu-id="5a5f7-499">在入口網站檢視傳回的資源會以圖表方式顯示的網路元件子集。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-499">The resources returned in the portal view are a subset of the networking components that are graphed.</span></span> <span data-ttu-id="5a5f7-500">若要查看網路資源完整清單，您可以使用 [PowerShell](https://docs.microsoft.com/azure/network-watcher/network-watcher-topology-powershell) 或 [REST](https://docs.microsoft.com/azure/network-watcher/network-watcher-topology-rest)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-500">To see the full list of networking resources, you can use [PowerShell](https://docs.microsoft.com/azure/network-watcher/network-watcher-topology-powershell) or [REST](https://docs.microsoft.com/azure/network-watcher/network-watcher-topology-rest).</span></span>

<span data-ttu-id="5a5f7-501">隨著資源傳回，它們之間的連線會在兩個關聯性之間模型化。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-501">As resources are returned the connection between they are modeled under two relationships.</span></span>

- <span data-ttu-id="5a5f7-502">**內含項目** - 虛擬網路包含其中含有 NIC 的子網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-502">**Containment** - Virtual Network contains a Subnet, which contains a NIC.</span></span>

- <span data-ttu-id="5a5f7-503">**相關聯** - NIC 與 VM 相關聯。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-503">**Associated** - A NIC is associated with a VM.</span></span>

#### <a name="variable-packet-capture"></a><span data-ttu-id="5a5f7-504">變數封包擷取</span><span class="sxs-lookup"><span data-stu-id="5a5f7-504">Variable packet capture</span></span>

<span data-ttu-id="5a5f7-505">網路監看員[變數封包擷取](https://docs.microsoft.com/azure/network-watcher/network-watcher-packet-capture-overview)可讓您建立封包擷取工作階段來追蹤虛擬機器的流入和流出流量。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-505">Network Watcher [variable packet capture](https://docs.microsoft.com/azure/network-watcher/network-watcher-packet-capture-overview) allows you to create packet capture sessions to track traffic to and from a virtual machine.</span></span> <span data-ttu-id="5a5f7-506">封包擷取有助於被動和主動地診斷網路異常。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-506">Packet capture helps to diagnose network anomalies both reactively and proactivity.</span></span> <span data-ttu-id="5a5f7-507">其他用途包括收集網路統計資料、取得有關網路入侵的資訊，以及偵錯用戶端與伺服器間的通訊等等。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-507">Other uses include gathering network statistics, gaining information on network intrusions, to debug client-server communications and much more.</span></span>

<span data-ttu-id="5a5f7-508">封包擷取是透過網路監看員從遠端啟動的虛擬機器擴充功能。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-508">Packet capture is a virtual machine extension that is remotely started through Network Watcher.</span></span> <span data-ttu-id="5a5f7-509">這項功能可以減輕在所需虛擬機器上手動執行封包擷取的工作負擔，進而省下寶貴的時間。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-509">This capability eases the burden of running a packet capture manually on the desired virtual machine, which saves valuable time.</span></span> <span data-ttu-id="5a5f7-510">可以透過入口網站、PowerShell、CLI 或 REST API 觸發封包擷取。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-510">Packet capture can be triggered through the portal, PowerShell, CLI, or REST API.</span></span> <span data-ttu-id="5a5f7-511">觸發封包擷取方式的其中一個範例是使用虛擬機器警示。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-511">One example of how packet capture can be triggered is with Virtual Machine alerts.</span></span>

#### <a name="ip-flow-verify"></a><span data-ttu-id="5a5f7-512">IP 流量驗證</span><span class="sxs-lookup"><span data-stu-id="5a5f7-512">IP flow verify</span></span>

<span data-ttu-id="5a5f7-513">[IP 流量驗證](https://docs.microsoft.com/azure/network-watcher/network-watcher-ip-flow-verify-overview)會根據 5 個 tuple 資訊檢查進出虛擬機器的封包是受到允許或拒絕。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-513">[IP flows verify](https://docs.microsoft.com/azure/network-watcher/network-watcher-ip-flow-verify-overview) checks if a packet is allowed or denied to or from a virtual machine based on 5-tuple information.</span></span> <span data-ttu-id="5a5f7-514">這些資訊包括方向、通訊協定、本機 IP、遠端 IP、本機連接埠和遠端連接埠。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-514">This information consists of direction, protocol, local IP, remote IP, local port, and remote port.</span></span> <span data-ttu-id="5a5f7-515">如果封包遭到安全性群組拒絕，則會傳回拒絕封包之規則的名稱。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-515">If the packet is denied by a security group, the name of the rule that denied the packet is returned.</span></span> <span data-ttu-id="5a5f7-516">雖然任何來源或目的地 IP 均可供選擇，但這項功能可協助系統管理員快速診斷網際網路和內部部署環境的往來連線問題。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-516">While any source or destination IP can be chosen, this feature helps administrators quickly diagnose connectivity issues from or to the internet and from or to the on-premises environment.</span></span>

<span data-ttu-id="5a5f7-517">IP 流量驗證是以虛擬機器的網路介面作為目標。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-517">IP flows verify targets a network interface of a virtual machine.</span></span> <span data-ttu-id="5a5f7-518">接著會根據所設的設定，驗證該網路介面往來的流量。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-518">Traffic flow is then verified based on the configured settings to or from that network interface.</span></span> <span data-ttu-id="5a5f7-519">這項功能可用於確認網路安全性群組中的規則是否會封鎖虛擬機器的輸入或輸出流量。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-519">This capability is useful in confirming if a rule in a Network Security Group is blocking ingress or egress traffic to or from a virtual machine.</span></span>

#### <a name="next-hop"></a><span data-ttu-id="5a5f7-520">下一個躍點</span><span class="sxs-lookup"><span data-stu-id="5a5f7-520">Next hop</span></span>

<span data-ttu-id="5a5f7-521">決定在 Azure 網路網狀架構中路由傳送之封包的[下一個躍點](https://docs.microsoft.com/azure/network-watcher/network-watcher-next-hop-overview)，讓您得以診斷任何設定錯誤的使用者定義路由。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-521">Determines the [next hop](https://docs.microsoft.com/azure/network-watcher/network-watcher-next-hop-overview) for packets being routed in the Azure Network Fabric, enabling you to diagnose any misconfigured user-defined routes.</span></span> <span data-ttu-id="5a5f7-522">來自 VM 的流量會根據與 NIC 相關聯的有效路由來傳送到目的地。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-522">Traffic from a VM is sent to a destination based on the effective routes associated with a NIC.</span></span> <span data-ttu-id="5a5f7-523">下一個躍點會從特定虛擬機器和 NIC 取得封包的下一個躍點類型和 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-523">Next hop gets the next hop type and IP address of a packet from a specific virtual machine and NIC.</span></span> <span data-ttu-id="5a5f7-524">這有助於判斷封包會被導向到目的地，還是流量會被吸收掉。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-524">This helps to determine if the packet is being directed to the destination or is the traffic being black holed.</span></span>

<span data-ttu-id="5a5f7-525">下一個躍點也會傳回與下一個躍點相關聯的路由表。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-525">Next hop also returns the route table associated with the next hop.</span></span> <span data-ttu-id="5a5f7-526">向下一個躍點查詢路由是否定義為使用者定義的路由時，便會傳回該路由。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-526">When querying a next hop if the route is defined as a user-defined route, that route will be returned.</span></span> <span data-ttu-id="5a5f7-527">否則，下一個躍點會傳回「系統路由」。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-527">Otherwise Next hop returns "System Route".</span></span>

#### <a name="security-group-view"></a><span data-ttu-id="5a5f7-528">安全性群組檢視</span><span class="sxs-lookup"><span data-stu-id="5a5f7-528">Security group view</span></span>

<span data-ttu-id="5a5f7-529">取得套用至 VM 的有效和已套用安全性規則。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-529">Gets the effective and applied security rules that are applied on a VM.</span></span> <span data-ttu-id="5a5f7-530">網路安全性群組會在子網路層級或 NIC 層級產生關聯。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-530">Network Security groups are associated at a subnet level or at a NIC level.</span></span> <span data-ttu-id="5a5f7-531">若在子網路層級產生關聯，它會套用至子網路中的所有 VM 執行個體。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-531">When associated at a subnet level, it applies to all the VM instances in the subnet.</span></span> <span data-ttu-id="5a5f7-532">網路[安全性群組檢視](https://docs.microsoft.com/azure/network-watcher/network-watcher-security-group-view-overview)會針對虛擬機器傳回所有於 NIC 和子網路層級產生關聯的已設定 NSG 和規則，提供設定的深入解析。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-532">Network [Security Group view](https://docs.microsoft.com/azure/network-watcher/network-watcher-security-group-view-overview) returns all the configured NSGs and rules that are associated at a NIC and subnet level for a virtual machine providing insight into the configuration.</span></span> <span data-ttu-id="5a5f7-533">此外，VM 中的每個 NIC 也會傳回有效的安全性規則。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-533">In addition, the effective security rules are returned for each of the NICs in a VM.</span></span> <span data-ttu-id="5a5f7-534">使用 [網路安全性群組] 檢視，您就可以評估 VM 的網路弱點，例如開啟的連接埠。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-534">Using Network Security Group view, you can assess a VM for network vulnerabilities such as open ports.</span></span> <span data-ttu-id="5a5f7-535">您也可以根據[所設定的安全性規則和有效安全性規則之間的比較](https://docs.microsoft.com/azure/network-watcher/network-watcher-nsg-auditing-powershell)，驗證網路安全性群組是否如預期般運作。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-535">You can also validate if your Network Security Group is working as expected based on a [comparison between the configured and the effective security rules](https://docs.microsoft.com/azure/network-watcher/network-watcher-nsg-auditing-powershell).</span></span>

#### <a name="nsg-flow-logging"></a><span data-ttu-id="5a5f7-536">NSG 流量記錄</span><span class="sxs-lookup"><span data-stu-id="5a5f7-536">NSG Flow logging</span></span>

 <span data-ttu-id="5a5f7-537">網路安全性群組的流量記錄可讓您擷取群組中的安全性規則所允許或拒絕之流量的相關記錄。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-537">Flow logs for Network Security Groups enable you to capture logs related to traffic that are allowed or denied by the security rules in the group.</span></span> <span data-ttu-id="5a5f7-538">流程是由 5個 Tuple 資訊定義的，這些資訊分別是來源 IP、目的地 IP、來源連接埠、目的地連接埠和通訊協定。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-538">The flow is defined by a 5-tuple information – Source IP, Destination IP, Source Port, Destination Port, and Protocol.</span></span>

<span data-ttu-id="5a5f7-539">[網路安全性群組流程記錄](https://docs.microsoft.com/azure/network-watcher/network-watcher-nsg-flow-logging-overview)是網路監看員的一項功能，可讓您檢視透過網路安全性群組輸入和輸出 IP 流量的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-539">[Network Security Group flow logs](https://docs.microsoft.com/azure/network-watcher/network-watcher-nsg-flow-logging-overview) are a feature of Network Watcher that allows you to view information about ingress and egress IP traffic through a Network Security Group.</span></span>

#### <a name="virtual-network-gateway-and-connection-troubleshooting"></a><span data-ttu-id="5a5f7-540">虛擬網路閘道和連線疑難排解</span><span class="sxs-lookup"><span data-stu-id="5a5f7-540">Virtual network gateway and connection troubleshooting</span></span>

<span data-ttu-id="5a5f7-541">網路監看員提供了許多功能，因為它的作用就是為了讓您了解您在 Azure 中的網路資源。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-541">Network Watcher provides many capabilities as it relates to understanding your network resources in Azure.</span></span> <span data-ttu-id="5a5f7-542">這些功能的其中之一便是資源疑難排解。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-542">One of these capabilities is resource troubleshooting.</span></span> <span data-ttu-id="5a5f7-543">[資源疑難排解](https://docs.microsoft.com/azure/network-watcher/network-watcher-troubleshoot-manage-rest)可透過 PowerShell、CLI 或 REST API 來呼叫。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-543">[Resource troubleshooting](https://docs.microsoft.com/azure/network-watcher/network-watcher-troubleshoot-manage-rest) can be called by PowerShell, CLI, or REST API.</span></span> <span data-ttu-id="5a5f7-544">一經呼叫，網路監看員就會檢查虛擬網路閘道或連線的健全狀況，並傳回其調查結果。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-544">When called, Network Watcher inspects the health of a Virtual Network gateway or a Connection and returns its findings.</span></span>

<span data-ttu-id="5a5f7-545">這一節會帶領您逐步完成資源疑難排解目前可用的不同管理工作。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-545">This section takes you through the different management tasks that are currently available for resource troubleshooting.</span></span>

-   [<span data-ttu-id="5a5f7-546">針對虛擬網路閘道進行疑難排解</span><span class="sxs-lookup"><span data-stu-id="5a5f7-546">Troubleshoot a Virtual Network gateway</span></span>](https://docs.microsoft.com/azure/network-watcher/network-watcher-troubleshoot-manage-rest)

-   [<span data-ttu-id="5a5f7-547">針對連線進行疑難排解</span><span class="sxs-lookup"><span data-stu-id="5a5f7-547">Troubleshoot a Connection</span></span>](https://docs.microsoft.com/azure/network-watcher/network-watcher-troubleshoot-manage-rest)

#### <a name="network-subscription-limits"></a><span data-ttu-id="5a5f7-548">網路訂用帳戶限制</span><span class="sxs-lookup"><span data-stu-id="5a5f7-548">Network subscription limits</span></span>

<span data-ttu-id="5a5f7-549">[網路訂用帳戶限制](https://docs.microsoft.com/azure/network-watcher/network-watcher-monitoring-overview)可為您提供區域中，訂用帳戶的每個網路資源使用量詳細資料與可用資源數上限的對照情況。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-549">[Network subscription limits](https://docs.microsoft.com/azure/network-watcher/network-watcher-monitoring-overview) provide you with details of the usage of each of the network resource in a subscription in a region against the maximum number of resources available.</span></span>

#### <a name="configuring-diagnostics-log"></a><span data-ttu-id="5a5f7-550">設定診斷記錄</span><span class="sxs-lookup"><span data-stu-id="5a5f7-550">Configuring diagnostics Log</span></span>

<span data-ttu-id="5a5f7-551">網路監看員提供[診斷記錄](https://docs.microsoft.com/azure/network-watcher/network-watcher-monitoring-overview)檢視。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-551">Network Watcher provides a [diagnostic logs](https://docs.microsoft.com/azure/network-watcher/network-watcher-monitoring-overview) view.</span></span> <span data-ttu-id="5a5f7-552">此檢視包含所有支援診斷記錄的網路資源。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-552">This view contains all networking resources that support diagnostic logging.</span></span> <span data-ttu-id="5a5f7-553">從這個檢視中，您可以方便且快速地啟用和停用網路資源。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-553">From this view, you can enable and disable networking resources conveniently and quickly.</span></span>

### <a name="network-resource-level-monitoring"></a><span data-ttu-id="5a5f7-554">網路資源層級監視</span><span class="sxs-lookup"><span data-stu-id="5a5f7-554">Network resource level monitoring</span></span>

<span data-ttu-id="5a5f7-555">資源層級監視可使用下列功能︰</span><span class="sxs-lookup"><span data-stu-id="5a5f7-555">The following features are available for resource level monitoring:</span></span>

#### <a name="audit-log"></a><span data-ttu-id="5a5f7-556">稽核記錄檔</span><span class="sxs-lookup"><span data-stu-id="5a5f7-556">Audit log</span></span>

<span data-ttu-id="5a5f7-557">做為網路組態一部分所執行的作業會記錄下來。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-557">Operations performed as part of the configuration of networks are logged.</span></span> <span data-ttu-id="5a5f7-558">這些稽核記錄是建立各種合規性的必備項目。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-558">These audit logs are essential to establish various compliances.</span></span> <span data-ttu-id="5a5f7-559">這些記錄可在 Azure 入口網站中檢視，或使用 Power BI 之類的 Microsoft 工具或協力廠商工具來擷取。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-559">These logs can be viewed in the Azure portal or retrieved using Microsoft tools such as Power BI or third-party tools.</span></span> <span data-ttu-id="5a5f7-560">稽核記錄可透過入口網站、PowerShell、CLI 和 Rest API 來取得。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-560">Audit logs are available through the portal, PowerShell, CLI, and Rest API.</span></span>

> [!Note]
> <span data-ttu-id="5a5f7-561">如需稽核記錄的詳細資訊，請參閱[使用 Resource Manager 來稽核作業](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-audit)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-561">For more information on Audit logs, see [Audit operations with Resource Manager](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-audit).</span></span>
<span data-ttu-id="5a5f7-562">針對所有網路資源所進行的作業都會有稽核記錄。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-562">Audit logs are available for operations done on all network resources.</span></span>


#### <a name="metrics"></a><span data-ttu-id="5a5f7-563">度量</span><span class="sxs-lookup"><span data-stu-id="5a5f7-563">Metrics</span></span>

<span data-ttu-id="5a5f7-564">計量是在一段時間內所收集到的效能測量數據和計數器。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-564">Metrics are performance measurements and counters collected over a period.</span></span> <span data-ttu-id="5a5f7-565">計量目前適用於應用程式閘道。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-565">Metrics are currently available for Application Gateway.</span></span> <span data-ttu-id="5a5f7-566">計量可用來根據臨界值觸發警示。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-566">Metrics can be used to trigger alerts based on threshold.</span></span> <span data-ttu-id="5a5f7-567">Azure 應用程式閘道預設會監視其後端集區中所有資源的健康狀況，並自動從集區中移除任何被視為狀況不良的資源。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-567">Azure Application Gateway by default monitors the health of all resources in its back-end pool and automatically removes any resource considered unhealthy from the pool.</span></span> <span data-ttu-id="5a5f7-568">應用程式閘道會繼續監視狀況不良的執行個體，一旦其恢復可用狀態並回應健康狀況探查，就會將其新增回狀況良好後端集區中。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-568">Application Gateway continues to monitor the unhealthy instances and adds them back to the healthy back-end pool once they become available and respond to health probes.</span></span> <span data-ttu-id="5a5f7-569">應用程式閘道會以後端 HTTP 設定中定義的相同連接埠傳送健康狀態探查。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-569">Application gateway sends the health probes with the same port that is defined in the back-end HTTP settings.</span></span> <span data-ttu-id="5a5f7-570">此組態可確保探查所測試的連接埠會和客戶用來連接到後端的連接埠相同。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-570">This configuration ensures that the probe is testing the same port that customers would be using to connect to the backend.</span></span>

> [!Note]
> <span data-ttu-id="5a5f7-571">請參閱[應用程式閘道診斷](https://docs.microsoft.com/azure/application-gateway/application-gateway-probe-overview)，以檢視如何使用計量來建立警示。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-571">See [Application Gateway Diagnostics](https://docs.microsoft.com/azure/application-gateway/application-gateway-probe-overview) to view how metrics can be used to create alerts.</span></span>

#### <a name="diagnostic-logs"></a><span data-ttu-id="5a5f7-572">診斷記錄</span><span class="sxs-lookup"><span data-stu-id="5a5f7-572">Diagnostic logs</span></span>

<span data-ttu-id="5a5f7-573">網路資源會定期和自發地建立事件，並記錄到儲存體帳戶、傳送到事件中樞或 Log Analytics。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-573">Periodic and spontaneous events are created by network resources and logged in storage accounts, sent to an Event Hub, or Log Analytics.</span></span> <span data-ttu-id="5a5f7-574">這些記錄可讓您深入了解資源的健全狀況。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-574">These logs provide insights into the health of a resource.</span></span> <span data-ttu-id="5a5f7-575">您可以在 Power BI 和 Log Analytics 等工具中檢視這些記錄。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-575">These logs can be viewed in tools such as Power BI and Log Analytics.</span></span> <span data-ttu-id="5a5f7-576">若要了解如何檢視診斷記錄，請瀏覽 [Log Analytics](https://docs.microsoft.com/azure/log-analytics/log-analytics-azure-networking-analytics)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-576">To learn how to view diagnostic logs, visit [Log Analytics](https://docs.microsoft.com/azure/log-analytics/log-analytics-azure-networking-analytics).</span></span>

<span data-ttu-id="5a5f7-577">診斷記錄適用於[負載平衡器](https://docs.microsoft.com/azure/load-balancer/load-balancer-monitor-log)、[網路安全性群組](https://docs.microsoft.com/azure/virtual-network/virtual-network-nsg-manage-log)、路由和[應用程式閘道](https://docs.microsoft.com/azure/application-gateway/application-gateway-diagnostics)。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-577">Diagnostic logs are available for [Load Balancer](https://docs.microsoft.com/azure/load-balancer/load-balancer-monitor-log), [Network Security Groups](https://docs.microsoft.com/azure/virtual-network/virtual-network-nsg-manage-log), Routes, and [Application Gateway](https://docs.microsoft.com/azure/application-gateway/application-gateway-diagnostics).</span></span>

<span data-ttu-id="5a5f7-578">網路監看員提供診斷記錄檢視。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-578">Network Watcher provides a diagnostic logs view.</span></span> <span data-ttu-id="5a5f7-579">此檢視包含所有支援診斷記錄的網路資源。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-579">This view contains all networking resources that support diagnostic logging.</span></span> <span data-ttu-id="5a5f7-580">從這個檢視中，您可以方便且快速地啟用和停用網路資源。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-580">From this view, you can enable and disable networking resources conveniently and quickly.</span></span>

### <a name="log-analytics"></a><span data-ttu-id="5a5f7-581">Log Analytics</span><span class="sxs-lookup"><span data-stu-id="5a5f7-581">Log analytics</span></span>

<span data-ttu-id="5a5f7-582">[Log Analytics](https://docs.microsoft.com/azure/log-analytics/log-analytics-overview) 是 [Operations Management Suite (OMS)](https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-overview) 中的一項服務，可監視您的雲端和內部部署環境，以維護其可用性和效能。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-582">[Log Analytics](https://docs.microsoft.com/azure/log-analytics/log-analytics-overview) is a service in [Operations Management Suite (OMS)](https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-overview) that monitors your cloud and on-premises environments to maintain their availability and performance.</span></span> <span data-ttu-id="5a5f7-583">它會收集您的雲端和內部部署環境中的資源所產生的資料，以及從其他監視工具提供橫跨多個來源的分析。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-583">It collects data generated by resources in your cloud and on-premises environments and from other monitoring tools to provide analysis across multiple sources.</span></span>

<span data-ttu-id="5a5f7-584">Log Analytics 提供下列解決方案來監視您的網路︰</span><span class="sxs-lookup"><span data-stu-id="5a5f7-584">Log Analytics offers the following solutions for monitoring your networks:</span></span>

-   <span data-ttu-id="5a5f7-585">網路效能監視器 (NPM)</span><span class="sxs-lookup"><span data-stu-id="5a5f7-585">Network Performance Monitor (NPM)</span></span>

-   <span data-ttu-id="5a5f7-586">Azure 應用程式閘道分析</span><span class="sxs-lookup"><span data-stu-id="5a5f7-586">Azure Application Gateway analytics</span></span>

-   <span data-ttu-id="5a5f7-587">Azure 網路安全性群組分析</span><span class="sxs-lookup"><span data-stu-id="5a5f7-587">Azure Network Security Group analytics</span></span>

#### <a name="network-performance-monitor-npm"></a><span data-ttu-id="5a5f7-588">網路效能監視器 (NPM)</span><span class="sxs-lookup"><span data-stu-id="5a5f7-588">Network performance monitor (NPM)</span></span>
<span data-ttu-id="5a5f7-589">[網路效能監視器](https://docs.microsoft.com/azure/log-analytics/log-analytics-network-performance-monitor)管理解決方案是網路監視解決方案，可監視網路的健康狀態、可用性和連線能力。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-589">The [Network Performance Monitor](https://docs.microsoft.com/azure/log-analytics/log-analytics-network-performance-monitor) management solution is a network monitoring  solution that monitors the health, availability, and reachability of networks.</span></span>

<span data-ttu-id="5a5f7-590">可用來監視下列項目之間的連線能力︰</span><span class="sxs-lookup"><span data-stu-id="5a5f7-590">It is used to monitor connectivity between:</span></span>

-   <span data-ttu-id="5a5f7-591">公用雲端與內部部署環境</span><span class="sxs-lookup"><span data-stu-id="5a5f7-591">public cloud and on-premises</span></span>

-   <span data-ttu-id="5a5f7-592">資料中心與使用者地點 (分公司)</span><span class="sxs-lookup"><span data-stu-id="5a5f7-592">data centers and user locations (branch offices)</span></span>

-   <span data-ttu-id="5a5f7-593">裝載各種多層式應用程式的子網路。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-593">subnets hosting various tiers of a multi-tiered application.</span></span>


#### <a name="azure-application-gateway-analytics-in-log-analytics"></a><span data-ttu-id="5a5f7-594">Log Analytics 中的 Azure 應用程式閘道分析</span><span class="sxs-lookup"><span data-stu-id="5a5f7-594">Azure application gateway analytics in log analytics</span></span>

<span data-ttu-id="5a5f7-595">應用程式閘道支援下列記錄︰</span><span class="sxs-lookup"><span data-stu-id="5a5f7-595">The following logs are supported for Application Gateways:</span></span>

-   <span data-ttu-id="5a5f7-596">ApplicationGatewayAccessLog</span><span class="sxs-lookup"><span data-stu-id="5a5f7-596">ApplicationGatewayAccessLog</span></span>

-   <span data-ttu-id="5a5f7-597">ApplicationGatewayPerformanceLog</span><span class="sxs-lookup"><span data-stu-id="5a5f7-597">ApplicationGatewayPerformanceLog</span></span>

-   <span data-ttu-id="5a5f7-598">ApplicationGatewayFirewallLog</span><span class="sxs-lookup"><span data-stu-id="5a5f7-598">ApplicationGatewayFirewallLog</span></span>

<span data-ttu-id="5a5f7-599">應用程式閘道支援下列度量︰</span><span class="sxs-lookup"><span data-stu-id="5a5f7-599">The following metrics are supported for Application Gateways:</span></span>

-   <span data-ttu-id="5a5f7-600">5 分鐘輸送量</span><span class="sxs-lookup"><span data-stu-id="5a5f7-600">5-minute throughput</span></span>

#### <a name="azure-network-security-group-analytics-in-log-analytics"></a><span data-ttu-id="5a5f7-601">Log Analytics 中的 Azure 網路安全性群組分析</span><span class="sxs-lookup"><span data-stu-id="5a5f7-601">Azure network security group analytics in log analytics</span></span>

<span data-ttu-id="5a5f7-602">[網路安全性群組](https://docs.microsoft.com/azure/virtual-network/virtual-network-nsg-manage-log)支援下列記錄︰</span><span class="sxs-lookup"><span data-stu-id="5a5f7-602">The following logs are supported for [network security groups](https://docs.microsoft.com/azure/virtual-network/virtual-network-nsg-manage-log):</span></span>

- <span data-ttu-id="5a5f7-603">**NetworkSecurityGroupEvent：**包含要將 NSG 規則套用到以 MAC 位址為基礎的 VM 和執行個體角色的項目。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-603">**NetworkSecurityGroupEvent:** Contains entries for which NSG rules are applied to VMs and instance roles based on MAC address.</span></span> <span data-ttu-id="5a5f7-604">每隔 60 秒會收集一次這些規則的狀態。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-604">The status for these rules is collected every 60 seconds.</span></span>

- <span data-ttu-id="5a5f7-605">**NetworkSecurityGroupRuleCounter：**包含套用每個 NSG 規則以拒絕或允許流量之次數的項目。</span><span class="sxs-lookup"><span data-stu-id="5a5f7-605">**NetworkSecurityGroupRuleCounter:** Contains entries for how many times each NSG rule is applied to deny or allow traffic.</span></span>

## <a name="next-steps"></a><span data-ttu-id="5a5f7-606">後續步驟</span><span class="sxs-lookup"><span data-stu-id="5a5f7-606">Next steps</span></span>
<span data-ttu-id="5a5f7-607">閱讀一些有深度的安全性主題，以深入了解安全性：</span><span class="sxs-lookup"><span data-stu-id="5a5f7-607">Find out more about security by reading some of our in-depth security topics:</span></span>

-   [<span data-ttu-id="5a5f7-608">網路安全性群組 (NSG) 的 Log Analytics</span><span class="sxs-lookup"><span data-stu-id="5a5f7-608">Log Analytics for Network Security Groups (NSGs)</span></span>](https://docs.microsoft.com/azure/virtual-network/virtual-network-nsg-manage-log)

-   [<span data-ttu-id="5a5f7-609">驅動雲端中斷的網路創新功能</span><span class="sxs-lookup"><span data-stu-id="5a5f7-609">Networking innovations that drive the cloud disruption</span></span>](https://azure.microsoft.com/blog/networking-innovations-that-drive-the-cloud-disruption/)

-   [<span data-ttu-id="5a5f7-610">SONiC：Microsoft Global Cloud 支援的網路切換軟體</span><span class="sxs-lookup"><span data-stu-id="5a5f7-610">SONiC: The networking switch software that powers the Microsoft Global Cloud</span></span>](https://azure.microsoft.com/blog/sonic-the-networking-switch-software-that-powers-the-microsoft-global-cloud/)

-   [<span data-ttu-id="5a5f7-611">Microsoft 建置其快速且可靠全域網路的方式</span><span class="sxs-lookup"><span data-stu-id="5a5f7-611">How Microsoft builds its fast and reliable global network</span></span>](https://azure.microsoft.com/blog/how-microsoft-builds-its-fast-and-reliable-global-network/)

-   [<span data-ttu-id="5a5f7-612">點燃網路創新</span><span class="sxs-lookup"><span data-stu-id="5a5f7-612">Lighting up network innovation</span></span>](https://azure.microsoft.com/blog/lighting-up-network-innovation/)
