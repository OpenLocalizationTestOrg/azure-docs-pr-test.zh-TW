---
title: "aaaAzure 負載平衡器概觀 |Microsoft 文件"
description: "Azure 負載平衡器功能、架構和實作的概觀。 了解 hello 負載平衡器的運作方式，利用 hello 雲端中。"
services: load-balancer
documentationcenter: na
author: kumudd
manager: timlt
editor: 
ms.assetid: 0f313dc0-f007-4cee-b2b9-f542357925a3
ms.service: load-balancer
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/24/2016
ms.author: kumud
ms.openlocfilehash: 2376a02f7cbbbed6a90f216419c0c3d30f594272
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="azure-load-balancer-overview"></a><span data-ttu-id="56c93-104">Azure 負載平衡器概觀</span><span class="sxs-lookup"><span data-stu-id="56c93-104">Azure Load Balancer overview</span></span>

<span data-ttu-id="56c93-105">Azure 負載平衡器提供高可用性和網路效能 tooyour 應用程式。</span><span class="sxs-lookup"><span data-stu-id="56c93-105">Azure Load Balancer delivers high availability and network performance tooyour applications.</span></span> <span data-ttu-id="56c93-106">這是 Layer 4 (TCP、UDP) 負載平衡器，可將連入流量分配到負載平衡集中所定義服務的狀況良好執行個體。</span><span class="sxs-lookup"><span data-stu-id="56c93-106">It is a Layer 4 (TCP, UDP) load balancer that distributes incoming traffic among healthy instances of services defined in a load-balanced set.</span></span>

<span data-ttu-id="56c93-107">Azure Load Balancer 可以設定為：</span><span class="sxs-lookup"><span data-stu-id="56c93-107">Azure Load Balancer can be configured to:</span></span>

* <span data-ttu-id="56c93-108">負載平衡連入網際網路流量 toovirtual 機器。</span><span class="sxs-lookup"><span data-stu-id="56c93-108">Load balance incoming Internet traffic toovirtual machines.</span></span> <span data-ttu-id="56c93-109">這個組態稱為 [網際網路面向的負載平衡](load-balancer-internet-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="56c93-109">This configuration is known as [Internet-facing load balancing](load-balancer-internet-overview.md).</span></span>
* <span data-ttu-id="56c93-110">平衡虛擬網路中的虛擬機器之間、雲端服務中的虛擬機器之間，或內部部署電腦與跨單位部署虛擬網路中的虛擬機器之間的流量負載。</span><span class="sxs-lookup"><span data-stu-id="56c93-110">Load balance traffic between virtual machines in a virtual network, between virtual machines in cloud services, or between on-premises computers and virtual machines in a cross-premises virtual network.</span></span> <span data-ttu-id="56c93-111">這個組態稱為 [內部負載平衡](load-balancer-internal-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="56c93-111">This configuration is known as [internal load balancing](load-balancer-internal-overview.md).</span></span>
* <span data-ttu-id="56c93-112">將外部流量 tooa 特定虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="56c93-112">Forward external traffic tooa specific virtual machine.</span></span>

<span data-ttu-id="56c93-113">Hello 雲端中的所有資源都必須公開的 IP 位址 toobe hello 網際網路從可以連線。</span><span class="sxs-lookup"><span data-stu-id="56c93-113">All resources in hello cloud need a public IP address toobe reachable from hello Internet.</span></span> <span data-ttu-id="56c93-114">在 Azure 中的 hello 雲端基礎結構會使用其資源的非路由的 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="56c93-114">hello cloud infrastructure in Azure uses non-routable IP addresses for its resources.</span></span> <span data-ttu-id="56c93-115">Azure 會使用公用 IP 位址 toocommunicate toohello 網際網路的網路位址轉譯 (NAT)。</span><span class="sxs-lookup"><span data-stu-id="56c93-115">Azure uses network address translation (NAT) with public IP addresses toocommunicate toohello Internet.</span></span>

## <a name="azure-deployment-models"></a><span data-ttu-id="56c93-116">Azure 部署模型</span><span class="sxs-lookup"><span data-stu-id="56c93-116">Azure deployment models</span></span>

<span data-ttu-id="56c93-117">它是 hello 傳統的 Azure 資源管理員之間的重要 toounderstand hello 差異[部署模型](../azure-resource-manager/resource-manager-deployment-model.md)。</span><span class="sxs-lookup"><span data-stu-id="56c93-117">It's important toounderstand hello differences between hello Azure classic and Resource Manager [deployment models](../azure-resource-manager/resource-manager-deployment-model.md).</span></span> <span data-ttu-id="56c93-118">每個模型中設定 Azure Load Balancer 的方式均不同。</span><span class="sxs-lookup"><span data-stu-id="56c93-118">Azure Load Balancer is configured differently in each model.</span></span>

### <a name="azure-classic-deployment-model"></a><span data-ttu-id="56c93-119">Azure 傳統部署模型</span><span class="sxs-lookup"><span data-stu-id="56c93-119">Azure classic deployment model</span></span>

<span data-ttu-id="56c93-120">部署雲端服務界限內的虛擬機器可以是群組的 toouse 負載平衡器。</span><span class="sxs-lookup"><span data-stu-id="56c93-120">Virtual machines deployed within a cloud service boundary can be grouped toouse a load balancer.</span></span> <span data-ttu-id="56c93-121">在此模型的公用 IP 位址和完整網域名稱、 (FQDN) 指派 tooa 雲端服務。</span><span class="sxs-lookup"><span data-stu-id="56c93-121">In this model a public IP address and a Fully Qualified Domain Name, (FQDN) are assigned tooa cloud service.</span></span> <span data-ttu-id="56c93-122">hello 負載平衡器進行連接埠轉譯和負載平衡 hello 網路流量利用 hello 雲端服務的 hello 公用 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="56c93-122">hello load balancer does port translation and load balances hello network traffic by using hello public IP address for hello cloud service.</span></span>

<span data-ttu-id="56c93-123">負載平衡的流量是由端點所定義。</span><span class="sxs-lookup"><span data-stu-id="56c93-123">Load-balanced traffic is defined by endpoints.</span></span> <span data-ttu-id="56c93-124">連接埠轉譯端點具有 hello 公用指派連接埠的 hello 公用 IP 位址和 hello 分派 toohello 服務特定的虛擬機器上的本機連接埠之間的一對一關聯性。</span><span class="sxs-lookup"><span data-stu-id="56c93-124">Port translation endpoints have a one-to-one relationship between hello public-assigned port of hello public IP address and hello local port assigned toohello service on a specific virtual machine.</span></span> <span data-ttu-id="56c93-125">負載平衡端點 hello hello 雲端服務中的虛擬機器上有 hello 公用 IP 位址與 hello 分派的本機連接埠 toohello 服務之間的一對多關聯性。</span><span class="sxs-lookup"><span data-stu-id="56c93-125">Load balancing endpoints have a one-to-many relationship between hello public IP address and hello local ports assigned toohello services on hello virtual machines in hello cloud service.</span></span>

![Hello 傳統部署模型中的 azure 負載平衡器](./media/load-balancer-overview/asm-lb.png)

<span data-ttu-id="56c93-127">圖 1-hello 傳統部署模型中的 Azure 負載平衡器</span><span class="sxs-lookup"><span data-stu-id="56c93-127">Figure 1 - Azure Load Balancer in hello classic deployment model</span></span>

<span data-ttu-id="56c93-128">hello hello 公用 IP 位址，hello 這種部署模型的負載平衡器使用的網域標籤是\<雲端服務名稱\>。.cloudapp.net。</span><span class="sxs-lookup"><span data-stu-id="56c93-128">hello domain label for hello public IP address that hello load balancer uses for this deployment model is \<cloud service name\>.cloudapp.net.</span></span> <span data-ttu-id="56c93-129">hello 下圖顯示 hello Azure 負載平衡器在此模型中。</span><span class="sxs-lookup"><span data-stu-id="56c93-129">hello following graphic shows hello Azure Load Balancer in this model.</span></span>

### <a name="azure-resource-manager-deployment-model"></a><span data-ttu-id="56c93-130">Azure Resource Manager 部署模型</span><span class="sxs-lookup"><span data-stu-id="56c93-130">Azure Resource Manager deployment model</span></span>

<span data-ttu-id="56c93-131">在 hello Resource Manager 部署模型沒有任何需要 toocreate 雲端服務。</span><span class="sxs-lookup"><span data-stu-id="56c93-131">In hello Resource Manager deployment model there is no need toocreate a Cloud service.</span></span> <span data-ttu-id="56c93-132">hello 負載平衡器會建立多個虛擬機器之間分配 tooexplicitly 路由傳送流量。</span><span class="sxs-lookup"><span data-stu-id="56c93-132">hello load balancer is created tooexplicitly route traffic among multiple virtual machines.</span></span>

<span data-ttu-id="56c93-133">公用 IP 位址是具有網域標籤 (DNS 名稱) 的個別資源。</span><span class="sxs-lookup"><span data-stu-id="56c93-133">A public IP address is an individual resource that has a domain label (DNS name).</span></span> <span data-ttu-id="56c93-134">hello 公用 IP 位址是與 hello 負載平衡器資源相關聯。</span><span class="sxs-lookup"><span data-stu-id="56c93-134">hello public IP address is associated with hello load balancer resource.</span></span> <span data-ttu-id="56c93-135">負載平衡器規則與輸入的 NAT 規則做為公用 IP 位址 hello hello 網際網路端點會接收負載平衡網路流量的 hello 資源。</span><span class="sxs-lookup"><span data-stu-id="56c93-135">Load balancer rules and inbound NAT rules use hello public IP address as hello Internet endpoint for hello resources that are receiving load-balanced network traffic.</span></span>

<span data-ttu-id="56c93-136">私用或公用 IP 位址會指派 toohello 網路介面資源附加 tooa 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="56c93-136">A private or public IP address is assigned toohello network interface resource attached tooa virtual machine.</span></span> <span data-ttu-id="56c93-137">網路介面，加入之後 tooa 負載平衡器後端 IP 位址集區 hello 負載平衡器是可以 toosend 負載平衡網路流量根據 hello 負載平衡規則所建立的。</span><span class="sxs-lookup"><span data-stu-id="56c93-137">Once a network interface is added tooa load balancer's back-end IP address pool, hello load balancer is able toosend load-balanced network traffic based on hello load-balanced rules that are created.</span></span>

<span data-ttu-id="56c93-138">hello 下圖顯示 hello Azure 負載平衡器在此模型中：</span><span class="sxs-lookup"><span data-stu-id="56c93-138">hello following graphic shows hello Azure Load Balancer in this model:</span></span>

![Resource Manager 中的 Azure Load Balancer](./media/load-balancer-overview/arm-lb.png)

<span data-ttu-id="56c93-140">圖 2 - Resource Manager 中的 Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="56c93-140">Figure 2 - Azure Load Balancer in Resource Manager</span></span>

<span data-ttu-id="56c93-141">hello 負載平衡器可透過資源管理員為基礎的範本、 Api 和工具進行管理。</span><span class="sxs-lookup"><span data-stu-id="56c93-141">hello load balancer can be managed through Resource Manager-based templates, APIs, and tools.</span></span> <span data-ttu-id="56c93-142">toolearn 更多有關資源管理員，請參閱 hello[資源管理員概觀](../azure-resource-manager/resource-group-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="56c93-142">toolearn more about Resource Manager, see hello [Resource Manager overview](../azure-resource-manager/resource-group-overview.md).</span></span>

## <a name="load-balancer-features"></a><span data-ttu-id="56c93-143">負載平衡器功能</span><span class="sxs-lookup"><span data-stu-id="56c93-143">Load Balancer features</span></span>

* <span data-ttu-id="56c93-144">雜湊型分散</span><span class="sxs-lookup"><span data-stu-id="56c93-144">Hash-based distribution</span></span>

    <span data-ttu-id="56c93-145">Azure 負載平衡器會使用雜湊型分散演算法。</span><span class="sxs-lookup"><span data-stu-id="56c93-145">Azure Load Balancer uses a hash-based distribution algorithm.</span></span> <span data-ttu-id="56c93-146">根據預設，它會使用來源 IP、 來源連接埠、 目的地 IP、 目的地連接埠和通訊協定類型 toomap 流量 tooavailable 伺服器組成的 5 個 tuple 雜湊。</span><span class="sxs-lookup"><span data-stu-id="56c93-146">By default, it uses a 5-tuple hash composed of source IP, source port, destination IP, destination port, and protocol type toomap traffic tooavailable servers.</span></span> <span data-ttu-id="56c93-147">它只在傳輸工作階段「內」  提供綁定。</span><span class="sxs-lookup"><span data-stu-id="56c93-147">It provides stickiness only *within* a transport session.</span></span> <span data-ttu-id="56c93-148">在相同的 TCP 或 UDP 工作階段將為的 hello 封包導向的 toohello 相同 hello 負載平衡端點之後的執行個體。</span><span class="sxs-lookup"><span data-stu-id="56c93-148">Packets in hello same TCP or UDP session will be directed toohello same instance behind hello load-balanced endpoint.</span></span> <span data-ttu-id="56c93-149">Hello 用戶端關閉並重新開啟 hello 連接或啟動從新的工作階段時 hello 相同的來源 IP，hello 來源連接埠變更。</span><span class="sxs-lookup"><span data-stu-id="56c93-149">When hello client closes and reopens hello connection or starts a new session from hello same source IP, hello source port changes.</span></span> <span data-ttu-id="56c93-150">這可能會造成不同的資料中心 hello 流量 toogo tooa 不同端點。</span><span class="sxs-lookup"><span data-stu-id="56c93-150">This may cause hello traffic toogo tooa different endpoint in a different datacenter.</span></span>

    <span data-ttu-id="56c93-151">如需詳細資訊，請參閱 [分負載平衡器配模式](load-balancer-distribution-mode.md)。</span><span class="sxs-lookup"><span data-stu-id="56c93-151">For more details, see [Load balancer distribution mode](load-balancer-distribution-mode.md).</span></span> <span data-ttu-id="56c93-152">hello 下圖顯示 hello 雜湊為基礎的發佈：</span><span class="sxs-lookup"><span data-stu-id="56c93-152">hello following graphic shows hello hash-based distribution:</span></span>

    ![雜湊型分散](./media/load-balancer-overview/load-balancer-distribution.png)

    <span data-ttu-id="56c93-154">圖 3 - 雜湊型分配</span><span class="sxs-lookup"><span data-stu-id="56c93-154">Figure 3 - Hash based distribution</span></span>

* <span data-ttu-id="56c93-155">連接埠轉送</span><span class="sxs-lookup"><span data-stu-id="56c93-155">Port forwarding</span></span>

    <span data-ttu-id="56c93-156">Azure 負載平衡器可供您控制如何管理輸入通訊。</span><span class="sxs-lookup"><span data-stu-id="56c93-156">Azure Load Balancer gives you control over how inbound communication is managed.</span></span> <span data-ttu-id="56c93-157">此通訊包括從網際網路主機、其他雲端服務中的虛擬機器，或虛擬網路起始的流量。</span><span class="sxs-lookup"><span data-stu-id="56c93-157">This communication includes traffic initiated from Internet hosts, virtual machines in other cloud services, or virtual networks.</span></span> <span data-ttu-id="56c93-158">此控制項是以端點 (也稱為輸入端點) 表示。</span><span class="sxs-lookup"><span data-stu-id="56c93-158">This control is represented by an endpoint (also called an input endpoint).</span></span>

    <span data-ttu-id="56c93-159">輸入的端點公用連接埠上接聽，並將流量轉送 tooan 內部連接埠。</span><span class="sxs-lookup"><span data-stu-id="56c93-159">An input endpoint listens on a public port and forwards traffic tooan internal port.</span></span> <span data-ttu-id="56c93-160">您可以對應的內部或外部端點的連接埠相同的 hello 或使用不同的通訊埠。</span><span class="sxs-lookup"><span data-stu-id="56c93-160">You can map hello same ports for an internal or external endpoint or use a different port for them.</span></span> <span data-ttu-id="56c93-161">例如，您可以有 web 伺服器設定 toolisten tooport 81 hello 公用端點對應時通訊埠 80。</span><span class="sxs-lookup"><span data-stu-id="56c93-161">For example, you can have a web server configured toolisten tooport 81 while hello public endpoint mapping is port 80.</span></span> <span data-ttu-id="56c93-162">建立公用端點 hello 觸發 hello 建立負載平衡器執行個體。</span><span class="sxs-lookup"><span data-stu-id="56c93-162">hello creation of a public endpoint triggers hello creation of a load balancer instance.</span></span>

    <span data-ttu-id="56c93-163">建立使用 hello Azure 入口網站，hello 入口網站會自動建立端點 toohello 虛擬機器的遠端桌面通訊協定 (RDP) hello 和遠端 Windows PowerShell 工作階段流量。</span><span class="sxs-lookup"><span data-stu-id="56c93-163">When created using hello Azure portal, hello portal automatically creates endpoints toohello virtual machine for hello Remote Desktop Protocol (RDP) and remote Windows PowerShell session traffic.</span></span> <span data-ttu-id="56c93-164">您可以使用這些端點 tooremotely 透過 hello 網際網路管理 hello 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="56c93-164">You can use these endpoints tooremotely administer hello virtual machine over hello Internet.</span></span>

* <span data-ttu-id="56c93-165">自動重新設定</span><span class="sxs-lookup"><span data-stu-id="56c93-165">Automatic reconfiguration</span></span>

    <span data-ttu-id="56c93-166">當您相應增加或減少執行個體時，Azure 負載平衡器本身會立即重新設定。</span><span class="sxs-lookup"><span data-stu-id="56c93-166">Azure Load Balancer instantly reconfigures itself when you scale instances up or down.</span></span> <span data-ttu-id="56c93-167">比方說，也會重新設定時不會增加 hello 的雲端服務中的 web/背景工作角色執行個體計數，或當您將其他虛擬機器新增至 hello 相同負載平衡設定。</span><span class="sxs-lookup"><span data-stu-id="56c93-167">For example, this reconfiguration happens when you increase hello instance count for web/worker roles in a cloud service or when you add additional virtual machines into hello same load-balanced set.</span></span>

* <span data-ttu-id="56c93-168">服務監視</span><span class="sxs-lookup"><span data-stu-id="56c93-168">Service monitoring</span></span>

    <span data-ttu-id="56c93-169">不同的伺服器執行個體時，azure 負載平衡器可以探查 hello hello 健全狀況。</span><span class="sxs-lookup"><span data-stu-id="56c93-169">Azure Load Balancer can probe hello health of hello various server instances.</span></span> <span data-ttu-id="56c93-170">當探查失敗 toorespond 時，hello 負載平衡器會停止傳送新的連線 toohello 狀況不良的執行個體。</span><span class="sxs-lookup"><span data-stu-id="56c93-170">When a probe fails toorespond, hello load balancer stops sending new connections toohello unhealthy instances.</span></span> <span data-ttu-id="56c93-171">現有的連線不受影響。</span><span class="sxs-lookup"><span data-stu-id="56c93-171">Existing connections are not impacted.</span></span>

    <span data-ttu-id="56c93-172">支援的探查類型有三種：</span><span class="sxs-lookup"><span data-stu-id="56c93-172">Three types of probes are supported:</span></span>

    + <span data-ttu-id="56c93-173">**（在平台做為服務僅限虛擬機器） 上的客體代理程式探查：** hello 負載平衡器會利用 hello hello 虛擬機器內的客體代理程式。</span><span class="sxs-lookup"><span data-stu-id="56c93-173">**Guest agent probe (on Platform as a Service Virtual Machines only):** hello load balancer utilizes hello guest agent inside hello virtual machine.</span></span> <span data-ttu-id="56c93-174">hello 客體代理程式會接聽並回應 HTTP 200 OK 回應時，才 hello 執行個體處於 hello 就緒狀態 （亦即 hello 執行個體不處於像是忙碌、 回收或停止）。</span><span class="sxs-lookup"><span data-stu-id="56c93-174">hello guest agent listens and responds with an HTTP 200 OK response only when hello instance is in hello ready state (i.e. hello instance is not in a state like busy, recycling, or stopping).</span></span> <span data-ttu-id="56c93-175">如果 hello 代理程式無法與 HTTP 200 OK toorespond，hello 負載平衡器標記 hello 為沒有回應的執行個體和停止傳送流量 toothat 執行個體。</span><span class="sxs-lookup"><span data-stu-id="56c93-175">If hello agent fails toorespond with an HTTP 200 OK, hello load balancer marks hello instance as unresponsive and stops sending traffic toothat instance.</span></span> <span data-ttu-id="56c93-176">hello 負載平衡器會繼續 tooping hello 執行個體。</span><span class="sxs-lookup"><span data-stu-id="56c93-176">hello load balancer continues tooping hello instance.</span></span> <span data-ttu-id="56c93-177">如果 hello 客體代理程式回應 HTTP 200，hello 負載平衡器就會再次傳送流量 toothat 執行個體。</span><span class="sxs-lookup"><span data-stu-id="56c93-177">If hello guest agent responds with an HTTP 200, hello load balancer will send traffic toothat instance again.</span></span> <span data-ttu-id="56c93-178">當您使用 web 角色時，您的網站程式碼通常會執行的 w3wp.exe，不會監視 hello Azure 網狀架構或客體代理程式。</span><span class="sxs-lookup"><span data-stu-id="56c93-178">When you're using a web role, your website code typically runs in w3wp.exe, which is not monitored by hello Azure fabric or guest agent.</span></span> <span data-ttu-id="56c93-179">這表示 （例如 HTTP 500 回應） 的 w3wp.exe 中失敗將不會報告的 toohello 客體代理程式，，和 hello 負載平衡器將不會知道 tootake 該執行個體退出循環。</span><span class="sxs-lookup"><span data-stu-id="56c93-179">This means that failures in w3wp.exe (e.g. HTTP 500 responses) will not be reported toohello guest agent, and hello load balancer will not know tootake that instance out of rotation.</span></span>
    + <span data-ttu-id="56c93-180">**自訂的 HTTP 探查：**此探查會覆寫 hello 預設 （客體代理程式） 探查。</span><span class="sxs-lookup"><span data-stu-id="56c93-180">**HTTP custom probe:** This probe overrides hello default (guest agent) probe.</span></span> <span data-ttu-id="56c93-181">您可以使用它 toocreate hello 角色執行個體您自己的自訂邏輯 toodetermine hello 健全狀況。</span><span class="sxs-lookup"><span data-stu-id="56c93-181">You can use it toocreate your own custom logic toodetermine hello health of hello role instance.</span></span> <span data-ttu-id="56c93-182">hello 負載平衡器會定期探查您的端點 （每隔 15 秒，根據預設）。</span><span class="sxs-lookup"><span data-stu-id="56c93-182">hello load balancer will regularly probe your endpoint (every 15 seconds, by default).</span></span> <span data-ttu-id="56c93-183">如果它的回應通知 TCP 或 HTTP 200 hello 逾時期限 （預設值為 31 秒） 內 hello 執行個體視為 toobe 中旋轉。</span><span class="sxs-lookup"><span data-stu-id="56c93-183">hello instance is considered toobe in rotation if it responds with a TCP ACK or HTTP 200 within hello timeout period (default of 31 seconds).</span></span> <span data-ttu-id="56c93-184">這可用於實作您自己的邏輯 tooremove 執行個體從 hello 負載平衡器的循環。</span><span class="sxs-lookup"><span data-stu-id="56c93-184">This is useful for implementing your own logic tooremove instances from hello load balancer's rotation.</span></span> <span data-ttu-id="56c93-185">例如，您可以設定 hello 執行個體 tooreturn-200 狀態，如果 hello 執行個體超過 90%的 CPU。</span><span class="sxs-lookup"><span data-stu-id="56c93-185">For example, you can configure hello instance tooreturn a non-200 status if hello instance is above 90% CPU.</span></span> <span data-ttu-id="56c93-186">使用 w3wp.exe 的 web 角色，您也會取得自動監視您的網站，因為在網站上的程式碼中的失敗會傳回非 200 狀態 toohello 探查。</span><span class="sxs-lookup"><span data-stu-id="56c93-186">For web roles that use w3wp.exe, you also get automatic monitoring of your website, since failures in your website code return a non-200 status toohello probe.</span></span>
    + <span data-ttu-id="56c93-187">**TCP 自訂探查：**此探查會依賴成功 TCP 工作階段建立定義 tooa 探查連接埠。</span><span class="sxs-lookup"><span data-stu-id="56c93-187">**TCP custom probe:** This probe relies on successful TCP session establishment tooa defined probe port.</span></span>

    <span data-ttu-id="56c93-188">如需詳細資訊，請參閱 hello [LoadBalancerProbe 結構描述](https://msdn.microsoft.com/library/azure/jj151530.aspx)。</span><span class="sxs-lookup"><span data-stu-id="56c93-188">For more information, see hello [LoadBalancerProbe schema](https://msdn.microsoft.com/library/azure/jj151530.aspx).</span></span>

* <span data-ttu-id="56c93-189">來源 NAT</span><span class="sxs-lookup"><span data-stu-id="56c93-189">Source NAT</span></span>

    <span data-ttu-id="56c93-190">從您的服務所產生的網際網路進行的所有輸出流量 toohello 來源使用 NAT (SNAT) hello 相同的 VIP 位址，如 hello 連入流量。</span><span class="sxs-lookup"><span data-stu-id="56c93-190">All outbound traffic toohello Internet that originates from your service undergoes source NAT (SNAT) by using hello same VIP address as hello incoming traffic.</span></span> <span data-ttu-id="56c93-191">SNAT 提供一些重要優勢：</span><span class="sxs-lookup"><span data-stu-id="56c93-191">SNAT provides important benefits:</span></span>

    + <span data-ttu-id="56c93-192">它可讓您輕鬆的升級和災害復原服務，由於 hello 可以動態設定 VIP 對應 tooanother hello 服務執行個體。</span><span class="sxs-lookup"><span data-stu-id="56c93-192">It enables easy upgrade and disaster recovery of services, since hello VIP can be dynamically mapped tooanother instance of hello service.</span></span>
    + <span data-ttu-id="56c93-193">它讓存取控制清單 (ACL) 管理變得更容易。</span><span class="sxs-lookup"><span data-stu-id="56c93-193">It makes access control list (ACL) management easier.</span></span> <span data-ttu-id="56c93-194">當服務相應增加、相應減少或重新部署時，根據 VIP 表示的 ACL 不會變更。</span><span class="sxs-lookup"><span data-stu-id="56c93-194">ACLs expressed in terms of VIPs do not change as services scale up, down, or get redeployed.</span></span>

    <span data-ttu-id="56c93-195">hello 負載平衡器組態支援 UDP 完整圓錐 NAT。</span><span class="sxs-lookup"><span data-stu-id="56c93-195">hello load balancer configuration supports full cone NAT for UDP.</span></span> <span data-ttu-id="56c93-196">完整圓錐 NAT 是一種 NAT 其中 hello 連接埠允許來自任何外部的主機 （以回應 tooan 傳出要求） 的傳入的連接。</span><span class="sxs-lookup"><span data-stu-id="56c93-196">Full cone NAT is a type of NAT where hello port allows inbound connections from any external host (in response tooan outbound request).</span></span>

    <span data-ttu-id="56c93-197">起始虛擬機器每個新輸出連線，也會 hello 負載平衡器所配置的輸出連接埠。</span><span class="sxs-lookup"><span data-stu-id="56c93-197">For each new outbound connection that a virtual machine initiates, an outbound port is also allocated by hello load balancer.</span></span> <span data-ttu-id="56c93-198">hello 外部主機會看到 IP VIP 配置的虛擬通訊埠的流量。</span><span class="sxs-lookup"><span data-stu-id="56c93-198">hello external host sees traffic with a virtual IP (VIP)-allocated port.</span></span> <span data-ttu-id="56c93-199">對於需要大量的輸出連線的案例，建議 toouse[執行個體層級公用 IP](../virtual-network/virtual-networks-instance-level-public-ip.md)位址，讓 hello Vm 的 SNAT 輸出的專用的 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="56c93-199">For scenarios that require a large number of outbound connections, it is recommended toouse [instance-level public IP](../virtual-network/virtual-networks-instance-level-public-ip.md) addresses so that hello VMs have a dedicated outbound IP address for SNAT.</span></span> <span data-ttu-id="56c93-200">這會減少 hello 的連接埠耗盡的風險。</span><span class="sxs-lookup"><span data-stu-id="56c93-200">This reduces hello risk of port exhaustion.</span></span>

    <span data-ttu-id="56c93-201">如需更多有關本主題的詳細資訊，請參閱[輸出連線](load-balancer-outbound-connections.md)一文。</span><span class="sxs-lookup"><span data-stu-id="56c93-201">Please see [outbound connections](load-balancer-outbound-connections.md) article for more details on this topic.</span></span>

### <a name="support-for-multiple-load-balanced-ip-addresses-for-virtual-machines"></a><span data-ttu-id="56c93-202">支援虛擬機器有多個負載平衡的 IP 位址</span><span class="sxs-lookup"><span data-stu-id="56c93-202">Support for multiple load-balanced IP addresses for virtual machines</span></span>
<span data-ttu-id="56c93-203">您可以指派多個負載平衡公用 IP 位址 tooa 組的虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="56c93-203">You can assign more than one load-balanced public IP address tooa set of virtual machines.</span></span> <span data-ttu-id="56c93-204">運用這項功能，您可以主控多個 SSL 網站及/或 hello 相同設定的虛擬機器上的多個 SQL Server AlwaysOn 可用性群組接聽程式。</span><span class="sxs-lookup"><span data-stu-id="56c93-204">With this ability, you can host multiple SSL websites and/or multiple SQL Server AlwaysOn Availability Group listeners on hello same set of virtual machines.</span></span> <span data-ttu-id="56c93-205">如需詳細資訊，請參閱[每一雲端服務有多重 VIP](load-balancer-multivip.md)。</span><span class="sxs-lookup"><span data-stu-id="56c93-205">For more information, see [Multiple VIPs per cloud service](load-balancer-multivip.md).</span></span>

[!INCLUDE [load-balancer-compare-tm-ag-lb-include.md](../../includes/load-balancer-compare-tm-ag-lb-include.md)]

## <a name="limitations"></a><span data-ttu-id="56c93-206">限制</span><span class="sxs-lookup"><span data-stu-id="56c93-206">Limitations</span></span>

<span data-ttu-id="56c93-207">負載平衡器後端集區可以包含任何 VM SKU (基本層除外)。</span><span class="sxs-lookup"><span data-stu-id="56c93-207">Load Balancer backend pools can contain any VM SKU except Basic tier.</span></span>

## <a name="next-steps"></a><span data-ttu-id="56c93-208">後續步驟</span><span class="sxs-lookup"><span data-stu-id="56c93-208">Next steps</span></span>

- <span data-ttu-id="56c93-209">深入了解[網際網路對向負載平衡器](load-balancer-internet-overview.md)</span><span class="sxs-lookup"><span data-stu-id="56c93-209">Learn more about [Internet-facing load balancer](load-balancer-internet-overview.md)</span></span>

- <span data-ttu-id="56c93-210">深入了解[內部負載平衡器概觀](load-balancer-internal-overview.md)</span><span class="sxs-lookup"><span data-stu-id="56c93-210">Learn more about [Internal load balancer overview](load-balancer-internal-overview.md)</span></span>

- <span data-ttu-id="56c93-211">建立[網際網路對向負載平衡器](load-balancer-get-started-internet-portal.md)</span><span class="sxs-lookup"><span data-stu-id="56c93-211">Create an [Internet-facing load balancer](load-balancer-get-started-internet-portal.md)</span></span>

- <span data-ttu-id="56c93-212">深入了解一些 hello 另一個索引鍵[網路功能](../networking/networking-overview.md)的 Azure</span><span class="sxs-lookup"><span data-stu-id="56c93-212">Learn about some of hello other key [networking capabilities](../networking/networking-overview.md) of Azure</span></span>

