---
title: "Azure Application Insights 常見問題集 | Microsoft Docs"
description: "關於 Application Insights 的常見問題集。"
services: application-insights
documentationcenter: .net
author: CFreemanwa
manager: carmonm
ms.assetid: 0e3b103c-6e2a-4634-9e8c-8b85cf5e9c84
ms.service: application-insights
ms.workload: mobile
ms.tgt_pltfrm: ibiza
ms.devlang: na
ms.topic: article
ms.date: 04/12/2017
ms.author: bwren
ms.openlocfilehash: 0b6f9e8192a4c6808beb61acb0f93ef5ec73e956
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/18/2017
---
# <a name="application-insights-frequently-asked-questions"></a><span data-ttu-id="e36c5-103">Application Insights：常見問題集</span><span class="sxs-lookup"><span data-stu-id="e36c5-103">Application Insights: Frequently Asked Questions</span></span>

## <a name="configuration-problems"></a><span data-ttu-id="e36c5-104">組態問題</span><span class="sxs-lookup"><span data-stu-id="e36c5-104">Configuration problems</span></span>
<span data-ttu-id="e36c5-105">*我在設定下列項目時有問題：*</span><span class="sxs-lookup"><span data-stu-id="e36c5-105">*I'm having trouble setting up my:*</span></span>

* [<span data-ttu-id="e36c5-106">.NET 應用程式</span><span class="sxs-lookup"><span data-stu-id="e36c5-106">.NET app</span></span>](app-insights-asp-net-troubleshoot-no-data.md)
* [<span data-ttu-id="e36c5-107">監視已在執行的應用程式</span><span class="sxs-lookup"><span data-stu-id="e36c5-107">Monitoring an already-running app</span></span>](app-insights-monitor-performance-live-website-now.md#troubleshooting-runtime-configuration-of-application-insights)
* [<span data-ttu-id="e36c5-108">Azure 診斷</span><span class="sxs-lookup"><span data-stu-id="e36c5-108">Azure diagnostics</span></span>](app-insights-azure-diagnostics.md)
* [<span data-ttu-id="e36c5-109">Java Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="e36c5-109">Java web app</span></span>](app-insights-java-troubleshoot.md)

<span data-ttu-id="e36c5-110">我的伺服器沒有傳回資料</span><span class="sxs-lookup"><span data-stu-id="e36c5-110">*I get no data from my server*</span></span>

* [<span data-ttu-id="e36c5-111">設定防火牆例外狀況</span><span class="sxs-lookup"><span data-stu-id="e36c5-111">Set firewall exceptions</span></span>](app-insights-ip-addresses.md)
* [<span data-ttu-id="e36c5-112">設定 ASP.NET 伺服器</span><span class="sxs-lookup"><span data-stu-id="e36c5-112">Set up an ASP.NET server</span></span>](app-insights-monitor-performance-live-website-now.md)
* [<span data-ttu-id="e36c5-113">設定 Java 伺服器</span><span class="sxs-lookup"><span data-stu-id="e36c5-113">Set up a Java server</span></span>](app-insights-java-agent.md)

## <a name="can-i-use-application-insights-with-"></a><span data-ttu-id="e36c5-114">我是否可以搭配 ... 來使用 Application Insights 嗎？</span><span class="sxs-lookup"><span data-stu-id="e36c5-114">Can I use Application Insights with ...?</span></span>

* [<span data-ttu-id="e36c5-115">IIS 伺服器 (內部部署或 VM 中) 上的 Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="e36c5-115">Web apps on an IIS server - on-premises or in a VM</span></span>](app-insights-asp-net.md)
* [<span data-ttu-id="e36c5-116">Java Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="e36c5-116">Java web apps</span></span>](app-insights-java-get-started.md)
* [<span data-ttu-id="e36c5-117">Node.js 應用程式</span><span class="sxs-lookup"><span data-stu-id="e36c5-117">Node.js apps</span></span>](app-insights-nodejs.md)
* [<span data-ttu-id="e36c5-118">Azure 上的 Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="e36c5-118">Web apps on Azure</span></span>](app-insights-azure-web-apps.md)
* [<span data-ttu-id="e36c5-119">Azure 上的雲端服務</span><span class="sxs-lookup"><span data-stu-id="e36c5-119">Cloud Services on Azure</span></span>](app-insights-cloudservices.md)
* [<span data-ttu-id="e36c5-120">在 Docker 中執行的應用程式伺服器</span><span class="sxs-lookup"><span data-stu-id="e36c5-120">App servers running in Docker</span></span>](app-insights-docker.md)
* [<span data-ttu-id="e36c5-121">單一頁面 Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="e36c5-121">Single-page web apps</span></span>](app-insights-javascript.md)
* [<span data-ttu-id="e36c5-122">Sharepoint</span><span class="sxs-lookup"><span data-stu-id="e36c5-122">Sharepoint</span></span>](app-insights-sharepoint.md)
* [<span data-ttu-id="e36c5-123">Windows 傳統型應用程式</span><span class="sxs-lookup"><span data-stu-id="e36c5-123">Windows desktop app</span></span>](app-insights-windows-desktop.md)
* [<span data-ttu-id="e36c5-124">其他平台</span><span class="sxs-lookup"><span data-stu-id="e36c5-124">Other platforms</span></span>](app-insights-platforms.md)

## <a name="is-it-free"></a><span data-ttu-id="e36c5-125">它是免費的嗎？</span><span class="sxs-lookup"><span data-stu-id="e36c5-125">Is it free?</span></span>

<span data-ttu-id="e36c5-126">是，可作為實驗用途。</span><span class="sxs-lookup"><span data-stu-id="e36c5-126">Yes, for experimental use.</span></span> <span data-ttu-id="e36c5-127">在基本定價方案中，您的應用程式每個月可以免費傳送一定額度的資料。</span><span class="sxs-lookup"><span data-stu-id="e36c5-127">In the basic pricing plan, your application can send a certain allowance of data each month free of charge.</span></span> <span data-ttu-id="e36c5-128">免費額度足夠因應開發用途和為少量使用者發佈應用程式。</span><span class="sxs-lookup"><span data-stu-id="e36c5-128">The free allowance is large enough to cover development, and publishing an app for a small number of users.</span></span> <span data-ttu-id="e36c5-129">您可以設定上限以防止處理超過指定的資料量。</span><span class="sxs-lookup"><span data-stu-id="e36c5-129">You can set a cap to prevent more than a specified amount of data from being processed.</span></span>

<span data-ttu-id="e36c5-130">較大量的遙測資料是以 Gb 計費。</span><span class="sxs-lookup"><span data-stu-id="e36c5-130">Larger volumes of telemetry are charged by the Gb.</span></span> <span data-ttu-id="e36c5-131">我們提供一些有關如何[限制費用](app-insights-pricing.md)的秘訣。</span><span class="sxs-lookup"><span data-stu-id="e36c5-131">We provide some tips on how to [limit your charges](app-insights-pricing.md).</span></span>

<span data-ttu-id="e36c5-132">「企業」方案會針對每個 Web 伺服器節點傳送遙測資料的每一天計費。</span><span class="sxs-lookup"><span data-stu-id="e36c5-132">The Enterprise plan incurs a charge for each day that each web server node sends telemetry.</span></span> <span data-ttu-id="e36c5-133">如果您想要大規模使用「連續匯出」，便適用此方案。</span><span class="sxs-lookup"><span data-stu-id="e36c5-133">It is suitable if you want to use Continuous Export on a large scale.</span></span>

<span data-ttu-id="e36c5-134">[請參閱定價方案](https://azure.microsoft.com/pricing/details/application-insights/)。</span><span class="sxs-lookup"><span data-stu-id="e36c5-134">[Read the pricing plan](https://azure.microsoft.com/pricing/details/application-insights/).</span></span>

## <a name="how-much-is-it-costing"></a><span data-ttu-id="e36c5-135">費用是多少？</span><span class="sxs-lookup"><span data-stu-id="e36c5-135">How much is it costing?</span></span>

* <span data-ttu-id="e36c5-136">開啟 Application Insights 資源中的 [功能與定價] 頁面。</span><span class="sxs-lookup"><span data-stu-id="e36c5-136">Open the **Features + pricing** page in an Application Insights resource.</span></span> <span data-ttu-id="e36c5-137">系統會顯示一張最近使用量的圖表。</span><span class="sxs-lookup"><span data-stu-id="e36c5-137">There's a chart of recent usage.</span></span> <span data-ttu-id="e36c5-138">您可以視需要設定資料量上限。</span><span class="sxs-lookup"><span data-stu-id="e36c5-138">You can set a data volume cap, if you want.</span></span>
* <span data-ttu-id="e36c5-139">開啟 [Azure 帳單刀鋒視窗](https://portal.azure.com/#blade/Microsoft_Azure_Billing/BillingBlade/Overview)以查看您所有資源的帳單。</span><span class="sxs-lookup"><span data-stu-id="e36c5-139">Open the [Azure Billing blade](https://portal.azure.com/#blade/Microsoft_Azure_Billing/BillingBlade/Overview) to see your bills across all resources.</span></span>

## <span data-ttu-id="e36c5-140"><a name="q14"></a>Application Insights 在我的專案中修改什麼？</span><span class="sxs-lookup"><span data-stu-id="e36c5-140"><a name="q14"></a>What does Application Insights modify in my project?</span></span>
<span data-ttu-id="e36c5-141">詳細資料視專案類型而定。</span><span class="sxs-lookup"><span data-stu-id="e36c5-141">The details depend on the type of project.</span></span> <span data-ttu-id="e36c5-142">若是 Web 應用程式：</span><span class="sxs-lookup"><span data-stu-id="e36c5-142">For a web application:</span></span>

* <span data-ttu-id="e36c5-143">將這些檔案新增至您的專案：</span><span class="sxs-lookup"><span data-stu-id="e36c5-143">Adds these files to your project:</span></span>

  * <span data-ttu-id="e36c5-144">ApplicationInsights.config。</span><span class="sxs-lookup"><span data-stu-id="e36c5-144">ApplicationInsights.config.</span></span>
  * <span data-ttu-id="e36c5-145">ai.js</span><span class="sxs-lookup"><span data-stu-id="e36c5-145">ai.js</span></span>
* <span data-ttu-id="e36c5-146">安裝這些 NuGet 套件：</span><span class="sxs-lookup"><span data-stu-id="e36c5-146">Installs these NuGet packages:</span></span>

  * <span data-ttu-id="e36c5-147">*Application Insights API* - 核心 API</span><span class="sxs-lookup"><span data-stu-id="e36c5-147">*Application Insights API* - the core API</span></span>
  * <span data-ttu-id="e36c5-148">*Application Insights API for Web Applications* - 用來從伺服器傳送遙測</span><span class="sxs-lookup"><span data-stu-id="e36c5-148">*Application Insights API for Web Applications* - used to send telemetry from the server</span></span>
  * <span data-ttu-id="e36c5-149">*Application Insights API for JavaScript Applications* - 用來從用戶端傳送遙測</span><span class="sxs-lookup"><span data-stu-id="e36c5-149">*Application Insights API for JavaScript Applications* - used to send telemetry from the client</span></span>

    <span data-ttu-id="e36c5-150">套件包含這些組件：</span><span class="sxs-lookup"><span data-stu-id="e36c5-150">The packages include these assemblies:</span></span>
  * <span data-ttu-id="e36c5-151">Microsoft.ApplicationInsights</span><span class="sxs-lookup"><span data-stu-id="e36c5-151">Microsoft.ApplicationInsights</span></span>
  * <span data-ttu-id="e36c5-152">Microsoft.ApplicationInsights.Platform</span><span class="sxs-lookup"><span data-stu-id="e36c5-152">Microsoft.ApplicationInsights.Platform</span></span>
* <span data-ttu-id="e36c5-153">將項目插入至：</span><span class="sxs-lookup"><span data-stu-id="e36c5-153">Inserts items into:</span></span>

  * <span data-ttu-id="e36c5-154">Web.config</span><span class="sxs-lookup"><span data-stu-id="e36c5-154">Web.config</span></span>
  * <span data-ttu-id="e36c5-155">packages.config</span><span class="sxs-lookup"><span data-stu-id="e36c5-155">packages.config</span></span>
* <span data-ttu-id="e36c5-156">(僅限新專案 - 如果您[將 Application Insights 新增至現有的專案][start]，則必須手動執行。)將程式碼片段插入至用戶端和伺服器程式碼中，以使用 Application Insights 資源識別碼將這些片段初始化。</span><span class="sxs-lookup"><span data-stu-id="e36c5-156">(New projects only - if you [add Application Insights to an existing project][start], you have to do this manually.) Inserts snippets into the client and server code to initialize them with the Application Insights resource ID.</span></span> <span data-ttu-id="e36c5-157">例如，在 MVC 應用程式中，程式碼會插入至主版頁面 Views/Shared/_Layout.cshtml</span><span class="sxs-lookup"><span data-stu-id="e36c5-157">For example, in an MVC app, code is inserted into the master page Views/Shared/_Layout.cshtml</span></span>

## <a name="how-do-i-upgrade-from-older-sdk-versions"></a><span data-ttu-id="e36c5-158">如何從舊版 SDK 升級？</span><span class="sxs-lookup"><span data-stu-id="e36c5-158">How do I upgrade from older SDK versions?</span></span>
<span data-ttu-id="e36c5-159">請參閱您的應用程式類型所適用之 SDK 的[版本資訊](app-insights-release-notes.md)。</span><span class="sxs-lookup"><span data-stu-id="e36c5-159">See the [release notes](app-insights-release-notes.md) for the SDK appropriate to your type of application.</span></span>

## <span data-ttu-id="e36c5-160"><a name="update"></a>如何變更我的專案將資料傳送到哪一個 Azure 資源？</span><span class="sxs-lookup"><span data-stu-id="e36c5-160"><a name="update"></a>How can I change which Azure resource my project sends data to?</span></span>
<span data-ttu-id="e36c5-161">在 [方案總管] 中，以滑鼠右鍵按一下 `ApplicationInsights.config`，然後選擇 [更新 Application Insights]。</span><span class="sxs-lookup"><span data-stu-id="e36c5-161">In Solution Explorer, right-click `ApplicationInsights.config` and choose **Update Application Insights**.</span></span> <span data-ttu-id="e36c5-162">您可以將資料傳送至 Azure 中的現有資源或新資源。</span><span class="sxs-lookup"><span data-stu-id="e36c5-162">You can send the data to an existing or new resource in Azure.</span></span> <span data-ttu-id="e36c5-163">更新精靈會變更 ApplicationInsights.config 中的檢測金鑰，這決定伺服器 SDK 將您的資料送往何處。</span><span class="sxs-lookup"><span data-stu-id="e36c5-163">The update wizard changes the instrumentation key in ApplicationInsights.config, which determines where the server SDK sends your data.</span></span> <span data-ttu-id="e36c5-164">除非您取消選取 [全部更新]，否則也會變更金鑰出現在您網頁中的位置。</span><span class="sxs-lookup"><span data-stu-id="e36c5-164">Unless you deselect "Update all," it will also change the key where it appears in your web pages.</span></span>

## <a name="what-is-status-monitor"></a><span data-ttu-id="e36c5-165">什麼是狀態監視器？</span><span class="sxs-lookup"><span data-stu-id="e36c5-165">What is Status Monitor?</span></span>

<span data-ttu-id="e36c5-166">一個傳統型應用程式，您可以在 IIS Web 伺服器中使用它，以協助您在 Web 應用程式中設定 Application Insights。</span><span class="sxs-lookup"><span data-stu-id="e36c5-166">A desktop app that you can use in your IIS web server to help configure Application Insights in web apps.</span></span> <span data-ttu-id="e36c5-167">它不會收集遙測資料：當您沒有在設定應用程式時，可以將它停止。</span><span class="sxs-lookup"><span data-stu-id="e36c5-167">It doesn't collect telemetry: you can stop it when you are not configuring an app.</span></span> 

<span data-ttu-id="e36c5-168">[深入了解](app-insights-monitor-performance-live-website-now.md#questions)。</span><span class="sxs-lookup"><span data-stu-id="e36c5-168">[Learn more](app-insights-monitor-performance-live-website-now.md#questions).</span></span>

## <a name="what-telemetry-is-collected-by-application-insights"></a><span data-ttu-id="e36c5-169">Application Insights 會收集什麼遙測資料？</span><span class="sxs-lookup"><span data-stu-id="e36c5-169">What telemetry is collected by Application Insights?</span></span>

<span data-ttu-id="e36c5-170">從伺服器 Web 應用程式：</span><span class="sxs-lookup"><span data-stu-id="e36c5-170">From server web apps:</span></span>

* <span data-ttu-id="e36c5-171">HTTP 要求</span><span class="sxs-lookup"><span data-stu-id="e36c5-171">HTTP requests</span></span>
* <span data-ttu-id="e36c5-172">[相依項目](app-insights-asp-net-dependencies.md)。</span><span class="sxs-lookup"><span data-stu-id="e36c5-172">[Dependencies](app-insights-asp-net-dependencies.md).</span></span> <span data-ttu-id="e36c5-173">對下列各項的呼叫：SQL Database、對外部服務的 HTTP 呼叫、Azure Cosmos DB、資料表、Blob 儲存體及佇列。</span><span class="sxs-lookup"><span data-stu-id="e36c5-173">Calls to: SQL Databases; HTTP calls to external services; Azure Cosmos DB, table, blob storage, and queue.</span></span> 
* <span data-ttu-id="e36c5-174">[例外狀況](app-insights-asp-net-exceptions.md)和堆疊追蹤。</span><span class="sxs-lookup"><span data-stu-id="e36c5-174">[Exceptions](app-insights-asp-net-exceptions.md) and stack traces.</span></span>
* <span data-ttu-id="e36c5-175">[效能計數器](app-insights-performance-counters.md) - 如果您使用[狀態監視器](app-insights-monitor-performance-live-website-now.md)、Azure 監視(app-insights-azure-web-apps.md) 或 [Application Insights collectd 寫入器](app-insights-java-collectd.md)。</span><span class="sxs-lookup"><span data-stu-id="e36c5-175">[Performance Counters](app-insights-performance-counters.md) - If you use [Status Monitor](app-insights-monitor-performance-live-website-now.md), Azure monitoring(app-insights-azure-web-apps.md) or the [Application Insights collectd writer](app-insights-java-collectd.md).</span></span>
* <span data-ttu-id="e36c5-176">您以程式碼撰寫的[自訂事件和計量](app-insights-api-custom-events-metrics.md)。</span><span class="sxs-lookup"><span data-stu-id="e36c5-176">[Custom events and metrics](app-insights-api-custom-events-metrics.md) that you code.</span></span>
* <span data-ttu-id="e36c5-177">[追蹤記錄檔](app-insights-asp-net-trace-logs.md) - 如果您設定適當的收集器。</span><span class="sxs-lookup"><span data-stu-id="e36c5-177">[Trace logs](app-insights-asp-net-trace-logs.md) if you configure the appropriate collector.</span></span>

<span data-ttu-id="e36c5-178">從[用戶端網頁](app-insights-javascript.md)：</span><span class="sxs-lookup"><span data-stu-id="e36c5-178">From [client web pages](app-insights-javascript.md):</span></span>

* [<span data-ttu-id="e36c5-179">頁面檢視計數</span><span class="sxs-lookup"><span data-stu-id="e36c5-179">Page view counts</span></span>](app-insights-web-track-usage.md)
* <span data-ttu-id="e36c5-180">[AJAX 呼叫](app-insights-asp-net-dependencies.md) - 從執行中指令碼發出的要求。</span><span class="sxs-lookup"><span data-stu-id="e36c5-180">[AJAX calls](app-insights-asp-net-dependencies.md) Requests made from a running script.</span></span>
* <span data-ttu-id="e36c5-181">頁面檢視載入資料</span><span class="sxs-lookup"><span data-stu-id="e36c5-181">Page view load data</span></span>
* <span data-ttu-id="e36c5-182">使用者和工作階段計數</span><span class="sxs-lookup"><span data-stu-id="e36c5-182">User and session counts</span></span>
* [<span data-ttu-id="e36c5-183">已驗證的使用者識別碼</span><span class="sxs-lookup"><span data-stu-id="e36c5-183">Authenticated user IDs</span></span>](app-insights-api-custom-events-metrics.md#authenticated-users)

<span data-ttu-id="e36c5-184">從其他來源 (如果您設定它們的話)：</span><span class="sxs-lookup"><span data-stu-id="e36c5-184">From other sources, if you configure them:</span></span>

* [<span data-ttu-id="e36c5-185">Azure 診斷</span><span class="sxs-lookup"><span data-stu-id="e36c5-185">Azure diagnostics</span></span>](app-insights-azure-diagnostics.md)
* [<span data-ttu-id="e36c5-186">Docker 容器</span><span class="sxs-lookup"><span data-stu-id="e36c5-186">Docker containers</span></span>](app-insights-docker.md)
* [<span data-ttu-id="e36c5-187">將資料表匯入到分析</span><span class="sxs-lookup"><span data-stu-id="e36c5-187">Import tables to Analytics</span></span>](app-insights-analytics-import.md)
* [<span data-ttu-id="e36c5-188">OMS (Log Analytics)</span><span class="sxs-lookup"><span data-stu-id="e36c5-188">OMS (Log Analytics)</span></span>](https://azure.microsoft.com/blog/omssolutionforappinsightspublicpreview/)
* [<span data-ttu-id="e36c5-189">Logstash</span><span class="sxs-lookup"><span data-stu-id="e36c5-189">Logstash</span></span>](app-insights-analytics-import.md)

## <a name="can-i-filter-out-or-modify-some-telemetry"></a><span data-ttu-id="e36c5-190">我是否可以篩選掉或修改某些遙測？</span><span class="sxs-lookup"><span data-stu-id="e36c5-190">Can I filter out or modify some telemetry?</span></span>

<span data-ttu-id="e36c5-191">是，您可以在伺服器中撰寫：</span><span class="sxs-lookup"><span data-stu-id="e36c5-191">Yes, in the server you can write:</span></span>

* <span data-ttu-id="e36c5-192">「遙測處理器」以在從您的應用程式傳送選取的遙測項目之前，先篩選它們的屬性或為它們新增屬性。</span><span class="sxs-lookup"><span data-stu-id="e36c5-192">Telemetry Processor to filter or add properties to selected telemetry items before they are sent from your app.</span></span>
* <span data-ttu-id="e36c5-193">「初始設定式」以為所有遙測項目新增屬性。</span><span class="sxs-lookup"><span data-stu-id="e36c5-193">Telemetry Initializer to add properties to all items of telemetry.</span></span>

<span data-ttu-id="e36c5-194">深入了解 [ASP.NET](app-insights-api-filtering-sampling.md) 或 [Java](app-insights-java-filter-telemetry.md)。</span><span class="sxs-lookup"><span data-stu-id="e36c5-194">Learn more for [ASP.NET](app-insights-api-filtering-sampling.md) or [Java](app-insights-java-filter-telemetry.md).</span></span>

## <a name="how-are-city-country-and-other-geo-location-data-calculated"></a><span data-ttu-id="e36c5-195">如何計算城市、國家/地區及其他地理位置的資料？</span><span class="sxs-lookup"><span data-stu-id="e36c5-195">How are City, Country and other geo location data calculated?</span></span>

<span data-ttu-id="e36c5-196">我們會使用 [GeoLite2](http://dev.maxmind.com/geoip/geoip2/geolite2/) 來查詢 Web 用戶端的 IP 位址 (IPv4 或 IPv6)。</span><span class="sxs-lookup"><span data-stu-id="e36c5-196">We look up the IP address (IPv4 or IPv6) of the web client using [GeoLite2](http://dev.maxmind.com/geoip/geoip2/geolite2/).</span></span>

* <span data-ttu-id="e36c5-197">瀏覽器遙測：我們會收集傳送者的 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="e36c5-197">Browser telemetry: We collect the sender's IP address.</span></span>
* <span data-ttu-id="e36c5-198">伺服器遙測：Application Insights 模組會收集用戶端 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="e36c5-198">Server telemetry: The Application Insights module collects the client IP address.</span></span> <span data-ttu-id="e36c5-199">如果已設定 `X-Forwarded-For`，則不會收集該位址。</span><span class="sxs-lookup"><span data-stu-id="e36c5-199">It is not collected if `X-Forwarded-For` is set.</span></span>

<span data-ttu-id="e36c5-200">您可以設定 `ClientIpHeaderTelemetryInitializer` 以從不同的標頭取得 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="e36c5-200">You can configure the `ClientIpHeaderTelemetryInitializer` to take the IP address from a different header.</span></span> <span data-ttu-id="e36c5-201">例如，在某些系統中，Proxy、負載平衡器或 CDN 會將它移至 `X-Originating-IP`。</span><span class="sxs-lookup"><span data-stu-id="e36c5-201">In some systems, for example, it is moved by a proxy, load balancer, or CDN to `X-Originating-IP`.</span></span> <span data-ttu-id="e36c5-202">[深入了解](http://apmtips.com/blog/2016/07/05/client-ip-address/)。</span><span class="sxs-lookup"><span data-stu-id="e36c5-202">[Learn more](http://apmtips.com/blog/2016/07/05/client-ip-address/).</span></span>

<span data-ttu-id="e36c5-203">您可以[使用 Power BI](app-insights-export-power-bi.md) 在地圖上顯示您的要求遙測資料。</span><span class="sxs-lookup"><span data-stu-id="e36c5-203">You can [use Power BI](app-insights-export-power-bi.md) to display your request telemetry on a map.</span></span>


## <span data-ttu-id="e36c5-204"><a name="data"></a>資料會保留在入口網站多久？</span><span class="sxs-lookup"><span data-stu-id="e36c5-204"><a name="data"></a>How long is data retained in the portal?</span></span> <span data-ttu-id="e36c5-205">是否安全？</span><span class="sxs-lookup"><span data-stu-id="e36c5-205">Is it secure?</span></span>
<span data-ttu-id="e36c5-206">請參閱[資料保留和隱私權][data]。</span><span class="sxs-lookup"><span data-stu-id="e36c5-206">Take a look at [Data Retention and Privacy][data].</span></span>

## <a name="might-personally-identifiable-information-pii-be-sent-in-the-telemetry"></a><span data-ttu-id="e36c5-207">是否可能在遙測資料中傳送個人識別資訊 (PII)？</span><span class="sxs-lookup"><span data-stu-id="e36c5-207">Might personally identifiable information (PII) be sent in the telemetry?</span></span>

<span data-ttu-id="e36c5-208">如果您的程式碼會傳送這類資料，就有可能。</span><span class="sxs-lookup"><span data-stu-id="e36c5-208">This is possible if your code sends such data.</span></span> <span data-ttu-id="e36c5-209">如果堆疊追蹤中的變數包含 PII，也可能發生這種情況。</span><span class="sxs-lookup"><span data-stu-id="e36c5-209">It can also happen if variables in stack traces include PII.</span></span> <span data-ttu-id="e36c5-210">您的開發小組應該進行風險評估，以確保正確處理 PII。</span><span class="sxs-lookup"><span data-stu-id="e36c5-210">Your development team should conduct risk assessments to ensure that PII is properly handled.</span></span> <span data-ttu-id="e36c5-211">[深入了解資料保留和隱私權](app-insights-data-retention-privacy.md)。</span><span class="sxs-lookup"><span data-stu-id="e36c5-211">[Learn more about data retention and privacy](app-insights-data-retention-privacy.md).</span></span>

<span data-ttu-id="e36c5-212">用戶端網址的最後八位元在由入口網站擷取之後一律會設為 0。</span><span class="sxs-lookup"><span data-stu-id="e36c5-212">The last octet of the client web address is always set to 0 after ingestion by the portal.</span></span>

## <a name="my-ikey-is-visible-in-my-web-page-source"></a><span data-ttu-id="e36c5-213">在我的網頁原始碼中可以看見我的 iKey。</span><span class="sxs-lookup"><span data-stu-id="e36c5-213">My iKey is visible in my web page source.</span></span> 

* <span data-ttu-id="e36c5-214">這在監視解決方案中是常見的做法。</span><span class="sxs-lookup"><span data-stu-id="e36c5-214">This is common practice in monitoring solutions.</span></span>
* <span data-ttu-id="e36c5-215">無法使用它來竊取您的資料。</span><span class="sxs-lookup"><span data-stu-id="e36c5-215">It can't be used to steal your data.</span></span>
* <span data-ttu-id="e36c5-216">可以使用它來扭曲您的資料或觸發警示。</span><span class="sxs-lookup"><span data-stu-id="e36c5-216">It could be used to skew your data or trigger alerts.</span></span>
* <span data-ttu-id="e36c5-217">我們尚未聽到有任何客戶有這類問題。</span><span class="sxs-lookup"><span data-stu-id="e36c5-217">We have not heard that any customer has had such problems.</span></span>

<span data-ttu-id="e36c5-218">您可以：</span><span class="sxs-lookup"><span data-stu-id="e36c5-218">You could:</span></span>

* <span data-ttu-id="e36c5-219">針對用戶端和伺服器資料使用兩個個別的 iKey (個別的 Application Insights 資源)。</span><span class="sxs-lookup"><span data-stu-id="e36c5-219">Use two separate iKeys (separate Application Insights resources), for client and server data.</span></span> <span data-ttu-id="e36c5-220">或</span><span class="sxs-lookup"><span data-stu-id="e36c5-220">Or</span></span>
* <span data-ttu-id="e36c5-221">撰寫一個在您伺服器中執行的 Proxy，並讓 Web 用戶端透過該 Proxy 傳送資料。</span><span class="sxs-lookup"><span data-stu-id="e36c5-221">Write a proxy that runs in your server, and have the web client send data through that proxy.</span></span>

## <span data-ttu-id="e36c5-222"><a name="post"></a>如何在診斷搜尋中查看 POST 資料？</span><span class="sxs-lookup"><span data-stu-id="e36c5-222"><a name="post"></a>How do I see POST data in Diagnostic search?</span></span>
<span data-ttu-id="e36c5-223">我們不會自動記錄 POST 資料，但您可以使用 TrackTrace 呼叫：將資料放置到訊息參數中。</span><span class="sxs-lookup"><span data-stu-id="e36c5-223">We don't log POST data automatically, but you can use a TrackTrace call: put the data in the message parameter.</span></span> <span data-ttu-id="e36c5-224">相較於字串屬性的限制，此呼叫可容許較長的大小，不過您無法篩選。</span><span class="sxs-lookup"><span data-stu-id="e36c5-224">This has a longer size limit than the limits on string properties, though you can't filter on it.</span></span>

## <a name="should-i-use-single-or-multiple-application-insights-resources"></a><span data-ttu-id="e36c5-225">我應該使用單一還是多個 Application Insights 資源？</span><span class="sxs-lookup"><span data-stu-id="e36c5-225">Should I use single or multiple Application Insights resources?</span></span>

<span data-ttu-id="e36c5-226">對於單一商務系統中的所有元件或角色，請使用單一資源。</span><span class="sxs-lookup"><span data-stu-id="e36c5-226">Use a single resource for all the components or roles in a single business system.</span></span> <span data-ttu-id="e36c5-227">對於開發、測試和發行版本以及獨立的應用程式，則請使用不同的資源。</span><span class="sxs-lookup"><span data-stu-id="e36c5-227">Use separate resources for development, test, and release versions, and for independent applications.</span></span>

* [<span data-ttu-id="e36c5-228">請參閱這裡的討論</span><span class="sxs-lookup"><span data-stu-id="e36c5-228">See the discussion here</span></span>](app-insights-separate-resources.md)
* [<span data-ttu-id="e36c5-229">範例 - 具有背景工作角色和 Web 角色的雲端服務</span><span class="sxs-lookup"><span data-stu-id="e36c5-229">Example - cloud service with worker and web roles</span></span>](app-insights-cloudservices.md)

## <a name="how-do-i-dynamically-change-the-instrumentation-key"></a><span data-ttu-id="e36c5-230">我如何動態變更檢測金鑰？</span><span class="sxs-lookup"><span data-stu-id="e36c5-230">How do I dynamically change the instrumentation key?</span></span>

* [<span data-ttu-id="e36c5-231">這裡的討論</span><span class="sxs-lookup"><span data-stu-id="e36c5-231">Discussion here</span></span>](app-insights-separate-resources.md)
* [<span data-ttu-id="e36c5-232">範例 - 具有背景工作角色和 Web 角色的雲端服務</span><span class="sxs-lookup"><span data-stu-id="e36c5-232">Example - cloud service with worker and web roles</span></span>](app-insights-cloudservices.md)

## <a name="what-are-the-user-and-session-counts"></a><span data-ttu-id="e36c5-233">什麼是使用者和和工作階段計數？</span><span class="sxs-lookup"><span data-stu-id="e36c5-233">What are the User and Session counts?</span></span>

* <span data-ttu-id="e36c5-234">JavaScript SDK 會在 Web 用戶端上設定使用者 Cookie 來識別傳回使用者，以及設定一個工作階段 Cookie 來將活動分組。</span><span class="sxs-lookup"><span data-stu-id="e36c5-234">The JavaScript SDK sets a user cookie on the web client, to identify returning users, and a session cookie to group activities.</span></span>
* <span data-ttu-id="e36c5-235">如果沒有任何用戶端指令碼，則您可以[在伺服器設定 Cookie](http://apmtips.com/blog/2016/07/09/tracking-users-in-api-apps/)。</span><span class="sxs-lookup"><span data-stu-id="e36c5-235">If there is no client-side script, you can [set cookies at the server](http://apmtips.com/blog/2016/07/09/tracking-users-in-api-apps/).</span></span>
* <span data-ttu-id="e36c5-236">如果有一個真實的使用者以不同的瀏覽器使用您的站台，或是使用 InPrivate/Incognito 瀏覽，或透過不同的電腦，則系統會將其計算多次。</span><span class="sxs-lookup"><span data-stu-id="e36c5-236">If one real user uses your site in different browsers, or using in-private/incognito browsing, or different machines, then they will be counted more than once.</span></span>
* <span data-ttu-id="e36c5-237">若要跨電腦和瀏覽器識別登入的使用者，請新增對 [setAuthenticatedUserContect()](app-insights-api-custom-events-metrics.md#authenticated-users) 的呼叫。</span><span class="sxs-lookup"><span data-stu-id="e36c5-237">To identify a logged-in user across machines and browsers, add a call to [setAuthenticatedUserContect()](app-insights-api-custom-events-metrics.md#authenticated-users).</span></span>

## <span data-ttu-id="e36c5-238"><a name="q17"></a> 我是否已啟用 Application Insights 中的所有項目？</span><span class="sxs-lookup"><span data-stu-id="e36c5-238"><a name="q17"></a> Have I enabled everything in Application Insights?</span></span>
| <span data-ttu-id="e36c5-239">您應該會看到</span><span class="sxs-lookup"><span data-stu-id="e36c5-239">What you should see</span></span> | <span data-ttu-id="e36c5-240">如何取得</span><span class="sxs-lookup"><span data-stu-id="e36c5-240">How to get it</span></span> | <span data-ttu-id="e36c5-241">取得原因</span><span class="sxs-lookup"><span data-stu-id="e36c5-241">Why you want it</span></span> |
| --- | --- | --- |
| <span data-ttu-id="e36c5-242">可用性圖表</span><span class="sxs-lookup"><span data-stu-id="e36c5-242">Availability charts</span></span> |[<span data-ttu-id="e36c5-243">Web 測試</span><span class="sxs-lookup"><span data-stu-id="e36c5-243">Web tests</span></span>](app-insights-monitor-web-app-availability.md) |<span data-ttu-id="e36c5-244">知道您的 Web 應用程式已啟動</span><span class="sxs-lookup"><span data-stu-id="e36c5-244">Know your web app is up</span></span> |
| <span data-ttu-id="e36c5-245">伺服器應用程式效能：回應時間...</span><span class="sxs-lookup"><span data-stu-id="e36c5-245">Server app perf: response times, ...</span></span> |<span data-ttu-id="e36c5-246">[將 Application Insights 新增至您的專案](app-insights-asp-net.md)或[在伺服器上安裝 AI 狀態監視器](app-insights-monitor-performance-live-website-now.md) (或撰寫您自己的程式碼來[追蹤相依性](app-insights-api-custom-events-metrics.md#trackdependency))</span><span class="sxs-lookup"><span data-stu-id="e36c5-246">[Add Application Insights to your project](app-insights-asp-net.md) or [Install AI Status Monitor on server](app-insights-monitor-performance-live-website-now.md) (or write your own code to [track dependencies](app-insights-api-custom-events-metrics.md#trackdependency))</span></span> |<span data-ttu-id="e36c5-247">偵測效能問題</span><span class="sxs-lookup"><span data-stu-id="e36c5-247">Detect perf issues</span></span> |
| <span data-ttu-id="e36c5-248">相依性遙測</span><span class="sxs-lookup"><span data-stu-id="e36c5-248">Dependency telemetry</span></span> |[<span data-ttu-id="e36c5-249">在伺服器上安裝 AI 狀態監視器</span><span class="sxs-lookup"><span data-stu-id="e36c5-249">Install AI Status Monitor on server</span></span>](app-insights-monitor-performance-live-website-now.md) |<span data-ttu-id="e36c5-250">診斷資料庫或其他外部元件的問題</span><span class="sxs-lookup"><span data-stu-id="e36c5-250">Diagnose issues with databases or other external components</span></span> |
| <span data-ttu-id="e36c5-251">取得例外狀況的堆疊追蹤</span><span class="sxs-lookup"><span data-stu-id="e36c5-251">Get stack traces from exceptions</span></span> |<span data-ttu-id="e36c5-252">[在程式碼中插入 TrackException 呼叫](app-insights-asp-net-exceptions.md) (但部分會自動報告)</span><span class="sxs-lookup"><span data-stu-id="e36c5-252">[Insert TrackException calls in your code](app-insights-asp-net-exceptions.md) (but some are reported automatically)</span></span> |<span data-ttu-id="e36c5-253">偵測並診斷例外狀況</span><span class="sxs-lookup"><span data-stu-id="e36c5-253">Detect and diagnose exceptions</span></span> |
| <span data-ttu-id="e36c5-254">搜尋記錄追蹤</span><span class="sxs-lookup"><span data-stu-id="e36c5-254">Search log traces</span></span> |[<span data-ttu-id="e36c5-255">新增記錄配接器</span><span class="sxs-lookup"><span data-stu-id="e36c5-255">Add a logging adapter</span></span>](app-insights-asp-net-trace-logs.md) |<span data-ttu-id="e36c5-256">診斷例外狀況、效能問題</span><span class="sxs-lookup"><span data-stu-id="e36c5-256">Diagnose exceptions, perf issues</span></span> |
| <span data-ttu-id="e36c5-257">用戶端使用基本概念：頁面檢視、工作階段...</span><span class="sxs-lookup"><span data-stu-id="e36c5-257">Client usage basics: page views, sessions, ...</span></span> |[<span data-ttu-id="e36c5-258">網頁中的 JavaScript 初始設定式</span><span class="sxs-lookup"><span data-stu-id="e36c5-258">JavaScript initializer in web pages</span></span>](app-insights-javascript.md) |<span data-ttu-id="e36c5-259">流量分析</span><span class="sxs-lookup"><span data-stu-id="e36c5-259">Usage analytics</span></span> |
| <span data-ttu-id="e36c5-260">用戶端自訂度量</span><span class="sxs-lookup"><span data-stu-id="e36c5-260">Client custom metrics</span></span> |[<span data-ttu-id="e36c5-261">追蹤網頁中的呼叫</span><span class="sxs-lookup"><span data-stu-id="e36c5-261">Tracking calls in web pages</span></span>](app-insights-api-custom-events-metrics.md) |<span data-ttu-id="e36c5-262">增強使用者經驗</span><span class="sxs-lookup"><span data-stu-id="e36c5-262">Enhance user experience</span></span> |
| <span data-ttu-id="e36c5-263">伺服器自訂度量</span><span class="sxs-lookup"><span data-stu-id="e36c5-263">Server custom metrics</span></span> |[<span data-ttu-id="e36c5-264">追蹤伺服器中的呼叫</span><span class="sxs-lookup"><span data-stu-id="e36c5-264">Tracking calls in server</span></span>](app-insights-api-custom-events-metrics.md) |<span data-ttu-id="e36c5-265">商業智慧</span><span class="sxs-lookup"><span data-stu-id="e36c5-265">Business intelligence</span></span> |

## <a name="why-are-the-counts-in-search-and-metrics-charts-unequal"></a><span data-ttu-id="e36c5-266">為什麼 [搜尋] 和 [計量] 圖表中的計數不相等？</span><span class="sxs-lookup"><span data-stu-id="e36c5-266">Why are the counts in Search and Metrics charts unequal?</span></span>

<span data-ttu-id="e36c5-267">[取樣](app-insights-sampling.md)會減少從您應用程式實際傳送到入口網站的遙測項目 (要求、自訂事件等等) 數目。</span><span class="sxs-lookup"><span data-stu-id="e36c5-267">[Sampling](app-insights-sampling.md) reduces the number of telemetry items (requests, custom events, and so on) that are actually sent from your app to the portal.</span></span> <span data-ttu-id="e36c5-268">在「搜尋」中，您會看到實際收到的項目數目。</span><span class="sxs-lookup"><span data-stu-id="e36c5-268">In Search, you see the number of items actually received.</span></span> <span data-ttu-id="e36c5-269">在顯示事件計數的計量圖表中，您會看到發生的原始事件數目。</span><span class="sxs-lookup"><span data-stu-id="e36c5-269">In metric charts that display a count of events, you see the number of original events that occurred.</span></span> 

<span data-ttu-id="e36c5-270">每個傳輸的項目都帶有一個 `itemCount` 屬性，此屬性會顯示該項目代表的原始事件數目。</span><span class="sxs-lookup"><span data-stu-id="e36c5-270">Each item that is transmmitted carries an `itemCount` property that shows how many original events that item represents.</span></span> <span data-ttu-id="e36c5-271">若要觀察取樣的運作情況，您可以在 [分析] 中執行下列查詢：</span><span class="sxs-lookup"><span data-stu-id="e36c5-271">To observe sampling in operation, you can run this query in Analytics:</span></span>

```
    requests | summarize original_events = sum(itemCount), transmitted_events = count()
```


## <a name="automation"></a><span data-ttu-id="e36c5-272">自動化</span><span class="sxs-lookup"><span data-stu-id="e36c5-272">Automation</span></span>

### <a name="configuring-application-insights"></a><span data-ttu-id="e36c5-273">設定 Application Insights</span><span class="sxs-lookup"><span data-stu-id="e36c5-273">Configuring Application Insights</span></span>

<span data-ttu-id="e36c5-274">您可以[撰寫 PowerShell 指令碼](app-insights-powershell.md)以使用「Azure 資源監視器」來：</span><span class="sxs-lookup"><span data-stu-id="e36c5-274">You can [write PowerShell scripts](app-insights-powershell.md) using Azure Resource Monitor to:</span></span>

* <span data-ttu-id="e36c5-275">建立和更新 Application Insights 資源。</span><span class="sxs-lookup"><span data-stu-id="e36c5-275">Create and update Application Insights resources.</span></span>
* <span data-ttu-id="e36c5-276">設定定價方案。</span><span class="sxs-lookup"><span data-stu-id="e36c5-276">Set the pricing plan.</span></span>
* <span data-ttu-id="e36c5-277">取得檢測金鑰。</span><span class="sxs-lookup"><span data-stu-id="e36c5-277">Get the instrumentation key.</span></span>
* <span data-ttu-id="e36c5-278">新增計量警示。</span><span class="sxs-lookup"><span data-stu-id="e36c5-278">Add a metric alert.</span></span>
* <span data-ttu-id="e36c5-279">新增可用性測試。</span><span class="sxs-lookup"><span data-stu-id="e36c5-279">Add an availability test.</span></span>

<span data-ttu-id="e36c5-280">您無法設定「計量瀏覽器」報告或設定連續匯出。</span><span class="sxs-lookup"><span data-stu-id="e36c5-280">You can't set up a Metric Explorer report or set up continuous export.</span></span>

### <a name="querying-the-telemetry"></a><span data-ttu-id="e36c5-281">查詢遙測</span><span class="sxs-lookup"><span data-stu-id="e36c5-281">Querying the telemetry</span></span>

<span data-ttu-id="e36c5-282">請使用 [REST API](https://dev.applicationinsights.io/) 來執行[分析](app-insights-analytics.md)查詢。</span><span class="sxs-lookup"><span data-stu-id="e36c5-282">Use the [REST API](https://dev.applicationinsights.io/) to run [Analytics](app-insights-analytics.md) queries.</span></span>

## <a name="how-can-i-set-an-alert-on-an-event"></a><span data-ttu-id="e36c5-283">我要如何在事件上設定警示？</span><span class="sxs-lookup"><span data-stu-id="e36c5-283">How can I set an alert on an event?</span></span>

<span data-ttu-id="e36c5-284">Azure 警示僅針對計量。</span><span class="sxs-lookup"><span data-stu-id="e36c5-284">Azure alerts are only on metrics.</span></span> <span data-ttu-id="e36c5-285">請建立一個會在每次事件發生時超出值臨界值的自訂計量。</span><span class="sxs-lookup"><span data-stu-id="e36c5-285">Create a custom metric that crosses a value threshold whenever your event occurs.</span></span> <span data-ttu-id="e36c5-286">然後在該計量上設定警示。</span><span class="sxs-lookup"><span data-stu-id="e36c5-286">Then set an alert on the metric.</span></span> <span data-ttu-id="e36c5-287">請注意：每次該計量超出任一方向的臨界值時，您都會收到通知；不論初始值是高還是低，您都必須等到第一次超出時，才會收到通知；一律都會有幾分鐘的延遲。</span><span class="sxs-lookup"><span data-stu-id="e36c5-287">Note that: you'll get a notification whenever the metric crosses the threshold in either direction; you won't get a notification until the first crossing, no matter whether the initial value is high or low; there is always a latency of a few minutes.</span></span>

## <a name="are-there-data-transfer-charges-between-an-azure-web-app-and-application-insights"></a><span data-ttu-id="e36c5-288">Azure Web 應用程式與 Application Insights 之間的資料傳輸需要收費嗎？</span><span class="sxs-lookup"><span data-stu-id="e36c5-288">Are there data transfer charges between an Azure web app and Application Insights?</span></span>

* <span data-ttu-id="e36c5-289">如果您的 Azure Web 應用程式是裝載在具有 Application Insights 集合端點的資料中心內，就不會有費用。</span><span class="sxs-lookup"><span data-stu-id="e36c5-289">If your Azure web app is hosted in a data center where there is an Application Insights collection endpoint, there is no charge.</span></span> 
* <span data-ttu-id="e36c5-290">如果您的裝載資料中心內沒有任何集合端點，您應用程式的遙測資料就會產生 [Azure 傳出費用](https://azure.microsoft.com/pricing/details/bandwidth/)。</span><span class="sxs-lookup"><span data-stu-id="e36c5-290">If there is no collection endpoint in your host data center, then your app's telemetry will incur [Azure outgoing charges](https://azure.microsoft.com/pricing/details/bandwidth/).</span></span>

<span data-ttu-id="e36c5-291">這並不取決於您 Application Insights 資源的裝載位置。</span><span class="sxs-lookup"><span data-stu-id="e36c5-291">This doesn't depend on where your Application Insights resource is hosted.</span></span> <span data-ttu-id="e36c5-292">而是取決於我們端點的分佈。</span><span class="sxs-lookup"><span data-stu-id="e36c5-292">It just depends on the distribution of our endpoints.</span></span>

## <a name="can-i-send-telemetry-to-the-application-insights-portal"></a><span data-ttu-id="e36c5-293">我是否可以將遙測資料傳送給 Application Insights 入口網站？</span><span class="sxs-lookup"><span data-stu-id="e36c5-293">Can I send telemetry to the Application Insights portal?</span></span>

<span data-ttu-id="e36c5-294">建議您使用我們的 SDK 和使用 SDK API (app-insights-api-custom-events-metrics.md)。</span><span class="sxs-lookup"><span data-stu-id="e36c5-294">We recommend you use our SDKs and use the SDK API (app-insights-api-custom-events-metrics.md).</span></span> <span data-ttu-id="e36c5-295">SDK 有適用於各種[平台](app-insights-platforms.md)的各種變體。</span><span class="sxs-lookup"><span data-stu-id="e36c5-295">There are variants of the SDK for various [platforms](app-insights-platforms.md).</span></span> <span data-ttu-id="e36c5-296">這些 SDK 可處理緩衝、壓縮、節流、重試等。</span><span class="sxs-lookup"><span data-stu-id="e36c5-296">These SDKs handle buffering, compression, throttling, retries, and so on.</span></span> <span data-ttu-id="e36c5-297">不過，[擷取結構描述](https://github.com/Microsoft/ApplicationInsights-dotnet/tree/develop/Schema/PublicSchema)和[端點通訊協定](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/EndpointSpecs/ENDPOINT-PROTOCOL.md)是公用的。</span><span class="sxs-lookup"><span data-stu-id="e36c5-297">However, the [ingestion schema](https://github.com/Microsoft/ApplicationInsights-dotnet/tree/develop/Schema/PublicSchema) and [endpoint protocol](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/EndpointSpecs/ENDPOINT-PROTOCOL.md) are public.</span></span>

## <a name="can-i-monitor-an-intranet-web-server"></a><span data-ttu-id="e36c5-298">我是否可以監視內部網路 Web 伺服器？</span><span class="sxs-lookup"><span data-stu-id="e36c5-298">Can I monitor an intranet web server?</span></span>

<span data-ttu-id="e36c5-299">有兩種方式：</span><span class="sxs-lookup"><span data-stu-id="e36c5-299">Here are two methods:</span></span>

### <a name="firewall-door"></a><span data-ttu-id="e36c5-300">防火牆門</span><span class="sxs-lookup"><span data-stu-id="e36c5-300">Firewall door</span></span>

<span data-ttu-id="e36c5-301">可讓您的 Web 伺服器將遙測資料傳送給我們的端點 https://dc.services.visualstudio.com:443 和 https://rt.services.visualstudio.com:443 。</span><span class="sxs-lookup"><span data-stu-id="e36c5-301">Allow your web server to send telemetry to our endpoints https://dc.services.visualstudio.com:443 and https://rt.services.visualstudio.com:443.</span></span> 

### <a name="proxy"></a><span data-ttu-id="e36c5-302">Proxy</span><span class="sxs-lookup"><span data-stu-id="e36c5-302">Proxy</span></span>

<span data-ttu-id="e36c5-303">透過在 ApplicationInsights.config 中進行以下設定，即可將流量從您的伺服器路由到您內部網路上的閘道：</span><span class="sxs-lookup"><span data-stu-id="e36c5-303">Route traffic from your server to a gateway on your intranet, by setting this in ApplicationInsights.config:</span></span>

```XML
<TelemetryChannel>
    <EndpointAddress>your gateway endpoint</EndpointAddress>
</TelemetryChannel>
```

<span data-ttu-id="e36c5-304">您的閘道應該將流量路由至 https://dc.services.visualstudio.com:443/v2/track</span><span class="sxs-lookup"><span data-stu-id="e36c5-304">Your gateway should route the traffic to https://dc.services.visualstudio.com:443/v2/track</span></span>

## <a name="can-i-run-availability-web-tests-on-an-intranet-server"></a><span data-ttu-id="e36c5-305">我是否可以在內部網路伺服器上執行可用性 Web 測試？</span><span class="sxs-lookup"><span data-stu-id="e36c5-305">Can I run Availability web tests on an intranet server?</span></span>

<span data-ttu-id="e36c5-306">我們的 [Web 測試](app-insights-monitor-web-app-availability.md)是在分散於全球各地的網路節點上執行。</span><span class="sxs-lookup"><span data-stu-id="e36c5-306">Our [web tests](app-insights-monitor-web-app-availability.md) run on points of presence that are distributed around the globe.</span></span> <span data-ttu-id="e36c5-307">有兩個解決方案：</span><span class="sxs-lookup"><span data-stu-id="e36c5-307">There are two solutions:</span></span>

* <span data-ttu-id="e36c5-308">防火牆門 - 允許從[這個又長又可變更的 Web 測試代理程式清單](app-insights-ip-addresses.md)傳送要求給您的伺服器。</span><span class="sxs-lookup"><span data-stu-id="e36c5-308">Firewall door - Allow requests to your server from [the long and changeable list of web test agents](app-insights-ip-addresses.md).</span></span>
* <span data-ttu-id="e36c5-309">撰寫您自己的程式碼，以從內部網路內傳送定期要求給您的伺服器。</span><span class="sxs-lookup"><span data-stu-id="e36c5-309">Write your own code to send periodic requests to your server from inside your intranet.</span></span> <span data-ttu-id="e36c5-310">您可以針對這個目的執行 Visual Studio Web 測試。</span><span class="sxs-lookup"><span data-stu-id="e36c5-310">You could run Visual Studio web tests for this purpose.</span></span> <span data-ttu-id="e36c5-311">測試者可以使用 TrackAvailability() API 將結果傳送給 Application Insights。</span><span class="sxs-lookup"><span data-stu-id="e36c5-311">The tester could send the results to Application Insights using the TrackAvailability() API.</span></span>

## <a name="more-answers"></a><span data-ttu-id="e36c5-312">更多解答</span><span class="sxs-lookup"><span data-stu-id="e36c5-312">More answers</span></span>
* [<span data-ttu-id="e36c5-313">Application Insights 論壇</span><span class="sxs-lookup"><span data-stu-id="e36c5-313">Application Insights forum</span></span>](https://social.msdn.microsoft.com/Forums/vstudio/en-US/home?forum=ApplicationInsights)

<!--Link references-->

[data]: app-insights-data-retention-privacy.md
[platforms]: app-insights-platforms.md
[start]: app-insights-overview.md
[windows]: app-insights-windows-get-started.md
