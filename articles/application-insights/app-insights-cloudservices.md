---
title: "aaaApplication Azure 雲端服務的深入資訊 |Microsoft 文件"
description: "使用 Application Insights 有效地監視您的 Web 和背景工作角色"
services: application-insights
documentationcenter: 
keywords: "WAD2AI, Azure 診斷"
author: CFreemanwa
manager: carmonm
editor: alancameronwills
ms.assetid: 5c7a5b34-329e-42b7-9330-9dcbb9ff1f88
ms.service: application-insights
ms.devlang: na
ms.tgt_pltfrm: ibiza
ms.topic: get-started-article
ms.workload: tbd
ms.date: 05/05/2017
ms.author: bwren
ms.openlocfilehash: 6956ce423eea1e2cf387bd98250bae32d9501ed0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="application-insights-for-azure-cloud-services"></a><span data-ttu-id="4cfe5-104">Azure 雲端服務的 Application Insights</span><span class="sxs-lookup"><span data-stu-id="4cfe5-104">Application Insights for Azure Cloud Services</span></span>
<span data-ttu-id="4cfe5-105">您可以透過 [Application Insights][start] 來監視 [Microsoft Azure 雲端服務應用程式](https://azure.microsoft.com/services/cloud-services/)，它會結合 Application Insights SDK 的資料與雲端服務的 [Azure 診斷](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics)資料，來讓您了解應用程式的可用性、效能、失敗和使用情形。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-105">[Microsoft Azure Cloud service apps](https://azure.microsoft.com/services/cloud-services/) can be monitored by [Application Insights][start] for availability, performance, failures, and usage by combining data from Application Insights' SDKs with [Azure Diagnotics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) data from your Cloud Services.</span></span> <span data-ttu-id="4cfe5-106">Hello 您善加 hello 效能和效率 hello 中的應用程式的相關意見反應，可以讓謹慎的選擇 hello 方向 hello 設計的每個開發週期中。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-106">With hello feedback you get about hello performance and effectiveness of your app in hello wild, you can make informed choices about hello direction of hello design in each development lifecycle.</span></span>

![範例](./media/app-insights-cloudservices/sample.png)

## <a name="before-you-start"></a><span data-ttu-id="4cfe5-108">開始之前</span><span class="sxs-lookup"><span data-stu-id="4cfe5-108">Before you start</span></span>
<span data-ttu-id="4cfe5-109">您需要：</span><span class="sxs-lookup"><span data-stu-id="4cfe5-109">You'll need:</span></span>

* <span data-ttu-id="4cfe5-110">[Microsoft Azure](http://azure.com) 的訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-110">A subscription with [Microsoft Azure](http://azure.com).</span></span> <span data-ttu-id="4cfe5-111">使用 Microsoft 帳戶登入，可能是針對 Windows、XBox Live 或其他 Microsoft 雲端服務具備的帳戶。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-111">Sign in with a Microsoft account, which you might have for Windows, XBox Live, or other Microsoft cloud services.</span></span> 
* <span data-ttu-id="4cfe5-112">Microsoft Azure 工具 2.9 或更新版本</span><span class="sxs-lookup"><span data-stu-id="4cfe5-112">Microsoft Azure tools 2.9 or later</span></span>
* <span data-ttu-id="4cfe5-113">開發人員分析工具 7.10 或更新版本</span><span class="sxs-lookup"><span data-stu-id="4cfe5-113">Developer Analytics Tools 7.10 or later</span></span>

## <a name="quick-start"></a><span data-ttu-id="4cfe5-114">快速入門</span><span class="sxs-lookup"><span data-stu-id="4cfe5-114">Quick start</span></span>
<span data-ttu-id="4cfe5-115">hello 與 Application Insights 雲端服務是當您發行服務 tooAzure 時的 toochoose 最快速且輕鬆的方式 toomonitor。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-115">hello quickest and easiest way toomonitor your cloud service with Application Insights is toochoose that option when you publish your service tooAzure.</span></span>

![範例](./media/app-insights-cloudservices/azure-cloud-application-insights.png)

<span data-ttu-id="4cfe5-117">此選項儀器，您的應用程式在執行階段，讓您所有的 hello 遙測 toomonitor 要求、 例外狀況，以及您的 web 角色，以及效能中的相依性，您需要從背景工作角色的計數器。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-117">This option instruments your app at run time, giving you all hello telemetry you need toomonitor requests, exceptions, and dependencies in your web role, as well as performance counters from your worker roles.</span></span> <span data-ttu-id="4cfe5-118">任何應用程式所產生的診斷追蹤也會傳送 tooApplication 深入資訊。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-118">Any diagnostic traces generated by your app are also sent tooApplication Insights.</span></span>

<span data-ttu-id="4cfe5-119">如果這就是您所需的一切，您就已大功告成！</span><span class="sxs-lookup"><span data-stu-id="4cfe5-119">If that's all you need, you're done!</span></span> <span data-ttu-id="4cfe5-120">接下來的步驟包括[檢視來自您應用程式的度量](app-insights-metrics-explorer.md)、[利用分析查詢您的資料](app-insights-analytics.md)，還可能包括設定[儀表板](app-insights-dashboards.md)。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-120">Next steps are [viewing metrics from your app](app-insights-metrics-explorer.md), [querying your data with Analytics](app-insights-analytics.md), and maybe setting up a [dashboard](app-insights-dashboards.md).</span></span> <span data-ttu-id="4cfe5-121">您可能會想 tooset[可用性測試](app-insights-monitor-web-app-availability.md)和[加入程式碼 tooyour 網頁](app-insights-javascript.md)toomonitor hello 瀏覽器中的效能。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-121">You might want tooset up [availability tests](app-insights-monitor-web-app-availability.md) and [add code tooyour web pages](app-insights-javascript.md) toomonitor performance in hello browser.</span></span>

<span data-ttu-id="4cfe5-122">但是您也可以取得更多選項：</span><span class="sxs-lookup"><span data-stu-id="4cfe5-122">But you can also get more options:</span></span>

* <span data-ttu-id="4cfe5-123">從不同元件傳送資料和組建組態 tooseparate 資源。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-123">Send data from different components and build configurations tooseparate resources.</span></span>
* <span data-ttu-id="4cfe5-124">新增來自您應用程式的自訂遙測。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-124">Add custom telemetry from your app.</span></span>

<span data-ttu-id="4cfe5-125">如果這些選項屬於感興趣 tooyou，閱讀。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-125">If those options are of interest tooyou, read on.</span></span>

## <a name="sample-application-instrumented-with-application-insights"></a><span data-ttu-id="4cfe5-126">使用 Application Insights 檢測的範例應用程式</span><span class="sxs-lookup"><span data-stu-id="4cfe5-126">Sample Application instrumented with Application Insights</span></span>
<span data-ttu-id="4cfe5-127">看看這[範例應用程式](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService)Application Insights 加入時所在 tooa 雲端服務與 Azure 中裝載兩個背景工作角色。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-127">Take a look at this [sample application](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) in which Application Insights is added tooa cloud service with two worker roles hosted in Azure.</span></span> 

<span data-ttu-id="4cfe5-128">以下會告訴您如何 tooadapt 雲端服務專案中 hello 相同的方式。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-128">What follows tells you how tooadapt your own cloud service project in hello same way.</span></span>

## <a name="plan-resources-and-resource-groups"></a><span data-ttu-id="4cfe5-129">規劃資源和資源群組</span><span class="sxs-lookup"><span data-stu-id="4cfe5-129">Plan resources and resource groups</span></span>
<span data-ttu-id="4cfe5-130">從您的應用程式的 hello 遙測是儲存、 分析並顯示在類型 Application Insights 的 Azure 資源。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-130">hello telemetry from your app is stored, analyzed and displayed in an Azure resource of type Application Insights.</span></span> 

<span data-ttu-id="4cfe5-131">每個資源所屬 tooa 資源群組。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-131">Each resource belongs tooa resource group.</span></span> <span data-ttu-id="4cfe5-132">資源群組用來管理成本，授與存取 tooteam 成員和 toodeploy 更新單一協調交易。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-132">Resource groups are used for managing costs, for granting access tooteam members, and toodeploy updates in a single coordinated transaction.</span></span> <span data-ttu-id="4cfe5-133">例如，您可以[撰寫指令碼 toodeploy](../azure-resource-manager/resource-group-template-deploy.md) Azure 雲端服務和其的 Application Insights 監視在一個作業之內的資源。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-133">For example, you could [write a script toodeploy](../azure-resource-manager/resource-group-template-deploy.md) an Azure Cloud Service and its Application Insights monitoring resources all in one operation.</span></span>

### <a name="resources-for-components"></a><span data-ttu-id="4cfe5-134">元件的資源</span><span class="sxs-lookup"><span data-stu-id="4cfe5-134">Resources for components</span></span>
<span data-ttu-id="4cfe5-135">hello 建議配置是 toocreate 不同的資源，您的應用程式-也就是每個 web 角色和背景工作角色的每個元件。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-135">hello recommended scheme is toocreate a separate resource for each component of your application - that is, each web role and worker role.</span></span> <span data-ttu-id="4cfe5-136">您可以分別分析每個元件，但是可以建立[儀表板](app-insights-dashboards.md)，結合 hello 重要圖表來自所有 hello 元件，以便您可以比較，並監視在一起。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-136">You can analyze each component separately, but can create a [dashboard](app-insights-dashboards.md) that brings together hello key charts from all hello components, so that you can compare and monitor them together.</span></span> 

<span data-ttu-id="4cfe5-137">替代的配置會從多個角色 toohello toosend hello 遙測相同的資源，但[加入維度屬性 tooeach 遙測項目](app-insights-api-filtering-sampling.md#add-properties-itelemetryinitializer)識別其來源的角色。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-137">An alternative scheme is toosend hello telemetry from more than one role toohello same resource, but [add a dimension property tooeach telemetry item](app-insights-api-filtering-sampling.md#add-properties-itelemetryinitializer) that identifies its source role.</span></span> <span data-ttu-id="4cfe5-138">在此配置中，度量的圖表，例如例外狀況通常顯示 hello 中的 hello 計數的彙總不同的角色，但是您可以依 hello 角色識別項時所需分割 hello 圖表。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-138">In this scheme, metric charts such as exceptions normally show an aggregation of hello counts from hello different roles, but you can segment hello chart by hello role identifier when required.</span></span> <span data-ttu-id="4cfe5-139">Hello 也可以篩選搜尋相同的維度。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-139">Searches can also be filtered by hello same dimension.</span></span> <span data-ttu-id="4cfe5-140">這個替代方案可便於 tooview 在 hello 相同的時間，但也可能導致 toosome 混淆 hello 角色之間的所有項目。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-140">This alternative makes it a bit easier tooview everything at hello same time, but could also lead toosome confusion between hello roles.</span></span>

<span data-ttu-id="4cfe5-141">瀏覽器遙測通常包含在 hello 做為其伺服器端 web 角色有相同的資源。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-141">Browser telemetry is usually included in hello same resource as its server-side web role.</span></span>

<span data-ttu-id="4cfe5-142">將 hello 不同元件的 hello Application Insights 資源放在一個資源群組。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-142">Put hello Application Insights resources for hello different components in one resource group.</span></span> <span data-ttu-id="4cfe5-143">這可讓您輕鬆 toomanage 一起。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-143">This makes it easy toomanage them together.</span></span> 

### <a name="separating-development-test-and-production"></a><span data-ttu-id="4cfe5-144">區分開發、測試及生產環境</span><span class="sxs-lookup"><span data-stu-id="4cfe5-144">Separating development, test, and production</span></span>
<span data-ttu-id="4cfe5-145">如果您正在開發的自訂事件您下一步 功能，即時 hello 舊版本時，您會想 toosend hello 開發遙測 tooa 個別 Application Insights 資源。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-145">If you are developing custom events for your next feature while hello previous version is live, you want toosend hello development telemetry tooa separate Application Insights resource.</span></span> <span data-ttu-id="4cfe5-146">否則它會需要硬 toofind 您測試的遙測之間所有 hello hello 即時網站的流量。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-146">Otherwise it will be hard toofind your test telemetry among all hello traffic from hello live site.</span></span>

<span data-ttu-id="4cfe5-147">tooavoid 這種情況下，建立個別針對每個組建組態或 「 戳記 」 （開發、 測試、 生產環境中，...） 的系統資源。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-147">tooavoid this situation, create separate resources for each build configuration or 'stamp' (development, test, production, ...) of your system.</span></span> <span data-ttu-id="4cfe5-148">將每個組建組態的 hello 資源放在不同的資源群組。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-148">Put hello resources for each build configuration in a separate resource group.</span></span> 

<span data-ttu-id="4cfe5-149">toosend hello 遙測 toohello 適當資源，您可以設定 hello Application Insights SDK，讓它挑選不同的檢測金鑰視 hello 組建組態而定。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-149">toosend hello telemetry toohello appropriate resources, you can set up hello Application Insights SDK so that it picks up a different instrumentation key depending on hello build configuration.</span></span> 

## <a name="create-an-application-insights-resource-for-each-role"></a><span data-ttu-id="4cfe5-150">為每個角色建立 Application Insights 資源</span><span class="sxs-lookup"><span data-stu-id="4cfe5-150">Create an Application Insights resource for each role</span></span>
<span data-ttu-id="4cfe5-151">如果您已經決定 toocreate 個別針對每個角色的資源，而且可能是個別設定每個組建組態-則是最簡單的 toocreate hello Application Insights 入口網站中的所有。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-151">If you've decided toocreate a separate resource for each role - and perhaps a separate set for each build configuration - then it's easiest toocreate them all in hello Application Insights portal.</span></span> <span data-ttu-id="4cfe5-152">(如果您經常建立資源，您可以[hello 程序自動化](app-insights-powershell.md)。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-152">(If you create resources a lot, you can [automate hello process](app-insights-powershell.md).</span></span>

1. <span data-ttu-id="4cfe5-153">在 hello [Azure 入口網站][portal]，建立新的 Application Insights 資源。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-153">In hello [Azure portal][portal], create a new Application Insights resource.</span></span> <span data-ttu-id="4cfe5-154">針對應用程式類型，選擇 ASP.NET 應用程式。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-154">For application type, choose ASP.NET app.</span></span> 

    ![按一下 新增，然後按一下Application Insights](./media/app-insights-cloudservices/01-new.png)
2. <span data-ttu-id="4cfe5-156">請注意，每個資源都是以「檢測金鑰」作為識別。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-156">Note that each resource is identified by an Instrumentation Key.</span></span> <span data-ttu-id="4cfe5-157">您可能需要此稍後如果您想 toomanually 設定或確認 hello SDK hello 組態。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-157">You might need this later if you want toomanually configure or verify hello configuration of hello SDK.</span></span>

    ![按一下 內容選取 hello 金鑰，請按 ctrl + C](./media/app-insights-cloudservices/02-props.png) 

## <a name="set-up-azure-diagnostics-for-each-role"></a><span data-ttu-id="4cfe5-159">設定每個角色的 Azure 診斷</span><span class="sxs-lookup"><span data-stu-id="4cfe5-159">Set up Azure Diagnostics for each role</span></span>
<span data-ttu-id="4cfe5-160">設定此選項 toomonitor 使用 Application Insights 的應用程式。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-160">Set this option toomonitor your app with Application Insights.</span></span> <span data-ttu-id="4cfe5-161">針對 Web 角色，這除了提供使用情況分析之外，也提供效能監視、警示及診斷。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-161">For web roles, this provides performance monitoring, alerts, and diagnostics, as well as usage analysis.</span></span> <span data-ttu-id="4cfe5-162">對於其他角色，您可以搜尋和監視 Azure 診斷，例如重新啟動、 效能計數器，以及呼叫 tooSystem.Diagnostics.Trace。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-162">For other roles, you can search and monitor Azure diagnostics such as restart, performance counters, and calls tooSystem.Diagnostics.Trace.</span></span> 

1. <span data-ttu-id="4cfe5-163">在 Visual Studio 方案總管 中，在&lt;YourCloudService&gt;，角色，開啟每個角色的 hello 屬性。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-163">In Visual Studio Solution Explorer, under &lt;YourCloudService&gt;, Roles, open hello properties of each role.</span></span>
2. <span data-ttu-id="4cfe5-164">在**組態**，將**傳送診斷資料 tooApplication Insights**和選取 hello 適當您稍早建立的 Application Insights 資源。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-164">In **Configuration**, set **Send diagnostics data tooApplication Insights** and select hello appropriate Application Insights resource that you created earlier.</span></span>

<span data-ttu-id="4cfe5-165">如果您已決定 toouse 個別的 Application Insights 資源，每個組建組態，請先選取 hello 組態。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-165">If you have decided toouse a separate Application Insights resource for each build configuration, select hello configuration first.</span></span>

![在 hello 內容的每個 Azure 角色設定 Application Insights](./media/app-insights-cloudservices/configure-azure-diagnostics.png)

<span data-ttu-id="4cfe5-167">這是插入名為 hello 檔案中的 Application Insights 檢測金鑰的 hello 效果`ServiceConfiguration.*.cscfg`。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-167">This has hello effect of inserting your Application Insights instrumentation keys into hello files named `ServiceConfiguration.*.cscfg`.</span></span> <span data-ttu-id="4cfe5-168">([範例程式碼](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/AzureEmailService/ServiceConfiguration.Cloud.cscfg))。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-168">([Sample code](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/AzureEmailService/ServiceConfiguration.Cloud.cscfg)).</span></span>

<span data-ttu-id="4cfe5-169">如果您想傳送的診斷資訊 tooApplication Insights toovary hello 層級，則您可以這樣[藉由編輯 hello`.cscfg`直接檔案](app-insights-azure-diagnostics.md)。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-169">If you want toovary hello level of diagnostic information sent tooApplication Insights, you can do so [by editing hello `.cscfg` files directly](app-insights-azure-diagnostics.md).</span></span>

## <span data-ttu-id="4cfe5-170"><a name="sdk"></a>安裝每個專案中的 hello SDK</span><span class="sxs-lookup"><span data-stu-id="4cfe5-170"><a name="sdk"></a>Install hello SDK in each project</span></span>
<span data-ttu-id="4cfe5-171">此選項會增加 hello 能力 tooadd 自訂商務遙測 tooany 角色，您的應用程式如何使用和執行進一步分析。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-171">This option adds hello ability tooadd custom business telemetry tooany role, for a closer analysis of how your application is used and performs.</span></span>

<span data-ttu-id="4cfe5-172">在 Visual Studio 中，設定每個雲端應用程式專案的 hello Application Insights SDK。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-172">In Visual Studio, configure hello Application Insights SDK for each cloud app project.</span></span>

1. <span data-ttu-id="4cfe5-173">**Web 角色**: hello 專案上按一下滑鼠右鍵，然後選擇 **設定 Application Insights**或**新增 > Application Insights 遙測**。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-173">**Web roles**: Right-click hello project and choose **Configure Application Insights** or **Add > Application Insights telemetry**.</span></span>

2. <span data-ttu-id="4cfe5-174">**背景工作角色**：</span><span class="sxs-lookup"><span data-stu-id="4cfe5-174">**Worker roles**:</span></span> 
 * <span data-ttu-id="4cfe5-175">Hello 專案上按一下滑鼠右鍵，然後選取**管理 Nuget 封裝**。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-175">Right-click hello project and select **Manage Nuget Packages**.</span></span>
 * <span data-ttu-id="4cfe5-176">新增[適用於 Windows 伺服器的 Application Insights](https://www.nuget.org/packages/Microsoft.ApplicationInsights.WindowsServer/)。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-176">Add [Application Insights for Windows Servers](https://www.nuget.org/packages/Microsoft.ApplicationInsights.WindowsServer/).</span></span>

    ![搜尋「Application Insights」](./media/app-insights-cloudservices/04-ai-nuget.png)

3. <span data-ttu-id="4cfe5-178">設定 hello SDK toosend 資料 toohello Application Insights 資源。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-178">Configure hello SDK toosend data toohello Application Insights resource.</span></span>

    <span data-ttu-id="4cfe5-179">在適當的啟動函數中，設定 hello 組態設定從 hello 檢測金鑰 hello.cscfg 檔案中：</span><span class="sxs-lookup"><span data-stu-id="4cfe5-179">In a suitable startup function, set hello instrumentation key from hello configuration setting in hello .cscfg file:</span></span>
 
    ```C#
   
     TelemetryConfiguration.Active.InstrumentationKey = RoleEnvironment.GetConfigurationSettingValue("APPINSIGHTS_INSTRUMENTATIONKEY");
    ```
   
    <span data-ttu-id="4cfe5-180">對於應用程式中的每個角色執行這項操作。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-180">Do this for each role in your application.</span></span> <span data-ttu-id="4cfe5-181">請參閱 hello 範例：</span><span class="sxs-lookup"><span data-stu-id="4cfe5-181">See hello examples:</span></span>
   
   * [<span data-ttu-id="4cfe5-182">Web 角色</span><span class="sxs-lookup"><span data-stu-id="4cfe5-182">Web role</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Global.asax.cs#L27)
   * [<span data-ttu-id="4cfe5-183">背景工作角色</span><span class="sxs-lookup"><span data-stu-id="4cfe5-183">Worker role</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L232)
   * [<span data-ttu-id="4cfe5-184">針對網頁</span><span class="sxs-lookup"><span data-stu-id="4cfe5-184">For web pages</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Views/Shared/_Layout.cshtml#L13) 
4. <span data-ttu-id="4cfe5-185">設定 hello ApplicationInsights.config 檔案 toobe 一律複製 toohello 輸出目錄。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-185">Set hello ApplicationInsights.config file toobe copied always toohello output directory.</span></span> 
   
    <span data-ttu-id="4cfe5-186">（在 hello.config 檔案中，您會看到訊息詢問您 tooplace hello 檢測金鑰那里。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-186">(In hello .config file, you'll see messages asking you tooplace hello instrumentation key there.</span></span> <span data-ttu-id="4cfe5-187">不過，為雲端應用程式是較佳的 tooset 從 hello.cscfg 檔案。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-187">However, for cloud applications it's better tooset it from hello .cscfg file.</span></span> <span data-ttu-id="4cfe5-188">這可確保該 hello 角色正確識別 hello 入口網站中。）</span><span class="sxs-lookup"><span data-stu-id="4cfe5-188">This ensures that hello role is correctly identified in hello portal.)</span></span>

#### <a name="run-and-publish-hello-app"></a><span data-ttu-id="4cfe5-189">執行及發行 hello 應用程式</span><span class="sxs-lookup"><span data-stu-id="4cfe5-189">Run and publish hello app</span></span>
<span data-ttu-id="4cfe5-190">執行應用程式，並且登入 Azure。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-190">Run your app, and sign into Azure.</span></span> <span data-ttu-id="4cfe5-191">您建立開啟 hello Application Insights 資源，而且您會看到中出現的個別資料點[搜尋](app-insights-diagnostic-search.md)，並彙總中的資料[度量總管](app-insights-metrics-explorer.md)。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-191">Open hello Application Insights resources you created, and you'll see individual data points appearing in [Search](app-insights-diagnostic-search.md), and aggregated data in [Metric Explorer](app-insights-metrics-explorer.md).</span></span> 

<span data-ttu-id="4cfe5-192">加入多個遙測-請參閱下列的-hello 章節，然後發行您的應用程式 tooget 即時診斷和使用方式的意見反應。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-192">Add more telemetry - see hello sections below - and then publish your app tooget live diagnostic and usage feedback.</span></span> 

#### <a name="no-data"></a><span data-ttu-id="4cfe5-193">沒有資料？</span><span class="sxs-lookup"><span data-stu-id="4cfe5-193">No data?</span></span>
* <span data-ttu-id="4cfe5-194">開啟 hello[搜尋][ diagnostic]磚，toosee 個別事件。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-194">Open hello [Search][diagnostic] tile, toosee individual events.</span></span>
* <span data-ttu-id="4cfe5-195">使用 hello 應用程式，使其產生某些遙測開啟不同的頁面。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-195">Use hello application, opening different pages so that it generates some telemetry.</span></span>
* <span data-ttu-id="4cfe5-196">請稍等片刻，然後按一下 [重新整理]。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-196">Wait a few seconds and click Refresh.</span></span>
* <span data-ttu-id="4cfe5-197">請參閱[疑難排解][qna]。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-197">See [Troubleshooting][qna].</span></span>

## <a name="view-azure-diagnostic-events"></a><span data-ttu-id="4cfe5-198">檢視 Azure 診斷事件</span><span class="sxs-lookup"><span data-stu-id="4cfe5-198">View Azure Diagnostic events</span></span>
<span data-ttu-id="4cfe5-199">其中 toofind hello [Azure 診斷](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics)Application Insights 中的資訊：</span><span class="sxs-lookup"><span data-stu-id="4cfe5-199">Where toofind hello [Azure Diagnostics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) information in Application Insights:</span></span>

* <span data-ttu-id="4cfe5-200">效能計數器顯示為自訂度量。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-200">Performance counters are displayed as custom metrics.</span></span> 
* <span data-ttu-id="4cfe5-201">Windows 事件記錄檔顯示為追蹤和自訂事件。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-201">Windows event logs are shown as traces and custom events.</span></span>
* <span data-ttu-id="4cfe5-202">應用程式記錄檔、ETW 記錄檔和任何診斷基礎結構記錄檔顯示為追蹤。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-202">Application logs, ETW logs, and any diagnostics infrastructure logs appear as traces.</span></span>

<span data-ttu-id="4cfe5-203">toosee 效能計數器和事件，計數開啟[計量瀏覽器](app-insights-metrics-explorer.md)並加入新的圖表：</span><span class="sxs-lookup"><span data-stu-id="4cfe5-203">toosee performance counters and counts of events, open [Metrics Explorer](app-insights-metrics-explorer.md) and add a new chart:</span></span>

![Azure 診斷資料](./media/app-insights-cloudservices/23-wad.png)

<span data-ttu-id="4cfe5-205">使用[搜尋](app-insights-diagnostic-search.md)或[分析查詢](app-insights-analytics-tour.md)toosearch 跨各種追蹤記錄檔傳送 Azure 診斷的 hello。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-205">Use [Search](app-insights-diagnostic-search.md) or an [Analytics query](app-insights-analytics-tour.md) toosearch across hello various trace logs sent by Azure Diagnostics.</span></span> <span data-ttu-id="4cfe5-206">例如，假設您有未處理的例外狀況而導致角色 toocrash 和回收。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-206">For example, suppose you have an unhandled exception which caused a Role toocrash and recycle.</span></span> <span data-ttu-id="4cfe5-207">這項資訊就會出現在 hello 應用程式通道的 Windows 事件記錄檔。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-207">That information would show up in hello Application channel of Windows Event Log.</span></span> <span data-ttu-id="4cfe5-208">您可以使用搜尋 toolook 在 hello Windows 事件記錄檔錯誤，並取得 hello 例外狀況的 hello 完整的堆疊追蹤。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-208">You can use Search toolook at hello Windows Event Log error and get hello full stack trace for hello exception.</span></span> <span data-ttu-id="4cfe5-209">幫助您找出 hello hello 問題根本原因。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-209">That will help you find hello root cause of hello issue.</span></span>

![Azure 診斷搜尋](./media/app-insights-cloudservices/25-wad.png)

## <a name="more-telemetry"></a><span data-ttu-id="4cfe5-211">更多遙測</span><span class="sxs-lookup"><span data-stu-id="4cfe5-211">More telemetry</span></span>
<span data-ttu-id="4cfe5-212">hello 各節顯示如何從您的應用程式的不同層面的 tooget 其他遙測。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-212">hello sections below show how tooget additional telemetry from different aspects of your application.</span></span>

## <a name="track-requests-from-worker-roles"></a><span data-ttu-id="4cfe5-213">從背景工作角色追蹤要求</span><span class="sxs-lookup"><span data-stu-id="4cfe5-213">Track Requests from Worker roles</span></span>
<span data-ttu-id="4cfe5-214">在 web 角色 hello 要求模組會自動收集有關 HTTP 要求的資料。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-214">In web roles, hello requests module automatically collects data about HTTP requests.</span></span> <span data-ttu-id="4cfe5-215">請參閱 hello[範例 MVCWebRole](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/MvcWebRole)如需如何覆寫 hello 預設集合行為的範例。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-215">See hello [sample MVCWebRole](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/MvcWebRole) for examples of how you can override hello default collection behavior.</span></span> 

<span data-ttu-id="4cfe5-216">您可以擷取呼叫 tooworker 角色 hello 效能追蹤它們在 hello 與 HTTP 要求相同的方式。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-216">You can capture hello performance of calls tooworker roles by tracking them in hello same way as HTTP requests.</span></span> <span data-ttu-id="4cfe5-217">在 Application Insights hello 要求遙測類型會測量具名的伺服器端工作可以逾時，並可獨立成功或失敗的單位。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-217">In Application Insights, hello Request telemetry type measures a unit of named server-side work that can be timed and can independently succeed or fail.</span></span> <span data-ttu-id="4cfe5-218">雖然 hello SDK，即可自動擷取 HTTP 要求，您可以插入您自己的程式碼 tootrack 要求 tooworker 角色。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-218">While HTTP requests are captured automatically by hello SDK, you can insert your own code tootrack requests tooworker roles.</span></span>

<span data-ttu-id="4cfe5-219">請參閱 hello 兩個範例背景工作角色檢測的 tooreport 要求： [WorkerRoleA](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleA)和[WorkerRoleB](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleB)</span><span class="sxs-lookup"><span data-stu-id="4cfe5-219">See hello two sample worker roles instrumented tooreport requests: [WorkerRoleA](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleA) and [WorkerRoleB](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleB)</span></span>

## <a name="exceptions"></a><span data-ttu-id="4cfe5-220">例外狀況</span><span class="sxs-lookup"><span data-stu-id="4cfe5-220">Exceptions</span></span>
<span data-ttu-id="4cfe5-221">如需如何從不同的 Web 應用程式類型收集未處理的例外狀況的資訊，請參閱 [在 Application Insights 中監視例外狀況](app-insights-asp-net-exceptions.md) 。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-221">See [Monitoring Exceptions in Application Insights](app-insights-asp-net-exceptions.md) for information on how you can collect unhandled exceptions from different web application types.</span></span>

<span data-ttu-id="4cfe5-222">hello 範例 web 角色有 MVC5 及 Web API 2 控制器。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-222">hello sample web role has MVC5 and Web API 2 controllers.</span></span> <span data-ttu-id="4cfe5-223">hello 從 hello 兩個未處理的例外狀況會擷取以 hello 下列處理常式：</span><span class="sxs-lookup"><span data-stu-id="4cfe5-223">hello unhandled exceptions from hello two are captured with hello following handlers:</span></span>

* <span data-ttu-id="4cfe5-224">針對 MVC5 控制器，[這裡](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/FilterConfig.cs#L12)設定的 [AiHandleErrorAttribute](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiHandleErrorAttribute.cs)</span><span class="sxs-lookup"><span data-stu-id="4cfe5-224">[AiHandleErrorAttribute](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiHandleErrorAttribute.cs) set up [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/FilterConfig.cs#L12) for MVC5 controllers</span></span>
* <span data-ttu-id="4cfe5-225">針對 Web API 2 控制器，[這裡](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/WebApiConfig.cs#L25)設定的 [AiWebApiExceptionLogger](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiWebApiExceptionLogger.cs)</span><span class="sxs-lookup"><span data-stu-id="4cfe5-225">[AiWebApiExceptionLogger](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiWebApiExceptionLogger.cs) set up [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/WebApiConfig.cs#L25) for Web API 2 controllers</span></span>

<span data-ttu-id="4cfe5-226">背景工作角色有兩種方式 tootrack 例外狀況：</span><span class="sxs-lookup"><span data-stu-id="4cfe5-226">For worker roles, there are two ways tootrack exceptions:</span></span>

* <span data-ttu-id="4cfe5-227">TrackException(ex)</span><span class="sxs-lookup"><span data-stu-id="4cfe5-227">TrackException(ex)</span></span>
* <span data-ttu-id="4cfe5-228">如果您已經加入 hello Application Insights 追蹤接聽程式 NuGet 封裝，您可以使用**System.Diagnostics.Trace** toolog 例外狀況。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-228">If you have added hello Application Insights trace listener NuGet package, you can use **System.Diagnostics.Trace** toolog exceptions.</span></span> [<span data-ttu-id="4cfe5-229">程式碼範例。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-229">Code example.</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L107)

## <a name="performance-counters"></a><span data-ttu-id="4cfe5-230">效能計數器</span><span class="sxs-lookup"><span data-stu-id="4cfe5-230">Performance Counters</span></span>
<span data-ttu-id="4cfe5-231">預設會收集 hello 下列計數器：</span><span class="sxs-lookup"><span data-stu-id="4cfe5-231">hello following counters are collected by default:</span></span>

    * <span data-ttu-id="4cfe5-232">\Process(??APP_WIN32_PROC??)\%Processor Time</span><span class="sxs-lookup"><span data-stu-id="4cfe5-232">\Process(??APP_WIN32_PROC??)\% Processor Time</span></span>
    * <span data-ttu-id="4cfe5-233">\Memory\Available Bytes</span><span class="sxs-lookup"><span data-stu-id="4cfe5-233">\Memory\Available Bytes</span></span>
    * <span data-ttu-id="4cfe5-234">\.NET CLR Exceptions(??APP_CLR_PROC??)\# of Exceps Thrown / sec</span><span class="sxs-lookup"><span data-stu-id="4cfe5-234">\.NET CLR Exceptions(??APP_CLR_PROC??)\# of Exceps Thrown / sec</span></span>
    * <span data-ttu-id="4cfe5-235">\Process(??APP_WIN32_PROC??)\Private Bytes</span><span class="sxs-lookup"><span data-stu-id="4cfe5-235">\Process(??APP_WIN32_PROC??)\Private Bytes</span></span>
    * <span data-ttu-id="4cfe5-236">\Process(??APP_WIN32_PROC??)\IO Data Bytes/sec</span><span class="sxs-lookup"><span data-stu-id="4cfe5-236">\Process(??APP_WIN32_PROC??)\IO Data Bytes/sec</span></span>
    * <span data-ttu-id="4cfe5-237">\Processor(_Total)\% Processor Time</span><span class="sxs-lookup"><span data-stu-id="4cfe5-237">\Processor(_Total)\% Processor Time</span></span>

<span data-ttu-id="4cfe5-238">若是 Web 角色，也會收集這些計數器︰</span><span class="sxs-lookup"><span data-stu-id="4cfe5-238">For web roles, these counters are also collected:</span></span>

    * <span data-ttu-id="4cfe5-239">\ASP.NET Applications(??APP_W3SVC_PROC??)\Requests/Sec</span><span class="sxs-lookup"><span data-stu-id="4cfe5-239">\ASP.NET Applications(??APP_W3SVC_PROC??)\Requests/Sec</span></span>
    * <span data-ttu-id="4cfe5-240">\ASP.NET Applications(??APP_W3SVC_PROC??)\Request Execution Time</span><span class="sxs-lookup"><span data-stu-id="4cfe5-240">\ASP.NET Applications(??APP_W3SVC_PROC??)\Request Execution Time</span></span>
    * <span data-ttu-id="4cfe5-241">\ASP.NET Applications(??APP_W3SVC_PROC??)\Requests In Application Queue</span><span class="sxs-lookup"><span data-stu-id="4cfe5-241">\ASP.NET Applications(??APP_W3SVC_PROC??)\Requests In Application Queue</span></span>

<span data-ttu-id="4cfe5-242">您可以藉由編輯 ApplicationInsights.config 來指定額外的自訂或其他 Windows 效能計數器，[如此範例所示](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/ApplicationInsights.config#L14)。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-242">You can specify additional custom or other windows performance counters by editing ApplicationInsights.config [as in this example](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/ApplicationInsights.config#L14).</span></span>

  ![效能計數器](./media/app-insights-cloudservices/OLfMo2f.png)

## <a name="correlated-telemetry-for-worker-roles"></a><span data-ttu-id="4cfe5-244">背景工作角色的相互關聯遙測</span><span class="sxs-lookup"><span data-stu-id="4cfe5-244">Correlated Telemetry for Worker Roles</span></span>
<span data-ttu-id="4cfe5-245">它時，較豐富的診斷經驗，您可以看到哪些 led 的 tooa 失敗或高度延遲的要求。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-245">It is a rich diagnostic experience, when you can see what led tooa failed or high latency request.</span></span> <span data-ttu-id="4cfe5-246">Web 角色與 hello SDK 會自動設定之間的相互關聯相關的遙測。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-246">With web roles, hello SDK automatically sets up correlation between related telemetry.</span></span> <span data-ttu-id="4cfe5-247">背景工作角色，您可以使用自訂的遙測初始設定式 tooset 常見 Operation.Id 內容屬性的所有 hello 遙測 tooachieve 這。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-247">For worker roles, you can use a custom telemetry initializer tooset a common Operation.Id context attribute for all hello telemetry tooachieve this.</span></span> <span data-ttu-id="4cfe5-248">這可讓您 toosee 是否 hello 延遲/失敗問題所造成到期 tooa 相依性或您的程式碼，看 ！</span><span class="sxs-lookup"><span data-stu-id="4cfe5-248">This allows you toosee whether hello latency/failure issue was caused due tooa dependency or your code, at a glance!</span></span> 

<span data-ttu-id="4cfe5-249">方式如下：</span><span class="sxs-lookup"><span data-stu-id="4cfe5-249">Here's how:</span></span>

* <span data-ttu-id="4cfe5-250">設定成 CallContext hello 相互關聯識別碼所示[這裡](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L36)。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-250">Set hello correlation Id into a CallContext as shown [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L36).</span></span> <span data-ttu-id="4cfe5-251">在此情況下，我們使用 hello 要求識別碼為 hello 相互關聯識別碼</span><span class="sxs-lookup"><span data-stu-id="4cfe5-251">In this case, we are using hello Request ID as hello correlation id</span></span>
* <span data-ttu-id="4cfe5-252">加入自訂 TelemetryInitializer 實作，tooset hello Operation.Id toohello correlationId 設為以上。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-252">Add a custom TelemetryInitializer implementation, tooset hello Operation.Id toohello correlationId set above.</span></span> <span data-ttu-id="4cfe5-253">範例如下：[ItemCorrelationTelemetryInitializer](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/Telemetry/ItemCorrelationTelemetryInitializer.cs#L13)</span><span class="sxs-lookup"><span data-stu-id="4cfe5-253">There's an example here: [ItemCorrelationTelemetryInitializer](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/Telemetry/ItemCorrelationTelemetryInitializer.cs#L13)</span></span>
* <span data-ttu-id="4cfe5-254">新增 hello 自訂遙測初始設定式。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-254">Add hello custom telemetry initializer.</span></span> <span data-ttu-id="4cfe5-255">您可以執行在 hello ApplicationInsights.config 檔案中，或在程式碼所示[這裡](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L233)</span><span class="sxs-lookup"><span data-stu-id="4cfe5-255">You could do that in hello ApplicationInsights.config file, or in code as shown [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L233)</span></span>

<span data-ttu-id="4cfe5-256">就這麼簡單！</span><span class="sxs-lookup"><span data-stu-id="4cfe5-256">That's it!</span></span> <span data-ttu-id="4cfe5-257">hello 入口網站體驗是已固定 toohelp 看一眼所有相關聯的遙測：</span><span class="sxs-lookup"><span data-stu-id="4cfe5-257">hello portal experience is already wired up toohelp you see all associated telemetry at a glance:</span></span>

![相互關聯的遙測](./media/app-insights-cloudservices/bHxuUhd.png)

## <a name="client-telemetry"></a><span data-ttu-id="4cfe5-259">用戶端遙測</span><span class="sxs-lookup"><span data-stu-id="4cfe5-259">Client telemetry</span></span>
<span data-ttu-id="4cfe5-260">[新增 hello JavaScript SDK tooyour 網頁][ client]例如頁面檢視計數、 頁面載入時間、 指令碼的例外狀況，以及您頁面指令碼中撰寫自訂遙測 toolet tooget 瀏覽器型遙測。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-260">[Add hello JavaScript SDK tooyour web pages][client] tooget browser-based telemetry such as page view counts, page load times, script exceptions, and toolet you write custom telemetry in your page scripts.</span></span>

## <a name="availability-tests"></a><span data-ttu-id="4cfe5-261">可用性集合</span><span class="sxs-lookup"><span data-stu-id="4cfe5-261">Availability tests</span></span>
<span data-ttu-id="4cfe5-262">[設定 web 測試][ availability] toomake 即時且回應迅速，保持您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-262">[Set up web tests][availability] toomake sure your application stays live and responsive.</span></span>

## <a name="display-everything-together"></a><span data-ttu-id="4cfe5-263">將所有內容一起顯示</span><span class="sxs-lookup"><span data-stu-id="4cfe5-263">Display everything together</span></span>
<span data-ttu-id="4cfe5-264">tooget 系統的整體概況，您可以整合 hello 金鑰一起監控圖表，其中一個上[儀表板](app-insights-dashboards.md)。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-264">tooget an overall picture of your system, you can bring hello key monitoring charts together on one [dashboard](app-insights-dashboards.md).</span></span> <span data-ttu-id="4cfe5-265">例如，您無法釘選 hello 要求與失敗計數每個角色。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-265">For example, you could pin hello request and failure counts of each role.</span></span> 

<span data-ttu-id="4cfe5-266">如果您的系統使用其他 Azure 服務 (例如「串流分析」)，請將它們的監視圖表一併納入。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-266">If your system uses other Azure services such as Stream Analytics, include their monitoring charts as well.</span></span> 

<span data-ttu-id="4cfe5-267">如果您有用戶端行動裝置應用程式時，插入一些程式碼 toosend 自訂上的事件索引鍵的使用者作業，並建立[HockeyApp 橋接器](app-insights-hockeyapp-bridge-app.md)。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-267">If you have a client mobile app, insert some code toosend custom events on key user operations, and create a [HockeyApp bridge](app-insights-hockeyapp-bridge-app.md).</span></span> <span data-ttu-id="4cfe5-268">建立查詢中的[分析](app-insights-analytics.md)toodisplay hello 事件計數，並將其釘選 toohello 儀表板。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-268">Create queries in [Analytics](app-insights-analytics.md) toodisplay hello event counts, and pin them toohello dashboard.</span></span>

## <a name="example"></a><span data-ttu-id="4cfe5-269">範例</span><span class="sxs-lookup"><span data-stu-id="4cfe5-269">Example</span></span>
<span data-ttu-id="4cfe5-270">[hello 範例](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService)監視具有 web 角色和兩個背景工作角色的服務。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-270">[hello example](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) monitors a service that has a web role and two worker roles.</span></span>

## <a name="exception-method-not-found-on-running-in-azure-cloud-services"></a><span data-ttu-id="4cfe5-271">在 Azure 雲端服務中執行時發生的「找不到方法」例外狀況</span><span class="sxs-lookup"><span data-stu-id="4cfe5-271">Exception "method not found" on running in Azure Cloud Services</span></span>
<span data-ttu-id="4cfe5-272">您是否已針對 .NET 4.6 組建？</span><span class="sxs-lookup"><span data-stu-id="4cfe5-272">Did you build for .NET 4.6?</span></span> <span data-ttu-id="4cfe5-273">Azure 雲端服務角色不自動支援 4.6。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-273">4.6 is not automatically supported in Azure Cloud Services roles.</span></span> <span data-ttu-id="4cfe5-274">[在每個角色上安裝 4.6](../cloud-services/cloud-services-dotnet-install-dotnet.md) ，再執行您的 App。</span><span class="sxs-lookup"><span data-stu-id="4cfe5-274">[Install 4.6 on each role](../cloud-services/cloud-services-dotnet-install-dotnet.md) before running your app.</span></span>

## <a name="video"></a><span data-ttu-id="4cfe5-275">影片</span><span class="sxs-lookup"><span data-stu-id="4cfe5-275">Video</span></span>

> [!VIDEO https://channel9.msdn.com/events/Connect/2016/100/player]

## <a name="next-steps"></a><span data-ttu-id="4cfe5-276">後續步驟</span><span class="sxs-lookup"><span data-stu-id="4cfe5-276">Next steps</span></span>
* [<span data-ttu-id="4cfe5-277">設定傳送 Azure 診斷 tooApplication Insights</span><span class="sxs-lookup"><span data-stu-id="4cfe5-277">Configure sending Azure Diagnostics tooApplication Insights</span></span>](app-insights-azure-diagnostics.md)
* [<span data-ttu-id="4cfe5-278">自動建立 Application Insights 資源</span><span class="sxs-lookup"><span data-stu-id="4cfe5-278">Automate creation of Application Insights resources</span></span>](app-insights-powershell.md)
* [<span data-ttu-id="4cfe5-279">自動執行 Azure 診斷</span><span class="sxs-lookup"><span data-stu-id="4cfe5-279">Automate Azure diagnostics</span></span>](app-insights-powershell-azure-diagnostics.md)
* [<span data-ttu-id="4cfe5-280">Azure Functions</span><span class="sxs-lookup"><span data-stu-id="4cfe5-280">Azure Functions</span></span>](https://github.com/christopheranderson/azure-functions-app-insights-sample)

[api]: app-insights-api-custom-events-metrics.md
[availability]: app-insights-monitor-web-app-availability.md
[azure]: app-insights-azure.md
[client]: app-insights-javascript.md
[diagnostic]: app-insights-diagnostic-search.md
[netlogs]: app-insights-asp-net-trace-logs.md
[portal]: http://portal.azure.com/
[qna]: app-insights-troubleshoot-faq.md
[redfield]: app-insights-monitor-performance-live-website-now.md
[start]: app-insights-overview.md 
