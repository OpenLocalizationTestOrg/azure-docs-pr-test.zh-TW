---
title: "Service Fabric 和容器的概觀 | Microsoft Docs"
description: "Service Fabric 及使用容器來部署微服務應用程式的概觀。 本文提供如何使用容器及 Service Fabric 所提供之功能的概觀。"
services: service-fabric
documentationcenter: .net
author: msfussell
manager: timlt
editor: 
ms.assetid: c98b3fcb-c992-4dd9-b67d-2598a9bf8aab
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 5/16/2017
ms.author: msfussell
ms.openlocfilehash: f770b6181a99d24ea6a6e945d505da914e1b6128
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/18/2017
---
# <a name="service-fabric-and-containers"></a><span data-ttu-id="7951e-104">Service Fabric 和容器</span><span class="sxs-lookup"><span data-stu-id="7951e-104">Service Fabric and containers</span></span>
> [!NOTE]
> <span data-ttu-id="7951e-105">Linux 的這項功能處於預覽狀態。</span><span class="sxs-lookup"><span data-stu-id="7951e-105">This feature is in preview for Linux.</span></span>  <span data-ttu-id="7951e-106">尚未支援將容器部署到 Windows 10 中的 Service Fabric 叢集 (即將推出)。</span><span class="sxs-lookup"><span data-stu-id="7951e-106">Deploying containers to a Service Fabric cluster in Windows 10 isn't supported yet (coming soon).</span></span> 
>   

## <a name="introduction"></a><span data-ttu-id="7951e-107">簡介</span><span class="sxs-lookup"><span data-stu-id="7951e-107">Introduction</span></span>
<span data-ttu-id="7951e-108">Azure Service Fabric 是跨機器叢集的服務的 [Orchestrator](service-fabric-cluster-resource-manager-introduction.md)，在 Microsoft 的大規模服務中已使用多年且經過最佳化。</span><span class="sxs-lookup"><span data-stu-id="7951e-108">Azure Service Fabric is an [orchestrator](service-fabric-cluster-resource-manager-introduction.md) of services across a cluster of machines, with years of usage and optimization in massive scale services at Microsoft.</span></span> <span data-ttu-id="7951e-109">開發服務有許多的方式，從 [Service Fabric 程式設計模型](service-fabric-choose-framework.md)，到部署[來賓可執行檔](service-fabric-deploy-existing-app.md)。</span><span class="sxs-lookup"><span data-stu-id="7951e-109">Services can be developed in many ways, from using the [Service Fabric programming models](service-fabric-choose-framework.md) to deploying [guest executables](service-fabric-deploy-existing-app.md).</span></span> <span data-ttu-id="7951e-110">根據預設，Service Fabric 會以處理序形式部署和啟動這些服務。</span><span class="sxs-lookup"><span data-stu-id="7951e-110">By default, Service Fabric deploys and activates these services as processes.</span></span> <span data-ttu-id="7951e-111">處理序能以最快速度和最密集的程度使用叢集的資源。</span><span class="sxs-lookup"><span data-stu-id="7951e-111">Processes provide the fastest activation and highest density usage of the resources in a cluster.</span></span> <span data-ttu-id="7951e-112">Service Fabric 也可以在容器映像中部署服務。</span><span class="sxs-lookup"><span data-stu-id="7951e-112">Service Fabric can also deploy services in container images.</span></span> <span data-ttu-id="7951e-113">重要的是，您可以在相同應用程式中混合容器中的服務和處理序中的服務。</span><span class="sxs-lookup"><span data-stu-id="7951e-113">Importantly, you can mix services in processes and services in containers in the same application.</span></span> 

## <a name="containers-and-service-fabric-roadmap"></a><span data-ttu-id="7951e-114">容器和 Service Fabric 藍圖</span><span class="sxs-lookup"><span data-stu-id="7951e-114">Containers and Service Fabric roadmap</span></span>
<span data-ttu-id="7951e-115">在未來推出的版本中，針對容器協調流程和 Service Fabric 有許多改進計劃。</span><span class="sxs-lookup"><span data-stu-id="7951e-115">In forthcoming releases, many improvements are planned for container orchestration with Service Fabric.</span></span> <span data-ttu-id="7951e-116">包含增強的網路功能以支援應用程式內的虛擬網路、安全性功能、改良的診斷功能和工具支援。</span><span class="sxs-lookup"><span data-stu-id="7951e-116">Improvements include features for enhanced networking with support for virtual networks within an application, security features, improved diagnostics, and tooling support.</span></span> <span data-ttu-id="7951e-117">Service Fabric 可讓您建立混合了容器與服務的應用程式；這裡是指封裝現有程式碼 (如 IIS MVC 應用程式) 的容器，以及使用 Service Fabric 程式設計模型開發的服務。</span><span class="sxs-lookup"><span data-stu-id="7951e-117">Service Fabric allows you to create applications mixing containers packaged with existing code (for example, IIS MVC apps) with services developed using the Service Fabric programming models.</span></span>  <span data-ttu-id="7951e-118">您可以在單一叢集上執行數個這類應用程式。</span><span class="sxs-lookup"><span data-stu-id="7951e-118">You can run several such applications on a single cluster.</span></span> 

## <a name="what-are-containers"></a><span data-ttu-id="7951e-119">什麼是容器？</span><span class="sxs-lookup"><span data-stu-id="7951e-119">What are containers?</span></span>
<span data-ttu-id="7951e-120">容器是封裝成可個別部署的元件，在相同核心上以隔離的執行個體執行，以利用作業系統提供的虛擬化。</span><span class="sxs-lookup"><span data-stu-id="7951e-120">Containers are encapsulated, individually deployable components that run as isolated instances on the same kernel to take advantage of virtualization that an operating system provides.</span></span> <span data-ttu-id="7951e-121">因此，每個應用程式與其執行階段、相依性及系統程式庫在容器內執行時，在其各自於作業系統建構中的獨立範圍內，都具有容器的完整專屬存取權。</span><span class="sxs-lookup"><span data-stu-id="7951e-121">Thus, each application and its runtime, dependencies, and system libraries run inside a container with full, private access to the container's own isolated view of operating system constructs.</span></span> <span data-ttu-id="7951e-122">再加上可攜性，這種程度的安全性和資源隔離是容器與 Service Fabric 一起使用的主要優點 (否則是在處理序中執行服務)。</span><span class="sxs-lookup"><span data-stu-id="7951e-122">Along with portability, this degree of security and resource isolation is the main benefit for using containers with Service Fabric, which otherwise runs services in processes.</span></span>

<span data-ttu-id="7951e-123">容器是從應用程式中將基礎作業系統虛擬化的一種虛擬化技術。</span><span class="sxs-lookup"><span data-stu-id="7951e-123">Containers are a virtualization technology that virtualizes the underlying operating system from applications.</span></span> <span data-ttu-id="7951e-124">容器提供不變的環境讓應用程式以不同的隔離程度執行。</span><span class="sxs-lookup"><span data-stu-id="7951e-124">Containers provide an immutable environment for applications to run with varying degrees of isolation.</span></span> <span data-ttu-id="7951e-125">容器直接執行於核心之上，而且在檔案系統和其他資源中有其各自隔離的範圍。</span><span class="sxs-lookup"><span data-stu-id="7951e-125">Containers run directly on top of the kernel and have an isolated view of the file system and other resources.</span></span> <span data-ttu-id="7951e-126">相較於虛擬機器，容器的優點如下︰</span><span class="sxs-lookup"><span data-stu-id="7951e-126">Compared to virtual machines, containers have the following advantages:</span></span>

* <span data-ttu-id="7951e-127">**小**︰容器使用單一儲存空間和層級版本與更新，以增加效率。</span><span class="sxs-lookup"><span data-stu-id="7951e-127">**Small**: Containers use a single storage space and layer versions and updates to increase efficiency.</span></span>
* <span data-ttu-id="7951e-128">**快**︰容器不需要啟動整個作業系統，因此可以更快啟動，通常差個幾秒。</span><span class="sxs-lookup"><span data-stu-id="7951e-128">**Fast**: Containers don’t have to boot an entire operating system, so they can start much faster, typically in seconds.</span></span>
* <span data-ttu-id="7951e-129">**可攜性**︰容器化應用程式映像可以移植到雲端或內部部署中，而在虛擬機器內或直接在實體機器上執行。</span><span class="sxs-lookup"><span data-stu-id="7951e-129">**Portability**: A containerized application image can be ported to run in the cloud, on premises, inside virtual machines, or directly on physical machines.</span></span>
* <span data-ttu-id="7951e-130">**資源管理**：容器可以限制在其主機上可取用的實體資源。</span><span class="sxs-lookup"><span data-stu-id="7951e-130">**Resource governance**: A container can limit the physical resources that it can consume on its host.</span></span>

## <a name="container-types"></a><span data-ttu-id="7951e-131">容器類型</span><span class="sxs-lookup"><span data-stu-id="7951e-131">Container types</span></span>
<span data-ttu-id="7951e-132">Service Fabric 支援 Linux 和 Windows 上的容器，同時也支援後者的 Hyper-V 隔離模式。</span><span class="sxs-lookup"><span data-stu-id="7951e-132">Service Fabric supports containers on both Linux and Windows, and also supports Hyper-V isolation mode on the latter.</span></span> 

### <a name="docker-containers-on-linux"></a><span data-ttu-id="7951e-133">Linux 上的 Docker 容器</span><span class="sxs-lookup"><span data-stu-id="7951e-133">Docker containers on Linux</span></span>
<span data-ttu-id="7951e-134">Docker 提供高階 API 來建立和管理 Linux 核心容器頂端的容器。</span><span class="sxs-lookup"><span data-stu-id="7951e-134">Docker provides high-level APIs to create and manage containers on top of Linux kernel containers.</span></span> <span data-ttu-id="7951e-135">Docker 中樞是儲存和擷取容器映像的中央儲存機制。</span><span class="sxs-lookup"><span data-stu-id="7951e-135">Docker Hub is a central repository to store and retrieve container images.</span></span>
<span data-ttu-id="7951e-136">如需教學課程，請參閱[將 Docker 容器部署至 Service Fabric](service-fabric-get-started-containers-linux.md)。</span><span class="sxs-lookup"><span data-stu-id="7951e-136">For a tutorial, see [Deploy a Docker container to Service Fabric](service-fabric-get-started-containers-linux.md).</span></span>

### <a name="windows-server-containers"></a><span data-ttu-id="7951e-137">Windows Server 容器</span><span class="sxs-lookup"><span data-stu-id="7951e-137">Windows Server containers</span></span>
<span data-ttu-id="7951e-138">Windows Server 2016 提供兩種不同的容器，所提供的隔離程度有所不同。</span><span class="sxs-lookup"><span data-stu-id="7951e-138">Windows Server 2016 provides two different types of containers that differ in the level of provided isolation.</span></span> <span data-ttu-id="7951e-139">Windows Server 容器類似於 Docker 容器，因為都有命名空間和檔案系統隔離，但與它們執行所在的主機共用核心。</span><span class="sxs-lookup"><span data-stu-id="7951e-139">Windows Server containers and Docker containers are similar because both have namespace and file system isolation but share the kernel with the host they are running on.</span></span> <span data-ttu-id="7951e-140">在 Linux 上，一向是由 `cgroups` 和 `namespaces` 提供這種隔離，而 Windows Server 容器具有類似的行為。</span><span class="sxs-lookup"><span data-stu-id="7951e-140">On Linux, this isolation has traditionally been provided by `cgroups` and `namespaces`, and Windows Server containers behave similarly.</span></span>

<span data-ttu-id="7951e-141">Windows Hyper-V 容器提供更高程度的隔離和安全性，因為每個容器彼此之間或與主機之間並不共用作業系統核心。</span><span class="sxs-lookup"><span data-stu-id="7951e-141">Windows Hyper-V containers provide more isolation and security because each container does not share the operating system kernel with other containers or with the host.</span></span> <span data-ttu-id="7951e-142">由於有如此高程度的安全性隔離，Hyper-V 容器在惡意多租用戶的情況下是重點部分。</span><span class="sxs-lookup"><span data-stu-id="7951e-142">With this higher level of security isolation, Hyper-V containers are targeted at hostile, multitenant scenarios.</span></span>
<span data-ttu-id="7951e-143">如需教學課程，請參閱[將 Windows 容器部署至 Service Fabric](service-fabric-get-started-containers.md)。</span><span class="sxs-lookup"><span data-stu-id="7951e-143">For a tutorial, see [Deploy a Windows container to Service Fabric](service-fabric-get-started-containers.md).</span></span>

<span data-ttu-id="7951e-144">下圖顯示作業系統中可用的各種不同的虛擬化及隔離等級。</span><span class="sxs-lookup"><span data-stu-id="7951e-144">The following figure shows the different types of virtualization and isolation levels available in the operating system.</span></span>
<span data-ttu-id="7951e-145">![Service Fabric 平台][Image1]</span><span class="sxs-lookup"><span data-stu-id="7951e-145">![Service Fabric platform][Image1]</span></span>

## <a name="scenarios-for-using-containers"></a><span data-ttu-id="7951e-146">容器使用案例</span><span class="sxs-lookup"><span data-stu-id="7951e-146">Scenarios for using containers</span></span>
<span data-ttu-id="7951e-147">以下是典型範例，容器是很好的選擇︰</span><span class="sxs-lookup"><span data-stu-id="7951e-147">Here are typical examples where a container is a good choice:</span></span>

* <span data-ttu-id="7951e-148">**IIS 提起然後平移**︰如果您有想要繼續使用的現有 [ASP.NET MVC](https://www.asp.net/mvc) 應用程式，將它們放在一個容器，而不是移轉到 ASP.NET 核心。</span><span class="sxs-lookup"><span data-stu-id="7951e-148">**IIS lift and shift**: If you have existing [ASP.NET MVC](https://www.asp.net/mvc) apps that you want to continue to use, put them in a container instead of migrating them to ASP.NET Core.</span></span> <span data-ttu-id="7951e-149">這些 ASP.NET MVC 應用程式相依於網際網路資訊服務 (IIS)。</span><span class="sxs-lookup"><span data-stu-id="7951e-149">These ASP.NET MVC apps depend on Internet Information Services (IIS).</span></span> <span data-ttu-id="7951e-150">您可以從預先建立的 IIS 映像將這些應用程式封裝成容器映像，然後與 Service Fabric 一起部署。</span><span class="sxs-lookup"><span data-stu-id="7951e-150">You can package these applications into container images from the precreated IIS image and deploy them with Service Fabric.</span></span> <span data-ttu-id="7951e-151">請參閱 [Windows Server 上的容器映像](https://msdn.microsoft.com/virtualization/windowscontainers/quick_start/quick_start_images)，以取得如何建立 IIS 映像的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="7951e-151">See [Container Images on Windows Server](https://msdn.microsoft.com/virtualization/windowscontainers/quick_start/quick_start_images) for information about how to create IIS images.</span></span>
* <span data-ttu-id="7951e-152">**混合容器和 Service Fabric 微服務**︰針對您的應用程式的一部分使用現有的容器映像。</span><span class="sxs-lookup"><span data-stu-id="7951e-152">**Mix containers and Service Fabric microservices**: Use an existing container image for part of your application.</span></span> <span data-ttu-id="7951e-153">例如，對於應用程式的 Web 前端系統，您可以使用 [NGINX 容器](https://hub.docker.com/_/nginx/)，而對於更密集的後端運算，則可以使用具狀態服務。</span><span class="sxs-lookup"><span data-stu-id="7951e-153">For example, you might use the [NGINX container](https://hub.docker.com/_/nginx/) for the web front end of your application and stateful services for the more intensive back-end computation.</span></span>
* <span data-ttu-id="7951e-154">**減少「壟斷」服務的影響**︰您可以使用容器的資源控管能力來限制服務在主機上使用的資源。</span><span class="sxs-lookup"><span data-stu-id="7951e-154">**Reduce impact of "noisy neighbors" services**: You can use the resource governance ability of containers to restrict the resources that a service uses on a host.</span></span> <span data-ttu-id="7951e-155">如果服務可能會耗用大量資源，因而影響其他服務的效能 (例如，像作業一樣長時間執行的查詢)，請考慮將這些服務放到可控管資源的容器中。</span><span class="sxs-lookup"><span data-stu-id="7951e-155">If services might consume many resources and affect the performance of others (such as a long-running, query-like operation), consider putting these services into containers that have resource governance.</span></span>

## <a name="service-fabric-support-for-containers"></a><span data-ttu-id="7951e-156">Service Fabric 的容器支援</span><span class="sxs-lookup"><span data-stu-id="7951e-156">Service Fabric support for containers</span></span>
<span data-ttu-id="7951e-157">目前，Service Fabric 支援將 Docker 容器部署在 Linux，也支援將 Windows Server 容器部署在 Windows Server 2016 以及支援 Hyper-V 隔離模式。</span><span class="sxs-lookup"><span data-stu-id="7951e-157">Service Fabric currently supports deployment of Docker containers on Linux and Windows Server containers on Windows Server 2016, along with support for Hyper-V isolation mode.</span></span> 

<span data-ttu-id="7951e-158">在 Service Fabric [應用程式模型](service-fabric-application-model.md)中，容器代表多個服務複本所在的應用程式主機。</span><span class="sxs-lookup"><span data-stu-id="7951e-158">In the Service Fabric [application model](service-fabric-application-model.md), a container represents an application host in which multiple service replicas are placed.</span></span> <span data-ttu-id="7951e-159">Service Fabric 可以執行任何容器，其案例類似於[來賓可執行檔案例](service-fabric-deploy-existing-app.md)，可讓您封裝容器中的現有應用程式。</span><span class="sxs-lookup"><span data-stu-id="7951e-159">Service Fabric can run any containers, and the scenario is similar to the [guest executable scenario](service-fabric-deploy-existing-app.md), where you package an existing application inside a container.</span></span> <span data-ttu-id="7951e-160">這是容器常見的使用案例，範例包括執行使用任何語言或架構但不使用內建的 Service Fabric 程式設計模型所撰寫的應用程式。</span><span class="sxs-lookup"><span data-stu-id="7951e-160">This scenario is the common use-case for containers, and examples include running an application written using any language or frameworks, but not using the built-in Service Fabric programming models.</span></span>

<span data-ttu-id="7951e-161">此外，您也可以執行容器內的 Service Fabric 服務。</span><span class="sxs-lookup"><span data-stu-id="7951e-161">In addition, you can run Service Fabric services inside containers as well.</span></span> <span data-ttu-id="7951e-162">目前，執行容器內 Service Fabric 服務的支援有限，但在未來推出的版本中會增強。</span><span class="sxs-lookup"><span data-stu-id="7951e-162">Support for running Service Fabric services inside containers is limited currently, but to be enhanced in forthcoming releases.</span></span>

* <span data-ttu-id="7951e-163">**容器內的無狀態可靠服務**︰使用 Reliable Services 程式設計模型的無狀態可靠服務，僅在 Linux 上支援。</span><span class="sxs-lookup"><span data-stu-id="7951e-163">**Reliable Stateless services inside containers**: Reliable Stateless services using the Reliable Services programming models are only supported on Linux.</span></span> <span data-ttu-id="7951e-164">未來版本計劃將增加支援 Windows 容器中的無狀態可靠服務。</span><span class="sxs-lookup"><span data-stu-id="7951e-164">Support for Reliable Stateless services in Windows containers is planned for a future release.</span></span>
* <span data-ttu-id="7951e-165">**容器內的具狀態服務**︰這些服務使用 Reliable Actors 或 Reliable Services 程式設計模型。</span><span class="sxs-lookup"><span data-stu-id="7951e-165">**Stateful services inside containers**: These services use the Reliable Actors or Reliable Services programming model.</span></span> <span data-ttu-id="7951e-166">未來版本中將增加支援容器中執行的具狀態服務。</span><span class="sxs-lookup"><span data-stu-id="7951e-166">Support for running stateful services in containers will be added in future release.</span></span>

<span data-ttu-id="7951e-167">Service Fabric 有數個容器功能可協助您建置由容器化微服務組成的應用程式。</span><span class="sxs-lookup"><span data-stu-id="7951e-167">Service Fabric has several container capabilities that help you build applications that are composed of microservices that are containerized.</span></span> <span data-ttu-id="7951e-168">Service Fabric 為容器化的服務提供下列功能：</span><span class="sxs-lookup"><span data-stu-id="7951e-168">Service Fabric offers the following capabilities for containerized services:</span></span>

* <span data-ttu-id="7951e-169">容器映像部署和啟用。</span><span class="sxs-lookup"><span data-stu-id="7951e-169">Container image deployment and activation.</span></span>
* <span data-ttu-id="7951e-170">資源管理。</span><span class="sxs-lookup"><span data-stu-id="7951e-170">Resource governance.</span></span>
* <span data-ttu-id="7951e-171">儲存機制驗證。</span><span class="sxs-lookup"><span data-stu-id="7951e-171">Repository authentication.</span></span>
* <span data-ttu-id="7951e-172">容器連接埠至主機連接埠的對應。</span><span class="sxs-lookup"><span data-stu-id="7951e-172">Container port to host port mapping.</span></span>
* <span data-ttu-id="7951e-173">容器至容器的探索及通訊。</span><span class="sxs-lookup"><span data-stu-id="7951e-173">Container-to-container discovery and communication.</span></span>
* <span data-ttu-id="7951e-174">能夠設定環境變數。</span><span class="sxs-lookup"><span data-stu-id="7951e-174">Ability to configure and set environment variables.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7951e-175">後續步驟</span><span class="sxs-lookup"><span data-stu-id="7951e-175">Next steps</span></span>
<span data-ttu-id="7951e-176">在本文中，您已了解容器、Service Fabric 是容器協調者，以及 Service Fabric 具有支援容器的功能。</span><span class="sxs-lookup"><span data-stu-id="7951e-176">In this article, you learned about containers, that Service Fabric is a container orchestrator, and that Service Fabric has features that support containers.</span></span> <span data-ttu-id="7951e-177">接下來，我們將示範每一項功能來展示其用法。</span><span class="sxs-lookup"><span data-stu-id="7951e-177">As a next step, we will go over examples of each of the features to show you how to use them.</span></span>

[<span data-ttu-id="7951e-178">將 Windows 容器部署至 Windows Server 2016 上的 Service Fabric</span><span class="sxs-lookup"><span data-stu-id="7951e-178">Deploy a Windows container to Service Fabric on Windows Server 2016</span></span>](service-fabric-get-started-containers.md)

[<span data-ttu-id="7951e-179">將 Docker 容器部署至 Linux 上的 Service Fabric</span><span class="sxs-lookup"><span data-stu-id="7951e-179">Deploy a Docker container to Service Fabric on Linux</span></span>](service-fabric-get-started-containers-linux.md)

[Image1]: media/service-fabric-containers/Service-Fabric-Types-of-Isolation.png
