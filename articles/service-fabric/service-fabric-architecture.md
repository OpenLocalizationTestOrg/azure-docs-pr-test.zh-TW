---
title: "Azure Service Fabric 的 aaaArchitecture |Microsoft 文件"
description: "Service Fabric 是分散式的系統平台使用 hello 雲端 toobuild 可擴充、 可靠且和輕鬆管理應用程式。 這篇文章會顯示 Service Fabric hello 架構。"
services: service-fabric
documentationcenter: .net
author: rishirsinha
manager: timlt
editor: rishirsinha
ms.assetid: 6b554243-70cb-4c22-9b28-1a8b4703f45e
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/19/2017
ms.author: rsinha
ms.openlocfilehash: 0268578094ad1a0010ef44ed940f828b985f6c40
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="service-fabric-architecture"></a><span data-ttu-id="9703e-104">Service Fabric 架構</span><span class="sxs-lookup"><span data-stu-id="9703e-104">Service Fabric architecture</span></span>
<span data-ttu-id="9703e-105">Service Fabric 是使用分層的子系統所建置。</span><span class="sxs-lookup"><span data-stu-id="9703e-105">Service Fabric is built with layered subsystems.</span></span> <span data-ttu-id="9703e-106">這些子系統將啟用 toowrite 的應用程式：</span><span class="sxs-lookup"><span data-stu-id="9703e-106">These subsystems enable you toowrite applications that are:</span></span>

* <span data-ttu-id="9703e-107">高可用性</span><span class="sxs-lookup"><span data-stu-id="9703e-107">Highly available</span></span>
* <span data-ttu-id="9703e-108">可調整</span><span class="sxs-lookup"><span data-stu-id="9703e-108">Scalable</span></span>
* <span data-ttu-id="9703e-109">可管理</span><span class="sxs-lookup"><span data-stu-id="9703e-109">Manageable</span></span>
* <span data-ttu-id="9703e-110">可測試</span><span class="sxs-lookup"><span data-stu-id="9703e-110">Testable</span></span>

<span data-ttu-id="9703e-111">hello 下列圖表顯示 hello Service Fabric 主要子系統。</span><span class="sxs-lookup"><span data-stu-id="9703e-111">hello following diagram shows hello major subsystems of Service Fabric.</span></span>

![Service Fabric 架構的圖表](media/service-fabric-architecture/service-fabric-architecture.png)

<span data-ttu-id="9703e-113">在分散式系統中，在節點之間的通訊 hello 能力 toosecurely 叢集是非常重要。</span><span class="sxs-lookup"><span data-stu-id="9703e-113">In a distributed system, hello ability toosecurely communicate between nodes in a cluster is crucial.</span></span> <span data-ttu-id="9703e-114">Hello hello 堆疊的基底是 hello 傳輸子系統，提供節點之間的通訊安全。</span><span class="sxs-lookup"><span data-stu-id="9703e-114">At hello base of hello stack is hello transport subsystem, which provides secure communication between nodes.</span></span> <span data-ttu-id="9703e-115">上述 hello 傳輸子系統會位於 hello 同盟子系統，哪些群集會 hello 單一實體 （稱為 「 叢集 」） 到不同的節點，因此 Service Fabric 偵測失敗，執行前置選擇，且提供一致的路由。</span><span class="sxs-lookup"><span data-stu-id="9703e-115">Above hello transport subsystem lies hello federation subsystem, which clusters hello different nodes into a single entity (named clusters) so that Service Fabric can detect failures, perform leader election, and provide consistent routing.</span></span> <span data-ttu-id="9703e-116">hello 同盟子系統的最上層的 hello 可靠性子系統負責的機制，例如複寫、 資源管理和容錯移轉到 Service Fabric 服務的 hello 可靠性。</span><span class="sxs-lookup"><span data-stu-id="9703e-116">hello reliability subsystem, layered on top of hello federation subsystem, is responsible for hello reliability of Service Fabric services through mechanisms such as replication, resource management, and failover.</span></span> <span data-ttu-id="9703e-117">hello 同盟子系統也做為 hello 裝載和啟動子系統，可管理 hello 單一節點上的應用程式生命週期。</span><span class="sxs-lookup"><span data-stu-id="9703e-117">hello federation subsystem also underlies hello hosting and activation subsystem, which manages hello lifecycle of an application on a single node.</span></span> <span data-ttu-id="9703e-118">hello 管理子系統管理應用程式和服務的 hello 生命的週期。</span><span class="sxs-lookup"><span data-stu-id="9703e-118">hello management subsystem manages hello lifecycle of applications and services.</span></span> <span data-ttu-id="9703e-119">hello 可測試性子系統可協助應用程式開發人員在部署應用程式和服務 tooproduction 環境前後測試他們的服務，透過模擬的錯誤。</span><span class="sxs-lookup"><span data-stu-id="9703e-119">hello testability subsystem helps application developers test their services through simulated faults before and after deploying applications and services tooproduction environments.</span></span> <span data-ttu-id="9703e-120">Service Fabric 提供 hello 能力 tooresolve 透過其通訊子系統的服務位置。</span><span class="sxs-lookup"><span data-stu-id="9703e-120">Service Fabric provides hello ability tooresolve service locations through its communication subsystem.</span></span> <span data-ttu-id="9703e-121">hello 公開的 toodevelopers 上層 hello 應用程式模型 tooenable 工具以及這些子系統的應用程式撰寫模型。</span><span class="sxs-lookup"><span data-stu-id="9703e-121">hello application programming models exposed toodevelopers are layered on top of these subsystems along with hello application model tooenable tooling.</span></span>

## <a name="transport-subsystem"></a><span data-ttu-id="9703e-122">傳輸子系統</span><span class="sxs-lookup"><span data-stu-id="9703e-122">Transport subsystem</span></span>
<span data-ttu-id="9703e-123">hello 傳輸子系統實作點對點資料包通訊通道。</span><span class="sxs-lookup"><span data-stu-id="9703e-123">hello transport subsystem implements a point-to-point datagram communication channel.</span></span> <span data-ttu-id="9703e-124">此管道用於 service fabric 叢集內的通訊和 hello service fabric 叢集和用戶端之間的通訊。</span><span class="sxs-lookup"><span data-stu-id="9703e-124">This channel is used for communication within service fabric clusters and communication between hello service fabric cluster and clients.</span></span> <span data-ttu-id="9703e-125">它支援單向和要求-回覆通訊模式，提供 hello 基礎實作廣播 」 與 「 在多點傳送 hello 同盟層。</span><span class="sxs-lookup"><span data-stu-id="9703e-125">It supports one-way and request-reply communication patterns, which provides hello basis for implementing broadcast and multicast in hello Federation layer.</span></span> <span data-ttu-id="9703e-126">hello 傳輸子系統以便保護通訊安全使用 X509 憑證或 Windows 安全性。</span><span class="sxs-lookup"><span data-stu-id="9703e-126">hello transport subsystem secures communication by using X509 certificates or Windows security.</span></span> <span data-ttu-id="9703e-127">這個子系統由服務網狀架構內部使用，並不是直接存取 toodevelopers 應用程式設計。</span><span class="sxs-lookup"><span data-stu-id="9703e-127">This subsystem is used internally by Service Fabric and is not directly accessible toodevelopers for application programming.</span></span>

## <a name="federation-subsystem"></a><span data-ttu-id="9703e-128">同盟子系統</span><span class="sxs-lookup"><span data-stu-id="9703e-128">Federation subsystem</span></span>
<span data-ttu-id="9703e-129">在順序 tooreason 相關的一組在分散式系統中的節點，您會需要 toohave hello 系統的一致檢視。</span><span class="sxs-lookup"><span data-stu-id="9703e-129">In order tooreason about a set of nodes in a distributed system, you need toohave a consistent view of hello system.</span></span> <span data-ttu-id="9703e-130">hello 同盟子系統使用 hello 傳輸子系統所提供的 hello 通訊原始和 gallery< hello 到可以理解的單一統一叢集中不同節點。</span><span class="sxs-lookup"><span data-stu-id="9703e-130">hello federation subsystem uses hello communication primitives provided by hello transport subsystem and stitches hello various nodes into a single unified cluster that it can reason about.</span></span> <span data-ttu-id="9703e-131">它提供 hello 分散式系統的基本項目所需的 hello 其他子系統-失敗偵測、 前置選擇以及一致的路由。</span><span class="sxs-lookup"><span data-stu-id="9703e-131">It provides hello distributed systems primitives needed by hello other subsystems - failure detection, leader election, and consistent routing.</span></span> <span data-ttu-id="9703e-132">分散式的雜湊表具有 128 位元的語彙基元空間乃是建立 hello 同盟子系統。</span><span class="sxs-lookup"><span data-stu-id="9703e-132">hello federation subsystem is built on top of distributed hash tables with a 128-bit token space.</span></span> <span data-ttu-id="9703e-133">hello 子系統會透過 hello 節點，每個節點中所配置的 hello 語彙基元空間子集的擁有權的 hello 信號建立環狀拓撲。</span><span class="sxs-lookup"><span data-stu-id="9703e-133">hello subsystem creates a ring topology over hello nodes, with each node in hello ring being allocated a subset of hello token space for ownership.</span></span> <span data-ttu-id="9703e-134">用於失敗偵測 hello 層會使用租用機制根據核心打和仲裁。</span><span class="sxs-lookup"><span data-stu-id="9703e-134">For failure detection, hello layer uses a leasing mechanism based on heart beating and arbitration.</span></span> <span data-ttu-id="9703e-135">hello 同盟子系統也可保證，透過複雜聯結和出發，隨時都有單一擁有者的語彙基元的通訊協定。</span><span class="sxs-lookup"><span data-stu-id="9703e-135">hello federation subsystem also guarantees through intricate join and departure protocols that only a single owner of a token exists at any time.</span></span> <span data-ttu-id="9703e-136">如此可提供前置選擇和一致的路由保證。</span><span class="sxs-lookup"><span data-stu-id="9703e-136">This provides leader election and consistent routing guarantees.</span></span>

## <a name="reliability-subsystem"></a><span data-ttu-id="9703e-137">可靠性子系統</span><span class="sxs-lookup"><span data-stu-id="9703e-137">Reliability subsystem</span></span>
<span data-ttu-id="9703e-138">hello 可靠性子系統提供透過 hello hello 使用高可用性的 Service Fabric 服務的 hello 機制 toomake hello 狀態*複寫器*，*容錯移轉管理員*，和*Resource Balancer*。</span><span class="sxs-lookup"><span data-stu-id="9703e-138">hello reliability subsystem provides hello mechanism toomake hello state of a Service Fabric service highly available through hello use of hello *Replicator*, *Failover Manager*, and *Resource Balancer*.</span></span>

* <span data-ttu-id="9703e-139">hello 複寫器可確保在 hello 主要服務複本的狀態變更會自動複寫的 toosecondary 複本維護服務複本集的 hello 主要和次要複本之間的一致性。</span><span class="sxs-lookup"><span data-stu-id="9703e-139">hello Replicator ensures that state changes in hello primary service replica will automatically be replicated toosecondary replicas, maintaining consistency between hello primary and secondary replicas in a service replica set.</span></span> <span data-ttu-id="9703e-140">hello 複寫器負責在 hello 複本組中的 hello 複本之間的仲裁管理。</span><span class="sxs-lookup"><span data-stu-id="9703e-140">hello replicator is responsible for quorum management among hello replicas in hello replica set.</span></span> <span data-ttu-id="9703e-141">它與 hello 容錯移轉單元 tooget hello 的清單作業 tooreplicate 互動和 hello 重新設定代理程式會將其提供 hello 複本集的 hello 組態。</span><span class="sxs-lookup"><span data-stu-id="9703e-141">It interacts with hello failover unit tooget hello list of operations tooreplicate, and hello reconfiguration agent provides it with hello configuration of hello replica set.</span></span> <span data-ttu-id="9703e-142">該設定會指出哪些複本 hello 作業需要 toobe 複寫。</span><span class="sxs-lookup"><span data-stu-id="9703e-142">That configuration indicates which replicas hello operations need toobe replicated.</span></span> <span data-ttu-id="9703e-143">Service Fabric 提供稱為網狀架構複寫器，可供程式設計模型 API toomake hello 服務狀態高度可用且可靠的 hello 預設複寫器。</span><span class="sxs-lookup"><span data-stu-id="9703e-143">Service Fabric provides a default replicator called Fabric Replicator, which can be used by hello programming model API toomake hello service state highly available and reliable.</span></span>
* <span data-ttu-id="9703e-144">hello 容錯移轉管理員可確保，當加入 tooor 從 hello 叢集中移除節點，hello 負載自動重新分配跨 hello 可用的節點。</span><span class="sxs-lookup"><span data-stu-id="9703e-144">hello Failover Manager ensures that when nodes are added tooor removed from hello cluster, hello load is automatically redistributed across hello available nodes.</span></span> <span data-ttu-id="9703e-145">如果 hello 叢集中的節點失敗，則 hello 叢集會自動重新設定 hello 服務複本 toomaintain 可用性。</span><span class="sxs-lookup"><span data-stu-id="9703e-145">If a node in hello cluster fails, hello cluster will automatically reconfigure hello service replicas toomaintain availability.</span></span>
* <span data-ttu-id="9703e-146">hello 資源管理員將服務複本放在 hello 叢集中的錯誤網域，並確保所有的容錯移轉單元運作正常。</span><span class="sxs-lookup"><span data-stu-id="9703e-146">hello Resource Manager places service replicas across failure domain in hello cluster and ensures that all failover units are operational.</span></span> <span data-ttu-id="9703e-147">hello 資源管理員也會在服務資源 hello 基礎的叢集節點 tooachieve 最佳統一的負載分配的共用集區之間取得平衡。</span><span class="sxs-lookup"><span data-stu-id="9703e-147">hello Resource Manager also balances service resources across hello underlying shared pool of cluster nodes tooachieve optimal uniform load distribution.</span></span>

## <a name="management-subsystem"></a><span data-ttu-id="9703e-148">管理子系統</span><span class="sxs-lookup"><span data-stu-id="9703e-148">Management subsystem</span></span>
<span data-ttu-id="9703e-149">hello 管理子系統提供端對端服務和應用程式生命週期管理。</span><span class="sxs-lookup"><span data-stu-id="9703e-149">hello management subsystem provides end-to-end service and application lifecycle management.</span></span> <span data-ttu-id="9703e-150">PowerShell cmdlet 和系統管理 Api tooprovision 可讓您、 部署修補程式，升級和解除佈建應用程式不會遺失的可用性。</span><span class="sxs-lookup"><span data-stu-id="9703e-150">PowerShell cmdlets and administrative APIs enable you tooprovision, deploy, patch, upgrade, and de-provision applications without loss of availability.</span></span> <span data-ttu-id="9703e-151">hello 管理子系統會執行這透過下列服務的 hello。</span><span class="sxs-lookup"><span data-stu-id="9703e-151">hello management subsystem performs this through hello following services.</span></span>

* <span data-ttu-id="9703e-152">**叢集管理員**： 這是 hello 與 hello 容錯移轉管理員從依據 hello 服務位置條件約束的 hello 節點上的可靠性 tooplace hello 應用程式互動的主要服務。</span><span class="sxs-lookup"><span data-stu-id="9703e-152">**Cluster Manager**: This is hello primary service that interacts with hello Failover Manager from reliability tooplace hello applications on hello nodes based on hello service placement constraints.</span></span> <span data-ttu-id="9703e-153">在容錯移轉子系統中的 hello 資源管理員可確保 hello 條件約束是永遠不會中斷。</span><span class="sxs-lookup"><span data-stu-id="9703e-153">hello Resource Manager in failover subsystem ensures that hello constraints are never broken.</span></span> <span data-ttu-id="9703e-154">hello 叢集管理員會管理 hello hello 應用程式生命週期，從佈建 toode 佈建。</span><span class="sxs-lookup"><span data-stu-id="9703e-154">hello cluster manager manages hello lifecycle of hello applications from provision toode-provision.</span></span> <span data-ttu-id="9703e-155">它會與 hello 健全狀況管理員 tooensure，應用程式的可用性不會遺失語意的健全狀況的觀點在升級期間進行整合。</span><span class="sxs-lookup"><span data-stu-id="9703e-155">It integrates with hello health manager tooensure that application availability is not lost from a semantic health perspective during upgrades.</span></span>
* <span data-ttu-id="9703e-156">**健康狀態管理員**：此服務會啟用應用程式、服務和叢集實體的健康狀態監視。</span><span class="sxs-lookup"><span data-stu-id="9703e-156">**Health Manager**: This service enables health monitoring of applications, services, and cluster entities.</span></span> <span data-ttu-id="9703e-157">（例如節點、 服務分割和複本） 的叢集實體可以報告健全狀況資訊，然後彙總成 hello 集中式的健全狀況存放區。</span><span class="sxs-lookup"><span data-stu-id="9703e-157">Cluster entities (such as nodes, service partitions, and replicas) can report health information, which is then aggregated into hello centralized health store.</span></span> <span data-ttu-id="9703e-158">此健全狀況資訊提供任何所需的修正動作的整體中時間點健全狀況的快照集服務 hello 和分散到多個節點在 hello 叢集中，讓您 tootake 的節點。</span><span class="sxs-lookup"><span data-stu-id="9703e-158">This health information provides an overall point-in-time health snapshot of hello services and nodes distributed across multiple nodes in hello cluster, enabling you tootake any needed corrective actions.</span></span> <span data-ttu-id="9703e-159">健全狀況查詢 Api 可讓您 tooquery hello 健全狀況事件會報告 toohello 健全狀況子系統。</span><span class="sxs-lookup"><span data-stu-id="9703e-159">Health query APIs enable you tooquery hello health events reported toohello health subsystem.</span></span> <span data-ttu-id="9703e-160">hello 健全狀況查詢 Api 會傳回儲存在 hello 健全狀況的 hello 未經處理的健全狀況資料存放區或 hello 彙總，解譯指定的叢集實體健全狀況資料。</span><span class="sxs-lookup"><span data-stu-id="9703e-160">hello health query APIs return hello raw health data stored in hello health store or hello aggregated, interpreted health data for a specific cluster entity.</span></span>
* <span data-ttu-id="9703e-161">**映像存放區**： 此服務會提供儲存體和 hello 發佈應用程式二進位檔。</span><span class="sxs-lookup"><span data-stu-id="9703e-161">**Image Store**: This service provides storage and distribution of hello application binaries.</span></span> <span data-ttu-id="9703e-162">此服務會提供簡單的分散式的檔案存放 hello 應用程式上傳的 tooand 從下載。</span><span class="sxs-lookup"><span data-stu-id="9703e-162">This service provides a simple distributed file store where hello applications are uploaded tooand downloaded from.</span></span>

## <a name="hosting-subsystem"></a><span data-ttu-id="9703e-163">主控子系統</span><span class="sxs-lookup"><span data-stu-id="9703e-163">Hosting subsystem</span></span>
<span data-ttu-id="9703e-164">hello 叢集管理員會通知 hello 裝載子系統 （每個節點上執行） 服務它需要 toomanage 特定節點。</span><span class="sxs-lookup"><span data-stu-id="9703e-164">hello cluster manager informs hello hosting subsystem (running on each node) which services it needs toomanage for a particular node.</span></span> <span data-ttu-id="9703e-165">然後裝載子系統的 hello 管理 hello hello 該節點上的應用程式生命週期。</span><span class="sxs-lookup"><span data-stu-id="9703e-165">hello hosting subsystem then manages hello lifecycle of hello application on that node.</span></span> <span data-ttu-id="9703e-166">它會與 hello 可靠性及健康情況元件 tooensure hello 複本位置是正確和狀況良好互動。</span><span class="sxs-lookup"><span data-stu-id="9703e-166">It interacts with hello reliability and health components tooensure that hello replicas are properly placed and are healthy.</span></span>

## <a name="communication-subsystem"></a><span data-ttu-id="9703e-167">通訊子系統</span><span class="sxs-lookup"><span data-stu-id="9703e-167">Communication subsystem</span></span>
<span data-ttu-id="9703e-168">這個子系統提供 hello 叢集服務探索透過 hello 命名服務內的可信賴傳訊。</span><span class="sxs-lookup"><span data-stu-id="9703e-168">This subsystem provides reliable messaging within hello cluster and service discovery through hello Naming service.</span></span> <span data-ttu-id="9703e-169">hello 命名服務解析 hello 叢集中的服務名稱 tooa 位置，並可讓使用者 toomanage 服務名稱和屬性。</span><span class="sxs-lookup"><span data-stu-id="9703e-169">hello Naming service resolves service names tooa location in hello cluster and enables users toomanage service names and properties.</span></span> <span data-ttu-id="9703e-170">使用 hello 命名服務，用戶端可以安全地與 hello 叢集 tooresolve 中的任何節點，進行通訊的服務名稱，擷取服務中繼資料。</span><span class="sxs-lookup"><span data-stu-id="9703e-170">Using hello Naming service, clients can securely communicate with any node in hello cluster tooresolve a service name and retrieve service metadata.</span></span> <span data-ttu-id="9703e-171">使用簡單的命名用戶端應用程式開發介面，Service Fabric 的使用者可以開發服務和用戶端能夠解析不管節點了，還是 hello 重新調整大小的 hello 叢集 hello 目前網路位置。</span><span class="sxs-lookup"><span data-stu-id="9703e-171">Using a simple Naming client API, users of Service Fabric can develop services and clients capable of resolving hello current network location despite node dynamism or hello re-sizing of hello cluster.</span></span>

## <a name="testability-subsystem"></a><span data-ttu-id="9703e-172">可測試性子系統</span><span class="sxs-lookup"><span data-stu-id="9703e-172">Testability subsystem</span></span>
<span data-ttu-id="9703e-173">可測試性是一組工具套件，專門用來測試建置於 Service Fabric 上的服務。</span><span class="sxs-lookup"><span data-stu-id="9703e-173">Testability is a suite of tools specifically designed for testing services built on Service Fabric.</span></span> <span data-ttu-id="9703e-174">hello 工具可讓開發人員輕鬆地產生有意義的錯誤和執行測試案例 tooexercise 和驗證 hello 許多狀態和轉換，服務會在其存留期，發生在受控制且安全的方式。</span><span class="sxs-lookup"><span data-stu-id="9703e-174">hello tools let a developer easily induce meaningful faults and run test scenarios tooexercise and validate hello numerous states and transitions that a service will experience throughout its lifetime, all in a controlled and safe manner.</span></span> <span data-ttu-id="9703e-175">可測試性也會提供機制 toorun 較長的測試，可逐一各種可能發生的失敗不會遺失可用性。</span><span class="sxs-lookup"><span data-stu-id="9703e-175">Testability also provides a mechanism toorun longer tests that can iterate through various possible failures without losing availability.</span></span> <span data-ttu-id="9703e-176">如此可為您提供生產環境中的測試。</span><span class="sxs-lookup"><span data-stu-id="9703e-176">This provides you with a test-in-production environment.</span></span>

