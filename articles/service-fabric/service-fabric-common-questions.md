---
title: "Microsoft Azure Service Fabric 的 aaaCommon 疑問 |Microsoft 文件"
description: "和 Service Fabric 有關的常見問題集和解答"
services: service-fabric
documentationcenter: .net
author: chackdan
manager: timlt
editor: 
ms.assetid: 5a179703-ff0c-4b8e-98cd-377253295d12
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/18/2017
ms.author: chackdan
ms.openlocfilehash: 4cbe92d2a03f7a1ea5d077807fdc982288220a7e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="commonly-asked-service-fabric-questions"></a><span data-ttu-id="e95b8-103">Service Fabric 的常見問題</span><span class="sxs-lookup"><span data-stu-id="e95b8-103">Commonly asked Service Fabric questions</span></span>

<span data-ttu-id="e95b8-104">和 Service Fabric 的功能及使用方式有關的常見問題很多。</span><span class="sxs-lookup"><span data-stu-id="e95b8-104">There are many commonly asked questions about what Service Fabric can do and how it should be used.</span></span> <span data-ttu-id="e95b8-105">本文件涵蓋許多這類問題和解答。</span><span class="sxs-lookup"><span data-stu-id="e95b8-105">This document covers many of those common questions and their answers.</span></span>

## <a name="cluster-setup-and-management"></a><span data-ttu-id="e95b8-106">叢集設定和管理</span><span class="sxs-lookup"><span data-stu-id="e95b8-106">Cluster setup and management</span></span>

### <a name="can-i-create-a-cluster-that-spans-multiple-azure-regions-or-my-own-datacenters"></a><span data-ttu-id="e95b8-107">我能否建立跨多個 Azure 區域或自有資料中心的叢集？</span><span class="sxs-lookup"><span data-stu-id="e95b8-107">Can I create a cluster that spans multiple Azure regions or my own datacenters?</span></span>

<span data-ttu-id="e95b8-108">是。</span><span class="sxs-lookup"><span data-stu-id="e95b8-108">Yes.</span></span> 

<span data-ttu-id="e95b8-109">可以使用的 toocombine 機器於任何地方執行 hello world hello 核心 Service Fabric 叢集技術，只要有網路連線 tooeach 其他。</span><span class="sxs-lookup"><span data-stu-id="e95b8-109">hello core Service Fabric clustering technology can be used toocombine machines running anywhere in hello world, so long as they have network connectivity tooeach other.</span></span> <span data-ttu-id="e95b8-110">不過，建置和執行這類叢集的程序很複雜。</span><span class="sxs-lookup"><span data-stu-id="e95b8-110">However, building and running such a cluster can be complicated.</span></span>

<span data-ttu-id="e95b8-111">如果您想要在此案例中，我們鼓勵您 tooget 連絡透過 hello[服務網狀架構 Github 問題清單](https://github.com/azure/service-fabric-issues)或透過您在順序 tooobtain 其他指南中的支援人員。</span><span class="sxs-lookup"><span data-stu-id="e95b8-111">If you are interested in this scenario, we encourage you tooget in contact either through hello [Service Fabric Github Issues List](https://github.com/azure/service-fabric-issues) or through your support representative in order tooobtain additional guidance.</span></span> <span data-ttu-id="e95b8-112">hello Service Fabric 小組 tooprovide 其他清晰度、 指引和建議這種情況下的處理。</span><span class="sxs-lookup"><span data-stu-id="e95b8-112">hello Service Fabric team is working tooprovide additional clarity, guidance, and recommendations for this scenario.</span></span> 

<span data-ttu-id="e95b8-113">某些事項 tooconsider:</span><span class="sxs-lookup"><span data-stu-id="e95b8-113">Some things tooconsider:</span></span> 

1. <span data-ttu-id="e95b8-114">hello Azure Service Fabric 叢集資源今天是地區，因為 hello 虛擬機器擴展集該 hello 叢集上建立。</span><span class="sxs-lookup"><span data-stu-id="e95b8-114">hello Service Fabric cluster resource in Azure is regional today, as are hello virtual machine scale sets that hello cluster is built on.</span></span> <span data-ttu-id="e95b8-115">這表示 hello 地區失敗事件中您可能會遺失 hello 能力 toomanage hello 叢集 hello Azure 資源管理員透過或 hello Azure 入口網站。</span><span class="sxs-lookup"><span data-stu-id="e95b8-115">This means that in hello event of a regional failure you may lose hello ability toomanage hello cluster via hello Azure Resource Manager or hello Azure Portal.</span></span> <span data-ttu-id="e95b8-116">即使 hello 叢集仍繼續執行，而系統會直接將無法與它 toointeract，也可能會發生。</span><span class="sxs-lookup"><span data-stu-id="e95b8-116">This can happen even though hello cluster remains running and you'd be able toointeract with it directly.</span></span> <span data-ttu-id="e95b8-117">此外，Azure 目前不提供 hello 能力 toohave 跨區域可供使用的單一虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="e95b8-117">In addition, Azure today does not offer hello ability toohave a single virtual network that is usable across regions.</span></span> <span data-ttu-id="e95b8-118">這表示，在 Azure 中的多地區叢集需要[hello VM 規模集的每個 VM 的公用 IP 位址](../virtual-machine-scale-sets/virtual-machine-scale-sets-networking.md#public-ipv4-per-virtual-machine)或[Azure VPN 閘道](../vpn-gateway/vpn-gateway-about-vpngateways.md)。</span><span class="sxs-lookup"><span data-stu-id="e95b8-118">This means that a multi-region cluster in Azure requires either [Public IP Addresses for each VM in hello VM Scale Sets](../virtual-machine-scale-sets/virtual-machine-scale-sets-networking.md#public-ipv4-per-virtual-machine) or [Azure VPN Gateways](../vpn-gateway/vpn-gateway-about-vpngateways.md).</span></span> <span data-ttu-id="e95b8-119">這些網路選擇在成本、 效能及 toosome 程度應用程式設計，擁有不同的影響，因此這類環境是在幾之前，需要仔細分析和規劃。</span><span class="sxs-lookup"><span data-stu-id="e95b8-119">These networking choices have different impacts on costs, performance, and toosome degree application design, so careful analysis and planning is required before standing up such an environment.</span></span>
2. <span data-ttu-id="e95b8-120">hello 維護、 管理和監視這些電腦可能會變得複雜，特別是當跨越_類型_的環境，例如不同雲端提供者之間，或在內部部署資源和 Azure 之間.</span><span class="sxs-lookup"><span data-stu-id="e95b8-120">hello maintenance, management, and monitoring of these machines can become complicated, especially when spanned across _types_ of environments, such as between different cloud providers or between on-premises resources and Azure.</span></span> <span data-ttu-id="e95b8-121">必須小心 tooensure 升級、 監視、 管理和診斷執行這類環境中的實際執行工作負載之前，了解 hello 叢集和 hello 應用程式。</span><span class="sxs-lookup"><span data-stu-id="e95b8-121">Care must be taken tooensure that upgrades, monitoring, management, and diagnostics are understood for both hello cluster and hello applications before running production workloads in such an environment.</span></span> <span data-ttu-id="e95b8-122">如果您對於在 Azure 或您自己的資料中心內解決這些問題已有豐富經驗，則在建置或執行 Service Fabric 叢集時或許也可以套用同樣的一套解決方案。</span><span class="sxs-lookup"><span data-stu-id="e95b8-122">If you already have lots of experience solving these problems in Azure or within your own datacenters, then it is likely that those same solutions can be applied when building out or running your Service Fabric cluster.</span></span> 

### <a name="do-service-fabric-nodes-automatically-receive-os-updates"></a><span data-ttu-id="e95b8-123">Service Fabric 節點是否會自動接收作業系統更新？</span><span class="sxs-lookup"><span data-stu-id="e95b8-123">Do Service Fabric nodes automatically receive OS updates?</span></span>

<span data-ttu-id="e95b8-124">不今天，但這也是 Azure 打算 toodeliver 最常見的要求。</span><span class="sxs-lookup"><span data-stu-id="e95b8-124">Not today, but this is also a common request that Azure intends toodeliver.</span></span>

<span data-ttu-id="e95b8-125">Hello 過渡版，有[提供應用程式](service-fabric-patch-orchestration-application.md)hello 作業系統在 Service Fabric 節點下面保持修補和 toodate 組成。</span><span class="sxs-lookup"><span data-stu-id="e95b8-125">In hello interim, we have [provided an application](service-fabric-patch-orchestration-application.md) that hello operating systems underneath your Service Fabric nodes stay patched and up toodate.</span></span>

<span data-ttu-id="e95b8-126">與作業系統更新的 hello 挑戰是它們通常需要重新開機的 hello 機器，會導致失去暫存的可用性。</span><span class="sxs-lookup"><span data-stu-id="e95b8-126">hello challenge with OS updates is that they typically require a reboot of hello machine, which results in temporary availability loss.</span></span> <span data-ttu-id="e95b8-127">單獨使用時，不是問題，因為 Service Fabric 會自動將流量重新導向的那些服務 tooother 節點。</span><span class="sxs-lookup"><span data-stu-id="e95b8-127">By itself, that is not a problem, since Service Fabric will automatically redirect traffic for those services tooother nodes.</span></span> <span data-ttu-id="e95b8-128">不過，如果 OS 更新不會協調 hello 叢集中，是許多節點到下一次的 hello 可能性。</span><span class="sxs-lookup"><span data-stu-id="e95b8-128">However, if OS updates are not coordinated across hello cluster, there is hello potential that many nodes go down at once.</span></span> <span data-ttu-id="e95b8-129">這類同時重新啟動會造成服務，或至少造成某個特定分割 (如果為具狀態服務) 完全失去可用性。</span><span class="sxs-lookup"><span data-stu-id="e95b8-129">Such simultaneous reboots can cause complete availability loss for a service, or at least for a specific partition (for a stateful service).</span></span>

<span data-ttu-id="e95b8-130">在 hello 未來，我們計劃 toosupport OS 更新原則完全自動化並協調跨越更新網域，確保即使重新啟動和其他非預期的失敗都能維持可用性。</span><span class="sxs-lookup"><span data-stu-id="e95b8-130">In hello future, we plan toosupport an OS update policy that is fully automated and coordinated across update domains, ensuring that availability is maintained despite reboots and other unexpected failures.</span></span>

### <a name="can-i-use-large-virtual-machine-scale-sets-in-my-sf-cluster"></a><span data-ttu-id="e95b8-131">我可以在 SF 叢集中使用大型虛擬機器擴展集嗎？</span><span class="sxs-lookup"><span data-stu-id="e95b8-131">Can I use Large Virtual Machine Scale Sets in my SF cluster?</span></span> 

<span data-ttu-id="e95b8-132">**簡短回答** - 否。</span><span class="sxs-lookup"><span data-stu-id="e95b8-132">**Short answer** - No.</span></span> 

<span data-ttu-id="e95b8-133">**長時間回答**-雖然 hello 大型虛擬機器擴展集可讓您 tooscale 的虛擬機器擴展集最多 1000 VM 執行個體，它會 hello 使用放置群組 (PGs)。</span><span class="sxs-lookup"><span data-stu-id="e95b8-133">**Long Answer** - Although hello Large Virtual Machine Scale Sets allow you tooscale a virtual machine scale set upto 1000 VM instances, it does so by hello use of Placement Groups (PGs).</span></span> <span data-ttu-id="e95b8-134">容錯網域 (Fd) 和升級網域 (Ud) 只一致內放置群組服務網狀架構會使用您的服務複本/服務執行個體的 Fd 和 Ud toomake 設置決策。</span><span class="sxs-lookup"><span data-stu-id="e95b8-134">Fault domains (FDs) and upgrade domains (UDs) are only consistent within a placement group Service fabric uses FDs and UDs toomake placement decisions of your service replicas/Service instances.</span></span> <span data-ttu-id="e95b8-135">因為 hello Fd 和 Ud 是比較只能放置在群組內是 SF 無法使用它。</span><span class="sxs-lookup"><span data-stu-id="e95b8-135">Since hello FDs  and UDs are comparable only within a placement group SF cannot use it.</span></span> <span data-ttu-id="e95b8-136">例如，如果 VM1 PG1 中的擁有的 FD 拓撲 = 0 和 VM9 PG2 中的擁有的 FD 拓撲 = 4，並不表示 VM1 和 vm2 的情況是在兩個不同硬體機架，因此 SF 時，無法在此案例 toomake 設置決策中使用 hello FD 值。</span><span class="sxs-lookup"><span data-stu-id="e95b8-136">For example, If VM1 in PG1 has a topology of FD=0 and VM9 in PG2 has a topology of FD=4 , it does not mean that VM1 and VM2 are on two different Hardware Racks, hence SF cannot use hello FD values in this case toomake placement decisions.</span></span>

<span data-ttu-id="e95b8-137">大型虛擬機器規模集的其他問題目前沒有，像是層級 4 的 hello 缺乏負載平衡支援。</span><span class="sxs-lookup"><span data-stu-id="e95b8-137">There are other issues with Large virtual machine scale sets currently, like hello lack of level-4 Load balancing support.</span></span> <span data-ttu-id="e95b8-138">請參閱 toofor[大型的詳細資訊的調整規模設定](../virtual-machine-scale-sets/virtual-machine-scale-sets-placement-groups.md)</span><span class="sxs-lookup"><span data-stu-id="e95b8-138">Refer toofor [details on Large scale sets](../virtual-machine-scale-sets/virtual-machine-scale-sets-placement-groups.md)</span></span>



### <a name="what-is-hello-minimum-size-of-a-service-fabric-cluster-why-cant-it-be-smaller"></a><span data-ttu-id="e95b8-139">Hello Service Fabric 叢集的最小的大小為何？</span><span class="sxs-lookup"><span data-stu-id="e95b8-139">What is hello minimum size of a Service Fabric cluster?</span></span> <span data-ttu-id="e95b8-140">為什麼無法更小？</span><span class="sxs-lookup"><span data-stu-id="e95b8-140">Why can't it be smaller?</span></span>

<span data-ttu-id="e95b8-141">hello 支援最小執行生產工作負載的 Service Fabric 叢集是五個節點。</span><span class="sxs-lookup"><span data-stu-id="e95b8-141">hello minimum supported size for a Service Fabric cluster running production workloads is five nodes.</span></span> <span data-ttu-id="e95b8-142">針對開發/測試案例，我們支援三個節點的叢集。</span><span class="sxs-lookup"><span data-stu-id="e95b8-142">For dev/test scenarios, we support three node clusters.</span></span>

<span data-ttu-id="e95b8-143">這些最小值存在，因為 hello Service Fabric 叢集會執行一組可設定狀態系統服務，包括 hello 命名服務和 hello 容錯移轉管理員。</span><span class="sxs-lookup"><span data-stu-id="e95b8-143">These minimums exist because hello Service Fabric cluster runs a set of stateful system services, including hello naming service and hello failover manager.</span></span> <span data-ttu-id="e95b8-144">這些服務，追蹤服務都已部署 toohello 叢集，而且在目前裝載它們，取決於強式一致性。</span><span class="sxs-lookup"><span data-stu-id="e95b8-144">These services, which track what services have been deployed toohello cluster and where they're currently hosted, depend on strong consistency.</span></span> <span data-ttu-id="e95b8-145">該強式一致性，接著，取決於 hello 能力 tooacquire*仲裁*取得任何給定的更新 toohello 狀態，這些服務，其中仲裁代表 hello 複本 (N/2 + 1) 指定服務的嚴格多數。</span><span class="sxs-lookup"><span data-stu-id="e95b8-145">That strong consistency, in turn, depends on hello ability tooacquire a *quorum* for any given update toohello state of those services, where a quorum represents a strict majority of hello replicas (N/2 +1) for a given service.</span></span>

<span data-ttu-id="e95b8-146">了解該背景後，讓我們來檢查一些可能的叢集組態：</span><span class="sxs-lookup"><span data-stu-id="e95b8-146">With that background, let's examine some possible cluster configurations:</span></span>

<span data-ttu-id="e95b8-147">**一個節點**： 這個選項不提供高可用性，因為 hello 遺失 hello 單一節點因任何原因表示 hello hello 整個叢集遺失。</span><span class="sxs-lookup"><span data-stu-id="e95b8-147">**One node**: this option does not provide high availability since hello loss of hello single node for any reason means hello loss of hello entire cluster.</span></span>

<span data-ttu-id="e95b8-148">**兩個節點**︰跨兩個節點 (N = 2) 部署的服務，仲裁為 2 (2/2 + 1 = 2)。</span><span class="sxs-lookup"><span data-stu-id="e95b8-148">**Two nodes**: a quorum for a service deployed across two nodes (N = 2) is 2 (2/2 + 1 = 2).</span></span> <span data-ttu-id="e95b8-149">遺失的單一複本時，它是不可能 toocreate 仲裁。</span><span class="sxs-lookup"><span data-stu-id="e95b8-149">When a single replica is lost, it is impossible toocreate a quorum.</span></span> <span data-ttu-id="e95b8-150">由於執行服務升級時需要暫時關閉複本，因此這不是有用的組態。</span><span class="sxs-lookup"><span data-stu-id="e95b8-150">Since performing a service upgrade requires temporarily taking down a replica, this is not a useful configuration.</span></span>

<span data-ttu-id="e95b8-151">**三個節點**： 三個節點 (N = 3)，與 hello 需求 toocreate 仲裁仍然是兩個節點 (3/2 + 1 = 2)。</span><span class="sxs-lookup"><span data-stu-id="e95b8-151">**Three nodes**: with three nodes (N=3), hello requirement toocreate a quorum is still two nodes (3/2 + 1 = 2).</span></span> <span data-ttu-id="e95b8-152">這表示您可以遺失一個單一節點，並且仍維持仲裁。</span><span class="sxs-lookup"><span data-stu-id="e95b8-152">This means that you can lose an individual node and still maintain quorum.</span></span>

<span data-ttu-id="e95b8-153">hello 三個節點叢集組態支援開發/測試安全無虞地執行升級，並不受個別的節點失敗，因為只要它們不同時進行。</span><span class="sxs-lookup"><span data-stu-id="e95b8-153">hello three node cluster configuration is supported for dev/test because you can safely perform upgrades and survive individual node failures, as long as they don't happen simultaneously.</span></span> <span data-ttu-id="e95b8-154">對於生產工作負載，您必須是具有恢復功能 toosuch 同時失敗，因此五個節點都是必要。</span><span class="sxs-lookup"><span data-stu-id="e95b8-154">For production workloads, you must be resilient toosuch a simultaneous failure, so five nodes are required.</span></span>

### <a name="can-i-turn-off-my-cluster-at-nightweekends-toosave-costs"></a><span data-ttu-id="e95b8-155">我可以關閉我在晚上/週末 toosave 成本的叢集嗎？</span><span class="sxs-lookup"><span data-stu-id="e95b8-155">Can I turn off my cluster at night/weekends toosave costs?</span></span>

<span data-ttu-id="e95b8-156">一般而言不行。</span><span class="sxs-lookup"><span data-stu-id="e95b8-156">In general, no.</span></span> <span data-ttu-id="e95b8-157">Service Fabric 將狀態儲存在本機的暫時磁碟上，這表示，如果 hello 虛擬機器移動的 tooa 不同的主機，hello 資料不會移動它。</span><span class="sxs-lookup"><span data-stu-id="e95b8-157">Service Fabric stores state on local, ephemeral disks, meaning that if hello virtual machine is moved tooa different host, hello data does not move with it.</span></span> <span data-ttu-id="e95b8-158">在正常作業中，，並不是問題如 hello 新節點處於向上 toodate，由其他節點。</span><span class="sxs-lookup"><span data-stu-id="e95b8-158">In normal operation, that is not a problem as hello new node is brought up toodate by other nodes.</span></span> <span data-ttu-id="e95b8-159">不過，如果您停止所有節點，並稍後再重新啟動，是重要的可能性 hello 節點的最新的主機上啟動，並進行 hello 系統無法 toorecover。</span><span class="sxs-lookup"><span data-stu-id="e95b8-159">However, if you stop all nodes and restart them later, there is a significant possibility that most of hello nodes start on new hosts and make hello system unable toorecover.</span></span>

<span data-ttu-id="e95b8-160">如果您想要 toocreate 叢集部署之前測試應用程式，我們建議您以動態方式建立這些叢集的一部分您[連續連續整合/部署管線](service-fabric-set-up-continuous-integration.md)。</span><span class="sxs-lookup"><span data-stu-id="e95b8-160">If you would like toocreate clusters for testing your application before it is deployed, we recommend that you dynamically create those clusters as part of your [continuous integration/continuous deployment pipeline](service-fabric-set-up-continuous-integration.md).</span></span>


### <a name="how-do-i-upgrade-my-operating-system-for-example-from-windows-server-2012-toowindows-server-2016"></a><span data-ttu-id="e95b8-161">如何升級我的作業系統 （例如從 Windows Server 2012 tooWindows Server 2016)？</span><span class="sxs-lookup"><span data-stu-id="e95b8-161">How do I upgrade my Operating System (for example from Windows Server 2012 tooWindows Server 2016)?</span></span>

<span data-ttu-id="e95b8-162">我們在處理時的增強經驗，現在，您必須負責 hello 升級。</span><span class="sxs-lookup"><span data-stu-id="e95b8-162">While we're working on an improved experience, today, you are responsible for hello upgrade.</span></span> <span data-ttu-id="e95b8-163">您必須先升級 hello OS 映像 hello 上的一次叢集一個 VM 的虛擬機器的 hello。</span><span class="sxs-lookup"><span data-stu-id="e95b8-163">You must upgrade hello OS image on hello virtual machines of hello cluster one VM at a time.</span></span> 

## <a name="container-support"></a><span data-ttu-id="e95b8-164">容器支援</span><span class="sxs-lookup"><span data-stu-id="e95b8-164">Container Support</span></span>

### <a name="why-are-my-containers-that-are-deployed-toosf-unable-tooresolve-dns-addresses"></a><span data-ttu-id="e95b8-165">為何我容器部署的 tooSF 無法 tooresolve DNS 位址？</span><span class="sxs-lookup"><span data-stu-id="e95b8-165">Why are my containers that are deployed tooSF unable tooresolve DNS addresses?</span></span>

<span data-ttu-id="e95b8-166">已有人針對 5.6.204.9494 版的叢集回報這個問題</span><span class="sxs-lookup"><span data-stu-id="e95b8-166">This issue has been reported on clusters that are on 5.6.204.9494 version</span></span> 

<span data-ttu-id="e95b8-167">**風險降低**： 遵循[這份文件](service-fabric-dnsservice.md)tooenable hello DNS 服務在叢集中的網狀架構服務。</span><span class="sxs-lookup"><span data-stu-id="e95b8-167">**Mitigation** :  Follow [this document](service-fabric-dnsservice.md) tooenable hello DNS service fabric service in your cluster.</span></span>

<span data-ttu-id="e95b8-168">**修正**： 支援的升級 tooa 叢集版本高於 5.6.204.9494，可供使用。</span><span class="sxs-lookup"><span data-stu-id="e95b8-168">**Fix** :  Upgrade tooa supported cluster version that is higher than 5.6.204.9494, when it is available.</span></span> <span data-ttu-id="e95b8-169">如果您的叢集設定 tooautomatic 升級，hello 叢集將會自動升級 toohello 版本已修正此問題。</span><span class="sxs-lookup"><span data-stu-id="e95b8-169">If your cluster is set tooautomatic upgrades, then hello cluster will automatically upgrade toohello version that has this issue fixed.</span></span>

  
## <a name="application-design"></a><span data-ttu-id="e95b8-170">應用程式設計</span><span class="sxs-lookup"><span data-stu-id="e95b8-170">Application Design</span></span>

### <a name="whats-hello-best-way-tooquery-data-across-partitions-of-a-reliable-collection"></a><span data-ttu-id="e95b8-171">什麼是最佳方式 tooquery 資料 hello 可靠集合的資料分割</span><span class="sxs-lookup"><span data-stu-id="e95b8-171">What's hello best way tooquery data across partitions of a Reliable Collection?</span></span>

<span data-ttu-id="e95b8-172">可靠的集合通常是[分割](service-fabric-concepts-partitioning.md)tooenable 向外延展的更大的效能和輸送量。</span><span class="sxs-lookup"><span data-stu-id="e95b8-172">Reliable collections are typically [partitioned](service-fabric-concepts-partitioning.md) tooenable scale out for greater performance and throughput.</span></span> <span data-ttu-id="e95b8-173">這表示特定服務的 hello 狀態可能散佈 10s 或 100 的機器。</span><span class="sxs-lookup"><span data-stu-id="e95b8-173">That means that hello state for a given service may be spread across 10s or 100s of machines.</span></span> <span data-ttu-id="e95b8-174">透過完整資料集 tooperform 作業，您有幾個選項：</span><span class="sxs-lookup"><span data-stu-id="e95b8-174">tooperform operations over that full data set, you have a few options:</span></span>

- <span data-ttu-id="e95b8-175">建立查詢的另一個服務 toopull hello 所需的資料中的所有資料分割的服務。</span><span class="sxs-lookup"><span data-stu-id="e95b8-175">Create a service that queries all partitions of another service toopull in hello required data.</span></span>
- <span data-ttu-id="e95b8-176">建立可接收來自另一個服務所有分割之資料的服務。</span><span class="sxs-lookup"><span data-stu-id="e95b8-176">Create a service that can receive data from all partitions of another service.</span></span>
- <span data-ttu-id="e95b8-177">從每個服務 tooan 外部儲存區定期推播資料。</span><span class="sxs-lookup"><span data-stu-id="e95b8-177">Periodically push data from each service tooan external store.</span></span> <span data-ttu-id="e95b8-178">這個方法僅適用於您要執行 hello 查詢不是核心商務邏輯的一部分。</span><span class="sxs-lookup"><span data-stu-id="e95b8-178">This approach is only appropriate if hello queries you're performing are not part of your core business logic.</span></span>


### <a name="whats-hello-best-way-tooquery-data-across-my-actors"></a><span data-ttu-id="e95b8-179">什麼是我執行者跨 hello 最佳方式 tooquery 資料</span><span class="sxs-lookup"><span data-stu-id="e95b8-179">What's hello best way tooquery data across my actors?</span></span>

<span data-ttu-id="e95b8-180">執行者是設計的 toobe 獨立單位的狀態和計算，所以不建議使用 tooperform 廣泛查詢在執行階段的動作項目狀態。</span><span class="sxs-lookup"><span data-stu-id="e95b8-180">Actors are designed toobe independent units of state and compute, so it is not recommended tooperform broad queries of actor state at runtime.</span></span> <span data-ttu-id="e95b8-181">如果您有需要 tooquery 跨 hello 整組動作項目狀態時，您應該考慮是：</span><span class="sxs-lookup"><span data-stu-id="e95b8-181">If you have a need tooquery across hello full set of actor state, you should consider either:</span></span>

- <span data-ttu-id="e95b8-182">使 hello 的網路要求數目 toogather 所有資料從服務中的資料分割的執行者 toohello 數目的 hello 數目取代可靠的服務可設定狀態，您的行動服務。</span><span class="sxs-lookup"><span data-stu-id="e95b8-182">Replacing your actor services with stateful reliable services, such that hello number of network requests toogather all data from hello number of actors toohello number of partitions in your service.</span></span>
- <span data-ttu-id="e95b8-183">設計您執行者 tooperiodically 推入其狀態 tooan 外部存放區查詢更容易。</span><span class="sxs-lookup"><span data-stu-id="e95b8-183">Designing your actors tooperiodically push their state tooan external store for easier querying.</span></span> <span data-ttu-id="e95b8-184">為上方，這種方法才可行，如果您要執行 hello 查詢不是必要的執行階段行為。</span><span class="sxs-lookup"><span data-stu-id="e95b8-184">As above, this approach is only viable if hello queries you're performing are not required for your runtime behavior.</span></span>

### <a name="how-much-data-can-i-store-in-a-reliable-collection"></a><span data-ttu-id="e95b8-185">可靠的集合中能夠儲存多少資料？</span><span class="sxs-lookup"><span data-stu-id="e95b8-185">How much data can I store in a Reliable Collection?</span></span>

<span data-ttu-id="e95b8-186">可靠的服務通常會進行分割，因此您可以儲存的 hello 量只受限於 hello 您擁有 hello 叢集中的機器的數目和 hello 可用記憶體數量在電腦上。</span><span class="sxs-lookup"><span data-stu-id="e95b8-186">Reliable services are typically partitioned, so hello amount you can store is only limited by hello number of machines you have in hello cluster, and hello amount of memory available on those machines.</span></span>

<span data-ttu-id="e95b8-187">例如，假設您在服務中擁有的可靠集合含有 100 個分割及 3 個複本，儲存的物件大小平均為 1kb。</span><span class="sxs-lookup"><span data-stu-id="e95b8-187">As an example, suppose that you have a reliable collection in a service with 100 partitions and 3 replicas, storing objects that average 1kb in size.</span></span> <span data-ttu-id="e95b8-188">現在，假設您有 10 部機器的叢集，每部機器均含有 16GB 記憶體。</span><span class="sxs-lookup"><span data-stu-id="e95b8-188">Now suppose that you have a 10 machine cluster with 16gb of memory per machine.</span></span> <span data-ttu-id="e95b8-189">為了簡化和 toobe 的非常保守，假設 hello 作業系統和系統服務、 hello Service Fabric 執行階段，以及您的服務使用 6 gb 的離開 hello 叢集的每部電腦，可用的 10 gb 或 100 gb。</span><span class="sxs-lookup"><span data-stu-id="e95b8-189">For simplicity and toobe very conservative, assume that hello operating system and system services, hello Service Fabric runtime, and your services consume 6gb of that, leaving 10gb available per machine, or 100gb for hello cluster.</span></span>

<span data-ttu-id="e95b8-190">請記住，每個物件必須儲存三次 (一次主要，兩次複本)，在以完整容量運作的情況下，您會有足夠的記憶體提供您集合中大約 3500 萬個物件使用。</span><span class="sxs-lookup"><span data-stu-id="e95b8-190">Keeping in mind that each object must be stored three times (one primary and two replicas), you would have sufficient memory for approximately 35 million objects in your collection when operating at full capacity.</span></span> <span data-ttu-id="e95b8-191">不過，我們建議的彈性 toohello 同時遺失的故障網域和升級網域，代表約 1/3 的容量，並且會減少 hello 數字 tooroughly 23 百萬個。</span><span class="sxs-lookup"><span data-stu-id="e95b8-191">However, we recommend being resilient toohello simultaneous loss of a failure domain and an upgrade domain, which represents about 1/3 of capacity, and would reduce hello number tooroughly 23 million.</span></span>

<span data-ttu-id="e95b8-192">請注意，這項計算也假設：</span><span class="sxs-lookup"><span data-stu-id="e95b8-192">Note that this calculation also assumes:</span></span>

- <span data-ttu-id="e95b8-193">Hello hello 資料分割的資料分佈是大約一致，或您正在回報負載度量 toohello 叢集資源管理員。</span><span class="sxs-lookup"><span data-stu-id="e95b8-193">That hello distribution of data across hello partitions is roughly uniform or that you're reporting load metrics toohello Cluster Resource Manager.</span></span> <span data-ttu-id="e95b8-194">根據預設，Service Fabric 會根據複本數量進行負載平衡。</span><span class="sxs-lookup"><span data-stu-id="e95b8-194">By default, Service Fabric will load balance based on replica count.</span></span> <span data-ttu-id="e95b8-195">在上述範例中，，它會施加 hello 叢集中的每個節點上的 10 個主要複本和 20 的次要複本。</span><span class="sxs-lookup"><span data-stu-id="e95b8-195">In our example above, that would put 10 primary replicas and 20 secondary replicas on each node in hello cluster.</span></span> <span data-ttu-id="e95b8-196">適用於已平均分配 hello 資料分割的負載。</span><span class="sxs-lookup"><span data-stu-id="e95b8-196">That works well for load that is evenly distributed across hello partitions.</span></span> <span data-ttu-id="e95b8-197">如果負載是不在偶數，您必須回報負載，讓 hello 資源管理員可以封裝在一起的較小的複本並允許較大的複本 tooconsume 上的個別節點的更多記憶體。</span><span class="sxs-lookup"><span data-stu-id="e95b8-197">If load is not even, you must report load so that hello Resource Manager can pack smaller replicas together and allow larger replicas tooconsume more memory on an individual node.</span></span>

- <span data-ttu-id="e95b8-198">Hello 可靠的服務有問題的 hello 只能有一個儲存的狀態 hello 叢集中。</span><span class="sxs-lookup"><span data-stu-id="e95b8-198">That hello reliable service in question is hello only one storing state in hello cluster.</span></span> <span data-ttu-id="e95b8-199">由於您可以部署多個服務 tooa 叢集時，您必須 toobe 表達 hello 資源，則每個將會需要 toorun，並管理其狀態。</span><span class="sxs-lookup"><span data-stu-id="e95b8-199">Since you can deploy multiple services tooa cluster, you need toobe mindful of hello resources that each will need toorun and manage its state.</span></span>

- <span data-ttu-id="e95b8-200">該 hello 叢集本身不是擴大或縮小。</span><span class="sxs-lookup"><span data-stu-id="e95b8-200">That hello cluster itself is not growing or shrinking.</span></span> <span data-ttu-id="e95b8-201">如果您加入更多電腦，Service Fabric 會重新平衡您複本 tooleverage hello 額外容量直到 hello 機器的數目超出您的服務中的資料分割的 hello 數目，因為的個別複本無法跨越電腦。</span><span class="sxs-lookup"><span data-stu-id="e95b8-201">If you add more machines, Service Fabric will rebalance your replicas tooleverage hello additional capacity until hello number of machines surpasses hello number of partitions in your service, since an individual replica cannot span machines.</span></span> <span data-ttu-id="e95b8-202">相反地，如果您藉由移除機器減少 hello hello 叢集大小，複本將會更緊密地壓縮，並具有較少的整體容量。</span><span class="sxs-lookup"><span data-stu-id="e95b8-202">By contrast, if you reduce hello size of hello cluster by removing machines, your replicas will be packed more tightly and have less overall capacity.</span></span>

### <a name="how-much-data-can-i-store-in-an-actor"></a><span data-ttu-id="e95b8-203">動作項目中可儲存多少資料？</span><span class="sxs-lookup"><span data-stu-id="e95b8-203">How much data can I store in an actor?</span></span>

<span data-ttu-id="e95b8-204">如同可靠的服務資料，您可以儲存在行動服務中的 hello 數量只受限於 hello 總磁碟空間和可用記憶體 hello 您的叢集節點之間。</span><span class="sxs-lookup"><span data-stu-id="e95b8-204">As with reliable services, hello amount of data that you can store in an actor service is only limited by hello total disk space and memory available across hello nodes in your cluster.</span></span> <span data-ttu-id="e95b8-205">不過，個別的執行者時最有效時，它們使用的 tooencapsulate 少量的狀態和相關聯的商務邏輯。</span><span class="sxs-lookup"><span data-stu-id="e95b8-205">However, individual actors are most effective when they are used tooencapsulate a small amount of state and associated business logic.</span></span> <span data-ttu-id="e95b8-206">一般而言，個別的動作項目應該會有以 kb 為單位所測量的狀態。</span><span class="sxs-lookup"><span data-stu-id="e95b8-206">As a general rule, an individual actor should have state that is measured in kilobytes.</span></span>

## <a name="other-questions"></a><span data-ttu-id="e95b8-207">其他問題</span><span class="sxs-lookup"><span data-stu-id="e95b8-207">Other questions</span></span>

### <a name="how-does-service-fabric-relate-toocontainers"></a><span data-ttu-id="e95b8-208">Service Fabric 如何與 toocontainers？</span><span class="sxs-lookup"><span data-stu-id="e95b8-208">How does Service Fabric relate toocontainers?</span></span>

<span data-ttu-id="e95b8-209">容器可提供簡單的方式 toopackage 服務和其相依性以一致的方式在所有的環境中執行，並且可以在單一電腦上隔離的方式運作。</span><span class="sxs-lookup"><span data-stu-id="e95b8-209">Containers offer a simple way toopackage services and their dependencies such that they run consistently in all environments and can operate in an isolated fashion on a single machine.</span></span> <span data-ttu-id="e95b8-210">Service Fabric 提供方式 toodeploy 及管理服務，包括[已包裝在容器中的服務](service-fabric-containers-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="e95b8-210">Service Fabric offers a way toodeploy and manage services, including [services that have been packaged in a container](service-fabric-containers-overview.md).</span></span>

### <a name="are-you-planning-tooopen-source-service-fabric"></a><span data-ttu-id="e95b8-211">您計劃 tooopen 來源 Service Fabric 嗎？</span><span class="sxs-lookup"><span data-stu-id="e95b8-211">Are you planning tooopen source Service Fabric?</span></span>

<span data-ttu-id="e95b8-212">我們想在 GitHub 上的 tooopen 來源 hello 可靠的服務和可靠的動作項目架構並將接受社群投稿文章 toothose 專案。</span><span class="sxs-lookup"><span data-stu-id="e95b8-212">We intend tooopen source hello reliable services and reliable actors frameworks on GitHub and will accept community contributions toothose projects.</span></span> <span data-ttu-id="e95b8-213">請遵循 hello [Service Fabric 部落格](https://blogs.msdn.microsoft.com/azureservicefabric/)如需詳細資訊，因為它們宣布。</span><span class="sxs-lookup"><span data-stu-id="e95b8-213">Please follow hello [Service Fabric blog](https://blogs.msdn.microsoft.com/azureservicefabric/) for more details as they're announced.</span></span>

<span data-ttu-id="e95b8-214">hello 是目前沒有計劃 tooopen 來源 hello Service Fabric 執行階段。</span><span class="sxs-lookup"><span data-stu-id="e95b8-214">hello are currently no plans tooopen source hello Service Fabric runtime.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e95b8-215">後續步驟</span><span class="sxs-lookup"><span data-stu-id="e95b8-215">Next steps</span></span>

- [<span data-ttu-id="e95b8-216">深入了解核心 Service Fabric 概念和最佳做法 (英文)</span><span class="sxs-lookup"><span data-stu-id="e95b8-216">Learn about core Service Fabric concepts and best practices</span></span>](https://mva.microsoft.com/en-us/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=tbuZM46yC_5206218965)
