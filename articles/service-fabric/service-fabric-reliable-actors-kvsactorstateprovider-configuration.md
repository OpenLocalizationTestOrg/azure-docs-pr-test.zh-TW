---
title: "在 Azure microservices aaaChange KVSActorStateProvider 設定 |Microsoft 文件"
description: "了解設定 KVSActorStateProvider 類型的 Azure Service Fabric 可設定狀態的動作項目。"
services: Service-Fabric
documentationcenter: .net
author: sumukhs
manager: timlt
editor: 
ms.assetid: dbed72f4-dda5-4287-bd56-da492710cd96
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 6/29/2017
ms.author: sumukhs
ms.openlocfilehash: e003512678556e68a8926b1b9c6c28d9ae3979d2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="configuring-reliable-actors--kvsactorstateprovider"></a><span data-ttu-id="769d7-103">設定 Reliable Actors - KVSActorStateProvider</span><span class="sxs-lookup"><span data-stu-id="769d7-103">Configuring Reliable Actors--KVSActorStateProvider</span></span>
<span data-ttu-id="769d7-104">您可以藉由變更產生 hello Microsoft Visual Studio 封裝根目錄下 hello 指定執行者的 hello Config 資料夾中的 hello settings.xml 檔修改 KVSActorStateProvider hello 預設組態。</span><span class="sxs-lookup"><span data-stu-id="769d7-104">You can modify hello default configuration of KVSActorStateProvider by changing hello settings.xml file that is generated in hello Microsoft Visual Studio package root under hello Config folder for hello specified actor.</span></span>

<span data-ttu-id="769d7-105">hello Azure Service Fabric 執行階段會尋找 hello settings.xml 檔案中的預先定義的區段名稱，並時都會佔用掉 hello 組態值建立 hello 基礎執行階段元件。</span><span class="sxs-lookup"><span data-stu-id="769d7-105">hello Azure Service Fabric runtime looks for predefined section names in hello settings.xml file and consumes hello configuration values while creating hello underlying runtime components.</span></span>

> [!NOTE]
> <span data-ttu-id="769d7-106">請勿**不**刪除或修改的設定產生 hello Visual Studio 方案中的 hello settings.xml 檔案中的 hello hello 的區段名稱。</span><span class="sxs-lookup"><span data-stu-id="769d7-106">Do **not** delete or modify hello section names of hello following configurations in hello settings.xml file that is generated in hello Visual Studio solution.</span></span>
> 
> 

## <a name="replicator-security-configuration"></a><span data-ttu-id="769d7-107">複寫器安全性組態</span><span class="sxs-lookup"><span data-stu-id="769d7-107">Replicator security configuration</span></span>
<span data-ttu-id="769d7-108">複寫器的安全性設定是在複寫期間所使用的 toosecure hello 通訊通道。</span><span class="sxs-lookup"><span data-stu-id="769d7-108">Replicator security configurations are used toosecure hello communication channel that is used during replication.</span></span> <span data-ttu-id="769d7-109">這表示服務無法看到彼此的複寫流量，確保 hello 資料，則高可用性的安全。</span><span class="sxs-lookup"><span data-stu-id="769d7-109">This means that services cannot see each other's replication traffic, ensuring that hello data that is made highly available is also secure.</span></span>
<span data-ttu-id="769d7-110">依預設，空白的安全性組態區段會妨礙複寫安全性。</span><span class="sxs-lookup"><span data-stu-id="769d7-110">By default, an empty security configuration section prevents replication security.</span></span>

### <a name="section-name"></a><span data-ttu-id="769d7-111">區段名稱</span><span class="sxs-lookup"><span data-stu-id="769d7-111">Section name</span></span>
<span data-ttu-id="769d7-112">&lt;ActorName&gt;ServiceReplicatorSecurityConfig</span><span class="sxs-lookup"><span data-stu-id="769d7-112">&lt;ActorName&gt;ServiceReplicatorSecurityConfig</span></span>

## <a name="replicator-configuration"></a><span data-ttu-id="769d7-113">複寫器組態</span><span class="sxs-lookup"><span data-stu-id="769d7-113">Replicator configuration</span></span>
<span data-ttu-id="769d7-114">複寫器的組態設定，負責建立 hello 動作項目狀態提供者狀態可靠 hello 複寫器。</span><span class="sxs-lookup"><span data-stu-id="769d7-114">Replicator configurations configure hello replicator that is responsible for making hello Actor State Provider state highly reliable.</span></span>
<span data-ttu-id="769d7-115">hello 預設設定由 hello Visual Studio 範本所產生，並應已足夠。</span><span class="sxs-lookup"><span data-stu-id="769d7-115">hello default configuration is generated by hello Visual Studio template and should suffice.</span></span> <span data-ttu-id="769d7-116">本節討論有關可用 tootune hello 複寫器的其他組態。</span><span class="sxs-lookup"><span data-stu-id="769d7-116">This section talks about additional configurations that are available tootune hello replicator.</span></span>

### <a name="section-name"></a><span data-ttu-id="769d7-117">區段名稱</span><span class="sxs-lookup"><span data-stu-id="769d7-117">Section name</span></span>
<span data-ttu-id="769d7-118">&lt;ActorName&gt;ServiceReplicatorConfig</span><span class="sxs-lookup"><span data-stu-id="769d7-118">&lt;ActorName&gt;ServiceReplicatorConfig</span></span>

### <a name="configuration-names"></a><span data-ttu-id="769d7-119">組態名稱</span><span class="sxs-lookup"><span data-stu-id="769d7-119">Configuration names</span></span>
| <span data-ttu-id="769d7-120">名稱</span><span class="sxs-lookup"><span data-stu-id="769d7-120">Name</span></span> | <span data-ttu-id="769d7-121">單位</span><span class="sxs-lookup"><span data-stu-id="769d7-121">Unit</span></span> | <span data-ttu-id="769d7-122">預設值</span><span class="sxs-lookup"><span data-stu-id="769d7-122">Default value</span></span> | <span data-ttu-id="769d7-123">備註</span><span class="sxs-lookup"><span data-stu-id="769d7-123">Remarks</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="769d7-124">BatchAcknowledgementInterval</span><span class="sxs-lookup"><span data-stu-id="769d7-124">BatchAcknowledgementInterval</span></span> |<span data-ttu-id="769d7-125">秒</span><span class="sxs-lookup"><span data-stu-id="769d7-125">Seconds</span></span> |<span data-ttu-id="769d7-126">0.015</span><span class="sxs-lookup"><span data-stu-id="769d7-126">0.015</span></span> |<span data-ttu-id="769d7-127">一段時間的哪些 hello 複寫器在 hello 次要等候接收之前傳送回認可 toohello 主要的作業之後。</span><span class="sxs-lookup"><span data-stu-id="769d7-127">Time period for which hello replicator at hello secondary waits after receiving an operation before sending back an acknowledgement toohello primary.</span></span> <span data-ttu-id="769d7-128">傳送作業在此時間間隔內處理的任何其他通知 toobe 會以一個回應傳送。</span><span class="sxs-lookup"><span data-stu-id="769d7-128">Any other acknowledgements toobe sent for operations processed within this interval are sent as one response.</span></span> |
| <span data-ttu-id="769d7-129">ReplicatorEndpoint</span><span class="sxs-lookup"><span data-stu-id="769d7-129">ReplicatorEndpoint</span></span> |<span data-ttu-id="769d7-130">N/A</span><span class="sxs-lookup"><span data-stu-id="769d7-130">N/A</span></span> |<span data-ttu-id="769d7-131">無預設值--必要的參數</span><span class="sxs-lookup"><span data-stu-id="769d7-131">No default--required parameter</span></span> |<span data-ttu-id="769d7-132">IP 位址和連接埠 hello 主要/次要複寫器都會使用 toocommunicate，而其他購 hello 複本集中。</span><span class="sxs-lookup"><span data-stu-id="769d7-132">IP address and port that hello primary/secondary replicator will use toocommunicate with other replicators in hello replica set.</span></span> <span data-ttu-id="769d7-133">這應該參考 hello 服務資訊清單中的 TCP 資源端點。</span><span class="sxs-lookup"><span data-stu-id="769d7-133">This should reference a TCP resource endpoint in hello service manifest.</span></span> <span data-ttu-id="769d7-134">請參閱太[服務資訊清單資源](service-fabric-service-manifest-resources.md)tooread 更多關於 hello 服務資訊清單中定義端點資源。</span><span class="sxs-lookup"><span data-stu-id="769d7-134">Refer too[Service manifest resources](service-fabric-service-manifest-resources.md) tooread more about defining endpoint resources in hello service manifest.</span></span> |
| <span data-ttu-id="769d7-135">RetryInterval</span><span class="sxs-lookup"><span data-stu-id="769d7-135">RetryInterval</span></span> |<span data-ttu-id="769d7-136">秒</span><span class="sxs-lookup"><span data-stu-id="769d7-136">Seconds</span></span> |<span data-ttu-id="769d7-137">5</span><span class="sxs-lookup"><span data-stu-id="769d7-137">5</span></span> |<span data-ttu-id="769d7-138">之後如果收到作業認可訊息的 hello 複寫器重新傳輸的時間週期。</span><span class="sxs-lookup"><span data-stu-id="769d7-138">Time period after which hello replicator re-transmits a message if it does not receive an acknowledgement for an operation.</span></span> |
| <span data-ttu-id="769d7-139">MaxReplicationMessageSize</span><span class="sxs-lookup"><span data-stu-id="769d7-139">MaxReplicationMessageSize</span></span> |<span data-ttu-id="769d7-140">位元組</span><span class="sxs-lookup"><span data-stu-id="769d7-140">Bytes</span></span> |<span data-ttu-id="769d7-141">50 MB</span><span class="sxs-lookup"><span data-stu-id="769d7-141">50 MB</span></span> |<span data-ttu-id="769d7-142">單一訊息可傳輸的複寫資料大小上限。</span><span class="sxs-lookup"><span data-stu-id="769d7-142">Maximum size of replication data that can be transmitted in a single message.</span></span> |
| <span data-ttu-id="769d7-143">MaxPrimaryReplicationQueueSize</span><span class="sxs-lookup"><span data-stu-id="769d7-143">MaxPrimaryReplicationQueueSize</span></span> |<span data-ttu-id="769d7-144">作業數目</span><span class="sxs-lookup"><span data-stu-id="769d7-144">Number of operations</span></span> |<span data-ttu-id="769d7-145">1024</span><span class="sxs-lookup"><span data-stu-id="769d7-145">1024</span></span> |<span data-ttu-id="769d7-146">Hello 主要佇列中的作業數目上限。</span><span class="sxs-lookup"><span data-stu-id="769d7-146">Maximum number of operations in hello primary queue.</span></span> <span data-ttu-id="769d7-147">作業釋放 hello 主要複寫器接收到所有的 hello 次要購自之後。</span><span class="sxs-lookup"><span data-stu-id="769d7-147">An operation is freed up after hello primary replicator receives an acknowledgement from all hello secondary replicators.</span></span> <span data-ttu-id="769d7-148">此值必須大於 64 且為 2 的乘冪。</span><span class="sxs-lookup"><span data-stu-id="769d7-148">This value must be greater than 64 and a power of 2.</span></span> |
| <span data-ttu-id="769d7-149">MaxSecondaryReplicationQueueSize</span><span class="sxs-lookup"><span data-stu-id="769d7-149">MaxSecondaryReplicationQueueSize</span></span> |<span data-ttu-id="769d7-150">作業數目</span><span class="sxs-lookup"><span data-stu-id="769d7-150">Number of operations</span></span> |<span data-ttu-id="769d7-151">2048</span><span class="sxs-lookup"><span data-stu-id="769d7-151">2048</span></span> |<span data-ttu-id="769d7-152">Hello 次要佇列中的作業數目上限。</span><span class="sxs-lookup"><span data-stu-id="769d7-152">Maximum number of operations in hello secondary queue.</span></span> <span data-ttu-id="769d7-153">透過持續性讓狀態成為高可用性後，系統便會釋放作業。</span><span class="sxs-lookup"><span data-stu-id="769d7-153">An operation is freed up after making its state highly available through persistence.</span></span> <span data-ttu-id="769d7-154">此值必須大於 64 且為 2 的乘冪。</span><span class="sxs-lookup"><span data-stu-id="769d7-154">This value must be greater than 64 and a power of 2.</span></span> |

## <a name="store-configuration"></a><span data-ttu-id="769d7-155">存放區組態</span><span class="sxs-lookup"><span data-stu-id="769d7-155">Store configuration</span></span>
<span data-ttu-id="769d7-156">會使用的 tooconfigure hello 本機存放區所使用的 toopersist hello 狀態正在複寫的存放區組態。</span><span class="sxs-lookup"><span data-stu-id="769d7-156">Store configurations are used tooconfigure hello local store that is used toopersist hello state that is being replicated.</span></span>
<span data-ttu-id="769d7-157">hello 預設設定由 hello Visual Studio 範本所產生，並應已足夠。</span><span class="sxs-lookup"><span data-stu-id="769d7-157">hello default configuration is generated by hello Visual Studio template and should suffice.</span></span> <span data-ttu-id="769d7-158">本節討論有關其他設定，可以使用 tootune hello 本機存放區。</span><span class="sxs-lookup"><span data-stu-id="769d7-158">This section talks about additional configurations that are available tootune hello local store.</span></span>

### <a name="section-name"></a><span data-ttu-id="769d7-159">區段名稱</span><span class="sxs-lookup"><span data-stu-id="769d7-159">Section name</span></span>
<span data-ttu-id="769d7-160">&lt;ActorName&gt;ServiceLocalStoreConfig</span><span class="sxs-lookup"><span data-stu-id="769d7-160">&lt;ActorName&gt;ServiceLocalStoreConfig</span></span>

### <a name="configuration-names"></a><span data-ttu-id="769d7-161">組態名稱</span><span class="sxs-lookup"><span data-stu-id="769d7-161">Configuration names</span></span>
| <span data-ttu-id="769d7-162">名稱</span><span class="sxs-lookup"><span data-stu-id="769d7-162">Name</span></span> | <span data-ttu-id="769d7-163">單位</span><span class="sxs-lookup"><span data-stu-id="769d7-163">Unit</span></span> | <span data-ttu-id="769d7-164">預設值</span><span class="sxs-lookup"><span data-stu-id="769d7-164">Default value</span></span> | <span data-ttu-id="769d7-165">備註</span><span class="sxs-lookup"><span data-stu-id="769d7-165">Remarks</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="769d7-166">MaxAsyncCommitDelayInMilliseconds</span><span class="sxs-lookup"><span data-stu-id="769d7-166">MaxAsyncCommitDelayInMilliseconds</span></span> |<span data-ttu-id="769d7-167">毫秒</span><span class="sxs-lookup"><span data-stu-id="769d7-167">Milliseconds</span></span> |<span data-ttu-id="769d7-168">200</span><span class="sxs-lookup"><span data-stu-id="769d7-168">200</span></span> |<span data-ttu-id="769d7-169">設定批次處理間隔可用之區域的長期存放區認可 hello 最大值。</span><span class="sxs-lookup"><span data-stu-id="769d7-169">Sets hello maximum batching interval for durable local store commits.</span></span> |
| <span data-ttu-id="769d7-170">MaxVerPages</span><span class="sxs-lookup"><span data-stu-id="769d7-170">MaxVerPages</span></span> |<span data-ttu-id="769d7-171">頁面數目</span><span class="sxs-lookup"><span data-stu-id="769d7-171">Number of pages</span></span> |<span data-ttu-id="769d7-172">16384</span><span class="sxs-lookup"><span data-stu-id="769d7-172">16384</span></span> |<span data-ttu-id="769d7-173">存放區資料庫的版本中的頁數 hello 本機的 hello 最大數目。</span><span class="sxs-lookup"><span data-stu-id="769d7-173">hello maximum number of version pages in hello local store database.</span></span> <span data-ttu-id="769d7-174">它會判斷 hello 的未處理的交易數目上限。</span><span class="sxs-lookup"><span data-stu-id="769d7-174">It determines hello maximum number of outstanding transactions.</span></span> |

## <a name="sample-configuration-file"></a><span data-ttu-id="769d7-175">範例組態檔</span><span class="sxs-lookup"><span data-stu-id="769d7-175">Sample configuration file</span></span>
```xml
<?xml version="1.0" encoding="utf-8"?>
<Settings xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/2011/01/fabric">
   <Section Name="MyActorServiceReplicatorConfig">
      <Parameter Name="ReplicatorEndpoint" Value="MyActorServiceReplicatorEndpoint" />
      <Parameter Name="BatchAcknowledgementInterval" Value="0.05"/>
   </Section>
   <Section Name="MyActorServiceLocalStoreConfig">
      <Parameter Name="MaxVerPages" Value="8192" />
   </Section>
   <Section Name="MyActorServiceReplicatorSecurityConfig">
      <Parameter Name="CredentialType" Value="X509" />
      <Parameter Name="FindType" Value="FindByThumbprint" />
      <Parameter Name="FindValue" Value="9d c9 06 b1 69 dc 4f af fd 16 97 ac 78 1e 80 67 90 74 9d 2f" />
      <Parameter Name="StoreLocation" Value="LocalMachine" />
      <Parameter Name="StoreName" Value="My" />
      <Parameter Name="ProtectionLevel" Value="EncryptAndSign" />
      <Parameter Name="AllowedCommonNames" Value="My-Test-SAN1-Alice,My-Test-SAN1-Bob" />
   </Section>
</Settings>
```
## <a name="remarks"></a><span data-ttu-id="769d7-176">備註</span><span class="sxs-lookup"><span data-stu-id="769d7-176">Remarks</span></span>
<span data-ttu-id="769d7-177">hello BatchAcknowledgementInterval 參數控制複寫延遲。</span><span class="sxs-lookup"><span data-stu-id="769d7-177">hello BatchAcknowledgementInterval parameter controls replication latency.</span></span> <span data-ttu-id="769d7-178">值 '0' 會導致 hello 最低可能延遲，輸送量的 hello 成本 （如需收條訊息必須傳送和處理，每個包含較少的通知）。</span><span class="sxs-lookup"><span data-stu-id="769d7-178">A value of '0' results in hello lowest possible latency, at hello cost of throughput (as more acknowledgement messages must be sent and processed, each containing fewer acknowledgements).</span></span>
<span data-ttu-id="769d7-179">hello BatchAcknowledgementInterval，hello 值越大 hello 較高的 hello 整體複寫輸送量，在 hello 成本較高的作業延遲。</span><span class="sxs-lookup"><span data-stu-id="769d7-179">hello larger hello value for BatchAcknowledgementInterval, hello higher hello overall replication throughput, at hello cost of higher operation latency.</span></span> <span data-ttu-id="769d7-180">這會直接轉譯 toohello 延遲的交易認可。</span><span class="sxs-lookup"><span data-stu-id="769d7-180">This directly translates toohello latency of transaction commits.</span></span>

