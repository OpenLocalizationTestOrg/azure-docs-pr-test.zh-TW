---
title: "Azure Service Fabric 平台層級監視 | Microsoft Docs"
description: "了解用來監視和診斷 Azure Service Fabric 叢集的平台層級事件和記錄。"
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/24/2017
ms.author: dekapur
ms.openlocfilehash: c5857515ae8357b003f0999c4b11bd666c32bbf9
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/29/2017
---
# <a name="platform-level-event-and-log-generation"></a><span data-ttu-id="ac1cb-103">平台層級事件和記錄產生</span><span class="sxs-lookup"><span data-stu-id="ac1cb-103">Platform level event and log generation</span></span>

## <a name="monitoring-the-cluster"></a><span data-ttu-id="ac1cb-104">監視叢集</span><span class="sxs-lookup"><span data-stu-id="ac1cb-104">Monitoring the cluster</span></span>

<span data-ttu-id="ac1cb-105">請務必在平台層級進行監視，以判斷硬體和叢集是否如預期運作。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-105">It is important to monitor at the platform level to determine whether or not your hardware and cluster are behaving as expected.</span></span> <span data-ttu-id="ac1cb-106">雖然 Service Fabric 可在硬體故障時讓應用程式繼續執行，但是您仍需要診斷錯誤是發生在應用程式中，還是發生在基礎結構中。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-106">Though Service Fabric can keep applications running during a hardware failure, but you still need to diagnose whether an error is occurring in an application or in the underlying infrastructure.</span></span> <span data-ttu-id="ac1cb-107">您也應該監視叢集，更妥善地規劃容量，以協助決定如何新增或移除硬體。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-107">You also should monitor your clusters to better plan for capacity, helping in decisions about adding or removing hardware.</span></span>

<span data-ttu-id="ac1cb-108">Service Fabric 提供五個產生下列事件的不同現成記錄通道：</span><span class="sxs-lookup"><span data-stu-id="ac1cb-108">Service Fabric provides five different log channels out-of-the-box that generate the following events:</span></span>

* <span data-ttu-id="ac1cb-109">操作通道：由 Service Fabric 與叢集執行的高階作業，包括即將進行的節點事件、正在部署的新應用程式，或 SF 升級復原等等。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-109">Operational channel: high-level operations performed by Service Fabric and the cluster, including events for a node coming up, a new application being deployed, or a SF upgrade rollback, etc.</span></span>
* <span data-ttu-id="ac1cb-110">作業通道 - 詳細：健康情況報告與負載平衡決策</span><span class="sxs-lookup"><span data-stu-id="ac1cb-110">Operational channel - detailed: health reports and load balancing decisions</span></span>
* <span data-ttu-id="ac1cb-111">資料和傳訊通道：在我們的傳訊 (目前僅限 ReverseProxy) 和資料路徑 (可靠的服務模型) 中產生的重要記錄和事件</span><span class="sxs-lookup"><span data-stu-id="ac1cb-111">Data & Messaging channel: critical logs and events generated in our messaging (currently only the ReverseProxy) and data path (reliable services models)</span></span>
* <span data-ttu-id="ac1cb-112">資料和傳訊通道 - 詳細：詳細資訊通道，其中包含叢集中資料和傳訊的所有非重要記錄 (此通道有非常大量的事件)</span><span class="sxs-lookup"><span data-stu-id="ac1cb-112">Data & Messaging channel - detailed: verbose channel that contains all the non-critical logs from data and messaging in the cluster (this channel has a very high volume of events)</span></span>   
* <span data-ttu-id="ac1cb-113">[Reliable Services 事件](service-fabric-reliable-services-diagnostics.md)：程式設計模型特定的事件</span><span class="sxs-lookup"><span data-stu-id="ac1cb-113">[Reliable Services events](service-fabric-reliable-services-diagnostics.md): programming model specific events</span></span>
* <span data-ttu-id="ac1cb-114">[Reliable Actors 事件](service-fabric-reliable-actors-diagnostics.md)︰程式設計模型特定的事件和效能計數器</span><span class="sxs-lookup"><span data-stu-id="ac1cb-114">[Reliable Actors events](service-fabric-reliable-actors-diagnostics.md): programming model specific events and performance counters</span></span>
* <span data-ttu-id="ac1cb-115">支援的記錄：由 Service Fabric 產生的系統記錄僅供我們在提供支援時使用</span><span class="sxs-lookup"><span data-stu-id="ac1cb-115">Support logs: system logs generated by Service Fabric only to be used by us when providing support</span></span>

<span data-ttu-id="ac1cb-116">這些各種通道涵蓋建議的大部分平台層級記錄。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-116">These various channels cover most of the platform level logging that is recommended.</span></span> <span data-ttu-id="ac1cb-117">若要改善平台層級記錄，請考慮深入了解健康情況模型並新增自訂健康情況報告，以及新增自訂**效能計數器**來即時了解對叢集上服務和應用程式的影響。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-117">To improve platform level logging, consider investing in better understanding the health model and adding custom health reports, and adding custom **Performance Counters** to build a real-time understanding of the impact of your services and applications on the cluster.</span></span>

### <a name="azure-service-fabric-health-and-load-reporting"></a><span data-ttu-id="ac1cb-118">Azure Service Fabric 健全狀況和負載報告</span><span class="sxs-lookup"><span data-stu-id="ac1cb-118">Azure Service Fabric health and load reporting</span></span>

<span data-ttu-id="ac1cb-119">Service Fabric 有自己的健全狀況模型，詳述於下列文件：</span><span class="sxs-lookup"><span data-stu-id="ac1cb-119">Service Fabric has its own health model, which is described in detail in these articles:</span></span>
- [<span data-ttu-id="ac1cb-120">Service Fabric 健全狀況監視簡介</span><span class="sxs-lookup"><span data-stu-id="ac1cb-120">Introduction to Service Fabric health monitoring</span></span>](service-fabric-health-introduction.md)
- [<span data-ttu-id="ac1cb-121">回報和檢查服務健全狀況</span><span class="sxs-lookup"><span data-stu-id="ac1cb-121">Report and check service health</span></span>](service-fabric-diagnostics-how-to-report-and-check-service-health.md)
- [<span data-ttu-id="ac1cb-122">新增自訂 Service Fabric 健康狀態報告</span><span class="sxs-lookup"><span data-stu-id="ac1cb-122">Add custom Service Fabric health reports</span></span>](service-fabric-report-health.md)
- [<span data-ttu-id="ac1cb-123">檢視 Service Fabric 健康狀態報告</span><span class="sxs-lookup"><span data-stu-id="ac1cb-123">View Service Fabric health reports</span></span>](service-fabric-view-entities-aggregated-health.md)

<span data-ttu-id="ac1cb-124">對於服務運作的許多層面而言，健全狀況監視不可或缺。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-124">Health monitoring is critical to multiple aspects of operating a service.</span></span> <span data-ttu-id="ac1cb-125">當 Service Fabric 執行具名的應用程式升級時，健全狀況監視尤其重要。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-125">Health monitoring is especially important when Service Fabric performs a named application upgrade.</span></span> <span data-ttu-id="ac1cb-126">當服務的每個升級網域完成升級並提供給客戶之後，升級網域必須通過健全狀況檢查，才能繼續部署至下一個升級網域。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-126">After each upgrade domain of the service is upgraded and is available to your customers, the upgrade domain must pass health checks before the deployment moves to the next upgrade domain.</span></span> <span data-ttu-id="ac1cb-127">如果無法達到良好的健全狀態，部署就會復原，讓應用程式保持已知的良好狀態。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-127">If good health status cannot be achieved, the deployment is rolled back, so that the application is in a known, good state.</span></span> <span data-ttu-id="ac1cb-128">雖然在服務復原之前會影響一些客戶，但大部分客戶都不會遇到問題。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-128">Although some customers might be affected before the services are rolled back, most customers won't experience an issue.</span></span> <span data-ttu-id="ac1cb-129">此外，很快就會開始解決，無需等待操作人員採取行動。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-129">Also, a resolution occurs relatively quickly, and without having to wait for action from a human operator.</span></span> <span data-ttu-id="ac1cb-130">在程式碼中納入越多健全狀況檢查，服務越能夠從部署問題中恢復。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-130">The more health checks that are incorporated into your code, the more resilient your service is to deployment issues.</span></span>

<span data-ttu-id="ac1cb-131">服務健全狀況的另一個層面是來自服務的報告計量。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-131">Another aspect of service health is reporting metrics from the service.</span></span> <span data-ttu-id="ac1cb-132">計量是用來平衡資源使用量，在 Service Fabric 中很重要。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-132">Metrics are important in Service Fabric because they are used to balance resource usage.</span></span> <span data-ttu-id="ac1cb-133">計量也可以當做系統健全狀況的指標。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-133">Metrics also can be an indicator of system health.</span></span> <span data-ttu-id="ac1cb-134">例如，您的應用程式可能有許多服務，而每個執行個體會報告每秒要求數 (RPS) 計量。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-134">For example, you might have an application that has many services, and each instance reports a requests per second (RPS) metric.</span></span> <span data-ttu-id="ac1cb-135">如果有一項服務比其他服務使用更多資源，Service Fabric 會在叢集內移動服務執行個體，嘗試維護平衡的資源使用量。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-135">If one service is using more resources than another service, Service Fabric moves service instances around the cluster, to try to maintain even resource utilization.</span></span> <span data-ttu-id="ac1cb-136">如需資源耗用量運作方式的詳細說明，請參閱[在 Service Fabric 中使用計量管理資源耗用量和負載](service-fabric-cluster-resource-manager-metrics.md)。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-136">For a more detailed explanation of how resource utilization works, see [Manage resource consumption and load in Service Fabric with metrics](service-fabric-cluster-resource-manager-metrics.md).</span></span>

<span data-ttu-id="ac1cb-137">計量也可協助您深入探索服務的運作方式。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-137">Metrics also can help give you insight into how your service is performing.</span></span> <span data-ttu-id="ac1cb-138">經過一段時間，您可以使用計量，檢查服務是否在預期的參數內運作。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-138">Over time, you can use metrics to check that the service is operating within expected parameters.</span></span> <span data-ttu-id="ac1cb-139">比方說，如果趨勢指出星期一早上 9 點的平均 RPS 是 1,000，您可能將健全狀況報告設定為當 RPS 低於 500 或高於 1,500 時發出警示。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-139">For example, if trends show that at 9 AM on Monday morning the average RPS is 1,000, then you might set up a health report that alerts you if the RPS is below 500 or above 1,500.</span></span> <span data-ttu-id="ac1cb-140">一切可能都沒問題，但您可能需要檢查一下，確保客戶擁有絕佳的體驗。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-140">Everything might be perfectly fine, but it might be worth a look to be sure that your customers are having a great experience.</span></span> <span data-ttu-id="ac1cb-141">您的服務可以定義一組計量，供健全狀況檢查時報告，但又不影響叢集的資源平衡。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-141">Your service can define a set of metrics that can be reported for health check purposes, but that don't affect the resource balancing of the cluster.</span></span> <span data-ttu-id="ac1cb-142">若要這樣做，請將計量權數設為零。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-142">To do this, set the metric weight to zero.</span></span> <span data-ttu-id="ac1cb-143">我們建議您在開始時將所有計量的加權設為零，並且在確定您了解計量加權會如何影響叢集的資源平衡前，都不要提高權數。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-143">We recommend that you start all metrics with a weight of zero, and not increase the weight  until you are sure that you understand how weighting the metrics affects resource balancing for your cluster.</span></span>

> [!TIP]
> <span data-ttu-id="ac1cb-144">請勿使用太多的加權計量。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-144">Don't use too many weighted metrics.</span></span> <span data-ttu-id="ac1cb-145">很難了解服務執行個體為了平衡而移動的原因。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-145">It can be difficult to understand why service instances are being moved around for balancing.</span></span> <span data-ttu-id="ac1cb-146">少數幾個計量就很夠用！</span><span class="sxs-lookup"><span data-stu-id="ac1cb-146">A few metrics can go a long way!</span></span>

<span data-ttu-id="ac1cb-147">任何能夠指出應用程式健全狀況和效能的資訊，都適合納入計量和健全狀況報告中。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-147">Any information that can indicate the health and performance of your application is a candidate for metrics and health reports.</span></span> <span data-ttu-id="ac1cb-148">CPU 效能計數器可以告訴您節點的使用情況，但無法讓您知道某個特定服務是否健康，因為可能有多項服務在單一節點上執行。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-148">A CPU performance counter can tell you how your node is utilized, but it doesn't tell you whether a particular service is healthy, because multiple services might be running on a single node.</span></span> <span data-ttu-id="ac1cb-149">不過，像是 RPS、處理的項目和求延遲等計量，都可以指出特定服務的健全狀況。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-149">But, metrics like RPS, items processed, and request latency all can indicate the health of a specific service.</span></span>

<span data-ttu-id="ac1cb-150">若要報告健全狀況，請使用如下的程式碼︰</span><span class="sxs-lookup"><span data-stu-id="ac1cb-150">To report health, use code similar to this:</span></span>

  ```csharp
    if (!result.HasValue)
    {
        HealthInformation healthInformation = new HealthInformation("ServiceCode", "StateDictionary", HealthState.Error);
        this.Partition.ReportInstanceHealth(healthInformation);
    }
  ```

<span data-ttu-id="ac1cb-151">若要報告計量，請使用如下的程式碼︰</span><span class="sxs-lookup"><span data-stu-id="ac1cb-151">To report a metric, use code similar to this:</span></span>

  ```csharp
    this.Partition.ReportLoad(new List<LoadMetric> { new LoadMetric("MemoryInMb", 1234), new LoadMetric("metric1", 42) });
  ```

### <a name="service-fabric-support-logs"></a><span data-ttu-id="ac1cb-152">Service Fabric 支援記錄</span><span class="sxs-lookup"><span data-stu-id="ac1cb-152">Service Fabric support logs</span></span>

<span data-ttu-id="ac1cb-153">如果您需要連絡 Microsoft 支援服務以協助處理您的 Azure Service Fabric 叢集，通常都需要提供支援記錄。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-153">If you need to contact Microsoft support for help with your Azure Service Fabric cluster, support logs are almost always required.</span></span> <span data-ttu-id="ac1cb-154">如果您的叢集裝載於 Azure，建立叢集時會自動設定和收集支援記錄。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-154">If your cluster is hosted in Azure, support logs are automatically configured and collected as part of creating a cluster.</span></span> <span data-ttu-id="ac1cb-155">記錄會儲存在叢集資源群組中的專用儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-155">The logs are stored in a dedicated storage account in your cluster's resource group.</span></span> <span data-ttu-id="ac1cb-156">儲存體帳戶沒有固定名稱，但您會在帳戶中看到名稱以 fabric 開頭的 blob 容器和資料表。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-156">The storage account doesn't have a fixed name, but in the account, you see blob containers and tables with names that start with *fabric*.</span></span> <span data-ttu-id="ac1cb-157">如需有關為獨立叢集設定記錄收集的資訊，請參閱[建立和管理獨立 Azure Service Fabric 叢集](service-fabric-cluster-creation-for-windows-server.md)和[獨立 Windows 叢集的組態設定](service-fabric-cluster-manifest.md)。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-157">For information about setting up log collections for a standalone cluster, see [Create and manage a standalone Azure Service Fabric cluster](service-fabric-cluster-creation-for-windows-server.md) and [Configuration settings for a standalone Windows cluster](service-fabric-cluster-manifest.md).</span></span> <span data-ttu-id="ac1cb-158">若為獨立 Service Fabric 執行個體，記錄應該傳送至本機檔案共用。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-158">For standalone Service Fabric instances, the logs should be sent to a local file share.</span></span> <span data-ttu-id="ac1cb-159">您**需要**擁有這些記錄才能取得支援，而這些記錄只限 Microsoft 客戶支援小組使用。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-159">You are **required** to have these logs for support, but they are not intended to be usable by anyone outside of the Microsoft customer support team.</span></span>

## <a name="enabling-diagnostics-for-a-cluster"></a><span data-ttu-id="ac1cb-160">啟用叢集的診斷</span><span class="sxs-lookup"><span data-stu-id="ac1cb-160">Enabling Diagnostics for a cluster</span></span>

<span data-ttu-id="ac1cb-161">若要充分利用這些記錄，強烈建議在建立叢集期間啟用「診斷」。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-161">In order to take advantage of these logs, it is highly recommended that during cluster creation, "Diagnostics" is enabled.</span></span> <span data-ttu-id="ac1cb-162">透過開啟診斷，在部署叢集時，Windows Azure 診斷可以認可 Operational、Reliable Services 和 Reliable actors 通道，並儲存資料，如[使用 Azure 診斷彙總事件](service-fabric-diagnostics-event-aggregation-wad.md)的進一步說明。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-162">By turning on diagnostics, when the cluster is deployed, Windows Azure Diagnostics is able to acknowledge the Operational, Reliable Services, and Reliable actors channels, and store the data as explained further in [Aggregate events with Azure Diagnostics](service-fabric-diagnostics-event-aggregation-wad.md).</span></span>

<span data-ttu-id="ac1cb-163">如上所示，也有選擇性欄位可新增 Application Insights (AI) 檢測索引鍵。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-163">As seen above, there is also an optional field to add an Application Insights (AI) instrumentation key.</span></span> <span data-ttu-id="ac1cb-164">如果您選擇使用 AI 進行任何事件分析 (在[透過 Application Insights 的事件分析](service-fabric-diagnostics-event-analysis-appinsights.md)深入閱讀此作業)，請在此包含 AppInsights 資源 instrumentationKey (GUID)。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-164">If you choose to use AI for any event analysis (read more about this in [Event Analysis with Application Insights](service-fabric-diagnostics-event-analysis-appinsights.md)), include the AppInsights resource instrumentationKey (GUID) here.</span></span>


<span data-ttu-id="ac1cb-165">如果您要將容器部署至叢集，請讓 WAD 挑選 Docker 統計資料，方法是將這個項目新增至 "WadCfg > DiagnosticMonitorConfiguration"：</span><span class="sxs-lookup"><span data-stu-id="ac1cb-165">If you are going to deploy containers to your cluster, enable WAD to pick up docker stats by adding this to your "WadCfg > DiagnosticMonitorConfiguration":</span></span>

```json
"DockerSources": {
    "Stats": {
        "enabled": true,
        "sampleRate": "PT1M"
    }
},

```

## <a name="measuring-performance"></a><span data-ttu-id="ac1cb-166">測量效能</span><span class="sxs-lookup"><span data-stu-id="ac1cb-166">Measuring performance</span></span>

<span data-ttu-id="ac1cb-167">叢集的測量效能將協助您了解如何處理負載，以及進行調整叢集的決策 (請深入查看調整 [Azure 上](service-fabric-cluster-scale-up-down.md)或[內部部署](service-fabric-cluster-windows-server-add-remove-nodes.md)上的叢集)。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-167">Measure performance of your cluster will help you understand how it is able to handle load and drive decisions around scaling your cluster (see more about scaling a cluster [on Azure](service-fabric-cluster-scale-up-down.md), or [on-premises](service-fabric-cluster-windows-server-add-remove-nodes.md)).</span></span> <span data-ttu-id="ac1cb-168">相較於您或應用程式和服務可能已採取的動作，在未來分析記錄時，效能資料也十分有用。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-168">Performance data is also useful when compared to actions you or your applications and services may have taken, when analyzing logs in the future.</span></span> 

<span data-ttu-id="ac1cb-169">如需使用 Service Fabric 時要收集的效能計數器清單，請參閱 [Service Fabric 中的效能計數器](service-fabric-diagnostics-event-generation-perf.md)。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-169">For a list of performance counters to collect when using Service Fabric, see [Performance Counters in Service Fabric](service-fabric-diagnostics-event-generation-perf.md)</span></span>

<span data-ttu-id="ac1cb-170">以下是您可以設定收集叢集效能資料的兩個常用方式：</span><span class="sxs-lookup"><span data-stu-id="ac1cb-170">Here are two common ways in which you can set up collecting performance data for your cluster:</span></span>

* <span data-ttu-id="ac1cb-171">使用代理程式：這是從電腦收集效能的慣用方法，因為代理程式通常會有一份可收集的效能計量清單，而且選擇您要收集或變更的計量是相當簡單的程序。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-171">Using an agent: this is the preferred way of collecting performance from a machine, since agents usually have a list of possible performance metrics that can be collected, and it is a relatively easy process to choose the metrics you want to collect or change them.</span></span> <span data-ttu-id="ac1cb-172">請閱讀[如何設定 Service Fabric 的 OMS](service-fabric-diagnostics-event-analysis-oms.md) 和[設定 OMS Windows 代理程式](../log-analytics/log-analytics-windows-agents.md)文章以深入了解 OMS 代理程式，而這類監視代理程式可以挑選叢集 VM 和已部署容器的效能資料。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-172">Read about [how to configure the OMS for Service Fabric](service-fabric-diagnostics-event-analysis-oms.md) and [Setting up the OMS Windows Agent](../log-analytics/log-analytics-windows-agents.md) articles to learn more about the OMS agent, which is one such monitoring agent that is able to pick up performance data for cluster VMs and deployed containers.</span></span>

* <span data-ttu-id="ac1cb-173">設定診斷以將效能計數器寫入資料表中：對於 Azure 上的叢集，這表示變更 Azure 診斷設定來反映叢集中 VM 的適當效能計數器，並在您要部署任何容器時，讓它反映 Docker 統計資料。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-173">Configuring diagnostics to write performance counters to a table: for clusters on Azure, this means changing the Azure Diagnostics configuration to pick up the appropriate performance counters from the VMs in your cluster, and enabling it to pick up docker stats if you will be deploying any containers.</span></span> <span data-ttu-id="ac1cb-174">請閱讀在 Service Fabric 中設定 [WAD 中的效能計數器](service-fabric-diagnostics-event-aggregation-wad.md)，以設定效能計數器集合。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-174">Read about configuring [Performance Counters in WAD](service-fabric-diagnostics-event-aggregation-wad.md) in Service Fabric to set up performance counter collection.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ac1cb-175">後續步驟</span><span class="sxs-lookup"><span data-stu-id="ac1cb-175">Next steps</span></span>

<span data-ttu-id="ac1cb-176">需要先彙總記錄和事件，才能將它們傳送到任何分析平台。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-176">Your logs and events need to be aggregated before they can be sent to any analysis platform.</span></span> <span data-ttu-id="ac1cb-177">請閱讀 [EventFlow](service-fabric-diagnostics-event-aggregation-eventflow.md) 和 [WAD](service-fabric-diagnostics-event-aggregation-wad.md) 以深入了解一些建議的選項。</span><span class="sxs-lookup"><span data-stu-id="ac1cb-177">Read about [EventFlow](service-fabric-diagnostics-event-aggregation-eventflow.md) and [WAD](service-fabric-diagnostics-event-aggregation-wad.md) to better understand some of the recommended options.</span></span>
