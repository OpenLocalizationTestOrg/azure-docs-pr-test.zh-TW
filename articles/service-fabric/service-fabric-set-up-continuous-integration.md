---
title: "設定連續整合 Azure microservices aaaSet |Microsoft 文件"
description: "概略了解 tooset 連續整合和部署 Service Fabric 應用程式使用 Visual Studio Team Services (VSTS)。"
services: service-fabric
documentationcenter: na
author: mthalman-msft
manager: timlt
editor: 
ms.assetid: 3e8c2290-9e7a-456a-9b2c-db44d1b3988d
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 12/06/2016
ms.author: mthalman;mikhegn
ms.openlocfilehash: 041e081f4a42f379394f2d21f07db4f6de045b24
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="set-up-service-fabric-continuous-integration-and-deployment-with-visual-studio-team-services"></a><span data-ttu-id="7353b-103">使用 Visual Studio Team Services 設定 Service Fabric 連續整合和部署</span><span class="sxs-lookup"><span data-stu-id="7353b-103">Set up Service Fabric continuous integration and deployment with Visual Studio Team Services</span></span>
<span data-ttu-id="7353b-104">本文說明 hello 步驟 tooset 連續整合和 Azure Service Fabric 應用程式的部署使用 Visual Studio Team Services (VSTS)。</span><span class="sxs-lookup"><span data-stu-id="7353b-104">This article describes hello steps tooset up continuous integration and deployment for an Azure Service Fabric application by using Visual Studio Team Services (VSTS).</span></span>

<span data-ttu-id="7353b-105">這份文件會反映 hello 目前程序，且預期的 toochange 經過一段時間。</span><span class="sxs-lookup"><span data-stu-id="7353b-105">This document reflects hello current procedure and is expected toochange over time.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="7353b-106">必要條件</span><span class="sxs-lookup"><span data-stu-id="7353b-106">Prerequisites</span></span>
<span data-ttu-id="7353b-107">tooget 啟動，請遵循下列步驟：</span><span class="sxs-lookup"><span data-stu-id="7353b-107">tooget started, follow these steps:</span></span>

1. <span data-ttu-id="7353b-108">請確定您有存取 tooa Team Services 帳戶或[建立一個](https://www.visualstudio.com/docs/setup-admin/team-services/sign-up-for-visual-studio-team-services)自己。</span><span class="sxs-lookup"><span data-stu-id="7353b-108">Ensure that you have access tooa Team Services account or [create one](https://www.visualstudio.com/docs/setup-admin/team-services/sign-up-for-visual-studio-team-services) yourself.</span></span>
2. <span data-ttu-id="7353b-109">請確定您有存取 tooa Team Services 的 team 專案或[建立一個](https://www.visualstudio.com/docs/setup-admin/create-team-project)自己。</span><span class="sxs-lookup"><span data-stu-id="7353b-109">Ensure that you have access tooa Team Services team project or [create one](https://www.visualstudio.com/docs/setup-admin/create-team-project) yourself.</span></span>
3. <span data-ttu-id="7353b-110">請確定您有 Service Fabric 叢集 toowhich 您可以部署應用程式，或建立一個使用 hello [Azure 入口網站](service-fabric-cluster-creation-via-portal.md)、 [Azure Resource Manager 範本](service-fabric-cluster-creation-via-arm.md)，或[Visual Studio](service-fabric-cluster-creation-via-visual-studio.md).</span><span class="sxs-lookup"><span data-stu-id="7353b-110">Ensure that you have a Service Fabric cluster toowhich you can deploy your application or create one using hello [Azure portal](service-fabric-cluster-creation-via-portal.md), an [Azure Resource Manager template](service-fabric-cluster-creation-via-arm.md), or [Visual Studio](service-fabric-cluster-creation-via-visual-studio.md).</span></span>
4. <span data-ttu-id="7353b-111">確定您已經建立 Service Fabric 應用程式 (.sfproj) 專案。</span><span class="sxs-lookup"><span data-stu-id="7353b-111">Ensure that you have already created a Service Fabric Application (.sfproj) project.</span></span> <span data-ttu-id="7353b-112">您必須建立或升級 Service Fabric SDK 2.1 或更新版本的專案 （hello.sfproj 檔案應包含 ProjectVersion 屬性值的 1.1 版或更高）。</span><span class="sxs-lookup"><span data-stu-id="7353b-112">You must have a project that was created or upgraded with Service Fabric SDK 2.1 or higher (hello .sfproj file should contain a ProjectVersion property value of 1.1 or higher).</span></span>

> [!NOTE]
> <span data-ttu-id="7353b-113">自訂組建代理程式已不再需要。</span><span class="sxs-lookup"><span data-stu-id="7353b-113">Custom build agents are no longer required.</span></span> <span data-ttu-id="7353b-114">Team Services 裝載的代理程式現在都預先安裝 Service Fabric 叢集管理軟體，可讓您直接從這些代理程式部署應用程式。</span><span class="sxs-lookup"><span data-stu-id="7353b-114">Team Services hosted agents now come pre-installed with Service Fabric cluster management software, allowing for deployment of your applications directly from those agents.</span></span>
> 
> 

## <a name="configure-and-share-your-source-files"></a><span data-ttu-id="7353b-115">設定和共用來源檔案</span><span class="sxs-lookup"><span data-stu-id="7353b-115">Configure and share your source files</span></span>
<span data-ttu-id="7353b-116">hello 第一件事您所要 toodo Team Services 中執行的 hello 部署程序用於準備發行設定檔。</span><span class="sxs-lookup"><span data-stu-id="7353b-116">hello first thing you want toodo is prepare a publish profile for use by hello deployment process that executes within Team Services.</span></span>  <span data-ttu-id="7353b-117">hello 發行設定檔應該是您先前已備妥的設定的 tootarget hello 叢集：</span><span class="sxs-lookup"><span data-stu-id="7353b-117">hello publish profile should be configured tootarget hello cluster that you've previously prepared:</span></span>

1. <span data-ttu-id="7353b-118">選擇您的應用程式專案內的發行設定檔的 toouse 連續整合工作流程。</span><span class="sxs-lookup"><span data-stu-id="7353b-118">Choose a publish profile within your Application project that you want toouse for your continuous integration workflow.</span></span> <span data-ttu-id="7353b-119">請遵循 hello[發行指示](service-fabric-publish-app-remote-cluster.md)如何 toopublish 應用程式 tooa 遠端叢集。</span><span class="sxs-lookup"><span data-stu-id="7353b-119">Follow hello [publish instructions](service-fabric-publish-app-remote-cluster.md) on how toopublish an application tooa remote cluster.</span></span> <span data-ttu-id="7353b-120">實際上不需要 toopublish 您的應用程式透過。</span><span class="sxs-lookup"><span data-stu-id="7353b-120">You don't actually need toopublish your application though.</span></span> <span data-ttu-id="7353b-121">您可以按一下 hello**儲存**中超 hello 發行對話方塊，一旦您已適當地設定項目。</span><span class="sxs-lookup"><span data-stu-id="7353b-121">You can click hello **Save** hyperlink in hello publish dialog once you have configured things appropriately.</span></span>
2. <span data-ttu-id="7353b-122">如果您想要升級的 Team Services 中，就會發生的每個部署您的應用程式 toobe，您會想 tooconfigure hello 發行設定檔 tooenable 升級。</span><span class="sxs-lookup"><span data-stu-id="7353b-122">If you want your application toobe upgraded for each deployment that occurs within Team Services, you want tooconfigure hello publish profile tooenable upgrade.</span></span> <span data-ttu-id="7353b-123">在 hello 相同步驟 1 中發行用的對話方塊，請確定該 hello**升級 hello 應用程式**核取方塊。</span><span class="sxs-lookup"><span data-stu-id="7353b-123">In hello same publish dialog used in step 1, ensure that hello **Upgrade hello Application** checkbox is checked.</span></span>  <span data-ttu-id="7353b-124">深入了解 [設定其他升級設定](service-fabric-visualstudio-configure-upgrade.md)。</span><span class="sxs-lookup"><span data-stu-id="7353b-124">Learn more about [configuring additional upgrade settings](service-fabric-visualstudio-configure-upgrade.md).</span></span> <span data-ttu-id="7353b-125">按一下 hello**儲存**超連結 toosave hello 設定 toohello 發行設定檔。</span><span class="sxs-lookup"><span data-stu-id="7353b-125">Click hello **Save** hyperlink toosave hello settings toohello publish profile.</span></span>
3. <span data-ttu-id="7353b-126">請確定您已將變更儲存 toohello 發行設定檔，然後取消 hello 發行對話方塊。</span><span class="sxs-lookup"><span data-stu-id="7353b-126">Ensure that you've saved your changes toohello publish profile and cancel hello publish dialog.</span></span>
4. <span data-ttu-id="7353b-127">現在就開始太[共用您的應用程式專案的來源檔案](https://www.visualstudio.com/docs/setup-admin/team-services/connect-to-visual-studio-team-services#vs)使用 Team Services。</span><span class="sxs-lookup"><span data-stu-id="7353b-127">Now it's time too[share your Application project source files](https://www.visualstudio.com/docs/setup-admin/team-services/connect-to-visual-studio-team-services#vs) with Team Services.</span></span> <span data-ttu-id="7353b-128">原始程式檔都可以存取 Team Services 之後，您就可以進入 toohello 產生組建的下一個步驟。</span><span class="sxs-lookup"><span data-stu-id="7353b-128">Once your source files are accessible in Team Services, you can now move on toohello next step of generating builds.</span></span> 

## <a name="create-a-build-definition"></a><span data-ttu-id="7353b-129">建立組建定義</span><span class="sxs-lookup"><span data-stu-id="7353b-129">Create a build definition</span></span>
<span data-ttu-id="7353b-130">Team Services 組建定義描述由一組循序執行的組建步驟所組成的工作流程。</span><span class="sxs-lookup"><span data-stu-id="7353b-130">A Team Services build definition describes a workflow that is composed of a set of build steps that are executed sequentially.</span></span> <span data-ttu-id="7353b-131">hello 組建定義，您要建立 hello 目標是 tooproduce Service Fabric 應用程式封裝時和其他成品，可能是使用的 toodeploy hello 應用程式。</span><span class="sxs-lookup"><span data-stu-id="7353b-131">hello goal of hello build definition that you are creating is tooproduce a Service Fabric application package, and other artifacts, that can be used toodeploy hello application.</span></span> <span data-ttu-id="7353b-132">深入了解 Team Services [組建定義](https://www.visualstudio.com/docs/build/define/create)。</span><span class="sxs-lookup"><span data-stu-id="7353b-132">Learn more about Team Services [build definitions](https://www.visualstudio.com/docs/build/define/create).</span></span>

### <a name="create-a-definition-from-hello-build-template"></a><span data-ttu-id="7353b-133">建立從 hello 建置範本的定義</span><span class="sxs-lookup"><span data-stu-id="7353b-133">Create a definition from hello build template</span></span>
1. <span data-ttu-id="7353b-134">在 Visual Studio Team Services 中開啟您的小組專案。</span><span class="sxs-lookup"><span data-stu-id="7353b-134">Open your team project in Visual Studio Team Services.</span></span>
2. <span data-ttu-id="7353b-135">選取 hello**建置** 索引標籤。</span><span class="sxs-lookup"><span data-stu-id="7353b-135">Select hello **Build** tab.</span></span>
3. <span data-ttu-id="7353b-136">選取 hello 綠色 **+** 簽署 toocreate 新的組建定義。</span><span class="sxs-lookup"><span data-stu-id="7353b-136">Select hello green **+** sign toocreate a new build definition.</span></span>
4. <span data-ttu-id="7353b-137">在 hello 開啟對話方塊中，選取  **Azure Service Fabric 應用程式**內 hello**建置**範本類別目錄。</span><span class="sxs-lookup"><span data-stu-id="7353b-137">In hello dialog that opens, select **Azure Service Fabric Application** within hello **Build** template category.</span></span>
5. <span data-ttu-id="7353b-138">選取 [下一步] 。</span><span class="sxs-lookup"><span data-stu-id="7353b-138">Select **Next**.</span></span>
6. <span data-ttu-id="7353b-139">選取 hello 儲存機制與分支 Service Fabric 應用程式相關聯。</span><span class="sxs-lookup"><span data-stu-id="7353b-139">Select hello repository and branch associated with your Service Fabric application.</span></span>
7. <span data-ttu-id="7353b-140">選取您想 toouse hello 代理程式佇列。</span><span class="sxs-lookup"><span data-stu-id="7353b-140">Select hello agent queue you wish toouse.</span></span> <span data-ttu-id="7353b-141">支援裝載的代理程式。</span><span class="sxs-lookup"><span data-stu-id="7353b-141">Hosted agents are supported.</span></span>
8. <span data-ttu-id="7353b-142">選取 [ **建立**]。</span><span class="sxs-lookup"><span data-stu-id="7353b-142">Select **Create**.</span></span>
9. <span data-ttu-id="7353b-143">儲存 hello 組建定義，並提供名稱。</span><span class="sxs-lookup"><span data-stu-id="7353b-143">Save hello build definition and provide a name.</span></span>
10. <span data-ttu-id="7353b-144">hello 下列段落是 hello hello 範本產生的建置步驟的說明：</span><span class="sxs-lookup"><span data-stu-id="7353b-144">hello following paragraph is a description of hello build steps generated by hello template:</span></span>

| <span data-ttu-id="7353b-145">組建步驟</span><span class="sxs-lookup"><span data-stu-id="7353b-145">Build step</span></span> | <span data-ttu-id="7353b-146">說明</span><span class="sxs-lookup"><span data-stu-id="7353b-146">Description</span></span> |
| --- | --- |
| <span data-ttu-id="7353b-147">NuGet 還原</span><span class="sxs-lookup"><span data-stu-id="7353b-147">NuGet restore</span></span> |<span data-ttu-id="7353b-148">還原 hello hello 方案的 NuGet 套件。</span><span class="sxs-lookup"><span data-stu-id="7353b-148">Restores hello NuGet packages for hello solution.</span></span> |
| <span data-ttu-id="7353b-149">組建方案 \*.sln</span><span class="sxs-lookup"><span data-stu-id="7353b-149">Build solution \*.sln</span></span> |<span data-ttu-id="7353b-150">建置 hello 整個方案。</span><span class="sxs-lookup"><span data-stu-id="7353b-150">Builds hello entire solution.</span></span> |
| <span data-ttu-id="7353b-151">組建方案 \*.sfproj</span><span class="sxs-lookup"><span data-stu-id="7353b-151">Build solution \*.sfproj</span></span> |<span data-ttu-id="7353b-152">會產生 hello Service Fabric 應用程式套件，是使用的 toodeploy hello 應用程式。</span><span class="sxs-lookup"><span data-stu-id="7353b-152">Generates hello Service Fabric application package that is used toodeploy hello application.</span></span> <span data-ttu-id="7353b-153">hello 應用程式封裝位置是指定的 toobe hello 組建成品目錄內。</span><span class="sxs-lookup"><span data-stu-id="7353b-153">hello application package location is specified toobe within hello build's artifact directory.</span></span> |
| <span data-ttu-id="7353b-154">更新 Service Fabric 應用程式版本</span><span class="sxs-lookup"><span data-stu-id="7353b-154">Update Service Fabric App Versions</span></span> |<span data-ttu-id="7353b-155">更新升級支援的 hello 應用程式套件的資訊清單檔案 tooallow 中所包含的 hello 版本值。</span><span class="sxs-lookup"><span data-stu-id="7353b-155">Updates hello version values contained in hello application package's manifest files tooallow for upgrade support.</span></span> <span data-ttu-id="7353b-156">請參閱 hello[工作文件頁面](https://go.microsoft.com/fwlink/?LinkId=820529)如需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="7353b-156">See hello [task documentation page](https://go.microsoft.com/fwlink/?LinkId=820529) for more information.</span></span> |
| <span data-ttu-id="7353b-157">複製檔案</span><span class="sxs-lookup"><span data-stu-id="7353b-157">Copy Files</span></span> |<span data-ttu-id="7353b-158">複製 hello 發行設定檔和應用程式參數檔案 toohello 組建的成品 toobe 所耗用的部署。</span><span class="sxs-lookup"><span data-stu-id="7353b-158">Copies hello publish profile and application parameters files toohello build's artifacts toobe consumed for deployment.</span></span> |
| <span data-ttu-id="7353b-159">發行構件</span><span class="sxs-lookup"><span data-stu-id="7353b-159">Publish Artifact</span></span> |<span data-ttu-id="7353b-160">發行 hello 組建的成品。</span><span class="sxs-lookup"><span data-stu-id="7353b-160">Publishes hello build's artifacts.</span></span> <span data-ttu-id="7353b-161">可讓發行定義 tooconsume hello 組建的成品。</span><span class="sxs-lookup"><span data-stu-id="7353b-161">Allows a release definition tooconsume hello build's artifacts.</span></span> |

### <a name="verify-hello-default-set-of-tasks"></a><span data-ttu-id="7353b-162">確認 hello 組預設的工作</span><span class="sxs-lookup"><span data-stu-id="7353b-162">Verify hello default set of tasks</span></span>
1. <span data-ttu-id="7353b-163">確認 hello**方案**輸入的欄位 hello **NuGet 還原**和**建置方案**建置步驟。</span><span class="sxs-lookup"><span data-stu-id="7353b-163">Verify hello **Solution** input field for hello **NuGet restore** and **Build solution** build steps.</span></span>  <span data-ttu-id="7353b-164">根據預設，這些建置步驟執行於 hello 相關聯的儲存機制中所包含的所有方案檔案。</span><span class="sxs-lookup"><span data-stu-id="7353b-164">By default, these build steps execute upon all solution files that are contained in hello associated repository.</span></span>  <span data-ttu-id="7353b-165">如果您只想 hello 組建定義 toooperate 上其中一個這些方案檔，您需要 tooexplicitly 更新 hello 路徑 toothat 檔案。</span><span class="sxs-lookup"><span data-stu-id="7353b-165">If you only want hello build definition toooperate on one of those solution files, you need tooexplicitly update hello path toothat file.</span></span>
2. <span data-ttu-id="7353b-166">確認 hello**方案**輸入的欄位 hello**應用程式封裝**建置步驟。</span><span class="sxs-lookup"><span data-stu-id="7353b-166">Verify hello **Solution** input field for hello **Package application** build step.</span></span>  <span data-ttu-id="7353b-167">根據預設，此建置步驟會假設只有一個 Service Fabric 應用程式專案 (.sfproj) 存在於 hello 儲存機制。</span><span class="sxs-lookup"><span data-stu-id="7353b-167">By default, this build step assumes only one Service Fabric Application project (.sfproj) exists in hello repository.</span></span>  <span data-ttu-id="7353b-168">如果您在您的儲存機制中有多個這類檔案，並想 tootarget 只有一個此組建定義，您會需要 tooexplicitly 更新 hello 路徑 toothat 檔案。</span><span class="sxs-lookup"><span data-stu-id="7353b-168">If you have multiple such files in your repository and want tootarget only one of them for this build definition, you need tooexplicitly update hello path toothat file.</span></span>  <span data-ttu-id="7353b-169">如果您想的 toopackage 多個應用程式專案，在您的儲存機制中，您需要 toocreate 額外**Visual Studio 建置**hello 組建定義每個目標的應用程式專案中的步驟。</span><span class="sxs-lookup"><span data-stu-id="7353b-169">If you want toopackage multiple Application projects in your repository, you need toocreate additional **Visual Studio Build** steps in hello build definition that each target an Application project.</span></span>  <span data-ttu-id="7353b-170">然後您也需要 tooupdate hello **MSBuild 引數**欄位的每個建置步驟，以便為每個唯一 hello 封裝位置。</span><span class="sxs-lookup"><span data-stu-id="7353b-170">You would then also need tooupdate hello **MSBuild Arguments** field for each of those build steps so that hello package location is unique for each of them.</span></span>
3. <span data-ttu-id="7353b-171">確認 hello hello 中定義的版本設定行為**更新 Service Fabric 應用程式版本**建置步驟。</span><span class="sxs-lookup"><span data-stu-id="7353b-171">Verify hello versioning behavior defined in hello **Update Service Fabric App Versions** build step.</span></span>  <span data-ttu-id="7353b-172">根據預設，此建置步驟會將附加 hello 組建 tooall 版本中的數值 hello 應用程式封裝的資訊清單檔。</span><span class="sxs-lookup"><span data-stu-id="7353b-172">By default, this build step appends hello build number tooall version values in hello application package's manifest files.</span></span> <span data-ttu-id="7353b-173">請參閱 hello[工作文件頁面](https://go.microsoft.com/fwlink/?LinkId=820529)如需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="7353b-173">See hello [task documentation page](https://go.microsoft.com/fwlink/?LinkId=820529) for more information.</span></span> <span data-ttu-id="7353b-174">這是適用於支援應用程式的升級，因為每個升級的部署需要從 hello 先前的部署不同的版本值。</span><span class="sxs-lookup"><span data-stu-id="7353b-174">This is useful for supporting upgrade of your application since each upgrade deployment requires different version values from hello previous deployment.</span></span> <span data-ttu-id="7353b-175">如果您不打算 toouse 應用程式升級工作流程中，您可以考慮停用此建置步驟。</span><span class="sxs-lookup"><span data-stu-id="7353b-175">If you're not intending toouse application upgrade in your workflow, you may consider disabling this build step.</span></span> <span data-ttu-id="7353b-176">如果您打算 tooproduce 組建時，可以使用的 toooverwrite 現有的 Service Fabric 應用程式，它必須是停用。</span><span class="sxs-lookup"><span data-stu-id="7353b-176">It must be disabled if your intention is tooproduce a build that can be used toooverwrite an existing Service Fabric application.</span></span> <span data-ttu-id="7353b-177">如果 hello hello hello 組建產生的應用程式版本與 hello hello hello 叢集中的應用程式版本不相符，hello 部署將會失敗。</span><span class="sxs-lookup"><span data-stu-id="7353b-177">hello deployment fails if hello version of hello application produced by hello build does not match hello version of hello application in hello cluster.</span></span>
4. <span data-ttu-id="7353b-178">如果您的方案包含.NET Core 專案，您必須確定您的組建定義包含可還原 hello 相依性的建置步驟：</span><span class="sxs-lookup"><span data-stu-id="7353b-178">If your solution contains a .NET Core project, you must ensure that your build definition contains a build step that restores hello dependencies:</span></span>
   1. <span data-ttu-id="7353b-179">選取 [新增組件步驟...] 。</span><span class="sxs-lookup"><span data-stu-id="7353b-179">Select **Add build step...**.</span></span>
   2. <span data-ttu-id="7353b-180">找出 hello**命令列**hello 公用程式 索引標籤內工作，然後按一下其 新增 按鈕。</span><span class="sxs-lookup"><span data-stu-id="7353b-180">Locate hello **Command-Line** task within hello Utility tab and click its Add button.</span></span>
   3. <span data-ttu-id="7353b-181">Hello 工作輸入欄位，請使用下列值的 hello:</span><span class="sxs-lookup"><span data-stu-id="7353b-181">For hello task's input fields, use hello following values:</span></span>
   4. <span data-ttu-id="7353b-182">工具︰dotnet</span><span class="sxs-lookup"><span data-stu-id="7353b-182">Tool: dotnet</span></span>
   5. <span data-ttu-id="7353b-183">引數︰restore</span><span class="sxs-lookup"><span data-stu-id="7353b-183">Arguments: restore</span></span>
   6. <span data-ttu-id="7353b-184">拖曳 hello 工作，讓它位於 hello 之後立即**NuGet 還原**步驟。</span><span class="sxs-lookup"><span data-stu-id="7353b-184">Drag hello task so that it is immediately after hello **NuGet restore** step.</span></span>
5. <span data-ttu-id="7353b-185">儲存任何變更，您所做 toohello 組建定義。</span><span class="sxs-lookup"><span data-stu-id="7353b-185">Save any changes you've made toohello build definition.</span></span>

### <a name="try-it"></a><span data-ttu-id="7353b-186">試試看</span><span class="sxs-lookup"><span data-stu-id="7353b-186">Try it</span></span>
<span data-ttu-id="7353b-187">選取**佇列組建**toomanually 啟動組建。</span><span class="sxs-lookup"><span data-stu-id="7353b-187">Select **Queue Build** toomanually start a build.</span></span> <span data-ttu-id="7353b-188">推送或簽入時也會觸發組建。</span><span class="sxs-lookup"><span data-stu-id="7353b-188">Builds also triggers upon push or check-in.</span></span> <span data-ttu-id="7353b-189">一旦您確認 hello 組建已順利執行，您就可以進入 toodefining 部署您的應用程式 tooa 叢集中的發行定義。</span><span class="sxs-lookup"><span data-stu-id="7353b-189">Once you've verified that hello build is executing successfully, you can now move on toodefining a release definition that deploys your application tooa cluster.</span></span>

## <a name="create-a-release-definition"></a><span data-ttu-id="7353b-190">建立發行定義</span><span class="sxs-lookup"><span data-stu-id="7353b-190">Create a release definition</span></span>
<span data-ttu-id="7353b-191">Team Services 發行定義描述由一組循序執行的工作所組成的工作流程。</span><span class="sxs-lookup"><span data-stu-id="7353b-191">A Team Services release definition describes a workflow that is composed of a set of tasks that are executed sequentially.</span></span> <span data-ttu-id="7353b-192">hello hello 發行定義您所建立的目的是 tootake 應用程式封裝，並將其部署 tooa 叢集。</span><span class="sxs-lookup"><span data-stu-id="7353b-192">hello goal of hello release definition that you are creating is tootake an application package and deploy it tooa cluster.</span></span> <span data-ttu-id="7353b-193">Hello 一起使用時，組建定義並發行定義可執行 hello 整個工作流程無法與來源檔案 tooending 與叢集中執行的應用程式啟動。</span><span class="sxs-lookup"><span data-stu-id="7353b-193">When used together, hello build definition and release definition can execute hello entire workflow from starting with source files tooending with a running application in your cluster.</span></span> <span data-ttu-id="7353b-194">深入了解 Team Services [發行定義](https://www.visualstudio.com/docs/release/author-release-definition/more-release-definition)。</span><span class="sxs-lookup"><span data-stu-id="7353b-194">Learn more about Team Services [release definitions](https://www.visualstudio.com/docs/release/author-release-definition/more-release-definition).</span></span>

### <a name="create-a-definition-from-hello-release-template"></a><span data-ttu-id="7353b-195">建立定義在 hello 發行範本</span><span class="sxs-lookup"><span data-stu-id="7353b-195">Create a definition from hello release template</span></span>
1. <span data-ttu-id="7353b-196">在 Visual Studio Team Services 中開啟您的專案。</span><span class="sxs-lookup"><span data-stu-id="7353b-196">Open your project in Visual Studio Team Services.</span></span>
2. <span data-ttu-id="7353b-197">選取 hello**發行** 索引標籤。</span><span class="sxs-lookup"><span data-stu-id="7353b-197">Select hello **Release** tab.</span></span>
3. <span data-ttu-id="7353b-198">選取 hello 綠色 **+** 登 toocreate 新的發行定義，然後選取**建立發行定義**hello 功能表中。</span><span class="sxs-lookup"><span data-stu-id="7353b-198">Select hello green **+** sign toocreate a new release definition and select **Create release definition** in hello menu.</span></span>
4. <span data-ttu-id="7353b-199">在 hello 開啟對話方塊中，選取  **Azure Service Fabric 部署**內 hello**部署**範本類別目錄。</span><span class="sxs-lookup"><span data-stu-id="7353b-199">In hello dialog that opens, select **Azure Service Fabric Deployment** within hello **Deployment** template category.</span></span>
5. <span data-ttu-id="7353b-200">選取 [下一步] 。</span><span class="sxs-lookup"><span data-stu-id="7353b-200">Select **Next**.</span></span>
6. <span data-ttu-id="7353b-201">選取要作為此發行定義的 hello 來源 toouse hello 組建定義。</span><span class="sxs-lookup"><span data-stu-id="7353b-201">Select hello build definition you want toouse as hello source of this release definition.</span></span>  <span data-ttu-id="7353b-202">hello 發行定義參考 hello 成品作業所產生的 hello 選取組建定義。</span><span class="sxs-lookup"><span data-stu-id="7353b-202">hello release definition references hello artifacts that were produced by hello selected build definition.</span></span>
7. <span data-ttu-id="7353b-203">檢查 hello**連續部署**核取方塊，如果您想 toohave Team Services 自動建立新的版本和部署 hello Service Fabric 應用程式組建完成時。</span><span class="sxs-lookup"><span data-stu-id="7353b-203">Check hello **Continuous deployment** check box if you wish toohave Team Services automatically create a new release and deploy hello Service Fabric application whenever a build completes.</span></span>
8. <span data-ttu-id="7353b-204">選取您想 toouse hello 代理程式佇列。</span><span class="sxs-lookup"><span data-stu-id="7353b-204">Select hello agent queue you wish toouse.</span></span> <span data-ttu-id="7353b-205">支援裝載的代理程式。</span><span class="sxs-lookup"><span data-stu-id="7353b-205">Hosted agents are supported.</span></span>
9. <span data-ttu-id="7353b-206">選取 [ **建立**]。</span><span class="sxs-lookup"><span data-stu-id="7353b-206">Select **Create**.</span></span>
10. <span data-ttu-id="7353b-207">Hello hello hello 頁頂端的鉛筆圖示，即可編輯 hello 定義名稱。</span><span class="sxs-lookup"><span data-stu-id="7353b-207">Edit hello definition name by clicking hello pencil icon at hello top of hello page.</span></span>
11. <span data-ttu-id="7353b-208">選取您的應用程式應該部署的 hello 叢集 toowhich 從 hello**叢集連線**hello 工作的輸入的欄位。</span><span class="sxs-lookup"><span data-stu-id="7353b-208">Select hello cluster toowhich your application should be deployed from hello **Cluster Connection** input field of hello task.</span></span> <span data-ttu-id="7353b-209">hello 叢集連線所提供，可讓 hello 部署工作 tooconnect toohello 叢集 hello 必要資訊。</span><span class="sxs-lookup"><span data-stu-id="7353b-209">hello cluster connection provides hello necessary information that allows hello deployment task tooconnect toohello cluster.</span></span> <span data-ttu-id="7353b-210">如果您還沒有叢集連線為您的叢集，請選取 hello**管理**超連結下一步 toohello 欄位 tooadd 其中一個。</span><span class="sxs-lookup"><span data-stu-id="7353b-210">If you do not yet have a cluster connection for your cluster, select hello **Manage** hyperlink next toohello field tooadd one.</span></span> <span data-ttu-id="7353b-211">在開啟的 hello 頁面上，執行下列步驟的 hello:</span><span class="sxs-lookup"><span data-stu-id="7353b-211">On hello page that opens, perform hello following steps:</span></span>
    1. <span data-ttu-id="7353b-212">選取**新的服務端點**，然後選取  **Azure Service Fabric** hello 功能表。</span><span class="sxs-lookup"><span data-stu-id="7353b-212">Select **New Service Endpoint** and then select **Azure Service Fabric** from hello menu.</span></span>
    2. <span data-ttu-id="7353b-213">選取 hello 這個端點做為目標的 hello 叢集正在使用的驗證類型。</span><span class="sxs-lookup"><span data-stu-id="7353b-213">Select hello type of authentication being used by hello cluster targeted by this endpoint.</span></span>
    3. <span data-ttu-id="7353b-214">您連接的名稱定義在 hello**連接名稱**欄位。</span><span class="sxs-lookup"><span data-stu-id="7353b-214">Define a name for your connection in hello **Connection Name** field.</span></span>  <span data-ttu-id="7353b-215">一般而言，您可使用 hello 叢集的名稱。</span><span class="sxs-lookup"><span data-stu-id="7353b-215">Typically, you would use hello name of your cluster.</span></span>
    4. <span data-ttu-id="7353b-216">定義 hello 用戶端連線的端點 URL 中 hello**叢集端點**欄位。</span><span class="sxs-lookup"><span data-stu-id="7353b-216">Define hello client connection endpoint URL in hello **Cluster Endpoint** field.</span></span>  <span data-ttu-id="7353b-217">範例︰tcp://contoso.westus.cloudapp.azure.com:19000。</span><span class="sxs-lookup"><span data-stu-id="7353b-217">Example: tcp://contoso.westus.cloudapp.azure.com:19000.</span></span>
    5. <span data-ttu-id="7353b-218">對於 Azure Active Directory 認證，請定義您想要在 hello toouse tooconnect toohello 叢集 hello 認證**Username**和**密碼**欄位。</span><span class="sxs-lookup"><span data-stu-id="7353b-218">For Azure Active Directory credentials, define hello credentials you want toouse tooconnect toohello cluster in hello **Username** and **Password** fields.</span></span>
    6. <span data-ttu-id="7353b-219">對於以憑證為基礎的驗證，定義 hello Base64 編碼的 hello 用戶端憑證檔案，在 hello**用戶端憑證**欄位。</span><span class="sxs-lookup"><span data-stu-id="7353b-219">For Certificate Based authentication, define hello Base64 encoding of hello client certificate file in hello **Client Certificate** field.</span></span>  <span data-ttu-id="7353b-220">請參閱 hello 說明快顯視窗，該欄位有關的資訊 tooget 該值。</span><span class="sxs-lookup"><span data-stu-id="7353b-220">See hello help pop-up on that field for info on how tooget that value.</span></span>  <span data-ttu-id="7353b-221">如果您的憑證是否受密碼保護，定義 hello 密碼 hello**密碼**欄位。</span><span class="sxs-lookup"><span data-stu-id="7353b-221">If your certificate is password-protected, define hello password in hello **Password** field.</span></span>
    7. <span data-ttu-id="7353b-222">按一下 [確定] 確認變更。</span><span class="sxs-lookup"><span data-stu-id="7353b-222">Confirm your changes by clicking **OK**.</span></span> <span data-ttu-id="7353b-223">之後瀏覽後 tooyour 發行定義中，按一下 hello 重新整理圖示上 hello**叢集連線**您剛才加入的欄位 toosee hello 端點。</span><span class="sxs-lookup"><span data-stu-id="7353b-223">After navigating back tooyour release definition, click hello refresh icon on hello **Cluster Connection** field toosee hello endpoint you just added.</span></span>
12. <span data-ttu-id="7353b-224">儲存 hello 發行定義。</span><span class="sxs-lookup"><span data-stu-id="7353b-224">Save hello release definition.</span></span>

> [!NOTE]
> <span data-ttu-id="7353b-225">Microsoft 帳戶 (例如，@hotmail.com 或 @outlook.com) 不支援 Azure Active Directory 驗證。</span><span class="sxs-lookup"><span data-stu-id="7353b-225">Microsoft Accounts (for example, @hotmail.com or @outlook.com) are not supported with Azure Active Directory authentication.</span></span>
> 
> 

<span data-ttu-id="7353b-226">建立 hello 定義包含類型的一項工作**Service Fabric 應用程式部署**。</span><span class="sxs-lookup"><span data-stu-id="7353b-226">hello definition that is created consists of one task of type **Service Fabric Application Deployment**.</span></span> <span data-ttu-id="7353b-227">請參閱 hello[工作文件頁面](https://go.microsoft.com/fwlink/?LinkId=820528)如需有關這項工作。</span><span class="sxs-lookup"><span data-stu-id="7353b-227">See hello [task documentation page](https://go.microsoft.com/fwlink/?LinkId=820528) for more information about this task.</span></span>

### <a name="verify-hello-template-defaults"></a><span data-ttu-id="7353b-228">確認 hello 範本的預設值</span><span class="sxs-lookup"><span data-stu-id="7353b-228">Verify hello template defaults</span></span>
1. <span data-ttu-id="7353b-229">確認 hello**發行設定檔**輸入的欄位 hello**部署 Service Fabric 應用程式**工作。</span><span class="sxs-lookup"><span data-stu-id="7353b-229">Verify hello **Publish Profile** input field for hello **Deploy Service Fabric Application** task.</span></span> <span data-ttu-id="7353b-230">根據預設，此欄位會參考名為 Cloud.xml hello 組建成品中所包含的發行設定檔。</span><span class="sxs-lookup"><span data-stu-id="7353b-230">By default, this field references a publish profile named Cloud.xml contained in hello build's artifacts.</span></span> <span data-ttu-id="7353b-231">如果您想 tooreference 不同的發行設定檔或 hello 建置包含多個應用程式封裝中其成品,，您需要 tooupdate hello 路徑正確。</span><span class="sxs-lookup"><span data-stu-id="7353b-231">If you want tooreference a different publish profile or if hello build contains multiple application packages in its artifacts, you need tooupdate hello path appropriately.</span></span>
2. <span data-ttu-id="7353b-232">確認 hello**應用程式封裝**輸入的欄位 hello**部署 Service Fabric 應用程式**工作。</span><span class="sxs-lookup"><span data-stu-id="7353b-232">Verify hello **Application Package** input field for hello **Deploy Service Fabric Application** task.</span></span> <span data-ttu-id="7353b-233">根據預設，此欄位會參考 hello 組建定義範本中所使用的 hello 預設應用程式封裝路徑。</span><span class="sxs-lookup"><span data-stu-id="7353b-233">By default, this field references hello default application package path used in hello build definition template.</span></span>  <span data-ttu-id="7353b-234">如果您已經修改 hello 預設應用程式封裝路徑中 hello 組建定義，您需要 tooupdate hello 路徑適當地這裡以及。</span><span class="sxs-lookup"><span data-stu-id="7353b-234">If you've modified hello default application package path in hello build definition, you need tooupdate hello path appropriately here as well.</span></span>

### <a name="try-it"></a><span data-ttu-id="7353b-235">試試看</span><span class="sxs-lookup"><span data-stu-id="7353b-235">Try it</span></span>
<span data-ttu-id="7353b-236">選取**建立發行**從 hello**釋放**按鈕功能表 toomanually 建立發行。</span><span class="sxs-lookup"><span data-stu-id="7353b-236">Select **Create Release** from hello **Release** button menu toomanually create a release.</span></span> <span data-ttu-id="7353b-237">在開啟 hello 對話方塊中，選取 您希望 toobase hello 版本上，然後按一下的 hello 組建**建立**。</span><span class="sxs-lookup"><span data-stu-id="7353b-237">In hello dialog that opens, select hello build that you want toobase hello release on and then click **Create**.</span></span> <span data-ttu-id="7353b-238">如果您啟用連續部署，版本將會自動建立相關聯的 hello 組建定義完成的組建。</span><span class="sxs-lookup"><span data-stu-id="7353b-238">If you enabled continuous deployment, releases will be created automatically when hello associated build definition completes a build.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7353b-239">後續步驟</span><span class="sxs-lookup"><span data-stu-id="7353b-239">Next steps</span></span>
<span data-ttu-id="7353b-240">toolearn 更多關於 Service Fabric 應用程式，讀取下列文件的 hello 的連續整合：</span><span class="sxs-lookup"><span data-stu-id="7353b-240">toolearn more about continuous integration with Service Fabric applications, read hello following articles:</span></span>

* [<span data-ttu-id="7353b-241">Team Services 文件首頁</span><span class="sxs-lookup"><span data-stu-id="7353b-241">Team Services documentation home</span></span>](https://www.visualstudio.com/docs/overview)
* [<span data-ttu-id="7353b-242">Team Services 中的組建管理</span><span class="sxs-lookup"><span data-stu-id="7353b-242">Build management in Team Services</span></span>](https://www.visualstudio.com/docs/build/overview)
* [<span data-ttu-id="7353b-243">Team Services 中的發行管理</span><span class="sxs-lookup"><span data-stu-id="7353b-243">Release management in Team Services</span></span>](https://www.visualstudio.com/docs/release/overview)

