---
title: "aaaCreate web 應用程式開發介面 （& s) REST Api 與連接器-Azure 邏輯應用程式 |Microsoft 文件"
description: "在使用 Azure 邏輯應用程式的系統整合的工作流程中建立 web 應用程式開發介面 （& s) REST Api toocall 您的應用程式開發介面、 服務或系統"
keywords: "web API, REST API, 連接器, 工作流程, 系統整合"
services: logic-apps
author: jeffhollan
manager: anneta
editor: 
documentationcenter: 
ms.assetid: bd229179-7199-4aab-bae0-1baf072c7659
ms.service: logic-apps
ms.workload: integration
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 5/26/2017
ms.author: LADocs; jehollan
ms.openlocfilehash: 2792204d1d298a6f810e75211c1789ee204c2fdf
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="create-custom-apis-as-connectors-for-logic-apps"></a><span data-ttu-id="15bc7-104">建立自訂 API 作為 Logic Apps 的連接器</span><span class="sxs-lookup"><span data-stu-id="15bc7-104">Create custom APIs as connectors for logic apps</span></span>

<span data-ttu-id="15bc7-105">雖然 Azure 邏輯應用程式提供了[100 + 內建連接器](../connectors/apis-list.md)，您可以使用邏輯應用程式工作流程中，您可能會想 toocall 應用程式開發介面，系統中，與服務未與連接器可用。</span><span class="sxs-lookup"><span data-stu-id="15bc7-105">Although Azure Logic Apps offers [100+ built-in connectors](../connectors/apis-list.md) that you can use in logic app workflows, you might want toocall APIs, systems, and services that aren't available as connectors.</span></span> <span data-ttu-id="15bc7-106">您可以建立您自己自訂的 Api，提供邏輯應用程式中的動作和觸發程序 toouse。</span><span class="sxs-lookup"><span data-stu-id="15bc7-106">You can create your own custom APIs that provide actions and triggers toouse in logic apps.</span></span> <span data-ttu-id="15bc7-107">以下是其他您可能想的原因 toocreate 自己 Api 太使用與邏輯應用程式中的連接器：</span><span class="sxs-lookup"><span data-stu-id="15bc7-107">Here are other reasons why you might want toocreate your own APIs too use as connectors in logic apps:</span></span>

* <span data-ttu-id="15bc7-108">延伸您目前的系統整合及資料整合工作流程。</span><span class="sxs-lookup"><span data-stu-id="15bc7-108">Extend your current system integration and data integration workflows.</span></span>
* <span data-ttu-id="15bc7-109">協助客戶使用您服務 toomanage professional 或個人的工作。</span><span class="sxs-lookup"><span data-stu-id="15bc7-109">Help customers use your service toomanage professional or personal tasks.</span></span>
* <span data-ttu-id="15bc7-110">展開 hello 觸達、 搜尋功能，以及使用您的服務。</span><span class="sxs-lookup"><span data-stu-id="15bc7-110">Expand hello reach, discoverability, and use for your service.</span></span>

<span data-ttu-id="15bc7-111">基本上，連接器是使用 REST 作為隨插即用介面、[Swagger 中繼資料格式](http://swagger.io/specification/)作為文件，以及 JSON 作為其資料交換格式的 web API。</span><span class="sxs-lookup"><span data-stu-id="15bc7-111">Basically, connectors are web APIs that use REST for pluggable interfaces, [Swagger metadata format](http://swagger.io/specification/) for documentation, and JSON as their data exchange format.</span></span> <span data-ttu-id="15bc7-112">因為連接器是透過 HTTP 端點進行通訊的 REST API，您可以使用諸如 .NET、Java 或 Node.js 等任何語言來建置連接器。</span><span class="sxs-lookup"><span data-stu-id="15bc7-112">Because connectors are REST APIs that communicate through HTTP endpoints, you can use any language, like .NET, Java, or Node.js, for building connectors.</span></span> <span data-ttu-id="15bc7-113">您也可以在裝載您 Api [Azure App Service](../app-service/app-service-value-prop-what-is.md)、 平台做為服務 (PaaS) 供應項目，提供一種 hello 最佳、 簡單的方法，和擴充性最高裝載應用程式開發介面。</span><span class="sxs-lookup"><span data-stu-id="15bc7-113">You can also host your APIs on [Azure App Service](../app-service/app-service-value-prop-what-is.md), a platform-as-a-service (PaaS) offering that provides one of hello best, easiest, and most scalable ways for API hosting.</span></span> 

<span data-ttu-id="15bc7-114">針對自訂 Api toowork 與邏輯應用程式，可以提供您的 API [*動作*](./logic-apps-what-are-logic-apps.md#logic-app-concepts)邏輯應用程式工作流程中執行的特定工作。</span><span class="sxs-lookup"><span data-stu-id="15bc7-114">For custom APIs toowork with logic apps, your API can provide [*actions*](./logic-apps-what-are-logic-apps.md#logic-app-concepts) that perform specific tasks in logic app workflows.</span></span> <span data-ttu-id="15bc7-115">您的 API 也可作為[*觸發程序*](./logic-apps-what-are-logic-apps.md#logic-app-concepts)，當新資料或事件符合指定的條件時，能啟動邏輯應用程式工作流程。</span><span class="sxs-lookup"><span data-stu-id="15bc7-115">Your API can also act as a [*trigger*](./logic-apps-what-are-logic-apps.md#logic-app-concepts) that starts a logic app workflow when new data or an event meets a specified condition.</span></span> <span data-ttu-id="15bc7-116">本主題描述常見的模式，您可以遵循建置動作和觸發程序在 API 中，根據您想要應用程式開發介面 tooprovide 的 hello 行為。</span><span class="sxs-lookup"><span data-stu-id="15bc7-116">This topic describes common patterns that you can follow for building actions and triggers in your API, based on hello behavior that you want your API tooprovide.</span></span>

> [!TIP] 
> <span data-ttu-id="15bc7-117">雖然您可以部署與您 Api [web 應用程式](../app-service-web/app-service-web-overview.md)，請考慮部署與您 Api [API apps](../app-service-api/app-service-api-apps-why-best-platform.md)，這可讓您的工作更容易當您建置、 裝載，並使用 Api hello 雲端與內部部署。</span><span class="sxs-lookup"><span data-stu-id="15bc7-117">Although you can deploy your APIs as [web apps](../app-service-web/app-service-web-overview.md), consider deploying your APIs as [API apps](../app-service-api/app-service-api-apps-why-best-platform.md), which can make your job easier when you build, host, and consume APIs in hello cloud and on premises.</span></span> <span data-ttu-id="15bc7-118">您不需要 toochange 任何程式碼在您的應用程式開發介面中--只部署 tooan API 應用程式程式碼。</span><span class="sxs-lookup"><span data-stu-id="15bc7-118">You don't have toochange any code in your APIs -- just deploy your code tooan API app.</span></span> <span data-ttu-id="15bc7-119">了解如何太[建置應用程式開發介面應用程式使用 ASP.NET 建立](../app-service-api/app-service-api-dotnet-get-started.md)， [Java](../app-service-api/app-service-api-java-api-app.md)，或[Node.js](../app-service-api/app-service-api-nodejs-api-app.md)。</span><span class="sxs-lookup"><span data-stu-id="15bc7-119">Learn how too [build API apps created with ASP.NET](../app-service-api/app-service-api-dotnet-get-started.md), [Java](../app-service-api/app-service-api-java-api-app.md), or [Node.js](../app-service-api/app-service-api-nodejs-api-app.md).</span></span> 
>
> <span data-ttu-id="15bc7-120">如需內建的邏輯應用程式的 API 應用程式範例，請瀏覽 hello [Azure 邏輯應用程式 GitHub 儲存機制](http://github.com/logicappsio)或[部落格](http://aka.ms/logicappsblog)。</span><span class="sxs-lookup"><span data-stu-id="15bc7-120">For API App samples built for logic apps, visit hello [Azure Logic Apps GitHub repository](http://github.com/logicappsio) or [blog](http://aka.ms/logicappsblog).</span></span>

## <a name="helpful-tools"></a><span data-ttu-id="15bc7-121">實用工具</span><span class="sxs-lookup"><span data-stu-id="15bc7-121">Helpful tools</span></span>

<span data-ttu-id="15bc7-122">自訂 API 最適合搭配邏輯應用程式時也有 hello API [Swagger 文件](http://swagger.io/specification/)描述 hello API 的作業和參數。</span><span class="sxs-lookup"><span data-stu-id="15bc7-122">A custom API works best with logic apps when hello API also has a [Swagger document](http://swagger.io/specification/) that describes hello API's operations and parameters.</span></span>
<span data-ttu-id="15bc7-123">許多程式庫，例如[Swashbuckle](https://github.com/domaindrivendev/Swashbuckle)，自動為您產生 hello Swagger 檔案。</span><span class="sxs-lookup"><span data-stu-id="15bc7-123">Many libraries, like [Swashbuckle](https://github.com/domaindrivendev/Swashbuckle), can automatically generate hello Swagger file for you.</span></span> <span data-ttu-id="15bc7-124">tooannotate hello 的顯示名稱、 屬性類型等等的 Swagger 檔案，您也可以使用[TRex](https://github.com/nihaue/TRex) ，讓您的 Swagger 檔案也適用於邏輯應用程式。</span><span class="sxs-lookup"><span data-stu-id="15bc7-124">tooannotate hello Swagger file for display names, property types, and so on, you can also use [TRex](https://github.com/nihaue/TRex) so that your Swagger file works well with logic apps.</span></span>

<a name="actions"></a>

## <a name="action-patterns"></a><span data-ttu-id="15bc7-125">動作模式</span><span class="sxs-lookup"><span data-stu-id="15bc7-125">Action patterns</span></span>

<span data-ttu-id="15bc7-126">邏輯應用程式 tooperform 工作，應該提供您的自訂 API [*動作*](./logic-apps-what-are-logic-apps.md#logic-app-concepts)。</span><span class="sxs-lookup"><span data-stu-id="15bc7-126">For logic apps tooperform tasks, your custom API should provide [*actions*](./logic-apps-what-are-logic-apps.md#logic-app-concepts).</span></span> <span data-ttu-id="15bc7-127">您的應用程式開發介面中每項作業會將對應 tooan 動作。</span><span class="sxs-lookup"><span data-stu-id="15bc7-127">Each operation in your API maps tooan action.</span></span> <span data-ttu-id="15bc7-128">基本的動作是可接受 HTTP 要求並傳回 HTTP 回應的控制器。</span><span class="sxs-lookup"><span data-stu-id="15bc7-128">A basic action is a controller that accepts HTTP requests and returns HTTP responses.</span></span> <span data-ttu-id="15bc7-129">例如，邏輯應用程式傳送的 HTTP 要求 tooyour web 應用程式或應用程式開發介面應用程式。</span><span class="sxs-lookup"><span data-stu-id="15bc7-129">So for example, a logic app sends an HTTP request tooyour web app or API app.</span></span> <span data-ttu-id="15bc7-130">您的應用程式接著會傳回 HTTP 回應，應用程式可以處理以及 hello 邏輯的內容。</span><span class="sxs-lookup"><span data-stu-id="15bc7-130">Your app then returns an HTTP response, along with content that hello logic app can process.</span></span>

<span data-ttu-id="15bc7-131">針對標準動作，您可以在 API 中撰寫 HTTP 要求方法，並在 Swagger 檔案中描述該方法。</span><span class="sxs-lookup"><span data-stu-id="15bc7-131">For a standard action, you can write an HTTP request method in your API and describe that method in a Swagger file.</span></span> <span data-ttu-id="15bc7-132">接著，您可以使用 [HTTP 動作](../connectors/connectors-native-http.md)或 [HTTP + Swagger](../connectors/connectors-native-http-swagger.md) 動作直接呼叫您的 API。</span><span class="sxs-lookup"><span data-stu-id="15bc7-132">You can then call your API directly with an [HTTP action](../connectors/connectors-native-http.md) or an [HTTP + Swagger](../connectors/connectors-native-http-swagger.md) action.</span></span> <span data-ttu-id="15bc7-133">根據預設，必須傳回回應 hello 內[要求逾時限制](./logic-apps-limits-and-config.md)。</span><span class="sxs-lookup"><span data-stu-id="15bc7-133">By default, responses must be returned within hello [request timeout limit](./logic-apps-limits-and-config.md).</span></span> 

![標準動作模式](./media/logic-apps-create-api-app/standard-action.png)

<span data-ttu-id="15bc7-135"><a name="pattern-overview"></a>toomake 邏輯應用程式等候您的 API 完成時間執行的工作，您的 API 可以依照 hello[非同步輪詢模式](#async-pattern)或 hello[非同步 webhook 模式](#webhook-actions)本主題中所述。</span><span class="sxs-lookup"><span data-stu-id="15bc7-135"><a name="pattern-overview"></a> toomake a logic app wait while your API finishes longer-running tasks, your API can follow hello [asynchronous polling pattern](#async-pattern) or hello [asynchronous webhook pattern](#webhook-actions) described in this topic.</span></span> <span data-ttu-id="15bc7-136">例如，可協助您以視覺化方式檢視這些模式的行為不同，假設 hello 程序來排序從由於這家蛋糕店的自訂蛋糕。</span><span class="sxs-lookup"><span data-stu-id="15bc7-136">For an analogy that helps you visualize these patterns' different behaviors, imagine hello process for ordering a custom cake from a bakery.</span></span> <span data-ttu-id="15bc7-137">hello 輪詢模式會反映在您呼叫 hello 由於這家蛋糕店每隔 20 分鐘 toocheck hello 蛋糕是否就緒的 hello 行為。</span><span class="sxs-lookup"><span data-stu-id="15bc7-137">hello polling pattern mirrors hello behavior where you call hello bakery every 20 minutes toocheck whether hello cake is ready.</span></span> <span data-ttu-id="15bc7-138">hello webhook 模式會反映在 hello 由於這家蛋糕店會要求您輸入您的電話號碼讓它們可以在 hello 蛋糕就緒時呼叫您的 hello 行為。</span><span class="sxs-lookup"><span data-stu-id="15bc7-138">hello webhook pattern mirrors hello behavior where hello bakery asks you for your phone number so they can call you when hello cake is ready.</span></span>

<span data-ttu-id="15bc7-139">如需範例，請瀏覽 hello[邏輯應用程式 GitHub 儲存機制](https://github.com/logicappsio)。</span><span class="sxs-lookup"><span data-stu-id="15bc7-139">For samples, visit hello [Logic Apps GitHub repository](https://github.com/logicappsio).</span></span> <span data-ttu-id="15bc7-140">此外，深入了解[動作的使用量計量](logic-apps-pricing.md)。</span><span class="sxs-lookup"><span data-stu-id="15bc7-140">Also, learn more about [usage metering for actions](logic-apps-pricing.md).</span></span>

<a name="async-pattern"></a>

### <a name="perform-long-running-tasks-with-hello-polling-action-pattern"></a><span data-ttu-id="15bc7-141">執行長時間執行工作以 hello 輪詢模式動作</span><span class="sxs-lookup"><span data-stu-id="15bc7-141">Perform long-running tasks with hello polling action pattern</span></span>

<span data-ttu-id="15bc7-142">您的 API 執行工作無法執行時間超過 hello toohave[要求逾時限制](./logic-apps-limits-and-config.md)，您可以使用 hello 非同步輪詢模式。</span><span class="sxs-lookup"><span data-stu-id="15bc7-142">toohave your API perform tasks that could run longer than hello [request timeout limit](./logic-apps-limits-and-config.md), you can use hello asynchronous polling pattern.</span></span> <span data-ttu-id="15bc7-143">這種模式都有個別的執行緒，但保持作用中連線 toohello Logic Apps 引擎適用於您應用程式開發介面執行。</span><span class="sxs-lookup"><span data-stu-id="15bc7-143">This pattern has your API do work in a separate thread, but keep an active connection toohello Logic Apps engine.</span></span> <span data-ttu-id="15bc7-144">這樣一來，hello 邏輯應用程式不會逾時或您的 API 完成工作之前，繼續 hello hello 工作流程中的下一個步驟。</span><span class="sxs-lookup"><span data-stu-id="15bc7-144">That way, hello logic app does not time out or continue with hello next step in hello workflow before your API finishes working.</span></span>

<span data-ttu-id="15bc7-145">以下是一般模式將 hello:</span><span class="sxs-lookup"><span data-stu-id="15bc7-145">Here's hello general pattern:</span></span>

1. <span data-ttu-id="15bc7-146">請確定該 hello 引擎能夠識別您的應用程式開發介面已接受 hello 要求，並啟動工作。</span><span class="sxs-lookup"><span data-stu-id="15bc7-146">Make sure that hello engine knows that your API accepted hello request and started working.</span></span>
2. <span data-ttu-id="15bc7-147">當 hello 引擎進行後續要求的作業狀態時，可讓 hello 引擎知道您的 API 完成時 hello 工作。</span><span class="sxs-lookup"><span data-stu-id="15bc7-147">When hello engine makes subsequent requests for job status, let hello engine know when your API finishes hello task.</span></span>
3. <span data-ttu-id="15bc7-148">傳回相關的資料 toohello 引擎，所以 hello 邏輯應用程式工作流程才能繼續。</span><span class="sxs-lookup"><span data-stu-id="15bc7-148">Return relevant data toohello engine so that hello logic app workflow can continue.</span></span>

<span data-ttu-id="15bc7-149"><a name="bakery-polling-action"></a>現在套用 hello 先前由於這家蛋糕店比喻 toohello 輪詢模式，再想像您呼叫由於這家蛋糕店和順序自訂蛋糕傳遞。</span><span class="sxs-lookup"><span data-stu-id="15bc7-149"><a name="bakery-polling-action"></a> Now apply hello previous bakery analogy toohello polling pattern, and imagine that you call a bakery and order a custom cake for delivery.</span></span> <span data-ttu-id="15bc7-150">hello hello 蛋糕的製作程序需要的時間，而且您不想 hello 電話 toowait hello 由於這家蛋糕店 hello 蛋糕上時。</span><span class="sxs-lookup"><span data-stu-id="15bc7-150">hello process for making hello cake takes time, and you don't want toowait on hello phone while hello bakery works on hello cake.</span></span> <span data-ttu-id="15bc7-151">hello 由於這家蛋糕店確認您的訂單，您就可以呼叫 hello 蛋糕狀態每隔 20 分鐘。</span><span class="sxs-lookup"><span data-stu-id="15bc7-151">hello bakery confirms your order and has you call every 20 minutes for hello cake's status.</span></span> <span data-ttu-id="15bc7-152">20 分鐘傳遞之後，您呼叫 hello 蛋糕店，但它們會告訴您無法完成您的蛋糕，以及您應該呼叫在另一個 20 分鐘。</span><span class="sxs-lookup"><span data-stu-id="15bc7-152">After 20 minutes pass, you call hello bakery, but they tell you that your cake isn't done and that you should call in another 20 minutes.</span></span> <span data-ttu-id="15bc7-153">此回往來程序會繼續直到您呼叫，並 hello 由於這家蛋糕店告訴您，您的訂單備妥，並提供您的蛋糕。</span><span class="sxs-lookup"><span data-stu-id="15bc7-153">This back-and-forth process continues until you call, and hello bakery tells you that your order is ready and delivers your cake.</span></span> 

<span data-ttu-id="15bc7-154">現在讓我們來對應回此輪詢模式。</span><span class="sxs-lookup"><span data-stu-id="15bc7-154">So let's map this polling pattern back.</span></span> <span data-ttu-id="15bc7-155">hello 由於這家蛋糕店代表自訂 API 中，而您 hello 蛋糕客戶，代表 hello Logic Apps 引擎。</span><span class="sxs-lookup"><span data-stu-id="15bc7-155">hello bakery represents your custom API, while you, hello cake customer, represent hello Logic Apps engine.</span></span> <span data-ttu-id="15bc7-156">當 hello 引擎呼叫您的 API，透過要求時，您的 API 確認 hello 要求並予以回應 hello 時間間隔，hello 引擎可以檢查工作狀態時。</span><span class="sxs-lookup"><span data-stu-id="15bc7-156">When hello engine calls your API with a request, your API confirms hello request and responds with hello time interval when hello engine can check job status.</span></span> <span data-ttu-id="15bc7-157">hello 引擎會繼續檢查工作狀態，直到您的 API 回應 hello 工作完成時，以及傳回資料 tooyour 邏輯應用程式，然後繼續進行工作流程。</span><span class="sxs-lookup"><span data-stu-id="15bc7-157">hello engine continues checking job status until your API responds that hello job is done and returns data tooyour logic app, which then continues workflow.</span></span> 

![輪詢動作模式](./media/logic-apps-create-api-app/custom-api-async-action-pattern.png)

<span data-ttu-id="15bc7-159">以下是您的應用程式開發介面 toofollow，hello 應用程式開發介面的檢視方塊中所述的 hello 特定步驟：</span><span class="sxs-lookup"><span data-stu-id="15bc7-159">Here are hello specific steps for your API toofollow, described from hello API's perspective:</span></span>

1. <span data-ttu-id="15bc7-160">當您的 API 會取得 HTTP 要求 toostart 工作，立即傳回 HTTP`202 ACCEPTED`回應 hello`location`稍後在此步驟中所述的標頭。</span><span class="sxs-lookup"><span data-stu-id="15bc7-160">When your API gets an HTTP request toostart work, immediately return an HTTP `202 ACCEPTED` response with hello `location` header described later in this step.</span></span> <span data-ttu-id="15bc7-161">這個回應可讓的 hello 引擎能夠識別您的 API 取得的 Logic Apps hello 接受的 hello 要求裝載 （資料輸入） 的要求，並立即處理。</span><span class="sxs-lookup"><span data-stu-id="15bc7-161">This response lets hello Logic Apps engine know that your API got hello request, accepted hello request payload (data input), and is now processing.</span></span> 
   
   <span data-ttu-id="15bc7-162">hello`202 ACCEPTED`回應應包含這些標頭：</span><span class="sxs-lookup"><span data-stu-id="15bc7-162">hello `202 ACCEPTED` response should include these headers:</span></span>
   
   * <span data-ttu-id="15bc7-163">*需要*: A`location`標頭，指定 hello 絕對路徑 tooa URL hello Logic Apps 引擎可以請檢查您的 API 作業狀態</span><span class="sxs-lookup"><span data-stu-id="15bc7-163">*Required*: A `location` header that specifies hello absolute path tooa URL where hello Logic Apps engine can check your API's job status</span></span>

   * <span data-ttu-id="15bc7-164">*選擇性*: A`retry-after`標頭，指定 hello 的秒數 hello 引擎應等待檢查 hello`location`作業狀態的 URL。</span><span class="sxs-lookup"><span data-stu-id="15bc7-164">*Optional*: A `retry-after` header that specifies hello number of seconds that hello engine should wait before checking hello `location` URL for job status.</span></span> 

     <span data-ttu-id="15bc7-165">根據預設，hello 引擎會檢查每隔 20 秒。</span><span class="sxs-lookup"><span data-stu-id="15bc7-165">By default, hello engine checks every 20 seconds.</span></span> <span data-ttu-id="15bc7-166">toospecify 不同的間隔，包括 hello`retry-after`標頭和 hello 數秒，直到 hello 下一次輪詢。</span><span class="sxs-lookup"><span data-stu-id="15bc7-166">toospecify a different interval, include hello `retry-after` header and hello number of seconds until hello next poll.</span></span>

2. <span data-ttu-id="15bc7-167">Hello Logic Apps hello 指定時間結束之後，引擎輪詢 hello `location` URL toocheck 作業狀態。</span><span class="sxs-lookup"><span data-stu-id="15bc7-167">After hello specified time passes, hello Logic Apps engine polls hello `location` URL toocheck job status.</span></span> <span data-ttu-id="15bc7-168">您的 API 應執行這些檢查，並傳回這些回應：</span><span class="sxs-lookup"><span data-stu-id="15bc7-168">Your API should perform these checks and return these responses:</span></span>
   
   * <span data-ttu-id="15bc7-169">如果 hello 工作完成時，會傳回 HTTP`200 OK`回應，以及 hello 回應裝載 （hello 下一個步驟的輸入）。</span><span class="sxs-lookup"><span data-stu-id="15bc7-169">If hello job is done, return an HTTP `200 OK` response, along with hello response payload (input for hello next step).</span></span>

   * <span data-ttu-id="15bc7-170">如果 hello 作業仍在處理中，則傳回另一個 HTTP`202 ACCEPTED`回應，但包含 hello 相同 hello 原始回應標頭。</span><span class="sxs-lookup"><span data-stu-id="15bc7-170">If hello job is still processing, return another HTTP `202 ACCEPTED` response, but with hello same headers as hello original response.</span></span>

<span data-ttu-id="15bc7-171">當您的 API 會遵循這種模式時，您不需要 toodo 任何項目在 hello 邏輯應用程式工作流程定義 toocontinue 檢查工作狀態。</span><span class="sxs-lookup"><span data-stu-id="15bc7-171">When your API follows this pattern, you don't have toodo anything in hello logic app workflow definition toocontinue checking job status.</span></span> <span data-ttu-id="15bc7-172">當 hello 引擎取得 HTTP`202 ACCEPTED`回應，有效`location`標頭、 hello 引擎方面 hello 非同步模式和檢查 hello`location`標頭，直到您的 API 會傳回非 202 回應為止。</span><span class="sxs-lookup"><span data-stu-id="15bc7-172">When hello engine gets an HTTP `202 ACCEPTED` response and a valid `location` header, hello engine respects hello asynchronous pattern and checks hello `location` header until your API returns a non-202 response.</span></span>

> [!TIP]
> <span data-ttu-id="15bc7-173">如需非同步模式範例，請檢閱此 [GitHub 中的非同步控制器回應範例](https://github.com/logicappsio/LogicAppsAsyncResponseSample)。</span><span class="sxs-lookup"><span data-stu-id="15bc7-173">For an example asynchronous pattern, review this [asynchronous controller response sample in GitHub](https://github.com/logicappsio/LogicAppsAsyncResponseSample).</span></span>

<a name="webhook-actions"></a>

### <a name="perform-long-running-tasks-with-hello-webhook-action-pattern"></a><span data-ttu-id="15bc7-174">執行長時間執行工作與 hello webhook 動作模式</span><span class="sxs-lookup"><span data-stu-id="15bc7-174">Perform long-running tasks with hello webhook action pattern</span></span>

<span data-ttu-id="15bc7-175">或者，您可以使用 hello webhook 模式針對長時間執行工作和非同步處理。</span><span class="sxs-lookup"><span data-stu-id="15bc7-175">As an alternative, you can use hello webhook pattern for long-running tasks and asynchronous processing.</span></span> <span data-ttu-id="15bc7-176">此模式沒有 hello 邏輯應用程式暫停，並等候從您的應用程式開發介面 toofinish 才能繼續工作流程處理的"callback"。</span><span class="sxs-lookup"><span data-stu-id="15bc7-176">This pattern has hello logic app pause and wait for a "callback" from your API toofinish processing before continuing workflow.</span></span> <span data-ttu-id="15bc7-177">此回呼是 HTTP POST 時，會傳送訊息 tooa URL 事件發生時。</span><span class="sxs-lookup"><span data-stu-id="15bc7-177">This callback is an HTTP POST that sends a message tooa URL when an event happens.</span></span> 

<span data-ttu-id="15bc7-178"><a name="bakery-webhook-action"></a>現在套用 hello 先前由於這家蛋糕店比喻 toohello webhook 模式，再想像您呼叫由於這家蛋糕店和順序自訂蛋糕傳遞。</span><span class="sxs-lookup"><span data-stu-id="15bc7-178"><a name="bakery-webhook-action"></a> Now apply hello previous bakery analogy toohello webhook pattern, and imagine that you call a bakery and order a custom cake for delivery.</span></span> <span data-ttu-id="15bc7-179">hello hello 蛋糕的製作程序需要的時間，而且您不想 hello 電話 toowait hello 由於這家蛋糕店 hello 蛋糕上時。</span><span class="sxs-lookup"><span data-stu-id="15bc7-179">hello process for making hello cake takes time, and you don't want toowait on hello phone while hello bakery works on hello cake.</span></span> <span data-ttu-id="15bc7-180">hello 由於這家蛋糕店確認您的訂單，但這次，您可以讓您的電話號碼讓它們可以呼叫您完成 hello 蛋糕。</span><span class="sxs-lookup"><span data-stu-id="15bc7-180">hello bakery confirms your order, but this time, you give them your phone number so they can call you when hello cake is done.</span></span> <span data-ttu-id="15bc7-181">這次 hello 由於這家蛋糕店會告訴您訂單已就緒，而且提供您的蛋糕。</span><span class="sxs-lookup"><span data-stu-id="15bc7-181">This time, hello bakery tells you when your order is ready and delivers your cake.</span></span>

<span data-ttu-id="15bc7-182">當我們對應回此 webhook 模式時，hello 由於這家蛋糕店代表您自訂 API 中的，同時您、 hello 蛋糕客戶、 代表 hello Logic Apps 引擎。</span><span class="sxs-lookup"><span data-stu-id="15bc7-182">When we map this webhook pattern back, hello bakery represents your custom API, while you, hello cake customer, represent hello Logic Apps engine.</span></span> <span data-ttu-id="15bc7-183">hello 引擎會呼叫您的 API，透過要求，並包含"callback"URL。</span><span class="sxs-lookup"><span data-stu-id="15bc7-183">hello engine calls your API with a request and includes a "callback" URL.</span></span>
<span data-ttu-id="15bc7-184">當 hello 作業完成時，您的 API 會使用 hello URL toonotify hello 引擎，並傳回資料 tooyour 邏輯應用程式，然後繼續進行工作流程。</span><span class="sxs-lookup"><span data-stu-id="15bc7-184">When hello job is done, your API uses hello URL toonotify hello engine and return data tooyour logic app, which then continues workflow.</span></span> 

<span data-ttu-id="15bc7-185">對於此模式，設定您控制器上的兩個端點：`subscribe` 和 `unsubscribe`</span><span class="sxs-lookup"><span data-stu-id="15bc7-185">For this pattern, set up two endpoints on your controller: `subscribe` and `unsubscribe`</span></span>

*  <span data-ttu-id="15bc7-186">`subscribe`端點： hello 邏輯應用程式執行到您的 API hello 工作流程中的動作，當引擎呼叫 hello`subscribe`端點。</span><span class="sxs-lookup"><span data-stu-id="15bc7-186">`subscribe` endpoint: When execution reaches your API's action in hello workflow, hello Logic Apps engine calls hello `subscribe` endpoint.</span></span> <span data-ttu-id="15bc7-187">這個步驟會導致 hello 邏輯應用程式 toocreate 回呼 URL 會儲存您的 API，並且工作完成時，然後等待 hello 回呼，從您的 API。</span><span class="sxs-lookup"><span data-stu-id="15bc7-187">This step causes hello logic app toocreate a callback URL that your API stores and then wait for hello callback from your API when work is complete.</span></span> <span data-ttu-id="15bc7-188">您的 API (call back) 使用 HTTP POST toohello URL，然後輸入的 toohello 邏輯應用程式的形式傳遞任何傳回的內容和標頭。</span><span class="sxs-lookup"><span data-stu-id="15bc7-188">Your API then calls back with an HTTP POST toohello URL and passes any returned content and headers as input toohello logic app.</span></span>

* <span data-ttu-id="15bc7-189">`unsubscribe`端點： hello Logic Apps 如果取消 hello 邏輯應用程式執行時，引擎會呼叫 hello`unsubscribe`端點。</span><span class="sxs-lookup"><span data-stu-id="15bc7-189">`unsubscribe` endpoint: If hello logic app run is canceled, hello Logic Apps engine calls hello `unsubscribe` endpoint.</span></span> <span data-ttu-id="15bc7-190">您的 API 可以取消註冊 hello 回呼 URL，並停止任何處理程序在必要時。</span><span class="sxs-lookup"><span data-stu-id="15bc7-190">Your API can then unregister hello callback URL and stop any processes as necessary.</span></span>

![Webhook 動作模式](./media/logic-apps-create-api-app/custom-api-webhook-action-pattern.png)

> [!NOTE]
> <span data-ttu-id="15bc7-192">目前，hello 邏輯應用程式的設計工具並不支援透過 Swagger 探索 webhook 端點。</span><span class="sxs-lookup"><span data-stu-id="15bc7-192">Currently, hello Logic App Designer doesn't support discovering webhook endpoints through Swagger.</span></span> <span data-ttu-id="15bc7-193">因此對於此模式中，您需要 tooadd [ **Webhook**動作](../connectors/connectors-native-webhook.md)並指定 hello URL、 標頭和要求主體。</span><span class="sxs-lookup"><span data-stu-id="15bc7-193">So for this pattern, you have tooadd a [**Webhook** action](../connectors/connectors-native-webhook.md) and specify hello URL, headers, and body for your request.</span></span> <span data-ttu-id="15bc7-194">另請參閱[工作流程動作與觸發程序](logic-apps-workflow-actions-triggers.md#api-connection-webhook-action)。</span><span class="sxs-lookup"><span data-stu-id="15bc7-194">See also [Workflow actions and triggers](logic-apps-workflow-actions-triggers.md#api-connection-webhook-action).</span></span> <span data-ttu-id="15bc7-195">toopass hello 回呼 URL 中的，您可以使用 hello`@listCallbackUrl()`中 hello 前一個欄位的任何必要的工作流程函式。</span><span class="sxs-lookup"><span data-stu-id="15bc7-195">toopass in hello callback URL, you can use hello `@listCallbackUrl()` workflow function in any of hello previous fields as necessary.</span></span>

> [!TIP]
> <span data-ttu-id="15bc7-196">如需範例 webhook 模式，請檢閱此 [GitHub 中的 webhook 觸發程序範例](https://github.com/logicappsio/LogicAppTriggersExample/blob/master/LogicAppTriggers/Controllers/WebhookTriggerController.cs)。</span><span class="sxs-lookup"><span data-stu-id="15bc7-196">For an example webhook pattern, review this [webhook trigger sample in GitHub](https://github.com/logicappsio/LogicAppTriggersExample/blob/master/LogicAppTriggers/Controllers/WebhookTriggerController.cs).</span></span>

<a name="triggers"></a>

## <a name="trigger-patterns"></a><span data-ttu-id="15bc7-197">觸發程序模式</span><span class="sxs-lookup"><span data-stu-id="15bc7-197">Trigger patterns</span></span>

<span data-ttu-id="15bc7-198">您的自訂 API 可作為[*觸發程序*](./logic-apps-what-are-logic-apps.md#logic-app-concepts)，當新資料或事件符合指定的條件時，能啟動邏輯應用程式。</span><span class="sxs-lookup"><span data-stu-id="15bc7-198">Your custom API can act as a [*trigger*](./logic-apps-what-are-logic-apps.md#logic-app-concepts) that starts a logic app when new data or an event meets a specified condition.</span></span> <span data-ttu-id="15bc7-199">這個觸發程序可以定期檢查，或是等候並接聽您服務端點上的新資料或事件。</span><span class="sxs-lookup"><span data-stu-id="15bc7-199">This trigger can either check regularly, or wait and listen, for new data or events at your service endpoint.</span></span> <span data-ttu-id="15bc7-200">如果新的資料或事件符合指定的條件的 hello，hello 觸發程序引發並啟動 hello 邏輯應用程式正在接聽 toothat 觸發程序。</span><span class="sxs-lookup"><span data-stu-id="15bc7-200">If new data or an event meets hello specified condition, hello trigger fires and starts hello logic app, which is listening toothat trigger.</span></span> <span data-ttu-id="15bc7-201">toostart logic apps 如此一來您的 API 可以依照 hello [*輪詢觸發程序*](#polling-triggers)或 hello [ *webhook 觸發程序*](#webhook-triggers)模式。</span><span class="sxs-lookup"><span data-stu-id="15bc7-201">toostart logic apps this way, your API can follow hello [*polling trigger*](#polling-triggers) or hello [*webhook trigger*](#webhook-triggers) pattern.</span></span> <span data-ttu-id="15bc7-202">這些模式是針對類似 tootheir 對應項目[輪詢動作](#async-pattern)和[webhook 動作](#webhook-actions)。</span><span class="sxs-lookup"><span data-stu-id="15bc7-202">These patterns are similar tootheir counterparts for [polling actions](#async-pattern) and [webhook actions](#webhook-actions).</span></span> <span data-ttu-id="15bc7-203">此外，深入了解[觸發程序的使用量計量](logic-apps-pricing.md)。</span><span class="sxs-lookup"><span data-stu-id="15bc7-203">Also, learn more about [usage metering for triggers](logic-apps-pricing.md).</span></span>

<a name="polling-triggers"></a>

### <a name="check-for-new-data-or-events-regularly-with-hello-polling-trigger-pattern"></a><span data-ttu-id="15bc7-204">新的資料或事件定期檢查以 hello 輪詢觸發程序模式</span><span class="sxs-lookup"><span data-stu-id="15bc7-204">Check for new data or events regularly with hello polling trigger pattern</span></span>

<span data-ttu-id="15bc7-205">A*輪詢觸發程序*作用很像 hello[輪詢動作](#async-pattern)本主題先前所述。</span><span class="sxs-lookup"><span data-stu-id="15bc7-205">A *polling trigger* acts much like hello [polling action](#async-pattern) previously described in this topic.</span></span> <span data-ttu-id="15bc7-206">hello Logic Apps 引擎會定期呼叫，並檢查 hello 觸發程序的結束點的新資料或事件。</span><span class="sxs-lookup"><span data-stu-id="15bc7-206">hello Logic Apps engine periodically calls and checks hello trigger endpoint for new data or events.</span></span> <span data-ttu-id="15bc7-207">如果 hello 引擎發現新的資料或事件符合您指定的條件，就會引發 hello 觸發程序。</span><span class="sxs-lookup"><span data-stu-id="15bc7-207">If hello engine finds new data or an event that meets your specified condition, hello trigger fires.</span></span> <span data-ttu-id="15bc7-208">然後，hello 引擎會建立處理 hello 資料做為輸入的邏輯應用程式執行個體。</span><span class="sxs-lookup"><span data-stu-id="15bc7-208">Then, hello engine creates a logic app instance that processes hello data as input.</span></span> 

![輪詢觸發程序](./media/logic-apps-create-api-app/custom-api-polling-trigger-pattern.png)

> [!NOTE]
> <span data-ttu-id="15bc7-210">每個輪詢要求都會計算為動作執行，即使未建立邏輯應用程式執行個體時亦然。</span><span class="sxs-lookup"><span data-stu-id="15bc7-210">Each polling request counts as an action execution, even when no logic app instance is created.</span></span> <span data-ttu-id="15bc7-211">tooprevent 處理 hello 相同的資料多次，觸發程序應該清除已讀取並傳遞 toohello 邏輯應用程式資料。</span><span class="sxs-lookup"><span data-stu-id="15bc7-211">tooprevent processing hello same data multiple times, your trigger should clean up data that was already read and passed toohello logic app.</span></span>

<span data-ttu-id="15bc7-212">輪詢觸發程序，從 hello API 的觀點來描述特定步驟如下：</span><span class="sxs-lookup"><span data-stu-id="15bc7-212">Here are specific steps for a polling trigger, described from hello API's perspective:</span></span>

| <span data-ttu-id="15bc7-213">找到新資料或事件了嗎？</span><span class="sxs-lookup"><span data-stu-id="15bc7-213">Found new data or event?</span></span>  | <span data-ttu-id="15bc7-214">API 回應</span><span class="sxs-lookup"><span data-stu-id="15bc7-214">API response</span></span> | 
| ------------------------- | ------------ |
| <span data-ttu-id="15bc7-215">已找到</span><span class="sxs-lookup"><span data-stu-id="15bc7-215">Found</span></span> | <span data-ttu-id="15bc7-216">傳回 HTTP`200 OK`與 hello 回應裝載 （下一個步驟的輸入） 的狀態。</span><span class="sxs-lookup"><span data-stu-id="15bc7-216">Return an HTTP `200 OK` status with hello response payload (input for next step).</span></span> <br/><span data-ttu-id="15bc7-217">此回應建立的邏輯應用程式執行個體，並啟動 hello 工作流程。</span><span class="sxs-lookup"><span data-stu-id="15bc7-217">This response creates a logic app instance and starts hello workflow.</span></span> |
| <span data-ttu-id="15bc7-218">找不到</span><span class="sxs-lookup"><span data-stu-id="15bc7-218">Not found</span></span> | <span data-ttu-id="15bc7-219">傳回包含 `location` 標頭和 `retry-after` 標頭的 HTTP`202 ACCEPTED` 狀態。</span><span class="sxs-lookup"><span data-stu-id="15bc7-219">Return an HTTP `202 ACCEPTED` status with a `location` header and a `retry-after` header.</span></span> <br/><span data-ttu-id="15bc7-220">觸發程序，hello`location`標頭也應該包含`triggerState`查詢參數，通常是"timestamp"。</span><span class="sxs-lookup"><span data-stu-id="15bc7-220">For triggers, hello `location` header should also contain a `triggerState` query parameter, which is usually a "timestamp."</span></span> <span data-ttu-id="15bc7-221">您的 API 可以使用此識別碼 tootrack hello 上次 hello 邏輯應用程式所觸發。</span><span class="sxs-lookup"><span data-stu-id="15bc7-221">Your API can use this identifier tootrack hello last time that hello logic app was triggered.</span></span> |

<span data-ttu-id="15bc7-222">例如，tooperiodically 檢查您的服務對新檔案，您可能會建立具有這些行為的輪詢觸發程序：</span><span class="sxs-lookup"><span data-stu-id="15bc7-222">For example, tooperiodically check your service for new files, you might build a polling trigger that has these behaviors:</span></span>

| <span data-ttu-id="15bc7-223">要求是否包含 `triggerState`？</span><span class="sxs-lookup"><span data-stu-id="15bc7-223">Request includes `triggerState`?</span></span> | <span data-ttu-id="15bc7-224">API 回應</span><span class="sxs-lookup"><span data-stu-id="15bc7-224">API response</span></span> |
| -------------------------------- | -------------|
| <span data-ttu-id="15bc7-225">否</span><span class="sxs-lookup"><span data-stu-id="15bc7-225">No</span></span> | <span data-ttu-id="15bc7-226">傳回 HTTP`202 ACCEPTED`狀態加上一個`location`具有標頭`triggerState`設 toohello 目前的時間和 hello`retry-after`間隔 too15 秒數。</span><span class="sxs-lookup"><span data-stu-id="15bc7-226">Return an HTTP `202 ACCEPTED` status plus a `location` header with `triggerState` set toohello current time and hello `retry-after` interval too15 seconds.</span></span> |
| <span data-ttu-id="15bc7-227">是</span><span class="sxs-lookup"><span data-stu-id="15bc7-227">Yes</span></span> | <span data-ttu-id="15bc7-228">請檢查您的服務的 hello 之後加入的檔案`DateTime`如`triggerState`。</span><span class="sxs-lookup"><span data-stu-id="15bc7-228">Check your service for files added after hello `DateTime` for `triggerState`.</span></span> |

| <span data-ttu-id="15bc7-229">找到的檔案數</span><span class="sxs-lookup"><span data-stu-id="15bc7-229">Number of files found</span></span> | <span data-ttu-id="15bc7-230">API 回應</span><span class="sxs-lookup"><span data-stu-id="15bc7-230">API response</span></span> |
| --------------------- | -------------|
| <span data-ttu-id="15bc7-231">單一檔案</span><span class="sxs-lookup"><span data-stu-id="15bc7-231">Single file</span></span> | <span data-ttu-id="15bc7-232">傳回 HTTP`200 OK`狀態和 hello 的內容承載、 更新`triggerState`toohello `DateTime` hello 傳回的檔案，並設定`retry-after`間隔 too15 秒數。</span><span class="sxs-lookup"><span data-stu-id="15bc7-232">Return an HTTP `200 OK` status and hello content payload, update `triggerState` toohello `DateTime` for hello returned file, and set `retry-after` interval too15 seconds.</span></span> |
| <span data-ttu-id="15bc7-233">多個檔案</span><span class="sxs-lookup"><span data-stu-id="15bc7-233">Multiple files</span></span> | <span data-ttu-id="15bc7-234">傳回一個檔案，在階段與 HTTP`200 OK`狀態、 更新`triggerState`，並設定 hello`retry-after`間隔 too0 秒數。</span><span class="sxs-lookup"><span data-stu-id="15bc7-234">Return one file at a time and an HTTP `200 OK` status, update `triggerState`, and set hello `retry-after` interval too0 seconds.</span></span> </br><span data-ttu-id="15bc7-235">下列步驟讓 hello 引擎知道更多資料可用，但該 hello 引擎應該立即從 hello 中的 hello URL 要求 hello 資料`location`標頭。</span><span class="sxs-lookup"><span data-stu-id="15bc7-235">These steps let hello engine know that more data is available, and that hello engine should immediately request hello data from hello URL in hello `location` header.</span></span> |
| <span data-ttu-id="15bc7-236">沒有任何檔案</span><span class="sxs-lookup"><span data-stu-id="15bc7-236">No files</span></span> | <span data-ttu-id="15bc7-237">傳回 HTTP`202 ACCEPTED`狀態，請不要變更`triggerState`，和集合 hello`retry-after`間隔 too15 秒數。</span><span class="sxs-lookup"><span data-stu-id="15bc7-237">Return an HTTP `202 ACCEPTED` status, don't change `triggerState`, and set hello `retry-after` interval too15 seconds.</span></span> |

> [!TIP]
> <span data-ttu-id="15bc7-238">如需範例輪詢觸發程序模式，請檢閱此 [GitHub 中的輪詢觸發程序控制器範例](https://github.com/logicappsio/LogicAppTriggersExample/blob/master/LogicAppTriggers/Controllers/PollTriggerController.cs)。</span><span class="sxs-lookup"><span data-stu-id="15bc7-238">For an example polling trigger pattern, review this [poll trigger controller sample in GitHub](https://github.com/logicappsio/LogicAppTriggersExample/blob/master/LogicAppTriggers/Controllers/PollTriggerController.cs).</span></span>

<a name="webhook-triggers"></a>

### <a name="wait-and-listen-for-new-data-or-events-with-hello-webhook-trigger-pattern"></a><span data-ttu-id="15bc7-239">等候和接聽新的資料或與 hello webhook 觸發程序模式的事件</span><span class="sxs-lookup"><span data-stu-id="15bc7-239">Wait and listen for new data or events with hello webhook trigger pattern</span></span>

<span data-ttu-id="15bc7-240">Webhook 觸發程序是推送觸發程序，會等候並接聽您服務端點中的新資料或事件。</span><span class="sxs-lookup"><span data-stu-id="15bc7-240">A webhook trigger is a *push trigger* that waits and listens for new data or events at your service endpoint.</span></span> <span data-ttu-id="15bc7-241">如果新的資料或事件符合 hello 指定的條件，hello 引發觸發程序，並建立的邏輯應用程式執行個體，然後處理 hello 資料做為輸入。</span><span class="sxs-lookup"><span data-stu-id="15bc7-241">If new data or an event meets hello specified condition, hello trigger fires and creates a logic app instance, which then processes hello data as input.</span></span>
<span data-ttu-id="15bc7-242">Webhook 觸發程序作用很像 hello [webhook 動作](#webhook-actions)之前所述，本主題中，並使用設定`subscribe`和`unsubscribe`端點。</span><span class="sxs-lookup"><span data-stu-id="15bc7-242">Webhook triggers act much like hello [webhook actions](#webhook-actions) previously described in this topic, and are set up with `subscribe` and `unsubscribe` endpoints.</span></span> 

* <span data-ttu-id="15bc7-243">`subscribe`端點： hello Logic Apps 當您新增及儲存 webhook 觸發程序邏輯應用程式中時，引擎會呼叫 hello`subscribe`端點。</span><span class="sxs-lookup"><span data-stu-id="15bc7-243">`subscribe` endpoint: When you add and save a webhook trigger in your logic app, hello Logic Apps engine calls hello `subscribe` endpoint.</span></span> <span data-ttu-id="15bc7-244">這個步驟會導致 hello 邏輯應用程式 toocreate 回呼 URL 儲存您的 API。</span><span class="sxs-lookup"><span data-stu-id="15bc7-244">This step causes hello logic app toocreate a callback URL that your API stores.</span></span> <span data-ttu-id="15bc7-245">當新的資料或事件符合 hello 指定的條件時，您的 API 呼叫回 HTTP POST toohello url。</span><span class="sxs-lookup"><span data-stu-id="15bc7-245">When there's new data or an event that meets hello specified condition, your API calls back with an HTTP POST toohello URL.</span></span> <span data-ttu-id="15bc7-246">hello 內容裝載和標頭傳遞做為輸入的 toohello 邏輯應用程式。</span><span class="sxs-lookup"><span data-stu-id="15bc7-246">hello content payload and headers pass as input toohello logic app.</span></span>

* <span data-ttu-id="15bc7-247">`unsubscribe`端點： hello Logic Apps 如果刪除 hello webhook 觸發程序或整個邏輯應用程式時，引擎會呼叫 hello`unsubscribe`端點。</span><span class="sxs-lookup"><span data-stu-id="15bc7-247">`unsubscribe` endpoint: If hello webhook trigger or entire logic app is deleted, hello Logic Apps engine calls hello `unsubscribe` endpoint.</span></span> <span data-ttu-id="15bc7-248">您的 API 可以取消註冊 hello 回呼 URL，並停止任何處理程序在必要時。</span><span class="sxs-lookup"><span data-stu-id="15bc7-248">Your API can then unregister hello callback URL and stop any processes as necessary.</span></span>

![Webhook 觸發程序](./media/logic-apps-create-api-app/custom-api-webhook-trigger-pattern.png)

> [!NOTE]
> <span data-ttu-id="15bc7-250">目前，hello 邏輯應用程式的設計工具並不支援透過 Swagger 探索 webhook 端點。</span><span class="sxs-lookup"><span data-stu-id="15bc7-250">Currently, hello Logic App Designer doesn't support discovering webhook endpoints through Swagger.</span></span> <span data-ttu-id="15bc7-251">因此對於此模式中，您需要 tooadd [ **Webhook**觸發程序](../connectors/connectors-native-webhook.md)並指定 hello URL、 標頭和要求主體。</span><span class="sxs-lookup"><span data-stu-id="15bc7-251">So for this pattern, you have tooadd a [**Webhook** trigger](../connectors/connectors-native-webhook.md) and specify hello URL, headers, and body for your request.</span></span> <span data-ttu-id="15bc7-252">另請參閱 [HTTPWebhook 觸發程序](logic-apps-workflow-actions-triggers.md#httpwebhook-trigger)。</span><span class="sxs-lookup"><span data-stu-id="15bc7-252">See also [HTTPWebhook trigger](logic-apps-workflow-actions-triggers.md#httpwebhook-trigger).</span></span> <span data-ttu-id="15bc7-253">toopass hello 回呼 URL 中的，您可以使用 hello`@listCallbackUrl()`中 hello 前一個欄位的任何必要的工作流程函式。</span><span class="sxs-lookup"><span data-stu-id="15bc7-253">toopass in hello callback URL, you can use hello `@listCallbackUrl()` workflow function in any of hello previous fields as necessary.</span></span>
>
> <span data-ttu-id="15bc7-254">tooprevent 處理 hello 相同的資料多次，觸發程序應該清除已讀取並傳遞 toohello 邏輯應用程式資料。</span><span class="sxs-lookup"><span data-stu-id="15bc7-254">tooprevent processing hello same data multiple times, your trigger should clean up data that was already read and passed toohello logic app.</span></span>

> [!TIP]
> <span data-ttu-id="15bc7-255">如需範例 webhook 模式，請檢閱此 [GitHub 中的 webhook 觸發程序控制器範例](https://github.com/logicappsio/LogicAppTriggersExample/blob/master/LogicAppTriggers/Controllers/WebhookTriggerController.cs)。</span><span class="sxs-lookup"><span data-stu-id="15bc7-255">For an example webhook pattern, review this [webhook trigger controller sample in GitHub](https://github.com/logicappsio/LogicAppTriggersExample/blob/master/LogicAppTriggers/Controllers/WebhookTriggerController.cs).</span></span>

## <a name="deploy-call-and-secure-custom-apis"></a><span data-ttu-id="15bc7-256">部署、呼叫並保護自訂 API</span><span class="sxs-lookup"><span data-stu-id="15bc7-256">Deploy, call, and secure custom APIs</span></span>

<span data-ttu-id="15bc7-257">建立您的自訂 API 之後，請設定您的 API 以進行部署，讓您可安全地呼叫它們。</span><span class="sxs-lookup"><span data-stu-id="15bc7-257">After creating your custom APIs, set up your APIs for deployment so you can call them securely.</span></span> <span data-ttu-id="15bc7-258">了解如何太[部署，請呼叫，和邏輯應用程式的自訂 Api](./logic-apps-custom-hosted-api.md)。</span><span class="sxs-lookup"><span data-stu-id="15bc7-258">Learn how too[deploy, call, and secure custom APIs for logic apps](./logic-apps-custom-hosted-api.md).</span></span>

## <a name="publish-custom-apis-tooazure"></a><span data-ttu-id="15bc7-259">發行自訂應用程式開發介面 tooAzure</span><span class="sxs-lookup"><span data-stu-id="15bc7-259">Publish custom APIs tooAzure</span></span>

<span data-ttu-id="15bc7-260">toomake 您自訂應用程式開發介面提供公用用途，在 Azure 中，會送出提名 toohello [Microsoft Azure 認證計劃](https://azure.microsoft.com/marketplace/programs/certified/logic-apps/)。</span><span class="sxs-lookup"><span data-stu-id="15bc7-260">toomake your custom APIs available for public use in Azure, submit your nominations toohello [Microsoft Azure Certified program](https://azure.microsoft.com/marketplace/programs/certified/logic-apps/).</span></span>

## <a name="get-help"></a><span data-ttu-id="15bc7-261">取得說明</span><span class="sxs-lookup"><span data-stu-id="15bc7-261">Get help</span></span>

<span data-ttu-id="15bc7-262">如需自訂 API 的特定說明，請連絡 [customapishelp@microsoft.com](mailto:customapishelp@microsoft.com)。</span><span class="sxs-lookup"><span data-stu-id="15bc7-262">For specific help with custom APIs, contact [customapishelp@microsoft.com](mailto:customapishelp@microsoft.com).</span></span>

<span data-ttu-id="15bc7-263">tooask 問題、 解答的問題，以及執行其他 Azure 邏輯應用程式使用者，請參閱瀏覽 hello [Azure 邏輯應用程式論壇](https://social.msdn.microsoft.com/Forums/en-US/home?forum=azurelogicapps)。</span><span class="sxs-lookup"><span data-stu-id="15bc7-263">tooask questions, answer questions, and see what other Azure Logic Apps users are doing, visit hello [Azure Logic Apps forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=azurelogicapps).</span></span>

<span data-ttu-id="15bc7-264">toohelp 改善邏輯應用程式和連接器、 票選或送出意見在 hello [Logic Apps 使用者意見反應網站](http://aka.ms/logicapps-wish)。</span><span class="sxs-lookup"><span data-stu-id="15bc7-264">toohelp improve Logic Apps and connectors, vote on or submit ideas at hello [Logic Apps user feedback site](http://aka.ms/logicapps-wish).</span></span> 

## <a name="next-steps"></a><span data-ttu-id="15bc7-265">後續步驟</span><span class="sxs-lookup"><span data-stu-id="15bc7-265">Next steps</span></span>

* [<span data-ttu-id="15bc7-266">動作和觸發程序的使用量計量</span><span class="sxs-lookup"><span data-stu-id="15bc7-266">Usage metering for actions and triggers</span></span>](logic-apps-pricing.md)
* [<span data-ttu-id="15bc7-267">處理內容類型</span><span class="sxs-lookup"><span data-stu-id="15bc7-267">Handle content types</span></span>](./logic-apps-content-type.md)
* [<span data-ttu-id="15bc7-268">處理錯誤和例外狀況</span><span class="sxs-lookup"><span data-stu-id="15bc7-268">Handle errors and exceptions</span></span>](./logic-apps-exception-handling.md)
* [<span data-ttu-id="15bc7-269">安全存取 tooyour 邏輯應用程式</span><span class="sxs-lookup"><span data-stu-id="15bc7-269">Secure access tooyour logic apps</span></span>](./logic-apps-securing-a-logic-app.md)
* [<span data-ttu-id="15bc7-270">透過 HTTP 端點呼叫、觸發或巢狀處理 Logic Apps</span><span class="sxs-lookup"><span data-stu-id="15bc7-270">Call, trigger, or nest logic apps with HTTP endpoints</span></span>](./logic-apps-http-endpoint.md)