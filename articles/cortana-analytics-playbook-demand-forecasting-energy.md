---
title: "能源需求預測的 Cortana Intelligence 解決方案範本教戰守則 | Microsoft Docs"
description: "使用 Microsoft Cortana Intelligence 的解決方案範本，協助預測能源公共事業公司的需求。"
services: cortana-analytics
documentationcenter: 
author: ilanr9
manager: ilanr9
editor: yijichen
ms.assetid: 8855dbb9-8543-45b9-b4c6-aa743a04d547
ms.service: cortana-analytics
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/24/2016
ms.author: ilanr9;yijichen;garye
ms.openlocfilehash: 275e387878900154660d044b26ff5ac03a17a65a
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/03/2017
---
# <a name="cortana-intelligence-solution-template-playbook-for-demand-forecasting-of-energy"></a><span data-ttu-id="85698-103">能源需求預測的 Cortana Intelligence 解決方案範本教戰守則</span><span class="sxs-lookup"><span data-stu-id="85698-103">Cortana Intelligence Solution Template Playbook for Demand Forecasting of Energy</span></span>
## <a name="executive-summary"></a><span data-ttu-id="85698-104">執行摘要</span><span class="sxs-lookup"><span data-stu-id="85698-104">Executive Summary</span></span>
<span data-ttu-id="85698-105">過去幾年來，物聯網 (IoT)、替代能源和巨量資料已共同在公共事業和能源領域中創造龐大的機會。</span><span class="sxs-lookup"><span data-stu-id="85698-105">In the past few years, Internet of Things (IoT), alternative energy sources, and big data have merged to create vast opportunities in the utility and energy domain.</span></span> <span data-ttu-id="85698-106">在此同時，公共事業和整個能源工業看到用電量已失控，消費者急需更有效地控制能源用量。</span><span class="sxs-lookup"><span data-stu-id="85698-106">At the same time, the utility and the entire energy sector have seen consumption flattening out with consumers demanding better ways to control their use of energy.</span></span> <span data-ttu-id="85698-107">因此，公共事業和智慧電網公司本身極需改革與創新。</span><span class="sxs-lookup"><span data-stu-id="85698-107">Hence, the utility and smart grid companies are in great need to innovate and renew themselves.</span></span> <span data-ttu-id="85698-108">此外，許多電力和公共電網已經過時，維護和管理所費不貲。</span><span class="sxs-lookup"><span data-stu-id="85698-108">Furthermore, many power and utility grids are becoming outdated and very costly to maintain and manage.</span></span> <span data-ttu-id="85698-109">去年，本小組在能源領域內從事許多研究。</span><span class="sxs-lookup"><span data-stu-id="85698-109">During the last year, the team has been working on a number of engagements within the energy domain.</span></span> <span data-ttu-id="85698-110">在這些研究中，我們經常發現公共事業或 ISV (獨立軟體廠商) 一直在探索如何預測未來的能源需求。</span><span class="sxs-lookup"><span data-stu-id="85698-110">During these engagements, we have encountered many cases in which the utilities or ISVs (Independent Software Vendors) have been looking into forecasting for future energy demand.</span></span> <span data-ttu-id="85698-111">這些預測在其目前和未來的事業中扮演著重要角色，已成為不同使用案例的基礎。</span><span class="sxs-lookup"><span data-stu-id="85698-111">These forecasts play an important role in their current and future business and have become the foundation for various use cases.</span></span> <span data-ttu-id="85698-112">其中包括短期與長期的電力負載預測、交易、負載平衡、電網最佳化等。為了產生準確且可靠的預測，巨量資料和進階分析 (AA) 方法是關鍵因素，例如機器學習服務 (ML)。</span><span class="sxs-lookup"><span data-stu-id="85698-112">These include short and long-term power load forecast, trading, load balancing, grid optimization etc. Big data and Advanced Analytics (AA) methods such as Machine Learning (ML) are the key enablers for producing accurate and reliable forecasts.</span></span>  

<span data-ttu-id="85698-113">在本教戰守則中，我們結合商務和分析指導方針，以成功開發及部署能源需求預測解決方案。</span><span class="sxs-lookup"><span data-stu-id="85698-113">In this playbook, we put together the business and analytical guidelines needed for a successful development and deployment of energy demand forecast solution.</span></span> <span data-ttu-id="85698-114">這些建議的指導方針可協助公共事業、資料科學家和資料工程師建立全面運作、以雲端為基礎的需求預測解決方案。</span><span class="sxs-lookup"><span data-stu-id="85698-114">These proposed guidelines can help utilities, data scientists, and data engineers in establishing fully operationalized, cloud-based, demand-forecasting solutions.</span></span> <span data-ttu-id="85698-115">對於剛踏入巨量資料和進階分析領域的公司，這種解決方案就是長期智慧電源策略的菩提種子。</span><span class="sxs-lookup"><span data-stu-id="85698-115">For companies who are just starting their big data and advanced analytics journey, such a solution can represent the initial seed in their long-term smart grid strategy.</span></span>

> [!TIP]
> <span data-ttu-id="85698-116">若要下載此範本的架構概觀圖表，請參閱 [能源需求預測的 Cortana Intelligence 解決方案範本架構](cortana-analytics-architecture-demand-forecasting-energy.md)。</span><span class="sxs-lookup"><span data-stu-id="85698-116">To download a diagram that provides an architectural overview of this template, see [Cortana Intelligence Solution Template architecture for demand forecasting of energy](cortana-analytics-architecture-demand-forecasting-energy.md).</span></span>  
> 
> 

## <a name="overview"></a><span data-ttu-id="85698-117">Overview</span><span class="sxs-lookup"><span data-stu-id="85698-117">Overview</span></span>
<span data-ttu-id="85698-118">本文涵蓋使用 Cortana Intelligence (尤其是 Azure Machine Learning (AML)) 來實作與部署能源預測解決方案的商務、資料和技術層面。</span><span class="sxs-lookup"><span data-stu-id="85698-118">This document covers the business, data, and technical aspects of using Cortana Intelligence and in particular Azure Machine Learning (AML) for the implementation and deployment of Energy Forecasting Solutions.</span></span> <span data-ttu-id="85698-119">文件包含三個主要部分 ︰</span><span class="sxs-lookup"><span data-stu-id="85698-119">The document consists of three main parts:</span></span>  

1. <span data-ttu-id="85698-120">了解商務</span><span class="sxs-lookup"><span data-stu-id="85698-120">Business understanding</span></span>  
2. <span data-ttu-id="85698-121">了解資料</span><span class="sxs-lookup"><span data-stu-id="85698-121">Data understanding</span></span>  
3. <span data-ttu-id="85698-122">技術實作</span><span class="sxs-lookup"><span data-stu-id="85698-122">Technical implementation</span></span>

<span data-ttu-id="85698-123">「了解商務」  部分概述在進行投資決策之前需要了解及考慮的商務層面。</span><span class="sxs-lookup"><span data-stu-id="85698-123">The **Business Understanding** part outlines the business aspect one needs to understand and consider prior to making an investment decision.</span></span> <span data-ttu-id="85698-124">其中說明如何評估眼前的商務問題，以確保預測性分析和機器學習服務確實有效且可行。</span><span class="sxs-lookup"><span data-stu-id="85698-124">It explains how to qualify the business problem at hand to ensure that predictive analytics and machine learning are indeed effective and applicable.</span></span> <span data-ttu-id="85698-125">本文件進一步說明機器學習服務的基本概念及如何用來解決能源預測問題。</span><span class="sxs-lookup"><span data-stu-id="85698-125">The document further explains the basics of machine learning and how it is used to address energy-forecasting problems.</span></span> <span data-ttu-id="85698-126">其中概述使用案例的先決條件和檢定準則。</span><span class="sxs-lookup"><span data-stu-id="85698-126">It outlines the prerequisites and the qualification criteria of a use case.</span></span> <span data-ttu-id="85698-127">另外也提供一些範例使用案例和商務案例。</span><span class="sxs-lookup"><span data-stu-id="85698-127">Some sample use cases and business case scenarios are also provided.</span></span>

<span data-ttu-id="85698-128">資料是任何機器學習服務解決方案的主要成分。</span><span class="sxs-lookup"><span data-stu-id="85698-128">Data is the main ingredient for any machine learning solution.</span></span> <span data-ttu-id="85698-129">本文件的「了解資料」  部分涵蓋一些重要的資料層面。</span><span class="sxs-lookup"><span data-stu-id="85698-129">The **Data Understanding** part of this document covers some important aspects of the data.</span></span> <span data-ttu-id="85698-130">其中概述能源預測所需的資料種類、資料品質需求，以及通常存在的資料來源。</span><span class="sxs-lookup"><span data-stu-id="85698-130">It outlines the kind of data that is needed for energy forecasting, data quality requirements, and what data sources typically exist.</span></span> <span data-ttu-id="85698-131">我們也會說明如何使用原始資料，以備妥實際主導模型化部分的資料特徵。</span><span class="sxs-lookup"><span data-stu-id="85698-131">We also explain how the raw data is used to prepare data features that actually drive the modeling part.</span></span>

<span data-ttu-id="85698-132">本文件的第三個部分涵蓋解決方案的「技術實作」  層面。</span><span class="sxs-lookup"><span data-stu-id="85698-132">The third part of the document covers the **Technical Implementation** aspect of a solution.</span></span> <span data-ttu-id="85698-133">特徵工程設計和模型化是資料科學程序的核心，因此會更詳細討論。</span><span class="sxs-lookup"><span data-stu-id="85698-133">Feature engineering and modeling are at the core of the data science process and are therefore being discussed in some detail.</span></span> <span data-ttu-id="85698-134">其中涵蓋 Web 服務的概念，在預測性分析解決方案的雲端部署方面，這些是很重要的機制。</span><span class="sxs-lookup"><span data-stu-id="85698-134">It covers the concept of web services, which are an important vehicle for cloud deployment of predictive analytics solutions.</span></span> <span data-ttu-id="85698-135">我們也會概述端對端運作解決方案的一般架構。</span><span class="sxs-lookup"><span data-stu-id="85698-135">We also outline a typical architecture of an end-to-end operationalized solution.</span></span>

<span data-ttu-id="85698-136">此外，本文件還包含參考資料，幫助您進一步了解這個領域和技術。</span><span class="sxs-lookup"><span data-stu-id="85698-136">In addition, the document includes reference material that you can use to gain further understanding of the domain and technology.</span></span>

<span data-ttu-id="85698-137">請務必注意，本文件不涵蓋深奧的資料科學程序，及其數學和技術層面。</span><span class="sxs-lookup"><span data-stu-id="85698-137">It is important to note that we do not intend to cover in this document the deeper data science process, its mathematical and technical aspects.</span></span> <span data-ttu-id="85698-138">您可以在 [Azure ML 文件](http://azure.microsoft.com/services/machine-learning/)和[部落格](http://blogs.microsoft.com/blog/tag/azure-machine-learning/)找到這些詳細資料。</span><span class="sxs-lookup"><span data-stu-id="85698-138">These details can be found in [Azure ML documentation](http://azure.microsoft.com/services/machine-learning/) and [blogs](http://blogs.microsoft.com/blog/tag/azure-machine-learning/).</span></span>

### <a name="target-audience"></a><span data-ttu-id="85698-139">目標對象</span><span class="sxs-lookup"><span data-stu-id="85698-139">Target Audience</span></span>
<span data-ttu-id="85698-140">本文件以商業和技術人員為目標對象，幫助他們認識和了解機器學習服務解決方案，及其在能源預測領域內的具體運用情形。</span><span class="sxs-lookup"><span data-stu-id="85698-140">The target audience for this document is both business and technical personnel who would like to gain knowledge and understanding of Machine Learning based solutions and how these are being used specifically within the energy-forecasting domain.</span></span>

<span data-ttu-id="85698-141">本文件也有益於資料科學家深入了解主導能源預測解決方案部署的高階程序。</span><span class="sxs-lookup"><span data-stu-id="85698-141">Data scientists can also benefit from reading this document to gain a better understanding of the high level process that drives the deployment of an energy forecasting solution.</span></span> <span data-ttu-id="85698-142">就這方面而言，本文件也能為閱讀更詳細和進階的資料打下扎實的基礎和發出點。</span><span class="sxs-lookup"><span data-stu-id="85698-142">In this context it can also be used to establish a good baseline and starting point for more detailed and advanced material.</span></span>

### <a name="industry-trends"></a><span data-ttu-id="85698-143">產業趨勢</span><span class="sxs-lookup"><span data-stu-id="85698-143">Industry Trends</span></span>
<span data-ttu-id="85698-144">過去幾年來，IoT、替代能源和巨量資料已共同在公共事業和能源領域中創造龐大的機會。</span><span class="sxs-lookup"><span data-stu-id="85698-144">In the past few years, IoT, alternative energy sources, and big data have merged to create vast opportunities in the utility and energy space.</span></span> <span data-ttu-id="85698-145">在此同時，公共事業和整個能源工業看到用電量已失控，消費者急需更有效地控制能源用量。</span><span class="sxs-lookup"><span data-stu-id="85698-145">At the same time, the utility and the entire energy sectors have seen consumption flattening out with consumers demanding better ways to control their use of energy.</span></span>

<span data-ttu-id="85698-146">許多公共事業和智慧能源公司都在研發 [智慧電網](https://en.wikipedia.org/wiki/Smart_grid) ，利用電網所產生的資料來部署使用一些案例。</span><span class="sxs-lookup"><span data-stu-id="85698-146">Many utility and smart energy companies have been pioneering the [smart grid](https://en.wikipedia.org/wiki/Smart_grid) by deploying a number of use cases that make use of the data generated by the grid.</span></span> <span data-ttu-id="85698-147">許多使用案例脫離不了發電的固有特性 ︰無法累積也無法貯藏。</span><span class="sxs-lookup"><span data-stu-id="85698-147">Many use cases revolve around the inherent characteristics of electricity production: it cannot be accumulated nor stored aside as inventory.</span></span> <span data-ttu-id="85698-148">因此，生產出來就必須用掉，別無選擇。</span><span class="sxs-lookup"><span data-stu-id="85698-148">So, what is produced must be used.</span></span> <span data-ttu-id="85698-149">公共事業想要變得更有效率必須預測的用電量，理由很簡單，因為如此才更能**平衡供需**，以避免浪費能源、**減少溫室氣體排放**及控制成本。</span><span class="sxs-lookup"><span data-stu-id="85698-149">Utilities that want to become more efficient need to forecast power consumption simply because that will give them greater ability to **balance supply and demand**, thus preventing energy wastage, **reduce greenhouse gas emission**, and control cost.</span></span>

<span data-ttu-id="85698-150">提到成本時，還有另一個重點，就是價格。</span><span class="sxs-lookup"><span data-stu-id="85698-150">When talking of costs, there is another important aspect, which is price.</span></span> <span data-ttu-id="85698-151">公共事業之間電力交易的新業務導致更需要預測未來的電力需求和價格 。</span><span class="sxs-lookup"><span data-stu-id="85698-151">New abilities to trade power between utilities have brought in a great need to **forecast future demand and future price of electricity**.</span></span> <span data-ttu-id="85698-152">這有助於公司決定他們的產量。</span><span class="sxs-lookup"><span data-stu-id="85698-152">This can help companies determine their production volumes.</span></span>

<span data-ttu-id="85698-153">我們提到「智慧」這個詞時，實際是指可學習並進行預測的電網。</span><span class="sxs-lookup"><span data-stu-id="85698-153">When we use the word 'smart', we actually refer to a grid that can learn and then make predictions.</span></span> <span data-ttu-id="85698-154">它可以預測季節性的用電量變化，以及預知暫時性超載情況並自動調整 。</span><span class="sxs-lookup"><span data-stu-id="85698-154">It can anticipate seasonal changes in consumption as well as **foresee temporary overload situations and automatically adjust for it**.</span></span> <span data-ttu-id="85698-155">藉由從遠端調節用電量 (借助這些智慧型電表)，就可以處理地區性超載情況。</span><span class="sxs-lookup"><span data-stu-id="85698-155">By remotely regulating consumption (with the help of these smart meters), localized overload situations can be handled.</span></span> <span data-ttu-id="85698-156">電網會先預測再行動，隨著時間而變得越來越聰明。</span><span class="sxs-lookup"><span data-stu-id="85698-156">**By first predicting and then acting**, the grid makes itself smarter over time.</span></span>

<span data-ttu-id="85698-157">本文件的其餘部分著重於一系列特定的使用案例，涵蓋預測未來、短期和長期的能源需求。</span><span class="sxs-lookup"><span data-stu-id="85698-157">For the rest of this document we will focus on a specific family of use cases that cover forecasting of future, short term, and long-term energy demand.</span></span> <span data-ttu-id="85698-158">數個月來我們一直努力於這些領域，已獲得一些知識和技能，能夠產生工業級的結果。</span><span class="sxs-lookup"><span data-stu-id="85698-158">We have been working in these areas for a few months and have gained some knowledge and skill that allow us to produce industry grade results.</span></span> <span data-ttu-id="85698-159">不久的未來，本文件也會涵蓋其他使用案例。</span><span class="sxs-lookup"><span data-stu-id="85698-159">Other use cases will be covered as well in the document in the near future.</span></span>

## <a name="business-understanding"></a><span data-ttu-id="85698-160">了解商務</span><span class="sxs-lookup"><span data-stu-id="85698-160">Business Understanding</span></span>
### <a name="business-goals"></a><span data-ttu-id="85698-161">商務目標</span><span class="sxs-lookup"><span data-stu-id="85698-161">Business Goals</span></span>
<span data-ttu-id="85698-162">「能源示範」  目的在於示範可在極短時間內部署的一般預測性分析和機器學習服務解決方案。</span><span class="sxs-lookup"><span data-stu-id="85698-162">The **Energy Demo** goal is to demonstrate a typical predictive analytics and machine learning solution that can be deployed in a very short time frame.</span></span> <span data-ttu-id="85698-163">具體來說，我們目前的焦點是推動能源需求預測解決方案，以快速實現並運用其商業價值。</span><span class="sxs-lookup"><span data-stu-id="85698-163">Specifically, our current focus is on enabling energy demand forecast solutions so that its business value can be quickly realized and leveraged upon.</span></span> <span data-ttu-id="85698-164">本教戰守則中的資訊可協助客戶達成下列目標︰</span><span class="sxs-lookup"><span data-stu-id="85698-164">The information in this playbook can help the customer accomplishing the following goals:</span></span>

* <span data-ttu-id="85698-165">加速機器學習服務解決方案的價值實現</span><span class="sxs-lookup"><span data-stu-id="85698-165">Short time to value of machine learning based solution</span></span>
* <span data-ttu-id="85698-166">能夠根據其商務需求，將試驗性使用案例擴展到其他使用案例或更廣的範圍</span><span class="sxs-lookup"><span data-stu-id="85698-166">Ability to expand a pilot use case to other use cases or to a broader scope based on their business need</span></span>
* <span data-ttu-id="85698-167">快速獲得 Cortana Intelligence Suite 產品知識</span><span class="sxs-lookup"><span data-stu-id="85698-167">Quickly gain Cortana Intelligence Suite product knowledge</span></span>

<span data-ttu-id="85698-168">本教戰守則謹記這些目標，希望提供商務和技術知識來協助達成這些目標。</span><span class="sxs-lookup"><span data-stu-id="85698-168">With these goals in mind, this playbook aims at delivering the business and technical knowledge that will assist in achieving these goals.</span></span>

### <a name="power-load-and-demand-forecasting"></a><span data-ttu-id="85698-169">電力負載和需求預測</span><span class="sxs-lookup"><span data-stu-id="85698-169">Power Load and Demand Forecasting</span></span>
<span data-ttu-id="85698-170">在能源產業內，需求預測在許多方面可協助解決危急的商業問題。</span><span class="sxs-lookup"><span data-stu-id="85698-170">Within the energy sector, there could be many ways in which demand forecasting can help solve critical business problems.</span></span> <span data-ttu-id="85698-171">事實上，需求預測可視為產業中許多核心使用案例的基礎。</span><span class="sxs-lookup"><span data-stu-id="85698-171">In fact, demand forecasting can be considered the foundation for many core use cases in the industry.</span></span> <span data-ttu-id="85698-172">一般而言，我們會考慮兩種能源需求預測︰短期和長期。</span><span class="sxs-lookup"><span data-stu-id="85698-172">In general, we consider two types of energy demand forecasts: short term and long term.</span></span> <span data-ttu-id="85698-173">各有不同的用途並採用不同的方法。</span><span class="sxs-lookup"><span data-stu-id="85698-173">Each one may serve a different purpose and utilize a different approach.</span></span> <span data-ttu-id="85698-174">兩者的主要差異在於預測範圍，也就是可預測的未來時間範圍。</span><span class="sxs-lookup"><span data-stu-id="85698-174">The main difference between the two is the forecasting horizon, meaning the range of time into the future for which we would forecast.</span></span>

#### <a name="short-term-load-forecasting"></a><span data-ttu-id="85698-175">短期負載預測</span><span class="sxs-lookup"><span data-stu-id="85698-175">Short Term Load Forecasting</span></span>
<span data-ttu-id="85698-176">在能源需求方面，短期負載預測 (STLF) 定義為對電網各部分 (或整個電網) 預測不久將來的總體負載。</span><span class="sxs-lookup"><span data-stu-id="85698-176">Within the context of energy demand, Short Term Load Forecasting (STLF) is defined as the aggregated load that is forecasted in the near future on various parts of the grid (or the grid as a whole).</span></span> <span data-ttu-id="85698-177">在此，短期定義為 1 小時到 24 小時範圍內的時間範圍。</span><span class="sxs-lookup"><span data-stu-id="85698-177">In this context, short term is defined to be time horizon within the range of 1 hour to 24 hours.</span></span> <span data-ttu-id="85698-178">在某些情況下，範圍也可能長達 48 小時。</span><span class="sxs-lookup"><span data-stu-id="85698-178">In some cases, a horizon of 48 hours is also possible.</span></span> <span data-ttu-id="85698-179">因此，STLF 在電網的運作使用案例中很常見。</span><span class="sxs-lookup"><span data-stu-id="85698-179">Therefore, STLF is very common in an operational use case of the grid.</span></span> <span data-ttu-id="85698-180">以下是 STLF 導向的使用案例的一些例子：</span><span class="sxs-lookup"><span data-stu-id="85698-180">Here are some examples of STLF driven use cases:</span></span>

* <span data-ttu-id="85698-181">供需平衡</span><span class="sxs-lookup"><span data-stu-id="85698-181">Supply and demand balancing</span></span>
* <span data-ttu-id="85698-182">電力交易支援</span><span class="sxs-lookup"><span data-stu-id="85698-182">Power trading support</span></span>
* <span data-ttu-id="85698-183">造市 (訂定電價)</span><span class="sxs-lookup"><span data-stu-id="85698-183">Market making (setting power price)</span></span>
* <span data-ttu-id="85698-184">電網運作最佳化</span><span class="sxs-lookup"><span data-stu-id="85698-184">Grid operational optimization</span></span>
* [<span data-ttu-id="85698-185">需求回應</span><span class="sxs-lookup"><span data-stu-id="85698-185">Demand response</span></span>](https://en.wikipedia.org/wiki/Demand_response)
* <span data-ttu-id="85698-186">尖峰需求預測</span><span class="sxs-lookup"><span data-stu-id="85698-186">Peak demand forecasting</span></span>
* <span data-ttu-id="85698-187">需求面管理</span><span class="sxs-lookup"><span data-stu-id="85698-187">Demand side management</span></span>
* <span data-ttu-id="85698-188">負載平衡和預防超載</span><span class="sxs-lookup"><span data-stu-id="85698-188">Load balancing and overload prevention</span></span>
* <span data-ttu-id="85698-189">長期負載預測</span><span class="sxs-lookup"><span data-stu-id="85698-189">Long Term Load Forecasting</span></span>
* <span data-ttu-id="85698-190">故障和異常偵測</span><span class="sxs-lookup"><span data-stu-id="85698-190">Fault and anomaly detection</span></span>
* <span data-ttu-id="85698-191">尖峰限電/調節</span><span class="sxs-lookup"><span data-stu-id="85698-191">Peak curtailment/leveling</span></span> 

<span data-ttu-id="85698-192">STLF 模型大多根據最近 (昨天或上週) 的用電量資料，並以預測溫度作為重要的預測因子。</span><span class="sxs-lookup"><span data-stu-id="85698-192">STLF model are mostly based on the near past (last day or week) consumption data and use forecasted temperature as an important predictor.</span></span> <span data-ttu-id="85698-193">現在，取得未來一小時甚至 24 小時的準確溫度預測並不困難。</span><span class="sxs-lookup"><span data-stu-id="85698-193">Obtaining accurate temperature forecast for the next hour and up to 24 hours is becoming less of a challenge now days.</span></span> <span data-ttu-id="85698-194">這些模型較不易受到季節性模式或長期用電量趨勢所影響。</span><span class="sxs-lookup"><span data-stu-id="85698-194">These models are less sensitive to seasonal patterns or long-term consumption trends.</span></span>

<span data-ttu-id="85698-195">SLTF 解決方案也可能引起大量的預測呼叫 (服務要求)，因為每小時就要引用一次，在某些情況下甚至更頻繁。</span><span class="sxs-lookup"><span data-stu-id="85698-195">SLTF solutions are also likely to generate high volume of prediction calls (service requests) since they are being invoked on an hourly basis and in some cases even with higher frequency.</span></span> <span data-ttu-id="85698-196">也常見到機房中每個變電站或變壓器都是獨立模型，因此預測要求量甚至更高。</span><span class="sxs-lookup"><span data-stu-id="85698-196">It is also very common to see implantation where each individual substation or transformer is represented as a standalone model and therefore the volume of prediction requests are even greater.</span></span>

#### <a name="long-term-load-forecasting"></a><span data-ttu-id="85698-197">長期負載預測</span><span class="sxs-lookup"><span data-stu-id="85698-197">Long Term Load Forecasting</span></span>
<span data-ttu-id="85698-198">長期負載預測 (LTLF) 的目標是預測時間範圍從 1 週到數個月的電力需求 (在某些情況下可能是許多年)。</span><span class="sxs-lookup"><span data-stu-id="85698-198">The goal of Long Term Load Forecasting (LTLF) is to forecast power demand with a time horizon ranging from 1 week to multiple months (and in some cases for a number of years).</span></span> <span data-ttu-id="85698-199">此時間範圍最適用於規劃和投資使用案例。</span><span class="sxs-lookup"><span data-stu-id="85698-199">This range of horizon is mostly applicable for planning and investment use cases.</span></span>

<span data-ttu-id="85698-200">在長期情況下，需要有涵蓋多年 (至少 3 年) 的高品質資料。</span><span class="sxs-lookup"><span data-stu-id="85698-200">For long-term scenarios, it is important to have high quality data that covers a span of multiple years (minimum 3 years).</span></span> <span data-ttu-id="85698-201">這些模型通常會從歷史資料中萃取出季節性模式，並利用外部預測因子，例如天氣和氣候模式。</span><span class="sxs-lookup"><span data-stu-id="85698-201">These models will typically extract seasonality patterns from the historical data and make use of external predicators such as weather and climate patterns.</span></span>

<span data-ttu-id="85698-202">必須澄清，預測時間越長，預測越不準確。</span><span class="sxs-lookup"><span data-stu-id="85698-202">It is important to clarify that the longer the forecasting horizon is, the less accurate the forecast may be.</span></span> <span data-ttu-id="85698-203">因此，除了實際預測，還必須產生一些信賴區間，以利用於規劃過程中考慮到可能的變異。</span><span class="sxs-lookup"><span data-stu-id="85698-203">It is therefore important to produce some confidence intervals along with the actual forecast that would allow humans to factor the possible variation into their planning process.</span></span>

<span data-ttu-id="85698-204">由於 LTLF 的用電量案例大多用於規劃，預測量必然很低 (相較於 STLF)。</span><span class="sxs-lookup"><span data-stu-id="85698-204">Since the consumption scenario for LTLF is mostly planning, we can expect much lower prediction volumes (as compared to STLF).</span></span> <span data-ttu-id="85698-205">我們通常會看到這些預測內嵌至視覺化工具中，例如 Excel 或 PowerBI，並由使用者手動引用。</span><span class="sxs-lookup"><span data-stu-id="85698-205">We would typically see these predictions embedded into visualization tools such as Excel or PowerBI and be invoked manually by the user.</span></span>

### <a name="short-term-vs-long-term-prediction"></a><span data-ttu-id="85698-206">短期與長期預測</span><span class="sxs-lookup"><span data-stu-id="85698-206">Short Term vs. Long Term Prediction</span></span>
<span data-ttu-id="85698-207">下表比較 STLF 和 LTLF 的最重要屬性︰</span><span class="sxs-lookup"><span data-stu-id="85698-207">The following table compares STLF and LTLF in respect to the most important attributes:</span></span>

| <span data-ttu-id="85698-208">屬性</span><span class="sxs-lookup"><span data-stu-id="85698-208">Attribute</span></span> | <span data-ttu-id="85698-209">短期負載預測</span><span class="sxs-lookup"><span data-stu-id="85698-209">Short Term Load Forecast</span></span> | <span data-ttu-id="85698-210">長期負載預測</span><span class="sxs-lookup"><span data-stu-id="85698-210">Long Term Load Forecast</span></span> |
| --- | --- | --- |
| <span data-ttu-id="85698-211">預測時間範圍</span><span class="sxs-lookup"><span data-stu-id="85698-211">Forecast Horizon</span></span> |<span data-ttu-id="85698-212">從 1 小時到 48 小時</span><span class="sxs-lookup"><span data-stu-id="85698-212">From 1 hour to 48 hours</span></span> |<span data-ttu-id="85698-213">從 1 個月到 6 個月以上</span><span class="sxs-lookup"><span data-stu-id="85698-213">From 1 to 6 months or more</span></span> |
| <span data-ttu-id="85698-214">資料細微度</span><span class="sxs-lookup"><span data-stu-id="85698-214">Data granularity</span></span> |<span data-ttu-id="85698-215">每小時</span><span class="sxs-lookup"><span data-stu-id="85698-215">Hourly</span></span> |<span data-ttu-id="85698-216">每小時或每日</span><span class="sxs-lookup"><span data-stu-id="85698-216">Hourly or daily</span></span> |
| <span data-ttu-id="85698-217">一般使用案例</span><span class="sxs-lookup"><span data-stu-id="85698-217">Typical use cases</span></span> |<ul><li><span data-ttu-id="85698-218">供需平衡</span><span class="sxs-lookup"><span data-stu-id="85698-218">Demand/Supply balancing</span></span></li><li><span data-ttu-id="85698-219">尖峰時間預測</span><span class="sxs-lookup"><span data-stu-id="85698-219">Pick hour forecasting</span></span></li><li><span data-ttu-id="85698-220">需求回應</span><span class="sxs-lookup"><span data-stu-id="85698-220">Demand response</span></span></li></ul> |<ul><li><span data-ttu-id="85698-221">長期規劃</span><span class="sxs-lookup"><span data-stu-id="85698-221">Long term planning</span></span></li><li><span data-ttu-id="85698-222">電網資產規劃</span><span class="sxs-lookup"><span data-stu-id="85698-222">Grid assets planning</span></span></li><li><span data-ttu-id="85698-223">資源規劃</span><span class="sxs-lookup"><span data-stu-id="85698-223">Resource planning</span></span></li></ul> |
| <span data-ttu-id="85698-224">一般預測因子</span><span class="sxs-lookup"><span data-stu-id="85698-224">Typical predictors</span></span> |<ul><li><span data-ttu-id="85698-225">日或週</span><span class="sxs-lookup"><span data-stu-id="85698-225">Day or week</span></span></li><li><span data-ttu-id="85698-226">時</span><span class="sxs-lookup"><span data-stu-id="85698-226">Hour of day</span></span></li><li><span data-ttu-id="85698-227">每小時溫度</span><span class="sxs-lookup"><span data-stu-id="85698-227">Hourly temperature</span></span></li></ul> |<ul><li><span data-ttu-id="85698-228">月</span><span class="sxs-lookup"><span data-stu-id="85698-228">Month of year</span></span></li><li><span data-ttu-id="85698-229">日</span><span class="sxs-lookup"><span data-stu-id="85698-229">Day of month</span></span></li><li><span data-ttu-id="85698-230">長期溫度和氣候</span><span class="sxs-lookup"><span data-stu-id="85698-230">Long term temperature and climate</span></span></li></ul> |
| <span data-ttu-id="85698-231">歷史資料範圍</span><span class="sxs-lookup"><span data-stu-id="85698-231">Historical data range</span></span> |<span data-ttu-id="85698-232">二至三年份的資料</span><span class="sxs-lookup"><span data-stu-id="85698-232">Two to three years' worth of data</span></span> |<span data-ttu-id="85698-233">五至 10 年份的資料</span><span class="sxs-lookup"><span data-stu-id="85698-233">Five to 10 years' worth of data</span></span> |
| <span data-ttu-id="85698-234">一般精確度</span><span class="sxs-lookup"><span data-stu-id="85698-234">Typical accuracy</span></span> |<span data-ttu-id="85698-235">5% 或更低的 MAPE*</span><span class="sxs-lookup"><span data-stu-id="85698-235">MAPE* of 5% or lower</span></span> |<span data-ttu-id="85698-236">25% 或更低的 MAPE*</span><span class="sxs-lookup"><span data-stu-id="85698-236">MAPE* of 25% or lower</span></span> |
| <span data-ttu-id="85698-237">預測頻率</span><span class="sxs-lookup"><span data-stu-id="85698-237">Forecast frequency</span></span> |<span data-ttu-id="85698-238">每小時或每 24 小時產生一次</span><span class="sxs-lookup"><span data-stu-id="85698-238">Produced every hour or every 24 hours</span></span> |<span data-ttu-id="85698-239">每月、每季或每年產生一次</span><span class="sxs-lookup"><span data-stu-id="85698-239">Produced once monthly, quarterly or yearly</span></span> |

<span data-ttu-id="85698-240">\*[MAPE](https://en.wikipedia.org/wiki/Mean_absolute_percentage_error) – 百分比錯誤平均數</span><span class="sxs-lookup"><span data-stu-id="85698-240">\*[MAPE](https://en.wikipedia.org/wiki/Mean_absolute_percentage_error) – Mean Average Percent Error</span></span>

<span data-ttu-id="85698-241">從這個表格可以看出，區別短期和長期預測案例相當重要，因為這些各代表不同的商務需求，可能會有不同的部署和用電模式。</span><span class="sxs-lookup"><span data-stu-id="85698-241">As can be seen from this table, it is quite important to distinguish between the short and the long term forecasting scenarios as these represent different business needs and may have different deployment and consumption patterns.</span></span>

### <a name="example-use-case-1-esmart-systems--overload-optimization"></a><span data-ttu-id="85698-242">範例使用案例 1：Esmart Systems – 超載最佳化</span><span class="sxs-lookup"><span data-stu-id="85698-242">Example Use Case 1: eSmart Systems – Overload optimization</span></span>
<span data-ttu-id="85698-243">[智慧電網](https://en.wikipedia.org/wiki/Smart_grid) 是一個重要角色是隨著不斷變化的用電模式，而動態和持續地最佳化並調整。</span><span class="sxs-lookup"><span data-stu-id="85698-243">An important role of a [smart grid](https://en.wikipedia.org/wiki/Smart_grid) is to dynamically and constantly optimize and adjust for the changing consumption patterns.</span></span> <span data-ttu-id="85698-244">用電量可能受到短期變化所影響，主要是溫度變動所造成 (例如，空調或暖氣的用電增加)。</span><span class="sxs-lookup"><span data-stu-id="85698-244">Power consumption can be impacted by short-term changes that are mainly caused by temperature fluctuations (*e.g.*, more power is used for air condition or heating).</span></span> <span data-ttu-id="85698-245">同時，用電量也會受到長期趨勢所影響。</span><span class="sxs-lookup"><span data-stu-id="85698-245">At the same time, power consumption is also influenced by long-term trends.</span></span> <span data-ttu-id="85698-246">其中包括季節性效應、國定假日、長期用電量成長，甚至是經濟因素，例如消費者指數、石油價格和 GDP。</span><span class="sxs-lookup"><span data-stu-id="85698-246">These may include seasonality effects, national holidays, long-term consumption growth, and even economic factors such as consumer index, oil price, and GDP.</span></span>

<span data-ttu-id="85698-247">在此使用案例中， [eSmart](http://www.esmartsystems.com/) 想要部署以雲端為基礎的解決方案，以預測電網的任何給定變電站發生超載情況的傾向。</span><span class="sxs-lookup"><span data-stu-id="85698-247">In this use case, [eSmart](http://www.esmartsystems.com/) wanted to deploy a cloud-based solution that enables predicting the propensity of an overload situation on any given substation of the grid.</span></span> <span data-ttu-id="85698-248">特別是的，eSmart 希望找出下一個小時可能超載的變電站，以立即採取動作來避免或解決這種情況。</span><span class="sxs-lookup"><span data-stu-id="85698-248">In particular, eSmart wanted to identify substations that are likely to overload within the next hour, so an immediate action could be taken to avoid or resolve that situation.</span></span>

<span data-ttu-id="85698-249">為了精確和快速預測，必須實作三種預測模型︰</span><span class="sxs-lookup"><span data-stu-id="85698-249">An accurate and fast performing prediction requires implementation of three predictive models:</span></span>

* <span data-ttu-id="85698-250">可預測每個變電站未來幾週或幾個月用電量的長期模型</span><span class="sxs-lookup"><span data-stu-id="85698-250">Long term model that enables forecasting of power consumption on each substation during the next few weeks or months</span></span>
* <span data-ttu-id="85698-251">可預測給定變電站在下一個小時發生超載情況的短期模型</span><span class="sxs-lookup"><span data-stu-id="85698-251">Short term model that enables prediction of overload situation on a given substation during the next hour</span></span>
* <span data-ttu-id="85698-252">在多個案例上提供未來溫度預測的溫度模型</span><span class="sxs-lookup"><span data-stu-id="85698-252">Temperature model that provides forecasting of future temperature over multiple scenarios</span></span>

<span data-ttu-id="85698-253">長期模型的目標是依下一週或下個月的超載傾向將變電站排名 (根據其電力輸送能力)。</span><span class="sxs-lookup"><span data-stu-id="85698-253">The objective of the long-term model is to rank the substations by their propensity to overload (given their power transmission capacity) during the next week or month.</span></span> <span data-ttu-id="85698-254">這樣可建立一份變電站初步名單，作為短期預測的輸入。</span><span class="sxs-lookup"><span data-stu-id="85698-254">This allows the creation of a short list of substations that would serve as an input for the short-term prediction.</span></span> <span data-ttu-id="85698-255">因為溫度是長期模型的重要預測因子，需要不斷產生多重案例的溫度預測，並輸入到長期模型中。</span><span class="sxs-lookup"><span data-stu-id="85698-255">As temperature is an important predictor for the long-term model, there is a need to constantly produce multi-scenario temperature forecasts and feed them as input into to the long-term model.</span></span> <span data-ttu-id="85698-256">接著叫用短期預測，以預測下一個小時可能超載的變電站。</span><span class="sxs-lookup"><span data-stu-id="85698-256">The short term forecast is then invoked to predict which substation is likely to overload over the next hour.</span></span>

<span data-ttu-id="85698-257">每個變電站個別地部署短期和長期模型。</span><span class="sxs-lookup"><span data-stu-id="85698-257">The short-term and long-term models are deployed individually per each substation.</span></span> <span data-ttu-id="85698-258">因此，實際執行這些模型需要大量的協調流程。</span><span class="sxs-lookup"><span data-stu-id="85698-258">Therefore, the practical execution of these models requires extensive orchestration.</span></span> <span data-ttu-id="85698-259">為了在短期內獲得更高的預測精確度，有更細微的模型專用於一天的每個小時。</span><span class="sxs-lookup"><span data-stu-id="85698-259">To gain higher prediction accuracy in the short term, a more granular model is dedicated for each hour of the day.</span></span> <span data-ttu-id="85698-260">所有這些模型每個小時都執行，並在幾分鐘內執行完畢，以便有充裕的時間來回應，並視需要採取預防動作。</span><span class="sxs-lookup"><span data-stu-id="85698-260">All these models are executed every hour and finish execution within a few minutes to allow sufficient time to respond and take preventive actions if needed.</span></span> <span data-ttu-id="85698-261">這組模型定期以最新資料重新訓練，隨時保持在最新狀態。</span><span class="sxs-lookup"><span data-stu-id="85698-261">This collection of models is kept up-to-date by periodical retraining using the most recent data.</span></span>

<span data-ttu-id="85698-262">[這裡](https://customers.microsoft.com/Pages/CustomerStory.aspx?recid=18945)提供此使用案例的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="85698-262">More information about this use case can be found [here](https://customers.microsoft.com/Pages/CustomerStory.aspx?recid=18945).</span></span>

#### <a name="use-case-qualification-criteria--prerequisites"></a><span data-ttu-id="85698-263">使用案例檢定準則 – 必要條件</span><span class="sxs-lookup"><span data-stu-id="85698-263">Use Case Qualification Criteria – Prerequisites</span></span>
<span data-ttu-id="85698-264">Cortana Intelligence 的真正威力在於有強大的能力部署及調整以機器學習服務為中心的解決方案。</span><span class="sxs-lookup"><span data-stu-id="85698-264">The main strength of Cortana Intelligence is in its powerful ability to deploy and scale machine learning centric solutions.</span></span> <span data-ttu-id="85698-265">目的是支援數以千計同時執行的預測。</span><span class="sxs-lookup"><span data-stu-id="85698-265">It is designed to support thousands of predictions that are executed concurrently.</span></span> <span data-ttu-id="85698-266">它可以自動調整規模以符合不斷變化的用電模式。</span><span class="sxs-lookup"><span data-stu-id="85698-266">It can automatically scale to meet a changing consumption pattern.</span></span> <span data-ttu-id="85698-267">因此，解決方案的重點是精確度和運算效能。</span><span class="sxs-lookup"><span data-stu-id="85698-267">A solution's focus therefore, is on accuracy and computational performance.</span></span> <span data-ttu-id="85698-268">例如，公共事業公司的興趣是為下一個小時及一天中每個小時產生精確的能源需求預測。</span><span class="sxs-lookup"><span data-stu-id="85698-268">For example, a utility company is interested in producing accurate energy demand forecast for the next hour, and for each hour of the day.</span></span> <span data-ttu-id="85698-269">相反地，我們較沒興趣回答為何預測出如此需求的這種問題 (這是由模型本身來處理)。</span><span class="sxs-lookup"><span data-stu-id="85698-269">On the other hand, we are less interested in answering the question of why the demand is predicted to be as it is (the model itself will take care of that).</span></span>

<span data-ttu-id="85698-270">因此，必須了解，並非所有使用案例和商務問題都能利用機器學習服務來有效解決。</span><span class="sxs-lookup"><span data-stu-id="85698-270">It is therefore important to realize that not all use cases and business problems can be effectively solved using machine learning.</span></span>

<span data-ttu-id="85698-271">只要符合下列條件，Cortana Intelligence 和機器學習服務可以很有效地解決特定的商務問題︰</span><span class="sxs-lookup"><span data-stu-id="85698-271">Cortana Intelligence and machine learning could be highly effective in solving a given business problem when the following criteria are met:</span></span>

* <span data-ttu-id="85698-272">眼前的商務問題在本質上有預測性  。</span><span class="sxs-lookup"><span data-stu-id="85698-272">The business problem in hand is **predictive** in nature.</span></span> <span data-ttu-id="85698-273">例如，一家公共事業公司想要預測給定變電站下一個小時內的電源負載，這就是預測性使用案例。</span><span class="sxs-lookup"><span data-stu-id="85698-273">A predictive use case example is a utility company that would like to predict power load on a given substation during the next hour.</span></span> <span data-ttu-id="85698-274">相反地，分析和排名歷史需求的驅動因素在本質上是描述性  ，因此較不適用。</span><span class="sxs-lookup"><span data-stu-id="85698-274">On the other hand, analyzing and ranking drivers of historical demand would be **descriptive** in nature and therefore less applicable.</span></span>
* <span data-ttu-id="85698-275">一旦獲得預測，就能採取明確的動作途徑  。</span><span class="sxs-lookup"><span data-stu-id="85698-275">There is a clear **path of action** to be taken once the prediction is available.</span></span> <span data-ttu-id="85698-276">例如，預測變電站下一個小時超載可以觸發積極的行動，降低該變電站的相關負載，因而避免可能發生的超載。</span><span class="sxs-lookup"><span data-stu-id="85698-276">For example, predicting an overload on a substation during the next hour can trigger a proactive action of reducing load that is associated with that substation and thus potentially preventing an overload.</span></span>
* <span data-ttu-id="85698-277">此使用案例代表典型的問題  ，只要解決它，就能輕鬆解決其他類似的使用案例。</span><span class="sxs-lookup"><span data-stu-id="85698-277">The use case represents a **typical type of problem** such that when solved it can pave the way to solving other similar use cases.</span></span>
* <span data-ttu-id="85698-278">客戶可以設定量化和質化目標  ，以示範成功的解決方案實作。</span><span class="sxs-lookup"><span data-stu-id="85698-278">The customer can set **quantitative and qualitative goals** to demonstrate a successful solution implementation.</span></span> <span data-ttu-id="85698-279">比方說，必要的精確度臨界值 (例如，最高容許 5% 的錯誤)，或在預測變電站超載時，精確度 (真肯定率) 和回溯 (真肯定的程度) 應超過指定的臨界值，都是能源需求預測的良好量化目標。</span><span class="sxs-lookup"><span data-stu-id="85698-279">For example, a good quantitative goal for energy demand forecast would be the required accuracy threshold (*e.g.*, up to 5% error is allowed) or when predicting substation overload then the precision (rate of true positives) and recall (extent of true positives) should be above a given threshold.</span></span> <span data-ttu-id="85698-280">這些目標應該衍生自客戶的商務目標。</span><span class="sxs-lookup"><span data-stu-id="85698-280">These goals should be derived from the customer's business goals.</span></span>
* <span data-ttu-id="85698-281">關於公司的商務流程，有一個明確的整合案例  。</span><span class="sxs-lookup"><span data-stu-id="85698-281">There is a clear **integration scenario** with the company's business workflow.</span></span> <span data-ttu-id="85698-282">比方說，變電站負載預測可以整合到電網控制中心，以利於進行超載預防活動。</span><span class="sxs-lookup"><span data-stu-id="85698-282">For example, the substation load forecast can be integrated into the grid control center to allow overload prevention activities.</span></span>
* <span data-ttu-id="85698-283">客戶已準備使用**品質足夠的資料**來支援使用案例 (詳情請參閱本教戰守則的下一節：**資料品質**)。</span><span class="sxs-lookup"><span data-stu-id="85698-283">The customer has ready to use **data with sufficient quality** to support the use case (see more in the next section, **Data Quality**, of this playbook).</span></span>
* <span data-ttu-id="85698-284">客戶接受以雲端為中心的資料架構或以雲端為基礎的機器學習服務 ，包括 Azure ML 和其他 Cortana Intelligence Suite 元件。</span><span class="sxs-lookup"><span data-stu-id="85698-284">The customer embraces cloud centric data architecture or **cloud-based machine learning**, including Azure ML and other Cortana Intelligence Suite components.</span></span>
* <span data-ttu-id="85698-285">客戶願意建立**端對端資料流程**，以利於持續將資料傳入雲端，也願意**實施**解決方案。</span><span class="sxs-lookup"><span data-stu-id="85698-285">The customer is willing to establish **an end to end data flow** that facilities the delivery of data into the cloud on an ongoing basis, and is willing to **operationalize** the solution.</span></span>
* <span data-ttu-id="85698-286">客戶已準備提供資源  來主動參與初始試驗實作過程，以便於成功完成時，就能將解決方案的知識和擁有權移轉給客戶。</span><span class="sxs-lookup"><span data-stu-id="85698-286">The customer is ready to **dedicate resources** who will be actively engaged during the initial pilot implementation so that knowledge and ownership of the solution can be transferred to the customer upon successful completion.</span></span>
* <span data-ttu-id="85698-287">客戶資源應該為熟練的資料專業人員 ，最好是資料科學家。</span><span class="sxs-lookup"><span data-stu-id="85698-287">The customer resource should be a **skilled data professional**, preferably a data scientist.</span></span>

<span data-ttu-id="85698-288">根據上述準則來檢定使用案例，將可大幅提高使用案例的成功率，並為實作未來的使用案例打下良好基礎。</span><span class="sxs-lookup"><span data-stu-id="85698-288">Qualification of a use case based on the above criteria can greatly improve the success rates of a use case and establish a good beachhead for the implementation of future use cases.</span></span>

### <a name="cloud-based-solutions"></a><span data-ttu-id="85698-289">以雲端為基礎的解決方案</span><span class="sxs-lookup"><span data-stu-id="85698-289">Cloud-Based Solutions</span></span>
<span data-ttu-id="85698-290">Cortana Intelligence Suite 是位於雲端的整合式環境。</span><span class="sxs-lookup"><span data-stu-id="85698-290">Cortana Intelligence Suite on Azure is an integrated environment that resides in the cloud.</span></span> <span data-ttu-id="85698-291">在雲端環境中部署進階的分析解決方案，將可以為企業帶來顯著的效益，而對於仍在使用內部部署 IT 解決方案的公司來說，同時也意謂著巨大的變革。</span><span class="sxs-lookup"><span data-stu-id="85698-291">The deployment of an advanced analytics solution in a cloud environment holds substantial benefits for businesses and at the same time may mean big change for companies that still use on-premises IT solutions.</span></span> <span data-ttu-id="85698-292">在能源產業內，明顯看出營運逐漸轉向雲端的趨勢。</span><span class="sxs-lookup"><span data-stu-id="85698-292">Within the energy sector, there is a clear trend of gradual migration of operations into the cloud.</span></span> <span data-ttu-id="85698-293">這種趨勢與上述產業趨勢 中的智慧電網發展同步並進。</span><span class="sxs-lookup"><span data-stu-id="85698-293">This trend goes hand in hand along with the development of the smart grid as discussed above, in **Industry Trends**.</span></span> <span data-ttu-id="85698-294">由於本教戰守則著重於能源領域中以雲端為基礎的解決方案，因此必須說明部署以雲端為基礎的解決方案帶來的優點和其他考量。</span><span class="sxs-lookup"><span data-stu-id="85698-294">As this playbook is focused on a cloud-based solution in the energy domain, it is important to explain the benefits and other considerations of deploying a cloud-based solution.</span></span>

<span data-ttu-id="85698-295">以雲端為基礎的解決方案帶來的最大優點，可能就在於成本。</span><span class="sxs-lookup"><span data-stu-id="85698-295">Perhaps the biggest advantage of a cloud-based solution is the cost.</span></span> <span data-ttu-id="85698-296">由於解決方案使用雲端部署的元件，因此不需要前期成本或相關的 COGS (銷貨成本) 元件成本。</span><span class="sxs-lookup"><span data-stu-id="85698-296">As a solution makes use of cloud-deployed components, there is no upfront costs or COGS (Cost of Goods Sold) component costs associated with it.</span></span> <span data-ttu-id="85698-297">這表示不需要投資硬體、軟體和 IT 維護，因而大幅降低商業風險。</span><span class="sxs-lookup"><span data-stu-id="85698-297">That means that there is no need to invest in hardware, software, and IT maintenance, and therefore there is a substantial reduction in business risk.</span></span>

<span data-ttu-id="85698-298">另一個重要優點是以雲端為基礎的解決方案採用隨用隨付成本結構。</span><span class="sxs-lookup"><span data-stu-id="85698-298">Another important advantage is the pay-as-you-go cost structure of cloud-based solutions.</span></span> <span data-ttu-id="85698-299">做為計算或儲存用途的以雲端為基礎的伺服器，可以視需要而部署及調整。</span><span class="sxs-lookup"><span data-stu-id="85698-299">Cloud-based servers for computing or storage can be deployed and scaled on a just-as-needed basis.</span></span> <span data-ttu-id="85698-300">這代表以雲端為基礎的解決方案帶來的成本效益優點。</span><span class="sxs-lookup"><span data-stu-id="85698-300">This represents the cost efficiency advantage of a cloud-based solution.</span></span>

<span data-ttu-id="85698-301">最後，不需要投資 IT 維護或未來的基礎結構開發，因為以雲端為基礎的供應項目中已一應俱全。</span><span class="sxs-lookup"><span data-stu-id="85698-301">Finally, there is no need for investing in IT maintenance or future infrastructure development as all this is part of the cloud-based offering.</span></span> <span data-ttu-id="85698-302">就這點而言，Cortana Intelligence Suite 包含最優秀的服務，而其藍圖持續發展中。</span><span class="sxs-lookup"><span data-stu-id="85698-302">To that extent, Cortana Intelligence Suite includes the best in class services and its road map keeps evolving.</span></span> <span data-ttu-id="85698-303">新的特性、元件和功能持續地推出和演進。</span><span class="sxs-lookup"><span data-stu-id="85698-303">New features, components, and capabilities are constantly being introduced and evolve.</span></span>

<span data-ttu-id="85698-304">對於剛開始轉換到雲端的公司，強烈建議實作雲端移轉藍圖，採取漸進方式。</span><span class="sxs-lookup"><span data-stu-id="85698-304">For a company that is just starting its transition into the cloud, we are highly recommending to take a gradual approach by implementing a cloud migration road map.</span></span> <span data-ttu-id="85698-305">對於能源領域中的公共事業或公司，我們相信本教戰守則所討論的使用案例，就代表在雲端中試驗預測性分析解決方案的絕佳機會。</span><span class="sxs-lookup"><span data-stu-id="85698-305">We believe that for utilities and companies in the energy domain, the use cases that are discussed in this playbook represent an excellent opportunity for piloting predictive analytics solutions in the cloud.</span></span>

#### <a name="business-case-justification-considerations"></a><span data-ttu-id="85698-306">商務案例理由考量</span><span class="sxs-lookup"><span data-stu-id="85698-306">Business Case Justification Considerations</span></span>
<span data-ttu-id="85698-307">在許多情況下，客戶可能想要對給定的使用案例提出一個商業理由，表明以雲端為基礎的解決方案和機器學習服務是重要的元件。</span><span class="sxs-lookup"><span data-stu-id="85698-307">In many cases, the customer may be interested in making a business justification for a given use case in which a cloud-based solution and Machine Learning are important components.</span></span> <span data-ttu-id="85698-308">不同於內部部署解決方案，在雲端式解決方案中，前期成本的成分極少，大部分的成本要素都與實際用量有關。</span><span class="sxs-lookup"><span data-stu-id="85698-308">Unlike an on-premises solution, in the case of a cloud-based solution, the upfront cost component is minimal and most of the cost elements are associated with actual usage.</span></span> <span data-ttu-id="85698-309">說到部署預測上 Cortana Intelligence 解決方案的能源，多個服務可以與單一的一般成本結構整合。</span><span class="sxs-lookup"><span data-stu-id="85698-309">When it comes to deploying an energy forecasting solution on Cortana Intelligence Suite, multiple services can be integrated with a single common cost structure.</span></span> <span data-ttu-id="85698-310">比方說，資料庫 (例如SQL Azure) 可以用來儲存原始資料，然後在實際預測時，使用 Azure ML 來裝載預測服務。</span><span class="sxs-lookup"><span data-stu-id="85698-310">For example, databases (*e.g.*, SQL Azure) can be used to store the raw data and then for the actual forecasts Azure ML is used to host the forecasting services.</span></span> <span data-ttu-id="85698-311">在此範例中，成本結構可能包含儲存體和交易式元件。</span><span class="sxs-lookup"><span data-stu-id="85698-311">In this example, the cost structure could include storage and transactional components.</span></span>

<span data-ttu-id="85698-312">另一方面，應該要正確了解從事能源需求預測 (短期或長期) 的商業價值。</span><span class="sxs-lookup"><span data-stu-id="85698-312">On the other hand, one should have a good understanding of the business value of operating an energy demand forecasting (short or long term).</span></span> <span data-ttu-id="85698-313">事實上，必須了解每個預測作業的商業價值。</span><span class="sxs-lookup"><span data-stu-id="85698-313">In fact, it is important to realize the business value of each forecast operation.</span></span> <span data-ttu-id="85698-314">比方說，精確預測接下來 24 小時內的電力負載，可以避免生產過剩或電網超載，還能從每日節省的資金來量化這方面的資訊。</span><span class="sxs-lookup"><span data-stu-id="85698-314">For example, accurately forecasting power load for the next 24 hours can prevent overproduction or can help prevent overloads on the grid and this can be quantified in terms of financial savings on a daily basis.</span></span>

<span data-ttu-id="85698-315">需求預測解決方案財務優點的基本計算公式為︰![需求預測解決方案財務優點的基本計算公式](media/cortana-analytics-playbook-demand-forecasting-energy/financial-benefit-formula.png)</span><span class="sxs-lookup"><span data-stu-id="85698-315">A basic formula for calculating the financial benefit of demand forecast solution would be: ![Basic formula for calculating the financial benefit of demand forecast solution](media/cortana-analytics-playbook-demand-forecasting-energy/financial-benefit-formula.png)</span></span>

<span data-ttu-id="85698-316">由於 Cortana Intelligence Suite 提供隨用隨付價格模式，所以不需要將固定成本項帶入這個公式中。</span><span class="sxs-lookup"><span data-stu-id="85698-316">Since Cortana Intelligence Suite provides a pay-as-you-go pricing model, there is no need for incurring a fixed cost component to this formula.</span></span> <span data-ttu-id="85698-317">每日、每月或每年都可以計算此公式。</span><span class="sxs-lookup"><span data-stu-id="85698-317">This formula can be calculated on a daily, monthly, or annual basis.</span></span>

<span data-ttu-id="85698-318">[這裡](http://azure.microsoft.com/pricing/details/machine-learning/)提供 Cortana Intelligence Suite 和 Azure ML 目前的價格方案。</span><span class="sxs-lookup"><span data-stu-id="85698-318">Current Cortana Intelligence Suite and Azure ML pricing plans can be found [here](http://azure.microsoft.com/pricing/details/machine-learning/).</span></span>

### <a name="solution-development-process"></a><span data-ttu-id="85698-319">解決方法開發程序</span><span class="sxs-lookup"><span data-stu-id="85698-319">Solution Development Process</span></span>
<span data-ttu-id="85698-320">能源需求預測解決方案的開發週期通常需要 4 個階段，在所有階段中，我們都採用 Cortana Intelligence Suite 內以雲端為基礎的技術和服務。</span><span class="sxs-lookup"><span data-stu-id="85698-320">The development cycle of an energy demand forecasting solution typically involves 4 phases, in all of which we make use of cloud-based technologies and services within the Cortana Intelligence Suite.</span></span>

<span data-ttu-id="85698-321">下圖提供相關說明：</span><span class="sxs-lookup"><span data-stu-id="85698-321">This is illustrated in the following diagram:</span></span>

![智慧電網週期](media/cortana-analytics-playbook-demand-forecasting-energy/smart-grid-cycle.png)

<span data-ttu-id="85698-323">下一段說明這 4 個步驟的程序︰</span><span class="sxs-lookup"><span data-stu-id="85698-323">The following paragraph describes this 4 step process:</span></span>

1. <span data-ttu-id="85698-324">**資料收集** – 任何以進階分析為基礎的解決方案都仰賴資料 (請參閱**了解資料**)。</span><span class="sxs-lookup"><span data-stu-id="85698-324">**Data Collection** – Any advanced analytics based solution relies on data (see **Data Understanding**).</span></span> <span data-ttu-id="85698-325">具體來說，在提及預測性分析和預測時，我們需要持續、動態的資料流。</span><span class="sxs-lookup"><span data-stu-id="85698-325">Specifically, when it comes to predictive analytics and forecasting, we rely on ongoing, dynamic flow of data.</span></span> <span data-ttu-id="85698-326">就能源需求預測而言，這項資料可能直接來自智慧型電表，或已在內部部署資料庫上彙總。</span><span class="sxs-lookup"><span data-stu-id="85698-326">In the case of energy demand forecasting, this data can be sourced directly from smart meters, or be already aggregated on an on-prem database.</span></span> <span data-ttu-id="85698-327">我們也依賴其他外部資料來源，例如天氣和溫度。</span><span class="sxs-lookup"><span data-stu-id="85698-327">We also rely on other external sources of data such as weather and temperature.</span></span> <span data-ttu-id="85698-328">這個持續的資料流必須協調、排程及儲存。</span><span class="sxs-lookup"><span data-stu-id="85698-328">This ongoing flow of data must be orchestrated, scheduled, and stored.</span></span> <span data-ttu-id="85698-329">[Azure Data Factory](http://azure.microsoft.com/services/data-factory/) (ADF) 是我們完成這項工作的主力工具。</span><span class="sxs-lookup"><span data-stu-id="85698-329">[Azure Data Factory](http://azure.microsoft.com/services/data-factory/) (ADF) is our main workhorse for accomplishing this task.</span></span>
2. <span data-ttu-id="85698-330">**模型化** – 為了獲得精確又可靠的能源預測，我們必須開發 (訓練) 並維護一個優秀的模型，以利用歷史資料，並從資料中擷取有意義和可預測的模式。</span><span class="sxs-lookup"><span data-stu-id="85698-330">**Modeling** – For accurate and reliable energy forecasts, one must develop (train) and maintain a great model that makes use of the historical data and extracts the meaningful and predictive patterns in the data.</span></span> <span data-ttu-id="85698-331">隨著不斷開發出先進的演算法，機器學習服務 (ML) 領域一直在快速成長。</span><span class="sxs-lookup"><span data-stu-id="85698-331">The area of Machine Learning (ML) has been growing rapidly with more advanced algorithms being routinely developed.</span></span> <span data-ttu-id="85698-332">Azure ML Studio 提供絕佳的使用者體驗，有助於在完整的工作流程中利用最先進的 ML 演算法。</span><span class="sxs-lookup"><span data-stu-id="85698-332">Azure ML Studio provides a great user experience that helps utilize the most advanced ML algorithms within a complete work flow.</span></span> <span data-ttu-id="85698-333">該工作流程如直覺式流程圖所示，包含準備資料、萃取特徵、模型化和評估模型。</span><span class="sxs-lookup"><span data-stu-id="85698-333">That workflow is illustrated in an intuitive flow diagram and includes the data preparation, feature extraction, modeling, and model evaluation.</span></span> <span data-ttu-id="85698-334">使用者可以取用此環境中數以百計的各種不同模型。</span><span class="sxs-lookup"><span data-stu-id="85698-334">The user can pull in hundreds of various models that are included in this environment.</span></span> <span data-ttu-id="85698-335">此階段的結束時，資料科學家會獲得一個已完整評估且可部署的工作模型。</span><span class="sxs-lookup"><span data-stu-id="85698-335">By the end of this phase a data scientist will have a working model that is fully evaluated and ready for deployment.</span></span>
   
   <span data-ttu-id="85698-336">下圖是一般工作流程的說明︰</span><span class="sxs-lookup"><span data-stu-id="85698-336">The following diagram is an illustration of a typical workflow:</span></span>
   
   ![模型化工作流程](media/cortana-analytics-playbook-demand-forecasting-energy/modeling-workflow.png)
3. <span data-ttu-id="85698-338">**部署** – 獲得工作模型後，下一步就是部署。</span><span class="sxs-lookup"><span data-stu-id="85698-338">**Deployment** – With a working model in hand, the next step is deployment.</span></span> <span data-ttu-id="85698-339">在此，模型轉換為 Web 服務並公開 RESTful API，供各種用電用戶端透過網際網路同時叫用。</span><span class="sxs-lookup"><span data-stu-id="85698-339">Here the model is converted into a web service that exposes a RESTful API that can be concurrently invoked over the     Internet from various consumption clients.</span></span> <span data-ttu-id="85698-340">Azure ML 提供簡單的方法，直接從 Azure ML Studio 中按一下按鈕，就能部署模型。</span><span class="sxs-lookup"><span data-stu-id="85698-340">Azure ML provides a simple way of deploying a model directly from the Azure ML Studio with a single click of a button.</span></span> <span data-ttu-id="85698-341">整個部署程序都是自動完成。</span><span class="sxs-lookup"><span data-stu-id="85698-341">The entire deployment process happens under the hood.</span></span> <span data-ttu-id="85698-342">這個解決方案可以自動調整規模以符合所需的用電量。</span><span class="sxs-lookup"><span data-stu-id="85698-342">This solution can automatically scale to meet the required consumption.</span></span>
4. <span data-ttu-id="85698-343">**耗用量** – 在這個階段，我們實際利用預測模型來產生預測。</span><span class="sxs-lookup"><span data-stu-id="85698-343">**Consumption** – In this phase, we actually make use of the forecasting model to produce predictions.</span></span> <span data-ttu-id="85698-344">用電量可由使用者應用程式 (例如，儀表板) 或直接從作業系統來控管，例如供需平衡系統或電網最佳化解決方案。</span><span class="sxs-lookup"><span data-stu-id="85698-344">The consumption can be driven from a user application (*e.g.*, dashboard) or directly from an operational system such as demand/supply balancing system or a grid optimization solution.</span></span> <span data-ttu-id="85698-345">單一模型可以控管多個使用案例。</span><span class="sxs-lookup"><span data-stu-id="85698-345">Multiple use cases can be driven from a single model.</span></span>

## <a name="data-understanding"></a><span data-ttu-id="85698-346">了解資料</span><span class="sxs-lookup"><span data-stu-id="85698-346">Data Understanding</span></span>
<span data-ttu-id="85698-347">討論過能源需求預測解決方案的商務考量之後 (請參閱「了解商務」 )，現在可以開始討論資料部分。</span><span class="sxs-lookup"><span data-stu-id="85698-347">After covering the business considerations (see **Business Understanding**) of an energy demand forecasting solution, we are now ready to discuss the data part.</span></span> <span data-ttu-id="85698-348">任何預測性分析解決方案都仰賴可靠的資料。</span><span class="sxs-lookup"><span data-stu-id="85698-348">Any predictive analytics solution relies on reliable data.</span></span> <span data-ttu-id="85698-349">在能源需求預測方面，我們依賴不同細微程度的用電量歷史資料。</span><span class="sxs-lookup"><span data-stu-id="85698-349">For energy demand forecasting, we rely on historical consumption data with various levels of granularity.</span></span> <span data-ttu-id="85698-350">該歷史資料就成為原始資料。</span><span class="sxs-lookup"><span data-stu-id="85698-350">That historical data is used as the raw material.</span></span> <span data-ttu-id="85698-351">經過仔細分析，資料科學家將找出預測因子 (也稱為特徵)，然後輸入模型中，最後產生所需的預測。</span><span class="sxs-lookup"><span data-stu-id="85698-351">It will undergo a careful analysis in which the data scientist will identify predictors (also referred to as features) that can be put into a model which will eventually generate the required forecasts.</span></span>

<span data-ttu-id="85698-352">在本節的其餘部分，我們將說明各種步驟和考量，讓您了解資料及如何轉換成實用的格式。</span><span class="sxs-lookup"><span data-stu-id="85698-352">In the rest of this section, we will describe the various steps and considerations for understanding the data and how to bring it to a usable form.</span></span>

### <a name="the-model-development-cycle"></a><span data-ttu-id="85698-353">模型開發週期</span><span class="sxs-lookup"><span data-stu-id="85698-353">The Model Development Cycle</span></span>
<span data-ttu-id="85698-354">需要仔細準備和規劃才能產生良好的預測模型。</span><span class="sxs-lookup"><span data-stu-id="85698-354">Producing good forecasting models requires some careful preparation and planning.</span></span> <span data-ttu-id="85698-355">將模型化程序分解成多個步驟，且一次專注於一個步驟，如此即可大幅改善整個程序的結果。</span><span class="sxs-lookup"><span data-stu-id="85698-355">Breaking down the modeling process into multiple steps and focusing on one step at a time could dramatically improve the outcome of the entire process.</span></span>

<span data-ttu-id="85698-356">下圖說明如何將模型化程序分解成多個步驟︰</span><span class="sxs-lookup"><span data-stu-id="85698-356">The following diagram illustrates how the modeling process could be broken down into multiple steps:</span></span>

![模型開發週期](media/cortana-analytics-playbook-demand-forecasting-energy/model-development-cycle.png)

<span data-ttu-id="85698-358">從上圖可知，週期包含六個步驟：</span><span class="sxs-lookup"><span data-stu-id="85698-358">As can be seen the cycle consists of six steps:</span></span>

* <span data-ttu-id="85698-359">問題編寫</span><span class="sxs-lookup"><span data-stu-id="85698-359">Problem formulation</span></span>
* <span data-ttu-id="85698-360">資料擷取和資料探索</span><span class="sxs-lookup"><span data-stu-id="85698-360">Data ingestion and data exploration</span></span>
* <span data-ttu-id="85698-361">資料準備和特徵設計</span><span class="sxs-lookup"><span data-stu-id="85698-361">Data preparation and feature engineering</span></span>
* <span data-ttu-id="85698-362">模型化</span><span class="sxs-lookup"><span data-stu-id="85698-362">Modeling</span></span>
* <span data-ttu-id="85698-363">模型評估</span><span class="sxs-lookup"><span data-stu-id="85698-363">Model evaluation</span></span>
* <span data-ttu-id="85698-364">開發</span><span class="sxs-lookup"><span data-stu-id="85698-364">Development</span></span>

<span data-ttu-id="85698-365">在本節的其餘部分，我們將說明個別的步驟及每個步驟需要考量的項目。</span><span class="sxs-lookup"><span data-stu-id="85698-365">In the rest of this section we will describe the individual steps and items to consider at each step.</span></span>

### <a name="problem-formulation"></a><span data-ttu-id="85698-366">問題編寫</span><span class="sxs-lookup"><span data-stu-id="85698-366">Problem Formulation</span></span>
<span data-ttu-id="85698-367">問題編寫可視為在實作任何預測性分析解決方案之前，必須執行的最重要步驟。</span><span class="sxs-lookup"><span data-stu-id="85698-367">We can consider the problem formulation as the most critical step one needs to take prior to implementing any predictive analytics solution.</span></span> <span data-ttu-id="85698-368">在此我們會轉換商務問題，並將它分解成利用資料和模型化技術就可解決的特定要素。</span><span class="sxs-lookup"><span data-stu-id="85698-368">Here we would transform the business problem and decompose it to specific elements which can be solved by using data and modeling techniques.</span></span> <span data-ttu-id="85698-369">最好將問題編寫成一組我們想要回答的問題。</span><span class="sxs-lookup"><span data-stu-id="85698-369">It is a good practice to formulate the problem as a set of questions we would like to answer.</span></span> <span data-ttu-id="85698-370">以下是能源需求預測範圍內可能適用的一些問題︰</span><span class="sxs-lookup"><span data-stu-id="85698-370">Here are some possible questions that might be applicable within the scope of energy demand forecasting:</span></span>

* <span data-ttu-id="85698-371">個別變電站在下一個小時或次日預期的負載是什麼？</span><span class="sxs-lookup"><span data-stu-id="85698-371">What is the expected load on an individual substation in the next hour or day?</span></span>
* <span data-ttu-id="85698-372">我的電網在一天之中何時會遇到尖峰需求？</span><span class="sxs-lookup"><span data-stu-id="85698-372">At what time of the day will my grid experience peak demand?</span></span>
* <span data-ttu-id="85698-373">我們電網有多少能耐承受預期的尖峰負載？</span><span class="sxs-lookup"><span data-stu-id="85698-373">How likely is my grid to sustain the expected peak load?</span></span>
* <span data-ttu-id="85698-374">發電廠在一天的每個小時內產生多少電力？</span><span class="sxs-lookup"><span data-stu-id="85698-374">How much power should the power station generate during each hour of the day?</span></span>

<span data-ttu-id="85698-375">擬定這些問題可讓我們專注於取得正確的資料，並充分配合眼前的商務問題來實作解決方案。</span><span class="sxs-lookup"><span data-stu-id="85698-375">Formulating these questions allows us to focus on getting the right data and implementing a solution that is fully aligned with the business problem at hand.</span></span> <span data-ttu-id="85698-376">此外，我們可以再設定一些重要的計量，讓我們評估模型的效能。</span><span class="sxs-lookup"><span data-stu-id="85698-376">Furthermore, we can then set some key metrics that allow us to evaluate the performance of the model.</span></span> <span data-ttu-id="85698-377">比方說，預測應該有多高的準確度及企業仍可接受多大的錯誤範圍？</span><span class="sxs-lookup"><span data-stu-id="85698-377">For example, how accurate should the forecast be and what is the range of error that would still be acceptable by the business?</span></span>

### <a name="data-sources"></a><span data-ttu-id="85698-378">資料來源</span><span class="sxs-lookup"><span data-stu-id="85698-378">Data Sources</span></span>
<span data-ttu-id="85698-379">現代智慧電網會從電網的各種組件和元件收集資料。</span><span class="sxs-lookup"><span data-stu-id="85698-379">The modern smart grid collects data from various parts and components of the grid.</span></span> <span data-ttu-id="85698-380">此資料代表電網運作和利用的各個層面。</span><span class="sxs-lookup"><span data-stu-id="85698-380">This data represents various aspects of the operation and the utilization of the power grid.</span></span> <span data-ttu-id="85698-381">在能源需求預測的範圍內，我們的討論僅限於可反映實際需求消耗的資料來源。</span><span class="sxs-lookup"><span data-stu-id="85698-381">Within the scope of the energy demand forecast, we are limiting the discussion on data sources that reflect the actual demand consumption.</span></span> <span data-ttu-id="85698-382">能源消耗量的重要來源之一是智慧型電表。</span><span class="sxs-lookup"><span data-stu-id="85698-382">One important source of energy consumption are smart meters.</span></span> <span data-ttu-id="85698-383">世界各地的公共事業正快速地為消費者部署智慧型電表。</span><span class="sxs-lookup"><span data-stu-id="85698-383">Utilities around the globe are rapidly deploying smart meters for their consumers.</span></span> <span data-ttu-id="85698-384">智慧型電表會記錄實際的用電量，並不斷地將此資料轉送給公共事業公司。</span><span class="sxs-lookup"><span data-stu-id="85698-384">Smart meters record the actual power consumption and constantly relay this data back to the utility company.</span></span> <span data-ttu-id="85698-385">資料是以固定時間間隔收集並傳回，範圍從每 5 分鐘到 1 小時。</span><span class="sxs-lookup"><span data-stu-id="85698-385">Data is collected and sent back at a fixed interval, ranging from every 5 minutes to 1 hour.</span></span> <span data-ttu-id="85698-386">更先進的智慧型電表可以設計成從遠端控制，並平衡住家內的實際用電量。</span><span class="sxs-lookup"><span data-stu-id="85698-386">More advanced smart meters can be programmed remotely to control and balance the actual consumption within a household.</span></span> <span data-ttu-id="85698-387">智慧型電表資料相當可靠，而且包含時間戳記。</span><span class="sxs-lookup"><span data-stu-id="85698-387">Smart meter data is relatively reliable and includes a time stamp.</span></span> <span data-ttu-id="85698-388">因此成為需求預測的重要元素。</span><span class="sxs-lookup"><span data-stu-id="85698-388">That makes it an important ingredient for demand forecast.</span></span> <span data-ttu-id="85698-389">電表資料可以電網拓撲內的各個層級上彙總 (加總)︰變壓器、變電站、區域等。然後，我們可以挑選彙總層級來建置預測模型。</span><span class="sxs-lookup"><span data-stu-id="85698-389">Meter data can be aggregated (summed up) at various levels within the grid topology: transformer, substation, region, *etc*. We can then pick the required aggregation level to build a forecasting model for it.</span></span> <span data-ttu-id="85698-390">比方說，如果公共事業公司想要預測每一個電網變電站的未來負載，則可以針對每個變電站來彙總所有電表的資料，再做為預測模型的輸入。</span><span class="sxs-lookup"><span data-stu-id="85698-390">For example, if the utility company would like to forecast future load on each of its grid substations then all meters' data can be aggregated for each individual substation and used as an input for the forecasting model.</span></span> <span data-ttu-id="85698-391">我們將智慧型電表稱為內部資料來源。</span><span class="sxs-lookup"><span data-stu-id="85698-391">We refer to smart meters as an internal data source.</span></span>

<span data-ttu-id="85698-392">可靠的能源需求預測也依賴其他外部資料來源。</span><span class="sxs-lookup"><span data-stu-id="85698-392">A reliable energy demand forecast will also rely on other external data sources.</span></span> <span data-ttu-id="85698-393">影響用電量的一個重要因素是天氣，更準確地說是溫度。</span><span class="sxs-lookup"><span data-stu-id="85698-393">One important factor that affects power consumption is the weather, or more precisely the temperature.</span></span> <span data-ttu-id="85698-394">歷史資料顯示室外溫度和用電量之間有很大的關聯性。</span><span class="sxs-lookup"><span data-stu-id="85698-394">Historical data shows strong correlation between outside temperature and power consumption.</span></span> <span data-ttu-id="85698-395">在酷暑季節，消費者會開冷氣機，而冬季時會開啟暖氣系統。</span><span class="sxs-lookup"><span data-stu-id="85698-395">During hot summer days, consumers make use of their air conditioners and during the winter power on heating systems.</span></span> <span data-ttu-id="85698-396">因此，關鍵在於電網地點要有可靠的歷史溫度來源。</span><span class="sxs-lookup"><span data-stu-id="85698-396">A reliable source of historical temperatures at the grid location is therefore key.</span></span> <span data-ttu-id="85698-397">此外，我們也依賴精確預測的溫度當作用電量的預測因子。</span><span class="sxs-lookup"><span data-stu-id="85698-397">Furthermore, we also rely on accurate forecast of temperature as a predictor of power consumption.</span></span>

<span data-ttu-id="85698-398">其他外部資料來源也有助於建立能源需求預測模型。</span><span class="sxs-lookup"><span data-stu-id="85698-398">Other external data sources can also help in building energy demand forecast models.</span></span> <span data-ttu-id="85698-399">其中可能包括長期氣候變化、經濟指標 (例如GDP) 等。</span><span class="sxs-lookup"><span data-stu-id="85698-399">These may include long term climate changes, economical indexes (*e.g.*, GDP), and others.</span></span> <span data-ttu-id="85698-400">本文中不討論其他這些資料來源。</span><span class="sxs-lookup"><span data-stu-id="85698-400">In this document we will not include these other data sources.</span></span>

### <a name="data-structure"></a><span data-ttu-id="85698-401">資料結構</span><span class="sxs-lookup"><span data-stu-id="85698-401">Data Structure</span></span>
<span data-ttu-id="85698-402">決定所需的資料來源之後，我們需要確定已收集的原始資料包含正確的資料特徵。</span><span class="sxs-lookup"><span data-stu-id="85698-402">After identifying the required data sources, we would like to ensure that raw data that has been collected includes the correct data features.</span></span> <span data-ttu-id="85698-403">若要建立可靠的需求預測模型，我們需要確定收集的資料包含有助於預測未來需求的資料元素。</span><span class="sxs-lookup"><span data-stu-id="85698-403">To build a reliable demand forecast model, we would need to ensure that the data collected includes data elements that can help predict the future demand.</span></span> <span data-ttu-id="85698-404">以下是關於原始資料的資料結構 (結構描述) 的一些基本條件。</span><span class="sxs-lookup"><span data-stu-id="85698-404">Here are some basic requirements concerning the data structure (schema) of the raw data.</span></span>

<span data-ttu-id="85698-405">原始資料是由資料列和資料行所組成。</span><span class="sxs-lookup"><span data-stu-id="85698-405">The raw data consists of rows and columns.</span></span> <span data-ttu-id="85698-406">每個度量單位以單一資料列表示。</span><span class="sxs-lookup"><span data-stu-id="85698-406">Each measurement is represented as a single row of data.</span></span> <span data-ttu-id="85698-407">每個資料列包含多個資料行 (也稱為特徵或欄位)。</span><span class="sxs-lookup"><span data-stu-id="85698-407">Each row of data includes multiple columns (also referred to as features or fields).</span></span>

1. <span data-ttu-id="85698-408">**時間戳記** – 時間戳記欄位代表記錄度量時的實際時間。</span><span class="sxs-lookup"><span data-stu-id="85698-408">**Time stamp** – the timestamp field represents the actual time when the measurement was recorded.</span></span> <span data-ttu-id="85698-409">它應該符合其中一種常見的日期/時間格式。</span><span class="sxs-lookup"><span data-stu-id="85698-409">It should comply with one of the common date/time formats.</span></span> <span data-ttu-id="85698-410">應該同時包含日期和時間部分。</span><span class="sxs-lookup"><span data-stu-id="85698-410">Both date and time parts should be included.</span></span> <span data-ttu-id="85698-411">在大部分情況下，除非達到「秒」的細微層級，否則不需要記錄時間。</span><span class="sxs-lookup"><span data-stu-id="85698-411">In most cases, there is no need for the time to be recorded till the second level of granularity.</span></span> <span data-ttu-id="85698-412">必須指定記錄資料的時區。</span><span class="sxs-lookup"><span data-stu-id="85698-412">It is important to specify the time zone in which the data is recorded.</span></span>
2. <span data-ttu-id="85698-413">**電表識別碼** -此欄位識別電表或測量裝置。</span><span class="sxs-lookup"><span data-stu-id="85698-413">**Meter ID** - This field identifies the meter or the measurement device.</span></span> <span data-ttu-id="85698-414">它是分類變數，可以是數字和字元的組合。</span><span class="sxs-lookup"><span data-stu-id="85698-414">It is a categorical variable and can be a combination of digits and characters.</span></span>
3. <span data-ttu-id="85698-415">**用電量值** – 這是在指定日期/時間的實際用電量。</span><span class="sxs-lookup"><span data-stu-id="85698-415">**Consumption value** – This is the actual consumption at a given date/time.</span></span> <span data-ttu-id="85698-416">用電量可以透過 kWh (千瓦時) 或任何其他慣用單位來測量。</span><span class="sxs-lookup"><span data-stu-id="85698-416">The consumption can be measured in kWh (kilowatt-hour) or any other preferred units.</span></span> <span data-ttu-id="85698-417">請務必注意，在所有資料測量中，測量單位必須保持一致。</span><span class="sxs-lookup"><span data-stu-id="85698-417">It is important to note that the measurement unit must stay consistent across all measurements in the data.</span></span> <span data-ttu-id="85698-418">在某些情況下，可能分成 3 個電源階段來供應用電量。</span><span class="sxs-lookup"><span data-stu-id="85698-418">In some cases, consumption can be supplied over 3 power phases.</span></span> <span data-ttu-id="85698-419">在此情況下，我們需要收集所有獨立的用電量階段。</span><span class="sxs-lookup"><span data-stu-id="85698-419">In that case we would need to collect all the independent consumption phases.</span></span>
4. <span data-ttu-id="85698-420">**溫度** – 通常會從獨立的來源收集溫度。</span><span class="sxs-lookup"><span data-stu-id="85698-420">**Temperature** – the temperature is typically collected from an independent source.</span></span> <span data-ttu-id="85698-421">不過，它應該與用電量資料相容。</span><span class="sxs-lookup"><span data-stu-id="85698-421">However, it should be compatible with the consumption data.</span></span> <span data-ttu-id="85698-422">它應該包含如上所述的時間戳記，因而能夠與實際用電量資料保持同步。</span><span class="sxs-lookup"><span data-stu-id="85698-422">It should include a timestamp as described above that will allow it to be synchronized with the actual consumption data.</span></span> <span data-ttu-id="85698-423">溫度值都可以指定為攝氏或華氏度數，但在所有測量中應該保持一致。</span><span class="sxs-lookup"><span data-stu-id="85698-423">The temperature value can be specified in degrees Celsius or Fahrenheit but should stay consistent across all measurements.</span></span>
5. <span data-ttu-id="85698-424">**位置** – 位置欄位通常與收集溫度資料的位置相關聯。</span><span class="sxs-lookup"><span data-stu-id="85698-424">**Location –** The location field is typically associated with the place where the temperature data has been collected.</span></span> <span data-ttu-id="85698-425">它可以用郵遞區號或經緯度 (lat/long) 格式表示。</span><span class="sxs-lookup"><span data-stu-id="85698-425">It can be represented as a zip-code number or in latitude/longitude (lat/long) format.</span></span>

<span data-ttu-id="85698-426">下表顯示正確用電量和溫度資料格式的範例︰</span><span class="sxs-lookup"><span data-stu-id="85698-426">The following tables shows examples of a good consumption and temperature data format:</span></span>

| <bpt id="p1">**</bpt>Date<ept id="p1">**</ept> | <bpt id="p1">**</bpt>Time<ept id="p1">**</ept> | <bpt id="p1">**</bpt>Meter ID<ept id="p1">**</ept> | <bpt id="p1">**</bpt>Phase 1<ept id="p1">**</ept> | <bpt id="p1">**</bpt>Phase 2<ept id="p1">**</ept> | <bpt id="p1">**</bpt>Phase 3<ept id="p1">**</ept> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="85698-433">7/1/2015</span><span class="sxs-lookup"><span data-stu-id="85698-433">7/1/2015</span></span> |<span data-ttu-id="85698-434">10:00:00</span><span class="sxs-lookup"><span data-stu-id="85698-434">10:00:00</span></span> |<span data-ttu-id="85698-435">ABC1234</span><span class="sxs-lookup"><span data-stu-id="85698-435">ABC1234</span></span> |<span data-ttu-id="85698-436">7.0</span><span class="sxs-lookup"><span data-stu-id="85698-436">7.0</span></span> |<span data-ttu-id="85698-437">2.1</span><span class="sxs-lookup"><span data-stu-id="85698-437">2.1</span></span> |<span data-ttu-id="85698-438">5.3</span><span class="sxs-lookup"><span data-stu-id="85698-438">5.3</span></span> |
| <span data-ttu-id="85698-439">7/1/2015</span><span class="sxs-lookup"><span data-stu-id="85698-439">7/1/2015</span></span> |<span data-ttu-id="85698-440">10:00:01</span><span class="sxs-lookup"><span data-stu-id="85698-440">10:00:01</span></span> |<span data-ttu-id="85698-441">ABC1234</span><span class="sxs-lookup"><span data-stu-id="85698-441">ABC1234</span></span> |<span data-ttu-id="85698-442">7.1</span><span class="sxs-lookup"><span data-stu-id="85698-442">7.1</span></span> |<span data-ttu-id="85698-443">2.2</span><span class="sxs-lookup"><span data-stu-id="85698-443">2.2</span></span> |<span data-ttu-id="85698-444">4.3</span><span class="sxs-lookup"><span data-stu-id="85698-444">4.3</span></span> |
| <span data-ttu-id="85698-445">7/1/2015</span><span class="sxs-lookup"><span data-stu-id="85698-445">7/1/2015</span></span> |<span data-ttu-id="85698-446">10:00:02</span><span class="sxs-lookup"><span data-stu-id="85698-446">10:00:02</span></span> |<span data-ttu-id="85698-447">ABC1234</span><span class="sxs-lookup"><span data-stu-id="85698-447">ABC1234</span></span> |<span data-ttu-id="85698-448">6.0</span><span class="sxs-lookup"><span data-stu-id="85698-448">6.0</span></span> |<span data-ttu-id="85698-449">2.1</span><span class="sxs-lookup"><span data-stu-id="85698-449">2.1</span></span> |<span data-ttu-id="85698-450">4.0</span><span class="sxs-lookup"><span data-stu-id="85698-450">4.0</span></span> |

| <span data-ttu-id="85698-451">**Date**</span><span class="sxs-lookup"><span data-stu-id="85698-451">**Date**</span></span> | <bpt id="p1">**</bpt>Time<ept id="p1">**</ept> | <bpt id="p1">**</bpt>Location<ept id="p1">**</ept> | <bpt id="p1">**</bpt>Temperature<ept id="p1">**</ept> |
| --- | --- | --- | --- |
| <span data-ttu-id="85698-455">7/1/2015</span><span class="sxs-lookup"><span data-stu-id="85698-455">7/1/2015</span></span> |<span data-ttu-id="85698-456">10:00:00</span><span class="sxs-lookup"><span data-stu-id="85698-456">10:00:00</span></span> |<span data-ttu-id="85698-457">11242</span><span class="sxs-lookup"><span data-stu-id="85698-457">11242</span></span> |<span data-ttu-id="85698-458">24.4</span><span class="sxs-lookup"><span data-stu-id="85698-458">24.4</span></span> |
| <span data-ttu-id="85698-459">7/1/2015</span><span class="sxs-lookup"><span data-stu-id="85698-459">7/1/2015</span></span> |<span data-ttu-id="85698-460">10:00:01</span><span class="sxs-lookup"><span data-stu-id="85698-460">10:00:01</span></span> |<span data-ttu-id="85698-461">11242</span><span class="sxs-lookup"><span data-stu-id="85698-461">11242</span></span> |<span data-ttu-id="85698-462">24.4</span><span class="sxs-lookup"><span data-stu-id="85698-462">24.4</span></span> |
| <span data-ttu-id="85698-463">7/1/2015</span><span class="sxs-lookup"><span data-stu-id="85698-463">7/1/2015</span></span> |<span data-ttu-id="85698-464">10:00:02</span><span class="sxs-lookup"><span data-stu-id="85698-464">10:00:02</span></span> |<span data-ttu-id="85698-465">11242</span><span class="sxs-lookup"><span data-stu-id="85698-465">11242</span></span> |<span data-ttu-id="85698-466">24.5</span><span class="sxs-lookup"><span data-stu-id="85698-466">24.5</span></span> |

<span data-ttu-id="85698-467">從上面可以看出，這個範例包含與 3 電源階段相關聯的 3 個不同用電量值。</span><span class="sxs-lookup"><span data-stu-id="85698-467">As can be seen above, this example includes 3 different values for consumption associated with 3 power phases.</span></span> <span data-ttu-id="85698-468">另外，請注意日期和時間欄位分隔，但也可以結合成單一資料行。</span><span class="sxs-lookup"><span data-stu-id="85698-468">Also, note that the date and time fields are separated, however they can also be combined into a single column.</span></span> <span data-ttu-id="85698-469">在此案例中，位置資料行以 5 位數郵遞區號格式表示，溫度以攝氏度數格式表示。</span><span class="sxs-lookup"><span data-stu-id="85698-469">In this case the location column is represented in a 5-digit zip-code format and the temperature in a degree Celsius format.</span></span>

### <a name="data-format"></a><span data-ttu-id="85698-470">資料格式</span><span class="sxs-lookup"><span data-stu-id="85698-470">Data Format</span></span>
<span data-ttu-id="85698-471">Cortana Intelligence Suite 支援最常見的資料格式，例如 CSV、TSV、JSON 等。在專案的整個生命週期，資料格式必須保持一致。</span><span class="sxs-lookup"><span data-stu-id="85698-471">Cortana Intelligence Suite can support the most common data formats like CSV, TSV, JSON, *etc*. It is important that the data format stays consistent for the entire life cycle of the project.</span></span>

### <a name="data-ingestion"></a><span data-ttu-id="85698-472">資料擷取</span><span class="sxs-lookup"><span data-stu-id="85698-472">Data Ingestion</span></span>
<span data-ttu-id="85698-473">由於能源需求預測是持續且經常預測，我們必須確保有一個穩固且可靠的資料擷取程序不斷地傳送原始資料。</span><span class="sxs-lookup"><span data-stu-id="85698-473">Since energy demand forecast is constantly and frequently predicted, we must ensure that the raw data is flowing by means of a solid and reliable data ingestion process.</span></span> <span data-ttu-id="85698-474">擷取程序必須保證預測程序在需要時一定可以取得原始資料。</span><span class="sxs-lookup"><span data-stu-id="85698-474">The ingestion process must guarantee that the raw data is available for the forecasting process at the required time.</span></span> <span data-ttu-id="85698-475">這表示資料擷取頻率應該高於預測頻率。</span><span class="sxs-lookup"><span data-stu-id="85698-475">That implies that the data ingestion frequency should be greater than the forecasting frequency.</span></span>

<span data-ttu-id="85698-476">例如︰如果需求預測解決方案會在每天上午 8:00 產生新的預測，則我們需要確保在此之前已完全擷取過去 24 小時內已收集的所有資料，甚至包括過去一小時的資料。</span><span class="sxs-lookup"><span data-stu-id="85698-476">For example: If our demand forecasting solution would generate a new forecast at 8:00AM on a daily basis then we need to ensure that all the data that has been collected during the last 24 hours has been fully ingested till that point and has to even include the last hour of data.</span></span>

<span data-ttu-id="85698-477">為達成此目的，Cortana Intelligence Suite 提供各種方法來支援可靠的資料擷取程序。</span><span class="sxs-lookup"><span data-stu-id="85698-477">In order to accomplish this, Cortana Intelligence Suite offers various ways to support a reliable data ingestion process.</span></span> <span data-ttu-id="85698-478">這將在本文件的「部署」  一節進一步討論。</span><span class="sxs-lookup"><span data-stu-id="85698-478">This will be further discussed in the **Deployment** section of this document.</span></span>

### <a name="data-quality"></a><span data-ttu-id="85698-479">資料品質</span><span class="sxs-lookup"><span data-stu-id="85698-479">Data Quality</span></span>
<span data-ttu-id="85698-480">為了執行可靠且正確的需求預測，所需的原始資料來源必須符合一些基本的資料品質準則。</span><span class="sxs-lookup"><span data-stu-id="85698-480">The raw data source that is required for performing reliable and accurate demand forecasting must meet some basic data quality criteria.</span></span> <span data-ttu-id="85698-481">雖然進階統計方法可以用來彌補一些可能的資料品質問題，但在擷取新的資料時，我們仍然需要確保跨越某些基本的資料品質門檻。</span><span class="sxs-lookup"><span data-stu-id="85698-481">Although advanced statistical methods can be used to compensate for some possible data quality issue, we still need to ensure that we are crossing some base data quality threshold when ingesting new data.</span></span> <span data-ttu-id="85698-482">以下是關於原始資料品質的一些考量︰</span><span class="sxs-lookup"><span data-stu-id="85698-482">Here are a few considerations concerning raw data quality:</span></span>

* <span data-ttu-id="85698-483">**遺漏值** – 這是指未收集到特定度量的情況。</span><span class="sxs-lookup"><span data-stu-id="85698-483">**Missing value** – this refers to the situation when specific measurement was not collected.</span></span> <span data-ttu-id="85698-484">在此，基本要求是在任何指定的期間，遺漏值比率都不應該超過 10%。</span><span class="sxs-lookup"><span data-stu-id="85698-484">The basic requirement here is that the missing value rate should not be greater than 10% for any given time period.</span></span> <span data-ttu-id="85698-485">如果遺漏單一值，應該以預先定義的值 (例如：'9999') 表示，而不是可能為有效度量的 '0'。</span><span class="sxs-lookup"><span data-stu-id="85698-485">In case that a single value is missing it should be indicated by using a pre-defined value (for example: '9999') and not '0' which could be a valid measurement.</span></span>
* <span data-ttu-id="85698-486">**測量精確度** – 應該正確記錄用電量或溫度的實際值。</span><span class="sxs-lookup"><span data-stu-id="85698-486">**Measurement accuracy** – the actual value of consumption or temperature should be accurately recorded.</span></span> <span data-ttu-id="85698-487">不正確的測量會產生不正確的預測。</span><span class="sxs-lookup"><span data-stu-id="85698-487">Inaccurate measurements will produce inaccurate forecasts.</span></span> <span data-ttu-id="85698-488">一般而言，相對於真值，測量誤差應該低於 1%。</span><span class="sxs-lookup"><span data-stu-id="85698-488">Typically, the measurement error should be lower than 1% relative to the true value.</span></span>
* <span data-ttu-id="85698-489">**量時間** – 相對於實際測量的真正時間，收集資料的實際時間戳記不能偏離超過 10 秒。</span><span class="sxs-lookup"><span data-stu-id="85698-489">**Time of measurement** – it is required that the actual timestamp of the data collected will not deviate by more than 10 seconds relative to the true time of the actual measurement.</span></span>
* <span data-ttu-id="85698-490">**同步處理** – 使用多個資料來源時 (例如，用電量和溫度)，必須確保它們之間沒有時間同步化的問題。</span><span class="sxs-lookup"><span data-stu-id="85698-490">**Synchronization** – When multiple data sources are being used (*e.g.*, consumption and temperature) we must ensure that there are no time synchronization issues between them.</span></span> <span data-ttu-id="85698-491">這表示從任何兩個獨立的資料來源收集的時間戳記之間，時差不應超過 10 秒以上。</span><span class="sxs-lookup"><span data-stu-id="85698-491">This means that the time difference between the collected timestamp from any two independent data sources should not exceed more than 10 seconds.</span></span>
* <span data-ttu-id="85698-492">**延遲** - 如上所述，在**資料擷取**中，我們依賴可靠的資料流和擷取程序。</span><span class="sxs-lookup"><span data-stu-id="85698-492">**Latency** - As discussed above, in **Data Ingestion**, we are dependent on a reliable data flow and ingestion process.</span></span> <span data-ttu-id="85698-493">為了做好控制，必須確保我們控制資料延遲。</span><span class="sxs-lookup"><span data-stu-id="85698-493">To control that we must ensure that we control the data latency.</span></span> <span data-ttu-id="85698-494">這指定為從進行實際測量的時間，到已載入至 Cortana Intelligence Suite 儲存體且可供使用的時間，兩者之間的時差。</span><span class="sxs-lookup"><span data-stu-id="85698-494">This is specified as the time difference between the time that the actual measurement was taken and the time at which it has been loaded into the Cortana Intelligence Suite storage and is ready for use.</span></span> <span data-ttu-id="85698-495">對於短期負載預測，總延遲時間不應該超過 30 分鐘。</span><span class="sxs-lookup"><span data-stu-id="85698-495">For short term load forecasting the total latency should not be greater than 30 minutes.</span></span> <span data-ttu-id="85698-496">對於長期負載預測，總延遲時間不應該超過 1 天。</span><span class="sxs-lookup"><span data-stu-id="85698-496">For long term load forecasting the total latency should not be greater than 1 day.</span></span>

### <a name="data-preparation-and-feature-engineering"></a><span data-ttu-id="85698-497">資料準備和特徵設計</span><span class="sxs-lookup"><span data-stu-id="85698-497">Data Preparation and Feature Engineering</span></span>
<span data-ttu-id="85698-498">擷取原始資料 (請參閱「資料擷取」 ) 並安全地儲存後，就可以開始處理。</span><span class="sxs-lookup"><span data-stu-id="85698-498">Once the raw data has been ingested (see **Data Ingestion**) and has been securely stored, it is ready to be processed.</span></span> <span data-ttu-id="85698-499">基本上，資料準備階段是取得原始資料並轉換 (變換、重塑) 成適用於模型化階段的格式。</span><span class="sxs-lookup"><span data-stu-id="85698-499">The data preparation phase is basically taking the raw data and converting (transforming, reshaping) it into a form for the modeling phase.</span></span> <span data-ttu-id="85698-500">其中包括簡單的作業，例如直接使用原始資料行及其實際的測量值、標準化值，還有更複雜的作業，例如 [時間延遲](https://en.wikipedia.org/wiki/Lag_operator)等。</span><span class="sxs-lookup"><span data-stu-id="85698-500">That may include simple operations such as using the raw data column as is with its actual measured value, standardized values,  more complex operations such as [time lagging](https://en.wikipedia.org/wiki/Lag_operator), and others.</span></span> <span data-ttu-id="85698-501">新建立的資料行稱為資料特徵，而產生這些特徵的程序就稱為特徵設計。</span><span class="sxs-lookup"><span data-stu-id="85698-501">The newly created data columns are referred to as data features and the process of generating these is referred to as feature engineering.</span></span> <span data-ttu-id="85698-502">此程序結束時，我們會獲得一組從原始資料導出的新資料集，可用於模型化。</span><span class="sxs-lookup"><span data-stu-id="85698-502">By the end of this process we would have a new data set that has been derived from the raw data and can be used for modeling.</span></span> <span data-ttu-id="85698-503">此外，資料準備階段還必須處理並補償遺漏值 (請參閱「資料品質」 )。</span><span class="sxs-lookup"><span data-stu-id="85698-503">In addition, the data preparation phase needs to take care of missing values (see **Data Quality**) and compensate for them.</span></span> <span data-ttu-id="85698-504">在某些情況下，我們也需要將資料正規化，以確保所有的值都以相同的級別表示。</span><span class="sxs-lookup"><span data-stu-id="85698-504">In some cases, we would also need to normalize the data to ensure that all values are represented in the same scale.</span></span>

<span data-ttu-id="85698-505">在本節，我們列出能源需求預測模型包含的一些常見的資料特徵。</span><span class="sxs-lookup"><span data-stu-id="85698-505">In this section we list some of the common data features that are included in the energy demand forecast models.</span></span>

<span data-ttu-id="85698-506">**時間導向特徵︰** 這些特徵衍生自日期/時間戳記資料。</span><span class="sxs-lookup"><span data-stu-id="85698-506">**Time driven features:** These features are derived from the date/timestamp data.</span></span> <span data-ttu-id="85698-507">這些在擷取後會轉換成類別特徵，例如︰</span><span class="sxs-lookup"><span data-stu-id="85698-507">These are extracted and converted into categorical features like:</span></span>

* <span data-ttu-id="85698-508">當天時間 – 這是一天中的時段，接受的值從 0 到 23</span><span class="sxs-lookup"><span data-stu-id="85698-508">Time of day – This is the hour of the day which takes values from 0 to 23</span></span>
* <span data-ttu-id="85698-509">星期 – 這代表星期幾，接受的值從 1 (星期日) 到 7 (星期六)</span><span class="sxs-lookup"><span data-stu-id="85698-509">Day of week – This represents the day of the week and takes values from 1 (Sunday) to 7 (Saturday)</span></span>
* <span data-ttu-id="85698-510">月份日期 – 這代表實際的日期，接受的值從 1 到 31</span><span class="sxs-lookup"><span data-stu-id="85698-510">Day of month – This represents the actual date and can take values from 1 to 31</span></span>
* <span data-ttu-id="85698-511">年度月份 – 這代表月份，接受的值從 1 (一月) 到 12 (十二月)</span><span class="sxs-lookup"><span data-stu-id="85698-511">Month of year – This represents the month and takes values from 1 (January) to 12 (December)</span></span>
* <span data-ttu-id="85698-512">週末 – 這是二進位值特徵，接受的值為 0 (工作日) 或 1 (週末)</span><span class="sxs-lookup"><span data-stu-id="85698-512">Weekend – This is a binary value feature that takes the values of 0 for weekdays or 1 for weekend</span></span>
* <span data-ttu-id="85698-513">假日 – 這是二進位值特徵，接受的值為 0 (平日) 或 1 (假日)</span><span class="sxs-lookup"><span data-stu-id="85698-513">Holiday - This is a binary value feature that takes the values of 0 for a regular day or 1 for a holiday</span></span>
* <span data-ttu-id="85698-514">傅立葉項 – 傅立葉項是衍生自時間戳記的權數，用來擷取資料中的季節性 (週期)。</span><span class="sxs-lookup"><span data-stu-id="85698-514">Fourier terms – The Fourier terms are weights that are derived from the timestamp and are used to capture the seasonality (cycles) in the data.</span></span> <span data-ttu-id="85698-515">因為資料中可能有多個季節，我們可能需要多個傅立葉項。</span><span class="sxs-lookup"><span data-stu-id="85698-515">Since we may have multiple seasons in our data we may need multiple Fourier terms.</span></span> <span data-ttu-id="85698-516">例如，需求值可能有每年、每週和每日季節/週期，所以需要 3 個傅立葉項。</span><span class="sxs-lookup"><span data-stu-id="85698-516">For example, demand values may have yearly, weekly, and daily seasons/cycles which will result in 3 Fourier terms.</span></span>

<span data-ttu-id="85698-517">**獨立測量特徵︰** 獨立特徵包括我們想要在模型中作為預測因子的所有資料元素。</span><span class="sxs-lookup"><span data-stu-id="85698-517">**Independent measurement features:** The independent features include all the data elements that we would like to use as predictors in our model.</span></span> <span data-ttu-id="85698-518">在此我們排除需要預測的相依特徵。</span><span class="sxs-lookup"><span data-stu-id="85698-518">Here we exclude the dependent feature which we would need to predict.</span></span>

* <span data-ttu-id="85698-519">延隔特徵 – 這些是實際需求的時間偏移值。</span><span class="sxs-lookup"><span data-stu-id="85698-519">Lag feature – these are time shifted values of the actual demand.</span></span> <span data-ttu-id="85698-520">比方說，相對於目前的時間戳記，延隔 1 的特徵保留前一個小時的需求值 (假設是每小時資料)。</span><span class="sxs-lookup"><span data-stu-id="85698-520">For example, lag 1 features will hold the demand value in the previous hour (assuming hourly data) relative to the current timestamp.</span></span> <span data-ttu-id="85698-521">同樣地，我們可以新增延隔 2、延隔 3 等等。實際使用的延隔時間組合是在模型化階段經由評估模型結果而決定。</span><span class="sxs-lookup"><span data-stu-id="85698-521">Similarly, we can add lag 2, lag 3, *etc*. The actual combination of lag features that are used are determined during the modeling phase by evaluation of the model results.</span></span>
* <span data-ttu-id="85698-522">長期趨勢 – 此特徵代表年份之間需求的線性成長。</span><span class="sxs-lookup"><span data-stu-id="85698-522">Long term trending – this feature represents the linear growth in demand between years.</span></span>

<span data-ttu-id="85698-523">**相依特徵︰** 相依特徵是模型要預測的資料行。</span><span class="sxs-lookup"><span data-stu-id="85698-523">**Dependent feature:** The dependent feature is the data column which we would like our model to predict.</span></span> <span data-ttu-id="85698-524">使用 [監督式機器學習服務](https://en.wikipedia.org/wiki/Supervised_learning)時，我們必須先使用相依特徵 (也稱為標籤) 來訓練模型。</span><span class="sxs-lookup"><span data-stu-id="85698-524">With [supervised machine learning](https://en.wikipedia.org/wiki/Supervised_learning), we need to first train the model using the dependent features (which is also referred to as labels).</span></span> <span data-ttu-id="85698-525">這可讓模型從相依特徵相關聯的資料中學習模式。</span><span class="sxs-lookup"><span data-stu-id="85698-525">This allows the model to learn the patterns in the data associated with the dependent feature.</span></span> <span data-ttu-id="85698-526">在能源需求預測中，我們通常想要預測實際需求，因此會將它當作相依特徵。</span><span class="sxs-lookup"><span data-stu-id="85698-526">In energy demand forecast we typically want to predict the actual demand and therefore we would use it as the dependent feature.</span></span>

<span data-ttu-id="85698-527">**處理遺漏值︰** 在資料準備階段，我們需要決定最佳策略來處理遺漏值。</span><span class="sxs-lookup"><span data-stu-id="85698-527">**Handling of missing values:** During the data preparation phase, we would need to determine the best strategy to handle missing values.</span></span> <span data-ttu-id="85698-528">這通常是利用各種統計來處理[資料插補方法](https://en.wikipedia.org/wiki/Imputation_\(statistics\))。</span><span class="sxs-lookup"><span data-stu-id="85698-528">This is mostly done by using the various statistical [data imputation methods](https://en.wikipedia.org/wiki/Imputation_\(statistics\)).</span></span> <span data-ttu-id="85698-529">以能源需求預測而言，我們通常從先前可用的資料點利用移動平均來推算遺漏值。</span><span class="sxs-lookup"><span data-stu-id="85698-529">In the case of energy demand forecasting, we typically impute missing values by using moving average from previous available data points.</span></span>

<span data-ttu-id="85698-530">**資料正規化︰** 資料正規化是另一種轉換，用於將所有數值資料 (例如需求預測) 變成類似的級別。</span><span class="sxs-lookup"><span data-stu-id="85698-530">**Data Normalization:** Data normalization is another type of transformation which is used to bring all numeric data such as demand forecast into a similar scale.</span></span> <span data-ttu-id="85698-531">這通常有助於改善模型的正確性和精確度。</span><span class="sxs-lookup"><span data-stu-id="85698-531">This typically helps improve the model accuracy and precision.</span></span> <span data-ttu-id="85698-532">在作法上我們通常會依資料範圍來分割實際值。</span><span class="sxs-lookup"><span data-stu-id="85698-532">We would typically do this by dividing the actual value by the range of the data.</span></span>
<span data-ttu-id="85698-533">這會將原始值按比例縮小到較小的範圍，通常介於 -1 和 1 之間。</span><span class="sxs-lookup"><span data-stu-id="85698-533">This will scale the original value down into a smaller range, typically between -1 and 1.</span></span>

## <a name="modeling"></a><span data-ttu-id="85698-534">模型化</span><span class="sxs-lookup"><span data-stu-id="85698-534">Modeling</span></span>
<span data-ttu-id="85698-535">模型化階段會將資料轉換成模型。</span><span class="sxs-lookup"><span data-stu-id="85698-535">The modeling phase is where the conversion of the data into a model takes place.</span></span> <span data-ttu-id="85698-536">此程序的核心是進階的演算法，負責掃描歷史資料 (訓練資料)、擷取模式及建立模型。</span><span class="sxs-lookup"><span data-stu-id="85698-536">In the core of this process there are advanced algorithms that scan the historical data (training data), extract patterns, and build a model.</span></span> <span data-ttu-id="85698-537">稍後，該模型可用來預測未用來建立模型的新資料。</span><span class="sxs-lookup"><span data-stu-id="85698-537">That model can be later used to predict on new data that has not been used to build the model.</span></span>

<span data-ttu-id="85698-538">獲得可靠的工作模型後，我們就可以用它來評比在結構上包含所需特徵 (X) 的新資料。</span><span class="sxs-lookup"><span data-stu-id="85698-538">Once we have a working reliable model we can then use it to score new data that is structured to include the required features (X).</span></span> <span data-ttu-id="85698-539">評分程序將使用持續性模型 (來自訓練階段的物件)，並預測由 Ŷ 所表示的目標變數。</span><span class="sxs-lookup"><span data-stu-id="85698-539">The scoring process will make use of the persisted model (object from the training phase) and predict the target variable that is denoted by Ŷ.</span></span>

### <a name="demand-forecasting-modeling-techniques"></a><span data-ttu-id="85698-540">需求預測模型化技巧</span><span class="sxs-lookup"><span data-stu-id="85698-540">Demand Forecasting Modeling Techniques</span></span>
<span data-ttu-id="85698-541">在需求預測方面，我們會使用依時間排序的歷史資料。</span><span class="sxs-lookup"><span data-stu-id="85698-541">In the case of demand forecasting we make use of historical data which is ordered by time.</span></span> <span data-ttu-id="85698-542">我們通常將包含時間維度的資料稱為 [時間序列](https://en.wikipedia.org/wiki/Time_series)。</span><span class="sxs-lookup"><span data-stu-id="85698-542">We generally refer to data that includes the time dimension as [time series](https://en.wikipedia.org/wiki/Time_series).</span></span> <span data-ttu-id="85698-543">時間序列模型化的目標是尋找時間相關的趨勢、季節性、自相關 (經過一段時間的相互關聯)，並將這些編寫成模型。</span><span class="sxs-lookup"><span data-stu-id="85698-543">The goal in time series modeling is to find time related trends, seasonality, auto-correlation (correlation over time), and formulate those into a model.</span></span>

<span data-ttu-id="85698-544">在最近幾年，已開發出進階演算法來配合時間序列預測，並改善預測精確度。</span><span class="sxs-lookup"><span data-stu-id="85698-544">In recent years advanced algorithms have been developed to accommodate time series forecasting and to improve forecasting accuracy.</span></span> <span data-ttu-id="85698-545">在此我們簡短討論其中一部分。</span><span class="sxs-lookup"><span data-stu-id="85698-545">We briefly discuss a few of them here.</span></span>

> [!NOTE]
> <span data-ttu-id="85698-546">本節並不做為機器學習服務和預測的概觀，只是簡單審視需求預測常用的模型化技術。</span><span class="sxs-lookup"><span data-stu-id="85698-546">This section is not intended to be used as a machine learning and forecasting overview but rather as a short survey of modeling techniques that are commonly used for demand forecasting.</span></span> <span data-ttu-id="85698-547">如需時間序列預測相關的詳細資訊和教學資料，強烈建議您閱讀線上書籍 [Forecasting: principles and practice](https://www.otexts.org/book/fpp)。</span><span class="sxs-lookup"><span data-stu-id="85698-547">For more information and educational material about time series forecasting, we highly recommend the online book [Forecasting: principles and practice](https://www.otexts.org/book/fpp).</span></span>
> 
> 

#### <a name="ma-moving-averagehttpswwwotextsorgfpp62"></a>[<span data-ttu-id="85698-548">**MA (移動平均)**</span><span class="sxs-lookup"><span data-stu-id="85698-548">**MA (Moving Average)**</span></span>](https://www.otexts.org/fpp/6/2)
<span data-ttu-id="85698-549">移動平均是時間序列預測的第一代分析技巧之一，目前仍是最常用的其中一項技巧。</span><span class="sxs-lookup"><span data-stu-id="85698-549">Moving average is one of the first analytical techniques that has been used for time series forecasting and it is still one of the most commonly used techniques as of today.</span></span> <span data-ttu-id="85698-550">它也是更進階預測技巧的基礎。</span><span class="sxs-lookup"><span data-stu-id="85698-550">It is also the foundation for more advanced forecasting techniques.</span></span> <span data-ttu-id="85698-551">使用移動平均時，我們會將 K 個最近資料點算出平均值，以預測下一個資料點，其中 K 表示移動平均的順序。</span><span class="sxs-lookup"><span data-stu-id="85698-551">With moving average we are forecasting the next data point by averaging over the K most recent points, where K denotes the order of the moving average.</span></span>

<span data-ttu-id="85698-552">移動平均技巧具有將預測平滑化的效果，因此可能無法處理資料中的劇烈波動性。</span><span class="sxs-lookup"><span data-stu-id="85698-552">The moving average technique has the effect of smoothing the forecast and therefore may not handle well large volatility in the data.</span></span>

#### <a name="ets-exponential-smoothinghttpswwwotextsorgfpp75"></a>[<span data-ttu-id="85698-553">**ETS (指數平滑法)**</span><span class="sxs-lookup"><span data-stu-id="85698-553">**ETS (Exponential Smoothing)**</span></span>](https://www.otexts.org/fpp/7/5)
<span data-ttu-id="85698-554">指數平滑法 (ETS) 是一系列的各種方法，使用最近資料點的加權平均來預測下一個資料點。</span><span class="sxs-lookup"><span data-stu-id="85698-554">Exponential Smoothing (ETS) is a family of various methods which use weighted average of recent data points in order to predict the next data point.</span></span> <span data-ttu-id="85698-555">在概念上是將較高權數指派給較新的值，而對於較舊的測量值，就逐漸降低此權數。</span><span class="sxs-lookup"><span data-stu-id="85698-555">The idea is to assign higher weights to more recent values and gradually decrease this weight for older measured values.</span></span> <span data-ttu-id="85698-556">這一系列有許多不同的方法，其中包括處理資料中的季節性，例如 [Holt-Winters 季節性方法](https://www.otexts.org/fpp/7/5)。</span><span class="sxs-lookup"><span data-stu-id="85698-556">There are a number of different methods with this family, some of them include handling of seasonality in the data such as [Holt-Winters Seasonal Method](https://www.otexts.org/fpp/7/5).</span></span>

<span data-ttu-id="85698-557">其中某些方法也會納入資料的季節性。</span><span class="sxs-lookup"><span data-stu-id="85698-557">Some of these methods also factor in the seasonality of the data.</span></span>

#### <a name="arima-auto-regression-integrated-moving-averagehttpswwwotextsorgfpp8"></a>[<span data-ttu-id="85698-558">**ARIMA (自迴歸整合移動平均)**</span><span class="sxs-lookup"><span data-stu-id="85698-558">**ARIMA (Auto Regression Integrated Moving Average)**</span></span>](https://www.otexts.org/fpp/8)
<span data-ttu-id="85698-559">自迴歸整合移動平均 (ARIMA) 是常用於時間序列預測的另一系列的方法。</span><span class="sxs-lookup"><span data-stu-id="85698-559">Auto Regression Integrated Moving Average (ARIMA) is another family of methods which is commonly used for time series forecasting.</span></span> <span data-ttu-id="85698-560">實際上是結合自迴歸方法與移動平均。</span><span class="sxs-lookup"><span data-stu-id="85698-560">It practically combines auto-regression methods with moving average.</span></span> <span data-ttu-id="85698-561">自迴歸方法使用迴歸模型時會取得先前的時間序列值來計算下一個日期點。</span><span class="sxs-lookup"><span data-stu-id="85698-561">Auto-regression methods use regression models by taking previous time series values in order to compute the next date point.</span></span> <span data-ttu-id="85698-562">ARIMA 方法也運用差異性方法，包括計算資料點之間的差異，以及使用它們而不是原始的測量值。</span><span class="sxs-lookup"><span data-stu-id="85698-562">ARIMA methods also apply differencing methods that include calculating the difference between data points and using those instead of the original measured value.</span></span> <span data-ttu-id="85698-563">最後，ARIMA 也使用上面所討論的移動平均技巧。</span><span class="sxs-lookup"><span data-stu-id="85698-563">Finally, ARIMA also makes use of the moving average techniques that are discussed above.</span></span> <span data-ttu-id="85698-564">以各種方式將所有這些方法組合起來，就構成 ARIMA 方法系列。</span><span class="sxs-lookup"><span data-stu-id="85698-564">The combination of all of these methods in various ways is what constructs the family of ARIMA methods.</span></span>

<span data-ttu-id="85698-565">ETS 和 ARIMA 現在廣泛用於能源需求預測和其他許多的預測問題。</span><span class="sxs-lookup"><span data-stu-id="85698-565">ETS and ARIMA are widely used today for energy demand forecasting and many other forecasting problems.</span></span> <span data-ttu-id="85698-566">在許多情況下，這些結合起來可提供非常精確的結果。</span><span class="sxs-lookup"><span data-stu-id="85698-566">In many cases these are combined together to deliver very accurate results.</span></span>

<span data-ttu-id="85698-567">**一般多元迴歸** 迴歸模型可能是機器學習服務和統計學領域中最重要的模型化方法。</span><span class="sxs-lookup"><span data-stu-id="85698-567">**General Multiple Regression** Regression models could be the most important modeling approach within the domain of machine learning and statistics.</span></span> <span data-ttu-id="85698-568">在時間序列方面，我們使用迴歸來預測未來值 (例如，需求的)。</span><span class="sxs-lookup"><span data-stu-id="85698-568">In the context of time series we use regression to predict the future values (*e.g.*, of demand).</span></span> <span data-ttu-id="85698-569">在迴歸中，我們取得預測值的線性組合，並在訓練過程中學習這些預測值的加權 (也稱為係數)。</span><span class="sxs-lookup"><span data-stu-id="85698-569">In regression we take a linear combination of the predictors and learn the weights (also referred to as coefficients) of those predictors during the training process.</span></span> <span data-ttu-id="85698-570">目標是產生迴歸線來預測我們的預測值。</span><span class="sxs-lookup"><span data-stu-id="85698-570">The goal is to produce a regression line that will forecast our predicted value.</span></span> <span data-ttu-id="85698-571">當目標變數為數值，就適合採用迴歸方法，因此也適用於時間序列預測。</span><span class="sxs-lookup"><span data-stu-id="85698-571">Regression methods are suitable when the target variable is numeric and therefore also fits time series forecasting.</span></span> <span data-ttu-id="85698-572">有各種不同的迴歸方法，包括非常簡單的迴歸模型，例如[線性迴歸](https://en.wikipedia.org/wiki/Linear_regression)，還有更進階的迴歸方法，例如決策樹、[隨機樹系](https://en.wikipedia.org/wiki/Random_forest)、[類神經網路](https://en.wikipedia.org/wiki/Artificial_neural_network)和推進式決策樹。</span><span class="sxs-lookup"><span data-stu-id="85698-572">There is a wide range of regression methods including very simple regression models such as [Linear Regression](https://en.wikipedia.org/wiki/Linear_regression) and more advanced ones such as decision trees, [Random Forests](https://en.wikipedia.org/wiki/Random_forest), [Neural Networks](https://en.wikipedia.org/wiki/Artificial_neural_network), and Boosted Decision Trees.</span></span>

<span data-ttu-id="85698-573">將能源需求預測當作迴歸問題來建構，讓我們在選取資料特徵時很有彈性，這些特徵可能結合自實際的需求時間序列資料和外部因素 (例如溫度)。</span><span class="sxs-lookup"><span data-stu-id="85698-573">Constructing energy demand forecasting as a regression problem gives us a lot of flexibility in selecting our data features which can be combined from the actual demand time series data and external factors such as temperature.</span></span> <span data-ttu-id="85698-574">本教戰守則的「特徵設計」(請參閱「資料準備和特徵設計」 ) 一節討論所選特徵的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="85698-574">More information about the selected features are discussed in the Feature Engineering (see **Data Preparation and Feature Engineering**) section of this playbook.</span></span>

<span data-ttu-id="85698-575">根據我們在實作和部署能源需求預測試驗的經驗，我們發現 Azure ML 中可用的進階迴歸模型可產生最佳結果，因此我們採用它們。</span><span class="sxs-lookup"><span data-stu-id="85698-575">From our experience with implementation and deployment of energy demand forecasts pilot, we have found that the advanced regression models that are available in Azure ML tend to produce the best results and we make use of them.</span></span>

## <a name="model-evaluation"></a><span data-ttu-id="85698-576">模型評估</span><span class="sxs-lookup"><span data-stu-id="85698-576">Model Evaluation</span></span>
<span data-ttu-id="85698-577">模型評估在「模型開發週期」 內扮演重要的角色。</span><span class="sxs-lookup"><span data-stu-id="85698-577">Model evaluation has a critical role within the **Model Development Cycle**.</span></span> <span data-ttu-id="85698-578">在這個步驟中，我們以現實生活中的資料來探討驗證模型及其表現。</span><span class="sxs-lookup"><span data-stu-id="85698-578">At this step we look into validating the model and its performance with real life data.</span></span> <span data-ttu-id="85698-579">在模型化步驟期間，我們使用一部分可用的資料來訓練模型。</span><span class="sxs-lookup"><span data-stu-id="85698-579">During the modeling step we use a part of the available data for training the model.</span></span> <span data-ttu-id="85698-580">在評估階段，我們利用剩餘的資料來測試模型。</span><span class="sxs-lookup"><span data-stu-id="85698-580">During the evaluation phase we take the remainder of the data to test the model.</span></span> <span data-ttu-id="85698-581">實際上，這表示我們在模型中輸入的新資料已重新編排，且包含與訓練資料集相同的特徵。</span><span class="sxs-lookup"><span data-stu-id="85698-581">Practically it means that we are feeding the model new data that has been restructured and contains the same features as the training dataset.</span></span> <span data-ttu-id="85698-582">不過，在驗證過程中，我們使用模型來預測目標變數，而不是提供可用的目標變數。</span><span class="sxs-lookup"><span data-stu-id="85698-582">However, during the validation process, we use the model to predict the target variable rather than provide the available target variable.</span></span> <span data-ttu-id="85698-583">我們通常稱此程序稱為模型評分。</span><span class="sxs-lookup"><span data-stu-id="85698-583">We often refer to this process as model scoring.</span></span> <span data-ttu-id="85698-584">然後，我們會使用真實目標值，並與預測值做比較。</span><span class="sxs-lookup"><span data-stu-id="85698-584">We would then use the true target values and compare them with the predicted ones.</span></span> <span data-ttu-id="85698-585">在此，目標是測量並最小化預測誤差，也就是預測值與真值之間的差異。</span><span class="sxs-lookup"><span data-stu-id="85698-585">The goal here is to measure and minimize the prediction error, meaning the difference between the predictions and the true value.</span></span> <span data-ttu-id="85698-586">量化錯誤度量是關鍵，因為我們想要微調模型，並驗證是否確實減少錯誤。</span><span class="sxs-lookup"><span data-stu-id="85698-586">Quantifying the error measurement is key since we would like to fine-tune the model and validate whether the error is actually decreasing.</span></span> <span data-ttu-id="85698-587">微調模型可以透過修改控制學習程序的模型參數，也可以新增或移除資料特徵 (稱為 [參數掃掠](https://channel9.msdn.com/Blogs/Azure/Data-Science-Series-Building-an-Optimal-Model-With-Parameter-Sweep))。</span><span class="sxs-lookup"><span data-stu-id="85698-587">Fine-tuning the model can be done by modifying model parameters that control the learning process, or by adding or removing data features (referred to as [parameters sweep](https://channel9.msdn.com/Blogs/Azure/Data-Science-Series-Building-an-Optimal-Model-With-Parameter-Sweep)).</span></span> <span data-ttu-id="85698-588">實際上，這表示我們可能需要在特徵設計、模型化和模型評估階段之間反覆許多次，直到能夠將錯誤減少到所需的程度為止。</span><span class="sxs-lookup"><span data-stu-id="85698-588">Practically that means that we may need to iterate between the feature engineering, modeling, and model evaluation phases multiple times until we are able to reduce the error to the required level.</span></span>

<span data-ttu-id="85698-589">必須強調，預測誤差永遠不會是零，因為從來沒有任何模型能夠完美預測所有結果。</span><span class="sxs-lookup"><span data-stu-id="85698-589">It is important to emphasis that the prediction error will never be zero as there is never a model that can perfectly predict every outcome.</span></span> <span data-ttu-id="85698-590">不過，企業仍可接受一定程度的誤差量。</span><span class="sxs-lookup"><span data-stu-id="85698-590">However, there is a certain magnitude of error that is acceptable by the business.</span></span> <span data-ttu-id="85698-591">在驗證過程中，我們想要確保模型預測誤差等於或高於商業容忍度。</span><span class="sxs-lookup"><span data-stu-id="85698-591">During the validation process, we would like to ensure that our model prediction error is at the level or better than the business tolerance level.</span></span> <span data-ttu-id="85698-592">因此，在「問題編寫」  階段的週期開頭，就必須設定誤差容忍度。</span><span class="sxs-lookup"><span data-stu-id="85698-592">It is therefore important to set the level of the tolerable error at the beginning of the cycle during the **Problem Formulation** phase.</span></span>

### <a name="typical-evaluation-techniques"></a><span data-ttu-id="85698-593">一般評估技術</span><span class="sxs-lookup"><span data-stu-id="85698-593">Typical Evaluation Techniques</span></span>
<span data-ttu-id="85698-594">有各種方法可測量和量化預測誤差。</span><span class="sxs-lookup"><span data-stu-id="85698-594">There are various ways in which prediction error can be measured and quantified.</span></span> <span data-ttu-id="85698-595">在本節，我們將專注於討論有關時間序列的預測技巧，尤其是能源需求預測。</span><span class="sxs-lookup"><span data-stu-id="85698-595">In this section we will focus the discussion on evaluation techniques relevant to time series and in specific for energy demand forecast.</span></span>

#### <a name="mapehttpsenwikipediaorgwikimeanabsolutepercentageerror"></a>[<span data-ttu-id="85698-596">**MAPE**</span><span class="sxs-lookup"><span data-stu-id="85698-596">**MAPE**</span></span>](https://en.wikipedia.org/wiki/Mean_absolute_percentage_error)
<span data-ttu-id="85698-597">MAPE (Mean Absolute Percentage Error) 代表「平均絕對百分比誤差」。</span><span class="sxs-lookup"><span data-stu-id="85698-597">MAPE stands for Mean Absolute Percentage Error.</span></span> <span data-ttu-id="85698-598">我們利用 MAPE 來計算每一個預測點和該點的實際值之間的差異。</span><span class="sxs-lookup"><span data-stu-id="85698-598">With MAPE we are computing the difference between each forecasted point and the actual value of that point.</span></span> <span data-ttu-id="85698-599">接著，我們計算差異相對於實際值的比例，以量化每個點的誤差。</span><span class="sxs-lookup"><span data-stu-id="85698-599">We then quantify the error per point by calculating the proportion of the difference relative to the actual value.</span></span> <span data-ttu-id="85698-600">在最後一個步驟中，我們計算這些值的平均。</span><span class="sxs-lookup"><span data-stu-id="85698-600">At the last step we average these values.</span></span> <span data-ttu-id="85698-601">MAPE 使用的數學公式如下所示︰</span><span class="sxs-lookup"><span data-stu-id="85698-601">The mathematical formula used for MAPE is the following:</span></span>

<span data-ttu-id="85698-602">![MAPE 公式](media/cortana-analytics-playbook-demand-forecasting-energy/mape-formula.png)
 *其中 A<sub>t</sub> 是實際值，F<sub>t</sub> 是預測值，而 n 是預測時間範圍*</span><span class="sxs-lookup"><span data-stu-id="85698-602">![MAPE Formula](media/cortana-analytics-playbook-demand-forecasting-energy/mape-formula.png)
*Where A<sub>t</sub> is the actual value, F<sub>t</sub> is the predicted value, and n is the forecast horizon.*</span></span>

## <a name="deployment"></a><span data-ttu-id="85698-603">部署</span><span class="sxs-lookup"><span data-stu-id="85698-603">Deployment</span></span>
<span data-ttu-id="85698-604">一旦完成模型化階段，也已驗證模型的效能，我們就可以開始進入部署階段。</span><span class="sxs-lookup"><span data-stu-id="85698-604">Once we have nailed down the modeling phase and validated the model performance we are ready to go into the deployment phase.</span></span> <span data-ttu-id="85698-605">就此而言，部署是指讓客戶在模型上大規模執行實際預測來運用模型。</span><span class="sxs-lookup"><span data-stu-id="85698-605">In this context, deployment means enabling the customer to consume the model by running actual predictions on it at large scale.</span></span> <span data-ttu-id="85698-606">部署概念是 Azure ML 中的關鍵，因為我們的主要目標是不斷地引用預測，而不是只從資料找到領悟而已。</span><span class="sxs-lookup"><span data-stu-id="85698-606">The concept of deployment is key in Azure ML since our main goal is to constantly invoke predictions as opposed to just obtaining the insight from the data.</span></span> <span data-ttu-id="85698-607">在部署階段，我們讓模型開始被大規模運用。</span><span class="sxs-lookup"><span data-stu-id="85698-607">The deployment phase is the part where we enable the model to be consumed at large scale.</span></span>

<span data-ttu-id="85698-608">在能源需求預測方面，我們的目標是引用連續和定期的預測，同時確保模型可取得最新的資料，並將預測的資料傳回給取用的用戶端。</span><span class="sxs-lookup"><span data-stu-id="85698-608">Within the context of energy demand forecast, our aim is to invoke continuous and periodic forecasts while ensuring that fresh data is available for the model and that the forecasted data is sent back to the consuming client.</span></span>

### <a name="web-services-deployment"></a><span data-ttu-id="85698-609">Web 服務部署</span><span class="sxs-lookup"><span data-stu-id="85698-609">Web Services Deployment</span></span>
<span data-ttu-id="85698-610">在 Azure ML 中，主要的可部署建置組塊是 Web 服務。</span><span class="sxs-lookup"><span data-stu-id="85698-610">The main deployable building block in Azure ML is the web service.</span></span> <span data-ttu-id="85698-611">這是在雲端中利用預測模型的最有效方式。</span><span class="sxs-lookup"><span data-stu-id="85698-611">This is the most effective way to enable consumption of a predictive model in the cloud.</span></span> <span data-ttu-id="85698-612">Web 服務封裝模型，並以 [RESTful](http://www.restapitutorial.com/) API (應用程式開發介面) 來包裝它。</span><span class="sxs-lookup"><span data-stu-id="85698-612">The Web service encapsulates the model and wraps it up with a [RESTful](http://www.restapitutorial.com/) API (Application Programming Interface).</span></span> <span data-ttu-id="85698-613">API 可以做為任何用戶端程式碼的一部分，如下圖所示。</span><span class="sxs-lookup"><span data-stu-id="85698-613">The API can be used as part of any client code as illustrated in the diagram below.</span></span>

![Web 服務部署和取用](media/cortana-analytics-playbook-demand-forecasting-energy/web-service-deployment-and-consumption.png)

<span data-ttu-id="85698-615">由此可知，Web 服務是部署在 Cortana Intelligence Suite 雲端，然後透過其公開的 REST API 端點來叫用。</span><span class="sxs-lookup"><span data-stu-id="85698-615">As can be seen, the web service is deployed in the Cortana Intelligence Suite cloud and can be invoked over its exposed REST API endpoint.</span></span> <span data-ttu-id="85698-616">位於不同網域的各種不同的用戶端，可以透過 Web API 服務來同時叫用服務。</span><span class="sxs-lookup"><span data-stu-id="85698-616">Different type of clients across various domains can invoke the service through the Web API simultaneously.</span></span> <span data-ttu-id="85698-617">Web 服務也可以擴大來支援數千個同時的呼叫。</span><span class="sxs-lookup"><span data-stu-id="85698-617">The web service can also scale to support thousands of concurrent calls.</span></span>

### <a name="a-typical-solution-architecture"></a><span data-ttu-id="85698-618">典型的解決方案架構</span><span class="sxs-lookup"><span data-stu-id="85698-618">A Typical Solution Architecture</span></span>
<span data-ttu-id="85698-619">在部署能源需求預測解決方案時，我們的興趣是部署端對端解決方案，超越預測 Web 服務，並加速整個資料流。</span><span class="sxs-lookup"><span data-stu-id="85698-619">When deploying an energy demand forecasting solution, we are interested in deploying an end to end solution that goes beyond the prediction web service and facilitates the entire data flow.</span></span> <span data-ttu-id="85698-620">當我們叫用新的預測時，我們必須確定可供應最新的資料特徵給模型。</span><span class="sxs-lookup"><span data-stu-id="85698-620">At the time we invoke a new forecast, we would need to make sure that the model is fed with the up-to-date data features.</span></span> <span data-ttu-id="85698-621">這表示需要不斷地擷取、處理及轉換新收集的原始資料，成為賴以建立模型的必要特徵。</span><span class="sxs-lookup"><span data-stu-id="85698-621">That implies that the newly collected raw data is constantly ingested, processed, and transformed into the required feature set on which the model was built.</span></span> <span data-ttu-id="85698-622">同時，我們也想要將預測的資料提供給最終取用的用戶端使用。</span><span class="sxs-lookup"><span data-stu-id="85698-622">At the same time, we would like to make the forecasted data available for the end consuming clients.</span></span> <span data-ttu-id="85698-623">下圖顯示範例資料流循環 (或資料管線)：</span><span class="sxs-lookup"><span data-stu-id="85698-623">An example data flow cycle (or data pipeline) is illustrated in the diagram below:</span></span>

![能源需求預測的端對端資料流](media/cortana-analytics-playbook-demand-forecasting-energy/energy-demand-forecase-end-data-flow.png)

<span data-ttu-id="85698-625">這些是能源需求預測週期內進行的步驟︰</span><span class="sxs-lookup"><span data-stu-id="85698-625">These are the steps that take place as part of the energy demand forecast cycle:</span></span>

1. <span data-ttu-id="85698-626">數百萬個已部署的資料計量器不斷地即時產生用電量資料。</span><span class="sxs-lookup"><span data-stu-id="85698-626">Millions of deployed data meters are constantly generating power consumption data in real time.</span></span>
2. <span data-ttu-id="85698-627">這項資料收集後上傳至雲端儲存機制 (例如Azure Blob)。</span><span class="sxs-lookup"><span data-stu-id="85698-627">This data is being collected and uploaded into a cloud repository (*e.g.*, Azure Blob).</span></span>
3. <span data-ttu-id="85698-628">在處理之前，原始資料先彙總至企業所定義的變電站或區域層級。</span><span class="sxs-lookup"><span data-stu-id="85698-628">Before being processed, the raw data is aggregated to a substation or regional level as defined by the business.</span></span>
4. <span data-ttu-id="85698-629">接著進行特徵處理 (請參閱**資料準備和特徵處理**)，並產生模型訓練和評分所需的資料 – 特徵集資料儲存在資料庫 (例如 SQL Azure)。</span><span class="sxs-lookup"><span data-stu-id="85698-629">The feature processing (see **Data Preparation and Feature Processing**) then takes place and produces the data that is required for model training or scoring – the feature set data is stored in a database (*e.g.*, SQL Azure).</span></span>
5. <span data-ttu-id="85698-630">叫用重新訓練服務來重新訓練預測模型 – 更新後的模型會持續保存，可供評分 Web 服務使用。</span><span class="sxs-lookup"><span data-stu-id="85698-630">The re-training service is invoked to re-train the forecasting model – that updated version of the model is persisted so that it can be used by the scoring web service.</span></span>
6. <span data-ttu-id="85698-631">依符合所需預測頻率的排程來叫用評分 Web 服務。</span><span class="sxs-lookup"><span data-stu-id="85698-631">The scoring web service is invoked on a schedule that fits the required forecast frequency.</span></span>
7. <span data-ttu-id="85698-632">預測的資料會儲存在最終取用的用戶端可存取的資料庫。</span><span class="sxs-lookup"><span data-stu-id="85698-632">The forecasted data is stored in a database that can be accessed by the end consumption client.</span></span>
8. <span data-ttu-id="85698-633">取用的用戶端會擷取預測值，將它返回套用到電網，然後根據所需的使用案例來利用它。</span><span class="sxs-lookup"><span data-stu-id="85698-633">The consumption client retrieves the forecasts, applies it back into the grid, and consumes it in accordance with the required use case.</span></span>

<span data-ttu-id="85698-634">請務必注意，這整個週期完全自動化，並依排程執行。</span><span class="sxs-lookup"><span data-stu-id="85698-634">It is important to note that this entire cycle is fully automated and runs on a schedule.</span></span> <span data-ttu-id="85698-635">可利用工具來完成此資料循環的整個協調流程，例如 [Azure Data Factory](http://azure.microsoft.com/services/data-factory/)。</span><span class="sxs-lookup"><span data-stu-id="85698-635">The entire orchestration of this data cycle can be done by using tools such as [Azure Data Factory](http://azure.microsoft.com/services/data-factory/).</span></span>

### <a name="end-to-end-deployment-architecture"></a><span data-ttu-id="85698-636">端對端部署架構</span><span class="sxs-lookup"><span data-stu-id="85698-636">End to End Deployment Architecture</span></span>
<span data-ttu-id="85698-637">為了實際地在 Cortana Intelligence 上部署能源需求預測解決方案，我們必須確定已建立並正確設定必要的元件。</span><span class="sxs-lookup"><span data-stu-id="85698-637">In order to practically deploy an energy demand forecast solution on Cortana Intelligence, we need to ensure that the required components are established and configured correctly.</span></span>

<span data-ttu-id="85698-638">下圖說明實作並協調上述資料流循環的典型 Cortana Intelligence 架構：</span><span class="sxs-lookup"><span data-stu-id="85698-638">The following diagram illustrates a typical Cortana Intelligence based architecture that implements and orchestrates the data flow cycle that is described above:</span></span>

![端對端部署架構](media/cortana-analytics-playbook-demand-forecasting-energy/architecture.png)

<span data-ttu-id="85698-640">如需每個元件和整個架構的詳細資訊，請參閱「能源解決方案範本」。</span><span class="sxs-lookup"><span data-stu-id="85698-640">For more information about each of the components and the entire architecture please refer to the Energy Solution Template.</span></span>

