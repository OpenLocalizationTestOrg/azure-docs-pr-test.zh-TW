---
title: "Azure Active Directory B2C： 參考： 自訂 hello 與自訂原則的使用者之旅 UI |Microsoft 文件"
description: "Azure Active Directory B2C 自訂原則的主題"
services: active-directory-b2c
documentationcenter: 
author: rojasja
manager: krassk
editor: rojasja
ms.assetid: 
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.topic: article
ms.devlang: na
ms.date: 04/25/2017
ms.author: joroja
ms.openlocfilehash: 11f2a7575b95a186399d83266850fe44d650371b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="customize-hello-ui-of-a-user-journey-with-custom-policies"></a><span data-ttu-id="327aa-103">自訂 hello 與自訂原則的使用者之旅 UI</span><span class="sxs-lookup"><span data-stu-id="327aa-103">Customize hello UI of a user journey with Custom Policies</span></span>

[!INCLUDE [active-directory-b2c-advanced-audience-warning](../../includes/active-directory-b2c-advanced-audience-warning.md)]

> [!NOTE]
> <span data-ttu-id="327aa-104">本文是自訂 UI 的運作方式以及如何 tooenable B2C 自訂原則，使用與 hello 身分識別體驗架構的進階的描述</span><span class="sxs-lookup"><span data-stu-id="327aa-104">This article is an advanced description of how UI customization works and how tooenable with B2C Custom policies, using hello Identity Experience Framework</span></span>


<span data-ttu-id="327aa-105">順暢的使用者體驗是任何「企業對客戶」解決方案的成功關鍵。</span><span class="sxs-lookup"><span data-stu-id="327aa-105">A seamless user experience is key for any business-to-consumer solution.</span></span> <span data-ttu-id="327aa-106">流暢的使用者體驗，是指體驗，不論是否在裝置或瀏覽器，其中無法透過我們的服務的使用者之旅辨別 hello 客戶服務，他們使用的。</span><span class="sxs-lookup"><span data-stu-id="327aa-106">By seamless user experience, we mean an experience, whether on device or browser, where a user’s journey through our service cannot be distinguished from that of hello customer service they are using.</span></span>

## <a name="understand-hello-cors-way-for-ui-customization"></a><span data-ttu-id="327aa-107">了解自訂 UI 的 hello CORS 方法</span><span class="sxs-lookup"><span data-stu-id="327aa-107">Understand hello CORS way for UI customization</span></span>

<span data-ttu-id="327aa-108">Azure AD B2C 可讓您 toocustomize hello 的外觀及操作的使用者經驗 (UX) 上 hello 可以潛在服務和 Azure AD B2C 顯示透過您的自訂原則的各個頁面。</span><span class="sxs-lookup"><span data-stu-id="327aa-108">Azure AD B2C allows you toocustomize hello look-and-feel of user experience (UX) on hello various pages that can be potentially served and displayed by Azure AD B2C via your custom policies.</span></span>

<span data-ttu-id="327aa-109">基於這個目的，Azure AD B2C，請執行您的消費者瀏覽器中的程式碼，並使用 hello 現代的標準方法[跨原始資源共用 (CORS)](http://www.w3.org/TR/cors/) tooload 自訂內容與您在自訂原則中指定的特定 URLtoopoint tooyour HTML5/CSS 範本。</span><span class="sxs-lookup"><span data-stu-id="327aa-109">For that purpose, Azure AD B2C runs code in your consumer's browser and uses hello modern and standard approach [Cross-Origin Resource Sharing (CORS)](http://www.w3.org/TR/cors/) tooload custom content from a specific URL that you specify in a custom policy toopoint tooyour HTML5/CSS templates.</span></span> <span data-ttu-id="327aa-110">CORS 是像網頁 toobe 要求從起始 hello 資源 hello 網域之外的另一個定義域上的字型，可讓受限制的資源的機制。</span><span class="sxs-lookup"><span data-stu-id="327aa-110">CORS is a mechanism that allows restricted resources, like fonts, on a web page toobe requested from another domain outside hello domain from which hello resource originated.</span></span>

<span data-ttu-id="327aa-111">比較 toohello 舊傳統方式，由 hello 方案，其中提供有限的文字和影像，其中配置和風格的有限的控制項提供前置 toomore 比困難 tooachieve 順暢的體驗，hello CORS 所擁有範本頁面方法支援 HTML5 和 CSS，並可讓您：</span><span class="sxs-lookup"><span data-stu-id="327aa-111">Compared toohello old traditional way, where template pages are owned by hello solution where you provided limited text and images, where limited control of layout and feel was offered leading toomore than difficulties tooachieve a seamless experience, hello CORS way supports HTML5 and CSS and allow you to:</span></span>

- <span data-ttu-id="327aa-112">裝載 hello 內容和 hello 方案會將其控制項使用用戶端指令碼。</span><span class="sxs-lookup"><span data-stu-id="327aa-112">Host hello content and hello solution injects its controls using client side script.</span></span>
- <span data-ttu-id="327aa-113">完整控制版面配置與風格的每個像素。</span><span class="sxs-lookup"><span data-stu-id="327aa-113">Have full control over every pixel of layout and feel.</span></span>

<span data-ttu-id="327aa-114">您可以適當地製作 HTML5/CSS 檔案來提供任意數量的內容頁面。</span><span class="sxs-lookup"><span data-stu-id="327aa-114">You can provide as many content pages as you like by crafting HTML5/CSS files as appropriate.</span></span>

> [!NOTE]
> <span data-ttu-id="327aa-115">基於安全性理由，JavaScript hello 使用目前被封鎖進行自訂。</span><span class="sxs-lookup"><span data-stu-id="327aa-115">For security reasons, hello use of JavaScript is currently blocked for customization.</span></span> <span data-ttu-id="327aa-116">需要 toounblock JavaScript 中，使用 Azure AD B2C 租用戶的自訂網域名稱。</span><span class="sxs-lookup"><span data-stu-id="327aa-116">toounblock JavaScript, use of a custom domain name for your Azure AD B2C tenant is needed.</span></span>

<span data-ttu-id="327aa-117">在每個您 HTML5/CSS 的範本，您可以提供*錨點*元素，其對應所需的 toohello `<div id=”api”>` hello HTML 或 hello 內容頁面中做為以下說明的項目。</span><span class="sxs-lookup"><span data-stu-id="327aa-117">In each of your HTML5/CSS templates, you provide an *anchor* element, which corresponds toohello required `<div id=”api”>` element in hello HTML or hello content page as illustrate hereafter.</span></span> <span data-ttu-id="327aa-118">Azure AD B2C 要求所有內容頁面都必須有這個特定 div。</span><span class="sxs-lookup"><span data-stu-id="327aa-118">Azure AD B2C requires that all content pages have this specific div.</span></span>

```
<!DOCTYPE html>
<html>
  <head>
    <title>Your page content’s tile!</title>
  </head>
  <body>
    <div id="api"></div>
  </body>
</html>
```

<span data-ttu-id="327aa-119">Azure AD B2C 相關內容的 hello 頁面將會插入到這個 div，hello hello 頁面其餘部分時，係 toocontrol。</span><span class="sxs-lookup"><span data-stu-id="327aa-119">Azure AD B2C-related content for hello page will be injected into this div, while hello rest of hello page is yours toocontrol.</span></span> <span data-ttu-id="327aa-120">hello Azure AD B2C 的 JavaScript 程式碼在您的內容中提取，並將 HTML 插入至這個特定的 div 項目。</span><span class="sxs-lookup"><span data-stu-id="327aa-120">hello Azure AD B2C’s JavaScript code pulls in your content and injects our HTML into this specific div element.</span></span> <span data-ttu-id="327aa-121">Azure AD B2C 會插入下列控制項做為適當的 hello： 帳戶選擇器控制項、 登入控制項、 多因素 （目前電話型） 控制項和屬性集合控制項。</span><span class="sxs-lookup"><span data-stu-id="327aa-121">Azure AD B2C injects hello following controls as appropriate: account chooser control, login controls, multi-factor (currently phone-based) controls, and attribute collection controls.</span></span> <span data-ttu-id="327aa-122">Azure AD B2C 可確保並確認所有 hello 控制項 HTML5 相容且可存取，而且所有 hello 控制項可以完全都樣式，將無法回復控制版本。</span><span class="sxs-lookup"><span data-stu-id="327aa-122">Azure AD B2C ensures that all hello controls are HTML5 compliant and accessible, all hello controls can be fully styled, and that a control version will not regress.</span></span>

<span data-ttu-id="327aa-123">hello 合併的內容最後會顯示為 hello 動態文件 tooyour 取用者。</span><span class="sxs-lookup"><span data-stu-id="327aa-123">hello merged content is eventually displayed as hello dynamic document tooyour consumer.</span></span>

<span data-ttu-id="327aa-124">hello 上述的 tooensure 如預期般運作，您必須：</span><span class="sxs-lookup"><span data-stu-id="327aa-124">tooensure of hello above works as expected, you must:</span></span>

- <span data-ttu-id="327aa-125">確保內容符合 HTML5 規範且可供存取</span><span class="sxs-lookup"><span data-stu-id="327aa-125">Ensure your content is HTML5 compliant and accessible</span></span>
- <span data-ttu-id="327aa-126">確保內容伺服器已啟用 CORS。</span><span class="sxs-lookup"><span data-stu-id="327aa-126">Ensure your content server is enabled for CORS.</span></span>
- <span data-ttu-id="327aa-127">透過 HTTPS 提供內容。</span><span class="sxs-lookup"><span data-stu-id="327aa-127">Serve content over HTTPS.</span></span>
- <span data-ttu-id="327aa-128">對所有連結和 CSS 內容使用絕對 URL，例如 https://yourdomain/content。</span><span class="sxs-lookup"><span data-stu-id="327aa-128">Use absolute URLS such as https://yourdomain/content for all links and CSS content.</span></span>

> [!TIP]
> <span data-ttu-id="327aa-129">hello 您正在裝載您的內容的站台的 tooverify 啟用 CORS，而且測試 CORS 要求時，您可以使用 hello 網站 http://test-cors.org/。</span><span class="sxs-lookup"><span data-stu-id="327aa-129">tooverify that hello site you are hosting your content on has CORS enabled and test CORS requests, you can use hello site http://test-cors.org/.</span></span> <span data-ttu-id="327aa-130">感謝您 toothis 站台，您可以直接傳送嗨 CORS 要求 tooa 遠端伺服器 (tootest 支援 CORS，則為)，或傳送嗨 CORS 要求 tooa 測試伺服器 (tooexplore CORS 的某些功能)。</span><span class="sxs-lookup"><span data-stu-id="327aa-130">Thanks toothis site, you can simply either send hello CORS request tooa remote server (tootest if CORS is supported), or send hello CORS request tooa test server (tooexplore certain features of CORS).</span></span>

> [!TIP]
> <span data-ttu-id="327aa-131">hello 網站 http://enable-cors.org/ 也構成超過 CORS 上實用的資源。</span><span class="sxs-lookup"><span data-stu-id="327aa-131">hello site http://enable-cors.org/ also constitutes a more than useful resources on CORS.</span></span>

<span data-ttu-id="327aa-132">這 toothis CORS 為基礎的方法，hello 使用者後來會有應用程式和由 Azure AD B2C hello 頁面之間的一致體驗。</span><span class="sxs-lookup"><span data-stu-id="327aa-132">Thanks toothis CORS-based approach, hello end users will then have consistent experiences between your application and hello pages served by Azure AD B2C.</span></span>

## <a name="create-a-storage-account"></a><span data-ttu-id="327aa-133">建立儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="327aa-133">Create a storage account</span></span>

<span data-ttu-id="327aa-134">做為必要條件，您需要 toocreate 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="327aa-134">As a prerequisite, you need toocreate a storage account.</span></span> <span data-ttu-id="327aa-135">您將需要 Azure 訂用帳戶 toocreate Azure Blob 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="327aa-135">You will need an Azure subscription toocreate an Azure Blob Storage account.</span></span> <span data-ttu-id="327aa-136">您可以註冊免費的試用版，在 hello [Azure 網站](https://azure.microsoft.com/en-us/pricing/free-trial/)。</span><span class="sxs-lookup"><span data-stu-id="327aa-136">You can sign up a free trial at hello [Azure website](https://azure.microsoft.com/en-us/pricing/free-trial/).</span></span>

1. <span data-ttu-id="327aa-137">開啟瀏覽工作階段並瀏覽 toohello [Azure 入口網站](https://portal.azure.com)。</span><span class="sxs-lookup"><span data-stu-id="327aa-137">Open a browsing session and navigate toohello [Azure portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="327aa-138">使用您的系統管理認證來登入。</span><span class="sxs-lookup"><span data-stu-id="327aa-138">Sign in with your administrative credentials.</span></span>
3. <span data-ttu-id="327aa-139">按一下 [新增] > [資料 + 儲存體] > [儲存體帳戶]。</span><span class="sxs-lookup"><span data-stu-id="327aa-139">Click **New** > **Data + Storage** > **Storage account**.</span></span>  <span data-ttu-id="327aa-140">此時會開啟 [建立儲存體帳戶] 刀鋒視窗。</span><span class="sxs-lookup"><span data-stu-id="327aa-140">A **Create storage account** blade opens up.</span></span>
4. <span data-ttu-id="327aa-141">在**名稱**，提供 hello 儲存體帳戶名稱，例如*contoso369b2c*。</span><span class="sxs-lookup"><span data-stu-id="327aa-141">In **Name**, provide a name for hello storage account, for example, *contoso369b2c*.</span></span> <span data-ttu-id="327aa-142">這個值會稍後稱為太*storageAccountName*。</span><span class="sxs-lookup"><span data-stu-id="327aa-142">This value will be later referred as too*storageAccountName*.</span></span>
5. <span data-ttu-id="327aa-143">挑選 hello 適當的選擇定價層、 hello 資源群組和 hello 訂閱 hello。</span><span class="sxs-lookup"><span data-stu-id="327aa-143">Pick hello appropriate selections for hello pricing tier, hello resource group and hello subscription.</span></span> <span data-ttu-id="327aa-144">請確定您擁有 hello **Pin tooStartboard**選項處於選取狀態。</span><span class="sxs-lookup"><span data-stu-id="327aa-144">Make sure that you have hello **Pin tooStartboard** option checked.</span></span> <span data-ttu-id="327aa-145">按一下 [建立] 。</span><span class="sxs-lookup"><span data-stu-id="327aa-145">Click **Create**.</span></span>
6. <span data-ttu-id="327aa-146">返回 toohello 開始面板，然後按一下您剛才建立的 hello 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="327aa-146">Go back toohello Startboard and click hello storage account that you just created.</span></span>
7. <span data-ttu-id="327aa-147">在 hello**服務**區段中，按一下**Blob**。</span><span class="sxs-lookup"><span data-stu-id="327aa-147">In hello **Services** section, click **Blobs**.</span></span> <span data-ttu-id="327aa-148">[Blob 服務] 刀鋒視窗隨即開啟。</span><span class="sxs-lookup"><span data-stu-id="327aa-148">A **Blob service blade** opens up.</span></span>
8. <span data-ttu-id="327aa-149">按一下 [+容器]。</span><span class="sxs-lookup"><span data-stu-id="327aa-149">Click **+ Container**.</span></span>
9. <span data-ttu-id="327aa-150">在**名稱**，提供 hello 容器的名稱，例如*b2c*。</span><span class="sxs-lookup"><span data-stu-id="327aa-150">In **Name**, provide a name for hello container, for example, *b2c*.</span></span> <span data-ttu-id="327aa-151">這個值會是稍後參考的 tooas *containerName*。</span><span class="sxs-lookup"><span data-stu-id="327aa-151">This value will be later referred tooas *containerName*.</span></span>
9. <span data-ttu-id="327aa-152">選取**Blob**為 hello**存取類型**。</span><span class="sxs-lookup"><span data-stu-id="327aa-152">Select **Blob** as hello **Access type**.</span></span> <span data-ttu-id="327aa-153">按一下 [建立] 。</span><span class="sxs-lookup"><span data-stu-id="327aa-153">Click **Create**.</span></span>
10. <span data-ttu-id="327aa-154">您所建立的 hello 容器會出現在 hello 清單上 hello **Blob 服務刀鋒視窗**。</span><span class="sxs-lookup"><span data-stu-id="327aa-154">hello container that you created will appear in hello list on hello **Blob service blade**.</span></span>
11. <span data-ttu-id="327aa-155">關閉 hello **Blob**刀鋒視窗。</span><span class="sxs-lookup"><span data-stu-id="327aa-155">Close hello **Blobs** blade.</span></span>
12. <span data-ttu-id="327aa-156">在 [hello**儲存體帳戶] 刀鋒視窗**，按一下 hello**金鑰**圖示。</span><span class="sxs-lookup"><span data-stu-id="327aa-156">On hello **storage account blade**, click hello **Key** icon.</span></span> <span data-ttu-id="327aa-157">[存取金鑰] 刀鋒視窗隨即開啟。</span><span class="sxs-lookup"><span data-stu-id="327aa-157">An **Access keys blade** opens up.</span></span>  
13. <span data-ttu-id="327aa-158">請記下的 hello 值**key1**。</span><span class="sxs-lookup"><span data-stu-id="327aa-158">Write down hello value of **key1**.</span></span> <span data-ttu-id="327aa-159">此值稍後會指稱為 key1。</span><span class="sxs-lookup"><span data-stu-id="327aa-159">This value will be later referred as *key1*.</span></span>

## <a name="downloading-hello-helper-tool"></a><span data-ttu-id="327aa-160">下載 hello helper 工具</span><span class="sxs-lookup"><span data-stu-id="327aa-160">Downloading hello helper tool</span></span>

1.  <span data-ttu-id="327aa-161">下載 hello helper 工具，從[GitHub](https://github.com/azureadquickstarts/b2c-azureblobstorage-client/archive/master.zip)。</span><span class="sxs-lookup"><span data-stu-id="327aa-161">Download hello helper tool from [GitHub](https://github.com/azureadquickstarts/b2c-azureblobstorage-client/archive/master.zip).</span></span>
2.  <span data-ttu-id="327aa-162">儲存 hello *B2C AzureBlobStorage-用戶端 master.zip*在本機電腦上的檔案。</span><span class="sxs-lookup"><span data-stu-id="327aa-162">Save hello *B2C-AzureBlobStorage-Client-master.zip* file on your local machine.</span></span>
3.  <span data-ttu-id="327aa-163">擷取的 hello B2C AzureBlobStorage-用戶端 master.zip 檔案在本機磁碟，例如在 hello hello 內容**UI 自訂套件**資料夾。</span><span class="sxs-lookup"><span data-stu-id="327aa-163">Extract hello content of hello B2C-AzureBlobStorage-Client-master.zip file on your local disk, for example under hello **UI-Customization-Pack** folder.</span></span> <span data-ttu-id="327aa-164">這會在其底下建立 B2C-AzureBlobStorage-Client-master 資料夾。</span><span class="sxs-lookup"><span data-stu-id="327aa-164">This will create a *B2C-AzureBlobStorage-Client-master* folder underneath.</span></span>
4.  <span data-ttu-id="327aa-165">開啟該資料夾，並以擷取 hello 封存檔 hello 內容*B2CAzureStorageClient.zip*內。</span><span class="sxs-lookup"><span data-stu-id="327aa-165">Open that folder and extract hello content of hello archive file *B2CAzureStorageClient.zip* within it.</span></span>

## <a name="upload-hello-ui-customization-pack-sample-files"></a><span data-ttu-id="327aa-166">上傳 hello UI 自訂套件的範例檔案</span><span class="sxs-lookup"><span data-stu-id="327aa-166">Upload hello UI-Customization-Pack sample files</span></span>

1.  <span data-ttu-id="327aa-167">使用 Windows 檔案總管，瀏覽 toohello 資料夾*B2C AzureBlobStorage-用戶端主要*位於 hello *UI 自訂套件*hello 前一節中建立資料夾。</span><span class="sxs-lookup"><span data-stu-id="327aa-167">Using Windows Explorer, navigate toohello folder *B2C-AzureBlobStorage-Client-master* located under hello *UI-Customization-Pack* folder created in hello previous section.</span></span>
2.  <span data-ttu-id="327aa-168">執行 hello *B2CAzureStorageClient.exe*檔案。</span><span class="sxs-lookup"><span data-stu-id="327aa-168">Run hello *B2CAzureStorageClient.exe* file.</span></span> <span data-ttu-id="327aa-169">這個程式只需將上傳您指定 tooyour 儲存體帳戶，並啟用 CORS 存取這些檔案的 hello 目錄中的所有 hello 檔案。</span><span class="sxs-lookup"><span data-stu-id="327aa-169">This program will simply upload all hello files in hello directory that you specify tooyour storage account, and enable CORS access for those files.</span></span>
3.  <span data-ttu-id="327aa-170">請在提示出現時指定︰a.</span><span class="sxs-lookup"><span data-stu-id="327aa-170">When prompted, specify: a.</span></span>  <span data-ttu-id="327aa-171">hello 您的儲存體帳戶名稱， *storageAccountName*，例如*contoso369b2c*。</span><span class="sxs-lookup"><span data-stu-id="327aa-171">hello name of your storage account, *storageAccountName*, for example *contoso369b2c*.</span></span>
    <span data-ttu-id="327aa-172">b.</span><span class="sxs-lookup"><span data-stu-id="327aa-172">b.</span></span>  <span data-ttu-id="327aa-173">hello 主要存取金鑰，您的 azure blob 儲存體， *key1*，例如*contoso369b2c*。</span><span class="sxs-lookup"><span data-stu-id="327aa-173">hello primary access key of your azure blob storage, *key1*, for example *contoso369b2c*.</span></span>
    <span data-ttu-id="327aa-174">c.</span><span class="sxs-lookup"><span data-stu-id="327aa-174">c.</span></span>  <span data-ttu-id="327aa-175">hello 您的儲存體 blob 儲存體容器名稱， *containerName*，例如*b2c*。</span><span class="sxs-lookup"><span data-stu-id="327aa-175">hello name of your storage blob storage container, *containerName*, for example *b2c*.</span></span>
    <span data-ttu-id="327aa-176">d.</span><span class="sxs-lookup"><span data-stu-id="327aa-176">d.</span></span>  <span data-ttu-id="327aa-177">hello hello 路徑*入門套件*例如範例檔案， *...\B2CTemplates\wingtiptoys*。</span><span class="sxs-lookup"><span data-stu-id="327aa-177">hello path of hello *Starter-Pack* sample files, for example *..\B2CTemplates\wingtiptoys*.</span></span>

<span data-ttu-id="327aa-178">如果您遵循上述步驟 hello，hello HTML5 和 CSS 檔案的 hello *UI 自訂套件*hello 虛構公司**wingtiptoys**現在會指向 tooyour 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="327aa-178">If you followed hello steps above, hello HTML5 and CSS files of hello *UI-Customization-Pack* for hello fictitious company **wingtiptoys** will now be pointing tooyour storage account.</span></span>  <span data-ttu-id="327aa-179">您可以確認 hello 內容具有已正確地上載的 hello Azure 入口網站中開啟 hello 相關的容器刀鋒視窗。</span><span class="sxs-lookup"><span data-stu-id="327aa-179">You can verify that hello content has been uploaded correctly by opening hello related container blade in hello Azure portal.</span></span> <span data-ttu-id="327aa-180">或者，您可以確認 hello 內容具有已上傳的正確存取 hello 頁面從瀏覽器。</span><span class="sxs-lookup"><span data-stu-id="327aa-180">You can alternatively verify that hello content has been uploaded correctly by accessing hello page from a browser.</span></span> <span data-ttu-id="327aa-181">如需詳細資訊，請參閱[Azure Active Directory B2C： 協助程式工具使用 toodemonstrate hello 頁面使用者介面 (UI) 的自訂功能](active-directory-b2c-reference-ui-customization-helper-tool.md)。</span><span class="sxs-lookup"><span data-stu-id="327aa-181">For more information, see [Azure Active Directory B2C: A helper tool used toodemonstrate hello page user interface (UI) customization feature](active-directory-b2c-reference-ui-customization-helper-tool.md).</span></span>

## <a name="ensure-hello-storage-account-has-cors-enabled"></a><span data-ttu-id="327aa-182">請確定 hello 儲存體帳戶已啟用的 CORS</span><span class="sxs-lookup"><span data-stu-id="327aa-182">Ensure hello storage account has CORS enabled</span></span>

<span data-ttu-id="327aa-183">是 CORS （跨原始資源共用） 必須在您的 Azure AD B2C Premium tooload 端點上啟用您的內容。</span><span class="sxs-lookup"><span data-stu-id="327aa-183">CORS (Cross-Origin Resource Sharing) must be enabled on your endpoint for Azure AD B2C Premium tooload your content.</span></span> <span data-ttu-id="327aa-184">這是因為比 hello 網域 Azure AD B2C Premium 服務 hello 頁面上，從您的內容裝載在不同的網域。</span><span class="sxs-lookup"><span data-stu-id="327aa-184">This is because your content is hosted on a different domain than hello domain Azure AD B2C Premium will be serving hello page from.</span></span>

<span data-ttu-id="327aa-185">hello 存放您要裝載您的內容已啟用，CORS 的 tooverify 繼續執行步驟的 hello:</span><span class="sxs-lookup"><span data-stu-id="327aa-185">tooverify that hello storage you are hosting your content on has CORS enabled, proceed with hello following steps:</span></span>

1. <span data-ttu-id="327aa-186">開啟瀏覽工作階段並瀏覽 toohello 頁面*unified.html*使用 hello 的儲存體帳戶中，其位置的完整 URL `https://<storageAccountName>.blob.core.windows.net/<containerName>/unified.html`。</span><span class="sxs-lookup"><span data-stu-id="327aa-186">Open a browsing session and navigate toohello page *unified.html* using hello full URL of its location in your storage account, `https://<storageAccountName>.blob.core.windows.net/<containerName>/unified.html`.</span></span> <span data-ttu-id="327aa-187">例如，https://contoso369b2c.blob.core.windows.net/b2c/unified.html。</span><span class="sxs-lookup"><span data-stu-id="327aa-187">For example, https://contoso369b2c.blob.core.windows.net/b2c/unified.html.</span></span>
2. <span data-ttu-id="327aa-188">瀏覽 toohttp://test-cors.org。這個網站可讓您 tooverify hello 您要的使用的已啟用 CORS。</span><span class="sxs-lookup"><span data-stu-id="327aa-188">Navigate toohttp://test-cors.org. This site allows you tooverify that hello page you are using has CORS enabled.</span></span>  
<!--
![test-cors.org](../../media/active-directory-b2c-customize-ui-of-a-user-journey/test-cors.png)
-->

3. <span data-ttu-id="327aa-189">在**遠端 URL**，適用於您 unified.html 內容中，輸入 hello 完整的 URL，然後按一下**傳送要求**。</span><span class="sxs-lookup"><span data-stu-id="327aa-189">In **Remote URL**, enter hello full URL for your unified.html content, and click **Send Request**.</span></span>
4. <span data-ttu-id="327aa-190">請確認該 hello 中的輸出 hello**結果**區段包含*XHR 狀態： 200*。</span><span class="sxs-lookup"><span data-stu-id="327aa-190">Verify that hello output in hello **Results** section contains *XHR status: 200*.</span></span> <span data-ttu-id="327aa-191">這表示 CORS 已啟用。</span><span class="sxs-lookup"><span data-stu-id="327aa-191">This indicates that CORS is enabled.</span></span>
<!--
![CORS enabled](../../media/active-directory-b2c-customize-ui-of-a-user-journey/cors-enabled.png)
-->
<span data-ttu-id="327aa-192">hello 儲存體帳戶現在應該會包含名為的 blob 容器*b2c*在我們的圖例中，其中包含 hello hello 中的下列 wingtiptoys 範本*入門套件*。</span><span class="sxs-lookup"><span data-stu-id="327aa-192">hello storage account should now contain a blob container named *b2c* in our illustration that contains hello following wingtiptoys templates from hello *Starter-Pack*.</span></span>

<!--
![Correctly configured storage account](../../articles/active-directory-b2c/media/active-directory-b2c-reference-customize-ui-custom/storage-account-final.png)
-->

<span data-ttu-id="327aa-193">hello 下表描述 HTML5 頁面上方的 hello hello 用途。</span><span class="sxs-lookup"><span data-stu-id="327aa-193">hello following table describes hello purpose of hello above HTML5 pages.</span></span>

| <span data-ttu-id="327aa-194">HTML5 範本</span><span class="sxs-lookup"><span data-stu-id="327aa-194">HTML5 template</span></span> | <span data-ttu-id="327aa-195">說明</span><span class="sxs-lookup"><span data-stu-id="327aa-195">Description</span></span> |
|----------------|-------------|
| <span data-ttu-id="327aa-196">phonefactor.html</span><span class="sxs-lookup"><span data-stu-id="327aa-196">*phonefactor.html*</span></span> | <span data-ttu-id="327aa-197">此頁面可作為 Multi-Factor Authentication 頁面的範本。</span><span class="sxs-lookup"><span data-stu-id="327aa-197">This page can be used as a template for a multi-factor authentication page.</span></span> |
| <span data-ttu-id="327aa-198">resetpassword.html</span><span class="sxs-lookup"><span data-stu-id="327aa-198">*resetpassword.html*</span></span> | <span data-ttu-id="327aa-199">此頁面可作為忘記密碼頁面的範本。</span><span class="sxs-lookup"><span data-stu-id="327aa-199">This page can be used as a template for a forgot password page.</span></span> |
| <span data-ttu-id="327aa-200">selfasserted.html</span><span class="sxs-lookup"><span data-stu-id="327aa-200">*selfasserted.html*</span></span> | <span data-ttu-id="327aa-201">此頁面可作為社交帳戶註冊頁面、本機帳戶註冊頁面或本機帳戶登入頁面的範本。</span><span class="sxs-lookup"><span data-stu-id="327aa-201">This page can be used as a template for a social account sign-up page, a local account sign-up page, or a local account sign-in page.</span></span> |
| <span data-ttu-id="327aa-202">unified.html</span><span class="sxs-lookup"><span data-stu-id="327aa-202">*unified.html*</span></span> | <span data-ttu-id="327aa-203">此頁面可作為統一之註冊或登入頁面的範本。</span><span class="sxs-lookup"><span data-stu-id="327aa-203">This page can be used as a template for a unified sign-up or sign-in page.</span></span> |
| <span data-ttu-id="327aa-204">updateprofile.html</span><span class="sxs-lookup"><span data-stu-id="327aa-204">*updateprofile.html*</span></span> | <span data-ttu-id="327aa-205">此頁面可作為設定檔更新頁面的範本。</span><span class="sxs-lookup"><span data-stu-id="327aa-205">This page can be used as a template for a profile update page.</span></span> |

## <a name="add-a-link-tooyour-html5css-templates-tooyour-user-journey"></a><span data-ttu-id="327aa-206">新增連結 tooyour HTML5/CSS 範本 tooyour 使用者旅程</span><span class="sxs-lookup"><span data-stu-id="327aa-206">Add a link tooyour HTML5/CSS templates tooyour user journey</span></span>

<span data-ttu-id="327aa-207">您可以藉由直接編輯自訂原則中加入連結 tooyour HTML5/CSS 範本 tooyour 使用者之旅。</span><span class="sxs-lookup"><span data-stu-id="327aa-207">You can add a link tooyour HTML5/CSS templates tooyour user journey by editing a custom policy directly.</span></span>

<span data-ttu-id="327aa-208">hello 自訂 HTML5/CSS 範本 toouse 使用者旅程中的有 toobe 可用於這些使用者皆的內容定義的清單中指定。</span><span class="sxs-lookup"><span data-stu-id="327aa-208">hello custom HTML5/CSS templates toouse in your user journey have toobe specified in a list of content definitions that can be used in those user journeys.</span></span> <span data-ttu-id="327aa-209">基於這個目的，選擇性 *<ContentDefinitions>*  XML 項目必須宣告在 hello  *<BuildingBlocks>* 自訂原則 XML 檔的區段。</span><span class="sxs-lookup"><span data-stu-id="327aa-209">For that purpose, an optional *<ContentDefinitions>* XML element must be declared under hello *<BuildingBlocks>* section of your custom policy XML file.</span></span>

<span data-ttu-id="327aa-210">hello 以下表格說明 hello 組 hello Azure AD B2C 識別經驗引擎和 hello 型的頁數相關 toothem 所辨識的內容定義識別碼。</span><span class="sxs-lookup"><span data-stu-id="327aa-210">hello following table describes hello set of content definition ids recognized by hello Azure AD B2C identity experience engine and hello type of pages that relates toothem.</span></span>

| <span data-ttu-id="327aa-211">內容定義識別碼</span><span class="sxs-lookup"><span data-stu-id="327aa-211">Content definition id</span></span> | <span data-ttu-id="327aa-212">說明</span><span class="sxs-lookup"><span data-stu-id="327aa-212">Description</span></span> |
|-----------------------|-------------|
| <span data-ttu-id="327aa-213">api.error</span><span class="sxs-lookup"><span data-stu-id="327aa-213">*api.error*</span></span> | <span data-ttu-id="327aa-214">**錯誤頁面**。</span><span class="sxs-lookup"><span data-stu-id="327aa-214">**Error page**.</span></span> <span data-ttu-id="327aa-215">在發生例外狀況或錯誤時，系統會顯示此頁面。</span><span class="sxs-lookup"><span data-stu-id="327aa-215">This page is displayed when an exception or an error is encountered.</span></span> |
| <span data-ttu-id="327aa-216">api.idpselections</span><span class="sxs-lookup"><span data-stu-id="327aa-216">*api.idpselections*</span></span> | <span data-ttu-id="327aa-217">**識別提供者選取頁面**。</span><span class="sxs-lookup"><span data-stu-id="327aa-217">**Identity provider selection page**.</span></span> <span data-ttu-id="327aa-218">此頁面包含一份 hello 使用者的提供者在登入時，可以選擇從身分識別。</span><span class="sxs-lookup"><span data-stu-id="327aa-218">This page contains a list of identity providers that hello user can choose from during sign-in.</span></span> <span data-ttu-id="327aa-219">這些提供者是企業識別提供者、社交識別提供者 (如 Facebook 和 Google+) 或本機帳戶 (以電子郵件地址或使用者名稱為基礎)。</span><span class="sxs-lookup"><span data-stu-id="327aa-219">These are either enterprise identity providers, social identity providers such as Facebook and Google+, or local accounts (based on email address or user name).</span></span> |
| <span data-ttu-id="327aa-220">api.idpselections.signup</span><span class="sxs-lookup"><span data-stu-id="327aa-220">*api.idpselections.signup*</span></span> | <span data-ttu-id="327aa-221">**用於註冊的識別提供者選取**。</span><span class="sxs-lookup"><span data-stu-id="327aa-221">**Identity provider selection for sign-up**.</span></span> <span data-ttu-id="327aa-222">此頁面包含身分識別提供者，hello 使用者可以選擇在註冊期間的清單。</span><span class="sxs-lookup"><span data-stu-id="327aa-222">This page contains a list of identity providers that hello user can choose from during sign-up.</span></span> <span data-ttu-id="327aa-223">這些提供者是企業識別提供者、社交識別提供者 (如 Facebook 和 Google+) 或本機帳戶 (以電子郵件地址或使用者名稱為基礎)。</span><span class="sxs-lookup"><span data-stu-id="327aa-223">These are either enterprise identity providers, social identity providers such as Facebook and Google+, or local accounts (based on email address or user name).</span></span> |
| <span data-ttu-id="327aa-224">api.localaccountpasswordreset</span><span class="sxs-lookup"><span data-stu-id="327aa-224">*api.localaccountpasswordreset*</span></span> | <span data-ttu-id="327aa-225">**忘記密碼頁面**。</span><span class="sxs-lookup"><span data-stu-id="327aa-225">**Forgot password page**.</span></span> <span data-ttu-id="327aa-226">此頁面包含表單 hello 使用者具有 toofill tooinitiate 重設其密碼。</span><span class="sxs-lookup"><span data-stu-id="327aa-226">This page contains a form that hello user has toofill tooinitiate their password reset.</span></span>  |
| <span data-ttu-id="327aa-227">api.localaccountsignin</span><span class="sxs-lookup"><span data-stu-id="327aa-227">*api.localaccountsignin*</span></span> | <span data-ttu-id="327aa-228">**本機帳戶登入頁面**。</span><span class="sxs-lookup"><span data-stu-id="327aa-228">**Local account sign-in page**.</span></span> <span data-ttu-id="327aa-229">此頁面包含登入表單 hello 使用者 toofill 時有本機帳戶為基礎的電子郵件地址或使用者名稱登入。</span><span class="sxs-lookup"><span data-stu-id="327aa-229">This page contains a sign-in form that hello user has toofill in when signing in with a local account that is based on an email address or a user name.</span></span> <span data-ttu-id="327aa-230">hello 表單可以包含文字輸入的方塊和密碼項目 方塊中。</span><span class="sxs-lookup"><span data-stu-id="327aa-230">hello form can contain a text input box and password entry box.</span></span> |
| <span data-ttu-id="327aa-231">api.localaccountsignup</span><span class="sxs-lookup"><span data-stu-id="327aa-231">*api.localaccountsignup*</span></span> | <span data-ttu-id="327aa-232">**本機帳戶註冊頁面**。</span><span class="sxs-lookup"><span data-stu-id="327aa-232">**Local account sign-up page**.</span></span> <span data-ttu-id="327aa-233">此頁面包含註冊表單 hello 使用者 toofill 中有註冊的電子郵件地址或使用者名稱為基礎的本機帳戶時。</span><span class="sxs-lookup"><span data-stu-id="327aa-233">This page contains a sign-up form that hello user has toofill in when signing up for a local account that is based on an email address or a user name.</span></span> <span data-ttu-id="327aa-234">hello 表單可以包含不同的輸入的控制項，例如文字輸入的方塊、 密碼輸入方塊、 選項按鈕、 單一選取下拉式清單方塊中和多重選取的核取方塊。</span><span class="sxs-lookup"><span data-stu-id="327aa-234">hello form can contain different input controls such as text input box, password entry box, radio button, single-select drop-down boxes, and multi-select check boxes.</span></span> |
| <span data-ttu-id="327aa-235">api.phonefactor</span><span class="sxs-lookup"><span data-stu-id="327aa-235">*api.phonefactor*</span></span> | <span data-ttu-id="327aa-236">**Multi-Factor Authentication 頁面**。</span><span class="sxs-lookup"><span data-stu-id="327aa-236">**Multi-factor authentication page**.</span></span> <span data-ttu-id="327aa-237">在此頁面上，使用者可以在註冊或登入期間驗證其電話號碼 (使用文字或語音)。</span><span class="sxs-lookup"><span data-stu-id="327aa-237">On this page, users can verify their phone numbers (using text or voice) during sign-up or sign-in.</span></span> |
| <span data-ttu-id="327aa-238">api.selfasserted</span><span class="sxs-lookup"><span data-stu-id="327aa-238">*api.selfasserted*</span></span> | <span data-ttu-id="327aa-239">**社交帳戶註冊頁面**。</span><span class="sxs-lookup"><span data-stu-id="327aa-239">**Social account sign-up page**.</span></span> <span data-ttu-id="327aa-240">此頁面包含註冊表單 hello 使用者具有 toofill 中從社交身分識別提供者，例如 Facebook 或 Google + 時使用的現有登入帳戶。</span><span class="sxs-lookup"><span data-stu-id="327aa-240">This page contains a sign-up form that hello user has toofill in when signing up using an existing account from a social identity provider such as Facebook or Google+.</span></span> <span data-ttu-id="327aa-241">此頁面是類似 toohello 社交帳戶註冊頁面與 hello 例外狀況的 hello 密碼項目欄位上方。</span><span class="sxs-lookup"><span data-stu-id="327aa-241">This page is similar toohello above social account sign-up page with hello exception of hello password entry fields.</span></span> |
| <span data-ttu-id="327aa-242">api.selfasserted.profileupdate</span><span class="sxs-lookup"><span data-stu-id="327aa-242">*api.selfasserted.profileupdate*</span></span> | <span data-ttu-id="327aa-243">**設定檔更新頁面**。</span><span class="sxs-lookup"><span data-stu-id="327aa-243">**Profile update page**.</span></span> <span data-ttu-id="327aa-244">此頁面包含表單 hello 則該使用者可以使用 tooupdate 其設定檔。</span><span class="sxs-lookup"><span data-stu-id="327aa-244">This page contains a form that hello user can use tooupdate their profile.</span></span> <span data-ttu-id="327aa-245">此頁面是類似 toohello 社交帳戶註冊頁面與 hello 例外狀況的 hello 密碼項目欄位上方。</span><span class="sxs-lookup"><span data-stu-id="327aa-245">This page is similar toohello above social account sign-up page with hello exception of hello password entry fields.</span></span> |
| <span data-ttu-id="327aa-246">api.signuporsignin</span><span class="sxs-lookup"><span data-stu-id="327aa-246">*api.signuporsignin*</span></span> | <span data-ttu-id="327aa-247">**統一的註冊或登入頁面**。</span><span class="sxs-lookup"><span data-stu-id="327aa-247">**Unified sign-up or sign-in page**.</span></span>  <span data-ttu-id="327aa-248">此頁面可處理使用者的註冊和登入，這些使用者可使用企業識別提供者、社交識別提供者 (例如 Facebook 或 Google+) 或本機帳戶。</span><span class="sxs-lookup"><span data-stu-id="327aa-248">This page handles both sign-up & sign-in of users, who can use enterprise identity providers, social identity providers such as Facebook or Google+, or local accounts.</span></span>

## <a name="next-steps"></a><span data-ttu-id="327aa-249">後續步驟</span><span class="sxs-lookup"><span data-stu-id="327aa-249">Next steps</span></span>
[<span data-ttu-id="327aa-250">參考： 了解如何自訂原則以 hello 身分識別體驗架構 B2C 中工作</span><span class="sxs-lookup"><span data-stu-id="327aa-250">Reference: Understand how custom policies work with hello Identity Experience Framework in B2C</span></span>](active-directory-b2c-reference-custom-policies-understanding-contents.md)
