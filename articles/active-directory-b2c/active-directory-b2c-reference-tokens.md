---
title: "Azure Active Directory B2C：權杖參考 | Microsoft Docs"
description: "在 Azure Active Directory B2C 發出的 token hello 類型"
services: active-directory-b2c
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: 6df79878-65cb-4dfc-98bb-2b328055bc2e
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 3/17/2017
ms.author: dastrock
ms.openlocfilehash: 776bc88cc0308875ac6e576f19ac9edf50319d08
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-b2c-token-reference"></a><span data-ttu-id="d55bc-103">Azure AD B2C：權杖參考</span><span class="sxs-lookup"><span data-stu-id="d55bc-103">Azure AD B2C: Token reference</span></span>
<span data-ttu-id="d55bc-104">Azure Active Directory B2C (Azure AD B2C) 會在處理每個[驗證流程](active-directory-b2c-apps.md)時發出數種安全性權杖。</span><span class="sxs-lookup"><span data-stu-id="d55bc-104">Azure Active Directory B2C (Azure AD B2C) emits several types of security tokens as it processes each [authentication flow](active-directory-b2c-apps.md).</span></span> <span data-ttu-id="d55bc-105">本文件說明 hello 格式、 安全性的特性，以及每種類型的語彙基元的內容。</span><span class="sxs-lookup"><span data-stu-id="d55bc-105">This document describes hello format, security characteristics, and contents of each type of token.</span></span>

## <a name="types-of-tokens"></a><span data-ttu-id="d55bc-106">權杖的類型</span><span class="sxs-lookup"><span data-stu-id="d55bc-106">Types of tokens</span></span>
<span data-ttu-id="d55bc-107">Azure AD B2C 支援 hello [OAuth 2.0 授權通訊協定](active-directory-b2c-reference-protocols.md)，是會利用這兩者的存取權杖和重新整理權杖。</span><span class="sxs-lookup"><span data-stu-id="d55bc-107">Azure AD B2C supports hello [OAuth 2.0 authorization protocol](active-directory-b2c-reference-protocols.md), which makes use of both access tokens and refresh tokens.</span></span> <span data-ttu-id="d55bc-108">它也支援驗證和登入透過[OpenID Connect](active-directory-b2c-reference-protocols.md)，其中導入了第三種類型的語彙基元： hello 的 ID 語彙基元。</span><span class="sxs-lookup"><span data-stu-id="d55bc-108">It also supports authentication and sign-in via [OpenID Connect](active-directory-b2c-reference-protocols.md), which introduces a third type of token: hello ID token.</span></span> <span data-ttu-id="d55bc-109">每個權杖都是以持有人權杖表示。</span><span class="sxs-lookup"><span data-stu-id="d55bc-109">Each of these tokens is represented as a bearer token.</span></span>

<span data-ttu-id="d55bc-110">承載權杖是輕巧型的安全性權杖會授與 hello"bearer"存取 tooa 受保護資源。</span><span class="sxs-lookup"><span data-stu-id="d55bc-110">A bearer token is a lightweight security token that grants hello "bearer" access tooa protected resource.</span></span> <span data-ttu-id="d55bc-111">hello 持有者是指可出示 hello 語彙基元任何一方。</span><span class="sxs-lookup"><span data-stu-id="d55bc-111">hello bearer is any party that can present hello token.</span></span> <span data-ttu-id="d55bc-112">Azure AD 必須先驗證合作對象，才能接收持有人權杖。</span><span class="sxs-lookup"><span data-stu-id="d55bc-112">Azure AD must first authenticate a party before it can receive a bearer token.</span></span> <span data-ttu-id="d55bc-113">但是，它在 hello 必要步驟不會採用 toosecure 傳輸和儲存體中的 hello 語彙基元可以攔截和使用的非預期的合作對象。</span><span class="sxs-lookup"><span data-stu-id="d55bc-113">But if hello required steps are not taken toosecure hello token in transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="d55bc-114">某些安全性權杖有內建的機制，可防止未授權的合作對象使用它們，但持有人權杖沒有這項機制。</span><span class="sxs-lookup"><span data-stu-id="d55bc-114">Some security tokens have a built-in mechanism for preventing unauthorized parties from using them, but bearer tokens do not have this mechanism.</span></span> <span data-ttu-id="d55bc-115">它們必須在安全的通道 (例如傳輸層安全性 (HTTPS)) 中傳輸。</span><span class="sxs-lookup"><span data-stu-id="d55bc-115">They must be transported in a secure channel, such as transport layer security (HTTPS).</span></span>

<span data-ttu-id="d55bc-116">持有人權杖傳輸到外部安全通道，如果惡意人士可以使用攔截攻擊 tooacquire hello 語彙基元，並使用它 toogain 未經授權存取 tooa 受保護的資源。</span><span class="sxs-lookup"><span data-stu-id="d55bc-116">If a bearer token is transmitted outside a secure channel, a malicious party can use a man-in-the-middle attack tooacquire hello token and use it toogain unauthorized access tooa protected resource.</span></span> <span data-ttu-id="d55bc-117">當您儲存或快取供稍後使用持有者權杖時，適用相同的安全性原則的 hello。</span><span class="sxs-lookup"><span data-stu-id="d55bc-117">hello same security principles apply when bearer tokens are stored or cached for later use.</span></span> <span data-ttu-id="d55bc-118">務必確定您的應用程式以安全的方式傳輸和儲存持有人權杖。</span><span class="sxs-lookup"><span data-stu-id="d55bc-118">Always ensure that your app transmits and stores bearer tokens in a secure manner.</span></span>

<span data-ttu-id="d55bc-119">如需持有人權杖的其他安全性考量，請參閱 [RFC 6750 第 5 節](http://tools.ietf.org/html/rfc6750)。</span><span class="sxs-lookup"><span data-stu-id="d55bc-119">For additional security considerations on bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="d55bc-120">許多 Azure AD B2C 發出的 hello 權杖會實作為 JSON web 權杖 (Jwt)。</span><span class="sxs-lookup"><span data-stu-id="d55bc-120">Many of hello tokens that Azure AD B2C issues are implemented as JSON web tokens (JWTs).</span></span> <span data-ttu-id="d55bc-121">JWT 是一種精簡的 URL 安全方法，可在兩方之間傳輸資訊。</span><span class="sxs-lookup"><span data-stu-id="d55bc-121">A JWT is a compact, URL-safe means of transferring information between two parties.</span></span> <span data-ttu-id="d55bc-122">JWT 包含稱為宣告的資訊。</span><span class="sxs-lookup"><span data-stu-id="d55bc-122">JWTs contain information known as claims.</span></span> <span data-ttu-id="d55bc-123">這些是 hello 持有者的相關資訊的判斷提示和 hello 權杖主體的 hello。</span><span class="sxs-lookup"><span data-stu-id="d55bc-123">These are assertions of information about hello bearer and hello subject of hello token.</span></span> <span data-ttu-id="d55bc-124">在 Jwt 的 hello 宣告是編碼和傳輸序列化的 JSON 物件。</span><span class="sxs-lookup"><span data-stu-id="d55bc-124">hello claims in JWTs are JSON objects that are encoded and serialized for transmission.</span></span> <span data-ttu-id="d55bc-125">因為 hello Azure AD B2C 所發出的 Jwt 是簽署，但是不會加密，您可以輕鬆地檢查 JWT toodebug hello 內容它。</span><span class="sxs-lookup"><span data-stu-id="d55bc-125">Because hello JWTs issued by Azure AD B2C are signed but not encrypted, you can easily inspect hello contents of a JWT toodebug it.</span></span> <span data-ttu-id="d55bc-126">有一些工具可以這樣做，包括 [calebb.net](http://calebb.net)。</span><span class="sxs-lookup"><span data-stu-id="d55bc-126">Several tools are available that can do this, including [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="d55bc-127">如需 Jwt 的詳細資訊，請參閱太[JWT 規格](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html)。</span><span class="sxs-lookup"><span data-stu-id="d55bc-127">For more information about JWTs, refer too[JWT specifications](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span></span>

### <a name="id-tokens"></a><span data-ttu-id="d55bc-128">ID 權杖</span><span class="sxs-lookup"><span data-stu-id="d55bc-128">ID tokens</span></span>
<span data-ttu-id="d55bc-129">ID 語彙基元是一種安全性權杖，您的應用程式接收來自 Azure AD B2C hello`authorize`和`token`端點。</span><span class="sxs-lookup"><span data-stu-id="d55bc-129">An ID token is a form of security token that your app receives from hello Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="d55bc-130">ID 語彙基元會表示為[Jwt](#types-of-tokens)，且其中包含您可以在應用程式中使用 tooidentify 使用者的宣告。</span><span class="sxs-lookup"><span data-stu-id="d55bc-130">ID tokens are represented as [JWTs](#types-of-tokens), and they contain claims that you can use tooidentify users in your app.</span></span> <span data-ttu-id="d55bc-131">ID 語彙基元時取自 hello`authorize`端點，這些通常是使用的 toosign 使用者 tooweb 應用程式中。</span><span class="sxs-lookup"><span data-stu-id="d55bc-131">When ID tokens are acquired from hello `authorize` endpoint, they are often used toosign in users tooweb applications.</span></span> <span data-ttu-id="d55bc-132">ID 語彙基元時取自 hello`token`端點，它們可以傳送 HTTP 要求中的 hello 的兩個元件之間進行通訊時相同應用程式或服務。</span><span class="sxs-lookup"><span data-stu-id="d55bc-132">When ID tokens are acquired from hello `token` endpoint, they can be sent in HTTP requests during communication between two components of hello same application or service.</span></span> <span data-ttu-id="d55bc-133">根據您的需要，您可以使用 hello 宣告識別碼權杖中。</span><span class="sxs-lookup"><span data-stu-id="d55bc-133">You can use hello claims in an ID token as you see fit.</span></span> <span data-ttu-id="d55bc-134">它們是常用的 toodisplay 帳戶資訊或 toomake 存取控制決定應用程式中。</span><span class="sxs-lookup"><span data-stu-id="d55bc-134">They are commonly used toodisplay account information or toomake access control decisions in an app.</span></span>  

<span data-ttu-id="d55bc-135">識別碼權杖已簽署，但目前未加密。</span><span class="sxs-lookup"><span data-stu-id="d55bc-135">ID tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="d55bc-136">當您的應用程式或應用程式開發介面接收 ID 語彙基元時，它必須[驗證 hello 簽章](#token-validation)hello 語彙基元的 tooprove 是真確的。</span><span class="sxs-lookup"><span data-stu-id="d55bc-136">When your app or API receives an ID token, it must [validate hello signature](#token-validation) tooprove that hello token is authentic.</span></span> <span data-ttu-id="d55bc-137">您的應用程式或應用程式開發介面也必須驗證中是有效的 hello 語彙基元 tooprove 幾個宣告。</span><span class="sxs-lookup"><span data-stu-id="d55bc-137">Your app or API must also validate a few claims in hello token tooprove that it is valid.</span></span> <span data-ttu-id="d55bc-138">根據 hello 案例的需求，hello 宣告驗證的應用程式可能會不同，但您的應用程式必須執行一些[常見的宣告驗證](#token-validation)在每個案例。</span><span class="sxs-lookup"><span data-stu-id="d55bc-138">Depending on hello scenario requirements, hello claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

#### <a name="sample-id-token"></a><span data-ttu-id="d55bc-139">範例 ID 權杖</span><span class="sxs-lookup"><span data-stu-id="d55bc-139">Sample ID token</span></span>
```
// Line breaks for display purposes only

eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IklkVG9rZW5TaWduaW5nS2V5Q29udGFpbmVyIn0.
eyJleHAiOjE0NDIzNjAwMzQsIm5iZiI6MTQ0MjM1NjQzNCwidmVyIjoiMS4wIiwiaXNzIjoiaHR0cHM6Ly9s
b2dpbi5taWNyb3NvZnRvbmxpbmUuY29tLzc3NTUyN2ZmLTlhMzctNDMwNy04YjNkLWNjMzExZjU4ZDkyNS92
Mi4wLyIsImFjciI6ImIyY18xX3NpZ25faW5fc3RvY2siLCJzdWIiOiJOb3Qgc3VwcG9ydGVkIGN1cnJlbnRs
eS4gVXNlIG9pZCBjbGFpbS4iLCJhdWQiOiI5MGMwZmU2My1iY2YyLTQ0ZDUtOGZiNy1iOGJiYzBiMjlkYzYi
LCJpYXQiOjE0NDIzNTY0MzQsImF1dGhfdGltZSI6MTQ0MjM1NjQzNCwiaWRwIjoiZmFjZWJvb2suY29tIn0.
h-uiKcrT882pSKUtWCpj-_3b3vPs3bOWsESAhPMrL-iIIacKc6_uZrWxaWvIYkLra5czBcGKWrYwrAC8ZvQe
DJWZ50WXQrZYODEW1OUwzaD_I1f1HE0c2uvaWdGXBpDEVdsD3ExKaFlKGjFR2V7F-fPThkVDdKmkUDQX3bVc
yyj2V2nlCQ9jd7aGnokTPfLfpOjuIrTsAdPcGpe5hfSEuwYDmqOJjGs9Jp1f-eSNEiCDQOaTBSvr479L5ptP
XWeQZyX2SypN05Rjr05bjZh3j70ZUimiocfJzjibeoDCaQTz907yAg91WYuFOrQxb-5BaUoR7K-O7vxr2M-_
CQhoFA

```

### <a name="access-tokens"></a><span data-ttu-id="d55bc-140">存取權杖</span><span class="sxs-lookup"><span data-stu-id="d55bc-140">Access tokens</span></span>
<span data-ttu-id="d55bc-141">存取語彙基元也是一種安全性權杖，您的應用程式接收來自 Azure AD B2C hello`authorize`和`token`端點。</span><span class="sxs-lookup"><span data-stu-id="d55bc-141">An access token is also a form of security token that your app receives from hello Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="d55bc-142">存取語彙基元也會表示為[Jwt](#types-of-tokens)，且其中包含您可以使用 tooidentify hello 授與權限 tooyour 應用程式開發介面的宣告。</span><span class="sxs-lookup"><span data-stu-id="d55bc-142">Access tokens are also represented as [JWTs](#types-of-tokens), and they contain claims that you can use tooidentify hello granted permissions tooyour APIs.</span></span> <span data-ttu-id="d55bc-143">存取權杖已簽署，但目前未加密。</span><span class="sxs-lookup"><span data-stu-id="d55bc-143">Access tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="d55bc-144">存取權杖應該使用的 tooprovide 存取 tooAPIs 和資源伺服器。</span><span class="sxs-lookup"><span data-stu-id="d55bc-144">Access tokens should be used tooprovide access tooAPIs and resource servers.</span></span> <span data-ttu-id="d55bc-145">深入了解如何太[使用存取權杖](active-directory-b2c-access-tokens.md)。</span><span class="sxs-lookup"><span data-stu-id="d55bc-145">Learn more about how too[use access tokens](active-directory-b2c-access-tokens.md).</span></span> 

<span data-ttu-id="d55bc-146">當您的 API 接收存取權杖時，它必須[驗證 hello 簽章](#token-validation)hello 語彙基元的 tooprove 是真確的。</span><span class="sxs-lookup"><span data-stu-id="d55bc-146">When your API receives an access token, it must [validate hello signature](#token-validation) tooprove that hello token is authentic.</span></span> <span data-ttu-id="d55bc-147">您的 API 也必須驗證中是有效的 hello 語彙基元 tooprove 幾個宣告。</span><span class="sxs-lookup"><span data-stu-id="d55bc-147">Your API must also validate a few claims in hello token tooprove that it is valid.</span></span> <span data-ttu-id="d55bc-148">根據 hello 案例的需求，hello 宣告驗證的應用程式可能會不同，但您的應用程式必須執行一些[常見的宣告驗證](#token-validation)在每個案例。</span><span class="sxs-lookup"><span data-stu-id="d55bc-148">Depending on hello scenario requirements, hello claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

### <a name="claims-in-id-and-access-tokens"></a><span data-ttu-id="d55bc-149">識別碼和存取權杖中的宣告</span><span class="sxs-lookup"><span data-stu-id="d55bc-149">Claims in ID and access tokens</span></span>
<span data-ttu-id="d55bc-150">當您使用 Azure AD B2C 時，您會有更細微的控制您的語彙基元的 hello 內容。</span><span class="sxs-lookup"><span data-stu-id="d55bc-150">When you use Azure AD B2C, you have fine-grained control over hello content of your tokens.</span></span> <span data-ttu-id="d55bc-151">您可以設定[原則](active-directory-b2c-reference-policies.md)toosend 特定設定的應用程式需要其作業的宣告中的使用者資料。</span><span class="sxs-lookup"><span data-stu-id="d55bc-151">You can configure [policies](active-directory-b2c-reference-policies.md) toosend certain sets of user data in claims that your app requires for its operations.</span></span> <span data-ttu-id="d55bc-152">這些宣告可以包含標準的屬性，例如 hello 使用者`displayName`和`emailAddress`。</span><span class="sxs-lookup"><span data-stu-id="d55bc-152">These claims can include standard properties such as hello user's `displayName` and `emailAddress`.</span></span> <span data-ttu-id="d55bc-153">其中也可以包含您在 B2C 目錄中可定義的 [自訂使用者屬性](active-directory-b2c-reference-custom-attr.md) 。</span><span class="sxs-lookup"><span data-stu-id="d55bc-153">They can also include [custom user attributes](active-directory-b2c-reference-custom-attr.md) that you can define in your B2C directory.</span></span> <span data-ttu-id="d55bc-154">您收到的每個識別碼權杖和存取權杖都會包含一組特定的安全性相關宣告。</span><span class="sxs-lookup"><span data-stu-id="d55bc-154">Every ID and access token that you receive contains a certain set of security-related claims.</span></span> <span data-ttu-id="d55bc-155">您的應用程式可以使用 toosecurely 驗證的使用者和要求這些宣告。</span><span class="sxs-lookup"><span data-stu-id="d55bc-155">Your applications can use these claims toosecurely authenticate users and requests.</span></span>

<span data-ttu-id="d55bc-156">請注意，任何特定順序將不會傳回識別碼權杖中的 hello 宣告。</span><span class="sxs-lookup"><span data-stu-id="d55bc-156">Note that hello claims in ID tokens are not returned in any particular order.</span></span> <span data-ttu-id="d55bc-157">此外，隨時都可以在 ID 權杖中加入新的宣告。</span><span class="sxs-lookup"><span data-stu-id="d55bc-157">In addition, new claims can be introduced in ID tokens at any time.</span></span> <span data-ttu-id="d55bc-158">加入新的宣告時，您的應用程式不會損壞。</span><span class="sxs-lookup"><span data-stu-id="d55bc-158">Your app should not break as new claims are introduced.</span></span> <span data-ttu-id="d55bc-159">以下是您預期 tooexist，Azure AD B2C 所發出的識別碼和存取權杖中的 hello 宣告。</span><span class="sxs-lookup"><span data-stu-id="d55bc-159">Here are hello claims that you expect tooexist in ID and access tokens issued by Azure AD B2C.</span></span> <span data-ttu-id="d55bc-160">其他任何宣告都由原則決定。</span><span class="sxs-lookup"><span data-stu-id="d55bc-160">Any additional claims are determined by policies.</span></span> <span data-ttu-id="d55bc-161">練習中，請再試一次檢查透過將其貼的 hello 範例識別碼權杖中的 hello 宣告[calebb.net](http://calebb.net)。</span><span class="sxs-lookup"><span data-stu-id="d55bc-161">For practice, try inspecting hello claims in hello sample ID token by pasting it into [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="d55bc-162">詳細資訊，可以在 hello [OpenID Connect 規格](http://openid.net/specs/openid-connect-core-1_0.html)。</span><span class="sxs-lookup"><span data-stu-id="d55bc-162">Further details can be found in hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>

| <span data-ttu-id="d55bc-163">名稱</span><span class="sxs-lookup"><span data-stu-id="d55bc-163">Name</span></span> | <span data-ttu-id="d55bc-164">宣告</span><span class="sxs-lookup"><span data-stu-id="d55bc-164">Claim</span></span> | <span data-ttu-id="d55bc-165">範例值</span><span class="sxs-lookup"><span data-stu-id="d55bc-165">Example value</span></span> | <span data-ttu-id="d55bc-166">說明</span><span class="sxs-lookup"><span data-stu-id="d55bc-166">Description</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="d55bc-167">對象</span><span class="sxs-lookup"><span data-stu-id="d55bc-167">Audience</span></span> |`aud` |`90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6` |<span data-ttu-id="d55bc-168">Audience 宣告識別 hello 語彙基元的 hello 預期收件的者。</span><span class="sxs-lookup"><span data-stu-id="d55bc-168">An audience claim identifies hello intended recipient of hello token.</span></span> <span data-ttu-id="d55bc-169">Azure AD B2C，如 hello 適用對象會是您的應用程式的應用程式識別碼，為指派的 tooyour hello 應用程式註冊入口網站中的應用程式。</span><span class="sxs-lookup"><span data-stu-id="d55bc-169">For Azure AD B2C, hello audience is your app's application ID, as assigned tooyour app in hello app registration portal.</span></span> <span data-ttu-id="d55bc-170">您的應用程式應該驗證此值，並拒絕 hello 語彙基元，如果不符合。</span><span class="sxs-lookup"><span data-stu-id="d55bc-170">Your app should validate this value and reject hello token if it does not match.</span></span> |
| <span data-ttu-id="d55bc-171">簽發者</span><span class="sxs-lookup"><span data-stu-id="d55bc-171">Issuer</span></span> |`iss` |`https://login.microsoftonline.com/775527ff-9a37-4307-8b3d-cc311f58d925/v2.0/` |<span data-ttu-id="d55bc-172">此宣告識別 hello 安全性權杖服務 (STS) 的建構，並且傳回 hello 語彙基元。</span><span class="sxs-lookup"><span data-stu-id="d55bc-172">This claim identifies hello security token service (STS) that constructs and returns hello token.</span></span> <span data-ttu-id="d55bc-173">它也可以識別 hello Azure AD 目錄中的 hello 驗證使用者。</span><span class="sxs-lookup"><span data-stu-id="d55bc-173">It also identifies hello Azure AD directory in which hello user was authenticated.</span></span> <span data-ttu-id="d55bc-174">您的應用程式應該先驗證 hello issuer 宣告 hello 語彙基元的 tooensure 來自 hello Azure Active Directory v2.0 端點。</span><span class="sxs-lookup"><span data-stu-id="d55bc-174">Your app should validate hello issuer claim tooensure that hello token came from hello Azure Active Directory v2.0 endpoint.</span></span> |
| <span data-ttu-id="d55bc-175">發出時間</span><span class="sxs-lookup"><span data-stu-id="d55bc-175">Issued at</span></span> |`iat` |`1438535543` |<span data-ttu-id="d55bc-176">此宣告是 hello 的 hello 權杖的發出的時間，表示在 epoch 時間。</span><span class="sxs-lookup"><span data-stu-id="d55bc-176">This claim is hello time at which hello token was issued, represented in epoch time.</span></span> |
| <span data-ttu-id="d55bc-177">到期時間</span><span class="sxs-lookup"><span data-stu-id="d55bc-177">Expiration time</span></span> |`exp` |`1438539443` |<span data-ttu-id="d55bc-178">hello 逾期時間宣告是 hello 時間在哪一個 hello 權杖就會變成無效，表示在 epoch 時間。</span><span class="sxs-lookup"><span data-stu-id="d55bc-178">hello expiration time claim is hello time at which hello token becomes invalid, represented in epoch time.</span></span> <span data-ttu-id="d55bc-179">您的應用程式應該使用此宣告 tooverify hello 的有效性 hello 權杖存留期。</span><span class="sxs-lookup"><span data-stu-id="d55bc-179">Your app should use this claim tooverify hello validity of hello token lifetime.</span></span> |
| <span data-ttu-id="d55bc-180">生效時間</span><span class="sxs-lookup"><span data-stu-id="d55bc-180">Not before</span></span> |`nbf` |`1438535543` |<span data-ttu-id="d55bc-181">此宣告是在哪一個 hello 權杖就會變成無效，會在 epoch 時間中表示的 hello 時間。</span><span class="sxs-lookup"><span data-stu-id="d55bc-181">This claim is hello time at which hello token becomes valid, represented in epoch time.</span></span> <span data-ttu-id="d55bc-182">這是通常 hello 相同 hello 時間 hello 語彙基元已發行。</span><span class="sxs-lookup"><span data-stu-id="d55bc-182">This is usually hello same as hello time hello token was issued.</span></span> <span data-ttu-id="d55bc-183">您的應用程式應該使用此宣告 tooverify hello 的有效性 hello 權杖存留期。</span><span class="sxs-lookup"><span data-stu-id="d55bc-183">Your app should use this claim tooverify hello validity of hello token lifetime.</span></span> |
| <span data-ttu-id="d55bc-184">版本</span><span class="sxs-lookup"><span data-stu-id="d55bc-184">Version</span></span> |`ver` |`1.0` |<span data-ttu-id="d55bc-185">Azure AD 所定義，這會是 hello 的 ID 語彙基元，hello 版本。</span><span class="sxs-lookup"><span data-stu-id="d55bc-185">This is hello version of hello ID token, as defined by Azure AD.</span></span> |
| <span data-ttu-id="d55bc-186">代碼雜湊</span><span class="sxs-lookup"><span data-stu-id="d55bc-186">Code hash</span></span> |`c_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="d55bc-187">OAuth 2.0 授權碼連同發出 hello 語彙基元時，才雜湊程式碼一併併入 ID 語彙基元。</span><span class="sxs-lookup"><span data-stu-id="d55bc-187">A code hash is included in an ID token only when hello token is issued together with an OAuth 2.0 authorization code.</span></span> <span data-ttu-id="d55bc-188">雜湊程式碼可以使用的 toovalidate hello 真實性的授權碼。</span><span class="sxs-lookup"><span data-stu-id="d55bc-188">A code hash can be used toovalidate hello authenticity of an authorization code.</span></span> <span data-ttu-id="d55bc-189">如需有關如何 tooperform 這項驗證，請參閱 hello [OpenID Connect 規格](http://openid.net/specs/openid-connect-core-1_0.html)。</span><span class="sxs-lookup"><span data-stu-id="d55bc-189">For more details on how tooperform this validation, see hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>  |
| <span data-ttu-id="d55bc-190">存取權杖雜湊</span><span class="sxs-lookup"><span data-stu-id="d55bc-190">Access token hash</span></span> |`at_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="d55bc-191">存取語彙基元的雜湊隨附於 ID 權杖，才會在 OAuth 2.0 存取權杖以及核發 hello 權杖。</span><span class="sxs-lookup"><span data-stu-id="d55bc-191">An access token hash is included in an ID token only when hello token is issued together with an OAuth 2.0 access token.</span></span> <span data-ttu-id="d55bc-192">存取語彙基元的雜湊可以是使用的 toovalidate hello 真實性的存取權杖。</span><span class="sxs-lookup"><span data-stu-id="d55bc-192">An access token hash can be used toovalidate hello authenticity of an access token.</span></span> <span data-ttu-id="d55bc-193">如需有關如何 tooperform 這項驗證，請參閱 hello [OpenID Connect 規格](http://openid.net/specs/openid-connect-core-1_0.html)</span><span class="sxs-lookup"><span data-stu-id="d55bc-193">For more details on how tooperform this validation, see hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html)</span></span>  |
| <span data-ttu-id="d55bc-194">Nonce</span><span class="sxs-lookup"><span data-stu-id="d55bc-194">Nonce</span></span> |`nonce` |`12345` |<span data-ttu-id="d55bc-195">Nonce 是一種策略使用 toomitigate 權杖重新執行攻擊。</span><span class="sxs-lookup"><span data-stu-id="d55bc-195">A nonce is a strategy used toomitigate token replay attacks.</span></span> <span data-ttu-id="d55bc-196">您的應用程式可以利用 hello 授權要求中指定的 nonce`nonce`查詢參數。</span><span class="sxs-lookup"><span data-stu-id="d55bc-196">Your app can specify a nonce in an authorization request by using hello `nonce` query parameter.</span></span> <span data-ttu-id="d55bc-197">您提供 hello 要求中的 hello 值將會發出未經修改的 hello`nonce`只 ID 權杖的宣告。</span><span class="sxs-lookup"><span data-stu-id="d55bc-197">hello value you provide in hello request will be emitted unmodified in hello `nonce` claim of an ID token only.</span></span> <span data-ttu-id="d55bc-198">這可讓您的應用程式 tooverify hello 值，它指定 hello 要求時，其使用指定的 ID 語彙基元關聯 hello 應用程式工作階段的 hello 值。</span><span class="sxs-lookup"><span data-stu-id="d55bc-198">This allows your app tooverify hello value against hello value it specified on hello request, which associates hello app's session with a given ID token.</span></span> <span data-ttu-id="d55bc-199">您的應用程式應該執行這項驗證 hello 識別碼權杖驗證程序期間。</span><span class="sxs-lookup"><span data-stu-id="d55bc-199">Your app should perform this validation during hello ID token validation process.</span></span> |
| <span data-ttu-id="d55bc-200">主旨</span><span class="sxs-lookup"><span data-stu-id="d55bc-200">Subject</span></span> |`sub` |`884408e1-2918-4cz0-b12d-3aa027d7563b` |<span data-ttu-id="d55bc-201">這是 hello 主體的 hello 權杖判斷提示的相關資訊，例如 hello 使用者應用程式。</span><span class="sxs-lookup"><span data-stu-id="d55bc-201">This is hello principal about which hello token asserts information, such as hello user of an app.</span></span> <span data-ttu-id="d55bc-202">這個值不可變，而且無法重新指派或重複使用。</span><span class="sxs-lookup"><span data-stu-id="d55bc-202">This value is immutable and cannot be reassigned or reused.</span></span> <span data-ttu-id="d55bc-203">它可以使用的 tooperform 授權檢查，例如 hello 語彙基元時使用的 tooaccess 資源。</span><span class="sxs-lookup"><span data-stu-id="d55bc-203">It can be used tooperform authorization checks safely, such as when hello token is used tooaccess a resource.</span></span> <span data-ttu-id="d55bc-204">根據預設，hello 主體宣告會填入 hello 目錄中的 hello 使用者 hello 物件識別碼。</span><span class="sxs-lookup"><span data-stu-id="d55bc-204">By default, hello subject claim is populated with hello object ID of hello user in hello directory.</span></span> <span data-ttu-id="d55bc-205">詳細資訊，請參閱 toolearn [Azure Active Directory B2C： 語彙基元、 session 和單一登入組態](active-directory-b2c-token-session-sso.md)。</span><span class="sxs-lookup"><span data-stu-id="d55bc-205">toolearn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="d55bc-206">驗證內容類別參考</span><span class="sxs-lookup"><span data-stu-id="d55bc-206">Authentication context class reference</span></span> |`acr` |<span data-ttu-id="d55bc-207">不適用</span><span class="sxs-lookup"><span data-stu-id="d55bc-207">Not applicable</span></span> |<span data-ttu-id="d55bc-208">目前未使用，除非在 hello 案例的較舊的原則。</span><span class="sxs-lookup"><span data-stu-id="d55bc-208">Not used currently, except in hello case of older policies.</span></span> <span data-ttu-id="d55bc-209">詳細資訊，請參閱 toolearn [Azure Active Directory B2C： 語彙基元、 session 和單一登入組態](active-directory-b2c-token-session-sso.md)。</span><span class="sxs-lookup"><span data-stu-id="d55bc-209">toolearn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="d55bc-210">信任架構原則</span><span class="sxs-lookup"><span data-stu-id="d55bc-210">Trust framework policy</span></span> |`tfp` |`b2c_1_sign_in` |<span data-ttu-id="d55bc-211">這是 hello hello 原則的已使用的 tooacquire hello ID 語彙基元名稱。</span><span class="sxs-lookup"><span data-stu-id="d55bc-211">This is hello name of hello policy that was used tooacquire hello ID token.</span></span> |
| <span data-ttu-id="d55bc-212">驗證期間</span><span class="sxs-lookup"><span data-stu-id="d55bc-212">Authentication time</span></span> |`auth_time` |`1438535543` |<span data-ttu-id="d55bc-213">此宣告是 hello 時間的使用者最後一個輸入的認證，以表示 epoch 時間。</span><span class="sxs-lookup"><span data-stu-id="d55bc-213">This claim is hello time at which a user last entered credentials, represented in epoch time.</span></span> |

### <a name="refresh-tokens"></a><span data-ttu-id="d55bc-214">重新整理權杖</span><span class="sxs-lookup"><span data-stu-id="d55bc-214">Refresh tokens</span></span>
<span data-ttu-id="d55bc-215">重新整理權杖是安全性權杖，應用程式可以使用新識別碼語彙基元 tooacquire 及存取權杖的 OAuth 2.0 流程中。</span><span class="sxs-lookup"><span data-stu-id="d55bc-215">Refresh tokens are security tokens that your app can use tooacquire new ID tokens and access tokens in an OAuth 2.0 flow.</span></span> <span data-ttu-id="d55bc-216">它們提供您的應用程式與長期存取 tooresources 代表使用者而不需要與這些使用者互動。</span><span class="sxs-lookup"><span data-stu-id="d55bc-216">They provide your app with long-term access tooresources on behalf of users without requiring interaction with those users.</span></span>

<span data-ttu-id="d55bc-217">tooreceive 重新整理權杖，權杖的回應中，您的應用程式必須要求 hello`offline_acesss`範圍。</span><span class="sxs-lookup"><span data-stu-id="d55bc-217">tooreceive a refresh token in a token response, your app must request hello `offline_acesss` scope.</span></span> <span data-ttu-id="d55bc-218">深入了解 hello toolearn`offline_access`範圍，請參閱 toohello [Azure AD B2C 通訊協定參考](active-directory-b2c-reference-protocols.md)。</span><span class="sxs-lookup"><span data-stu-id="d55bc-218">toolearn more about hello `offline_access` scope, refer toohello [Azure AD B2C protocol reference](active-directory-b2c-reference-protocols.md).</span></span>

<span data-ttu-id="d55bc-219">重新整理權杖，而且將永遠為，完全不透明 tooyour 應用程式。</span><span class="sxs-lookup"><span data-stu-id="d55bc-219">Refresh tokens are, and will always be, completely opaque tooyour app.</span></span> <span data-ttu-id="d55bc-220">它們是由 Azure AD 所簽發，只能由 Azure AD 檢查和解譯。</span><span class="sxs-lookup"><span data-stu-id="d55bc-220">They are issued by Azure AD and can be inspected and interpreted only by Azure AD.</span></span> <span data-ttu-id="d55bc-221">它們是長時間執行，但不是會寫入您的應用程式並重新整理權杖將持續一段特定時間的 hello 預期情況。</span><span class="sxs-lookup"><span data-stu-id="d55bc-221">They are long-lived, but your app should not be written with hello expectation that a refresh token will last for a specific period of time.</span></span> <span data-ttu-id="d55bc-222">重新整理權杖可能會因為各種原因而隨時失效。</span><span class="sxs-lookup"><span data-stu-id="d55bc-222">Refresh tokens can be invalidated at any moment for a variety of reasons.</span></span> <span data-ttu-id="d55bc-223">只有您的應用程式 tooknow 如果重新整理權杖是有效的方式為 tooattempt tooredeem hello 它藉由權杖要求 tooAzure AD。</span><span class="sxs-lookup"><span data-stu-id="d55bc-223">hello only way for your app tooknow if a refresh token is valid is tooattempt tooredeem it by making a token request tooAzure AD.</span></span>

<span data-ttu-id="d55bc-224">當您兌換新權杖重新整理權杖 (如果您的應用程式授與 hello 和`offline_access`範圍)，您將收到新的重新整理權杖的 hello 權杖回應。</span><span class="sxs-lookup"><span data-stu-id="d55bc-224">When you redeem a refresh token for a new token (and if your app has been granted hello `offline_access` scope), you will receive a new refresh token in hello token response.</span></span> <span data-ttu-id="d55bc-225">您應該儲存 hello 剛發行的重新整理權杖。</span><span class="sxs-lookup"><span data-stu-id="d55bc-225">You should save hello newly issued refresh token.</span></span> <span data-ttu-id="d55bc-226">它應該取代您先前使用 hello 要求中的 hello 重新整理權杖。</span><span class="sxs-lookup"><span data-stu-id="d55bc-226">It should replace hello refresh token you previously used in hello request.</span></span> <span data-ttu-id="d55bc-227">這有助於保證您的重新整理權杖盡可能長期保持有效。</span><span class="sxs-lookup"><span data-stu-id="d55bc-227">This helps guarantee that your refresh tokens remain valid for as long as possible.</span></span>

## <a name="token-validation"></a><span data-ttu-id="d55bc-228">權杖驗證</span><span class="sxs-lookup"><span data-stu-id="d55bc-228">Token validation</span></span>
<span data-ttu-id="d55bc-229">toovalidate 語彙基元，您的應用程式應該檢查 hello 簽章和 hello 權杖的宣告。</span><span class="sxs-lookup"><span data-stu-id="d55bc-229">toovalidate a token, your app should check both hello signature and claims of hello token.</span></span>

<span data-ttu-id="d55bc-230">視您偏好的語言而定，有許多開放原始碼程式庫可用來驗證 JWT。</span><span class="sxs-lookup"><span data-stu-id="d55bc-230">Many open source libraries are available for validating JWTs, depending on your preferred language.</span></span> <span data-ttu-id="d55bc-231">我們建議您探索這些選項，而不是實作您自己的驗證邏輯。</span><span class="sxs-lookup"><span data-stu-id="d55bc-231">We recommend that you explore those options rather than implement your own validation logic.</span></span> <span data-ttu-id="d55bc-232">本指南中的 hello 資訊可協助您了解 tooproperly 使用這些程式庫。</span><span class="sxs-lookup"><span data-stu-id="d55bc-232">hello information in this guide can help you learn how tooproperly use those libraries.</span></span>

### <a name="validate-hello-signature"></a><span data-ttu-id="d55bc-233">驗證 hello 簽章</span><span class="sxs-lookup"><span data-stu-id="d55bc-233">Validate hello signature</span></span>
<span data-ttu-id="d55bc-234">JWT 包含三個區段，以 hello 分隔`.`字元。</span><span class="sxs-lookup"><span data-stu-id="d55bc-234">A JWT contains three segments, separated by hello `.` character.</span></span> <span data-ttu-id="d55bc-235">hello 第一個區段是 hello*標頭*，hello 第二種是 hello*主體*，和 hello 第三個為 hello*簽章*。</span><span class="sxs-lookup"><span data-stu-id="d55bc-235">hello first segment is hello *header*, hello second is hello *body*, and hello third is hello *signature*.</span></span> <span data-ttu-id="d55bc-236">hello 簽章區段，讓它可以信任的應用程式，可以是 hello 語彙基元使用的 toovalidate hello 真確性。</span><span class="sxs-lookup"><span data-stu-id="d55bc-236">hello signature segment can be used toovalidate hello authenticity of hello token so that it can be trusted by your app.</span></span>

<span data-ttu-id="d55bc-237">Azure AD B2C 權杖是經由業界標準非對稱式加密演算法 (例如 RSA 256) 進行簽署。</span><span class="sxs-lookup"><span data-stu-id="d55bc-237">Azure AD B2C tokens are signed by using industry-standard asymmetric encryption algorithms, such as RSA 256.</span></span> <span data-ttu-id="d55bc-238">hello 語彙基元 hello 標頭包含 hello 索引鍵的相關資訊，並使用 toosign hello token 的加密方法：</span><span class="sxs-lookup"><span data-stu-id="d55bc-238">hello header of hello token contains information about hello key and encryption method used toosign hello token:</span></span>

```
{
        "typ": "JWT",
        "alg": "RS256",
        "kid": "GvnPApfWMdLRi8PDmisFn7bprKg"
}
```

<span data-ttu-id="d55bc-239">hello`alg`宣告表示已使用的 toosign hello 語彙基元的 hello 演算法。</span><span class="sxs-lookup"><span data-stu-id="d55bc-239">hello `alg` claim indicates hello algorithm that was used toosign hello token.</span></span> <span data-ttu-id="d55bc-240">hello`kid`宣告表示 hello 特定的公用金鑰是使用的 toosign hello 語彙基元。</span><span class="sxs-lookup"><span data-stu-id="d55bc-240">hello `kid` claim indicates hello particular public key that was used toosign hello token.</span></span>

<span data-ttu-id="d55bc-241">無論何時，Azure AD 都能使用任何一組特定的公開-私密金鑰組來簽署權杖。</span><span class="sxs-lookup"><span data-stu-id="d55bc-241">At any given time, Azure AD can sign a token by using any one of a certain set of public-private key pairs.</span></span> <span data-ttu-id="d55bc-242">Azure AD 會定期旋轉 hello 組可能的索引鍵，因此您的應用程式應撰寫的 toohandle 這些金鑰會自動變更。</span><span class="sxs-lookup"><span data-stu-id="d55bc-242">Azure AD rotates hello possible set of keys periodically, so your app should be written toohandle those key changes automatically.</span></span> <span data-ttu-id="d55bc-243">合理的頻率 toocheck 更新 toohello： 公開金鑰的 Azure AD 使用的是每隔 24 小時。</span><span class="sxs-lookup"><span data-stu-id="d55bc-243">A reasonable frequency toocheck for updates toohello public keys used by Azure AD is every 24 hours.</span></span>

<span data-ttu-id="d55bc-244">Azure AD B2C 具有 OpenID Connect 中繼資料端點。</span><span class="sxs-lookup"><span data-stu-id="d55bc-244">Azure AD B2C has an OpenID Connect metadata endpoint.</span></span> <span data-ttu-id="d55bc-245">這可讓應用程式在執行階段 關於 Azure AD B2C toofetch 資訊。</span><span class="sxs-lookup"><span data-stu-id="d55bc-245">This allows apps toofetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="d55bc-246">這項資訊包括端點、權杖內容和權杖簽署金鑰。</span><span class="sxs-lookup"><span data-stu-id="d55bc-246">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="d55bc-247">您的 B2C 目錄包含每個原則的 JSON 中繼資料文件。</span><span class="sxs-lookup"><span data-stu-id="d55bc-247">Your B2C directory contains a JSON metadata document for each policy.</span></span> <span data-ttu-id="d55bc-248">例如，hello 中繼資料文件以 hello`b2c_1_sign_in`中的原則`fabrikamb2c.onmicrosoft.com`位於：</span><span class="sxs-lookup"><span data-stu-id="d55bc-248">For example, hello metadata document for hello `b2c_1_sign_in` policy in  `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in
```

<span data-ttu-id="d55bc-249">`fabrikamb2c.onmicrosoft.com`hello B2C 目錄使用 tooauthenticate hello 使用者，會和`b2c_1_sign_in`hello 原則使用 tooacquire hello 語彙基元。</span><span class="sxs-lookup"><span data-stu-id="d55bc-249">`fabrikamb2c.onmicrosoft.com` is hello B2C directory used tooauthenticate hello user, and `b2c_1_sign_in` is hello policy used tooacquire hello token.</span></span> <span data-ttu-id="d55bc-250">toodetermine 哪些原則已使用的 toosign 語彙基元 （和其中 toogo toofetch hello 中繼資料），有兩個選項。</span><span class="sxs-lookup"><span data-stu-id="d55bc-250">toodetermine which policy was used toosign a token (and where toogo toofetch hello metadata), you have two options.</span></span> <span data-ttu-id="d55bc-251">首先，hello 原則名稱包含在 hello `acr` hello 權杖中宣告。</span><span class="sxs-lookup"><span data-stu-id="d55bc-251">First, hello policy name is included in hello `acr` claim in hello token.</span></span> <span data-ttu-id="d55bc-252">您可以剖析從 base 64 解碼 hello 主體所的 hello 本文 hello JWT 的宣告和 hello 還原序列化 JSON 字串而產生。</span><span class="sxs-lookup"><span data-stu-id="d55bc-252">You can parse claims out of hello body of hello JWT by base-64 decoding hello body and deserializing hello JSON string that results.</span></span> <span data-ttu-id="d55bc-253">hello`acr`宣告將會是 hello hello 原則的已使用的 tooissue hello 語彙基元名稱。</span><span class="sxs-lookup"><span data-stu-id="d55bc-253">hello `acr` claim will be hello name of hello policy that was used tooissue hello token.</span></span>  <span data-ttu-id="d55bc-254">另一個選擇是 tooencode hello hello 值中的 hello 原則`state`時發出 hello 要求然後解碼的 toodetermine 哪些原則已使用的參數。</span><span class="sxs-lookup"><span data-stu-id="d55bc-254">Your other option is tooencode hello policy in hello value of hello `state` parameter when you issue hello request, and then decode it toodetermine which policy was used.</span></span> <span data-ttu-id="d55bc-255">任一種方法都有效。</span><span class="sxs-lookup"><span data-stu-id="d55bc-255">Either method is valid.</span></span>

<span data-ttu-id="d55bc-256">hello 中繼資料文件是資訊的 JSON 物件，其中包含數項有用。</span><span class="sxs-lookup"><span data-stu-id="d55bc-256">hello metadata document is a JSON object that contains several useful pieces of information.</span></span> <span data-ttu-id="d55bc-257">這些包括 hello 的位置 hello 端點需要 tooperform OpenID Connect 驗證。</span><span class="sxs-lookup"><span data-stu-id="d55bc-257">These include hello location of hello endpoints required tooperform OpenID Connect authentication.</span></span> <span data-ttu-id="d55bc-258">其中也包括`jwks_uri`，可讓 hello hello 組之公開金鑰是使用的 toosign 語彙基元的位置。</span><span class="sxs-lookup"><span data-stu-id="d55bc-258">They also include `jwks_uri`, which gives hello location of hello set of public keys that are used toosign tokens.</span></span> <span data-ttu-id="d55bc-259">此處，提供該位置，但它是最佳的 toofetch hello 位置以動態方式使用 hello 中繼資料文件並剖析出`jwks_uri`:</span><span class="sxs-lookup"><span data-stu-id="d55bc-259">That location is provided here, but it is best toofetch hello location dynamically by using hello metadata document and parsing out `jwks_uri`:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in
```

<span data-ttu-id="d55bc-260">hello JSON 文件位於此 URL 包含所有 hello 公開金鑰資訊在特定時間點的使用中。</span><span class="sxs-lookup"><span data-stu-id="d55bc-260">hello JSON document located at this URL contains all hello public key information in use at a particular moment.</span></span> <span data-ttu-id="d55bc-261">您的應用程式可以使用 hello `kid` hello JWT 標頭 tooselect hello 公開金鑰中所使用的 toosign hello JSON 文件中宣告之特定 token。</span><span class="sxs-lookup"><span data-stu-id="d55bc-261">Your app can use hello `kid` claim in hello JWT header tooselect hello public key in hello JSON document that is used toosign a particular token.</span></span> <span data-ttu-id="d55bc-262">它然後可以使用正確的公用金鑰 hello 和 hello 指定的演算法，以執行簽章驗證。</span><span class="sxs-lookup"><span data-stu-id="d55bc-262">It can then perform signature validation by using hello correct public key and hello indicated algorithm.</span></span>

<span data-ttu-id="d55bc-263">描述 tooperform 簽章驗證的這份文件的 hello 範圍外的方式。</span><span class="sxs-lookup"><span data-stu-id="d55bc-263">A description of how tooperform signature validation is outside hello scope of this document.</span></span> <span data-ttu-id="d55bc-264">許多開放原始碼程式庫是與此資料庫，如果您需要的可用 toohelp。</span><span class="sxs-lookup"><span data-stu-id="d55bc-264">Many open source libraries are available toohelp you with this if you need it.</span></span>

### <a name="validate-hello-claims"></a><span data-ttu-id="d55bc-265">驗證 hello 宣告</span><span class="sxs-lookup"><span data-stu-id="d55bc-265">Validate hello claims</span></span>
<span data-ttu-id="d55bc-266">當您的應用程式或應用程式開發介面接收 ID 語彙基元時，它也應該執行對 hello 宣告數個檢查 hello 的 ID 語彙基元中。</span><span class="sxs-lookup"><span data-stu-id="d55bc-266">When your app or API receives an ID token, it should also perform several checks against hello claims in hello ID token.</span></span> <span data-ttu-id="d55bc-267">包含但不限於：</span><span class="sxs-lookup"><span data-stu-id="d55bc-267">These include, but are not limited to:</span></span>

* <span data-ttu-id="d55bc-268">hello**觀眾**宣告： 這樣會確認該 hello ID 語彙基元已預定的 toobe 指定 tooyour 應用程式。</span><span class="sxs-lookup"><span data-stu-id="d55bc-268">hello **audience** claim: This verifies that hello ID token was intended toobe given tooyour app.</span></span>
* <span data-ttu-id="d55bc-269">hello**不早於**和**到期時間**宣告： 這些確認該 hello 識別碼權杖尚未過期。</span><span class="sxs-lookup"><span data-stu-id="d55bc-269">hello **not before** and **expiration time** claims: These verify that hello ID token has not expired.</span></span>
* <span data-ttu-id="d55bc-270">hello**簽發者**宣告： 這樣會確認該 hello 語彙基元由 Azure AD 發出 tooyour 應用程式。</span><span class="sxs-lookup"><span data-stu-id="d55bc-270">hello **issuer** claim: This verifies that hello token was issued tooyour app by Azure AD.</span></span>
* <span data-ttu-id="d55bc-271">hello **nonce**： 這是權杖重新執行攻擊的風險降低的策略。</span><span class="sxs-lookup"><span data-stu-id="d55bc-271">hello **nonce**: This is a strategy for token replay attack mitigation.</span></span>

<span data-ttu-id="d55bc-272">如需驗證您的應用程式應該執行的完整清單，請參閱 toohello [OpenID Connect 規格](https://openid.net)。</span><span class="sxs-lookup"><span data-stu-id="d55bc-272">For a full list of validations your app should perform, refer toohello [OpenID Connect specification](https://openid.net).</span></span> <span data-ttu-id="d55bc-273">Hello 預期這些宣告的值的詳細資料會包含在 hello 上述[語彙基元區段](#types-of-tokens)。</span><span class="sxs-lookup"><span data-stu-id="d55bc-273">Details of hello expected values for these claims are included in hello preceding [token section](#types-of-tokens).</span></span>  

## <a name="token-lifetimes"></a><span data-ttu-id="d55bc-274">權杖存留期</span><span class="sxs-lookup"><span data-stu-id="d55bc-274">Token lifetimes</span></span>
<span data-ttu-id="d55bc-275">hello 後權杖存留期會提供 toofurther 知識。</span><span class="sxs-lookup"><span data-stu-id="d55bc-275">hello following token lifetimes are provided toofurther your knowledge.</span></span> <span data-ttu-id="d55bc-276">當您開發及偵錯應用程式時，它們可以協助您。</span><span class="sxs-lookup"><span data-stu-id="d55bc-276">They can help you when you develop and debug apps.</span></span> <span data-ttu-id="d55bc-277">請注意，您的應用程式不應該寫入 tooexpect 任何這些存留期 tooremain 常數。</span><span class="sxs-lookup"><span data-stu-id="d55bc-277">Note that your apps should not be written tooexpect any of these lifetimes tooremain constant.</span></span> <span data-ttu-id="d55bc-278">它們會變更。</span><span class="sxs-lookup"><span data-stu-id="d55bc-278">They can and will change.</span></span> <span data-ttu-id="d55bc-279">深入了解 hello[自訂權杖的存留期](active-directory-b2c-token-session-sso.md)在 Azure AD B2C。</span><span class="sxs-lookup"><span data-stu-id="d55bc-279">Read more about hello [customization of token lifetimes](active-directory-b2c-token-session-sso.md) in Azure AD B2C.</span></span>

| <span data-ttu-id="d55bc-280">權杖</span><span class="sxs-lookup"><span data-stu-id="d55bc-280">Token</span></span> | <span data-ttu-id="d55bc-281">存留期</span><span class="sxs-lookup"><span data-stu-id="d55bc-281">Lifetime</span></span> | <span data-ttu-id="d55bc-282">說明</span><span class="sxs-lookup"><span data-stu-id="d55bc-282">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="d55bc-283">ID 權杖</span><span class="sxs-lookup"><span data-stu-id="d55bc-283">ID tokens</span></span> |<span data-ttu-id="d55bc-284">一小時</span><span class="sxs-lookup"><span data-stu-id="d55bc-284">One hour</span></span> |<span data-ttu-id="d55bc-285">ID 權杖的有效期通常為 1 小時。</span><span class="sxs-lookup"><span data-stu-id="d55bc-285">ID tokens are typically valid for an hour.</span></span> <span data-ttu-id="d55bc-286">您的 web 應用程式可以使用此存留期 toomaintain 它自己的工作階段的使用者 （建議選項）。</span><span class="sxs-lookup"><span data-stu-id="d55bc-286">Your web app can use this lifetime toomaintain its own sessions with users (recommended).</span></span> <span data-ttu-id="d55bc-287">您也可以選擇不同的工作階段存留期。</span><span class="sxs-lookup"><span data-stu-id="d55bc-287">You can also choose a different session lifetime.</span></span> <span data-ttu-id="d55bc-288">如果您的應用程式需要 tooget 新的 ID 語彙基元，它只需 toomake 新的登入要求 tooAzure AD。</span><span class="sxs-lookup"><span data-stu-id="d55bc-288">If your app needs tooget a new ID token, it simply needs toomake a new sign-in request tooAzure AD.</span></span> <span data-ttu-id="d55bc-289">如果使用者具有 Azure AD 的有效的瀏覽器工作階段，該使用者可能不需要的 tooenter 認證一次。</span><span class="sxs-lookup"><span data-stu-id="d55bc-289">If a user has a valid browser session with Azure AD, that user might not be required tooenter credentials again.</span></span> |
| <span data-ttu-id="d55bc-290">重新整理權杖</span><span class="sxs-lookup"><span data-stu-id="d55bc-290">Refresh tokens</span></span> |<span data-ttu-id="d55bc-291">向上 too14 天</span><span class="sxs-lookup"><span data-stu-id="d55bc-291">Up too14 days</span></span> |<span data-ttu-id="d55bc-292">單一重新整理權杖的有效期最多 14 天。</span><span class="sxs-lookup"><span data-stu-id="d55bc-292">A single refresh token is valid for a maximum of 14 days.</span></span> <span data-ttu-id="d55bc-293">不過，重新整理權杖可能會基於許多因素而隨時失效。</span><span class="sxs-lookup"><span data-stu-id="d55bc-293">However, a refresh token can become invalid at any time for a number of reasons.</span></span> <span data-ttu-id="d55bc-294">您的應用程式應該繼續 tootry toouse 重新整理權杖，直到 hello 要求失敗，或您的應用程式取代新 hello 重新整理權杖。</span><span class="sxs-lookup"><span data-stu-id="d55bc-294">Your app should continue tootry toouse a refresh token until hello request fails, or until your app replaces hello refresh token with a new one.</span></span> <span data-ttu-id="d55bc-295">重新整理權杖也成為如果 90 天內有自從上次 hello 使用者輸入的認證無效。</span><span class="sxs-lookup"><span data-stu-id="d55bc-295">A refresh token can also become invalid if 90 days have passed since hello user last entered credentials.</span></span> |
| <span data-ttu-id="d55bc-296">授權碼</span><span class="sxs-lookup"><span data-stu-id="d55bc-296">Authorization codes</span></span> |<span data-ttu-id="d55bc-297">五分鐘</span><span class="sxs-lookup"><span data-stu-id="d55bc-297">Five minutes</span></span> |<span data-ttu-id="d55bc-298">授權碼是刻意設計成短期。</span><span class="sxs-lookup"><span data-stu-id="d55bc-298">Authorization codes are intentionally short-lived.</span></span> <span data-ttu-id="d55bc-299">它們應在收到時立即兌換成存取權杖、ID 權杖或重新整理權杖。</span><span class="sxs-lookup"><span data-stu-id="d55bc-299">They should be redeemed immediately for access tokens, ID tokens, or refresh tokens when they are received.</span></span> |

