---
title: "Azure Active Directory B2C：使用隱含流程的單一頁面應用程式 | Microsoft Docs"
description: "了解如何使用 OAuth 2.0 隱含流程搭配 Azure Active Directory B2C，直接建置單一頁面應用程式。"
services: active-directory-b2c
documentationcenter: 
author: parakhj
manager: krassk
editor: parakhj
ms.assetid: a45cc74c-a37e-453f-b08b-af75855e0792
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/06/2017
ms.author: parakhj
ms.openlocfilehash: 44ff168599e9078506e1afdd0f1dc4657ef0964d
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/11/2017
---
# <a name="azure-ad-b2c-single-page-app-sign-in-by-using-oauth-20-implicit-flow"></a><span data-ttu-id="27d14-103">Azure AD B2C：使用 OAuth 2.0 隱含流程的單一頁面應用程式登入</span><span class="sxs-lookup"><span data-stu-id="27d14-103">Azure AD B2C: Single-page app sign-in by using OAuth 2.0 implicit flow</span></span>

> [!NOTE]
> <span data-ttu-id="27d14-104">這項功能處於預覽狀態。</span><span class="sxs-lookup"><span data-stu-id="27d14-104">This feature is in preview.</span></span>
> 

<span data-ttu-id="27d14-105">許多新式應用程式都有一個單頁應用程式前端，主要是以 JavaScript 撰寫。</span><span class="sxs-lookup"><span data-stu-id="27d14-105">Many modern apps have a single-page app front end that primarily is written in JavaScript.</span></span> <span data-ttu-id="27d14-106">通常會使用 AngularJS、Ember.js、Durandal 等架構來撰寫應用程式。</span><span class="sxs-lookup"><span data-stu-id="27d14-106">Often, the app is written by using a framework like AngularJS, Ember.js, or Durandal.</span></span> <span data-ttu-id="27d14-107">主要在瀏覽器上執行的單一頁面應用程式和其他 JavaScript 應用程式，在驗證時會面臨一些額外的挑戰：</span><span class="sxs-lookup"><span data-stu-id="27d14-107">Single-page apps and other JavaScript apps that run primarily in a browser have some additional challenges for authentication:</span></span>

* <span data-ttu-id="27d14-108">這些應用程式的安全性特性與傳統伺服器型 Web 應用程式大不相同。</span><span class="sxs-lookup"><span data-stu-id="27d14-108">The security characteristics of these apps are significantly different from traditional server-based web applications.</span></span>
* <span data-ttu-id="27d14-109">許多授權伺服器與識別提供者不支援跨原始來源資源共用 (CORS) 要求。</span><span class="sxs-lookup"><span data-stu-id="27d14-109">Many authorization servers and identity providers do not support cross-origin resource sharing (CORS) requests.</span></span>
* <span data-ttu-id="27d14-110">重新導向離開應用程式的完整網頁瀏覽器，對使用者體驗有明顯的侵入性。</span><span class="sxs-lookup"><span data-stu-id="27d14-110">Full-page browser redirects away from the app can be significantly invasive to the user experience.</span></span>

<span data-ttu-id="27d14-111">為了支援這些應用程式，Azure Active Directory B2C (Azure AD B2C) 使用 OAuth 2.0 隱含流程。</span><span class="sxs-lookup"><span data-stu-id="27d14-111">To support these applications, Azure Active Directory B2C (Azure AD B2C) uses the OAuth 2.0 implicit flow.</span></span> <span data-ttu-id="27d14-112">如需 OAuth 2.0 授權隱含授權流程的說明，請參閱 [OAuth 2.0 規格的 4.2 節](http://tools.ietf.org/html/rfc6749) 。</span><span class="sxs-lookup"><span data-stu-id="27d14-112">The OAuth 2.0 authorization implicit grant flow is described in [section 4.2 of the OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="27d14-113">在隱含流程中，應用程式會直接從 Azure Active Directory (Azure AD) 授權端點接收權杖，而不需執行任何伺服器對伺服器交換。</span><span class="sxs-lookup"><span data-stu-id="27d14-113">In implicit flow, the app receives tokens directly from the Azure Active Directory (Azure AD) authorize endpoint, without any server-to-server exchange.</span></span> <span data-ttu-id="27d14-114">所有驗證邏輯和工作階段處理完全都在 JavaScript 用戶端中進行，而不需執行其他的頁面重新導向。</span><span class="sxs-lookup"><span data-stu-id="27d14-114">All authentication logic and session handling takes place entirely in the JavaScript client, without additional page redirects.</span></span>

<span data-ttu-id="27d14-115">Azure AD B2C 會擴充標準的 OAuth 2.0 隱含流程，功能更強大，而不僅止於簡單的驗證與授權。</span><span class="sxs-lookup"><span data-stu-id="27d14-115">Azure AD B2C extends the standard OAuth 2.0 implicit flow to more than simple authentication and authorization.</span></span> <span data-ttu-id="27d14-116">Azure AD B2C 導入了[原則參數](active-directory-b2c-reference-policies.md)。</span><span class="sxs-lookup"><span data-stu-id="27d14-116">Azure AD B2C introduces the [policy parameter](active-directory-b2c-reference-policies.md).</span></span> <span data-ttu-id="27d14-117">利用原則參數，您可以使用 OAuth 2.0 來為應用程式新增更多使用者體驗，例如註冊、登入和設定檔管理。</span><span class="sxs-lookup"><span data-stu-id="27d14-117">With the policy parameter, you can use OAuth 2.0 to add user experiences to your app, such as sign-up, sign-in, and profile management.</span></span> <span data-ttu-id="27d14-118">在本文中，我們會說明如何使用隱含流程與 Azure AD，在您的單一頁面應用程式中實作這些體驗。</span><span class="sxs-lookup"><span data-stu-id="27d14-118">In this article, we show you how to use the implicit flow and Azure AD to implement each of these experiences in your single-page applications.</span></span> <span data-ttu-id="27d14-119">為了協助您快速入門，請查看我們的 [Node.js](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-nodejs-webapi) \(英文\) 或 [Microsoft .NET](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-dotnet-webapi) \(英文\) 範例。</span><span class="sxs-lookup"><span data-stu-id="27d14-119">To help you get started, take a look at our [Node.js](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-nodejs-webapi) and [Microsoft .NET](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-dotnet-webapi) samples.</span></span>

<span data-ttu-id="27d14-120">在本文的範例 HTTP 要求中，我們會使用範例 Azure AD B2C 目錄 **fabrikamb2c.onmicrosoft.com**。</span><span class="sxs-lookup"><span data-stu-id="27d14-120">In the example HTTP requests in this article, we use our sample Azure AD B2C directory, **fabrikamb2c.onmicrosoft.com**.</span></span> <span data-ttu-id="27d14-121">此外，也會使用我們的範例應用程式和原則。</span><span class="sxs-lookup"><span data-stu-id="27d14-121">We also use our own sample application and policies.</span></span> <span data-ttu-id="27d14-122">您可以使用這些值來自行試驗要求，也可以將它們換成您自己的值。</span><span class="sxs-lookup"><span data-stu-id="27d14-122">You can try the requests yourself by using these values, or you can replace them with your own values.</span></span>
<span data-ttu-id="27d14-123">了解如何[取得您自己的 Azure AD B2C 目錄、應用程式和原則](#use-your-own-b2c-tenant)。</span><span class="sxs-lookup"><span data-stu-id="27d14-123">Learn how to [get your own Azure AD B2C directory, application, and policies](#use-your-own-b2c-tenant).</span></span>


## <a name="protocol-diagram"></a><span data-ttu-id="27d14-124">通訊協定圖表</span><span class="sxs-lookup"><span data-stu-id="27d14-124">Protocol diagram</span></span>

<span data-ttu-id="27d14-125">隱含登入流程看起來像下圖。</span><span class="sxs-lookup"><span data-stu-id="27d14-125">The implicit sign-in flow looks something like the following figure.</span></span> <span data-ttu-id="27d14-126">本文稍後將詳細說明每個步驟。</span><span class="sxs-lookup"><span data-stu-id="27d14-126">Each step is described in detail later in the article.</span></span>

![OpenID Connect 區隔線](../media/active-directory-v2-flows/convergence_scenarios_implicit.png)

## <a name="send-authentication-requests"></a><span data-ttu-id="27d14-128">傳送驗證要求</span><span class="sxs-lookup"><span data-stu-id="27d14-128">Send authentication requests</span></span>
<span data-ttu-id="27d14-129">當 Web 應用程式需要驗證使用者並執行原則時，它會將使用者導向至 `/authorize` 端點。</span><span class="sxs-lookup"><span data-stu-id="27d14-129">When your web app needs to authenticate the user and execute a policy, it directs the user to the `/authorize` endpoint.</span></span> <span data-ttu-id="27d14-130">這是流程中的互動部分，可根據原則讓使用者能夠採取行動。</span><span class="sxs-lookup"><span data-stu-id="27d14-130">This is the interactive portion of the flow, where the user takes action, depending on the policy.</span></span> <span data-ttu-id="27d14-131">使用者會從 Azure AD 端點取得識別碼權杖。</span><span class="sxs-lookup"><span data-stu-id="27d14-131">The user gets an ID token from the Azure AD endpoint.</span></span>

<span data-ttu-id="27d14-132">在此要求中，用戶端會在 `scope` 參數中指出必須向使用者索取的權限。</span><span class="sxs-lookup"><span data-stu-id="27d14-132">In this request, the client indicates in the `scope` parameter the permissions that it needs to acquire from the user.</span></span> <span data-ttu-id="27d14-133">在 `p` 參數中，它會指出要執行的原則。</span><span class="sxs-lookup"><span data-stu-id="27d14-133">In the `p` parameter, it indicates the policy to execute.</span></span> <span data-ttu-id="27d14-134">以下提供三個範例 (內含換行符號以提高可讀性)，各使用不同的原則。</span><span class="sxs-lookup"><span data-stu-id="27d14-134">The following three examples (with line breaks for readability) each use a different policy.</span></span> <span data-ttu-id="27d14-135">為了瞭解每個要求的運作方式，請試著將要求貼到瀏覽器來執行。</span><span class="sxs-lookup"><span data-stu-id="27d14-135">To get a feel for how each request works, try pasting the request into a browser and running it.</span></span>

### <a name="use-a-sign-in-policy"></a><span data-ttu-id="27d14-136">使用登入原則</span><span class="sxs-lookup"><span data-stu-id="27d14-136">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=id_token+token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=fragment
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_in
```

### <a name="use-a-sign-up-policy"></a><span data-ttu-id="27d14-137">使用註冊原則</span><span class="sxs-lookup"><span data-stu-id="27d14-137">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=id_token+token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=fragment
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_up
```

### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="27d14-138">使用編輯設定檔原則</span><span class="sxs-lookup"><span data-stu-id="27d14-138">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=id_token+token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=fragment
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_edit_profile
```

| <span data-ttu-id="27d14-139">參數</span><span class="sxs-lookup"><span data-stu-id="27d14-139">Parameter</span></span> | <span data-ttu-id="27d14-140">必要？</span><span class="sxs-lookup"><span data-stu-id="27d14-140">Required?</span></span> | <span data-ttu-id="27d14-141">說明</span><span class="sxs-lookup"><span data-stu-id="27d14-141">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="27d14-142">client_id</span><span class="sxs-lookup"><span data-stu-id="27d14-142">client_id</span></span> |<span data-ttu-id="27d14-143">必要</span><span class="sxs-lookup"><span data-stu-id="27d14-143">Required</span></span> |<span data-ttu-id="27d14-144">在 [Azure 入口網站](https://portal.azure.com)中指派給應用程式的應用程式識別碼。</span><span class="sxs-lookup"><span data-stu-id="27d14-144">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="27d14-145">response_type</span><span class="sxs-lookup"><span data-stu-id="27d14-145">response_type</span></span> |<span data-ttu-id="27d14-146">必要</span><span class="sxs-lookup"><span data-stu-id="27d14-146">Required</span></span> |<span data-ttu-id="27d14-147">必須包含 OpenID Connect 登入的 `id_token` 。</span><span class="sxs-lookup"><span data-stu-id="27d14-147">Must include `id_token` for OpenID Connect sign-in.</span></span> <span data-ttu-id="27d14-148">它也可能包含回應類型 `token`。</span><span class="sxs-lookup"><span data-stu-id="27d14-148">It also can include the response type `token`.</span></span> <span data-ttu-id="27d14-149">如果您使用 `token`，您的應用程式就能立即從授權端點接收存取權杖，而不需向授權端點進行第二次要求。</span><span class="sxs-lookup"><span data-stu-id="27d14-149">If you use `token`, your app can immediately receive an access token from the authorize endpoint, without making a second request to the authorize endpoint.</span></span>  <span data-ttu-id="27d14-150">如果您使用 `token` 回應類型，`scope` 參數就必須包含範圍，以指出要對哪個資源發出權杖。</span><span class="sxs-lookup"><span data-stu-id="27d14-150">If you use the `token` response type, the `scope` parameter must contain a scope that indicates which resource to issue the token for.</span></span> |
| <span data-ttu-id="27d14-151">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="27d14-151">redirect_uri</span></span> |<span data-ttu-id="27d14-152">建議</span><span class="sxs-lookup"><span data-stu-id="27d14-152">Recommended</span></span> |<span data-ttu-id="27d14-153">應用程式的重新導向 URI，您的應用程式可在此傳送及接收驗證回應。</span><span class="sxs-lookup"><span data-stu-id="27d14-153">The redirect URI of your app, where authentication responses can be sent and received by your app.</span></span> <span data-ttu-id="27d14-154">它必須與您在入口網站中註冊的其中一個重新導向 URI 完全相符，不過必須是 URL 編碼格式。</span><span class="sxs-lookup"><span data-stu-id="27d14-154">It must exactly match one of the redirect URIs that you registered in the portal, except that it must be URL-encoded.</span></span> |
| <span data-ttu-id="27d14-155">response_mode</span><span class="sxs-lookup"><span data-stu-id="27d14-155">response_mode</span></span> |<span data-ttu-id="27d14-156">建議</span><span class="sxs-lookup"><span data-stu-id="27d14-156">Recommended</span></span> |<span data-ttu-id="27d14-157">指定用來將產生的權杖送回應用程式的方法。</span><span class="sxs-lookup"><span data-stu-id="27d14-157">Specifies the method to use to send the resulting token back to your app.</span></span>  <span data-ttu-id="27d14-158">針對隱含流程，請使用 `fragment`。</span><span class="sxs-lookup"><span data-stu-id="27d14-158">For implicit flows, use `fragment`.</span></span> |
| <span data-ttu-id="27d14-159">scope</span><span class="sxs-lookup"><span data-stu-id="27d14-159">scope</span></span> |<span data-ttu-id="27d14-160">必要</span><span class="sxs-lookup"><span data-stu-id="27d14-160">Required</span></span> |<span data-ttu-id="27d14-161">範圍的空格分隔清單。</span><span class="sxs-lookup"><span data-stu-id="27d14-161">A space-separated list of scopes.</span></span> <span data-ttu-id="27d14-162">向 Azure AD 指出要求兩個權限的單一範圍值。</span><span class="sxs-lookup"><span data-stu-id="27d14-162">A single scope value indicates to Azure AD both of the permissions that are being requested.</span></span> <span data-ttu-id="27d14-163">`openid` 範圍指示使用識別碼權杖形式的權限，以登入使用者及取得使用者相關資料。</span><span class="sxs-lookup"><span data-stu-id="27d14-163">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of ID tokens.</span></span> <span data-ttu-id="27d14-164">(我們將在本文稍後深入討論這部分)。對於 Web 應用程式， `offline_access` 範圍是選擇性。</span><span class="sxs-lookup"><span data-stu-id="27d14-164">(We'll talk about this more later in the article.) The `offline_access` scope is optional for web apps.</span></span> <span data-ttu-id="27d14-165">它指出您的應用程式需要重新整理權杖，才能長久存取資源。</span><span class="sxs-lookup"><span data-stu-id="27d14-165">It indicates that your app needs a refresh token for long-lived access to resources.</span></span> |
| <span data-ttu-id="27d14-166">state</span><span class="sxs-lookup"><span data-stu-id="27d14-166">state</span></span> |<span data-ttu-id="27d14-167">建議</span><span class="sxs-lookup"><span data-stu-id="27d14-167">Recommended</span></span> |<span data-ttu-id="27d14-168">包含於也會隨權杖回應傳回之要求中的值。</span><span class="sxs-lookup"><span data-stu-id="27d14-168">A value included in the request that also is returned in the token response.</span></span> <span data-ttu-id="27d14-169">它可以是您想要使用之任何內容的字串。</span><span class="sxs-lookup"><span data-stu-id="27d14-169">It can be a string of any content that you want to use.</span></span> <span data-ttu-id="27d14-170">通常會使用隨機產生的唯一值來防止跨網站偽造要求攻擊。</span><span class="sxs-lookup"><span data-stu-id="27d14-170">Usually, a randomly generated, unique value is used, to prevent cross-site request forgery attacks.</span></span> <span data-ttu-id="27d14-171">驗證要求出現前，也會先使用此狀態來為使用者在應用程式中的狀態相關資訊編碼，例如他們先前所在的網頁。</span><span class="sxs-lookup"><span data-stu-id="27d14-171">The state is also used to encode information about the user's state in the app before the authentication request occurred, like the page they were on.</span></span> |
| <span data-ttu-id="27d14-172">nonce</span><span class="sxs-lookup"><span data-stu-id="27d14-172">nonce</span></span> |<span data-ttu-id="27d14-173">必要</span><span class="sxs-lookup"><span data-stu-id="27d14-173">Required</span></span> |<span data-ttu-id="27d14-174">要求中所含的值 (由應用程式產生)，它會以宣告形式包含於產生的識別碼權杖中。</span><span class="sxs-lookup"><span data-stu-id="27d14-174">A value included in the request (generated by the app) that is included in the resulting ID token as a claim.</span></span> <span data-ttu-id="27d14-175">應用程式接著便可確認此值，以減少權杖重新執行攻擊。</span><span class="sxs-lookup"><span data-stu-id="27d14-175">The app can then verify this value to mitigate token replay attacks.</span></span> <span data-ttu-id="27d14-176">此值通常是隨機的唯一字串，可用以識別要求的來源。</span><span class="sxs-lookup"><span data-stu-id="27d14-176">Usually, the value is a randomized, unique string that can be used to identify the origin of the request.</span></span> |
| <span data-ttu-id="27d14-177">p</span><span class="sxs-lookup"><span data-stu-id="27d14-177">p</span></span> |<span data-ttu-id="27d14-178">必要</span><span class="sxs-lookup"><span data-stu-id="27d14-178">Required</span></span> |<span data-ttu-id="27d14-179">要執行的原則。</span><span class="sxs-lookup"><span data-stu-id="27d14-179">The policy to execute.</span></span> <span data-ttu-id="27d14-180">這是在您的 Azure AD B2C 租用戶中建立的原則名稱。</span><span class="sxs-lookup"><span data-stu-id="27d14-180">It's the name of a policy that is created in your Azure AD B2C tenant.</span></span> <span data-ttu-id="27d14-181">原則名稱值的開頭必須是 **b2c\_1\_**。</span><span class="sxs-lookup"><span data-stu-id="27d14-181">The policy name value should begin with **b2c\_1\_**.</span></span> <span data-ttu-id="27d14-182">如需詳細資訊，請參閱 [Azure AD B2C 內建原則](active-directory-b2c-reference-policies.md)。</span><span class="sxs-lookup"><span data-stu-id="27d14-182">For more information, see [Azure AD B2C built-in policies](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="27d14-183">prompt</span><span class="sxs-lookup"><span data-stu-id="27d14-183">prompt</span></span> |<span data-ttu-id="27d14-184">選用</span><span class="sxs-lookup"><span data-stu-id="27d14-184">Optional</span></span> |<span data-ttu-id="27d14-185">需要的使用者互動類型。</span><span class="sxs-lookup"><span data-stu-id="27d14-185">The type of user interaction that's required.</span></span> <span data-ttu-id="27d14-186">目前唯一支援的值為 `login`。</span><span class="sxs-lookup"><span data-stu-id="27d14-186">Currently, the only valid value is `login`.</span></span> <span data-ttu-id="27d14-187">這會強制使用者在該要求上輸入認證。</span><span class="sxs-lookup"><span data-stu-id="27d14-187">This forces the user to enter their credentials on that request.</span></span> <span data-ttu-id="27d14-188">單一登入將沒有作用。</span><span class="sxs-lookup"><span data-stu-id="27d14-188">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="27d14-189">此時會要求使用者完成原則的工作流程。</span><span class="sxs-lookup"><span data-stu-id="27d14-189">At this point, the user is asked to complete the policy's workflow.</span></span> <span data-ttu-id="27d14-190">這可能會牽涉到讓使用者輸入自己的使用者名稱及密碼、以社交身分識別登入、註冊目錄，或是其他任何數目的步驟。</span><span class="sxs-lookup"><span data-stu-id="27d14-190">This might involve the user entering their username and password, signing in with a social identity, signing up for the directory, or any other number of steps.</span></span> <span data-ttu-id="27d14-191">使用者動作取決於原則的定義方式。</span><span class="sxs-lookup"><span data-stu-id="27d14-191">User actions depend on how the policy is defined.</span></span>

<span data-ttu-id="27d14-192">當使用者完成原則之後，Azure AD 會透過您用於 `redirect_uri` 的值，將回應傳回給您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="27d14-192">After the user completes the policy, Azure AD returns a response to your app at the value you used for `redirect_uri`.</span></span> <span data-ttu-id="27d14-193">它會使用 `response_mode` 參數中指定的方法。</span><span class="sxs-lookup"><span data-stu-id="27d14-193">It uses the method specified in the `response_mode` parameter.</span></span> <span data-ttu-id="27d14-194">對於每個使用者動作案例來說，回應完全相同，與已執行的原則無關。</span><span class="sxs-lookup"><span data-stu-id="27d14-194">The response is exactly the same for each of the user action scenarios, independent of the policy that was executed.</span></span>

### <a name="successful-response"></a><span data-ttu-id="27d14-195">成功回應</span><span class="sxs-lookup"><span data-stu-id="27d14-195">Successful response</span></span>
<span data-ttu-id="27d14-196">使用 `response_mode=fragment` 和 `response_type=id_token+token` 的成功回應如下所示 (內含換行符號以利閱讀)：</span><span class="sxs-lookup"><span data-stu-id="27d14-196">A successful response that uses `response_mode=fragment` and `response_type=id_token+token` looks like the following, with line breaks for legibility:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
access_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&token_type=Bearer
&expires_in=3599
&scope="90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
&id_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&state=arbitrary_data_you_sent_earlier
```

| <span data-ttu-id="27d14-197">參數</span><span class="sxs-lookup"><span data-stu-id="27d14-197">Parameter</span></span> | <span data-ttu-id="27d14-198">說明</span><span class="sxs-lookup"><span data-stu-id="27d14-198">Description</span></span> |
| --- | --- |
| <span data-ttu-id="27d14-199">access_token</span><span class="sxs-lookup"><span data-stu-id="27d14-199">access_token</span></span> |<span data-ttu-id="27d14-200">應用程式要求的存取權杖。</span><span class="sxs-lookup"><span data-stu-id="27d14-200">The access token that the app requested.</span></span>  <span data-ttu-id="27d14-201">存取權杖不得進行解碼或檢查。</span><span class="sxs-lookup"><span data-stu-id="27d14-201">The access token should not be decoded or otherwise inspected.</span></span> <span data-ttu-id="27d14-202">其可被視為不透明的字串。</span><span class="sxs-lookup"><span data-stu-id="27d14-202">It can be treated as an opaque string.</span></span> |
| <span data-ttu-id="27d14-203">token_type</span><span class="sxs-lookup"><span data-stu-id="27d14-203">token_type</span></span> |<span data-ttu-id="27d14-204">權杖類型值。</span><span class="sxs-lookup"><span data-stu-id="27d14-204">The token type value.</span></span> <span data-ttu-id="27d14-205">Azure AD 唯一支援的類型是 Bearer。</span><span class="sxs-lookup"><span data-stu-id="27d14-205">The only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="27d14-206">expires_in</span><span class="sxs-lookup"><span data-stu-id="27d14-206">expires_in</span></span> |<span data-ttu-id="27d14-207">存取權杖的有效時間長度 (以秒為單位)。</span><span class="sxs-lookup"><span data-stu-id="27d14-207">The length of time that the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="27d14-208">scope</span><span class="sxs-lookup"><span data-stu-id="27d14-208">scope</span></span> |<span data-ttu-id="27d14-209">權杖有效的範圍。</span><span class="sxs-lookup"><span data-stu-id="27d14-209">The scopes that the token is valid for.</span></span> <span data-ttu-id="27d14-210">您也可以使用範圍來快取權杖，以供稍後使用。</span><span class="sxs-lookup"><span data-stu-id="27d14-210">You also can use scopes to cache tokens for later use.</span></span> |
| <span data-ttu-id="27d14-211">id_token</span><span class="sxs-lookup"><span data-stu-id="27d14-211">id_token</span></span> |<span data-ttu-id="27d14-212">應用程式所要求的識別碼權杖。</span><span class="sxs-lookup"><span data-stu-id="27d14-212">The ID token that the app requested.</span></span> <span data-ttu-id="27d14-213">您可以使用識別碼權杖來確認使用者的身分識別，然後開始與使用者的工作階段。</span><span class="sxs-lookup"><span data-stu-id="27d14-213">You can use the ID token to verify the user's identity and begin a session with the user.</span></span> <span data-ttu-id="27d14-214">如需識別碼權杖及其內容的詳細資料，請參閱 [Azure AD B2C 權杖參考](active-directory-b2c-reference-tokens.md)。</span><span class="sxs-lookup"><span data-stu-id="27d14-214">For more information about ID tokens and their contents, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |
| <span data-ttu-id="27d14-215">state</span><span class="sxs-lookup"><span data-stu-id="27d14-215">state</span></span> |<span data-ttu-id="27d14-216">如果要求中包含 `state` 參數，回應中就應該出現相同的值。</span><span class="sxs-lookup"><span data-stu-id="27d14-216">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="27d14-217">應用程式應確認要求和回應中的 `state` 值完全相同。</span><span class="sxs-lookup"><span data-stu-id="27d14-217">The app should verify that the `state` values in the request and response are identical.</span></span> |

### <a name="error-response"></a><span data-ttu-id="27d14-218">錯誤回應</span><span class="sxs-lookup"><span data-stu-id="27d14-218">Error response</span></span>
<span data-ttu-id="27d14-219">錯誤回應也能傳送到重新導向 URI，以便讓應用程式能夠適當地處理它們：</span><span class="sxs-lookup"><span data-stu-id="27d14-219">Error responses also can be sent to the redirect URI so that the app can handle them appropriately:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
error=access_denied
&error_description=the+user+canceled+the+authentication
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="27d14-220">參數</span><span class="sxs-lookup"><span data-stu-id="27d14-220">Parameter</span></span> | <span data-ttu-id="27d14-221">說明</span><span class="sxs-lookup"><span data-stu-id="27d14-221">Description</span></span> |
| --- | --- |
| <span data-ttu-id="27d14-222">錯誤</span><span class="sxs-lookup"><span data-stu-id="27d14-222">error</span></span> |<span data-ttu-id="27d14-223">用於將發生之錯誤分類的錯誤碼字串。</span><span class="sxs-lookup"><span data-stu-id="27d14-223">An error code string used to classify types of errors that occur.</span></span> <span data-ttu-id="27d14-224">您也可以使用錯誤碼進行錯誤處理。</span><span class="sxs-lookup"><span data-stu-id="27d14-224">You also can use the error code for error handling.</span></span> |
| <span data-ttu-id="27d14-225">error_description</span><span class="sxs-lookup"><span data-stu-id="27d14-225">error_description</span></span> |<span data-ttu-id="27d14-226">可協助您識別驗證錯誤根本原因的特定錯誤訊息。</span><span class="sxs-lookup"><span data-stu-id="27d14-226">A specific error message that can help you identify the root cause of an authentication error.</span></span> |
| <span data-ttu-id="27d14-227">state</span><span class="sxs-lookup"><span data-stu-id="27d14-227">state</span></span> |<span data-ttu-id="27d14-228">如需完整說明，請參閱前一個表格。</span><span class="sxs-lookup"><span data-stu-id="27d14-228">See the full description in the preceding table.</span></span> <span data-ttu-id="27d14-229">如果要求中包含 `state` 參數，回應中就應該出現相同的值。</span><span class="sxs-lookup"><span data-stu-id="27d14-229">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="27d14-230">應用程式應確認要求和回應中的 `state` 值完全相同。</span><span class="sxs-lookup"><span data-stu-id="27d14-230">The app should verify that the `state` values in the request and response are identical.</span></span>|

## <a name="validate-the-id-token"></a><span data-ttu-id="27d14-231">驗證識別碼權杖</span><span class="sxs-lookup"><span data-stu-id="27d14-231">Validate the ID token</span></span>
<span data-ttu-id="27d14-232">收到識別碼權杖並不足以驗證使用者。</span><span class="sxs-lookup"><span data-stu-id="27d14-232">Receiving an ID token is not enough to authenticate the user.</span></span> <span data-ttu-id="27d14-233">您必須驗證識別碼權杖的簽章，並依照應用程式的要求來確認權杖中的宣告。</span><span class="sxs-lookup"><span data-stu-id="27d14-233">You must validate the ID token's signature, and verify the claims in the token per your app's requirements.</span></span> <span data-ttu-id="27d14-234">Azure AD B2C 使用 [JSON Web Tokens (JWT)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) 和公開金鑰加密編譯來簽署權杖及驗證其是否有效。</span><span class="sxs-lookup"><span data-stu-id="27d14-234">Azure AD B2C uses [JSON Web Tokens (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) and public key cryptography to sign tokens and verify that they are valid.</span></span>

<span data-ttu-id="27d14-235">視您偏好使用的語言而定，有許多開放原始碼程式庫可用來驗證 JWT。</span><span class="sxs-lookup"><span data-stu-id="27d14-235">Many open-source libraries are available for validating JWTs, depending on the language you prefer to use.</span></span> <span data-ttu-id="27d14-236">建議您探索可用的開放原始碼程式庫，而不是實作您自己的驗證邏輯。</span><span class="sxs-lookup"><span data-stu-id="27d14-236">Consider exploring available open-source libraries rather than implementing your own validation logic.</span></span> <span data-ttu-id="27d14-237">您可以使用本文中的資訊，以協助了解如何適當使用這些程式庫。</span><span class="sxs-lookup"><span data-stu-id="27d14-237">You can use the information in this article to help you learn how to properly use those libraries.</span></span>

<span data-ttu-id="27d14-238">Azure AD B2C 具有 OpenID Connect 中繼資料端點。</span><span class="sxs-lookup"><span data-stu-id="27d14-238">Azure AD B2C has an OpenID Connect metadata endpoint.</span></span> <span data-ttu-id="27d14-239">應用程式可以使用此端點，在執行階段擷取 Azure AD B2C 的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="27d14-239">An app can use the endpoint to fetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="27d14-240">這項資訊包括端點、權杖內容和權杖簽署金鑰。</span><span class="sxs-lookup"><span data-stu-id="27d14-240">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="27d14-241">您的 Azure AD B2C 租用戶中的每個原則都有一份 JSON 中繼資料文件。</span><span class="sxs-lookup"><span data-stu-id="27d14-241">There is a JSON metadata document for each policy in your Azure AD B2C tenant.</span></span> <span data-ttu-id="27d14-242">例如，fabrikamb2c.onmicrosoft.com 租用戶中 b2c_1_sign_in 原則的中繼資料文件位於：</span><span class="sxs-lookup"><span data-stu-id="27d14-242">For example, the metadata document for the b2c_1_sign_in policy in the fabrikamb2c.onmicrosoft.com tenant is located at:</span></span>

`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in`

<span data-ttu-id="27d14-243">此設定文件的屬性之一是 `jwks_uri`。</span><span class="sxs-lookup"><span data-stu-id="27d14-243">One of the properties of this configuration document is the `jwks_uri`.</span></span> <span data-ttu-id="27d14-244">相同原則的值會是：</span><span class="sxs-lookup"><span data-stu-id="27d14-244">The value for the same policy would be:</span></span>

`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`

<span data-ttu-id="27d14-245">若要判斷使用了哪個原則來簽署識別碼權杖 (以及可從何處擷取中繼資料)，您有兩個選項。</span><span class="sxs-lookup"><span data-stu-id="27d14-245">To determine which policy was used to sign an ID token (and where to fetch the metadata from), you have two options.</span></span> <span data-ttu-id="27d14-246">首先，原則名稱包含在 `id_token` 的 `acr` 宣告中。</span><span class="sxs-lookup"><span data-stu-id="27d14-246">First, the policy name is included in the `acr` claim in `id_token`.</span></span> <span data-ttu-id="27d14-247">如需如何剖析識別碼權杖中的宣告相關資訊，請參閱 [Azure AD B2C 權杖參考](active-directory-b2c-reference-tokens.md)。</span><span class="sxs-lookup"><span data-stu-id="27d14-247">For information about how to parse the claims from an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="27d14-248">另一個選項是當您發出要求時，在 `state` 參數的值中將原則編碼。</span><span class="sxs-lookup"><span data-stu-id="27d14-248">Your other option is to encode the policy in the value of the `state` parameter when you issue the request.</span></span> <span data-ttu-id="27d14-249">然後將 `state` 參數解碼，以判斷使用了哪個原則。</span><span class="sxs-lookup"><span data-stu-id="27d14-249">Then, decode the `state` parameter to determine which policy was used.</span></span> <span data-ttu-id="27d14-250">任一種方法都有效。</span><span class="sxs-lookup"><span data-stu-id="27d14-250">Either method is valid.</span></span>

<span data-ttu-id="27d14-251">當您從 OpenID Connect 中繼資料端點取得中繼資料文件之後，就可以使用 RSA-256 公開金鑰 (位於此端點) 來驗證識別碼權杖的簽章。</span><span class="sxs-lookup"><span data-stu-id="27d14-251">After you've acquired the metadata document from the OpenID Connect metadata endpoint, you can use the RSA-256 public keys (located at this endpoint) to validate the signature of the ID token.</span></span> <span data-ttu-id="27d14-252">此端點可能隨時會列出多個金鑰，每個都由 `kid` 所識別。</span><span class="sxs-lookup"><span data-stu-id="27d14-252">There might be multiple keys listed at this endpoint at any given time, each identified by a `kid`.</span></span> <span data-ttu-id="27d14-253">`id_token` 的標頭也包含 `kid` 宣告。</span><span class="sxs-lookup"><span data-stu-id="27d14-253">The header of `id_token` also contains a `kid` claim.</span></span> <span data-ttu-id="27d14-254">它指出使用了這其中哪個金鑰來簽署識別碼權杖。</span><span class="sxs-lookup"><span data-stu-id="27d14-254">It indicates which of these keys was used to sign the ID token.</span></span> <span data-ttu-id="27d14-255">如需詳細資訊 (包括了解如何[驗證權杖](active-directory-b2c-reference-tokens.md))，請參閱 [Azure AD B2C 權杖參考](active-directory-b2c-reference-tokens.md#token-validation)。</span><span class="sxs-lookup"><span data-stu-id="27d14-255">For more information, including learning about [validating tokens](active-directory-b2c-reference-tokens.md#token-validation), see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span>
<!--TODO: Improve the information on this-->

<span data-ttu-id="27d14-256">驗證識別碼權杖的簽章之後，也需要驗證數個宣告。</span><span class="sxs-lookup"><span data-stu-id="27d14-256">After you validate the signature of the ID token, several claims require verification.</span></span> <span data-ttu-id="27d14-257">例如：</span><span class="sxs-lookup"><span data-stu-id="27d14-257">For example:</span></span>

* <span data-ttu-id="27d14-258">驗證 `nonce` 宣告，以防止權杖重新執行攻擊。</span><span class="sxs-lookup"><span data-stu-id="27d14-258">Validate the `nonce` claim to prevent token replay attacks.</span></span> <span data-ttu-id="27d14-259">其值應該是您在登入要求中所指定的內容。</span><span class="sxs-lookup"><span data-stu-id="27d14-259">Its value should be what you specified in the sign-in request.</span></span>
* <span data-ttu-id="27d14-260">驗證 `aud` 宣告，以確保已針對您的應用程式簽發識別碼權杖。</span><span class="sxs-lookup"><span data-stu-id="27d14-260">Validate the `aud` claim to ensure that the ID token was issued for your app.</span></span> <span data-ttu-id="27d14-261">這個值就是您應用程式的應用程式識別碼。</span><span class="sxs-lookup"><span data-stu-id="27d14-261">Its value should be the application ID of your app.</span></span>
* <span data-ttu-id="27d14-262">驗證 `iat` 與 `exp` 宣告，以確保識別碼權杖沒有過期。</span><span class="sxs-lookup"><span data-stu-id="27d14-262">Validate the `iat` and `exp` claims to ensure that the ID token has not expired.</span></span>

<span data-ttu-id="27d14-263">另外還有幾個您應該執行的驗證，在 [OpenID Connect 核心規格](http://openid.net/specs/openid-connect-core-1_0.html) \(英文\) 中會有其詳細說明。</span><span class="sxs-lookup"><span data-stu-id="27d14-263">Several more validations that you should perform are described in detail in the [OpenID Connect Core Spec](http://openid.net/specs/openid-connect-core-1_0.html).</span></span> <span data-ttu-id="27d14-264">視您的案例而定，您可能也會想要驗證其他宣告。</span><span class="sxs-lookup"><span data-stu-id="27d14-264">You might also want to validate additional claims, depending on your scenario.</span></span> <span data-ttu-id="27d14-265">一些常見的驗證包括：</span><span class="sxs-lookup"><span data-stu-id="27d14-265">Some common validations include:</span></span>

* <span data-ttu-id="27d14-266">確保使用者或組織已為應用程式註冊。</span><span class="sxs-lookup"><span data-stu-id="27d14-266">Ensuring that the user or organization has signed up for the app.</span></span>
* <span data-ttu-id="27d14-267">確保使用者有適當的授權與權限。</span><span class="sxs-lookup"><span data-stu-id="27d14-267">Ensuring that the user has proper authorization and privileges.</span></span>
* <span data-ttu-id="27d14-268">確保驗證方式有一定的強度，例如使用 Azure Multi-Factor Authentication。</span><span class="sxs-lookup"><span data-stu-id="27d14-268">Ensuring that a certain strength of authentication has occurred, such as by using Azure Multi-Factor Authentication.</span></span>

<span data-ttu-id="27d14-269">如需識別碼權杖中宣告的詳細資訊，請參閱 [Azure AD B2C 權杖參考](active-directory-b2c-reference-tokens.md)。</span><span class="sxs-lookup"><span data-stu-id="27d14-269">For more information about the claims in an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span>

<span data-ttu-id="27d14-270">在您已徹底驗證識別碼權杖之後，便可開始與使用者的工作階段。</span><span class="sxs-lookup"><span data-stu-id="27d14-270">After you have completely validated the ID token, you can begin a session with the user.</span></span> <span data-ttu-id="27d14-271">在應用程式中，使用識別碼權杖中的宣告來取得使用者的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="27d14-271">In your app, use the claims in the ID token to obtain information about the user.</span></span> <span data-ttu-id="27d14-272">這項資訊可以用於顯示、記錄、授權等等。</span><span class="sxs-lookup"><span data-stu-id="27d14-272">This information can be used for display, records, authorization, and so on.</span></span>

## <a name="get-access-tokens"></a><span data-ttu-id="27d14-273">取得存取權杖</span><span class="sxs-lookup"><span data-stu-id="27d14-273">Get access tokens</span></span>
<span data-ttu-id="27d14-274">如果您的 Web 應用程式只需要執行原則，則可以略過接下來的幾節。</span><span class="sxs-lookup"><span data-stu-id="27d14-274">If the only thing your web apps needs to do is execute policies, you can skip the next few sections.</span></span> <span data-ttu-id="27d14-275">下列幾節中的資訊僅適用於需要對 Web API 進行已驗證的呼叫，同時受 Azure AD B2C 保護的 Web 應用程式。</span><span class="sxs-lookup"><span data-stu-id="27d14-275">The information in the following sections are applicable only to web apps that need to make authenticated calls to a web API, and which are protected by Azure AD B2C.</span></span>

<span data-ttu-id="27d14-276">現在，您已將使用者註冊到單一頁面應用程式，便可以取得存取權杖，以呼叫受 Azure AD 保護的 Web API。</span><span class="sxs-lookup"><span data-stu-id="27d14-276">Now that you've signed the user in to your single-page app, you can get access tokens for calling web APIs that are secured by Azure AD.</span></span> <span data-ttu-id="27d14-277">即使您已經使用 `token` 回應類型收到權杖，仍可使用此方法來取得其他資源的權杖，而不需重新導向使用者進行再次登入。</span><span class="sxs-lookup"><span data-stu-id="27d14-277">Even if you have already received a token by using the `token` response type, you can use this method to acquire tokens for additional resources without redirecting the user to sign in again.</span></span>

<span data-ttu-id="27d14-278">在一般的 Web 應用程式流程中，您會透過對 `/token` 端點進行要求來完成這個操作。</span><span class="sxs-lookup"><span data-stu-id="27d14-278">In a typical web app flow, you would do this by making a request to the `/token` endpoint.</span></span>  <span data-ttu-id="27d14-279">不過，該端點不支援 CORS 要求，因此無法選擇進行 AJAX 呼叫以取得及重新整理權杖。</span><span class="sxs-lookup"><span data-stu-id="27d14-279">However, the endpoint does not support CORS requests, so making AJAX calls to get and refresh tokens is not an option.</span></span> <span data-ttu-id="27d14-280">相反地，您可以在隱藏的 HTML iframe 元素中使用隱含流程，為其他 Web API 取得新權杖。</span><span class="sxs-lookup"><span data-stu-id="27d14-280">Instead, you can use the implicit flow in a hidden HTML iframe element to get new tokens for other web APIs.</span></span> <span data-ttu-id="27d14-281">以下是範例 (內含換行符號以利閱讀)：</span><span class="sxs-lookup"><span data-stu-id="27d14-281">Here's an example, with line breaks for legibility:</span></span>

```

https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&scope=https%3A%2F%2Fapi.contoso.com%2Ftasks.read
&response_mode=fragment
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&prompt=none
&domain_hint=organizations
&login_hint=myuser@mycompany.com
&p=b2c_1_sign_in
```

| <span data-ttu-id="27d14-282">參數</span><span class="sxs-lookup"><span data-stu-id="27d14-282">Parameter</span></span> | <span data-ttu-id="27d14-283">必要？</span><span class="sxs-lookup"><span data-stu-id="27d14-283">Required?</span></span> | <span data-ttu-id="27d14-284">說明</span><span class="sxs-lookup"><span data-stu-id="27d14-284">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="27d14-285">client_id</span><span class="sxs-lookup"><span data-stu-id="27d14-285">client_id</span></span> |<span data-ttu-id="27d14-286">必要</span><span class="sxs-lookup"><span data-stu-id="27d14-286">Required</span></span> |<span data-ttu-id="27d14-287">在 [Azure 入口網站](https://portal.azure.com)中指派給應用程式的應用程式識別碼。</span><span class="sxs-lookup"><span data-stu-id="27d14-287">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="27d14-288">response_type</span><span class="sxs-lookup"><span data-stu-id="27d14-288">response_type</span></span> |<span data-ttu-id="27d14-289">必要</span><span class="sxs-lookup"><span data-stu-id="27d14-289">Required</span></span> |<span data-ttu-id="27d14-290">必須包含 OpenID Connect 登入的 `id_token` 。</span><span class="sxs-lookup"><span data-stu-id="27d14-290">Must include `id_token` for OpenID Connect sign-in.</span></span>  <span data-ttu-id="27d14-291">它也可能包含回應類型 `token`。</span><span class="sxs-lookup"><span data-stu-id="27d14-291">It might also include the response type `token`.</span></span> <span data-ttu-id="27d14-292">如果您在這裡使用 `token`，應用程式就能立即從授權端點接收存取權杖，而不需向授權端點進行第二次要求。</span><span class="sxs-lookup"><span data-stu-id="27d14-292">If you use `token` here, your app can immediately receive an access token from the authorize endpoint, without making a second request to the authorize endpoint.</span></span> <span data-ttu-id="27d14-293">如果您使用 `token` 回應類型，`scope` 參數就必須包含範圍，以指出要對哪個資源發出權杖。</span><span class="sxs-lookup"><span data-stu-id="27d14-293">If you use the `token` response type, the `scope` parameter must contain a scope that indicates which resource to issue the token for.</span></span> |
| <span data-ttu-id="27d14-294">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="27d14-294">redirect_uri</span></span> |<span data-ttu-id="27d14-295">建議</span><span class="sxs-lookup"><span data-stu-id="27d14-295">Recommended</span></span> |<span data-ttu-id="27d14-296">應用程式的重新導向 URI，您的應用程式可在此傳送及接收驗證回應。</span><span class="sxs-lookup"><span data-stu-id="27d14-296">The redirect URI of your app, where authentication responses can be sent and received by your app.</span></span> <span data-ttu-id="27d14-297">它必須與您在入口網站中註冊的其中一個重新導向 URI 完全相符，不過必須是 URL 編碼格式。</span><span class="sxs-lookup"><span data-stu-id="27d14-297">It must exactly match one of the redirect URIs you registered in the portal, except that it must be URL-encoded.</span></span> |
| <span data-ttu-id="27d14-298">scope</span><span class="sxs-lookup"><span data-stu-id="27d14-298">scope</span></span> |<span data-ttu-id="27d14-299">必要</span><span class="sxs-lookup"><span data-stu-id="27d14-299">Required</span></span> |<span data-ttu-id="27d14-300">範圍的空格分隔清單。</span><span class="sxs-lookup"><span data-stu-id="27d14-300">A space-separated list of scopes.</span></span>  <span data-ttu-id="27d14-301">若要取得權杖，請包含您針對所需資源要求的所有範圍。</span><span class="sxs-lookup"><span data-stu-id="27d14-301">For getting tokens, include all scopes that you require for the intended resource.</span></span> |
| <span data-ttu-id="27d14-302">response_mode</span><span class="sxs-lookup"><span data-stu-id="27d14-302">response_mode</span></span> |<span data-ttu-id="27d14-303">建議</span><span class="sxs-lookup"><span data-stu-id="27d14-303">Recommended</span></span> |<span data-ttu-id="27d14-304">指定將產生之權杖送回到應用程式要使用的方法。</span><span class="sxs-lookup"><span data-stu-id="27d14-304">Specifies the method that is used to send the resulting token back to your app.</span></span>  <span data-ttu-id="27d14-305">可以是 `query`、`form_post` 或 `fragment`。</span><span class="sxs-lookup"><span data-stu-id="27d14-305">Can be `query`, `form_post`, or `fragment`.</span></span> |
| <span data-ttu-id="27d14-306">state</span><span class="sxs-lookup"><span data-stu-id="27d14-306">state</span></span> |<span data-ttu-id="27d14-307">建議</span><span class="sxs-lookup"><span data-stu-id="27d14-307">Recommended</span></span> |<span data-ttu-id="27d14-308">會隨權杖回應傳回之要求中所包含的值。</span><span class="sxs-lookup"><span data-stu-id="27d14-308">A value included in the request that is returned in the token response.</span></span>  <span data-ttu-id="27d14-309">它可以是您想要使用之任何內容的字串。</span><span class="sxs-lookup"><span data-stu-id="27d14-309">It can be a string of any content that you want to use.</span></span>  <span data-ttu-id="27d14-310">通常會使用隨機產生的唯一值來防止跨網站偽造要求攻擊。</span><span class="sxs-lookup"><span data-stu-id="27d14-310">Usually, a randomly generated, unique value is used, to prevent cross-site request forgery attacks.</span></span>  <span data-ttu-id="27d14-311">此狀態也用來在驗證要求出現之前，於應用程式中將使用者狀態的相關資訊編碼。</span><span class="sxs-lookup"><span data-stu-id="27d14-311">The state also is used to encode information about the user's state in the app before the authentication request occurred.</span></span> <span data-ttu-id="27d14-312">例如，使用者所在的網頁或檢視。</span><span class="sxs-lookup"><span data-stu-id="27d14-312">For example, the page or view the user was on.</span></span> |
| <span data-ttu-id="27d14-313">nonce</span><span class="sxs-lookup"><span data-stu-id="27d14-313">nonce</span></span> |<span data-ttu-id="27d14-314">必要</span><span class="sxs-lookup"><span data-stu-id="27d14-314">Required</span></span> |<span data-ttu-id="27d14-315">要求中所含的值 (由應用程式產生)，它會以宣告形式包含於產生的識別碼權杖中。</span><span class="sxs-lookup"><span data-stu-id="27d14-315">A value included in the request, generated by the app, that is included in the resulting ID token as a claim.</span></span>  <span data-ttu-id="27d14-316">應用程式接著便可確認此值，以減少權杖重新執行攻擊。</span><span class="sxs-lookup"><span data-stu-id="27d14-316">The app can then verify this value to mitigate token replay attacks.</span></span> <span data-ttu-id="27d14-317">此值通常是隨機的唯一字串，可用以識別要求的來源。</span><span class="sxs-lookup"><span data-stu-id="27d14-317">Usually, the value is a randomized, unique string that identifies the origin of the request.</span></span> |
| <span data-ttu-id="27d14-318">prompt</span><span class="sxs-lookup"><span data-stu-id="27d14-318">prompt</span></span> |<span data-ttu-id="27d14-319">必要</span><span class="sxs-lookup"><span data-stu-id="27d14-319">Required</span></span> |<span data-ttu-id="27d14-320">若要重新整理並取得隱藏 iframe 中的權杖，請使用 `prompt=none` 以確保 iframe 不會停滯在登入頁面上，並立即返回。</span><span class="sxs-lookup"><span data-stu-id="27d14-320">To refresh and get tokens in a hidden iframe, use `prompt=none` to ensure that the iframe does not get stuck on the sign-in page, and returns immediately.</span></span> |
| <span data-ttu-id="27d14-321">login_hint</span><span class="sxs-lookup"><span data-stu-id="27d14-321">login_hint</span></span> |<span data-ttu-id="27d14-322">必要</span><span class="sxs-lookup"><span data-stu-id="27d14-322">Required</span></span> |<span data-ttu-id="27d14-323">若要重新整理並取得隱藏 iframe 中的權杖，請在此提示中包含使用者的使用者名稱，以區分使用者在特定時間點可能具有的多個工作階段。</span><span class="sxs-lookup"><span data-stu-id="27d14-323">To refresh and get tokens in a hidden iframe, include the username of the user in this hint to distinguish between multiple sessions the user might have at a given  time.</span></span> <span data-ttu-id="27d14-324">您可以使用 `preferred_username` 宣告來擷取先前登入的使用者名稱。</span><span class="sxs-lookup"><span data-stu-id="27d14-324">You can extract the username from an earlier sign-in by using the `preferred_username` claim.</span></span> |
| <span data-ttu-id="27d14-325">domain_hint</span><span class="sxs-lookup"><span data-stu-id="27d14-325">domain_hint</span></span> |<span data-ttu-id="27d14-326">必要</span><span class="sxs-lookup"><span data-stu-id="27d14-326">Required</span></span> |<span data-ttu-id="27d14-327">可以是 `consumers` 或 `organizations`。</span><span class="sxs-lookup"><span data-stu-id="27d14-327">Can be `consumers` or `organizations`.</span></span>  <span data-ttu-id="27d14-328">若要重新整理並取得隱藏 iframe 中的權杖，您必須在要求中包含 `domain_hint` 值。</span><span class="sxs-lookup"><span data-stu-id="27d14-328">For refreshing and getting tokens in a hidden iframe, you must include the `domain_hint` value in the request.</span></span>  <span data-ttu-id="27d14-329">從先前登入的識別碼權杖擷取 `tid` 宣告，以判斷要使用哪一個值。</span><span class="sxs-lookup"><span data-stu-id="27d14-329">Extract the `tid` claim from the ID token of an earlier sign-in to determine which value to use.</span></span>  <span data-ttu-id="27d14-330">如果 `tid` 宣告值是 `9188040d-6c67-4c5b-b112-36a304b66dad`，請使用 `domain_hint=consumers`。</span><span class="sxs-lookup"><span data-stu-id="27d14-330">If the `tid` claim value is `9188040d-6c67-4c5b-b112-36a304b66dad`,  use `domain_hint=consumers`.</span></span>  <span data-ttu-id="27d14-331">否則，使用 `domain_hint=organizations`。</span><span class="sxs-lookup"><span data-stu-id="27d14-331">Otherwise, use `domain_hint=organizations`.</span></span> |

<span data-ttu-id="27d14-332">一旦設定 `prompt=none` 參數，此要求就會立即成功或失敗，並返回您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="27d14-332">By setting the `prompt=none` parameter, this request either succeeds or fails immediately, and returns to your application.</span></span>  <span data-ttu-id="27d14-333">藉由使用 `response_mode` 參數中指定的方法，以指定的重新導向 URI 將成功的回應傳送至您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="27d14-333">A successful response is sent to your app at the indicated redirect URI, by using the method specified in the `response_mode` parameter.</span></span>

### <a name="successful-response"></a><span data-ttu-id="27d14-334">成功回應</span><span class="sxs-lookup"><span data-stu-id="27d14-334">Successful response</span></span>
<span data-ttu-id="27d14-335">使用 `response_mode=fragment` 的成功回應看起來像這樣：</span><span class="sxs-lookup"><span data-stu-id="27d14-335">A successful response by using `response_mode=fragment` looks like this:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
access_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&state=arbitrary_data_you_sent_earlier
&token_type=Bearer
&expires_in=3599
&scope=https%3A%2F%2Fapi.contoso.com%2Ftasks.read
```

| <span data-ttu-id="27d14-336">參數</span><span class="sxs-lookup"><span data-stu-id="27d14-336">Parameter</span></span> | <span data-ttu-id="27d14-337">說明</span><span class="sxs-lookup"><span data-stu-id="27d14-337">Description</span></span> |
| --- | --- |
| <span data-ttu-id="27d14-338">access_token</span><span class="sxs-lookup"><span data-stu-id="27d14-338">access_token</span></span> |<span data-ttu-id="27d14-339">應用程式要求的權杖。</span><span class="sxs-lookup"><span data-stu-id="27d14-339">The token that the app requested.</span></span> |
| <span data-ttu-id="27d14-340">token_type</span><span class="sxs-lookup"><span data-stu-id="27d14-340">token_type</span></span> |<span data-ttu-id="27d14-341">權杖類型一律為持有人。</span><span class="sxs-lookup"><span data-stu-id="27d14-341">The token type will always be Bearer.</span></span> |
| <span data-ttu-id="27d14-342">state</span><span class="sxs-lookup"><span data-stu-id="27d14-342">state</span></span> |<span data-ttu-id="27d14-343">如果要求中包含 `state` 參數，回應中就應該出現相同的值。</span><span class="sxs-lookup"><span data-stu-id="27d14-343">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="27d14-344">應用程式應確認要求和回應中的 `state` 值完全相同。</span><span class="sxs-lookup"><span data-stu-id="27d14-344">The app should verify that the `state` values in the request and response are identical.</span></span> |
| <span data-ttu-id="27d14-345">expires_in</span><span class="sxs-lookup"><span data-stu-id="27d14-345">expires_in</span></span> |<span data-ttu-id="27d14-346">存取權杖的有效期 (以秒為單位)。</span><span class="sxs-lookup"><span data-stu-id="27d14-346">How long the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="27d14-347">scope</span><span class="sxs-lookup"><span data-stu-id="27d14-347">scope</span></span> |<span data-ttu-id="27d14-348">存取權杖有效的範圍。</span><span class="sxs-lookup"><span data-stu-id="27d14-348">The scopes that the access token is valid for.</span></span> |

### <a name="error-response"></a><span data-ttu-id="27d14-349">錯誤回應</span><span class="sxs-lookup"><span data-stu-id="27d14-349">Error response</span></span>
<span data-ttu-id="27d14-350">錯誤回應也能傳送到重新導向 URI，以便讓應用程式能夠適當地處理它們。</span><span class="sxs-lookup"><span data-stu-id="27d14-350">Error responses also can be sent to the redirect URI so that the app can handle them appropriately.</span></span>  <span data-ttu-id="27d14-351">針對 `prompt=none`，預期的錯誤看起來像這樣：</span><span class="sxs-lookup"><span data-stu-id="27d14-351">For `prompt=none`, an expected error looks like this:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
error=user_authentication_required
&error_description=the+request+could+not+be+completed+silently
```

| <span data-ttu-id="27d14-352">參數</span><span class="sxs-lookup"><span data-stu-id="27d14-352">Parameter</span></span> | <span data-ttu-id="27d14-353">說明</span><span class="sxs-lookup"><span data-stu-id="27d14-353">Description</span></span> |
| --- | --- |
| <span data-ttu-id="27d14-354">錯誤</span><span class="sxs-lookup"><span data-stu-id="27d14-354">error</span></span> |<span data-ttu-id="27d14-355">可用於將發生的錯誤分類的錯誤碼字串。</span><span class="sxs-lookup"><span data-stu-id="27d14-355">An error code string that can be used to classify types of errors that occur.</span></span> <span data-ttu-id="27d14-356">您也可以使用字串來回應錯誤。</span><span class="sxs-lookup"><span data-stu-id="27d14-356">You also can use the string to react to errors.</span></span> |
| <span data-ttu-id="27d14-357">error_description</span><span class="sxs-lookup"><span data-stu-id="27d14-357">error_description</span></span> |<span data-ttu-id="27d14-358">可協助您識別驗證錯誤根本原因的特定錯誤訊息。</span><span class="sxs-lookup"><span data-stu-id="27d14-358">A specific error message that can help you identify the root cause of an authentication error.</span></span> |

<span data-ttu-id="27d14-359">如果您在 iframe 要求中收到此錯誤，使用者必須再次以互動方式登入以擷取新的權杖。</span><span class="sxs-lookup"><span data-stu-id="27d14-359">If you receive this error in the iframe request, the user must interactively sign in again to retrieve a new token.</span></span> <span data-ttu-id="27d14-360">您可以利用對應用程式有意義的方式來處理此錯誤。</span><span class="sxs-lookup"><span data-stu-id="27d14-360">You can handle this in a way that makes sense for your application.</span></span>

## <a name="refresh-tokens"></a><span data-ttu-id="27d14-361">重新整理權杖</span><span class="sxs-lookup"><span data-stu-id="27d14-361">Refresh tokens</span></span>
<span data-ttu-id="27d14-362">識別碼權杖和存取權杖都會在短期內過期。</span><span class="sxs-lookup"><span data-stu-id="27d14-362">ID tokens and access tokens both expire after a short period of time.</span></span> <span data-ttu-id="27d14-363">您的應用程式必須準備好定期重新整理這些權杖。</span><span class="sxs-lookup"><span data-stu-id="27d14-363">Your app must be prepared to refresh these tokens periodically.</span></span>  <span data-ttu-id="27d14-364">若要重新整理任一種類型的權杖，可使用 `prompt=none` 參數來控制 Azure AD 步驟，藉以執行我們在上述範例中所使用的相同隱藏 iframe 要求。</span><span class="sxs-lookup"><span data-stu-id="27d14-364">To refresh either type of token, perform the same hidden iframe request we used in an earlier example, by using the `prompt=none` parameter to control Azure AD steps.</span></span>  <span data-ttu-id="27d14-365">若要接收新的 `id_token` 值，請務必使用 `response_type=id_token` 和 `scope=openid`，以及 `nonce` 參數。</span><span class="sxs-lookup"><span data-stu-id="27d14-365">To receive a new `id_token` value, be sure to use `response_type=id_token` and `scope=openid`, and a `nonce` parameter.</span></span>

## <a name="send-a-sign-out-request"></a><span data-ttu-id="27d14-366">傳送登出要求</span><span class="sxs-lookup"><span data-stu-id="27d14-366">Send a sign-out request</span></span>
<span data-ttu-id="27d14-367">當您想要將使用者登出應用程式時，請將使用者重新導向到 Azure AD 進行登出。</span><span class="sxs-lookup"><span data-stu-id="27d14-367">When you want to sign the user out of the app, redirect the user to Azure AD to sign out.</span></span> <span data-ttu-id="27d14-368">如果沒有這麼做，使用者可能不必重新輸入認證，就能夠向您的應用程式重新驗證自己的身分。</span><span class="sxs-lookup"><span data-stu-id="27d14-368">If you don't do this, the user might be able to reauthenticate to your app without entering their credentials again.</span></span> <span data-ttu-id="27d14-369">這是因為使用者將擁有有效的 Azure AD 單一登入工作階段。</span><span class="sxs-lookup"><span data-stu-id="27d14-369">This is because they will have a valid single sign-on session with Azure AD.</span></span>

<span data-ttu-id="27d14-370">您只要將使用者重新導向至 `end_session_endpoint` (列於[驗證識別碼權杖](#validate-the-id-token)中所述的相同 OpenID Connect 中繼資料文件中) 即可。</span><span class="sxs-lookup"><span data-stu-id="27d14-370">You can simply redirect the user to the `end_session_endpoint` that is listed in the same OpenID Connect metadata document described in [Validate the ID token](#validate-the-id-token).</span></span> <span data-ttu-id="27d14-371">例如：</span><span class="sxs-lookup"><span data-stu-id="27d14-371">For example:</span></span>

```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/logout?
p=b2c_1_sign_in
&post_logout_redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
```

| <span data-ttu-id="27d14-372">參數</span><span class="sxs-lookup"><span data-stu-id="27d14-372">Parameter</span></span> | <span data-ttu-id="27d14-373">必要？</span><span class="sxs-lookup"><span data-stu-id="27d14-373">Required?</span></span> | <span data-ttu-id="27d14-374">說明</span><span class="sxs-lookup"><span data-stu-id="27d14-374">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="27d14-375">p</span><span class="sxs-lookup"><span data-stu-id="27d14-375">p</span></span> |<span data-ttu-id="27d14-376">必要</span><span class="sxs-lookup"><span data-stu-id="27d14-376">Required</span></span> |<span data-ttu-id="27d14-377">用來將使用者登出應用程式的原則。</span><span class="sxs-lookup"><span data-stu-id="27d14-377">The policy to use to sign the user out of your application.</span></span> |
| <span data-ttu-id="27d14-378">post_logout_redirect_uri</span><span class="sxs-lookup"><span data-stu-id="27d14-378">post_logout_redirect_uri</span></span> |<span data-ttu-id="27d14-379">建議</span><span class="sxs-lookup"><span data-stu-id="27d14-379">Recommended</span></span> |<span data-ttu-id="27d14-380">使用者在成功登出之後，應該要前往的 URL。</span><span class="sxs-lookup"><span data-stu-id="27d14-380">The URL that the user should be redirected to after successful sign-out.</span></span> <span data-ttu-id="27d14-381">若未包含此項，Azure AD B2C 就會向使用者顯示一般訊息。</span><span class="sxs-lookup"><span data-stu-id="27d14-381">If it is not included, Azure AD B2C displays a generic message to the user.</span></span> |

> [!NOTE]
> <span data-ttu-id="27d14-382">將使用者導向至 `end_session_endpoint`，會利用 Azure AD B2C 清除使用者的部分單一登入狀態。</span><span class="sxs-lookup"><span data-stu-id="27d14-382">Directing the user to the `end_session_endpoint` clears some of the user's single sign-on state with Azure AD B2C.</span></span> <span data-ttu-id="27d14-383">不過，它不會將使用者登出使用者的社交身分識別提供者工作階段。</span><span class="sxs-lookup"><span data-stu-id="27d14-383">However, it doesn't sign the user out of the user's social identity provider session.</span></span> <span data-ttu-id="27d14-384">如果使用者之後在登入時選取相同的識別提供者，該使用者不必輸入自己的認證，就能讓系統重新驗證自己的身分。</span><span class="sxs-lookup"><span data-stu-id="27d14-384">If the user selects the same identify provider during a subsequent sign-in, the user is reauthenticated, without entering their credentials.</span></span> <span data-ttu-id="27d14-385">舉例來說，如果使用者想要登出您的 Azure AD B2C 應用程式，不一定代表他們想要完全登出自己的 Facebook 帳戶。</span><span class="sxs-lookup"><span data-stu-id="27d14-385">If a user wants to sign out of your Azure AD B2C application, it does not necessarily mean they want to completely sign out of their Facebook account, for example.</span></span> <span data-ttu-id="27d14-386">不過，如果使用本機帳戶，使用者的工作階段將會正確地結束。</span><span class="sxs-lookup"><span data-stu-id="27d14-386">However, for local accounts, the user's session will be ended properly.</span></span>
> 
> 

## <a name="use-your-own-azure-ad-b2c-tenant"></a><span data-ttu-id="27d14-387">使用您自己的 Azure AD B2C 租用戶</span><span class="sxs-lookup"><span data-stu-id="27d14-387">Use your own Azure AD B2C tenant</span></span>
<span data-ttu-id="27d14-388">若要自行嘗試這些要求，請完成下列三個步驟。</span><span class="sxs-lookup"><span data-stu-id="27d14-388">To try these requests yourself, complete the following three steps.</span></span> <span data-ttu-id="27d14-389">使用您自己的值取代我們在本文中使用的範例值：</span><span class="sxs-lookup"><span data-stu-id="27d14-389">Replace the example values we use in this article with your own values:</span></span>

1. <span data-ttu-id="27d14-390">[建立 Azure AD B2C 租用戶](active-directory-b2c-get-started.md)。</span><span class="sxs-lookup"><span data-stu-id="27d14-390">[Create an Azure AD B2C tenant](active-directory-b2c-get-started.md).</span></span> <span data-ttu-id="27d14-391">在要求中使用您租用戶的名稱。</span><span class="sxs-lookup"><span data-stu-id="27d14-391">Use the name of your tenant in the requests.</span></span>
2. <span data-ttu-id="27d14-392">[建立應用程式](active-directory-b2c-app-registration.md)來取得應用程式識別碼和 `redirect_uri` 值。</span><span class="sxs-lookup"><span data-stu-id="27d14-392">[Create an application](active-directory-b2c-app-registration.md) to obtain an application ID and a `redirect_uri` value.</span></span> <span data-ttu-id="27d14-393">在應用程式中加入 Web 應用程式或 Web API。</span><span class="sxs-lookup"><span data-stu-id="27d14-393">Include a web app or web API in your app.</span></span> <span data-ttu-id="27d14-394">(選擇性) 您可以建立應用程式祕密。</span><span class="sxs-lookup"><span data-stu-id="27d14-394">Optionally, you can create an application secret.</span></span>
3. <span data-ttu-id="27d14-395">[建立您的原則](active-directory-b2c-reference-policies.md) 來取得原則名稱。</span><span class="sxs-lookup"><span data-stu-id="27d14-395">[Create your policies](active-directory-b2c-reference-policies.md) to obtain your policy names.</span></span>

## <a name="samples"></a><span data-ttu-id="27d14-396">範例</span><span class="sxs-lookup"><span data-stu-id="27d14-396">Samples</span></span>

* <span data-ttu-id="27d14-397">[使用 Node.js 建立單一頁面應用程式](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-nodejs-webapi) \(英文\)</span><span class="sxs-lookup"><span data-stu-id="27d14-397">[Create a single-page app by using Node.js](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-nodejs-webapi)</span></span>
* <span data-ttu-id="27d14-398">[使用 .NET 建立單一頁面應用程式](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-dotnet-webapi) \(英文\)</span><span class="sxs-lookup"><span data-stu-id="27d14-398">[Create a single-page app by using .NET](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-dotnet-webapi)</span></span>

