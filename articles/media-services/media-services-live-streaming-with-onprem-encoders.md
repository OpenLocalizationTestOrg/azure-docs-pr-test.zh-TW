---
title: "使用會建立多位元速率串流的內部部署編碼器執行即時串流 | Microsoft Docs"
description: "本主題描述如何讓通道接收內部部署編碼器的多位元速率即時串流。 串流可以隨即透過一或多個串流端點傳遞給用戶端播放應用程式，使用下列其中一個自動調整串流通訊協定：HLS、Smooth Streaming、DASH。"
services: media-services
documentationcenter: 
author: Juliako
manager: cfowler
editor: 
ms.assetid: d9f0912d-39ec-4c9c-817b-e5d9fcf1f7ea
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: ne
ms.topic: article
ms.date: 04/12/2017
ms.author: cenkd;juliako
ms.openlocfilehash: 3f6569d32708c42247e0ffec70389f2e0f07389e
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/29/2017
---
# <a name="live-streaming-with-on-premises-encoders-that-create-multi-bitrate-streams"></a><span data-ttu-id="73ab0-104">使用會建立多位元速率串流的內部部署編碼器執行即時串流</span><span class="sxs-lookup"><span data-stu-id="73ab0-104">Live streaming with on-premises encoders that create multi-bitrate streams</span></span>
## <a name="overview"></a><span data-ttu-id="73ab0-105">概觀</span><span class="sxs-lookup"><span data-stu-id="73ab0-105">Overview</span></span>
<span data-ttu-id="73ab0-106">在 Azure 媒體服務中，通道代表處理即時串流內容的管線。</span><span class="sxs-lookup"><span data-stu-id="73ab0-106">In Azure Media Services, a *channel* represents a pipeline for processing live-streaming content.</span></span> <span data-ttu-id="73ab0-107">通道會以兩種方式之一收到即時輸入串流：</span><span class="sxs-lookup"><span data-stu-id="73ab0-107">A channel receives live input streams in one of two ways:</span></span>

* <span data-ttu-id="73ab0-108">內部部署即時編碼器會將多位元速率 RTMP 或 Smooth Streaming (分散式 MP4) 串流傳送到未啟用執行媒體服務即時編碼的通道。</span><span class="sxs-lookup"><span data-stu-id="73ab0-108">An on-premises live encoder sends a multi-bitrate RTMP or Smooth Streaming (fragmented MP4) stream to the channel that is not enabled to perform live encoding with Media Services.</span></span> <span data-ttu-id="73ab0-109">內嵌的串流會通過通道，而不需任何進一步處理。</span><span class="sxs-lookup"><span data-stu-id="73ab0-109">The ingested streams pass through channels without any further processing.</span></span> <span data-ttu-id="73ab0-110">此方法稱為 *傳遞*。</span><span class="sxs-lookup"><span data-stu-id="73ab0-110">This method is called *pass-through*.</span></span> <span data-ttu-id="73ab0-111">您可以使用下列以多位元速率 Smooth Streaming 做為輸出的即時編碼器：MediaExcel、Ateme、Imagine Communications、Envivio、Cisco 和 Elemental。</span><span class="sxs-lookup"><span data-stu-id="73ab0-111">You can use the following live encoders that have multi-bitrate Smooth Streaming as output: Media Excel, Ateme, Imagine Communications, Envivio, Cisco, and Elemental.</span></span> <span data-ttu-id="73ab0-112">下列即時編碼器會以 RTMP 做為輸出：Adobe Flash Media Live Encoder、Telestream Wirecast、Haivision、Teradek 和 Tricaster。</span><span class="sxs-lookup"><span data-stu-id="73ab0-112">The following live encoders have RTMP as output: Adobe Flash Media Live Encoder, Telestream Wirecast, Haivision, Teradek, and TriCaster.</span></span> <span data-ttu-id="73ab0-113">即時編碼器也會將單一位元速率串流傳送至無法用於即時編碼的通道，但是不建議您使用此方法。</span><span class="sxs-lookup"><span data-stu-id="73ab0-113">A live encoder can also send a single-bitrate stream to a channel that is not enabled for live encoding, but we don't recommend that.</span></span> <span data-ttu-id="73ab0-114">媒體服務會將串流傳遞給要求的客戶。</span><span class="sxs-lookup"><span data-stu-id="73ab0-114">Media Services delivers the stream to customers who request it.</span></span>

  > [!NOTE]
  > <span data-ttu-id="73ab0-115">使用傳遞方法是進行即時串流的最經濟實惠方式。</span><span class="sxs-lookup"><span data-stu-id="73ab0-115">Using a pass-through method is the most economical way to do live streaming.</span></span>


* <span data-ttu-id="73ab0-116">內部部署即時編碼器會傳送單一位元速率串流至通道，可以使用下列格式之一，以媒體服務執行即時編碼：RTP (MPEG-TS)、RTMP 或 Smooth Streaming (分散的 MP4)。</span><span class="sxs-lookup"><span data-stu-id="73ab0-116">An on-premises live encoder sends a single-bitrate stream to the channel that is enabled to perform live encoding with Media Services in one of the following formats: RTP (MPEG-TS), RTMP, or Smooth Streaming (fragmented MP4).</span></span> <span data-ttu-id="73ab0-117">通道接著會執行即時編碼，將連入的單一位元速率串流編碼成多位元速率 (自動調整) 視訊串流。</span><span class="sxs-lookup"><span data-stu-id="73ab0-117">The channel then performs live encoding of the incoming single-bitrate stream to a multi-bitrate (adaptive) video stream.</span></span> <span data-ttu-id="73ab0-118">媒體服務會將串流傳遞給要求的客戶。</span><span class="sxs-lookup"><span data-stu-id="73ab0-118">Media Services delivers the stream to customers who request it.</span></span>

<span data-ttu-id="73ab0-119">從媒體服務 2.10 版起，當您建立通道時，可以指定您的通道接收輸入串流的方式。</span><span class="sxs-lookup"><span data-stu-id="73ab0-119">Starting with the Media Services 2.10 release, when you create a channel, you can specify how you want your channel to receive the input stream.</span></span> <span data-ttu-id="73ab0-120">您也可以指定是否要讓通道執行您串流的即時編碼。</span><span class="sxs-lookup"><span data-stu-id="73ab0-120">You can also specify whether you want the channel to perform live encoding of your stream.</span></span> <span data-ttu-id="73ab0-121">您有兩個選擇：</span><span class="sxs-lookup"><span data-stu-id="73ab0-121">You have two options:</span></span>

* <span data-ttu-id="73ab0-122">**傳遞**：如果您想要使用會以多位元速率串流 (傳遞串流) 做為輸出的內部部署即時編碼器，請指定這個值。</span><span class="sxs-lookup"><span data-stu-id="73ab0-122">**Pass Through**: Specify this value if you plan to use an on-premises live encoder that will have a multi-bitrate stream (a pass-through stream) as output.</span></span> <span data-ttu-id="73ab0-123">在此情況下，連入的串流會傳遞至輸出，無須任何編碼。</span><span class="sxs-lookup"><span data-stu-id="73ab0-123">In this case, the incoming stream passes through to the output without any encoding.</span></span> <span data-ttu-id="73ab0-124">這是在 2.10 版以前的通道行為。</span><span class="sxs-lookup"><span data-stu-id="73ab0-124">This is the behavior of a channel before the 2.10 release.</span></span> <span data-ttu-id="73ab0-125">本主題提供有關使用此類型通道的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="73ab0-125">This topic gives details about working with channels of this type.</span></span>
* <span data-ttu-id="73ab0-126">**即時編碼**：如果您打算使用媒體服務將單一位元速率即時串流編碼成多位元速率串流，請選擇這個值。</span><span class="sxs-lookup"><span data-stu-id="73ab0-126">**Live Encoding**: Choose this value if you plan to use Media Services to encode your single-bitrate live stream to a multi-bitrate stream.</span></span> <span data-ttu-id="73ab0-127">請注意，在**執行**狀態中離開即時編碼通道將會產生費用。</span><span class="sxs-lookup"><span data-stu-id="73ab0-127">Be aware that leaving a live encoding channel in a **Running** state will incur billing charges.</span></span> <span data-ttu-id="73ab0-128">建議您在即時串流事件完成之後立即停止執行的通道，以避免額外的每小時費用。</span><span class="sxs-lookup"><span data-stu-id="73ab0-128">We recommend that you immediately stop your running channels after your live-streaming event is complete to avoid extra hourly charges.</span></span> <span data-ttu-id="73ab0-129">媒體服務會將串流傳遞給要求的客戶。</span><span class="sxs-lookup"><span data-stu-id="73ab0-129">Media Services delivers the stream to customers who request it.</span></span>

> [!NOTE]
> <span data-ttu-id="73ab0-130">本主題討論未啟用而無法執行即時編碼的通道屬性。</span><span class="sxs-lookup"><span data-stu-id="73ab0-130">This topic discusses attributes of channels that are not enabled to perform live encoding.</span></span> <span data-ttu-id="73ab0-131">如需使用已啟用執行即時編碼通道的相關資訊，請參閱 [使用 Azure 媒體服務建立多位元速率串流的即時串流](media-services-manage-live-encoder-enabled-channels.md)。</span><span class="sxs-lookup"><span data-stu-id="73ab0-131">For information about working with channels that are enabled to perform live encoding, see [Live streaming using Azure Media Services to create multi-bitrate streams](media-services-manage-live-encoder-enabled-channels.md).</span></span>
>
>

<span data-ttu-id="73ab0-132">下圖顯示一個即時串流工作流程，這個流程利用內部部署即時編碼器以多位元速率 RTMP 或 Fragmented MP4 (Smooth Streaming) 串流做為輸出。</span><span class="sxs-lookup"><span data-stu-id="73ab0-132">The following diagram represents a live-streaming workflow that uses an on-premises live encoder to have multi-bitrate RTMP or fragmented MP4 (Smooth Streaming) streams as output.</span></span>

![即時工作流程][live-overview]

## <span data-ttu-id="73ab0-134"><a id="scenario"></a>常見即時串流案例</span><span class="sxs-lookup"><span data-stu-id="73ab0-134"><a id="scenario"></a>Common live-streaming scenario</span></span>
<span data-ttu-id="73ab0-135">下列步驟描述當我們建立一般即時串流應用程式時，會涉及到的各種工作。</span><span class="sxs-lookup"><span data-stu-id="73ab0-135">The following steps describe tasks involved in creating common live-streaming applications.</span></span>

1. <span data-ttu-id="73ab0-136">將攝影機連接到電腦。</span><span class="sxs-lookup"><span data-stu-id="73ab0-136">Connect a video camera to a computer.</span></span> <span data-ttu-id="73ab0-137">啟動並設定內部部署即時編碼器，讓它以多位元速率 RTMP 或 Fragmented MP4 (Smooth Streaming) 串流做為輸出。</span><span class="sxs-lookup"><span data-stu-id="73ab0-137">Start and configure an on-premises live encoder that has a multi-bitrate RTMP or fragmented MP4 (Smooth Streaming) stream as output.</span></span> <span data-ttu-id="73ab0-138">如需詳細資訊，請參閱 [Azure 媒體服務 RTMP 支援和即時編碼器](http://go.microsoft.com/fwlink/?LinkId=532824)。</span><span class="sxs-lookup"><span data-stu-id="73ab0-138">For more information, see [Azure Media Services RTMP Support and Live Encoders](http://go.microsoft.com/fwlink/?LinkId=532824).</span></span>

    <span data-ttu-id="73ab0-139">您也可以在建立通道之後執行此步驟。</span><span class="sxs-lookup"><span data-stu-id="73ab0-139">You can also perform this step after you create your channel.</span></span>
2. <span data-ttu-id="73ab0-140">建立並啟動通道。</span><span class="sxs-lookup"><span data-stu-id="73ab0-140">Create and start a channel.</span></span>

3. <span data-ttu-id="73ab0-141">擷取通道內嵌 URL。</span><span class="sxs-lookup"><span data-stu-id="73ab0-141">Retrieve the channel ingest URL.</span></span>

    <span data-ttu-id="73ab0-142">即時編碼器會使用內嵌 URL 來傳送串流到通道。</span><span class="sxs-lookup"><span data-stu-id="73ab0-142">The live encoder uses the ingest URL to send the stream to the channel.</span></span>
4. <span data-ttu-id="73ab0-143">擷取通道預覽 URL。</span><span class="sxs-lookup"><span data-stu-id="73ab0-143">Retrieve the channel preview URL.</span></span>

    <span data-ttu-id="73ab0-144">使用此 URL 來確認您的通道會正確接收即時串流。</span><span class="sxs-lookup"><span data-stu-id="73ab0-144">Use this URL to verify that your channel is properly receiving the live stream.</span></span>
5. <span data-ttu-id="73ab0-145">建立程式。</span><span class="sxs-lookup"><span data-stu-id="73ab0-145">Create a program.</span></span>

    <span data-ttu-id="73ab0-146">使用 Azure 入口網站時，建立程式也會建立資產。</span><span class="sxs-lookup"><span data-stu-id="73ab0-146">When you use the Azure portal, creating a program also creates an asset.</span></span>

    <span data-ttu-id="73ab0-147">使用 .NET SDK 或 REST 時，您必須建立資產並指定要在建立程式時使用此資產。</span><span class="sxs-lookup"><span data-stu-id="73ab0-147">When you use the .NET SDK or REST, you need to create an asset and specify to use this asset when creating a program.</span></span>
6. <span data-ttu-id="73ab0-148">發行與程式相關聯的資產。</span><span class="sxs-lookup"><span data-stu-id="73ab0-148">Publish the asset that's associated with the program.</span></span>   

    >[!NOTE]
    ><span data-ttu-id="73ab0-149">建立 Azure 媒體服務帳戶時，**預設**串流端點會新增至 [已停止] 狀態的帳戶。</span><span class="sxs-lookup"><span data-stu-id="73ab0-149">When your Azure Media Services account is created, a **default** streaming endpoint is added to your account in the **Stopped** state.</span></span> <span data-ttu-id="73ab0-150">您想要串流內容的串流端點必須處於 [執行中] 狀態。</span><span class="sxs-lookup"><span data-stu-id="73ab0-150">The streaming endpoint from which you want to stream content has to be in the **Running** state.</span></span>

7. <span data-ttu-id="73ab0-151">當您準備好開始串流和封存時，請啟動程式。</span><span class="sxs-lookup"><span data-stu-id="73ab0-151">Start the program when you're ready to start streaming and archiving.</span></span>

8. <span data-ttu-id="73ab0-152">即時編碼器會收到啟動公告的信號 (選擇性)。</span><span class="sxs-lookup"><span data-stu-id="73ab0-152">Optionally, the live encoder can be signaled to start an advertisement.</span></span> <span data-ttu-id="73ab0-153">公告會插入輸出串流中。</span><span class="sxs-lookup"><span data-stu-id="73ab0-153">The advertisement is inserted in the output stream.</span></span>

9. <span data-ttu-id="73ab0-154">每當您想要停止串流處理和封存事件時，請停止程式。</span><span class="sxs-lookup"><span data-stu-id="73ab0-154">Stop the program whenever you want to stop streaming and archiving the event.</span></span>

10. <span data-ttu-id="73ab0-155">刪除程式 (並選擇性地刪除資產)。</span><span class="sxs-lookup"><span data-stu-id="73ab0-155">Delete the program (and optionally delete the asset).</span></span>     

## <span data-ttu-id="73ab0-156"><a id="channel"></a>通道和其相關元件的說明</span><span class="sxs-lookup"><span data-stu-id="73ab0-156"><a id="channel"></a>Description of a channel and its related components</span></span>
### <span data-ttu-id="73ab0-157"><a id="channel_input"></a>頻道輸入 (內嵌) 組態</span><span class="sxs-lookup"><span data-stu-id="73ab0-157"><a id="channel_input"></a>Channel input (ingest) configurations</span></span>
#### <span data-ttu-id="73ab0-158"><a id="ingest_protocols"></a>嵌入串流通訊協定</span><span class="sxs-lookup"><span data-stu-id="73ab0-158"><a id="ingest_protocols"></a>Ingest streaming protocol</span></span>
<span data-ttu-id="73ab0-159">媒體服務會使用多位元速率分散 MP4 和多位元速率 RTMP 做為串流通訊協定來支援內嵌即時摘要。</span><span class="sxs-lookup"><span data-stu-id="73ab0-159">Media Services supports ingesting live feeds by using multi-bitrate fragmented MP4 and multi-bitrate RTMP as streaming protocols.</span></span> <span data-ttu-id="73ab0-160">選取 RTMP 內嵌串流通訊協定時，會為通道建立兩個 ingest(input) 端點：</span><span class="sxs-lookup"><span data-stu-id="73ab0-160">When the RTMP ingest streaming protocol is selected, two ingest (input) endpoints are created for the channel:</span></span>

* <span data-ttu-id="73ab0-161">**主要 URL**：指定通道主要 RTMP 內嵌端點的完整 URL。</span><span class="sxs-lookup"><span data-stu-id="73ab0-161">**Primary URL**: Specifies the fully qualified URL of the channel's primary RTMP ingest endpoint.</span></span>
* <span data-ttu-id="73ab0-162">**次要 URL** (選用)：指定通道次要 RTMP 內嵌端點的完整 URL。</span><span class="sxs-lookup"><span data-stu-id="73ab0-162">**Secondary URL** (optional): Specifies the fully qualified URL of the channel's secondary RTMP ingest endpoint.</span></span>

<span data-ttu-id="73ab0-163">如果您想要改善內嵌串流的持久性、容錯 (以及編碼器容錯移轉和容錯)，特別是針對下列案例，請使用次要 URL：</span><span class="sxs-lookup"><span data-stu-id="73ab0-163">Use the secondary URL if you want to improve the durability and fault tolerance of your ingest stream (as well as encoder failover and fault tolerance), especially for the following scenarios:</span></span>

- <span data-ttu-id="73ab0-164">單一編碼器雙重推送至主要和次要 URL：</span><span class="sxs-lookup"><span data-stu-id="73ab0-164">Single encoder double-pushing to both primary and secondary URLs:</span></span>

    <span data-ttu-id="73ab0-165">這個案例的主要目的是為網路變動起伏和快速變換提供恢復功能。</span><span class="sxs-lookup"><span data-stu-id="73ab0-165">The main purpose of this scenario is to provide more resiliency to network fluctuations and jitters.</span></span> <span data-ttu-id="73ab0-166">部分 RTMP 編碼器無法妥善處理網路中斷連線。</span><span class="sxs-lookup"><span data-stu-id="73ab0-166">Some RTMP encoders don't handle network disconnects well.</span></span> <span data-ttu-id="73ab0-167">當發生網路中斷連線時，編碼器可能會停止編碼，然後在重新連線時不會傳送緩衝處理過的資料。</span><span class="sxs-lookup"><span data-stu-id="73ab0-167">When a network disconnect happens, an encoder might stop encoding and then not send the buffered data when a reconnect happens.</span></span> <span data-ttu-id="73ab0-168">這會導致不連續和資料遺失。</span><span class="sxs-lookup"><span data-stu-id="73ab0-168">This causes discontinuities and data loss.</span></span> <span data-ttu-id="73ab0-169">網路中斷連線會因為網路不佳或 Azure 端正在進行維護而發生。</span><span class="sxs-lookup"><span data-stu-id="73ab0-169">Network disconnects can happen because of a bad network or maintenance on the Azure side.</span></span> <span data-ttu-id="73ab0-170">主要/次要 URL 會減少網路問題，並提供受控制的升級程序。</span><span class="sxs-lookup"><span data-stu-id="73ab0-170">Primary/secondary URLs reduce the network problems and provide a controlled upgrade process.</span></span> <span data-ttu-id="73ab0-171">每次已排程的網路發生中斷連線時，媒體服務會管理主要和次要中斷連線，並提供兩者之間的延遲中斷連線。</span><span class="sxs-lookup"><span data-stu-id="73ab0-171">Each time a scheduled network disconnect happens, Media Services manages the primary and secondary disconnects and provides a delayed disconnect between the two.</span></span> <span data-ttu-id="73ab0-172">接著，編碼器會有時間持續傳送資料，並再次重新連線。</span><span class="sxs-lookup"><span data-stu-id="73ab0-172">Encoders then have time to keep sending data and reconnect again.</span></span> <span data-ttu-id="73ab0-173">中斷連線的順序可以是隨機的，但是主要/次要或次要/主要 URL 之間一定會有延遲。</span><span class="sxs-lookup"><span data-stu-id="73ab0-173">The order of the disconnects can be random, but there will always be a delay between primary/secondary or secondary/primary URLs.</span></span> <span data-ttu-id="73ab0-174">在這種情況下，編碼器仍是單一失敗點。</span><span class="sxs-lookup"><span data-stu-id="73ab0-174">In this scenario, the encoder is still the single point of failure.</span></span>

- <span data-ttu-id="73ab0-175">多個編碼器的情況下，每個編碼器會推送到專用點：</span><span class="sxs-lookup"><span data-stu-id="73ab0-175">Multiple encoders, with each encoder pushing to a dedicated point:</span></span>

    <span data-ttu-id="73ab0-176">這種情況下會提供兩個編碼器和擷取備援。</span><span class="sxs-lookup"><span data-stu-id="73ab0-176">This scenario provides both encoder and ingest redundancy.</span></span> <span data-ttu-id="73ab0-177">在這個案例中，encoder1 會推送至主要 URL，而 encoder2 會推送至次要 URL。</span><span class="sxs-lookup"><span data-stu-id="73ab0-177">In this scenario, encoder1 pushes to the primary URL, and encoder2 pushes to the secondary URL.</span></span> <span data-ttu-id="73ab0-178">當編碼器失敗時，其他編碼器可以持續傳送資料。</span><span class="sxs-lookup"><span data-stu-id="73ab0-178">When an encoder fails, the other encoder can keep sending data.</span></span> <span data-ttu-id="73ab0-179">可以維持資料備援，因為媒體服務不會同時中斷主要和次要 URL 的連線。</span><span class="sxs-lookup"><span data-stu-id="73ab0-179">Data redundancy can be maintained because Media Services does not disconnect primary and secondary URLs at the same time.</span></span> <span data-ttu-id="73ab0-180">此案例假設編碼器是時間同步處理，並提供完全相同的資料。</span><span class="sxs-lookup"><span data-stu-id="73ab0-180">This scenario assumes that encoders are time synced and provide exactly the same data.</span></span>  

- <span data-ttu-id="73ab0-181">多個編碼器雙重推送至主要和次要 URL：</span><span class="sxs-lookup"><span data-stu-id="73ab0-181">Multiple encoders double-pushing to both primary and secondary URLs:</span></span>

    <span data-ttu-id="73ab0-182">在此案例中，兩個編碼器會將資料推送至主要和次要 URL。</span><span class="sxs-lookup"><span data-stu-id="73ab0-182">In this scenario, both encoders push data to both primary and secondary URLs.</span></span> <span data-ttu-id="73ab0-183">這提供最佳的可靠性及容錯功能，以及資料備援。</span><span class="sxs-lookup"><span data-stu-id="73ab0-183">This provides the best reliability and fault tolerance, as well as data redundancy.</span></span> <span data-ttu-id="73ab0-184">此案例可容許兩個編碼器皆失敗並且中斷連線，即使一個編碼器停止運作。</span><span class="sxs-lookup"><span data-stu-id="73ab0-184">This scenario can tolerate both encoder failures and disconnects, even if one encoder stops working.</span></span> <span data-ttu-id="73ab0-185">它假設編碼器是時間同步處理，並提供完全相同的資料。</span><span class="sxs-lookup"><span data-stu-id="73ab0-185">It assumes that encoders are time synced and provide exactly the same data.</span></span>  

<span data-ttu-id="73ab0-186">如需 RTMP 即時編碼器的詳細資訊，請參閱 [Azure 媒體服務 RTMP 支援和即時編碼器](http://go.microsoft.com/fwlink/?LinkId=532824)。</span><span class="sxs-lookup"><span data-stu-id="73ab0-186">For information about RTMP live encoders, see [Azure Media Services RTMP Support and Live Encoders](http://go.microsoft.com/fwlink/?LinkId=532824).</span></span>

#### <a name="ingest-urls-endpoints"></a><span data-ttu-id="73ab0-187">內嵌 URL (端點)</span><span class="sxs-lookup"><span data-stu-id="73ab0-187">Ingest URLs (endpoints)</span></span>
<span data-ttu-id="73ab0-188">通道提供一個輸入端點 (內嵌 URL)，您可以在即時編碼器中指定這個端點，這樣編碼器就可以將資料流推播到您的通道。</span><span class="sxs-lookup"><span data-stu-id="73ab0-188">A channel provides an input endpoint (ingest URL) that you specify in the live encoder, so the encoder can push streams to your channels.</span></span>   

<span data-ttu-id="73ab0-189">當您建立通道時，您可以取得內嵌 URL。</span><span class="sxs-lookup"><span data-stu-id="73ab0-189">You can get the ingest URLs when you create the channel.</span></span> <span data-ttu-id="73ab0-190">若您要取得這些 URL，通道不一定要在 **執行** 狀態。</span><span class="sxs-lookup"><span data-stu-id="73ab0-190">For you to get these URLs, the channel does not have to be in the **Running** state.</span></span> <span data-ttu-id="73ab0-191">當您準備好開始將資料推入通道，通道必須處於 **執行** 狀態。</span><span class="sxs-lookup"><span data-stu-id="73ab0-191">When you're ready to start pushing data to the channel, the channel must be in the **Running** state.</span></span> <span data-ttu-id="73ab0-192">通道開始內嵌資料後，您可以透過預覽 URL 來預覽資料流。</span><span class="sxs-lookup"><span data-stu-id="73ab0-192">After the channel starts ingesting data, you can preview your stream through the preview URL.</span></span>

<span data-ttu-id="73ab0-193">您可以選擇透過 SSL 連線來內嵌 Fragmented MP4 (Smooth Streaming) 即時資料流。</span><span class="sxs-lookup"><span data-stu-id="73ab0-193">You have an option of ingesting a fragmented MP4 (Smooth Streaming) live stream over an SSL connection.</span></span> <span data-ttu-id="73ab0-194">若要透過 SSL 擷取，請務必將擷取 URL 更新為 HTTPS。</span><span class="sxs-lookup"><span data-stu-id="73ab0-194">To ingest over SSL, make sure to update the ingest URL to HTTPS.</span></span> <span data-ttu-id="73ab0-195">目前，您無法內嵌 RTMP over SSL。</span><span class="sxs-lookup"><span data-stu-id="73ab0-195">Currently, you cannot ingest RTMP over SSL.</span></span>

#### <span data-ttu-id="73ab0-196"><a id="keyframe_interval"></a>主要畫面格間隔</span><span class="sxs-lookup"><span data-stu-id="73ab0-196"><a id="keyframe_interval"></a>Keyframe interval</span></span>
<span data-ttu-id="73ab0-197">當您使用內部部署即時編碼器來產生多位元速率資料流時，主要畫面格間隔會指定圖片群組 (GOP) 持續期間以供該外部編碼器使用。</span><span class="sxs-lookup"><span data-stu-id="73ab0-197">When you're using an on-premises live encoder to generate multi-bitrate stream, the keyframe interval specifies the duration of the group of pictures (GOP) as used by that external encoder.</span></span> <span data-ttu-id="73ab0-198">在通道收到此內送串流之後，您可以再將即時串流傳遞至下列任一形式的用戶端播放應用程式：Smooth Streaming、HTTP 動態調適性串流 (DASH) 及 HTTP 即時串流 (HLS)。</span><span class="sxs-lookup"><span data-stu-id="73ab0-198">After the channel receives this incoming stream, you can deliver your live stream to client playback applications in any of the following formats: Smooth Streaming, Dynamic Adaptive Streaming over HTTP (DASH), and HTTP Live Streaming (HLS).</span></span> <span data-ttu-id="73ab0-199">在執行即時資料流時，會一律動態封裝 HLS。</span><span class="sxs-lookup"><span data-stu-id="73ab0-199">When you're doing live streaming, HLS is always packaged dynamically.</span></span> <span data-ttu-id="73ab0-200">依預設，媒體服務會根據從即時編碼器收到的主要畫面格間隔，自動計算 HLS 區段封裝比例 (每一個區段的片段)。</span><span class="sxs-lookup"><span data-stu-id="73ab0-200">By default, Media Services automatically calculates the HLS segment packaging ratio (fragments per segment) based on the keyframe interval that's received from the live encoder.</span></span>

<span data-ttu-id="73ab0-201">下表顯示如何計算區段持續時間：</span><span class="sxs-lookup"><span data-stu-id="73ab0-201">The following table shows how the segment duration is calculated:</span></span>

| <span data-ttu-id="73ab0-202">主要畫面格間隔</span><span class="sxs-lookup"><span data-stu-id="73ab0-202">Keyframe interval</span></span> | <span data-ttu-id="73ab0-203">HLS 區段封裝比例 (FragmentsPerSegment)</span><span class="sxs-lookup"><span data-stu-id="73ab0-203">HLS segment packaging ratio (FragmentsPerSegment)</span></span> | <span data-ttu-id="73ab0-204">範例</span><span class="sxs-lookup"><span data-stu-id="73ab0-204">Example</span></span> |
| --- | --- | --- |
| <span data-ttu-id="73ab0-205">小於或等於 3 秒</span><span class="sxs-lookup"><span data-stu-id="73ab0-205">Less than or equal to 3 seconds</span></span> |<span data-ttu-id="73ab0-206">3:1</span><span class="sxs-lookup"><span data-stu-id="73ab0-206">3:1</span></span> |<span data-ttu-id="73ab0-207">如果 KeyFrameInterval (或 GOP) 為 2 秒鐘，則預設 HLS 區段封裝比率會是 3 比 1。</span><span class="sxs-lookup"><span data-stu-id="73ab0-207">If KeyFrameInterval (or GOP) is 2 seconds, the default HLS segment packaging ratio is 3 to 1.</span></span> <span data-ttu-id="73ab0-208">這會建立 6 秒 HLS 區段。</span><span class="sxs-lookup"><span data-stu-id="73ab0-208">This creates a 6-second HLS segment.</span></span> |
| <span data-ttu-id="73ab0-209">3 到 5 秒</span><span class="sxs-lookup"><span data-stu-id="73ab0-209">3 to 5 seconds</span></span> |<span data-ttu-id="73ab0-210">2:1</span><span class="sxs-lookup"><span data-stu-id="73ab0-210">2:1</span></span> |<span data-ttu-id="73ab0-211">如果 KeyFrameInterval (或 GOP) 為 4 秒鐘，則預設 HLS 區段封裝比率會是 2 比 1。</span><span class="sxs-lookup"><span data-stu-id="73ab0-211">If KeyFrameInterval (or GOP) is 4 seconds, the default HLS segment packaging ratio is 2 to 1.</span></span> <span data-ttu-id="73ab0-212">這會建立 8 秒 HLS 區段。</span><span class="sxs-lookup"><span data-stu-id="73ab0-212">This creates an 8-second HLS segment.</span></span> |
| <span data-ttu-id="73ab0-213">大於 5 秒</span><span class="sxs-lookup"><span data-stu-id="73ab0-213">Greater than 5 seconds</span></span> |<span data-ttu-id="73ab0-214">1:1</span><span class="sxs-lookup"><span data-stu-id="73ab0-214">1:1</span></span> |<span data-ttu-id="73ab0-215">如果 KeyFrameInterval (或 GOP) 為 6 秒鐘，則預設 HLS 區段封裝比率會是 1 比 1。</span><span class="sxs-lookup"><span data-stu-id="73ab0-215">If KeyFrameInterval (or GOP) is 6 seconds, the default HLS segment packaging ratio is 1 to 1.</span></span> <span data-ttu-id="73ab0-216">這會建立 6 秒 HLS 區段。</span><span class="sxs-lookup"><span data-stu-id="73ab0-216">This creates a 6-second HLS segment.</span></span> |

<span data-ttu-id="73ab0-217">您可以設定通道的輸出並在 ChannelOutputHls 上設定 FragmentsPerSegment，即可變更每個區段比例的片段。</span><span class="sxs-lookup"><span data-stu-id="73ab0-217">You can change the fragments-per-segment ratio by configuring the channel’s output and setting FragmentsPerSegment on ChannelOutputHls.</span></span>

<span data-ttu-id="73ab0-218">您也可以在 ChanneInput 上設定 KeyFrameInterval 屬性，即可變更主要畫面格間隔值。</span><span class="sxs-lookup"><span data-stu-id="73ab0-218">You can also change the keyframe interval value by setting the KeyFrameInterval property on ChanneInput.</span></span> <span data-ttu-id="73ab0-219">如果您明確設定 KeyFrameInterval，就會透過先前所述的規則計算 FragmentsPerSegment HLS 區段封裝比率。</span><span class="sxs-lookup"><span data-stu-id="73ab0-219">If you explicitly set KeyFrameInterval, the HLS segment packaging ratio FragmentsPerSegment is calculated via the rules described previously.</span></span>  

<span data-ttu-id="73ab0-220">如果您明確設定 KeyFrameInterval 和 FragmentsPerSegment，媒體服務會使用您所設定的值。</span><span class="sxs-lookup"><span data-stu-id="73ab0-220">If you explicitly set both KeyFrameInterval and FragmentsPerSegment, Media Services will use the values that you set.</span></span>

#### <a name="allowed-ip-addresses"></a><span data-ttu-id="73ab0-221">允許的 IP 位址</span><span class="sxs-lookup"><span data-stu-id="73ab0-221">Allowed IP addresses</span></span>
<span data-ttu-id="73ab0-222">您可以定義允許將視訊發行到這個通道的 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="73ab0-222">You can define the IP addresses that are allowed to publish video to this channel.</span></span> <span data-ttu-id="73ab0-223">可以將允許的 IP 位址指定為下列其中一項︰</span><span class="sxs-lookup"><span data-stu-id="73ab0-223">An allowed IP address can be specified as one of the following:</span></span>

* <span data-ttu-id="73ab0-224">單一 IP 位址 (例如 10.0.0.1)</span><span class="sxs-lookup"><span data-stu-id="73ab0-224">A single IP address (for example, 10.0.0.1)</span></span>
* <span data-ttu-id="73ab0-225">使用 IP 位址和 CIDR 子網路遮罩的 IP 範圍 (例如 10.0.0.1/22)</span><span class="sxs-lookup"><span data-stu-id="73ab0-225">An IP range that uses an IP address and a CIDR subnet mask (for example, 10.0.0.1/22)</span></span>
* <span data-ttu-id="73ab0-226">使用 IP 位址和小數點十進位子網路遮罩的 IP 範圍 (例如 10.0.0.1(255.255.252.0))</span><span class="sxs-lookup"><span data-stu-id="73ab0-226">An IP range that uses an IP address and a dotted decimal subnet mask (for example, 10.0.0.1(255.255.252.0))</span></span>

<span data-ttu-id="73ab0-227">如果未指定 IP 位址而且也未定義規則，則任何 IP 位址都不允許。</span><span class="sxs-lookup"><span data-stu-id="73ab0-227">If no IP addresses are specified and there's no rule definition, then no IP address will be allowed.</span></span> <span data-ttu-id="73ab0-228">若要允許任何 IP 位址，請建立規則，並設定 0.0.0.0/0。</span><span class="sxs-lookup"><span data-stu-id="73ab0-228">To allow any IP address, create a rule and set 0.0.0.0/0.</span></span>

### <a name="channel-preview"></a><span data-ttu-id="73ab0-229">通道預覽</span><span class="sxs-lookup"><span data-stu-id="73ab0-229">Channel preview</span></span>
#### <a name="preview-urls"></a><span data-ttu-id="73ab0-230">預覽 URL</span><span class="sxs-lookup"><span data-stu-id="73ab0-230">Preview URLs</span></span>
<span data-ttu-id="73ab0-231">通道會在進一步處理和傳遞之前，提供您用來預覽及驗證串流的預覽端點 (預覽 URL)。</span><span class="sxs-lookup"><span data-stu-id="73ab0-231">Channels provide a preview endpoint (preview URL) that you use to preview and validate your stream before further processing and delivery.</span></span>

<span data-ttu-id="73ab0-232">當您建立通道時，您可以取得預覽 URL。</span><span class="sxs-lookup"><span data-stu-id="73ab0-232">You can get the preview URL when you create the channel.</span></span> <span data-ttu-id="73ab0-233">若您要取得此 URL，通道不一定要在 **執行** 狀態。</span><span class="sxs-lookup"><span data-stu-id="73ab0-233">For you to get the URL, the channel does not have to be in the **Running** state.</span></span> <span data-ttu-id="73ab0-234">通道開始內嵌資料後，您就可以預覽您的資料流。</span><span class="sxs-lookup"><span data-stu-id="73ab0-234">After the channel starts ingesting data, you can preview your stream.</span></span>

<span data-ttu-id="73ab0-235">無論指定的輸入類型為何，目前預覽串流都只能以分散式 MP4 (Smooth Streaming) 格式傳遞。</span><span class="sxs-lookup"><span data-stu-id="73ab0-235">Currently, the preview stream can be delivered only in fragmented MP4 (Smooth Streaming) format, regardless of the specified input type.</span></span> <span data-ttu-id="73ab0-236">您可以使用 [Smooth Streaming 健全狀況監視](http://smf.cloudapp.net/healthmonitor)播放器測試 Smooth Stream。</span><span class="sxs-lookup"><span data-stu-id="73ab0-236">You can use the [Smooth Streaming Health Monitor](http://smf.cloudapp.net/healthmonitor) player to test the smooth stream.</span></span> <span data-ttu-id="73ab0-237">您也可以使用裝載於 Azure 入口網站中的播放器來檢視您的串流。</span><span class="sxs-lookup"><span data-stu-id="73ab0-237">You can also use a player that's hosted in the Azure portal to view your stream.</span></span>

#### <a name="allowed-ip-addresses"></a><span data-ttu-id="73ab0-238">允許的 IP 位址</span><span class="sxs-lookup"><span data-stu-id="73ab0-238">Allowed IP addresses</span></span>
<span data-ttu-id="73ab0-239">您可以定義允許連接到預覽端點的 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="73ab0-239">You can define the IP addresses that are allowed to connect to the preview endpoint.</span></span> <span data-ttu-id="73ab0-240">如果沒有指定 IP 位址，將會允許任何 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="73ab0-240">If no IP addresses are specified, any IP address will be allowed.</span></span> <span data-ttu-id="73ab0-241">可以將允許的 IP 位址指定為下列其中一項︰</span><span class="sxs-lookup"><span data-stu-id="73ab0-241">An allowed IP address can be specified as one of the following:</span></span>

* <span data-ttu-id="73ab0-242">單一 IP 位址 (例如 10.0.0.1)</span><span class="sxs-lookup"><span data-stu-id="73ab0-242">A single IP address (for example, 10.0.0.1)</span></span>
* <span data-ttu-id="73ab0-243">使用 IP 位址和 CIDR 子網路遮罩的 IP 範圍 (例如 10.0.0.1/22)</span><span class="sxs-lookup"><span data-stu-id="73ab0-243">An IP range that uses an IP address and a CIDR subnet mask (for example, 10.0.0.1/22)</span></span>
* <span data-ttu-id="73ab0-244">使用 IP 位址和小數點十進位子網路遮罩的 IP 範圍 (例如 10.0.0.1(255.255.252.0))</span><span class="sxs-lookup"><span data-stu-id="73ab0-244">An IP range that uses an IP address and a dotted decimal subnet mask (for example, 10.0.0.1(255.255.252.0))</span></span>

### <a name="channel-output"></a><span data-ttu-id="73ab0-245">通道輸出</span><span class="sxs-lookup"><span data-stu-id="73ab0-245">Channel output</span></span>
<span data-ttu-id="73ab0-246">如需通道輸出的相關資訊，請參閱[主要畫面格間隔](#keyframe_interval)一節。</span><span class="sxs-lookup"><span data-stu-id="73ab0-246">For information about channel output, see the [Keyframe interval](#keyframe_interval) section.</span></span>

### <a name="channel-managed-programs"></a><span data-ttu-id="73ab0-247">通道管理程式</span><span class="sxs-lookup"><span data-stu-id="73ab0-247">Channel-managed programs</span></span>
<span data-ttu-id="73ab0-248">通道與程式相關聯，而您可以使用程式來控制即時串流中區段的發行和儲存。</span><span class="sxs-lookup"><span data-stu-id="73ab0-248">A channel is associated with programs that you can use to control the publishing and storage of segments in a live stream.</span></span> <span data-ttu-id="73ab0-249">通道會管理程式。</span><span class="sxs-lookup"><span data-stu-id="73ab0-249">Channels manage programs.</span></span> <span data-ttu-id="73ab0-250">「通道」與「程式」的關係與傳統媒體十分類似，其中，通道具有固定的內容串流，而且程式的範圍是該通道上的某個計時事件。</span><span class="sxs-lookup"><span data-stu-id="73ab0-250">The channel and program relationship is very similar to traditional media, where a channel has a constant stream of content and a program is scoped to some timed event on that channel.</span></span>

<span data-ttu-id="73ab0-251">設定 [ **封存時間範圍** ] 長度，即可指定您想要保留程式之錄製內容的時數。</span><span class="sxs-lookup"><span data-stu-id="73ab0-251">You can specify the number of hours you want to retain the recorded content for the program by setting the **Archive Window** length.</span></span> <span data-ttu-id="73ab0-252">此值可以設為最少 5 分鐘到最多 25 個小時。</span><span class="sxs-lookup"><span data-stu-id="73ab0-252">This value can be set from a minimum of 5 minutes to a maximum of 25 hours.</span></span> <span data-ttu-id="73ab0-253">封存時間範圍長度也會指出用戶端可以從目前即時位置及時往回搜尋的最大時間量。</span><span class="sxs-lookup"><span data-stu-id="73ab0-253">Archive window length also dictates the maximum amount of time clients can seek back in time from the current live position.</span></span> <span data-ttu-id="73ab0-254">程式在超過指定的時間量後還是可以執行，但是會持續捨棄落後時間範圍長度的內容。</span><span class="sxs-lookup"><span data-stu-id="73ab0-254">Programs can run over the specified amount of time, but content that falls behind the window length is continuously discarded.</span></span> <span data-ttu-id="73ab0-255">此屬性的這個值也會決定用戶端資訊清單可以成長為多長的時間。</span><span class="sxs-lookup"><span data-stu-id="73ab0-255">This value of this property also determines how long the client manifests can grow.</span></span>

<span data-ttu-id="73ab0-256">每個程式都與儲存串流內容的資產相關聯。</span><span class="sxs-lookup"><span data-stu-id="73ab0-256">Each program is associated with an asset that stores the streamed content.</span></span> <span data-ttu-id="73ab0-257">資產會對應到 Azure 儲存體帳戶中的區塊 Blob 容器，而資產中的檔案則會儲存為該容器中的 Blob。</span><span class="sxs-lookup"><span data-stu-id="73ab0-257">An asset is mapped to a block blob container in the Azure storage account, and the files in the asset are stored as blobs in that container.</span></span> <span data-ttu-id="73ab0-258">若要發行程式讓您的客戶檢視串流，您必須建立相關聯資產的隨選定位器。</span><span class="sxs-lookup"><span data-stu-id="73ab0-258">To publish the program so your customers can view the stream, you must create an OnDemand locator for the associated asset.</span></span> <span data-ttu-id="73ab0-259">您可以使用此定位器來建置可提供給用戶端的串流 URL。</span><span class="sxs-lookup"><span data-stu-id="73ab0-259">You can use this locator to build a streaming URL that you can provide to your clients.</span></span>

<span data-ttu-id="73ab0-260">通道支援最多三個同時執行的程式，因此您可以建立相同內送串流的多個封存。</span><span class="sxs-lookup"><span data-stu-id="73ab0-260">A channel supports up to three concurrently running programs, so you can create multiple archives of the same incoming stream.</span></span> <span data-ttu-id="73ab0-261">您可以視需要發行和封存事件的不同部分。</span><span class="sxs-lookup"><span data-stu-id="73ab0-261">You can publish and archive different parts of an event as needed.</span></span> <span data-ttu-id="73ab0-262">例如，假設您的商務需求是封存 6 小時的程式，但只廣播最後 10 分鐘。</span><span class="sxs-lookup"><span data-stu-id="73ab0-262">For example, imagine that your business requirement is to archive 6 hours of a program, but to broadcast only the last 10 minutes.</span></span> <span data-ttu-id="73ab0-263">為了達成此目的，您必須建立兩個同時執行的程式。</span><span class="sxs-lookup"><span data-stu-id="73ab0-263">To accomplish this, you need to create two concurrently running programs.</span></span> <span data-ttu-id="73ab0-264">其中一個程式設定為封存 6 小時的事件，但是未發行該程式。</span><span class="sxs-lookup"><span data-stu-id="73ab0-264">One program is set to archive 6 hours of the event, but the program is not published.</span></span> <span data-ttu-id="73ab0-265">另一個程式則設定為封存 10 分鐘，並發行程式。</span><span class="sxs-lookup"><span data-stu-id="73ab0-265">The other program is set to archive for 10 minutes, and this program is published.</span></span>

<span data-ttu-id="73ab0-266">您不應該將現有程式重複用於新的事件。</span><span class="sxs-lookup"><span data-stu-id="73ab0-266">You should not reuse existing programs for new events.</span></span> <span data-ttu-id="73ab0-267">而是針對每個事件建立新的程式。</span><span class="sxs-lookup"><span data-stu-id="73ab0-267">Instead, create a new program for each event.</span></span> <span data-ttu-id="73ab0-268">當您準備好開始串流和封存時，請啟動程式。</span><span class="sxs-lookup"><span data-stu-id="73ab0-268">Start the program when you're ready to start streaming and archiving.</span></span> <span data-ttu-id="73ab0-269">每當您想要停止串流處理和封存事件時，請停止程式。</span><span class="sxs-lookup"><span data-stu-id="73ab0-269">Stop the program whenever you want to stop streaming and archiving the event.</span></span>

<span data-ttu-id="73ab0-270">若要刪除封存的內容，請停止並刪除程式，然後刪除相關聯的資產。</span><span class="sxs-lookup"><span data-stu-id="73ab0-270">To delete archived content, stop and delete the program, and then delete the associated asset.</span></span> <span data-ttu-id="73ab0-271">如果程式使用資產，則無法刪除它。</span><span class="sxs-lookup"><span data-stu-id="73ab0-271">An asset cannot be deleted if a program uses it.</span></span> <span data-ttu-id="73ab0-272">必須先刪除程式。</span><span class="sxs-lookup"><span data-stu-id="73ab0-272">The program must be deleted first.</span></span>

<span data-ttu-id="73ab0-273">即使在停止並刪除程式之後，使用者還是可以視需求將封存的內容串流為視訊，直到您未刪除資產。</span><span class="sxs-lookup"><span data-stu-id="73ab0-273">Even after you stop and delete the program, users can stream your archived content as a video on demand, until you delete the asset.</span></span> <span data-ttu-id="73ab0-274">如果想要保留封存的內容，但不要讓它可進行串流處理，請刪除串流定位器。</span><span class="sxs-lookup"><span data-stu-id="73ab0-274">If you want to retain the archived content but not have it available for streaming, delete the streaming locator.</span></span>

## <span data-ttu-id="73ab0-275"><a id="states"></a>通道狀態和計費</span><span class="sxs-lookup"><span data-stu-id="73ab0-275"><a id="states"></a>Channel states and billing</span></span>
<span data-ttu-id="73ab0-276">通道目前狀態的可能值包括︰</span><span class="sxs-lookup"><span data-stu-id="73ab0-276">Possible values for the current state of a channel include:</span></span>

* <span data-ttu-id="73ab0-277">**已停止**：這是通道建立後的初始狀態。</span><span class="sxs-lookup"><span data-stu-id="73ab0-277">**Stopped**: This is the initial state of the channel after its creation.</span></span> <span data-ttu-id="73ab0-278">在此狀態下，通道屬性可以更新，但是不允許串流。</span><span class="sxs-lookup"><span data-stu-id="73ab0-278">In this state, the channel properties can be updated but streaming is not allowed.</span></span>
* <span data-ttu-id="73ab0-279">**啟動中**：正在啟動通道。</span><span class="sxs-lookup"><span data-stu-id="73ab0-279">**Starting**: The channel is being started.</span></span> <span data-ttu-id="73ab0-280">在此狀態期間允許任何更新或串流。</span><span class="sxs-lookup"><span data-stu-id="73ab0-280">No updates or streaming is allowed during this state.</span></span> <span data-ttu-id="73ab0-281">如果發生錯誤，通道會回到**已停止**狀態。</span><span class="sxs-lookup"><span data-stu-id="73ab0-281">If an error occurs, the channel returns to the **Stopped** state.</span></span>
* <span data-ttu-id="73ab0-282">**執行中**︰通道可以處理即時串流。</span><span class="sxs-lookup"><span data-stu-id="73ab0-282">**Running**: The channel can process live streams.</span></span>
* <span data-ttu-id="73ab0-283">**停止中**：正在停止通道。</span><span class="sxs-lookup"><span data-stu-id="73ab0-283">**Stopping**: The channel is being stopped.</span></span> <span data-ttu-id="73ab0-284">在此狀態期間允許任何更新或串流。</span><span class="sxs-lookup"><span data-stu-id="73ab0-284">No updates or streaming is allowed during this state.</span></span>
* <span data-ttu-id="73ab0-285">**刪除中**：正在刪除通道。</span><span class="sxs-lookup"><span data-stu-id="73ab0-285">**Deleting**: The channel is being deleted.</span></span> <span data-ttu-id="73ab0-286">在此狀態期間允許任何更新或串流。</span><span class="sxs-lookup"><span data-stu-id="73ab0-286">No updates or streaming is allowed during this state.</span></span>

<span data-ttu-id="73ab0-287">下表顯示通道狀態如何對應至計費模式。</span><span class="sxs-lookup"><span data-stu-id="73ab0-287">The following table shows how channel states map to the billing mode.</span></span>

| <span data-ttu-id="73ab0-288">通道狀態</span><span class="sxs-lookup"><span data-stu-id="73ab0-288">Channel state</span></span> | <span data-ttu-id="73ab0-289">入口網站 UI 指標</span><span class="sxs-lookup"><span data-stu-id="73ab0-289">Portal UI indicators</span></span> | <span data-ttu-id="73ab0-290">是否計費？</span><span class="sxs-lookup"><span data-stu-id="73ab0-290">Billed?</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="73ab0-291">**啟動中**</span><span class="sxs-lookup"><span data-stu-id="73ab0-291">**Starting**</span></span> |<span data-ttu-id="73ab0-292">**啟動中**</span><span class="sxs-lookup"><span data-stu-id="73ab0-292">**Starting**</span></span> |<span data-ttu-id="73ab0-293">無 (暫時性狀態)</span><span class="sxs-lookup"><span data-stu-id="73ab0-293">No (transient state)</span></span> |
| <span data-ttu-id="73ab0-294">**執行中**</span><span class="sxs-lookup"><span data-stu-id="73ab0-294">**Running**</span></span> |<span data-ttu-id="73ab0-295">**就緒** (沒有執行中的程式)</span><span class="sxs-lookup"><span data-stu-id="73ab0-295">**Ready** (no running programs)</span></span><p><p><span data-ttu-id="73ab0-296">或</span><span class="sxs-lookup"><span data-stu-id="73ab0-296">or</span></span><p><span data-ttu-id="73ab0-297">**串流** (至少一個執行中的程式)</span><span class="sxs-lookup"><span data-stu-id="73ab0-297">**Streaming** (at least one running program)</span></span> |<span data-ttu-id="73ab0-298">是</span><span class="sxs-lookup"><span data-stu-id="73ab0-298">Yes</span></span> |
| <span data-ttu-id="73ab0-299">**停止中**</span><span class="sxs-lookup"><span data-stu-id="73ab0-299">**Stopping**</span></span> |<span data-ttu-id="73ab0-300">**停止中**</span><span class="sxs-lookup"><span data-stu-id="73ab0-300">**Stopping**</span></span> |<span data-ttu-id="73ab0-301">無 (暫時性狀態)</span><span class="sxs-lookup"><span data-stu-id="73ab0-301">No (transient state)</span></span> |
| <span data-ttu-id="73ab0-302">**已停止**</span><span class="sxs-lookup"><span data-stu-id="73ab0-302">**Stopped**</span></span> |<span data-ttu-id="73ab0-303">**已停止**</span><span class="sxs-lookup"><span data-stu-id="73ab0-303">**Stopped**</span></span> |<span data-ttu-id="73ab0-304">否</span><span class="sxs-lookup"><span data-stu-id="73ab0-304">No</span></span> |

## <span data-ttu-id="73ab0-305"><a id="cc_and_ads"></a>隱藏式字幕和廣告插入</span><span class="sxs-lookup"><span data-stu-id="73ab0-305"><a id="cc_and_ads"></a>Closed captioning and ad insertion</span></span>
<span data-ttu-id="73ab0-306">下表示範支援的隱藏式字幕和廣告插入標準。</span><span class="sxs-lookup"><span data-stu-id="73ab0-306">The following table demonstrates supported standards for closed captioning and ad insertion.</span></span>

| <span data-ttu-id="73ab0-307">標準</span><span class="sxs-lookup"><span data-stu-id="73ab0-307">Standard</span></span> | <span data-ttu-id="73ab0-308">注意事項</span><span class="sxs-lookup"><span data-stu-id="73ab0-308">Notes</span></span> |
| --- | --- |
| <span data-ttu-id="73ab0-309">CEA-708 和 EIA-608 (708/608)</span><span class="sxs-lookup"><span data-stu-id="73ab0-309">CEA-708 and EIA-608 (708/608)</span></span> |<span data-ttu-id="73ab0-310">CEA-708 和 EIA-608 是美國和加拿大的隱藏式字幕標準。</span><span class="sxs-lookup"><span data-stu-id="73ab0-310">CEA-708 and EIA-608 are closed-captioning standards for the United States and Canada.</span></span><p><p><span data-ttu-id="73ab0-311">目前只有編碼的輸入資料流附帶字幕時，才能播放字幕。</span><span class="sxs-lookup"><span data-stu-id="73ab0-311">Currently, captioning is supported only if carried in the encoded input stream.</span></span> <span data-ttu-id="73ab0-312">您使用的即時媒體編碼器，必須可以將 608 或 708 字幕插入至已傳送至媒體服務的已編碼資料流。</span><span class="sxs-lookup"><span data-stu-id="73ab0-312">You need to use a live media encoder that can insert 608 or 708 captions in the encoded stream that's sent to Media Services.</span></span> <span data-ttu-id="73ab0-313">媒體服務會將內含字幕的內容傳遞給您的檢視器。</span><span class="sxs-lookup"><span data-stu-id="73ab0-313">Media Services delivers the content with inserted captions to your viewers.</span></span> |
| <span data-ttu-id="73ab0-314">.ismt 裡面附帶字幕 (Smooth Streaming 文字播放軌)</span><span class="sxs-lookup"><span data-stu-id="73ab0-314">TTML inside .ismt (Smooth Streaming text tracks)</span></span> |<span data-ttu-id="73ab0-315">媒體服務動態封裝功能可讓您的用戶端傳送以下任何格式的內容：DASH、HLS 或 Smooth Streaming。</span><span class="sxs-lookup"><span data-stu-id="73ab0-315">Media Services dynamic packaging enables your clients to stream content in any of the following formats: DASH, HLS, or Smooth Streaming.</span></span> <span data-ttu-id="73ab0-316">不過，如果您內嵌 Fragmented MP4 (Smooth Streaming) 而且在 .ismt 裡面附帶字幕 (Smooth Streaming 文字播放軌)，您就只能將資料流傳遞至 Smooth Streaming 用戶端。</span><span class="sxs-lookup"><span data-stu-id="73ab0-316">However, if you ingest fragmented MP4 (Smooth Streaming) with captions inside .ismt (Smooth Streaming text tracks), you can deliver the stream to only Smooth Streaming clients.</span></span> |
| <span data-ttu-id="73ab0-317">SCTE-35</span><span class="sxs-lookup"><span data-stu-id="73ab0-317">SCTE-35</span></span> |<span data-ttu-id="73ab0-318">SCTE-35 是數位訊號系統，可用來提示廣告插入。</span><span class="sxs-lookup"><span data-stu-id="73ab0-318">SCTE-35 is a digital signaling system that's used to cue advertising insertion.</span></span> <span data-ttu-id="73ab0-319">下游接收端會使用信號並根據分配的時間，將廣告切割成資料流。</span><span class="sxs-lookup"><span data-stu-id="73ab0-319">Downstream receivers use the signal to splice advertising into the stream for the allotted time.</span></span> <span data-ttu-id="73ab0-320">SCTE 35 必須以鬆散播放軌的形式傳送至輸入資料流中。</span><span class="sxs-lookup"><span data-stu-id="73ab0-320">SCTE-35 must be sent as a sparse track in the input stream.</span></span><p><p><span data-ttu-id="73ab0-321">目前，唯一支援附帶廣告訊號的輸入資料流格式是 Fragmented MP4 (Smooth Streaming)。</span><span class="sxs-lookup"><span data-stu-id="73ab0-321">Currently, the only supported input stream format that carries ad signals is fragmented MP4 (Smooth Streaming).</span></span> <span data-ttu-id="73ab0-322">唯一支援的輸出格式也是 Smooth Streaming。</span><span class="sxs-lookup"><span data-stu-id="73ab0-322">The only supported output format is also Smooth Streaming.</span></span> |

## <span data-ttu-id="73ab0-323"><a id="considerations"></a>考量</span><span class="sxs-lookup"><span data-stu-id="73ab0-323"><a id="considerations"></a>Considerations</span></span>
<span data-ttu-id="73ab0-324">使用內部部署即時編碼器並將多位元速率資料流傳送到通道時，請注意以下限制：</span><span class="sxs-lookup"><span data-stu-id="73ab0-324">When you're using an on-premises live encoder to send a multi-bitrate stream to a channel, the following constraints apply:</span></span>

* <span data-ttu-id="73ab0-325">確定您的網際網路速度夠快，足以將資料傳送至內嵌點。</span><span class="sxs-lookup"><span data-stu-id="73ab0-325">Make sure you have sufficient free Internet connectivity to send data to the ingest points.</span></span>
* <span data-ttu-id="73ab0-326">使用次要內嵌 URL 時會佔用額外的頻寬。</span><span class="sxs-lookup"><span data-stu-id="73ab0-326">Using a secondary ingest URL requires additional bandwidth.</span></span>
* <span data-ttu-id="73ab0-327">內送的多位元速率資料流最多可以有 10 個視訊品質等級 (亦稱為圖層)，以及最多 5 個音軌。</span><span class="sxs-lookup"><span data-stu-id="73ab0-327">The incoming multi-bitrate stream can have a maximum of 10 video quality levels (layers) and a maximum of 5 audio tracks.</span></span>
* <span data-ttu-id="73ab0-328">任何視訊品質等級的最高平均位元速率，應低於 10 Mbps。</span><span class="sxs-lookup"><span data-stu-id="73ab0-328">The highest average bitrate for any of the video quality levels should be below 10 Mbps.</span></span>
* <span data-ttu-id="73ab0-329">所有視訊和音訊串流的平均位元速率彙總，應低於 25 Mbps。</span><span class="sxs-lookup"><span data-stu-id="73ab0-329">The aggregate of the average bitrates for all the video and audio streams should be below 25 Mbps.</span></span>
* <span data-ttu-id="73ab0-330">通道或其相關聯程式正在執行時，您無法變更輸入通訊協定。</span><span class="sxs-lookup"><span data-stu-id="73ab0-330">You cannot change the input protocol while the channel or its associated programs are running.</span></span> <span data-ttu-id="73ab0-331">如果您需要不同的通訊協定，則應該為每個輸入通訊協定建立個別的通道。</span><span class="sxs-lookup"><span data-stu-id="73ab0-331">If you require different protocols, you should create separate channels for each input protocol.</span></span>
* <span data-ttu-id="73ab0-332">您可以在通道中內嵌單一位元速率。</span><span class="sxs-lookup"><span data-stu-id="73ab0-332">You can ingest a single bitrate in your channel.</span></span> <span data-ttu-id="73ab0-333">但是，因為通道不會處理串流，用戶端應用程式也會收到單一位元速率資料流。</span><span class="sxs-lookup"><span data-stu-id="73ab0-333">But because the channel does not process the stream, the client applications will also receive a single bitrate stream.</span></span> <span data-ttu-id="73ab0-334">(不建議這個選項。)</span><span class="sxs-lookup"><span data-stu-id="73ab0-334">(We don't recommend this option.)</span></span>

<span data-ttu-id="73ab0-335">以下是其他與通道和相關元件應用有關的注意事項：</span><span class="sxs-lookup"><span data-stu-id="73ab0-335">Here are other considerations related to working with channels and related components:</span></span>

* <span data-ttu-id="73ab0-336">每當您重新設定即時編碼器，請呼叫通道上的 **重設** 方法。</span><span class="sxs-lookup"><span data-stu-id="73ab0-336">Every time you reconfigure the live encoder, call the **Reset** method on the channel.</span></span> <span data-ttu-id="73ab0-337">重設通道之前，您必須停止程式。</span><span class="sxs-lookup"><span data-stu-id="73ab0-337">Before you reset the channel, you have to stop the program.</span></span> <span data-ttu-id="73ab0-338">重設通道之後，請重新啟動程式。</span><span class="sxs-lookup"><span data-stu-id="73ab0-338">After you reset the channel, restart the program.</span></span>
* <span data-ttu-id="73ab0-339">只有當通道處於**執行中**的狀態，且通道上的所有程式皆已停止時，才能停止通道。</span><span class="sxs-lookup"><span data-stu-id="73ab0-339">A channel can be stopped only when it's in the **Running** state and all programs on the channel have been stopped.</span></span>
* <span data-ttu-id="73ab0-340">依預設，您最多只能在媒體服務帳戶中新增 5 個通道。</span><span class="sxs-lookup"><span data-stu-id="73ab0-340">By default, you can add only 5 channels to your Media Services account.</span></span> <span data-ttu-id="73ab0-341">如需詳細資訊，請參閱 [配額和限制](media-services-quotas-and-limitations.md)。</span><span class="sxs-lookup"><span data-stu-id="73ab0-341">For more information, see [Quotas and limitations](media-services-quotas-and-limitations.md).</span></span>
* <span data-ttu-id="73ab0-342">只有當您的通道處於 **執行中** 狀態時，才會向您計費。</span><span class="sxs-lookup"><span data-stu-id="73ab0-342">You are billed only when your channel is in the **Running** state.</span></span> <span data-ttu-id="73ab0-343">如需詳細資訊，請參閱[通道狀態和帳單寄送](media-services-live-streaming-with-onprem-encoders.md#states)一節。</span><span class="sxs-lookup"><span data-stu-id="73ab0-343">For more information, refer to the [Channel states and billing](media-services-live-streaming-with-onprem-encoders.md#states) section.</span></span>

## <a name="media-services-learning-paths"></a><span data-ttu-id="73ab0-344">媒體服務學習路徑</span><span class="sxs-lookup"><span data-stu-id="73ab0-344">Media Services learning paths</span></span>
[!INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

## <a name="feedback"></a><span data-ttu-id="73ab0-345">意見反應</span><span class="sxs-lookup"><span data-stu-id="73ab0-345">Feedback</span></span>
[!INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]

## <a name="related-topics"></a><span data-ttu-id="73ab0-346">相關主題</span><span class="sxs-lookup"><span data-stu-id="73ab0-346">Related topics</span></span>
[<span data-ttu-id="73ab0-347">Azure 媒體服務的分散 MP4 即時內嵌規格</span><span class="sxs-lookup"><span data-stu-id="73ab0-347">Azure Media Services fragmented MP4 live ingest specification</span></span>](media-services-fmp4-live-ingest-overview.md)

[<span data-ttu-id="73ab0-348">Azure 媒體服務概觀和常見案例</span><span class="sxs-lookup"><span data-stu-id="73ab0-348">Azure Media Services overview and common scenarios</span></span>](media-services-overview.md)

[<span data-ttu-id="73ab0-349">媒體服務概念</span><span class="sxs-lookup"><span data-stu-id="73ab0-349">Media Services concepts</span></span>](media-services-concepts.md)

[live-overview]: ./media/media-services-manage-channels-overview/media-services-live-streaming-current.png
