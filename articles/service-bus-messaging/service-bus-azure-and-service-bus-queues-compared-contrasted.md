---
title: "Azure 儲存體佇列和服務匯流排佇列 - 異同比較 | Microsoft Docs"
description: "分析 Azure 所提供之兩種佇列類型之間的差異和相似性。"
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: tysonn
ms.assetid: f07301dc-ca9b-465c-bd5b-a0f99bab606b
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: tbd
ms.date: 08/07/2017
ms.author: sethm
ms.openlocfilehash: 555759073507219188b59af76a82be74b112c57c
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/29/2017
---
# <a name="storage-queues-and-service-bus-queues---compared-and-contrasted"></a><span data-ttu-id="9d2bd-103">儲存體佇列和服務匯流排佇列 - 異同比較</span><span class="sxs-lookup"><span data-stu-id="9d2bd-103">Storage queues and Service Bus queues - compared and contrasted</span></span>
<span data-ttu-id="9d2bd-104">本文將分析 Microsoft Azure 目前所提供之兩種佇列類型之間的差異和相似性：儲存體佇列和服務匯流排佇列。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-104">This article analyzes the differences and similarities between the two types of queues offered by Microsoft Azure today: Storage queues and Service Bus queues.</span></span> <span data-ttu-id="9d2bd-105">透過使用這項資訊，您可以比較和比對個別的技術，而且對於哪一種方案最符合您的需求，也能夠做出更旁徵博引的決定。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-105">By using this information, you can compare and contrast the respective technologies and be able to make a more informed decision about which solution best meets your needs.</span></span>

## <a name="introduction"></a><span data-ttu-id="9d2bd-106">簡介</span><span class="sxs-lookup"><span data-stu-id="9d2bd-106">Introduction</span></span>
<span data-ttu-id="9d2bd-107">Azure 支援兩種佇列機制：**儲存體佇列**和**服務匯流排佇列**。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-107">Azure supports two types of queue mechanisms: **Storage queues** and **Service Bus queues**.</span></span>

<span data-ttu-id="9d2bd-108">**儲存體佇列**是 [Azure 儲存體](https://azure.microsoft.com/services/storage/)基礎結構的一部分，具有簡單的 REST 架構 GET/PUT/PEEK 介面，而且能夠在服務內部和服務之間提供可靠且持續的訊息傳遞。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-108">**Storage queues**, which are part of the [Azure storage](https://azure.microsoft.com/services/storage/) infrastructure, feature a simple REST-based GET/PUT/PEEK interface, providing reliable, persistent messaging within and between services.</span></span>

<span data-ttu-id="9d2bd-109">**服務匯流排佇列**是較廣泛 [Azure 傳訊](https://azure.microsoft.com/services/service-bus/)基礎結構的一部分，支援佇列處理和發佈/訂閱，以及更進階的整合模式。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-109">**Service Bus queues** are part of a broader [Azure messaging](https://azure.microsoft.com/services/service-bus/) infrastructure that supports queuing as well as publish/subscribe, and more advanced integration patterns.</span></span> <span data-ttu-id="9d2bd-110">如需服務匯流排佇列/主題/訂用帳戶的詳細資訊，請參閱[服務匯流排概觀](service-bus-messaging-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-110">For more information about Service Bus queues/topics/subscriptions, see the [overview of Service Bus](service-bus-messaging-overview.md).</span></span>

<span data-ttu-id="9d2bd-111">雖然這兩種佇列技術同時存在，不過儲存體佇列較早引進，作為建置在 Azure 儲存體服務之上的專用佇列儲存體機制。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-111">While both queuing technologies exist concurrently, Storage queues were introduced first, as a dedicated queue storage mechanism built on top of Azure Storage services.</span></span> <span data-ttu-id="9d2bd-112">服務匯流排佇列則是建置在較廣泛的「傳訊」基礎結構之上，這個基礎結構的設計目的是為了整合可能跨多種通訊協定、資料合約、信任網域和 (或) 網路環境的應用程式或應用程式元件。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-112">Service Bus queues are built on top of the broader "messaging" infrastructure designed to integrate applications or application components that may span multiple communication protocols, data contracts, trust domains, and/or network environments.</span></span>

## <a name="technology-selection-considerations"></a><span data-ttu-id="9d2bd-113">技術選擇考量</span><span class="sxs-lookup"><span data-stu-id="9d2bd-113">Technology selection considerations</span></span>
<span data-ttu-id="9d2bd-114">儲存體佇列和服務匯流排佇列都是 Microsoft Azure 目前所提供之訊息佇列服務的實作。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-114">Both Storage queues and Service Bus queues are implementations of the message queuing service currently offered on Microsoft Azure.</span></span> <span data-ttu-id="9d2bd-115">每種佇列都有稍微不同的功能集，表示您可以根據特定方案的需求或正在解決的商務/技術問題選擇其中一種佇列，或是使用這兩種佇列。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-115">Each has a slightly different feature set, which means you can choose one or the other, or use both, depending on the needs of your particular solution or business/technical problem you are solving.</span></span>

<span data-ttu-id="9d2bd-116">在判斷哪一種佇列技術適合給定方案的目的時，方案架構設計人員和開發人員應該考慮下列建議。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-116">When determining which queuing technology fits the purpose for a given solution, solution architects and developers should consider the recommendations below.</span></span> <span data-ttu-id="9d2bd-117">如需詳細資訊，請參閱下一節。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-117">For more details, see the next section.</span></span>

<span data-ttu-id="9d2bd-118">身為方案架構設計人員/開發人員，您應該在下列情況下**考慮使用儲存體佇列**：</span><span class="sxs-lookup"><span data-stu-id="9d2bd-118">As a solution architect/developer, **you should consider using Storage queues** when:</span></span>

* <span data-ttu-id="9d2bd-119">您的應用程式必須在佇列中儲存超過 80 GB 的訊息，而且訊息的存留期短於 7 天。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-119">Your application must store over 80 GB of messages in a queue, where the messages have a lifetime shorter than 7 days.</span></span>
* <span data-ttu-id="9d2bd-120">您的應用程式想要在佇列內部追蹤處理訊息的進度。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-120">Your application wants to track progress for processing a message inside of the queue.</span></span> <span data-ttu-id="9d2bd-121">如果處理訊息的工作者損毀，這就很有用。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-121">This is useful if the worker processing a message crashes.</span></span> <span data-ttu-id="9d2bd-122">後續工作者可以接著使用該項資訊，從先前工作者停止的地方繼續處理。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-122">A subsequent worker can then use that information to continue from where the prior worker left off.</span></span>
* <span data-ttu-id="9d2bd-123">您需要有針對佇列執行之所有交易的伺服器端記錄。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-123">You require server side logs of all of the transactions executed against your queues.</span></span>

<span data-ttu-id="9d2bd-124">身為方案架構設計人員/開發人員，您應該在下列情況下**考慮使用服務匯流排佇列**：</span><span class="sxs-lookup"><span data-stu-id="9d2bd-124">As a solution architect/developer, **you should consider using Service Bus queues** when:</span></span>

* <span data-ttu-id="9d2bd-125">您的方案必須能夠接收訊息，而不需要輪詢佇列。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-125">Your solution must be able to receive messages without having to poll the queue.</span></span> <span data-ttu-id="9d2bd-126">使用服務匯流排時，您可以使用服務匯流排支援的 TCP 通訊協定，進行長期輪詢接收作業來達成這個目的。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-126">With Service Bus, this can be achieved through the use of the long-polling receive operation using the TCP-based protocols that Service Bus supports.</span></span>
* <span data-ttu-id="9d2bd-127">您的方案需要使用佇列來提供保證的先進先出 (FIFO) 排序傳遞。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-127">Your solution requires the queue to provide a guaranteed first-in-first-out (FIFO) ordered delivery.</span></span>
* <span data-ttu-id="9d2bd-128">您想要在 Azure 中和在 Windows Server (私人雲端) 上有相稱體驗。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-128">You want a symmetric experience in Azure and on Windows Server (private cloud).</span></span> <span data-ttu-id="9d2bd-129">如需詳細資訊，請參閱 [Windows Server 的服務匯流排](https://msdn.microsoft.com/library/dn282144.aspx)。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-129">For more information, see [Service Bus for Windows Server](https://msdn.microsoft.com/library/dn282144.aspx).</span></span>
* <span data-ttu-id="9d2bd-130">您的方案必須能夠支援自動重複偵測。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-130">Your solution must be able to support automatic duplicate detection.</span></span>
* <span data-ttu-id="9d2bd-131">您想要讓應用程式將訊息當成長時間執行的平行資料流來處理 (訊息是透過訊息上的 [SessionId](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.sessionid?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_SessionId) 屬性與資料流相關聯)。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-131">You want your application to process messages as parallel long-running streams (messages are associated with a stream using the [SessionId](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.sessionid?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_SessionId) property on the message).</span></span> <span data-ttu-id="9d2bd-132">在這個模型中，取用端應用程式中的每個節點都會競爭取得資料流而不是訊息。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-132">In this model, each node in the consuming application competes for streams, as opposed to messages.</span></span> <span data-ttu-id="9d2bd-133">將資料流提供給取用端節點時，節點可以檢查應用程式資料流使用交易的狀態。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-133">When a stream is given to a consuming node, the node can examine the state of the application stream state using transactions.</span></span>
* <span data-ttu-id="9d2bd-134">從佇列傳送或接收多個訊息時，您的方案需要交易行為和不可部分完成性。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-134">Your solution requires transactional behavior and atomicity when sending or receiving multiple messages from a queue.</span></span>
* <span data-ttu-id="9d2bd-135">應用程式特有工作負載的存留時間 (TTL) 特性可能會超過 7 天的期限。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-135">The time-to-live (TTL) characteristic of the application-specific workload can exceed the 7-day period.</span></span>
* <span data-ttu-id="9d2bd-136">您的應用程式所處理的訊息可能會超過 64 KB，但是不太可能會接近 256 KB 的限制。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-136">Your application handles messages that can exceed 64 KB but will not likely approach the 256 KB limit.</span></span>
* <span data-ttu-id="9d2bd-137">您需要提供角色型存取模型給佇列，並且針對傳送者和接收者提供不同的權限。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-137">You deal with a requirement to provide a role-based access model to the queues, and different rights/permissions for senders and receivers.</span></span>
* <span data-ttu-id="9d2bd-138">您的佇列大小不會成長超過 80 GB。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-138">Your queue size will not grow larger than 80 GB.</span></span>
* <span data-ttu-id="9d2bd-139">您想要使用 AMQP 1.0 標準型傳訊通訊協定。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-139">You want to use the AMQP 1.0 standards-based messaging protocol.</span></span> <span data-ttu-id="9d2bd-140">如需 AMQP 的詳細資訊，請參閱[服務匯流排 AMQP 概觀](service-bus-amqp-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-140">For more information about AMQP, see [Service Bus AMQP Overview](service-bus-amqp-overview.md).</span></span>
* <span data-ttu-id="9d2bd-141">您可以預見最後會從佇列架構的點對點通訊移轉至允許緊密整合其他接收者 (訂戶) 的訊息交換模式，而且每個接收者都會接收傳送至佇列之部分或所有訊息的獨立複本。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-141">You can envision an eventual migration from queue-based point-to-point communication to a message exchange pattern that enables seamless integration of additional receivers (subscribers), each of which receives independent copies of either some or all messages sent to the queue.</span></span> <span data-ttu-id="9d2bd-142">後者是指服務匯流排原本提供的發佈/訂閱功能。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-142">The latter refers to the publish/subscribe capability natively provided by Service Bus.</span></span>
* <span data-ttu-id="9d2bd-143">您的訊息方案必須能夠支援「最多一次」傳遞保證，而不需要建置其他基礎結構元件。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-143">Your messaging solution must be able to support the "At-Most-Once" delivery guarantee without the need for you to build the additional infrastructure components.</span></span>
* <span data-ttu-id="9d2bd-144">您想要能夠批次發佈及取用訊息。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-144">You would like to be able to publish and consume batches of messages.</span></span>

## <a name="comparing-storage-queues-and-service-bus-queues"></a><span data-ttu-id="9d2bd-145">比較儲存體佇列和服務匯流排佇列</span><span class="sxs-lookup"><span data-stu-id="9d2bd-145">Comparing Storage queues and Service Bus queues</span></span>
<span data-ttu-id="9d2bd-146">下列各節中的表格以邏輯方式分組佇列功能，讓您一眼就能比較儲存體佇列和服務匯流排佇列所提供的功能。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-146">The tables in the following sections provide a logical grouping of queue features and let you compare, at a glance, the capabilities available in both Storage queues and Service Bus queues.</span></span>

## <a name="foundational-capabilities"></a><span data-ttu-id="9d2bd-147">基本功能</span><span class="sxs-lookup"><span data-stu-id="9d2bd-147">Foundational capabilities</span></span>
<span data-ttu-id="9d2bd-148">本節將比較儲存體佇列和服務匯流排佇列所提供的一些基本佇列功能。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-148">This section compares some of the fundamental queuing capabilities provided by Storage queues and Service Bus queues.</span></span>

| <span data-ttu-id="9d2bd-149">比較準則</span><span class="sxs-lookup"><span data-stu-id="9d2bd-149">Comparison Criteria</span></span> | <span data-ttu-id="9d2bd-150">儲存體佇列</span><span class="sxs-lookup"><span data-stu-id="9d2bd-150">Storage queues</span></span> | <span data-ttu-id="9d2bd-151">服務匯流排佇列</span><span class="sxs-lookup"><span data-stu-id="9d2bd-151">Service Bus Queues</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9d2bd-152">排序保證</span><span class="sxs-lookup"><span data-stu-id="9d2bd-152">Ordering guarantee</span></span> |<span data-ttu-id="9d2bd-153">**否**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-153">**No**</span></span> <br/><br><span data-ttu-id="9d2bd-154">如需詳細資訊，請參閱＜其他資訊＞一節的第一個注意事項。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-154">For more information, see the first note in the “Additional Information” section.</span></span></br> |<span data-ttu-id="9d2bd-155">**是 - 先進先出 (FIFO)**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-155">**Yes - First-In-First-Out (FIFO)**</span></span><br/><br><span data-ttu-id="9d2bd-156">(透過使用訊息工作階段)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-156">(through the use of messaging sessions)</span></span> |
| <span data-ttu-id="9d2bd-157">傳遞保證</span><span class="sxs-lookup"><span data-stu-id="9d2bd-157">Delivery guarantee</span></span> |<span data-ttu-id="9d2bd-158">**至少一次**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-158">**At-Least-Once**</span></span> |<span data-ttu-id="9d2bd-159">**至少一次**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-159">**At-Least-Once**</span></span><br/><br/><span data-ttu-id="9d2bd-160">**最多一次**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-160">**At-Most-Once**</span></span> |
| <span data-ttu-id="9d2bd-161">不可部分完成作業支援</span><span class="sxs-lookup"><span data-stu-id="9d2bd-161">Atomic operation support</span></span> |<span data-ttu-id="9d2bd-162">**否**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-162">**No**</span></span> |<span data-ttu-id="9d2bd-163">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-163">**Yes**</span></span><br/><br/> |
| <span data-ttu-id="9d2bd-164">接收行為</span><span class="sxs-lookup"><span data-stu-id="9d2bd-164">Receive behavior</span></span> |<span data-ttu-id="9d2bd-165">**非封鎖**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-165">**Non-blocking**</span></span><br/><br/><span data-ttu-id="9d2bd-166">(如果找不到新的訊息，便立即完成)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-166">(completes immediately if no new message is found)</span></span> |<span data-ttu-id="9d2bd-167">**含/不含逾時的封鎖**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-167">**Blocking with/without timeout**</span></span><br/><br/><span data-ttu-id="9d2bd-168">(提供長期輪詢，或稱為 [Comet 技術](http://go.microsoft.com/fwlink/?LinkId=613759))</span><span class="sxs-lookup"><span data-stu-id="9d2bd-168">(offers long polling, or the ["Comet technique"](http://go.microsoft.com/fwlink/?LinkId=613759))</span></span><br/><br/><span data-ttu-id="9d2bd-169">**非封鎖**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-169">**Non-blocking**</span></span><br/><br/><span data-ttu-id="9d2bd-170">(僅限透過使用 .NET managed API)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-170">(through the use of .NET managed API only)</span></span> |
| <span data-ttu-id="9d2bd-171">推送型 API</span><span class="sxs-lookup"><span data-stu-id="9d2bd-171">Push-style API</span></span> |<span data-ttu-id="9d2bd-172">**否**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-172">**No**</span></span> |<span data-ttu-id="9d2bd-173">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-173">**Yes**</span></span><br/><br/><span data-ttu-id="9d2bd-174">[OnMessage](/dotnet/api/microsoft.servicebus.messaging.queueclient.onmessage#Microsoft_ServiceBus_Messaging_QueueClient_OnMessage_System_Action_Microsoft_ServiceBus_Messaging_BrokeredMessage__) 和 **OnMessage** 工作階段的 .NET API。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-174">[OnMessage](/dotnet/api/microsoft.servicebus.messaging.queueclient.onmessage#Microsoft_ServiceBus_Messaging_QueueClient_OnMessage_System_Action_Microsoft_ServiceBus_Messaging_BrokeredMessage__) and **OnMessage** sessions .NET API.</span></span> |
| <span data-ttu-id="9d2bd-175">接收模式</span><span class="sxs-lookup"><span data-stu-id="9d2bd-175">Receive mode</span></span> |<span data-ttu-id="9d2bd-176">**查看與租用**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-176">**Peek & Lease**</span></span> |<span data-ttu-id="9d2bd-177">**查看與鎖定**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-177">**Peek & Lock**</span></span><br/><br/><span data-ttu-id="9d2bd-178">**接收與刪除**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-178">**Receive & Delete**</span></span> |
| <span data-ttu-id="9d2bd-179">獨佔存取模式</span><span class="sxs-lookup"><span data-stu-id="9d2bd-179">Exclusive access mode</span></span> |<span data-ttu-id="9d2bd-180">**以租用為基礎**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-180">**Lease-based**</span></span> |<span data-ttu-id="9d2bd-181">**以鎖定為基礎**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-181">**Lock-based**</span></span> |
| <span data-ttu-id="9d2bd-182">租用/鎖定持續時間</span><span class="sxs-lookup"><span data-stu-id="9d2bd-182">Lease/Lock duration</span></span> |<span data-ttu-id="9d2bd-183">**30 秒 (預設值)**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-183">**30 seconds (default)**</span></span><br/><br/><span data-ttu-id="9d2bd-184">**7 天 (上限)** (您可以使用 [UpdateMessage](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.storage.queue.cloudqueue.updatemessage.aspx) API 更新或釋放訊息租用。)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-184">**7 days (maximum)** (You can renew or release a message lease using the [UpdateMessage](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.storage.queue.cloudqueue.updatemessage.aspx) API.)</span></span> |<span data-ttu-id="9d2bd-185">**60 秒 (預設值)**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-185">**60 seconds (default)**</span></span><br/><br/><span data-ttu-id="9d2bd-186">您可以使用 [RenewLock](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.renewlock#Microsoft_ServiceBus_Messaging_BrokeredMessage_RenewLock) API 更新訊息鎖定。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-186">You can renew a message lock using the [RenewLock](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.renewlock#Microsoft_ServiceBus_Messaging_BrokeredMessage_RenewLock) API.</span></span> |
| <span data-ttu-id="9d2bd-187">租用/鎖定精確度</span><span class="sxs-lookup"><span data-stu-id="9d2bd-187">Lease/Lock precision</span></span> |<span data-ttu-id="9d2bd-188">**訊息層級**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-188">**Message level**</span></span><br/><br/><span data-ttu-id="9d2bd-189">(每個訊息都可以具有不同的逾時值，您稍後可以在處理訊息時，視需要使用 [UpdateMessage](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.storage.queue.cloudqueue.updatemessage.aspx) API 更新這個逾時值)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-189">(each message can have a different timeout value, which you can then update as needed while processing the message, by using the [UpdateMessage](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.storage.queue.cloudqueue.updatemessage.aspx) API)</span></span> |<span data-ttu-id="9d2bd-190">**佇列層級**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-190">**Queue level**</span></span><br/><br/><span data-ttu-id="9d2bd-191">(每個佇列都有套用至所有訊息的鎖定精確度，但是您可以使用 [RenewLock](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.renewlock#Microsoft_ServiceBus_Messaging_BrokeredMessage_RenewLock) API 更新鎖定。)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-191">(each queue has a lock precision applied to all of its messages, but you can renew the lock using the [RenewLock](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.renewlock#Microsoft_ServiceBus_Messaging_BrokeredMessage_RenewLock) API.)</span></span> |
| <span data-ttu-id="9d2bd-192">批次接收</span><span class="sxs-lookup"><span data-stu-id="9d2bd-192">Batched receive</span></span> |<span data-ttu-id="9d2bd-193">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-193">**Yes**</span></span><br/><br/><span data-ttu-id="9d2bd-194">(在擷取訊息時明確指定訊息計數，最多 32 個訊息)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-194">(explicitly specifying message count when retrieving messages, up to a maximum of 32 messages)</span></span> |<span data-ttu-id="9d2bd-195">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-195">**Yes**</span></span><br/><br/><span data-ttu-id="9d2bd-196">(隱含啟用預先擷取屬性或明確透過使用交易)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-196">(implicitly enabling a pre-fetch property or explicitly through the use of transactions)</span></span> |
| <span data-ttu-id="9d2bd-197">批次傳送</span><span class="sxs-lookup"><span data-stu-id="9d2bd-197">Batched send</span></span> |<span data-ttu-id="9d2bd-198">**否**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-198">**No**</span></span> |<span data-ttu-id="9d2bd-199">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-199">**Yes**</span></span><br/><br/><span data-ttu-id="9d2bd-200">(透過使用交易或用戶端批次)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-200">(through the use of transactions or client-side batching)</span></span> |

### <a name="additional-information"></a><span data-ttu-id="9d2bd-201">其他資訊</span><span class="sxs-lookup"><span data-stu-id="9d2bd-201">Additional information</span></span>
* <span data-ttu-id="9d2bd-202">儲存體佇列中的訊息通常是先進先出，但有時也不按順序；舉例來說，訊息的可視性逾時期限到期時 (例如，由於處理期間用戶端應用程式損毀所致)。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-202">Messages in Storage queues are typically first-in-first-out, but sometimes they can be out of order; for example, when a message's visibility timeout duration expires (for example, as a result of a client application crashing during processing).</span></span> <span data-ttu-id="9d2bd-203">當可視性逾時到期時，訊息會再次出現在佇列上，以便其他工作者清除佇列中的訊息。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-203">When the visibility timeout expires, the message becomes visible again on the queue for another worker to dequeue it.</span></span> <span data-ttu-id="9d2bd-204">此時，佇列中可能放入新出現的訊息 (等待再次從佇列中清除)，而且是最初在它之後才加入佇列的訊息後面。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-204">At that point, the newly visible message might be placed in the queue (to be dequeued again) after a message that was originally enqueued after it.</span></span>
* <span data-ttu-id="9d2bd-205">服務匯流排佇列中的保證 FIFO 模式需要使用訊息工作階段。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-205">The guaranteed FIFO pattern in Service Bus queues requires the use of messaging sessions.</span></span> <span data-ttu-id="9d2bd-206">如果應用程式在處理以「查看與鎖定」模式所接收的訊息時損毀，下一次佇列接收者接受訊息工作階段時，將會在存留時間 (TTL) 期限到期之後，從失敗的訊息開始處理。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-206">In the event that the application crashes while processing a message received in the **Peek & Lock** mode, the next time a queue receiver accepts a messaging session, it will start with the failed message after its time-to-live (TTL) period expires.</span></span>
* <span data-ttu-id="9d2bd-207">儲存體佇列是設計來支援標準佇列案例，例如使應用程式元件脫鉤以增加延展性及容錯能力、進行負載調節，以及建置處理工作流程。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-207">Storage queues are designed to support standard queuing scenarios, such as decoupling application components to increase scalability and tolerance for failures, load leveling, and building process workflows.</span></span>
* <span data-ttu-id="9d2bd-208">服務匯流排佇列支援「至少一次」的傳遞保證。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-208">Service Bus queues support the *At-Least-Once* delivery guarantee.</span></span> <span data-ttu-id="9d2bd-209">此外，也可支援「最多一次」語意，方法是使用工作階段狀態來儲存應用程式狀態，並且使用交易以不可分割方式接收訊息並更新工作階段狀態。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-209">In addition, the *At-Most-Once* semantic can be supported by using session state to store the application state and by using transactions to atomically receive messages and update the session state.</span></span>
* <span data-ttu-id="9d2bd-210">儲存體佇列提供跨佇列、資料表和 BLOB 之統一且一致的程式設計模型，適合開發人員和營運團隊使用。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-210">Storage queues provide a uniform and consistent programming model across queues, tables, and BLOBs – both for developers and for operations teams.</span></span>
* <span data-ttu-id="9d2bd-211">服務匯流排佇列支援在單一佇列內容中進行本機交易。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-211">Service Bus queues provide support for local transactions in the context of a single queue.</span></span>
* <span data-ttu-id="9d2bd-212">服務匯流排所支援的「接收與刪除」模式可讓您降低訊息作業計數 (以及關聯的成本)，但是也會降低傳遞保證。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-212">The **Receive and Delete** mode supported by Service Bus provides the ability to reduce the messaging operation count (and associated cost) in exchange for lowered delivery assurance.</span></span>
* <span data-ttu-id="9d2bd-213">儲存體佇列可讓租用延長訊息的租用。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-213">Storage queues provide leases with the ability to extend the leases for messages.</span></span> <span data-ttu-id="9d2bd-214">這可讓工作者維持短期的訊息租用。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-214">This allows the workers to maintain short leases on messages.</span></span> <span data-ttu-id="9d2bd-215">因此，如果某個工作者損毀，就可以由另一個工作者快速地重新處理訊息。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-215">Thus, if a worker crashes, the message can be quickly processed again by another worker.</span></span> <span data-ttu-id="9d2bd-216">此外，如果工作者需要的處理時間超過目前的租用時間，也可以延長訊息的租用。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-216">In addition, a worker can extend the lease on a message if it needs to process it longer than the current lease time.</span></span>
* <span data-ttu-id="9d2bd-217">儲存體佇列提供您可以在將訊息加入佇列或從佇列中清除訊息時設定的可視性逾時。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-217">Storage queues offer a visibility timeout that you can set upon the enqueueing or dequeuing of a message.</span></span> <span data-ttu-id="9d2bd-218">此外，您可以在執行階段使用不同的租用值來更新訊息，並且在相同佇列的訊息之間更新不同的值。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-218">In addition, you can update a message with different lease values at run-time, and update different values across messages in the same queue.</span></span> <span data-ttu-id="9d2bd-219">服務匯流排鎖定逾時定義於佇列中繼資料內；不過，您可以透過呼叫 [RenewLock](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.renewlock#Microsoft_ServiceBus_Messaging_BrokeredMessage_RenewLock) 方法更新鎖定。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-219">Service Bus lock timeouts are defined in the queue metadata; however, you can renew the lock by calling the [RenewLock](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.renewlock#Microsoft_ServiceBus_Messaging_BrokeredMessage_RenewLock) method.</span></span>
* <span data-ttu-id="9d2bd-220">在服務匯流排佇列中，封鎖接收作業的最大逾時值是 24 天。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-220">The maximum timeout for a blocking receive operation in Service Bus queues is 24 days.</span></span> <span data-ttu-id="9d2bd-221">但是，REST 架構的最大逾時值為 55 秒。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-221">However, REST-based timeouts have a maximum value of 55 seconds.</span></span>
* <span data-ttu-id="9d2bd-222">服務匯流排所提供的用戶端批次允許佇列用戶端將多個訊息批次處理成單一傳送作業。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-222">Client-side batching provided by Service Bus enables a queue client to batch multiple messages into a single send operation.</span></span> <span data-ttu-id="9d2bd-223">批次處理僅適用於非同步傳送作業。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-223">Batching is only available for asynchronous send operations.</span></span>
* <span data-ttu-id="9d2bd-224">儲存體佇列的 200 TB 上限 (當您虛擬化帳戶時則更多) 和無限佇列等功能，使它成為 SaaS 提供者的理想平台。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-224">Features such as the 200 TB ceiling of Storage queues (more when you virtualize accounts) and unlimited queues make it an ideal platform for SaaS providers.</span></span>
* <span data-ttu-id="9d2bd-225">儲存體佇列提供彈性、高效能的委派存取控制機制。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-225">Storage queues provide a flexible and performant delegated access control mechanism.</span></span>

## <a name="advanced-capabilities"></a><span data-ttu-id="9d2bd-226">進階功能</span><span class="sxs-lookup"><span data-stu-id="9d2bd-226">Advanced capabilities</span></span>
<span data-ttu-id="9d2bd-227">本節將比較儲存體佇列和服務匯流排佇列所提供的進階功能。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-227">This section compares advanced capabilities provided by Storage queues and Service Bus queues.</span></span>

| <span data-ttu-id="9d2bd-228">比較準則</span><span class="sxs-lookup"><span data-stu-id="9d2bd-228">Comparison Criteria</span></span> | <span data-ttu-id="9d2bd-229">儲存體佇列</span><span class="sxs-lookup"><span data-stu-id="9d2bd-229">Storage queues</span></span> | <span data-ttu-id="9d2bd-230">服務匯流排佇列</span><span class="sxs-lookup"><span data-stu-id="9d2bd-230">Service Bus Queues</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9d2bd-231">排程傳遞</span><span class="sxs-lookup"><span data-stu-id="9d2bd-231">Scheduled delivery</span></span> |<span data-ttu-id="9d2bd-232">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-232">**Yes**</span></span> |<span data-ttu-id="9d2bd-233">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-233">**Yes**</span></span> |
| <span data-ttu-id="9d2bd-234">自動處理無效信件</span><span class="sxs-lookup"><span data-stu-id="9d2bd-234">Automatic dead lettering</span></span> |<span data-ttu-id="9d2bd-235">**否**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-235">**No**</span></span> |<span data-ttu-id="9d2bd-236">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-236">**Yes**</span></span> |
| <span data-ttu-id="9d2bd-237">增加佇列存留時間值</span><span class="sxs-lookup"><span data-stu-id="9d2bd-237">Increasing queue time-to-live value</span></span> |<span data-ttu-id="9d2bd-238">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-238">**Yes**</span></span><br/><br/><span data-ttu-id="9d2bd-239">(經由可視性逾時的就地更新)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-239">(via in-place update of visibility timeout)</span></span> |<span data-ttu-id="9d2bd-240">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-240">**Yes**</span></span><br/><br/><span data-ttu-id="9d2bd-241">(由專用 API 函式提供)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-241">(provided via a dedicated API function)</span></span> |
| <span data-ttu-id="9d2bd-242">有害訊息支援</span><span class="sxs-lookup"><span data-stu-id="9d2bd-242">Poison message support</span></span> |<span data-ttu-id="9d2bd-243">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-243">**Yes**</span></span> |<span data-ttu-id="9d2bd-244">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-244">**Yes**</span></span> |
| <span data-ttu-id="9d2bd-245">就地更新</span><span class="sxs-lookup"><span data-stu-id="9d2bd-245">In-place update</span></span> |<span data-ttu-id="9d2bd-246">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-246">**Yes**</span></span> |<span data-ttu-id="9d2bd-247">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-247">**Yes**</span></span> |
| <span data-ttu-id="9d2bd-248">伺服器端交易記錄</span><span class="sxs-lookup"><span data-stu-id="9d2bd-248">Server-side transaction log</span></span> |<span data-ttu-id="9d2bd-249">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-249">**Yes**</span></span> |<span data-ttu-id="9d2bd-250">**否**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-250">**No**</span></span> |
| <span data-ttu-id="9d2bd-251">儲存體度量</span><span class="sxs-lookup"><span data-stu-id="9d2bd-251">Storage metrics</span></span> |<span data-ttu-id="9d2bd-252">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-252">**Yes**</span></span><br/><br/><span data-ttu-id="9d2bd-253">**分鐘度量**：提供可用性、TPS、API 呼叫計數、錯誤計數等即時度量，全都即時 (每分鐘彙總一次並在生產環境中發生狀況的短短數分鐘內回報)。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-253">**Minute Metrics**: provides real-time metrics for availability, TPS, API call counts, error counts, and more, all in real time (aggregated per minute and reported within a few minutes from what just happened in production.</span></span> <span data-ttu-id="9d2bd-254">如需詳細資訊，請參閱[關於儲存體分析度量](/rest/api/storageservices/fileservices/About-Storage-Analytics-Metrics)。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-254">For more information, see [About Storage Analytics Metrics](/rest/api/storageservices/fileservices/About-Storage-Analytics-Metrics).</span></span> |<span data-ttu-id="9d2bd-255">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-255">**Yes**</span></span><br/><br/><span data-ttu-id="9d2bd-256">(透過呼叫 [GetQueues](/dotnet/api/microsoft.servicebus.namespacemanager.getqueues#Microsoft_ServiceBus_NamespaceManager_GetQueues) 來進行大量查詢)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-256">(bulk queries by calling [GetQueues](/dotnet/api/microsoft.servicebus.namespacemanager.getqueues#Microsoft_ServiceBus_NamespaceManager_GetQueues))</span></span> |
| <span data-ttu-id="9d2bd-257">狀態管理</span><span class="sxs-lookup"><span data-stu-id="9d2bd-257">State management</span></span> |<span data-ttu-id="9d2bd-258">**否**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-258">**No**</span></span> |<span data-ttu-id="9d2bd-259">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-259">**Yes**</span></span><br/><br/><span data-ttu-id="9d2bd-260">[Microsoft.ServiceBus.Messaging.EntityStatus.Active](/dotnet/api/microsoft.servicebus.messaging.entitystatus.active)、[Microsoft.ServiceBus.Messaging.EntityStatus.Disabled](/dotnet/api/microsoft.servicebus.messaging.entitystatus.disabled)、[Microsoft.ServiceBus.Messaging.EntityStatus.SendDisabled](/dotnet/api/microsoft.servicebus.messaging.entitystatus.senddisabled)、[Microsoft.ServiceBus.Messaging.EntityStatus.ReceiveDisabled](/dotnet/api/microsoft.servicebus.messaging.entitystatus.receivedisabled)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-260">[Microsoft.ServiceBus.Messaging.EntityStatus.Active](/dotnet/api/microsoft.servicebus.messaging.entitystatus.active), [Microsoft.ServiceBus.Messaging.EntityStatus.Disabled](/dotnet/api/microsoft.servicebus.messaging.entitystatus.disabled), [Microsoft.ServiceBus.Messaging.EntityStatus.SendDisabled](/dotnet/api/microsoft.servicebus.messaging.entitystatus.senddisabled), [Microsoft.ServiceBus.Messaging.EntityStatus.ReceiveDisabled](/dotnet/api/microsoft.servicebus.messaging.entitystatus.receivedisabled)</span></span> |
| <span data-ttu-id="9d2bd-261">訊息自動轉送</span><span class="sxs-lookup"><span data-stu-id="9d2bd-261">Message auto-forwarding</span></span> |<span data-ttu-id="9d2bd-262">**否**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-262">**No**</span></span> |<span data-ttu-id="9d2bd-263">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-263">**Yes**</span></span> |
| <span data-ttu-id="9d2bd-264">清除佇列函式</span><span class="sxs-lookup"><span data-stu-id="9d2bd-264">Purge queue function</span></span> |<span data-ttu-id="9d2bd-265">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-265">**Yes**</span></span> |<span data-ttu-id="9d2bd-266">**否**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-266">**No**</span></span> |
| <span data-ttu-id="9d2bd-267">訊息群組</span><span class="sxs-lookup"><span data-stu-id="9d2bd-267">Message groups</span></span> |<span data-ttu-id="9d2bd-268">**否**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-268">**No**</span></span> |<span data-ttu-id="9d2bd-269">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-269">**Yes**</span></span><br/><br/><span data-ttu-id="9d2bd-270">(透過使用訊息工作階段)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-270">(through the use of messaging sessions)</span></span> |
| <span data-ttu-id="9d2bd-271">每個訊息群組的應用程式狀態</span><span class="sxs-lookup"><span data-stu-id="9d2bd-271">Application state per message group</span></span> |<span data-ttu-id="9d2bd-272">**否**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-272">**No**</span></span> |<span data-ttu-id="9d2bd-273">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-273">**Yes**</span></span> |
| <span data-ttu-id="9d2bd-274">重複偵測</span><span class="sxs-lookup"><span data-stu-id="9d2bd-274">Duplicate detection</span></span> |<span data-ttu-id="9d2bd-275">**否**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-275">**No**</span></span> |<span data-ttu-id="9d2bd-276">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-276">**Yes**</span></span><br/><br/><span data-ttu-id="9d2bd-277">(可在傳送者端設定)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-277">(configurable on the sender side)</span></span> |
| <span data-ttu-id="9d2bd-278">瀏覽訊息群組</span><span class="sxs-lookup"><span data-stu-id="9d2bd-278">Browsing message groups</span></span> |<span data-ttu-id="9d2bd-279">**否**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-279">**No**</span></span> |<span data-ttu-id="9d2bd-280">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-280">**Yes**</span></span> |
| <span data-ttu-id="9d2bd-281">依 ID 擷取訊息工作階段</span><span class="sxs-lookup"><span data-stu-id="9d2bd-281">Fetching message sessions by ID</span></span> |<span data-ttu-id="9d2bd-282">**否**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-282">**No**</span></span> |<span data-ttu-id="9d2bd-283">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-283">**Yes**</span></span> |

### <a name="additional-information"></a><span data-ttu-id="9d2bd-284">其他資訊</span><span class="sxs-lookup"><span data-stu-id="9d2bd-284">Additional information</span></span>
* <span data-ttu-id="9d2bd-285">這兩種佇列技術都可讓訊息排定在稍後傳遞。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-285">Both queuing technologies enable a message to be scheduled for delivery at a later time.</span></span>
* <span data-ttu-id="9d2bd-286">佇列自動轉送可讓數以千計的佇列將其訊息自動轉送至單一佇列，而接收端應用程式將從中取用訊息。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-286">Queue auto-forwarding enables thousands of queues to auto-forward their messages to a single queue, from which the receiving application consumes the message.</span></span> <span data-ttu-id="9d2bd-287">您可以使用這個機制來達成安全性、控制流程，並在每個訊息發佈者之間隔離儲存體。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-287">You can use this mechanism to achieve security, control flow, and isolate storage between each message publisher.</span></span>
* <span data-ttu-id="9d2bd-288">儲存體佇列支援更新訊息內容。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-288">Storage queues provide support for updating message content.</span></span> <span data-ttu-id="9d2bd-289">您可以使用這項功能，將狀態資訊和累加進度更新保存至訊息中，以便從最後已知的檢查點處理訊息，而不用從頭開始處理。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-289">You can use this functionality for persisting state information and incremental progress updates into the message so that it can be processed from the last known checkpoint, instead of starting from scratch.</span></span> <span data-ttu-id="9d2bd-290">使用服務匯流排佇列時，您可以透過使用訊息工作階段來實現相同案例。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-290">With Service Bus queues, you can enable the same scenario through the use of message sessions.</span></span> <span data-ttu-id="9d2bd-291">工作階段可讓您使用 [SetState](/dotnet/api/microsoft.servicebus.messaging.messagesession.setstate#Microsoft_ServiceBus_Messaging_MessageSession_SetState_System_IO_Stream_) 和 [GetState](/dotnet/api/microsoft.servicebus.messaging.messagesession.getstate#Microsoft_ServiceBus_Messaging_MessageSession_GetState) 儲存和擷取應用程式處理狀態。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-291">Sessions enable you to save and retrieve the application processing state (by using [SetState](/dotnet/api/microsoft.servicebus.messaging.messagesession.setstate#Microsoft_ServiceBus_Messaging_MessageSession_SetState_System_IO_Stream_) and [GetState](/dotnet/api/microsoft.servicebus.messaging.messagesession.getstate#Microsoft_ServiceBus_Messaging_MessageSession_GetState)).</span></span>
* <span data-ttu-id="9d2bd-292">只有服務匯流排佇列支援的[無效信件處理](service-bus-dead-letter-queues.md)可用於隔離接收端應用程式無法順利處理的訊息，或是由於存留時間 (TTL) 屬性過期而無法送達目的地的訊息。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-292">[Dead lettering](service-bus-dead-letter-queues.md), which is only supported by Service Bus queues, can be useful for isolating messages that cannot be processed successfully by the receiving application or when messages cannot reach their destination due to an expired time-to-live (TTL) property.</span></span> <span data-ttu-id="9d2bd-293">TTL 值會指定訊息保留在佇列中的時間長度。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-293">The TTL value specifies how long a message remains in the queue.</span></span> <span data-ttu-id="9d2bd-294">在服務匯流排中，當 TTL 期限到期時，訊息將會移至稱為 $DeadLetterQueue 的特殊佇列。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-294">With Service Bus, the message will be moved to a special queue called $DeadLetterQueue when the TTL period expires.</span></span>
* <span data-ttu-id="9d2bd-295">為了在儲存體佇列中找出「有害」訊息，應用程式會在清除佇列中的訊息時，檢查訊息的 **[DequeueCount](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.storage.queue.cloudqueuemessage.dequeuecount.aspx)** 屬性。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-295">To find "poison" messages in Storage queues, when dequeuing a message the application examines the **[DequeueCount](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.storage.queue.cloudqueuemessage.dequeuecount.aspx)** property of the message.</span></span> <span data-ttu-id="9d2bd-296">如果 **DequeueCount** 大於給定的臨界值，應用程式就會將訊息移至應用程式定義的「無效信件」佇列。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-296">If **DequeueCount** is greater than a given threshold, the application moves the message to an application-defined "dead letter" queue.</span></span>
* <span data-ttu-id="9d2bd-297">儲存體佇列可讓您取得針對佇列執行之所有交易的詳細記錄，以及彙總的計量資料。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-297">Storage queues enable you to obtain a detailed log of all of the transactions executed against the queue, as well as aggregated metrics.</span></span> <span data-ttu-id="9d2bd-298">這兩個選項有助於偵錯和了解應用程式的儲存體佇列使用狀況。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-298">Both of these options are useful for debugging and understanding how your application uses Storage queues.</span></span> <span data-ttu-id="9d2bd-299">也有助於對您的應用程式進行效能微調，以及降低使用佇列的成本。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-299">They are also useful for performance-tuning your application and reducing the costs of using queues.</span></span>
* <span data-ttu-id="9d2bd-300">服務匯流排所支援之「訊息工作階段」的概念可讓屬於特定邏輯群組的訊息與給定的接收者產生關聯，進而在訊息與其個別的接收者之間建立類似工作階段的密切關係。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-300">The concept of "message sessions" supported by Service Bus enables messages that belong to a certain logical group to be associated with a given receiver, which in turn creates a session-like affinity between messages and their respective receivers.</span></span> <span data-ttu-id="9d2bd-301">您可以設定訊息上的 [SessionID](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.sessionid#Microsoft_ServiceBus_Messaging_BrokeredMessage_SessionId) 屬性，以在服務匯流排中啟用這項進階功能。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-301">You can enable this advanced functionality in Service Bus by setting the [SessionID](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.sessionid#Microsoft_ServiceBus_Messaging_BrokeredMessage_SessionId) property on a message.</span></span> <span data-ttu-id="9d2bd-302">然後，接收者就可以接聽特定的工作階段 ID，並且接收共用指定之工作階段識別項的訊息。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-302">Receivers can then listen on a specific session ID and receive messages that share the specified session identifier.</span></span>
* <span data-ttu-id="9d2bd-303">服務匯流排佇列所支援的重複偵測功能會根據 [MessageId](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.messageid#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId) 屬性的值，自動移除傳送至佇列或主題的重複訊息。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-303">The duplication detection functionality supported by Service Bus queues automatically removes duplicate messages sent to a queue or topic, based on the value of the [MessageId](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.messageid#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId) property.</span></span>

## <a name="capacity-and-quotas"></a><span data-ttu-id="9d2bd-304">容量和配額</span><span class="sxs-lookup"><span data-stu-id="9d2bd-304">Capacity and quotas</span></span>
<span data-ttu-id="9d2bd-305">本節將從可能適用之[容量和配額](service-bus-quotas.md)的觀點來比較儲存體佇列和服務匯流排佇列。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-305">This section compares Storage queues and Service Bus queues from the perspective of [capacity and quotas](service-bus-quotas.md) that may apply.</span></span>

| <span data-ttu-id="9d2bd-306">比較準則</span><span class="sxs-lookup"><span data-stu-id="9d2bd-306">Comparison Criteria</span></span> | <span data-ttu-id="9d2bd-307">儲存體佇列</span><span class="sxs-lookup"><span data-stu-id="9d2bd-307">Storage queues</span></span> | <span data-ttu-id="9d2bd-308">服務匯流排佇列</span><span class="sxs-lookup"><span data-stu-id="9d2bd-308">Service Bus Queues</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9d2bd-309">佇列大小上限</span><span class="sxs-lookup"><span data-stu-id="9d2bd-309">Maximum queue size</span></span> |<span data-ttu-id="9d2bd-310">**500 TB**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-310">**500 TB**</span></span><br/><br/><span data-ttu-id="9d2bd-311">(限制為[單一儲存體帳戶容量](../storage/common/storage-introduction.md#queue-storage))</span><span class="sxs-lookup"><span data-stu-id="9d2bd-311">(limited to a [single storage account capacity](../storage/common/storage-introduction.md#queue-storage))</span></span> |<span data-ttu-id="9d2bd-312">**1 GB 到 80 GB**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-312">**1 GB to 80 GB**</span></span><br/><br/><span data-ttu-id="9d2bd-313">(在建立佇列和[啟用分割](service-bus-partitioning.md)時定義 - 請參閱＜其他資訊＞一節)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-313">(defined upon creation of a queue and [enabling partitioning](service-bus-partitioning.md) – see the “Additional Information” section)</span></span> |
| <span data-ttu-id="9d2bd-314">訊息大小上限</span><span class="sxs-lookup"><span data-stu-id="9d2bd-314">Maximum message size</span></span> |<span data-ttu-id="9d2bd-315">**64 KB**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-315">**64 KB**</span></span><br/><br/><span data-ttu-id="9d2bd-316">(使用 **Base64** 編碼時則為 48 KB)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-316">(48 KB when using **Base64** encoding)</span></span><br/><br/><span data-ttu-id="9d2bd-317">Azure 可以結合佇列和 Blob 來支援大型訊息，因此您最多可以將 200GB 的單一項目加入佇列。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-317">Azure supports large messages by combining queues and blobs – at which point you can enqueue up to 200GB for a single item.</span></span> |<span data-ttu-id="9d2bd-318">**256 KB** 或 **1 MB**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-318">**256 KB** or **1 MB**</span></span><br/><br/><span data-ttu-id="9d2bd-319">(包括標頭和主體，標頭大小上限：64 KB)。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-319">(including both header and body, maximum header size: 64 KB).</span></span><br/><br/><span data-ttu-id="9d2bd-320">取決於[服務層](service-bus-premium-messaging.md)。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-320">Depends on the [service tier](service-bus-premium-messaging.md).</span></span> |
| <span data-ttu-id="9d2bd-321">訊息 TTL 上限</span><span class="sxs-lookup"><span data-stu-id="9d2bd-321">Maximum message TTL</span></span> |<span data-ttu-id="9d2bd-322">**7 天**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-322">**7 days**</span></span> |**`TimeSpan.Max`** |
| <span data-ttu-id="9d2bd-323">佇列數目上限</span><span class="sxs-lookup"><span data-stu-id="9d2bd-323">Maximum number of queues</span></span> |<span data-ttu-id="9d2bd-324">**無限制**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-324">**Unlimited**</span></span> |<span data-ttu-id="9d2bd-325">**10,000**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-325">**10,000**</span></span><br/><br/><span data-ttu-id="9d2bd-326">(每個服務命名空間，可以增加)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-326">(per service namespace, can be increased)</span></span> |
| <span data-ttu-id="9d2bd-327">並行用戶端數目上限</span><span class="sxs-lookup"><span data-stu-id="9d2bd-327">Maximum number of concurrent clients</span></span> |<span data-ttu-id="9d2bd-328">**無限制**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-328">**Unlimited**</span></span> |<span data-ttu-id="9d2bd-329">**無限制**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-329">**Unlimited**</span></span><br/><br/><span data-ttu-id="9d2bd-330">(100 個並行連接限制只適用於以 TCP 通訊協定為基礎的通訊)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-330">(100 concurrent connection limit only applies to TCP protocol-based communication)</span></span> |

### <a name="additional-information"></a><span data-ttu-id="9d2bd-331">其他資訊</span><span class="sxs-lookup"><span data-stu-id="9d2bd-331">Additional information</span></span>
* <span data-ttu-id="9d2bd-332">服務匯流排會強制執行佇列大小限制。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-332">Service Bus enforces queue size limits.</span></span> <span data-ttu-id="9d2bd-333">佇列大小上限是在建立佇列時指定的，而且可以具有 1 到 80 GB 之間的值。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-333">The maximum queue size is specified upon creation of the queue and can have a value between 1 and 80 GB.</span></span> <span data-ttu-id="9d2bd-334">如果達到在建立佇列時所設定的佇列大小值，其他內送訊息將會遭到拒絕，而且呼叫端程式碼將會收到例外狀況。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-334">If the queue size value set on creation of the queue is reached, additional incoming messages will be rejected and an exception will be received by the calling code.</span></span> <span data-ttu-id="9d2bd-335">如需服務匯流排中配額的詳細資訊，請參閱[服務匯流排配額](service-bus-quotas.md)。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-335">For more information about quotas in Service Bus, see [Service Bus Quotas](service-bus-quotas.md).</span></span>
* <span data-ttu-id="9d2bd-336">在[標準層](service-bus-premium-messaging.md)中，您可以建立 1、2、3、4 或 5 GB 大小的服務匯流排佇列 (預設值為 1 GB)。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-336">In the [Standard tier](service-bus-premium-messaging.md), you can create Service Bus queues in 1, 2, 3, 4, or 5 GB sizes (the default is 1 GB).</span></span> <span data-ttu-id="9d2bd-337">在進階層中，您可以建立最多 80 GB 大小的佇列。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-337">In the Premium tier, you can create queues up to 80 GB in size.</span></span> <span data-ttu-id="9d2bd-338">在標準層中，啟用分割時 (這是預設值)，服務匯流排會為您指定的每 GB 建立 16 個資料分割。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-338">In Standard tier, with partitioning enabled (which is the default), Service Bus creates 16 partitions for each GB you specify.</span></span> <span data-ttu-id="9d2bd-339">因此，如果您建立 5 GB 大小的佇列，每 GB 有 16 個資料分割，則佇列大小上限會變成 (5 * 16) = 80 GB。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-339">As such, if you create a queue that is 5 GB in size, with 16 partitions the maximum queue size becomes (5 * 16) = 80 GB.</span></span> <span data-ttu-id="9d2bd-340">您可以在 [Azure 入口網站][Azure portal]上檢視分割的佇列或主題項目，藉此查看其大小上限。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-340">You can see the maximum size of your partitioned queue or topic by looking at its entry on the [Azure portal][Azure portal].</span></span> <span data-ttu-id="9d2bd-341">在進階層中，每個佇列只會建立 2 個資料分割。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-341">In the Premium tier, only 2 partitions are created per queue.</span></span>
* <span data-ttu-id="9d2bd-342">使用儲存體佇列時，如果訊息內容不是 XML 安全內容，則必須經過 **Base64** 編碼。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-342">With Storage queues, if the content of the message is not XML-safe, then it must be **Base64** encoded.</span></span> <span data-ttu-id="9d2bd-343">如果您對訊息進行 **Base64** 編碼，使用者承載最多可為 48 KB，而非 64 KB。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-343">If you **Base64**-encode the message, the user payload can be up to 48 KB, instead of 64 KB.</span></span>
* <span data-ttu-id="9d2bd-344">使用服務匯流排佇列時，儲存在佇列中的每個訊息都包含兩個部分：標頭和主體。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-344">With Service Bus queues, each message stored in a queue is composed of two parts: a header and a body.</span></span> <span data-ttu-id="9d2bd-345">訊息大小總計不能超過服務層所支援的訊息大小上限。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-345">The total size of the message cannot exceed the maximum message size supported by the service tier.</span></span>
* <span data-ttu-id="9d2bd-346">當用戶端透過 TCP 通訊協定與服務匯流排佇列通訊時，單一服務匯流排佇列的並行連接數目上限會限制為 100。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-346">When clients communicate with Service Bus queues over the TCP protocol, the maximum number of concurrent connections to a single Service Bus queue is limited to 100.</span></span> <span data-ttu-id="9d2bd-347">這個數目是在傳送者和接收者之間共用的。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-347">This number is shared between senders and receivers.</span></span> <span data-ttu-id="9d2bd-348">如果達到這個配額，其他連接的後續要求將會遭到拒絕，而且呼叫端程式碼將會收到例外狀況。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-348">If this quota is reached, subsequent requests for additional connections will be rejected and an exception will be received by the calling code.</span></span> <span data-ttu-id="9d2bd-349">這項限制不會加諸於使用 REST API 連接至佇列的用戶端。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-349">This limit is not imposed on clients connecting to the queues using REST-based API.</span></span>
* <span data-ttu-id="9d2bd-350">如果您的單一服務匯流排服務命名空間需要超過 10,000 個佇列，您可以連絡 Azure 支援小組並要求增加。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-350">If you require more than 10,000 queues in a single Service Bus namespace, you can contact the Azure support team and request an increase.</span></span> <span data-ttu-id="9d2bd-351">若要讓服務匯流排擴充到超過 10,000 個佇列，您也可以使用 [Azure 入口網站][Azure portal]來建立其他命名空間。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-351">To scale beyond 10,000 queues with Service Bus, you can also create additional namespaces using the [Azure portal][Azure portal].</span></span>

## <a name="management-and-operations"></a><span data-ttu-id="9d2bd-352">管理和作業</span><span class="sxs-lookup"><span data-stu-id="9d2bd-352">Management and operations</span></span>
<span data-ttu-id="9d2bd-353">本節將比較儲存體佇列和服務匯流排佇列所提供的管理功能。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-353">This section compares the management features provided by Storage queues and Service Bus queues.</span></span>

| <span data-ttu-id="9d2bd-354">比較準則</span><span class="sxs-lookup"><span data-stu-id="9d2bd-354">Comparison Criteria</span></span> | <span data-ttu-id="9d2bd-355">儲存體佇列</span><span class="sxs-lookup"><span data-stu-id="9d2bd-355">Storage queues</span></span> | <span data-ttu-id="9d2bd-356">服務匯流排佇列</span><span class="sxs-lookup"><span data-stu-id="9d2bd-356">Service Bus queues</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9d2bd-357">管理通訊協定</span><span class="sxs-lookup"><span data-stu-id="9d2bd-357">Management protocol</span></span> |<span data-ttu-id="9d2bd-358">**REST 透過 HTTP/HTTPS**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-358">**REST over HTTP/HTTPS**</span></span> |<span data-ttu-id="9d2bd-359">**REST 透過 HTTPS**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-359">**REST over HTTPS**</span></span> |
| <span data-ttu-id="9d2bd-360">執行階段通訊協定</span><span class="sxs-lookup"><span data-stu-id="9d2bd-360">Runtime protocol</span></span> |<span data-ttu-id="9d2bd-361">**REST 透過 HTTP/HTTPS**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-361">**REST over HTTP/HTTPS**</span></span> |<span data-ttu-id="9d2bd-362">**REST 透過 HTTPS**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-362">**REST over HTTPS**</span></span><br/><br/><span data-ttu-id="9d2bd-363">**AMQP 1.0 標準 (具 TLS 的 TCP)**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-363">**AMQP 1.0 Standard (TCP with TLS)**</span></span> |
| <span data-ttu-id="9d2bd-364">.NET API</span><span class="sxs-lookup"><span data-stu-id="9d2bd-364">.NET API</span></span> |<span data-ttu-id="9d2bd-365">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-365">**Yes**</span></span><br/><br/><span data-ttu-id="9d2bd-366">(.NET 儲存體用戶端 API)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-366">(.NET Storage Client API)</span></span> |<span data-ttu-id="9d2bd-367">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-367">**Yes**</span></span><br/><br/><span data-ttu-id="9d2bd-368">(.NET 服務匯流排 API)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-368">(.NET Service Bus API)</span></span> |
| <span data-ttu-id="9d2bd-369">Native C++</span><span class="sxs-lookup"><span data-stu-id="9d2bd-369">Native C++</span></span> |<span data-ttu-id="9d2bd-370">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-370">**Yes**</span></span> |<span data-ttu-id="9d2bd-371">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-371">**Yes**</span></span> |
| <span data-ttu-id="9d2bd-372">Java API</span><span class="sxs-lookup"><span data-stu-id="9d2bd-372">Java API</span></span> |<span data-ttu-id="9d2bd-373">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-373">**Yes**</span></span> |<span data-ttu-id="9d2bd-374">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-374">**Yes**</span></span> |
| <span data-ttu-id="9d2bd-375">PHP API</span><span class="sxs-lookup"><span data-stu-id="9d2bd-375">PHP API</span></span> |<span data-ttu-id="9d2bd-376">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-376">**Yes**</span></span> |<span data-ttu-id="9d2bd-377">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-377">**Yes**</span></span> |
| <span data-ttu-id="9d2bd-378">Node.js API</span><span class="sxs-lookup"><span data-stu-id="9d2bd-378">Node.js API</span></span> |<span data-ttu-id="9d2bd-379">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-379">**Yes**</span></span> |<span data-ttu-id="9d2bd-380">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-380">**Yes**</span></span> |
| <span data-ttu-id="9d2bd-381">任意中繼資料支援</span><span class="sxs-lookup"><span data-stu-id="9d2bd-381">Arbitrary metadata support</span></span> |<span data-ttu-id="9d2bd-382">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-382">**Yes**</span></span> |<span data-ttu-id="9d2bd-383">**否**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-383">**No**</span></span> |
| <span data-ttu-id="9d2bd-384">佇列命名規則</span><span class="sxs-lookup"><span data-stu-id="9d2bd-384">Queue naming rules</span></span> |<span data-ttu-id="9d2bd-385">**長度最多 63 個字元**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-385">**Up to 63 characters long**</span></span><br/><br/><span data-ttu-id="9d2bd-386">(佇列名稱的字母必須是小寫。)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-386">(Letters in a queue name must be lowercase.)</span></span> |<span data-ttu-id="9d2bd-387">**長度最多 260 個字元**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-387">**Up to 260 characters long**</span></span><br/><br/><span data-ttu-id="9d2bd-388">(佇列路徑和名稱不區分大小寫。)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-388">(Queue paths and names are case-insensitive.)</span></span> |
| <span data-ttu-id="9d2bd-389">取得佇列長度函式</span><span class="sxs-lookup"><span data-stu-id="9d2bd-389">Get queue length function</span></span> |<span data-ttu-id="9d2bd-390">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-390">**Yes**</span></span><br/><br/><span data-ttu-id="9d2bd-391">(如果訊息過了 TTL 而到期卻未遭刪除，則為近似值。)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-391">(Approximate value if messages expire beyond the TTL without being deleted.)</span></span> |<span data-ttu-id="9d2bd-392">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-392">**Yes**</span></span><br/><br/><span data-ttu-id="9d2bd-393">(精確的時間點值。)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-393">(Exact, point-in-time value.)</span></span> |
| <span data-ttu-id="9d2bd-394">查看函式</span><span class="sxs-lookup"><span data-stu-id="9d2bd-394">Peek function</span></span> |<span data-ttu-id="9d2bd-395">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-395">**Yes**</span></span> |<span data-ttu-id="9d2bd-396">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-396">**Yes**</span></span> |

### <a name="additional-information"></a><span data-ttu-id="9d2bd-397">其他資訊</span><span class="sxs-lookup"><span data-stu-id="9d2bd-397">Additional information</span></span>
* <span data-ttu-id="9d2bd-398">儲存體佇列支援可套用至佇列描述的任意屬性，格式為名稱/值組。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-398">Storage queues provide support for arbitrary attributes that can be applied to the queue description, in the form of name/value pairs.</span></span>
* <span data-ttu-id="9d2bd-399">這兩種佇列技術都提供不需要鎖定訊息即可查看訊息的功能，這項功能在實作佇列總管/瀏覽器工具時很有用。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-399">Both queue technologies offer the ability to peek a message without having to lock it, which can be useful when implementing a queue explorer/browser tool.</span></span>
* <span data-ttu-id="9d2bd-400">與 REST over HTTP 相較之下，服務匯流排的 .NET 代理傳訊 API 利用全雙工 TCP 連接來提升效能，而且可支援 AMQP 1.0 標準通訊協定。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-400">The Service Bus .NET brokered messaging APIs leverage full-duplex TCP connections for improved performance when compared to REST over HTTP, and they support the AMQP 1.0 standard protocol.</span></span>
* <span data-ttu-id="9d2bd-401">儲存體佇列名稱長度可以是 3-63 個字元，而且可以包含小寫字母、數字和連字號。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-401">Names of Storage queues can be 3-63 characters long, can contain lowercase letters, numbers, and hyphens.</span></span> <span data-ttu-id="9d2bd-402">如需詳細資訊，請參閱[為佇列和中繼資料命名](/rest/api/storageservices/fileservices/Naming-Queues-and-Metadata)。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-402">For more information, see [Naming Queues and Metadata](/rest/api/storageservices/fileservices/Naming-Queues-and-Metadata).</span></span>
* <span data-ttu-id="9d2bd-403">服務匯流排佇列名稱長度最多 260 個字元，而且命名規則的限制較少。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-403">Service Bus queue names can be up to 260 characters long and have less restrictive naming rules.</span></span> <span data-ttu-id="9d2bd-404">服務匯流排佇列名稱可以包含字母、數字、句號、連字號和底線。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-404">Service Bus queue names can contain letters, numbers, periods, hyphens, and underscores.</span></span>

## <a name="authentication-and-authorization"></a><span data-ttu-id="9d2bd-405">驗證和授權</span><span class="sxs-lookup"><span data-stu-id="9d2bd-405">Authentication and authorization</span></span>
<span data-ttu-id="9d2bd-406">本節將討論儲存體佇列和服務匯流排佇列所支援的驗證和授權功能。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-406">This section discusses the authentication and authorization features supported by Storage queues and Service Bus queues.</span></span>

| <span data-ttu-id="9d2bd-407">比較準則</span><span class="sxs-lookup"><span data-stu-id="9d2bd-407">Comparison Criteria</span></span> | <span data-ttu-id="9d2bd-408">儲存體佇列</span><span class="sxs-lookup"><span data-stu-id="9d2bd-408">Storage queues</span></span> | <span data-ttu-id="9d2bd-409">服務匯流排佇列</span><span class="sxs-lookup"><span data-stu-id="9d2bd-409">Service Bus Queues</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9d2bd-410">驗證</span><span class="sxs-lookup"><span data-stu-id="9d2bd-410">Authentication</span></span> |<span data-ttu-id="9d2bd-411">**對稱金鑰**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-411">**Symmetric key**</span></span> |<span data-ttu-id="9d2bd-412">**對稱金鑰**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-412">**Symmetric key**</span></span> |
| <span data-ttu-id="9d2bd-413">安全性模型</span><span class="sxs-lookup"><span data-stu-id="9d2bd-413">Security model</span></span> |<span data-ttu-id="9d2bd-414">透過 SAS 權杖進行委派存取。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-414">Delegated access via SAS tokens.</span></span> |<span data-ttu-id="9d2bd-415">SAS</span><span class="sxs-lookup"><span data-stu-id="9d2bd-415">SAS</span></span> |
| <span data-ttu-id="9d2bd-416">識別提供者同盟</span><span class="sxs-lookup"><span data-stu-id="9d2bd-416">Identity provider federation</span></span> |<span data-ttu-id="9d2bd-417">**否**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-417">**No**</span></span> |<span data-ttu-id="9d2bd-418">**是**</span><span class="sxs-lookup"><span data-stu-id="9d2bd-418">**Yes**</span></span> |

### <a name="additional-information"></a><span data-ttu-id="9d2bd-419">其他資訊</span><span class="sxs-lookup"><span data-stu-id="9d2bd-419">Additional information</span></span>
* <span data-ttu-id="9d2bd-420">對這兩種佇列技術提出的每項要求都必須經過驗證。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-420">Every request to either of the queuing technologies must be authenticated.</span></span> <span data-ttu-id="9d2bd-421">不支援具有匿名存取的公用佇列。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-421">Public queues with anonymous access are not supported.</span></span> <span data-ttu-id="9d2bd-422">使用 [SAS](service-bus-sas.md) 時，您可以發佈唯寫 SAS、唯讀 SAS 或甚至是完整存取 SAS 來解決這種情況。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-422">Using [SAS](service-bus-sas.md), you can address this scenario by publishing a write-only SAS, read-only SAS, or even a full-access SAS.</span></span>
* <span data-ttu-id="9d2bd-423">儲存體佇列所提供的驗證配置需要使用對稱金鑰，這個金鑰是雜湊式訊息驗證碼 (HMAC)、使用 SHA-256 演算法所計算並且編碼為 **Base64** 字串。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-423">The authentication scheme provided by Storage queues involves the use of a symmetric key, which is a hash-based Message Authentication Code (HMAC), computed with the SHA-256 algorithm and encoded as a **Base64** string.</span></span> <span data-ttu-id="9d2bd-424">如需個別通訊協定的詳細資訊，請參閱 [Azure 儲存體服務的驗證](/rest/api/storageservices/fileservices/Authentication-for-the-Azure-Storage-Services)。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-424">For more information about the respective protocol, see [Authentication for the Azure Storage Services](/rest/api/storageservices/fileservices/Authentication-for-the-Azure-Storage-Services).</span></span> <span data-ttu-id="9d2bd-425">服務匯流排佇列支援使用對稱金鑰的類似模型。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-425">Service Bus queues support a similar model using symmetric keys.</span></span> <span data-ttu-id="9d2bd-426">如需詳細資訊，請參閱[使用服務匯流排的共用存取簽章驗證](service-bus-sas.md)。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-426">For more information, see [Shared Access Signature Authentication with Service Bus](service-bus-sas.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="9d2bd-427">結論</span><span class="sxs-lookup"><span data-stu-id="9d2bd-427">Conclusion</span></span>
<span data-ttu-id="9d2bd-428">透過深入了解這兩種技術，您將能夠對要使用哪種佇列技術及何時使用，做出更旁徵博引的決定。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-428">By gaining a deeper understanding of the two technologies, you will be able to make a more informed decision on which queue technology to use, and when.</span></span> <span data-ttu-id="9d2bd-429">關於何時使用儲存體佇列或服務匯流排佇列的決定明顯取決於許多因素。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-429">The decision on when to use Storage queues or Service Bus queues clearly depends on a number of factors.</span></span> <span data-ttu-id="9d2bd-430">這些因素可能主要取決於應用程式及其架構的個別需求。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-430">These factors may depend heavily on the individual needs of your application and its architecture.</span></span> <span data-ttu-id="9d2bd-431">如果您的應用程式已經使用 Microsoft Azure 的核心功能，您可能會想要選擇儲存體佇列，尤其是需要在服務之間進行基本通訊和傳訊，或是需要大小可超過 80 GB 的佇列時。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-431">If your application already uses the core capabilities of Microsoft Azure, you may prefer to choose Storage queues, especially if you require basic communication and messaging between services or need queues that can be larger than 80 GB in size.</span></span>

<span data-ttu-id="9d2bd-432">由於服務匯流排佇列提供許多進階功能 (例如工作階段、交易、重複偵測、自動處理無效信件和持久的發佈/訂閱功能)，如果您要建置混合應用程式或您的應用程式額外需要這些功能，則比較適合選擇這種佇列。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-432">Because Service Bus queues provide a number of advanced features, such as sessions, transactions, duplicate detection, automatic dead-lettering, and durable publish/subscribe capabilities, they may be a preferred choice if you are building a hybrid application or if your application otherwise requires these features.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9d2bd-433">後續步驟</span><span class="sxs-lookup"><span data-stu-id="9d2bd-433">Next steps</span></span>
<span data-ttu-id="9d2bd-434">下列文章提供有關使用儲存體佇列或服務匯流排佇列的更多指引和資訊。</span><span class="sxs-lookup"><span data-stu-id="9d2bd-434">The following articles provide more guidance and information about using Storage queues or Service Bus queues.</span></span>

* [<span data-ttu-id="9d2bd-435">開始使用服務匯流排佇列</span><span class="sxs-lookup"><span data-stu-id="9d2bd-435">Get started with Service Bus queues</span></span>](service-bus-dotnet-get-started-with-queues.md)
* [<span data-ttu-id="9d2bd-436">如何使用佇列儲存體服務</span><span class="sxs-lookup"><span data-stu-id="9d2bd-436">How to Use the Queue Storage Service</span></span>](../storage/queues/storage-dotnet-how-to-use-queues.md)
* [<span data-ttu-id="9d2bd-437">使用服務匯流排代理傳訊的效能改進最佳作法</span><span class="sxs-lookup"><span data-stu-id="9d2bd-437">Best practices for performance improvements using Service Bus brokered messaging</span></span>](service-bus-performance-improvements.md)
* [<span data-ttu-id="9d2bd-438">Azure 服務匯流排的佇列和主題簡介 (部落格文章)</span><span class="sxs-lookup"><span data-stu-id="9d2bd-438">Introducing Queues and Topics in Azure Service Bus (blog post)</span></span>](http://www.code-magazine.com/article.aspx?quickid=1112041)
* [<span data-ttu-id="9d2bd-439">服務匯流排的開發人員指南</span><span class="sxs-lookup"><span data-stu-id="9d2bd-439">The Developer's Guide to Service Bus</span></span>](http://www.cloudcasts.net/devguide/Default.aspx?id=11030)
* [<span data-ttu-id="9d2bd-440">使用 Azure 中的佇列服務</span><span class="sxs-lookup"><span data-stu-id="9d2bd-440">Using the Queuing Service in Azure</span></span>](http://www.developerfusion.com/article/120197/using-the-queuing-service-in-windows-azure/)

[Azure portal]: https://portal.azure.com

