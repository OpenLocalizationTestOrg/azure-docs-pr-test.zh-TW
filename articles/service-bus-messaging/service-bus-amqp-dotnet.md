---
title: "使用.NET 和 AMQP 1.0 匯流排 aaaService |Microsoft 文件"
description: "搭配使用 .NET 的 Azure 服務匯流排與 AMQP"
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 332bcb13-e287-4715-99ee-3d7d97396487
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 04/19/2017
ms.author: sethm
ms.openlocfilehash: d8b40f92ba29058951556fa3db1adcf9383ee69f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="using-service-bus-from-net-with-amqp-10"></a><span data-ttu-id="9417b-103">搭配使用 .NET 的服務匯流排與 AMQP 1.0</span><span class="sxs-lookup"><span data-stu-id="9417b-103">Using Service Bus from .NET with AMQP 1.0</span></span>

## <a name="downloading-hello-service-bus-sdk"></a><span data-ttu-id="9417b-104">下載服務匯流排 SDK hello</span><span class="sxs-lookup"><span data-stu-id="9417b-104">Downloading hello Service Bus SDK</span></span>

<span data-ttu-id="9417b-105">Hello 服務匯流排 SDK 版本 2.1 或更新版本中使用 AMQP 1.0 支援。</span><span class="sxs-lookup"><span data-stu-id="9417b-105">AMQP 1.0 support is available in hello Service Bus SDK version 2.1 or later.</span></span> <span data-ttu-id="9417b-106">您可以確保您的 hello 服務匯流排的位元從下載最新版本的 hello [NuGet][NuGet]。</span><span class="sxs-lookup"><span data-stu-id="9417b-106">You can ensure you have hello latest version by downloading hello Service Bus bits from [NuGet][NuGet].</span></span>

## <a name="configuring-net-applications-toouse-amqp-10"></a><span data-ttu-id="9417b-107">設定.NET 應用程式 toouse AMQP 1.0</span><span class="sxs-lookup"><span data-stu-id="9417b-107">Configuring .NET applications toouse AMQP 1.0</span></span>

<span data-ttu-id="9417b-108">根據預設，hello 服務匯流排.NET 用戶端程式庫會與 hello 使用專用的 SOAP 架構通訊協定的服務匯流排服務通訊。</span><span class="sxs-lookup"><span data-stu-id="9417b-108">By default, hello Service Bus .NET client library communicates with hello Service Bus service using a dedicated SOAP-based protocol.</span></span> <span data-ttu-id="9417b-109">toouse AMQP 1.0 而不是 hello 預設通訊協定需要明確設定於 hello 服務匯流排連接字串，hello 下一節中所述。</span><span class="sxs-lookup"><span data-stu-id="9417b-109">toouse AMQP 1.0 instead of hello default protocol requires explicit configuration on hello Service Bus connection string, as described in hello next section.</span></span> <span data-ttu-id="9417b-110">除了這項變更之外，在使用 AMQP 1.0 時，應用程式程式碼會維持不變。</span><span class="sxs-lookup"><span data-stu-id="9417b-110">Other than this change, application code remains unchanged when using AMQP 1.0.</span></span>

<span data-ttu-id="9417b-111">在 hello 目前版本中，有一些使用 AMQP 時，不支援的 API 功能。</span><span class="sxs-lookup"><span data-stu-id="9417b-111">In hello current release, there are a few API features that are not supported when using AMQP.</span></span> <span data-ttu-id="9417b-112">這些不支援的功能列稍後在 hello 區段[不支援的功能、 限制和行為的差異](#unsupported-features-restrictions-and-behavioral-differences)。</span><span class="sxs-lookup"><span data-stu-id="9417b-112">These unsupported features are listed later in hello section [Unsupported features, restrictions, and behavioral differences](#unsupported-features-restrictions-and-behavioral-differences).</span></span> <span data-ttu-id="9417b-113">有些進階組態設定的 hello 也具有不同的意義，使用 AMQP 時。</span><span class="sxs-lookup"><span data-stu-id="9417b-113">Some of hello advanced configuration settings also have a different meaning when using AMQP.</span></span>

### <a name="configuration-using-appconfig"></a><span data-ttu-id="9417b-114">使用 App.config 進行設定</span><span class="sxs-lookup"><span data-stu-id="9417b-114">Configuration using App.config</span></span>

<span data-ttu-id="9417b-115">它是應用程式 toouse hello App.config 組態檔 toostore 設定好的作法。</span><span class="sxs-lookup"><span data-stu-id="9417b-115">It is good practice for applications toouse hello App.config configuration file toostore settings.</span></span> <span data-ttu-id="9417b-116">服務匯流排應用程式，您可以使用 App.config toostore hello 服務匯流排連接字串。</span><span class="sxs-lookup"><span data-stu-id="9417b-116">For Service Bus applications, you can use App.config toostore hello Service Bus connection string.</span></span> <span data-ttu-id="9417b-117">範例 App.config 檔案如下所示：</span><span class="sxs-lookup"><span data-stu-id="9417b-117">An example App.config file is as follows:</span></span>

```xml
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <appSettings>
        <add key="Microsoft.ServiceBus.ConnectionString"
             value="Endpoint=sb://[namespace].servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=[SAS key];TransportType=Amqp" />
    </appSettings>
</configuration>
```

<span data-ttu-id="9417b-118">hello 值 hello`Microsoft.ServiceBus.ConnectionString`設定是為使用的 tooconfigure hello 連接 tooService 匯流排 hello 服務匯流排連接字串。</span><span class="sxs-lookup"><span data-stu-id="9417b-118">hello value of hello `Microsoft.ServiceBus.ConnectionString` setting is hello Service Bus connection string that is used tooconfigure hello connection tooService Bus.</span></span> <span data-ttu-id="9417b-119">hello 格式如下所示：</span><span class="sxs-lookup"><span data-stu-id="9417b-119">hello format is as follows:</span></span>

`Endpoint=sb://[namespace].servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=[SAS key];TransportType=Amqp`

<span data-ttu-id="9417b-120">其中`[namespace]`和`SharedAccessKey`取自 hello [Azure 入口網站][ Azure portal]當您建立服務匯流排命名空間。</span><span class="sxs-lookup"><span data-stu-id="9417b-120">Where `[namespace]` and `SharedAccessKey` are obtained from hello [Azure portal][Azure portal] when you create a Service Bus namespace.</span></span> <span data-ttu-id="9417b-121">如需詳細資訊，請參閱[建立服務匯流排命名空間使用 hello Azure 入口網站][Create a Service Bus namespace using hello Azure portal]。</span><span class="sxs-lookup"><span data-stu-id="9417b-121">For more information, see [Create a Service Bus namespace using hello Azure portal][Create a Service Bus namespace using hello Azure portal].</span></span>

<span data-ttu-id="9417b-122">使用 AMQP 時，附加與 hello 連接字串`;TransportType=Amqp`。</span><span class="sxs-lookup"><span data-stu-id="9417b-122">When using AMQP, append hello connection string with `;TransportType=Amqp`.</span></span> <span data-ttu-id="9417b-123">這個標記法指示 hello 用戶端程式庫 toomake 其連線 tooService 匯流排使用 AMQP 1.0。</span><span class="sxs-lookup"><span data-stu-id="9417b-123">This notation instructs hello client library toomake its connection tooService Bus using AMQP 1.0.</span></span>

## <a name="message-serialization"></a><span data-ttu-id="9417b-124">訊息序列化</span><span class="sxs-lookup"><span data-stu-id="9417b-124">Message serialization</span></span>

<span data-ttu-id="9417b-125">Hello 預設序列化行為 hello.NET 用戶端程式庫時使用 hello 預設通訊協定，為 toouse hello [DataContractSerializer] [ DataContractSerializer]輸入 tooserialize [BrokeredMessage] [ BrokeredMessage] hello 用戶端程式庫和 hello 服務匯流排服務之間傳輸的執行個體。</span><span class="sxs-lookup"><span data-stu-id="9417b-125">When using hello default protocol, hello default serialization behavior of hello .NET client library is toouse hello [DataContractSerializer][DataContractSerializer] type tooserialize a [BrokeredMessage][BrokeredMessage] instance for transport between hello client library and hello Service Bus service.</span></span> <span data-ttu-id="9417b-126">Hello 用戶端程式庫使用 hello AMQP 傳輸模式時，會使用 hello AMQP 類型系統的 hello 序列化[代理的訊息][ BrokeredMessage]至 AMQP 訊息。</span><span class="sxs-lookup"><span data-stu-id="9417b-126">When using hello AMQP transport mode, hello client library uses hello AMQP type system for serialization of hello [brokered message][BrokeredMessage] into an AMQP message.</span></span> <span data-ttu-id="9417b-127">此序列化讓 hello 訊息 toobe 接收和解譯接收的應用程式可能在不同的平台，例如，使用 hello JMS API tooaccess 服務匯流排的 Java 應用程式上執行。</span><span class="sxs-lookup"><span data-stu-id="9417b-127">This serialization enables hello message toobe received and interpreted by a receiving application that is potentially running on a different platform, for example, a Java application that uses hello JMS API tooaccess Service Bus.</span></span>

<span data-ttu-id="9417b-128">當您建構[BrokeredMessage] [ BrokeredMessage]執行個體，您可以提供.NET 物件當做參數 toohello 建構函式 tooserve，作為 hello hello 訊息主體。</span><span class="sxs-lookup"><span data-stu-id="9417b-128">When you construct a [BrokeredMessage][BrokeredMessage] instance, you can provide a .NET object as a parameter toohello constructor tooserve as hello body of hello message.</span></span> <span data-ttu-id="9417b-129">物件可以是對應的 tooAMQP 基本型別，hello 主體會序列化至 AMQP 資料類型。</span><span class="sxs-lookup"><span data-stu-id="9417b-129">For objects that can be mapped tooAMQP primitive types, hello body is serialized into AMQP data types.</span></span> <span data-ttu-id="9417b-130">如果 hello 物件無法直接對應至 AMQP 基本類型。也就是使用 hello 序列化 hello 應用程式，然後在 hello 物件定義的自訂類型[DataContractSerializer][DataContractSerializer]，和 AMQP 資料訊息中傳送嗨序列化位元組。</span><span class="sxs-lookup"><span data-stu-id="9417b-130">If hello object cannot be directly mapped into an AMQP primitive type; that is, a custom type defined by hello application, then hello object is serialized using hello [DataContractSerializer][DataContractSerializer], and hello serialized bytes are sent in an AMQP data message.</span></span>

<span data-ttu-id="9417b-131">toofacilitate 互通性與非.NET 用戶端，使用可直接序列化至 AMQP 類型以供 hello hello 訊息本文，.NET 型別。</span><span class="sxs-lookup"><span data-stu-id="9417b-131">toofacilitate interoperability with non-.NET clients, use only .NET types that can be serialized directly into AMQP types for hello body of hello message.</span></span> <span data-ttu-id="9417b-132">hello 下表詳細說明這些類型和 hello 對應對應 toohello AMQP 類型系統。</span><span class="sxs-lookup"><span data-stu-id="9417b-132">hello following table details those types and hello corresponding mapping toohello AMQP type system.</span></span>

| <span data-ttu-id="9417b-133">.NET 主體物件類型</span><span class="sxs-lookup"><span data-stu-id="9417b-133">.NET Body Object Type</span></span> | <span data-ttu-id="9417b-134">對應的 AMQP 類型</span><span class="sxs-lookup"><span data-stu-id="9417b-134">Mapped AMQP Type</span></span> | <span data-ttu-id="9417b-135">AMQP 主體區段類型</span><span class="sxs-lookup"><span data-stu-id="9417b-135">AMQP Body Section Type</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9417b-136">布林</span><span class="sxs-lookup"><span data-stu-id="9417b-136">bool</span></span> |<span data-ttu-id="9417b-137">布林值</span><span class="sxs-lookup"><span data-stu-id="9417b-137">boolean</span></span> |<span data-ttu-id="9417b-138">AMQP 值</span><span class="sxs-lookup"><span data-stu-id="9417b-138">AMQP Value</span></span> |
| <span data-ttu-id="9417b-139">byte</span><span class="sxs-lookup"><span data-stu-id="9417b-139">byte</span></span> |<span data-ttu-id="9417b-140">ubyte</span><span class="sxs-lookup"><span data-stu-id="9417b-140">ubyte</span></span> |<span data-ttu-id="9417b-141">AMQP 值</span><span class="sxs-lookup"><span data-stu-id="9417b-141">AMQP Value</span></span> |
| <span data-ttu-id="9417b-142">ushort</span><span class="sxs-lookup"><span data-stu-id="9417b-142">ushort</span></span> |<span data-ttu-id="9417b-143">ushort</span><span class="sxs-lookup"><span data-stu-id="9417b-143">ushort</span></span> |<span data-ttu-id="9417b-144">AMQP 值</span><span class="sxs-lookup"><span data-stu-id="9417b-144">AMQP Value</span></span> |
| <span data-ttu-id="9417b-145">uint</span><span class="sxs-lookup"><span data-stu-id="9417b-145">uint</span></span> |<span data-ttu-id="9417b-146">uint</span><span class="sxs-lookup"><span data-stu-id="9417b-146">uint</span></span> |<span data-ttu-id="9417b-147">AMQP 值</span><span class="sxs-lookup"><span data-stu-id="9417b-147">AMQP Value</span></span> |
| <span data-ttu-id="9417b-148">ulong</span><span class="sxs-lookup"><span data-stu-id="9417b-148">ulong</span></span> |<span data-ttu-id="9417b-149">ulong</span><span class="sxs-lookup"><span data-stu-id="9417b-149">ulong</span></span> |<span data-ttu-id="9417b-150">AMQP 值</span><span class="sxs-lookup"><span data-stu-id="9417b-150">AMQP Value</span></span> |
| <span data-ttu-id="9417b-151">sbyte</span><span class="sxs-lookup"><span data-stu-id="9417b-151">sbyte</span></span> |<span data-ttu-id="9417b-152">byte</span><span class="sxs-lookup"><span data-stu-id="9417b-152">byte</span></span> |<span data-ttu-id="9417b-153">AMQP 值</span><span class="sxs-lookup"><span data-stu-id="9417b-153">AMQP Value</span></span> |
| <span data-ttu-id="9417b-154">short</span><span class="sxs-lookup"><span data-stu-id="9417b-154">short</span></span> |<span data-ttu-id="9417b-155">short</span><span class="sxs-lookup"><span data-stu-id="9417b-155">short</span></span> |<span data-ttu-id="9417b-156">AMQP 值</span><span class="sxs-lookup"><span data-stu-id="9417b-156">AMQP Value</span></span> |
| <span data-ttu-id="9417b-157">int</span><span class="sxs-lookup"><span data-stu-id="9417b-157">int</span></span> |<span data-ttu-id="9417b-158">int</span><span class="sxs-lookup"><span data-stu-id="9417b-158">int</span></span> |<span data-ttu-id="9417b-159">AMQP 值</span><span class="sxs-lookup"><span data-stu-id="9417b-159">AMQP Value</span></span> |
| <span data-ttu-id="9417b-160">long</span><span class="sxs-lookup"><span data-stu-id="9417b-160">long</span></span> |<span data-ttu-id="9417b-161">long</span><span class="sxs-lookup"><span data-stu-id="9417b-161">long</span></span> |<span data-ttu-id="9417b-162">AMQP 值</span><span class="sxs-lookup"><span data-stu-id="9417b-162">AMQP Value</span></span> |
| <span data-ttu-id="9417b-163">float</span><span class="sxs-lookup"><span data-stu-id="9417b-163">float</span></span> |<span data-ttu-id="9417b-164">float</span><span class="sxs-lookup"><span data-stu-id="9417b-164">float</span></span> |<span data-ttu-id="9417b-165">AMQP 值</span><span class="sxs-lookup"><span data-stu-id="9417b-165">AMQP Value</span></span> |
| <span data-ttu-id="9417b-166">double</span><span class="sxs-lookup"><span data-stu-id="9417b-166">double</span></span> |<span data-ttu-id="9417b-167">double</span><span class="sxs-lookup"><span data-stu-id="9417b-167">double</span></span> |<span data-ttu-id="9417b-168">AMQP 值</span><span class="sxs-lookup"><span data-stu-id="9417b-168">AMQP Value</span></span> |
| <span data-ttu-id="9417b-169">decimal</span><span class="sxs-lookup"><span data-stu-id="9417b-169">decimal</span></span> |<span data-ttu-id="9417b-170">decimal128</span><span class="sxs-lookup"><span data-stu-id="9417b-170">decimal128</span></span> |<span data-ttu-id="9417b-171">AMQP 值</span><span class="sxs-lookup"><span data-stu-id="9417b-171">AMQP Value</span></span> |
| <span data-ttu-id="9417b-172">char</span><span class="sxs-lookup"><span data-stu-id="9417b-172">char</span></span> |<span data-ttu-id="9417b-173">char</span><span class="sxs-lookup"><span data-stu-id="9417b-173">char</span></span> |<span data-ttu-id="9417b-174">AMQP 值</span><span class="sxs-lookup"><span data-stu-id="9417b-174">AMQP Value</span></span> |
| <span data-ttu-id="9417b-175">DateTime</span><span class="sxs-lookup"><span data-stu-id="9417b-175">DateTime</span></span> |<span data-ttu-id="9417b-176">timestamp</span><span class="sxs-lookup"><span data-stu-id="9417b-176">timestamp</span></span> |<span data-ttu-id="9417b-177">AMQP 值</span><span class="sxs-lookup"><span data-stu-id="9417b-177">AMQP Value</span></span> |
| <span data-ttu-id="9417b-178">Guid</span><span class="sxs-lookup"><span data-stu-id="9417b-178">Guid</span></span> |<span data-ttu-id="9417b-179">uuid</span><span class="sxs-lookup"><span data-stu-id="9417b-179">uuid</span></span> |<span data-ttu-id="9417b-180">AMQP 值</span><span class="sxs-lookup"><span data-stu-id="9417b-180">AMQP Value</span></span> |
| <span data-ttu-id="9417b-181">byte[]</span><span class="sxs-lookup"><span data-stu-id="9417b-181">byte[]</span></span> |<span data-ttu-id="9417b-182">binary</span><span class="sxs-lookup"><span data-stu-id="9417b-182">binary</span></span> |<span data-ttu-id="9417b-183">AMQP 值</span><span class="sxs-lookup"><span data-stu-id="9417b-183">AMQP Value</span></span> |
| <span data-ttu-id="9417b-184">string</span><span class="sxs-lookup"><span data-stu-id="9417b-184">string</span></span> |<span data-ttu-id="9417b-185">string</span><span class="sxs-lookup"><span data-stu-id="9417b-185">string</span></span> |<span data-ttu-id="9417b-186">AMQP 值</span><span class="sxs-lookup"><span data-stu-id="9417b-186">AMQP Value</span></span> |
| <span data-ttu-id="9417b-187">System.Collections.IList</span><span class="sxs-lookup"><span data-stu-id="9417b-187">System.Collections.IList</span></span> |<span data-ttu-id="9417b-188">list</span><span class="sxs-lookup"><span data-stu-id="9417b-188">list</span></span> |<span data-ttu-id="9417b-189">AMQP 值： hello 集合中包含的項目只能在此資料表中定義的。</span><span class="sxs-lookup"><span data-stu-id="9417b-189">AMQP Value: items contained in hello collection can only be those that are defined in this table.</span></span> |
| <span data-ttu-id="9417b-190">System.Array</span><span class="sxs-lookup"><span data-stu-id="9417b-190">System.Array</span></span> |<span data-ttu-id="9417b-191">array</span><span class="sxs-lookup"><span data-stu-id="9417b-191">array</span></span> |<span data-ttu-id="9417b-192">AMQP 值： hello 集合中包含的項目只能在此資料表中定義的。</span><span class="sxs-lookup"><span data-stu-id="9417b-192">AMQP Value: items contained in hello collection can only be those that are defined in this table.</span></span> |
| <span data-ttu-id="9417b-193">System.Collections.IDictionary</span><span class="sxs-lookup"><span data-stu-id="9417b-193">System.Collections.IDictionary</span></span> |<span data-ttu-id="9417b-194">map</span><span class="sxs-lookup"><span data-stu-id="9417b-194">map</span></span> |<span data-ttu-id="9417b-195">AMQP 值： hello 集合中包含的項目只能在此資料表中定義的。注意： 只有字串索引鍵支援。</span><span class="sxs-lookup"><span data-stu-id="9417b-195">AMQP Value: items contained in hello collection can only be those that are defined in this table.Note: only String keys are supported.</span></span> |
| <span data-ttu-id="9417b-196">Uri</span><span class="sxs-lookup"><span data-stu-id="9417b-196">Uri</span></span> |<span data-ttu-id="9417b-197">描述字串 （請參閱下表中的 hello）</span><span class="sxs-lookup"><span data-stu-id="9417b-197">Described string(see hello following table)</span></span> |<span data-ttu-id="9417b-198">AMQP 值</span><span class="sxs-lookup"><span data-stu-id="9417b-198">AMQP Value</span></span> |
| <span data-ttu-id="9417b-199">Datetimeoffset</span><span class="sxs-lookup"><span data-stu-id="9417b-199">DateTimeOffset</span></span> |<span data-ttu-id="9417b-200">描述的 long （請參閱下表中的 hello）</span><span class="sxs-lookup"><span data-stu-id="9417b-200">Described long(see hello following table)</span></span> |<span data-ttu-id="9417b-201">AMQP 值</span><span class="sxs-lookup"><span data-stu-id="9417b-201">AMQP Value</span></span> |
| <span data-ttu-id="9417b-202">時間範圍</span><span class="sxs-lookup"><span data-stu-id="9417b-202">TimeSpan</span></span> |<span data-ttu-id="9417b-203">描述的 long （請參閱下列 hello）</span><span class="sxs-lookup"><span data-stu-id="9417b-203">Described long(see hello following)</span></span> |<span data-ttu-id="9417b-204">AMQP 值</span><span class="sxs-lookup"><span data-stu-id="9417b-204">AMQP Value</span></span> |
| <span data-ttu-id="9417b-205">Stream</span><span class="sxs-lookup"><span data-stu-id="9417b-205">Stream</span></span> |<span data-ttu-id="9417b-206">binary</span><span class="sxs-lookup"><span data-stu-id="9417b-206">binary</span></span> |<span data-ttu-id="9417b-207">AMQP 資料 (可能有多個)。</span><span class="sxs-lookup"><span data-stu-id="9417b-207">AMQP Data (may be multiple).</span></span> <span data-ttu-id="9417b-208">hello 資料區段包含 hello 未經處理位元組讀取 hello 資料流物件。</span><span class="sxs-lookup"><span data-stu-id="9417b-208">hello Data sections contain hello raw bytes read from hello Stream object.</span></span> |
| <span data-ttu-id="9417b-209">其他物件</span><span class="sxs-lookup"><span data-stu-id="9417b-209">Other Object</span></span> |<span data-ttu-id="9417b-210">binary</span><span class="sxs-lookup"><span data-stu-id="9417b-210">binary</span></span> |<span data-ttu-id="9417b-211">AMQP 資料 (可能有多個)。</span><span class="sxs-lookup"><span data-stu-id="9417b-211">AMQP Data (may be multiple).</span></span> <span data-ttu-id="9417b-212">包含序列化 hello 二進位的 hello DataContractSerializer 或 hello 應用程式所提供的序列化程式所使用的 hello 物件。</span><span class="sxs-lookup"><span data-stu-id="9417b-212">Contains hello serialized binary of hello object that uses hello DataContractSerializer or a serializer supplied by hello application.</span></span> |

| <span data-ttu-id="9417b-213">.NET 類型</span><span class="sxs-lookup"><span data-stu-id="9417b-213">.NET Type</span></span> | <span data-ttu-id="9417b-214">對應的 AMQP 描述類型</span><span class="sxs-lookup"><span data-stu-id="9417b-214">Mapped AMQP Described Type</span></span> | <span data-ttu-id="9417b-215">注意事項</span><span class="sxs-lookup"><span data-stu-id="9417b-215">Notes</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9417b-216">Uri</span><span class="sxs-lookup"><span data-stu-id="9417b-216">Uri</span></span> |`<type name=”uri” class=restricted source=”string”> <descriptor name=”com.microsoft:uri” /></type>` |<span data-ttu-id="9417b-217">Uri.AbsoluteUri</span><span class="sxs-lookup"><span data-stu-id="9417b-217">Uri.AbsoluteUri</span></span> |
| <span data-ttu-id="9417b-218">Datetimeoffset</span><span class="sxs-lookup"><span data-stu-id="9417b-218">DateTimeOffset</span></span> |`<type name=”datetime-offset” class=restricted source=”long”> <descriptor name=”com.microsoft:datetime-offset” /></type>` |<span data-ttu-id="9417b-219">DateTimeOffset.UtcTicks</span><span class="sxs-lookup"><span data-stu-id="9417b-219">DateTimeOffset.UtcTicks</span></span> |
| <span data-ttu-id="9417b-220">TimeSpan</span><span class="sxs-lookup"><span data-stu-id="9417b-220">TimeSpan</span></span> |`<type name=”timespan” class=restricted source=”long”> <descriptor name=”com.microsoft:timespan” /></type> ` |<span data-ttu-id="9417b-221">TimeSpan.Ticks</span><span class="sxs-lookup"><span data-stu-id="9417b-221">TimeSpan.Ticks</span></span> |

## <a name="unsupported-features-restrictions-and-behavioral-differences"></a><span data-ttu-id="9417b-222">不支援的功能、限制和行為差異</span><span class="sxs-lookup"><span data-stu-id="9417b-222">Unsupported features, restrictions, and behavioral differences</span></span>

<span data-ttu-id="9417b-223">hello 遵循 hello 服務匯流排.NET API 的功能目前不支援使用 AMQP 時：</span><span class="sxs-lookup"><span data-stu-id="9417b-223">hello following features of hello Service Bus .NET API are not currently supported when using AMQP:</span></span>

* <span data-ttu-id="9417b-224">交易</span><span class="sxs-lookup"><span data-stu-id="9417b-224">Transactions</span></span>
* <span data-ttu-id="9417b-225">透過傳輸目的地傳送</span><span class="sxs-lookup"><span data-stu-id="9417b-225">Send via transfer destination</span></span>

<span data-ttu-id="9417b-226">另外還有一些小差異中的 hello 服務匯流排.NET API 的 hello 行為時，使用 AMQP 比較的 toohello 預設通訊協定：</span><span class="sxs-lookup"><span data-stu-id="9417b-226">There are also some small differences in hello behavior of hello Service Bus .NET API when using AMQP, compared toohello default protocol:</span></span>

* <span data-ttu-id="9417b-227">hello [OperationTimeout] [ OperationTimeout]屬性會被忽略。</span><span class="sxs-lookup"><span data-stu-id="9417b-227">hello [OperationTimeout][OperationTimeout] property is ignored.</span></span>
* <span data-ttu-id="9417b-228">`MessageReceiver.Receive(TimeSpan.Zero)` 會實作為 `MessageReceiver.Receive(TimeSpan.FromSeconds(10))`。</span><span class="sxs-lookup"><span data-stu-id="9417b-228">`MessageReceiver.Receive(TimeSpan.Zero)` is implemented as `MessageReceiver.Receive(TimeSpan.FromSeconds(10))`.</span></span>
* <span data-ttu-id="9417b-229">完成訊息的鎖定權杖只能夠由開始收到 hello 訊息的 hello 訊息接收者。</span><span class="sxs-lookup"><span data-stu-id="9417b-229">Completing messages by lock tokens can only be done by hello message receivers that initially received hello messages.</span></span>

## <a name="controlling-amqp-protocol-settings"></a><span data-ttu-id="9417b-230">控制 AMQP 通訊協定設定</span><span class="sxs-lookup"><span data-stu-id="9417b-230">Controlling AMQP protocol settings</span></span>

<span data-ttu-id="9417b-231">hello [.NET Api](/dotnet/api/)公開數個設定 toocontrol hello hello AMQP 通訊協定的行為：</span><span class="sxs-lookup"><span data-stu-id="9417b-231">hello [.NET APIs](/dotnet/api/) expose several settings toocontrol hello behavior of hello AMQP protocol:</span></span>

* <span data-ttu-id="9417b-232">**[MessageReceiver.PrefetchCount](/dotnet/api/microsoft.servicebus.messaging.messagereceiver.prefetchcount?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_MessageReceiver_PrefetchCount)**： 控制項 hello 套用的初始信用額度 tooa 連結。</span><span class="sxs-lookup"><span data-stu-id="9417b-232">**[MessageReceiver.PrefetchCount](/dotnet/api/microsoft.servicebus.messaging.messagereceiver.prefetchcount?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_MessageReceiver_PrefetchCount)**: Controls hello initial credit applied tooa link.</span></span> <span data-ttu-id="9417b-233">hello 預設值為 0。</span><span class="sxs-lookup"><span data-stu-id="9417b-233">hello default is 0.</span></span>
* <span data-ttu-id="9417b-234">**[MessagingFactorySettings.AmqpTransportSettings.MaxFrameSize](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.maxframesize?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_MaxFrameSize)**： 在連接開啟時間 hello 交涉期間提供的控制項 hello AMQP 框架大小上限。</span><span class="sxs-lookup"><span data-stu-id="9417b-234">**[MessagingFactorySettings.AmqpTransportSettings.MaxFrameSize](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.maxframesize?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_MaxFrameSize)**: Controls hello maximum AMQP frame size offered during hello negotiation at connection open time.</span></span> <span data-ttu-id="9417b-235">hello 預設值為 65,536 位元組。</span><span class="sxs-lookup"><span data-stu-id="9417b-235">hello default is 65,536 bytes.</span></span>
* <span data-ttu-id="9417b-236">**[MessagingFactorySettings.AmqpTransportSettings.BatchFlushInterval](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.batchflushinterval?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_BatchFlushInterval)**： 如果傳輸可以批次進行，這個值會決定用於傳送處置 hello 最大延遲。</span><span class="sxs-lookup"><span data-stu-id="9417b-236">**[MessagingFactorySettings.AmqpTransportSettings.BatchFlushInterval](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.batchflushinterval?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_BatchFlushInterval)**: If transfers are batchable, this value determines hello maximum delay for sending dispositions.</span></span> <span data-ttu-id="9417b-237">預設由傳送者/接收者繼承。</span><span class="sxs-lookup"><span data-stu-id="9417b-237">Inherited by senders/receivers by default.</span></span> <span data-ttu-id="9417b-238">個別的傳送者/接收者可以覆寫，而不是 20 毫秒 hello 預設。</span><span class="sxs-lookup"><span data-stu-id="9417b-238">Individual sender/receiver can override hello default, which is 20 milliseconds.</span></span>
* <span data-ttu-id="9417b-239">**[MessagingFactorySettings.AmqpTransportSettings.UseSslStreamSecurity](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.usesslstreamsecurity?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_UseSslStreamSecurity)**︰控制是否透過 SSL 連線建立 AMQP 連線。</span><span class="sxs-lookup"><span data-stu-id="9417b-239">**[MessagingFactorySettings.AmqpTransportSettings.UseSslStreamSecurity](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.usesslstreamsecurity?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_UseSslStreamSecurity)**: Controls whether AMQP connections are established over an SSL connection.</span></span> <span data-ttu-id="9417b-240">hello 預設值是**true**。</span><span class="sxs-lookup"><span data-stu-id="9417b-240">hello default is **true**.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9417b-241">後續步驟</span><span class="sxs-lookup"><span data-stu-id="9417b-241">Next steps</span></span>

<span data-ttu-id="9417b-242">更準備 toolearn 嗎？</span><span class="sxs-lookup"><span data-stu-id="9417b-242">Ready toolearn more?</span></span> <span data-ttu-id="9417b-243">請造訪下列連結查看 hello:</span><span class="sxs-lookup"><span data-stu-id="9417b-243">Visit hello following links:</span></span>

* <span data-ttu-id="9417b-244">[服務匯流排 AMQP 概觀]</span><span class="sxs-lookup"><span data-stu-id="9417b-244">[Service Bus AMQP overview]</span></span>
* <span data-ttu-id="9417b-245">[適用於服務匯流排分割的佇列和主題的 AMQP 1.0 支援]</span><span class="sxs-lookup"><span data-stu-id="9417b-245">[AMQP 1.0 support for Service Bus partitioned queues and topics]</span></span>
* <span data-ttu-id="9417b-246">[Windows Server 服務匯流排中的 AMQP]</span><span class="sxs-lookup"><span data-stu-id="9417b-246">[AMQP in Service Bus for Windows Server]</span></span>

[Create a Service Bus namespace using hello Azure portal]: service-bus-create-namespace-portal.md
[DataContractSerializer]: https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx
[BrokeredMessage]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage?view=azureservicebus-4.0.0
[Microsoft.ServiceBus.Messaging.MessagingFactory.AcceptMessageSession]: /dotnet/api/microsoft.servicebus.messaging.messagingfactory.acceptmessagesession?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_MessagingFactory_AcceptMessageSession
[OperationTimeout]: /dotnet/api/microsoft.servicebus.messaging.messagingfactorysettings.operationtimeout?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_MessagingFactorySettings_OperationTimeout
[NuGet]: http://nuget.org/packages/WindowsAzure.ServiceBus/
[Azure portal]: https://portal.azure.com
[服務匯流排 AMQP 概觀]: service-bus-amqp-overview.md
[適用於服務匯流排分割的佇列和主題的 AMQP 1.0 支援]: service-bus-partitioned-queues-and-topics-amqp-overview.md
[Windows Server 服務匯流排中的 AMQP]: https://msdn.microsoft.com/library/dn574799.aspx
