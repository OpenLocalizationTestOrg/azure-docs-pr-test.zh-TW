---
title: "準備從 Visual Studio 發佈或部署 Azure 應用程式 | Microsoft Docs"
description: "了解設定雲端和儲存體帳戶服務以及 Azure 應用程式的程序。"
services: visual-studio-online
documentationcenter: na
author: kraigb
manager: ghogen
editor: 
ms.assetid: 92ee2f9e-ec49-4c7a-900d-620abe5e9d8a
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 11/11/2016
ms.author: kraigb
ms.openlocfilehash: cc4fb87e559f554634ae062a59bee31f0831da64
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/29/2017
---
# <a name="prepare-to-publish-or-deploy-an-azure-application-from-visual-studio"></a><span data-ttu-id="ead98-103">準備從 Visual Studio 發佈或部署 Azure 應用程式</span><span class="sxs-lookup"><span data-stu-id="ead98-103">Prepare to Publish or Deploy an Azure Application from Visual Studio</span></span>
## <a name="overview"></a><span data-ttu-id="ead98-104">Overview</span><span class="sxs-lookup"><span data-stu-id="ead98-104">Overview</span></span>
<span data-ttu-id="ead98-105">在您可以發佈雲端服務專案之前，您必須設定下列服務：</span><span class="sxs-lookup"><span data-stu-id="ead98-105">Before you can publish a cloud service project, you must set up the following services:</span></span>

* <span data-ttu-id="ead98-106">要在 Azure 環境中執行角色的 **雲端服務**</span><span class="sxs-lookup"><span data-stu-id="ead98-106">A **cloud service** to run your roles in the Azure environment</span></span>
* <span data-ttu-id="ead98-107">提供 Blob、佇列和表格服務等存取權的 **儲存體帳戶** 。</span><span class="sxs-lookup"><span data-stu-id="ead98-107">A **storage account** that provides access to the Blob, Queue, and Table services.</span></span>

<span data-ttu-id="ead98-108">使用下列程序來設定這些服務並設定您的應用程式</span><span class="sxs-lookup"><span data-stu-id="ead98-108">Use the following procedures to set up these services and configure your application</span></span>

## <a name="create-a-cloud-service"></a><span data-ttu-id="ead98-109">建立雲端服務</span><span class="sxs-lookup"><span data-stu-id="ead98-109">Create a cloud service</span></span>
<span data-ttu-id="ead98-110">若要將雲端服務發佈至 Azure，您必須先建立在 Azure 環境中執行角色的雲端服務。</span><span class="sxs-lookup"><span data-stu-id="ead98-110">To publish a cloud service to Azure, you must first create a cloud service, which runs your roles in the Azure environment.</span></span> <span data-ttu-id="ead98-111">您可以在 [Azure 傳統入口網站](http://go.microsoft.com/fwlink/?LinkID=213885)建立雲端服務，本主題稍後將在 **使用 Azure 傳統入口網站建立雲端服務**一節中說明。</span><span class="sxs-lookup"><span data-stu-id="ead98-111">You can create a cloud service in the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), as described in the section **To create a cloud service by using the Azure classic portal**, later in this topic.</span></span> <span data-ttu-id="ead98-112">您也可以使用發佈精靈，在 Visual Studio 中建立雲端服務。</span><span class="sxs-lookup"><span data-stu-id="ead98-112">You can also create a cloud service in Visual Studio by using the publishing wizard.</span></span>

### <a name="to-create-a-cloud-service-by-using-visual-studio"></a><span data-ttu-id="ead98-113">使用 Visual Studio 建立雲端服務</span><span class="sxs-lookup"><span data-stu-id="ead98-113">To create a cloud service by using Visual Studio</span></span>
1. <span data-ttu-id="ead98-114">開啟 Azure 專案的捷徑功能表，然後選擇 [發佈] 。</span><span class="sxs-lookup"><span data-stu-id="ead98-114">Open the shortcut menu for the Azure project, and choose **Publish**.</span></span>

    ![VST_PublishMenu](./media/vs-azure-tools-cloud-service-publish-set-up-required-services-in-visual-studio/vst-publish-menu.png)
2. <span data-ttu-id="ead98-116">如果您尚未登入，請以您的使用者名稱和密碼登入 Microsoft 帳戶或與您的 Azure 訂用帳戶相關聯的組織帳戶。</span><span class="sxs-lookup"><span data-stu-id="ead98-116">If you haven't signed in, sign in with your username and password for the Microsoft account or organizational account that's associated with your Azure subscription.</span></span>
3. <span data-ttu-id="ead98-117">選擇 [下一步] 按鈕，前進到 [設定] 頁面。</span><span class="sxs-lookup"><span data-stu-id="ead98-117">Choose the **Next** button to advance to the **Settings** page.</span></span>

    ![發佈精靈一般設定](./media/vs-azure-tools-cloud-service-publish-set-up-required-services-in-visual-studio/publish-settings-page.png)
4. <span data-ttu-id="ead98-119">在 [雲端服務] 清單中，選擇 [建立新的]。</span><span class="sxs-lookup"><span data-stu-id="ead98-119">In the **Cloud Services** list, choose **Create New**.</span></span> <span data-ttu-id="ead98-120">[建立 Azure 服務]  對話方塊隨即出現。</span><span class="sxs-lookup"><span data-stu-id="ead98-120">The **Create Azure Services** dialog appears.</span></span>
5. <span data-ttu-id="ead98-121">輸入雲端服務的名稱。</span><span class="sxs-lookup"><span data-stu-id="ead98-121">Enter the name of your cloud service.</span></span> <span data-ttu-id="ead98-122">名稱是構成服務之 URL 的一部分，因此必須是全域唯一的。</span><span class="sxs-lookup"><span data-stu-id="ead98-122">The name forms part of the URL for your service and therefore must be globally unique.</span></span> <span data-ttu-id="ead98-123">名稱不區分大小寫。</span><span class="sxs-lookup"><span data-stu-id="ead98-123">The name is not case-sensitive.</span></span>

### <a name="to-create-a-cloud-service-by-using-the-azure-classic-portal"></a><span data-ttu-id="ead98-124">使用 Azure 傳統入口網站建立雲端服務</span><span class="sxs-lookup"><span data-stu-id="ead98-124">To create a cloud service by using the Azure classic portal</span></span>
1. <span data-ttu-id="ead98-125">登入 Microsoft 網站上的 [Azure 傳統入口網站](http://go.microsoft.com/fwlink/?LinkId=253103) 。</span><span class="sxs-lookup"><span data-stu-id="ead98-125">Sign in to the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkId=253103) on the Microsoft website.</span></span>
2. <span data-ttu-id="ead98-126">(選擇性) 若要顯示您已經建立的雲端服務清單，請選擇頁面左邊的雲端服務連結。</span><span class="sxs-lookup"><span data-stu-id="ead98-126">(optional) To display a list of cloud services that you've already created, choose the Cloud Services link on the left side of the page.</span></span>
3. <span data-ttu-id="ead98-127">選擇左下角的 **+** 圖示，然後在出現的功能表上選擇 [雲端服務]。</span><span class="sxs-lookup"><span data-stu-id="ead98-127">Choose the **+** icon in the lower-left corner, and then choose **Cloud Service** on the menu that appears.</span></span> <span data-ttu-id="ead98-128">有 [快速建立] 和 [自訂建立] 兩個選項的另一個畫面會隨即出現。</span><span class="sxs-lookup"><span data-stu-id="ead98-128">Another screen with two options, **Quick Create** and **Custom Create**, appears.</span></span> <span data-ttu-id="ead98-129">如果選擇 [快速建立]，便可藉由指定雲端服務的 URL 以及將實際裝載服務的區域，建立雲端服務。</span><span class="sxs-lookup"><span data-stu-id="ead98-129">If you choose **Quick Create**, you can create a cloud service just by specifying its URL and the region where it will be physically hosted.</span></span> <span data-ttu-id="ead98-130">如果選擇 [自訂建立]，則可藉由指定封裝 (.cspkg 檔)、組態 (.cscfg) 檔和憑證，立即發佈雲端服務。</span><span class="sxs-lookup"><span data-stu-id="ead98-130">If you choose **Custom Create**, you can immediately publish a cloud service by specifying a package (.cspkg file), a configuration (.cscfg) file, and a certificate.</span></span> <span data-ttu-id="ead98-131">如果您想要使用 Azure 專案中的**發佈**命令發佈您的雲端服務，就不需要選擇 [自訂建立]。</span><span class="sxs-lookup"><span data-stu-id="ead98-131">Custom Create isn’t required if you intend to publish your cloud service by using the **Publish** command in an Azure project.</span></span> <span data-ttu-id="ead98-132">您可在 Azure 專案的捷徑功能表上找到**發佈**命令。</span><span class="sxs-lookup"><span data-stu-id="ead98-132">The **Publish** command is available on the shortcut menu for an Azure project.</span></span>
4. <span data-ttu-id="ead98-133">選擇 [快速建立]  ，以便稍後使用 Visual Studio 發佈雲端服務。</span><span class="sxs-lookup"><span data-stu-id="ead98-133">Choose **Quick Create** to later publish your cloud service by using Visual Studio.</span></span>
5. <span data-ttu-id="ead98-134">指定雲端服務的名稱。</span><span class="sxs-lookup"><span data-stu-id="ead98-134">Specify a name for your cloud service.</span></span> <span data-ttu-id="ead98-135">完整的 URL 會出現在名稱旁邊。</span><span class="sxs-lookup"><span data-stu-id="ead98-135">The complete URL appears next to the name.</span></span>
6. <span data-ttu-id="ead98-136">在清單中，選擇大部分使用者所在的區域。</span><span class="sxs-lookup"><span data-stu-id="ead98-136">In the list, choose the region where most of your users are located.</span></span>
7. <span data-ttu-id="ead98-137">選擇視窗底部的 [建立雲端服務]  連結。</span><span class="sxs-lookup"><span data-stu-id="ead98-137">At the bottom of the window, choose the **Create Cloud Service** link.</span></span>

## <a name="create-a-storage-account"></a><span data-ttu-id="ead98-138">建立儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="ead98-138">Create a storage account</span></span>
<span data-ttu-id="ead98-139">儲存體帳戶會提供 Blob、佇列和表格服務等存取權。</span><span class="sxs-lookup"><span data-stu-id="ead98-139">A storage account provides access to the Blob, Queue, and Table services.</span></span> <span data-ttu-id="ead98-140">您可以使用 Visual Studio 或 [Azure 傳統入口網站](http://go.microsoft.com/fwlink/?LinkId=253103)建立儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="ead98-140">You can create a storage account by using Visual Studio or the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkId=253103).</span></span>

### <a name="to-create-a-storage-account-by-using-visual-studio"></a><span data-ttu-id="ead98-141">使用 Visual Studio 建立儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="ead98-141">To create a storage account by using Visual Studio</span></span>
1. <span data-ttu-id="ead98-142">在 [方案總管] 中，開啟**儲存體**節點的捷徑功能表，然後選擇 [建立儲存體帳戶]。</span><span class="sxs-lookup"><span data-stu-id="ead98-142">In **Solution Explorer**, open the shortcut menu for the **Storage** node, and then choose **Create Storage Account**.</span></span>

    ![建立新的 Azure 儲存體帳戶](./media/vs-azure-tools-cloud-service-publish-set-up-required-services-in-visual-studio/IC744166.png)
2. <span data-ttu-id="ead98-144">在 [建立儲存體帳戶]  對話方塊中選取或輸入新儲存體帳戶的下列資訊。</span><span class="sxs-lookup"><span data-stu-id="ead98-144">Select or enter the following information for the new storage account in the **Create Storage Account** dialog box.</span></span>

   * <span data-ttu-id="ead98-145">您要加入儲存體帳戶的 Azure 訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="ead98-145">The Azure subscription to which you want to add the storage account.</span></span>
   * <span data-ttu-id="ead98-146">您想要用於新儲存體帳戶的名稱。</span><span class="sxs-lookup"><span data-stu-id="ead98-146">The name you want to use for the new storage account.</span></span>
   * <span data-ttu-id="ead98-147">區域或同質群組 (例如美國西部或東亞)。</span><span class="sxs-lookup"><span data-stu-id="ead98-147">The region or affinity group (such as West US or East Asia).</span></span>
   * <span data-ttu-id="ead98-148">您要用於儲存體帳戶的複寫類型，例如異地備援。</span><span class="sxs-lookup"><span data-stu-id="ead98-148">The type of replication you want to use for the storage account, such as Geo-Redundant.</span></span>
3. <span data-ttu-id="ead98-149">完成後，選擇 [建立]。新的儲存體帳戶會出現在 [伺服器總管] 的 [儲存體] 清單中。</span><span class="sxs-lookup"><span data-stu-id="ead98-149">When you’re done, choose **Create**.The new storage account appears in the **Storage** list in **Server Explorer**.</span></span>

### <a name="to-create-a-storage-account-by-using-the-azure-classic-portal"></a><span data-ttu-id="ead98-150">使用 Azure 傳統入口網站建立儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="ead98-150">To create a storage account by using the Azure classic portal</span></span>
1. <span data-ttu-id="ead98-151">登入 Microsoft 網站上的 [Azure 傳統入口網站](http://go.microsoft.com/fwlink/?LinkId=253103) 。</span><span class="sxs-lookup"><span data-stu-id="ead98-151">Sign in to the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkId=253103) on the Microsoft website.</span></span>
2. <span data-ttu-id="ead98-152">(選擇性) 若要檢視您的儲存體帳戶，請選擇頁面左側面板中的 [儲存體]  連結。</span><span class="sxs-lookup"><span data-stu-id="ead98-152">(Optional) To view your storage accounts, choose the **Storage** link in the panel on the left side of the page.</span></span>
3. <span data-ttu-id="ead98-153">選擇頁面左下角的 **+** 圖示。</span><span class="sxs-lookup"><span data-stu-id="ead98-153">In the lower-left corner of the page, choose the **+** icon.</span></span>
4. <span data-ttu-id="ead98-154">在出現的功能表中，選擇 [儲存體]，然後選擇 [快速建立]。</span><span class="sxs-lookup"><span data-stu-id="ead98-154">In the menu that appears, choose **Storage**, and then choose **Quick Create**.</span></span>
5. <span data-ttu-id="ead98-155">提供儲存體帳戶將會產生唯一 url 的名稱。</span><span class="sxs-lookup"><span data-stu-id="ead98-155">Give the storage account a name that will result in a unique url.</span></span>
6. <span data-ttu-id="ead98-156">提供名稱給您的雲端服務。</span><span class="sxs-lookup"><span data-stu-id="ead98-156">Give your cloud service a name.</span></span> <span data-ttu-id="ead98-157">完整的 URL 會出現在名稱旁邊。</span><span class="sxs-lookup"><span data-stu-id="ead98-157">The complete URL appears next to the name.</span></span>
7. <span data-ttu-id="ead98-158">在區預清單中，選擇大部分使用者所在的區域。</span><span class="sxs-lookup"><span data-stu-id="ead98-158">In the list of regions, choose a region where most of your users are located.</span></span>
8. <span data-ttu-id="ead98-159">指定是否要啟用異地複寫。</span><span class="sxs-lookup"><span data-stu-id="ead98-159">Specify whether you want to enable geo-replication.</span></span> <span data-ttu-id="ead98-160">如果您啟用異地複寫，您的資料會儲存在多個實體位置，以降低遺失的可能性。</span><span class="sxs-lookup"><span data-stu-id="ead98-160">If you enable geo-replication, your data will be saved in multiple physical locations to reduce the chance of loss.</span></span> <span data-ttu-id="ead98-161">這項功能會讓儲存體更昂貴，但您可以藉由建立儲存體帳戶時 (而不是稍後新增此功能時) 啟用地理位置來降低成本。</span><span class="sxs-lookup"><span data-stu-id="ead98-161">This feature makes storage more expensive, but you can reduce the cost by enabling geo-location when you create the storage account instead of adding the feature later.</span></span> <span data-ttu-id="ead98-162">如需詳細資訊，請參閱 [異地複寫](http://go.microsoft.com/fwlink/?LinkId=253108)。</span><span class="sxs-lookup"><span data-stu-id="ead98-162">For more information, see [Geo-replication](http://go.microsoft.com/fwlink/?LinkId=253108).</span></span>
9. <span data-ttu-id="ead98-163">選擇視窗底部的 [建立儲存體帳戶]  連結。</span><span class="sxs-lookup"><span data-stu-id="ead98-163">At the bottom of the window, choose the **Create Storage Account** link.</span></span>

<span data-ttu-id="ead98-164">建立儲存體帳戶之後，您會看到可用來存取每個 Azure 儲存體服務中之資源的 URL，以及帳戶的主要和次要存取金鑰。</span><span class="sxs-lookup"><span data-stu-id="ead98-164">After you create your storage account, you will see the URLs that you can use to access resources in each of the Azure storage services, and also the primary and secondary access keys for your account.</span></span> <span data-ttu-id="ead98-165">您可以使用這些金鑰來驗證對儲存體服務提出的要求。</span><span class="sxs-lookup"><span data-stu-id="ead98-165">You use these keys to authenticate requests made against the storage services.</span></span>

> [!NOTE]
> <span data-ttu-id="ead98-166">次要存取金鑰提供和主要存取金鑰相同的儲存體帳戶存取權，並會在主要存取金鑰遭到入侵時產生做為備份。</span><span class="sxs-lookup"><span data-stu-id="ead98-166">The secondary access key provides the same access to your storage account as the primary access key and is generated as a backup should your primary access key be compromised.</span></span> <span data-ttu-id="ead98-167">此外，建議您定期重新產生存取金鑰。</span><span class="sxs-lookup"><span data-stu-id="ead98-167">Additionally, it is recommended that you regenerate your access keys on a regular basis.</span></span> <span data-ttu-id="ead98-168">您可以修改連接字串設定以在您重新產生主要金鑰時使用次要金鑰，然後您可以修改它以在重新產生次要金鑰時使用重新產生的主要金鑰。</span><span class="sxs-lookup"><span data-stu-id="ead98-168">You can modify a connection string setting to use the secondary key while you regenerate the primary key, then you can modify it to use the regenerated primary key while you regenerate the secondary key.</span></span>
>
>

## <a name="configure-your-app-to-use-services-provided-by-the-storage-account"></a><span data-ttu-id="ead98-169">設定您的應用程式以使用儲存體帳戶所提供的服務</span><span class="sxs-lookup"><span data-stu-id="ead98-169">Configure your app to use services provided by the storage account</span></span>
<span data-ttu-id="ead98-170">您必須設定任何存取儲存體服務的角色，以使用您已建立的 Azure 儲存體服務。</span><span class="sxs-lookup"><span data-stu-id="ead98-170">You must configure any role that accesses storage services to use the Azure storage services that you have created.</span></span> <span data-ttu-id="ead98-171">若要這樣做，您可以使用 Azure 專案的多個服務組態。</span><span class="sxs-lookup"><span data-stu-id="ead98-171">To do this, you can use multiple service configurations for your Azure project.</span></span> <span data-ttu-id="ead98-172">根據預設，兩者都會建立在您的 Azure 專案中。</span><span class="sxs-lookup"><span data-stu-id="ead98-172">By default, two are created in your Azure project.</span></span> <span data-ttu-id="ead98-173">藉由使用多個服務組態，您可以利用您的程式碼使用相同的連接字串，但在每個服務組態中會有不同的連接字串值。</span><span class="sxs-lookup"><span data-stu-id="ead98-173">By using multiple service configurations, you can use the same connection string in your code, but have a different value for a connection string in each service configuration.</span></span> <span data-ttu-id="ead98-174">例如，您可以使用服務組態在本機使用 Azure 儲存體模擬器和不同的服務組態來執行和偵錯您的應用程式，以將您的應用程式發佈到 Azure。</span><span class="sxs-lookup"><span data-stu-id="ead98-174">For example, you can use one service configuration to run and debug your application locally using the Azure storage emulator and a different service configuration to publish your application to Azure.</span></span> <span data-ttu-id="ead98-175">如需服務組態的詳細資訊，請參閱 [使用多個服務組態設定 Azure 專案](vs-azure-tools-multiple-services-project-configurations.md)。</span><span class="sxs-lookup"><span data-stu-id="ead98-175">For more information about service configurations, see [Configuring Your Azure Project Using Multiple Service Configurations](vs-azure-tools-multiple-services-project-configurations.md).</span></span>

### <a name="to-configure-your-application-to-use-services-that-the-storage-account-provides"></a><span data-ttu-id="ead98-176">設定您的應用程式以使用儲存體帳戶所提供的服務</span><span class="sxs-lookup"><span data-stu-id="ead98-176">To configure your application to use services that the storage account provides</span></span>
1. <span data-ttu-id="ead98-177">在 Visual Studio 中開啟您的 Azure 方案。</span><span class="sxs-lookup"><span data-stu-id="ead98-177">In Visual Studio open your Azure solution.</span></span> <span data-ttu-id="ead98-178">在 [方案總管] 中，開啟 Azure 專案中存取儲存體服務之每個角色的捷徑功能表，並選擇 [屬性] 。</span><span class="sxs-lookup"><span data-stu-id="ead98-178">In Solution Explorer, open the shortcut menu for each role in your Azure project that accesses the storage services and choose **Properties**.</span></span> <span data-ttu-id="ead98-179">在 Visual Studio 編輯器中會顯示具有角色名稱的頁面。</span><span class="sxs-lookup"><span data-stu-id="ead98-179">A page with the name of the role is displayed in the Visual Studio editor.</span></span> <span data-ttu-id="ead98-180">此頁面會顯示 [組態]  索引標籤的欄位。</span><span class="sxs-lookup"><span data-stu-id="ead98-180">The page displays the fields for the **Configuration** tab.</span></span>
2. <span data-ttu-id="ead98-181">在角色的屬性頁面中，選擇 [設定] 。</span><span class="sxs-lookup"><span data-stu-id="ead98-181">In the property pages for the role, choose **Settings**.</span></span>
3. <span data-ttu-id="ead98-182">在 [服務組態]  清單中，選擇您想要編輯的服務組態名稱。</span><span class="sxs-lookup"><span data-stu-id="ead98-182">In the **Service Configuration** list, choose the name of the service configuration that you want to edit.</span></span> <span data-ttu-id="ead98-183">如果您想要變更此角色的所有服務組態，您可以選擇 [所有組態] 。</span><span class="sxs-lookup"><span data-stu-id="ead98-183">If you want to make changes to all of the service configurations for this role, you can choose **All Configurations**.</span></span>  <span data-ttu-id="ead98-184">如需關於如何更新服務組態的詳細資訊，請參閱[使用 Visual Studio 設定 Azure 雲端服務的角色](vs-azure-tools-configure-roles-for-cloud-service.md)主題的**管理儲存體帳戶的連接字串**一節。</span><span class="sxs-lookup"><span data-stu-id="ead98-184">For more information about how to update service configurations, see the section **Manage Connection Strings for Storage Accounts** in the topic [Configure the Roles for an Azure Cloud Service with Visual Studio](vs-azure-tools-configure-roles-for-cloud-service.md).</span></span>
4. <span data-ttu-id="ead98-185">若要修改任何連接字串設定，請選擇設定旁邊的 [...] </span><span class="sxs-lookup"><span data-stu-id="ead98-185">To modify any connection string settings, choose the **…**</span></span> <span data-ttu-id="ead98-186">按鈕。</span><span class="sxs-lookup"><span data-stu-id="ead98-186">button next to the setting.</span></span> <span data-ttu-id="ead98-187">[建立儲存體連接字串]  對話方塊會隨即出現。</span><span class="sxs-lookup"><span data-stu-id="ead98-187">The **Create Storage Connection String** dialog box appears.</span></span>
5. <span data-ttu-id="ead98-188">在 [連接方式] 下，選擇 [您的訂用帳戶] 選項。</span><span class="sxs-lookup"><span data-stu-id="ead98-188">Under **Connect using**, choose the **Your subscription** option.</span></span>
6. <span data-ttu-id="ead98-189">在 [訂用帳戶]  清單中，選擇您的訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="ead98-189">In the **Subscription** list, choose your subscription.</span></span> <span data-ttu-id="ead98-190">如果訂用帳戶清單中沒有您想要的訂用帳戶，請選擇 [下載發佈設定]  連結。</span><span class="sxs-lookup"><span data-stu-id="ead98-190">If the list of subscriptions doesn't include the one that you want, choose the **Download Publish Settings** link.</span></span>
7. <span data-ttu-id="ead98-191">在 [帳戶名稱]  清單中，選擇您的儲存體帳戶名稱。</span><span class="sxs-lookup"><span data-stu-id="ead98-191">In the **Account name** list, choose your storage account name.</span></span> <span data-ttu-id="ead98-192">Azure Tools 會自動使用.publishsettings 檔案取得儲存體帳戶認證。</span><span class="sxs-lookup"><span data-stu-id="ead98-192">Azure Tools obtains storage account credentials automatically by using the .publishsettings file.</span></span> <span data-ttu-id="ead98-193">若要手動指定儲存體帳戶認證，請選擇 [手動輸入的認證]  選項，然後繼續此程序。</span><span class="sxs-lookup"><span data-stu-id="ead98-193">To specify your storage account credentials manually, choose the **Manually entered credentials** option, and then continue with this procedure.</span></span> <span data-ttu-id="ead98-194">您可以從 [Azure 傳統入口網站](http://go.microsoft.com/fwlink/p/?LinkID=213885)取得您的儲存體帳戶名稱和主要金鑰。</span><span class="sxs-lookup"><span data-stu-id="ead98-194">You can get your storage account name and primary key from the [Azure classic portal](http://go.microsoft.com/fwlink/p/?LinkID=213885).</span></span> <span data-ttu-id="ead98-195">如果您不想手動指定儲存體帳戶設定，請選擇 [確定]  按鈕以關閉對話方塊。</span><span class="sxs-lookup"><span data-stu-id="ead98-195">If you don’t want to specify your storage account settings manually, choose the **OK** button to close the dialog box.</span></span>
8. <span data-ttu-id="ead98-196">選擇 [輸入儲存體帳戶]  認證連結。</span><span class="sxs-lookup"><span data-stu-id="ead98-196">Choose the **Enter storage account** credentials link.</span></span>
9. <span data-ttu-id="ead98-197">在 [帳戶名稱]  方塊中，輸入您的儲存體帳戶名稱。</span><span class="sxs-lookup"><span data-stu-id="ead98-197">In the **Account name** box, enter the name of your storage account.</span></span>

   > [!NOTE]
   > <span data-ttu-id="ead98-198">登入 [Azure 傳統入口網站](http://go.microsoft.com/fwlink/?LinkID=213885)，然後選擇 [儲存體] 按鈕。</span><span class="sxs-lookup"><span data-stu-id="ead98-198">Log into the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), and then choose the **Storage** button.</span></span> <span data-ttu-id="ead98-199">入口網站會顯示儲存體帳戶的清單。</span><span class="sxs-lookup"><span data-stu-id="ead98-199">The portal shows a list of storage accounts.</span></span> <span data-ttu-id="ead98-200">如果您選擇帳戶，其頁面就會開啟。</span><span class="sxs-lookup"><span data-stu-id="ead98-200">If you choose an account, a page for it opens.</span></span> <span data-ttu-id="ead98-201">您可以從這個頁面複製儲存體帳戶的名稱。</span><span class="sxs-lookup"><span data-stu-id="ead98-201">You can copy the name of the storage account from this page.</span></span> <span data-ttu-id="ead98-202">如果您使用舊版傳統入口網站，儲存體帳戶的名稱會出現在 [儲存體帳戶]  檢視中。</span><span class="sxs-lookup"><span data-stu-id="ead98-202">If you are using a previous version of the classic portal, the name of your storage account appears in the **Storage Accounts** view.</span></span> <span data-ttu-id="ead98-203">若要複製這個名稱，請在該檢視的 [屬性]  視窗中將其反白顯示，然後選擇 Ctrl-C 鍵。</span><span class="sxs-lookup"><span data-stu-id="ead98-203">To copy this name, highlight it in the **Properties** window of this view, and then choose the Ctrl-C keys.</span></span> <span data-ttu-id="ead98-204">若要將名稱貼到 Visual Studio，請選擇 [帳戶名稱]  文字方塊，然後選擇 Ctrl+V 鍵。</span><span class="sxs-lookup"><span data-stu-id="ead98-204">To paste the name into Visual Studio, choose the **Account name** text box, and then choose the Ctrl+V keys.</span></span>
   >
   >
10. <span data-ttu-id="ead98-205">在 [帳戶金鑰]  方塊中，輸入您的主要金鑰，或從 [Azure 傳統入口網站](http://go.microsoft.com/fwlink/?LinkID=213885)將其複製並貼上。</span><span class="sxs-lookup"><span data-stu-id="ead98-205">In the **Account key** box, enter your primary key, or copy and paste it from the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885).</span></span>
     <span data-ttu-id="ead98-206">若要複製此金鑰︰</span><span class="sxs-lookup"><span data-stu-id="ead98-206">To copy this key:</span></span>

    1. <span data-ttu-id="ead98-207">在適當儲存體帳戶的頁面底部，選擇 [管理金鑰]  按鈕。</span><span class="sxs-lookup"><span data-stu-id="ead98-207">At the bottom of the page for the appropriate storage account, choose the **Manage Keys** button.</span></span>
    2. <span data-ttu-id="ead98-208">在 [管理存取金鑰]  頁面上，選取主要存取金鑰的文字，然後選擇 Ctrl+C 鍵。</span><span class="sxs-lookup"><span data-stu-id="ead98-208">On the **Manage Keys Access** page, select the text of the primary access key, and then choose the Ctrl+C keys.</span></span>
    3. <span data-ttu-id="ead98-209">在 Azure Tools 中，將金鑰貼到 [帳戶金鑰]  方塊中。</span><span class="sxs-lookup"><span data-stu-id="ead98-209">In Azure Tools, paste the key into the **Account key** box.</span></span>
    4. <span data-ttu-id="ead98-210">您必須選取下列選項之一來決定服務存取儲存體帳戶的方式：</span><span class="sxs-lookup"><span data-stu-id="ead98-210">You must select one of the following options to determine how the service will access the storage account:</span></span>

       * <span data-ttu-id="ead98-211">**使用 HTTP**。</span><span class="sxs-lookup"><span data-stu-id="ead98-211">**Use HTTP**.</span></span> <span data-ttu-id="ead98-212">這是標準選項。</span><span class="sxs-lookup"><span data-stu-id="ead98-212">This is the standard option.</span></span> <span data-ttu-id="ead98-213">例如， `http://<account name>.blob.core.windows.net`。</span><span class="sxs-lookup"><span data-stu-id="ead98-213">For example, `http://<account name>.blob.core.windows.net`.</span></span>
       * <span data-ttu-id="ead98-214">**使用 HTTPS** ，以確保連線安全無虞。</span><span class="sxs-lookup"><span data-stu-id="ead98-214">**Use HTTPS** for a secure connection.</span></span> <span data-ttu-id="ead98-215">例如， `https://<accountname>.blob.core.windows.net`。</span><span class="sxs-lookup"><span data-stu-id="ead98-215">For example, `https://<accountname>.blob.core.windows.net`.</span></span>
       * <span data-ttu-id="ead98-216">**指定自訂端點** 。</span><span class="sxs-lookup"><span data-stu-id="ead98-216">**Specify custom endpoints** for each of the three services.</span></span> <span data-ttu-id="ead98-217">然後您可以將這些端點輸入特定服務的欄位。</span><span class="sxs-lookup"><span data-stu-id="ead98-217">You can then type these endpoints into the field for the specific service.</span></span>

         > [!NOTE]
         > <span data-ttu-id="ead98-218">如果您建立自訂端點，您可以建立更複雜的連接字串。</span><span class="sxs-lookup"><span data-stu-id="ead98-218">If you create custom endpoints, you can create a more complex connection string.</span></span> <span data-ttu-id="ead98-219">當您使用這個字串格式，您可以指定儲存體服務端點，其包含您向 Blob 服務註冊儲存體帳戶的自訂網域名稱。</span><span class="sxs-lookup"><span data-stu-id="ead98-219">When you use this string format, you can specify storage service endpoints that include a custom domain name that you have registered for your storage account with the Blob service.</span></span> <span data-ttu-id="ead98-220">您也可以透過共用的存取簽章，只在單一容器中授與 blob 資源的存取權。</span><span class="sxs-lookup"><span data-stu-id="ead98-220">Also you can grant access only to blob resources in a single container through a shared access signature.</span></span> <span data-ttu-id="ead98-221">如需關於如何建立自訂端點的詳細資訊，請參閱 [設定 Azure 儲存體連接字串](storage/common/storage-configure-connection-string.md)。</span><span class="sxs-lookup"><span data-stu-id="ead98-221">For more information about how to create custom endpoints, see [Configure Azure Storage Connection Strings](storage/common/storage-configure-connection-string.md).</span></span>
         >
         >
11. <span data-ttu-id="ead98-222">若要儲存這些連接字串的變更，請選擇 [確定] 按鈕，然後選擇工具列上的 [儲存] 按鈕。</span><span class="sxs-lookup"><span data-stu-id="ead98-222">To save these connection string changes, choose the **OK** button and then choose the **Save** button on the toolbar.</span></span> <span data-ttu-id="ead98-223">儲存這些變更後，您可以使用 [GetConfigurationSettingValue](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleenvironment.getconfigurationsettingvalue.aspx)，在程式碼中取得這個連接字串的值。</span><span class="sxs-lookup"><span data-stu-id="ead98-223">After you save these changes, you can get the value of this connection string in your code by using [GetConfigurationSettingValue](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleenvironment.getconfigurationsettingvalue.aspx).</span></span> <span data-ttu-id="ead98-224">當您將應用程式發佈至 Azure 時，請選擇包含連接字串之 Azure 儲存體帳戶的服務組態。</span><span class="sxs-lookup"><span data-stu-id="ead98-224">When you publish your application to Azure, choose the service configuration that contains the Azure storage account for the connection string.</span></span> <span data-ttu-id="ead98-225">發佈您的應用程式之後，請確認應用程式如預期般對 Azure 儲存體服務運作</span><span class="sxs-lookup"><span data-stu-id="ead98-225">After your application is published, verify that the application works as expected against the Azure storage services</span></span>

## <a name="next-steps"></a><span data-ttu-id="ead98-226">後續步驟</span><span class="sxs-lookup"><span data-stu-id="ead98-226">Next steps</span></span>
<span data-ttu-id="ead98-227">若要深入了解如何將應用程式從 Visual Studio 發佈至 Azure，請參閱 [使用 Azure Tools 發佈雲端服務](vs-azure-tools-publishing-a-cloud-service.md)。</span><span class="sxs-lookup"><span data-stu-id="ead98-227">To learn more about publishing apps to Azure from Visual Studio, see [Publishing a Cloud Service using the Azure Tools](vs-azure-tools-publishing-a-cloud-service.md).</span></span>
