---
title: "aaaProvision 和部署在 Azure 中如預期般 microservices"
description: "了解 microservices 當做單一單位的 Azure App Service 中，並使用 JSON 資源群組範本和 PowerShell 指令碼的方式可預測的 toodeploy 應用程式的組成方式。"
services: app-service
documentationcenter: 
author: cephalin
manager: erikre
editor: jimbe
ms.assetid: bb51e565-e462-4c60-929a-2ff90121f41d
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/06/2016
ms.author: cephalin
ms.openlocfilehash: d32c2fc82a8b09e89224ec437e5819b65b2e9e78
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="provision-and-deploy-microservices-predictably-in-azure"></a><span data-ttu-id="2cfcd-103">透過可預測方式在 Azure 中佈建和部署微服務</span><span class="sxs-lookup"><span data-stu-id="2cfcd-103">Provision and deploy microservices predictably in Azure</span></span>
<span data-ttu-id="2cfcd-104">本教學課程示範如何 tooprovision 及部署應用程式組成[microservices](https://en.wikipedia.org/wiki/Microservices)中[Azure App Service](/services/app-service/)當做單一單位和可預測的方式使用 JSON 資源群組範本和PowerShell 指令碼。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-104">This tutorial shows how tooprovision and deploy an application composed of [microservices](https://en.wikipedia.org/wiki/Microservices) in [Azure App Service](/services/app-service/) as a single unit and in a predictable manner using JSON resource group templates and PowerShell scripting.</span></span> 

<span data-ttu-id="2cfcd-105">當佈建，部署高階應用程式所組成的高度分離 microservices 重複性和可預測性是重要 toosuccess。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-105">When provisioning and deploying high-scale applications that are composed of highly decoupled microservices, repeatability and predictability are crucial toosuccess.</span></span> <span data-ttu-id="2cfcd-106">[Azure App Service](/services/app-service/)可讓您 toocreate microservices 包含 web 應用程式、 行動裝置應用程式、 應用程式開發介面應用程式，以及邏輯應用程式。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-106">[Azure App Service](/services/app-service/) enables you toocreate microservices that include web apps, mobile apps, API apps, and logic apps.</span></span> <span data-ttu-id="2cfcd-107">[Azure 資源管理員](../azure-resource-manager/resource-group-overview.md)可讓您 toomanage 所有 hello microservices 為一個單位，以及資源相依性，例如資料庫和原始檔控制設定。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-107">[Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) enables you toomanage all hello microservices as a unit, together with resource dependencies such as database and source control settings.</span></span> <span data-ttu-id="2cfcd-108">現在，您也可以使用 JSON 範本和簡單 PowerShell 指令碼來部署這類應用程式。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-108">Now, you can also deploy such an application using JSON templates and simple PowerShell scripting.</span></span> 

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="what-you-will-do"></a><span data-ttu-id="2cfcd-109">將執行的作業</span><span class="sxs-lookup"><span data-stu-id="2cfcd-109">What you will do</span></span>
<span data-ttu-id="2cfcd-110">在 hello 教學課程中，您將部署的應用程式，包括：</span><span class="sxs-lookup"><span data-stu-id="2cfcd-110">In hello tutorial, you will deploy an application that includes:</span></span>

* <span data-ttu-id="2cfcd-111">兩個 Web 應用程式 (即兩個微服務)</span><span class="sxs-lookup"><span data-stu-id="2cfcd-111">Two web apps (i.e. two microservices)</span></span>
* <span data-ttu-id="2cfcd-112">後端 SQL Database</span><span class="sxs-lookup"><span data-stu-id="2cfcd-112">A backend SQL Database</span></span>
* <span data-ttu-id="2cfcd-113">應用程式設定、連接字串和原始檔控制</span><span class="sxs-lookup"><span data-stu-id="2cfcd-113">App settings, connection strings, and source control</span></span>
* <span data-ttu-id="2cfcd-114">Application insights、警示、自動調整設定</span><span class="sxs-lookup"><span data-stu-id="2cfcd-114">Application insights, alerts, autoscaling settings</span></span>

## <a name="tools-you-will-use"></a><span data-ttu-id="2cfcd-115">將使用的工具</span><span class="sxs-lookup"><span data-stu-id="2cfcd-115">Tools you will use</span></span>
<span data-ttu-id="2cfcd-116">在本教學課程中，您將使用下列工具 hello。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-116">In this tutorial, you will use hello following tools.</span></span> <span data-ttu-id="2cfcd-117">因為它不是工具的完整討論，我即將 toostick toohello 端對端案例，並只需要為您提供簡短的簡介 tooeach，而且您可以在其中找到更多有關。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-117">Since it’s not comprehensive discussion on tools, I’m going toostick toohello end-to-end scenario and just give you a brief intro tooeach, and where you can find more information on it.</span></span> 

### <a name="azure-resource-manager-templates-json"></a><span data-ttu-id="2cfcd-118">Azure 資源管理員範本 (JSON)</span><span class="sxs-lookup"><span data-stu-id="2cfcd-118">Azure Resource Manager templates (JSON)</span></span>
<span data-ttu-id="2cfcd-119">每次您在 Azure App Service 中建立 web 應用程式，例如，Azure 資源管理員會使用 JSON 範本 toocreate hello 整個資源群組與 hello 元件資源。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-119">Every time you create a web app in Azure App Service, for example, Azure Resource Manager uses a JSON template toocreate hello entire resource group with hello component resources.</span></span> <span data-ttu-id="2cfcd-120">複雜的範本，從 hello [Azure Marketplace](/marketplace)像 hello[可擴充 WordPress](/marketplace/partners/wordpress/scalablewordpress/) hello MySQL 資料庫，儲存體帳戶、 hello 應用程式服務方案、 hello web 應用程式本身、 警示規則，應用程式，可以包含應用程式設定、 自動調整規模設定，以及詳細，和所有這些範本是透過 PowerShell 可用 tooyou。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-120">A complex template from hello [Azure Marketplace](/marketplace) like hello [Scalable WordPress](/marketplace/partners/wordpress/scalablewordpress/) app can include hello MySQL database, storage accounts, hello App Service plan, hello web app itself, alert rules, app settings, autoscale settings, and more, and all these templates are available tooyou through PowerShell.</span></span> <span data-ttu-id="2cfcd-121">如需有關如何 toodownload 以及使用這些範本，請參閱詳細[使用 Azure PowerShell 的 Azure Resource Manager](../powershell-azure-resource-manager.md)。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-121">For information on how toodownload and use these templates, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md).</span></span>

<span data-ttu-id="2cfcd-122">如需有關 hello Azure Resource Manager 範本的詳細資訊，請參閱[撰寫 Azure 資源管理員範本](../azure-resource-manager/resource-group-authoring-templates.md)</span><span class="sxs-lookup"><span data-stu-id="2cfcd-122">For more information on hello Azure Resource Manager templates, see [Authoring Azure Resource Manager Templates](../azure-resource-manager/resource-group-authoring-templates.md)</span></span>

### <a name="azure-sdk-26-for-visual-studio"></a><span data-ttu-id="2cfcd-123">Azure SDK 2.6 for Visual Studio</span><span class="sxs-lookup"><span data-stu-id="2cfcd-123">Azure SDK 2.6 for Visual Studio</span></span>
<span data-ttu-id="2cfcd-124">hello 最新 SDK 包含改良 toohello hello JSON 編輯器中的資源管理員範本支援。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-124">hello newest SDK contains improvements toohello Resource Manager template support in hello JSON editor.</span></span> <span data-ttu-id="2cfcd-125">您可以使用這個 tooquickly 從頭開始建立資源群組範本或開啟現有 JSON 範本 （例如下載組件庫範本） 進行修改並填入 hello 參數檔案，以及如何即使部署直接從 Azure 的 hello 資源群組資源群組的方案。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-125">You can use this tooquickly create a resource group template from scratch or open an existing JSON template (such as a downloaded gallery template) for modification, populate hello parameters file, and even deploy hello resource group directly from an Azure Resource Group solution.</span></span>

<span data-ttu-id="2cfcd-126">如需詳細資訊，請參閱 [Azure SDK 2.6 for Visual Studio](https://azure.microsoft.com/blog/2015/04/29/announcing-the-azure-sdk-2-6-for-net/)。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-126">For more information, see [Azure SDK 2.6 for Visual Studio](https://azure.microsoft.com/blog/2015/04/29/announcing-the-azure-sdk-2-6-for-net/).</span></span>

### <a name="azure-powershell-080-or-later"></a><span data-ttu-id="2cfcd-127">Azure PowerShell 0.8.0 或更新版本</span><span class="sxs-lookup"><span data-stu-id="2cfcd-127">Azure PowerShell 0.8.0 or later</span></span>
<span data-ttu-id="2cfcd-128">Hello Azure PowerShell 安裝從 0.8.0 版開始，加法 toohello Azure 模組中包含 hello Azure 資源管理員模組。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-128">Beginning in version 0.8.0, hello Azure PowerShell installation includes hello Azure Resource Manager module in addition toohello Azure module.</span></span> <span data-ttu-id="2cfcd-129">這個新模組可讓您 tooscript hello 部署的資源群組。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-129">This new module enables you tooscript hello deployment of resource groups.</span></span>

<span data-ttu-id="2cfcd-130">如需詳細資訊，請參閱 [搭配使用 Azure PowerShell 與 Azure 資源管理員](../powershell-azure-resource-manager.md)</span><span class="sxs-lookup"><span data-stu-id="2cfcd-130">For more information, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md)</span></span>

### <a name="azure-resource-explorer"></a><span data-ttu-id="2cfcd-131">Azure 資源總管</span><span class="sxs-lookup"><span data-stu-id="2cfcd-131">Azure Resource Explorer</span></span>
<span data-ttu-id="2cfcd-132">這[預覽工具](https://resources.azure.com)可讓您 tooexplore hello JSON 定義中您的訂用帳戶和 hello 個別資源的所有 hello 資源群組。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-132">This [preview tool](https://resources.azure.com) enables you tooexplore hello JSON definitions of all hello resource groups in your subscription and hello individual resources.</span></span> <span data-ttu-id="2cfcd-133">在 hello 工具中，您可以編輯 hello JSON 定義的資源、 刪除整個階層的資源，並建立新的資源。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-133">In hello tool, you can edit hello JSON definitions of a resource, delete an entire hierarchy of resources, and create new resources.</span></span>  <span data-ttu-id="2cfcd-134">hello 資訊都可以使用此工具是非常有幫助範本撰寫，因為它會顯示您所需 tooset 的特定類型的資源，hello 屬性更正值等等。您甚至可以建立資源群組中 hello [Azure 入口網站](https://portal.azure.com/)，然後檢查其 JSON 定義中 hello 總管工具 toohelp 您能樣版化 hello 資源群組。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-134">hello information readily available in this tool is very helpful for template authoring because it shows you what properties you need tooset for a particular type of resource, hello correct values, etc. You can even create your resource group in hello [Azure Portal](https://portal.azure.com/), then inspect its JSON definitions in hello explorer tool toohelp you templatize hello resource group.</span></span>

### <a name="deploy-tooazure-button"></a><span data-ttu-id="2cfcd-135">部署 tooAzure 按鈕</span><span class="sxs-lookup"><span data-stu-id="2cfcd-135">Deploy tooAzure button</span></span>
<span data-ttu-id="2cfcd-136">如果您將 GitHub 用於原始檔控制時，您可以將[部署 tooAzure 按鈕](https://azure.microsoft.com/blog/2014/11/13/deploy-to-azure-button-for-azure-websites-2/)到您的讀我檔案。MD 中，可讓部署周全 UI tooAzure。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-136">If you use GitHub for source control, you can put a [Deploy tooAzure button](https://azure.microsoft.com/blog/2014/11/13/deploy-to-azure-button-for-azure-websites-2/) into your README.MD, which enables a turn-key deployment UI tooAzure.</span></span> <span data-ttu-id="2cfcd-137">雖然您可以針對任何簡單的 web 應用程式，您可以擴充此 tooenable 部署將 azuredeploy.json 檔案放在 hello 儲存機制的根目錄中整個資源群組。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-137">While you can do this for any simple web app, you can extend this tooenable deploying an entire resource group by putting an azuredeploy.json file in hello repository root.</span></span> <span data-ttu-id="2cfcd-138">此 JSON 檔案，其中包含 hello 資源群組範本，將供 hello 部署 tooAzure 按鈕 toocreate hello 資源群組。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-138">This JSON file, which contains hello resource group template, will be used by hello Deploy tooAzure button toocreate hello resource group.</span></span> <span data-ttu-id="2cfcd-139">如需範例，請參閱 hello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp)範例中，您將在本教學課程中使用。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-139">For an example, see hello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) sample, which you will use in this tutorial.</span></span>

## <a name="get-hello-sample-resource-group-template"></a><span data-ttu-id="2cfcd-140">取得 hello 範例資源群組範本</span><span class="sxs-lookup"><span data-stu-id="2cfcd-140">Get hello sample resource group template</span></span>
<span data-ttu-id="2cfcd-141">因此，現在讓我們取得右 tooit。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-141">So now let’s get right tooit.</span></span>

1. <span data-ttu-id="2cfcd-142">瀏覽 toohello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp)應用程式服務範例。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-142">Navigate toohello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) App Service sample.</span></span>
2. <span data-ttu-id="2cfcd-143">在 readme.md，按一下 **部署 tooAzure**。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-143">In readme.md, click **Deploy tooAzure**.</span></span>
3. <span data-ttu-id="2cfcd-144">您正在進入 toohello[部署至 azure](https://deploy.azure.com)站台和問的 tooinput 部署參數。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-144">You’re taken toohello [deploy-to-azure](https://deploy.azure.com) site and asked tooinput deployment parameters.</span></span> <span data-ttu-id="2cfcd-145">請注意，大部分的 hello 欄位會針對您填入 hello 儲存機制名稱與某些隨機字串。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-145">Notice that most of hello fields are populated with hello repository name and some random strings for you.</span></span> <span data-ttu-id="2cfcd-146">如果您想，但 hello 唯一項目有 tooenter hello SQL Server 系統管理員登入和 hello 密碼，然後按一下，您可以變更所有 hello 欄位**下一步**。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-146">You can change all hello fields if you want, but hello only things you have tooenter are hello SQL Server administrative login and hello password, then click **Next**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-1-deploybuttonui.png)
4. <span data-ttu-id="2cfcd-147">接下來，按一下**部署**toostart hello 部署程序。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-147">Next, click **Deploy** toostart hello deployment process.</span></span> <span data-ttu-id="2cfcd-148">一旦執行 toocompletion hello 處理序，按一下 hello http://todoapp*XXXX*。 名稱是.azurewebsites.net 連結 toobrowse hello 部署應用程式。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-148">Once hello process runs toocompletion, click hello http://todoapp*XXXX*.azurewebsites.net link toobrowse hello deployed application.</span></span> 
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-2-deployprogress.png)
   
   <span data-ttu-id="2cfcd-149">當您第一次瀏覽 tooit 因為 hello 應用程式剛開始，但說服自己是完整功能的應用程式，會比較慢 hello UI。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-149">hello UI would be a little slow when you first browse tooit because hello apps are just starting up, but convince yourself that it’s a fully-functional application.</span></span>
5. <span data-ttu-id="2cfcd-150">在 hello 部署 頁面上，按一下 hello**管理**連結 toosee hello 新的應用程式在 hello Azure 入口網站中。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-150">Back in hello Deploy page, click hello **Manage** link toosee hello new application in hello Azure Portal.</span></span>
6. <span data-ttu-id="2cfcd-151">在 hello **Essentials**下拉式清單中，按一下 hello 資源群組的連結。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-151">In hello **Essentials** dropdown, click hello resource group link.</span></span> <span data-ttu-id="2cfcd-152">請注意該 hello web 應用程式也是已連接下的 toohello GitHub 儲存機制**外部專案**。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-152">Note also that hello web app is already connected toohello GitHub repository under **External Project**.</span></span> 
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-3-portalresourcegroup.png)
7. <span data-ttu-id="2cfcd-153">在 hello 資源群組 刀鋒視窗，請注意，已經有兩個 web 應用程式和 hello 資源群組中的一個 SQL 資料庫。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-153">In hello resource group blade, note that there are already two web apps and one SQL Database in hello resource group.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-4-portalresourcegroupclicked.png)

<span data-ttu-id="2cfcd-154">所有項目，您只看到幾分鐘的時間短完整部署的兩個微服務應用程式，與所有 hello 元件、 相依性、 設定、 資料庫和持續的發行設定的設定自動化的協調流程在 Azure 資源管理員。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-154">Everything that you just saw in a few short minutes is a fully deployed two-microservice application, with all hello components, dependencies, settings, database, and continuous publishing, set up by an automated orchestration in Azure Resource Manager.</span></span> <span data-ttu-id="2cfcd-155">這項作業是透過兩件事完成：</span><span class="sxs-lookup"><span data-stu-id="2cfcd-155">All this was done by two things:</span></span>

* <span data-ttu-id="2cfcd-156">hello 部署 tooAzure 按鈕</span><span class="sxs-lookup"><span data-stu-id="2cfcd-156">hello Deploy tooAzure button</span></span>
* <span data-ttu-id="2cfcd-157">在 hello 儲存機制根 azuredeploy.json</span><span class="sxs-lookup"><span data-stu-id="2cfcd-157">azuredeploy.json in hello repo root</span></span>

<span data-ttu-id="2cfcd-158">您可以部署此相同的應用程式數十、 數百或數千次，而且有 hello 完全相同的設定每次。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-158">You can deploy this same application tens, hundreds, or thousands of times and have hello exact same configuration every time.</span></span> <span data-ttu-id="2cfcd-159">hello 重複性和 hello 可預測性這種方法可讓您 toodeploy 高延展的應用程式輕鬆而信心。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-159">hello repeatability and hello predictability of this approach enables you toodeploy high-scale applications with ease and confidence.</span></span>

## <a name="examine-or-edit-azuredeployjson"></a><span data-ttu-id="2cfcd-160">檢查 (或編輯) AZUREDEPLOY.JSON</span><span class="sxs-lookup"><span data-stu-id="2cfcd-160">Examine (or edit) AZUREDEPLOY.JSON</span></span>
<span data-ttu-id="2cfcd-161">現在讓我們看看 hello GitHub 儲存機制已設定。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-161">Now let’s look at how hello GitHub repository was set up.</span></span> <span data-ttu-id="2cfcd-162">您將會使用 hello JSON 編輯器在 hello Azure.NET SDK，因此，如果您尚未安裝[Azure.NET SDK 2.6](/downloads/)，立即執行它的作業。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-162">You will be using hello JSON editor in hello Azure .NET SDK, so if you haven’t already installed [Azure .NET SDK 2.6](/downloads/), do it now.</span></span>

1. <span data-ttu-id="2cfcd-163">複製 hello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp)儲存機制使用您最愛的 git 工具。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-163">Clone hello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) repository using your favorite git tool.</span></span> <span data-ttu-id="2cfcd-164">在 hello 以下螢幕擷取畫面，我現在做這 hello Visual Studio 2013 中的 Team Explorer 中。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-164">In hello screenshot below, I’m doing this in hello Team Explorer in Visual Studio 2013.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/examinejson-1-vsclone.png)
2. <span data-ttu-id="2cfcd-165">從 hello 儲存機制的根目錄，請在 Visual Studio 中開啟 azuredeploy.json。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-165">From hello repository root, open azuredeploy.json in Visual Studio.</span></span> <span data-ttu-id="2cfcd-166">如果您沒有看到 hello JSON 大綱 窗格，您會需要 tooinstall Azure.NET SDK。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-166">If you don’t see hello JSON Outline pane, you need tooinstall Azure .NET SDK.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/examinejson-2-vsjsoneditor.png)

<span data-ttu-id="2cfcd-167">我在未進行 toodescribe 的 hello JSON 格式，每個詳細資料，但 hello[更資源](#resources)區段具有學習 hello 資源群組範本語言的連結。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-167">I’m not going toodescribe every detail of hello JSON format, but hello [More Resources](#resources) section has links for learning hello resource group template language.</span></span> <span data-ttu-id="2cfcd-168">在這裡，我將的 tooshow 您 hello 有趣的功能，可協助您開始進行您自己自訂的範本，應用程式部署。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-168">Here, I’m just going tooshow you hello interesting features that can help you get started in making your own custom template for app deployment.</span></span>

### <a name="parameters"></a><span data-ttu-id="2cfcd-169">參數</span><span class="sxs-lookup"><span data-stu-id="2cfcd-169">Parameters</span></span>
<span data-ttu-id="2cfcd-170">看看 hello 參數區段 toosee 大部分的這些參數是何種 hello**部署 tooAzure**按鈕會提示您 tooinput。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-170">Take a look at hello parameters section toosee that most of these parameters are what hello **Deploy tooAzure** button prompts you tooinput.</span></span> <span data-ttu-id="2cfcd-171">hello hello 背後的站台**部署 tooAzure**按鈕會填入 hello 輸入 UI 使用 azuredeploy.json 中定義的 hello 參數。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-171">hello site behind hello **Deploy tooAzure** button populates hello input UI using hello parameters defined in azuredeploy.json.</span></span> <span data-ttu-id="2cfcd-172">這些參數會使用整個 hello 資源定義，例如資源名稱、 屬性值等等。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-172">These parameters are used throughout hello resource definitions, such as resource names, property values, etc.</span></span>

### <a name="resources"></a><span data-ttu-id="2cfcd-173">資源</span><span class="sxs-lookup"><span data-stu-id="2cfcd-173">Resources</span></span>
<span data-ttu-id="2cfcd-174">在 hello 資源 節點，您可以看到定義 4 個最上層資源，包括 SQL Server 執行個體、 App Service 方案，以及兩個 web 應用程式。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-174">In hello resources node, you can see that 4 top-level resources are defined, including a SQL Server instance, an App Service plan, and two web apps.</span></span> 

#### <a name="app-service-plan"></a><span data-ttu-id="2cfcd-175">App Service 方案</span><span class="sxs-lookup"><span data-stu-id="2cfcd-175">App Service plan</span></span>
<span data-ttu-id="2cfcd-176">讓我們開始與 hello JSON 中的簡單根層級資源。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-176">Let’s start with a simple root-level resource in hello JSON.</span></span> <span data-ttu-id="2cfcd-177">在 hello JSON 大綱中，按一下 hello App Service 方案名稱為**[hostingPlanName]** toohighlight hello JSON 對應的程式碼。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-177">In hello JSON Outline, click hello App Service plan named **[hostingPlanName]** toohighlight hello corresponding JSON code.</span></span> 

![](./media/app-service-deploy-complex-application-predictably/examinejson-3-appserviceplan.png)

<span data-ttu-id="2cfcd-178">請注意該 hello`type`項目會指定應用程式服務方案 （呼叫伺服器陣列前 long、 長時間），hello 字串和其他項目和屬性會填入使用 hello 參數，定義在 hello JSON 檔案中，此資源不會有任何巢狀的資源。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-178">Note that hello `type` element specifies hello string for an App Service plan (it was called a server farm a long, long time ago), and other elements and properties are filled in using hello parameters defined in hello JSON file, and this resource doesn’t have any nested resources.</span></span>

> [!NOTE]
> <span data-ttu-id="2cfcd-179">也請注意 hello 該值的`apiVersion`會告訴的 Azure hello REST API toouse hello JSON 資源定義，和它的版本可能會影響您如何格式化 hello 資源內 hello `{}`。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-179">Note also that hello value of `apiVersion` tells Azure which version of hello REST API toouse hello JSON resource definition with, and it can affect how hello resource should be formatted inside hello `{}`.</span></span> 
> 
> 

#### <a name="sql-server"></a><span data-ttu-id="2cfcd-180">SQL Server</span><span class="sxs-lookup"><span data-stu-id="2cfcd-180">SQL Server</span></span>
<span data-ttu-id="2cfcd-181">接下來，名為 hello SQL Server 資源上按一下**SQLServer** hello JSON 大綱中。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-181">Next, click on hello SQL Server resource named **SQLServer** in hello JSON Outline.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-4-sqlserver.png)

<span data-ttu-id="2cfcd-182">下列關於 hello 注意 hello 反白顯示 JSON 程式碼：</span><span class="sxs-lookup"><span data-stu-id="2cfcd-182">Note hello following about hello highlighted JSON code:</span></span>

* <span data-ttu-id="2cfcd-183">hello 使用參數可確保會命名為和設定，使其與另一個一致的方式建立 hello 資源。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-183">hello use of parameters ensures that hello created resources are named and configured in a way that makes them consistent with one another.</span></span>
* <span data-ttu-id="2cfcd-184">hello SQLServer 資源有兩個巢狀的資源，各有不同的值`type`。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-184">hello SQLServer resource has two nested resources, each has a different value for `type`.</span></span>
* <span data-ttu-id="2cfcd-185">hello 巢狀內部資源`“resources”: […]`、 定義 hello 資料庫和 hello 防火牆規則、 擁有`dependsOn`指定 hello hello 根層級之 sql Server 資源的資源識別碼的項目。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-185">hello nested resources inside `“resources”: […]`, where hello database and hello firewall rules are defined, have a `dependsOn` element that specifies hello resource ID of hello root-level SQLServer resource.</span></span> <span data-ttu-id="2cfcd-186">這會告訴 Azure 資源管理員 中，"才能建立此資源的其他資源必須已經存在。如果 hello 範本中定義的其他資源，然後建立一個第一次 」。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-186">This tells Azure Resource Manager, “before you create this resource, that other resource must already exist; and if that other resource is defined in hello template, then create that one first”.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="2cfcd-187">如需詳細資訊 toouse hello`resourceId()`函式，請參閱[Azure 資源管理員範本函式](../azure-resource-manager/resource-group-template-functions-resource.md#resourceid)。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-187">For detailed information on how toouse hello `resourceId()` function, see [Azure Resource Manager Template Functions](../azure-resource-manager/resource-group-template-functions-resource.md#resourceid).</span></span>
  > 
  > 
* <span data-ttu-id="2cfcd-188">hello 的 hello 效果`dependsOn`項目，則可以平行建立哪些資源，而且必須依序建立哪些資源，就可以知道 Azure 資源管理員。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-188">hello effect of hello `dependsOn` element is that Azure Resource Manager can know which resources can be created in parallel and which resources must be created sequentially.</span></span> 

#### <a name="web-app"></a><span data-ttu-id="2cfcd-189">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="2cfcd-189">Web app</span></span>
<span data-ttu-id="2cfcd-190">現在，讓我們前進 toohello 實際的 web 應用程式本身，也就是更複雜。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-190">Now, let’s move on toohello actual web apps themselves, which are more complicated.</span></span> <span data-ttu-id="2cfcd-191">按一下 [variables('apiSiteName')] hello web 應用程式在 hello JSON 大綱 toohighlight 其 JSON 程式碼。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-191">Click hello [variables(‘apiSiteName’)] web app in hello JSON Outline toohighlight its JSON code.</span></span> <span data-ttu-id="2cfcd-192">您會發現事情變得越來越有趣。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-192">You’ll notice that things are getting much more interesting.</span></span> <span data-ttu-id="2cfcd-193">基於此目的，我將討論 hello 功能一個：</span><span class="sxs-lookup"><span data-stu-id="2cfcd-193">For this purpose, I’ll talk about hello features one by one:</span></span>

##### <a name="root-resource"></a><span data-ttu-id="2cfcd-194">根資源</span><span class="sxs-lookup"><span data-stu-id="2cfcd-194">Root resource</span></span>
<span data-ttu-id="2cfcd-195">hello web 應用程式取決於兩個不同的資源。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-195">hello web app depends on two different resources.</span></span> <span data-ttu-id="2cfcd-196">這表示 Azure 資源管理員會建立 hello web 應用程式之後，才會建立應用程式服務方案和 SQL Server 執行個體 hello 這兩個 hello。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-196">This means that Azure Resource Manager will create hello web app only after both hello App Service plan and hello SQL Server instance are created.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-5-webapproot.png)

##### <a name="app-settings"></a><span data-ttu-id="2cfcd-197">應用程式設定</span><span class="sxs-lookup"><span data-stu-id="2cfcd-197">App settings</span></span>
<span data-ttu-id="2cfcd-198">hello 應用程式設定也會定義為巢狀資源。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-198">hello app settings are also defined as a nested resource.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-6-webappsettings.png)

<span data-ttu-id="2cfcd-199">在 hello`properties`元素`config/appsettings`，hello 格式中有兩個應用程式設定`“<name>” : “<value>”`。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-199">In hello `properties` element for `config/appsettings`, you have two app settings in hello format `“<name>” : “<value>”`.</span></span>

* <span data-ttu-id="2cfcd-200">`PROJECT`是[KUDU 設定](https://github.com/projectkudu/kudu/wiki/Customizing-deployments)，會告訴 Azure 部署的專案 toouse 多專案的 Visual Studio 方案中。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-200">`PROJECT` is a [KUDU setting](https://github.com/projectkudu/kudu/wiki/Customizing-deployments) that tells Azure deployment which project toouse in a multi-project Visual Studio solution.</span></span> <span data-ttu-id="2cfcd-201">我將示範如何設定原始檔控制，但因為 hello ToDoApp 程式碼是在多專案的 Visual Studio 方案，我們需要這項設定。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-201">I will show you later how source control is configured, but since hello ToDoApp code is in a multi-project Visual Studio solution, we need this setting.</span></span>
* <span data-ttu-id="2cfcd-202">`clientUrl`是只設定該 hello 應用程式程式碼的應用程式使用。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-202">`clientUrl` is simply an app setting that hello application code uses.</span></span>

##### <a name="connection-strings"></a><span data-ttu-id="2cfcd-203">連接字串</span><span class="sxs-lookup"><span data-stu-id="2cfcd-203">Connection strings</span></span>
<span data-ttu-id="2cfcd-204">hello 連接字串也會定義為巢狀資源。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-204">hello connection strings are also defined as a nested resource.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-7-webappconnstr.png)

<span data-ttu-id="2cfcd-205">在 hello`properties`元素`config/connectionstrings`，每個連接字串也會定義為具有 hello 特定格式的名稱： 值組， `“<name>” : {“value”: “…”, “type”: “…”}`。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-205">In hello `properties` element for `config/connectionstrings`, each connection string is also defined as a name:value pair, with hello specific format of `“<name>” : {“value”: “…”, “type”: “…”}`.</span></span> <span data-ttu-id="2cfcd-206">Hello`type`項目，可能的值為`MySql`， `SQLServer`， `SQLAzure`，和`Custom`。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-206">For hello `type` element, possible values are `MySql`, `SQLServer`, `SQLAzure`, and `Custom`.</span></span>

> [!TIP]
> <span data-ttu-id="2cfcd-207">最終 hello 連接字串型別的清單，執行下列命令，在 Azure PowerShell 中的 hello: \[Enum]::GetNames("Microsoft.WindowsAzure.Commands.Utilities.Websites.Services.WebEntities.DatabaseType")</span><span class="sxs-lookup"><span data-stu-id="2cfcd-207">For a definitive list of hello connection string types, run hello following command in Azure PowerShell: \[Enum]::GetNames("Microsoft.WindowsAzure.Commands.Utilities.Websites.Services.WebEntities.DatabaseType")</span></span>
> 
> 

##### <a name="source-control"></a><span data-ttu-id="2cfcd-208">原始檔控制</span><span class="sxs-lookup"><span data-stu-id="2cfcd-208">Source control</span></span>
<span data-ttu-id="2cfcd-209">hello 原始檔控制設定也會定義為巢狀資源。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-209">hello source control settings are also defined as a nested resource.</span></span> <span data-ttu-id="2cfcd-210">Azure 資源管理員會使用此資源 tooconfigure 持續發行 (請參閱注意`IsManualIntegration`稍後) 和也 tookick hello 應用程式程式碼中的部署期間 hello 處理 hello JSON 檔案的自動關閉。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-210">Azure Resource Manager uses this resource tooconfigure continuous publishing (see caveat on `IsManualIntegration` later) and also tookick off hello deployment of application code automatically during hello processing of hello JSON file.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-8-webappsourcecontrol.png)

<span data-ttu-id="2cfcd-211">`RepoUrl`和`branch`應該其實很好，而且應該指向 toohello Git 儲存機制和 hello 名稱從 hello 分支 toopublish。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-211">`RepoUrl` and `branch` should be pretty intuitive and should point toohello Git repository and hello name of hello branch toopublish from.</span></span> <span data-ttu-id="2cfcd-212">同樣地，這些是透過輸入參數所定義。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-212">Again, these are defined by input parameters.</span></span> 

<span data-ttu-id="2cfcd-213">請注意，在 hello`dependsOn`項目，在加法 toohello web 應用程式資源本身，`sourcecontrols/web`也取決於`config/appsettings`和`config/connectionstrings`。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-213">Note in hello `dependsOn` element that, in addition toohello web app resource itself, `sourcecontrols/web` also depends on `config/appsettings` and `config/connectionstrings`.</span></span> <span data-ttu-id="2cfcd-214">這是因為一旦`sourcecontrols/web`是設定，hello Azure 的部署程序將會自動嘗試 toodeploy，建置和啟動 hello 應用程式程式碼。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-214">This is because once `sourcecontrols/web` is configured, hello Azure deployment process will automatically attempt toodeploy, build, and start hello application code.</span></span> <span data-ttu-id="2cfcd-215">因此，插入這個相依性會協助您確定該 hello 應用程式必須存取所需的 toohello 應用程式設定和連接字串 hello 應用程式程式碼執行之前。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-215">Therefore, inserting this dependency helps you make sure that hello application has access toohello required app settings and connection strings before hello application code is run.</span></span> 

> [!NOTE]
> <span data-ttu-id="2cfcd-216">也請注意，`IsManualIntegration`設定得`true`。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-216">Note also that `IsManualIntegration` is set too`true`.</span></span> <span data-ttu-id="2cfcd-217">這個屬性是在本教學課程所需，因為您實際上並未擁有 hello GitHub 儲存機制，並因此無法實際授與從的權限 tooAzure tooconfigure 持續發行[ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) （也就是推播自動儲存機制更新 tooAzure）。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-217">This property is necessary in this tutorial because you do not actually own hello GitHub repository, and thus cannot actually grant permission tooAzure tooconfigure continuous publishing from [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) (i.e. push automatic repository updates tooAzure).</span></span> <span data-ttu-id="2cfcd-218">您可以使用 hello 預設值`false`hello 指定儲存機制，只有當您已在 hello hello 擁有者的 GitHub 認證[Azure 入口網站](https://portal.azure.com/)之前。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-218">You can use hello default value `false` for hello specified repository only if you have configured hello owner’s GitHub credentials in hello [Azure portal](https://portal.azure.com/) before.</span></span> <span data-ttu-id="2cfcd-219">換句話說，如果您已經設定原始檔控制 tooGitHub 或 BitBucket 任何應用程式在 hello [Azure 入口網站](https://portal.azure.com/)之前，使用您的使用者認證，則 Azure 會記住 hello 認證，並使用它們，每當您從任何應用程式部署GitHub 或 BitBucket hello 未來中。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-219">In other words, if you have set up source control tooGitHub or BitBucket for any app in hello [Azure Portal](https://portal.azure.com/) previously, using your user credentials, then Azure will remember hello credentials and use them whenever you deploy any app from GitHub or BitBucket in hello future.</span></span> <span data-ttu-id="2cfcd-220">不過，如果您沒有這樣做，請部署 hello JSON 範本將會失敗，當 Azure 資源管理員會嘗試 tooconfigure hello web 應用程式的原始檔控制設定，因為它無法與 hello 儲存機制擁有者的認證登入 GitHub 或 BitBucket。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-220">However, if you haven’t done this already, deployment of hello JSON template will fail when Azure Resource Manager tries tooconfigure hello web app’s source control settings because it cannot log into GitHub or BitBucket with hello repository owner’s credentials.</span></span>
> 
> 

## <a name="compare-hello-json-template-with-deployed-resource-group"></a><span data-ttu-id="2cfcd-221">比較 hello JSON 範本部署的資源群組</span><span class="sxs-lookup"><span data-stu-id="2cfcd-221">Compare hello JSON template with deployed resource group</span></span>
<span data-ttu-id="2cfcd-222">在這裡，您可以瀏覽所有 hello web 應用程式的刀鋒視窗中 hello [Azure 入口網站](https://portal.azure.com/)，但還有其他工具一樣，如果不是多個。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-222">Here, you can go through all hello web app’s blades in hello [Azure Portal](https://portal.azure.com/), but there’s another tool that’s just as useful, if not more.</span></span> <span data-ttu-id="2cfcd-223">移 toohello [Azure 資源總管](https://resources.azure.com)預覽工具，為您提供所有 hello 資源群組的 JSON 表示法中您的訂閱，如此它們實際存在於 hello Azure 後端。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-223">Go toohello [Azure Resource Explorer](https://resources.azure.com) preview tool, which gives you a JSON representation of all hello resource groups in your subscriptions, as they actually exist in hello Azure backend.</span></span> <span data-ttu-id="2cfcd-224">您也可以查看如何在 Azure 中的 hello 資源群組的 JSON 階層對應於已使用 toocreate 的 hello 範本檔案中的 hello 階層它。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-224">You can also see how hello resource group’s JSON hierarchy in Azure corresponds with hello hierarchy in hello template file that’s used toocreate it.</span></span>

<span data-ttu-id="2cfcd-225">例如，當我該怎麼 toohello [Azure 資源總管](https://resources.azure.com)工具和展開 hello 總管中的 hello 節點，我是否可以查看 hello 資源群組以及其個別資源類型底下所收集的 hello 根層級資源。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-225">For example, when I go toohello [Azure Resource Explorer](https://resources.azure.com) tool and expand hello nodes in hello explorer, I can see hello resource group and hello root-level resources that are collected under their respective resource types.</span></span>

![](./media/app-service-deploy-complex-application-predictably/ARM-1-treeview.png)

<span data-ttu-id="2cfcd-226">如果您 tooa web 應用程式向下鑽研，您應該能夠 toosee web 應用程式組態詳細資料類似 toohello 下列螢幕擷取畫面：</span><span class="sxs-lookup"><span data-stu-id="2cfcd-226">If you drill down tooa web app, you should be able toosee web app configuration details similar toohello below screenshot:</span></span>

![](./media/app-service-deploy-complex-application-predictably/ARM-2-jsonview.png)

<span data-ttu-id="2cfcd-227">同樣地，hello 巢狀的資源應該具有階層的非常類似 toothose 在 JSON 範本檔案中，而且您應該會看見 hello 應用程式設定、 連接字串等，正確地反映在 hello JSON 窗格中。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-227">Again, hello nested resources should have a hierarchy very similar toothose in your JSON template file, and you should see hello app settings, connection strings, etc., properly reflected in hello JSON pane.</span></span> <span data-ttu-id="2cfcd-228">這裡設定 hello 缺少可能表示發生問題，使用您的 JSON 檔案，並可協助您疑難排解您的 JSON 範本檔案。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-228">hello absence of settings here may indicate an issue with your JSON file and can help you troubleshoot your JSON template file.</span></span>

## <a name="deploy-hello-resource-group-template-yourself"></a><span data-ttu-id="2cfcd-229">自行部署 hello 資源群組範本</span><span class="sxs-lookup"><span data-stu-id="2cfcd-229">Deploy hello resource group template yourself</span></span>
<span data-ttu-id="2cfcd-230">hello**部署 tooAzure**按鈕很棒，但是它可讓您 toodeploy hello 資源群組範本中 azuredeploy.json 只有當您已經有推送 azuredeploy.json tooGitHub。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-230">hello **Deploy tooAzure** button is great, but it allows you toodeploy hello resource group template in azuredeploy.json only if you have already pushed azuredeploy.json tooGitHub.</span></span> <span data-ttu-id="2cfcd-231">hello Azure.NET SDK 也提供 hello 工具您 toodeploy 任何直接從您的本機電腦的 JSON 範本檔案。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-231">hello Azure .NET SDK also provides hello tools for you toodeploy any JSON template file directly from your local machine.</span></span> <span data-ttu-id="2cfcd-232">toodo，後續 hello 步驟：</span><span class="sxs-lookup"><span data-stu-id="2cfcd-232">toodo this, follow hello steps below:</span></span>

1. <span data-ttu-id="2cfcd-233">在 Visual Studio 中，按一下 [檔案] > [新增] > [專案]。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-233">In Visual Studio, click **File** > **New** > **Project**.</span></span>
2. <span data-ttu-id="2cfcd-234">按一下 [Visual C#] > [雲端] > [Azure 資源群組]，然後按一下 [確定]。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-234">Click **Visual C#** > **Cloud** > **Azure Resource Group**, then click **OK**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-1-vsproject.png)
3. <span data-ttu-id="2cfcd-235">在 [選取 Azure 範本] 中，選取 [空白範本]，然後按一下 [確定]。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-235">In **Select Azure Template**, select **Blank Template** and click **OK**.</span></span>
4. <span data-ttu-id="2cfcd-236">拖曳 hello azuredeploy.json**範本**新專案的資料夾。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-236">Drag azuredeploy.json into hello **Template** folder of your new project.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-2-copyjson.png)
5. <span data-ttu-id="2cfcd-237">從 方案總管 中，開啟 hello 複製 azuredeploy.json。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-237">From Solution Explorer, open hello copied azuredeploy.json.</span></span>
6. <span data-ttu-id="2cfcd-238">只針對 hello 示範的 hello 起見，我們加入一些標準 Application Insight 資源 tooour JSON 檔案，請按一下**加入資源**。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-238">Just for hello sake of hello demonstration, let’s add some standard Application Insight resources tooour JSON file, by clicking **Add Resource**.</span></span> <span data-ttu-id="2cfcd-239">如果您只想在部署 hello JSON 檔案，請略過 toohello 部署步驟。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-239">If you’re just interested in deploying hello JSON file, skip toohello deploy steps.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-3-newresource.png)
7. <span data-ttu-id="2cfcd-240">選取 Web Apps 的 Application Insights，並確定已選取現有 App Service 方案和 Web 應用程式，然後按一下新增。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-240">Select **Application Insights for Web Apps**, then make sure an existing App Service plan and web app is selected, and then click **Add**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-4-newappinsight.png)
   
   <span data-ttu-id="2cfcd-241">現在，您就是可以 toosee 數個新的資源，視 hello 資源及其功能，對任一 hello App Service 方案或 hello web 應用程式具有相依性。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-241">You’ll now be able toosee several new resources that, depending on hello resource and what it does, have dependencies on either hello App Service plan or hello web app.</span></span> <span data-ttu-id="2cfcd-242">這些資源不會啟用現有的定義，您將 toochange 的。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-242">These resources are not enabled by their existing definition and you’re going toochange that.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-5-appinsightresources.png)
8. <span data-ttu-id="2cfcd-243">在 hello JSON 大綱中，按一下  **appInsights 自動調整規模**toohighlight 其 JSON 程式碼。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-243">In hello JSON Outline, click **appInsights AutoScale** toohighlight its JSON code.</span></span> <span data-ttu-id="2cfcd-244">這是 hello 縮放您 App Service 方案的設定。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-244">This is hello scaling setting for your App Service plan.</span></span>
9. <span data-ttu-id="2cfcd-245">在 hello 反白顯示的 JSON 程式碼中找出 hello`location`和`enabled`屬性並加以設定，如下所示。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-245">In hello highlighted JSON code, locate hello `location` and `enabled` properties and set them as shown below.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-6-autoscalesettings.png)
10. <span data-ttu-id="2cfcd-246">在 hello JSON 大綱中，按一下  **CPUHigh appInsights** toohighlight 其 JSON 程式碼。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-246">In hello JSON Outline, click **CPUHigh appInsights** toohighlight its JSON code.</span></span> <span data-ttu-id="2cfcd-247">這是警示。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-247">This is an alert.</span></span>
11. <span data-ttu-id="2cfcd-248">找出 hello`location`和`isEnabled`屬性並加以設定，如下所示。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-248">Locate hello `location` and `isEnabled` properties and set them as shown below.</span></span> <span data-ttu-id="2cfcd-249">請勿 hello 相同的 hello 其他三個警示 （紫色強大）。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-249">Do hello same for hello other three alerts (purple bulbs).</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-7-alerts.png)
12. <span data-ttu-id="2cfcd-250">您現在準備好 toodeploy。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-250">You’re now ready toodeploy.</span></span> <span data-ttu-id="2cfcd-251">Hello 專案上按一下滑鼠右鍵，然後選取**部署** > **新部署**。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-251">Right-click hello project and select **Deploy** > **New Deployment**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-8-newdeployment.png)
13. <span data-ttu-id="2cfcd-252">登入 Azure 帳戶 (如果您尚未這樣做)。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-252">Log into your Azure account if you haven’t already done so.</span></span>
14. <span data-ttu-id="2cfcd-253">在您的訂用帳戶中選取現有的資源群組，或選取 **azuredeploy.json**，然後按一下編輯參數 建立新的資源群組。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-253">Select an existing resource group in your subscription or create a new one, select **azuredeploy.json**, and then click **Edit Parameters**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-9-deployconfig.png)
    
    <span data-ttu-id="2cfcd-254">您現在將會無法 tooedit nice 資料表中的 hello 範本檔案中定義的所有 hello 參數。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-254">You’ll now be able tooedit all hello parameters defined in hello template file in a nice table.</span></span> <span data-ttu-id="2cfcd-255">定義預設值的參數已經有其預設值，而定義允許值清單的參數則會顯示為下拉式清單。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-255">Parameters that define defaults will already have their default values, and parameters that define a list of allowed values will be shown as dropdowns.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-10-parametereditor.png)
15. <span data-ttu-id="2cfcd-256">填寫所有 hello 空白參數，並使用 hello [ToDoApp GitHub 儲存機制位址](https://github.com/azure-appservice-samples/ToDoApp.git)中**repoUrl**。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-256">Fill in all hello empty parameters, and use hello [GitHub repo address for ToDoApp](https://github.com/azure-appservice-samples/ToDoApp.git) in **repoUrl**.</span></span> <span data-ttu-id="2cfcd-257">然後按一下 [ **儲存**]。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-257">Then, click **Save**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-11-parametereditorfilled.png)
    
    > [!NOTE]
    > <span data-ttu-id="2cfcd-258">自動調整是中提供的功能**標準**層或更高版本，並計劃層級的警示會提供的功能**基本**層或更高版本，您將需要 tooset hello **sku**參數太**標準**或**Premium**中排序 toosee 所有新 App Insights 資源亮燈。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-258">Autoscaling is a feature offered in **Standard** tier or higher, and plan-level alerts are features offered in **Basic** tier or higher, you’ll need tooset hello **sku** parameter too**Standard** or **Premium** in order toosee all your new App Insights resources light up.</span></span>
    > 
    > 
16. <span data-ttu-id="2cfcd-259">按一下 [ **部署**]。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-259">Click **Deploy**.</span></span> <span data-ttu-id="2cfcd-260">如果您選取**儲存密碼**，hello 密碼將儲存在 hello 參數檔**以純文字**。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-260">If you selected **Save passwords**, hello password will be saved in hello parameter file **in plain text**.</span></span> <span data-ttu-id="2cfcd-261">否則，您會在 hello 部署程序期間詢問 tooinput hello 資料庫密碼。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-261">Otherwise, you’ll be asked tooinput hello database password during hello deployment process.</span></span>

<span data-ttu-id="2cfcd-262">這樣就大功告成了！</span><span class="sxs-lookup"><span data-stu-id="2cfcd-262">That’s it!</span></span> <span data-ttu-id="2cfcd-263">現在您只需要 toogo toohello [Azure 入口網站](https://portal.azure.com/)和 hello [Azure 資源總管](https://resources.azure.com)工具 toosee hello 新警示，以及新增 tooyour JSON 部署應用程式的自動調整規模設定。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-263">Now you just need toogo toohello [Azure Portal](https://portal.azure.com/) and hello [Azure Resource Explorer](https://resources.azure.com) tool toosee hello new alerts and autoscale settings added tooyour JSON deployed application.</span></span>

<span data-ttu-id="2cfcd-264">您在這一節中的步驟主要完成 hello 下列：</span><span class="sxs-lookup"><span data-stu-id="2cfcd-264">Your steps in this section mainly accomplished hello following:</span></span>

1. <span data-ttu-id="2cfcd-265">已備妥的 hello 範本檔案</span><span class="sxs-lookup"><span data-stu-id="2cfcd-265">Prepared hello template file</span></span>
2. <span data-ttu-id="2cfcd-266">建立參數檔案 toogo 與 hello 範本檔案</span><span class="sxs-lookup"><span data-stu-id="2cfcd-266">Created a parameter file toogo with hello template file</span></span>
3. <span data-ttu-id="2cfcd-267">已部署的 hello 與 hello 參數檔案的範本檔案</span><span class="sxs-lookup"><span data-stu-id="2cfcd-267">Deployed hello template file with hello parameter file</span></span>

<span data-ttu-id="2cfcd-268">PowerShell cmdlet 輕鬆地完成作業 hello 最後一個步驟。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-268">hello last step is easily done by a PowerShell cmdlet.</span></span> <span data-ttu-id="2cfcd-269">toosee 哪些 Visual Studio 未部署您應用程式，請開啟 Scripts\Deploy AzureResourceGroup.ps1 時。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-269">toosee what Visual Studio did when it deployed your application, open Scripts\Deploy-AzureResourceGroup.ps1.</span></span> <span data-ttu-id="2cfcd-270">有大量程式碼，但我將 toohighlight 所有 hello 相關程式碼需要 toodeploy hello 範本檔案與 hello 參數檔案。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-270">There’s a lot of code there, but I’m just going toohighlight all hello pertinent code you need toodeploy hello template file with hello parameter file.</span></span>

![](./media/app-service-deploy-complex-application-predictably/deploy-12-powershellsnippet.png)

<span data-ttu-id="2cfcd-271">hello 最後一個 cmdlet， `New-AzureResourceGroup`，為 hello hello 動作會實際執行的其中一個。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-271">hello last cmdlet, `New-AzureResourceGroup`, is hello one that actually performs hello action.</span></span> <span data-ttu-id="2cfcd-272">這應該示範 tooyou，hello 協助工具，它是相當直接 toodeploy 您雲端應用程式如預期般。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-272">All this should demonstrate tooyou that, with hello help of tooling, it is relatively straightforward toodeploy your cloud application predictably.</span></span> <span data-ttu-id="2cfcd-273">每當您 hello 執行 hello cmdlet 相同的範本與 hello 相同參數檔案，您將在 tooget hello 相同的結果。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-273">Every time you run hello cmdlet on hello same template with hello same parameter file, you’re going tooget hello same result.</span></span>

## <a name="summary"></a><span data-ttu-id="2cfcd-274">摘要</span><span class="sxs-lookup"><span data-stu-id="2cfcd-274">Summary</span></span>
<span data-ttu-id="2cfcd-275">在 DevOps，重複性和可預測性是金鑰 tooany 成功部署 microservices 所組成的大型應用程式。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-275">In DevOps, repeatability and predictability are keys tooany successful deployment of a high-scale application composed of microservices.</span></span> <span data-ttu-id="2cfcd-276">在本教學課程中，您已部署兩個微服務應用程式 tooAzure 為單一資源群組使用 hello Azure Resource Manager 範本。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-276">In this tutorial, you have deployed a two-microservice application tooAzure as a single resource group using hello Azure Resource Manager template.</span></span> <span data-ttu-id="2cfcd-277">希望它已提供您 hello 知識，您需要在您的應用程式在 Azure 中轉換範本的順序 toostart 和可以佈建並將其部署如預期般。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-277">Hopefully, it has given you hello knowledge you need in order toostart converting your application in Azure into a template and can provision and deploy it predictably.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="2cfcd-278">後續步驟</span><span class="sxs-lookup"><span data-stu-id="2cfcd-278">Next Steps</span></span>
<span data-ttu-id="2cfcd-279">過了解如何[套用 agile 方法，並持續發行 microservices 應用程式，就能輕鬆](app-service-agile-software-development.md)以及進階部署技術，如[測試部署](app-service-web-test-in-production-controlled-test-flight.md)輕鬆。</span><span class="sxs-lookup"><span data-stu-id="2cfcd-279">Find out how too[apply agile methodologies and continuously publish your microservices application with ease](app-service-agile-software-development.md) and advanced deployment techniques like [flighting deployment](app-service-web-test-in-production-controlled-test-flight.md) easily.</span></span>

<a name="resources"></a>

## <a name="more-resources"></a><span data-ttu-id="2cfcd-280">其他資源</span><span class="sxs-lookup"><span data-stu-id="2cfcd-280">More resources</span></span>
* [<span data-ttu-id="2cfcd-281">Azure 資源管理員範本語言</span><span class="sxs-lookup"><span data-stu-id="2cfcd-281">Azure Resource Manager Template Language</span></span>](../azure-resource-manager/resource-group-authoring-templates.md)
* [<span data-ttu-id="2cfcd-282">編寫 Azure 資源管理員範本</span><span class="sxs-lookup"><span data-stu-id="2cfcd-282">Authoring Azure Resource Manager Templates</span></span>](../azure-resource-manager/resource-group-authoring-templates.md)
* [<span data-ttu-id="2cfcd-283">Azure 資源管理員範本函式</span><span class="sxs-lookup"><span data-stu-id="2cfcd-283">Azure Resource Manager Template Functions</span></span>](../azure-resource-manager/resource-group-template-functions.md)
* [<span data-ttu-id="2cfcd-284">使用 Azure 資源管理員範本部署應用程式</span><span class="sxs-lookup"><span data-stu-id="2cfcd-284">Deploy an application with Azure Resource Manager template</span></span>](../azure-resource-manager/resource-group-template-deploy.md)
* [<span data-ttu-id="2cfcd-285">搭配使用 Azure PowerShell 與 Azure 資源管理員</span><span class="sxs-lookup"><span data-stu-id="2cfcd-285">Using Azure PowerShell with Azure Resource Manager</span></span>](../azure-resource-manager/powershell-azure-resource-manager.md)
* [<span data-ttu-id="2cfcd-286">Azure 中的資源群組部署疑難排解</span><span class="sxs-lookup"><span data-stu-id="2cfcd-286">Troubleshooting Resource Group Deployments in Azure</span></span>](../azure-resource-manager/resource-manager-common-deployment-errors.md)

