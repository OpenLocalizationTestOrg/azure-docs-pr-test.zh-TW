---
title: "aaaBest 作法和疑難排解指南的 node 應用程式，Azure Web 應用程式"
description: "了解 hello 最佳作法和疑難排解步驟的 node 應用程式，Azure Web 應用程式。"
services: app-service\web
documentationcenter: nodejs
author: ranjithr
manager: wadeh
editor: 
ms.assetid: 387ea217-7910-4468-8987-9a1022a99bef
ms.service: app-service-web
ms.workload: web
ms.tgt_pltfrm: na
ms.devlang: nodejs
ms.topic: article
ms.date: 06/06/2016
ms.author: ranjithr
ms.openlocfilehash: 975898142a224f14df1091a46d16e9074d9e2831
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="best-practices-and-troubleshooting-guide-for-node-applications-on-azure-web-apps"></a><span data-ttu-id="2afee-103">Azure Web Apps 上節點應用程式的最佳作法和疑難排解指南</span><span class="sxs-lookup"><span data-stu-id="2afee-103">Best practices and troubleshooting guide for node applications on Azure Web Apps</span></span>
[!INCLUDE [tabs](../../includes/app-service-web-get-started-nav-tabs.md)]

<span data-ttu-id="2afee-104">在本文中，您將學習 hello 最佳作法和疑難排解步驟[node 應用程式](app-service-web-get-started-nodejs.md)Azure Webapps 上執行 (與[iisnode](https://github.com/azure/iisnode))。</span><span class="sxs-lookup"><span data-stu-id="2afee-104">In this article, you will learn hello best practices and troubleshooting steps for [node applications](app-service-web-get-started-nodejs.md) running on Azure Webapps (with [iisnode](https://github.com/azure/iisnode)).</span></span>

> [!WARNING]
> <span data-ttu-id="2afee-105">請小心在您的生產網站上使用疑難排解步驟。</span><span class="sxs-lookup"><span data-stu-id="2afee-105">Use caution when using troubleshooting steps on your production site.</span></span> <span data-ttu-id="2afee-106">建議是 tootroubleshoot 上的應用程式非實際執行安裝程式，例如您預備位置和 hello 問題固定的當交換生產位置與您預備網站。</span><span class="sxs-lookup"><span data-stu-id="2afee-106">Recommendation is tootroubleshoot your app on a non-production setup for example your staging slot and when hello issue is fixed, swap your staging slot with your production slot.</span></span>
> 
> 

## <a name="iisnode-configuration"></a><span data-ttu-id="2afee-107">IISNODE 組態</span><span class="sxs-lookup"><span data-stu-id="2afee-107">IISNODE configuration</span></span>
<span data-ttu-id="2afee-108">這[結構描述檔案](https://github.com/Azure/iisnode/blob/master/src/config/iisnode_schema_x64.xml)顯示所有可設定為 iisnode hello 設定。</span><span class="sxs-lookup"><span data-stu-id="2afee-108">This [schema file](https://github.com/Azure/iisnode/blob/master/src/config/iisnode_schema_x64.xml) shows all hello settings that can be configured for iisnode.</span></span> <span data-ttu-id="2afee-109">適用於您的應用程式的 hello 設定包括：</span><span class="sxs-lookup"><span data-stu-id="2afee-109">Some of hello settings that will be useful for your application are:</span></span>

* <span data-ttu-id="2afee-110">nodeProcessCountPerApplication</span><span class="sxs-lookup"><span data-stu-id="2afee-110">nodeProcessCountPerApplication</span></span>
  
    <span data-ttu-id="2afee-111">此設定會控制每個 IIS 應用程式所啟動的節點處理序的 hello 數目。</span><span class="sxs-lookup"><span data-stu-id="2afee-111">This setting controls hello number of node processes that are launched per IIS application.</span></span> <span data-ttu-id="2afee-112">預設值為 1。</span><span class="sxs-lookup"><span data-stu-id="2afee-112">Default value is 1.</span></span> <span data-ttu-id="2afee-113">藉由設定此 too0，您可以為您 VM 的核心計數啟動許多 node.exe。</span><span class="sxs-lookup"><span data-stu-id="2afee-113">You can launch as many node.exe’s as your VM core count by setting this too0.</span></span> <span data-ttu-id="2afee-114">建議的值為 0，大部分的應用程式，讓您可以利用 hello 核心的所有電腦上。</span><span class="sxs-lookup"><span data-stu-id="2afee-114">Recommended value is 0 for most application so you can utilize all of hello cores on your machine.</span></span> <span data-ttu-id="2afee-115">Node.exe 是單一執行緒，因此一個 node.exe 會耗用最多 1 核心及 tooget 最大效能的應用程式節點您會想 tooutilize 所有核心。</span><span class="sxs-lookup"><span data-stu-id="2afee-115">Node.exe is single threaded so one node.exe will consume a maximum of 1 core and tooget maximum performance out of your node application you would want tooutilize all cores.</span></span>
* <span data-ttu-id="2afee-116">nodeProcessCommandLine</span><span class="sxs-lookup"><span data-stu-id="2afee-116">nodeProcessCommandLine</span></span>
  
    <span data-ttu-id="2afee-117">此設定會控制 hello 路徑 toohello node.exe。</span><span class="sxs-lookup"><span data-stu-id="2afee-117">This setting controls hello path toohello node.exe.</span></span> <span data-ttu-id="2afee-118">您可以設定此值 toopoint tooyour node.exe 版本。</span><span class="sxs-lookup"><span data-stu-id="2afee-118">You can set this value toopoint tooyour node.exe version.</span></span>
* <span data-ttu-id="2afee-119">maxConcurrentRequestsPerProcess</span><span class="sxs-lookup"><span data-stu-id="2afee-119">maxConcurrentRequestsPerProcess</span></span>
  
    <span data-ttu-id="2afee-120">此設定會控制 hello iisnode tooeach node.exe 所傳送的並行要求數目上限。</span><span class="sxs-lookup"><span data-stu-id="2afee-120">This setting controls hello maximum number of concurrent requests sent by iisnode tooeach node.exe.</span></span> <span data-ttu-id="2afee-121">在 azure 的 webapps hello 這個的預設值為無限。</span><span class="sxs-lookup"><span data-stu-id="2afee-121">On azure webapps, hello default value for this is Infinite.</span></span> <span data-ttu-id="2afee-122">您不會有 tooworry 有關這項設定。</span><span class="sxs-lookup"><span data-stu-id="2afee-122">You will not have tooworry about this setting.</span></span> <span data-ttu-id="2afee-123">Azure 的 webapps 外 hello 預設值為 1024年。</span><span class="sxs-lookup"><span data-stu-id="2afee-123">Outside azure webapps, hello default value is 1024.</span></span> <span data-ttu-id="2afee-124">您可能想的 tooconfigure 這根據要求數目，您的應用程式會取得和您的應用程式處理每個要求的速度。</span><span class="sxs-lookup"><span data-stu-id="2afee-124">You might want tooconfigure this depending on how many requests your application gets and how fast your application processes each request.</span></span>
* <span data-ttu-id="2afee-125">maxNamedPipeConnectionRetry</span><span class="sxs-lookup"><span data-stu-id="2afee-125">maxNamedPipeConnectionRetry</span></span>
  
    <span data-ttu-id="2afee-126">此設定會控制 hello 的次數 iisnode 會重試上 hello toonode.exe 透過具名管道 toosend hello 要求讓連線數目上限。</span><span class="sxs-lookup"><span data-stu-id="2afee-126">This setting controls hello maximum number of times iisnode will retry making connection on hello named pipe toosend hello request over toonode.exe.</span></span> <span data-ttu-id="2afee-127">搭配 namedPipeConnectionRetryDelay 此設定會決定 hello iisnode 內每個要求的總逾時。</span><span class="sxs-lookup"><span data-stu-id="2afee-127">This setting in combination with namedPipeConnectionRetryDelay determines hello total timeout of each request within iisnode.</span></span> <span data-ttu-id="2afee-128">在 Azure Web Apps 上預設值為 200。</span><span class="sxs-lookup"><span data-stu-id="2afee-128">Default value is 200 on Azure Webapps.</span></span> <span data-ttu-id="2afee-129">總逾時 (秒) = (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1000</span><span class="sxs-lookup"><span data-stu-id="2afee-129">Total Timeout in seconds = (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1000</span></span>
* <span data-ttu-id="2afee-130">namedPipeConnectionRetryDelay</span><span class="sxs-lookup"><span data-stu-id="2afee-130">namedPipeConnectionRetryDelay</span></span>
  
    <span data-ttu-id="2afee-131">透過具名管道的 hello 每個重試 toosend 要求 toonode.exe 之間將等候的時間 （毫秒） iisnode 這個設定控制項 hello 量。</span><span class="sxs-lookup"><span data-stu-id="2afee-131">This setting controls hello amount of time (in ms) iisnode will wait for between each retry toosend request toonode.exe over hello named pipe.</span></span> <span data-ttu-id="2afee-132">預設值為 250 毫秒。</span><span class="sxs-lookup"><span data-stu-id="2afee-132">Default value is 250ms.</span></span>
    <span data-ttu-id="2afee-133">總逾時 (秒) = (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1000</span><span class="sxs-lookup"><span data-stu-id="2afee-133">Total Timeout in seconds = (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1000</span></span>
  
    <span data-ttu-id="2afee-134">根據預設，在 azure webapps iisnode hello 總逾時是 200 \* 250ms = 50 秒。</span><span class="sxs-lookup"><span data-stu-id="2afee-134">By default hello total timeout in iisnode on azure webapps is 200 \* 250ms = 50 seconds.</span></span>
* <span data-ttu-id="2afee-135">logDirectory</span><span class="sxs-lookup"><span data-stu-id="2afee-135">logDirectory</span></span>
  
    <span data-ttu-id="2afee-136">此設定會控制 hello 目錄 iisnode 記錄 stdout/stderr 的位置。</span><span class="sxs-lookup"><span data-stu-id="2afee-136">This setting controls hello directory where iisnode will log stdout/stderr.</span></span> <span data-ttu-id="2afee-137">預設值是 iisnode 即相對 toohello 主要指令碼目錄 (directory where 主要立即轉譯 server.js 時)</span><span class="sxs-lookup"><span data-stu-id="2afee-137">Default value is iisnode which is relative toohello main script directory (directory where main server.js is present)</span></span>
* <span data-ttu-id="2afee-138">debuggerExtensionDll</span><span class="sxs-lookup"><span data-stu-id="2afee-138">debuggerExtensionDll</span></span>
  
    <span data-ttu-id="2afee-139">此設定會控制 iisnode 在進行節點應用程式偵錯時，將使用的節點偵測器版本。</span><span class="sxs-lookup"><span data-stu-id="2afee-139">This setting controls what version of node-inspector iisnode will use when debugging your node application.</span></span> <span data-ttu-id="2afee-140">目前 iisnode-偵測器-0.7.3.dll 和 iisnode inspector.dll 有效值 hello 只有 2，這項設定。</span><span class="sxs-lookup"><span data-stu-id="2afee-140">Currently iisnode-inspector-0.7.3.dll and iisnode-inspector.dll are hello only 2 valid values for this setting.</span></span> <span data-ttu-id="2afee-141">預設值為 iisnode-inspector-0.7.3.dll。</span><span class="sxs-lookup"><span data-stu-id="2afee-141">Default value is iisnode-inspector-0.7.3.dll.</span></span> <span data-ttu-id="2afee-142">iisnode-偵測器-0.7.3.dll 版本會使用節點-偵測器-0.7.3，和使用 websockets，因此您需要 tooenable websockets azure webapp toouse 上這個版本。</span><span class="sxs-lookup"><span data-stu-id="2afee-142">iisnode-inspector-0.7.3.dll version uses node-inspector-0.7.3 and uses websockets, so you will need tooenable websockets on your azure webapp toouse this version.</span></span> <span data-ttu-id="2afee-143">請參閱<http://www.ranjithr.com/?p=98>如需有關如何 tooconfigure iisnode toouse hello 新的節點偵測器。</span><span class="sxs-lookup"><span data-stu-id="2afee-143">See <http://www.ranjithr.com/?p=98> for more details on how tooconfigure iisnode toouse hello new node-inspector.</span></span>
* <span data-ttu-id="2afee-144">flushResponse</span><span class="sxs-lookup"><span data-stu-id="2afee-144">flushResponse</span></span>
  
    <span data-ttu-id="2afee-145">其會緩衝回應 too4MB 資料之前清除，亦即，或直到 hello 回應 hello 結束，何者較早 hello IIS 的預設行為。</span><span class="sxs-lookup"><span data-stu-id="2afee-145">hello default behavior of IIS is that it buffers response data up too4MB before flushing, or until hello end of hello response, whichever comes first.</span></span> <span data-ttu-id="2afee-146">iisnode 提供組態設定 toooverride 這種行為： tooflush hello 回應實體本文的片段項目一旦 iisnode 接收來自 node.exe，您需要 tooset hello iisnode/@flushResponse web.config too'true 中的屬性 ':</span><span class="sxs-lookup"><span data-stu-id="2afee-146">iisnode offers a configuration setting toooverride this behavior: tooflush a fragment of hello response entity body as soon as iisnode receives it from node.exe, you need tooset hello iisnode/@flushResponse attribute in web.config too'true':</span></span>
  
    ```
    <configuration>    
        <system.webServer>    
            <!-- ... -->    
            <iisnode flushResponse="true" />    
        </system.webServer>    
    </configuration>
    ```
  
    <span data-ttu-id="2afee-147">啟用 排清的 hello 回應實體本文的每個片段會將 hello hello 系統輸送量降低 (as of v0.1.13) 的 5%的效能負擔，所以最佳 tooscope 需要回應資料流 （例如使用 hello 這個設定只有 tooendpoints<location> hello web.config 中的項目)</span><span class="sxs-lookup"><span data-stu-id="2afee-147">Enabling flushing of every fragment of hello response entity body adds performance overhead that reduces hello throughput of hello system by ~5% (as of v0.1.13), so it is best tooscope this setting only tooendpoints that require response streaming (e.g. using hello <location> element in hello web.config)</span></span>
  
    <span data-ttu-id="2afee-148">在加法 toothis 串流處理應用程式，您需要 tooalso 組 responseBufferLimit 您 iisnode 處理常式 too0。</span><span class="sxs-lookup"><span data-stu-id="2afee-148">In addition toothis, for streaming applications, you will need tooalso set responseBufferLimit of your iisnode handler too0.</span></span>
  
    ```
    <handlers>    
        <add name="iisnode" path="app.js" verb="\*" modules="iisnode" responseBufferLimit="0"/>    
    </handlers>
    ```
* <span data-ttu-id="2afee-149">watchedFiles</span><span class="sxs-lookup"><span data-stu-id="2afee-149">watchedFiles</span></span>
  
    <span data-ttu-id="2afee-150">這是以分號分隔的檔案清單，系統將監看其變更。</span><span class="sxs-lookup"><span data-stu-id="2afee-150">This is a semi-colon separated list of files that will be watched for changes.</span></span> <span data-ttu-id="2afee-151">變更 tooa 檔案會導致 hello 應用程式 toorecycle。</span><span class="sxs-lookup"><span data-stu-id="2afee-151">A change tooa file causes hello application toorecycle.</span></span> <span data-ttu-id="2afee-152">每個項目包含選擇性的目錄名稱再加上必要的檔案名稱，也就是相對 toohello hello 主應用程式進入點所在的目錄。</span><span class="sxs-lookup"><span data-stu-id="2afee-152">Each entry consists of an optional directory name plus required file name which are relative toohello directory where hello main application entry point is located.</span></span> <span data-ttu-id="2afee-153">中 hello 檔案名稱部分只允許使用萬用字元。</span><span class="sxs-lookup"><span data-stu-id="2afee-153">Wild cards are allowed in hello file name portion only.</span></span> <span data-ttu-id="2afee-154">預設值為 “\*.js;web.config”</span><span class="sxs-lookup"><span data-stu-id="2afee-154">Default value is “\*.js;web.config”</span></span>
* <span data-ttu-id="2afee-155">recycleSignalEnabled</span><span class="sxs-lookup"><span data-stu-id="2afee-155">recycleSignalEnabled</span></span>
  
    <span data-ttu-id="2afee-156">預設值為 false。</span><span class="sxs-lookup"><span data-stu-id="2afee-156">Default value is false.</span></span> <span data-ttu-id="2afee-157">如果啟用，您的 node 應用程式可以連接 tooa 具名管道 (環境變數 IISNODE\_控制項\_管道)，並傳送 「 資源回收 」 訊息。</span><span class="sxs-lookup"><span data-stu-id="2afee-157">If enabled, your node application can connect tooa named pipe (environment variable IISNODE\_CONTROL\_PIPE) and send a “recycle” message.</span></span> <span data-ttu-id="2afee-158">這會導致 hello w3wp toorecycle 依正常程序。</span><span class="sxs-lookup"><span data-stu-id="2afee-158">This will cause hello w3wp toorecycle gracefully.</span></span>
* <span data-ttu-id="2afee-159">idlePageOutTimePeriod</span><span class="sxs-lookup"><span data-stu-id="2afee-159">idlePageOutTimePeriod</span></span>
  
    <span data-ttu-id="2afee-160">預設值為 0，這表示已停用此功能。</span><span class="sxs-lookup"><span data-stu-id="2afee-160">Default value is 0 which means this feature is disabled.</span></span> <span data-ttu-id="2afee-161">當設定 toosome 值大於 0，iisnode 將移出其所有子分頁處理每隔 'idlePageOutTimePeriod' 毫秒。</span><span class="sxs-lookup"><span data-stu-id="2afee-161">When set toosome value greater than 0, iisnode will page out all its child processes every ‘idlePageOutTimePeriod’ milliseconds.</span></span> <span data-ttu-id="2afee-162">toounderstand 頁面外方式套用，請參閱 toothis[文件](https://msdn.microsoft.com/library/windows/desktop/ms682606.aspx)。</span><span class="sxs-lookup"><span data-stu-id="2afee-162">toounderstand what page out means, please refer toothis [documentation](https://msdn.microsoft.com/library/windows/desktop/ms682606.aspx).</span></span> <span data-ttu-id="2afee-163">這項設定將會適用於應用程式會耗用大量的記憶體，而且想要將 toopageout 記憶體 toodisk 偶爾 toofree 向上某些 RAM。</span><span class="sxs-lookup"><span data-stu-id="2afee-163">This setting will be useful for applications that consume a lot of memory and want toopageout memory toodisk occasionally toofree up some RAM.</span></span>

> [!WARNING]
> <span data-ttu-id="2afee-164">啟用 hello 遵循上實際執行應用程式的組態設定時，請務必小心。</span><span class="sxs-lookup"><span data-stu-id="2afee-164">Use caution when enabling hello following configuration settings on production applications.</span></span> <span data-ttu-id="2afee-165">建議的做法是 toonot 即時的實際執行應用程式上啟用它們。</span><span class="sxs-lookup"><span data-stu-id="2afee-165">Recommendation is toonot enable them on live production applications.</span></span>
> 
> 

* <span data-ttu-id="2afee-166">debugHeaderEnabled</span><span class="sxs-lookup"><span data-stu-id="2afee-166">debugHeaderEnabled</span></span>
  
    <span data-ttu-id="2afee-167">hello 預設值為 false。</span><span class="sxs-lookup"><span data-stu-id="2afee-167">hello default value is false.</span></span> <span data-ttu-id="2afee-168">如果設定 tootrue，iisnode 會將 HTTP 回應標頭 iisnode 偵錯 tooevery HTTP 回應傳送嗨 iisnode 偵錯標頭值會是 URL。</span><span class="sxs-lookup"><span data-stu-id="2afee-168">If set tootrue, iisnode will add an HTTP response header iisnode-debug tooevery HTTP response it sends hello iisnode-debug header value is a URL.</span></span> <span data-ttu-id="2afee-169">可以證明的診斷資訊的各個部分，藉由查看 hello URL 片段，但更佳的視覺效果達成 hello 瀏覽器中開啟 hello URL。</span><span class="sxs-lookup"><span data-stu-id="2afee-169">Individual pieces of diagnostic information can be gleaned by looking at hello URL fragment, but a much better visualization is achieved by opening hello URL in hello browser.</span></span>
* <span data-ttu-id="2afee-170">loggingEnabled</span><span class="sxs-lookup"><span data-stu-id="2afee-170">loggingEnabled</span></span>
  
    <span data-ttu-id="2afee-171">此設定會控制所 iisnode hello 記錄 stdout 和 stderr。</span><span class="sxs-lookup"><span data-stu-id="2afee-171">This setting controls hello logging of stdout and stderr by iisnode.</span></span> <span data-ttu-id="2afee-172">Iisnode 會擷取 stdout/stderr 從節點處理序，它會啟動，並將寫入 toohello hello 'p' 設定中指定的目錄。</span><span class="sxs-lookup"><span data-stu-id="2afee-172">Iisnode will capture stdout/stderr from node processes it launches and write toohello directory specified in hello ‘logDirectory’ setting.</span></span> <span data-ttu-id="2afee-173">一旦啟用，您的應用程式將會寫入記錄檔 toohello 檔案系統，並根據 hello hello 應用程式所完成的記錄數量，可能是效能的影響。</span><span class="sxs-lookup"><span data-stu-id="2afee-173">Once this is enable, your application will be writing logs toohello file system and depending on hello amount of logging done by hello application, there could be performance implications.</span></span>
* <span data-ttu-id="2afee-174">devErrorsEnabled</span><span class="sxs-lookup"><span data-stu-id="2afee-174">devErrorsEnabled</span></span>
  
    <span data-ttu-id="2afee-175">預設值為 false。</span><span class="sxs-lookup"><span data-stu-id="2afee-175">Default value is false.</span></span> <span data-ttu-id="2afee-176">當設定 tootrue，iisnode 將會顯示 hello HTTP 狀態碼和 Win32 錯誤碼在您的瀏覽器。</span><span class="sxs-lookup"><span data-stu-id="2afee-176">When set tootrue, iisnode will display hello HTTP status code and Win32 error code on your browser.</span></span> <span data-ttu-id="2afee-177">hello win32 程式碼將有助於偵錯特定類型的問題。</span><span class="sxs-lookup"><span data-stu-id="2afee-177">hello win32 code will be helpful in debugging certain types of issues.</span></span>
* <span data-ttu-id="2afee-178">debuggingEnabled (請勿在實際生產網站上啟用)</span><span class="sxs-lookup"><span data-stu-id="2afee-178">debuggingEnabled (do not enable on live production site)</span></span>
  
    <span data-ttu-id="2afee-179">此設定會控制偵錯功能。</span><span class="sxs-lookup"><span data-stu-id="2afee-179">This setting controls debugging feature.</span></span> <span data-ttu-id="2afee-180">Iisnode 會與節點偵測器整合。</span><span class="sxs-lookup"><span data-stu-id="2afee-180">Iisnode is integrated with node-inspector.</span></span> <span data-ttu-id="2afee-181">藉由啟用此設定，即可啟用節點應用程式的偵錯功能。</span><span class="sxs-lookup"><span data-stu-id="2afee-181">By enabling this setting, you enable debugging of your node application.</span></span> <span data-ttu-id="2afee-182">一旦啟用此設定，iisnode 會配置 hello 必要的節點偵測器中的檔案 'debuggerVirtualDir' 目錄 hello 第一個偵錯要求 tooyour node 應用程式。</span><span class="sxs-lookup"><span data-stu-id="2afee-182">Once this setting is enabled, iisnode will layout hello necessary node-inspector files in ‘debuggerVirtualDir’ directory on hello first debug request tooyour node application.</span></span> <span data-ttu-id="2afee-183">您可以藉由傳送要求 toohttp://yoursite/server.js/debug 載入 hello 節點偵測器。</span><span class="sxs-lookup"><span data-stu-id="2afee-183">You can load hello node-inspector by sending a request toohttp://yoursite/server.js/debug.</span></span> <span data-ttu-id="2afee-184">您可以使用 'debuggerPathSegment' 設定控制 hello 偵錯 URL 區段。</span><span class="sxs-lookup"><span data-stu-id="2afee-184">You can control hello debug URL segment with ‘debuggerPathSegment’ setting.</span></span> <span data-ttu-id="2afee-185">根據預設，debuggerPathSegment=’debug’。</span><span class="sxs-lookup"><span data-stu-id="2afee-185">By default debuggerPathSegment=’debug’.</span></span> <span data-ttu-id="2afee-186">使其更加困難 toobe 探索到的其他人，您可以設定此 tooa GUID 的範例。</span><span class="sxs-lookup"><span data-stu-id="2afee-186">You can set this tooa GUID for example so that it is more difficult toobe discovered by others.</span></span>
  
    <span data-ttu-id="2afee-187">如需偵錯詳細資訊，請查看此 [連結](https://tomasz.janczuk.org/2011/11/debug-nodejs-applications-on-windows.html) 。</span><span class="sxs-lookup"><span data-stu-id="2afee-187">Check this [link](https://tomasz.janczuk.org/2011/11/debug-nodejs-applications-on-windows.html) for more details on debugging.</span></span>

## <a name="scenarios-and-recommendationstroubleshooting"></a><span data-ttu-id="2afee-188">案例和建議/疑難排解</span><span class="sxs-lookup"><span data-stu-id="2afee-188">Scenarios and recommendations/troubleshooting</span></span>
### <a name="my-node-application-is-making-too-many-outbound-calls"></a><span data-ttu-id="2afee-189">我的節點應用程式進行太多的輸出呼叫。</span><span class="sxs-lookup"><span data-stu-id="2afee-189">My node application is making too many outbound calls.</span></span>
<span data-ttu-id="2afee-190">許多應用程式會做為其一般作業的一部分想 toomake 傳出連接。</span><span class="sxs-lookup"><span data-stu-id="2afee-190">Many applications would want toomake outbound connections as part of their regular operation.</span></span> <span data-ttu-id="2afee-191">例如，要求時，節點應用程式會想 toocontact REST API 的其他位置及某些資訊 tooprocess hello 要求。</span><span class="sxs-lookup"><span data-stu-id="2afee-191">For example, when a request comes in, your node app would want toocontact a REST API elsewhere and get some information tooprocess hello request.</span></span> <span data-ttu-id="2afee-192">Http 或 https 的呼叫時，您會想 toouse 保持運作的代理程式。</span><span class="sxs-lookup"><span data-stu-id="2afee-192">You would want toouse a keep alive agent when making http or https calls.</span></span> <span data-ttu-id="2afee-193">例如，您可以使用 hello agentkeepalive 模組與您保持運作的代理程式，這些輸出呼叫時。</span><span class="sxs-lookup"><span data-stu-id="2afee-193">For example, you could use hello agentkeepalive module as your keep alive agent when making these outbound calls.</span></span> <span data-ttu-id="2afee-194">這可確保 hello 通訊端重複使用在您的 azure webapp VM 及建立新的通訊端，為每個傳出要求的降低 hello 額外負荷。</span><span class="sxs-lookup"><span data-stu-id="2afee-194">This makes sure that hello sockets are reused on your azure webapp VM and reducing hello overhead of creating new sockets for every outbound request.</span></span> <span data-ttu-id="2afee-195">此外，這可確保您使用許多輸出要求，因此您不超過每個 VM 配置的 hello maxSockets 通訊端 toomake 減少數。</span><span class="sxs-lookup"><span data-stu-id="2afee-195">Also, this makes sure that you are using less number of sockets toomake many outbound requests and therefore you don’t exceed hello maxSockets that are allocated per VM.</span></span> <span data-ttu-id="2afee-196">建議的 Azure Webapps 是 tooset hello agentKeepAlive maxSockets 值 tooa 總計的每個 VM 的 160 通訊端。</span><span class="sxs-lookup"><span data-stu-id="2afee-196">Recommendation on Azure Webapps would be tooset hello agentKeepAlive maxSockets value tooa total of 160 sockets per VM.</span></span> <span data-ttu-id="2afee-197">這表示如果您有 4 node.exe hello VM 上執行，您會想 tooset hello agentKeepAlive maxSockets too40 每也就是每個 VM 的總 160 node.exe。</span><span class="sxs-lookup"><span data-stu-id="2afee-197">This means that if you have 4 node.exe running on hello VM, you would want tooset hello agentKeepAlive maxSockets too40 per node.exe which is 160 total per VM.</span></span>

<span data-ttu-id="2afee-198">範例 [agentKeepALive](https://www.npmjs.com/package/agentkeepalive) 設定：</span><span class="sxs-lookup"><span data-stu-id="2afee-198">Example [agentKeepALive](https://www.npmjs.com/package/agentkeepalive) configuration:</span></span>

```
var keepaliveAgent = new Agent({    
    maxSockets: 40,    
    maxFreeSockets: 10,    
    timeout: 60000,    
    keepAliveTimeout: 300000    
});
```

<span data-ttu-id="2afee-199">這個範例假設您有 4 個 node.exe 在 VM 上執行。</span><span class="sxs-lookup"><span data-stu-id="2afee-199">This example assumes you have 4 node.exe running on your VM.</span></span> <span data-ttu-id="2afee-200">如果您有不同數目的 node.exe hello VM 上執行，您必須 toomodify hello maxSockets 據此設定。</span><span class="sxs-lookup"><span data-stu-id="2afee-200">If you have a different number of node.exe running on hello VM, you will have toomodify hello maxSockets setting accordingly.</span></span>

### <a name="my-node-application-is-consuming-too-much-cpu"></a><span data-ttu-id="2afee-201">我的節點應用程式目前耗用太多 CPU。</span><span class="sxs-lookup"><span data-stu-id="2afee-201">My node application is consuming too much CPU.</span></span>
<span data-ttu-id="2afee-202">您可能會在您的入口網站上取得 Azure Web Apps 建議的高 cpu 耗用量。</span><span class="sxs-lookup"><span data-stu-id="2afee-202">You will probably get a recommendation from Azure Webapps on your portal about high cpu consumption.</span></span> <span data-ttu-id="2afee-203">您也可以安裝監視 toowatch 某些[度量](web-sites-monitor.md)。</span><span class="sxs-lookup"><span data-stu-id="2afee-203">You can also setup monitors toowatch for certain [metrics](web-sites-monitor.md).</span></span> <span data-ttu-id="2afee-204">當檢查 hello hello CPU 使用量[Azure 入口網站儀表板](../application-insights/app-insights-web-monitor-performance.md)，請檢查 cpu hello 最大值，因此不會錯過出 hello 尖峰值。</span><span class="sxs-lookup"><span data-stu-id="2afee-204">When checking hello CPU usage on hello [Azure Portal Dashboard](../application-insights/app-insights-web-monitor-performance.md), please check hello MAX values for CPU so you don’t miss out hello peak values.</span></span>
<span data-ttu-id="2afee-205">在您認為您的應用程式耗用太多的 CPU，您無法解釋的情況下，您需要 tooprofile 應用程式節點。</span><span class="sxs-lookup"><span data-stu-id="2afee-205">In cases where you think your application is consuming too much CPU and you cannot explain why, you will need tooprofile your node application.</span></span>

### 
#### <a name="profiling-your-node-application-on-azure-webapps-with-v8-profiler"></a><span data-ttu-id="2afee-206">在 Azure Web Apps 上使用 V8 分析工具剖析節點應用程式</span><span class="sxs-lookup"><span data-stu-id="2afee-206">Profiling your node application on azure webapps with V8-Profiler</span></span>
<span data-ttu-id="2afee-207">例如，假設讓您可擁有您想 tooprofile，如下所示為 hello world 應用程式：</span><span class="sxs-lookup"><span data-stu-id="2afee-207">For example, lets say you have a hello world app that you want tooprofile as shown below:</span></span>

```
var http = require('http');    
function WriteConsoleLog() {    
    for(var i=0;i<99999;++i) {    
        console.log('hello world');    
    }    
}

function HandleRequest() {    
    WriteConsoleLog();    
}

http.createServer(function (req, res) {    
    res.writeHead(200, {'Content-Type': 'text/html'});    
    HandleRequest();    
    res.end('Hello world!');    
}).listen(process.env.PORT);
```

<span data-ttu-id="2afee-208">移 tooyour scm 網站 https://yoursite.scm.azurewebsites.net/DebugConsole</span><span class="sxs-lookup"><span data-stu-id="2afee-208">Go tooyour scm site https://yoursite.scm.azurewebsites.net/DebugConsole</span></span>

<span data-ttu-id="2afee-209">您會看到命令提示字元，如下所示。</span><span class="sxs-lookup"><span data-stu-id="2afee-209">You will see a command prompt as shown below.</span></span> <span data-ttu-id="2afee-210">進入 site/wwwroot 目錄</span><span class="sxs-lookup"><span data-stu-id="2afee-210">Go into your site/wwwroot directory</span></span>

![](./media/app-service-web-nodejs-best-practices-and-troubleshoot-guide/scm_install_v8.png)

<span data-ttu-id="2afee-211">執行 npm 安裝 v8 分析工具 」 hello 命令</span><span class="sxs-lookup"><span data-stu-id="2afee-211">Run hello command “npm install v8-profiler”</span></span>

<span data-ttu-id="2afee-212">這應會在 node\_modules 目錄與其所有的相依項目之下安裝 v8 分析工具。</span><span class="sxs-lookup"><span data-stu-id="2afee-212">This should install v8-profiler under node\_modules directory and all of its dependencies.</span></span>
<span data-ttu-id="2afee-213">現在，編輯您的應用程式立即轉譯 server.js tooprofile。</span><span class="sxs-lookup"><span data-stu-id="2afee-213">Now, edit your server.js tooprofile your application.</span></span>

```
var http = require('http');    
var profiler = require('v8-profiler');    
var fs = require('fs');

function WriteConsoleLog() {    
    for(var i=0;i<99999;++i) {    
        console.log('hello world');    
    }    
}

function HandleRequest() {    
    profiler.startProfiling('HandleRequest');    
    WriteConsoleLog();    
    fs.writeFileSync('profile.cpuprofile', JSON.stringify(profiler.stopProfiling('HandleRequest')));    
}

http.createServer(function (req, res) {    
    res.writeHead(200, {'Content-Type': 'text/html'});    
    HandleRequest();    
    res.end('Hello world!');    
}).listen(process.env.PORT);
```

<span data-ttu-id="2afee-214">變更上述 hello 會分析 hello WriteConsoleLog 函式，然後撰寫 hello 設定檔輸出 too'profile.cpuprofile' 站台 wwwroot 下的檔案。</span><span class="sxs-lookup"><span data-stu-id="2afee-214">hello above changes will profile hello WriteConsoleLog function and then write hello profile output too‘profile.cpuprofile’ file under your site wwwroot.</span></span> <span data-ttu-id="2afee-215">傳送要求 tooyour 應用程式。</span><span class="sxs-lookup"><span data-stu-id="2afee-215">Send a request tooyour application.</span></span> <span data-ttu-id="2afee-216">您會在您的網站 wwwroot 下看到所建立的 'profile.cpuprofile' 檔案。</span><span class="sxs-lookup"><span data-stu-id="2afee-216">You will see a ‘profile.cpuprofile’ file created under your site wwwroot.</span></span>

![](./media/app-service-web-nodejs-best-practices-and-troubleshoot-guide/scm_profile.cpuprofile.png)

<span data-ttu-id="2afee-217">下載此檔案，而您將需要 tooopen Chrome F12 工具這個檔案。</span><span class="sxs-lookup"><span data-stu-id="2afee-217">Download this file and you will need tooopen this file with Chrome F12 Tools.</span></span> <span data-ttu-id="2afee-218">在 chrome 上叫用 F12，然後按一下 hello 「 設定檔索引標籤 」。</span><span class="sxs-lookup"><span data-stu-id="2afee-218">Hit F12 on chrome, then click on hello “Profiles Tab”.</span></span> <span data-ttu-id="2afee-219">按一下 [載入] 按鈕。</span><span class="sxs-lookup"><span data-stu-id="2afee-219">Click on “Load” Button.</span></span> <span data-ttu-id="2afee-220">選取您剛下載的 profile.cpuprofile 檔案。</span><span class="sxs-lookup"><span data-stu-id="2afee-220">Select your profile.cpuprofile file that you just downloaded.</span></span> <span data-ttu-id="2afee-221">按一下您剛載入的 hello 設定檔。</span><span class="sxs-lookup"><span data-stu-id="2afee-221">Click on hello profile you just loaded.</span></span>

![](./media/app-service-web-nodejs-best-practices-and-troubleshoot-guide/chrome_tools_view.png)

<span data-ttu-id="2afee-222">您會看到 95%的 hello 時間所耗用 WriteConsoleLog 函式，如下所示。</span><span class="sxs-lookup"><span data-stu-id="2afee-222">You will see that 95% of hello time was consumed by WriteConsoleLog function as shown below.</span></span> <span data-ttu-id="2afee-223">這也會顯示 hello 確切的行號和原始程式檔，會造成 hello 問題。</span><span class="sxs-lookup"><span data-stu-id="2afee-223">This also shows you hello exact line numbers and source files that cause hello issue.</span></span>

### <a name="my-node-application-is-consuming-too-much-memory"></a><span data-ttu-id="2afee-224">我的節點應用程式目前耗用太多記憶體。</span><span class="sxs-lookup"><span data-stu-id="2afee-224">My node application is consuming too much memory.</span></span>
<span data-ttu-id="2afee-225">您可能會在您的入口網站上取得 Azure Web Apps 建議的高記憶體耗用量。</span><span class="sxs-lookup"><span data-stu-id="2afee-225">You will probably get a recommendation from Azure Webapps on your portal about high memory consumption.</span></span> <span data-ttu-id="2afee-226">您也可以安裝監視 toowatch 某些[度量](web-sites-monitor.md)。</span><span class="sxs-lookup"><span data-stu-id="2afee-226">You can also setup monitors toowatch for certain [metrics](web-sites-monitor.md).</span></span> <span data-ttu-id="2afee-227">當檢查 hello hello 的記憶體使用量[Azure 入口網站儀表板](../application-insights/app-insights-web-monitor-performance.md)，請檢查 hello 記憶體最大值，因此不會錯過出 hello 尖峰值。</span><span class="sxs-lookup"><span data-stu-id="2afee-227">When checking hello memory usage on hello [Azure Portal Dashboard](../application-insights/app-insights-web-monitor-performance.md), please check hello MAX values for memory so you don’t miss out hello peak values.</span></span>

#### <a name="leak-detection-and-heap-diffing-for-nodejs"></a><span data-ttu-id="2afee-228">node.js 的流失偵測和堆積區分</span><span class="sxs-lookup"><span data-stu-id="2afee-228">Leak detection and Heap Diffing for node.js</span></span>
<span data-ttu-id="2afee-229">您可以使用[節點 memwatch](https://github.com/lloyd/node-memwatch) toohelp 識別記憶體流失。</span><span class="sxs-lookup"><span data-stu-id="2afee-229">You could use [node-memwatch](https://github.com/lloyd/node-memwatch) toohelp you identify memory leaks.</span></span>
<span data-ttu-id="2afee-230">您可以在應用程式中安裝 memwatch 如同 v8 分析工具和編輯您程式碼 toocapture 和差異堆積 tooidentify hello 記憶體流失的問題。</span><span class="sxs-lookup"><span data-stu-id="2afee-230">You can install memwatch just like v8-profiler and edit your code toocapture and diff heaps tooidentify hello memory leaks in your application.</span></span>

### <a name="my-nodeexes-are-getting-killed-randomly"></a><span data-ttu-id="2afee-231">我的 node.exe 會隨機終止</span><span class="sxs-lookup"><span data-stu-id="2afee-231">My node.exe’s are getting killed randomly</span></span>
<span data-ttu-id="2afee-232">發生這種情況有幾個原因︰</span><span class="sxs-lookup"><span data-stu-id="2afee-232">There are a few reasons why this could be happening:</span></span>

1. <span data-ttu-id="2afee-233">您的應用程式會擲回無法攔截例外狀況 – 請核取 d:\\家用\\LogFiles\\應用程式\\hello 詳細資料上 hello 擲回的例外狀況記錄 errors.txt 檔案。</span><span class="sxs-lookup"><span data-stu-id="2afee-233">Your application is throwing uncaught exceptions – Please check d:\\home\\LogFiles\\Application\\logging-errors.txt file for hello details on hello exception thrown.</span></span> <span data-ttu-id="2afee-234">此檔案具有 hello 堆疊追蹤，以便修正根據這個應用程式。</span><span class="sxs-lookup"><span data-stu-id="2afee-234">This file has hello stack trace so you can fix your application based on this.</span></span>
2. <span data-ttu-id="2afee-235">您的應用程式耗用太多記憶體，近而讓其他處理序無法開始執行。</span><span class="sxs-lookup"><span data-stu-id="2afee-235">Your application is consuming too much memory which is affecting other processes from getting started.</span></span> <span data-ttu-id="2afee-236">如果關閉 too100%hello VM 的記憶體總數，無法清除您 node.exe hello 程序管理員 toolet 由其他處理程序取得機會 toodo 一些工作。</span><span class="sxs-lookup"><span data-stu-id="2afee-236">If hello total VM memory is close too100%, your node.exe’s could be killed by hello process manager toolet other processes get a chance toodo some work.</span></span> <span data-ttu-id="2afee-237">toofix，請確定您的應用程式表示並未流失記憶體，或如果您的應用程式確實需要 toouse 大量的記憶體，請向上擴充 tooa 較大的 VM、 更多 RAM。</span><span class="sxs-lookup"><span data-stu-id="2afee-237">toofix this, either make sure your application is not leaking memory OR if you application really needs toouse a lot of memory, please scale up tooa larger VM with a lot more RAM.</span></span>

### <a name="my-node-application-does-not-start"></a><span data-ttu-id="2afee-238">我的節點應用程式並未啟動</span><span class="sxs-lookup"><span data-stu-id="2afee-238">My node application does not start</span></span>
<span data-ttu-id="2afee-239">如果您的應用程式在啟動時傳回 500 錯誤，可能有幾個原因︰</span><span class="sxs-lookup"><span data-stu-id="2afee-239">If your application is returning 500 Errors at startup, there could be a few reasons:</span></span>

1. <span data-ttu-id="2afee-240">Node.exe 不存在於 hello 正確的位置。</span><span class="sxs-lookup"><span data-stu-id="2afee-240">Node.exe is not present at hello correct location.</span></span> <span data-ttu-id="2afee-241">檢查 nodeProcessCommandLine 設定。</span><span class="sxs-lookup"><span data-stu-id="2afee-241">Check nodeProcessCommandLine setting.</span></span>
2. <span data-ttu-id="2afee-242">在 hello 正確位置，不存在主要指令碼檔案。</span><span class="sxs-lookup"><span data-stu-id="2afee-242">Main script file is not present at hello correct location.</span></span> <span data-ttu-id="2afee-243">檢查 web.config 並確定 hello 名稱 hello 主要指令碼檔案中進行 hello 處理常式區段相符項目 hello 主要指令碼檔案。</span><span class="sxs-lookup"><span data-stu-id="2afee-243">Check web.config and make sure hello name of hello main script file in hello handlers section matches hello main script file.</span></span>
3. <span data-ttu-id="2afee-244">Web.config 設定不正確-請檢查 hello 設定名稱/值。</span><span class="sxs-lookup"><span data-stu-id="2afee-244">Web.config configuration is not correct – check hello settings names/values.</span></span>
4. <span data-ttu-id="2afee-245">冷啟動-您的應用程式所花費太長 toostartup。</span><span class="sxs-lookup"><span data-stu-id="2afee-245">Cold Start – Your application is taking too long toostartup.</span></span> <span data-ttu-id="2afee-246">如果您的應用程式所花的時間大於 (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1000 秒，則 iisnode 會傳回 500 錯誤。</span><span class="sxs-lookup"><span data-stu-id="2afee-246">If your application takes longer than (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1000 seconds, iisnode will return 500 error.</span></span> <span data-ttu-id="2afee-247">增加您的應用程式啟動時間 tooprevent iisnode 逾時並傳回 hello 500 錯誤從這些設定 toomatch hello 值。</span><span class="sxs-lookup"><span data-stu-id="2afee-247">Increase hello values of these settings toomatch your application start time tooprevent iisnode from timing out and returning hello 500 error.</span></span>

### <a name="my-node-application-crashed"></a><span data-ttu-id="2afee-248">我的節點應用程式毀損</span><span class="sxs-lookup"><span data-stu-id="2afee-248">My node application crashed</span></span>
<span data-ttu-id="2afee-249">您的應用程式會擲回無法攔截例外狀況 – 請核取 d:\\家用\\LogFiles\\應用程式\\hello 詳細資料上 hello 擲回的例外狀況記錄 errors.txt 檔案。</span><span class="sxs-lookup"><span data-stu-id="2afee-249">Your application is throwing uncaught exceptions – Please check d:\\home\\LogFiles\\Application\\logging-errors.txt file for hello details on hello exception thrown.</span></span> <span data-ttu-id="2afee-250">此檔案具有 hello 堆疊追蹤，以便修正根據這個應用程式。</span><span class="sxs-lookup"><span data-stu-id="2afee-250">This file has hello stack trace so you can fix your application based on this.</span></span>

### <a name="my-node-application-takes-too-much-time-toostartup-cold-start"></a><span data-ttu-id="2afee-251">我的 node 應用程式採用 （冷啟動） 太多時間 toostartup</span><span class="sxs-lookup"><span data-stu-id="2afee-251">My node application takes too much time toostartup (Cold Start)</span></span>
<span data-ttu-id="2afee-252">最常見的原因是 hello 應用程式有許多檔案中的 hello 節點\_模組和 hello 應用程式嘗試 tooload 大部分在啟動期間，這些檔案。</span><span class="sxs-lookup"><span data-stu-id="2afee-252">Most common reason for this is that hello application has a lot of files in hello node\_modules and hello application tries tooload most of these files during startup.</span></span> <span data-ttu-id="2afee-253">根據預設，因為您的檔案位於 hello 網路共用上 Azure Webapps 載入太多檔案可能需要一些時間。</span><span class="sxs-lookup"><span data-stu-id="2afee-253">By default, since your files reside on hello network share on Azure Webapps, loading so many files can take some time.</span></span>
<span data-ttu-id="2afee-254">某些解決方案 toomake 這速度是：</span><span class="sxs-lookup"><span data-stu-id="2afee-254">Some solutions toomake this faster are:</span></span>

1. <span data-ttu-id="2afee-255">請確定您使用 npm3 tooinstall 模組有一般相依性結構，而且沒有重複的相依性。</span><span class="sxs-lookup"><span data-stu-id="2afee-255">Make sure you have a flat dependency structure and no duplicate dependencies by using npm3 tooinstall your modules.</span></span>
2. <span data-ttu-id="2afee-256">您的節點再次嘗試 toolazy 負載\_模組，不會載入所有 hello 模組在啟動時。</span><span class="sxs-lookup"><span data-stu-id="2afee-256">Try toolazy load your node\_modules and not load all of hello modules at startup.</span></span> <span data-ttu-id="2afee-257">這表示當您確實需要時，應該完成該 hello 呼叫 toorequire('module') hello 函式內再次嘗試 toouse hello 模組。</span><span class="sxs-lookup"><span data-stu-id="2afee-257">This means that hello call toorequire(‘module’) should be done when you actually need it within hello function you try toouse hello module.</span></span>
3. <span data-ttu-id="2afee-258">Azure Web Apps 會提供稱為本機快取的功能。</span><span class="sxs-lookup"><span data-stu-id="2afee-258">Azure Webapps offers a feature called local cache.</span></span> <span data-ttu-id="2afee-259">這項功能將從 hello 網路共用 toohello 本機磁碟上 hello VM 複製您的內容。</span><span class="sxs-lookup"><span data-stu-id="2afee-259">This feature copies your content from hello network share toohello local disk on hello VM.</span></span> <span data-ttu-id="2afee-260">由於本機 hello 檔案，所以 hello 的節點載入\_模組會更快。</span><span class="sxs-lookup"><span data-stu-id="2afee-260">Since hello files are local, hello load time of node\_modules is much faster.</span></span> <span data-ttu-id="2afee-261">-此[文件](../app-service/app-service-local-cache.md)說明如何 toouse 本機快取中的更詳細說明。</span><span class="sxs-lookup"><span data-stu-id="2afee-261">- This [documentation](../app-service/app-service-local-cache.md) explains how toouse Local Cache in more detail.</span></span>

## <a name="iisnode-http-status-and-substatus"></a><span data-ttu-id="2afee-262">IISNODE http 狀態和子狀態</span><span class="sxs-lookup"><span data-stu-id="2afee-262">IISNODE http status and substatus</span></span>
<span data-ttu-id="2afee-263">這[原始程式檔](https://github.com/Azure/iisnode/blob/master/src/iisnode/cnodeconstants.h)所有 hello 可能的狀態/子狀態組合 iisnode 可能會發生錯誤時都傳回的清單。</span><span class="sxs-lookup"><span data-stu-id="2afee-263">This [source file](https://github.com/Azure/iisnode/blob/master/src/iisnode/cnodeconstants.h) lists all hello possible status/substatus combination iisnode can return in case of error.</span></span>

<span data-ttu-id="2afee-264">啟用您應用程式 toosee hello win32 錯誤碼 FREB （請確定您啟用 FREB 只在非實際執行的網站，基於效能的考量）。</span><span class="sxs-lookup"><span data-stu-id="2afee-264">Enable FREB for your application toosee hello win32 error code (please make sure you enable FREB only on non-production sites for performance reasons).</span></span>

| <span data-ttu-id="2afee-265">Http 狀態</span><span class="sxs-lookup"><span data-stu-id="2afee-265">Http Status</span></span> | <span data-ttu-id="2afee-266">Http 子狀態</span><span class="sxs-lookup"><span data-stu-id="2afee-266">Http SubStatus</span></span> | <span data-ttu-id="2afee-267">可能的原因？</span><span class="sxs-lookup"><span data-stu-id="2afee-267">Possible Reason?</span></span> |
| --- | --- | --- |
| <span data-ttu-id="2afee-268">500</span><span class="sxs-lookup"><span data-stu-id="2afee-268">500</span></span> |<span data-ttu-id="2afee-269">1000</span><span class="sxs-lookup"><span data-stu-id="2afee-269">1000</span></span> |<span data-ttu-id="2afee-270">時發生分派 hello 要求 tooIISNODE 一些問題 – 請檢查 是否啟動 node.exe。</span><span class="sxs-lookup"><span data-stu-id="2afee-270">There was some issue dispatching hello request tooIISNODE – check if node.exe was started up.</span></span> <span data-ttu-id="2afee-271">Node.exe 可能在啟動時損毀。</span><span class="sxs-lookup"><span data-stu-id="2afee-271">Node.exe could have crashed on startup.</span></span> <span data-ttu-id="2afee-272">檢查 web.config 組態是否有錯誤。</span><span class="sxs-lookup"><span data-stu-id="2afee-272">Check your web.config configuration for errors.</span></span> |
| <span data-ttu-id="2afee-273">500</span><span class="sxs-lookup"><span data-stu-id="2afee-273">500</span></span> |<span data-ttu-id="2afee-274">1001</span><span class="sxs-lookup"><span data-stu-id="2afee-274">1001</span></span> |<span data-ttu-id="2afee-275">-Win32Error 0x2-應用程式沒有回應 toohello URL。</span><span class="sxs-lookup"><span data-stu-id="2afee-275">- Win32Error 0x2 - App is not responding toohello URL.</span></span> <span data-ttu-id="2afee-276">請檢查 URL 重寫規則，或如果您快速的應用程式必須定義 hello 正確路由。</span><span class="sxs-lookup"><span data-stu-id="2afee-276">Check URL rewrite rules or if your express app has hello correct routes defined.</span></span> <span data-ttu-id="2afee-277">-Win32Error 0x6d – 具名管道忙碌 – Node.exe 不接受要求，因為 hello 管道忙碌中。</span><span class="sxs-lookup"><span data-stu-id="2afee-277">- Win32Error 0x6d – named pipe is busy – Node.exe is not accepting requests because hello pipe is busy.</span></span> <span data-ttu-id="2afee-278">檢查高 CPU 使用量。</span><span class="sxs-lookup"><span data-stu-id="2afee-278">Check high cpu usage.</span></span> <span data-ttu-id="2afee-279">- 其他錯誤 – 檢查 node.exe 是否毀損。</span><span class="sxs-lookup"><span data-stu-id="2afee-279">- Other errors – check if node.exe crashed.</span></span> |
| <span data-ttu-id="2afee-280">500</span><span class="sxs-lookup"><span data-stu-id="2afee-280">500</span></span> |<span data-ttu-id="2afee-281">1002</span><span class="sxs-lookup"><span data-stu-id="2afee-281">1002</span></span> |<span data-ttu-id="2afee-282">Node.exe 損毀 – 檢查 d:\\home\\LogFiles\\logging-errors.txt 中的堆疊追蹤。</span><span class="sxs-lookup"><span data-stu-id="2afee-282">Node.exe crashed – check d:\\home\\LogFiles\\logging-errors.txt for stack trace.</span></span> |
| <span data-ttu-id="2afee-283">500</span><span class="sxs-lookup"><span data-stu-id="2afee-283">500</span></span> |<span data-ttu-id="2afee-284">1003</span><span class="sxs-lookup"><span data-stu-id="2afee-284">1003</span></span> |<span data-ttu-id="2afee-285">管道組態有問題 – 您絕不應該看見這，但如果您這樣做，hello 具名管道組態不正確。</span><span class="sxs-lookup"><span data-stu-id="2afee-285">Pipe configuration Issue – You should never see this but if you do, hello named pipe configuration is incorrect.</span></span> |
| <span data-ttu-id="2afee-286">500</span><span class="sxs-lookup"><span data-stu-id="2afee-286">500</span></span> |<span data-ttu-id="2afee-287">1004-1018</span><span class="sxs-lookup"><span data-stu-id="2afee-287">1004-1018</span></span> |<span data-ttu-id="2afee-288">傳送來自 node.exe hello 要求或處理 hello 回應時發生一些錯誤。</span><span class="sxs-lookup"><span data-stu-id="2afee-288">There was some error while sending hello request or processing hello response to/from node.exe.</span></span> <span data-ttu-id="2afee-289">檢查 node.exe 是否損毀。</span><span class="sxs-lookup"><span data-stu-id="2afee-289">Check if node.exe crashed.</span></span> <span data-ttu-id="2afee-290">檢查 d:\\home\\LogFiles\\logging-errors.txt 中的堆疊追蹤。</span><span class="sxs-lookup"><span data-stu-id="2afee-290">check d:\\home\\LogFiles\\logging-errors.txt for stack trace.</span></span> |
| <span data-ttu-id="2afee-291">503</span><span class="sxs-lookup"><span data-stu-id="2afee-291">503</span></span> |<span data-ttu-id="2afee-292">1000</span><span class="sxs-lookup"><span data-stu-id="2afee-292">1000</span></span> |<span data-ttu-id="2afee-293">沒有足夠的記憶體 tooallocate 更具名管道連接。</span><span class="sxs-lookup"><span data-stu-id="2afee-293">Not enough memory tooallocate more named pipe connections.</span></span> <span data-ttu-id="2afee-294">檢查您的應用程式為何使用這麼多的記憶體。</span><span class="sxs-lookup"><span data-stu-id="2afee-294">Check why your app is consuming so much memory.</span></span> <span data-ttu-id="2afee-295">檢查 maxConcurrentRequestsPerProcess 設定值。</span><span class="sxs-lookup"><span data-stu-id="2afee-295">Check maxConcurrentRequestsPerProcess setting value.</span></span> <span data-ttu-id="2afee-296">如果它並不無限的而且您有許多要求，增加此值 tooprevent 這個錯誤。</span><span class="sxs-lookup"><span data-stu-id="2afee-296">If its not infinite and you have a lot of requests, increase this value tooprevent this error.</span></span> |
| <span data-ttu-id="2afee-297">503</span><span class="sxs-lookup"><span data-stu-id="2afee-297">503</span></span> |<span data-ttu-id="2afee-298">1001</span><span class="sxs-lookup"><span data-stu-id="2afee-298">1001</span></span> |<span data-ttu-id="2afee-299">要求無法分派的 toonode.exe 因為 hello 應用程式正在回收處理。</span><span class="sxs-lookup"><span data-stu-id="2afee-299">Request could not be dispatched toonode.exe because hello application is recycling.</span></span> <span data-ttu-id="2afee-300">Hello 應用程式已回收之後，要求通常應該會提供服務。</span><span class="sxs-lookup"><span data-stu-id="2afee-300">After hello application has recycled, requests should be served normally.</span></span> |
| <span data-ttu-id="2afee-301">503</span><span class="sxs-lookup"><span data-stu-id="2afee-301">503</span></span> |<span data-ttu-id="2afee-302">1002</span><span class="sxs-lookup"><span data-stu-id="2afee-302">1002</span></span> |<span data-ttu-id="2afee-303">核取 win32 錯誤碼的實際原因 – 要求找不到分派的 tooa node.exe。</span><span class="sxs-lookup"><span data-stu-id="2afee-303">Check win32 error code for actual reason – Request could not be dispatched tooa node.exe.</span></span> |
| <span data-ttu-id="2afee-304">503</span><span class="sxs-lookup"><span data-stu-id="2afee-304">503</span></span> |<span data-ttu-id="2afee-305">1003</span><span class="sxs-lookup"><span data-stu-id="2afee-305">1003</span></span> |<span data-ttu-id="2afee-306">具名管道太忙 – 檢查節點是否正耗用大量的 CPU</span><span class="sxs-lookup"><span data-stu-id="2afee-306">Named pipe is too Busy – Check if node is consuming a lot of CPU</span></span> |

<span data-ttu-id="2afee-307">NODE.exe 內有名為 NODE\_PENDING\_PIPE\_INSTANCES 的設定。</span><span class="sxs-lookup"><span data-stu-id="2afee-307">There is a setting within NODE.exe called NODE\_PENDING\_PIPE\_INSTANCES.</span></span> <span data-ttu-id="2afee-308">根據預設，此值在 Azure Web Apps 外部為 4。</span><span class="sxs-lookup"><span data-stu-id="2afee-308">By default outside of azure webapps this value is 4.</span></span> <span data-ttu-id="2afee-309">這表示該 node.exe hello 具名管道上一次只能接受 4 的要求。</span><span class="sxs-lookup"><span data-stu-id="2afee-309">This means that node.exe can only accept 4 requests at a time on hello named pipe.</span></span> <span data-ttu-id="2afee-310">在 Azure Webapps too5000 設定此值，這個值應該是適用於 azure webapps 上執行的大部分節點應用程式。</span><span class="sxs-lookup"><span data-stu-id="2afee-310">On Azure Webapps, this value is set too5000 and this value should be good enough for most node applications running on azure webapps.</span></span> <span data-ttu-id="2afee-311">您應該不會看到 503.1003 azure webapps 因為我們有較高的值為 hello 節點\_PENDING\_管道\_執行個體。</span><span class="sxs-lookup"><span data-stu-id="2afee-311">You should not see 503.1003 on azure webapps because we have a high value for hello NODE\_PENDING\_PIPE\_INSTANCES.</span></span>  |

## <a name="more-resources"></a><span data-ttu-id="2afee-312">其他資源</span><span class="sxs-lookup"><span data-stu-id="2afee-312">More resources</span></span>
<span data-ttu-id="2afee-313">Azure App Service 上，請遵循這些連結 toolearn 更多關於 node.js 應用程式。</span><span class="sxs-lookup"><span data-stu-id="2afee-313">Follow these links toolearn more about node.js applications on Azure App Service.</span></span>

* [<span data-ttu-id="2afee-314">在 Azure App Service 中開始使用 Node.js Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="2afee-314">Get started with Node.js web apps in Azure App Service</span></span>](app-service-web-get-started-nodejs.md)
* [<span data-ttu-id="2afee-315">Toodebug Node.js web 應用程式在 Azure App Service 中的方式</span><span class="sxs-lookup"><span data-stu-id="2afee-315">How toodebug a Node.js web app in Azure App Service</span></span>](web-sites-nodejs-debug.md)
* [<span data-ttu-id="2afee-316">使用 Node.js 模組與 Azure 應用程式搭配</span><span class="sxs-lookup"><span data-stu-id="2afee-316">Using Node.js Modules with Azure applications</span></span>](../nodejs-use-node-modules-azure-apps.md)
* [<span data-ttu-id="2afee-317">Azure App Service Web Apps：Node.js</span><span class="sxs-lookup"><span data-stu-id="2afee-317">Azure App Service Web Apps: Node.js</span></span>](https://blogs.msdn.microsoft.com/silverlining/2012/06/14/windows-azure-websites-node-js/)
* [<span data-ttu-id="2afee-318">Node.js 開發人員中心</span><span class="sxs-lookup"><span data-stu-id="2afee-318">Node.js Developer Center</span></span>](../nodejs-use-node-modules-azure-apps.md)
* [<span data-ttu-id="2afee-319">瀏覽 hello 進階密碼 Kudu 偵錯主控台</span><span class="sxs-lookup"><span data-stu-id="2afee-319">Exploring hello Super Secret Kudu Debug Console</span></span>](https://azure.microsoft.com/documentation/videos/super-secret-kudu-debug-console-for-azure-web-sites/)

