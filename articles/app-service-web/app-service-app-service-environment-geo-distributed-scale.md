---
title: "aaaGeo 分散式應用程式服務環境的小數位數"
description: "了解 toohorizontally 調整與流量管理員和應用程式服務環境中使用地理分散的應用程式的規模。"
services: app-service
documentationcenter: 
author: stefsch
manager: erikre
editor: 
ms.assetid: c1b05ca8-3703-4d87-a9ae-819d741787fb
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/07/2016
ms.author: stefsch
ms.openlocfilehash: 9b441f637d8b7f679b3d83240baf99b8ee57e8f3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="geo-distributed-scale-with-app-service-environments"></a><span data-ttu-id="f5638-103">App Service 環境的異地分散調整</span><span class="sxs-lookup"><span data-stu-id="f5638-103">Geo Distributed Scale with App Service Environments</span></span>
## <a name="overview"></a><span data-ttu-id="f5638-104">概觀</span><span class="sxs-lookup"><span data-stu-id="f5638-104">Overview</span></span>
<span data-ttu-id="f5638-105">應用程式案例都會需要極高的小數位數可以超過 hello 計算資源容量可用 tooa 單一部署的應用程式。</span><span class="sxs-lookup"><span data-stu-id="f5638-105">Application scenarios which require very high scale can exceed hello compute resource capacity available tooa single deployment of an app.</span></span>  <span data-ttu-id="f5638-106">例如，投票應用程式、體育活動及電視娛樂活動，都屬於需要極高延展性的案例。</span><span class="sxs-lookup"><span data-stu-id="f5638-106">Voting applications, sporting events, and televised entertainment events are all examples of scenarios that require extremely high scale.</span></span> <span data-ttu-id="f5638-107">水平向外延展應用程式，具有多個應用程式部署在單一區域中，以及跨區域 toohandle 極端負載需求進行，可以滿足大規模需求。</span><span class="sxs-lookup"><span data-stu-id="f5638-107">High scale requirements can be met by horizontally scaling out apps, with multiple app deployments being made within a single region, as well as across regions, toohandle extreme load requirements.</span></span>

<span data-ttu-id="f5638-108">App Service 環境是水平相應放大的理想平台。一旦選取 App Service 環境設定，可支援已知的要求速率，開發人員可以部署其他應用程式服務環境中 「 cookie 裁切器 」 的方式 tooattain 所需的尖峰負載容量。</span><span class="sxs-lookup"><span data-stu-id="f5638-108">App Service Environments are an ideal platform for horizontal scale out.  Once an App Service Environment configuration has been selected that can support a known request rate, developers can deploy additional App Service Environments in "cookie cutter" fashion tooattain a desired peak load capacity.</span></span>

<span data-ttu-id="f5638-109">例如假設 App Service 環境組態上所執行的應用程式已經過測試的 toohandle 20k 每秒要求數 (RPS)。</span><span class="sxs-lookup"><span data-stu-id="f5638-109">For example suppose an app running on an App Service Environment configuration has been tested toohandle 20K requests per second (RPS).</span></span>  <span data-ttu-id="f5638-110">如果 hello 所需的尖峰負載容量是 100k RPS、 然後可以建立五 （5） 應用程式服務環境以及設定的 tooensure hello 應用程式可以處理 hello 預計的負載上限。</span><span class="sxs-lookup"><span data-stu-id="f5638-110">If hello desired peak load capacity is 100K RPS, then five (5) App Service Environments can be created and configured tooensure hello application can handle hello maximum projected load.</span></span>

<span data-ttu-id="f5638-111">因為客戶通常存取使用自訂 （或虛名） 網域，開發人員需要應用程式的方式 toodistribute 應用程式會透過 hello App Service 環境的執行個體的所有要求。</span><span class="sxs-lookup"><span data-stu-id="f5638-111">Since customers typically access apps using a custom (or vanity) domain, developers need a way toodistribute app requests across all of hello App Service Environment instances.</span></span>  <span data-ttu-id="f5638-112">這是很好的方法 tooaccomplish tooresolve hello 自訂網域使用[Azure 流量管理員設定檔][AzureTrafficManagerProfile]。</span><span class="sxs-lookup"><span data-stu-id="f5638-112">A great way tooaccomplish this is tooresolve hello custom domain using an [Azure Traffic Manager profile][AzureTrafficManagerProfile].</span></span>  <span data-ttu-id="f5638-113">hello Traffic Manager 設定檔可在所有的設定的 toopoint hello 個別的應用程式服務環境。</span><span class="sxs-lookup"><span data-stu-id="f5638-113">hello Traffic Manager profile can be configured toopoint at all of hello individual App Service Environments.</span></span>  <span data-ttu-id="f5638-114">Traffic Manager 將會自動處理在所有應用程式服務環境根據 hello 負載平衡設定 hello Traffic Manager 設定檔中的 hello 分散的客戶。</span><span class="sxs-lookup"><span data-stu-id="f5638-114">Traffic Manager will automatically handle distributing customers across all of hello App Service Environments based on hello load balancing settings in hello Traffic Manager profile.</span></span>  <span data-ttu-id="f5638-115">這個方法適用於無論 hello 應用程式服務環境的所有會部署在單一 Azure 區域中，或是部署到多個 Azure 區域在全球各地。</span><span class="sxs-lookup"><span data-stu-id="f5638-115">This approach works regardless of whether all of hello App Service Environments are deployed in a single Azure region, or deployed worldwide across multiple Azure regions.</span></span>

<span data-ttu-id="f5638-116">此外，由於客戶透過 hello 虛名網域存取應用程式，客戶不知道執行應用程式的應用程式服務環境的 hello 數量。</span><span class="sxs-lookup"><span data-stu-id="f5638-116">Furthermore, since customers access apps through hello vanity domain, customers are unaware of hello number of App Service Environments running an app.</span></span>  <span data-ttu-id="f5638-117">因此，開發人員可以根據觀察到的流量負載，快速且輕鬆地新增和移除 App Service 環境。</span><span class="sxs-lookup"><span data-stu-id="f5638-117">As a result developers can quickly and easily add, and remove, App Service Environments based on observed traffic load.</span></span>

<span data-ttu-id="f5638-118">hello 下的概念圖描繪在單一區域內的三個應用程式服務環境水平延展的應用程式。</span><span class="sxs-lookup"><span data-stu-id="f5638-118">hello conceptual diagram below depicts an app horizontally scaled out across three App Service Environments within a single region.</span></span>

![概念性架構][ConceptualArchitecture] 

<span data-ttu-id="f5638-120">hello 本主題剩下的逐步解說設定使用多個應用程式服務環境的 hello 範例應用程式在分散式拓撲所需的 hello 步驟。</span><span class="sxs-lookup"><span data-stu-id="f5638-120">hello remainder of this topic walks through hello steps involved with setting up a distributed topology for hello sample app using multiple App Service Environments.</span></span>

## <a name="planning-hello-topology"></a><span data-ttu-id="f5638-121">規劃 hello 拓樸</span><span class="sxs-lookup"><span data-stu-id="f5638-121">Planning hello Topology</span></span>
<span data-ttu-id="f5638-122">建立分散式應用程式使用量時之前, 它有助於 toohave 事先少數的片段資訊。</span><span class="sxs-lookup"><span data-stu-id="f5638-122">Before building out a distributed app footprint, it helps toohave a few pieces information ahead of time.</span></span>

* <span data-ttu-id="f5638-123">**Hello 應用程式的自訂網域：** hello 客戶將會使用 tooaccess hello 應用程式的自訂網域名稱為何？</span><span class="sxs-lookup"><span data-stu-id="f5638-123">**Custom domain for hello app:**  What is hello custom domain name that customers will use tooaccess hello app?</span></span>  <span data-ttu-id="f5638-124">Hello 範例應用程式 hello 自訂網域名稱是*www.scalableasedemo.com*</span><span class="sxs-lookup"><span data-stu-id="f5638-124">For hello sample app hello custom domain name is *www.scalableasedemo.com*</span></span>
* <span data-ttu-id="f5638-125">**Traffic Manager 網域：**網域名稱必須選擇建立時的 toobe [Azure 流量管理員設定檔][AzureTrafficManagerProfile]。</span><span class="sxs-lookup"><span data-stu-id="f5638-125">**Traffic Manager domain:**  A domain name needs toobe chosen when creating an [Azure Traffic Manager profile][AzureTrafficManagerProfile].</span></span>  <span data-ttu-id="f5638-126">此名稱將會結合 hello *trafficmanager.net*尾碼 tooregister Traffic Manager 所管理的網域項目。</span><span class="sxs-lookup"><span data-stu-id="f5638-126">This name will be combined with hello *trafficmanager.net* suffix tooregister a domain entry that is managed by Traffic Manager.</span></span>  <span data-ttu-id="f5638-127">Hello 範例應用程式中，為 hello 名稱選擇*可擴充 ase 示範*。</span><span class="sxs-lookup"><span data-stu-id="f5638-127">For hello sample app, hello name chosen is *scalable-ase-demo*.</span></span>  <span data-ttu-id="f5638-128">如此一來 hello Traffic Manager 所管理的完整網域名稱是*可擴充 ase demo.trafficmanager.net*。</span><span class="sxs-lookup"><span data-stu-id="f5638-128">As a result hello full domain name that is managed by Traffic Manager is *scalable-ase-demo.trafficmanager.net*.</span></span>
* <span data-ttu-id="f5638-129">**縮放比例 hello 應用程式使用量的策略：**將 hello 應用程式使用量會分佈在單一區域中的多個應用程式服務環境嗎？</span><span class="sxs-lookup"><span data-stu-id="f5638-129">**Strategy for scaling hello app footprint:**  Will hello application footprint be distributed across multiple App Service Environments in a single region?</span></span>  <span data-ttu-id="f5638-130">多個區域嗎？</span><span class="sxs-lookup"><span data-stu-id="f5638-130">Multiple regions?</span></span>  <span data-ttu-id="f5638-131">兩種方法混合搭配使用嗎？</span><span class="sxs-lookup"><span data-stu-id="f5638-131">A mix-and-match of both approaches?</span></span>  <span data-ttu-id="f5638-132">hello 決策應該根據預期客戶流量將產生的位置，以及如何以及 hello rest 應用程式的支援後端基礎結構可以調整。</span><span class="sxs-lookup"><span data-stu-id="f5638-132">hello decision should be based on expectations of where customer traffic will originate, as well as how well hello rest of an app's supporting back-end infrastructure can scale.</span></span>  <span data-ttu-id="f5638-133">例如，對於 100% 無狀態的應用程式，可以使用每一 Azure 區域多個 App Service 環境的組合，乘以跨多個 Azure 區域部署的 App Service 環境數，來大幅調整應用程式。</span><span class="sxs-lookup"><span data-stu-id="f5638-133">For example, with a 100% stateless application, an app can be massively scaled using a combination of multiple App Service Environments per Azure region,  multiplied by App Service Environments deployed across multiple Azure regions.</span></span>  <span data-ttu-id="f5638-134">透過從 15 + 公用 Azure 地區可用 toochoose，客戶可以真正建置全球大規模應用程式使用量。</span><span class="sxs-lookup"><span data-stu-id="f5638-134">With 15+ public Azure regions available toochoose from, customers can truly build a world-wide hyper-scale application footprint.</span></span>  <span data-ttu-id="f5638-135">Hello 範例應用程式中使用這個發行項，單一 Azure 區域 （美國中南部） 中建立三個應用程式服務環境。</span><span class="sxs-lookup"><span data-stu-id="f5638-135">For hello sample app used for this article, three App Service Environments were created in a single Azure region (South Central US).</span></span>
* <span data-ttu-id="f5638-136">**Hello 應用程式服務環境的命名慣例：**每個 App Service 環境名稱必須是唯一。</span><span class="sxs-lookup"><span data-stu-id="f5638-136">**Naming convention for hello App Service Environments:**  Each App Service Environment requires a unique name.</span></span>  <span data-ttu-id="f5638-137">一或兩個應用程式服務環境之外，它是很有幫助 toohave 命名慣例 toohelp 識別每個 App Service 環境。</span><span class="sxs-lookup"><span data-stu-id="f5638-137">Beyond one or two App Service Environments it is helpful toohave a naming convention toohelp identify each App Service Environment.</span></span>  <span data-ttu-id="f5638-138">Hello 範例應用程式使用簡單的命名慣例。</span><span class="sxs-lookup"><span data-stu-id="f5638-138">For hello sample app a simple naming convention was used.</span></span>  <span data-ttu-id="f5638-139">hello hello 三個應用程式服務環境的名稱是*fe1ase*， *fe2ase*，和*fe3ase*。</span><span class="sxs-lookup"><span data-stu-id="f5638-139">hello names of hello three App Service Environments are *fe1ase*, *fe2ase*, and *fe3ase*.</span></span>
* <span data-ttu-id="f5638-140">**Hello 應用程式的命名慣例：**將部署的 hello 應用程式的多個執行個體，因為每個執行個體部署的 hello 應用程式需要名稱。</span><span class="sxs-lookup"><span data-stu-id="f5638-140">**Naming convention for hello apps:**  Since multiple instances of hello app will be deployed, a name is needed for each instance of hello deployed app.</span></span>  <span data-ttu-id="f5638-141">應用程式服務環境的一項小已知但很方便功能是相同的應用程式名稱可跨多個應用程式服務環境的 hello。</span><span class="sxs-lookup"><span data-stu-id="f5638-141">One little-known but very convenient feature of App Service Environments is that hello same app name can be used across multiple App Service Environments.</span></span>  <span data-ttu-id="f5638-142">因為每個應用程式服務環境都有唯一的網域尾碼，開發人員可以選擇 toore 使用 hello 完全相同的應用程式的名稱，每個環境中。</span><span class="sxs-lookup"><span data-stu-id="f5638-142">Since each App Service Environment has a unique domain suffix, developers can choose toore-use hello exact same app name in each environment.</span></span>  <span data-ttu-id="f5638-143">例如，開發人員可以將應用程式命名如下：myapp.foo1.p.azurewebsites.net、myapp.foo2.p.azurewebsites.net、myapp.foo3.p.azurewebsites.net，依此類推。Hello 範例應用程式透過每個應用程式執行個體也都有唯一名稱。</span><span class="sxs-lookup"><span data-stu-id="f5638-143">For example a developer could have apps named as follows:  *myapp.foo1.p.azurewebsites.net*, *myapp.foo2.p.azurewebsites.net*, *myapp.foo3.p.azurewebsites.net*, etc.  For hello sample app though each app instance also has a unique name.</span></span>  <span data-ttu-id="f5638-144">hello 所使用的應用程式執行個體名稱是*webfrontend1*， *webfrontend2*，和*webfrontend3*。</span><span class="sxs-lookup"><span data-stu-id="f5638-144">hello app instance names used are *webfrontend1*, *webfrontend2*, and *webfrontend3*.</span></span>

## <a name="setting-up-hello-traffic-manager-profile"></a><span data-ttu-id="f5638-145">Hello Traffic Manager 設定檔設定</span><span class="sxs-lookup"><span data-stu-id="f5638-145">Setting up hello Traffic Manager Profile</span></span>
<span data-ttu-id="f5638-146">一旦應用程式的多個執行個體部署在多個應用程式服務環境，hello 個別的應用程式執行個體可以註冊使用 Traffic Manager。</span><span class="sxs-lookup"><span data-stu-id="f5638-146">Once multiple instances of an app are deployed on multiple App Service Environments, hello  individual app instances can be registered with Traffic Manager.</span></span>  <span data-ttu-id="f5638-147">Hello 範例應用程式流量管理員設定檔所需的*可擴充 ase demo.trafficmanager.net* ，可以路由傳送客戶部署的 hello 遵循 tooany 應用程式執行個體：</span><span class="sxs-lookup"><span data-stu-id="f5638-147">For hello sample app a Traffic Manager profile is needed for *scalable-ase-demo.trafficmanager.net* that can route customers tooany of hello following deployed app instances:</span></span>

* <span data-ttu-id="f5638-148">**webfrontend1.fe1ase.p.azurewebsites.net:** hello 範例應用程式上部署的執行個體 hello 第一個 App Service 環境。</span><span class="sxs-lookup"><span data-stu-id="f5638-148">**webfrontend1.fe1ase.p.azurewebsites.net:**  An instance of hello sample app deployed on hello first App Service Environment.</span></span>
* <span data-ttu-id="f5638-149">**webfrontend2.fe2ase.p.azurewebsites.net:** hello 範例應用程式上部署的執行個體 hello 第二個 App Service 環境。</span><span class="sxs-lookup"><span data-stu-id="f5638-149">**webfrontend2.fe2ase.p.azurewebsites.net:**  An instance of hello sample app deployed on hello second App Service Environment.</span></span>
* <span data-ttu-id="f5638-150">**webfrontend3.fe3ase.p.azurewebsites.net:** hello 範例應用程式上部署的執行個體 hello 第三個的 App Service 環境。</span><span class="sxs-lookup"><span data-stu-id="f5638-150">**webfrontend3.fe3ase.p.azurewebsites.net:**  An instance of hello sample app deployed on hello third App Service Environment.</span></span>

<span data-ttu-id="f5638-151">多個 Azure 應用程式服務端點，皆執行於 hello hello 最簡單的方式 tooregister**相同**Azure 區域中，是以 hello Powershell [Azure 資源管理員 Traffic Manager 支援][ARMTrafficManager].</span><span class="sxs-lookup"><span data-stu-id="f5638-151">hello easiest way tooregister multiple Azure App Service endpoints, all running in hello **same** Azure region, is with hello Powershell [Azure Resource Manager Traffic Manager support][ARMTrafficManager].</span></span>  

<span data-ttu-id="f5638-152">hello 第一個步驟是 toocreate Azure Traffic Manager 設定檔。</span><span class="sxs-lookup"><span data-stu-id="f5638-152">hello first step is toocreate an Azure Traffic Manager profile.</span></span>  <span data-ttu-id="f5638-153">下列程式碼 hello 顯示 hello 設定檔的建立 hello 範例應用程式的方式：</span><span class="sxs-lookup"><span data-stu-id="f5638-153">hello code below shows how hello profile was created for hello sample app:</span></span>

    $profile = New-AzureTrafficManagerProfile –Name scalableasedemo -ResourceGroupName yourRGNameHere -TrafficRoutingMethod Weighted -RelativeDnsName scalable-ase-demo -Ttl 30 -MonitorProtocol HTTP -MonitorPort 80 -MonitorPath "/"

<span data-ttu-id="f5638-154">請注意如何 hello *RelativeDnsName*參數已設定太*可擴充 ase 示範*。</span><span class="sxs-lookup"><span data-stu-id="f5638-154">Notice how hello *RelativeDnsName* parameter was set too*scalable-ase-demo*.</span></span>  <span data-ttu-id="f5638-155">這是如何 hello 網域名稱*可擴充 ase demo.trafficmanager.net*建立並與流量管理員設定檔相關聯。</span><span class="sxs-lookup"><span data-stu-id="f5638-155">This is how hello domain name *scalable-ase-demo.trafficmanager.net* is created and associated with a Traffic Manager profile.</span></span>

<span data-ttu-id="f5638-156">hello *TrafficRoutingMethod*參數會定義 hello 負載平衡的原則 Traffic Manager 將使用的 toodetermine toospread 客戶如何載入所有 hello 可用的端點。</span><span class="sxs-lookup"><span data-stu-id="f5638-156">hello *TrafficRoutingMethod* parameter defines hello load balancing policy Traffic Manager will use toodetermine how toospread customer load across all of hello available endpoints.</span></span>  <span data-ttu-id="f5638-157">在此範例 hello*加權*選擇的方法。</span><span class="sxs-lookup"><span data-stu-id="f5638-157">In this example hello *Weighted* method was chosen.</span></span>  <span data-ttu-id="f5638-158">這將導致客戶的要求會分散在所有的 hello 與每個端點相關聯的相對加權為基礎的 hello 註冊應用程式端點。</span><span class="sxs-lookup"><span data-stu-id="f5638-158">This will result in customer requests being spread across all of hello registered application endpoints based on hello relative weights associated with each endpoint.</span></span> 

<span data-ttu-id="f5638-159">建立 hello 設定檔，每個應用程式執行個體就會以原生的 Azure 端點加入 toohello 設定檔。</span><span class="sxs-lookup"><span data-stu-id="f5638-159">With hello profile created, each app instance is added toohello profile as a native Azure endpoint.</span></span>  <span data-ttu-id="f5638-160">hello 的下列程式碼會擷取參考 tooeach 前端 web 應用程式，並將每個應用程式為透過 hello Traffic Manager 端點*TargetResourceId*參數。</span><span class="sxs-lookup"><span data-stu-id="f5638-160">hello code below fetches a reference tooeach front end web app, and then adds each app as a Traffic Manager endpoint by way of hello *TargetResourceId* parameter.</span></span>

    $webapp1 = Get-AzureRMWebApp -Name webfrontend1
    Add-AzureTrafficManagerEndpointConfig –EndpointName webfrontend1 –TrafficManagerProfile $profile –Type AzureEndpoints -TargetResourceId $webapp1.Id –EndpointStatus Enabled –Weight 10

    $webapp2 = Get-AzureRMWebApp -Name webfrontend2
    Add-AzureTrafficManagerEndpointConfig –EndpointName webfrontend2 –TrafficManagerProfile $profile –Type AzureEndpoints -TargetResourceId $webapp2.Id –EndpointStatus Enabled –Weight 10

    $webapp3 = Get-AzureRMWebApp -Name webfrontend3
    Add-AzureTrafficManagerEndpointConfig –EndpointName webfrontend3 –TrafficManagerProfile $profile –Type AzureEndpoints -TargetResourceId $webapp3.Id –EndpointStatus Enabled –Weight 10

    Set-AzureTrafficManagerProfile –TrafficManagerProfile $profile

<span data-ttu-id="f5638-161">請注意一個呼叫太*新增 AzureTrafficManagerEndpointConfig*每個個別的應用程式執行個體。</span><span class="sxs-lookup"><span data-stu-id="f5638-161">Notice how there is one call too*Add-AzureTrafficManagerEndpointConfig* for each individual app instance.</span></span>  <span data-ttu-id="f5638-162">hello *TargetResourceId*參數在每個 Powershell 命令參考其中一個 hello 三個已部署的應用程式執行個體。</span><span class="sxs-lookup"><span data-stu-id="f5638-162">hello *TargetResourceId* parameter in each Powershell command references one of hello three deployed app instances.</span></span>  <span data-ttu-id="f5638-163">hello Traffic Manager 設定檔會將負載分散在 hello 設定檔中註冊的所有三個端點。</span><span class="sxs-lookup"><span data-stu-id="f5638-163">hello Traffic Manager profile will spread load across all three endpoints registered in hello profile.</span></span>

<span data-ttu-id="f5638-164">所有的三個端點使用的 hello hello 相同的值 (10) hello*加權*參數。</span><span class="sxs-lookup"><span data-stu-id="f5638-164">All of hello three endpoints use hello same value (10) for hello *Weight* parameter.</span></span>  <span data-ttu-id="f5638-165">這會使流量管理員將客戶要求較平均地分散在所有的三個應用程式執行個體間。</span><span class="sxs-lookup"><span data-stu-id="f5638-165">This results in Traffic Manager spreading customer requests across all three app instances relatively evenly.</span></span> 

## <a name="pointing-hello-apps-custom-domain-at-hello-traffic-manager-domain"></a><span data-ttu-id="f5638-166">指在 hello Traffic Manager 網域 hello 應用程式的自訂網域</span><span class="sxs-lookup"><span data-stu-id="f5638-166">Pointing hello App's Custom Domain at hello Traffic Manager Domain</span></span>
<span data-ttu-id="f5638-167">hello 所需的最後一個步驟是 toopoint hello 自訂網域的 hello 應用程式在 hello Traffic Manager 網域。</span><span class="sxs-lookup"><span data-stu-id="f5638-167">hello final step necessary is toopoint hello custom domain of hello app at hello Traffic Manager domain.</span></span>  <span data-ttu-id="f5638-168">這表示 hello 範例應用程式指向*www.scalableasedemo.com*在*可擴充 ase demo.trafficmanager.net*。</span><span class="sxs-lookup"><span data-stu-id="f5638-168">For hello sample app this means pointing *www.scalableasedemo.com* at *scalable-ase-demo.trafficmanager.net*.</span></span>  <span data-ttu-id="f5638-169">此步驟需要 toobe 已完成，但 hello 網域註冊機構管理 hello 自訂網域。</span><span class="sxs-lookup"><span data-stu-id="f5638-169">This step needs toobe completed with hello domain registrar that manages hello custom domain.</span></span>  

<span data-ttu-id="f5638-170">CNAME 記錄需求 toobe 使用您的註冊機構的網域管理工具，在 hello Traffic Manager 網域建立的點 hello 自訂網域。</span><span class="sxs-lookup"><span data-stu-id="f5638-170">Using your registrar's domain management tools, a CNAME records needs toobe created which points hello custom domain at hello Traffic Manager domain.</span></span>  <span data-ttu-id="f5638-171">hello 圖示範此 CNAME 組態看起來像：</span><span class="sxs-lookup"><span data-stu-id="f5638-171">hello picture below shows an example of what this CNAME configuration looks like:</span></span>

![自訂網域的 CNAME][CNAMEforCustomDomain] 

<span data-ttu-id="f5638-173">雖然未涵蓋在本主題中，請記住每個個別的應用程式執行個體必須已向它註冊以及 toohave hello 自訂網域。</span><span class="sxs-lookup"><span data-stu-id="f5638-173">Although not covered in this topic, remember that each individual app instance needs toohave hello custom domain registered with it as well.</span></span>  <span data-ttu-id="f5638-174">否則要求可讓 tooan 應用程式執行個體，並 hello 應用程式沒有 hello hello 應用程式註冊的自訂網域，如果 hello 要求將會失敗。</span><span class="sxs-lookup"><span data-stu-id="f5638-174">Otherwise if a request makes it tooan app instance, and hello application does not have hello custom domain registered with hello app, hello request will fail.</span></span>  

<span data-ttu-id="f5638-175">在此範例 hello 自訂網域是*www.scalableasedemo.com*，且每個應用程式執行個體具有 hello 與它相關聯的自訂網域。</span><span class="sxs-lookup"><span data-stu-id="f5638-175">In this example hello custom domain is *www.scalableasedemo.com*, and each application instance has hello custom domain associated with it.</span></span>

![自訂網域][CustomDomain] 

<span data-ttu-id="f5638-177">向 Azure App Service 應用程式註冊自訂網域的概述，請參閱下列文章 hello[註冊自訂網域][RegisterCustomDomain]。</span><span class="sxs-lookup"><span data-stu-id="f5638-177">For a recap of of registering a custom domain with Azure App Service apps, see hello following article on [registering custom domains][RegisterCustomDomain].</span></span>

## <a name="trying-out-hello-distributed-topology"></a><span data-ttu-id="f5638-178">試用 hello 分散式拓撲</span><span class="sxs-lookup"><span data-stu-id="f5638-178">Trying out hello Distributed Topology</span></span>
<span data-ttu-id="f5638-179">hello hello Traffic Manager 和 DNS 設定最終結果是，要求*www.scalableasedemo.com*將通過 hello 下列順序：</span><span class="sxs-lookup"><span data-stu-id="f5638-179">hello end result of hello Traffic Manager and DNS configuration is that requests for *www.scalableasedemo.com* will flow through hello following sequence:</span></span>

1. <span data-ttu-id="f5638-180">瀏覽器或裝置執行 *www.scalableasedemo.com*</span><span class="sxs-lookup"><span data-stu-id="f5638-180">A browser or device will make a DNS lookup for *www.scalableasedemo.com*</span></span>
2. <span data-ttu-id="f5638-181">hello hello 網域註冊機構的 CNAME 項目會導致 hello DNS 查閱重新導向 toobe tooAzure Traffic Manager。</span><span class="sxs-lookup"><span data-stu-id="f5638-181">hello CNAME entry at hello domain registrar causes hello DNS lookup toobe redirected tooAzure Traffic Manager.</span></span>
3. <span data-ttu-id="f5638-182">針對提出 DNS 查閱*可擴充 ase demo.trafficmanager.net* hello Azure Traffic Manager DNS 伺服器的其中之一。</span><span class="sxs-lookup"><span data-stu-id="f5638-182">A DNS lookup is made for *scalable-ase-demo.trafficmanager.net* against one of hello Azure Traffic Manager DNS servers.</span></span>
4. <span data-ttu-id="f5638-183">根據 hello 負載平衡原則 (hello *TrafficRoutingMethod*建立 hello Traffic Manager 設定檔時，請使用稍早的參數)，Traffic Manager 就會選取其中一個 hello 設定端點，並且傳回 hello 的 FQDN端點 toohello 瀏覽器或裝置。</span><span class="sxs-lookup"><span data-stu-id="f5638-183">Based on hello load balancing policy (hello *TrafficRoutingMethod* parameter used earlier when creating hello Traffic Manager profile), Traffic Manager will select one of hello configured endpoints and return hello FQDN of that endpoint toohello browser or device.</span></span>
5. <span data-ttu-id="f5638-184">由於 hello hello 端點的 FQDN 是 hello 的 App Service 環境上執行的應用程式執行個體的 Url，hello 瀏覽器或裝置會要求 Microsoft Azure DNS 伺服器 tooresolve hello FQDN tooan IP 位址。</span><span class="sxs-lookup"><span data-stu-id="f5638-184">Since hello FQDN of hello endpoint is hello Url of an app instance running on an App Service Environment, hello browser or device will ask a Microsoft Azure DNS server tooresolve hello FQDN tooan IP address.</span></span> 
6. <span data-ttu-id="f5638-185">hello 瀏覽器或裝置將會傳送 hello HTTP/S 要求 toohello IP 位址。</span><span class="sxs-lookup"><span data-stu-id="f5638-185">hello browser or device will send hello HTTP/S request toohello IP address.</span></span>  
7. <span data-ttu-id="f5638-186">hello 要求會抵達其中一個 hello 部 hello 應用程式服務環境上執行的應用程式執行個體。</span><span class="sxs-lookup"><span data-stu-id="f5638-186">hello request will arrive at one of hello app instances running on one of hello App Service Environments.</span></span>

<span data-ttu-id="f5638-187">hello 主控台圖會顯示 hello 範例應用程式的自訂網域已成功解析 tooan 應用程式執行個體上 hello 三個範例應用程式服務環境的其中一個執行的 DNS 查閱 (在此情況下 hello hello 三個應用程式服務環境的第二個):</span><span class="sxs-lookup"><span data-stu-id="f5638-187">hello console picture below shows a DNS lookup for hello sample app's custom domain successfully resolving tooan app instance running on one of hello three sample App Service Environments (in this case hello second of hello three App Service Environments):</span></span>

![DNS 查閱][DNSLookup] 

## <a name="additional-links-and-information"></a><span data-ttu-id="f5638-189">其他連結和資訊</span><span class="sxs-lookup"><span data-stu-id="f5638-189">Additional Links and Information</span></span>
<span data-ttu-id="f5638-190">所有發行項以及-的應用程式服務環境的 hello[讀我檔案的應用程式服務環境](../app-service/app-service-app-service-environments-readme.md)。</span><span class="sxs-lookup"><span data-stu-id="f5638-190">All articles and How-To's for App Service Environments are available in hello [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="f5638-191">文件上 hello Powershell [Azure 資源管理員 Traffic Manager 支援][ARMTrafficManager]。</span><span class="sxs-lookup"><span data-stu-id="f5638-191">Documentation on hello Powershell [Azure Resource Manager Traffic Manager support][ARMTrafficManager].</span></span>  

[!INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[!INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!-- LINKS -->
[AzureTrafficManagerProfile]: ../traffic-manager/traffic-manager-manage-profiles.md
[ARMTrafficManager]: ../traffic-manager/traffic-manager-powershell-arm.md
[RegisterCustomDomain]: app-service-web-tutorial-custom-domain.md


<!-- IMAGES -->
[ConceptualArchitecture]: ./media/app-service-app-service-environment-geo-distributed-scale/ConceptualArchitecture-1.png
[CNAMEforCustomDomain]:  ./media/app-service-app-service-environment-geo-distributed-scale/CNAMECustomDomain-1.png
[DNSLookup]:  ./media/app-service-app-service-environment-geo-distributed-scale/DNSLookup-1.png
[CustomDomain]:  ./media/app-service-app-service-environment-geo-distributed-scale/CustomDomain-1.png 
