---
title: "aaaExport hello Azure Cosmos DB 模擬器憑證 |Microsoft 文件"
description: "開發語言和執行階段，請勿使用 hello Windows 憑證存放區時將需要 tooexport，並管理 hello SSL 憑證。 這篇文章提供逐步指示。"
services: cosmos-db
documentationcenter: 
keywords: "Azure Cosmos DB 模擬器"
author: voellm
manager: jhubbard
editor: 
ms.assetid: ef43deda-c2e9-4193-99e2-7f6a88a0319f
ms.service: cosmos-db
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 06/06/2017
ms.author: tvoellm
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: db56cda856fccf93d71ae5b21c4090ccb9aa40a0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="export-hello-azure-cosmos-db-emulator-certificates-for-use-with-java-python-and-nodejs"></a><span data-ttu-id="5c371-105">搭配 Java、 Python 和 Node.js hello Azure Cosmos DB 模擬器憑證匯出</span><span class="sxs-lookup"><span data-stu-id="5c371-105">Export hello Azure Cosmos DB Emulator certificates for use with Java, Python, and Node.js</span></span>

[<span data-ttu-id="5c371-106">**下載 hello 模擬器**</span><span class="sxs-lookup"><span data-stu-id="5c371-106">**Download hello Emulator**</span></span>](https://aka.ms/cosmosdb-emulator)

<span data-ttu-id="5c371-107">hello Azure Cosmos DB 模擬器提供本機模擬的環境，hello Azure Cosmos 資料庫服務，為開發用途，包括其使用的 SSL 連線。</span><span class="sxs-lookup"><span data-stu-id="5c371-107">hello Azure Cosmos DB Emulator provides a local environment that emulates hello Azure Cosmos DB service for development purposes including its use of SSL connections.</span></span> <span data-ttu-id="5c371-108">這篇文章會示範如何 tooexport hello SSL 憑證以用於語言和未整合 hello Windows 憑證存放區，例如 Java 使用自己的執行階段[憑證存放區](https://docs.oracle.com/cd/E19830-01/819-4712/ablqw/index.html)，並將其使用Python[通訊端的包裝函式](https://docs.python.org/2/library/ssl.html)和使用 Node.js [tlsSocket](https://nodejs.org/api/tls.html#tls_tls_connect_options_callback)。</span><span class="sxs-lookup"><span data-stu-id="5c371-108">This post demonstrates how tooexport hello SSL certificates for use in languages and runtimes that do not integrate with hello Windows Certificate Store such as Java which uses its own [certificate store](https://docs.oracle.com/cd/E19830-01/819-4712/ablqw/index.html) and Python which uses [socket wrappers](https://docs.python.org/2/library/ssl.html) and Node.js which uses [tlsSocket](https://nodejs.org/api/tls.html#tls_tls_connect_options_callback).</span></span> <span data-ttu-id="5c371-109">閱讀更多關於中的 hello 模擬器[使用 hello Azure Cosmos DB 模擬器進行開發和測試](./local-emulator.md)。</span><span class="sxs-lookup"><span data-stu-id="5c371-109">You can read more about hello emulator in [Use hello Azure Cosmos DB Emulator for development and testing](./local-emulator.md).</span></span>

<span data-ttu-id="5c371-110">本教學課程涵蓋 hello 下列工作：</span><span class="sxs-lookup"><span data-stu-id="5c371-110">This tutorial covers hello following tasks:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="5c371-111">輪替憑證</span><span class="sxs-lookup"><span data-stu-id="5c371-111">Rotating certificates</span></span>
> * <span data-ttu-id="5c371-112">匯出 SSL 憑證</span><span class="sxs-lookup"><span data-stu-id="5c371-112">Exporting SSL certificate</span></span>
> * <span data-ttu-id="5c371-113">學習如何 toouse hello Java、 Python 和 Node.js 中的憑證</span><span class="sxs-lookup"><span data-stu-id="5c371-113">Learning how toouse hello certificate in Java, Python, and Node.js</span></span>

## <a name="certification-rotation"></a><span data-ttu-id="5c371-114">憑證旋轉</span><span class="sxs-lookup"><span data-stu-id="5c371-114">Certification rotation</span></span>

<span data-ttu-id="5c371-115">憑證在 hello Azure Cosmos DB 本機模擬器產生 hello hello 模擬器執行的第一次。</span><span class="sxs-lookup"><span data-stu-id="5c371-115">Certificates in hello Azure Cosmos DB Local Emulator are generated hello first time hello emulator is run.</span></span> <span data-ttu-id="5c371-116">有兩個憑證。</span><span class="sxs-lookup"><span data-stu-id="5c371-116">There are two certificates.</span></span> <span data-ttu-id="5c371-117">其中一個用來連線 toohello 本機模擬器，另一個用於管理 hello 模擬器中的機密資料。</span><span class="sxs-lookup"><span data-stu-id="5c371-117">One used for connecting toohello local emulator and one for managing secrets within hello emulator.</span></span> <span data-ttu-id="5c371-118">您想要 tooexport hello 憑證是 hello 易記名稱 」 DocumentDBEmulatorCertificate"hello 連線憑證。</span><span class="sxs-lookup"><span data-stu-id="5c371-118">hello certificate you want tooexport is hello connection certificate with hello friendly name "DocumentDBEmulatorCertificate".</span></span>

<span data-ttu-id="5c371-119">這兩個憑證，可以按一下重新產生**重設資料**從 Azure Cosmos DB 模擬器 hello Windows 系統匣中執行如下所示。</span><span class="sxs-lookup"><span data-stu-id="5c371-119">Both certificates can be regenerated by clicking **Reset Data** as shown below from Azure Cosmos DB Emulator running in hello Windows Tray.</span></span> <span data-ttu-id="5c371-120">如果您重新產生 hello 憑證和其安裝到 hello Java 憑證存放區或其他位置使用它們必須 tooupdate 它們，否則您的應用程式將無法再連接 toohello 本機模擬器。</span><span class="sxs-lookup"><span data-stu-id="5c371-120">If you regenerate hello certificates and have installed them into hello Java certificate store or used them elsewhere you will need tooupdate them, otherwise your application will no longer connect toohello local emulator.</span></span>

![Azure Cosmos DB 本機模擬器的重設資料](./media/local-emulator-export-ssl-certificates/database-local-emulator-reset-data.png)

## <a name="how-tooexport-hello-azure-cosmos-db-ssl-certificate"></a><span data-ttu-id="5c371-122">如何 tooexport hello Azure Cosmos DB SSL 憑證</span><span class="sxs-lookup"><span data-stu-id="5c371-122">How tooexport hello Azure Cosmos DB SSL certificate</span></span>

1. <span data-ttu-id="5c371-123">藉由執行 certlm.msc 啟動 hello Windows 憑證管理員，並瀏覽 toohello 個人-> 憑證 資料夾並開啟 hello 與 hello 易記名稱的憑證**DocumentDbEmulatorCertificate**。</span><span class="sxs-lookup"><span data-stu-id="5c371-123">Start hello Windows Certificate manager by running certlm.msc and navigate toohello Personal->Certificates folder and open hello certificate with hello friendly name **DocumentDbEmulatorCertificate**.</span></span>

    ![Azure Cosmos DB 本機模擬器的匯出步驟 1](./media/local-emulator-export-ssl-certificates/database-local-emulator-export-step-1.png)

2. <span data-ttu-id="5c371-125">按一下 [詳細資料]，然後按一下 [確定]。</span><span class="sxs-lookup"><span data-stu-id="5c371-125">Click on **Details** then **OK**.</span></span>

    ![Azure Cosmos DB 本機模擬器的匯出步驟 2](./media/local-emulator-export-ssl-certificates/database-local-emulator-export-step-2.png)

3. <span data-ttu-id="5c371-127">按一下**複製 tooFile...**.</span><span class="sxs-lookup"><span data-stu-id="5c371-127">Click **Copy tooFile...**.</span></span>

    ![Azure Cosmos DB 本機模擬器的匯出步驟 3](./media/local-emulator-export-ssl-certificates/database-local-emulator-export-step-3.png)

4. <span data-ttu-id="5c371-129">按一下 [下一步] 。</span><span class="sxs-lookup"><span data-stu-id="5c371-129">Click **Next**.</span></span>

    ![Azure Cosmos DB 本機模擬器的匯出步驟 4](./media/local-emulator-export-ssl-certificates/database-local-emulator-export-step-4.png)

5. <span data-ttu-id="5c371-131">按一下 [否，不要匯出私密金鑰 ]，然後按 [下一步]。</span><span class="sxs-lookup"><span data-stu-id="5c371-131">Click **No, do not export private key**, then click **Next**.</span></span>

    ![Azure Cosmos DB 本機模擬器的匯出步驟 5](./media/local-emulator-export-ssl-certificates/database-local-emulator-export-step-5.png)

6. <span data-ttu-id="5c371-133">按一下 [Base-64 編碼的 X.509 (.CER)]，然後按 [下一步]。</span><span class="sxs-lookup"><span data-stu-id="5c371-133">Click on **Base-64 encoded X.509 (.CER)** and then **Next**.</span></span>

    ![Azure Cosmos DB 本機模擬器的匯出步驟 6](./media/local-emulator-export-ssl-certificates/database-local-emulator-export-step-6.png)

7. <span data-ttu-id="5c371-135">指定 hello 憑證的名稱。</span><span class="sxs-lookup"><span data-stu-id="5c371-135">Give hello certificate a name.</span></span> <span data-ttu-id="5c371-136">此案例中為 **documentdbemulatorcert**，然後按 [下一步]。</span><span class="sxs-lookup"><span data-stu-id="5c371-136">In this case **documentdbemulatorcert** and then click **Next**.</span></span>

    ![Azure Cosmos DB 本機模擬器的匯出步驟 7](./media/local-emulator-export-ssl-certificates/database-local-emulator-export-step-7.png)

8. <span data-ttu-id="5c371-138">按一下 [完成] 。</span><span class="sxs-lookup"><span data-stu-id="5c371-138">Click **Finish**.</span></span>

    ![Azure Cosmos DB 本機模擬器的匯出步驟 8](./media/local-emulator-export-ssl-certificates/database-local-emulator-export-step-8.png)

## <a name="how-toouse-hello-certificate-in-java"></a><span data-ttu-id="5c371-140">如何 toouse hello 在 Java 中的憑證</span><span class="sxs-lookup"><span data-stu-id="5c371-140">How toouse hello certificate in Java</span></span>

<span data-ttu-id="5c371-141">執行 Java 應用程式或使用 hello Java 用戶端的 MongoDB 應用程式時，更容易 tooinstall hello hello Java 預設憑證存放區與憑證傳遞 hello"-Djavax.net.ssl.trustStore=<keystore> -Djavax.net.ssl.trustStorePassword="<password>」 旗標。</span><span class="sxs-lookup"><span data-stu-id="5c371-141">When running Java applications or MongoDB applications that use hello Java client it is easier tooinstall hello certificate into hello Java default certificate store than passing hello "-Djavax.net.ssl.trustStore=<keystore> -Djavax.net.ssl.trustStorePassword="<password>" flags.</span></span> <span data-ttu-id="5c371-142">如需範例包含的 hello [Java 示範應用程式](https://localhost:8081/_explorer/index.html)hello 預設憑證存放區而定。</span><span class="sxs-lookup"><span data-stu-id="5c371-142">For example hello included [Java Demo application](https://localhost:8081/_explorer/index.html) depends on hello default certificate store.</span></span>

<span data-ttu-id="5c371-143">遵循指示進行 hello hello[加入 Java CA 憑證存放區的憑證 toohello](https://docs.microsoft.com/azure/java-add-certificate-ca-store) tooimport hello X.509 憑證至 hello 預設 Java 憑證存放區。</span><span class="sxs-lookup"><span data-stu-id="5c371-143">Follow hello instructions in hello [Adding a Certificate toohello Java CA Certificates Store](https://docs.microsoft.com/azure/java-add-certificate-ca-store) tooimport hello X.509 certificate into hello default Java certificate store.</span></span> <span data-ttu-id="5c371-144">請記住，您會使用在 hello %java_home%目錄中執行 keytool 時。</span><span class="sxs-lookup"><span data-stu-id="5c371-144">Keep in mind you will be working in hello %JAVA_HOME% directory when running keytool.</span></span>

<span data-ttu-id="5c371-145">一次 hello"CosmosDBEmulatorCertificate"SSL 憑證已安裝應用程式應能 tooconnect，而且使用 hello 本機 Azure Cosmos DB 模擬器。</span><span class="sxs-lookup"><span data-stu-id="5c371-145">Once hello "CosmosDBEmulatorCertificate" SSL certificate is installed your application should be able tooconnect and use hello local Azure Cosmos DB Emulator.</span></span> <span data-ttu-id="5c371-146">如果您繼續 toohave 問題可能會想 toofollow hello[偵錯 SSL/TLS 連線](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/ReadDebug.html)發行項。</span><span class="sxs-lookup"><span data-stu-id="5c371-146">If you continue toohave trouble you may want toofollow hello [Debugging SSL/TLS Connections](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/ReadDebug.html) article.</span></span> <span data-ttu-id="5c371-147">很可能 hello 憑證未安裝到 hello %JAVA_HOME%/jre/lib/security/cacerts 存放區。</span><span class="sxs-lookup"><span data-stu-id="5c371-147">It is very likely hello certificate is not installed into hello %JAVA_HOME%/jre/lib/security/cacerts store.</span></span> <span data-ttu-id="5c371-148">針對非 hello 您更新的其中一個，例如，如果您有多個已安裝的 Java 應用程式的版本可能使用不同 cacerts 存放區。</span><span class="sxs-lookup"><span data-stu-id="5c371-148">For example if you have multiple installed versions of Java your application may be using a different cacerts store than hello one you updated.</span></span>

## <a name="how-toouse-hello-certificate-in-python"></a><span data-ttu-id="5c371-149">Toouse hello Python 中的憑證的方式</span><span class="sxs-lookup"><span data-stu-id="5c371-149">How toouse hello certificate in Python</span></span>

<span data-ttu-id="5c371-150">依預設 hello [Python SDK(version 2.0.0 or higher)](documentdb-sdk-python.md) hello DocumentDB API 將會無法再試一次並使用 hello SSL 憑證連接 toohello 本機模擬器時。</span><span class="sxs-lookup"><span data-stu-id="5c371-150">By default hello [Python SDK(version 2.0.0 or higher)](documentdb-sdk-python.md) for hello DocumentDB API will not try and use hello SSL certificate when connecting toohello local emulator.</span></span> <span data-ttu-id="5c371-151">如果您想要 toouse SSL 驗證，不過您可以依照 hello 中的 hello 範例[Python 通訊端的包裝函式](https://docs.python.org/2/library/ssl.html)文件。</span><span class="sxs-lookup"><span data-stu-id="5c371-151">If however you want toouse SSL validation you can follow hello examples in hello [Python socket wrappers](https://docs.python.org/2/library/ssl.html) documentation.</span></span>

## <a name="how-toouse-hello-certificate-in-nodejs"></a><span data-ttu-id="5c371-152">如何 toouse hello Node.js 中的憑證</span><span class="sxs-lookup"><span data-stu-id="5c371-152">How toouse hello certificate in Node.js</span></span>

<span data-ttu-id="5c371-153">依預設 hello [Node.js SDK(version 1.10.1 or higher)](documentdb-sdk-node.md) hello DocumentDB API 將會無法再試一次並使用 hello SSL 憑證連接 toohello 本機模擬器時。</span><span class="sxs-lookup"><span data-stu-id="5c371-153">By default hello [Node.js SDK(version 1.10.1 or higher)](documentdb-sdk-node.md) for hello DocumentDB API will not try and use hello SSL certificate when connecting toohello local emulator.</span></span> <span data-ttu-id="5c371-154">如果您想要 toouse SSL 驗證，不過您可以依照 hello 中的 hello 範例[Node.js 文件集](https://nodejs.org/api/tls.html#tls_tls_connect_options_callback)。</span><span class="sxs-lookup"><span data-stu-id="5c371-154">If however you want toouse SSL validation you can follow hello examples in hello [Node.js documentation](https://nodejs.org/api/tls.html#tls_tls_connect_options_callback).</span></span>

## <a name="next-steps"></a><span data-ttu-id="5c371-155">後續步驟</span><span class="sxs-lookup"><span data-stu-id="5c371-155">Next steps</span></span>

<span data-ttu-id="5c371-156">在本教學課程中，您們 hello 下列：</span><span class="sxs-lookup"><span data-stu-id="5c371-156">In this tutorial, you've done hello following:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="5c371-157">輪替憑證</span><span class="sxs-lookup"><span data-stu-id="5c371-157">Rotated certificates</span></span>
> * <span data-ttu-id="5c371-158">匯出的 hello SSL 憑證</span><span class="sxs-lookup"><span data-stu-id="5c371-158">Exported hello SSL certificate</span></span>
> * <span data-ttu-id="5c371-159">學到如何 toouse hello Java、 Python 和 Node.js 中的憑證</span><span class="sxs-lookup"><span data-stu-id="5c371-159">Learned how toouse hello certificate in Java, Python and Node.js</span></span>

<span data-ttu-id="5c371-160">您可以現在繼續 toohello 概念 > 一節，如需有關 Cosmos DB。</span><span class="sxs-lookup"><span data-stu-id="5c371-160">You can now proceed toohello Concepts section for more information about Cosmos DB.</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="5c371-161">全球發佈</span><span class="sxs-lookup"><span data-stu-id="5c371-161">Global distribution</span></span>](distribute-data-globally.md) 
