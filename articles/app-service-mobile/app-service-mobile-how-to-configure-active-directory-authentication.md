---
title: "aaaHow tooconfigure Azure Active Directory 驗證您的應用程式服務應用程式"
description: "深入了解如何 tooconfigure Azure Active Directory 驗證您的應用程式服務應用程式。"
author: mattchenderson
services: app-service
documentationcenter: 
manager: syntaxc4
editor: 
ms.assetid: 6ec6a46c-bce4-47aa-b8a3-e133baef22eb
ms.service: app-service-mobile
ms.workload: mobile
ms.tgt_pltfrm: na
ms.devlang: multiple
ms.topic: article
ms.date: 10/01/2016
ms.author: mahender
ms.openlocfilehash: 5b1d73f8fdf5831a266d900cd07f4e3b0917a7f7
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooconfigure-your-app-service-application-toouse-azure-active-directory-login"></a><span data-ttu-id="769f6-103">如何 tooconfigure 您 App Service 應用程式 toouse 的 Azure Active Directory 登入</span><span class="sxs-lookup"><span data-stu-id="769f6-103">How tooconfigure your App Service application toouse Azure Active Directory login</span></span>
[!INCLUDE [app-service-mobile-selector-authentication](../../includes/app-service-mobile-selector-authentication.md)]

<span data-ttu-id="769f6-104">本主題說明如何 tooconfigure Azure 應用程式服務 toouse 作為驗證提供者的 Azure Active Directory。</span><span class="sxs-lookup"><span data-stu-id="769f6-104">This topic shows you how tooconfigure Azure App Services toouse Azure Active Directory as an authentication provider.</span></span>

## <span data-ttu-id="769f6-105"><a name="express"> </a>使用快速設定設定 Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="769f6-105"><a name="express"> </a>Configure Azure Active Directory using express settings</span></span>
1. <span data-ttu-id="769f6-106">在 hello [Azure 入口網站]，瀏覽 tooyour 應用程式。</span><span class="sxs-lookup"><span data-stu-id="769f6-106">In hello [Azure portal], navigate tooyour application.</span></span> <span data-ttu-id="769f6-107">依序按一下 [設定] 及 [驗證/授權]。</span><span class="sxs-lookup"><span data-stu-id="769f6-107">Click **Settings**, and then **Authentication/Authorization**.</span></span>
2. <span data-ttu-id="769f6-108">如果 hello 驗證 / 授權功能未啟用，請開啟 hello 參數太**上**。</span><span class="sxs-lookup"><span data-stu-id="769f6-108">If hello Authentication / Authorization feature is not enabled, turn hello switch too**On**.</span></span>
3. <span data-ttu-id="769f6-109">按一下 Azure Active Directory，然後按一下管理模式 下方的 快速。</span><span class="sxs-lookup"><span data-stu-id="769f6-109">Click **Azure Active Directory**, and then click **Express** under **Management Mode**.</span></span>
4. <span data-ttu-id="769f6-110">按一下**確定**tooregister hello 應用程式在 Azure Active Directory 中的。</span><span class="sxs-lookup"><span data-stu-id="769f6-110">Click **OK** tooregister hello application in Azure Active Directory.</span></span> <span data-ttu-id="769f6-111">這樣會建立新的註冊。</span><span class="sxs-lookup"><span data-stu-id="769f6-111">This will create a new registration.</span></span> <span data-ttu-id="769f6-112">如果要改為 toochoose 現有的註冊，請按一下**選取現有的應用程式**然後搜尋 hello 先前建立的登錄您的租用戶內的名稱。</span><span class="sxs-lookup"><span data-stu-id="769f6-112">If you want toochoose an existing registration instead, click **Select an existing app** and then search for hello name of a previously created registration within your tenant.</span></span>
   <span data-ttu-id="769f6-113">它並按一下 按一下 hello 註冊 tooselect**確定**。</span><span class="sxs-lookup"><span data-stu-id="769f6-113">Click hello registration tooselect it and click **OK**.</span></span> <span data-ttu-id="769f6-114">然後按一下 [**確定**hello Azure Active Directory 設定] 刀鋒視窗上。</span><span class="sxs-lookup"><span data-stu-id="769f6-114">Then click **OK** on hello Azure Active Directory settings blade.</span></span>
   
   ![][0]
   
   <span data-ttu-id="769f6-115">根據預設，應用程式服務提供驗證但不會限制授權的存取 tooyour 網站內容和應用程式開發介面。</span><span class="sxs-lookup"><span data-stu-id="769f6-115">By default, App Service provides authentication but does not restrict authorized access tooyour site content and APIs.</span></span> <span data-ttu-id="769f6-116">您必須在應用程式程式碼中授權使用者。</span><span class="sxs-lookup"><span data-stu-id="769f6-116">You must authorize users in your app code.</span></span>
5. <span data-ttu-id="769f6-117">（選擇性） toorestrict 存取 tooyour 網站 tooonly 使用者驗證 Azure Active Directory 中，設定**當要求未經驗證的動作 tootake**太**登入 Azure Active Directory**。</span><span class="sxs-lookup"><span data-stu-id="769f6-117">(Optional) toorestrict access tooyour site tooonly users authenticated by Azure Active Directory, set **Action tootake when request is not authenticated** too**Log in with Azure Active Directory**.</span></span> <span data-ttu-id="769f6-118">這需要的所有要求經過都驗證，而且所有未經驗證的要求重新導向的 tooAzure Active Directory 進行驗證。</span><span class="sxs-lookup"><span data-stu-id="769f6-118">This requires that all requests be authenticated, and all unauthenticated requests are redirected tooAzure Active Directory for authentication.</span></span>
6. <span data-ttu-id="769f6-119">按一下 [儲存] 。</span><span class="sxs-lookup"><span data-stu-id="769f6-119">Click **Save**.</span></span>

<span data-ttu-id="769f6-120">現在您已準備好 toouse Azure Active Directory 進行驗證您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="769f6-120">You are now ready toouse Azure Active Directory for authentication in your app.</span></span>

## <span data-ttu-id="769f6-121"><a name="advanced"> </a>(替代方法) 使用進階設定手動設定 Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="769f6-121"><a name="advanced"> </a>(Alternative method) Manually configure Azure Active Directory with advanced settings</span></span>
<span data-ttu-id="769f6-122">您也可以選擇 tooprovide 組態設定以手動方式。</span><span class="sxs-lookup"><span data-stu-id="769f6-122">You can also choose tooprovide configuration settings manually.</span></span> <span data-ttu-id="769f6-123">如果您想 toouse hello AAD 租用戶不同於您登入 Azure 的 hello 租用戶，這是慣用的 hello 方案。</span><span class="sxs-lookup"><span data-stu-id="769f6-123">This is hello preferred solution if hello AAD tenant you wish toouse is different from hello tenant with which you sign into Azure.</span></span> <span data-ttu-id="769f6-124">toocomplete hello 組態中，您必須先建立註冊 Azure Active Directory 中，您就必須提供一些 hello 註冊詳細資料 tooApp 服務。</span><span class="sxs-lookup"><span data-stu-id="769f6-124">toocomplete hello configuration, you must first create a registration in Azure Active Directory, and then you must provide some of hello registration details tooApp Service.</span></span>

### <span data-ttu-id="769f6-125"><a name="register"> </a>向 Azure Active Directory 註冊您的應用程式</span><span class="sxs-lookup"><span data-stu-id="769f6-125"><a name="register"> </a>Register your application with Azure Active Directory</span></span>
1. <span data-ttu-id="769f6-126">登入 toohello [Azure 入口網站]，並瀏覽 tooyour 應用程式。</span><span class="sxs-lookup"><span data-stu-id="769f6-126">Log on toohello [Azure portal], and navigate tooyour application.</span></span> <span data-ttu-id="769f6-127">複製您的 **URL**。</span><span class="sxs-lookup"><span data-stu-id="769f6-127">Copy your **URL**.</span></span> <span data-ttu-id="769f6-128">您將使用此 tooconfigure Azure Active Directory 應用程式。</span><span class="sxs-lookup"><span data-stu-id="769f6-128">You will use this tooconfigure your Azure Active Directory app.</span></span>
2. <span data-ttu-id="769f6-129">登入 toohello [Azure 傳統入口網站]並瀏覽過**Active Directory**。</span><span class="sxs-lookup"><span data-stu-id="769f6-129">Sign in toohello [Azure classic portal] and navigate too**Active Directory**.</span></span>
   
    ![][2]
3. <span data-ttu-id="769f6-130">選取您的目錄，然後選取 hello**應用程式**hello 頂端的索引標籤。</span><span class="sxs-lookup"><span data-stu-id="769f6-130">Select your directory, and then select hello **Applications** tab at hello top.</span></span> <span data-ttu-id="769f6-131">按一下**新增**在 hello 底部 toocreate 新的應用程式註冊。</span><span class="sxs-lookup"><span data-stu-id="769f6-131">Click **ADD** at hello bottom toocreate a new app registration.</span></span>
4. <span data-ttu-id="769f6-132">按一下 [Add an application my organization is developing] 。</span><span class="sxs-lookup"><span data-stu-id="769f6-132">Click **Add an application my organization is developing**.</span></span>
5. <span data-ttu-id="769f6-133">在 hello 新增應用程式精靈中輸入**名稱**您的應用程式，按一下 hello **Web 應用程式和/或 Web API**型別。</span><span class="sxs-lookup"><span data-stu-id="769f6-133">In hello Add Application Wizard, enter a **Name** for your application and click hello  **Web Application And/Or Web API** type.</span></span> <span data-ttu-id="769f6-134">然後按一下 toocontinue。</span><span class="sxs-lookup"><span data-stu-id="769f6-134">Then click toocontinue.</span></span>
6. <span data-ttu-id="769f6-135">在 hello**登入 URL**方塊中，貼上您之前複製的 hello 應用程式 URL。</span><span class="sxs-lookup"><span data-stu-id="769f6-135">In hello **SIGN-ON URL** box, paste hello application URL you copied earlier.</span></span> <span data-ttu-id="769f6-136">輸入該相同的 URL hello**應用程式識別碼 URI**方塊。</span><span class="sxs-lookup"><span data-stu-id="769f6-136">Enter that same URL in hello **App ID URI** box.</span></span> <span data-ttu-id="769f6-137">然後按一下 toocontinue。</span><span class="sxs-lookup"><span data-stu-id="769f6-137">Then click toocontinue.</span></span>
7. <span data-ttu-id="769f6-138">一旦加入 hello 應用程式，按一下 hello**設定** 索引標籤。編輯 hello**回覆 URL**下**單一登入**toobe hello URL，加上 hello 路徑的應用程式的*/.auth/login/aad/callback*。</span><span class="sxs-lookup"><span data-stu-id="769f6-138">Once hello application has been added, click hello **Configure** tab. Edit hello **Reply URL** under **Single Sign-on** toobe hello URL of your application appended with hello path, */.auth/login/aad/callback*.</span></span> <span data-ttu-id="769f6-139">例如： `https://contoso.azurewebsites.net/.auth/login/aad/callback`。</span><span class="sxs-lookup"><span data-stu-id="769f6-139">For example, `https://contoso.azurewebsites.net/.auth/login/aad/callback`.</span></span> <span data-ttu-id="769f6-140">請確定您使用 hello HTTPS 配置。</span><span class="sxs-lookup"><span data-stu-id="769f6-140">Make sure that you are using hello HTTPS scheme.</span></span>
   
    ![][3]
8. <span data-ttu-id="769f6-141">按一下 [儲存] 。</span><span class="sxs-lookup"><span data-stu-id="769f6-141">Click **Save**.</span></span> <span data-ttu-id="769f6-142">然後複本 hello**用戶端識別碼**hello 應用程式。</span><span class="sxs-lookup"><span data-stu-id="769f6-142">Then copy hello **Client ID** for hello app.</span></span> <span data-ttu-id="769f6-143">您將設定您的應用程式 toouse 稍後。</span><span class="sxs-lookup"><span data-stu-id="769f6-143">You will configure your application toouse this later.</span></span>
9. <span data-ttu-id="769f6-144">Hello 底部命令列中，按一下 **檢視端點**，然後複製 hello 和**同盟中繼資料文件**URL 和下載的文件或瀏覽 tooit 瀏覽器中的。</span><span class="sxs-lookup"><span data-stu-id="769f6-144">In hello bottom command bar, click **View Endpoints**, and then copy hello **Federation Metadata Document** URL and download that document or navigate tooit in a browser.</span></span>
10. <span data-ttu-id="769f6-145">Hello 根目錄中**EntityDescriptor**項目，應該有**entityID** hello 表單的屬性`https://sts.windows.net/`後面接著 GUID 特定 tooyour 租用戶 （稱為 「 租用戶識別碼 」）。</span><span class="sxs-lookup"><span data-stu-id="769f6-145">Within hello root **EntityDescriptor** element, there should be an **entityID** attribute of hello form `https://sts.windows.net/` followed by a GUID specific tooyour tenant (called a "tenant ID").</span></span> <span data-ttu-id="769f6-146">複製這個值，此值將做為您的「簽發者 URL」 。</span><span class="sxs-lookup"><span data-stu-id="769f6-146">Copy this value - it will serve as your **Issuer URL**.</span></span> <span data-ttu-id="769f6-147">您將設定您的應用程式 toouse 稍後。</span><span class="sxs-lookup"><span data-stu-id="769f6-147">You will configure your application toouse this later.</span></span>

### <span data-ttu-id="769f6-148"><a name="secrets"></a>新增 Azure Active Directory 資訊 tooyour 應用程式</span><span class="sxs-lookup"><span data-stu-id="769f6-148"><a name="secrets"> </a>Add Azure Active Directory information tooyour application</span></span>
1. <span data-ttu-id="769f6-149">在 hello [Azure 入口網站]，瀏覽 tooyour 應用程式。</span><span class="sxs-lookup"><span data-stu-id="769f6-149">Back in hello [Azure portal], navigate tooyour application.</span></span> <span data-ttu-id="769f6-150">依序按一下 [設定] 及 [驗證/授權]。</span><span class="sxs-lookup"><span data-stu-id="769f6-150">Click **Settings**, and then **Authentication/Authorization**.</span></span>
2. <span data-ttu-id="769f6-151">如果未啟用 hello 驗證和授權功能，開啟 hello 參數太**上**。</span><span class="sxs-lookup"><span data-stu-id="769f6-151">If hello Authentication/Authorization feature is not enabled, turn hello switch too**On**.</span></span>
3. <span data-ttu-id="769f6-152">按一下 Azure Active Directory，然後按一下管理模式 下方的 進階。</span><span class="sxs-lookup"><span data-stu-id="769f6-152">Click **Azure Active Directory**, and then click **Advanced** under **Management Mode**.</span></span> <span data-ttu-id="769f6-153">貼上的用戶端識別碼 hello 和簽發者 URL 的哪些是您先前取得的值。</span><span class="sxs-lookup"><span data-stu-id="769f6-153">Paste in hello Client ID and Issuer URL value which you obtained previously.</span></span> <span data-ttu-id="769f6-154">然後按一下 [確定] 。</span><span class="sxs-lookup"><span data-stu-id="769f6-154">Then click **OK**.</span></span>
   
   ![][1]
   
   <span data-ttu-id="769f6-155">根據預設，應用程式服務提供驗證但不會限制授權的存取 tooyour 網站內容和應用程式開發介面。</span><span class="sxs-lookup"><span data-stu-id="769f6-155">By default, App Service provides authentication but does not restrict authorized access tooyour site content and APIs.</span></span> <span data-ttu-id="769f6-156">您必須在應用程式程式碼中授權使用者。</span><span class="sxs-lookup"><span data-stu-id="769f6-156">You must authorize users in your app code.</span></span>
4. <span data-ttu-id="769f6-157">（選擇性） toorestrict 存取 tooyour 網站 tooonly 使用者驗證 Azure Active Directory 中，設定**當要求未經驗證的動作 tootake**太**登入 Azure Active Directory**。</span><span class="sxs-lookup"><span data-stu-id="769f6-157">(Optional) toorestrict access tooyour site tooonly users authenticated by Azure Active Directory, set **Action tootake when request is not authenticated** too**Log in with Azure Active Directory**.</span></span> <span data-ttu-id="769f6-158">這需要的所有要求經過都驗證，而且所有未經驗證的要求重新導向的 tooAzure Active Directory 進行驗證。</span><span class="sxs-lookup"><span data-stu-id="769f6-158">This requires that all requests be authenticated, and all unauthenticated requests are redirected tooAzure Active Directory for authentication.</span></span>
5. <span data-ttu-id="769f6-159">按一下 [儲存] 。</span><span class="sxs-lookup"><span data-stu-id="769f6-159">Click **Save**.</span></span>

<span data-ttu-id="769f6-160">現在您已準備好 toouse Azure Active Directory 進行驗證您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="769f6-160">You are now ready toouse Azure Active Directory for authentication in your app.</span></span>

## <a name="optional-configure-a-native-client-application"></a><span data-ttu-id="769f6-161">(選擇性步驟) 設定原生用戶端應用程式</span><span class="sxs-lookup"><span data-stu-id="769f6-161">(Optional) Configure a native client application</span></span>
<span data-ttu-id="769f6-162">Azure Active Directory 也可讓您 tooregister 原生用戶端，可提供更好的控制，透過對應的權限。</span><span class="sxs-lookup"><span data-stu-id="769f6-162">Azure Active Directory also allows you tooregister native clients, which provides greater control over permissions mapping.</span></span> <span data-ttu-id="769f6-163">您會需要此如果您想使用的程式庫，例如 hello tooperform 登入**Active Directory Authentication Library**。</span><span class="sxs-lookup"><span data-stu-id="769f6-163">You need this if you wish tooperform logins using a library such as hello **Active Directory Authentication Library**.</span></span>

1. <span data-ttu-id="769f6-164">瀏覽過**Active Directory**在 hello [Azure 傳統入口網站]。</span><span class="sxs-lookup"><span data-stu-id="769f6-164">Navigate too**Active Directory** in hello [Azure classic portal].</span></span>
2. <span data-ttu-id="769f6-165">選取您的目錄，然後選取 hello**應用程式**hello 頂端的索引標籤。</span><span class="sxs-lookup"><span data-stu-id="769f6-165">Select your directory, and then select hello **Applications** tab at hello top.</span></span> <span data-ttu-id="769f6-166">按一下**新增**在 hello 底部 toocreate 新的應用程式註冊。</span><span class="sxs-lookup"><span data-stu-id="769f6-166">Click **ADD** at hello bottom toocreate a new app registration.</span></span>
3. <span data-ttu-id="769f6-167">按一下 [Add an application my organization is developing] 。</span><span class="sxs-lookup"><span data-stu-id="769f6-167">Click **Add an application my organization is developing**.</span></span>
4. <span data-ttu-id="769f6-168">在 hello 新增應用程式精靈中輸入**名稱**您的應用程式，按一下 hello**原生用戶端應用程式**型別。</span><span class="sxs-lookup"><span data-stu-id="769f6-168">In hello Add Application Wizard, enter a **Name** for your application and click hello  **Native Client Application** type.</span></span> <span data-ttu-id="769f6-169">然後按一下 toocontinue。</span><span class="sxs-lookup"><span data-stu-id="769f6-169">Then click toocontinue.</span></span>
5. <span data-ttu-id="769f6-170">在 hello**重新導向 URI**方塊中，輸入您的網站*/.auth/login/done*使用 hello HTTPS 配置的端點。</span><span class="sxs-lookup"><span data-stu-id="769f6-170">In hello **Redirect URI** box, enter your site's */.auth/login/done* endpoint, using hello HTTPS scheme.</span></span> <span data-ttu-id="769f6-171">此值太應該類似*https://contoso.azurewebsites.net/.auth/login/done*。</span><span class="sxs-lookup"><span data-stu-id="769f6-171">This value should be similar too*https://contoso.azurewebsites.net/.auth/login/done*.</span></span> <span data-ttu-id="769f6-172">如果建立 Windows 應用程式，請改為使用 hello[封裝 SID](app-service-mobile-dotnet-how-to-use-client-library.md#package-sid)為 hello URI。</span><span class="sxs-lookup"><span data-stu-id="769f6-172">If creating a Windows application, instead use hello [package SID](app-service-mobile-dotnet-how-to-use-client-library.md#package-sid) as hello URI.</span></span>
6. <span data-ttu-id="769f6-173">一旦加入 hello 原生應用程式，按一下 hello**設定** 索引標籤。尋找 hello**用戶端識別碼**並記下此值。</span><span class="sxs-lookup"><span data-stu-id="769f6-173">Once hello native application has been added, click hello **Configure** tab. Find hello **Client ID** and make a note of this value.</span></span>
7. <span data-ttu-id="769f6-174">捲軸 hello 下一頁 toohello**權限 tooother 應用程式**區段，然後按一下**新增應用程式**。</span><span class="sxs-lookup"><span data-stu-id="769f6-174">Scroll hello page down toohello **Permissions tooother applications** section and click **Add application**.</span></span>
8. <span data-ttu-id="769f6-175">搜尋您先前註冊的 hello web 應用程式，然後按一下 hello 加號圖示。</span><span class="sxs-lookup"><span data-stu-id="769f6-175">Search for hello web application that you registered earlier and click hello plus icon.</span></span> <span data-ttu-id="769f6-176">然後按一下 hello 核取 tooclose hello 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="769f6-176">Then click hello check tooclose hello dialog.</span></span> <span data-ttu-id="769f6-177">如果找到，瀏覽 tooits 註冊並加入新的回覆 URL （例如 hello HTTP 版本的目前 URL），不能是 hello web 應用程式，按一下 [儲存]，然後重複這些步驟-hello 應用程式應該會顯示在 hello 清單。</span><span class="sxs-lookup"><span data-stu-id="769f6-177">If hello web application cannot be found, navigate tooits registration and add a new reply URL (e.g., hello HTTP version of your current URL), click save, and then repeat these steps - hello application should show up in hello list.</span></span>
9. <span data-ttu-id="769f6-178">Hello 您剛才加入了新的項目，開啟 hello**委派的權限**下拉式清單中選取**存取 (appName)**。</span><span class="sxs-lookup"><span data-stu-id="769f6-178">On hello new entry you just added, open hello **Delegated Permissions** dropdown and select **Access (appName)**.</span></span> <span data-ttu-id="769f6-179">然後按一下 [儲存] 。</span><span class="sxs-lookup"><span data-stu-id="769f6-179">Then click **Save**.</span></span>

<span data-ttu-id="769f6-180">您現在已設定了可以存取您 App Service 應用程式的原生用戶端應用程式。</span><span class="sxs-lookup"><span data-stu-id="769f6-180">You have now configured a native client application which can access your App Service application.</span></span>

## <span data-ttu-id="769f6-181"><a name="related-content"> </a>相關內容</span><span class="sxs-lookup"><span data-stu-id="769f6-181"><a name="related-content"> </a>Related Content</span></span>
[!INCLUDE [app-service-mobile-related-content-get-started-users](../../includes/app-service-mobile-related-content-get-started-users.md)]

<!-- Images. -->

[0]: ./media/app-service-mobile-how-to-configure-active-directory-authentication/mobile-app-aad-express-settings.png
[1]: ./media/app-service-mobile-how-to-configure-active-directory-authentication/mobile-app-aad-advanced-settings.png
[2]: ./media/app-service-mobile-how-to-configure-active-directory-authentication/app-service-navigate-aad.png
[3]: ./media/app-service-mobile-how-to-configure-active-directory-authentication/app-service-aad-app-configure.png

<!-- URLs. -->

[Azure 入口網站]: https://portal.azure.com/
[Azure 傳統入口網站]: https://manage.windowsazure.com/
[alternative method]:#advanced
