---
title: "如何監視 Azure Redis 快取 | Microsoft Docs"
description: "了解如何監視您 Azure Redis 快取執行個體的健全狀況和效能"
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: 7e70b153-9c87-4290-85af-2228f31df118
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: sdanie
ms.openlocfilehash: 8996f5ce03e39557d9cc9c3de1ec214f5cd664b4
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/03/2017
---
# <a name="how-to-monitor-azure-redis-cache"></a><span data-ttu-id="e6f33-103">如何監視 Azure Redis 快取</span><span class="sxs-lookup"><span data-stu-id="e6f33-103">How to monitor Azure Redis Cache</span></span>
<span data-ttu-id="e6f33-104">Azure Redis Cache 使用 [Azure 監視器](https://docs.microsoft.com/azure/monitoring-and-diagnostics/)提供數個選項來監視您的快取執行個體。</span><span class="sxs-lookup"><span data-stu-id="e6f33-104">Azure Redis Cache uses [Azure Monitor](https://docs.microsoft.com/azure/monitoring-and-diagnostics/) to provide several options for monitoring your cache instances.</span></span> <span data-ttu-id="e6f33-105">您可以檢視度量、將度量圖表釘選到「開始面板」、自訂監視圖表的日期和時間範圍、新增和移除圖表中的度量，以及設定符合特定條件時的警示。</span><span class="sxs-lookup"><span data-stu-id="e6f33-105">You can view metrics, pin metrics charts to the Startboard, customize the date and time range of monitoring charts, add and remove metrics from the charts, and set alerts when certain conditions are met.</span></span> <span data-ttu-id="e6f33-106">這些工具可讓您監視 Azure Redis 快取執行個體的健全狀況，並協助您管理快取應用程式。</span><span class="sxs-lookup"><span data-stu-id="e6f33-106">These tools enable you to monitor the health of your Azure Redis Cache instances and help you manage your caching applications.</span></span>

<span data-ttu-id="e6f33-107">Azure Redis Cache 執行個體的計量使用 Redis [INFO](http://redis.io/commands/info) 命令每分鐘收集兩次，自動儲存 30 天 (請參閱[匯出快取計量](#export-cache-metrics)來設定不同的保留原則)，以便其顯示在計量圖表中並依警示規則評估。</span><span class="sxs-lookup"><span data-stu-id="e6f33-107">Metrics for Azure Redis Cache instances are collected using the Redis [INFO](http://redis.io/commands/info) command approximately twice per minute and automatically stored for 30 days (see [Export cache metrics](#export-cache-metrics) to configure a different retention policy) so they can be displayed in the metrics charts and evaluated by alert rules.</span></span> <span data-ttu-id="e6f33-108">如需用於每個快取度量的不同 INFO 值詳細資訊，請參閱 [可用度量和報告間隔](#available-metrics-and-reporting-intervals)。</span><span class="sxs-lookup"><span data-stu-id="e6f33-108">For more information about the different INFO values used for each cache metric, see [Available metrics and reporting intervals](#available-metrics-and-reporting-intervals).</span></span>

<a name="view-cache-metrics"></a>

<span data-ttu-id="e6f33-109">若要檢視快取度量，請[瀏覽](cache-configure.md#configure-redis-cache-settings)至您在 [Azure 入口網站](https://portal.azure.com)中的快取執行個體。</span><span class="sxs-lookup"><span data-stu-id="e6f33-109">To view cache metrics, [browse](cache-configure.md#configure-redis-cache-settings) to your cache instance in the [Azure portal](https://portal.azure.com).</span></span>  <span data-ttu-id="e6f33-110">Azure Redis Cache 會在 [概觀] 刀鋒視窗和 [Redis 計量] 刀鋒視窗中提供一些內建圖表。</span><span class="sxs-lookup"><span data-stu-id="e6f33-110">Azure Redis Cache provides some built-in charts on the **Overview** blade and the **Redis metrics** blade.</span></span> <span data-ttu-id="e6f33-111">新增或移除度量，以及變更報告間隔，即可自訂每個圖表。</span><span class="sxs-lookup"><span data-stu-id="e6f33-111">Each chart can be customized by adding or removing metrics and changing the reporting interval.</span></span>

![Redis 度量](./media/cache-how-to-monitor/redis-cache-redis-metrics-blade.png)

## <a name="view-pre-configured-metrics-charts"></a><span data-ttu-id="e6f33-113">檢視預先設定的計量圖表</span><span class="sxs-lookup"><span data-stu-id="e6f33-113">View pre-configured metrics charts</span></span>

<span data-ttu-id="e6f33-114">[概觀] 刀鋒視窗具有下列預先設定的監視圖表。</span><span class="sxs-lookup"><span data-stu-id="e6f33-114">The **Overview** blade has the following pre-configured monitoring charts.</span></span>

* [<span data-ttu-id="e6f33-115">監視圖表</span><span class="sxs-lookup"><span data-stu-id="e6f33-115">Monitoring charts</span></span>](#monitoring-charts)
* [<span data-ttu-id="e6f33-116">使用量圖表</span><span class="sxs-lookup"><span data-stu-id="e6f33-116">Usage charts</span></span>](#usage-charts)

### <a name="monitoring-charts"></a><span data-ttu-id="e6f33-117">監視圖表</span><span class="sxs-lookup"><span data-stu-id="e6f33-117">Monitoring charts</span></span>
<span data-ttu-id="e6f33-118">[概觀] 刀鋒視窗的 [監視] 區段具有 [點擊和遺漏]、[取得和設定]、[連線] 和 [總命令數] 圖表。</span><span class="sxs-lookup"><span data-stu-id="e6f33-118">The **Monitoring** section in the **Overview** blade has **Hits and Misses**, **Gets and Sets**, **Connections**, and **Total Commands** charts.</span></span>

![監視圖表](./media/cache-how-to-monitor/redis-cache-monitoring-part.png)

### <a name="usage-charts"></a><span data-ttu-id="e6f33-120">使用量圖表</span><span class="sxs-lookup"><span data-stu-id="e6f33-120">Usage charts</span></span>
<span data-ttu-id="e6f33-121">[概觀] 刀鋒視窗的 [使用量] 區段有 [Redis 伺服器負載]、[記憶體使用量]、[網路頻寬] 和 [CPU 使用量] 圖表，也會顯示快取執行個的 [定價層]。</span><span class="sxs-lookup"><span data-stu-id="e6f33-121">The **Usage** section in the **Overview** blade has **Redis Server Load**, **Memory Usage**, **Network Bandwith**, and **CPU Usage** charts, and also displays the **Pricing tier** for the cache instance.</span></span>

![使用量圖表](./media/cache-how-to-monitor/redis-cache-usage-part.png)

<span data-ttu-id="e6f33-123">[定價層]  會顯示快取定價層，而且可以用來將快取 [調整](cache-how-to-scale.md) 為不同的定價層。</span><span class="sxs-lookup"><span data-stu-id="e6f33-123">The **Pricing tier** displays the cache pricing tier, and can be used to [scale](cache-how-to-scale.md) the cache to a different pricing tier.</span></span>

## <a name="view-metrics-with-azure-monitor"></a><span data-ttu-id="e6f33-124">使用 Azure 監視器檢視計量</span><span class="sxs-lookup"><span data-stu-id="e6f33-124">View metrics with Azure monitor</span></span>
<span data-ttu-id="e6f33-125">若要檢視 Redis 計量，並使用 Azure 監視器建立自訂圖表，請按一下 [資源] 功能表的 [計量]，使用所需的計量、報告間隔、圖表類型等來自訂圖表。</span><span class="sxs-lookup"><span data-stu-id="e6f33-125">To view Redis metrics and create custom charts using Azure Monitor, click **Metrics** from the **Resource menu**, and customize your chart using the desired metrics, reporting interval, chart type, and more.</span></span>

![Redis 度量](./media/cache-how-to-monitor/redis-cache-monitor.png)

<span data-ttu-id="e6f33-127">如需使用 Azure 監視器處理計量的詳細資訊，請參閱 [Microsoft Azure 的計量概觀](../monitoring-and-diagnostics/monitoring-overview-metrics.md)。</span><span class="sxs-lookup"><span data-stu-id="e6f33-127">For more information on working with metrics using Azure Monitor, see [Overview of metrics in Microsoft Azure](../monitoring-and-diagnostics/monitoring-overview-metrics.md).</span></span>

<a name="how-to-view-metrics-and-customize-chart"></a>
<a name="enable-cache-diagnostics"></a>
## <a name="export-cache-metrics"></a><span data-ttu-id="e6f33-128">匯出快取計量</span><span class="sxs-lookup"><span data-stu-id="e6f33-128">Export cache metrics</span></span>
<span data-ttu-id="e6f33-129">根據預設，Azure 監視器中的快取計量會[儲存 30 天](../monitoring-and-diagnostics/monitoring-overview-azure-monitor.md#store-and-archive)後刪除。</span><span class="sxs-lookup"><span data-stu-id="e6f33-129">By default, cache metrics in Azure Monitor are [stored for 30 days](../monitoring-and-diagnostics/monitoring-overview-azure-monitor.md#store-and-archive) and then deleted.</span></span> <span data-ttu-id="e6f33-130">若要保留您的快取計量超過 30 天，您可以[指定儲存體帳戶](../monitoring-and-diagnostics/monitoring-archive-diagnostic-logs.md)，並指定快取計量的 [保留天數] 原則。</span><span class="sxs-lookup"><span data-stu-id="e6f33-130">To persist your cache metrics for longer than 30 days, you can [designate a storage account](../monitoring-and-diagnostics/monitoring-archive-diagnostic-logs.md) and specify a **Retention (days)** policy for your cache metrics.</span></span> 

<span data-ttu-id="e6f33-131">設定快取計量的儲存體帳戶：</span><span class="sxs-lookup"><span data-stu-id="e6f33-131">To configure a storage account for your cache metrics:</span></span>

1. <span data-ttu-id="e6f33-132">按一下 [Redis Cache] 刀鋒視窗之 [資源] 功能表中的 [診斷]。</span><span class="sxs-lookup"><span data-stu-id="e6f33-132">Click **Diagnostics** from the **Resource menu** in the **Redis Cache** blade.</span></span>
2. <span data-ttu-id="e6f33-133">按一下 [開啟]。</span><span class="sxs-lookup"><span data-stu-id="e6f33-133">Click **On**.</span></span>
3. <span data-ttu-id="e6f33-134">勾選 [封存至儲存體帳戶]。</span><span class="sxs-lookup"><span data-stu-id="e6f33-134">Check **Archive to a storage account**.</span></span>
4. <span data-ttu-id="e6f33-135">選取要儲存快取計量的儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="e6f33-135">Select the storage account in which to store the cache metrics.</span></span>
5. <span data-ttu-id="e6f33-136">勾選 [1 分鐘] 核取方塊，並指定 [保留天數] 原則。</span><span class="sxs-lookup"><span data-stu-id="e6f33-136">Check the **1 minute** checkbox and specify a **Retention (days)** policy.</span></span> <span data-ttu-id="e6f33-137">如果您不想要套用任何保留期原則，也不想永久保留資料，請將 [保留天數] 設為 **0**。</span><span class="sxs-lookup"><span data-stu-id="e6f33-137">If you do not want to apply any retention policy and retain data forever, set **Retention (days)** to **0**.</span></span>
6. <span data-ttu-id="e6f33-138">按一下 [儲存] 。</span><span class="sxs-lookup"><span data-stu-id="e6f33-138">Click **Save**.</span></span>

![Redis 診斷](./media/cache-how-to-monitor/redis-cache-diagnostics.png)

>[!NOTE]
><span data-ttu-id="e6f33-140">除了將快取計量封存至儲存體，您也可以[將它們串流處理至事件中樞或將它們傳送至 Log Analytics](../monitoring-and-diagnostics/monitoring-overview-metrics.md#export-metrics)。</span><span class="sxs-lookup"><span data-stu-id="e6f33-140">In addition to archiving your cache metrics to storage, you can also [stream them to an Event hub or send them to Log Analytics](../monitoring-and-diagnostics/monitoring-overview-metrics.md#export-metrics).</span></span>
>
>

<span data-ttu-id="e6f33-141">若要存取計量，您可以如本文先前所述，在 Azure 入口網站中進行檢視，也可以使用 [Azure 監視器計量 REST API](../monitoring-and-diagnostics/monitoring-overview-metrics.md#access-metrics-via-the-rest-api) 存取計量。</span><span class="sxs-lookup"><span data-stu-id="e6f33-141">To access your metrics, you can view them in the Azure portal as previously described in this article, and you can also access them using the [Azure Monitor Metrics REST API](../monitoring-and-diagnostics/monitoring-overview-metrics.md#access-metrics-via-the-rest-api).</span></span>

> [!NOTE]
> <span data-ttu-id="e6f33-142">如果您變更儲存體帳戶，則先前設定之儲存體帳戶中的資料仍然可供下載，但不會顯示在 Azure 入口網站中。</span><span class="sxs-lookup"><span data-stu-id="e6f33-142">If you change storage accounts, the data in the previously configured storage account remains available for download, but it is not displayed in the Azure portal.</span></span>  
> 
> 

## <a name="available-metrics-and-reporting-intervals"></a><span data-ttu-id="e6f33-143">可用度量和報告間隔</span><span class="sxs-lookup"><span data-stu-id="e6f33-143">Available metrics and reporting intervals</span></span>
<span data-ttu-id="e6f33-144">快取度量是使用數個報告間隔所報告，包括 [過去一小時]、[今天]、[過去一週] 和 [自訂]。</span><span class="sxs-lookup"><span data-stu-id="e6f33-144">Cache metrics are reported using several reporting intervals, including **Past hour**, **Today**, **Past week**, and **Custom**.</span></span> <span data-ttu-id="e6f33-145">每個度量圖的 [度量]  分頁都會顯示圖表中每個度量的平均值、最小值和最大值，而有些度量會顯示報告間隔的總計。</span><span class="sxs-lookup"><span data-stu-id="e6f33-145">The **Metric** blade for each metrics chart displays the average, minimum, and maximum values for each metric in the chart, and some metrics display a total for the reporting interval.</span></span> 

<span data-ttu-id="e6f33-146">每個度量都包含兩個版本。</span><span class="sxs-lookup"><span data-stu-id="e6f33-146">Each metric includes two versions.</span></span> <span data-ttu-id="e6f33-147">有一個度量會測量整個快取的效能，以及使用[叢集](cache-how-to-premium-clustering.md)之快取的效能，名稱中包含 `(Shard 0-9)` 的第二個度量版本則會測量快取中單一分區的效能。</span><span class="sxs-lookup"><span data-stu-id="e6f33-147">One metric measures performance for the entire cache, and for caches that use [clustering](cache-how-to-premium-clustering.md), a second version of the metric that includes `(Shard 0-9)` in the name measures performance for a single shard in a cache.</span></span> <span data-ttu-id="e6f33-148">例如，如果快取有 4 個分區，`Cache Hits` 就是整個快取的點擊總數，而 `Cache Hits (Shard 3)` 就只是該快取分區的點擊數。</span><span class="sxs-lookup"><span data-stu-id="e6f33-148">For example if a cache has 4 shards, `Cache Hits` is the total amount of hits for the entire cache, and `Cache Hits (Shard 3)` is just the hits for that shard of the cache.</span></span>

> [!NOTE]
> <span data-ttu-id="e6f33-149">即使快取閒置而沒有連線的作用中用戶端應用程式，您可能還是會看到某個快取活動 (例如連線的用戶端、記憶體使用量，以及正在執行的作業)。</span><span class="sxs-lookup"><span data-stu-id="e6f33-149">Even when the cache is idle with no connected active client applications, you may see some cache activity, such as connected clients, memory usage, and operations being performed.</span></span> <span data-ttu-id="e6f33-150">在 Azure Redis 快取執行個體的作業期間，此活動正常。</span><span class="sxs-lookup"><span data-stu-id="e6f33-150">This activity is normal during the operation of an Azure Redis Cache instance.</span></span>
> 
> 

| <span data-ttu-id="e6f33-151">度量</span><span class="sxs-lookup"><span data-stu-id="e6f33-151">Metric</span></span> | <span data-ttu-id="e6f33-152">說明</span><span class="sxs-lookup"><span data-stu-id="e6f33-152">Description</span></span> |
| --- | --- |
| <span data-ttu-id="e6f33-153">快取點擊</span><span class="sxs-lookup"><span data-stu-id="e6f33-153">Cache Hits</span></span> |<span data-ttu-id="e6f33-154">所指定報告間隔期間的成功金鑰查閱數目。</span><span class="sxs-lookup"><span data-stu-id="e6f33-154">The number of successful key lookups during the specified reporting interval.</span></span> <span data-ttu-id="e6f33-155">這會對應至 Redis [INFO](http://redis.io/commands/info) 命令的 `keyspace_hits` 。</span><span class="sxs-lookup"><span data-stu-id="e6f33-155">This maps to `keyspace_hits` from the Redis [INFO](http://redis.io/commands/info) command.</span></span> |
| <span data-ttu-id="e6f33-156">快取遺漏</span><span class="sxs-lookup"><span data-stu-id="e6f33-156">Cache Misses</span></span> |<span data-ttu-id="e6f33-157">所指定報告間隔期間的失敗金鑰查閱數目。</span><span class="sxs-lookup"><span data-stu-id="e6f33-157">The number of failed key lookups during the specified reporting interval.</span></span> <span data-ttu-id="e6f33-158">這會對應至 Redis INFO 命令的 `keyspace_misses` 。</span><span class="sxs-lookup"><span data-stu-id="e6f33-158">This maps to `keyspace_misses` from the Redis INFO command.</span></span> <span data-ttu-id="e6f33-159">快取遺漏不一定表示快取發生問題。</span><span class="sxs-lookup"><span data-stu-id="e6f33-159">Cache misses do not necessarily mean there is an issue with the cache.</span></span> <span data-ttu-id="e6f33-160">例如，使用另行快取程式設計模式時，應用程式會先在快取中尋找項目。</span><span class="sxs-lookup"><span data-stu-id="e6f33-160">For example, when using the cache-aside programming pattern, an application looks first in the cache for an item.</span></span> <span data-ttu-id="e6f33-161">如果項目不存在 (快取遺漏)，項目會從資料庫中擷取，並在下次新增至快取中。</span><span class="sxs-lookup"><span data-stu-id="e6f33-161">If the item is not there (cache miss), the item is retrieved from the database and added to the cache for next time.</span></span> <span data-ttu-id="e6f33-162">快取遺漏是另行快取程式設計模式的正常行為。</span><span class="sxs-lookup"><span data-stu-id="e6f33-162">Cache misses are normal behavior for the cache-aside programming pattern.</span></span> <span data-ttu-id="e6f33-163">如果快取遺漏數目高於預期，請檢查可填入且讀取自快取的應用程式邏輯。</span><span class="sxs-lookup"><span data-stu-id="e6f33-163">If the number of cache misses is higher than expected, examine the application logic that populates and reads from the cache.</span></span> <span data-ttu-id="e6f33-164">如果因記憶體壓力而正在收回快取中的項目，則可能會有一些快取遺漏，但監視記憶體壓力的較佳度量是 `Used Memory` 或 `Evicted Keys`。</span><span class="sxs-lookup"><span data-stu-id="e6f33-164">If items are being evicted from the cache due to memory pressure then there may be some cache misses, but a better metric to monitor for memory pressure would be `Used Memory` or `Evicted Keys`.</span></span> |
| <span data-ttu-id="e6f33-165">連線的用戶端</span><span class="sxs-lookup"><span data-stu-id="e6f33-165">Connected Clients</span></span> |<span data-ttu-id="e6f33-166">所指定報告間隔期間的快取用戶端連線數目。</span><span class="sxs-lookup"><span data-stu-id="e6f33-166">The number of client connections to the cache during the specified reporting interval.</span></span> <span data-ttu-id="e6f33-167">這會對應至 Redis INFO 命令的 `connected_clients` 。</span><span class="sxs-lookup"><span data-stu-id="e6f33-167">This maps to `connected_clients` from the Redis INFO command.</span></span> <span data-ttu-id="e6f33-168">一旦達到 [連接限制](cache-configure.md#default-redis-server-configuration) 之後，後續對快取所做的連接嘗試都將失敗。</span><span class="sxs-lookup"><span data-stu-id="e6f33-168">Once the [connection limit](cache-configure.md#default-redis-server-configuration) is reached subsequent connection attempts to the cache will fail.</span></span> <span data-ttu-id="e6f33-169">請注意，因為內部處理序和連線，所以即使沒有作用中用戶端應用程式，可能還是會有一些連線的用戶端執行個體。</span><span class="sxs-lookup"><span data-stu-id="e6f33-169">Note that even if there are no active client application, there may still be a few instances of connected clients due to internal processes and connections.</span></span> |
| <span data-ttu-id="e6f33-170">收回的金鑰</span><span class="sxs-lookup"><span data-stu-id="e6f33-170">Evicted Keys</span></span> |<span data-ttu-id="e6f33-171">因 `maxmemory` 限制，在所指定報告間隔期間從快取收回的項目數。</span><span class="sxs-lookup"><span data-stu-id="e6f33-171">The number of items evicted from the cache during the specified reporting interval due to the `maxmemory` limit.</span></span> <span data-ttu-id="e6f33-172">這會對應至 Redis INFO 命令的 `evicted_keys` 。</span><span class="sxs-lookup"><span data-stu-id="e6f33-172">This maps to `evicted_keys` from the Redis INFO command.</span></span> |
| <span data-ttu-id="e6f33-173">到期的金鑰</span><span class="sxs-lookup"><span data-stu-id="e6f33-173">Expired Keys</span></span> |<span data-ttu-id="e6f33-174">所指定報告間隔期間的快取到期項目數。</span><span class="sxs-lookup"><span data-stu-id="e6f33-174">The number of items expired from the cache during the specified reporting interval.</span></span> <span data-ttu-id="e6f33-175">這個值會對應至 Redis INFO 命令的 `expired_keys` 。</span><span class="sxs-lookup"><span data-stu-id="e6f33-175">This value maps to `expired_keys` from the Redis INFO command.</span></span> |
| <span data-ttu-id="e6f33-176">索引鍵總計</span><span class="sxs-lookup"><span data-stu-id="e6f33-176">Total Keys</span></span>  | <span data-ttu-id="e6f33-177">快取中的索引鍵在過去報告時段內的數目上限。</span><span class="sxs-lookup"><span data-stu-id="e6f33-177">The maximum number of keys in the cache during the past reporting time period.</span></span> <span data-ttu-id="e6f33-178">這會對應至 Redis INFO 命令的 `keyspace` 。</span><span class="sxs-lookup"><span data-stu-id="e6f33-178">This maps to `keyspace` from the Redis INFO command.</span></span> <span data-ttu-id="e6f33-179">因為基礎計量系統的限制，凡是啟用叢集化的快取，[索引鍵總計] 都會傳回分區的索引鍵數目上限，該分區於報告間隔期間曾有過索引鍵的最大數目。</span><span class="sxs-lookup"><span data-stu-id="e6f33-179">Due to a limitation of the underlying metrics system, for caches with clustering enabled, Total Keys returns the maximum number of keys of the shard that had the maximum number of keys during the reporting interval.</span></span>  |
| <span data-ttu-id="e6f33-180">取得</span><span class="sxs-lookup"><span data-stu-id="e6f33-180">Gets</span></span> |<span data-ttu-id="e6f33-181">所指定報告間隔期間的快取 get 作業數目。</span><span class="sxs-lookup"><span data-stu-id="e6f33-181">The number of get operations from the cache during the specified reporting interval.</span></span> <span data-ttu-id="e6f33-182">這個值是 Redis INFO all 命令的下列值總和：`cmdstat_get`、`cmdstat_hget``cmdstat_hgetall`、`cmdstat_hmget``cmdstat_mget`、`cmdstat_getbit` 和 `cmdstat_getrange`，而且等於報告期間的快取點擊和遺漏。</span><span class="sxs-lookup"><span data-stu-id="e6f33-182">This value is the sum of the following values from the Redis INFO all command: `cmdstat_get`, `cmdstat_hget`, `cmdstat_hgetall`, `cmdstat_hmget`, `cmdstat_mget`, `cmdstat_getbit`, and `cmdstat_getrange`, and is equivalent to the sum of cache hits and misses during the reporting interval.</span></span> |
| <span data-ttu-id="e6f33-183">Redis 伺服器負載</span><span class="sxs-lookup"><span data-stu-id="e6f33-183">Redis Server Load</span></span> |<span data-ttu-id="e6f33-184">Redis 伺服器忙著處理訊息且非訊息等候閒置之循環的百分比。</span><span class="sxs-lookup"><span data-stu-id="e6f33-184">The percentage of cycles in which the Redis server is busy processing and not waiting idle for messages.</span></span> <span data-ttu-id="e6f33-185">如果這個計數器達到 100，表示 Redis 伺服器已經達到效能上限，而且 CPU 處理工作的速度不能再更快。</span><span class="sxs-lookup"><span data-stu-id="e6f33-185">If this counter reaches 100 it means the Redis server has hit a performance ceiling and the CPU can't process work any faster.</span></span> <span data-ttu-id="e6f33-186">如果您看到高「Redis 伺服器負載 (Redis Server Load)」，則會看到用戶端中的逾時例外狀況。</span><span class="sxs-lookup"><span data-stu-id="e6f33-186">If you are seeing high Redis Server Load then you will see timeout exceptions in the client.</span></span> <span data-ttu-id="e6f33-187">在此情況下，您應該考慮向上延展，或將資料分割成多個快取。</span><span class="sxs-lookup"><span data-stu-id="e6f33-187">In this case you should consider scaling up or partitioning your data into multiple caches.</span></span> |
| <span data-ttu-id="e6f33-188">設定</span><span class="sxs-lookup"><span data-stu-id="e6f33-188">Sets</span></span> |<span data-ttu-id="e6f33-189">所指定報告間隔期間的快取 set 作業數目。</span><span class="sxs-lookup"><span data-stu-id="e6f33-189">The number of set operations to the cache during the specified reporting interval.</span></span> <span data-ttu-id="e6f33-190">這個值是 Redis INFO all 命令的下列值總和：`cmdstat_set`、`cmdstat_hset``cmdstat_hmset`、`cmdstat_hsetnx`、`cmdstat_lset`、`cmdstat_mset`、`cmdstat_msetnx`、`cmdstat_setbit`、`cmdstat_setex`、`cmdstat_setrange` 和 `cmdstat_setnx`</span><span class="sxs-lookup"><span data-stu-id="e6f33-190">This value is the sum of the following values from the Redis INFO all command: `cmdstat_set`, `cmdstat_hset`, `cmdstat_hmset`, `cmdstat_hsetnx`, `cmdstat_lset`, `cmdstat_mset`, `cmdstat_msetnx`, `cmdstat_setbit`, `cmdstat_setex`, `cmdstat_setrange`, and `cmdstat_setnx`.</span></span> |
| <span data-ttu-id="e6f33-191">總作業數</span><span class="sxs-lookup"><span data-stu-id="e6f33-191">Total Operations</span></span> |<span data-ttu-id="e6f33-192">所指定報告間隔期間，快取伺服器所處理命令的總數。</span><span class="sxs-lookup"><span data-stu-id="e6f33-192">The total number of commands processed by the cache server during the specified reporting interval.</span></span> <span data-ttu-id="e6f33-193">這個值會對應至 Redis INFO 命令的 `total_commands_processed` 。</span><span class="sxs-lookup"><span data-stu-id="e6f33-193">This value maps to `total_commands_processed` from the Redis INFO command.</span></span> <span data-ttu-id="e6f33-194">請注意，Azure Redis 快取純粹用於發佈/訂閱時，則沒有 `Cache Hits`、`Cache Misses`、`Gets` 或 `Sets` 的度量但是會有 `Total Operations` 度量可反映發佈/訂閱作業的快取使用量。</span><span class="sxs-lookup"><span data-stu-id="e6f33-194">Note that when Azure Redis Cache is used purely for pub/sub there will be no metrics for `Cache Hits`, `Cache Misses`, `Gets`, or `Sets`, but there will be `Total Operations` metrics that reflect the cache usage for pub/sub operations.</span></span> |
| <span data-ttu-id="e6f33-195">已使用的記憶體</span><span class="sxs-lookup"><span data-stu-id="e6f33-195">Used Memory</span></span> |<span data-ttu-id="e6f33-196">在指定的報告間隔期間，針對快取中金鑰/值組使用的快取記憶體數量 (MB)。</span><span class="sxs-lookup"><span data-stu-id="e6f33-196">The amount of cache memory used for key/value pairs in the cache in MB during the specified reporting interval.</span></span> <span data-ttu-id="e6f33-197">這個值會對應至 Redis INFO 命令的 `used_memory` 。</span><span class="sxs-lookup"><span data-stu-id="e6f33-197">This value maps to `used_memory` from the Redis INFO command.</span></span> <span data-ttu-id="e6f33-198">這不包括中繼資料或片段。</span><span class="sxs-lookup"><span data-stu-id="e6f33-198">This does not include metadata or fragmentation.</span></span> |
| <span data-ttu-id="e6f33-199">已用的記憶體 RSS</span><span class="sxs-lookup"><span data-stu-id="e6f33-199">Used Memory RSS</span></span> |<span data-ttu-id="e6f33-200">在指定的報告間隔期間使用的快取記憶體數量 (MB)，包括片段和中繼資料。</span><span class="sxs-lookup"><span data-stu-id="e6f33-200">The amount of cache memory used in MB during the specified reporting interval, including fragmentation and metadata.</span></span> <span data-ttu-id="e6f33-201">這個值會對應至 Redis INFO 命令的 `used_memory_rss` 。</span><span class="sxs-lookup"><span data-stu-id="e6f33-201">This value maps to `used_memory_rss` from the Redis INFO command.</span></span> |
| <span data-ttu-id="e6f33-202">CPU</span><span class="sxs-lookup"><span data-stu-id="e6f33-202">CPU</span></span> |<span data-ttu-id="e6f33-203">所指定報告間隔期間的 Azure Redis 快取伺服器 CPU 使用率 (百分比)。</span><span class="sxs-lookup"><span data-stu-id="e6f33-203">The CPU utilization of the Azure Redis Cache server as a percentage during the specified reporting interval.</span></span> <span data-ttu-id="e6f33-204">這個值會對應至作業系統 `\Processor(_Total)\% Processor Time` 效能計數器。</span><span class="sxs-lookup"><span data-stu-id="e6f33-204">This value maps to the operating system `\Processor(_Total)\% Processor Time` performance counter.</span></span> |
| <span data-ttu-id="e6f33-205">快取讀取</span><span class="sxs-lookup"><span data-stu-id="e6f33-205">Cache Read</span></span> |<span data-ttu-id="e6f33-206">所指定報告間隔期間，從快取讀取的資料量 (以 MB/s 為單位)。</span><span class="sxs-lookup"><span data-stu-id="e6f33-206">The amount of data read from the cache in Megabytes per second (MB/s) during the specified reporting interval.</span></span> <span data-ttu-id="e6f33-207">這個值衍生自網路介面卡，而網路介面卡支援裝載快取且非 Redis 特有的虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="e6f33-207">This value is derived from the network interface cards that support the virtual machine that hosts the cache and is not Redis specific.</span></span> <span data-ttu-id="e6f33-208">**這個值對應於此快取所使用的網路頻寬。如果您想要設定伺服器端網路頻寬限制的警示，則可使用此 `Cache Read` 計數器加以建立。如需所觀察到適用於各種快取定價層和大小的頻寬限制，請參閱[這個表格](cache-faq.md#cache-performance)。**</span><span class="sxs-lookup"><span data-stu-id="e6f33-208">**This value corresponds to the network bandwidth used by this cache. If you want to set up alerts for server side network bandwidth limits, then create it using this `Cache Read` counter. See [this table](cache-faq.md#cache-performance) for the observed bandwidth limits for various cache pricing tiers and sizes.**</span></span> |
| <span data-ttu-id="e6f33-209">快取寫入</span><span class="sxs-lookup"><span data-stu-id="e6f33-209">Cache Write</span></span> |<span data-ttu-id="e6f33-210">所指定報告間隔期間，寫入至快取的資料量 (以 MB/s 為單位)。</span><span class="sxs-lookup"><span data-stu-id="e6f33-210">The amount of data written to the cache in Megabytes per second (MB/s) during the specified reporting interval.</span></span> <span data-ttu-id="e6f33-211">這個值衍生自網路介面卡，而網路介面卡支援裝載快取且非 Redis 特有的虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="e6f33-211">This value is derived from the network interface cards that support the virtual machine that hosts the cache and is not Redis specific.</span></span> <span data-ttu-id="e6f33-212">此值對應從用戶端傳送給快取之資料的網路頻寬。</span><span class="sxs-lookup"><span data-stu-id="e6f33-212">This value corresponds to the network bandwidth of data sent to the cache from the client.</span></span> |

<a name="operations-and-alerts"></a>
## <a name="alerts"></a><span data-ttu-id="e6f33-213">Alerts</span><span class="sxs-lookup"><span data-stu-id="e6f33-213">Alerts</span></span>
<span data-ttu-id="e6f33-214">您可以進行設定來收到以計量和活動記錄為基礎的警示。</span><span class="sxs-lookup"><span data-stu-id="e6f33-214">You can configure to receive alerts based on metrics and activity logs.</span></span> <span data-ttu-id="e6f33-215">Azure 監視器可讓您將警示設定為在觸發時執行下列動作︰</span><span class="sxs-lookup"><span data-stu-id="e6f33-215">Azure Monitor allows you to configure an alert to do the following when it triggers:</span></span>

* <span data-ttu-id="e6f33-216">傳送電子郵件通知</span><span class="sxs-lookup"><span data-stu-id="e6f33-216">Send an email notification</span></span>
* <span data-ttu-id="e6f33-217">呼叫 Webhook</span><span class="sxs-lookup"><span data-stu-id="e6f33-217">Call a webhook</span></span>
* <span data-ttu-id="e6f33-218">叫用 Azure 邏輯應用程式</span><span class="sxs-lookup"><span data-stu-id="e6f33-218">Invoke an Azure Logic App</span></span>

<span data-ttu-id="e6f33-219">若要設定快取警示規則，請按一下 [資源] 功能表的 [警示規則]。</span><span class="sxs-lookup"><span data-stu-id="e6f33-219">To configure Alert rules for your cache, click **Alert rules** from the **Resource menu**.</span></span>

![監視](./media/cache-how-to-monitor/redis-cache-monitoring.png)

<span data-ttu-id="e6f33-221">如需設定和使用警示的詳細資訊，請參閱[警示概觀](../monitoring-and-diagnostics/insights-alerts-portal.md)。</span><span class="sxs-lookup"><span data-stu-id="e6f33-221">For more information about configuring and using Alerts, see [Overview of Alerts](../monitoring-and-diagnostics/insights-alerts-portal.md).</span></span>

## <a name="activity-logs"></a><span data-ttu-id="e6f33-222">活動記錄檔</span><span class="sxs-lookup"><span data-stu-id="e6f33-222">Activity Logs</span></span>
<span data-ttu-id="e6f33-223">活動記錄可讓您深入了解 Azure Redis Cache 執行個體上執行的作業。</span><span class="sxs-lookup"><span data-stu-id="e6f33-223">Activity logs provide insight into the operations that were performed on your Azure Redis Cache instances.</span></span> <span data-ttu-id="e6f33-224">此記錄以前稱為「稽核記錄」或「作業記錄」。</span><span class="sxs-lookup"><span data-stu-id="e6f33-224">It was previously known as "audit logs" or "operational logs".</span></span> <span data-ttu-id="e6f33-225">您可以使用活動記錄來判斷 Azure Redis Cache 執行個體上所執行之任何寫入作業 (PUT、POST、DELETE) 的「內容、對象和時間」。</span><span class="sxs-lookup"><span data-stu-id="e6f33-225">Using activity logs, you can determine the "what, who, and when" for any write operations (PUT, POST, DELETE) taken on your Azure Redis Cache instances.</span></span> 

> [!NOTE]
> <span data-ttu-id="e6f33-226">活動記錄不包含讀取 (GET) 作業。</span><span class="sxs-lookup"><span data-stu-id="e6f33-226">Activity logs do not include read (GET) operations.</span></span>
>
>

<span data-ttu-id="e6f33-227">若要檢視快取的活動記錄，請按一下 [資源] 功能表的 [活動記錄]。</span><span class="sxs-lookup"><span data-stu-id="e6f33-227">To view activity logs for your cache, click **Activity logs** from the **Resource menu**.</span></span>

<span data-ttu-id="e6f33-228">如需活動記錄的詳細資訊，請參閱 [Azure 活動記錄檔概觀](../monitoring-and-diagnostics/monitoring-overview-activity-logs.md)。</span><span class="sxs-lookup"><span data-stu-id="e6f33-228">For more information about Activity logs, see [Overview of the Azure Activity Log](../monitoring-and-diagnostics/monitoring-overview-activity-logs.md).</span></span>











