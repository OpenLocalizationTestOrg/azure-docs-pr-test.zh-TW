---
title: "受管理快取服務應用程式 tooRedis Azure aaaMigrate |Microsoft 文件"
description: "深入了解如何 toomigrate 受管理快取服務和角色中快取應用程式 tooAzure Redis 快取"
services: redis-cache
documentationcenter: na
author: steved0x
manager: douge
editor: tysonn
ms.assetid: 041f077b-8c8e-4d7c-a3fc-89d334ed70d6
ms.service: cache
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: cache-redis
ms.workload: tbd
ms.date: 05/30/2017
ms.author: sdanie
ms.openlocfilehash: bd81722820acf0d2637828fbb6100c723aafeba5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="migrate-from-managed-cache-service-tooazure-redis-cache"></a><span data-ttu-id="84cc0-103">從受管理快取服務 tooAzure Redis 快取移轉</span><span class="sxs-lookup"><span data-stu-id="84cc0-103">Migrate from Managed Cache Service tooAzure Redis Cache</span></span>
<span data-ttu-id="84cc0-104">使用 Azure 受管理快取服務 tooAzure Redis 快取的應用程式移轉就可完成幾乎不需要變更 tooyour 應用程式中，視應用程式快取所使用的 hello 受管理快取服務功能而定。</span><span class="sxs-lookup"><span data-stu-id="84cc0-104">Migrating your applications that use Azure Managed Cache Service tooAzure Redis Cache can be accomplished with minimal changes tooyour application, depending on hello Managed Cache Service features used by your caching application.</span></span> <span data-ttu-id="84cc0-105">當 hello Api 並非完全 hello 相同它們很相似，和大部分使用受管理快取服務 tooaccess 快取的現有程式碼的可重複使用最少變更。</span><span class="sxs-lookup"><span data-stu-id="84cc0-105">While hello APIs are not exactly hello same they are similar, and much of your existing code that uses Managed Cache Service tooaccess a cache can be reused with minimal changes.</span></span> <span data-ttu-id="84cc0-106">本主題顯示如何 toomake hello 必要的設定和應用程式變更 toomigrate 您受管理快取服務應用程式 toouse Azure Redis 快取，並顯示方式的一些 hello Azure Redis 快取功能可以是使用的 tooimplement hello 功能受管理快取服務快取。</span><span class="sxs-lookup"><span data-stu-id="84cc0-106">This topic shows how toomake hello necessary configuration and application changes toomigrate your Managed Cache Service applications toouse Azure Redis Cache, and shows how some of hello features of Azure Redis Cache can be used tooimplement hello functionality of a Managed Cache Service cache.</span></span>

>[!NOTE]
><span data-ttu-id="84cc0-107">受管理的快取服務及 In-Role Cache 已於 2016 年 11 月 30 日起[淘汰](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/)。</span><span class="sxs-lookup"><span data-stu-id="84cc0-107">Managed Cache Service and In-Role Cache were [retired](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/) November 30, 2016.</span></span> <span data-ttu-id="84cc0-108">如果您有任何您想 toomigrate tooAzure Redis 快取的角色中快取部署，您可以遵循本文章中的 hello 步驟。</span><span class="sxs-lookup"><span data-stu-id="84cc0-108">If you have any In-Role Cache deployments that you want toomigrate tooAzure Redis Cache, you can follow hello steps in this article.</span></span>

## <a name="migration-steps"></a><span data-ttu-id="84cc0-109">移轉步驟</span><span class="sxs-lookup"><span data-stu-id="84cc0-109">Migration Steps</span></span>
<span data-ttu-id="84cc0-110">hello 步驟是必要的 toomigrate 受管理快取服務應用程式 toouse Azure Redis 快取。</span><span class="sxs-lookup"><span data-stu-id="84cc0-110">hello following steps are required toomigrate a Managed Cache Service application toouse Azure Redis Cache.</span></span>

* <span data-ttu-id="84cc0-111">將對應的受管理快取服務功能 tooAzure Redis 快取</span><span class="sxs-lookup"><span data-stu-id="84cc0-111">Map Managed Cache Service features tooAzure Redis Cache</span></span>
* <span data-ttu-id="84cc0-112">選擇快取服務</span><span class="sxs-lookup"><span data-stu-id="84cc0-112">Choose a Cache Offering</span></span>
* <span data-ttu-id="84cc0-113">建立快取</span><span class="sxs-lookup"><span data-stu-id="84cc0-113">Create a Cache</span></span>
* <span data-ttu-id="84cc0-114">設定 hello 快取用戶端</span><span class="sxs-lookup"><span data-stu-id="84cc0-114">Configure hello Cache Clients</span></span>
  * <span data-ttu-id="84cc0-115">移除 hello 受管理快取服務組態</span><span class="sxs-lookup"><span data-stu-id="84cc0-115">Remove hello Managed Cache Service Configuration</span></span>
  * <span data-ttu-id="84cc0-116">設定快取用戶端，使用 StackExchange.Redis NuGet 封裝 hello</span><span class="sxs-lookup"><span data-stu-id="84cc0-116">Configure a cache client using hello StackExchange.Redis NuGet Package</span></span>
* <span data-ttu-id="84cc0-117">移轉受管理的快取服務程式碼</span><span class="sxs-lookup"><span data-stu-id="84cc0-117">Migrate Managed Cache Service code</span></span>
  * <span data-ttu-id="84cc0-118">連接 toohello 快取使用 hello ConnectionMultiplexer 類別</span><span class="sxs-lookup"><span data-stu-id="84cc0-118">Connect toohello cache using hello ConnectionMultiplexer class</span></span>
  * <span data-ttu-id="84cc0-119">Hello 快取中存取基本資料型別</span><span class="sxs-lookup"><span data-stu-id="84cc0-119">Access primitive data types in hello cache</span></span>
  * <span data-ttu-id="84cc0-120">使用 hello 快取中的.NET 物件</span><span class="sxs-lookup"><span data-stu-id="84cc0-120">Work with .NET objects in hello cache</span></span>
* <span data-ttu-id="84cc0-121">移轉 ASP.NET 工作階段狀態和輸出快取 tooAzure Redis 快取</span><span class="sxs-lookup"><span data-stu-id="84cc0-121">Migrate ASP.NET Session State and Output caching tooAzure Redis Cache</span></span> 

## <a name="map-managed-cache-service-features-tooazure-redis-cache"></a><span data-ttu-id="84cc0-122">將對應的受管理快取服務功能 tooAzure Redis 快取</span><span class="sxs-lookup"><span data-stu-id="84cc0-122">Map Managed Cache Service features tooAzure Redis Cache</span></span>
<span data-ttu-id="84cc0-123">Azure 受管理的快取服務與 Azure Redis 快取類似，但兩者在實作某些功能時會使用不同的方式。</span><span class="sxs-lookup"><span data-stu-id="84cc0-123">Azure Managed Cache Service and Azure Redis Cache are similar but implement some of their features in different ways.</span></span> <span data-ttu-id="84cc0-124">本節描述一些 hello 差異，並提供有關實作 Azure Redis 快取中的受管理快取服務的 hello 功能的指引。</span><span class="sxs-lookup"><span data-stu-id="84cc0-124">This section describes some of hello differences and provides guidance on implementing hello features of Managed Cache Service in Azure Redis Cache.</span></span>

| <span data-ttu-id="84cc0-125">受管理的快取服務功能</span><span class="sxs-lookup"><span data-stu-id="84cc0-125">Managed Cache Service feature</span></span> | <span data-ttu-id="84cc0-126">受管理的快取服務支援</span><span class="sxs-lookup"><span data-stu-id="84cc0-126">Managed Cache Service support</span></span> | <span data-ttu-id="84cc0-127">Azure Redis 快取支援</span><span class="sxs-lookup"><span data-stu-id="84cc0-127">Azure Redis Cache support</span></span> |
| --- | --- | --- |
| <span data-ttu-id="84cc0-128">具名快取</span><span class="sxs-lookup"><span data-stu-id="84cc0-128">Named caches</span></span> |<span data-ttu-id="84cc0-129">設定預設快取，而在 hello 標準和進階版快取提供項目，向上 toonine 其他具名快取可以設定視。</span><span class="sxs-lookup"><span data-stu-id="84cc0-129">A default cache is configured, and in hello Standard and Premium cache offerings, up toonine additional named caches can be configured if desired.</span></span> |<span data-ttu-id="84cc0-130">Azure Redis 快取有可設定一些可以在使用的 tooimplement 類似的功能 toonamed 會快取的資料庫 （預設值為 16）。</span><span class="sxs-lookup"><span data-stu-id="84cc0-130">Azure Redis caches have a configurable number of databases (default of 16) that can be used tooimplement a similar functionality toonamed caches.</span></span> <span data-ttu-id="84cc0-131">如需詳細資訊，請參閱 [Redis 資料庫是什麼？](cache-faq.md#what-are-redis-databases)和[預設 Redis 伺服器組態](cache-configure.md#default-redis-server-configuration)。</span><span class="sxs-lookup"><span data-stu-id="84cc0-131">For more information, see [What are Redis databases?](cache-faq.md#what-are-redis-databases) and [Default Redis server configuration](cache-configure.md#default-redis-server-configuration).</span></span> |
| <span data-ttu-id="84cc0-132">高可用性</span><span class="sxs-lookup"><span data-stu-id="84cc0-132">High Availability</span></span> |<span data-ttu-id="84cc0-133">Hello 標準和進階版快取提供項目中的 hello 快取中的項目提供高可用性。</span><span class="sxs-lookup"><span data-stu-id="84cc0-133">Provides high availability for items in hello cache in hello Standard and Premium cache offerings.</span></span> <span data-ttu-id="84cc0-134">如果項目遺失到期 tooa 失敗，備份副本 hello hello 快取中的項目都仍然可用。</span><span class="sxs-lookup"><span data-stu-id="84cc0-134">If items are lost due tooa failure, backup copies of hello items in hello cache are still available.</span></span> <span data-ttu-id="84cc0-135">寫入 toohello 次要快取會以同步方式進行。</span><span class="sxs-lookup"><span data-stu-id="84cc0-135">Writes toohello secondary cache are made synchronously.</span></span> |<span data-ttu-id="84cc0-136">高可用性是 hello 標準和進階版快取提供項目中，其中具有兩個節點的主要/複本組態 （進階版快取中的每個分區有主要/複本組）。</span><span class="sxs-lookup"><span data-stu-id="84cc0-136">High availability is available in hello Standard and Premium cache offerings, which have a two node Primary/Replica configuration (each shard in a Premium cache has a primary/replica pair).</span></span> <span data-ttu-id="84cc0-137">寫入 toohello 複本會以非同步方式進行。</span><span class="sxs-lookup"><span data-stu-id="84cc0-137">Writes toohello replica are made asynchronously.</span></span> <span data-ttu-id="84cc0-138">如需詳細資訊，請參閱 [Azure Redis 快取定價](https://azure.microsoft.com/pricing/details/cache/)。</span><span class="sxs-lookup"><span data-stu-id="84cc0-138">For more information, see [Azure Redis Cache pricing](https://azure.microsoft.com/pricing/details/cache/).</span></span> |
| <span data-ttu-id="84cc0-139">通知</span><span class="sxs-lookup"><span data-stu-id="84cc0-139">Notifications</span></span> |<span data-ttu-id="84cc0-140">可讓用戶端 tooreceive 非同步通知時各種快取作業發生在具名快取。</span><span class="sxs-lookup"><span data-stu-id="84cc0-140">Allows clients tooreceive asynchronous notifications when a variety of cache operations occur on a named cache.</span></span> |<span data-ttu-id="84cc0-141">用戶端應用程式可以使用 Redis pub/sub 或[Keyspace 通知](cache-configure.md#keyspace-notifications-advanced-settings)tooachieve 類似的功能 toonotifications。</span><span class="sxs-lookup"><span data-stu-id="84cc0-141">Client applications can use Redis pub/sub or [Keyspace notifications](cache-configure.md#keyspace-notifications-advanced-settings) tooachieve a similar functionality toonotifications.</span></span> |
| <span data-ttu-id="84cc0-142">本機快取</span><span class="sxs-lookup"><span data-stu-id="84cc0-142">Local cache</span></span> |<span data-ttu-id="84cc0-143">Hello 用戶端，以加快存取速度上的本機存放快取物件的複本。</span><span class="sxs-lookup"><span data-stu-id="84cc0-143">Stores a copy of cached objects locally on hello client for extra-fast access.</span></span> |<span data-ttu-id="84cc0-144">用戶端應用程式需要 tooimplement 這項功能使用字典或類似的資料結構。</span><span class="sxs-lookup"><span data-stu-id="84cc0-144">Client applications would need tooimplement this functionality using a dictionary or similar data structure.</span></span> |
| <span data-ttu-id="84cc0-145">收回原則</span><span class="sxs-lookup"><span data-stu-id="84cc0-145">Eviction Policy</span></span> |<span data-ttu-id="84cc0-146">無或 LRU。</span><span class="sxs-lookup"><span data-stu-id="84cc0-146">None or LRU.</span></span> <span data-ttu-id="84cc0-147">hello 預設原則為 LRU。</span><span class="sxs-lookup"><span data-stu-id="84cc0-147">hello default policy is LRU.</span></span> |<span data-ttu-id="84cc0-148">Azure Redis 快取支援下列收回原則 hello: volatile lru、 allkeys lru、 volatile 隨機、 allkeys 隨機，volatile ttl、 noeviction。</span><span class="sxs-lookup"><span data-stu-id="84cc0-148">Azure Redis Cache supports hello following eviction policies: volatile-lru, allkeys-lru, volatile-random, allkeys-random, volatile-ttl, noeviction.</span></span> <span data-ttu-id="84cc0-149">hello 預設原則為 volatile-lru。</span><span class="sxs-lookup"><span data-stu-id="84cc0-149">hello default policy is volatile-lru.</span></span> <span data-ttu-id="84cc0-150">如需詳細資訊，請參閱 [預設 Redis 伺服器組態](cache-configure.md#default-redis-server-configuration)。</span><span class="sxs-lookup"><span data-stu-id="84cc0-150">For more information, see [Default Redis server configuration](cache-configure.md#default-redis-server-configuration).</span></span> |
| <span data-ttu-id="84cc0-151">到期原則</span><span class="sxs-lookup"><span data-stu-id="84cc0-151">Expiration Policy</span></span> |<span data-ttu-id="84cc0-152">hello 預設到期原則為 Absolute 和 hello 預設的到期間隔是 10 分鐘。</span><span class="sxs-lookup"><span data-stu-id="84cc0-152">hello default expiration policy is Absolute and hello default expiration interval is ten minutes.</span></span> <span data-ttu-id="84cc0-153">另外也提供 [滑動] 和 [永不] 原則。</span><span class="sxs-lookup"><span data-stu-id="84cc0-153">Sliding and Never policies are also available.</span></span> |<span data-ttu-id="84cc0-154">依預設不會過期 hello 快取中的項目，但可以使用快取集多載的每秒寫入基礎上設定到期日。</span><span class="sxs-lookup"><span data-stu-id="84cc0-154">By default items in hello cache do not expire, but an expiration can be configured on a per write basis using cache set overloads.</span></span> <span data-ttu-id="84cc0-155">如需詳細資訊，請參閱[新增和擷取物件從 hello 快取](cache-dotnet-how-to-use-azure-redis-cache.md#add-and-retrieve-objects-from-the-cache)。</span><span class="sxs-lookup"><span data-stu-id="84cc0-155">For more information, see [Add and retrieve objects from hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#add-and-retrieve-objects-from-the-cache).</span></span> |
| <span data-ttu-id="84cc0-156">區域和標記</span><span class="sxs-lookup"><span data-stu-id="84cc0-156">Regions and Tagging</span></span> |<span data-ttu-id="84cc0-157">區域是快取項目的子群組。</span><span class="sxs-lookup"><span data-stu-id="84cc0-157">Regions are subgroups for cached items.</span></span> <span data-ttu-id="84cc0-158">區域也支援稱為標籤的額外描述性字串 hello 註釋的快取項目。</span><span class="sxs-lookup"><span data-stu-id="84cc0-158">Regions also support hello annotation of cached items with additional descriptive strings called tags.</span></span> <span data-ttu-id="84cc0-159">區域支援在該區域中的 hello 能力 tooperform 搜尋作業上任何已加上標籤的項目。</span><span class="sxs-lookup"><span data-stu-id="84cc0-159">Regions support hello ability tooperform search operations on any tagged items in that region.</span></span> <span data-ttu-id="84cc0-160">區域內的所有項目位於 hello 快取叢集的單一節點內。</span><span class="sxs-lookup"><span data-stu-id="84cc0-160">All items within a region are located within a single node of hello cache cluster.</span></span> |<span data-ttu-id="84cc0-161">Redis 快取所組成的單一節點 （除非已啟用 Redis 叢集） 讓 hello 概念的受管理快取服務區域不會套用。</span><span class="sxs-lookup"><span data-stu-id="84cc0-161">A Redis cache consists of a single node (unless Redis cluster is enabled) so hello concept of Managed Cache Service regions does not apply.</span></span> <span data-ttu-id="84cc0-162">擷取索引鍵，因此描述性標籤可以內嵌在 hello 索引鍵名稱，並稍後用 tooretrieve hello 項目時，redis 支援搜尋和萬用字元作業。</span><span class="sxs-lookup"><span data-stu-id="84cc0-162">Redis supports searching and wildcard operations when retrieving keys so descriptive tags can be embedded within hello key names and used tooretrieve hello items later.</span></span> <span data-ttu-id="84cc0-163">如需使用 Redis 實作標記解決方案的範例，請參閱 [使用 Redis 實作快取標記](http://stackify.com/implementing-cache-tagging-redis/)。</span><span class="sxs-lookup"><span data-stu-id="84cc0-163">For an example of implementing a tagging solution using Redis, see [Implementing cache tagging with Redis](http://stackify.com/implementing-cache-tagging-redis/).</span></span> |
| <span data-ttu-id="84cc0-164">序列化</span><span class="sxs-lookup"><span data-stu-id="84cc0-164">Serialization</span></span> |<span data-ttu-id="84cc0-165">受管理快取支援 NetDataContractSerializer、 BinaryFormatter，以及自訂序列化程式的 hello 使用。</span><span class="sxs-lookup"><span data-stu-id="84cc0-165">Managed Cache supports NetDataContractSerializer, BinaryFormatter, and hello use of custom serializers.</span></span> <span data-ttu-id="84cc0-166">hello 預設值為 NetDataContractSerializer。</span><span class="sxs-lookup"><span data-stu-id="84cc0-166">hello default is NetDataContractSerializer.</span></span> |<span data-ttu-id="84cc0-167">負責 hello hello 用戶端應用程式 tooserialize.NET 物件之前將它們放入 hello 的快取中，與 hello 選擇向上 toohello 用戶端應用程式開發人員的 hello 序列化程式。</span><span class="sxs-lookup"><span data-stu-id="84cc0-167">It is hello responsibility of hello client application tooserialize .NET objects before placing them into hello cache, with hello choice of hello serializer up toohello client application developer.</span></span> <span data-ttu-id="84cc0-168">如需詳細資訊和範例程式碼，請參閱[hello 快取中的.NET 物件處理](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache)。</span><span class="sxs-lookup"><span data-stu-id="84cc0-168">For more information and sample code, see [Work with .NET objects in hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span></span> |
| <span data-ttu-id="84cc0-169">快取模擬器</span><span class="sxs-lookup"><span data-stu-id="84cc0-169">Cache emulator</span></span> |<span data-ttu-id="84cc0-170">受管理的快取提供本機快取模擬器。</span><span class="sxs-lookup"><span data-stu-id="84cc0-170">Managed Cache provides a local cache emulator.</span></span> |<span data-ttu-id="84cc0-171">Azure Redis 快取沒有模擬器，不過您也可以[在本機執行 redis server.exe hello MSOpenTech 組建](cache-faq.md#cache-emulator)tooprovide 模擬器體驗。</span><span class="sxs-lookup"><span data-stu-id="84cc0-171">Azure Redis Cache does not have an emulator, but you can [run hello MSOpenTech build of redis-server.exe locally](cache-faq.md#cache-emulator) tooprovide an emulator experience.</span></span> |

## <a name="choose-a-cache-offering"></a><span data-ttu-id="84cc0-172">選擇快取服務</span><span class="sxs-lookup"><span data-stu-id="84cc0-172">Choose a Cache Offering</span></span>
<span data-ttu-id="84cc0-173">Microsoft Azure Redis 快取位於下列層 hello:</span><span class="sxs-lookup"><span data-stu-id="84cc0-173">Microsoft Azure Redis Cache is available in hello following tiers:</span></span>

* <span data-ttu-id="84cc0-174">**基本** - 單一節點。</span><span class="sxs-lookup"><span data-stu-id="84cc0-174">**Basic** – Single node.</span></span> <span data-ttu-id="84cc0-175">多個向上 too53 GB 的大小。</span><span class="sxs-lookup"><span data-stu-id="84cc0-175">Multiple sizes up too53 GB.</span></span>
* <span data-ttu-id="84cc0-176">**標準** – 兩個節點 (主要/從屬)。</span><span class="sxs-lookup"><span data-stu-id="84cc0-176">**Standard** – Two-node Primary/Replica.</span></span> <span data-ttu-id="84cc0-177">多個向上 too53 GB 的大小。</span><span class="sxs-lookup"><span data-stu-id="84cc0-177">Multiple sizes up too53 GB.</span></span> <span data-ttu-id="84cc0-178">99.9% SLA。</span><span class="sxs-lookup"><span data-stu-id="84cc0-178">99.9% SLA.</span></span>
* <span data-ttu-id="84cc0-179">**Premium** – 雙節點主要/複本向上 too10 分區。</span><span class="sxs-lookup"><span data-stu-id="84cc0-179">**Premium** – Two-node Primary/Replica with up too10 shards.</span></span> <span data-ttu-id="84cc0-180">多個大小為 6 GB too530 GB。</span><span class="sxs-lookup"><span data-stu-id="84cc0-180">Multiple sizes from 6 GB too530 GB.</span></span> <span data-ttu-id="84cc0-181">所有「標準」層級的功能以及更多功能，可支援 [Redis 叢集](cache-how-to-premium-clustering.md)、[Redis 持續性](cache-how-to-premium-persistence.md)和 [Azure 虛擬網路](cache-how-to-premium-vnet.md)。</span><span class="sxs-lookup"><span data-stu-id="84cc0-181">All Standard tier features and more including support for [Redis cluster](cache-how-to-premium-clustering.md), [Redis persistence](cache-how-to-premium-persistence.md), and [Azure Virtual Network](cache-how-to-premium-vnet.md).</span></span> <span data-ttu-id="84cc0-182">99.9% SLA。</span><span class="sxs-lookup"><span data-stu-id="84cc0-182">99.9% SLA.</span></span>

<span data-ttu-id="84cc0-183">每一個階層都有不同的功能和價格。</span><span class="sxs-lookup"><span data-stu-id="84cc0-183">Each tier differs in terms of features and pricing.</span></span> <span data-ttu-id="84cc0-184">hello 功能都會涵蓋在內稍後在本指南中，以及如需定價的詳細資訊，請參閱[快取定價詳細資料](https://azure.microsoft.com/pricing/details/cache/)。</span><span class="sxs-lookup"><span data-stu-id="84cc0-184">hello features are covered later in this guide, and for more information on pricing, see [Cache Pricing Details](https://azure.microsoft.com/pricing/details/cache/).</span></span>

<span data-ttu-id="84cc0-185">移轉的起始點是 toopick hello 大小符合 hello 您先前受管理快取服務快取大小，並再相應增加或減少，視您的應用程式的 hello 需求而定。</span><span class="sxs-lookup"><span data-stu-id="84cc0-185">A starting point for migration is toopick hello size that matches hello size of your previous Managed Cache Service cache, and then scale up or down depending on hello requirements of your application.</span></span> <span data-ttu-id="84cc0-186">如需詳細指引選擇 hello 右 Azure Redis 快取提供項目的的詳細資訊，請參閱[何種 Redis 快取提供項目和大小應該使用？](cache-faq.md#what-redis-cache-offering-and-size-should-i-use)。</span><span class="sxs-lookup"><span data-stu-id="84cc0-186">For more guidance on choosing hello right Azure Redis Cache offering, see [What Redis Cache offering and size should I use?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use).</span></span>

## <a name="create-a-cache"></a><span data-ttu-id="84cc0-187">建立快取</span><span class="sxs-lookup"><span data-stu-id="84cc0-187">Create a Cache</span></span>
[!INCLUDE [redis-cache-create](../../includes/redis-cache-create.md)]

## <a name="configure-hello-cache-clients"></a><span data-ttu-id="84cc0-188">設定 hello 快取用戶端</span><span class="sxs-lookup"><span data-stu-id="84cc0-188">Configure hello Cache Clients</span></span>
<span data-ttu-id="84cc0-189">Hello 快取會建立並設定後，hello 下一個步驟是 tooremove hello 受管理快取服務的設定，並新增 hello 新增 hello Azure Redis 快取設定和參考，讓快取用戶端可以存取 hello 快取。</span><span class="sxs-lookup"><span data-stu-id="84cc0-189">Once hello cache is created and configured, hello next step is tooremove hello Managed Cache Service configuration, and add hello add hello Azure Redis Cache configuration and references so that cache clients can access hello cache.</span></span>

* <span data-ttu-id="84cc0-190">移除 hello 受管理快取服務組態</span><span class="sxs-lookup"><span data-stu-id="84cc0-190">Remove hello Managed Cache Service Configuration</span></span>
* <span data-ttu-id="84cc0-191">設定快取用戶端，使用 StackExchange.Redis NuGet 封裝 hello</span><span class="sxs-lookup"><span data-stu-id="84cc0-191">Configure a cache client using hello StackExchange.Redis NuGet Package</span></span>

### <a name="remove-hello-managed-cache-service-configuration"></a><span data-ttu-id="84cc0-192">移除 hello 受管理快取服務組態</span><span class="sxs-lookup"><span data-stu-id="84cc0-192">Remove hello Managed Cache Service Configuration</span></span>
<span data-ttu-id="84cc0-193">Hello 前用戶端應用程式可以設定 Azure Redis 快取，hello 現有受管理快取服務的組態，您必須移除組件參考，解除安裝 hello 受管理快取服務 NuGet 封裝。</span><span class="sxs-lookup"><span data-stu-id="84cc0-193">Before hello client applications can be configured for Azure Redis Cache, hello existing Managed Cache Service configuration and assembly references must be removed by uninstalling hello Managed Cache Service NuGet package.</span></span>

<span data-ttu-id="84cc0-194">toouninstall hello 受管理快取服務 NuGet 封裝，以滑鼠右鍵按一下中的 hello 用戶端專案**方案總管 中**選擇**管理 NuGet 封裝**。</span><span class="sxs-lookup"><span data-stu-id="84cc0-194">toouninstall hello Managed Cache Service NuGet package, right-click hello client project in **Solution Explorer** and choose **Manage NuGet Packages**.</span></span> <span data-ttu-id="84cc0-195">選取 hello**安裝封裝** 節點，然後輸入 W**indowsAzure.Caching** hello 到搜尋已安裝的封裝 方塊。</span><span class="sxs-lookup"><span data-stu-id="84cc0-195">Select hello **Installed packages** node, and type W**indowsAzure.Caching** into hello Search installed packages box.</span></span> <span data-ttu-id="84cc0-196">選取**Windows** **Azure 快取**(或**Windows** **Azure 快取**視 hello hello NuGet 封裝的版本而定)，按一下**解除安裝**，然後按一下**關閉**。</span><span class="sxs-lookup"><span data-stu-id="84cc0-196">Select **Windows** **Azure Cache** (or **Windows** **Azure Caching** depending on hello version of hello NuGet package), click **Uninstall**, and then click **Close**.</span></span>

![解除安裝 Azure 受管理的快取服務 NuGet 套件](./media/cache-migrate-to-redis/IC757666.jpg)

<span data-ttu-id="84cc0-198">解除安裝的 hello 受管理快取服務 NuGet 封裝會移除 hello app.config 或 web.config 的 hello 用戶端應用程式中的 hello 受管理快取服務組件和 hello 受管理快取服務項目。</span><span class="sxs-lookup"><span data-stu-id="84cc0-198">Uninstalling hello Managed Cache Service NuGet package removes hello Managed Cache Service assemblies and hello Managed Cache Service entries in hello app.config or web.config of hello client application.</span></span> <span data-ttu-id="84cc0-199">因為解除安裝 hello NuGet 封裝時，可能不會移除部分自訂的設定，開啟 web.config 或 app.config，並確保系統會完全移除該 hello 下列項目。</span><span class="sxs-lookup"><span data-stu-id="84cc0-199">Because some customized settings may not be removed when uninstalling hello NuGet package, open web.config or app.config and ensure that hello following elements are completely removed.</span></span>

<span data-ttu-id="84cc0-200">請確定該 hello`dataCacheClients`項目已移除從 hello`configSections`項目。</span><span class="sxs-lookup"><span data-stu-id="84cc0-200">Ensure that hello `dataCacheClients` entry is removed from hello `configSections` element.</span></span> <span data-ttu-id="84cc0-201">請勿移除 hello 整個`configSections`項目，則只移除 hello`dataCacheClients`項目，如果有的話。</span><span class="sxs-lookup"><span data-stu-id="84cc0-201">Do not remove hello entire `configSections` element; just remove hello `dataCacheClients` entry, if it is present.</span></span>

```xml
<configSections>
  <!-- Existing sections omitted for clarity. -->
  <section name="dataCacheClients"type="Microsoft.ApplicationServer.Caching.DataCacheClientsSection, Microsoft.ApplicationServer.Caching.Core" allowLocation="true" allowDefinition="Everywhere"/>
</configSections>
```

<span data-ttu-id="84cc0-202">請確定該 hello`dataCacheClients`在移除區段。</span><span class="sxs-lookup"><span data-stu-id="84cc0-202">Ensure that hello `dataCacheClients` section is removed.</span></span> <span data-ttu-id="84cc0-203">hello `dataCacheClients` > 一節將會類似下列範例的 toohello。</span><span class="sxs-lookup"><span data-stu-id="84cc0-203">hello `dataCacheClients` section will be similar toohello following example.</span></span>

```xml
<dataCacheClients>
  <dataCacheClientname="default">
    <!--toouse hello in-role flavor of Azure Cache, set identifier toobe hello cache cluster role name -->
    <!--toouse hello Azure Managed Cache Service, set identifier toobe hello endpoint of hello cache cluster -->
    <autoDiscoverisEnabled="true"identifier="[Cache role name or Service Endpoint]"/>

    <!--<localCache isEnabled="true" sync="TimeoutBased" objectCount="100000" ttlValue="300" />-->
    <!--Use this section toospecify security settings for connecting tooyour cache. This section is not required if your cache is hosted on a role that is a part of your cloud service. -->
    <!--<securityProperties mode="Message" sslEnabled="true">
      <messageSecurity authorizationInfo="[Authentication Key]" />
    </securityProperties>-->
  </dataCacheClient>
</dataCacheClients>
```

<span data-ttu-id="84cc0-204">一旦移除 hello 受管理快取服務組態時，您可以設定 hello 快取用戶端 hello 之後 > 一節中所述。</span><span class="sxs-lookup"><span data-stu-id="84cc0-204">Once hello Managed Cache Service configuration is removed, you can configure hello cache client as described in hello following section.</span></span>

### <a name="configure-a-cache-client-using-hello-stackexchangeredis-nuget-package"></a><span data-ttu-id="84cc0-205">設定快取用戶端，使用 StackExchange.Redis NuGet 封裝 hello</span><span class="sxs-lookup"><span data-stu-id="84cc0-205">Configure a cache client using hello StackExchange.Redis NuGet Package</span></span>
[!INCLUDE [redis-cache-configure](../../includes/redis-cache-configure-stackexchange-redis-nuget.md)]

## <a name="migrate-managed-cache-service-code"></a><span data-ttu-id="84cc0-206">移轉受管理的快取服務程式碼</span><span class="sxs-lookup"><span data-stu-id="84cc0-206">Migrate Managed Cache Service code</span></span>
<span data-ttu-id="84cc0-207">hello StackExchange.Redis 快取用戶端的 hello API 是類似 toohello 受管理的快取服務。</span><span class="sxs-lookup"><span data-stu-id="84cc0-207">hello API for hello StackExchange.Redis cache client is similar toohello Managed Cache Service.</span></span> <span data-ttu-id="84cc0-208">本節中的 hello 差異的概觀。</span><span class="sxs-lookup"><span data-stu-id="84cc0-208">This section provides an overview of hello differences.</span></span>

### <a name="connect-toohello-cache-using-hello-connectionmultiplexer-class"></a><span data-ttu-id="84cc0-209">連接 toohello 快取使用 hello ConnectionMultiplexer 類別</span><span class="sxs-lookup"><span data-stu-id="84cc0-209">Connect toohello cache using hello ConnectionMultiplexer class</span></span>
<span data-ttu-id="84cc0-210">在受管理快取服務中，連接 toohello 快取已由 hello`DataCacheFactory`和`DataCache`類別。</span><span class="sxs-lookup"><span data-stu-id="84cc0-210">In Managed Cache Service, connections toohello cache were handled by hello `DataCacheFactory` and `DataCache` classes.</span></span> <span data-ttu-id="84cc0-211">Azure Redis 快取中，這些連線都受 hello`ConnectionMultiplexer`類別。</span><span class="sxs-lookup"><span data-stu-id="84cc0-211">In Azure Redis Cache, these connections are managed by hello `ConnectionMultiplexer` class.</span></span>

<span data-ttu-id="84cc0-212">新增 hello 下列使用陳述式 toohello 頂端的任何您想要從中 tooaccess hello 快取的檔案。</span><span class="sxs-lookup"><span data-stu-id="84cc0-212">Add hello following using statement toohello top of any file from which you want tooaccess hello cache.</span></span>

```c#
using StackExchange.Redis
```

<span data-ttu-id="84cc0-213">如果此命名空間未解析，請確定您加入 hello StackExchange.Redis NuGet 封裝中所述[設定 hello 快取用戶端](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients)。</span><span class="sxs-lookup"><span data-stu-id="84cc0-213">If this namespace doesn’t resolve, be sure that you have added hello StackExchange.Redis NuGet package as described in [Configure hello cache clients](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span></span>

> [!NOTE]
> <span data-ttu-id="84cc0-214">請注意該 hello StackExchange.Redis 用戶端需要.NET Framework 4 或更新版本。</span><span class="sxs-lookup"><span data-stu-id="84cc0-214">Note that hello StackExchange.Redis client requires .NET Framework 4 or higher.</span></span>
> 
> 

<span data-ttu-id="84cc0-215">tooconnect tooan Azure Redis 快取執行個體，呼叫 hello 靜態`ConnectionMultiplexer.Connect`方法並傳入 hello 端點和金鑰。</span><span class="sxs-lookup"><span data-stu-id="84cc0-215">tooconnect tooan Azure Redis Cache instance, call hello static `ConnectionMultiplexer.Connect` method and pass in hello endpoint and key.</span></span> <span data-ttu-id="84cc0-216">其中一個方法 toosharing`ConnectionMultiplexer`應用程式中的執行個體是 toohave 傳回連接的執行個體，下列範例類似 toohello 的靜態屬性。</span><span class="sxs-lookup"><span data-stu-id="84cc0-216">One approach toosharing a `ConnectionMultiplexer` instance in your application is toohave a static property that returns a connected instance, similar toohello following example.</span></span> <span data-ttu-id="84cc0-217">這會提供執行緒安全的方式 tooinitialize 僅連接單一`ConnectionMultiplexer`執行個體。</span><span class="sxs-lookup"><span data-stu-id="84cc0-217">This provides a thread-safe way tooinitialize only a single connected `ConnectionMultiplexer` instance.</span></span> <span data-ttu-id="84cc0-218">在此範例中`abortConnect`是集 toofalse，這表示將會成功 hello 呼叫，即使沒有建立連線 toohello 快取。</span><span class="sxs-lookup"><span data-stu-id="84cc0-218">In this example `abortConnect` is set toofalse, which means that hello call will succeed even if a connection toohello cache is not established.</span></span> <span data-ttu-id="84cc0-219">一項重要功能`ConnectionMultiplexer`是，它會自動還原連線 toohello 快取之後 hello 網路問題或其他原因，在解決。</span><span class="sxs-lookup"><span data-stu-id="84cc0-219">One key feature of `ConnectionMultiplexer` is that it will automatically restore connectivity toohello cache once hello network issue or other causes are resolved.</span></span>

```c#
private static Lazy<ConnectionMultiplexer> lazyConnection = new Lazy<ConnectionMultiplexer>(() =>
{
    return ConnectionMultiplexer.Connect("contoso5.redis.cache.windows.net,abortConnect=false,ssl=true,password=...");
});

public static ConnectionMultiplexer Connection
{
    get
    {
        return lazyConnection.Value;
    }
}
```

<span data-ttu-id="84cc0-220">hello 快取端點、 金鑰和連接埠可以取自 hello **Redis 快取**刀鋒視窗中的快取執行個體。</span><span class="sxs-lookup"><span data-stu-id="84cc0-220">hello cache endpoint, keys, and ports can be obtained from hello **Redis Cache** blade for your cache instance.</span></span> <span data-ttu-id="84cc0-221">如需詳細資訊，請參閱 [Redis 快取屬性](cache-configure.md#properties)。</span><span class="sxs-lookup"><span data-stu-id="84cc0-221">For more information, see [Redis Cache properties](cache-configure.md#properties).</span></span>

<span data-ttu-id="84cc0-222">一旦建立 hello 連線之後，傳回參考 toohello Redis 快取資料庫呼叫 hello`ConnectionMultiplexer.GetDatabase`方法。</span><span class="sxs-lookup"><span data-stu-id="84cc0-222">Once hello connection is established, return a reference toohello Redis cache database by calling hello `ConnectionMultiplexer.GetDatabase` method.</span></span> <span data-ttu-id="84cc0-223">傳回的 hello hello 物件`GetDatabase`方法是輕量的傳遞物件，而且不需要 toobe 儲存。</span><span class="sxs-lookup"><span data-stu-id="84cc0-223">hello object returned from hello `GetDatabase` method is a lightweight pass-through object and does not need toobe stored.</span></span>

```c#
IDatabase cache = Connection.GetDatabase();

// Perform cache operations using hello cache object...
// Simple put of integral data types into hello cache
cache.StringSet("key1", "value");
cache.StringSet("key2", 25);

// Simple get of data types from hello cache
string key1 = cache.StringGet("key1");
int key2 = (int)cache.StringGet("key2");
```

<span data-ttu-id="84cc0-224">hello StackExchange.Redis 用戶端會使用 hello`RedisKey`和`RedisValue`存取並儲存在 hello 快取中的項目類型。</span><span class="sxs-lookup"><span data-stu-id="84cc0-224">hello StackExchange.Redis client uses hello `RedisKey` and `RedisValue` types for accessing and storing items in hello cache.</span></span> <span data-ttu-id="84cc0-225">這些型別會對應到最基本的語言型別 (包括字串)，但通常不會直接使用。</span><span class="sxs-lookup"><span data-stu-id="84cc0-225">These types map onto most primitive language types, including string, and often are not used directly.</span></span> <span data-ttu-id="84cc0-226">Redis 和字串 hello 最基本的 Redis 值，並且可以包含許多類型的資料，包括序列化的二進位資料流，而您不可以直接使用 hello 類型，您會使用包含的方法`String`hello 名稱中。</span><span class="sxs-lookup"><span data-stu-id="84cc0-226">Redis Strings are hello most basic kind of Redis value, and can contain many types of data, including serialized binary streams, and while you may not use hello type directly, you will use methods that contain `String` in hello name.</span></span> <span data-ttu-id="84cc0-227">最基本的資料類型儲存和擷取項目從 hello 快取使用 hello`StringSet`和`StringGet`方法，除非您儲存了集合或其他 Redis 資料型別 hello 快取中。</span><span class="sxs-lookup"><span data-stu-id="84cc0-227">For most primitive data types you store and retrieve items from hello cache using hello `StringSet` and `StringGet` methods, unless you are storing collections or other Redis data types in hello cache.</span></span> 

<span data-ttu-id="84cc0-228">`StringSet`和`StringGet`是非常類似 toohello 受管理的快取服務`Put`和`Get`方法，其中包含一個主要差異在於您設定並取得 a.NET 物件至 hello 快取之前您必須先序列化。</span><span class="sxs-lookup"><span data-stu-id="84cc0-228">`StringSet` and `StringGet` are very similar toohello Managed Cache Service `Put` and `Get` methods, with one major difference being that before you set and get a .NET object into hello cache you must serialize it first.</span></span> 

<span data-ttu-id="84cc0-229">當呼叫`StringGet`、 如果 hello 物件存在，會將它傳回，而如果沒有，則傳回 null。</span><span class="sxs-lookup"><span data-stu-id="84cc0-229">When calling `StringGet`, if hello object exists, it is returned, and if it does not, null is returned.</span></span> <span data-ttu-id="84cc0-230">在此情況下，您可以從 hello 所需的資料來源擷取 hello 值，並將它儲存 hello 快取供後續使用。</span><span class="sxs-lookup"><span data-stu-id="84cc0-230">In this case you can retrieve hello value from hello desired data source and store it in hello cache for subsequent use.</span></span> <span data-ttu-id="84cc0-231">這稱為 hello 另行快取模式。</span><span class="sxs-lookup"><span data-stu-id="84cc0-231">This is known as hello cache-aside pattern.</span></span>

<span data-ttu-id="84cc0-232">hello 快取中，使用 hello 項目的 toospecify hello 到期`TimeSpan`參數`StringSet`。</span><span class="sxs-lookup"><span data-stu-id="84cc0-232">toospecify hello expiration of an item in hello cache, use hello `TimeSpan` parameter of `StringSet`.</span></span>

```c#
cache.StringSet("key1", "value1", TimeSpan.FromMinutes(90));
```

<span data-ttu-id="84cc0-233">Azure Redis 快取可以使用 .NET 物件及基本資料型別，但必須先將 .NET 物件序列化，才能加以快取。</span><span class="sxs-lookup"><span data-stu-id="84cc0-233">Azure Redis Cache can work with .NET objects as well as primitive data types, but before a .NET object can be cached it must be serialized.</span></span> <span data-ttu-id="84cc0-234">這是 hello 的 hello 應用程式開發人員的責任。</span><span class="sxs-lookup"><span data-stu-id="84cc0-234">This is hello responsibility of hello application developer.</span></span> <span data-ttu-id="84cc0-235">如此 hello 開發人員彈性 hello 選擇 hello 序列化程式。</span><span class="sxs-lookup"><span data-stu-id="84cc0-235">This gives hello developer flexibility in hello choice of hello serializer.</span></span> <span data-ttu-id="84cc0-236">如需詳細資訊和範例程式碼，請參閱[hello 快取中的.NET 物件處理](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache)。</span><span class="sxs-lookup"><span data-stu-id="84cc0-236">For more information and sample code, see [Work with .NET objects in hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span></span>

## <a name="migrate-aspnet-session-state-and-output-caching-tooazure-redis-cache"></a><span data-ttu-id="84cc0-237">移轉 ASP.NET 工作階段狀態和輸出快取 tooAzure Redis 快取</span><span class="sxs-lookup"><span data-stu-id="84cc0-237">Migrate ASP.NET Session State and Output caching tooAzure Redis Cache</span></span>
<span data-ttu-id="84cc0-238">Azure Redis 快取有適用於 ASP.NET 工作階段狀態和頁面輸出快取的提供者。</span><span class="sxs-lookup"><span data-stu-id="84cc0-238">Azure Redis Cache has providers for both ASP.NET Session State and Page Output caching.</span></span> <span data-ttu-id="84cc0-239">toomigrate 使用 hello 受管理快取服務版本的這些提供者，您的應用程式第一次移除 hello web.config 中，從現有的區段，然後設定 hello Azure Redis 快取版本 hello 提供者。</span><span class="sxs-lookup"><span data-stu-id="84cc0-239">toomigrate your application that uses hello Managed Cache Service versions of these providers, first remove hello existing sections from your web.config, and then configure hello Azure Redis Cache versions of hello providers.</span></span> <span data-ttu-id="84cc0-240">如需有關使用指示 hello Azure Redis 快取 ASP.NET 提供者，請參閱 < [Azure Redis 快取的 ASP.NET 工作階段狀態提供者](cache-aspnet-session-state-provider.md)和[Azure Redis 快取的 ASP.NET 輸出快取提供者](cache-aspnet-output-cache-provider.md)。</span><span class="sxs-lookup"><span data-stu-id="84cc0-240">For instructions on using hello Azure Redis Cache ASP.NET providers, see [ASP.NET Session State Provider for Azure Redis Cache](cache-aspnet-session-state-provider.md) and [ASP.NET Output Cache Provider for Azure Redis Cache](cache-aspnet-output-cache-provider.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="84cc0-241">後續步驟</span><span class="sxs-lookup"><span data-stu-id="84cc0-241">Next steps</span></span>
<span data-ttu-id="84cc0-242">瀏覽 hello [Azure Redis 快取文件](https://azure.microsoft.com/documentation/services/cache/)教學課程、 範例、 影片，等等。</span><span class="sxs-lookup"><span data-stu-id="84cc0-242">Explore hello [Azure Redis Cache documentation](https://azure.microsoft.com/documentation/services/cache/) for tutorials, samples, videos, and more.</span></span>

