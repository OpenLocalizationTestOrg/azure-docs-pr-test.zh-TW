---
title: "aaaCross 原始資源共用 (CORS) 支援 |Microsoft 文件"
description: "深入了解如何 tooenable hello Microsoft Azure 儲存體服務的 CORS 支援。"
services: storage
documentationcenter: .net
author: cbrooksmsft
manager: carmonm
editor: tysonn
ms.assetid: a0229595-5b64-4898-b8d6-fa2625ea6887
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 2/22/2017
ms.author: cbrooks
ms.openlocfilehash: 0a6ec3bf6999c5faa7f0912dc2a47921aa01d3d4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="cross-origin-resource-sharing-cors-support-for-hello-azure-storage-services"></a><span data-ttu-id="f20fd-103">Hello Azure 儲存體服務的跨原始資源共用 (CORS) 支援</span><span class="sxs-lookup"><span data-stu-id="f20fd-103">Cross-Origin Resource Sharing (CORS) Support for hello Azure Storage Services</span></span>
<span data-ttu-id="f20fd-104">從 2013年-08-15 版開始，hello Azure 儲存體服務支援跨原始資源共用 (CORS) hello Blob、 資料表、 佇列和檔案服務。</span><span class="sxs-lookup"><span data-stu-id="f20fd-104">Beginning with version 2013-08-15, hello Azure storage services support Cross-Origin Resource Sharing (CORS) for hello Blob, Table, Queue, and File services.</span></span> <span data-ttu-id="f20fd-105">CORS 是 HTTP 功能，可讓 web 應用程式執行另一個網域中的下一個網域 tooaccess 資源。</span><span class="sxs-lookup"><span data-stu-id="f20fd-105">CORS is an HTTP feature that enables a web application running under one domain tooaccess resources in another domain.</span></span> <span data-ttu-id="f20fd-106">網頁瀏覽器實作稱為安全性限制[相同來源原則](http://www.w3.org/Security/wiki/Same_Origin_Policy)，用於防止網頁呼叫 Api 在不同的網域。CORS 提供安全的方式 tooallow 一個網域 （hello 原始網域） toocall 另一個網域中的應用程式開發介面。</span><span class="sxs-lookup"><span data-stu-id="f20fd-106">Web browsers implement a security restriction known as [same-origin policy](http://www.w3.org/Security/wiki/Same_Origin_Policy) that prevents a web page from calling APIs in a different domain; CORS provides a secure way tooallow one domain (hello origin domain) toocall APIs in another domain.</span></span> <span data-ttu-id="f20fd-107">請參閱 hello [CORS 規格](http://www.w3.org/TR/cors/)如 CORS 的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="f20fd-107">See hello [CORS specification](http://www.w3.org/TR/cors/) for details on CORS.</span></span>

<span data-ttu-id="f20fd-108">您可以個別設定 CORS 規則 hello 的每個儲存體服務，藉由呼叫[設定 Blob 服務屬性](https://msdn.microsoft.com/library/hh452235.aspx)，[設定佇列服務屬性](https://msdn.microsoft.com/library/hh452232.aspx)，和[設定表格服務屬性](https://msdn.microsoft.com/library/hh452240.aspx).</span><span class="sxs-lookup"><span data-stu-id="f20fd-108">You can set CORS rules individually for each of hello storage services, by calling [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), and [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx).</span></span> <span data-ttu-id="f20fd-109">一旦您設定 hello hello 服務的 CORS 規則，那麼對 hello 服務發出來自不同網域的適當驗證的要求將不評估的 toodetermine 是否允許根據您指定的 toohello 規則。</span><span class="sxs-lookup"><span data-stu-id="f20fd-109">Once you set hello CORS rules for hello service, then a properly authenticated request made against hello service from a different domain will be evaluated toodetermine whether it is allowed according toohello rules you have specified.</span></span>

> [!NOTE]
> <span data-ttu-id="f20fd-110">請注意，CORS 不是一種驗證機制。</span><span class="sxs-lookup"><span data-stu-id="f20fd-110">Note that CORS is not an authentication mechanism.</span></span> <span data-ttu-id="f20fd-111">啟用 CORS 時，對儲存體資源所提出的任何要求都必須具有適當的驗證簽章，或者必須對公用資源提出。</span><span class="sxs-lookup"><span data-stu-id="f20fd-111">Any request made against a storage resource when CORS is enabled must either have a proper authentication signature, or must be made against a public resource.</span></span>
> 
> 

## <a name="understanding-cors-requests"></a><span data-ttu-id="f20fd-112">了解 CORS 要求</span><span class="sxs-lookup"><span data-stu-id="f20fd-112">Understanding CORS requests</span></span>
<span data-ttu-id="f20fd-113">來自原始網域的 CORS 要求可能包含兩個不同要求：</span><span class="sxs-lookup"><span data-stu-id="f20fd-113">A CORS request from an origin domain may consist of two separate requests:</span></span>

* <span data-ttu-id="f20fd-114">預檢要求，查詢會在 hello 服務所加諸的 hello CORS 限制。</span><span class="sxs-lookup"><span data-stu-id="f20fd-114">A preflight request, which queries hello CORS restrictions imposed by hello service.</span></span> <span data-ttu-id="f20fd-115">需要 hello 預檢要求，除非 hello 要求方法[簡單的方法](http://www.w3.org/TR/cors/)，這表示 GET、 HEAD 或 POST。</span><span class="sxs-lookup"><span data-stu-id="f20fd-115">hello preflight request is required unless hello request method is a [simple method](http://www.w3.org/TR/cors/), meaning GET, HEAD, or POST.</span></span>
* <span data-ttu-id="f20fd-116">hello 實際要求，針對 hello 進行所需的資源。</span><span class="sxs-lookup"><span data-stu-id="f20fd-116">hello actual request, made against hello desired resource.</span></span>

### <a name="preflight-request"></a><span data-ttu-id="f20fd-117">預檢要求</span><span class="sxs-lookup"><span data-stu-id="f20fd-117">Preflight request</span></span>
<span data-ttu-id="f20fd-118">hello 預檢要求會查詢 hello 已 hello 帳戶擁有者建立 hello 儲存體服務的 CORS 限制。</span><span class="sxs-lookup"><span data-stu-id="f20fd-118">hello preflight request queries hello CORS restrictions that have been established for hello storage service by hello account owner.</span></span> <span data-ttu-id="f20fd-119">hello 網頁瀏覽器 （或其他使用者代理程式） 選項會將要求傳送包含 hello 要求標頭、 方法和原始網域。</span><span class="sxs-lookup"><span data-stu-id="f20fd-119">hello web browser (or other user agent) sends an OPTIONS request that includes hello request headers, method and origin domain.</span></span> <span data-ttu-id="f20fd-120">hello 儲存體服務會評估一組預先設定的 CORS 規則來指定哪一個原始網域、 要求方法為基礎的 hello 預期作業和要求標頭可能會針對儲存體資源的實際要求上指定。</span><span class="sxs-lookup"><span data-stu-id="f20fd-120">hello storage service evaluates hello intended operation based on a pre-configured set of CORS rules that specify which origin domains, request methods, and request headers may be specified on an actual request against a storage resource.</span></span>

<span data-ttu-id="f20fd-121">如果啟用 hello 服務的 CORS，且 CORS 規則符合預檢要求的 hello，hello 服務會以狀態碼 200 （確定） 回應，並且納入 hello 回應 hello 所需的 Access-control 標頭。</span><span class="sxs-lookup"><span data-stu-id="f20fd-121">If CORS is enabled for hello service and there is a CORS rule that matches hello preflight request, hello service responds with status code 200 (OK), and includes hello required Access-Control headers in hello response.</span></span>

<span data-ttu-id="f20fd-122">如果 hello 服務未啟用 CORS 或 CORS 規則不符合 hello 預檢要求，hello 服務將會以狀態碼 403 （禁止） 回應。</span><span class="sxs-lookup"><span data-stu-id="f20fd-122">If CORS is not enabled for hello service or no CORS rule matches hello preflight request, hello service will respond with status code 403 (Forbidden).</span></span>

<span data-ttu-id="f20fd-123">如果 OPTIONS 要求不包含的 hello hello 必要的 CORS 標頭 （hello 原點和存取控制-要求方法標頭），hello 服務會回應以狀態碼 400 （不正確的要求）。</span><span class="sxs-lookup"><span data-stu-id="f20fd-123">If hello OPTIONS request doesn't contain hello required CORS headers (hello Origin and Access-Control-Request-Method headers), hello service will respond with status code 400 (Bad request).</span></span>

<span data-ttu-id="f20fd-124">請注意，預檢要求會評估 hello 服務 （Blob、 佇列和資料表），但不檢查 hello 要求的資源。</span><span class="sxs-lookup"><span data-stu-id="f20fd-124">Note that a preflight request is evaluated against hello service (Blob, Queue, and Table) and not against hello requested resource.</span></span> <span data-ttu-id="f20fd-125">hello 帳戶擁有者必須啟用 CORS，為了讓 hello 要求 toosucceed hello 帳戶服務屬性的一部分。</span><span class="sxs-lookup"><span data-stu-id="f20fd-125">hello account owner must have enabled CORS as part of hello account service properties in order for hello request toosucceed.</span></span>

### <a name="actual-request"></a><span data-ttu-id="f20fd-126">實際要求</span><span class="sxs-lookup"><span data-stu-id="f20fd-126">Actual request</span></span>
<span data-ttu-id="f20fd-127">一旦接受 hello 預檢要求，會傳回 hello 回應 hello 瀏覽器會發送 hello 針對 hello 儲存體資源的實際要求。</span><span class="sxs-lookup"><span data-stu-id="f20fd-127">Once hello preflight request is accepted and hello response is returned, hello browser will dispatch hello actual request against hello storage resource.</span></span> <span data-ttu-id="f20fd-128">如果 hello 預檢要求遭到拒絕，請立即 hello 瀏覽器將會拒絕 hello 實際要求。</span><span class="sxs-lookup"><span data-stu-id="f20fd-128">hello browser will deny hello actual request immediately if hello preflight request is rejected.</span></span>

<span data-ttu-id="f20fd-129">hello 實際要求會被視為對 hello 儲存體服務的一般要求。</span><span class="sxs-lookup"><span data-stu-id="f20fd-129">hello actual request is treated as normal request against hello storage service.</span></span> <span data-ttu-id="f20fd-130">hello 存在 hello Origin 標頭表示 hello 要求是 CORS 要求，並 hello 服務會檢查 hello 比對 CORS 規則。</span><span class="sxs-lookup"><span data-stu-id="f20fd-130">hello presence of hello Origin header indicates that hello request is a CORS request and hello service will check hello matching CORS rules.</span></span> <span data-ttu-id="f20fd-131">如果找到相符項目，會加入的 toohello 回應 hello Access-control 標頭，並傳送後 toohello 用戶端。</span><span class="sxs-lookup"><span data-stu-id="f20fd-131">If a match is found, hello Access-Control headers are added toohello response and sent back toohello client.</span></span> <span data-ttu-id="f20fd-132">如果找不到相符項目，不會傳回 hello CORS Access-control 標頭。</span><span class="sxs-lookup"><span data-stu-id="f20fd-132">If a match is not found, hello CORS Access-Control headers are not returned.</span></span>

## <a name="enabling-cors-for-hello-azure-storage-services"></a><span data-ttu-id="f20fd-133">啟用 hello Azure 儲存體服務的 CORS</span><span class="sxs-lookup"><span data-stu-id="f20fd-133">Enabling CORS for hello Azure Storage services</span></span>
<span data-ttu-id="f20fd-134">在 hello 服務層級，會設定 CORS 規則，因此您需要 tooenable 或停用 CORS，每個服務 （Blob、 佇列和表格） 分開。</span><span class="sxs-lookup"><span data-stu-id="f20fd-134">CORS rules are set at hello service level, so you need tooenable or disable CORS for each service (Blob, Queue and Table) separately.</span></span> <span data-ttu-id="f20fd-135">根據預設，每個服務都會停用 CORS。</span><span class="sxs-lookup"><span data-stu-id="f20fd-135">By default, CORS is disabled for each service.</span></span> <span data-ttu-id="f20fd-136">tooenable CORS，您需要 tooset hello 適當的服務屬性使用 2013年-08-15 版或更新版本，並將 CORS 規則 toohello 服務屬性。</span><span class="sxs-lookup"><span data-stu-id="f20fd-136">tooenable CORS, you need tooset hello appropriate service properties using version 2013-08-15 or later, and add CORS rules toohello service properties.</span></span> <span data-ttu-id="f20fd-137">如需詳細資訊，關於如何 tooenable 或服務及其如何 tooset CORS 規則，請停用 CORS 太參考[設定 Blob 服務屬性](https://msdn.microsoft.com/library/hh452235.aspx)，[設定佇列服務屬性](https://msdn.microsoft.com/library/hh452232.aspx)，和[設定資料表服務屬性](https://msdn.microsoft.com/library/hh452240.aspx)。</span><span class="sxs-lookup"><span data-stu-id="f20fd-137">For details about how tooenable or disable CORS for a service and how tooset CORS rules, please refer too[Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), and [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx).</span></span>

<span data-ttu-id="f20fd-138">以下範例是透過設定服務屬性作業指定的單一 CORS 規則：</span><span class="sxs-lookup"><span data-stu-id="f20fd-138">Here is a sample of a single CORS rule, specified via a Set Service Properties operation:</span></span>

```xml
<Cors>    
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com, http://www.fabrikam.com</AllowedOrigins>
        <AllowedMethods>PUT,GET</AllowedMethods>
        <AllowedHeaders>x-ms-meta-data*,x-ms-meta-target*,x-ms-meta-abc</AllowedHeaders>
        <ExposedHeaders>x-ms-meta-*</ExposedHeaders>
        <MaxAgeInSeconds>200</MaxAgeInSeconds>
    </CorsRule>
<Cors>
```

<span data-ttu-id="f20fd-139">下面會描述 hello CORS 規則中包含每個項目：</span><span class="sxs-lookup"><span data-stu-id="f20fd-139">Each element included in hello CORS rule is described below:</span></span>

* <span data-ttu-id="f20fd-140">**AllowedOrigins**： 允許 toomake hello 原始網域透過 CORS 對 hello 儲存體要求服務。</span><span class="sxs-lookup"><span data-stu-id="f20fd-140">**AllowedOrigins**: hello origin domains that are permitted toomake a request against hello storage service via CORS.</span></span> <span data-ttu-id="f20fd-141">hello 原始網域是要求源自的 hello 的 hello 網域。</span><span class="sxs-lookup"><span data-stu-id="f20fd-141">hello origin domain is hello domain from which hello request originates.</span></span> <span data-ttu-id="f20fd-142">請注意 hello 來源必須具有 hello 使用者年齡傳送 toohello 服務的 hello 原始來源區分大小寫完全相符。</span><span class="sxs-lookup"><span data-stu-id="f20fd-142">Note that hello origin must be an exact case-sensitive match with hello origin that hello user age sends toohello service.</span></span> <span data-ttu-id="f20fd-143">您也可以使用 hello 萬用字元 ' *' tooallow 所有原始網域 toomake 透過 CORS 要求。</span><span class="sxs-lookup"><span data-stu-id="f20fd-143">You can also use hello wildcard character '*' tooallow all origin domains toomake requests via CORS.</span></span> <span data-ttu-id="f20fd-144">Hello 上述範例中，在 hello 網域[http://www.contoso.com](http://www.contoso.com)和[http://www.fabrikam.com](http://www.fabrikam.com)可對使用 CORS hello 服務的要求。</span><span class="sxs-lookup"><span data-stu-id="f20fd-144">In hello example above, hello domains [http://www.contoso.com](http://www.contoso.com) and [http://www.fabrikam.com](http://www.fabrikam.com) can make requests against hello service using CORS.</span></span>
* <span data-ttu-id="f20fd-145">**AllowedMethods**: hello 方法 （HTTP 要求動詞命令） 該 hello 原始網域可能用於 CORS 要求。</span><span class="sxs-lookup"><span data-stu-id="f20fd-145">**AllowedMethods**: hello methods (HTTP request verbs) that hello origin domain may use for a CORS request.</span></span> <span data-ttu-id="f20fd-146">Hello 上述範例中，允許使用只有 PUT 和 GET 要求。</span><span class="sxs-lookup"><span data-stu-id="f20fd-146">In hello example above, only PUT and GET requests are permitted.</span></span>
* <span data-ttu-id="f20fd-147">**AllowedHeaders**: hello 要求標頭的 hello 原始網域可在 hello CORS 要求上指定。</span><span class="sxs-lookup"><span data-stu-id="f20fd-147">**AllowedHeaders**: hello request headers that hello origin domain may specify on hello CORS request.</span></span> <span data-ttu-id="f20fd-148">Hello 上述範例中，允許開頭 x-ms-中繼資料，x ms-中繼-目標和 x ms-中繼 abc 的所有中繼資料標頭。</span><span class="sxs-lookup"><span data-stu-id="f20fd-148">In hello example above, all metadata headers starting with x-ms-meta-data, x-ms-meta-target, and x-ms-meta-abc are permitted.</span></span> <span data-ttu-id="f20fd-149">請注意該 hello 萬用字元 ' *' 表示 hello 任何標頭開頭指定允許前置詞。</span><span class="sxs-lookup"><span data-stu-id="f20fd-149">Note that hello wildcard character '*' indicates that any header beginning with hello specified prefix is allowed.</span></span>
* <span data-ttu-id="f20fd-150">**ExposedHeaders**: hello 可能 hello 回應 toohello CORS 要求中傳送和 hello 瀏覽器 toohello 要求簽發者所公開的回應標頭。</span><span class="sxs-lookup"><span data-stu-id="f20fd-150">**ExposedHeaders**: hello response headers that may be sent in hello response toohello CORS request and exposed by hello browser toohello request issuer.</span></span> <span data-ttu-id="f20fd-151">在上面，hello 瀏覽器的 hello 範例為指示 tooexpose x-ms-中繼，任何標頭開頭。</span><span class="sxs-lookup"><span data-stu-id="f20fd-151">In hello example above, hello browser is instructed tooexpose any header beginning with x-ms-meta.</span></span>
* <span data-ttu-id="f20fd-152">**MaxAgeInSeconds**: hello 最大時間量瀏覽器應該快取預檢 OPTIONS 要求 hello。</span><span class="sxs-lookup"><span data-stu-id="f20fd-152">**MaxAgeInSeconds**: hello maximum amount time that a browser should cache hello preflight OPTIONS request.</span></span>

<span data-ttu-id="f20fd-153">hello Azure 儲存體服務支援指定帶有前置詞的標頭這兩個 hello **AllowedHeaders**和**ExposedHeaders**項目。</span><span class="sxs-lookup"><span data-stu-id="f20fd-153">hello Azure storage services support specifying prefixed headers for both hello **AllowedHeaders** and **ExposedHeaders** elements.</span></span> <span data-ttu-id="f20fd-154">tooallow 標頭的類別，您可以指定相同的前置詞 toothat 類別目錄。</span><span class="sxs-lookup"><span data-stu-id="f20fd-154">tooallow a category of headers, you can specify a common prefix toothat category.</span></span> <span data-ttu-id="f20fd-155">例如，指定 *x-ms-meta** 做為有前置詞的標頭會建立一項規則，可比對開頭為 x-ms-meta 的所有標頭。</span><span class="sxs-lookup"><span data-stu-id="f20fd-155">For example, specifying *x-ms-meta** as a prefixed header establishes a rule that will match all headers that begin with x-ms-meta.</span></span>

<span data-ttu-id="f20fd-156">hello 下列限制適用於 tooCORS 規則：</span><span class="sxs-lookup"><span data-stu-id="f20fd-156">hello following limitations apply tooCORS rules:</span></span>

* <span data-ttu-id="f20fd-157">您可以將每個儲存體服務 （Blob、 資料表和佇列） 的 CORS 規則指定 toofive 組成。</span><span class="sxs-lookup"><span data-stu-id="f20fd-157">You can specify up toofive CORS rules per storage service (Blob, Table, and Queue).</span></span>
* <span data-ttu-id="f20fd-158">hello 所有 CORS 規則設定 hello 要求時，排除 XML 標記的大小上限不得超過 2 KB。</span><span class="sxs-lookup"><span data-stu-id="f20fd-158">hello maximum size of all CORS rules settings on hello request, excluding XML tags, should not exceed 2 KB.</span></span>
* <span data-ttu-id="f20fd-159">允許的標頭、 公開的標頭或允許的原始網域的 hello 長度不可超過 256 個字元。</span><span class="sxs-lookup"><span data-stu-id="f20fd-159">hello length of an allowed header, exposed header, or allowed origin should not exceed 256 characters.</span></span>
* <span data-ttu-id="f20fd-160">允許的標頭和公開的標頭可以是：</span><span class="sxs-lookup"><span data-stu-id="f20fd-160">Allowed headers and exposed headers may be either:</span></span>
  * <span data-ttu-id="f20fd-161">常值標頭，即 hello 確切的標頭提供名稱，例如**x ms-中繼-處理**。</span><span class="sxs-lookup"><span data-stu-id="f20fd-161">Literal headers, where hello exact header name is provided, such as **x-ms-meta-processed**.</span></span> <span data-ttu-id="f20fd-162">可能在 hello 要求中指定最多 64 個常值標頭。</span><span class="sxs-lookup"><span data-stu-id="f20fd-162">A maximum of 64 literal headers may be specified on hello request.</span></span>
  * <span data-ttu-id="f20fd-163">前置詞的標頭，即 hello 標頭的前置詞提供，例如**x ms-中繼資料***。</span><span class="sxs-lookup"><span data-stu-id="f20fd-163">Prefixed headers, where a prefix of hello header is provided, such as **x-ms-meta-data***.</span></span> <span data-ttu-id="f20fd-164">以這種方式指定前置詞，允許或公開以給定前置詞的 hello 開頭的任何標頭。</span><span class="sxs-lookup"><span data-stu-id="f20fd-164">Specifying a prefix in this manner allows or exposes any header that begins with hello given prefix.</span></span> <span data-ttu-id="f20fd-165">可能在 hello 要求中指定兩個帶有前置詞的標頭的最大值。</span><span class="sxs-lookup"><span data-stu-id="f20fd-165">A maximum of two prefixed headers may be specified on hello request.</span></span>
* <span data-ttu-id="f20fd-166">在 hello hello 方法 （或 HTTP 動詞命令） 指定**AllowedMethods**項目必須符合 Azure 儲存體服務 Api 支援 toohello 方法。</span><span class="sxs-lookup"><span data-stu-id="f20fd-166">hello methods (or HTTP verbs) specified in hello **AllowedMethods** element must conform toohello methods supported by Azure storage service APIs.</span></span> <span data-ttu-id="f20fd-167">支援的方法為 DELETE、GET、HEAD、MERGE、POST、OPTIONS 及 PUT。</span><span class="sxs-lookup"><span data-stu-id="f20fd-167">Supported methods are DELETE, GET, HEAD, MERGE, POST, OPTIONS and PUT.</span></span>

## <a name="understanding-cors-rule-evaluation-logic"></a><span data-ttu-id="f20fd-168">了解 CORS 規則評估邏輯</span><span class="sxs-lookup"><span data-stu-id="f20fd-168">Understanding CORS rule evaluation logic</span></span>
<span data-ttu-id="f20fd-169">儲存體服務收到預檢或實際要求時，它會評估該要求，根據您已建立 hello 服務透過適當設定服務屬性作業 hello hello CORS 規則。</span><span class="sxs-lookup"><span data-stu-id="f20fd-169">When a storage service receives a preflight or actual request, it evaluates that request based on hello CORS rules you have established for hello service via hello appropriate Set Service Properties operation.</span></span> <span data-ttu-id="f20fd-170">CORS 規則的評估順序 hello hello 的 hello 設定服務屬性作業的要求本文中所設定。</span><span class="sxs-lookup"><span data-stu-id="f20fd-170">CORS rules are evaluated in hello order in which they were set in hello request body of hello Set Service Properties operation.</span></span>

<span data-ttu-id="f20fd-171">CORS 規則的評估，如下所示：</span><span class="sxs-lookup"><span data-stu-id="f20fd-171">CORS rules are evaluated as follows:</span></span>

1. <span data-ttu-id="f20fd-172">首先，hello 原始網域的 hello 要求會檢查是否符合列出的 hello 的 hello 網域**AllowedOrigins**項目。</span><span class="sxs-lookup"><span data-stu-id="f20fd-172">First, hello origin domain of hello request is checked against hello domains listed for hello **AllowedOrigins** element.</span></span> <span data-ttu-id="f20fd-173">如果 hello 原始網域包含在 hello 清單或允許所有網域包含 hello 萬用字元 ' *'，然後將會繼續評估規則。</span><span class="sxs-lookup"><span data-stu-id="f20fd-173">If hello origin domain is included in hello list, or all domains are allowed with hello wildcard character '*', then rules evaluation proceeds.</span></span> <span data-ttu-id="f20fd-174">如果不包含 hello 原始網域，則 hello 要求會失敗。</span><span class="sxs-lookup"><span data-stu-id="f20fd-174">If hello origin domain is not included, then hello request fails.</span></span>
2. <span data-ttu-id="f20fd-175">接下來，hello 要求 hello 方法 （或 HTTP 動詞命令） 會針對檢查 hello 中所列的 hello 方法**AllowedMethods**項目。</span><span class="sxs-lookup"><span data-stu-id="f20fd-175">Next, hello method (or HTTP verb) of hello request is checked against hello methods listed in hello **AllowedMethods** element.</span></span> <span data-ttu-id="f20fd-176">如果 hello 方法包含在 hello 清單中，然後會繼續評估規則。如果沒有，就會 hello 要求失敗。</span><span class="sxs-lookup"><span data-stu-id="f20fd-176">If hello method is included in hello list, then rules evaluation proceeds; if not, then hello request fails.</span></span>
3. <span data-ttu-id="f20fd-177">如果 hello 要求符合原始網域和其方法中的規則，該規則選取的 tooprocess hello 要求並沒有進一步的規則會進行評估。</span><span class="sxs-lookup"><span data-stu-id="f20fd-177">If hello request matches a rule in its origin domain and its method, that rule is selected tooprocess hello request and no further rules are evaluated.</span></span> <span data-ttu-id="f20fd-178">Hello 要求才會成功之前，不過，任何 hello 要求上指定的標頭會針對檢查 hello 標頭列在 hello **AllowedHeaders**項目。</span><span class="sxs-lookup"><span data-stu-id="f20fd-178">Before hello request can succeed, however, any headers specified on hello request are checked against hello headers listed in hello **AllowedHeaders** element.</span></span> <span data-ttu-id="f20fd-179">如果傳送嗨標頭不符合允許的標頭的 hello，hello 要求將會失敗。</span><span class="sxs-lookup"><span data-stu-id="f20fd-179">If hello headers sent do not match hello allowed headers, hello request fails.</span></span>

<span data-ttu-id="f20fd-180">因為 hello 規則的處理順序 hello 會出現在 hello 要求主體，最佳做法建議您指定 hello 最嚴格的規則與尊重 tooorigins 第一次在 hello 清單中，以便先評估這些。</span><span class="sxs-lookup"><span data-stu-id="f20fd-180">Since hello rules are processed in hello order they are present in hello request body, best practices recommend that you specify hello most restrictive rules with respect tooorigins first in hello list, so that these are evaluated first.</span></span> <span data-ttu-id="f20fd-181">指定的規則較不嚴格，例如規則 tooallow 所有來源 – 在 hello hello 清單的結尾。</span><span class="sxs-lookup"><span data-stu-id="f20fd-181">Specify rules that are less restrictive – for example, a rule tooallow all origins – at hello end of hello list.</span></span>

### <a name="example--cors-rules-evaluation"></a><span data-ttu-id="f20fd-182">範例 - CORS 規則評估</span><span class="sxs-lookup"><span data-stu-id="f20fd-182">Example – CORS rules evaluation</span></span>
<span data-ttu-id="f20fd-183">hello 下列範例顯示 hello 儲存體服務作業 tooset CORS 規則的部分要求主體。</span><span class="sxs-lookup"><span data-stu-id="f20fd-183">hello following example shows a partial request body for an operation tooset CORS rules for hello storage services.</span></span> <span data-ttu-id="f20fd-184">請參閱[設定 Blob 服務屬性](https://msdn.microsoft.com/library/hh452235.aspx)，[設定佇列服務屬性](https://msdn.microsoft.com/library/hh452232.aspx)，和[設定表格服務屬性](https://msdn.microsoft.com/library/hh452240.aspx)如需建構 hello 要求詳細資料。</span><span class="sxs-lookup"><span data-stu-id="f20fd-184">See [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), and [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx) for details on constructing hello request.</span></span>

```xml
<Cors>
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com</AllowedOrigins>
        <AllowedMethods>PUT,HEAD</AllowedMethods>
        <MaxAgeInSeconds>5</MaxAgeInSeconds>
        <ExposedHeaders>x-ms-*</ExposedHeaders>
        <AllowedHeaders>x-ms-blob-content-type, x-ms-blob-content-disposition</AllowedHeaders>
    </CorsRule>
    <CorsRule>
        <AllowedOrigins>*</AllowedOrigins>
        <AllowedMethods>PUT,GET</AllowedMethods>
        <MaxAgeInSeconds>5</MaxAgeInSeconds>
        <ExposedHeaders>x-ms-*</ExposedHeaders>
        <AllowedHeaders>x-ms-blob-content-type, x-ms-blob-content-disposition</AllowedHeaders>
    </CorsRule>
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com</AllowedOrigins>
        <AllowedMethods>GET</AllowedMethods>
        <MaxAgeInSeconds>5</MaxAgeInSeconds>
        <ExposedHeaders>x-ms-*</ExposedHeaders>
        <AllowedHeaders>x-ms-client-request-id</AllowedHeaders>
    </CorsRule>
</Cors>
```

<span data-ttu-id="f20fd-185">接下來，請考慮下列 CORS 要求的 hello:</span><span class="sxs-lookup"><span data-stu-id="f20fd-185">Next, consider hello following CORS requests:</span></span>

| <span data-ttu-id="f20fd-186">要求</span><span class="sxs-lookup"><span data-stu-id="f20fd-186">Request</span></span> |  |  | <span data-ttu-id="f20fd-187">Response</span><span class="sxs-lookup"><span data-stu-id="f20fd-187">Response</span></span> |  |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="f20fd-188">**方法**</span><span class="sxs-lookup"><span data-stu-id="f20fd-188">**Method**</span></span> |<span data-ttu-id="f20fd-189">**原始**</span><span class="sxs-lookup"><span data-stu-id="f20fd-189">**Origin**</span></span> |<span data-ttu-id="f20fd-190">**要求標頭**</span><span class="sxs-lookup"><span data-stu-id="f20fd-190">**Request Headers**</span></span> |<span data-ttu-id="f20fd-191">**規則相符**</span><span class="sxs-lookup"><span data-stu-id="f20fd-191">**Rule Match**</span></span> |<span data-ttu-id="f20fd-192">**結果**</span><span class="sxs-lookup"><span data-stu-id="f20fd-192">**Result**</span></span> |
| <span data-ttu-id="f20fd-193">**PUT**</span><span class="sxs-lookup"><span data-stu-id="f20fd-193">**PUT**</span></span> |<span data-ttu-id="f20fd-194">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="f20fd-194">http://www.contoso.com</span></span> |<span data-ttu-id="f20fd-195">x-ms-blob-content-type</span><span class="sxs-lookup"><span data-stu-id="f20fd-195">x-ms-blob-content-type</span></span> |<span data-ttu-id="f20fd-196">第一個規則</span><span class="sxs-lookup"><span data-stu-id="f20fd-196">First rule</span></span> |<span data-ttu-id="f20fd-197">成功</span><span class="sxs-lookup"><span data-stu-id="f20fd-197">Success</span></span> |
| <span data-ttu-id="f20fd-198">**GET**</span><span class="sxs-lookup"><span data-stu-id="f20fd-198">**GET**</span></span> |<span data-ttu-id="f20fd-199">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="f20fd-199">http://www.contoso.com</span></span> |<span data-ttu-id="f20fd-200">x-ms-blob-content-type</span><span class="sxs-lookup"><span data-stu-id="f20fd-200">x-ms-blob-content-type</span></span> |<span data-ttu-id="f20fd-201">第二個規則</span><span class="sxs-lookup"><span data-stu-id="f20fd-201">Second rule</span></span> |<span data-ttu-id="f20fd-202">成功</span><span class="sxs-lookup"><span data-stu-id="f20fd-202">Success</span></span> |
| <span data-ttu-id="f20fd-203">**GET**</span><span class="sxs-lookup"><span data-stu-id="f20fd-203">**GET**</span></span> |<span data-ttu-id="f20fd-204">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="f20fd-204">http://www.contoso.com</span></span> |<span data-ttu-id="f20fd-205">x-ms-client-request-id</span><span class="sxs-lookup"><span data-stu-id="f20fd-205">x-ms-client-request-id</span></span> |<span data-ttu-id="f20fd-206">第二個規則</span><span class="sxs-lookup"><span data-stu-id="f20fd-206">Second rule</span></span> |<span data-ttu-id="f20fd-207">失敗</span><span class="sxs-lookup"><span data-stu-id="f20fd-207">Failure</span></span> |

<span data-ttu-id="f20fd-208">hello 第一個要求符合第一個規則的 hello – hello 原始網域符合允許出處 hello、 hello 方法符合允許的方法，hello 和 hello 標頭符合允許的標頭 – hello，因此成功。</span><span class="sxs-lookup"><span data-stu-id="f20fd-208">hello first request matches hello first rule – hello origin domain matches hello allowed origins, hello method matches hello allowed methods, and hello header matches hello allowed headers – and so succeeds.</span></span>

<span data-ttu-id="f20fd-209">hello 第二個要求不符合 hello 第一個規則，因為 hello 方法不符合 hello 允許方法。</span><span class="sxs-lookup"><span data-stu-id="f20fd-209">hello second request does not match hello first rule because hello method does not match hello allowed methods.</span></span> <span data-ttu-id="f20fd-210">它，不過，與相符 hello 第二個規則，讓它成功。</span><span class="sxs-lookup"><span data-stu-id="f20fd-210">It does, however, match hello second rule, so it succeeds.</span></span>

<span data-ttu-id="f20fd-211">hello 第三個要求符合 hello 第二個規則在原始網域和方法，因此會不評估任何進一步的規則。</span><span class="sxs-lookup"><span data-stu-id="f20fd-211">hello third request matches hello second rule in its origin domain and method, so no further rules are evaluated.</span></span> <span data-ttu-id="f20fd-212">不過，hello *x ms-用戶端的要求識別碼標頭*不允許 hello 第二個規則，因此儘管 hello 事實，hello 語意 hello 第三個規則的允許 toosucceed hello 要求失敗。</span><span class="sxs-lookup"><span data-stu-id="f20fd-212">However, hello *x-ms-client-request-id header* is not allowed by hello second rule, so hello request fails, despite hello fact that hello semantics of hello third rule would have allowed it toosucceed.</span></span>

> [!NOTE]
> <span data-ttu-id="f20fd-213">雖然這個範例會顯示較不嚴格的規則之前更嚴格，一般而言 hello 最佳作法是 toolist hello 最嚴格的規則第一次。</span><span class="sxs-lookup"><span data-stu-id="f20fd-213">Although this example shows a less restrictive rule before a more restrictive one, in general hello best practice is toolist hello most restrictive rules first.</span></span>
> 
> 

## <a name="understanding-how-hello-vary-header-is-set"></a><span data-ttu-id="f20fd-214">了解如何設定 hello Vary 標頭</span><span class="sxs-lookup"><span data-stu-id="f20fd-214">Understanding how hello Vary header is set</span></span>
<span data-ttu-id="f20fd-215">hello*區分*標頭是一組通知關於 hello 伺服器 tooprocess hello 要求所選取的 hello 準則 hello 瀏覽器或使用者代理程式的要求標頭欄位所組成的標準 HTTP/1.1 標頭。</span><span class="sxs-lookup"><span data-stu-id="f20fd-215">hello *Vary* header is a standard HTTP/1.1 header consisting of a set of request header fields that advise hello browser or user agent about hello criteria that were selected by hello server tooprocess hello request.</span></span> <span data-ttu-id="f20fd-216">hello*區分*標頭主要是用於快取，proxy、 瀏覽器及 Cdn 使用它 toodetermine 如何 hello 快取回應。</span><span class="sxs-lookup"><span data-stu-id="f20fd-216">hello *Vary* header is mainly used for caching by proxies, browsers, and CDNs, which use it toodetermine how hello response should be cached.</span></span> <span data-ttu-id="f20fd-217">如需詳細資訊，請參閱 hello hello 規格[Vary 標頭](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)。</span><span class="sxs-lookup"><span data-stu-id="f20fd-217">For details, see hello specification for hello [Vary header](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html).</span></span>

<span data-ttu-id="f20fd-218">當 hello 瀏覽器或其他使用者代理程式會快取 CORS 要求的回應 hello 時，hello 原始網域會快取為允許原始的 hello。</span><span class="sxs-lookup"><span data-stu-id="f20fd-218">When hello browser or another user agent caches hello response from a CORS request, hello origin domain is cached as hello allowed origin.</span></span> <span data-ttu-id="f20fd-219">當第二個網域問題 hello 相同儲存體資源的要求，當 hello 快取為作用中、 hello 使用者代理程式會擷取 hello 快取的原始網域。</span><span class="sxs-lookup"><span data-stu-id="f20fd-219">When a second domain issues hello same request for a storage resource while hello cache is active, hello user agent retrieves hello cached origin domain.</span></span> <span data-ttu-id="f20fd-220">hello 第二個網域不符合 hello 快取的網域，因此 hello 要求失敗時符合則成功。</span><span class="sxs-lookup"><span data-stu-id="f20fd-220">hello second domain does not match hello cached domain, so hello request fails when it would otherwise succeed.</span></span> <span data-ttu-id="f20fd-221">在某些情況下，Azure 儲存體設定 hello Vary 標頭太**原點**tooinstruct hello 使用者代理程式 toosend hello 後續 CORS 要求 toohello 服務要求網域與 hello hello 快取來源。</span><span class="sxs-lookup"><span data-stu-id="f20fd-221">In certain cases, Azure Storage sets hello Vary header too**Origin** tooinstruct hello user agent toosend hello subsequent CORS request toohello service when hello requesting domain differs from hello cached origin.</span></span>

<span data-ttu-id="f20fd-222">Azure 儲存體設定 hello*區分*標頭太**原點**hello 下列案例中，實際 GET/HEAD 要求：</span><span class="sxs-lookup"><span data-stu-id="f20fd-222">Azure Storage sets hello *Vary* header too**Origin** for actual GET/HEAD requests in hello following cases:</span></span>

* <span data-ttu-id="f20fd-223">當 hello 原始網域完全符合 hello 允許要求的 CORS 規則所定義的來源。</span><span class="sxs-lookup"><span data-stu-id="f20fd-223">When hello request origin exactly matches hello allowed origin defined by a CORS rule.</span></span> <span data-ttu-id="f20fd-224">toobe 完全相符，hello CORS 規則不能包含萬用字元 '*' 字元。</span><span class="sxs-lookup"><span data-stu-id="f20fd-224">toobe an exact match, hello CORS rule may not include a wildcard ' * ' character.</span></span>
* <span data-ttu-id="f20fd-225">沒有規則相符 hello 要求來源，但啟用 hello 儲存體服務的 CORS。</span><span class="sxs-lookup"><span data-stu-id="f20fd-225">There is no rule matching hello request origin, but CORS is enabled for hello storage service.</span></span>

<span data-ttu-id="f20fd-226">在 hello 其中 GET/HEAD 要求符合允許所有原始網域的 CORS 規則的情況下，hello 回應表示允許所有原始網域，而且 hello 使用者代理程式快取時將會允許來自任何原始網域的後續要求為作用中的 hello 快取。</span><span class="sxs-lookup"><span data-stu-id="f20fd-226">In hello case where a GET/HEAD request matches a CORS rule that allows all origins, hello response indicates that all origins are allowed, and hello user agent cache will allow subsequent requests from any origin domain while hello cache is active.</span></span>

<span data-ttu-id="f20fd-227">請注意，使用非 GET/HEAD 方法要求，hello 儲存體服務不會設定 hello Vary 標頭，因為回應 toothese 方法不會快取使用者代理程式。</span><span class="sxs-lookup"><span data-stu-id="f20fd-227">Note that for requests using methods other than GET/HEAD, hello storage services will not set hello Vary header, since responses toothese methods are not cached by user agents.</span></span>

<span data-ttu-id="f20fd-228">hello 下表指出 Azure 儲存體如何將回應 tooGET/HEAD 要求根據 hello 先前所述的案例：</span><span class="sxs-lookup"><span data-stu-id="f20fd-228">hello following table indicates how Azure storage will respond tooGET/HEAD requests based on hello previously mentioned cases:</span></span>

| <span data-ttu-id="f20fd-229">要求</span><span class="sxs-lookup"><span data-stu-id="f20fd-229">Request</span></span> | <span data-ttu-id="f20fd-230">帳戶設定和規則評估的結果</span><span class="sxs-lookup"><span data-stu-id="f20fd-230">Account setting and result of rule evaluation</span></span> |  |  | <span data-ttu-id="f20fd-231">Response</span><span class="sxs-lookup"><span data-stu-id="f20fd-231">Response</span></span> |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="f20fd-232">**要求上存在的 Origin 標頭**</span><span class="sxs-lookup"><span data-stu-id="f20fd-232">**Origin header present on request**</span></span> |<span data-ttu-id="f20fd-233">**針對此服務指定的 CORS 規則**</span><span class="sxs-lookup"><span data-stu-id="f20fd-233">**CORS rule(s) specified for this service**</span></span> |<span data-ttu-id="f20fd-234">**有允許所有原始網域的比對規則存在 (*)**</span><span class="sxs-lookup"><span data-stu-id="f20fd-234">**Matching rule exists that allows all origins(*)**</span></span> |<span data-ttu-id="f20fd-235">**有完全符合原始網域的比對規則存在**</span><span class="sxs-lookup"><span data-stu-id="f20fd-235">**Matching rule exists for exact origin match**</span></span> |<span data-ttu-id="f20fd-236">**回應包括 Vary 標頭集合 tooOrigin**</span><span class="sxs-lookup"><span data-stu-id="f20fd-236">**Response includes Vary header set tooOrigin**</span></span> |<span data-ttu-id="f20fd-237">**回應包含 Access-Control-Allowed-Origin："*"**</span><span class="sxs-lookup"><span data-stu-id="f20fd-237">**Response includes Access-Control-Allowed-Origin: "*"**</span></span> |<span data-ttu-id="f20fd-238">**回應包含 Access-Control-Exposed-Headers**</span><span class="sxs-lookup"><span data-stu-id="f20fd-238">**Response includes Access-Control-Exposed-Headers**</span></span> |
| <span data-ttu-id="f20fd-239">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-239">No</span></span> |<span data-ttu-id="f20fd-240">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-240">No</span></span> |<span data-ttu-id="f20fd-241">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-241">No</span></span> |<span data-ttu-id="f20fd-242">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-242">No</span></span> |<span data-ttu-id="f20fd-243">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-243">No</span></span> |<span data-ttu-id="f20fd-244">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-244">No</span></span> |<span data-ttu-id="f20fd-245">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-245">No</span></span> |
| <span data-ttu-id="f20fd-246">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-246">No</span></span> |<span data-ttu-id="f20fd-247">是</span><span class="sxs-lookup"><span data-stu-id="f20fd-247">Yes</span></span> |<span data-ttu-id="f20fd-248">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-248">No</span></span> |<span data-ttu-id="f20fd-249">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-249">No</span></span> |<span data-ttu-id="f20fd-250">是</span><span class="sxs-lookup"><span data-stu-id="f20fd-250">Yes</span></span> |<span data-ttu-id="f20fd-251">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-251">No</span></span> |<span data-ttu-id="f20fd-252">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-252">No</span></span> |
| <span data-ttu-id="f20fd-253">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-253">No</span></span> |<span data-ttu-id="f20fd-254">是</span><span class="sxs-lookup"><span data-stu-id="f20fd-254">Yes</span></span> |<span data-ttu-id="f20fd-255">是</span><span class="sxs-lookup"><span data-stu-id="f20fd-255">Yes</span></span> |<span data-ttu-id="f20fd-256">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-256">No</span></span> |<span data-ttu-id="f20fd-257">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-257">No</span></span> |<span data-ttu-id="f20fd-258">是</span><span class="sxs-lookup"><span data-stu-id="f20fd-258">Yes</span></span> |<span data-ttu-id="f20fd-259">是</span><span class="sxs-lookup"><span data-stu-id="f20fd-259">Yes</span></span> |
| <span data-ttu-id="f20fd-260">是</span><span class="sxs-lookup"><span data-stu-id="f20fd-260">Yes</span></span> |<span data-ttu-id="f20fd-261">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-261">No</span></span> |<span data-ttu-id="f20fd-262">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-262">No</span></span> |<span data-ttu-id="f20fd-263">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-263">No</span></span> |<span data-ttu-id="f20fd-264">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-264">No</span></span> |<span data-ttu-id="f20fd-265">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-265">No</span></span> |<span data-ttu-id="f20fd-266">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-266">No</span></span> |
| <span data-ttu-id="f20fd-267">是</span><span class="sxs-lookup"><span data-stu-id="f20fd-267">Yes</span></span> |<span data-ttu-id="f20fd-268">是</span><span class="sxs-lookup"><span data-stu-id="f20fd-268">Yes</span></span> |<span data-ttu-id="f20fd-269">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-269">No</span></span> |<span data-ttu-id="f20fd-270">是</span><span class="sxs-lookup"><span data-stu-id="f20fd-270">Yes</span></span> |<span data-ttu-id="f20fd-271">是</span><span class="sxs-lookup"><span data-stu-id="f20fd-271">Yes</span></span> |<span data-ttu-id="f20fd-272">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-272">No</span></span> |<span data-ttu-id="f20fd-273">是</span><span class="sxs-lookup"><span data-stu-id="f20fd-273">Yes</span></span> |
| <span data-ttu-id="f20fd-274">是</span><span class="sxs-lookup"><span data-stu-id="f20fd-274">Yes</span></span> |<span data-ttu-id="f20fd-275">是</span><span class="sxs-lookup"><span data-stu-id="f20fd-275">Yes</span></span> |<span data-ttu-id="f20fd-276">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-276">No</span></span> |<span data-ttu-id="f20fd-277">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-277">No</span></span> |<span data-ttu-id="f20fd-278">是</span><span class="sxs-lookup"><span data-stu-id="f20fd-278">Yes</span></span> |<span data-ttu-id="f20fd-279">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-279">No</span></span> |<span data-ttu-id="f20fd-280">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-280">No</span></span> |
| <span data-ttu-id="f20fd-281">是</span><span class="sxs-lookup"><span data-stu-id="f20fd-281">Yes</span></span> |<span data-ttu-id="f20fd-282">是</span><span class="sxs-lookup"><span data-stu-id="f20fd-282">Yes</span></span> |<span data-ttu-id="f20fd-283">是</span><span class="sxs-lookup"><span data-stu-id="f20fd-283">Yes</span></span> |<span data-ttu-id="f20fd-284">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-284">No</span></span> |<span data-ttu-id="f20fd-285">否</span><span class="sxs-lookup"><span data-stu-id="f20fd-285">No</span></span> |<span data-ttu-id="f20fd-286">是</span><span class="sxs-lookup"><span data-stu-id="f20fd-286">Yes</span></span> |<span data-ttu-id="f20fd-287">是</span><span class="sxs-lookup"><span data-stu-id="f20fd-287">Yes</span></span> |

## <a name="billing-for-cors-requests"></a><span data-ttu-id="f20fd-288">CORS 要求的計費方式</span><span class="sxs-lookup"><span data-stu-id="f20fd-288">Billing for CORS requests</span></span>
<span data-ttu-id="f20fd-289">成功的預檢要求會計費，如果您已啟用的任何 hello 您帳戶的儲存體服務的 CORS (透過呼叫[設定 Blob 服務屬性](https://msdn.microsoft.com/library/hh452235.aspx)，[設定佇列服務屬性](https://msdn.microsoft.com/library/hh452232.aspx)，或[設定表格服務屬性](https://msdn.microsoft.com/library/hh452240.aspx))。</span><span class="sxs-lookup"><span data-stu-id="f20fd-289">Successful preflight requests are billed if you have enabled CORS for any of hello storage services for your account (by calling [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), or [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx)).</span></span> <span data-ttu-id="f20fd-290">toominimize 費用，請考慮設定 hello **MaxAgeInSeconds**項目中將 CORS 規則 tooa 大數值而 hello 使用者代理程式會快取 hello 要求。</span><span class="sxs-lookup"><span data-stu-id="f20fd-290">toominimize charges, consider setting hello **MaxAgeInSeconds** element in your CORS rules tooa large value so that hello user agent caches hello request.</span></span>

<span data-ttu-id="f20fd-291">未成功的預檢要求將不會列入計費。</span><span class="sxs-lookup"><span data-stu-id="f20fd-291">Unsuccessful preflight requests will not be billed.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f20fd-292">後續步驟</span><span class="sxs-lookup"><span data-stu-id="f20fd-292">Next steps</span></span>
[<span data-ttu-id="f20fd-293">設定 Blob 服務屬性</span><span class="sxs-lookup"><span data-stu-id="f20fd-293">Set Blob Service Properties</span></span>](https://msdn.microsoft.com/library/hh452235.aspx)

[<span data-ttu-id="f20fd-294">設定佇列服務屬性</span><span class="sxs-lookup"><span data-stu-id="f20fd-294">Set Queue Service Properties</span></span>](https://msdn.microsoft.com/library/hh452232.aspx)

[<span data-ttu-id="f20fd-295">設定資料表服務屬性</span><span class="sxs-lookup"><span data-stu-id="f20fd-295">Set Table Service Properties</span></span>](https://msdn.microsoft.com/library/hh452240.aspx)

[<span data-ttu-id="f20fd-296">W3C 跨原始資源共用規格</span><span class="sxs-lookup"><span data-stu-id="f20fd-296">W3C Cross-Origin Resource Sharing Specification</span></span>](http://www.w3.org/TR/cors/)

