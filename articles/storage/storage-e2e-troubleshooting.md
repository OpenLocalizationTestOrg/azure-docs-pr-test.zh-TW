---
title: "使用診斷和 Message Analyzer aaaTroubleshooting Azure 儲存體 |Microsoft 文件"
description: "示範使用 Azure Storage Analytics、AzCopy 和 Microsoft Message Analyzer 進行端對端疑難排解的教學課程"
services: storage
documentationcenter: dotnet
author: robinsh
manager: timlt
ms.assetid: 643372a3-1c07-4e88-b4ef-042512a43086
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 03/15/2017
ms.author: robinsh
ms.openlocfilehash: f0b7886911c35de1fdc0bcbe6f83c220ddb38cf5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="end-to-end-troubleshooting-using-azure-storage-metrics-and-logging-azcopy-and-message-analyzer"></a><span data-ttu-id="d54aa-103">使用 Azure 儲存體計量和記錄、AzCopy 及 Message Analyzer 進行端對端疑難排解</span><span class="sxs-lookup"><span data-stu-id="d54aa-103">End-to-End Troubleshooting using Azure Storage metrics and logging, AzCopy, and Message Analyzer</span></span>
[!INCLUDE [storage-selector-portal-e2e-troubleshooting](../../includes/storage-selector-portal-e2e-troubleshooting.md)]

<span data-ttu-id="d54aa-104">診斷與疑難排解是透過 Microsoft Azure 儲存體建置和支援用戶端應用程式的關鍵技術。</span><span class="sxs-lookup"><span data-stu-id="d54aa-104">Diagnosing and troubleshooting is a key skill for building and supporting client applications with Microsoft Azure Storage.</span></span> <span data-ttu-id="d54aa-105">Azure 應用程式 toohello 分散式本質，因為診斷和疑難排解錯誤和效能問題可能是比傳統部署環境更為複雜。</span><span class="sxs-lookup"><span data-stu-id="d54aa-105">Due toohello distributed nature of an Azure application, diagnosing and troubleshooting errors and performance issues may be more complex than in traditional environments.</span></span>

<span data-ttu-id="d54aa-106">在本教學課程中，我們將示範如何 tooidentify 的特定錯誤，可能會影響效能，以及疑難排解這些錯誤從端對端使用順序 toooptimize hello 用戶端應用程式在 Microsoft Azure 儲存體，所提供的工具。</span><span class="sxs-lookup"><span data-stu-id="d54aa-106">In this tutorial, we demonstrate how tooidentify certain errors that may affect performance, and troubleshoot those errors from end-to-end using tools provided by Microsoft and Azure Storage, in order toooptimize hello client application.</span></span>

<span data-ttu-id="d54aa-107">本教學課程提供端對端疑難排解案例的實際操作探勘。</span><span class="sxs-lookup"><span data-stu-id="d54aa-107">This tutorial provides a hands-on exploration of an end-to-end troubleshooting scenario.</span></span> <span data-ttu-id="d54aa-108">深入了解概念指南 tootroubleshooting Azure 儲存體的應用程式，請參閱[監視、 診斷和疑難排解 Microsoft Azure 儲存體](storage-monitoring-diagnosing-troubleshooting.md)。</span><span class="sxs-lookup"><span data-stu-id="d54aa-108">For an in-depth conceptual guide tootroubleshooting Azure storage applications, see [Monitor, diagnose, and troubleshoot Microsoft Azure Storage](storage-monitoring-diagnosing-troubleshooting.md).</span></span>

## <a name="tools-for-troubleshooting-azure-storage-applications"></a><span data-ttu-id="d54aa-109">對 Azure 儲存體應用程式進行疑難排解的工具</span><span class="sxs-lookup"><span data-stu-id="d54aa-109">Tools for troubleshooting Azure Storage applications</span></span>
<span data-ttu-id="d54aa-110">使用 Microsoft Azure 儲存體 tootroubleshoot 用戶端應用程式，您可以使用工具 toodetermine 發生問題時，哪些 hello 問題的原因 hello 可能的組合。</span><span class="sxs-lookup"><span data-stu-id="d54aa-110">tootroubleshoot client applications using Microsoft Azure Storage, you can use a combination of tools toodetermine when an issue has occurred and what hello cause of hello problem may be.</span></span> <span data-ttu-id="d54aa-111">這些工具包括：</span><span class="sxs-lookup"><span data-stu-id="d54aa-111">These tools include:</span></span>

* <span data-ttu-id="d54aa-112">**Azure Storage Analytics**。</span><span class="sxs-lookup"><span data-stu-id="d54aa-112">**Azure Storage Analytics**.</span></span> <span data-ttu-id="d54aa-113">[Azure Storage Analytics](/rest/api/storageservices/Storage-Analytics) 提供 Azure 儲存體的度量和記錄。</span><span class="sxs-lookup"><span data-stu-id="d54aa-113">[Azure Storage Analytics](/rest/api/storageservices/Storage-Analytics) provides metrics and logging for Azure Storage.</span></span>
  
  * <span data-ttu-id="d54aa-114">**儲存體度量** 可追蹤儲存體帳戶的交易度量和容量度量。</span><span class="sxs-lookup"><span data-stu-id="d54aa-114">**Storage metrics** tracks transaction metrics and capacity metrics for your storage account.</span></span> <span data-ttu-id="d54aa-115">使用度量，您可以判斷您的應用程式不同的量值的相應 tooa 各種的表現。</span><span class="sxs-lookup"><span data-stu-id="d54aa-115">Using metrics, you can determine how your application is performing according tooa variety of different measures.</span></span> <span data-ttu-id="d54aa-116">請參閱[儲存體分析度量資料表結構描述](/rest/api/storageservices/Storage-Analytics-Metrics-Table-Schema)如 hello 種度量追蹤儲存體分析所需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="d54aa-116">See [Storage Analytics Metrics Table Schema](/rest/api/storageservices/Storage-Analytics-Metrics-Table-Schema) for more information about hello types of metrics tracked by Storage Analytics.</span></span>
  * <span data-ttu-id="d54aa-117">**儲存體記錄**記錄每個要求 toohello Azure 儲存體服務 tooa 伺服器端記錄檔。</span><span class="sxs-lookup"><span data-stu-id="d54aa-117">**Storage logging** logs each request toohello Azure Storage services tooa server-side log.</span></span> <span data-ttu-id="d54aa-118">針對每個要求，包括 hello 作業的 hello 記錄追蹤詳細的資料執行 hello 狀態 hello 作業和延遲資訊。</span><span class="sxs-lookup"><span data-stu-id="d54aa-118">hello log tracks detailed data for each request, including hello operation performed, hello status of hello operation, and latency information.</span></span> <span data-ttu-id="d54aa-119">請參閱[儲存體分析記錄格式](/rest/api/storageservices/Storage-Analytics-Log-Format)如需有關儲存體分析所寫入 toohello 記錄檔的 hello 要求和回應資料。</span><span class="sxs-lookup"><span data-stu-id="d54aa-119">See [Storage Analytics Log Format](/rest/api/storageservices/Storage-Analytics-Log-Format) for more information about hello request and response data that is written toohello logs by Storage Analytics.</span></span>

> [!NOTE]
> <span data-ttu-id="d54aa-120">區域備援儲存體 (ZRS) 的複寫類型的儲存體帳戶沒有 hello 度量或記錄功能在此時間內啟用。</span><span class="sxs-lookup"><span data-stu-id="d54aa-120">Storage accounts with a replication type of Zone-Redundant Storage (ZRS) do not have hello metrics or logging capability enabled at this time.</span></span> 
> 
> 

* <span data-ttu-id="d54aa-121">**Azure 入口網站**。</span><span class="sxs-lookup"><span data-stu-id="d54aa-121">**Azure portal**.</span></span> <span data-ttu-id="d54aa-122">您可以設定的度量和記錄儲存體帳戶中 hello [Azure 入口網站](https://portal.azure.com)。</span><span class="sxs-lookup"><span data-stu-id="d54aa-122">You can configure metrics and logging for your storage account in hello [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="d54aa-123">您也可以檢視圖表及圖形，顯示經過一段時間，如何執行您的應用程式，並設定警示 toonotify，如果您的應用程式不同的方式執行比預期指定標準。</span><span class="sxs-lookup"><span data-stu-id="d54aa-123">You can also view charts and graphs that show how your application is performing over time, and configure alerts toonotify you if your application performs differently than expected for a specified metric.</span></span>
  
    <span data-ttu-id="d54aa-124">請參閱[監視 hello Azure 入口網站的儲存體帳戶](storage-monitor-storage-account.md)設定 hello Azure 入口網站中監視的資訊。</span><span class="sxs-lookup"><span data-stu-id="d54aa-124">See [Monitor a storage account in hello Azure portal](storage-monitor-storage-account.md) for information about configuring monitoring in hello Azure portal.</span></span>
* <span data-ttu-id="d54aa-125">**AzCopy**。</span><span class="sxs-lookup"><span data-stu-id="d54aa-125">**AzCopy**.</span></span> <span data-ttu-id="d54aa-126">Azure 儲存體的伺服器記錄檔會儲存為 blob，因此您可以使用 Microsoft Message Analyzer 分析使用 AzCopy toocopy hello 記錄 blob tooa 本機目錄。</span><span class="sxs-lookup"><span data-stu-id="d54aa-126">Server logs for Azure Storage are stored as blobs, so you can use AzCopy toocopy hello log blobs tooa local directory for analysis using Microsoft Message Analyzer.</span></span> <span data-ttu-id="d54aa-127">請參閱[hello AzCopy 命令列公用程式使用傳輸資料](storage-use-azcopy.md)如需 AzCopy。</span><span class="sxs-lookup"><span data-stu-id="d54aa-127">See [Transfer data with hello AzCopy Command-Line Utility](storage-use-azcopy.md) for more information about AzCopy.</span></span>
* <span data-ttu-id="d54aa-128">**Microsoft Message Analyzer**。</span><span class="sxs-lookup"><span data-stu-id="d54aa-128">**Microsoft Message Analyzer**.</span></span> <span data-ttu-id="d54aa-129">Message Analyzer 是一種工具，會消耗記錄檔，並輕鬆 toofilter、 搜尋和為您可以使用 tooanalyze 錯誤和效能問題的有用集記錄資料的群組可讓以視覺格式顯示記錄資料。</span><span class="sxs-lookup"><span data-stu-id="d54aa-129">Message Analyzer is a tool that consumes log files and displays log data in a visual format that makes it easy toofilter, search, and group log data into useful sets that you can use tooanalyze errors and performance issues.</span></span> <span data-ttu-id="d54aa-130">如需 Message Analyzer 的詳細資訊，請參閱 [Microsoft Message Analyzer 操作指南](http://technet.microsoft.com/library/jj649776.aspx)。</span><span class="sxs-lookup"><span data-stu-id="d54aa-130">See [Microsoft Message Analyzer Operating Guide](http://technet.microsoft.com/library/jj649776.aspx) for more information about Message Analyzer.</span></span>

## <a name="about-hello-sample-scenario"></a><span data-ttu-id="d54aa-131">關於 hello 範例案例</span><span class="sxs-lookup"><span data-stu-id="d54aa-131">About hello sample scenario</span></span>
<span data-ttu-id="d54aa-132">在本教學課程中，我們將檢驗一個案例，其中的 Azure 儲存體度量表示應用程式呼叫 Azure 儲存體的成功率很低。</span><span class="sxs-lookup"><span data-stu-id="d54aa-132">For this tutorial, we'll examine a scenario where Azure Storage metrics indicates a low percent success rate for an application that calls Azure storage.</span></span> <span data-ttu-id="d54aa-133">hello 低成功百分比速率度量 (顯示為**PercentSuccess**在 hello [Azure 入口網站](https://portal.azure.com)和 hello 度量資料表中) 會追蹤的作業的成功，但會傳回 HTTP 狀態碼，使其大於比 299。</span><span class="sxs-lookup"><span data-stu-id="d54aa-133">hello low percent success rate metric (shown as **PercentSuccess** in hello [Azure portal](https://portal.azure.com) and in hello metrics tables) tracks operations that succeed, but that return an HTTP status code that is greater than 299.</span></span> <span data-ttu-id="d54aa-134">在 hello 伺服器端儲存記錄檔，這些作業會記錄交易狀態為**ClientOtherErrors**。</span><span class="sxs-lookup"><span data-stu-id="d54aa-134">In hello server-side storage log files, these operations are recorded with a transaction status of **ClientOtherErrors**.</span></span> <span data-ttu-id="d54aa-135">如需 hello 低成功百分比度量的詳細資訊，請參閱[度量顯示低 PercentSuccess 或分析記錄檔項目有作業的交易狀態的 ClientOtherErrors](storage-monitoring-diagnosing-troubleshooting.md#metrics-show-low-percent-success)。</span><span class="sxs-lookup"><span data-stu-id="d54aa-135">For more details about hello low percent success metric, see [Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors](storage-monitoring-diagnosing-troubleshooting.md#metrics-show-low-percent-success).</span></span>

<span data-ttu-id="d54aa-136">Azure 儲存體作業可能會傳回大於 299 的 HTTP 狀態碼為其正常功能的一部分。</span><span class="sxs-lookup"><span data-stu-id="d54aa-136">Azure Storage operations may return HTTP status codes greater than 299 as part of their normal functionality.</span></span> <span data-ttu-id="d54aa-137">但在某些情況下，這些錯誤表示您可能會無法 toooptimize 用戶端應用程式的更佳的效能。</span><span class="sxs-lookup"><span data-stu-id="d54aa-137">But these errors in some cases indicate that you may be able toooptimize your client application for improved performance.</span></span>

<span data-ttu-id="d54aa-138">在此案例中，我們會考慮低成功百分比率 toobe 低於 100%的任何項目。</span><span class="sxs-lookup"><span data-stu-id="d54aa-138">In this scenario, we'll consider a low percent success rate toobe anything below 100%.</span></span> <span data-ttu-id="d54aa-139">您可以選擇不同度量層級，不過，根據 tooyour 需求。</span><span class="sxs-lookup"><span data-stu-id="d54aa-139">You can choose a different metric level, however, according tooyour needs.</span></span> <span data-ttu-id="d54aa-140">我們建議您在應用程式的測試期間，建立關鍵效能指標的基準容錯。</span><span class="sxs-lookup"><span data-stu-id="d54aa-140">We recommend that during testing of your application, you establish a baseline tolerance for your key performance metrics.</span></span> <span data-ttu-id="d54aa-141">例如，您可能會根據測試，決定您的應用程式應具有 90% 或 85% 的穩定成功率。</span><span class="sxs-lookup"><span data-stu-id="d54aa-141">For example, you might determine, based on testing, that your application should have a consistent percent success rate of 90%, or 85%.</span></span> <span data-ttu-id="d54aa-142">如果度量資料會顯示 hello 應用程式偏離該數字，您可以調查可能造成 hello 增加。</span><span class="sxs-lookup"><span data-stu-id="d54aa-142">If your metrics data shows that hello application is deviating from that number, then you can investigate what may be causing hello increase.</span></span>

<span data-ttu-id="d54aa-143">我們的範例案例，我們已經建立 hello 成功百分比速率度量低於 100%，我們會檢查 hello 記錄 toofind hello 錯誤相互關聯 toohello 度量，並使用它們之後 toofigure 出造成 hello 下限百分比的成功率。</span><span class="sxs-lookup"><span data-stu-id="d54aa-143">For our sample scenario, once we've established that hello percent success rate metric is below 100%, we will examine hello logs toofind hello errors that correlate toohello metrics, and use them toofigure out what is causing hello lower percent success rate.</span></span> <span data-ttu-id="d54aa-144">我們將探討特別 hello 400 範圍中的錯誤。</span><span class="sxs-lookup"><span data-stu-id="d54aa-144">We'll look specifically at errors in hello 400 range.</span></span> <span data-ttu-id="d54aa-145">然後我們將更仔細調查 404 (找不到) 錯誤。</span><span class="sxs-lookup"><span data-stu-id="d54aa-145">Then we'll more closely investigate 404 (Not Found) errors.</span></span>

### <a name="some-causes-of-400-range-errors"></a><span data-ttu-id="d54aa-146">400 範圍錯誤的某些原因</span><span class="sxs-lookup"><span data-stu-id="d54aa-146">Some causes of 400-range errors</span></span>
<span data-ttu-id="d54aa-147">以下的 hello 範例會顯示取樣，以對 Azure Blob 儲存體，要求一些 400 範圍錯誤和可能的原因。</span><span class="sxs-lookup"><span data-stu-id="d54aa-147">hello examples below shows a sampling of some 400-range errors for requests against Azure Blob Storage, and their possible causes.</span></span> <span data-ttu-id="d54aa-148">這些錯誤，以及錯誤在 hello 300 範圍和 hello 500 範圍內，任何可以參與 tooa 低百分比成功率。</span><span class="sxs-lookup"><span data-stu-id="d54aa-148">Any of these errors, as well as errors in hello 300 range and hello 500 range, can contribute tooa low percent success rate.</span></span>

<span data-ttu-id="d54aa-149">請注意，下列的 hello 清單並非完整。</span><span class="sxs-lookup"><span data-stu-id="d54aa-149">Note that hello lists below are far from complete.</span></span> <span data-ttu-id="d54aa-150">請參閱[狀態和錯誤碼](http://msdn.microsoft.com/library/azure/dd179382.aspx)如需詳細資訊錯誤特定 tooeach hello 儲存體服務以及一般的 Azure 儲存體錯誤相關的 MSDN 上。</span><span class="sxs-lookup"><span data-stu-id="d54aa-150">See [Status and Error Codes](http://msdn.microsoft.com/library/azure/dd179382.aspx) on MSDN for details about general Azure Storage errors and about errors specific tooeach of hello storage services.</span></span>

<span data-ttu-id="d54aa-151">**狀態碼 404 (找不到) 範例**</span><span class="sxs-lookup"><span data-stu-id="d54aa-151">**Status Code 404 (Not Found) Examples**</span></span>

<span data-ttu-id="d54aa-152">發生於對容器或 blob 的讀取的作業會失敗，因為 hello blob 或容器找不到。</span><span class="sxs-lookup"><span data-stu-id="d54aa-152">Occurs when a read operation against a container or blob fails because hello blob or container is not found.</span></span>

* <span data-ttu-id="d54aa-153">如果在其他用戶端此要求前刪除了容器或 Blob，就會發生。</span><span class="sxs-lookup"><span data-stu-id="d54aa-153">Occurs if a container or blob has been deleted by another client before this request.</span></span>
* <span data-ttu-id="d54aa-154">如果您使用 API 呼叫，檢查它是否存在之後建立 hello 容器或 blob，就會發生。</span><span class="sxs-lookup"><span data-stu-id="d54aa-154">Occurs if you are using an API call that creates hello container or blob after checking whether it exists.</span></span> <span data-ttu-id="d54aa-155">hello CreateIfNotExists Api 進行呼叫第一個 toocheck hello 容器或 blob; hello 存在的標頭如果不存在，會傳回 404 錯誤，而且 toowrite hello 容器或 blob，然後進行第二個 PUT 呼叫。</span><span class="sxs-lookup"><span data-stu-id="d54aa-155">hello CreateIfNotExists APIs make a HEAD call first toocheck for hello existence of hello container or blob; if it does not exist, a 404 error is returned, and then a second PUT call is made toowrite hello container or blob.</span></span>

<span data-ttu-id="d54aa-156">**狀態碼 409 (衝突) 範例**</span><span class="sxs-lookup"><span data-stu-id="d54aa-156">**Status Code 409 (Conflict) Examples**</span></span>

* <span data-ttu-id="d54aa-157">如果您使用建立 API toocreate 新的容器或 blob，而不檢查存在，且容器或 blob，具有該名稱已存在，就會發生。</span><span class="sxs-lookup"><span data-stu-id="d54aa-157">Occurs if you use a Create API toocreate a new container or blob, without checking for existence first, and a container or blob with that name already exists.</span></span>
* <span data-ttu-id="d54aa-158">如果正在刪除容器，且您嘗試 toocreate hello 刪除作業完成之前名稱相同的 hello 與新的容器，就會發生。</span><span class="sxs-lookup"><span data-stu-id="d54aa-158">Occurs if a container is being deleted, and you attempt toocreate a new container with hello same name before hello deletion operation is complete.</span></span>
* <span data-ttu-id="d54aa-159">如果您在容器或 Blob 上指定租用，而且已經有租用存在，就會發生。</span><span class="sxs-lookup"><span data-stu-id="d54aa-159">Occurs if you specify a lease on a container or blob, and there is already a lease present.</span></span>

<span data-ttu-id="d54aa-160">**狀態碼 412 (先決條件失敗) 範例**</span><span class="sxs-lookup"><span data-stu-id="d54aa-160">**Status Code 412 (Precondition Failed) Examples**</span></span>

* <span data-ttu-id="d54aa-161">發生於指定的條件式標頭的 hello 條件不符合。</span><span class="sxs-lookup"><span data-stu-id="d54aa-161">Occurs when hello condition specified by a conditional header has not been met.</span></span>
* <span data-ttu-id="d54aa-162">指定的租用識別碼 hello 與 hello hello 容器或 blob 上的租用識別碼不相符時，就會發生。</span><span class="sxs-lookup"><span data-stu-id="d54aa-162">Occurs when hello lease ID specified does not match hello lease ID on hello container or blob.</span></span>

## <a name="generate-log-files-for-analysis"></a><span data-ttu-id="d54aa-163">產生記錄檔以供分析</span><span class="sxs-lookup"><span data-stu-id="d54aa-163">Generate log files for analysis</span></span>
<span data-ttu-id="d54aa-164">在此教學課程中，我們使用郵件分析器 toowork 有三種不同類型的記錄檔，雖然您可以選擇使用其中任何一個 toowork:</span><span class="sxs-lookup"><span data-stu-id="d54aa-164">In this tutorial, we'll use Message Analyzer toowork with three different types of log files, although you could choose toowork with any one of these:</span></span>

* <span data-ttu-id="d54aa-165">hello **server 記錄檔**，這您啟用 Azure 儲存體記錄時所建立。</span><span class="sxs-lookup"><span data-stu-id="d54aa-165">hello **server log**, which is created when you enable Azure Storage logging.</span></span> <span data-ttu-id="d54aa-166">hello server 記錄檔包含每個作業呼叫 hello Azure 儲存體服務-blob、 佇列、 表格和檔案的其中一個相關資料。</span><span class="sxs-lookup"><span data-stu-id="d54aa-166">hello server log contains data about each operation called against one of hello Azure Storage services - blob, queue, table, and file.</span></span> <span data-ttu-id="d54aa-167">hello 伺服器記錄檔指出呼叫的作業和狀態程式碼已傳回，以及其他有關 hello 要求和回應的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="d54aa-167">hello server log indicates which operation was called and what status code was returned, as well as other details about hello request and response.</span></span>
* <span data-ttu-id="d54aa-168">hello **.NET 用戶端記錄檔**，這您在.NET 應用程式中啟用用戶端記錄從時所建立。</span><span class="sxs-lookup"><span data-stu-id="d54aa-168">hello **.NET client log**, which is created when you enable client-side logging from within your .NET application.</span></span> <span data-ttu-id="d54aa-169">hello 用戶端記錄檔包含 hello 用戶端如何準備 hello 要求和接收和處理 hello 回應的詳細的資訊。</span><span class="sxs-lookup"><span data-stu-id="d54aa-169">hello client log includes detailed information about how hello client prepares hello request and receives and processes hello response.</span></span>
* <span data-ttu-id="d54aa-170">hello **HTTP 網路追蹤記錄檔**，以 HTTP/HTTPS 要求和回應資料，包括對 Azure 儲存體的作業上收集資料。</span><span class="sxs-lookup"><span data-stu-id="d54aa-170">hello **HTTP network trace log**, which collects data on HTTP/HTTPS request and response data, including for operations against Azure Storage.</span></span> <span data-ttu-id="d54aa-171">在本教學課程中，我們將會產生郵件分析器透過 hello 網路追蹤。</span><span class="sxs-lookup"><span data-stu-id="d54aa-171">In this tutorial, we'll generate hello network trace via Message Analyzer.</span></span>

### <a name="configure-server-side-logging-and-metrics"></a><span data-ttu-id="d54aa-172">設定伺服器端記錄和度量</span><span class="sxs-lookup"><span data-stu-id="d54aa-172">Configure server-side logging and metrics</span></span>
<span data-ttu-id="d54aa-173">首先，我們需要 tooconfigure Azure 儲存體記錄和度量資訊，如此我們需要從 hello 用戶端應用程式 tooanalyze 的資料。</span><span class="sxs-lookup"><span data-stu-id="d54aa-173">First, we'll need tooconfigure Azure Storage logging and metrics, so that we have data from hello client application tooanalyze.</span></span> <span data-ttu-id="d54aa-174">您可以設定記錄檔和度量的各種不同的方式-透過 hello [Azure 入口網站](https://portal.azure.com)，使用 PowerShell，或以程式設計的方式。</span><span class="sxs-lookup"><span data-stu-id="d54aa-174">You can configure logging and metrics in a variety of ways - via hello [Azure portal](https://portal.azure.com), by using PowerShell, or programmatically.</span></span> <span data-ttu-id="d54aa-175">如需設定記錄和度量的詳細資訊，請參閱 MSDN 上的[啟用儲存體度量和檢視度量資料](http://msdn.microsoft.com/library/azure/dn782843.aspx)和[啟用儲存體記錄和存取記錄檔資料](http://msdn.microsoft.com/library/azure/dn782840.aspx)。</span><span class="sxs-lookup"><span data-stu-id="d54aa-175">See [Enabling Storage Metrics and Viewing Metrics Data](http://msdn.microsoft.com/library/azure/dn782843.aspx) and [Enabling Storage Logging and Accessing Log Data](http://msdn.microsoft.com/library/azure/dn782840.aspx) on MSDN for details about configuring logging and metrics.</span></span>

<span data-ttu-id="d54aa-176">**透過 hello Azure 入口網站**</span><span class="sxs-lookup"><span data-stu-id="d54aa-176">**Via hello Azure portal**</span></span>

<span data-ttu-id="d54aa-177">tooconfigure 記錄和度量資訊，用於您儲存體帳戶使用 hello [Azure 入口網站](https://portal.azure.com)，請遵循指示 hello[監視 hello Azure 入口網站的儲存體帳戶](storage-monitor-storage-account.md)。</span><span class="sxs-lookup"><span data-stu-id="d54aa-177">tooconfigure logging and metrics for your storage account using hello [Azure portal](https://portal.azure.com), follow hello instructions at [Monitor a storage account in hello Azure portal](storage-monitor-storage-account.md).</span></span>

> [!NOTE]
> <span data-ttu-id="d54aa-178">不可能 tooset 分鐘度量使用 hello Azure 入口網站。</span><span class="sxs-lookup"><span data-stu-id="d54aa-178">It's not possible tooset minute metrics using hello Azure portal.</span></span> <span data-ttu-id="d54aa-179">不過，我們建議您不要設定它們基於此教學課程中的 hello 和調查與您的應用程式的效能問題。</span><span class="sxs-lookup"><span data-stu-id="d54aa-179">However, we recommend that you do set them for hello purposes of this tutorial, and for investigating performance issues with your application.</span></span> <span data-ttu-id="d54aa-180">您可以設定分鐘度量使用 PowerShell，如下所示，或以程式設計方式使用 hello 儲存體用戶端程式庫。</span><span class="sxs-lookup"><span data-stu-id="d54aa-180">You can set minute metrics using PowerShell as shown below, or programmatically using hello storage client library.</span></span>
> 
> <span data-ttu-id="d54aa-181">請注意該 hello Azure 入口網站無法顯示分鐘度量，只為每小時度量。</span><span class="sxs-lookup"><span data-stu-id="d54aa-181">Note that hello Azure portal cannot display minute metrics, only hourly metrics.</span></span>
> 
> 

<span data-ttu-id="d54aa-182">**透過 PowerShell**</span><span class="sxs-lookup"><span data-stu-id="d54aa-182">**Via PowerShell**</span></span>

<span data-ttu-id="d54aa-183">請參閱 < 開始使用 azure PowerShell tooget[如何 tooinstall 和設定 Azure PowerShell](/powershell/azure/overview)。</span><span class="sxs-lookup"><span data-stu-id="d54aa-183">tooget started with PowerShell for Azure, see [How tooinstall and configure Azure PowerShell](/powershell/azure/overview).</span></span>

1. <span data-ttu-id="d54aa-184">使用 hello [Add-azureaccount](/powershell/module/azure/add-azureaccount?view=azuresmps-3.7.0) cmdlet tooadd 您 Azure 的使用者帳戶 toohello PowerShell 視窗：</span><span class="sxs-lookup"><span data-stu-id="d54aa-184">Use hello [Add-AzureAccount](/powershell/module/azure/add-azureaccount?view=azuresmps-3.7.0) cmdlet tooadd your Azure user account toohello PowerShell window:</span></span>
   
    ```powershell
    Add-AzureAccount
    ```

2. <span data-ttu-id="d54aa-185">在 hello**登入 tooMicrosoft Azure**視窗、 型別 hello 電子郵件地址和您的帳戶相關聯的密碼。</span><span class="sxs-lookup"><span data-stu-id="d54aa-185">In hello **Sign in tooMicrosoft Azure** window, type hello email address and password associated with your account.</span></span> <span data-ttu-id="d54aa-186">Azure 驗證並儲存 hello 認證資訊，，然後關閉 [hello] 視窗。</span><span class="sxs-lookup"><span data-stu-id="d54aa-186">Azure authenticates and saves hello credential information, and then closes hello window.</span></span>
3. <span data-ttu-id="d54aa-187">設定 hello 預設儲存體帳戶 toohello 儲存體帳戶在 hello PowerShell 視窗中執行這些命令使用 hello 教學課程：</span><span class="sxs-lookup"><span data-stu-id="d54aa-187">Set hello default storage account toohello storage account you are using for hello tutorial by executing these commands in hello PowerShell window:</span></span>
   
    ```powershell
    $SubscriptionName = 'Your subscription name'
    $StorageAccountName = 'yourstorageaccount'
    Set-AzureSubscription -CurrentStorageAccountName $StorageAccountName -SubscriptionName $SubscriptionName
    ```

4. <span data-ttu-id="d54aa-188">啟用儲存體記錄 hello Blob 服務：</span><span class="sxs-lookup"><span data-stu-id="d54aa-188">Enable storage logging for hello Blob service:</span></span>
   
    ```powershell
    Set-AzureStorageServiceLoggingProperty -ServiceType Blob -LoggingOperations Read,Write,Delete -PassThru -RetentionDays 7 -Version 1.0
    ```

5. <span data-ttu-id="d54aa-189">啟用儲存體度量 hello Blob 服務，讓確定 tooset **-MetricsType**太`Minute`:</span><span class="sxs-lookup"><span data-stu-id="d54aa-189">Enable storage metrics for hello Blob service, making sure tooset **-MetricsType** too`Minute`:</span></span>
   
    ```powershell
    Set-AzureStorageServiceMetricsProperty -ServiceType Blob -MetricsType Minute -MetricsLevel ServiceAndApi -PassThru -RetentionDays 7 -Version 1.0
    ```

### <a name="configure-net-client-side-logging"></a><span data-ttu-id="d54aa-190">設定 .NET 用戶端記錄</span><span class="sxs-lookup"><span data-stu-id="d54aa-190">Configure .NET client-side logging</span></span>
<span data-ttu-id="d54aa-191">tooconfigure 用戶端.NET 應用程式的記錄功能可讓.NET 診斷 hello 應用程式組態檔 （web.config 或 app.config） 中。</span><span class="sxs-lookup"><span data-stu-id="d54aa-191">tooconfigure client-side logging for a .NET application, enable .NET diagnostics in hello application's configuration file (web.config or app.config).</span></span> <span data-ttu-id="d54aa-192">請參閱[用戶端以 hello.NET 儲存體用戶端程式庫記錄](http://msdn.microsoft.com/library/azure/dn782839.aspx)和[記錄以 hello Microsoft Azure 儲存體 SDK for Java 用戶端](http://msdn.microsoft.com/library/azure/dn782844.aspx)msdn 如需詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="d54aa-192">See [Client-side Logging with hello .NET Storage Client Library](http://msdn.microsoft.com/library/azure/dn782839.aspx) and [Client-side Logging with hello Microsoft Azure Storage SDK for Java](http://msdn.microsoft.com/library/azure/dn782844.aspx) on MSDN for details.</span></span>

<span data-ttu-id="d54aa-193">hello 用戶端記錄檔包含 hello 用戶端如何準備 hello 要求和接收和處理 hello 回應的詳細的資訊。</span><span class="sxs-lookup"><span data-stu-id="d54aa-193">hello client-side log includes detailed information about how hello client prepares hello request and receives and processes hello response.</span></span>

<span data-ttu-id="d54aa-194">hello 儲存體用戶端程式庫會將用戶端記錄檔資料儲存在 hello hello 應用程式組態檔 （web.config 或 app.config） 中指定的位置。</span><span class="sxs-lookup"><span data-stu-id="d54aa-194">hello Storage Client Library stores client-side log data in hello location specified in hello application's configuration file (web.config or app.config).</span></span>

### <a name="collect-a-network-trace"></a><span data-ttu-id="d54aa-195">收集網路追蹤</span><span class="sxs-lookup"><span data-stu-id="d54aa-195">Collect a network trace</span></span>
<span data-ttu-id="d54aa-196">用戶端應用程式執行時，您可以使用郵件分析器 toocollect HTTP/HTTPS 網路追蹤。</span><span class="sxs-lookup"><span data-stu-id="d54aa-196">You can use Message Analyzer toocollect an HTTP/HTTPS network trace while your client application is running.</span></span> <span data-ttu-id="d54aa-197">訊息分析師會使用[Fiddler](http://www.telerik.com/fiddler) hello 在後端。</span><span class="sxs-lookup"><span data-stu-id="d54aa-197">Message Analyzer uses [Fiddler](http://www.telerik.com/fiddler) on hello back end.</span></span> <span data-ttu-id="d54aa-198">收集 hello 網路追蹤之前，我們建議您設定 Fiddler toorecord 未加密的 HTTPS 流量：</span><span class="sxs-lookup"><span data-stu-id="d54aa-198">Before you collect hello network trace, we recommend that you configure Fiddler toorecord unencrypted HTTPS traffic:</span></span>

1. <span data-ttu-id="d54aa-199">安裝 [Fiddler](http://www.telerik.com/download/fiddler)。</span><span class="sxs-lookup"><span data-stu-id="d54aa-199">Install [Fiddler](http://www.telerik.com/download/fiddler).</span></span>
2. <span data-ttu-id="d54aa-200">啟動 Fiddler。</span><span class="sxs-lookup"><span data-stu-id="d54aa-200">Launch Fiddler.</span></span>
3. <span data-ttu-id="d54aa-201">選取 [工具] | [Fiddler 選項]。</span><span class="sxs-lookup"><span data-stu-id="d54aa-201">Select **Tools | Fiddler Options**.</span></span>
4. <span data-ttu-id="d54aa-202">在 hello 選項 對話方塊，請確認**擷取 HTTPS 連線**和**解密 HTTPS 流量**都已選取，如下所示。</span><span class="sxs-lookup"><span data-stu-id="d54aa-202">In hello Options dialog, ensure that **Capture HTTPS CONNECTs** and **Decrypt HTTPS Traffic** are both selected, as shown below.</span></span>

![設定 Fiddler 選項](./media/storage-e2e-troubleshooting/fiddler-options-1.png)

<span data-ttu-id="d54aa-204">Hello 教學課程中，收集和郵件分析器中的第一次儲存網路追蹤，然後建立分析工作階段 tooanalyze hello 追蹤並 hello 記錄檔。</span><span class="sxs-lookup"><span data-stu-id="d54aa-204">For hello tutorial, collect and save a network trace first in Message Analyzer, then create an analysis session tooanalyze hello trace and hello logs.</span></span> <span data-ttu-id="d54aa-205">toocollect 網路追蹤，在郵件分析器：</span><span class="sxs-lookup"><span data-stu-id="d54aa-205">toocollect a network trace in Message Analyzer:</span></span>

1. <span data-ttu-id="d54aa-206">在 Message Analyzer 中，選取 [檔案] | [快速追蹤] | [未加密的 HTTPS]。</span><span class="sxs-lookup"><span data-stu-id="d54aa-206">In Message Analyzer, select **File | Quick Trace | Unencrypted HTTPS**.</span></span>
2. <span data-ttu-id="d54aa-207">hello 追蹤會立即開始。</span><span class="sxs-lookup"><span data-stu-id="d54aa-207">hello trace will begin immediately.</span></span> <span data-ttu-id="d54aa-208">選取**停止**toostop hello 追蹤，以便我們可以設定它僅 tootrace 儲存體流量。</span><span class="sxs-lookup"><span data-stu-id="d54aa-208">Select **Stop** toostop hello trace so that we can configure it tootrace storage traffic only.</span></span>
3. <span data-ttu-id="d54aa-209">選取**編輯**tooedit hello 追蹤工作階段。</span><span class="sxs-lookup"><span data-stu-id="d54aa-209">Select **Edit** tooedit hello tracing session.</span></span>
4. <span data-ttu-id="d54aa-210">選取 hello**設定**連結權限的 hello toohello **Microsoft-Pef-WebProxy** ETW 提供者。</span><span class="sxs-lookup"><span data-stu-id="d54aa-210">Select hello **Configure** link toohello right of hello **Microsoft-Pef-WebProxy** ETW provider.</span></span>
5. <span data-ttu-id="d54aa-211">在 hello**進階設定** 對話方塊中，按一下 hello**提供者** 索引標籤。</span><span class="sxs-lookup"><span data-stu-id="d54aa-211">In hello **Advanced Settings** dialog, click hello **Provider** tab.</span></span>
6. <span data-ttu-id="d54aa-212">在 hello**主機名稱篩選**欄位中，指定您的儲存體端點，以空格分隔。</span><span class="sxs-lookup"><span data-stu-id="d54aa-212">In hello **Hostname Filter** field, specify your storage endpoints, separated by spaces.</span></span> <span data-ttu-id="d54aa-213">例如，您可以指定您的端點，如下所示。變更`storagesample`toohello 您的儲存體帳戶名稱：</span><span class="sxs-lookup"><span data-stu-id="d54aa-213">For example, you can specify your endpoints as follows; change `storagesample` toohello name of your storage account:</span></span>

    ```   
    storagesample.blob.core.windows.net storagesample.queue.core.windows.net storagesample.table.core.windows.net
    ```

7. <span data-ttu-id="d54aa-214">結束 [hello] 對話方塊中，然後按一下**重新啟動**toobegin hello 主機名稱的篩選器的位置，以收集 hello 追蹤，以便 hello 追蹤中包含 Azure 儲存體網路流量。</span><span class="sxs-lookup"><span data-stu-id="d54aa-214">Exit hello dialog, and click **Restart** toobegin collecting hello trace with hello hostname filter in place, so that only Azure Storage network traffic is included in hello trace.</span></span>

> [!NOTE]
> <span data-ttu-id="d54aa-215">當您完成收集網路追蹤之後，我們強烈建議您還原 hello 設定，您可能已在 Fiddler toodecrypt HTTPS 流量。</span><span class="sxs-lookup"><span data-stu-id="d54aa-215">After you have finished collecting your network trace, we strongly recommend that you revert hello settings that you may have changed in Fiddler toodecrypt HTTPS traffic.</span></span> <span data-ttu-id="d54aa-216">在 hello Fiddler 選項對話方塊中，取消選取 hello**擷取 HTTPS 連線**和**解密 HTTPS 流量**核取方塊。</span><span class="sxs-lookup"><span data-stu-id="d54aa-216">In hello Fiddler Options dialog, deselect hello **Capture HTTPS CONNECTs** and **Decrypt HTTPS Traffic** checkboxes.</span></span>
> 
> 

<span data-ttu-id="d54aa-217">請參閱[使用 hello 網路追蹤功能](http://technet.microsoft.com/library/jj674819.aspx)如需詳細資訊的 Technet 上。</span><span class="sxs-lookup"><span data-stu-id="d54aa-217">See [Using hello Network Tracing Features](http://technet.microsoft.com/library/jj674819.aspx) on Technet for more details.</span></span>

## <a name="review-metrics-data-in-hello-azure-portal"></a><span data-ttu-id="d54aa-218">檢閱 hello Azure 入口網站中的度量資料</span><span class="sxs-lookup"><span data-stu-id="d54aa-218">Review metrics data in hello Azure portal</span></span>
<span data-ttu-id="d54aa-219">一旦您的應用程式已經執行了一段時間，您可以檢閱 hello 度量出現之圖表的 hello [Azure 入口網站](https://portal.azure.com)tooobserve 如何會執行您的服務。</span><span class="sxs-lookup"><span data-stu-id="d54aa-219">Once your application has been running for a period of time, you can review hello metrics charts that appear in hello [Azure portal](https://portal.azure.com) tooobserve how your service has been performing.</span></span>

<span data-ttu-id="d54aa-220">首先，瀏覽 tooyour hello Azure 入口網站中的儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="d54aa-220">First, navigate tooyour storage account in hello Azure portal.</span></span> <span data-ttu-id="d54aa-221">根據預設，監視圖表以 hello**成功百分比**度量會顯示 hello 帳戶 刀鋒視窗。</span><span class="sxs-lookup"><span data-stu-id="d54aa-221">By default, a monitoring chart with hello **Success percentage** metric is displayed on hello account blade.</span></span> <span data-ttu-id="d54aa-222">如果您先前已經修改 hello 圖表 toodisplay 不同度量，新增 hello**成功百分比**度量。</span><span class="sxs-lookup"><span data-stu-id="d54aa-222">If you've previously modified hello chart toodisplay different metrics, add hello **Success percentage** metric.</span></span>

<span data-ttu-id="d54aa-223">您現在會看到**成功百分比**hello 監視圖表，以及任何其他度量您可能已經在加入。</span><span class="sxs-lookup"><span data-stu-id="d54aa-223">You'll now see **Success percentage** in hello monitoring chart, along with any other metrics you may have added.</span></span> <span data-ttu-id="d54aa-224">在 hello 案例中我們將調查接著藉由分析 hello 郵件分析器中的記錄檔，hello 百分比成功率有點低於 100%。</span><span class="sxs-lookup"><span data-stu-id="d54aa-224">In hello scenario we'll investigate next by analyzing hello logs in Message Analyzer, hello percent success rate is somewhat below 100%.</span></span>

<span data-ttu-id="d54aa-225">如需新增與自訂計量圖表的詳細資訊，請參閱[自訂計量圖表](storage-monitor-storage-account.md#customize-metrics-charts)。</span><span class="sxs-lookup"><span data-stu-id="d54aa-225">For more details on adding and customizing metrics charts, see [Customize metrics charts](storage-monitor-storage-account.md#customize-metrics-charts).</span></span>

> [!NOTE]
> <span data-ttu-id="d54aa-226">啟用儲存體度量之後，可能需要一些時間，您的度量資料 tooappear hello Azure 入口網站中。</span><span class="sxs-lookup"><span data-stu-id="d54aa-226">It may take some time for your metrics data tooappear in hello Azure portal after you enable storage metrics.</span></span> <span data-ttu-id="d54aa-227">這是因為每小時度量 hello 前一小時不會顯示在 Azure 入口網站的 hello hello 目前的小時經過之前。</span><span class="sxs-lookup"><span data-stu-id="d54aa-227">This is because hourly metrics for hello previous hour are not displayed in hello Azure portal until hello current hour has elapsed.</span></span> <span data-ttu-id="d54aa-228">此外，每分鐘度量是目前沒有顯示在 hello Azure 入口網站。</span><span class="sxs-lookup"><span data-stu-id="d54aa-228">Also, minute metrics are not currently displayed in hello Azure portal.</span></span> <span data-ttu-id="d54aa-229">因此根據當您啟用度量時，它可能會佔用 tootwo 小時 toosee 度量資料。</span><span class="sxs-lookup"><span data-stu-id="d54aa-229">So depending on when you enable metrics, it may take up tootwo hours toosee metrics data.</span></span>
> 
> 

## <a name="use-azcopy-toocopy-server-logs-tooa-local-directory"></a><span data-ttu-id="d54aa-230">使用 AzCopy toocopy 伺服器記錄檔 tooa 本機目錄</span><span class="sxs-lookup"><span data-stu-id="d54aa-230">Use AzCopy toocopy server logs tooa local directory</span></span>
<span data-ttu-id="d54aa-231">Azure 儲存體寫入伺服器記錄檔資料 tooblobs，度量資訊會寫入 tootables 時。</span><span class="sxs-lookup"><span data-stu-id="d54aa-231">Azure Storage writes server log data tooblobs, while metrics are written tootables.</span></span> <span data-ttu-id="d54aa-232">記錄檔 blob 位於 hello 已知`$logs`儲存體帳戶的容器。</span><span class="sxs-lookup"><span data-stu-id="d54aa-232">Log blobs are available in hello well-known `$logs` container for your storage account.</span></span> <span data-ttu-id="d54aa-233">記錄檔 blob 命名以階層方式依年、 月、 日和小時，讓您輕鬆地找出 hello 想 tooinvestigate 的時間範圍。</span><span class="sxs-lookup"><span data-stu-id="d54aa-233">Log blobs are named hierarchically by year, month, day, and hour, so that you can easily locate hello range of time you wish tooinvestigate.</span></span> <span data-ttu-id="d54aa-234">例如，在 hello `storagesample` hello 01/02/2015 中，從上午 8-9 點的 hello 記錄檔 blob 容器的帳戶是`https://storagesample.blob.core.windows.net/$logs/blob/2015/01/08/0800`。</span><span class="sxs-lookup"><span data-stu-id="d54aa-234">For example, in hello `storagesample` account, hello container for hello log blobs for 01/02/2015, from 8-9 am, is `https://storagesample.blob.core.windows.net/$logs/blob/2015/01/08/0800`.</span></span> <span data-ttu-id="d54aa-235">此容器中的 hello 個別 blob 循序命名，開頭為`000000.log`。</span><span class="sxs-lookup"><span data-stu-id="d54aa-235">hello individual blobs in this container are named sequentially, beginning with `000000.log`.</span></span>

<span data-ttu-id="d54aa-236">您可以在本機電腦上使用 hello AzCopy 命令列工具 toodownload 您選擇這些伺服器端記錄檔案 tooa 位置。</span><span class="sxs-lookup"><span data-stu-id="d54aa-236">You can use hello AzCopy command-line tool toodownload these server-side log files tooa location of your choice on your local machine.</span></span> <span data-ttu-id="d54aa-237">例如，您可以使用下列命令 toodownload hello 記錄檔的 blob 作業所需的置於 hello 2015 年 1 月 2 日 toohello 資料夾`C:\Temp\Logs\Server`; 取代`<storageaccountname>`hello 儲存體帳戶名稱和`<storageaccountkey>`與您帳戶存取金鑰：</span><span class="sxs-lookup"><span data-stu-id="d54aa-237">For example, you can use hello following command toodownload hello log files for blob operations that took place on January 2, 2015 toohello folder `C:\Temp\Logs\Server`; replace `<storageaccountname>` with hello name of your storage account, and `<storageaccountkey>` with your account access key:</span></span>

```azcopy
AzCopy.exe /Source:http://<storageaccountname>.blob.core.windows.net/$logs /Dest:C:\Temp\Logs\Server /Pattern:"blob/2015/01/02" /SourceKey:<storageaccountkey> /S /V
```
<span data-ttu-id="d54aa-238">AzCopy 可供下載 hello [Azure 下載](https://azure.microsoft.com/downloads/)頁面。</span><span class="sxs-lookup"><span data-stu-id="d54aa-238">AzCopy is available for download on hello [Azure Downloads](https://azure.microsoft.com/downloads/) page.</span></span> <span data-ttu-id="d54aa-239">如需有關使用 AzCopy 的詳細資訊，請參閱[hello AzCopy 命令列公用程式使用傳輸資料](storage-use-azcopy.md)。</span><span class="sxs-lookup"><span data-stu-id="d54aa-239">For details about using AzCopy, see [Transfer data with hello AzCopy Command-Line Utility](storage-use-azcopy.md).</span></span>

<span data-ttu-id="d54aa-240">如需下載伺服器端記錄檔的詳細資訊，請參閱 [下載儲存體記錄記錄檔資料](http://msdn.microsoft.com/library/azure/dn782840.aspx#DownloadingStorageLogginglogdata)。</span><span class="sxs-lookup"><span data-stu-id="d54aa-240">For additional information about downloading server-side logs, see [Download Storage Logging log data](http://msdn.microsoft.com/library/azure/dn782840.aspx#DownloadingStorageLogginglogdata).</span></span>

## <a name="use-microsoft-message-analyzer-tooanalyze-log-data"></a><span data-ttu-id="d54aa-241">使用 Microsoft Message Analyzer tooanalyze 記錄資料</span><span class="sxs-lookup"><span data-stu-id="d54aa-241">Use Microsoft Message Analyzer tooanalyze log data</span></span>
<span data-ttu-id="d54aa-242">Microsoft Message Analyzer 是在疑難排解與診斷案例中用於擷取、顯示及分析通訊協定訊息流量、事件和其他系統或應用程式訊息的工具。</span><span class="sxs-lookup"><span data-stu-id="d54aa-242">Microsoft Message Analyzer is a tool for capturing, displaying, and analyzing protocol messaging traffic, events, and other system or application messages in troubleshooting and diagnostic scenarios.</span></span> <span data-ttu-id="d54aa-243">郵件分析器也可讓您彙總，tooload 和分析記錄檔中的資料並儲存追蹤檔案。</span><span class="sxs-lookup"><span data-stu-id="d54aa-243">Message Analyzer also enables you tooload, aggregate, and analyze data from log and saved trace files.</span></span> <span data-ttu-id="d54aa-244">如需 Message Analyzer 的詳細資訊，請參閱 [Microsoft Message Analyzer 操作指南](http://technet.microsoft.com/library/jj649776.aspx)。</span><span class="sxs-lookup"><span data-stu-id="d54aa-244">For more information about Message Analyzer, see [Microsoft Message Analyzer Operating Guide](http://technet.microsoft.com/library/jj649776.aspx).</span></span>

<span data-ttu-id="d54aa-245">郵件分析器所含資產的 tooanalyze 伺服器、 用戶端和網路的記錄檔，協助您的 Azure 儲存體。</span><span class="sxs-lookup"><span data-stu-id="d54aa-245">Message Analyzer includes assets for Azure Storage that help you tooanalyze server, client, and network logs.</span></span> <span data-ttu-id="d54aa-246">在本節中，我們將討論如何 toouse 這些工具 tooaddress hello 問題的低百分比成功 hello 儲存體記錄。</span><span class="sxs-lookup"><span data-stu-id="d54aa-246">In this section, we'll discuss how toouse those tools tooaddress hello issue of low percent success in hello storage logs.</span></span>

### <a name="download-and-install-message-analyzer-and-hello-azure-storage-assets"></a><span data-ttu-id="d54aa-247">下載並安裝郵件分析器和 hello Azure 儲存體資產</span><span class="sxs-lookup"><span data-stu-id="d54aa-247">Download and install Message Analyzer and hello Azure Storage Assets</span></span>
1. <span data-ttu-id="d54aa-248">下載[Message Analyzer](http://www.microsoft.com/download/details.aspx?id=44226)從 hello Microsoft 下載中心，並執行 hello 安裝程式。</span><span class="sxs-lookup"><span data-stu-id="d54aa-248">Download [Message Analyzer](http://www.microsoft.com/download/details.aspx?id=44226) from hello Microsoft Download Center, and run hello installer.</span></span>
2. <span data-ttu-id="d54aa-249">啟動 Message Analyzer。</span><span class="sxs-lookup"><span data-stu-id="d54aa-249">Launch Message Analyzer.</span></span>
3. <span data-ttu-id="d54aa-250">從 hello**工具**功能表上，選取**資產管理員**。</span><span class="sxs-lookup"><span data-stu-id="d54aa-250">From hello **Tools** menu, select **Asset Manager**.</span></span> <span data-ttu-id="d54aa-251">在 hello**資產管理員**對話方塊中，選取**下載**，然後篩選**Azure 儲存體**。</span><span class="sxs-lookup"><span data-stu-id="d54aa-251">In hello **Asset Manager** dialog, select **Downloads**, then filter on **Azure Storage**.</span></span> <span data-ttu-id="d54aa-252">Hello 圖所示，您會看到 hello Azure 儲存體資產。</span><span class="sxs-lookup"><span data-stu-id="d54aa-252">You will see hello Azure Storage Assets, as shown in hello picture below.</span></span>
4. <span data-ttu-id="d54aa-253">按一下**同步處理所有顯示的項目**tooinstall hello Azure 儲存體資產。</span><span class="sxs-lookup"><span data-stu-id="d54aa-253">Click **Sync All Displayed Items** tooinstall hello Azure Storage Assets.</span></span> <span data-ttu-id="d54aa-254">hello 可用資產包括：</span><span class="sxs-lookup"><span data-stu-id="d54aa-254">hello available assets include:</span></span>
   * <span data-ttu-id="d54aa-255">**Azure 儲存體的色彩規則：** Azure 儲存體色彩規則可讓您 toodefine 特殊篩選條件，用文字的色彩和字型樣式 toohighlight 訊息包含在追蹤中的特定資訊。</span><span class="sxs-lookup"><span data-stu-id="d54aa-255">**Azure Storage Color Rules:** Azure Storage color rules enable you toodefine special filters that use color, text, and font styles toohighlight messages that contain specific information in a trace.</span></span>
   * <span data-ttu-id="d54aa-256">**Azure 儲存體圖表** ：Azure 儲存體圖表是圖形伺服器記錄資料的預先定義的圖表。</span><span class="sxs-lookup"><span data-stu-id="d54aa-256">**Azure Storage Charts:** Azure Storage charts are predefined charts that graph server log data.</span></span> <span data-ttu-id="d54aa-257">請注意，此時圖表上 toouse Azure 儲存體，貴用戶只載入 hello 伺服器記錄到 hello 分析方格。</span><span class="sxs-lookup"><span data-stu-id="d54aa-257">Note that toouse Azure Storage charts at this time, you may only load hello server log into hello Analysis Grid.</span></span>
   * <span data-ttu-id="d54aa-258">**Azure 儲存體分析：** hello Azure 儲存體的剖析器剖析 hello Azure 儲存體用戶端、 伺服器和 HTTP 記錄在順序 toodisplay 在 hello 分析方格。</span><span class="sxs-lookup"><span data-stu-id="d54aa-258">**Azure Storage Parsers:** hello Azure Storage parsers parse hello Azure Storage client, server, and HTTP logs in order toodisplay them in hello Analysis Grid.</span></span>
   * <span data-ttu-id="d54aa-259">**Azure 儲存體篩選：** Azure 儲存體的篩選是預先定義的準則，您可以使用 tooquery 資料 hello 分析方格中。</span><span class="sxs-lookup"><span data-stu-id="d54aa-259">**Azure Storage Filters:** Azure Storage filters are predefined criteria that you can use tooquery your data in hello Analysis Grid.</span></span>
   * <span data-ttu-id="d54aa-260">**Azure 儲存體檢視版面配置：** Azure 儲存體 檢視的配置是預先定義的資料行配置和 hello 分析方格中的群組。</span><span class="sxs-lookup"><span data-stu-id="d54aa-260">**Azure Storage View Layouts:** Azure Storage view layouts are predefined column layouts and groupings in hello Analysis Grid.</span></span>
5. <span data-ttu-id="d54aa-261">您已安裝 hello 資產之後，請重新啟動郵件分析器。</span><span class="sxs-lookup"><span data-stu-id="d54aa-261">Restart Message Analyzer after you've installed hello assets.</span></span>

![訊息分析器資產管理員](./media/storage-e2e-troubleshooting/mma-start-page-1.png)

> [!NOTE]
> <span data-ttu-id="d54aa-263">安裝所有顯示基於此教學課程的 hello hello Azure 儲存體資產。</span><span class="sxs-lookup"><span data-stu-id="d54aa-263">Install all of hello Azure Storage assets shown for hello purposes of this tutorial.</span></span>
> 
> 

### <a name="import-your-log-files-into-message-analyzer"></a><span data-ttu-id="d54aa-264">將記錄檔匯入 Message Analyzer 中</span><span class="sxs-lookup"><span data-stu-id="d54aa-264">Import your log files into Message Analyzer</span></span>
<span data-ttu-id="d54aa-265">您可以將所有已儲存的記錄檔 (伺服器端、用戶端和網路) 匯入 Microsoft Message Analyzer 的單一工作階段中進行分析。</span><span class="sxs-lookup"><span data-stu-id="d54aa-265">You can import all of your saved log files (server-side, client-side, and network) into a single session in Microsoft Message Analyzer for analysis.</span></span>

1. <span data-ttu-id="d54aa-266">在 hello**檔案**Microsoft Message Analyzer 功能表按一下**新的工作階段**，然後按一下**空白的工作階段**。</span><span class="sxs-lookup"><span data-stu-id="d54aa-266">On hello **File** menu in Microsoft Message Analyzer, click **New Session**, and then click **Blank Session**.</span></span> <span data-ttu-id="d54aa-267">在 [hello**新的工作階段**] 對話方塊中，輸入您的分析工作階段的名稱。</span><span class="sxs-lookup"><span data-stu-id="d54aa-267">In hello **New Session** dialog, enter a name for your analysis session.</span></span> <span data-ttu-id="d54aa-268">在 hello**工作階段詳細資料** 面板中，按一下 hello**檔案** 按鈕。</span><span class="sxs-lookup"><span data-stu-id="d54aa-268">In hello **Session Details** panel, click on hello **Files** button.</span></span>
2. <span data-ttu-id="d54aa-269">按一下郵件分析器所產生的 tooload hello 網路追蹤資料**加入檔案**、 瀏覽 toohello 您儲存的位置.matp 檔案從您網頁追蹤活動中，選取 hello.matp 檔案，然後按一下**開啟**.</span><span class="sxs-lookup"><span data-stu-id="d54aa-269">tooload hello network trace data generated by Message Analyzer, click on **Add Files**, browse toohello location where you saved your .matp file from your web tracing session, select hello .matp file, and click **Open**.</span></span>
3. <span data-ttu-id="d54aa-270">tooload hello 伺服器端記錄資料，按一下**加入檔案**，瀏覽 toohello 下載您的伺服器端記錄檔的位置，選取 hello hello 時間範圍內 tooanalyze，然後按一下的記錄檔**開啟**.</span><span class="sxs-lookup"><span data-stu-id="d54aa-270">tooload hello server-side log data, click on **Add Files**, browse toohello location where you downloaded your server-side logs, select hello log files for hello time range you want tooanalyze, and click **Open**.</span></span> <span data-ttu-id="d54aa-271">然後，在 hello**工作階段詳細資料**面板、 組 hello**文字記錄檔設定**下拉式清單每個伺服器端記錄檔太**AzureStorageLog** tooensure，Microsoft郵件分析器可以正確地剖析 hello 記錄檔。</span><span class="sxs-lookup"><span data-stu-id="d54aa-271">Then, in hello **Session Details** panel, set hello **Text Log Configuration** drop-down for each server-side log file too**AzureStorageLog** tooensure that Microsoft Message Analyzer can parse hello log file correctly.</span></span>
4. <span data-ttu-id="d54aa-272">tooload hello 用戶端記錄檔資料，按一下**加入檔案**，瀏覽 toohello 位置儲存您的用戶端記錄檔的位置，選取您想 tooanalyze，然後按一下 hello 記錄檔**開啟**。</span><span class="sxs-lookup"><span data-stu-id="d54aa-272">tooload hello client-side log data, click on **Add Files**, browse toohello location where you saved your client-side logs, select hello log files you want tooanalyze, and click **Open**.</span></span> <span data-ttu-id="d54aa-273">然後，在 hello**工作階段詳細資料**面板、 組 hello**文字記錄檔設定**下拉式清單每個用戶端記錄檔太**AzureStorageClientDotNetV4** tooensure，Microsoft Message Analyzer 可正確剖析 hello 記錄檔。</span><span class="sxs-lookup"><span data-stu-id="d54aa-273">Then, in hello **Session Details** panel, set hello **Text Log Configuration** drop-down for each client-side log file too**AzureStorageClientDotNetV4** tooensure that Microsoft Message Analyzer can parse hello log file correctly.</span></span>
5. <span data-ttu-id="d54aa-274">按一下**啟動**在 hello**新的工作階段**對話方塊 tooload 和剖析 hello 記錄資料。</span><span class="sxs-lookup"><span data-stu-id="d54aa-274">Click **Start** in hello **New Session** dialog tooload and parse hello log data.</span></span> <span data-ttu-id="d54aa-275">hello 記錄資料會顯示 hello 訊息分析師分析方格中。</span><span class="sxs-lookup"><span data-stu-id="d54aa-275">hello log data displays in hello Message Analyzer Analysis Grid.</span></span>

<span data-ttu-id="d54aa-276">hello 圖會顯示 「 範例 」 工作階段設定伺服器、 用戶端和網路追蹤記錄檔。</span><span class="sxs-lookup"><span data-stu-id="d54aa-276">hello picture below shows an example session configured with server, client, and network trace log files.</span></span>

![設定 Message Analyzer 工作階段](./media/storage-e2e-troubleshooting/configure-mma-session-1.png)

<span data-ttu-id="d54aa-278">請注意，Message Analyzer 會將記錄檔載入記憶體中。</span><span class="sxs-lookup"><span data-stu-id="d54aa-278">Note that Message Analyzer loads log files into memory.</span></span> <span data-ttu-id="d54aa-279">如果您有大量記錄資料，您會想 toofilter 它從郵件分析器的順序 tooget hello 最佳效能。</span><span class="sxs-lookup"><span data-stu-id="d54aa-279">If you have a large set of log data, you will want toofilter it in order tooget hello best performance from Message Analyzer.</span></span>

<span data-ttu-id="d54aa-280">首先，判斷您有興趣檢視的 hello 時間範圍，並讓此時段保持越小越好。</span><span class="sxs-lookup"><span data-stu-id="d54aa-280">First, determine hello time frame that you are interested in reviewing, and keep this time frame as small as possible.</span></span> <span data-ttu-id="d54aa-281">在許多情況下，您會想 tooreview 分鐘或小時最多的句號。</span><span class="sxs-lookup"><span data-stu-id="d54aa-281">In many cases you will want tooreview a period of minutes or hours at most.</span></span> <span data-ttu-id="d54aa-282">匯入 hello 可符合您需求的記錄檔的最小的集合。</span><span class="sxs-lookup"><span data-stu-id="d54aa-282">Import hello smallest set of logs that can meet your needs.</span></span>

<span data-ttu-id="d54aa-283">如果仍有大量的記錄檔資料，然後您可以 toospecify 工作階段篩選 toofilter 記錄資料之前將其載入。</span><span class="sxs-lookup"><span data-stu-id="d54aa-283">If you still have a large amount of log data, then you may want toospecify a session filter toofilter your log data before you load it.</span></span> <span data-ttu-id="d54aa-284">在 hello**工作階段篩選器** 方塊中，選取 hello**文件庫**按鈕 toochoose 預先定義的篩選; 例如，選擇**全域時間篩選 I**從 Azure 儲存體篩選的 hello在時間間隔內 toofilter。</span><span class="sxs-lookup"><span data-stu-id="d54aa-284">In hello **Session Filter** box, select hello **Library** button toochoose a predefined filter; for example, choose **Global Time Filter I** from hello Azure Storage filters toofilter on a time interval.</span></span> <span data-ttu-id="d54aa-285">接著，您可以編輯 hello 篩選準則 toospecify hello 啟動且 hello 間隔的結束時間戳記想 toosee。</span><span class="sxs-lookup"><span data-stu-id="d54aa-285">You can then edit hello filter criteria toospecify hello starting and ending timestamp for hello interval you want toosee.</span></span> <span data-ttu-id="d54aa-286">您也可以篩選特定狀態的程式碼;例如，您可以選擇其中 hello 狀態碼為 404 tooload 只記錄項目。</span><span class="sxs-lookup"><span data-stu-id="d54aa-286">You can also filter on a particular status code; for example, you can choose tooload only log entries where hello status code is 404.</span></span>

<span data-ttu-id="d54aa-287">如需將記錄檔資料匯入 Microsoft Message Analyzer 的詳細資訊，請參閱 TechNet 上的 [擷取訊息資料](http://technet.microsoft.com/library/dn772437.aspx) 。</span><span class="sxs-lookup"><span data-stu-id="d54aa-287">For more information about importing log data into Microsoft Message Analyzer, see [Retrieving Message Data](http://technet.microsoft.com/library/dn772437.aspx) on TechNet.</span></span>

### <a name="use-hello-client-request-id-toocorrelate-log-file-data"></a><span data-ttu-id="d54aa-288">使用 hello 用戶端要求 ID toocorrelate 記錄檔資料</span><span class="sxs-lookup"><span data-stu-id="d54aa-288">Use hello client request ID toocorrelate log file data</span></span>
<span data-ttu-id="d54aa-289">hello Azure 儲存體用戶端程式庫會自動產生的每個要求的唯一用戶端要求識別碼。</span><span class="sxs-lookup"><span data-stu-id="d54aa-289">hello Azure Storage Client Library automatically generates a unique client request ID for every request.</span></span> <span data-ttu-id="d54aa-290">此值會寫 toohello 用戶端記錄檔、 hello server 記錄檔，與 hello 網路追蹤，因此您可以使用它 toocorrelate 資料跨郵件分析器中的所有三個記錄檔。</span><span class="sxs-lookup"><span data-stu-id="d54aa-290">This value is written toohello client log, hello server log, and hello network trace, so you can use it toocorrelate data across all three logs within Message Analyzer.</span></span> <span data-ttu-id="d54aa-291">請參閱[用戶端要求 ID](storage-monitoring-diagnosing-troubleshooting.md#client-request-id) hello 用戶端的其他資訊的要求識別碼。</span><span class="sxs-lookup"><span data-stu-id="d54aa-291">See [Client request ID](storage-monitoring-diagnosing-troubleshooting.md#client-request-id) for additional information about hello client request ID.</span></span>

<span data-ttu-id="d54aa-292">hello 下列各節說明如何 toouse 預先設定和自訂版面配置檢視 toocorrelate 與群組資料根據 hello 用戶端要求識別碼。</span><span class="sxs-lookup"><span data-stu-id="d54aa-292">hello sections below describe how toouse pre-configured and custom layout views toocorrelate and group data based on hello client request ID.</span></span>

### <a name="select-a-view-layout-toodisplay-in-hello-analysis-grid"></a><span data-ttu-id="d54aa-293">在 hello 分析方格中選取檢視配置 toodisplay</span><span class="sxs-lookup"><span data-stu-id="d54aa-293">Select a view layout toodisplay in hello Analysis Grid</span></span>
<span data-ttu-id="d54aa-294">郵件分析器的 hello 儲存體資產包括 Azure 儲存體檢視版面配置，也就是預先設定的檢視，您可以搭配 toodisplay 資料很有用的群組和資料行針對不同的案例。</span><span class="sxs-lookup"><span data-stu-id="d54aa-294">hello Storage Assets for Message Analyzer include Azure Storage View Layouts, which are pre-configured views that you can use toodisplay your data with useful groupings and columns for different scenarios.</span></span> <span data-ttu-id="d54aa-295">您也可以建立自訂檢視版面配置並儲存起來以便重複使用。</span><span class="sxs-lookup"><span data-stu-id="d54aa-295">You can also create custom view layouts and save them for reuse.</span></span>

<span data-ttu-id="d54aa-296">hello 圖會顯示 hello**檢視配置**功能表上，選取可用**檢視配置**從 hello 工具列功能區。</span><span class="sxs-lookup"><span data-stu-id="d54aa-296">hello picture below shows hello **View Layout** menu, available by selecting **View Layout** from hello toolbar ribbon.</span></span> <span data-ttu-id="d54aa-297">Azure 儲存體的 hello 檢視配置進行分組 hello **Azure 儲存體**hello 功能表中的節點。</span><span class="sxs-lookup"><span data-stu-id="d54aa-297">hello view layouts for Azure Storage are grouped under hello **Azure Storage** node in hello menu.</span></span> <span data-ttu-id="d54aa-298">您可以搜尋`Azure Storage`hello 搜尋方塊 toofilter 在 Azure 儲存體中檢視僅版面配置。</span><span class="sxs-lookup"><span data-stu-id="d54aa-298">You can search for `Azure Storage` in hello search box toofilter on Azure Storage view layouts only.</span></span> <span data-ttu-id="d54aa-299">您也可以選取 hello 星狀下一步 tooa 檢視配置 toomake 為我的最愛，並在 [hello] 功能表的 hello 頂端顯示。</span><span class="sxs-lookup"><span data-stu-id="d54aa-299">You can also select hello star next tooa view layout toomake it a favorite and display it at hello top of hello menu.</span></span>

![檢視版面配置功能表](./media/storage-e2e-troubleshooting/view-layout-menu.png)

<span data-ttu-id="d54aa-301">搭配 select toobegin **ClientRequestID 及模組所分組**。</span><span class="sxs-lookup"><span data-stu-id="d54aa-301">toobegin with, select **Grouped by ClientRequestID and Module**.</span></span> <span data-ttu-id="d54aa-302">此檢視版面配置會先依用戶端要求識別碼，再依來源記錄檔 (或 Message Analyzer 中的 [模組]  )，將全部三個記錄檔中的記錄檔資料分組。</span><span class="sxs-lookup"><span data-stu-id="d54aa-302">This view layout groups log data from all three logs first by client request ID, then by source log file (or **Module** in Message Analyzer).</span></span> <span data-ttu-id="d54aa-303">與此檢視中，您可以向下切入到特定用戶端要求識別碼，並查看所有三個記錄檔中該用戶端要求識別碼的資料。</span><span class="sxs-lookup"><span data-stu-id="d54aa-303">With this view, you can drill down into a particular client request ID, and see data from all three log files for that client request ID.</span></span>

<span data-ttu-id="d54aa-304">hello 圖會顯示此版面配置檢視套用 toohello 範例記錄檔資料，以顯示的資料行的子集。</span><span class="sxs-lookup"><span data-stu-id="d54aa-304">hello picture below shows this layout view applied toohello sample log data, with a subset of columns displayed.</span></span> <span data-ttu-id="d54aa-305">您可以查看特定用戶端要求識別碼的 hello 分析方格顯示 hello 用戶端記錄檔、 伺服器記錄檔和網路追蹤的資料。</span><span class="sxs-lookup"><span data-stu-id="d54aa-305">You can see that for a particular client request ID, hello Analysis Grid displays data from hello client log, server log, and network trace.</span></span>

![Azure 儲存體檢視版面配置](./media/storage-e2e-troubleshooting/view-layout-client-request-id-module.png)

> [!NOTE]
> <span data-ttu-id="d54aa-307">不同的記錄檔有不同的資料行，因此在 hello 分析方格中顯示來自多個記錄檔的資料時，某些資料行可能不會包含任何資料，對於給定的資料列。</span><span class="sxs-lookup"><span data-stu-id="d54aa-307">Different log files have different columns, so when data from multiple log files is displayed in hello Analysis Grid, some columns may not contain any data for a given row.</span></span> <span data-ttu-id="d54aa-308">比方說，在上面的 hello 圖片，用戶端記錄檔資料列執行不顯示任何資料 hello**時間戳記**， **TimeElapsed**，**來源**，和**目的地**資料行，因為這些資料行不存在於 hello 用戶端記錄檔，但確實存在 hello 網路追蹤中。</span><span class="sxs-lookup"><span data-stu-id="d54aa-308">For example, in hello picture above, the client log rows do not show any data for hello **Timestamp**, **TimeElapsed**, **Source**, and **Destination** columns, because these columns do not exist in hello client log, but do exist in hello network trace.</span></span> <span data-ttu-id="d54aa-309">同樣地，hello**時間戳記**資料行顯示時間戳記資料從 hello 伺服器記錄檔，但沒有資料會顯示 hello **TimeElapsed**，**來源**，和**目的地**資料行，並不屬於 hello server 記錄檔。</span><span class="sxs-lookup"><span data-stu-id="d54aa-309">Similarly, hello **Timestamp** column displays timestamp data from hello server log, but no data is displayed for hello **TimeElapsed**, **Source**, and **Destination** columns, which are not part of hello server log.</span></span>
> 
> 

<span data-ttu-id="d54aa-310">此外 toousing hello Azure 儲存體檢視版面配置，您可以也定義並儲存您自己的檢視配置。</span><span class="sxs-lookup"><span data-stu-id="d54aa-310">In addition toousing hello Azure Storage view layouts, you can also define and save your own view layouts.</span></span> <span data-ttu-id="d54aa-311">您可以選取其他所需的欄位來分組資料，並儲存 hello 群組做為您自訂的配置的一部分。</span><span class="sxs-lookup"><span data-stu-id="d54aa-311">You can select other desired fields for grouping data and save hello grouping as part of your custom layout as well.</span></span>

### <a name="apply-color-rules-toohello-analysis-grid"></a><span data-ttu-id="d54aa-312">套用色彩規則 toohello 分析方格</span><span class="sxs-lookup"><span data-stu-id="d54aa-312">Apply color rules toohello Analysis Grid</span></span>
<span data-ttu-id="d54aa-313">hello 儲存體資產也包含色彩規則，提供視覺表示 tooidentify 不同類型的 hello 分析方格中的錯誤。</span><span class="sxs-lookup"><span data-stu-id="d54aa-313">hello Storage Assets also include color rules, which offer a visual means tooidentify different types of errors in hello Analysis Grid.</span></span> <span data-ttu-id="d54aa-314">hello 預先定義的色彩規則套用 tooHTTP 錯誤，所以它們只會出現 hello 伺服器記錄檔和網路追蹤。</span><span class="sxs-lookup"><span data-stu-id="d54aa-314">hello predefined color rules apply tooHTTP errors, so they appear only for hello server log and network trace.</span></span>

<span data-ttu-id="d54aa-315">tooapply 色彩規則、 選取**色彩規則**從 hello 工具列功能區。</span><span class="sxs-lookup"><span data-stu-id="d54aa-315">tooapply color rules, select **Color Rules** from hello toolbar ribbon.</span></span> <span data-ttu-id="d54aa-316">您會看見 hello 功能表中的 hello Azure 儲存體色彩規則。</span><span class="sxs-lookup"><span data-stu-id="d54aa-316">You'll see hello Azure Storage color rules in hello menu.</span></span> <span data-ttu-id="d54aa-317">Hello 教學課程中，選取**用戶端錯誤 (介於 400 到 499 StatusCode)**hello 圖所示。</span><span class="sxs-lookup"><span data-stu-id="d54aa-317">For hello tutorial, select **Client Errors (StatusCode between 400 and 499)**, as shown in hello picture below.</span></span>

![Azure 儲存體檢視版面配置](./media/storage-e2e-troubleshooting/color-rules-menu.png)

<span data-ttu-id="d54aa-319">此外 toousing hello Azure 儲存體色彩規則，您也可以定義及儲存您自己的色彩規則。</span><span class="sxs-lookup"><span data-stu-id="d54aa-319">In addition toousing hello Azure Storage color rules, you can also define and save your own color rules.</span></span>

### <a name="group-and-filter-log-data-toofind-400-range-errors"></a><span data-ttu-id="d54aa-320">群組和篩選記錄檔資料 toofind 400 範圍錯誤</span><span class="sxs-lookup"><span data-stu-id="d54aa-320">Group and filter log data toofind 400-range errors</span></span>
<span data-ttu-id="d54aa-321">接下來，我們將分組，並篩選 hello 記錄資料 toofind hello 400 範圍中的所有錯誤。</span><span class="sxs-lookup"><span data-stu-id="d54aa-321">Next, we'll group and filter hello log data toofind all errors in hello 400 range.</span></span>

1. <span data-ttu-id="d54aa-322">找出 hello **StatusCode**中 hello 分析方格中，以滑鼠右鍵按一下 hello 資料行標題，並選取資料行**群組**。</span><span class="sxs-lookup"><span data-stu-id="d54aa-322">Locate hello **StatusCode** column in hello Analysis Grid, right-click hello column heading, and select **Group**.</span></span>
2. <span data-ttu-id="d54aa-323">接下來，群組 hello **ClientRequestId**資料行。</span><span class="sxs-lookup"><span data-stu-id="d54aa-323">Next, group on hello **ClientRequestId** column.</span></span> <span data-ttu-id="d54aa-324">您會看到的 hello 分析方格現在依狀態中的 hello 資料程式碼，並由用戶端要求識別碼。</span><span class="sxs-lookup"><span data-stu-id="d54aa-324">You'll see that hello data in hello Analysis Grid is now organized by status code and by client request ID.</span></span>
3. <span data-ttu-id="d54aa-325">如果尚未顯示，請顯示 hello 檢視篩選器 工具視窗。</span><span class="sxs-lookup"><span data-stu-id="d54aa-325">Display hello View Filter tool window if it is not already displayed.</span></span> <span data-ttu-id="d54aa-326">在 hello 工具列功能區中，選取 **工具視窗**，然後**檢視篩選器**。</span><span class="sxs-lookup"><span data-stu-id="d54aa-326">On hello toolbar ribbon, select **Tool Windows**, then **View Filter**.</span></span>
4. <span data-ttu-id="d54aa-327">toofilter hello 記錄資料 toodisplay 只 400 範圍錯誤，加入下列篩選準則 toohello hello**檢視篩選器**視窗，並按一下**套用**:</span><span class="sxs-lookup"><span data-stu-id="d54aa-327">toofilter hello log data toodisplay only 400-range errors, add hello following filter criteria toohello **View Filter** window, and click **Apply**:</span></span>

    ```   
    (AzureStorageLog.StatusCode >= 400 && AzureStorageLog.StatusCode <=499) || (HTTP.StatusCode >= 400 && HTTP.StatusCode <= 499)
    ```

<span data-ttu-id="d54aa-328">hello 圖會顯示 hello 這個群組和篩選的結果。</span><span class="sxs-lookup"><span data-stu-id="d54aa-328">hello picture below shows hello results of this grouping and filter.</span></span> <span data-ttu-id="d54aa-329">擴充的 hello **ClientRequestID**欄位下方的狀態碼 409，比方說，分組顯示 hello 導致該狀態碼的作業。</span><span class="sxs-lookup"><span data-stu-id="d54aa-329">Expanding hello **ClientRequestID** field beneath hello grouping for status code 409, for example, shows an operation that resulted in that status code.</span></span>

![Azure 儲存體檢視版面配置](./media/storage-e2e-troubleshooting/400-range-errors1.png)

<span data-ttu-id="d54aa-331">之後套用此篩選之後，您會看到 hello 用戶端記錄檔資料列會排除，hello 為用戶端記錄檔不包含**StatusCode**資料行。</span><span class="sxs-lookup"><span data-stu-id="d54aa-331">After applying this filter, you'll see that rows from hello client log are excluded, as hello client log does not include a **StatusCode** column.</span></span> <span data-ttu-id="d54aa-332">與 toobegin，我們會檢閱 hello 伺服器和網路追蹤記錄檔 toolocate 404 錯誤，並接著我們將傳回 toohello 用戶端記錄 tooexamine hello 用戶端操作，導致 toothem。</span><span class="sxs-lookup"><span data-stu-id="d54aa-332">toobegin with, we'll review hello server and network trace logs toolocate 404 errors, and then we'll return toohello client log tooexamine hello client operations that led toothem.</span></span>

> [!NOTE]
> <span data-ttu-id="d54aa-333">您可以篩選 hello **StatusCode**資料行和仍然顯示的資料，從所有三個記錄檔，包括 hello 用戶端記錄檔，如果您將加入運算式 toohello 篩選，其中包含記錄項目，其中 hello 狀態碼是 null。</span><span class="sxs-lookup"><span data-stu-id="d54aa-333">You can filter on hello **StatusCode** column and still display data from all three logs, including hello client log, if you add an expression toohello filter that includes log entries where hello status code is null.</span></span> <span data-ttu-id="d54aa-334">tooconstruct 這個篩選條件運算式，使用：</span><span class="sxs-lookup"><span data-stu-id="d54aa-334">tooconstruct this filter expression, use:</span></span>
> 
> <code>&#42;StatusCode >= 400 or !&#42;StatusCode</code>
> 
> <span data-ttu-id="d54aa-335">此篩選條件傳回所有資料列從 hello 用戶端記錄檔和 hello server 記錄檔和 HTTP 記錄檔中的只有資料列 hello 狀態碼大於 400。</span><span class="sxs-lookup"><span data-stu-id="d54aa-335">This filter returns all rows from hello client log and only rows from hello server log and HTTP log where hello status code is greater than 400.</span></span> <span data-ttu-id="d54aa-336">如果您套用 toohello 檢視配置用戶端要求 ID 及模組所分組，您可以搜尋或 hello 捲動記錄項目 toofind 是表示所有三個記錄檔位置。</span><span class="sxs-lookup"><span data-stu-id="d54aa-336">If you apply it toohello view layout grouped by client request ID and module, you can search or scroll through hello log entries toofind ones where all three logs are represented.</span></span>   
> 
> 

### <a name="filter-log-data-toofind-404-errors"></a><span data-ttu-id="d54aa-337">篩選記錄檔資料 toofind 404 錯誤</span><span class="sxs-lookup"><span data-stu-id="d54aa-337">Filter log data toofind 404 errors</span></span>
<span data-ttu-id="d54aa-338">hello 儲存體資產包含預先定義的篩選，您可以使用 toonarrow 記錄檔資料 toofind hello 錯誤或您所需的趨勢。</span><span class="sxs-lookup"><span data-stu-id="d54aa-338">hello Storage Assets include predefined filters that you can use toonarrow log data toofind hello errors or trends you are looking for.</span></span> <span data-ttu-id="d54aa-339">接下來，我們會在這裡套用兩個預先定義的篩選條件： hello 伺服器和 404 錯誤，網路追蹤記錄檔篩選的一個，篩選 hello 資料在指定的時間範圍的一個。</span><span class="sxs-lookup"><span data-stu-id="d54aa-339">Next, we'll apply two predefined filters: one that filters hello server and network trace logs for 404 errors, and one that filters hello data on a specified time range.</span></span>

1. <span data-ttu-id="d54aa-340">如果尚未顯示，請顯示 hello 檢視篩選器 工具視窗。</span><span class="sxs-lookup"><span data-stu-id="d54aa-340">Display hello View Filter tool window if it is not already displayed.</span></span> <span data-ttu-id="d54aa-341">在 hello 工具列功能區中，選取 **工具視窗**，然後**檢視篩選器**。</span><span class="sxs-lookup"><span data-stu-id="d54aa-341">On hello toolbar ribbon, select **Tool Windows**, then **View Filter**.</span></span>
2. <span data-ttu-id="d54aa-342">在 hello 檢視篩選器 視窗中，選取 **文件庫**，然後搜尋`Azure Storage`toofind hello Azure 儲存體篩選。</span><span class="sxs-lookup"><span data-stu-id="d54aa-342">In hello View Filter window, select **Library**, and search on `Azure Storage` toofind hello Azure Storage filters.</span></span> <span data-ttu-id="d54aa-343">選取 hello 篩選**404 （找不到） 訊息中的所有記錄**。</span><span class="sxs-lookup"><span data-stu-id="d54aa-343">Select hello filter for **404 (Not Found) messages in all logs**.</span></span>
3. <span data-ttu-id="d54aa-344">顯示 hello**文件庫**功能表，然後找出並選取 hello**全域時間篩選器**。</span><span class="sxs-lookup"><span data-stu-id="d54aa-344">Display hello **Library** menu again, and locate and select hello **Global Time Filter**.</span></span>
4. <span data-ttu-id="d54aa-345">編輯您想 tooview 顯示 hello 篩選 toohello 範圍中的 hello 時間戳記。</span><span class="sxs-lookup"><span data-stu-id="d54aa-345">Edit hello timestamps shown in hello filter toohello range you wish tooview.</span></span> <span data-ttu-id="d54aa-346">這有助於資料 tooanalyze toonarrow hello 範圍。</span><span class="sxs-lookup"><span data-stu-id="d54aa-346">This will help toonarrow hello range of data tooanalyze.</span></span>
5. <span data-ttu-id="d54aa-347">您的篩選條件應該會出現類似以下的 toohello 範例。</span><span class="sxs-lookup"><span data-stu-id="d54aa-347">Your filter should appear similar toohello example below.</span></span> <span data-ttu-id="d54aa-348">按一下**套用**tooapply hello 篩選 toohello 分析方格。</span><span class="sxs-lookup"><span data-stu-id="d54aa-348">Click **Apply** tooapply hello filter toohello Analysis Grid.</span></span>

    ```   
    ((AzureStorageLog.StatusCode == 404 || HTTP.StatusCode == 404)) And
    (#Timestamp >= 2014-10-20T16:36:38 and #Timestamp <= 2014-10-20T16:36:39)
    ```

    ![Azure 儲存體檢視版面配置](./media/storage-e2e-troubleshooting/404-filtered-errors1.png)

### <a name="analyze-your-log-data"></a><span data-ttu-id="d54aa-350">分析記錄檔資料</span><span class="sxs-lookup"><span data-stu-id="d54aa-350">Analyze your log data</span></span>
<span data-ttu-id="d54aa-351">現在，您有分組，並篩選您的資料，您可以檢查個別要求而產生 404 錯誤 hello 詳細資料。</span><span class="sxs-lookup"><span data-stu-id="d54aa-351">Now that you have grouped and filtered your data, you can examine hello details of individual requests that generated 404 errors.</span></span> <span data-ttu-id="d54aa-352">在目前檢視配置 hello，hello 資料是依用戶端要求 ID，然後由記錄檔來源分組。</span><span class="sxs-lookup"><span data-stu-id="d54aa-352">In hello current view layout, hello data is grouped by client request ID, then by log source.</span></span> <span data-ttu-id="d54aa-353">因為我們要在要求中篩選其中 hello StatusCode 欄位包含 404，我們會看到只 hello 伺服器和網路追蹤資料，不 hello 用戶端記錄的資料。</span><span class="sxs-lookup"><span data-stu-id="d54aa-353">Since we are filtering on requests where hello StatusCode field contains 404, we'll see only hello server and network trace data, not hello client log data.</span></span>

<span data-ttu-id="d54aa-354">hello 圖會顯示特定要求位置取得 Blob 作業產生 404 因為 hello blob 不存在。</span><span class="sxs-lookup"><span data-stu-id="d54aa-354">hello picture below shows a specific request where a Get Blob operation yielded a 404 because hello blob did not exist.</span></span> <span data-ttu-id="d54aa-355">請注意，某些資料行已從順序 toodisplay hello 相關資料中的 hello 標準檢視中移除。</span><span class="sxs-lookup"><span data-stu-id="d54aa-355">Note that some columns have been removed from hello standard view in order toodisplay hello relevant data.</span></span>

![已篩選的伺服器和網路追蹤記錄檔](./media/storage-e2e-troubleshooting/server-filtered-404-error.png)

<span data-ttu-id="d54aa-357">接下來，我們將與交互關聯此用戶端要求識別碼 hello 用戶端記錄檔資料 toosee hello 錯誤發生時執行何種動作 hello 用戶端。</span><span class="sxs-lookup"><span data-stu-id="d54aa-357">Next, we'll correlate this client request ID with hello client log data toosee what actions hello client was taking when hello error happened.</span></span> <span data-ttu-id="d54aa-358">您可以顯示為此工作階段 tooview hello 用戶端記錄檔資料，這會在第二個索引標籤中開啟新的分析方格檢視：</span><span class="sxs-lookup"><span data-stu-id="d54aa-358">You can display a new Analysis Grid view for this session tooview hello client log data, which opens in a second tab:</span></span>

1. <span data-ttu-id="d54aa-359">首先，複製 hello hello 值**ClientRequestId**欄位 toohello 剪貼簿。</span><span class="sxs-lookup"><span data-stu-id="d54aa-359">First, copy hello value of hello **ClientRequestId** field toohello clipboard.</span></span> <span data-ttu-id="d54aa-360">您可以選取其中一個資料列中，找出 hello **ClientRequestId**  欄位中，以滑鼠右鍵按一下 hello 資料值，然後選擇**複製 'ClientRequestId'**。</span><span class="sxs-lookup"><span data-stu-id="d54aa-360">You can do this by selecting either row, locating hello **ClientRequestId** field, right-clicking on hello data value, and choosing **Copy 'ClientRequestId'**.</span></span>
2. <span data-ttu-id="d54aa-361">在 hello 工具列功能區中，選取 **新的檢視器**，然後選取**分析方格**tooopen 新的索引 hello 新索引標籤會顯示所有資料在記錄檔，而不分組、 篩選或色彩規則。</span><span class="sxs-lookup"><span data-stu-id="d54aa-361">On hello toolbar ribbon, select **New Viewer**, then select **Analysis Grid** tooopen a new tab. hello new tab shows all data in your log files, without grouping, filtering, or color rules.</span></span>
3. <span data-ttu-id="d54aa-362">Hello 工具列功能區上，選取**檢視配置**，然後選取**所有.NET 用戶端的資料行**下 hello **Azure 儲存體**> 一節。</span><span class="sxs-lookup"><span data-stu-id="d54aa-362">On hello toolbar ribbon, select **View Layout**, then select **All .NET Client Columns** under hello **Azure Storage** section.</span></span> <span data-ttu-id="d54aa-363">此檢視的配置顯示資料 hello 用戶端記錄檔，以及 hello 伺服器和網路追蹤記錄檔。</span><span class="sxs-lookup"><span data-stu-id="d54aa-363">This view layout shows data from hello client log as well as hello server and network trace logs.</span></span> <span data-ttu-id="d54aa-364">依預設它排序 hello **MessageNumber**資料行。</span><span class="sxs-lookup"><span data-stu-id="d54aa-364">By default it is sorted on hello **MessageNumber** column.</span></span>
4. <span data-ttu-id="d54aa-365">接下來，將 hello 用戶端記錄檔搜尋 hello 用戶端要求識別碼。</span><span class="sxs-lookup"><span data-stu-id="d54aa-365">Next, search hello client log for hello client request ID.</span></span> <span data-ttu-id="d54aa-366">在 hello 工具列功能區中，選取 **尋找郵件**，然後 hello hello 用戶端要求 ID 來指定自訂篩選器**尋找**欄位。</span><span class="sxs-lookup"><span data-stu-id="d54aa-366">On hello toolbar ribbon, select **Find Messages**, then specify a custom filter on hello client request ID in hello **Find** field.</span></span> <span data-ttu-id="d54aa-367">使用此語法 hello 篩選器，指定您自己的用戶端要求 ID:</span><span class="sxs-lookup"><span data-stu-id="d54aa-367">Use this syntax for hello filter, specifying your own client request ID:</span></span>

    ```
    *ClientRequestId == "398bac41-7725-484b-8a69-2a9e48fc669a"
    ```

<span data-ttu-id="d54aa-368">郵件分析器找出並選取 hello 第一個記錄檔項目，其中 hello 搜尋準則符合 hello 用戶端要求識別碼。</span><span class="sxs-lookup"><span data-stu-id="d54aa-368">Message Analyzer locates and selects hello first log entry where hello search criteria matches hello client request ID.</span></span> <span data-ttu-id="d54aa-369">在 hello 用戶端記錄檔中，有數個項目，每個用戶端要求識別碼，因此您可能需要 toogroup 在 hello **ClientRequestId**欄位 toomake 它更容易 toosee 它們一起出現。</span><span class="sxs-lookup"><span data-stu-id="d54aa-369">In hello client log, there are several entries for each client request ID, so you may want toogroup them on hello **ClientRequestId** field toomake it easier toosee them all together.</span></span> <span data-ttu-id="d54aa-370">hello 圖片所示在 hello 用戶端 hello 訊息的所有記錄檔以取得 hello 指定用戶端要求識別碼。</span><span class="sxs-lookup"><span data-stu-id="d54aa-370">hello picture below shows all of hello messages in hello client log for hello specified client request ID.</span></span>

![顯示 404 錯誤的用戶端記錄檔](./media/storage-e2e-troubleshooting/client-log-analysis-grid1.png)

<span data-ttu-id="d54aa-372">使用這些兩個索引標籤中的 hello 檢視版面配置中所顯示的 hello 資料，您可以分析 hello 要求資料 toodetermine 可能造成 hello 錯誤。</span><span class="sxs-lookup"><span data-stu-id="d54aa-372">Using hello data shown in hello view layouts in these two tabs, you can analyze hello request data toodetermine what may have caused hello error.</span></span> <span data-ttu-id="d54aa-373">您也可以查看要求之前的此一 toosee 如果先前的事件可能會使 toohello 404 錯誤。</span><span class="sxs-lookup"><span data-stu-id="d54aa-373">You can also look at requests that preceded this one toosee if a previous event may have led toohello 404 error.</span></span> <span data-ttu-id="d54aa-374">例如，您可以檢閱 hello 用戶端記錄檔項目之前此用戶端要求 ID toodetermine 是否 hello blob 可能已遭到刪除，或如果 hello 錯誤是因為 toohello 容器或 blob 上呼叫 CreateIfNotExists API 的用戶端應用程式。</span><span class="sxs-lookup"><span data-stu-id="d54aa-374">For example, you can review hello client log entries preceding this client request ID toodetermine whether hello blob may have been deleted, or if hello error was due toohello client application calling a CreateIfNotExists API on a container or blob.</span></span> <span data-ttu-id="d54aa-375">在 hello 用戶端記錄檔，您可以在 hello 找到 hello blob 位址**描述**欄位; 在 hello 伺服器和網路追蹤記錄檔，這項資訊會出現在 hello**摘要**欄位。</span><span class="sxs-lookup"><span data-stu-id="d54aa-375">In hello client log, you can find hello blob's address in hello **Description** field; in hello server and network trace logs, this information appears in hello **Summary** field.</span></span>

<span data-ttu-id="d54aa-376">一旦您知道產生 hello 404 錯誤的 hello blob hello 位址時，您可以進一步調查。</span><span class="sxs-lookup"><span data-stu-id="d54aa-376">Once you know hello address of hello blob that yielded hello 404 error, you can investigate further.</span></span> <span data-ttu-id="d54aa-377">如果您搜尋 hello 與相關聯的其他訊息的記錄項目相同 blob hello 上的作業時，您可以檢查是否 hello 用戶端先前刪除 hello 實體。</span><span class="sxs-lookup"><span data-stu-id="d54aa-377">If you search hello log entries for other messages associated with operations on hello same blob, you can check whether hello client previously deleted hello entity.</span></span>

## <a name="analyze-other-types-of-storage-errors"></a><span data-ttu-id="d54aa-378">分析其他類型的儲存體錯誤</span><span class="sxs-lookup"><span data-stu-id="d54aa-378">Analyze other types of storage errors</span></span>
<span data-ttu-id="d54aa-379">既然您已熟悉如何使用郵件分析器 tooanalyze 記錄資料，您可以分析使用 檢視錯誤的其他類型配置、 色彩規則，以及搜尋/篩選。</span><span class="sxs-lookup"><span data-stu-id="d54aa-379">Now that you are familiar with using Message Analyzer tooanalyze your log data, you can analyze other types of errors using view layouts, color rules, and searching/filtering.</span></span> <span data-ttu-id="d54aa-380">hello 資料表底下列出一些問題，您可能會遇到與 hello 篩選準則，您可以使用 toolocate 它們。</span><span class="sxs-lookup"><span data-stu-id="d54aa-380">hello tables below lists some issues you may encounter and hello filter criteria you can use toolocate them.</span></span> <span data-ttu-id="d54aa-381">如需有關建構篩選條件和 hello 訊息分析師篩選語言，請參閱[篩選訊息資料](http://technet.microsoft.com/library/jj819365.aspx)。</span><span class="sxs-lookup"><span data-stu-id="d54aa-381">For more information on constructing filters and hello Message Analyzer filtering language, see [Filtering Message Data](http://technet.microsoft.com/library/jj819365.aspx).</span></span>

| <span data-ttu-id="d54aa-382">tooInvestigate...</span><span class="sxs-lookup"><span data-stu-id="d54aa-382">tooInvestigate…</span></span> | <span data-ttu-id="d54aa-383">使用篩選運算式…</span><span class="sxs-lookup"><span data-stu-id="d54aa-383">Use Filter Expression…</span></span> | <span data-ttu-id="d54aa-384">運算式適用於 tooLog (用戶端、 伺服器、 網路、 所有)</span><span class="sxs-lookup"><span data-stu-id="d54aa-384">Expression Applies tooLog (Client, Server,   Network, All)</span></span> |
| --- | --- | --- |
| <span data-ttu-id="d54aa-385">佇列上未預期的訊息傳遞延遲</span><span class="sxs-lookup"><span data-stu-id="d54aa-385">Unexpected delays in message delivery on a queue</span></span> |<span data-ttu-id="d54aa-386">AzureStorageClientDotNetV4.Description 包含「正在重試失敗的作業」。</span><span class="sxs-lookup"><span data-stu-id="d54aa-386">AzureStorageClientDotNetV4.Description   contains "Retrying failed operation."</span></span> |<span data-ttu-id="d54aa-387">用戶端</span><span class="sxs-lookup"><span data-stu-id="d54aa-387">Client</span></span> |
| <span data-ttu-id="d54aa-388">PercentThrottlingError 的 HTTP 增加</span><span class="sxs-lookup"><span data-stu-id="d54aa-388">HTTP Increase in PercentThrottlingError</span></span> |<span data-ttu-id="d54aa-389">HTTP.Response.StatusCode   == 500 &#124;&#124; HTTP.Response.StatusCode == 503</span><span class="sxs-lookup"><span data-stu-id="d54aa-389">HTTP.Response.StatusCode   == 500 &#124;&#124; HTTP.Response.StatusCode == 503</span></span> |<span data-ttu-id="d54aa-390">網路</span><span class="sxs-lookup"><span data-stu-id="d54aa-390">Network</span></span> |
| <span data-ttu-id="d54aa-391">PercentTimeoutError 增加</span><span class="sxs-lookup"><span data-stu-id="d54aa-391">Increase in PercentTimeoutError</span></span> |<span data-ttu-id="d54aa-392">HTTP.Response.StatusCode   == 500</span><span class="sxs-lookup"><span data-stu-id="d54aa-392">HTTP.Response.StatusCode   == 500</span></span> |<span data-ttu-id="d54aa-393">網路</span><span class="sxs-lookup"><span data-stu-id="d54aa-393">Network</span></span> |
| <span data-ttu-id="d54aa-394">PercentTimeoutError 增加 (全部)</span><span class="sxs-lookup"><span data-stu-id="d54aa-394">Increase in PercentTimeoutError (all)</span></span> |<span data-ttu-id="d54aa-395">*StatusCode   == 500</span><span class="sxs-lookup"><span data-stu-id="d54aa-395">*StatusCode   == 500</span></span> |<span data-ttu-id="d54aa-396">全部</span><span class="sxs-lookup"><span data-stu-id="d54aa-396">All</span></span> |
| <span data-ttu-id="d54aa-397">PercentNetworkError 增加</span><span class="sxs-lookup"><span data-stu-id="d54aa-397">Increase in PercentNetworkError</span></span> |<span data-ttu-id="d54aa-398">AzureStorageClientDotNetV4.EventLogEntry.Level   < 2</span><span class="sxs-lookup"><span data-stu-id="d54aa-398">AzureStorageClientDotNetV4.EventLogEntry.Level   < 2</span></span> |<span data-ttu-id="d54aa-399">用戶端</span><span class="sxs-lookup"><span data-stu-id="d54aa-399">Client</span></span> |
| <span data-ttu-id="d54aa-400">HTTP 403 (禁止) 訊息</span><span class="sxs-lookup"><span data-stu-id="d54aa-400">HTTP 403 (Forbidden) messages</span></span> |<span data-ttu-id="d54aa-401">HTTP.Response.StatusCode   == 403</span><span class="sxs-lookup"><span data-stu-id="d54aa-401">HTTP.Response.StatusCode   == 403</span></span> |<span data-ttu-id="d54aa-402">網路</span><span class="sxs-lookup"><span data-stu-id="d54aa-402">Network</span></span> |
| <span data-ttu-id="d54aa-403">HTTP 404 (找不到) 訊息</span><span class="sxs-lookup"><span data-stu-id="d54aa-403">HTTP 404 (Not found) messages</span></span> |<span data-ttu-id="d54aa-404">HTTP.Response.StatusCode   == 404</span><span class="sxs-lookup"><span data-stu-id="d54aa-404">HTTP.Response.StatusCode   == 404</span></span> |<span data-ttu-id="d54aa-405">網路</span><span class="sxs-lookup"><span data-stu-id="d54aa-405">Network</span></span> |
| <span data-ttu-id="d54aa-406">404 (全部)</span><span class="sxs-lookup"><span data-stu-id="d54aa-406">404 (all)</span></span> |<span data-ttu-id="d54aa-407">*StatusCode   == 404</span><span class="sxs-lookup"><span data-stu-id="d54aa-407">*StatusCode   == 404</span></span> |<span data-ttu-id="d54aa-408">全部</span><span class="sxs-lookup"><span data-stu-id="d54aa-408">All</span></span> |
| <span data-ttu-id="d54aa-409">共用存取簽章 (SAS) 授權問題</span><span class="sxs-lookup"><span data-stu-id="d54aa-409">Shared Access Signature (SAS) authorization issue</span></span> |<span data-ttu-id="d54aa-410">AzureStorageLog.RequestStatus ==  "SASAuthorizationError"</span><span class="sxs-lookup"><span data-stu-id="d54aa-410">AzureStorageLog.RequestStatus ==  "SASAuthorizationError"</span></span> |<span data-ttu-id="d54aa-411">網路</span><span class="sxs-lookup"><span data-stu-id="d54aa-411">Network</span></span> |
| <span data-ttu-id="d54aa-412">HTTP 409 (衝突) 訊息</span><span class="sxs-lookup"><span data-stu-id="d54aa-412">HTTP 409 (Conflict) messages</span></span> |<span data-ttu-id="d54aa-413">HTTP.Response.StatusCode   == 409</span><span class="sxs-lookup"><span data-stu-id="d54aa-413">HTTP.Response.StatusCode   == 409</span></span> |<span data-ttu-id="d54aa-414">網路</span><span class="sxs-lookup"><span data-stu-id="d54aa-414">Network</span></span> |
| <span data-ttu-id="d54aa-415">409 (全部)</span><span class="sxs-lookup"><span data-stu-id="d54aa-415">409 (all)</span></span> |<span data-ttu-id="d54aa-416">*StatusCode   == 409</span><span class="sxs-lookup"><span data-stu-id="d54aa-416">*StatusCode   == 409</span></span> |<span data-ttu-id="d54aa-417">全部</span><span class="sxs-lookup"><span data-stu-id="d54aa-417">All</span></span> |
| <span data-ttu-id="d54aa-418">低 PercentSuccess，或是分析記錄項目內含具有 ClientOtherErrors 交易狀態的作業</span><span class="sxs-lookup"><span data-stu-id="d54aa-418">Low PercentSuccess or analytics log entries have   operations with transaction status of ClientOtherErrors</span></span> |<span data-ttu-id="d54aa-419">AzureStorageLog.RequestStatus ==   "ClientOtherError"</span><span class="sxs-lookup"><span data-stu-id="d54aa-419">AzureStorageLog.RequestStatus ==   "ClientOtherError"</span></span> |<span data-ttu-id="d54aa-420">伺服器</span><span class="sxs-lookup"><span data-stu-id="d54aa-420">Server</span></span> |
| <span data-ttu-id="d54aa-421">Nagle 警告</span><span class="sxs-lookup"><span data-stu-id="d54aa-421">Nagle   Warning</span></span> |<span data-ttu-id="d54aa-422">((AzureStorageLog.EndToEndLatencyMS   - AzureStorageLog.ServerLatencyMS) > (AzureStorageLog.ServerLatencyMS *   1.5)) 和 (AzureStorageLog.RequestPacketSize <1460) 和 (AzureStorageLog.EndToEndLatencyMS -   AzureStorageLog.ServerLatencyMS >= 200)</span><span class="sxs-lookup"><span data-stu-id="d54aa-422">((AzureStorageLog.EndToEndLatencyMS   - AzureStorageLog.ServerLatencyMS) > (AzureStorageLog.ServerLatencyMS *   1.5)) and (AzureStorageLog.RequestPacketSize <1460) and (AzureStorageLog.EndToEndLatencyMS -   AzureStorageLog.ServerLatencyMS >= 200)</span></span> |<span data-ttu-id="d54aa-423">伺服器</span><span class="sxs-lookup"><span data-stu-id="d54aa-423">Server</span></span> |
| <span data-ttu-id="d54aa-424">伺服器和網路記錄檔中的時間範圍</span><span class="sxs-lookup"><span data-stu-id="d54aa-424">Range of   time in Server and Network logs</span></span> |<span data-ttu-id="d54aa-425">#Timestamp   >= 2014-10-20T16:36:38 and #Timestamp <= 2014-10-20T16:36:39</span><span class="sxs-lookup"><span data-stu-id="d54aa-425">#Timestamp   >= 2014-10-20T16:36:38 and #Timestamp <= 2014-10-20T16:36:39</span></span> |<span data-ttu-id="d54aa-426">伺服器、網路</span><span class="sxs-lookup"><span data-stu-id="d54aa-426">Server, Network</span></span> |
| <span data-ttu-id="d54aa-427">伺服器記錄檔中的時間範圍</span><span class="sxs-lookup"><span data-stu-id="d54aa-427">Range of   time in Server logs</span></span> |<span data-ttu-id="d54aa-428">AzureStorageLog.Timestamp   >= 2014-10-20T16:36:38 和 AzureStorageLog.Timestamp <=   2014-10-20T16:36:39</span><span class="sxs-lookup"><span data-stu-id="d54aa-428">AzureStorageLog.Timestamp   >= 2014-10-20T16:36:38 and AzureStorageLog.Timestamp <=   2014-10-20T16:36:39</span></span> |<span data-ttu-id="d54aa-429">伺服器</span><span class="sxs-lookup"><span data-stu-id="d54aa-429">Server</span></span> |

## <a name="next-steps"></a><span data-ttu-id="d54aa-430">後續步驟</span><span class="sxs-lookup"><span data-stu-id="d54aa-430">Next steps</span></span>
<span data-ttu-id="d54aa-431">如需在 Azure 儲存體中進行端對端案例疑難排解的詳細資訊，請參閱下列資源：</span><span class="sxs-lookup"><span data-stu-id="d54aa-431">For more information about troubleshooting end-to-end scenarios in Azure Storage, see these resources:</span></span>

* [<span data-ttu-id="d54aa-432">監視、診斷與疑難排解 Microsoft Azure 儲存體</span><span class="sxs-lookup"><span data-stu-id="d54aa-432">Monitor, diagnose, and troubleshoot Microsoft Azure Storage</span></span>](storage-monitoring-diagnosing-troubleshooting.md)
* [<span data-ttu-id="d54aa-433">Storage Analytics</span><span class="sxs-lookup"><span data-stu-id="d54aa-433">Storage Analytics</span></span>](http://msdn.microsoft.com/library/azure/hh343270.aspx)
* [<span data-ttu-id="d54aa-434">監視 hello Azure 入口網站的儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="d54aa-434">Monitor a storage account in hello Azure portal</span></span>](storage-monitor-storage-account.md)
* [<span data-ttu-id="d54aa-435">使用 AzCopy 命令列公用程式的 hello 傳輸資料</span><span class="sxs-lookup"><span data-stu-id="d54aa-435">Transfer data with hello AzCopy Command-Line Utility</span></span>](storage-use-azcopy.md)
* [<span data-ttu-id="d54aa-436">Microsoft Message Analyzer 操作指南</span><span class="sxs-lookup"><span data-stu-id="d54aa-436">Microsoft Message Analyzer Operating Guide</span></span>](http://technet.microsoft.com/library/jj649776.aspx)
