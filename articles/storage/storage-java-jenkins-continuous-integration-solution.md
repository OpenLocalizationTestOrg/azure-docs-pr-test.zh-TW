---
title: "使用 Azure 儲存體搭配 Jenkins 連續整合解決方案 | Microsoft Docs"
description: "本教學課程說明如何使用 Azure Blob 服務作為 Jenkins 連續整合解決方案所建立之組建成品的存放庫。"
services: storage
documentationcenter: java
author: seguler
manager: jahogg
editor: tysonn
ms.assetid: f4e5ca75-f6cb-4f74-981b-2aa06bb8de45
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: Java
ms.topic: article
ms.date: 02/28/2017
ms.author: seguler
ms.openlocfilehash: 72cf98289102f64f82bbac6e43b48339db8681b4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/11/2017
---
# <a name="using-azure-storage-with-a-jenkins-continuous-integration-solution"></a><span data-ttu-id="3f034-103">使用 Azure 儲存體搭配 Jenkins 連續整合解決方案</span><span class="sxs-lookup"><span data-stu-id="3f034-103">Using Azure Storage with a Jenkins Continuous Integration solution</span></span>
## <a name="overview"></a><span data-ttu-id="3f034-104">Overview</span><span class="sxs-lookup"><span data-stu-id="3f034-104">Overview</span></span>
<span data-ttu-id="3f034-105">下列資訊說明如何使用 Blob 儲存體，做為 Jenkins 連續整合 (CI) 解決方案所建立的組建構件儲存機制，或做為在組建程序中要使用之可下載檔案的來源。</span><span class="sxs-lookup"><span data-stu-id="3f034-105">The following information shows how to use Blob storage as a repository of build artifacts created by a Jenkins Continuous Integration (CI) solution, or as a source of downloadable files to be used in a build process.</span></span> <span data-ttu-id="3f034-106">您會發現這很實用的其中一種情況就是，當您在敏捷式開發環境中編寫程式碼 (使用 Java 或其他語言) 時，組建是根據連續整合來執行，而您需要一個存放庫來存放組建成品，以便能夠將這些成品分享給其他組織成員或客戶，或是維護封存等等。</span><span class="sxs-lookup"><span data-stu-id="3f034-106">One of the scenarios where you would find this useful is when you're coding in an agile development environment (using Java or other languages), builds are running based on continuous integration, and you need a repository for your build artifacts, so that you could, for example, share them with other organization members, your customers, or maintain an archive.</span></span> <span data-ttu-id="3f034-107">另一種情況是當組建工作本身需要其他檔案時，例如，要隨組建輸入一起下載的相依性項目。</span><span class="sxs-lookup"><span data-stu-id="3f034-107">Another scenario is when your build job itself requires other files, for example, dependencies to download as part of the build input.</span></span>

<span data-ttu-id="3f034-108">在本教學課程中，您將使用由 Microsoft 所提供適用於 Jenkins CI 的 Azure 儲存體外掛程式。</span><span class="sxs-lookup"><span data-stu-id="3f034-108">In this tutorial you will be using the Azure Storage Plugin for Jenkins CI made available by Microsoft.</span></span>

## <a name="overview-of-jenkins"></a><span data-ttu-id="3f034-109">Jenkins 概觀</span><span class="sxs-lookup"><span data-stu-id="3f034-109">Overview of Jenkins</span></span>
<span data-ttu-id="3f034-110">Jenkins 透過讓開發人員輕鬆整合自己的程式碼變更，並會以自動且頻繁的方式產生組建，來實現軟體專案的連續整合，從而提升開發人員產能。</span><span class="sxs-lookup"><span data-stu-id="3f034-110">Jenkins enables continuous integration of a software project by allowing developers to easily integrate their code changes and have builds produced automatically and frequently, thereby increasing the productivity of the developers.</span></span> <span data-ttu-id="3f034-111">組建會分版本存在，而組建成品可以上傳至各種存放庫。</span><span class="sxs-lookup"><span data-stu-id="3f034-111">Builds are versioned, and build artifacts can be uploaded to various repositories.</span></span> <span data-ttu-id="3f034-112">本主題將示範如何使用 Azure Blob 儲存體作為組建成品的存放庫。</span><span class="sxs-lookup"><span data-stu-id="3f034-112">This topic will show how to use Azure blob storage as the repository of the build artifacts.</span></span> <span data-ttu-id="3f034-113">其中也示範如何從 Azure Blob 儲存體下載相依性項目。</span><span class="sxs-lookup"><span data-stu-id="3f034-113">It will also show how to download dependencies from Azure blob storage.</span></span>

<span data-ttu-id="3f034-114">如需 Jenkins 的詳細資訊，請參閱 [認識 Jenkins](https://wiki.jenkins-ci.org/display/JENKINS/Meet+Jenkins)(英文)。</span><span class="sxs-lookup"><span data-stu-id="3f034-114">More information about Jenkins can be found at [Meet Jenkins](https://wiki.jenkins-ci.org/display/JENKINS/Meet+Jenkins).</span></span>

## <a name="benefits-of-using-the-blob-service"></a><span data-ttu-id="3f034-115">使用 Blob 服務的優點</span><span class="sxs-lookup"><span data-stu-id="3f034-115">Benefits of using the Blob service</span></span>
<span data-ttu-id="3f034-116">使用 Blob 服務來裝載您敏捷式開發組建成品的優點包括：</span><span class="sxs-lookup"><span data-stu-id="3f034-116">Benefits of using the Blob service to host your agile development build artifacts include:</span></span>

* <span data-ttu-id="3f034-117">組建成品和/或可下載相依性項目的高可用性。</span><span class="sxs-lookup"><span data-stu-id="3f034-117">High availability of your build artifacts and/or downloadable dependencies.</span></span>
* <span data-ttu-id="3f034-118">在您的 Jenkins CI 解決方案上傳組建成品時提供良好的效能。</span><span class="sxs-lookup"><span data-stu-id="3f034-118">Performance when your Jenkins CI solution uploads your build artifacts.</span></span>
* <span data-ttu-id="3f034-119">在您的客戶和合作夥伴下載組建成品時提供良好的效能。</span><span class="sxs-lookup"><span data-stu-id="3f034-119">Performance when your customers and partners download your build artifacts.</span></span>
* <span data-ttu-id="3f034-120">提供使用者存取原則控制，可以選擇匿名存取、期限型共用存取簽章存取、私用存取等。</span><span class="sxs-lookup"><span data-stu-id="3f034-120">Control over user access policies, with a choice between anonymous access, expiration-based shared access signature access, private access, etc.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="3f034-121">必要條件</span><span class="sxs-lookup"><span data-stu-id="3f034-121">Prerequisites</span></span>
<span data-ttu-id="3f034-122">若要使用 Blob 服務搭配 Jenkins CI 解決方案，您將需要下列項目：</span><span class="sxs-lookup"><span data-stu-id="3f034-122">You will need the following to use the Blob service with your Jenkins CI solution:</span></span>

* <span data-ttu-id="3f034-123">一套 Jenkins 連續整合解決方案。</span><span class="sxs-lookup"><span data-stu-id="3f034-123">A Jenkins Continuous Integration solution.</span></span>
  
    <span data-ttu-id="3f034-124">如果您目前沒有 Jenkins CI 解決方案，可以透過下列步驟執行 Jenkins CI 解決方案：</span><span class="sxs-lookup"><span data-stu-id="3f034-124">If you currently don't have a Jenkins CI solution, you can run a Jenkins CI solution using the following technique:</span></span>
  
  1. <span data-ttu-id="3f034-125">在已啟用 Java 的機器上，從 <http://jenkins-ci.org> 下載 jenkins.war。</span><span class="sxs-lookup"><span data-stu-id="3f034-125">On a Java-enabled machine, download jenkins.war from <http://jenkins-ci.org>.</span></span>
  2. <span data-ttu-id="3f034-126">在命令提示字元中切換至包含 jenkins.war 的資料夾，然後執行：</span><span class="sxs-lookup"><span data-stu-id="3f034-126">At a command prompt that is opened to the folder that contains jenkins.war, run:</span></span>
     
      `java -jar jenkins.war`

  3. <span data-ttu-id="3f034-127">在瀏覽器中開啟 `http://localhost:8080/`。</span><span class="sxs-lookup"><span data-stu-id="3f034-127">In your browser, open `http://localhost:8080/`.</span></span> <span data-ttu-id="3f034-128">這樣會開啟 Jenkins 儀表板，您將使用此儀表板來安裝及設定 Azure 儲存體外掛程式。</span><span class="sxs-lookup"><span data-stu-id="3f034-128">This will open the Jenkins dashboard, which you will use to install and configure the Azure Storage plugin.</span></span>
     
      <span data-ttu-id="3f034-129">雖然一般 Jenkins CI 解決方案會設定成以服務的形式執行，但對本教學課程來說，在命令列執行 Jenkins war 已經足夠。</span><span class="sxs-lookup"><span data-stu-id="3f034-129">While a typical Jenkins CI solution would be set up to run as a service, running the Jenkins war at the command line will be sufficient for this tutorial.</span></span>
* <span data-ttu-id="3f034-130">一個 Azure 帳戶。</span><span class="sxs-lookup"><span data-stu-id="3f034-130">An Azure account.</span></span> <span data-ttu-id="3f034-131">您可以在 <http://www.azure.com> 註冊 Azure 帳戶。</span><span class="sxs-lookup"><span data-stu-id="3f034-131">You can sign up for an Azure account at <http://www.azure.com>.</span></span>
* <span data-ttu-id="3f034-132">一個 Azure 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="3f034-132">An Azure storage account.</span></span> <span data-ttu-id="3f034-133">如果您還沒有儲存體帳戶，可以使用 [建立儲存體帳戶](storage-create-storage-account.md#create-a-storage-account)中的步驟建立一個帳戶。</span><span class="sxs-lookup"><span data-stu-id="3f034-133">If you don't already have a storage account, you can create one using the steps at [Create a Storage Account](storage-create-storage-account.md#create-a-storage-account).</span></span>
* <span data-ttu-id="3f034-134">建議您熟悉 Jenkins CI 解決方案，但這並非必要，因為下列內容將使用一個基本範例來示範使用 Blob 服務作為 Jenkins CI 組建成品的存放庫時所需的步驟。</span><span class="sxs-lookup"><span data-stu-id="3f034-134">Familiarity with the Jenkins CI solution is recommended but not required, as the following content will use a basic example to show you the steps needed when using the Blob service as a repository for Jenkins CI build artifacts.</span></span>

## <a name="how-to-use-the-blob-service-with-jenkins-ci"></a><span data-ttu-id="3f034-135">如何使用 Blob 服務搭配 Jenkins CI</span><span class="sxs-lookup"><span data-stu-id="3f034-135">How to use the Blob service with Jenkins CI</span></span>
<span data-ttu-id="3f034-136">若要使用 Blob 服務搭配 Jenkins，您將要安裝 Azure 儲存體外掛程式、設定外掛程式來使用您的儲存體帳戶，然後建立一個會將您的組建成品上傳至您儲存體帳戶的建置後動作。</span><span class="sxs-lookup"><span data-stu-id="3f034-136">To use the Blob service with Jenkins, you'll need to install the Azure Storage plugin, configure the plugin to use your storage account, and then create a post-build action that uploads your build artifacts to your storage account.</span></span> <span data-ttu-id="3f034-137">這些步驟將於下列各節中說明。</span><span class="sxs-lookup"><span data-stu-id="3f034-137">These steps are described in the following sections.</span></span>

## <a name="how-to-install-the-azure-storage-plugin"></a><span data-ttu-id="3f034-138">如何安裝 Azure 儲存體外掛程式</span><span class="sxs-lookup"><span data-stu-id="3f034-138">How to install the Azure Storage plugin</span></span>
1. <span data-ttu-id="3f034-139">在 Jenkins 儀表板中，按一下 [Manage Jenkins] 。</span><span class="sxs-lookup"><span data-stu-id="3f034-139">Within the Jenkins dashboard, click **Manage Jenkins**.</span></span>
2. <span data-ttu-id="3f034-140">在 [管理 Jenkins] 頁面中，按一下 [管理外掛程式]。</span><span class="sxs-lookup"><span data-stu-id="3f034-140">In the **Manage Jenkins** page, click **Manage Plugins**.</span></span>
3. <span data-ttu-id="3f034-141">按一下 [Available]  索引標籤。</span><span class="sxs-lookup"><span data-stu-id="3f034-141">Click the **Available** tab.</span></span>
4. <span data-ttu-id="3f034-142">在 [構件上傳程式] 區段中，取核 [Microsoft Azure 儲存體外掛程式]。</span><span class="sxs-lookup"><span data-stu-id="3f034-142">In the **Artifact Uploaders** section, check **Microsoft Azure Storage plugin**.</span></span>
5. <span data-ttu-id="3f034-143">按一下 [直接安裝而不重新啟動] 或 [立即下載並於重新啟動後安裝]。</span><span class="sxs-lookup"><span data-stu-id="3f034-143">Click either **Install without restart** or **Download now and install after restart**.</span></span>
6. <span data-ttu-id="3f034-144">重新啟動 Jenkins。</span><span class="sxs-lookup"><span data-stu-id="3f034-144">Restart Jenkins.</span></span>

## <a name="how-to-configure-the-azure-storage-plugin-to-use-your-storage-account"></a><span data-ttu-id="3f034-145">如何設定 Azure 儲存體外掛程式來使用您的儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="3f034-145">How to configure the Azure Storage plugin to use your storage account</span></span>
1. <span data-ttu-id="3f034-146">在 Jenkins 儀表板中，按一下 [Manage Jenkins] 。</span><span class="sxs-lookup"><span data-stu-id="3f034-146">Within the Jenkins dashboard, click **Manage Jenkins**.</span></span>
2. <span data-ttu-id="3f034-147">在 [管理 Jenkins] 頁面中，按一下 [設定系統]。</span><span class="sxs-lookup"><span data-stu-id="3f034-147">In the **Manage Jenkins** page, click **Configure System**.</span></span>
3. <span data-ttu-id="3f034-148">在 [Microsoft Azure Storage Account Configuration]  區段中：</span><span class="sxs-lookup"><span data-stu-id="3f034-148">In the **Microsoft Azure Storage Account Configuration** section:</span></span>
   1. <span data-ttu-id="3f034-149">輸入您的儲存體帳戶名稱，您可從 [Azure 入口網站](https://portal.azure.com)取得此名稱。</span><span class="sxs-lookup"><span data-stu-id="3f034-149">Enter your storage account name, which you can obtain from the [Azure Portal](https://portal.azure.com).</span></span>
   2. <span data-ttu-id="3f034-150">輸入您的儲存體帳戶金鑰，這項資訊也可以從 [Azure 入口網站](https://portal.azure.com)取得。</span><span class="sxs-lookup"><span data-stu-id="3f034-150">Enter your storage account key, also obtainable from the [Azure Portal](https://portal.azure.com).</span></span>
   3. <span data-ttu-id="3f034-151">如果您使用的是公用 Azure 雲端，請在 [Blob Service Endpoint URL]  使用預設值。</span><span class="sxs-lookup"><span data-stu-id="3f034-151">Use the default value for **Blob Service Endpoint URL** if you are using the public Azure cloud.</span></span> <span data-ttu-id="3f034-152">如果您使用的是其他 Azure 雲端，請使用 [Azure 入口網站](https://portal.azure.com) 中為您儲存體帳戶所指定的端點。</span><span class="sxs-lookup"><span data-stu-id="3f034-152">If you are using a different Azure cloud, use the endpoint as specified in the [Azure Portal](https://portal.azure.com) for your storage account.</span></span> 
   4. <span data-ttu-id="3f034-153">按一下 [Validate storage credentials]  以驗證您的儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="3f034-153">Click **Validate storage credentials** to validate your storage account.</span></span> 
   5. <span data-ttu-id="3f034-154">[選用] 如果您有其他儲存體帳戶要提供給 Jenkins CI 使用，請按一下 [Add more Storage Accounts] 。</span><span class="sxs-lookup"><span data-stu-id="3f034-154">[Optional] If you have additional storage accounts that you want made available to your Jenkins CI, click **Add more Storage Accounts**.</span></span>
   6. <span data-ttu-id="3f034-155">按一下 [Save]  儲存您的設定。</span><span class="sxs-lookup"><span data-stu-id="3f034-155">Click **Save** to save your settings.</span></span>

## <a name="how-to-create-a-post-build-action-that-uploads-your-build-artifacts-to-your-storage-account"></a><span data-ttu-id="3f034-156">如何建立會將您的組建成品上傳至您儲存體帳戶的建置後動作</span><span class="sxs-lookup"><span data-stu-id="3f034-156">How to create a post-build action that uploads your build artifacts to your storage account</span></span>
<span data-ttu-id="3f034-157">為了方便說明，首先，我們需要建立一個會建立數個檔案的工作，然後新增一個會將這些檔案上傳至您儲存體帳戶的建置後動作。</span><span class="sxs-lookup"><span data-stu-id="3f034-157">For instruction purposes, first we'll need to create a job that will create several files, and then add in the post-build action to upload the files to your storage account.</span></span>

1. <span data-ttu-id="3f034-158">在 Jenkins 儀表板中，按一下 [新增項目] 。</span><span class="sxs-lookup"><span data-stu-id="3f034-158">Within the Jenkins dashboard, click **New Item**.</span></span>
2. <span data-ttu-id="3f034-159">將工作命名為 **MyJob**，按一下 [建立任意樣式的軟體專案]，然後按一下 [確定]。</span><span class="sxs-lookup"><span data-stu-id="3f034-159">Name the job **MyJob**, click **Build a free-style software project**, and then click **OK**.</span></span>
3. <span data-ttu-id="3f034-160">在工作組態的 [Build] 區段中，按一下 [Add build step] 並選擇 [Execute Windows batch command]。</span><span class="sxs-lookup"><span data-stu-id="3f034-160">In the **Build** section of the job configuration, click **Add build step** and choose **Execute Windows batch command**.</span></span>
4. <span data-ttu-id="3f034-161">在 [Command] 中，使用下列命令：</span><span class="sxs-lookup"><span data-stu-id="3f034-161">In **Command**, use the following commands:</span></span>

    ```   
    md text
    cd text
    echo Hello Azure Storage from Jenkins > hello.txt
    date /t > date.txt
    time /t >> date.txt
    ```

5. <span data-ttu-id="3f034-162">在工作組態的 [建置後動作] 區段中，按一下 [新增建置後動作] 並選擇 [將構件上傳至 Azure Blob 儲存體]。</span><span class="sxs-lookup"><span data-stu-id="3f034-162">In the **Post-build Actions** section of the job configuration, click **Add post-build action** and choose **Upload artifacts to Azure Blob storage**.</span></span>
6. <span data-ttu-id="3f034-163">在 [儲存體帳戶名稱] 中，選取要使用的儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="3f034-163">For **Storage account name**, select the storage account to use.</span></span>
7. <span data-ttu-id="3f034-164">在 [容器名稱] 中，指定容器名稱。</span><span class="sxs-lookup"><span data-stu-id="3f034-164">For **Container name**, specify the container name.</span></span> <span data-ttu-id="3f034-165">(如果上傳組建成品時該容器尚未存在，將會建立該容器。)您可以使用環境變數，就這個範例而言，請輸入 **${JOB_NAME}** 作為容器名稱。</span><span class="sxs-lookup"><span data-stu-id="3f034-165">(The container will be created if it does not already exist when the build artifacts are uploaded.) You can use environment variables, so for this example enter **${JOB_NAME}** as the container name.</span></span>
   
    <span data-ttu-id="3f034-166">**秘訣**</span><span class="sxs-lookup"><span data-stu-id="3f034-166">**Tip**</span></span>
   
    <span data-ttu-id="3f034-167">在您為 [執行 Windows 批次命令] 輸入指令碼的 [命令] 區段底下有一個 Jenkins 所辨識環境變數的連結。</span><span class="sxs-lookup"><span data-stu-id="3f034-167">Below the **Command** section where you entered a script for **Execute Windows batch command** is a link to the environment variables recognized by Jenkins.</span></span> <span data-ttu-id="3f034-168">按一下該連結即可了解各環境變數名稱和描述。</span><span class="sxs-lookup"><span data-stu-id="3f034-168">Click that link to learn the environment variable names and descriptions.</span></span> <span data-ttu-id="3f034-169">請注意，含有特殊字元的環境變數 (例如 **BUILD_URL** 環境變數) 不能當做容器名稱或共同虛擬路徑。</span><span class="sxs-lookup"><span data-stu-id="3f034-169">Note that environment variables that contain special characters, such as the **BUILD_URL** environment variable, are not allowed as a container name or common virtual path.</span></span>
8. <span data-ttu-id="3f034-170">在此範例中，請按一下 [Make new container public by default]。</span><span class="sxs-lookup"><span data-stu-id="3f034-170">Click **Make new container public by default** for this example.</span></span> <span data-ttu-id="3f034-171">(如果您想要使用私用容器，則需要建立共用存取簽章來允許存取。</span><span class="sxs-lookup"><span data-stu-id="3f034-171">(If you want to use a private container, you'll need to create a shared access signature to allow access.</span></span> <span data-ttu-id="3f034-172">這已超出本主題的範圍。</span><span class="sxs-lookup"><span data-stu-id="3f034-172">That is beyond the scope of this topic.</span></span> <span data-ttu-id="3f034-173">若要深入了解共用存取簽章，請參閱[使用共用存取簽章 (SAS)](storage-dotnet-shared-access-signature-part-1.md)。)</span><span class="sxs-lookup"><span data-stu-id="3f034-173">You can learn more about shared access signatures at [Using Shared Access Signatures (SAS)](storage-dotnet-shared-access-signature-part-1.md).)</span></span>
9. <span data-ttu-id="3f034-174">[選擇性] 如果您要在上傳組建成品之前清除容器的內容，請按一下 **Clean container before uploading** \(若不想清除容器的內容，請維持不核取)。</span><span class="sxs-lookup"><span data-stu-id="3f034-174">[Optional] Click **Clean container before uploading** if you want the container to be cleared of contents before build artifacts are uploaded (leave it unchecked if you do not want to clean the contents of the container).</span></span>
10. <span data-ttu-id="3f034-175">在 [List of Artifacts to upload]，輸入 **text/*.txt**。</span><span class="sxs-lookup"><span data-stu-id="3f034-175">For **List of Artifacts to upload**, enter **text/*.txt**.</span></span>
11. <span data-ttu-id="3f034-176">在 [上傳構件的常用虛擬路徑] 中，基於本教學課程的目的，輸入 **${BUILD\_ID}/${BUILD\_NUMBER}**。</span><span class="sxs-lookup"><span data-stu-id="3f034-176">For **Common virtual path for uploaded artifacts**, for purposes of this tutorial, enter **${BUILD\_ID}/${BUILD\_NUMBER}**.</span></span>
12. <span data-ttu-id="3f034-177">按一下 [Save]  儲存您的設定。</span><span class="sxs-lookup"><span data-stu-id="3f034-177">Click **Save** to save your settings.</span></span>
13. <span data-ttu-id="3f034-178">在 Jenkins 儀表板中，按一下 [立即建置] 執行 **MyJob**。</span><span class="sxs-lookup"><span data-stu-id="3f034-178">In the Jenkins dashboard, click **Build Now** to run **MyJob**.</span></span> <span data-ttu-id="3f034-179">檢查主控台輸出中的狀態。</span><span class="sxs-lookup"><span data-stu-id="3f034-179">Examine the console output for status.</span></span> <span data-ttu-id="3f034-180">當建置後動作開始上傳組建成品時，主控台輸出中將會包含 Azure 儲存體的狀態訊息。</span><span class="sxs-lookup"><span data-stu-id="3f034-180">Status messages for Azure storage will be included in the console output when the post-build action starts to upload build artifacts.</span></span>
14. <span data-ttu-id="3f034-181">順利完成作業時，您就可以開啟公用 Blob 來檢查組建成品。</span><span class="sxs-lookup"><span data-stu-id="3f034-181">Upon successful completion of the job, you can examine the build artifacts by opening the public blob.</span></span>
    1. <span data-ttu-id="3f034-182">登入 [Azure 入口網站](https://portal.azure.com)。</span><span class="sxs-lookup"><span data-stu-id="3f034-182">Login to the [Azure Portal](https://portal.azure.com).</span></span>
    2. <span data-ttu-id="3f034-183">按一下 [儲存體] 。</span><span class="sxs-lookup"><span data-stu-id="3f034-183">Click **Storage**.</span></span>
    3. <span data-ttu-id="3f034-184">按一下用於 Jenkins 的儲存體帳戶名稱。</span><span class="sxs-lookup"><span data-stu-id="3f034-184">Click the storage account name that you used for Jenkins.</span></span>
    4. <span data-ttu-id="3f034-185">按一下 [容器] 。</span><span class="sxs-lookup"><span data-stu-id="3f034-185">Click **Containers**.</span></span>
    5. <span data-ttu-id="3f034-186">按一下名為 **myjob**的容器，這是您建立 Jenkins 工作時所指派之工作名稱的小寫版本。</span><span class="sxs-lookup"><span data-stu-id="3f034-186">Click the container named **myjob**, which is the lowercase version of the job name that you assigned when you created the Jenkins job.</span></span> <span data-ttu-id="3f034-187">在 Azure 儲存體中，容器名稱和 Blob 名稱皆為小寫 (並且區分大小寫)。</span><span class="sxs-lookup"><span data-stu-id="3f034-187">Container names and blob names are lowercase (and case-sensitive) in Azure storage.</span></span> <span data-ttu-id="3f034-188">在名為 **myjob** 之容器的 Blob 清單中，您應該會看到 **hello.txt** 和 **date.txt**。</span><span class="sxs-lookup"><span data-stu-id="3f034-188">Within the list of blobs for the container named **myjob** you should see **hello.txt** and **date.txt**.</span></span> <span data-ttu-id="3f034-189">請複製這些項目中任何一項的 URL，然後在瀏覽器中開啟它。</span><span class="sxs-lookup"><span data-stu-id="3f034-189">Copy the URL for either of these items and open it in your browser.</span></span> <span data-ttu-id="3f034-190">您會看到文字檔已上傳作為組建成品。</span><span class="sxs-lookup"><span data-stu-id="3f034-190">You will see the text file that was uploaded as a build artifact.</span></span>

<span data-ttu-id="3f034-191">每一工作只能建立一個將成品上傳至 Azure Blob 儲存體的建置後動作。</span><span class="sxs-lookup"><span data-stu-id="3f034-191">Only one post-build action that uploads artifacts to Azure blob storage can be created per job.</span></span> <span data-ttu-id="3f034-192">請注意，將成品上傳至 Azure Blob 儲存體的單一建置後動作可以在 [要上傳的構件清單] 內，使用分號作為分隔符號來指定不同的檔案 (包含萬用字元) 和檔案路徑。</span><span class="sxs-lookup"><span data-stu-id="3f034-192">Note that the single post-build action to upload artifacts to Azure blob storage can specify different files (including wildcards) and paths to files within **List of Artifacts to upload** using a semi-colon as a separator.</span></span> <span data-ttu-id="3f034-193">例如，若 Jenkins 組建在您工作區的 **build** 資料夾中產生 JAR 檔和 TXT 檔，且您想將兩者都上傳至 Azure Blob 儲存體，請在 [要上傳的構件清單] 中使用下列值：build/.jar;build/.txt**\*\***。</span><span class="sxs-lookup"><span data-stu-id="3f034-193">For example, if your Jenkins build produces JAR files and TXT files in your workspace's **build** folder, and you want to upload both to Azure blob storage, use the following for the **List of Artifacts to upload** value: **build/\*.jar;build/\*.txt**.</span></span> <span data-ttu-id="3f034-194">您也可以使用雙冒號語法來指定要在 Blob 名稱內使用的路徑。</span><span class="sxs-lookup"><span data-stu-id="3f034-194">You can also use double-colon syntax to specify a path to use within the blob name.</span></span> <span data-ttu-id="3f034-195">例如，若您想要在 Blob 路徑中使用 **binaries** 上傳 JAR，並在 Blob 路徑中使用 **notices** 上傳 TXT，請在 [List of Artifacts to upload] 中使用下列值：**build/\*.jar::binaries;build/\*.txt::notices**。</span><span class="sxs-lookup"><span data-stu-id="3f034-195">For example, if you want the JARs to get uploaded using **binaries** in the blob path and the TXT files to get uploaded using **notices** in the blob path, use the following for the **List of Artifacts to upload** value: **build/\*.jar::binaries;build/\*.txt::notices**.</span></span>

## <a name="how-to-create-a-build-step-that-downloads-from-azure-blob-storage"></a><span data-ttu-id="3f034-196">如何建立從 Azure Blob 儲存體下載的組建步驟</span><span class="sxs-lookup"><span data-stu-id="3f034-196">How to create a build step that downloads from Azure blob storage</span></span>
<span data-ttu-id="3f034-197">下列步驟示範如何設定從 Azure Blob 儲存體下載項目的組建步驟。</span><span class="sxs-lookup"><span data-stu-id="3f034-197">The following steps show how to configure a build step to download items from Azure blob storage.</span></span> <span data-ttu-id="3f034-198">如果您要在組建中加入項目，例如您存放在 Azure Blob 儲存體中的 JAR，則這會很有用。</span><span class="sxs-lookup"><span data-stu-id="3f034-198">This would be useful if you want to include items in your build, for example, JARs that you keep in Azure blob storage.</span></span>

1. <span data-ttu-id="3f034-199">在工作組態的 [Build] 區段中，按一下 [Add build step]，並選擇 [Download from Azure Blob storage]。</span><span class="sxs-lookup"><span data-stu-id="3f034-199">In the **Build** section of the job configuration, click **Add build step** and choose **Download from Azure Blob storage**.</span></span>
2. <span data-ttu-id="3f034-200">在 [儲存體帳戶名稱] 中，選取要使用的儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="3f034-200">For **Storage account name**, select the storage account to use.</span></span>
3. <span data-ttu-id="3f034-201">在 [容器名稱] 中，指定您要下載的 Blob 所在之容器的名稱。</span><span class="sxs-lookup"><span data-stu-id="3f034-201">For **Container name**, specify the name of the container that has the blobs you want to download.</span></span> <span data-ttu-id="3f034-202">您可以使用環境變數。</span><span class="sxs-lookup"><span data-stu-id="3f034-202">You can use environment variables.</span></span>
4. <span data-ttu-id="3f034-203">在 [Blob 名稱] 中，指定 Blob 名稱。</span><span class="sxs-lookup"><span data-stu-id="3f034-203">For **Blob name**, specify the blob name.</span></span> <span data-ttu-id="3f034-204">您可以使用環境變數。</span><span class="sxs-lookup"><span data-stu-id="3f034-204">You can use environment variables.</span></span> <span data-ttu-id="3f034-205">另外，您也可以在指定 Blob 名稱的開頭字母之後，使用星號作為萬用字元。</span><span class="sxs-lookup"><span data-stu-id="3f034-205">Also, you can use an asterisk, as a wildcard after you specify the initial letter(s) of the blob name.</span></span> <span data-ttu-id="3f034-206">例如，**project\*** 指定名稱開頭為 **project** 的所有 Blob。</span><span class="sxs-lookup"><span data-stu-id="3f034-206">For example, **project\*** would specify all blobs whose names start with **project**.</span></span>
5. <span data-ttu-id="3f034-207">[選擇性] 在 [下載路徑] 中，指定在 Jenkins 機器上您要從 Azure Blob 儲存體下載檔案的路徑。</span><span class="sxs-lookup"><span data-stu-id="3f034-207">[Optional] For **Download path**, specify the path on the Jenkins machine where you want to download files from Azure blob storage.</span></span> <span data-ttu-id="3f034-208">也可以使用環境變數</span><span class="sxs-lookup"><span data-stu-id="3f034-208">Environment variables can also be used.</span></span> <span data-ttu-id="3f034-209">(如果您未提供 [下載路徑] 的值，則 Azure Blob 儲存體中的檔案會下載至工作的工作區。)</span><span class="sxs-lookup"><span data-stu-id="3f034-209">(If you do not provide a value for **Download path**, the files from Azure blob storage will be downloaded to the job's workspace.)</span></span>

<span data-ttu-id="3f034-210">如果您還有其他項目要從 Azure Blob 儲存體下載，您可以建立其他組建步驟。</span><span class="sxs-lookup"><span data-stu-id="3f034-210">If you have additional items you want to download from Azure blob storage, you can create additional build steps.</span></span>

<span data-ttu-id="3f034-211">執行組建之後，您可以檢查組建記錄主控台輸出，或查看下載位置，了解是否已成功下載您想要的 Blob。</span><span class="sxs-lookup"><span data-stu-id="3f034-211">After you run a build, you can check the build history console output, or look at your download location, to see whether the blobs you expected were successfully downloaded.</span></span>  

## <a name="components-used-by-the-blob-service"></a><span data-ttu-id="3f034-212">Blob 服務所使用的元件</span><span class="sxs-lookup"><span data-stu-id="3f034-212">Components used by the Blob service</span></span>
<span data-ttu-id="3f034-213">以下提供 Blob 服務元件的概觀。</span><span class="sxs-lookup"><span data-stu-id="3f034-213">The following provides an overview of the Blob service components.</span></span>

* <span data-ttu-id="3f034-214">**儲存體帳戶**：一律透過儲存體帳戶來存取 Azure 儲存體。</span><span class="sxs-lookup"><span data-stu-id="3f034-214">**Storage Account**: All access to Azure Storage is done through a storage account.</span></span> <span data-ttu-id="3f034-215">這是存取 blob 用的最高等級的命名空間。</span><span class="sxs-lookup"><span data-stu-id="3f034-215">This is the highest level of the namespace for accessing blobs.</span></span> <span data-ttu-id="3f034-216">帳戶可以包含不限數目的容器，只要它們的大小總計低於 100TB 即可。</span><span class="sxs-lookup"><span data-stu-id="3f034-216">An account can contain an unlimited number of containers, as long as their total size is under 100TB.</span></span>
* <span data-ttu-id="3f034-217">**容器**：容器提供一組 Blob 的群組。</span><span class="sxs-lookup"><span data-stu-id="3f034-217">**Container**: A container provides a grouping of a set of blobs.</span></span> <span data-ttu-id="3f034-218">所有 Blob 都必須放在容器中。</span><span class="sxs-lookup"><span data-stu-id="3f034-218">All blobs must be in a container.</span></span> <span data-ttu-id="3f034-219">一個帳戶可以包含的容器不限數量。</span><span class="sxs-lookup"><span data-stu-id="3f034-219">An account can contain an unlimited number of containers.</span></span> <span data-ttu-id="3f034-220">容器可以儲存無限制的 Blob。</span><span class="sxs-lookup"><span data-stu-id="3f034-220">A container can store an unlimited number of blobs.</span></span>
* <span data-ttu-id="3f034-221">**Blob**：任何類型和大小的檔案。</span><span class="sxs-lookup"><span data-stu-id="3f034-221">**Blob**: A file of any type and size.</span></span> <span data-ttu-id="3f034-222">Azure 儲存中可以儲存兩種 Blob：區塊 Blob 和分頁 Blob。</span><span class="sxs-lookup"><span data-stu-id="3f034-222">There are two types of blobs that can be stored in Azure Storage: block and page blobs.</span></span> <span data-ttu-id="3f034-223">大部分檔案都是區塊 Blob。</span><span class="sxs-lookup"><span data-stu-id="3f034-223">Most files are block blobs.</span></span> <span data-ttu-id="3f034-224">單一區塊 Blob 的大小上限為 200GB。</span><span class="sxs-lookup"><span data-stu-id="3f034-224">A single block blob can be up to 200GB in size.</span></span> <span data-ttu-id="3f034-225">本教學課程使用區塊 Blob。</span><span class="sxs-lookup"><span data-stu-id="3f034-225">This tutorial uses block blobs.</span></span> <span data-ttu-id="3f034-226">分頁 Blob (另一種 Blob 類型) 的大小上限為 1TB，當檔案中的位元組範圍經常修改時，分頁 Blob 的效率較高。</span><span class="sxs-lookup"><span data-stu-id="3f034-226">Page blobs, another blob type, can be up to 1TB in size, and are more efficient when ranges of bytes in a file are modified frequently.</span></span> <span data-ttu-id="3f034-227">如需關於 Blob 的詳細資訊，請參閱 [了解區塊 Blob、附加 Blob 及分頁 Blob](http://msdn.microsoft.com/library/azure/ee691964.aspx)。</span><span class="sxs-lookup"><span data-stu-id="3f034-227">For more information about blobs, see [Understanding Block Blobs, Append Blobs, and Page Blobs](http://msdn.microsoft.com/library/azure/ee691964.aspx).</span></span>
* <span data-ttu-id="3f034-228">**URL 格式**：可利用下列 URL 格式來定址 Blob：</span><span class="sxs-lookup"><span data-stu-id="3f034-228">**URL format**: Blobs are addressable using the following URL format:</span></span>
  
    `http://storageaccount.blob.core.windows.net/container_name/blob_name`
  
    <span data-ttu-id="3f034-229">(上述格式適用於公用 Azure 雲端。</span><span class="sxs-lookup"><span data-stu-id="3f034-229">(The format above applies to the public Azure cloud.</span></span> <span data-ttu-id="3f034-230">如果您使用其他 Azure 雲端，請使用 [Azure 入口網站](https://portal.azure.com)中的端點來判斷您的 URL 端點。)</span><span class="sxs-lookup"><span data-stu-id="3f034-230">If you are using a different Azure cloud, use the endpoint within the [Azure Portal](https://portal.azure.com) to determine your URL endpoint.)</span></span>
  
    <span data-ttu-id="3f034-231">在上述格式中，`storageaccount` 代表您的儲存體帳戶名稱，`container_name` 代表您的容器名稱，而 `blob_name` 代表您的 Blob 名稱。</span><span class="sxs-lookup"><span data-stu-id="3f034-231">In the format above, `storageaccount` represents the name of your storage account, `container_name` represents the name of your container, and `blob_name` represents the name of your blob, respectively.</span></span> <span data-ttu-id="3f034-232">容器名稱中可以有多個路徑，這些路徑彼此以正斜線 **/**(英文)。</span><span class="sxs-lookup"><span data-stu-id="3f034-232">Within the container name, you can have multiple paths, separated by a forward slash, **/**.</span></span> <span data-ttu-id="3f034-233">本教學課程中的範例容器名稱為 **MyJob**，使用的共同虛擬路徑則是 **${BUILD\_ID}/${BUILD\_NUMBER}**，產生的 Blob URL 格式如下：</span><span class="sxs-lookup"><span data-stu-id="3f034-233">The example container name in this tutorial was **MyJob**, and **${BUILD\_ID}/${BUILD\_NUMBER}** was used for the common virtual path, resulting in the blob having a URL of the following form:</span></span>
  
    `http://example.blob.core.windows.net/myjob/2014-04-14_23-57-00/1/hello.txt`

## <a name="next-steps"></a><span data-ttu-id="3f034-234">後續步驟</span><span class="sxs-lookup"><span data-stu-id="3f034-234">Next steps</span></span>
* [<span data-ttu-id="3f034-235">認識 Jenkins</span><span class="sxs-lookup"><span data-stu-id="3f034-235">Meet Jenkins</span></span>](https://wiki.jenkins-ci.org/display/JENKINS/Meet+Jenkins)
* [<span data-ttu-id="3f034-236">Azure Storage SDK for Java</span><span class="sxs-lookup"><span data-stu-id="3f034-236">Azure Storage SDK for Java</span></span>](https://github.com/azure/azure-storage-java)
* [<span data-ttu-id="3f034-237">Azure 儲存體用戶端 SDK 參考</span><span class="sxs-lookup"><span data-stu-id="3f034-237">Azure Storage Client SDK Reference</span></span>](http://dl.windowsazure.com/storage/javadoc/)
* [<span data-ttu-id="3f034-238">Azure 儲存體服務 REST API</span><span class="sxs-lookup"><span data-stu-id="3f034-238">Azure Storage Services REST API</span></span>](https://msdn.microsoft.com/library/azure/dd179355.aspx)
* [<span data-ttu-id="3f034-239">Azure 儲存體團隊部落格</span><span class="sxs-lookup"><span data-stu-id="3f034-239">Azure Storage Team Blog</span></span>](http://blogs.msdn.com/b/windowsazurestorage/)

<span data-ttu-id="3f034-240">如需詳細資訊，另請參閱 [Java 開發人員中心](https://azure.microsoft.com/develop/java/)。</span><span class="sxs-lookup"><span data-stu-id="3f034-240">For more information, also see the [Java Developer Center](https://azure.microsoft.com/develop/java/).</span></span>