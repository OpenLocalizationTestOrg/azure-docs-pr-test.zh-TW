---
title: "使用 Azure 儲存體分析收集記錄檔和計量資料 | Microsoft Docs"
description: "儲存體分析可讓您追蹤所有儲存體服務的度量資料，以及收集 Blob、佇列和資料表儲存體的記錄檔。"
services: storage
documentationcenter: 
author: robinsh
manager: timlt
editor: tysonn
ms.assetid: 7894993b-ca42-4125-8f17-8f6dfe3dca76
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 03/03/2017
ms.author: robinsh
ms.openlocfilehash: a477c1eaf2388f31d4fd36b90f9a830c782873d3
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/29/2017
---
# <a name="storage-analytics"></a><span data-ttu-id="5e4c8-103">儲存體分析</span><span class="sxs-lookup"><span data-stu-id="5e4c8-103">Storage Analytics</span></span>

<span data-ttu-id="5e4c8-104">Azure 儲存體分析會執行記錄，並提供儲存體帳戶的度量資料。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-104">Azure Storage Analytics performs logging and provides metrics data for a storage account.</span></span> <span data-ttu-id="5e4c8-105">您可以使用此資料來追蹤要求、分析使用量趨勢，以及診斷儲存體帳戶的問題。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-105">You can use this data to trace requests, analyze usage trends, and diagnose issues with your storage account.</span></span>

<span data-ttu-id="5e4c8-106">若要使用儲存體分析，您必須針對想要監視的每個服務個別啟用它。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-106">To use Storage Analytics, you must enable it individually for each service you want to monitor.</span></span> <span data-ttu-id="5e4c8-107">您可以從 [Azure 入口網站](https://portal.azure.com)加以啟用。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-107">You can enable it from the [Azure Portal](https://portal.azure.com).</span></span> <span data-ttu-id="5e4c8-108">如需詳細資訊，請參閱 [在 Azure 入口網站中監視儲存體帳戶](storage-monitor-storage-account.md)。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-108">For details, see [Monitor a storage account in the Azure Portal](storage-monitor-storage-account.md).</span></span> <span data-ttu-id="5e4c8-109">您也可以利用程式設計方式，透過 REST API 或用戶端程式庫來啟用儲存體分析。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-109">You can also enable Storage Analytics programmatically via the REST API or the client library.</span></span> <span data-ttu-id="5e4c8-110">針對每個服務，使用[取得 Blob 服務屬性](https://msdn.microsoft.com/library/hh452239.aspx)、[取得佇列服務屬性](https://msdn.microsoft.com/library/hh452243.aspx)、[取得表格服務屬性](https://msdn.microsoft.com/library/hh452238.aspx)，以及[取得檔案服務屬性](https://msdn.microsoft.com/library/mt427369.aspx)作業來啟用儲存體分析。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-110">Use the [Get Blob Service Properties](https://msdn.microsoft.com/library/hh452239.aspx), [Get Queue Service Properties](https://msdn.microsoft.com/library/hh452243.aspx), [Get Table Service Properties](https://msdn.microsoft.com/library/hh452238.aspx), and [Get File Service Properties](https://msdn.microsoft.com/library/mt427369.aspx) operations to enable Storage Analytics for each service.</span></span>

<span data-ttu-id="5e4c8-111">彙總的資料會儲存於已知的 Blob (用於記錄) 和已知的資料表 (用於度量) 中，您可以使用 Blob 服務和資料表服務 API 來存取。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-111">The aggregated data is stored in a well-known blob (for logging) and in well-known tables (for metrics), which may be accessed using the Blob service and Table service APIs.</span></span>

<span data-ttu-id="5e4c8-112">儲存體分析在儲存的資料量上有 20 TB 的限制，但此限制與儲存體帳戶的總限制無關。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-112">Storage Analytics has a 20 TB limit on the amount of stored data that is independent of the total limit for your storage account.</span></span> <span data-ttu-id="5e4c8-113">如需計費和資料保留原則的詳細資訊，請參閱 [儲存體分析和計費](https://msdn.microsoft.com/library/hh360997.aspx)。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-113">For more information about billing and data retention policies, see [Storage Analytics and Billing](https://msdn.microsoft.com/library/hh360997.aspx).</span></span> <span data-ttu-id="5e4c8-114">如需儲存體帳戶限制的詳細資訊，請參閱 [Azure 儲存體延展性和效能目標](storage-scalability-targets.md)。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-114">For more information about storage account limits, see [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md).</span></span>

<span data-ttu-id="5e4c8-115">如需使用儲存體分析和其他工具來識別、診斷及疑難排解 Azure 儲存體相關問題的深入指南，請參閱 [監視、診斷及疑難排解 Microsoft Azure 儲存體](storage-monitoring-diagnosing-troubleshooting.md)。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-115">For an in-depth guide on using Storage Analytics and other tools to identify, diagnose, and troubleshoot Azure Storage-related issues, see [Monitor, diagnose, and troubleshoot Microsoft Azure Storage](storage-monitoring-diagnosing-troubleshooting.md).</span></span>

## <a name="about-storage-analytics-logging"></a><span data-ttu-id="5e4c8-116">關於儲存體分析記錄</span><span class="sxs-lookup"><span data-stu-id="5e4c8-116">About Storage Analytics logging</span></span>
<span data-ttu-id="5e4c8-117">儲存體分析會記錄對儲存體服務之成功和失敗要求的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-117">Storage Analytics logs detailed information about successful and failed requests to a storage service.</span></span> <span data-ttu-id="5e4c8-118">這項資訊可用來監視個別要求，並診斷儲存體服務的問題。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-118">This information can be used to monitor individual requests and to diagnose issues with a storage service.</span></span> <span data-ttu-id="5e4c8-119">系統會以最佳方式來記錄要求。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-119">Requests are logged on a best-effort basis.</span></span>

<span data-ttu-id="5e4c8-120">只有在發生儲存體服務活動時，才會建立記錄檔項目。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-120">Log entries are created only if there is storage service activity.</span></span> <span data-ttu-id="5e4c8-121">例如，如果儲存體帳戶在其 Blob 服務中有活動，而不是在其資料表或佇列服務中，則只會建立關於 Blob 服務的記錄檔。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-121">For example, if a storage account has activity in its Blob service but not in its Table or Queue services, only logs pertaining to the Blob service will be created.</span></span>

<span data-ttu-id="5e4c8-122">儲存體分析記錄不適用於 Azure 檔案儲存體。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-122">Storage Analytics Logging is not available for Azure File storage.</span></span>

### <a name="logging-authenticated-requests"></a><span data-ttu-id="5e4c8-123">記錄驗證要求</span><span class="sxs-lookup"><span data-stu-id="5e4c8-123">Logging authenticated requests</span></span>
<span data-ttu-id="5e4c8-124">系統將記錄下列類型的驗證要求：</span><span class="sxs-lookup"><span data-stu-id="5e4c8-124">The following types of authenticated requests are logged:</span></span>

* <span data-ttu-id="5e4c8-125">成功的要求。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-125">Successful requests.</span></span>
* <span data-ttu-id="5e4c8-126">失敗的要求，包括逾時、節流、網路、授權和其他錯誤。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-126">Failed requests, including timeout, throttling, network, authorization, and other errors.</span></span>
* <span data-ttu-id="5e4c8-127">使用共用存取簽章 (SAS) 的要求，包括失敗和成功的要求。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-127">Requests using a Shared Access Signature (SAS), including failed and successful requests.</span></span>
* <span data-ttu-id="5e4c8-128">分析資料的要求。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-128">Requests to analytics data.</span></span>

<span data-ttu-id="5e4c8-129">系統不會記錄儲存體分析本身所提出的要求 (例如，記錄檔的建立或刪除)。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-129">Requests made by Storage Analytics itself, such as log creation or deletion, are not logged.</span></span> <span data-ttu-id="5e4c8-130">記錄資料的完整清單記錄於[儲存體分析記錄作業和狀態訊息](https://msdn.microsoft.com/library/hh343260.aspx)及[儲存體分析記錄檔格式](https://msdn.microsoft.com/library/hh343259.aspx)主題中。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-130">A full list of the logged data is documented in the [Storage Analytics Logged Operations and Status Messages](https://msdn.microsoft.com/library/hh343260.aspx) and [Storage Analytics Log Format](https://msdn.microsoft.com/library/hh343259.aspx) topics.</span></span>

### <a name="logging-anonymous-requests"></a><span data-ttu-id="5e4c8-131">記錄匿名要求</span><span class="sxs-lookup"><span data-stu-id="5e4c8-131">Logging anonymous requests</span></span>
<span data-ttu-id="5e4c8-132">系統將記錄下列類型的匿名要求：</span><span class="sxs-lookup"><span data-stu-id="5e4c8-132">The following types of anonymous requests are logged:</span></span>

* <span data-ttu-id="5e4c8-133">成功的要求。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-133">Successful requests.</span></span>
* <span data-ttu-id="5e4c8-134">伺服器錯誤。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-134">Server errors.</span></span>
* <span data-ttu-id="5e4c8-135">用戶端與伺服器的逾時錯誤。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-135">Timeout errors for both client and server.</span></span>
* <span data-ttu-id="5e4c8-136">失敗的 GET 要求，錯誤碼為 304 (未修改)。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-136">Failed GET requests with error code 304 (Not Modified).</span></span>

<span data-ttu-id="5e4c8-137">系統不會記錄所有其他失敗的匿名要求。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-137">All other failed anonymous requests are not logged.</span></span> <span data-ttu-id="5e4c8-138">記錄資料的完整清單記錄於[儲存體分析記錄作業和狀態訊息](https://msdn.microsoft.com/library/hh343260.aspx)及[儲存體分析記錄檔格式](https://msdn.microsoft.com/library/hh343259.aspx)主題中。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-138">A full list of the logged data is documented in the [Storage Analytics Logged Operations and Status Messages](https://msdn.microsoft.com/library/hh343260.aspx) and [Storage Analytics Log Format](https://msdn.microsoft.com/library/hh343259.aspx) topics.</span></span>

### <a name="how-logs-are-stored"></a><span data-ttu-id="5e4c8-139">記錄檔的儲存方式</span><span class="sxs-lookup"><span data-stu-id="5e4c8-139">How logs are stored</span></span>
<span data-ttu-id="5e4c8-140">所有記錄檔都會儲存在名為 $logs 的容器內的區塊 Blob 中，該容器是在針對儲存體帳戶啟用儲存體分析時自動建立的。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-140">All logs are stored in block blobs in a container named $logs, which is automatically created when Storage Analytics is enabled for a storage account.</span></span> <span data-ttu-id="5e4c8-141">$logs 容器位於儲存體帳戶的 Blob 命名空間中，例如： `http://<accountname>.blob.core.windows.net/$logs`。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-141">The $logs container is located in the blob namespace of the storage account, for example: `http://<accountname>.blob.core.windows.net/$logs`.</span></span> <span data-ttu-id="5e4c8-142">一旦啟用儲存體分析之後便無法刪除此容器，不過您可以刪除其內容。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-142">This container cannot be deleted once Storage Analytics has been enabled, though its contents can be deleted.</span></span>

> [!NOTE]
> <span data-ttu-id="5e4c8-143">$logs 容器不會在執行容器列示作業時顯示，例如 [ListContainers](https://msdn.microsoft.com/library/azure/dd179352.aspx) 方法。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-143">The $logs container is not displayed when a container listing operation is performed, such as the [ListContainers](https://msdn.microsoft.com/library/azure/dd179352.aspx) method.</span></span> <span data-ttu-id="5e4c8-144">您必須直接存取它。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-144">It must be accessed directly.</span></span> <span data-ttu-id="5e4c8-145">例如，您可以使用 [ListBlobs](https://msdn.microsoft.com/library/azure/dd135734.aspx) 方法來存取 `$logs` 容器中的 Blob。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-145">For example, you can use the [ListBlobs](https://msdn.microsoft.com/library/azure/dd135734.aspx) method to access the blobs in the `$logs` container.</span></span>
> <span data-ttu-id="5e4c8-146">記錄要求時，儲存體分析將會以區塊形式上傳中繼結果。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-146">As requests are logged, Storage Analytics will upload intermediate results as blocks.</span></span> <span data-ttu-id="5e4c8-147">儲存體分析會定期認可這些區塊，並提供它們做為 Blob。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-147">Periodically, Storage Analytics will commit these blocks and make them available as a blob.</span></span>
> 
> 

<span data-ttu-id="5e4c8-148">在同一個小時內建立的記錄檔可能會有重複的記錄。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-148">Duplicate records may exist for logs created in the same hour.</span></span> <span data-ttu-id="5e4c8-149">您可以藉由檢查 **RequestId** 和 **Operation** 數字來判斷記錄是否重複。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-149">You can determine if a record is a duplicate by checking the **RequestId** and **Operation** number.</span></span>

### <a name="log-naming-conventions"></a><span data-ttu-id="5e4c8-150">記錄檔命名慣例</span><span class="sxs-lookup"><span data-stu-id="5e4c8-150">Log naming conventions</span></span>
<span data-ttu-id="5e4c8-151">每個記錄檔的寫入格式如下。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-151">Each log will be written in the following format.</span></span>

    <service-name>/YYYY/MM/DD/hhmm/<counter>.log

<span data-ttu-id="5e4c8-152">下表描述記錄檔名稱中的每個屬性。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-152">The following table describes each attribute in the log name.</span></span>

| <span data-ttu-id="5e4c8-153">屬性</span><span class="sxs-lookup"><span data-stu-id="5e4c8-153">Attribute</span></span> | <span data-ttu-id="5e4c8-154">說明</span><span class="sxs-lookup"><span data-stu-id="5e4c8-154">Description</span></span> |
| --- | --- |
| <span data-ttu-id="5e4c8-155"><service-name></span><span class="sxs-lookup"><span data-stu-id="5e4c8-155"><service-name></span></span> |<span data-ttu-id="5e4c8-156">儲存體服務的名稱。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-156">The name of the storage service.</span></span> <span data-ttu-id="5e4c8-157">例如：Blob、資料表或佇列。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-157">For example: blob, table, or queue.</span></span> |
| <span data-ttu-id="5e4c8-158">YYYY</span><span class="sxs-lookup"><span data-stu-id="5e4c8-158">YYYY</span></span> |<span data-ttu-id="5e4c8-159">適用於記錄檔的四位數年份。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-159">The four-digit year for the log.</span></span> <span data-ttu-id="5e4c8-160">例如：2011。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-160">For example: 2011.</span></span> |
| <span data-ttu-id="5e4c8-161">MM</span><span class="sxs-lookup"><span data-stu-id="5e4c8-161">MM</span></span> |<span data-ttu-id="5e4c8-162">適用於記錄檔的二位數月份。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-162">The two-digit month for the log.</span></span> <span data-ttu-id="5e4c8-163">例如：07。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-163">For example: 07.</span></span> |
| <span data-ttu-id="5e4c8-164">DD</span><span class="sxs-lookup"><span data-stu-id="5e4c8-164">DD</span></span> |<span data-ttu-id="5e4c8-165">適用於記錄檔的二位數月份。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-165">The two-digit month for the log.</span></span> <span data-ttu-id="5e4c8-166">例如：07。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-166">For example: 07.</span></span> |
| <span data-ttu-id="5e4c8-167">hh</span><span class="sxs-lookup"><span data-stu-id="5e4c8-167">hh</span></span> |<span data-ttu-id="5e4c8-168">24 小時制 UTC 格式的二位數小時，表示記錄檔的開始小時</span><span class="sxs-lookup"><span data-stu-id="5e4c8-168">The two-digit hour that indicates the starting hour for the logs, in 24-hour UTC format.</span></span> <span data-ttu-id="5e4c8-169">例如：18。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-169">For example: 18.</span></span> |
| <span data-ttu-id="5e4c8-170">mm</span><span class="sxs-lookup"><span data-stu-id="5e4c8-170">mm</span></span> |<span data-ttu-id="5e4c8-171">表示記錄檔之開始分鐘的二位數字。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-171">The two-digit number that indicates the starting minute for the logs.</span></span> <span data-ttu-id="5e4c8-172">目前的儲存體分析版本中不支援此值，其值一律為 00。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-172">This value is unsupported in the current version of Storage Analytics, and its value will always be 00.</span></span> |
| <counter> |<span data-ttu-id="5e4c8-173">以零起始的六位數計數器，表示在一小時內針對儲存體服務產生的記錄檔 Blob 數目。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-173">A zero-based counter with six digits that indicates the number of log blobs generated for the storage service in an hour time period.</span></span> <span data-ttu-id="5e4c8-174">此計數器會從 000000 開始。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-174">This counter starts at 000000.</span></span> <span data-ttu-id="5e4c8-175">例如：000001。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-175">For example: 000001.</span></span> |

<span data-ttu-id="5e4c8-176">以下是結合上述範例的完整記錄檔名稱範例。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-176">The following is a complete sample log name that combines the previous examples.</span></span>

    blob/2011/07/31/1800/000001.log

<span data-ttu-id="5e4c8-177">以下是可以用來存取上述記錄檔的 URI 範例。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-177">The following is a sample URI that can be used to access the previous log.</span></span>

    https://<accountname>.blob.core.windows.net/$logs/blob/2011/07/31/1800/000001.log

<span data-ttu-id="5e4c8-178">記錄儲存體要求時，產生的記錄檔名稱會與完成所要求之作業的小時相互關聯。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-178">When a storage request is logged, the resulting log name correlates to the hour when the requested operation completed.</span></span> <span data-ttu-id="5e4c8-179">例如，如果 GetBlob 要求已在</span><span class="sxs-lookup"><span data-stu-id="5e4c8-179">For example, if a GetBlob request was completed at 6:30 P.M.</span></span> <span data-ttu-id="5e4c8-180">2011 年 7 月 31 日下午 6:30 完成，則會使用下列前置詞寫入記錄檔︰`blob/2011/07/31/1800/`</span><span class="sxs-lookup"><span data-stu-id="5e4c8-180">on 7/31/2011, the log would be written with the following prefix: `blob/2011/07/31/1800/`</span></span>

### <a name="log-metadata"></a><span data-ttu-id="5e4c8-181">記錄中繼資料</span><span class="sxs-lookup"><span data-stu-id="5e4c8-181">Log metadata</span></span>
<span data-ttu-id="5e4c8-182">所有的記錄檔 Blob 都會與中繼資料一同儲存，可用來識別 Blob 包含哪些記錄資料。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-182">All log blobs are stored with metadata that can be used to identify what logging data the blob contains.</span></span> <span data-ttu-id="5e4c8-183">下表描述每個中繼資料屬性。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-183">The following table describes each metadata attribute.</span></span>

| <span data-ttu-id="5e4c8-184">屬性</span><span class="sxs-lookup"><span data-stu-id="5e4c8-184">Attribute</span></span> | <span data-ttu-id="5e4c8-185">說明</span><span class="sxs-lookup"><span data-stu-id="5e4c8-185">Description</span></span> |
| --- | --- |
| <span data-ttu-id="5e4c8-186">LogType</span><span class="sxs-lookup"><span data-stu-id="5e4c8-186">LogType</span></span> |<span data-ttu-id="5e4c8-187">描述記錄檔是否包含關於讀取、寫入或刪除作業的資訊。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-187">Describes whether the log contains information pertaining to read, write, or delete operations.</span></span> <span data-ttu-id="5e4c8-188">此值可包含一個類型或是所有這三種類型的組合 (以逗號分隔)。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-188">This value can include one type or a combination of all three, separated by commas.</span></span> <span data-ttu-id="5e4c8-189">範例 1：write；範例 2：read,write；範例 3：read,write,delete。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-189">Example 1: write; Example 2: read,write; Example 3: read,write,delete.</span></span> |
| <span data-ttu-id="5e4c8-190">StartTime</span><span class="sxs-lookup"><span data-stu-id="5e4c8-190">StartTime</span></span> |<span data-ttu-id="5e4c8-191">記錄檔中項目的最早時間，格式為 YYYY-MM-DDThh:mm:ssZ。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-191">The earliest time of an entry in the log, in the form of YYYY-MM-DDThh:mm:ssZ.</span></span> <span data-ttu-id="5e4c8-192">例如：2011-07-31T18:21:46Z。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-192">For example: 2011-07-31T18:21:46Z.</span></span> |
| <span data-ttu-id="5e4c8-193">EndTime</span><span class="sxs-lookup"><span data-stu-id="5e4c8-193">EndTime</span></span> |<span data-ttu-id="5e4c8-194">記錄檔中項目的最晚時間，格式為 YYYY-MM-DDThh:mm:ssZ。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-194">The latest time of an entry in the log, in the form of YYYY-MM-DDThh:mm:ssZ.</span></span> <span data-ttu-id="5e4c8-195">例如：2011-07-31T18:22:09Z。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-195">For example: 2011-07-31T18:22:09Z.</span></span> |
| <span data-ttu-id="5e4c8-196">LogVersion</span><span class="sxs-lookup"><span data-stu-id="5e4c8-196">LogVersion</span></span> |<span data-ttu-id="5e4c8-197">記錄檔格式的版本。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-197">The version of the log format.</span></span> <span data-ttu-id="5e4c8-198">目前唯一支援的值為 1.0。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-198">Currently the only supported value is 1.0.</span></span> |

<span data-ttu-id="5e4c8-199">下列清單顯示使用上述範例的完整中繼資料範例。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-199">The following list displays complete sample metadata using the previous examples.</span></span>

* <span data-ttu-id="5e4c8-200">LogType=write</span><span class="sxs-lookup"><span data-stu-id="5e4c8-200">LogType=write</span></span>
* <span data-ttu-id="5e4c8-201">StartTime=2011-07-31T18:21:46Z</span><span class="sxs-lookup"><span data-stu-id="5e4c8-201">StartTime=2011-07-31T18:21:46Z</span></span>
* <span data-ttu-id="5e4c8-202">EndTime=2011-07-31T18:22:09Z</span><span class="sxs-lookup"><span data-stu-id="5e4c8-202">EndTime=2011-07-31T18:22:09Z</span></span>
* <span data-ttu-id="5e4c8-203">LogVersion=1.0</span><span class="sxs-lookup"><span data-stu-id="5e4c8-203">LogVersion=1.0</span></span>

### <a name="accessing-logging-data"></a><span data-ttu-id="5e4c8-204">存取記錄資料</span><span class="sxs-lookup"><span data-stu-id="5e4c8-204">Accessing logging data</span></span>
<span data-ttu-id="5e4c8-205">`$logs` 容器中的所有資料都可以使用 Blob 服務 API 來存取，包括由 Azure 管理的程式庫所提供的 .NET API。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-205">All data in the `$logs` container can be accessed by using the Blob service APIs, including the .NET APIs provided by the Azure managed library.</span></span> <span data-ttu-id="5e4c8-206">儲存體帳戶管理員可以讀取和刪除記錄檔，但無法建立或更新它們。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-206">The storage account administrator can read and delete logs, but cannot create or update them.</span></span> <span data-ttu-id="5e4c8-207">查詢記錄檔時，可以使用記錄檔的中繼資料和記錄檔名稱。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-207">Both the log's metadata and log name can be used when querying for a log.</span></span> <span data-ttu-id="5e4c8-208">指定小時內的記錄檔可能不會按照順序出現，但是中繼資料一律會在記錄檔中指定記錄檔項目的時間範圍。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-208">It is possible for a given hour's logs to appear out of order, but the metadata always specifies the timespan of log entries in a log.</span></span> <span data-ttu-id="5e4c8-209">因此，您可以在搜尋特定記錄檔時使用記錄檔名稱和中繼資料的組合。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-209">Therefore, you can use a combination of log names and metadata when searching for a particular log.</span></span>

## <a name="about-storage-analytics-metrics"></a><span data-ttu-id="5e4c8-210">關於儲存體分析度量</span><span class="sxs-lookup"><span data-stu-id="5e4c8-210">About Storage Analytics metrics</span></span>
<span data-ttu-id="5e4c8-211">儲存體分析可以儲存包含與儲存體服務要求相關之彙總的交易統計資料及容量資料的度量。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-211">Storage Analytics can store metrics that include aggregated transaction statistics and capacity data about requests to a storage service.</span></span> <span data-ttu-id="5e4c8-212">報告的交易是屬於 API 作業層級以及儲存體服務層級，而報告的容量則是屬於儲存體服務層級。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-212">Transactions are reported at both the API operation level as well as at the storage service level, and capacity is reported at the storage service level.</span></span> <span data-ttu-id="5e4c8-213">度量資料可用來分析儲存體服務使用量、診斷針對儲存體服務提出之要求的問題，以及提升使用服務的應用程式效能。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-213">Metrics data can be used to analyze storage service usage, diagnose issues with requests made against the storage service, and to improve the performance of applications that use a service.</span></span>

<span data-ttu-id="5e4c8-214">若要使用儲存體分析，您必須針對想要監視的每個服務個別啟用它。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-214">To use Storage Analytics, you must enable it individually for each service you want to monitor.</span></span> <span data-ttu-id="5e4c8-215">您可以從 [Azure 入口網站](https://portal.azure.com)加以啟用。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-215">You can enable it from the [Azure Portal](https://portal.azure.com).</span></span> <span data-ttu-id="5e4c8-216">如需詳細資訊，請參閱 [在 Azure 入口網站中監視儲存體帳戶](storage-monitor-storage-account.md)。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-216">For details, see [Monitor a storage account in the Azure Portal](storage-monitor-storage-account.md).</span></span> <span data-ttu-id="5e4c8-217">您也可以利用程式設計方式，透過 REST API 或用戶端程式庫來啟用儲存體分析。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-217">You can also enable Storage Analytics programmatically via the REST API or the client library.</span></span> <span data-ttu-id="5e4c8-218">使用 [取得服務屬性]  作業，為各服務啟用儲存體分析。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-218">Use the **Get Service Properties** operations to enable Storage Analytics for each service.</span></span>

### <a name="transaction-metrics"></a><span data-ttu-id="5e4c8-219">交易度量</span><span class="sxs-lookup"><span data-stu-id="5e4c8-219">Transaction metrics</span></span>
<span data-ttu-id="5e4c8-220">系統會以每小時或每分鐘的時間間隔，為每個儲存體服務和要求的 API 作業記錄完善的資料集，其中包括輸入流量/輸出流量、可用性、錯誤，以及已分類的要求百分比。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-220">A robust set of data is recorded at hourly or minute intervals for each storage service and requested API operation, including ingress/egress, availability, errors, and categorized request percentages.</span></span> <span data-ttu-id="5e4c8-221">您可以在 [儲存體分析度量資料表結構描述](https://msdn.microsoft.com/library/hh343264.aspx) 主題中查看完整的交易詳細資料清單。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-221">You can see a complete list of the transaction details in the [Storage Analytics Metrics Table Schema](https://msdn.microsoft.com/library/hh343264.aspx) topic.</span></span>

<span data-ttu-id="5e4c8-222">記錄的交易資料屬於兩個層級 - 服務層級和 API 作業層級。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-222">Transaction data is recorded at two levels – the service level and the API operation level.</span></span> <span data-ttu-id="5e4c8-223">在服務層級，系統每小時都會將彙總所有要求的 API 作業的統計資料寫入資料表實體，即使未對該服務提出任何要求也一樣。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-223">At the service level, statistics summarizing all requested API operations are written to a table entity every hour even if no requests were made to the service.</span></span> <span data-ttu-id="5e4c8-224">在 API 作業層級，只有在該小時內對該作業提出要求時，才會將統計資料寫入實體。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-224">At the API operation level, statistics are only written to an entity if the operation was requested within that hour.</span></span>

<span data-ttu-id="5e4c8-225">例如，如果您在 Blob 服務上執行 **GetBlob** 作業，儲存體分析度量將會記錄要求，然後將它納入 Blob 服務和 **GetBlob** 作業的彙總資料中。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-225">For example, if you perform a **GetBlob** operation on your Blob service, Storage Analytics Metrics will log the request and include it in the aggregated data for both the Blob service as well as the **GetBlob** operation.</span></span> <span data-ttu-id="5e4c8-226">但是，如果在該小時內並未要求任何 **GetBlob** 作業，將不會針對該作業將任何實體寫入 `$MetricsTransactionsBlob` 中。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-226">However, if no **GetBlob** operation is requested during the hour, an entity will not be written to the `$MetricsTransactionsBlob` for that operation.</span></span>

<span data-ttu-id="5e4c8-227">系統會針對使用者要求及儲存體分析本身所提出的要求記錄交易度量。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-227">Transaction metrics are recorded for both user requests and requests made by Storage Analytics itself.</span></span> <span data-ttu-id="5e4c8-228">例如，會記錄儲存體分析寫入記錄和資料表實體的要求。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-228">For example, requests by Storage Analytics to write logs and table entities are recorded.</span></span> <span data-ttu-id="5e4c8-229">如需這些要求之計費方式的詳細資訊，請參閱 [儲存體分析及計費](https://msdn.microsoft.com/library/hh360997.aspx)。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-229">For more information about how these requests are billed, see [Storage Analytics and Billing](https://msdn.microsoft.com/library/hh360997.aspx).</span></span>

### <a name="capacity-metrics"></a><span data-ttu-id="5e4c8-230">容量度量</span><span class="sxs-lookup"><span data-stu-id="5e4c8-230">Capacity metrics</span></span>
> [!NOTE]
> <span data-ttu-id="5e4c8-231">容量度量目前僅適用於 Blob 服務。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-231">Currently, capacity metrics are only available for the Blob service.</span></span> <span data-ttu-id="5e4c8-232">適用於資料表服務和佇列服務的容量度量將可在儲存體分析的未來版本中使用。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-232">Capacity metrics for the Table service and Queue service will be available in future versions of Storage Analytics.</span></span>
> 
> 

<span data-ttu-id="5e4c8-233">系統每日都會針對儲存體帳戶的 Blob 服務記錄容量資料，並寫入兩個資料表實體。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-233">Capacity data is recorded daily for a storage account's Blob service, and two table entities are written.</span></span> <span data-ttu-id="5e4c8-234">其中一個實體會提供使用者資料的統計資料，而另一個實體則會提供有關儲存體分析所使用之 `$logs` Blob 容器的統計資料。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-234">One entity provides statistics for user data, and the other provides statistics about the `$logs` blob container used by Storage Analytics.</span></span> <span data-ttu-id="5e4c8-235">`$MetricsCapacityBlob` 資料表包含下列統計資料：</span><span class="sxs-lookup"><span data-stu-id="5e4c8-235">The `$MetricsCapacityBlob` table includes the following statistics:</span></span>

* <span data-ttu-id="5e4c8-236">**Capacity**：儲存體帳戶之 Blob 服務所使用的儲存體數目 (以位元組為單位)。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-236">**Capacity**: The amount of storage used by the storage account's Blob service, in bytes.</span></span>
* <span data-ttu-id="5e4c8-237">**ContainerCount**：儲存體帳戶之 Blob 服務中的 Blob 容器數目。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-237">**ContainerCount**: The number of blob containers in the storage account's Blob service.</span></span>
* <span data-ttu-id="5e4c8-238">**ObjectCount**：儲存體帳戶之 Blob 服務中的認可及未認可區塊或分頁 Blob 的數目。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-238">**ObjectCount**: The number of committed and uncommitted block or page blobs in the storage account's Blob service.</span></span>

<span data-ttu-id="5e4c8-239">如需容量度量的詳細資訊，請參閱 [儲存體分析度量資料表結構描述](https://msdn.microsoft.com/library/hh343264.aspx)。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-239">For more information about the capacity metrics, see [Storage Analytics Metrics Table Schema](https://msdn.microsoft.com/library/hh343264.aspx).</span></span>

### <a name="how-metrics-are-stored"></a><span data-ttu-id="5e4c8-240">度量的儲存方式</span><span class="sxs-lookup"><span data-stu-id="5e4c8-240">How metrics are stored</span></span>
<span data-ttu-id="5e4c8-241">對於每個儲存體服務的所有度量資料均儲存於為該服務所保留的三個資料表中：一個資料表用於交易資訊、一個資料表用於每分鐘交易資訊，而另一個資料表則用於容量資訊。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-241">All metrics data for each of the storage services is stored in three tables reserved for that service: one table for transaction information, one table for minute transaction information, and another table for capacity information.</span></span> <span data-ttu-id="5e4c8-242">交易和每分鐘交易資訊都是由要求和回應資料所組成，而容量資訊是由儲存體使用量資料所組成。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-242">Transaction and minute transaction information consists of request and response data, and capacity information consists of storage usage data.</span></span> <span data-ttu-id="5e4c8-243">儲存體帳戶之 Blob 服務的每小時計量、每分鐘計量及容量，均可從下表中具有相對應名稱的資料表中取得。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-243">Hour metrics, minute metrics, and capacity for a storage account's Blob service can be accessed in tables that are named as described in the following table.</span></span>

| <span data-ttu-id="5e4c8-244">度量層級</span><span class="sxs-lookup"><span data-stu-id="5e4c8-244">Metrics level</span></span> | <span data-ttu-id="5e4c8-245">資料表名稱</span><span class="sxs-lookup"><span data-stu-id="5e4c8-245">Table names</span></span> | <span data-ttu-id="5e4c8-246">支援的版本</span><span class="sxs-lookup"><span data-stu-id="5e4c8-246">Supported versions</span></span> |
| --- | --- | --- |
| <span data-ttu-id="5e4c8-247">每小時度量，主要位置</span><span class="sxs-lookup"><span data-stu-id="5e4c8-247">Hourly metrics, primary location</span></span> |<span data-ttu-id="5e4c8-248">$MetricsTransactionsBlob </span><span class="sxs-lookup"><span data-stu-id="5e4c8-248">$MetricsTransactionsBlob</span></span> <br/><span data-ttu-id="5e4c8-249">$MetricsTransactionsTable</span><span class="sxs-lookup"><span data-stu-id="5e4c8-249">$MetricsTransactionsTable</span></span> <br/> <span data-ttu-id="5e4c8-250">$MetricsTransactionsQueue</span><span class="sxs-lookup"><span data-stu-id="5e4c8-250">$MetricsTransactionsQueue</span></span> |<span data-ttu-id="5e4c8-251">僅適用於 2013-08-15 之前的版本。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-251">Versions prior to 2013-08-15 only.</span></span> <span data-ttu-id="5e4c8-252">儘管目前仍支援這些名稱，但還是建議您改用下列資料表。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-252">While these names are still supported, it's recommended that you switch to using the tables listed below.</span></span> |
| <span data-ttu-id="5e4c8-253">每小時度量，主要位置</span><span class="sxs-lookup"><span data-stu-id="5e4c8-253">Hourly metrics, primary location</span></span> |<span data-ttu-id="5e4c8-254">$MetricsHourPrimaryTransactionsBlob</span><span class="sxs-lookup"><span data-stu-id="5e4c8-254">$MetricsHourPrimaryTransactionsBlob</span></span> <br/><span data-ttu-id="5e4c8-255">$MetricsHourPrimaryTransactionsTable</span><span class="sxs-lookup"><span data-stu-id="5e4c8-255">$MetricsHourPrimaryTransactionsTable</span></span> <br/><span data-ttu-id="5e4c8-256">$MetricsHourPrimaryTransactionsQueue</span><span class="sxs-lookup"><span data-stu-id="5e4c8-256">$MetricsHourPrimaryTransactionsQueue</span></span> |<span data-ttu-id="5e4c8-257">所有版本 (包含 2013-08-15)。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-257">All versions, including 2013-08-15.</span></span> |
| <span data-ttu-id="5e4c8-258">每分鐘度量，主要位置</span><span class="sxs-lookup"><span data-stu-id="5e4c8-258">Minute metrics, primary location</span></span> |<span data-ttu-id="5e4c8-259">$MetricsMinutePrimaryTransactionsBlob</span><span class="sxs-lookup"><span data-stu-id="5e4c8-259">$MetricsMinutePrimaryTransactionsBlob</span></span> <br/><span data-ttu-id="5e4c8-260">$MetricsMinutePrimaryTransactionsTable</span><span class="sxs-lookup"><span data-stu-id="5e4c8-260">$MetricsMinutePrimaryTransactionsTable</span></span> <br/><span data-ttu-id="5e4c8-261">$MetricsMinutePrimaryTransactionsQueue</span><span class="sxs-lookup"><span data-stu-id="5e4c8-261">$MetricsMinutePrimaryTransactionsQueue</span></span> |<span data-ttu-id="5e4c8-262">所有版本 (包含 2013-08-15)。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-262">All versions, including 2013-08-15.</span></span> |
| <span data-ttu-id="5e4c8-263">每小時度量，次要位置</span><span class="sxs-lookup"><span data-stu-id="5e4c8-263">Hourly metrics, secondary location</span></span> |<span data-ttu-id="5e4c8-264">$MetricsHourSecondaryTransactionsBlob </span><span class="sxs-lookup"><span data-stu-id="5e4c8-264">$MetricsHourSecondaryTransactionsBlob</span></span> <br/><span data-ttu-id="5e4c8-265">$MetricsHourSecondaryTransactionsTable</span><span class="sxs-lookup"><span data-stu-id="5e4c8-265">$MetricsHourSecondaryTransactionsTable</span></span> <br/><span data-ttu-id="5e4c8-266">$MetricsHourSecondaryTransactionsQueue</span><span class="sxs-lookup"><span data-stu-id="5e4c8-266">$MetricsHourSecondaryTransactionsQueue</span></span> |<span data-ttu-id="5e4c8-267">所有版本 (包含 2013-08-15)。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-267">All versions, including 2013-08-15.</span></span> <span data-ttu-id="5e4c8-268">必須啟用讀取存取異地備援複寫。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-268">Read-access geo-redundant replication must be enabled.</span></span> |
| <span data-ttu-id="5e4c8-269">每分鐘度量，次要位置</span><span class="sxs-lookup"><span data-stu-id="5e4c8-269">Minute metrics, secondary location</span></span> |<span data-ttu-id="5e4c8-270">$MetricsMinuteSecondaryTransactionsBlob </span><span class="sxs-lookup"><span data-stu-id="5e4c8-270">$MetricsMinuteSecondaryTransactionsBlob</span></span> <br/><span data-ttu-id="5e4c8-271">$MetricsMinuteSecondaryTransactionsTable</span><span class="sxs-lookup"><span data-stu-id="5e4c8-271">$MetricsMinuteSecondaryTransactionsTable</span></span> <br/><span data-ttu-id="5e4c8-272">$MetricsMinuteSecondaryTransactionsQueue</span><span class="sxs-lookup"><span data-stu-id="5e4c8-272">$MetricsMinuteSecondaryTransactionsQueue</span></span> |<span data-ttu-id="5e4c8-273">所有版本 (包含 2013-08-15)。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-273">All versions, including 2013-08-15.</span></span> <span data-ttu-id="5e4c8-274">必須啟用讀取存取異地備援複寫。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-274">Read-access geo-redundant replication must be enabled.</span></span> |
| <span data-ttu-id="5e4c8-275">容量 (僅限 Blob 服務)</span><span class="sxs-lookup"><span data-stu-id="5e4c8-275">Capacity (Blob service only)</span></span> |<span data-ttu-id="5e4c8-276">$MetricsCapacityBlob</span><span class="sxs-lookup"><span data-stu-id="5e4c8-276">$MetricsCapacityBlob</span></span> |<span data-ttu-id="5e4c8-277">所有版本 (包含 2013-08-15)。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-277">All versions, including 2013-08-15.</span></span> |

<span data-ttu-id="5e4c8-278">針對儲存體帳戶啟用儲存體分析時，即會自動建立這些資料表。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-278">These tables are automatically created when Storage Analytics is enabled for a storage account.</span></span> <span data-ttu-id="5e4c8-279">您可以透過儲存體帳戶的命名空間存取它們，例如： `https://<accountname>.table.core.windows.net/Tables("$MetricsTransactionsBlob")`</span><span class="sxs-lookup"><span data-stu-id="5e4c8-279">They are accessed via the namespace of the storage account, for example: `https://<accountname>.table.core.windows.net/Tables("$MetricsTransactionsBlob")`</span></span>

### <a name="accessing-metrics-data"></a><span data-ttu-id="5e4c8-280">存取度量資料</span><span class="sxs-lookup"><span data-stu-id="5e4c8-280">Accessing metrics data</span></span>
<span data-ttu-id="5e4c8-281">度量資料表中的所有資料都可使用資料表服務 API 來存取，包括由 Azure 管理的程式庫所提供的 .NET API。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-281">All data in the metrics tables can be accessed by using the Table service APIs, including the .NET APIs provided by the Azure managed library.</span></span> <span data-ttu-id="5e4c8-282">儲存體帳戶管理員可以讀取和刪除資料表實體，但無法建立或更新它們。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-282">The storage account administrator can read and delete table entities, but cannot create or update them.</span></span>

## <a name="billing-for-storage-analytics"></a><span data-ttu-id="5e4c8-283">儲存體分析計費</span><span class="sxs-lookup"><span data-stu-id="5e4c8-283">Billing for Storage Analytics</span></span>
<span data-ttu-id="5e4c8-284">所有的度量資料都是由儲存體帳戶的服務所寫入。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-284">All metrics data is written by the services of a storage account.</span></span> <span data-ttu-id="5e4c8-285">因此，儲存體分析所執行的每個寫入作業都會列入計費。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-285">As a result, each write operation performed by Storage Analytics is billable.</span></span> <span data-ttu-id="5e4c8-286">此外，度量資料所使用的儲存體數量也會列入計費。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-286">Additionally, the amount of storage used by metrics data is also billable.</span></span>

<span data-ttu-id="5e4c8-287">儲存體分析所執行的下列動作會列入計費：</span><span class="sxs-lookup"><span data-stu-id="5e4c8-287">The following actions performed by Storage Analytics are billable:</span></span>

* <span data-ttu-id="5e4c8-288">建立 Blob 以用於記錄的要求。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-288">Requests to create blobs for logging.</span></span> 
* <span data-ttu-id="5e4c8-289">針對度量建立資料表實體的要求。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-289">Requests to create table entities for metrics.</span></span>

<span data-ttu-id="5e4c8-290">如果您已設定資料保留原則，就不需在儲存體分析刪除舊記錄和度量資料時支付刪除交易的費用。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-290">If you have configured a data retention policy, you are not charged for delete transactions when Storage Analytics deletes old logging and metrics data.</span></span> <span data-ttu-id="5e4c8-291">不過，從用戶端刪除交易會列入計費。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-291">However, delete transactions from a client are billable.</span></span> <span data-ttu-id="5e4c8-292">如需保留原則的詳細資訊，請參閱 [設定儲存體分析資料保留原則](https://msdn.microsoft.com/library/azure/hh343263.aspx)。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-292">For more information about retention policies, see [Setting a Storage Analytics Data Retention Policy](https://msdn.microsoft.com/library/azure/hh343263.aspx).</span></span>

### <a name="understanding-billable-requests"></a><span data-ttu-id="5e4c8-293">了解計費要求</span><span class="sxs-lookup"><span data-stu-id="5e4c8-293">Understanding billable requests</span></span>
<span data-ttu-id="5e4c8-294">對帳戶的儲存體服務所提出的每個要求，都會被歸類為計費或不計費。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-294">Every request made to an account's storage service is either billable or non-billable.</span></span> <span data-ttu-id="5e4c8-295">儲存體分析會記錄對服務所做的每個個別要求，包括表示如何處理要求的狀態訊息。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-295">Storage Analytics logs each individual request made to a service, including a status message that indicates how the request was handled.</span></span> <span data-ttu-id="5e4c8-296">同樣地，儲存體分析會儲存服務及該服務之 API 作業的度量，包括特定狀態訊息的百分比和計數。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-296">Similarly, Storage Analytics stores metrics for both a service and the API operations of that service, including the percentages and count of certain status messages.</span></span> <span data-ttu-id="5e4c8-297">這些功能可共同協助您分析計費要求、改善您的應用程式，以及診斷服務要求的問題。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-297">Together, these features can help you analyze your billable requests, make improvements on your application, and diagnose issues with requests to your services.</span></span> <span data-ttu-id="5e4c8-298">如需計費的詳細資訊，請參閱 [了解 Azure 儲存體計費 - 頻寬、交易和容量](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx)。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-298">For more information about billing, see [Understanding Azure Storage Billing - Bandwidth, Transactions, and Capacity](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx).</span></span>

<span data-ttu-id="5e4c8-299">檢視儲存體分析資料時，您可以使用 [儲存體分析記錄作業和狀態訊息](https://msdn.microsoft.com/library/azure/hh343260.aspx) 主題中的資料表，來判斷哪些要求需要計費。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-299">When looking at Storage Analytics data, you can use the tables in the [Storage Analytics Logged Operations and Status Messages](https://msdn.microsoft.com/library/azure/hh343260.aspx) topic to determine what requests are billable.</span></span> <span data-ttu-id="5e4c8-300">然後，您可以將記錄檔和度量資料與狀態訊息進行比較，以查看您是否需為特定要求支付費用。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-300">Then you can compare your logs and metrics data to the status messages to see if you were charged for a particular request.</span></span> <span data-ttu-id="5e4c8-301">您也可以使用上述主題中的資料表，來調查儲存體服務或個別 API 作業的可用性。</span><span class="sxs-lookup"><span data-stu-id="5e4c8-301">You can also use the tables in the previous topic to investigate availability for a storage service or individual API operation.</span></span>

## <a name="next-steps"></a><span data-ttu-id="5e4c8-302">後續步驟</span><span class="sxs-lookup"><span data-stu-id="5e4c8-302">Next steps</span></span>
### <a name="setting-up-storage-analytics"></a><span data-ttu-id="5e4c8-303">設定儲存體分析</span><span class="sxs-lookup"><span data-stu-id="5e4c8-303">Setting up Storage Analytics</span></span>
* [<span data-ttu-id="5e4c8-304">在 Azure 入口網站中監視儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="5e4c8-304">Monitor a storage account in the Azure Portal</span></span>](storage-monitor-storage-account.md)
* [<span data-ttu-id="5e4c8-305">啟用及設定儲存體分析</span><span class="sxs-lookup"><span data-stu-id="5e4c8-305">Enabling and Configuring Storage Analytics</span></span>](https://msdn.microsoft.com/library/hh360996.aspx)

### <a name="storage-analytics-logging"></a><span data-ttu-id="5e4c8-306">儲存體分析記錄</span><span class="sxs-lookup"><span data-stu-id="5e4c8-306">Storage Analytics logging</span></span>
* [<span data-ttu-id="5e4c8-307">關於儲存體分析記錄</span><span class="sxs-lookup"><span data-stu-id="5e4c8-307">About Storage Analytics Logging</span></span>](https://msdn.microsoft.com/library/hh343262.aspx)
* [<span data-ttu-id="5e4c8-308">儲存體分析記錄檔格式</span><span class="sxs-lookup"><span data-stu-id="5e4c8-308">Storage Analytics Log Format</span></span>](https://msdn.microsoft.com/library/hh343259.aspx)
* [<span data-ttu-id="5e4c8-309">儲存體分析記錄作業和狀態訊息</span><span class="sxs-lookup"><span data-stu-id="5e4c8-309">Storage Analytics Logged Operations and Status Messages</span></span>](https://msdn.microsoft.com/library/hh343260.aspx)

### <a name="storage-analytics-metrics"></a><span data-ttu-id="5e4c8-310">儲存體分析度量</span><span class="sxs-lookup"><span data-stu-id="5e4c8-310">Storage Analytics metrics</span></span>
* [<span data-ttu-id="5e4c8-311">關於儲存體分析度量</span><span class="sxs-lookup"><span data-stu-id="5e4c8-311">About Storage Analytics Metrics</span></span>](https://msdn.microsoft.com/library/hh343258.aspx)
* [<span data-ttu-id="5e4c8-312">儲存體分析度量資料表結構描述</span><span class="sxs-lookup"><span data-stu-id="5e4c8-312">Storage Analytics Metrics Table Schema</span></span>](https://msdn.microsoft.com/library/hh343264.aspx)
* [<span data-ttu-id="5e4c8-313">儲存體分析記錄作業和狀態訊息</span><span class="sxs-lookup"><span data-stu-id="5e4c8-313">Storage Analytics Logged Operations and Status Messages</span></span>](https://msdn.microsoft.com/library/hh343260.aspx)  

