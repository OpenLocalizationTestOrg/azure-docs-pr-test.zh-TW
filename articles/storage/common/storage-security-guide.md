---
title: "aaaAzure 儲存安全性指南 |Microsoft 文件"
description: "詳細資料 hello 許多方法保護 Azure 儲存體，包括但不是限於的 tooRBAC、 儲存體服務加密、 用戶端加密、 SMB 3.0 和 Azure 磁碟加密。"
services: storage
documentationcenter: .net
author: robinsh
manager: timlt
editor: tysonn
ms.assetid: 6f931d94-ef5a-44c6-b1d9-8a3c9c327fb2
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 12/08/2016
ms.author: robinsh
ms.openlocfilehash: 1f5a4e724e00ea6d16f5511b9120154f89441758
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="azure-storage-security-guide"></a><span data-ttu-id="9559d-103">Azure 儲存體安全性指南</span><span class="sxs-lookup"><span data-stu-id="9559d-103">Azure Storage security guide</span></span>
## <a name="overview"></a><span data-ttu-id="9559d-104">概觀</span><span class="sxs-lookup"><span data-stu-id="9559d-104">Overview</span></span>
<span data-ttu-id="9559d-105">Azure 儲存體提供一組完整的安全性功能，同時讓開發人員 toobuild 安全的應用程式。</span><span class="sxs-lookup"><span data-stu-id="9559d-105">Azure Storage provides a comprehensive set of security capabilities which together enable developers toobuild secure applications.</span></span> <span data-ttu-id="9559d-106">可以使用角色型存取控制與 Azure Active Directory 來保護本身的 hello 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="9559d-106">hello storage account itself can be secured using Role-Based Access Control and Azure Active Directory.</span></span> <span data-ttu-id="9559d-107">您可以使用[用戶端加密](../storage-client-side-encryption.md)、HTTPS 或 SMB 3.0，在應用程式和 Azure 之間進行傳輸時保護資料的安全。</span><span class="sxs-lookup"><span data-stu-id="9559d-107">Data can be secured in transit between an application and Azure by using [Client-Side Encryption](../storage-client-side-encryption.md), HTTPS, or SMB 3.0.</span></span> <span data-ttu-id="9559d-108">資料可以設定自動加密時寫入 toobe tooAzure 儲存體使用[儲存體服務加密 (SSE)](storage-service-encryption.md)。</span><span class="sxs-lookup"><span data-stu-id="9559d-108">Data can be set toobe automatically encrypted when written tooAzure Storage using [Storage Service Encryption (SSE)](storage-service-encryption.md).</span></span> <span data-ttu-id="9559d-109">虛擬機器所使用的作業系統和資料磁碟可以設定使用加密的 toobe [Azure 磁碟加密](../../security/azure-security-disk-encryption.md)。</span><span class="sxs-lookup"><span data-stu-id="9559d-109">OS and Data disks used by virtual machines can be set toobe encrypted using [Azure Disk Encryption](../../security/azure-security-disk-encryption.md).</span></span> <span data-ttu-id="9559d-110">Azure 儲存體中的委派的存取 toohello 資料物件可以被授與使用[共用存取簽章](../storage-dotnet-shared-access-signature-part-1.md)。</span><span class="sxs-lookup"><span data-stu-id="9559d-110">Delegated access toohello data objects in Azure Storage can be granted using [Shared Access Signatures](../storage-dotnet-shared-access-signature-part-1.md).</span></span>

<span data-ttu-id="9559d-111">本文將提供這其中每個可搭配 Azure 儲存體使用的安全性功能概觀。</span><span class="sxs-lookup"><span data-stu-id="9559d-111">This article will provide an overview of each of these security features that can be used with Azure Storage.</span></span> <span data-ttu-id="9559d-112">會提供連結，以提供每項功能的詳細資料，因此您可以輕鬆地執行 tooarticles 進一步調查每個主題上的。</span><span class="sxs-lookup"><span data-stu-id="9559d-112">Links are provided tooarticles that will give details of each feature so you can easily do further investigation on each topic.</span></span>

<span data-ttu-id="9559d-113">以下是本文章涵蓋 hello 主題 toobe:</span><span class="sxs-lookup"><span data-stu-id="9559d-113">Here are hello topics toobe covered in this article:</span></span>

* <span data-ttu-id="9559d-114">[管理平面安全性](#management-plane-security) – 保護儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="9559d-114">[Management Plane Security](#management-plane-security) – Securing your Storage Account</span></span>

  <span data-ttu-id="9559d-115">hello 管理平面 hello 使用資源 toomanage 包含儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="9559d-115">hello management plane consists of hello resources used toomanage your storage account.</span></span> <span data-ttu-id="9559d-116">在本節中，我們將討論 hello Azure Resource Manager 部署模型和 toouse 角色型存取控制 (RBAC) toocontrol tooyour 儲存體帳戶的存取方式。</span><span class="sxs-lookup"><span data-stu-id="9559d-116">In this section, we'll talk about hello Azure Resource Manager deployment model and how toouse Role-Based Access Control (RBAC) toocontrol access tooyour storage accounts.</span></span> <span data-ttu-id="9559d-117">我們也會討論管理儲存體帳戶金鑰以及如何 tooregenerate 它們。</span><span class="sxs-lookup"><span data-stu-id="9559d-117">We will also talk about managing your storage account keys and how tooregenerate them.</span></span>
* <span data-ttu-id="9559d-118">[平面的資料安全性](#data-plane-security)– 保護存取 tooYour 資料</span><span class="sxs-lookup"><span data-stu-id="9559d-118">[Data Plane Security](#data-plane-security) – Securing Access tooYour Data</span></span>

  <span data-ttu-id="9559d-119">在本節中，我們將查看允許存取 toohello 實際的資料物件，在儲存體帳戶，例如 blob、 檔案、 佇列和資料表，使用共用存取簽章和預存存取原則。</span><span class="sxs-lookup"><span data-stu-id="9559d-119">In this section, we'll look at allowing access toohello actual data objects in your Storage account, such as blobs, files, queues, and tables, using Shared Access Signatures and Stored Access Policies.</span></span> <span data-ttu-id="9559d-120">我們將涵蓋服務層級的 SAS 和帳戶層級的 SAS。</span><span class="sxs-lookup"><span data-stu-id="9559d-120">We will cover both service-level SAS and account-level SAS.</span></span> <span data-ttu-id="9559d-121">我們也會看到如何 toolimit 存取 tooa 特定 IP 位址 （或 IP 位址範圍）、 toolimit hello 通訊協定使用 tooHTTPS，以及如何不需等到它的共用存取簽章 toorevoke tooexpire。</span><span class="sxs-lookup"><span data-stu-id="9559d-121">We'll also see how toolimit access tooa specific IP address (or range of IP addresses), how toolimit hello protocol used tooHTTPS, and how toorevoke a Shared Access Signature without waiting for it tooexpire.</span></span>
* [<span data-ttu-id="9559d-122">傳輸中加密</span><span class="sxs-lookup"><span data-stu-id="9559d-122">Encryption in Transit</span></span>](#encryption-in-transit)

  <span data-ttu-id="9559d-123">本章節將討論如何 toosecure 資料時可以傳送傳入或傳出 Azure 儲存體。</span><span class="sxs-lookup"><span data-stu-id="9559d-123">This section discusses how toosecure data when you transfer it into or out of Azure Storage.</span></span> <span data-ttu-id="9559d-124">我們將討論建議使用 HTTPS 和 hello 加密使用 Azure 檔案共用的 SMB 3.0 的 hello。</span><span class="sxs-lookup"><span data-stu-id="9559d-124">We'll talk about hello recommended use of HTTPS and hello encryption used by SMB 3.0 for Azure File shares.</span></span> <span data-ttu-id="9559d-125">我們也將看看用戶端加密，可讓您 tooencrypt hello 資料傳輸到儲存體用戶端應用程式之前和 toodecrypt hello 資料超出儲存體傳輸後。</span><span class="sxs-lookup"><span data-stu-id="9559d-125">We will also take a look at Client-side Encryption, which enables you tooencrypt hello data before it is transferred into Storage in a client application, and toodecrypt hello data after it is transferred out of Storage.</span></span>
* [<span data-ttu-id="9559d-126">待用加密</span><span class="sxs-lookup"><span data-stu-id="9559d-126">Encryption at Rest</span></span>](#encryption-at-rest)

  <span data-ttu-id="9559d-127">我們會討論儲存體服務加密 (SSE) 中，和如何加以啟用儲存體帳戶，導致您的區塊 blob，分頁 blob，並附加寫入 tooAzure 存放裝置時自動加密的 blob。</span><span class="sxs-lookup"><span data-stu-id="9559d-127">We will talk about Storage Service Encryption (SSE), and how you can enable it for a storage account, resulting in your block blobs, page blobs, and append blobs being automatically encrypted when written tooAzure Storage.</span></span> <span data-ttu-id="9559d-128">我們也將探討如何使用 Azure 磁碟加密，並瀏覽 hello 基本差異和與用戶端加密與 SSE 磁碟加密的情況。</span><span class="sxs-lookup"><span data-stu-id="9559d-128">We will also look at how you can use Azure Disk Encryption and explore hello basic differences and cases of Disk Encryption versus SSE versus Client-Side Encryption.</span></span> <span data-ttu-id="9559d-129">我們將簡短探討美國政府電腦適用的 FIPS 相符性。</span><span class="sxs-lookup"><span data-stu-id="9559d-129">We will briefly look at FIPS compliance for U.S. Government computers.</span></span>
* <span data-ttu-id="9559d-130">使用[儲存體分析](#storage-analytics)tooaudit 存取 Azure 儲存體</span><span class="sxs-lookup"><span data-stu-id="9559d-130">Using [Storage Analytics](#storage-analytics) tooaudit access of Azure Storage</span></span>

  <span data-ttu-id="9559d-131">本節討論如何 toofind 在 hello 儲存體分析記錄檔資訊的要求。</span><span class="sxs-lookup"><span data-stu-id="9559d-131">This section discusses how toofind information in hello storage analytics logs for a request.</span></span> <span data-ttu-id="9559d-132">我們會查看實際的儲存體分析記錄資料，請參閱如何 toodiscern 是否與提出要求 hello 儲存體帳戶金鑰，以共用存取簽章，或以匿名方式，以及是否成功或失敗。</span><span class="sxs-lookup"><span data-stu-id="9559d-132">We'll take a look at real storage analytics log data and see how toodiscern whether a request is made with hello Storage account key, with a Shared Access signature, or anonymously, and whether it succeeded or failed.</span></span>
* [<span data-ttu-id="9559d-133">使用 CORS 啟用以瀏覽器為基礎的用戶端</span><span class="sxs-lookup"><span data-stu-id="9559d-133">Enabling Browser-Based Clients using CORS</span></span>](#Cross-Origin-Resource-Sharing-CORS)

  <span data-ttu-id="9559d-134">本節討論如何 tooallow 跨原始資源共用 (CORS)。</span><span class="sxs-lookup"><span data-stu-id="9559d-134">This section talks about how tooallow cross-origin resource sharing (CORS).</span></span> <span data-ttu-id="9559d-135">我們將討論跨網域存取，以及如何 toohandle 它 hello CORS 功能內建到 Azure 儲存體。</span><span class="sxs-lookup"><span data-stu-id="9559d-135">We'll talk about cross-domain access, and how toohandle it with hello CORS capabilities built into Azure Storage.</span></span>

## <a name="management-plane-security"></a><span data-ttu-id="9559d-136">管理平面安全性</span><span class="sxs-lookup"><span data-stu-id="9559d-136">Management Plane Security</span></span>
<span data-ttu-id="9559d-137">hello 管理平面包含會影響本身 hello 儲存體帳戶的作業。</span><span class="sxs-lookup"><span data-stu-id="9559d-137">hello management plane consists of operations that affect hello storage account itself.</span></span> <span data-ttu-id="9559d-138">例如，您可以建立或刪除儲存體帳戶、 訂用帳戶中取得的儲存體帳戶清單、 擷取 hello 儲存體帳戶金鑰，或重新產生 hello 儲存體帳戶金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-138">For example, you can create or delete a storage account, get a list of storage accounts in a subscription, retrieve hello storage account keys, or regenerate hello storage account keys.</span></span>

<span data-ttu-id="9559d-139">當您建立新的儲存體帳戶時，可以選取傳統或資源管理員的部署模型。</span><span class="sxs-lookup"><span data-stu-id="9559d-139">When you create a new storage account, you select a deployment model of Classic or Resource Manager.</span></span> <span data-ttu-id="9559d-140">在 Azure 中建立資源的 hello 傳統模式只允許想到存取 toohello 訂用帳戶和依次 hello 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="9559d-140">hello Classic model of creating resources in Azure only allows all-or-nothing access toohello subscription, and in turn, hello storage account.</span></span>

<span data-ttu-id="9559d-141">此指南著重於 hello 資源管理員模型，這是建議的方式來建立儲存體帳戶的 hello。</span><span class="sxs-lookup"><span data-stu-id="9559d-141">This guide focuses on hello Resource Manager model which is hello recommended means for creating storage accounts.</span></span> <span data-ttu-id="9559d-142">與 hello 資源管理員的儲存體帳戶，而不提供存取 toohello 整個訂用帳戶，您可以控制更有限的層級 toohello 管理平面，使用角色型存取控制 (RBAC) 上的存取。</span><span class="sxs-lookup"><span data-stu-id="9559d-142">With hello Resource Manager storage accounts, rather than giving access toohello entire subscription, you can control access on a more finite level toohello management plane using Role-Based Access Control (RBAC).</span></span>

### <a name="how-toosecure-your-storage-account-with-role-based-access-control-rbac"></a><span data-ttu-id="9559d-143">如何 toosecure 您的儲存體帳戶使用角色型存取控制 (RBAC)</span><span class="sxs-lookup"><span data-stu-id="9559d-143">How toosecure your storage account with Role-Based Access Control (RBAC)</span></span>
<span data-ttu-id="9559d-144">讓我們討論何謂 RBAC 及使用方式。</span><span class="sxs-lookup"><span data-stu-id="9559d-144">Let's talk about what RBAC is, and how you can use it.</span></span> <span data-ttu-id="9559d-145">每一個 Azure 訂用帳戶都具有 Azure Active Directory。</span><span class="sxs-lookup"><span data-stu-id="9559d-145">Each Azure subscription has an Azure Active Directory.</span></span> <span data-ttu-id="9559d-146">使用者、 群組和從該目錄的應用程式可以被授與存取 toomanage hello Azure 訂用帳戶中的使用資源 hello Resource Manager 部署模型。</span><span class="sxs-lookup"><span data-stu-id="9559d-146">Users, groups, and applications from that directory can be granted access toomanage resources in hello Azure subscription that use hello Resource Manager deployment model.</span></span> <span data-ttu-id="9559d-147">這是參考的 tooas 角色型存取控制 (RBAC)。</span><span class="sxs-lookup"><span data-stu-id="9559d-147">This is referred tooas Role-Based Access Control (RBAC).</span></span> <span data-ttu-id="9559d-148">toomanage 這存取，您可以使用 hello [Azure 入口網站](https://portal.azure.com/)，hello [Azure CLI 工具](../../cli-install-nodejs.md)， [PowerShell](/powershell/azureps-cmdlets-docs)，或使用 hello [Azure 儲存體資源提供者 REST Api](https://msdn.microsoft.com/library/azure/mt163683.aspx).</span><span class="sxs-lookup"><span data-stu-id="9559d-148">toomanage this access, you can use hello [Azure portal](https://portal.azure.com/), hello [Azure CLI tools](../../cli-install-nodejs.md), [PowerShell](/powershell/azureps-cmdlets-docs), or hello [Azure Storage Resource Provider REST APIs](https://msdn.microsoft.com/library/azure/mt163683.aspx).</span></span>

<span data-ttu-id="9559d-149">使用 hello 資源管理員模型時，您可以將 hello 儲存體帳戶資源群組和控制存取 toohello 管理平面中的該特定的儲存體帳戶，使用 Azure Active Directory。</span><span class="sxs-lookup"><span data-stu-id="9559d-149">With hello Resource Manager model, you put hello storage account in a resource group and control access toohello management plane of that specific storage account using Azure Active Directory.</span></span> <span data-ttu-id="9559d-150">例如，您可以提供特定使用者 hello 能力 tooaccess hello 儲存體帳戶金鑰，而其他使用者可以檢視 hello 儲存體帳戶資訊，但無法存取 hello 儲存體帳戶金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-150">For example, you can give specific users hello ability tooaccess hello storage account keys, while other users can view information about hello storage account, but cannot access hello storage account keys.</span></span>

#### <a name="granting-access"></a><span data-ttu-id="9559d-151">授與存取權</span><span class="sxs-lookup"><span data-stu-id="9559d-151">Granting Access</span></span>
<span data-ttu-id="9559d-152">指派適當 RBAC 角色 toousers hello、 群組和應用程式，在 hello 權限範圍授與的存取。</span><span class="sxs-lookup"><span data-stu-id="9559d-152">Access is granted by assigning hello appropriate RBAC role toousers, groups, and applications, at hello right scope.</span></span> <span data-ttu-id="9559d-153">toogrant 存取 toohello 整個訂用帳戶，您可以指派 hello 訂用帳戶層級角色。</span><span class="sxs-lookup"><span data-stu-id="9559d-153">toogrant access toohello entire subscription, you assign a role at hello subscription level.</span></span> <span data-ttu-id="9559d-154">您可以授與權限本身 toohello 資源群組來授與存取 tooall 的資源群組中的 hello 資源。</span><span class="sxs-lookup"><span data-stu-id="9559d-154">You can grant access tooall of hello resources in a resource group by granting permissions toohello resource group itself.</span></span> <span data-ttu-id="9559d-155">您也可以指派特定的角色 toospecific 資源，例如儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="9559d-155">You can also assign specific roles toospecific resources, such as storage accounts.</span></span>

<span data-ttu-id="9559d-156">以下是您需要有關使用 RBAC tooaccess hello Azure 儲存體帳戶的管理作業 tooknow hello 重點：</span><span class="sxs-lookup"><span data-stu-id="9559d-156">Here are hello main points that you need tooknow about using RBAC tooaccess hello management operations of an Azure Storage account:</span></span>

* <span data-ttu-id="9559d-157">當您指派存取權時，您基本上會指派您想要 toohave 存取角色 toohello 帳戶。</span><span class="sxs-lookup"><span data-stu-id="9559d-157">When you assign access, you basically assign a role toohello account that you want toohave access.</span></span> <span data-ttu-id="9559d-158">您可以控制存取 toohello 作業使用 toomanage 該儲存體帳戶，但不是 toohello 資料 hello 帳戶中的物件。</span><span class="sxs-lookup"><span data-stu-id="9559d-158">You can control access toohello operations used toomanage that storage account, but not toohello data objects in hello account.</span></span> <span data-ttu-id="9559d-159">例如，您可以授與權限 tooretrieve hello 屬性 hello 儲存體帳戶 （例如備援），但非 tooa 容器或 Blob 儲存體中的容器中的資料。</span><span class="sxs-lookup"><span data-stu-id="9559d-159">For example, you can grant permission tooretrieve hello properties of hello storage account (such as redundancy), but not tooa container or data within a container inside Blob Storage.</span></span>
* <span data-ttu-id="9559d-160">有人 toohave 權限 tooaccess hello hello 儲存體帳戶中的資料物件，提供權限 tooread hello 儲存體帳戶金鑰，該使用者可以接著使用這些金鑰 tooaccess hello blob、 佇列、 表格和檔案。</span><span class="sxs-lookup"><span data-stu-id="9559d-160">For someone toohave permission tooaccess hello data objects in hello storage account, you can give them permission tooread hello storage account keys, and that user can then use those keys tooaccess hello blobs, queues, tables, and files.</span></span>
* <span data-ttu-id="9559d-161">角色可以指派 tooa 特定使用者帳戶、 使用者或 tooa 特定應用程式的群組。</span><span class="sxs-lookup"><span data-stu-id="9559d-161">Roles can be assigned tooa specific user account, a group of users, or tooa specific application.</span></span>
* <span data-ttu-id="9559d-162">每個角色都有「動作」與「沒有動作」清單。</span><span class="sxs-lookup"><span data-stu-id="9559d-162">Each role has a list of Actions and Not Actions.</span></span> <span data-ttu-id="9559d-163">比方說，hello 虛擬機器參與者角色具有 「 Listkey"的動作，可讓 hello 儲存體帳戶金鑰 toobe 讀取。</span><span class="sxs-lookup"><span data-stu-id="9559d-163">For example, hello Virtual Machine Contributor role has an Action of "listKeys" that allows hello storage account keys toobe read.</span></span> <span data-ttu-id="9559d-164">hello 參與者有 [沒有動作]，例如更新 hello hello Active Directory 中使用者的存取權。</span><span class="sxs-lookup"><span data-stu-id="9559d-164">hello Contributor has "Not Actions" such as updating hello access for users in hello Active Directory.</span></span>
* <span data-ttu-id="9559d-165">儲存體的角色包括 （但不限於） 下列 hello:</span><span class="sxs-lookup"><span data-stu-id="9559d-165">Roles for storage include (but are not limited to) hello following:</span></span>

  * <span data-ttu-id="9559d-166">擁有者 – 他們可以管理一切，包括存取權。</span><span class="sxs-lookup"><span data-stu-id="9559d-166">Owner – They can manage everything, including access.</span></span>
  * <span data-ttu-id="9559d-167">參與者-它們可以執行任何動作 hello 擁有者可以執行除了指派存取權。</span><span class="sxs-lookup"><span data-stu-id="9559d-167">Contributor – They can do anything hello owner can do except assign access.</span></span> <span data-ttu-id="9559d-168">擁有此角色的使用者可檢視及重新產生 hello 儲存體帳戶金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-168">Someone with this role can view and regenerate hello storage account keys.</span></span> <span data-ttu-id="9559d-169">與 hello 儲存體帳戶金鑰，就可以存取 hello 資料物件。</span><span class="sxs-lookup"><span data-stu-id="9559d-169">With hello storage account keys, they can access hello data objects.</span></span>
  * <span data-ttu-id="9559d-170">讀取者-它們可以檢視 hello 儲存體帳戶，但機密資料的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="9559d-170">Reader – They can view information about hello storage account, except secrets.</span></span> <span data-ttu-id="9559d-171">例如，如果您指派 hello 儲存體帳戶 toosomeone 上的讀取器權限的角色，他們可以檢視 hello hello 儲存體帳戶內容，但是它們無法 toohello 屬性進行任何變更或檢視 hello 儲存體帳戶金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-171">For example, if you assign a role with reader permissions on hello storage account toosomeone, they can view hello properties of hello storage account, but they can't make any changes toohello properties or view hello storage account keys.</span></span>
  * <span data-ttu-id="9559d-172">儲存體帳戶參與者 – 他們可以管理 hello 儲存體帳戶 – 他們可以讀取 hello 訂用帳戶的資源群組和資源，以及建立和管理訂用帳戶資源群組部署。</span><span class="sxs-lookup"><span data-stu-id="9559d-172">Storage Account Contributor – They can manage hello storage account – they can read hello subscription's resource groups and resources, and create and manage subscription resource group deployments.</span></span> <span data-ttu-id="9559d-173">它們也可以存取 hello 儲存體帳戶金鑰 」，而表示他們可以存取 hello 資料平面。</span><span class="sxs-lookup"><span data-stu-id="9559d-173">They can also access hello storage account keys, which in turn means they can access hello data plane.</span></span>
  * <span data-ttu-id="9559d-174">使用者存取系統管理員 – 他們可以管理使用者存取 toohello 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="9559d-174">User Access Administrator – They can manage user access toohello storage account.</span></span> <span data-ttu-id="9559d-175">例如，他們可以授與讀取器存取 tooa 特定使用者。</span><span class="sxs-lookup"><span data-stu-id="9559d-175">For example, they can grant Reader access tooa specific user.</span></span>
  * <span data-ttu-id="9559d-176">虛擬機器參與者 – 他們可以管理虛擬機器，但不是 hello 儲存體帳戶 toowhich 它們連線。</span><span class="sxs-lookup"><span data-stu-id="9559d-176">Virtual Machine Contributor – They can manage virtual machines but not hello storage account toowhich they are connected.</span></span> <span data-ttu-id="9559d-177">這個角色可以列出 hello 儲存體帳戶金鑰，表示 hello 指派這個角色的使用者 toowhom 可以更新 hello 資料平面。</span><span class="sxs-lookup"><span data-stu-id="9559d-177">This role can list hello storage account keys, which means that hello user toowhom you assign this role can update hello data plane.</span></span>

    <span data-ttu-id="9559d-178">為了讓使用者 toocreate 虛擬機器，它們有 toobe 無法 toocreate hello 對應 VHD 檔案儲存體帳戶中。</span><span class="sxs-lookup"><span data-stu-id="9559d-178">In order for a user toocreate a virtual machine, they have toobe able toocreate hello corresponding VHD file in a storage account.</span></span> <span data-ttu-id="9559d-179">toodo，他們需要 toobe 無法 tooretrieve hello 儲存體帳戶金鑰，並將它傳遞 toohello 應用程式開發介面建立 hello VM。</span><span class="sxs-lookup"><span data-stu-id="9559d-179">toodo that, they need toobe able tooretrieve hello storage account key and pass it toohello API creating hello VM.</span></span> <span data-ttu-id="9559d-180">因此，它們必須有此權限，讓它們可以列出 hello 儲存體帳戶金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-180">Therefore, they must have this permission so they can list hello storage account keys.</span></span>
* <span data-ttu-id="9559d-181">hello 能力 toodefine 自訂角色是可讓您 toocompose 清單中的動作可以在 Azure 資源執行的可用動作的一組功能。</span><span class="sxs-lookup"><span data-stu-id="9559d-181">hello ability toodefine custom roles is a feature that allows you toocompose a set of actions from a list of available actions that can be performed on Azure resources.</span></span>
* <span data-ttu-id="9559d-182">hello 使用者擁有 toobe 之前您可以指派角色 toothem 需要設定您的 Azure Active Directory 中。</span><span class="sxs-lookup"><span data-stu-id="9559d-182">hello user has toobe set up in your Azure Active Directory before you can assign a role toothem.</span></span>
* <span data-ttu-id="9559d-183">您可以建立報表的人員授與/撤銷的存取權，或從其，而且在使用 PowerShell 哪些 scope 種類或 hello Azure CLI。</span><span class="sxs-lookup"><span data-stu-id="9559d-183">You can create a report of who granted/revoked what kind of access to/from whom and on what scope using PowerShell or hello Azure CLI.</span></span>

#### <a name="resources"></a><span data-ttu-id="9559d-184">資源</span><span class="sxs-lookup"><span data-stu-id="9559d-184">Resources</span></span>
* [<span data-ttu-id="9559d-185">Azure Active Directory 角色型存取控制</span><span class="sxs-lookup"><span data-stu-id="9559d-185">Azure Active Directory Role-based Access Control</span></span>](../../active-directory/role-based-access-control-configure.md)

  <span data-ttu-id="9559d-186">這篇文章說明 hello Azure Active Directory 角色型存取控制和其運作方式。</span><span class="sxs-lookup"><span data-stu-id="9559d-186">This article explains hello Azure Active Directory Role-based Access Control and how it works.</span></span>
* [<span data-ttu-id="9559d-187">RBAC：內建角色</span><span class="sxs-lookup"><span data-stu-id="9559d-187">RBAC: Built in Roles</span></span>](../../active-directory/role-based-access-built-in-roles.md)

  <span data-ttu-id="9559d-188">這篇文章會說明所有 hello 中 RBAC 中可用的內建角色。</span><span class="sxs-lookup"><span data-stu-id="9559d-188">This article details all of hello built-in roles available in RBAC.</span></span>
* [<span data-ttu-id="9559d-189">了解資源管理員部署和傳統部署</span><span class="sxs-lookup"><span data-stu-id="9559d-189">Understanding Resource Manager deployment and classic deployment</span></span>](../../azure-resource-manager/resource-manager-deployment-model.md)

  <span data-ttu-id="9559d-190">本文說明 hello 資源管理員部署和傳統部署模型，並說明使用 hello 資源管理員和資源群組的 hello 好處。</span><span class="sxs-lookup"><span data-stu-id="9559d-190">This article explains hello Resource Manager deployment and classic deployment models, and explains hello benefits of using hello Resource Manager and resource groups.</span></span> <span data-ttu-id="9559d-191">它說明 hello Azure 計算、 網路和存放裝置提供者在 hello 資源管理員模式下運作的方式。</span><span class="sxs-lookup"><span data-stu-id="9559d-191">It explains how hello Azure Compute, Network, and Storage Providers work under hello Resource Manager model.</span></span>
* [<span data-ttu-id="9559d-192">管理角色型存取控制以 hello REST API</span><span class="sxs-lookup"><span data-stu-id="9559d-192">Managing Role-Based Access Control with hello REST API</span></span>](../../active-directory/role-based-access-control-manage-access-rest.md)

  <span data-ttu-id="9559d-193">本文將說明如何 toouse hello REST API toomanage RBAC。</span><span class="sxs-lookup"><span data-stu-id="9559d-193">This article shows how toouse hello REST API toomanage RBAC.</span></span>
* [<span data-ttu-id="9559d-194">Azure 儲存體資源提供者 REST API 參考</span><span class="sxs-lookup"><span data-stu-id="9559d-194">Azure Storage Resource Provider REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/mt163683.aspx)

  <span data-ttu-id="9559d-195">這是您可以使用 Api toomanage 儲存體帳戶以程式設計方式 hello 的 hello 參考。</span><span class="sxs-lookup"><span data-stu-id="9559d-195">This is hello reference for hello APIs you can use toomanage your storage account programmatically.</span></span>
* [<span data-ttu-id="9559d-196">使用 Azure 資源管理員 API 的開發人員指南 tooauth</span><span class="sxs-lookup"><span data-stu-id="9559d-196">Developer's guide tooauth with Azure Resource Manager API</span></span>](http://www.dushyantgill.com/blog/2015/05/23/developers-guide-to-auth-with-azure-resource-manager-api/)

  <span data-ttu-id="9559d-197">本文示範如何使用 tooauthenticate hello 資源管理員 Api。</span><span class="sxs-lookup"><span data-stu-id="9559d-197">This article shows how tooauthenticate using hello Resource Manager APIs.</span></span>
* [<span data-ttu-id="9559d-198">來自Ignite 且適用於 Microsoft Azure 的角色型存取控制</span><span class="sxs-lookup"><span data-stu-id="9559d-198">Role-Based Access Control for Microsoft Azure from Ignite</span></span>](https://channel9.msdn.com/events/Ignite/2015/BRK2707)

  <span data-ttu-id="9559d-199">這是連結 tooa 大會 hello 2015 MS Ignite 影片在 Channel 9 上。</span><span class="sxs-lookup"><span data-stu-id="9559d-199">This is a link tooa video on Channel 9 from hello 2015 MS Ignite conference.</span></span> <span data-ttu-id="9559d-200">在此工作階段，它們討論存取管理和報告功能，在 Azure 中，並瀏覽保護存取 tooAzure 訂用帳戶使用 Azure Active Directory 的最佳作法。</span><span class="sxs-lookup"><span data-stu-id="9559d-200">In this session, they talk about access management and reporting capabilities in Azure, and explore best practices around securing access tooAzure subscriptions using Azure Active Directory.</span></span>

### <a name="managing-your-storage-account-keys"></a><span data-ttu-id="9559d-201">管理儲存體帳戶金鑰</span><span class="sxs-lookup"><span data-stu-id="9559d-201">Managing Your Storage Account Keys</span></span>
<span data-ttu-id="9559d-202">索引鍵是由 Azure 建立的以及 hello 儲存體帳戶名稱，512 位元字串的儲存體帳戶可以是使用的 tooaccess hello 資料物件儲存在 hello 儲存體帳戶，例如 blob、 資料表、 佇列訊息，以及 Azure 檔案共用上的檔案內的實體。</span><span class="sxs-lookup"><span data-stu-id="9559d-202">Storage account keys are 512-bit strings created by Azure that, along with hello storage account name, can be used tooaccess hello data objects stored in hello storage account, e.g. blobs, entities within a table, queue messages, and files on an Azure File share.</span></span> <span data-ttu-id="9559d-203">控制存取 toohello 儲存體帳戶金鑰控制存取該儲存體帳戶的 toohello 資料平面。</span><span class="sxs-lookup"><span data-stu-id="9559d-203">Controlling access toohello storage account keys controls access toohello data plane for that storage account.</span></span>

<span data-ttu-id="9559d-204">每個儲存體帳戶有兩個索引鍵參考 tooas 「 索引鍵 1 」 和 「 索引鍵 2 」 中 hello [Azure 入口網站](http://portal.azure.com/)在 hello PowerShell cmdlet。</span><span class="sxs-lookup"><span data-stu-id="9559d-204">Each storage account has two keys referred tooas "Key 1" and "Key 2" in hello [Azure portal](http://portal.azure.com/) and in hello PowerShell cmdlets.</span></span> <span data-ttu-id="9559d-205">這些可以使用其中一種方法，包括但不是限於的 toousing hello 以手動方式重新產生[Azure 入口網站](https://portal.azure.com/)，PowerShell、 hello Azure CLI，或以程式設計方式使用 hello.NET 儲存體用戶端程式庫或 hello Azure儲存體服務 REST API。</span><span class="sxs-lookup"><span data-stu-id="9559d-205">These can be regenerated manually using one of several methods, including, but not limited toousing hello [Azure portal](https://portal.azure.com/), PowerShell, hello Azure CLI, or programmatically using hello .NET Storage Client Library or hello Azure Storage Services REST API.</span></span>

<span data-ttu-id="9559d-206">有任意數目的理由 tooregenerate 儲存體帳戶金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-206">There are any number of reasons tooregenerate your storage account keys.</span></span>

* <span data-ttu-id="9559d-207">您可能會基於安全性理由定期重新產生它們。</span><span class="sxs-lookup"><span data-stu-id="9559d-207">You might regenerate them on a regular basis for security reasons.</span></span>
* <span data-ttu-id="9559d-208">如果某人 toohack 管理的應用程式，並擷取已硬式編碼，或儲存在組態檔中的 hello 金鑰授與完整存取 tooyour 儲存體帳戶，就會重新產生儲存體帳戶金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-208">You would regenerate your storage account keys if someone managed toohack into an application and retrieve hello key that was hardcoded or saved in a configuration file, giving them full access tooyour storage account.</span></span>
* <span data-ttu-id="9559d-209">如果您的小組使用的儲存體總管應用程式，會保留 hello 儲存體帳戶金鑰，而其中 hello 小組成員會保留另一種情況的金鑰重新產生。</span><span class="sxs-lookup"><span data-stu-id="9559d-209">Another case for key regeneration is if your team is using a Storage Explorer application that retains hello storage account key, and one of hello team members leaves.</span></span> <span data-ttu-id="9559d-210">hello 應用程式會繼續 toowork，提供他們存取 tooyour 儲存體帳戶之後它們消失。</span><span class="sxs-lookup"><span data-stu-id="9559d-210">hello application would continue toowork, giving them access tooyour storage account after they're gone.</span></span> <span data-ttu-id="9559d-211">這是實際 hello 主要原因建立這些帳戶層級共用存取簽章 – 您可以使用帳戶層級 SA，而不是儲存在組態檔中的 hello 便捷鍵。</span><span class="sxs-lookup"><span data-stu-id="9559d-211">This is actually hello primary reason they created account-level Shared Access Signatures – you can use an account-level SAS instead of storing hello access keys in a configuration file.</span></span>

#### <a name="key-regeneration-plan"></a><span data-ttu-id="9559d-212">金鑰重新產生計畫</span><span class="sxs-lookup"><span data-stu-id="9559d-212">Key regeneration plan</span></span>
<span data-ttu-id="9559d-213">您不希望您使用沒有一些規劃 toojust hello 重新產生金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-213">You don't want toojust regenerate hello key you are using without some planning.</span></span> <span data-ttu-id="9559d-214">如果您這樣做，您無法剪下關閉所有存取 toothat 儲存體帳戶，這樣可能會導致主要中斷。</span><span class="sxs-lookup"><span data-stu-id="9559d-214">If you do that, you could cut off all access toothat storage account, which can cause major disruption.</span></span> <span data-ttu-id="9559d-215">這就是為什麼要有兩個金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-215">This is why there are two keys.</span></span> <span data-ttu-id="9559d-216">您一次應該重新產生一個金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-216">You should regenerate one key at a time.</span></span>

<span data-ttu-id="9559d-217">重新產生金鑰之前，先確定您有一份所有應用程式相依於 hello 儲存體帳戶，以及您在 Azure 中使用的其他服務。</span><span class="sxs-lookup"><span data-stu-id="9559d-217">Before you regenerate your keys, be sure you have a list of all of your applications that are dependent on hello storage account, as well as any other services you are using in Azure.</span></span> <span data-ttu-id="9559d-218">例如，如果您使用 Azure Media Services 相依於儲存體帳戶，您必須重新同步處理 hello 存取金鑰與媒體服務之後您重新產生 hello 金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-218">For example, if you are using Azure Media Services that are dependent on your storage account, you must re-sync hello access keys with your media service after you regenerate hello key.</span></span> <span data-ttu-id="9559d-219">如果您使用任何儲存體總管之類的應用程式，您將需要 tooprovide hello 新金鑰 toothose 應用程式以及。</span><span class="sxs-lookup"><span data-stu-id="9559d-219">If you are using any applications such as a storage explorer, you will need tooprovide hello new keys toothose applications as well.</span></span> <span data-ttu-id="9559d-220">請注意，是否您有的 Vm 的 VHD 檔案會儲存在 hello 儲存體帳戶時，它們將不會受到重新產生 hello 儲存體帳戶金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-220">Note that if you have VMs whose VHD files are stored in hello storage account, they will not be affected by regenerating hello storage account keys.</span></span>

<span data-ttu-id="9559d-221">您可以重新產生您 hello Azure 入口網站中的索引鍵。</span><span class="sxs-lookup"><span data-stu-id="9559d-221">You can regenerate your keys in hello Azure portal.</span></span> <span data-ttu-id="9559d-222">一旦重新產生金鑰會佔用 too10 跨儲存體服務的分鐘 toobe 同步處理。</span><span class="sxs-lookup"><span data-stu-id="9559d-222">Once keys are regenerated they can take up too10 minutes toobe synchronized across Storage Services.</span></span>

<span data-ttu-id="9559d-223">當您準備好時，這裡是 hello 一般程序詳述如何，您應該變更您的金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-223">When you're ready, here's hello general process detailing how you should change your key.</span></span> <span data-ttu-id="9559d-224">在此情況下，hello 假設是您目前使用索引鍵 1，而且要 toochange 的所有項目 toouse 改為索引鍵 2。</span><span class="sxs-lookup"><span data-stu-id="9559d-224">In this case, hello assumption is that you are currently using Key 1 and you are going toochange everything toouse Key 2 instead.</span></span>

1. <span data-ttu-id="9559d-225">重新產生金鑰 2 tooensure 很安全。</span><span class="sxs-lookup"><span data-stu-id="9559d-225">Regenerate Key 2 tooensure that it is secure.</span></span> <span data-ttu-id="9559d-226">您可以在 hello Azure 入口網站中。</span><span class="sxs-lookup"><span data-stu-id="9559d-226">You can do this in hello Azure portal.</span></span>
2. <span data-ttu-id="9559d-227">在所有儲存 hello 儲存體金鑰的 hello 應用程式中，變更 hello 儲存體金鑰 toouse 索引鍵 2 的新值。</span><span class="sxs-lookup"><span data-stu-id="9559d-227">In all of hello applications where hello storage key is stored, change hello storage key toouse Key 2's new value.</span></span> <span data-ttu-id="9559d-228">測試並發行 hello 應用程式。</span><span class="sxs-lookup"><span data-stu-id="9559d-228">Test and publish hello application.</span></span>
3. <span data-ttu-id="9559d-229">在所有的 hello 應用程式和服務都已啟動並執行成功，重新產生金鑰 1。</span><span class="sxs-lookup"><span data-stu-id="9559d-229">After all of hello applications and services are up and running successfully, regenerate Key 1.</span></span> <span data-ttu-id="9559d-230">如此可確保任何人都將不再有 toowhom 您未明確提供 hello 新的金鑰存取 toohello 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="9559d-230">This ensures that anybody toowhom you have not expressly given hello new key will no longer have access toohello storage account.</span></span>

<span data-ttu-id="9559d-231">如果您目前使用索引鍵 2，您可以使用相同的處理序，但是反向 hello 索引鍵名稱的 hello。</span><span class="sxs-lookup"><span data-stu-id="9559d-231">If you are currently using Key 2, you can use hello same process, but reverse hello key names.</span></span>

<span data-ttu-id="9559d-232">您可以移轉在幾天，透過變更每個應用程式 toouse hello 新金鑰並將它發行。</span><span class="sxs-lookup"><span data-stu-id="9559d-232">You can migrate over a couple of days, changing each application toouse hello new key and publishing it.</span></span> <span data-ttu-id="9559d-233">它們全部完成之後，您應該也要返回並重新產生 hello 舊金鑰，讓它無法再運作。</span><span class="sxs-lookup"><span data-stu-id="9559d-233">After all of them are done, you should then go back and regenerate hello old key so it no longer works.</span></span>

<span data-ttu-id="9559d-234">另一個選項是 tooput hello 儲存體帳戶金鑰[Azure 金鑰保存庫](https://azure.microsoft.com/services/key-vault/)做為密碼，而且您的應用程式擷取 hello 索引鍵那里。</span><span class="sxs-lookup"><span data-stu-id="9559d-234">Another option is tooput hello storage account key in an [Azure Key Vault](https://azure.microsoft.com/services/key-vault/) as a secret and have your applications retrieve hello key from there.</span></span> <span data-ttu-id="9559d-235">然後當您重新產生 hello 金鑰並更新 hello Azure 金鑰保存庫，hello 應用程式將不會需要 toobe 重新部署，因為它們會自動挑選 hello hello Azure 金鑰保存庫中的新金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-235">Then when you regenerate hello key and update hello Azure Key Vault, hello applications will not need toobe redeployed because they will pick up hello new key from hello Azure Key Vault automatically.</span></span> <span data-ttu-id="9559d-236">請注意，您可以擁有 hello 應用程式讀取 hello 機碼每次需要它，或您可以在記憶體中快取和它失敗時使用它，如果擷取 hello 金鑰一次 hello Azure 金鑰保存庫。</span><span class="sxs-lookup"><span data-stu-id="9559d-236">Note that you can have hello application read hello key each time you need it, or you can cache it in memory and if it fails when using it, retrieve hello key again from hello Azure Key Vault.</span></span>

<span data-ttu-id="9559d-237">使用 Azure 金鑰保存庫，也會增加儲存體金鑰的安全性層級。</span><span class="sxs-lookup"><span data-stu-id="9559d-237">Using Azure Key Vault also adds another level of security for your storage keys.</span></span> <span data-ttu-id="9559d-238">如果您使用這個方法時，您將不必 hello 儲存體金鑰的硬式編碼組態檔中，會移除該途徑的人取得存取 toohello 金鑰沒有特定的權限。</span><span class="sxs-lookup"><span data-stu-id="9559d-238">If you use this method, you will never have hello storage key hardcoded in a configuration file, which removes that avenue of somebody getting access toohello keys without specific permission.</span></span>

<span data-ttu-id="9559d-239">使用 Azure 金鑰保存庫的另一個優點是您也可以控制使用 Azure Active Directory 存取 tooyour 金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-239">Another advantage of using Azure Key Vault is you can also control access tooyour keys using Azure Active Directory.</span></span> <span data-ttu-id="9559d-240">這表示您可以授與存取 toohello 少數需要 tooretrieve hello 索引鍵，從 Azure 金鑰保存庫，且熟悉的其他應用程式，將不會無法 tooaccess hello 機碼，不必授與他們權限特別的應用程式。</span><span class="sxs-lookup"><span data-stu-id="9559d-240">This means you can grant access toohello handful of applications that need tooretrieve hello keys from Azure Key Vault, and know that other applications will not be able tooaccess hello keys without granting them permission specifically.</span></span>

<span data-ttu-id="9559d-241">注意： 建議 toouse 僅 hello 的其中一個索引鍵中的所有應用程式在 hello 相同的時間。</span><span class="sxs-lookup"><span data-stu-id="9559d-241">Note: it is recommended toouse only one of hello keys in all of your applications at hello same time.</span></span> <span data-ttu-id="9559d-242">如果您使用某些地方的索引鍵 1 與索引鍵 2 的其他人，您將不會無法 toorotate 您的金鑰，而不讓您無法存取某些應用程式。</span><span class="sxs-lookup"><span data-stu-id="9559d-242">If you use Key 1 in some places and Key 2 in others, you will not be able toorotate your keys without some application losing access.</span></span>

#### <a name="resources"></a><span data-ttu-id="9559d-243">資源</span><span class="sxs-lookup"><span data-stu-id="9559d-243">Resources</span></span>
* [<span data-ttu-id="9559d-244">關於 Azure 儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="9559d-244">About Azure Storage Accounts</span></span>](storage-create-storage-account.md#regenerate-storage-access-keys)

  <span data-ttu-id="9559d-245">本文提供儲存體帳戶的概觀，並討論如何檢視、複製和重新產生儲存體存取金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-245">This article gives an overview of storage accounts and discusses viewing, copying, and regenerating storage access keys.</span></span>
* [<span data-ttu-id="9559d-246">Azure 儲存體資源提供者 REST API 參考</span><span class="sxs-lookup"><span data-stu-id="9559d-246">Azure Storage Resource Provider REST API Reference</span></span>](https://msdn.microsoft.com/library/mt163683.aspx)

  <span data-ttu-id="9559d-247">本文章包含有關擷取 hello 儲存體帳戶金鑰和重新產生 hello 儲存體帳戶金鑰的連結 toospecific 文件使用 hello REST API 的 Azure 帳戶。</span><span class="sxs-lookup"><span data-stu-id="9559d-247">This article contains links toospecific articles about retrieving hello storage account keys and regenerating hello storage account keys for an Azure Account using hello REST API.</span></span> <span data-ttu-id="9559d-248">注意︰這適用於 Resource Manager 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="9559d-248">Note: This is for  Resource Manager storage accounts.</span></span>
* [<span data-ttu-id="9559d-249">儲存體帳戶的相關作業</span><span class="sxs-lookup"><span data-stu-id="9559d-249">Operations on storage accounts</span></span>](https://msdn.microsoft.com/library/ee460790.aspx)

  <span data-ttu-id="9559d-250">在 hello 儲存體服務管理員 REST API 參考本文章包含連結 toospecific 發行項上擷取和重新產生 hello 使用 hello REST API 的儲存體帳戶金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-250">This article in hello Storage Service Manager REST API Reference contains links toospecific articles on retrieving and regenerating hello storage account keys using hello REST API.</span></span> <span data-ttu-id="9559d-251">注意： 這是 hello 傳統儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="9559d-251">Note: This is for hello Classic storage accounts.</span></span>
* [<span data-ttu-id="9559d-252">說再見 tookey 管理 – 管理使用 Azure AD 存取 tooAzure 儲存體資料</span><span class="sxs-lookup"><span data-stu-id="9559d-252">Say goodbye tookey management – manage access tooAzure Storage data using Azure AD</span></span>](http://www.dushyantgill.com/blog/2015/04/26/say-goodbye-to-key-management-manage-access-to-azure-storage-data-using-azure-ad/)

  <span data-ttu-id="9559d-253">本文將說明如何 toouse Active Directory toocontrol 存取 tooyour Azure 金鑰保存庫中的 Azure 儲存體金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-253">This article shows how toouse Active Directory toocontrol access tooyour Azure Storage keys in Azure Key Vault.</span></span> <span data-ttu-id="9559d-254">它也會示範如何 toouse Azure 自動化作業每小時 tooregenerate hello 索引鍵。</span><span class="sxs-lookup"><span data-stu-id="9559d-254">It also shows how toouse an Azure Automation job tooregenerate hello keys on an hourly basis.</span></span>

## <a name="data-plane-security"></a><span data-ttu-id="9559d-255">資料平面安全性</span><span class="sxs-lookup"><span data-stu-id="9559d-255">Data Plane Security</span></span>
<span data-ttu-id="9559d-256">平面的資料安全性是指 toohello 方法使用的 toosecure hello 資料物件儲存在 Azure 儲存體 – hello blob、 佇列、 表格和檔案。</span><span class="sxs-lookup"><span data-stu-id="9559d-256">Data Plane Security refers toohello methods used toosecure hello data objects stored in Azure Storage – hello blobs, queues, tables, and files.</span></span> <span data-ttu-id="9559d-257">我們已看到方法 tooencrypt hello 資料和安全性的 hello 資料傳輸期間，但您移有關 toohello 物件允許存取嗎？</span><span class="sxs-lookup"><span data-stu-id="9559d-257">We've seen methods tooencrypt hello data and security during transit of hello data, but how do you go about allowing access toohello objects?</span></span>

<span data-ttu-id="9559d-258">基本上有兩種方法來控制存取 toohello 的資料物件本身。</span><span class="sxs-lookup"><span data-stu-id="9559d-258">There are basically two methods for controlling access toohello data objects themselves.</span></span> <span data-ttu-id="9559d-259">hello 第一個是由控制存取 toohello 儲存體帳戶金鑰，且 hello 第二個使用共用存取簽章 toogrant 存取 toospecific 資料物件的一段特定時間。</span><span class="sxs-lookup"><span data-stu-id="9559d-259">hello first is by controlling access toohello storage account keys, and hello second is using Shared Access Signatures toogrant access toospecific data objects for a specific amount of time.</span></span>

<span data-ttu-id="9559d-260">一個例外狀況 toonote 是您可以藉由設定 hello 據以保留 hello blob 的 hello 容器的存取層級允許公用存取 tooyour blob。</span><span class="sxs-lookup"><span data-stu-id="9559d-260">One exception toonote is that you can allow public access tooyour blobs by setting hello access level for hello container that holds hello blobs accordingly.</span></span> <span data-ttu-id="9559d-261">如果您設定容器 tooBlob 或容器的存取權時，它會允許對該容器中的 hello blob 的公開讀取權限。</span><span class="sxs-lookup"><span data-stu-id="9559d-261">If you set access for a container tooBlob or Container, it will allow public read access for hello blobs in that container.</span></span> <span data-ttu-id="9559d-262">這表示具有 URL 指向 tooa blob 容器中的任何人都可以在瀏覽器中開啟它，而不需要使用共用存取簽章，或必須要有 hello 儲存體帳戶金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-262">This means anyone with a URL pointing tooa blob in that container can open it in a browser without using a Shared Access Signature or having hello storage account keys.</span></span>

### <a name="storage-account-keys"></a><span data-ttu-id="9559d-263">儲存體帳戶金鑰</span><span class="sxs-lookup"><span data-stu-id="9559d-263">Storage Account Keys</span></span>
<span data-ttu-id="9559d-264">儲存體帳戶金鑰是由 Azure 的 hello 儲存體帳戶名稱，以及可以是使用的 tooaccess hello 資料儲存物件 hello 儲存體帳戶中建立的 512 位元字串。</span><span class="sxs-lookup"><span data-stu-id="9559d-264">Storage account keys are 512-bit strings created by Azure that, along with hello storage account name, can be used tooaccess hello data objects stored in hello storage account.</span></span>

<span data-ttu-id="9559d-265">例如，您可以讀取 blob，撰寫 tooqueues、 建立資料表，和修改檔案。</span><span class="sxs-lookup"><span data-stu-id="9559d-265">For example, you can read blobs, write tooqueues, create tables, and modify files.</span></span> <span data-ttu-id="9559d-266">許多這些動作可以透過 hello Azure 入口網站，或使用許多儲存體總管應用程式的其中一個。</span><span class="sxs-lookup"><span data-stu-id="9559d-266">Many of these actions can be performed through hello Azure portal, or using one of many Storage Explorer applications.</span></span> <span data-ttu-id="9559d-267">您也可以撰寫程式碼 toouse hello REST API 或其中一個 hello 儲存體用戶端程式庫 tooperform 這些作業。</span><span class="sxs-lookup"><span data-stu-id="9559d-267">You can also write code toouse hello REST API or one of hello Storage Client Libraries tooperform these operations.</span></span>

<span data-ttu-id="9559d-268">因為在 hello hello 章節中討論[管理平面安全性](#management-plane-security)的傳統儲存體帳戶可授與完整存取 toohello Azure 訂用帳戶中，提供存取 toohello 儲存體金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-268">As discussed in hello section on hello [Management Plane Security](#management-plane-security), access toohello storage keys for a Classic storage account can be granted by giving full access toohello Azure subscription.</span></span> <span data-ttu-id="9559d-269">使用 hello Azure Resource Manager 模型的儲存體帳戶存取 toohello 儲存體金鑰可以由角色型存取控制 (RBAC)。</span><span class="sxs-lookup"><span data-stu-id="9559d-269">Access toohello storage keys for a storage account using hello Azure Resource Manager model can be controlled through Role-Based Access Control (RBAC).</span></span>

### <a name="how-toodelegate-access-tooobjects-in-your-account-using-shared-access-signatures-and-stored-access-policies"></a><span data-ttu-id="9559d-270">Toodelegate 存取 tooobjects 帳戶使用共用存取簽章和預存存取原則中的方式</span><span class="sxs-lookup"><span data-stu-id="9559d-270">How toodelegate access tooobjects in your account using Shared Access Signatures and Stored Access Policies</span></span>
<span data-ttu-id="9559d-271">共用存取簽章是字串，包含可能是安全性權杖附加 tooa toodelegate 存取 toostorage 物件可讓您的 URI，並指定條件約束，例如 hello 權限和存取 hello 日期/時間範圍。</span><span class="sxs-lookup"><span data-stu-id="9559d-271">A Shared Access Signature is a string containing a security token that can be attached tooa URI that allows you toodelegate access toostorage objects and specify constraints such as hello permissions and hello date/time range of access.</span></span>

<span data-ttu-id="9559d-272">您可以授與存取 tooblobs、 容器、 佇列訊息、 檔案和資料表。</span><span class="sxs-lookup"><span data-stu-id="9559d-272">You can grant access tooblobs, containers, queue messages, files, and tables.</span></span> <span data-ttu-id="9559d-273">資料表中，您可以實際授與權限 tooaccess 某個範圍的 hello 資料表中的實體藉由指定 hello 磁碟分割和資料列的索引鍵範圍 toowhich 想 hello 使用者 toohave 存取權。</span><span class="sxs-lookup"><span data-stu-id="9559d-273">With tables, you can actually grant permission tooaccess a range of entities in hello table by specifying hello partition and row key ranges toowhich you want hello user toohave access.</span></span> <span data-ttu-id="9559d-274">例如，如果您有資料分割索引鍵為地理狀態儲存的資料，您可以讓某人存取 toojust hello 資料加州的。</span><span class="sxs-lookup"><span data-stu-id="9559d-274">For example, if you have data stored with a partition key of geographical state, you could give someone access toojust hello data for California.</span></span>

<span data-ttu-id="9559d-275">在另一個範例中，您可能會提供 web 應用程式，讓它 toowrite 項目 tooa 佇列 SAS 權杖，並提供背景工作角色應用程式從 hello SAS 權杖 tooget 訊息排入佇列，並進行處理。</span><span class="sxs-lookup"><span data-stu-id="9559d-275">In another example, you might give a web application a SAS token that enables it toowrite entries tooa queue, and give a worker role application a SAS token tooget messages from hello queue and process them.</span></span> <span data-ttu-id="9559d-276">或者，您可以讓一位客戶可以使用 tooupload 圖片 tooa 容器中 Blob 儲存體，並為這些圖片提供 web 應用程式的權限 tooread SAS 權杖。</span><span class="sxs-lookup"><span data-stu-id="9559d-276">Or you could give one customer a SAS token they can use tooupload pictures tooa container in Blob Storage, and give a web application permission tooread those pictures.</span></span> <span data-ttu-id="9559d-277">在這兩種情況下，沒有的重要性分離 – 每個應用程式可以指定只 hello 存取它們需要在排序 tooperform 其工作。</span><span class="sxs-lookup"><span data-stu-id="9559d-277">In both cases, there is a separation of concerns – each application can be given just hello access that they require in order tooperform their task.</span></span> <span data-ttu-id="9559d-278">這是透過 hello 使用共用存取簽章。</span><span class="sxs-lookup"><span data-stu-id="9559d-278">This is possible through hello use of Shared Access Signatures.</span></span>

#### <a name="why-you-want-toouse-shared-access-signatures"></a><span data-ttu-id="9559d-279">為什麼要 toouse 共用存取簽章</span><span class="sxs-lookup"><span data-stu-id="9559d-279">Why you want toouse Shared Access Signatures</span></span>
<span data-ttu-id="9559d-280">為什麼需要 toouse SA，而不是只提供儲存體帳戶金鑰，也就是這麼多容易？</span><span class="sxs-lookup"><span data-stu-id="9559d-280">Why would you want toouse an SAS instead of just giving out your storage account key, which is so much easier?</span></span> <span data-ttu-id="9559d-281">釋出儲存體帳戶金鑰，就像是共用儲存體 kingdom hello 索引鍵。</span><span class="sxs-lookup"><span data-stu-id="9559d-281">Giving out your storage account key is like sharing hello keys of your storage kingdom.</span></span> <span data-ttu-id="9559d-282">它會授與完整存取權限。</span><span class="sxs-lookup"><span data-stu-id="9559d-282">It grants complete access.</span></span> <span data-ttu-id="9559d-283">其他使用者無法使用您的金鑰，並上傳其整個音樂媒體櫃 tooyour 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="9559d-283">Someone could use your keys and upload their entire music library tooyour storage account.</span></span> <span data-ttu-id="9559d-284">他們可能也會使用受病毒感染的版本來取代您的檔案或竊取您的資料。</span><span class="sxs-lookup"><span data-stu-id="9559d-284">They could also replace your files with virus-infected versions, or steal your data.</span></span> <span data-ttu-id="9559d-285">提供無限制的存取 tooyour 儲存體帳戶是應該不能草率的事物。</span><span class="sxs-lookup"><span data-stu-id="9559d-285">Giving away unlimited access tooyour storage account is something that should not be taken lightly.</span></span>

<span data-ttu-id="9559d-286">搭配共用存取簽章，您可以提供用戶端只需要有限的時間內的 hello 權限。</span><span class="sxs-lookup"><span data-stu-id="9559d-286">With Shared Access Signatures, you can give a client just hello permissions required for a limited amount of time.</span></span> <span data-ttu-id="9559d-287">例如，如果有人已上傳 blob tooyour 帳戶，您可以授與他們 （當然，取決於 hello hello blob 大小） 剛好足夠時間 tooupload hello blob 的寫入權限。</span><span class="sxs-lookup"><span data-stu-id="9559d-287">For example, if someone is uploading a blob tooyour account, you can grant them write access for just enough time tooupload hello blob (depending on hello size of hello blob, of course).</span></span> <span data-ttu-id="9559d-288">如果您改變心意，您可以撤銷該存取權。</span><span class="sxs-lookup"><span data-stu-id="9559d-288">And if you change your mind, you can revoke that access.</span></span>

<span data-ttu-id="9559d-289">此外，您可以指定使用 SAS 所提出的要求會限制的 tooa 特定 IP 位址或 IP 位址範圍外部 tooAzure。</span><span class="sxs-lookup"><span data-stu-id="9559d-289">Additionally, you can specify that requests made using a SAS are restricted tooa certain IP address or IP address range external tooAzure.</span></span> <span data-ttu-id="9559d-290">您也可以要求使用特定通訊協定 (HTTPS 或 HTTP/HTTPS) 來提出要求。</span><span class="sxs-lookup"><span data-stu-id="9559d-290">You can also require that requests are made using a specific protocol (HTTPS or HTTP/HTTPS).</span></span> <span data-ttu-id="9559d-291">這表示如果您只想 tooallow HTTPS 流量，您可以設定所需的 hello 通訊協定 tooHTTPS，而 HTTP 流量將會封鎖。</span><span class="sxs-lookup"><span data-stu-id="9559d-291">This means if you only want tooallow HTTPS traffic, you can set hello required protocol tooHTTPS only, and HTTP traffic will be blocked.</span></span>

#### <a name="definition-of-a-shared-access-signature"></a><span data-ttu-id="9559d-292">定義共用存取簽章</span><span class="sxs-lookup"><span data-stu-id="9559d-292">Definition of a Shared Access Signature</span></span>
<span data-ttu-id="9559d-293">共用存取簽章是一組查詢參數附加 toohello URL 指向 hello 資源</span><span class="sxs-lookup"><span data-stu-id="9559d-293">A Shared Access Signature is a set of query parameters appended toohello URL pointing at hello resource</span></span>

<span data-ttu-id="9559d-294">提供資訊 hello 存取允許與 hello 的哪些 hello 允許存取的時間長度。</span><span class="sxs-lookup"><span data-stu-id="9559d-294">that provides information about hello access allowed and hello length of time for which hello access is permitted.</span></span> <span data-ttu-id="9559d-295">以下是範例。這個 URI 會提供五分鐘的讀取權限 tooa blob。</span><span class="sxs-lookup"><span data-stu-id="9559d-295">Here is an example; this URI provides read access tooa blob for five minutes.</span></span> <span data-ttu-id="9559d-296">請注意，SAS 查詢參數必須以 URL 編碼，例如 %3A 用於冒號 (:) 或 %20 用於空格。</span><span class="sxs-lookup"><span data-stu-id="9559d-296">Note that SAS query parameters must be URL Encoded, such as %3A for colon (:) or %20 for a space.</span></span>

```
http://mystorage.blob.core.windows.net/mycontainer/myblob.txt (URL toohello blob)
?sv=2015-04-05 (storage service version)
&st=2015-12-10T22%3A18%3A26Z (start time, in UTC time and URL encoded)
&se=2015-12-10T22%3A23%3A26Z (end time, in UTC time and URL encoded)
&sr=b (resource is a blob)
&sp=r (read access)
&sip=168.1.5.60-168.1.5.70 (requests can only come from this range of IP addresses)
&spr=https (only allow HTTPS requests)
&sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D (signature used for hello authentication of hello SAS)
```

#### <a name="how-hello-shared-access-signature-is-authenticated-by-hello-azure-storage-service"></a><span data-ttu-id="9559d-297">共用存取簽章驗證的 hello hello Azure 儲存體服務的方式</span><span class="sxs-lookup"><span data-stu-id="9559d-297">How hello Shared Access Signature is authenticated by hello Azure Storage Service</span></span>
<span data-ttu-id="9559d-298">Hello 儲存體服務收到 hello 要求時，它會採用 hello 輸入的查詢參數，並建立簽章使用 hello 相同的方法，如 hello 呼叫端程式。</span><span class="sxs-lookup"><span data-stu-id="9559d-298">When hello storage service receives hello request, it takes hello input query parameters and creates a signature using hello same method as hello calling program.</span></span> <span data-ttu-id="9559d-299">然後，它會比較兩個簽章 hello。</span><span class="sxs-lookup"><span data-stu-id="9559d-299">It then compares hello two signatures.</span></span> <span data-ttu-id="9559d-300">如果他們同意，則請 hello 儲存體服務可以檢查 hello 儲存體服務版本 toomake 確認它有效、 確認 hello 目前的日期和時間設定 hello 指定視窗內，請要求確定 hello 存取對應等 toohello 所提出的要求。</span><span class="sxs-lookup"><span data-stu-id="9559d-300">If they agree, then hello storage service can check hello storage service version toomake sure it's valid, verify that hello current date and time are within hello specified window, make sure hello access requested corresponds toohello request made, etc.</span></span>

<span data-ttu-id="9559d-301">比方說，我們上述 url 中，如果 hello URL 指向 tooa 檔案，而不是 blob，此要求會失敗，因為它會指定 blob 的共用存取簽章是該 hello。</span><span class="sxs-lookup"><span data-stu-id="9559d-301">For example, with our URL above, if hello URL was pointing tooa file instead of a blob, this request would fail because it specifies that hello Shared Access Signature is for a blob.</span></span> <span data-ttu-id="9559d-302">如果 hello REST 呼叫的命令是 tooupdate blob，它會失敗，因為 hello 共用存取簽章卻指定只有讀取權限允許的。</span><span class="sxs-lookup"><span data-stu-id="9559d-302">If hello REST command being called was tooupdate a blob, it would fail because hello Shared Access Signature specifies that only read access is permitted.</span></span>

#### <a name="types-of-shared-access-signatures"></a><span data-ttu-id="9559d-303">共用存取簽章的類型</span><span class="sxs-lookup"><span data-stu-id="9559d-303">Types of Shared Access Signatures</span></span>
* <span data-ttu-id="9559d-304">服務層級 SAS 可以是使用的 tooaccess 儲存體帳戶中的特定資源。</span><span class="sxs-lookup"><span data-stu-id="9559d-304">A service-level SAS can be used tooaccess specific resources in a storage account.</span></span> <span data-ttu-id="9559d-305">一些範例要擷取的容器中的 blob 清單、 下載 blob，更新資料表中的實體、 加入訊息 tooa 佇列或上傳檔案 tooa 檔案共用。</span><span class="sxs-lookup"><span data-stu-id="9559d-305">Some examples of this are retrieving a list of blobs in a container, downloading a blob, updating an entity in a table, adding messages tooa queue or uploading a file tooa file share.</span></span>
* <span data-ttu-id="9559d-306">帳戶層級 SAS 可以是使用的 tooaccess 任何項目可以用於服務層級 SAS。</span><span class="sxs-lookup"><span data-stu-id="9559d-306">An account-level SAS can be used tooaccess anything that a service-level SAS can be used for.</span></span> <span data-ttu-id="9559d-307">此外，它可以提供給服務層級 SAS，例如 hello 能力 toocreate 容器、 資料表、 佇列和檔案共用不允許的選項 tooresources。</span><span class="sxs-lookup"><span data-stu-id="9559d-307">Additionally, it can give options tooresources that are not permitted with a service-level SAS, such as hello ability toocreate containers, tables, queues, and file shares.</span></span> <span data-ttu-id="9559d-308">您也可以指定存取 toomultiple 服務一次。</span><span class="sxs-lookup"><span data-stu-id="9559d-308">You can also specify access toomultiple services at once.</span></span> <span data-ttu-id="9559d-309">例如，您可能會提供給該人員存取 tooboth blob 和檔案儲存體帳戶中。</span><span class="sxs-lookup"><span data-stu-id="9559d-309">For example, you might give someone access tooboth blobs and files in your storage account.</span></span>

#### <a name="creating-an-sas-uri"></a><span data-ttu-id="9559d-310">建立 SAS URI</span><span class="sxs-lookup"><span data-stu-id="9559d-310">Creating an SAS URI</span></span>
1. <span data-ttu-id="9559d-311">您可以視需要建立臨機操作的 URI，定義所有 hello 查詢參數的每一次。</span><span class="sxs-lookup"><span data-stu-id="9559d-311">You can create an ad hoc URI on demand, defining all of hello query parameters each time.</span></span>

   <span data-ttu-id="9559d-312">這真的很有彈性，但如果您每次都有一組類似的邏輯參數，使用預存存取原則會是個不錯的做法。</span><span class="sxs-lookup"><span data-stu-id="9559d-312">This is really flexible, but if you have a logical set of parameters that are similar each time, using a Stored Access Policy is a better idea.</span></span>
2. <span data-ttu-id="9559d-313">您可以針對整個容器、檔案共用、表格或佇列建立預存存取原則。</span><span class="sxs-lookup"><span data-stu-id="9559d-313">You can create a Stored Access Policy for an entire container, file share, table, or queue.</span></span> <span data-ttu-id="9559d-314">然後您可以使用它作為 hello hello 您所建立的 SAS Uri。</span><span class="sxs-lookup"><span data-stu-id="9559d-314">Then you can use this as hello basis for hello SAS URIs you create.</span></span> <span data-ttu-id="9559d-315">您可以輕鬆地撤銷以預存存取原則為基礎的權限。</span><span class="sxs-lookup"><span data-stu-id="9559d-315">Permissions based on Stored Access Policies can be easily revoked.</span></span> <span data-ttu-id="9559d-316">您可以向上 too5 原則定義在每個容器、 佇列、 資料表或檔案共用上。</span><span class="sxs-lookup"><span data-stu-id="9559d-316">You can have up too5 policies defined on each container, queue, table, or file share.</span></span>

   <span data-ttu-id="9559d-317">比方說，如果您要 toohave 許多人讀取特定容器中的 hello blob、 您可以建立預存存取原則，指出 「 請提供讀取權限 」 和任何其他設定會 hello 相同每次。</span><span class="sxs-lookup"><span data-stu-id="9559d-317">For example, if you were going toohave many people read hello blobs in a specific container, you could create a Stored Access Policy that says "give read access" and any other settings that will be hello same each time.</span></span> <span data-ttu-id="9559d-318">然後您可以建立使用 hello hello 預存存取原則設定，並指定到期日期/時間 hello SAS URI。</span><span class="sxs-lookup"><span data-stu-id="9559d-318">Then you can create an SAS URI using hello settings of hello Stored Access Policy and specifying hello expiration date/time.</span></span> <span data-ttu-id="9559d-319">hello 利用這是您沒有 toospecify 所有 hello 每次查詢參數。</span><span class="sxs-lookup"><span data-stu-id="9559d-319">hello advantage of this is that you don't have toospecify all of hello query parameters every time.</span></span>

#### <a name="revocation"></a><span data-ttu-id="9559d-320">撤銷</span><span class="sxs-lookup"><span data-stu-id="9559d-320">Revocation</span></span>
<span data-ttu-id="9559d-321">假設您的 SAS 已遭洩漏，或者您想 toochange 它因為公司的安全性或法規遵循需求。</span><span class="sxs-lookup"><span data-stu-id="9559d-321">Suppose your SAS has been compromised, or you want toochange it because of corporate security or regulatory compliance requirements.</span></span> <span data-ttu-id="9559d-322">您要如何撤銷存取 tooa 資源使用該 SAS？</span><span class="sxs-lookup"><span data-stu-id="9559d-322">How do you revoke access tooa resource using that SAS?</span></span> <span data-ttu-id="9559d-323">這取決於您要建立 hello SAS URI 的方式。</span><span class="sxs-lookup"><span data-stu-id="9559d-323">It depends on how you created hello SAS URI.</span></span>

<span data-ttu-id="9559d-324">如果您使用臨機操作的 URI，會有三個選項。</span><span class="sxs-lookup"><span data-stu-id="9559d-324">If you are using ad hoc URI's, you have three options.</span></span> <span data-ttu-id="9559d-325">您可以發出短的到期原則 SAS 權杖，並只需等候 hello SAS tooexpire。</span><span class="sxs-lookup"><span data-stu-id="9559d-325">You can issue SAS tokens with short expiration policies and simply wait for hello SAS tooexpire.</span></span> <span data-ttu-id="9559d-326">您可以重新命名或刪除 hello 資源 （假設 hello 語彙基元為已設定領域的 tooa 單一物件）。</span><span class="sxs-lookup"><span data-stu-id="9559d-326">You can rename or delete hello resource (assuming hello token was scoped tooa single object).</span></span> <span data-ttu-id="9559d-327">您可以變更 hello 儲存體帳戶金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-327">You can change hello storage account keys.</span></span> <span data-ttu-id="9559d-328">這最後一個選項有很大的影響，視多少服務使用該儲存體帳戶，並可能不是您想 toodo 不某些計畫。</span><span class="sxs-lookup"><span data-stu-id="9559d-328">This last option can have a big impact, depending on how many services are using that storage account, and probably isn't something you want toodo without some planning.</span></span>

<span data-ttu-id="9559d-329">如果您使用 SAS，衍生自預存存取原則，您可以移除存取權撤銷 hello 預存存取原則-只可以變更它，因此已過期，或完全移除它。</span><span class="sxs-lookup"><span data-stu-id="9559d-329">If you are using a SAS derived from a Stored Access Policy, you can remove access by revoking hello Stored Access Policy – you can just change it so it has already expired, or you can remove it altogether.</span></span> <span data-ttu-id="9559d-330">這會立即生效，並使每個使用該預存存取原則建立的 SAS 失效。</span><span class="sxs-lookup"><span data-stu-id="9559d-330">This takes effect immediately, and invalidates every SAS created using that Stored Access Policy.</span></span> <span data-ttu-id="9559d-331">更新或移除 hello 預存存取原則，可能會影響使用者存取該特定容器、 檔案共用、 資料表或佇列透過 SAS，但如果 hello 用戶端會寫入，因此他們要求新的 SAS hello 舊變成無效時，這將可以正常運作。</span><span class="sxs-lookup"><span data-stu-id="9559d-331">Updating or removing hello Stored Access Policy may impact people accessing that specific container, file share, table, or queue via SAS, but if hello clients are written so they request a new SAS when hello old one becomes invalid, this will work fine.</span></span>

<span data-ttu-id="9559d-332">因為使用 SAS，衍生自預存存取原則讓您 hello 能力 toorevoke SAS 立即，它是 hello 建議的最佳作法 tooalways 使用盡可能，預存存取原則。</span><span class="sxs-lookup"><span data-stu-id="9559d-332">Because using a SAS derived from a Stored Access Policy gives you hello ability toorevoke that SAS immediately, it is hello recommended best practice tooalways use Stored Access Policies when possible.</span></span>

#### <a name="resources"></a><span data-ttu-id="9559d-333">資源</span><span class="sxs-lookup"><span data-stu-id="9559d-333">Resources</span></span>
<span data-ttu-id="9559d-334">如需詳細資訊，使用共用存取簽章和預存存取原則，完整的範例，請參閱下列文章 toohello:</span><span class="sxs-lookup"><span data-stu-id="9559d-334">For more detailed information on using Shared Access Signatures and Stored Access Policies, complete with examples, please refer toohello following articles:</span></span>

* <span data-ttu-id="9559d-335">這些是 hello 的參考文件。</span><span class="sxs-lookup"><span data-stu-id="9559d-335">These are hello reference articles.</span></span>

  * [<span data-ttu-id="9559d-336">服務 SAS</span><span class="sxs-lookup"><span data-stu-id="9559d-336">Service SAS</span></span>](https://msdn.microsoft.com/library/dn140256.aspx)

    <span data-ttu-id="9559d-337">本文提供使用服務層級 SAS 搭配 Blob、佇列、表格範圍及檔案的範例。</span><span class="sxs-lookup"><span data-stu-id="9559d-337">This article provides examples of using a service-level SAS with blobs, queue messages, table ranges, and files.</span></span>
  * [<span data-ttu-id="9559d-338">建構服務 SAS</span><span class="sxs-lookup"><span data-stu-id="9559d-338">Constructing a service SAS</span></span>](https://msdn.microsoft.com/library/dn140255.aspx)
  * [<span data-ttu-id="9559d-339">建構帳戶 SAS</span><span class="sxs-lookup"><span data-stu-id="9559d-339">Constructing an account SAS</span></span>](https://msdn.microsoft.com/library/mt584140.aspx)
* <span data-ttu-id="9559d-340">這些是使用 hello.NET 用戶端程式庫 toocreate 共用存取簽章和預存存取原則的教學課程。</span><span class="sxs-lookup"><span data-stu-id="9559d-340">These are tutorials for using hello .NET client library toocreate Shared Access Signatures and Stored Access Policies.</span></span>

  * [<span data-ttu-id="9559d-341">使用共用存取簽章 (SAS)</span><span class="sxs-lookup"><span data-stu-id="9559d-341">Using Shared Access Signatures (SAS)</span></span>](../storage-dotnet-shared-access-signature-part-1.md)
  * [<span data-ttu-id="9559d-342">共用存取簽章，第 2 部分： 建立和使用以 hello Blob 服務 SAS</span><span class="sxs-lookup"><span data-stu-id="9559d-342">Shared Access Signatures, Part 2: Create and Use a SAS with hello Blob Service</span></span>](../blobs/storage-dotnet-shared-access-signature-part-2.md)

    <span data-ttu-id="9559d-343">這篇文章包含 hello SAS 模型、 共用存取簽章的範例的說明，hello 最佳作法建議使用的 SAS。</span><span class="sxs-lookup"><span data-stu-id="9559d-343">This article includes an explanation of hello SAS model, examples of Shared Access Signatures, and recommendations for hello best practice use of SAS.</span></span> <span data-ttu-id="9559d-344">也將討論是 hello 撤銷的 hello 授與的權限。</span><span class="sxs-lookup"><span data-stu-id="9559d-344">Also discussed is hello revocation of hello permission granted.</span></span>
* <span data-ttu-id="9559d-345">依 IP 位址 (IP ACL) 限制存取</span><span class="sxs-lookup"><span data-stu-id="9559d-345">Limiting access by IP Address (IP ACLs)</span></span>

  * [<span data-ttu-id="9559d-346">什麼是端點存取控制清單 (ACL)？</span><span class="sxs-lookup"><span data-stu-id="9559d-346">What is an endpoint Access Control List (ACLs)?</span></span>](../../virtual-network/virtual-networks-acl.md)
  * [<span data-ttu-id="9559d-347">建構服務 SAS</span><span class="sxs-lookup"><span data-stu-id="9559d-347">Constructing a Service SAS</span></span>](https://msdn.microsoft.com/library/azure/dn140255.aspx)

    <span data-ttu-id="9559d-348">這是用於服務層級 SAS; hello 參考文件它包含的範例 IP 執行 Acl。</span><span class="sxs-lookup"><span data-stu-id="9559d-348">This is hello reference article for service-level SAS; it includes an example of IP ACLing.</span></span>
  * [<span data-ttu-id="9559d-349">建構帳戶 SAS</span><span class="sxs-lookup"><span data-stu-id="9559d-349">Constructing an Account SAS</span></span>](https://msdn.microsoft.com/library/azure/mt584140.aspx)

    <span data-ttu-id="9559d-350">這是針對帳戶層級 SAS; hello 參考文件它包含的範例 IP 執行 Acl。</span><span class="sxs-lookup"><span data-stu-id="9559d-350">This is hello reference article for account-level SAS; it includes an example of IP ACLing.</span></span>
* <span data-ttu-id="9559d-351">驗證</span><span class="sxs-lookup"><span data-stu-id="9559d-351">Authentication</span></span>

  * [<span data-ttu-id="9559d-352">Hello Azure 儲存體服務的驗證</span><span class="sxs-lookup"><span data-stu-id="9559d-352">Authentication for hello Azure Storage Services</span></span>](https://msdn.microsoft.com/library/azure/dd179428.aspx)
* <span data-ttu-id="9559d-353">共用存取簽章入門教學課程</span><span class="sxs-lookup"><span data-stu-id="9559d-353">Shared Access Signatures Getting Started Tutorial</span></span>

  * [<span data-ttu-id="9559d-354">SAS 入門教學課程</span><span class="sxs-lookup"><span data-stu-id="9559d-354">SAS Getting Started Tutorial</span></span>](https://github.com/Azure-Samples/storage-dotnet-sas-getting-started)

## <a name="encryption-in-transit"></a><span data-ttu-id="9559d-355">傳輸中加密</span><span class="sxs-lookup"><span data-stu-id="9559d-355">Encryption in Transit</span></span>
### <a name="transport-level-encryption--using-https"></a><span data-ttu-id="9559d-356">Transport-Level Encryption – Using HTTPS</span><span class="sxs-lookup"><span data-stu-id="9559d-356">Transport-Level Encryption – Using HTTPS</span></span>
<span data-ttu-id="9559d-357">您應該採取的 Azure 儲存體資料 tooensure hello 安全性的另一個步驟是 tooencrypt hello hello 用戶端與 Azure 儲存體之間的資料。</span><span class="sxs-lookup"><span data-stu-id="9559d-357">Another step you should take tooensure hello security of your Azure Storage data is tooencrypt hello data between hello client and Azure Storage.</span></span> <span data-ttu-id="9559d-358">hello 第一個建議的做法是 tooalways 使用 hello [HTTPS](https://en.wikipedia.org/wiki/HTTPS)通訊協定，可確保透過安全通訊 hello 公用網際網路。</span><span class="sxs-lookup"><span data-stu-id="9559d-358">hello first recommendation is tooalways use hello [HTTPS](https://en.wikipedia.org/wiki/HTTPS) protocol, which ensures secure communication over hello public Internet.</span></span>

<span data-ttu-id="9559d-359">toohave 安全通訊通道，您應該一律使用 HTTPS 呼叫 hello REST Api 或存取物件的儲存體中時。</span><span class="sxs-lookup"><span data-stu-id="9559d-359">toohave a secure communication channel, you should always use HTTPS when calling hello REST APIs or accessing objects in storage.</span></span> <span data-ttu-id="9559d-360">此外，**共用存取簽章**，可能會使用的 toodelegate 存取 tooAzure 儲存物件，包含選項 toospecify 時使用共用存取簽章，如此可確保任何人都可以使用 HTTPS 通訊協定，只有 hello送出使用 SAS 權杖的連結，將會使用 hello 適當的通訊協定。</span><span class="sxs-lookup"><span data-stu-id="9559d-360">Also, **Shared Access Signatures**, which can be used toodelegate access tooAzure Storage objects, include an option toospecify that only hello HTTPS protocol can be used when using Shared Access Signatures, ensuring that anybody sending out links with SAS tokens will use hello proper protocol.</span></span>

<span data-ttu-id="9559d-361">呼叫儲存體帳戶中的 hello REST Api tooaccess 物件，藉由啟用時，您可以強制使用 HTTPS hello[安全傳輸需要](../storage-require-secure-transfer.md)hello 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="9559d-361">You can enforce hello use of HTTPS when calling hello REST APIs tooaccess objects in storage accounts by enabling [Secure transfer required](../storage-require-secure-transfer.md) for hello storage account.</span></span> <span data-ttu-id="9559d-362">啟用此選項後，使用 HTTP 的連線將被拒絕。</span><span class="sxs-lookup"><span data-stu-id="9559d-362">Connections using HTTP will be refused once this is enabled.</span></span>

### <a name="using-encryption-during-transit-with-azure-file-shares"></a><span data-ttu-id="9559d-363">傳輸期間透過 Azure 檔案共用使用加密</span><span class="sxs-lookup"><span data-stu-id="9559d-363">Using encryption during transit with Azure File shares</span></span>
<span data-ttu-id="9559d-364">Azure 檔案儲存體使用 hello REST API 時，支援 HTTPS，但已為 SMB 檔案共用附加 tooa VM 更常使用。</span><span class="sxs-lookup"><span data-stu-id="9559d-364">Azure File storage supports HTTPS when using hello REST API, but is more commonly used as an SMB file share attached tooa VM.</span></span> <span data-ttu-id="9559d-365">SMB 2.1 不支援加密，因此連線之內，才允許 hello 相同 Azure 中的區域。</span><span class="sxs-lookup"><span data-stu-id="9559d-365">SMB 2.1 does not support encryption, so connections are only allowed within hello same region in Azure.</span></span> <span data-ttu-id="9559d-366">不過，SMB 3.0 支援加密，和可在 Windows Server 2012 R2、 Windows 8、 Windows 8.1 和 Windows 10 中，允許跨區域存取甚至 hello 桌面上的存取。</span><span class="sxs-lookup"><span data-stu-id="9559d-366">However, SMB 3.0 supports encryption, and it's available in Windows Server 2012 R2, Windows 8, Windows 8.1, and Windows 10, allowing cross-region access and even access on hello desktop.</span></span>

<span data-ttu-id="9559d-367">請注意，雖然您可以使用 Azure 檔案共用，unix，hello Linux SMB 用戶端還不支援加密，因此只允許存取 Azure 的區域內。</span><span class="sxs-lookup"><span data-stu-id="9559d-367">Note that while Azure File shares can be used with Unix, hello Linux SMB client does not yet support encryption, so access is only allowed within an Azure region.</span></span> <span data-ttu-id="9559d-368">適用於 Linux 的加密支援位於 hello 藍圖 Linux 開發人員負責 SMB 的功能。</span><span class="sxs-lookup"><span data-stu-id="9559d-368">Encryption support for Linux is on hello roadmap of Linux developers responsible for SMB functionality.</span></span> <span data-ttu-id="9559d-369">當他們新增加密時，您會有 hello 相同的功能，以存取 Linux 上的 Azure 檔案共用的 Windows 一樣。</span><span class="sxs-lookup"><span data-stu-id="9559d-369">When they add encryption, you will have hello same ability for accessing an Azure File share on Linux as you do for Windows.</span></span>

<span data-ttu-id="9559d-370">您可以強制 hello 使用加密 hello Azure 檔案服務與啟用[安全傳輸需要](../storage-require-secure-transfer.md)hello 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="9559d-370">You can enforce hello use of encryption with hello Azure Files service by enabling [Secure transfer required](../storage-require-secure-transfer.md) for hello storage account.</span></span> <span data-ttu-id="9559d-371">如果使用 hello REST Api，都需要 HTTPs。</span><span class="sxs-lookup"><span data-stu-id="9559d-371">If using hello REST APIs, HTTPs is required.</span></span> <span data-ttu-id="9559d-372">針對 SMB，只有支援加密的 SMB 連線可以成功連線。</span><span class="sxs-lookup"><span data-stu-id="9559d-372">For SMB, only SMB connections that support encryption will connect successfully.</span></span>

#### <a name="resources"></a><span data-ttu-id="9559d-373">資源</span><span class="sxs-lookup"><span data-stu-id="9559d-373">Resources</span></span>
* [<span data-ttu-id="9559d-374">如何 toouse Linux 的 Azure 檔案儲存體</span><span class="sxs-lookup"><span data-stu-id="9559d-374">How toouse Azure File storage with Linux</span></span>](../storage-how-to-use-files-linux.md)

  <span data-ttu-id="9559d-375">本文將說明如何 toomount Azure 檔案共用上的 Linux 系統和上傳/下載檔案。</span><span class="sxs-lookup"><span data-stu-id="9559d-375">This article shows how toomount an Azure File share on a Linux system and upload/download files.</span></span>
* [<span data-ttu-id="9559d-376">在 Windows 上開始使用 Azure 檔案儲存體</span><span class="sxs-lookup"><span data-stu-id="9559d-376">Get started with Azure File storage on Windows</span></span>](../storage-dotnet-how-to-use-files.md)

  <span data-ttu-id="9559d-377">本文件提供 Azure 檔案共用的概觀以及如何 toomount，並用使用 PowerShell 和.NET。</span><span class="sxs-lookup"><span data-stu-id="9559d-377">This article gives an overview of Azure File shares and how toomount and use them using PowerShell and .NET.</span></span>
* [<span data-ttu-id="9559d-378">Azure 檔案儲存體內部</span><span class="sxs-lookup"><span data-stu-id="9559d-378">Inside Azure File storage</span></span>](https://azure.microsoft.com/blog/inside-azure-file-storage/)

  <span data-ttu-id="9559d-379">本文章宣佈 hello 公開上市的 Azure 檔案儲存體，並提供 hello SMB 3.0 加密相關的技術詳細資料。</span><span class="sxs-lookup"><span data-stu-id="9559d-379">This article announces hello general availability of Azure File storage and provides technical details about hello SMB 3.0 encryption.</span></span>

### <a name="using-client-side-encryption-toosecure-data-that-you-send-toostorage"></a><span data-ttu-id="9559d-380">使用您傳送 toostorage 用戶端加密 toosecure 資料</span><span class="sxs-lookup"><span data-stu-id="9559d-380">Using Client-side encryption toosecure data that you send toostorage</span></span>
<span data-ttu-id="9559d-381">另一個可協助您確保在用戶端應用程式和儲存體之間傳輸時資料安全性的選項是用戶端加密。</span><span class="sxs-lookup"><span data-stu-id="9559d-381">Another option that helps you ensure that your data is secure while being transferred between a client application and Storage is Client-side Encryption.</span></span> <span data-ttu-id="9559d-382">hello 資料之前要傳輸至 Azure 儲存體加密。</span><span class="sxs-lookup"><span data-stu-id="9559d-382">hello data is encrypted before being transferred into Azure Storage.</span></span> <span data-ttu-id="9559d-383">當擷取 hello 資料從 Azure 儲存體，hello 資料解密後收到 hello 用戶端。</span><span class="sxs-lookup"><span data-stu-id="9559d-383">When retrieving hello data from Azure Storage, hello data is decrypted after it is received on hello client side.</span></span> <span data-ttu-id="9559d-384">即使將 hello 網路上加密 hello 資料時，我們建議，您也可以使用 HTTPS，因為它具有內建的協助降低影響 hello hello 資料完整性的網路錯誤的資料完整性檢查。</span><span class="sxs-lookup"><span data-stu-id="9559d-384">Even though hello data is encrypted going across hello wire, we recommend that you also use HTTPS, as it has data integrity checks built in which help mitigate network errors affecting hello integrity of hello data.</span></span>

<span data-ttu-id="9559d-385">用戶端加密也是加密在靜止時，資料的方法，如 hello 資料會以加密格式儲存。</span><span class="sxs-lookup"><span data-stu-id="9559d-385">Client-side encryption is also a method for encrypting your data at rest, as hello data is stored in its encrypted form.</span></span> <span data-ttu-id="9559d-386">我們將討論這 hello > 一節中詳細說明上[加密在靜止](#encryption-at-rest)。</span><span class="sxs-lookup"><span data-stu-id="9559d-386">We'll talk about this in more detail in hello section on [Encryption at Rest](#encryption-at-rest).</span></span>

## <a name="encryption-at-rest"></a><span data-ttu-id="9559d-387">待用加密</span><span class="sxs-lookup"><span data-stu-id="9559d-387">Encryption at Rest</span></span>
<span data-ttu-id="9559d-388">有三個 Azure 功能可提供待用加密。</span><span class="sxs-lookup"><span data-stu-id="9559d-388">There are three Azure features that provide encryption at rest.</span></span> <span data-ttu-id="9559d-389">Azure 磁碟加密是使用的 tooencrypt hello OS 和資料磁碟中的 IaaS 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="9559d-389">Azure Disk Encryption is used tooencrypt hello OS and data disks in IaaS Virtual Machines.</span></span> <span data-ttu-id="9559d-390">其他兩個 hello; 用戶端加密和 SSE – 使用的 tooencrypt 資料在 Azure 儲存體。</span><span class="sxs-lookup"><span data-stu-id="9559d-390">hello other two – Client-side Encryption and SSE – are both used tooencrypt data in Azure Storage.</span></span> <span data-ttu-id="9559d-391">讓我們看看每一個，然後進行比較，並查看每一個的使用時機。</span><span class="sxs-lookup"><span data-stu-id="9559d-391">Let's look at each of these, and then do a comparison and see when each one can be used.</span></span>

<span data-ttu-id="9559d-392">雖然您可以使用用戶端加密 tooencrypt hello 資料傳輸 （這也會以加密格式儲存體中儲存） 中，您可能偏好 hello 傳輸期間 toosimply 使用 HTTPS 和有 hello 資料 toobe 自動加密時，它的方式儲存。</span><span class="sxs-lookup"><span data-stu-id="9559d-392">While you can use Client-side Encryption tooencrypt hello data in transit (which is also stored in its encrypted form in Storage), you may prefer toosimply use HTTPS during hello transfer, and have some way for hello data toobe automatically encrypted when it is stored.</span></span> <span data-ttu-id="9559d-393">有兩種方式 toodo 這-Azure 磁碟加密和 SSE。</span><span class="sxs-lookup"><span data-stu-id="9559d-393">There are two ways toodo this -- Azure Disk Encryption and SSE.</span></span> <span data-ttu-id="9559d-394">使用其中一種 toodirectly 加密的 Vm，所使用的 OS 和資料磁碟上的 hello 資料和其他 hello 是使用的 tooencrypt 資料寫入 tooAzure Blob 儲存體。</span><span class="sxs-lookup"><span data-stu-id="9559d-394">One is used toodirectly encrypt hello data on OS and data disks used by VMs, and hello other is used tooencrypt data written tooAzure Blob Storage.</span></span>

### <a name="storage-service-encryption-sse"></a><span data-ttu-id="9559d-395">儲存體服務加密 (SSE)</span><span class="sxs-lookup"><span data-stu-id="9559d-395">Storage Service Encryption (SSE)</span></span>
<span data-ttu-id="9559d-396">SSE 可讓您 toorequest 寫入它 tooAzure 儲存體時，hello 儲存體服務會自動加密 hello 資料。</span><span class="sxs-lookup"><span data-stu-id="9559d-396">SSE allows you toorequest that hello storage service automatically encrypt hello data when writing it tooAzure Storage.</span></span> <span data-ttu-id="9559d-397">當您從 Azure 儲存體讀取 hello 資料時，將會解密 hello 儲存體服務，在傳回之前。</span><span class="sxs-lookup"><span data-stu-id="9559d-397">When you read hello data from Azure Storage, it will be decrypted by hello storage service before being returned.</span></span> <span data-ttu-id="9559d-398">這可讓您 toosecure 您的資料，而不需要 toomodify 程式碼，或是將加入程式碼 tooany 應用程式。</span><span class="sxs-lookup"><span data-stu-id="9559d-398">This enables you toosecure your data without having toomodify code or add code tooany applications.</span></span>

<span data-ttu-id="9559d-399">這是套用 toohello 整個儲存體帳戶的設定。</span><span class="sxs-lookup"><span data-stu-id="9559d-399">This is a setting that applies toohello whole storage account.</span></span> <span data-ttu-id="9559d-400">您可以啟用和停用此功能藉由變更 hello hello 設定值。</span><span class="sxs-lookup"><span data-stu-id="9559d-400">You can enable and disable this feature by changing hello value of hello setting.</span></span> <span data-ttu-id="9559d-401">toodo，您可以使用 hello Azure 網站、 PowerShell hello Azure CLI、 hello 儲存體資源提供者 REST API 或 hello.NET 儲存體用戶端程式庫。</span><span class="sxs-lookup"><span data-stu-id="9559d-401">toodo this, you can use hello Azure portal, PowerShell, hello Azure CLI, hello Storage Resource Provider REST API, or hello .NET Storage Client Library.</span></span> <span data-ttu-id="9559d-402">根據預設，SSE 已關閉。</span><span class="sxs-lookup"><span data-stu-id="9559d-402">By default, SSE is turned off.</span></span>

<span data-ttu-id="9559d-403">在這個階段中，會由 Microsoft 管理 hello hello 加密所使用的索引鍵。</span><span class="sxs-lookup"><span data-stu-id="9559d-403">At this time, hello keys used for hello encryption are managed by Microsoft.</span></span> <span data-ttu-id="9559d-404">我們一開始產生 hello 索引鍵，並管理 hello 安全儲存體的 hello 索引鍵為 hello 定期輪替，由內部 Microsoft 原則定義。</span><span class="sxs-lookup"><span data-stu-id="9559d-404">We generate hello keys originally, and manage hello secure storage of hello keys as well as hello regular rotation as defined by internal Microsoft policy.</span></span> <span data-ttu-id="9559d-405">Hello 未來，您會取得 hello 能力 toomanage 加密金鑰，並提供 Microsoft 管理的金鑰的移轉路徑 toocustomer 管理的金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-405">In hello future, you will get hello ability toomanage your own encryption keys, and provide a migration path from Microsoft-managed keys toocustomer-managed keys.</span></span>

<span data-ttu-id="9559d-406">這項功能是可供使用 hello Resource Manager 部署模型所建立的 Standard 和 Premium 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="9559d-406">This feature is available for Standard and Premium Storage accounts created using hello Resource Manager deployment model.</span></span> <span data-ttu-id="9559d-407">SSE 適用於僅 tooblock blob 時，分頁 blob，並附加 blob。</span><span class="sxs-lookup"><span data-stu-id="9559d-407">SSE applies only tooblock blobs, page blobs, and append blobs.</span></span> <span data-ttu-id="9559d-408">hello 其他類型的資料，包括資料表、 佇列和檔案，將不會加密。</span><span class="sxs-lookup"><span data-stu-id="9559d-408">hello other types of data, including tables, queues, and files, will not be encrypted.</span></span>

<span data-ttu-id="9559d-409">啟用 SSE 並 hello 資料寫入 tooBlob 儲存體時，只加密資料。</span><span class="sxs-lookup"><span data-stu-id="9559d-409">Data is only encrypted when SSE is enabled and hello data is written tooBlob Storage.</span></span> <span data-ttu-id="9559d-410">啟用或停用 SSE 並不會影響現有的資料。</span><span class="sxs-lookup"><span data-stu-id="9559d-410">Enabling or disabling SSE does not impact existing data.</span></span> <span data-ttu-id="9559d-411">換句話說，當您啟用此加密時，它將不返回並加密已經存在的資料也不會解密已存在於當您停用 SSE hello 資料。</span><span class="sxs-lookup"><span data-stu-id="9559d-411">In other words, when you enable this encryption, it will not go back and encrypt data that already exists; nor will it decrypt hello data that already exists when you disable SSE.</span></span>

<span data-ttu-id="9559d-412">如果您想 toouse 與傳統儲存體帳戶的這項功能，您可以建立新的資源管理員儲存體帳戶，並使用 AzCopy toocopy hello 資料 toohello 新帳戶。</span><span class="sxs-lookup"><span data-stu-id="9559d-412">If you want toouse this feature with a Classic storage account, you can create a new Resource Manager storage account and use AzCopy toocopy hello data toohello new account.</span></span>

### <a name="client-side-encryption"></a><span data-ttu-id="9559d-413">用戶端加密</span><span class="sxs-lookup"><span data-stu-id="9559d-413">Client-side Encryption</span></span>
<span data-ttu-id="9559d-414">討論 hello 加密傳輸中的 hello 資料時，我們曾提及用戶端加密。</span><span class="sxs-lookup"><span data-stu-id="9559d-414">We mentioned client-side encryption when discussing hello encryption of hello data in transit.</span></span> <span data-ttu-id="9559d-415">這項功能可讓您 tooprogrammatically 加密再將它傳送 hello 網路 toobe 寫入 tooAzure 存放裝置，透過用戶端應用程式中的資料和 tooprogrammatically 擷取從 Azure 儲存體後解密資料。</span><span class="sxs-lookup"><span data-stu-id="9559d-415">This feature allows you tooprogrammatically encrypt your data in a client application before sending it across hello wire toobe written tooAzure Storage, and tooprogrammatically decrypt your data after retrieving it from Azure Storage.</span></span>

<span data-ttu-id="9559d-416">這提供在傳輸中的加密，但它也提供 hello 靜止的加密功能。</span><span class="sxs-lookup"><span data-stu-id="9559d-416">This does provide encryption in transit, but it also provides hello feature of Encryption at Rest.</span></span> <span data-ttu-id="9559d-417">請注意，雖然 hello 資料已加密傳輸中，我們仍建議使用 HTTPS tootake 優點 hello 內建的資料完整性檢查，協助減輕影響 hello hello 資料完整性的網路錯誤。</span><span class="sxs-lookup"><span data-stu-id="9559d-417">Note that although hello data is encrypted in transit, we still recommend using HTTPS tootake advantage of hello built-in data integrity checks which help mitigate network errors affecting hello integrity of hello data.</span></span>

<span data-ttu-id="9559d-418">位置，您可以將此範例是如果您有 web 應用程式將 blob 儲存和擷取 blob，而您想 hello 應用程式和資料 toobe 儘可能安全。</span><span class="sxs-lookup"><span data-stu-id="9559d-418">An example of where you might use this is if you have a web application that stores blobs and retrieves blobs, and you want hello application and data toobe as secure as possible.</span></span> <span data-ttu-id="9559d-419">在此情況下，您會使用用戶端加密。</span><span class="sxs-lookup"><span data-stu-id="9559d-419">In that case, you would use client-side encryption.</span></span> <span data-ttu-id="9559d-420">hello hello 用戶端與 hello Azure Blob 服務之間的流量包含加密的 hello 資源，並沒有人可以解譯 hello 資料在傳輸過程中的 deserialization 到您的私用 blob。</span><span class="sxs-lookup"><span data-stu-id="9559d-420">hello traffic between hello client and hello Azure Blob Service contains hello encrypted resource, and nobody can interpret hello data in transit and reconstitute it into your private blobs.</span></span>

<span data-ttu-id="9559d-421">用戶端加密是內建 hello Java 和 hello.NET 儲存體用戶端程式庫，接著使用 hello Azure 金鑰保存庫 Api，讓您 tooimplement 很容易。</span><span class="sxs-lookup"><span data-stu-id="9559d-421">Client-side encryption is built into hello Java and hello .NET storage client libraries, which in turn use hello Azure Key Vault APIs, making it pretty easy for you tooimplement.</span></span> <span data-ttu-id="9559d-422">會使用 hello 信封的技術，且會儲存每個儲存體物件中的 hello 加密所使用的中繼資料加密及解密 hello 資料 hello 程序。</span><span class="sxs-lookup"><span data-stu-id="9559d-422">hello process of encrypting and decrypting hello data uses hello envelope technique, and stores metadata used by hello encryption in each storage object.</span></span> <span data-ttu-id="9559d-423">例如，對 blob，它將它儲存在 hello blob 中繼資料，而佇列，就會加入它 tooeach 佇列訊息。</span><span class="sxs-lookup"><span data-stu-id="9559d-423">For example, for blobs, it stores it in hello blob metadata, while for queues, it adds it tooeach queue message.</span></span>

<span data-ttu-id="9559d-424">Hello 加密本身，您可以產生和管理加密金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-424">For hello encryption itself, you can generate and manage your own encryption keys.</span></span> <span data-ttu-id="9559d-425">您也可以使用 hello Azure 儲存體用戶端程式庫所產生的金鑰，或者您可以擁有 hello Azure 金鑰保存庫產生 hello 的索引鍵。</span><span class="sxs-lookup"><span data-stu-id="9559d-425">You can also use keys generated by hello Azure Storage Client Library, or you can have hello Azure Key Vault generate hello keys.</span></span> <span data-ttu-id="9559d-426">您可以將加密金鑰儲存於內部部署金鑰儲存體中，或將它們儲存在 Azure 金鑰保存庫中。</span><span class="sxs-lookup"><span data-stu-id="9559d-426">You can store your encryption keys in your on-premises key storage, or you can store them in an Azure Key Vault.</span></span> <span data-ttu-id="9559d-427">Azure 金鑰保存庫可讓您 toogrant 存取 toohello 密碼在 Azure 金鑰保存庫 toospecific 使用者使用 Azure Active Directory。</span><span class="sxs-lookup"><span data-stu-id="9559d-427">Azure Key Vault allows you toogrant access toohello secrets in Azure Key Vault toospecific users using Azure Active Directory.</span></span> <span data-ttu-id="9559d-428">這表示不只是任何人都可以用來讀取 hello Azure 金鑰保存庫，和擷取您所使用的用戶端加密 hello 索引鍵。</span><span class="sxs-lookup"><span data-stu-id="9559d-428">This means that not just anybody can read hello Azure Key Vault and retrieve hello keys you're using for client-side encryption.</span></span>

#### <a name="resources"></a><span data-ttu-id="9559d-429">資源</span><span class="sxs-lookup"><span data-stu-id="9559d-429">Resources</span></span>
* [<span data-ttu-id="9559d-430">在 Microsoft Azure 儲存體中使用 Azure 金鑰保存庫加密和解密 blob</span><span class="sxs-lookup"><span data-stu-id="9559d-430">Encrypt and decrypt blobs in Microsoft Azure Storage using Azure Key Vault</span></span>](../blobs/storage-encrypt-decrypt-blobs-key-vault.md)

  <span data-ttu-id="9559d-431">本文將說明如何使用 Azure 金鑰保存庫，包括如何 toocreate hello KEK，並將它儲存在 hello 保存庫中使用 PowerShell toouse 用戶端加密。</span><span class="sxs-lookup"><span data-stu-id="9559d-431">This article shows how toouse client-side encryption with Azure Key Vault, including how toocreate hello KEK and store it in hello vault using PowerShell.</span></span>
* [<span data-ttu-id="9559d-432">Microsoft Azure 儲存體的用戶端加密和 Azure Key Vault 金鑰保存庫</span><span class="sxs-lookup"><span data-stu-id="9559d-432">Client-Side Encryption and Azure Key Vault for Microsoft Azure Storage</span></span>](../storage-client-side-encryption.md)

  <span data-ttu-id="9559d-433">本文章提供用戶端加密的說明，並提供使用 hello 儲存體用戶端程式庫 tooencrypt 和解密資源從 hello 四個儲存體服務的範例。</span><span class="sxs-lookup"><span data-stu-id="9559d-433">This article gives an explanation of client-side encryption, and provides examples of using hello storage client library tooencrypt and decrypt resources from hello four storage services.</span></span> <span data-ttu-id="9559d-434">它也會討論 Azure 金鑰保存庫。</span><span class="sxs-lookup"><span data-stu-id="9559d-434">It also talks about Azure Key Vault.</span></span>

### <a name="using-azure-disk-encryption-tooencrypt-disks-used-by-your-virtual-machines"></a><span data-ttu-id="9559d-435">使用 Azure 磁碟加密 tooencrypt 磁碟供您的虛擬機器</span><span class="sxs-lookup"><span data-stu-id="9559d-435">Using Azure Disk Encryption tooencrypt disks used by your virtual machines</span></span>
<span data-ttu-id="9559d-436">「Azure 磁碟加密」是一個新功能。</span><span class="sxs-lookup"><span data-stu-id="9559d-436">Azure Disk Encryption is a new feature.</span></span> <span data-ttu-id="9559d-437">這項功能可讓您 tooencrypt hello OS 磁碟和 IaaS 虛擬機器使用的資料磁碟。</span><span class="sxs-lookup"><span data-stu-id="9559d-437">This feature allows you tooencrypt hello OS disks and Data disks used by an IaaS Virtual Machine.</span></span> <span data-ttu-id="9559d-438">適用於 Windows、 hello 磁碟會使用業界標準的 BitLocker 加密技術來加密。</span><span class="sxs-lookup"><span data-stu-id="9559d-438">For Windows, hello drives are encrypted using industry-standard BitLocker encryption technology.</span></span> <span data-ttu-id="9559d-439">適用於 Linux，hello 磁碟會使用 hello DM Crypt 技術來加密。</span><span class="sxs-lookup"><span data-stu-id="9559d-439">For Linux, hello disks are encrypted using hello DM-Crypt technology.</span></span> <span data-ttu-id="9559d-440">這是與整合 Azure 金鑰保存庫 tooallow 您 toocontrol 和管理 hello 磁碟加密金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-440">This is integrated with Azure Key Vault tooallow you toocontrol and manage hello disk encryption keys.</span></span>

<span data-ttu-id="9559d-441">hello 解決方案支援 IaaS Vm 的下列案例，當啟用 Microsoft Azure 中的 hello:</span><span class="sxs-lookup"><span data-stu-id="9559d-441">hello solution supports hello following scenarios for IaaS VMs when they are enabled in Microsoft Azure:</span></span>

* <span data-ttu-id="9559d-442">與 Azure 金鑰保存庫整合</span><span class="sxs-lookup"><span data-stu-id="9559d-442">Integration with Azure Key Vault</span></span>
* <span data-ttu-id="9559d-443">標準層 VM：[A、D、DS、G、GS 等系列 IaaS VM](https://azure.microsoft.com/pricing/details/virtual-machines/)</span><span class="sxs-lookup"><span data-stu-id="9559d-443">Standard tier VMs: [A, D, DS, G, GS, and so forth series IaaS VMs](https://azure.microsoft.com/pricing/details/virtual-machines/)</span></span>
* <span data-ttu-id="9559d-444">在 Windows 和 Linux IaaS VM 上啟用加密</span><span class="sxs-lookup"><span data-stu-id="9559d-444">Enabling encryption on Windows and Linux IaaS VMs</span></span>
* <span data-ttu-id="9559d-445">為 Windows IaaS VM 的 OS 和資料磁碟機停用加密</span><span class="sxs-lookup"><span data-stu-id="9559d-445">Disabling encryption on OS and data drives for Windows IaaS VMs</span></span>
* <span data-ttu-id="9559d-446">為 Linux IaaS VM 的資料磁碟機停用加密</span><span class="sxs-lookup"><span data-stu-id="9559d-446">Disabling encryption on data drives for Linux IaaS VMs</span></span>
* <span data-ttu-id="9559d-447">在執行 Windows 用戶端 OS 的 IaaS VM 上啟用加密</span><span class="sxs-lookup"><span data-stu-id="9559d-447">Enabling encryption on IaaS VMs that are running Windows client OS</span></span>
* <span data-ttu-id="9559d-448">在具有掛接路徑的磁碟區上啟用加密</span><span class="sxs-lookup"><span data-stu-id="9559d-448">Enabling encryption on volumes with mount paths</span></span>
* <span data-ttu-id="9559d-449">在使用 mdadm 設定了等量磁碟 (RAID) 的 Linux VM 上啟用加密</span><span class="sxs-lookup"><span data-stu-id="9559d-449">Enabling encryption on Linux VMs that are configured with disk striping (RAID) by using mdadm</span></span>
* <span data-ttu-id="9559d-450">在使用資料磁碟適用之 LVM 的 Linux VM 上啟用加密</span><span class="sxs-lookup"><span data-stu-id="9559d-450">Enabling encryption on Linux VMs by using LVM for data disks</span></span>
* <span data-ttu-id="9559d-451">在使用儲存空間設定的 Windows VM 上啟用加密</span><span class="sxs-lookup"><span data-stu-id="9559d-451">Enabling encryption on Windows VMs that are configured by using storage spaces</span></span>
* <span data-ttu-id="9559d-452">所有 Azure 公用區域皆受到支援</span><span class="sxs-lookup"><span data-stu-id="9559d-452">All Azure public regions are supported</span></span>

<span data-ttu-id="9559d-453">hello 方案不支援下列案例、 功能和技術 hello 版本中的 hello:</span><span class="sxs-lookup"><span data-stu-id="9559d-453">hello solution does not support hello following scenarios, features, and technology in hello release:</span></span>

* <span data-ttu-id="9559d-454">基本層 IaaS VM</span><span class="sxs-lookup"><span data-stu-id="9559d-454">Basic tier IaaS VMs</span></span>
* <span data-ttu-id="9559d-455">在 Linux IaaS VM 的 OS 磁碟機上停用加密</span><span class="sxs-lookup"><span data-stu-id="9559d-455">Disabling encryption on an OS drive for Linux IaaS VMs</span></span>
* <span data-ttu-id="9559d-456">使用 hello 傳統 VM 建立方法所建立的 IaaS Vm</span><span class="sxs-lookup"><span data-stu-id="9559d-456">IaaS VMs that are created by using hello classic VM creation method</span></span>
* <span data-ttu-id="9559d-457">與您的內部部署金鑰管理服務整合</span><span class="sxs-lookup"><span data-stu-id="9559d-457">Integration with your on-premises Key Management Service</span></span>
* <span data-ttu-id="9559d-458">Azure 檔案儲存體 (共用檔案系統)、網路檔案系統 (NFS)、動態磁碟區，以及使用軟體型 RAID 系統設定的 Windows VM</span><span class="sxs-lookup"><span data-stu-id="9559d-458">Azure File storage (shared file system), Network File System (NFS), dynamic volumes, and Windows VMs that are configured with software-based RAID systems</span></span>


> [!NOTE]
> <span data-ttu-id="9559d-459">Linux OS 磁碟加密目前支援下列 Linux 散發套件 hello: RHEL 7.2、 CentOS 7.2n 和 Ubuntu 16.04。</span><span class="sxs-lookup"><span data-stu-id="9559d-459">Linux OS disk encryption is currently supported on hello following Linux distributions: RHEL 7.2, CentOS 7.2n, and Ubuntu 16.04.</span></span>
>
>

<span data-ttu-id="9559d-460">此功能可確保虛擬機器磁碟上的所有待用資料都會在 Azure 儲存體中加密。</span><span class="sxs-lookup"><span data-stu-id="9559d-460">This feature ensures that all data on your virtual machine disks is encrypted at rest in Azure Storage.</span></span>

#### <a name="resources"></a><span data-ttu-id="9559d-461">資源</span><span class="sxs-lookup"><span data-stu-id="9559d-461">Resources</span></span>
* [<span data-ttu-id="9559d-462">Windows 和 Linux IaaS VM 適用的 Azure 磁碟加密</span><span class="sxs-lookup"><span data-stu-id="9559d-462">Azure Disk Encryption for Windows and Linux IaaS VMs</span></span>](https://docs.microsoft.com/en-us/azure/security/azure-security-disk-encryption)

### <a name="comparison-of-azure-disk-encryption-sse-and-client-side-encryption"></a><span data-ttu-id="9559d-463">Azure 磁碟加密、SSE 和用戶端加密的比較</span><span class="sxs-lookup"><span data-stu-id="9559d-463">Comparison of Azure Disk Encryption, SSE, and Client-Side Encryption</span></span>
#### <a name="iaas-vms-and-their-vhd-files"></a><span data-ttu-id="9559d-464">IaaS VM 及其 VHD 檔案</span><span class="sxs-lookup"><span data-stu-id="9559d-464">IaaS VMs and their VHD files</span></span>
<span data-ttu-id="9559d-465">對於 IaaS VM 所使用的磁碟，建議使用 Azure 磁碟加密。</span><span class="sxs-lookup"><span data-stu-id="9559d-465">For disks used by IaaS VMs, we recommend using Azure Disk Encryption.</span></span> <span data-ttu-id="9559d-466">您可以開啟 SSE tooencrypt hello VHD 檔案使用的 tooback 那些磁碟在 Azure 儲存體，但是它只會加密新寫入的資料。</span><span class="sxs-lookup"><span data-stu-id="9559d-466">You can turn on SSE tooencrypt hello VHD files that are used tooback those disks in Azure Storage, but it only encrypts newly written data.</span></span> <span data-ttu-id="9559d-467">這表示如果您建立的 VM，然後 hello 保存 hello VHD 檔案的儲存體帳戶上啟用 SSE hello 所做的變更將會加密，不 hello 原始 VHD 檔案。</span><span class="sxs-lookup"><span data-stu-id="9559d-467">This means if you create a VM and then enable SSE on hello storage account that holds hello VHD file, only hello changes will be encrypted, not hello original VHD file.</span></span>

<span data-ttu-id="9559d-468">如果您使用建立 VM 從 hello Azure Marketplace 映像，就會執行 Azure[淺層複製](https://en.wikipedia.org/wiki/Object_copying)hello 映像 tooyour 的 Azure 儲存體，並儲存體帳戶未加密即使您已啟用 SSE。</span><span class="sxs-lookup"><span data-stu-id="9559d-468">If you create a VM using an image from hello Azure Marketplace, Azure performs a [shallow copy](https://en.wikipedia.org/wiki/Object_copying) of hello image tooyour storage account in Azure Storage, and it is not encrypted even if you have SSE enabled.</span></span> <span data-ttu-id="9559d-469">它會建立 hello VM 並啟動更新 hello 映像之後，SSE 會啟動 hello 資料加密。</span><span class="sxs-lookup"><span data-stu-id="9559d-469">After it creates hello VM and starts updating hello image, SSE will start encrypting hello data.</span></span> <span data-ttu-id="9559d-470">基於這個理由，是最佳 toouse，如果您想要它們完全加密從 hello Azure Marketplace 中的映像建立 Azure Vm 上的磁碟加密。</span><span class="sxs-lookup"><span data-stu-id="9559d-470">For this reason, it's best toouse Azure Disk Encryption on VMs created from images in hello Azure Marketplace if you want them fully encrypted.</span></span>

<span data-ttu-id="9559d-471">如果您加入至 Azure 的預先加密的 VM 從內部部署，您會是能 tooupload hello 加密金鑰 tooAzure 金鑰保存庫，並且繼續使用您已使用內部部署該 vm 的 hello 加密。</span><span class="sxs-lookup"><span data-stu-id="9559d-471">If you bring a pre-encrypted VM into Azure from on-premises, you will be able tooupload hello encryption keys tooAzure Key Vault, and continue using hello encryption for that VM that you were using on-premises.</span></span> <span data-ttu-id="9559d-472">Azure 磁碟加密是啟用的 toohandle 此案例。</span><span class="sxs-lookup"><span data-stu-id="9559d-472">Azure Disk Encryption is enabled toohandle this scenario.</span></span>

<span data-ttu-id="9559d-473">如果您有未加密的 VHD 從內部部署，您可以將它上傳至 hello 圖庫做為自訂映像，並佈建將 VM 從它。</span><span class="sxs-lookup"><span data-stu-id="9559d-473">If you have non-encrypted VHD from on-premises, you can upload it into hello gallery as a custom image and provision a VM from it.</span></span> <span data-ttu-id="9559d-474">如果您這樣使用 hello 資源管理員範本，您可以要求它 tooturn Azure 磁碟加密時它 hello VM 會開機。</span><span class="sxs-lookup"><span data-stu-id="9559d-474">If you do this using hello Resource Manager templates, you can ask it tooturn on Azure Disk Encryption when it boots up hello VM.</span></span>

<span data-ttu-id="9559d-475">當您新增的資料磁碟，並裝載在 hello VM 上時，您可以在 Azure 磁碟加密上開啟該資料磁碟。</span><span class="sxs-lookup"><span data-stu-id="9559d-475">When you add a data disk and mount it on hello VM, you can turn on Azure Disk Encryption on that data disk.</span></span> <span data-ttu-id="9559d-476">便會先加密該資料做為本機磁碟，然後 hello 服務管理層也會這樣對儲存體延遲寫入 hello 存放裝置內容會經過加密。</span><span class="sxs-lookup"><span data-stu-id="9559d-476">It will encrypt that data disk locally first, and then hello service management layer will do a lazy write against storage so hello storage content is encrypted.</span></span>

#### <a name="client-side-encryption"></a><span data-ttu-id="9559d-477">用戶端加密</span><span class="sxs-lookup"><span data-stu-id="9559d-477">Client-side encryption</span></span>
<span data-ttu-id="9559d-478">用戶端加密是 hello 加密您的資料，因為它會加密傳輸中之前，會加密在靜止 hello 資料的最安全的方法。</span><span class="sxs-lookup"><span data-stu-id="9559d-478">Client-side encryption is hello most secure method of encrypting your data, because it encrypts it before transit, and encrypts hello data at rest.</span></span> <span data-ttu-id="9559d-479">不過，但它要求您加入程式碼 tooyour 應用程式使用儲存體，您可能不想 toodo。</span><span class="sxs-lookup"><span data-stu-id="9559d-479">However, it does require that you add code tooyour applications using storage, which you may not want toodo.</span></span> <span data-ttu-id="9559d-480">在這些情況下，您可以為您的資料在傳輸中和靜止 SSE tooencrypt hello 資料使用 HTTPs。</span><span class="sxs-lookup"><span data-stu-id="9559d-480">In those cases, you can use HTTPs for your data in transit, and SSE tooencrypt hello data at rest.</span></span>

<span data-ttu-id="9559d-481">透過用戶端加密，您可以加密表格實體、訊息佇列和 Blob。</span><span class="sxs-lookup"><span data-stu-id="9559d-481">With client-side encryption, you can encrypt table entities, queue messages, and blobs.</span></span> <span data-ttu-id="9559d-482">使用 SSE，您只能加密 Blob。</span><span class="sxs-lookup"><span data-stu-id="9559d-482">With SSE, you can only encrypt blobs.</span></span> <span data-ttu-id="9559d-483">如果您需要資料表和佇列資料 toobe 加密時，您應該使用用戶端加密。</span><span class="sxs-lookup"><span data-stu-id="9559d-483">If you need table and queue data toobe encrypted, you should use client-side encryption.</span></span>

<span data-ttu-id="9559d-484">用戶端加密是完全由 hello 應用程式管理。</span><span class="sxs-lookup"><span data-stu-id="9559d-484">Client-side encryption is managed entirely by hello application.</span></span> <span data-ttu-id="9559d-485">這是 hello 最安全的方式，但沒有需要您 toomake 以程式設計方式變更 tooyour 應用程式而且備妥的金鑰管理程序。</span><span class="sxs-lookup"><span data-stu-id="9559d-485">This is hello most secure approach, but does require you toomake programmatic changes tooyour application and put key management processes in place.</span></span> <span data-ttu-id="9559d-486">當您想 hello 時使用此額外的安全性，在傳輸中和您想要加密您儲存的資料 toobe。</span><span class="sxs-lookup"><span data-stu-id="9559d-486">You would use this when you want hello extra security during transit, and you want your stored data toobe encrypted.</span></span>

<span data-ttu-id="9559d-487">用戶端加密 hello 用戶端上的更多負載，而且您在 tooaccount 這個延展性的計劃，特別是如果您已加密及傳輸大量資料。</span><span class="sxs-lookup"><span data-stu-id="9559d-487">Client-side encryption is more load on hello client, and you have tooaccount for this in your scalability plans, especially if you are encrypting and transferring a lot of data.</span></span>

#### <a name="storage-service-encryption-sse"></a><span data-ttu-id="9559d-488">儲存體服務加密 (SSE)</span><span class="sxs-lookup"><span data-stu-id="9559d-488">Storage Service Encryption (SSE)</span></span>
<span data-ttu-id="9559d-489">SSE 是由 Azure 儲存體所管理。</span><span class="sxs-lookup"><span data-stu-id="9559d-489">SSE is managed by Azure Storage.</span></span> <span data-ttu-id="9559d-490">使用 SSE 不提供 hello 安全性 hello 中的資料傳輸，但它未加密 hello 資料寫入 tooAzure 儲存體。</span><span class="sxs-lookup"><span data-stu-id="9559d-490">Using SSE does not provide for hello security of hello data in transit, but it does encrypt hello data as it is written tooAzure Storage.</span></span> <span data-ttu-id="9559d-491">使用此功能時 hello 效能上沒有任何影響。</span><span class="sxs-lookup"><span data-stu-id="9559d-491">There is no impact on hello performance when using this feature.</span></span>

<span data-ttu-id="9559d-492">您只能使用 SSE 來加密區塊 Blob、附加 Blob 及分頁 Blob。</span><span class="sxs-lookup"><span data-stu-id="9559d-492">You can only encrypt block blobs, append blobs, and page blobs using SSE.</span></span> <span data-ttu-id="9559d-493">如果您需要 tooencrypt 資料表資料或佇列資料，您應該考慮使用用戶端加密。</span><span class="sxs-lookup"><span data-stu-id="9559d-493">If you need tooencrypt table data or queue data, you should consider using client-side encryption.</span></span>

<span data-ttu-id="9559d-494">如果您沒有封存或是您使用做為基礎來建立新的虛擬機器的 VHD 檔案的程式庫，您可以建立新的儲存體帳戶、 啟用 SSE，並再上傳 hello VHD 檔案 toothat 帳戶。</span><span class="sxs-lookup"><span data-stu-id="9559d-494">If you have an archive or library of VHD files that you use as a basis for creating new virtual machines, you can create a new storage account, enable SSE, and then upload hello VHD files toothat account.</span></span> <span data-ttu-id="9559d-495">這些 VHD 檔案將會由 Azure 儲存體加密。</span><span class="sxs-lookup"><span data-stu-id="9559d-495">Those VHD files will be encrypted by Azure Storage.</span></span>

<span data-ttu-id="9559d-496">如果您有 Azure 磁碟加密 hello 磁碟中的 VM 和 SSE hello 持有 hello VHD 檔案的儲存體帳戶上啟用已啟用，它將可以正常運作。它會導致任何新寫入的資料加密兩次。</span><span class="sxs-lookup"><span data-stu-id="9559d-496">If you have Azure Disk Encryption enabled for hello disks in a VM and SSE enabled on hello storage account holding hello VHD files, it will work fine; it will result in any newly-written data being encrypted twice.</span></span>

## <a name="storage-analytics"></a><span data-ttu-id="9559d-497">儲存體分析</span><span class="sxs-lookup"><span data-stu-id="9559d-497">Storage Analytics</span></span>
### <a name="using-storage-analytics-toomonitor-authorization-type"></a><span data-ttu-id="9559d-498">使用儲存體分析 toomonitor 授權類型</span><span class="sxs-lookup"><span data-stu-id="9559d-498">Using Storage Analytics toomonitor authorization type</span></span>
<span data-ttu-id="9559d-499">每個儲存體帳戶，您可以啟用 Azure 儲存體分析 tooperform 記錄，並儲存度量資料。</span><span class="sxs-lookup"><span data-stu-id="9559d-499">For each storage account, you can enable Azure Storage Analytics tooperform logging and store metrics data.</span></span> <span data-ttu-id="9559d-500">當您想要 toocheck hello 效能度量的儲存體帳戶，或需要 tootroubleshoot 儲存體帳戶，因為您會遇到效能問題時，這是很棒的工具 toouse。</span><span class="sxs-lookup"><span data-stu-id="9559d-500">This is a great tool toouse when you want toocheck hello performance metrics of a storage account, or need tootroubleshoot a storage account because you are having performance problems.</span></span>

<span data-ttu-id="9559d-501">另一份資料，您可以在 hello 儲存體分析記錄檔中看到是存取儲存體時使用的其他人的 hello 驗證方法。</span><span class="sxs-lookup"><span data-stu-id="9559d-501">Another piece of data you can see in hello storage analytics logs is hello authentication method used by someone when they access storage.</span></span> <span data-ttu-id="9559d-502">例如，使用 Blob 儲存體，您所見即使用共用存取簽章或 hello 儲存體帳戶金鑰，或如果公用存取的 hello blob。</span><span class="sxs-lookup"><span data-stu-id="9559d-502">For example, with Blob Storage, you can see if they used a Shared Access Signature or hello storage account keys, or if hello blob accessed was public.</span></span>

<span data-ttu-id="9559d-503">這可以是非常有幫助您緊密會保護存取 toostorage 如果項目。</span><span class="sxs-lookup"><span data-stu-id="9559d-503">This can be really helpful if you are tightly guarding access toostorage.</span></span> <span data-ttu-id="9559d-504">比方說，在 Blob 儲存體中，您可以設定所有 hello 容器 tooprivate 和整個應用程式實作 hello SAS 服務使用。</span><span class="sxs-lookup"><span data-stu-id="9559d-504">For example, in Blob Storage you can set all of hello containers tooprivate and implement hello use of an SAS service throughout your applications.</span></span> <span data-ttu-id="9559d-505">然後您可以檢查 hello 記錄定期 toosee 如果使用 hello 儲存體帳戶金鑰，這可能表示有安全性的漏洞，存取您的 blob 或 hello blob 是公用的但它們不應該是。</span><span class="sxs-lookup"><span data-stu-id="9559d-505">Then you can check hello logs regularly toosee if your blobs are accessed using hello storage account keys, which may indicate a breach of security, or if hello blobs are public but they shouldn't be.</span></span>

#### <a name="what-do-hello-logs-look-like"></a><span data-ttu-id="9559d-506">請勿 hello 記錄外觀為何？</span><span class="sxs-lookup"><span data-stu-id="9559d-506">What do hello logs look like?</span></span>
<span data-ttu-id="9559d-507">之後您啟用 hello 儲存體帳戶計量，透過 hello Azure 入口網站記錄、 分析資料將會開始 tooaccumulate 快速。</span><span class="sxs-lookup"><span data-stu-id="9559d-507">After you enable hello storage account metrics and logging through hello Azure portal, analytics data will start tooaccumulate quickly.</span></span> <span data-ttu-id="9559d-508">hello 記錄檔和度量的每項服務位於不同;hello 記錄只會在活動中沒有該儲存體帳戶，而每隔一分鐘、 每小時或每一天，根據您設定的方式，將會記錄 hello 度量時寫入。</span><span class="sxs-lookup"><span data-stu-id="9559d-508">hello logging and metrics for each service is separate; hello logging is only written when there is activity in that storage account, while hello metrics will be logged every minute, every hour, or every day, depending on how you configure it.</span></span>

<span data-ttu-id="9559d-509">hello 記錄檔會儲存在名為 $logs hello 儲存體帳戶中的容器中的區塊 blob。</span><span class="sxs-lookup"><span data-stu-id="9559d-509">hello logs are stored in block blobs in a container named $logs in hello storage account.</span></span> <span data-ttu-id="9559d-510">啟用儲存體分析時，會自動建立此容器。</span><span class="sxs-lookup"><span data-stu-id="9559d-510">This container is automatically created when Storage Analytics is enabled.</span></span> <span data-ttu-id="9559d-511">一旦建立此容器之後，就無法予以刪除，但您可以刪除其內容。</span><span class="sxs-lookup"><span data-stu-id="9559d-511">Once this container is created, you can't delete it, although you can delete its contents.</span></span>

<span data-ttu-id="9559d-512">Hello $logs 容器下的資料夾，每個服務，而且再有子資料夾 hello 年/月/日/小時。</span><span class="sxs-lookup"><span data-stu-id="9559d-512">Under hello $logs container, there is a folder for each service, and then there are subfolders for hello year/month/day/hour.</span></span> <span data-ttu-id="9559d-513">在小時，只要編號 hello 記錄檔。</span><span class="sxs-lookup"><span data-stu-id="9559d-513">Under hour, hello logs are simply numbered.</span></span> <span data-ttu-id="9559d-514">這是什麼 hello 目錄結構看起來像：</span><span class="sxs-lookup"><span data-stu-id="9559d-514">This is what hello directory structure will look like:</span></span>

![記錄檔的檢視](./media/storage-security-guide/image1.png)

<span data-ttu-id="9559d-516">會記錄每個要求 tooAzure 儲存體。</span><span class="sxs-lookup"><span data-stu-id="9559d-516">Every request tooAzure Storage is logged.</span></span> <span data-ttu-id="9559d-517">以下是顯示 hello 較少的第一個欄位的記錄檔的快照集。</span><span class="sxs-lookup"><span data-stu-id="9559d-517">Here's a snapshot of a log file, showing hello first few fields.</span></span>

![記錄檔的快照](./media/storage-security-guide/image2.png)

<span data-ttu-id="9559d-519">您可以查看您可以使用 hello 記錄 tootrack 任何一種呼叫 tooa 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="9559d-519">You can see that you can use hello logs tootrack any kind of calls tooa storage account.</span></span>

#### <a name="what-are-all-of-those-fields-for"></a><span data-ttu-id="9559d-520">這些所有欄位的用途為何？</span><span class="sxs-lookup"><span data-stu-id="9559d-520">What are all of those fields for?</span></span>
<span data-ttu-id="9559d-521">沒有下列 hello 資源中所列的發行項提供 hello hello 清單 hello 記錄檔並使用來進行中的許多欄位。</span><span class="sxs-lookup"><span data-stu-id="9559d-521">There is an article listed in hello resources below that provides hello list of hello many fields in hello logs and what they are used for.</span></span> <span data-ttu-id="9559d-522">以下是 hello 清單的欄位順序：</span><span class="sxs-lookup"><span data-stu-id="9559d-522">Here is hello list of fields in order:</span></span>

![記錄檔中欄位的快照](./media/storage-security-guide/image3.png)

<span data-ttu-id="9559d-524">我們有興趣 hello GetBlob，項目，以及如何就會進行驗證，因此我們需要 toolook 作業類型 Get-Blob"的項目，以及檢查 hello 要求狀態 (4<sup>th</sup>資料行) 和 hello 授權類型 (8<sup>th</sup>資料行)。</span><span class="sxs-lookup"><span data-stu-id="9559d-524">We're interested in hello entries for GetBlob, and how they are authenticated, so we need toolook for entries with operation-type "Get-Blob", and check hello request-status (4<sup>th</sup> column) and hello authorization-type (8<sup>th</sup> column).</span></span>

<span data-ttu-id="9559d-525">例如，在 hello 第一次上述 hello 清單中的幾個資料列、 hello 要求狀態是 「 成功 」 和 hello 授權類型為 「 已驗證 」。</span><span class="sxs-lookup"><span data-stu-id="9559d-525">For example, in hello first few rows in hello listing above, hello request-status is "Success" and hello authorization-type is "authenticated".</span></span> <span data-ttu-id="9559d-526">這表示 hello 要求已驗證使用 hello 儲存體帳戶金鑰。</span><span class="sxs-lookup"><span data-stu-id="9559d-526">This means hello request was validated using hello storage account key.</span></span>

#### <a name="how-are-my-blobs-being-authenticated"></a><span data-ttu-id="9559d-527">如何驗證我的 Blob？</span><span class="sxs-lookup"><span data-stu-id="9559d-527">How are my blobs being authenticated?</span></span>
<span data-ttu-id="9559d-528">以下提供三個我們感興趣的案例。</span><span class="sxs-lookup"><span data-stu-id="9559d-528">We have three cases that we are interested in.</span></span>

1. <span data-ttu-id="9559d-529">hello blob 時為公用，且它使用沒有共用存取簽章的 URL 來存取。</span><span class="sxs-lookup"><span data-stu-id="9559d-529">hello blob is public and it is accessed using a URL without a Shared Access Signature.</span></span> <span data-ttu-id="9559d-530">在此情況下，hello 要求狀態是 「 AnonymousSuccess"和 hello 授權類型為 「 匿名 」。</span><span class="sxs-lookup"><span data-stu-id="9559d-530">In this case, hello request-status is "AnonymousSuccess" and hello authorization-type is "anonymous".</span></span>

   <span data-ttu-id="9559d-531">1.0;2015-11-17T02:01:29.0488963Z;GetBlob;**AnonymousSuccess**;200;124;37;**anonymous**;;mystorage…</span><span class="sxs-lookup"><span data-stu-id="9559d-531">1.0;2015-11-17T02:01:29.0488963Z;GetBlob;**AnonymousSuccess**;200;124;37;**anonymous**;;mystorage…</span></span>
2. <span data-ttu-id="9559d-532">hello blob 是私人的而且搭配共用存取簽章。</span><span class="sxs-lookup"><span data-stu-id="9559d-532">hello blob is private and was used with a Shared Access Signature.</span></span> <span data-ttu-id="9559d-533">在此情況下，hello 要求狀態是 「 SASSuccess"和 hello 授權類型為"sas"。</span><span class="sxs-lookup"><span data-stu-id="9559d-533">In this case, hello request-status is "SASSuccess" and hello authorization-type is "sas".</span></span>

   <span data-ttu-id="9559d-534">1.0;2015-11-16T18:30:05.6556115Z;GetBlob;**SASSuccess**;200;416;64;**sas**;;mystorage…</span><span class="sxs-lookup"><span data-stu-id="9559d-534">1.0;2015-11-16T18:30:05.6556115Z;GetBlob;**SASSuccess**;200;416;64;**sas**;;mystorage…</span></span>
3. <span data-ttu-id="9559d-535">hello blob 是私人的而且 hello 儲存體金鑰已使用的 tooaccess 它。</span><span class="sxs-lookup"><span data-stu-id="9559d-535">hello blob is private and hello storage key was used tooaccess it.</span></span> <span data-ttu-id="9559d-536">Hello 要求狀態是在此情況下，「**成功**"，而且 hello 授權類型 」**驗證**"。</span><span class="sxs-lookup"><span data-stu-id="9559d-536">In this case, hello request-status is "**Success**" and hello authorization-type is "**authenticated**".</span></span>

   <span data-ttu-id="9559d-537">1.0;2015-11-16T18:32:24.3174537Z;GetBlob;**Success**;206;59;22;**authenticated**;mystorage…</span><span class="sxs-lookup"><span data-stu-id="9559d-537">1.0;2015-11-16T18:32:24.3174537Z;GetBlob;**Success**;206;59;22;**authenticated**;mystorage…</span></span>

<span data-ttu-id="9559d-538">您可以使用 hello Microsoft Message Analyzer tooview 和分析這些記錄檔。</span><span class="sxs-lookup"><span data-stu-id="9559d-538">You can use hello Microsoft Message Analyzer tooview and analyze these logs.</span></span> <span data-ttu-id="9559d-539">它包含搜尋和篩選功能。</span><span class="sxs-lookup"><span data-stu-id="9559d-539">It includes search and filter capabilities.</span></span> <span data-ttu-id="9559d-540">比方說，您可能想 toosearch 的執行個體的 GetBlob toosee 如果 hello 使用量不如預期，也就是 toomake 確定其他人不不適當地存取儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="9559d-540">For example, you might want toosearch for instances of GetBlob toosee if hello usage is what you expect, i.e. toomake sure someone is not accessing your storage account inappropriately.</span></span>

#### <a name="resources"></a><span data-ttu-id="9559d-541">資源</span><span class="sxs-lookup"><span data-stu-id="9559d-541">Resources</span></span>
* [<span data-ttu-id="9559d-542">Storage Analytics</span><span class="sxs-lookup"><span data-stu-id="9559d-542">Storage Analytics</span></span>](../storage-analytics.md)

  <span data-ttu-id="9559d-543">這篇文章是儲存體分析的概觀以及如何 tooenable 它們。</span><span class="sxs-lookup"><span data-stu-id="9559d-543">This article is an overview of storage analytics and how tooenable them.</span></span>
* [<span data-ttu-id="9559d-544">儲存體分析記錄檔格式</span><span class="sxs-lookup"><span data-stu-id="9559d-544">Storage Analytics Log Format</span></span>](https://msdn.microsoft.com/library/azure/hh343259.aspx)

  <span data-ttu-id="9559d-545">本文說明 hello 儲存體分析記錄格式，並詳細資料 hello 可用欄位另有規定，包括驗證類型，表示 hello hello 要求使用的驗證類型。</span><span class="sxs-lookup"><span data-stu-id="9559d-545">This article illustrates hello Storage Analytics Log Format, and details hello fields available therein, including authentication-type, which indicates hello type of authentication used for hello request.</span></span>
* [<span data-ttu-id="9559d-546">監視 hello Azure 入口網站中的儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="9559d-546">Monitor a Storage Account in hello Azure portal</span></span>](../storage-monitor-storage-account.md)

  <span data-ttu-id="9559d-547">本文將說明如何 tooconfigure 監視的度量和記錄的儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="9559d-547">This article shows how tooconfigure monitoring of metrics and logging for a storage account.</span></span>
* [<span data-ttu-id="9559d-548">使用 Azure 儲存體度量和記錄、AzCopy 和 Message Analyzer 進行端對端疑難排解</span><span class="sxs-lookup"><span data-stu-id="9559d-548">End-to-End Troubleshooting using Azure Storage Metrics and Logging, AzCopy, and Message Analyzer</span></span>](../storage-e2e-troubleshooting.md)

  <span data-ttu-id="9559d-549">這篇文章討論有關使用儲存體分析 hello 進行疑難排解，並顯示如何 toouse hello Microsoft Message Analyzer。</span><span class="sxs-lookup"><span data-stu-id="9559d-549">This article talks about troubleshooting using hello Storage Analytics and shows how toouse hello Microsoft Message Analyzer.</span></span>
* [<span data-ttu-id="9559d-550">Microsoft Message Analyzer 操作指南</span><span class="sxs-lookup"><span data-stu-id="9559d-550">Microsoft Message Analyzer Operating Guide</span></span>](https://technet.microsoft.com/library/jj649776.aspx)

  <span data-ttu-id="9559d-551">這篇文章 hello 參考 hello Microsoft Message Analyzer，而且包含連結 tooa 教學課程 」、 「 快速入門中和 「 功能摘要。</span><span class="sxs-lookup"><span data-stu-id="9559d-551">This article is hello reference for hello Microsoft Message Analyzer and includes links tooa tutorial, quick start, and feature summary.</span></span>

## <a name="cross-origin-resource-sharing-cors"></a><span data-ttu-id="9559d-552">跨原始來源資源分享 (CORS)</span><span class="sxs-lookup"><span data-stu-id="9559d-552">Cross-Origin Resource Sharing (CORS)</span></span>
### <a name="cross-domain-access-of-resources"></a><span data-ttu-id="9559d-553">跨網域存取資源</span><span class="sxs-lookup"><span data-stu-id="9559d-553">Cross-domain access of resources</span></span>
<span data-ttu-id="9559d-554">在某一個網域中執行的 Web 瀏覽器對來自不同網域的資源提出 HTTP 要求時，這稱為跨原始來源的 HTTP 要求。</span><span class="sxs-lookup"><span data-stu-id="9559d-554">When a web browser running in one domain makes an HTTP request for a resource from a different domain, this is called a cross-origin HTTP request.</span></span> <span data-ttu-id="9559d-555">例如，來自 contoso.com 的 HTML 網頁會對裝載於 fabrikam.blob.core.windows.net 上的 jpeg 提出要求。</span><span class="sxs-lookup"><span data-stu-id="9559d-555">For example, an HTML page served from contoso.com makes a request for a jpeg hosted on fabrikam.blob.core.windows.net.</span></span> <span data-ttu-id="9559d-556">基於安全性理由，瀏覽器會限制從指令碼 (例如 JavaScript) 內初始化的跨原始來源 HTTP 要求。</span><span class="sxs-lookup"><span data-stu-id="9559d-556">For security reasons, browsers restrict cross-origin HTTP requests initiated from within scripts, such as JavaScript.</span></span> <span data-ttu-id="9559d-557">這表示當一些 JavaScript 程式碼，在 contoso.com 上的網頁要求上 fabrikam.blob.core.windows.net 該 jpeg，hello 瀏覽器將不允許 hello 要求。</span><span class="sxs-lookup"><span data-stu-id="9559d-557">This means that when some JavaScript code on a web page on contoso.com requests that jpeg on fabrikam.blob.core.windows.net, hello browser will not allow hello request.</span></span>

<span data-ttu-id="9559d-558">用途這有與 Azure 儲存體 toodo？</span><span class="sxs-lookup"><span data-stu-id="9559d-558">What does this have toodo with Azure Storage?</span></span> <span data-ttu-id="9559d-559">如果您要將靜態資產，例如 JSON 或 XML 資料檔案儲存在 Blob 儲存體使用儲存體帳戶呼叫 Fabrikam、 hello 資產的 hello 網域是 fabrikam.blob.core.windows.net，以及 hello contoso.com web 應用程式不會無法 tooaccess 它們使用 JavaScript，因為 hello 網域不同。</span><span class="sxs-lookup"><span data-stu-id="9559d-559">Well, if you are storing static assets such as JSON or XML data files in Blob Storage using a storage account called Fabrikam, hello domain for hello assets will be fabrikam.blob.core.windows.net, and hello contoso.com web application will not be able tooaccess them using JavaScript because hello domains are different.</span></span> <span data-ttu-id="9559d-560">這也是如果您正在 toocall hello – 例如，資料表儲存體 – Azure 儲存體服務的其中一個會傳回 JSON 資料 toobe hello JavaScript 用戶端所處理，則為 true。</span><span class="sxs-lookup"><span data-stu-id="9559d-560">This is also true if you're trying toocall one of hello Azure Storage Services – such as Table Storage – that return JSON data toobe processed by hello JavaScript client.</span></span>

#### <a name="possible-solutions"></a><span data-ttu-id="9559d-561">可能的解決方案</span><span class="sxs-lookup"><span data-stu-id="9559d-561">Possible solutions</span></span>
<span data-ttu-id="9559d-562">其中一種方式 tooresolve 這是 tooassign"storage.contoso.com"toofabrikam.blob.core.windows.net 類似的自訂網域。</span><span class="sxs-lookup"><span data-stu-id="9559d-562">One way tooresolve this is tooassign a custom domain like "storage.contoso.com" toofabrikam.blob.core.windows.net.</span></span> <span data-ttu-id="9559d-563">hello 問題是，您只能指派該自訂網域 tooone 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="9559d-563">hello problem is that you can only assign that custom domain tooone storage account.</span></span> <span data-ttu-id="9559d-564">如果多個儲存體帳戶中儲存 hello 資產嗎？</span><span class="sxs-lookup"><span data-stu-id="9559d-564">What if hello assets are stored in multiple storage accounts?</span></span>

<span data-ttu-id="9559d-565">另一個方式 tooresolve 這是 toohave hello web 應用程式 act 為 hello 儲存體呼叫的 proxy。</span><span class="sxs-lookup"><span data-stu-id="9559d-565">Another way tooresolve this is toohave hello web application act as a proxy for hello storage calls.</span></span> <span data-ttu-id="9559d-566">這表示如果您要上傳檔案 tooBlob 儲存體，hello web 應用程式會是直接在本機寫入並再將它複製 tooBlob 存放裝置，或者它會讀取所有內容到記憶體又接著加以寫 tooBlob 儲存體。</span><span class="sxs-lookup"><span data-stu-id="9559d-566">This means if you are uploading a file tooBlob Storage, hello web application would either write it locally and then copy it tooBlob Storage, or it would read all of it into memory and then write it tooBlob Storage.</span></span> <span data-ttu-id="9559d-567">或者，您可以撰寫的專用的 web 應用程式 （例如 Web API) 上傳 hello 檔案在本機，並將其寫入 tooBlob 儲存體。</span><span class="sxs-lookup"><span data-stu-id="9559d-567">Alternately, you could write a dedicated web application (such as a Web API) that uploads hello files locally and writes them tooBlob Storage.</span></span> <span data-ttu-id="9559d-568">無論如何，您必須 tooaccount 該函式，當決定 hello 延展性需求。</span><span class="sxs-lookup"><span data-stu-id="9559d-568">Either way, you have tooaccount for that function when determining hello scalability needs.</span></span>

#### <a name="how-can-cors-help"></a><span data-ttu-id="9559d-569">CORS 如何提供協助？</span><span class="sxs-lookup"><span data-stu-id="9559d-569">How can CORS help?</span></span>
<span data-ttu-id="9559d-570">Azure 儲存體可讓您 tooenable CORS – 跨原始資源共用。</span><span class="sxs-lookup"><span data-stu-id="9559d-570">Azure Storage allows you tooenable CORS – Cross Origin Resource Sharing.</span></span> <span data-ttu-id="9559d-571">每個儲存體帳戶，您可以指定可存取該儲存體帳戶中的 hello 資源的網域。</span><span class="sxs-lookup"><span data-stu-id="9559d-571">For each storage account, you can specify domains that can access hello resources in that storage account.</span></span> <span data-ttu-id="9559d-572">例如，在我們以上所述的案例，我們可以 hello fabrikam.blob.core.windows.net 儲存體帳戶上啟用 CORS，並設定它 tooallow 存取 toocontoso.com。然後 hello web 應用程式 contoso.com 可以直接存取 fabrikam.blob.core.windows.net 中的 hello 資源。</span><span class="sxs-lookup"><span data-stu-id="9559d-572">For example, in our case outlined above, we can enable CORS on hello fabrikam.blob.core.windows.net storage account and configure it tooallow access toocontoso.com. Then hello web application contoso.com can directly access hello resources in fabrikam.blob.core.windows.net.</span></span>

<span data-ttu-id="9559d-573">一件事 toonote 是 CORS 允許存取，但它不提供驗證所需的所有非公用存取的儲存體資源。</span><span class="sxs-lookup"><span data-stu-id="9559d-573">One thing toonote is that CORS allows access, but it does not provide authentication, which is required for all non-public access of storage resources.</span></span> <span data-ttu-id="9559d-574">這表示您只能存取 blob 這些是公用，或包含共用存取簽章提供您如果 hello 適當的權限。</span><span class="sxs-lookup"><span data-stu-id="9559d-574">This means you can only access blobs if they are public or you include a Shared Access Signature giving you hello appropriate permission.</span></span> <span data-ttu-id="9559d-575">表格、佇列和檔案沒有公用存取權且需要 SAS。</span><span class="sxs-lookup"><span data-stu-id="9559d-575">Tables, queues, and files have no public access, and require a SAS.</span></span>

<span data-ttu-id="9559d-576">根據預設，所有服務上都會停用 CORS。</span><span class="sxs-lookup"><span data-stu-id="9559d-576">By default, CORS is disabled on all services.</span></span> <span data-ttu-id="9559d-577">您可以使用 hello REST API 或 hello 儲存體用戶端程式庫 toocall 其中 hello 方法 tooset hello 服務原則，以啟用 CORS。</span><span class="sxs-lookup"><span data-stu-id="9559d-577">You can enable CORS by using hello REST API or hello storage client library toocall one of hello methods tooset hello service policies.</span></span> <span data-ttu-id="9559d-578">當您這樣做時，就會在 XML 中包含 CORS 規則。</span><span class="sxs-lookup"><span data-stu-id="9559d-578">When you do that, you include a CORS rule, which is in XML.</span></span> <span data-ttu-id="9559d-579">以下是使用儲存體帳戶的 hello Blob 服務的 hello 設定服務屬性作業已設定的 CORS 規則的範例。</span><span class="sxs-lookup"><span data-stu-id="9559d-579">Here's an example of a CORS rule that has been set using hello Set Service Properties operation for hello Blob Service for a storage account.</span></span> <span data-ttu-id="9559d-580">您可以執行該作業使用 hello 儲存體用戶端程式庫或 hello REST Api 針對 Azure 儲存體。</span><span class="sxs-lookup"><span data-stu-id="9559d-580">You can perform that operation using hello storage client library or hello REST APIs for Azure Storage.</span></span>

```xml
<Cors>    
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com, http://www.fabrikam.com</AllowedOrigins>
        <AllowedMethods>PUT,GET</AllowedMethods>
        <AllowedHeaders>x-ms-meta-data*,x-ms-meta-target*,x-ms-meta-abc</AllowedHeaders>
        <ExposedHeaders>x-ms-meta-*</ExposedHeaders>
        <MaxAgeInSeconds>200</MaxAgeInSeconds>
    </CorsRule>
<Cors>
```

<span data-ttu-id="9559d-581">以下是每一列的意義︰</span><span class="sxs-lookup"><span data-stu-id="9559d-581">Here's what each row means:</span></span>

* <span data-ttu-id="9559d-582">**AllowedOrigins**這會告訴哪些不相符的網域可以要求並接收 hello 儲存體服務中的資料。</span><span class="sxs-lookup"><span data-stu-id="9559d-582">**AllowedOrigins** This tells which non-matching domains can request and receive data from hello storage service.</span></span> <span data-ttu-id="9559d-583">這表示，contoso.com 和 fabrikam.com 可以針對特定的儲存體帳戶向 Blob 儲存體要求資料。</span><span class="sxs-lookup"><span data-stu-id="9559d-583">This says that both contoso.com and fabrikam.com can request data from Blob Storage for a specific storage account.</span></span> <span data-ttu-id="9559d-584">您也可以設定此 tooa 萬用字元 (\*) tooallow 所有網域 tooaccess 都要求。</span><span class="sxs-lookup"><span data-stu-id="9559d-584">You can also set this tooa wildcard (\*) tooallow all domains tooaccess requests.</span></span>
* <span data-ttu-id="9559d-585">**AllowedMethods**這是發出 hello 要求時，可以使用的方法 （HTTP 要求動詞命令） hello 清單。</span><span class="sxs-lookup"><span data-stu-id="9559d-585">**AllowedMethods** This is hello list of methods (HTTP request verbs) that can be used when making hello request.</span></span> <span data-ttu-id="9559d-586">在此範例中，只允許 PUT 和 GET。</span><span class="sxs-lookup"><span data-stu-id="9559d-586">In this example, only PUT and GET are allowed.</span></span> <span data-ttu-id="9559d-587">您可以設定此 tooa 萬用字元 (\*) 使用的所有方法 toobe tooallow。</span><span class="sxs-lookup"><span data-stu-id="9559d-587">You can set this tooa wildcard (\*) tooallow all methods toobe used.</span></span>
* <span data-ttu-id="9559d-588">**AllowedHeaders** hello 提出 hello 要求時，可以指定 hello 原始網域的標頭的要求。</span><span class="sxs-lookup"><span data-stu-id="9559d-588">**AllowedHeaders** This is hello request headers that hello origin domain can specify when making hello request.</span></span> <span data-ttu-id="9559d-589">在此範例中，允許以 x-ms-meta-data、x-ms-meta-target 及 x-ms-meta-abc 開頭的所有中繼資料標頭。</span><span class="sxs-lookup"><span data-stu-id="9559d-589">In this example, all metadata headers starting with x-ms-meta-data, x-ms-meta-target, and x-ms-meta-abc are permitted.</span></span> <span data-ttu-id="9559d-590">hello 萬用字元 (\*) 表示 hello 任何標頭開頭指定允許前置詞。</span><span class="sxs-lookup"><span data-stu-id="9559d-590">hello wildcard character (\*) indicates that any header beginning with hello specified prefix is allowed.</span></span>
* <span data-ttu-id="9559d-591">**ExposedHeaders**這樣做會告知 hello 瀏覽器 toohello 要求簽發者應公開的回應標頭。</span><span class="sxs-lookup"><span data-stu-id="9559d-591">**ExposedHeaders** This tells which response headers should be exposed by hello browser toohello request issuer.</span></span> <span data-ttu-id="9559d-592">在此範例中，將公開任何以 "x-ms-meta-" 開頭的標頭。</span><span class="sxs-lookup"><span data-stu-id="9559d-592">In this example, any header starting with "x-ms-meta-" will be exposed.</span></span>
* <span data-ttu-id="9559d-593">**MaxAgeInSeconds**這是 hello 的瀏覽器將會快取預檢 OPTIONS 要求 hello 的時間長度上限。</span><span class="sxs-lookup"><span data-stu-id="9559d-593">**MaxAgeInSeconds** This is hello maximum amount of time that a browser will cache hello preflight OPTIONS request.</span></span> <span data-ttu-id="9559d-594">（如需 hello 預檢要求的詳細資訊，請檢查 hello 第一篇文章下方）。</span><span class="sxs-lookup"><span data-stu-id="9559d-594">(For more information about hello preflight request, check hello first article below.)</span></span>

#### <a name="resources"></a><span data-ttu-id="9559d-595">資源</span><span class="sxs-lookup"><span data-stu-id="9559d-595">Resources</span></span>
<span data-ttu-id="9559d-596">如需 CORS 和如何 tooenable，請簽出這些資源。</span><span class="sxs-lookup"><span data-stu-id="9559d-596">For more information about CORS and how tooenable it, please check out these resources.</span></span>

* [<span data-ttu-id="9559d-597">Hello Azure.com 上的 Azure 儲存體服務的跨原始資源共用 (CORS) 支援</span><span class="sxs-lookup"><span data-stu-id="9559d-597">Cross-Origin Resource Sharing (CORS) Support for hello Azure Storage Services on Azure.com</span></span>](../storage-cors-support.md)

  <span data-ttu-id="9559d-598">本文章提供 CORS 和 tooset hello 規則 hello 不同儲存體服務之方式的概觀。</span><span class="sxs-lookup"><span data-stu-id="9559d-598">This article provides an overview of CORS and how tooset hello rules for hello different storage services.</span></span>
* [<span data-ttu-id="9559d-599">Hello MSDN 上的 Azure 儲存體服務的跨原始資源共用 (CORS) 支援</span><span class="sxs-lookup"><span data-stu-id="9559d-599">Cross-Origin Resource Sharing (CORS) Support for hello Azure Storage Services on MSDN</span></span>](https://msdn.microsoft.com/library/azure/dn535601.aspx)

  <span data-ttu-id="9559d-600">這是 hello hello Azure 儲存體服務的 CORS 支援的參考文件集。</span><span class="sxs-lookup"><span data-stu-id="9559d-600">This is hello reference documentation for CORS support for hello Azure Storage Services.</span></span> <span data-ttu-id="9559d-601">這有連結 tooarticles 套用 tooeach 儲存體服務，顯示範例和說明 hello CORS 檔案中的每個項目。</span><span class="sxs-lookup"><span data-stu-id="9559d-601">This has links tooarticles applying tooeach storage service, and shows an example and explains each element in hello CORS file.</span></span>
* [<span data-ttu-id="9559d-602">Microsoft Azure 儲存體︰CORS 簡介</span><span class="sxs-lookup"><span data-stu-id="9559d-602">Microsoft Azure Storage: Introducing CORS</span></span>](http://blogs.msdn.com/b/windowsazurestorage/archive/2014/02/03/windows-azure-storage-introducing-cors.aspx)

  <span data-ttu-id="9559d-603">這是連結 toohello 初始部落格文章宣佈適用於 CORS 和顯示方式 toouse 它。</span><span class="sxs-lookup"><span data-stu-id="9559d-603">This is a link toohello initial blog article announcing CORS and showing how toouse it.</span></span>

## <a name="frequently-asked-questions-about-azure-storage-security"></a><span data-ttu-id="9559d-604">關於 Azure 儲存體安全性的常見問題集</span><span class="sxs-lookup"><span data-stu-id="9559d-604">Frequently asked questions about Azure Storage security</span></span>
1. <span data-ttu-id="9559d-605">**如何確認我無法使用 hello HTTPS 通訊協定將傳入或傳出 Azure 儲存體的 hello blob hello 完整性？**</span><span class="sxs-lookup"><span data-stu-id="9559d-605">**How can I verify hello integrity of hello blobs I'm transferring into or out of Azure Storage if I can't use hello HTTPS protocol?**</span></span>

   <span data-ttu-id="9559d-606">如果因故需要的 toouse HTTP 而非 HTTPS 與您正在使用區塊 blob，您可以使用 MD5 檢查 toohelp 會驗證要傳輸的 hello blob hello 完整性。</span><span class="sxs-lookup"><span data-stu-id="9559d-606">If for any reason you need toouse HTTP instead of HTTPS and you are working with block blobs, you can use MD5 checking toohelp verify hello integrity of hello blobs being transferred.</span></span> <span data-ttu-id="9559d-607">這有助於提供保護以防止發生網路/傳輸層錯誤，但不一定是媒介攻擊。</span><span class="sxs-lookup"><span data-stu-id="9559d-607">This will help with protection from network/transport layer errors, but not necessarily with intermediary attacks.</span></span>

   <span data-ttu-id="9559d-608">如果您可以使用 HTTPS 來提供傳輸層安全性，則使用 MD5 檢查是多餘且不必要的。</span><span class="sxs-lookup"><span data-stu-id="9559d-608">If you can use HTTPS, which provides transport level security, then using MD5 checking is redundant and unnecessary.</span></span>

   <span data-ttu-id="9559d-609">如需詳細資訊，請簽出 hello [Azure Blob MD5 概觀](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/02/18/windows-azure-blob-md5-overview.aspx)。</span><span class="sxs-lookup"><span data-stu-id="9559d-609">For more information, please check out hello [Azure Blob MD5 Overview](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/02/18/windows-azure-blob-md5-overview.aspx).</span></span>
2. <span data-ttu-id="9559d-610">**Hello 美國的 FIPS 相容的情況為何為何？**</span><span class="sxs-lookup"><span data-stu-id="9559d-610">**What about FIPS-Compliance for hello U.S. Government?**</span></span>

   <span data-ttu-id="9559d-611">hello 美國聯邦資訊處理標準 (FIPS) 定義由美國核准使用的密碼編譯演算法美國聯邦政府 hello 保護機密資料的電腦系統。</span><span class="sxs-lookup"><span data-stu-id="9559d-611">hello United States Federal Information Processing Standard (FIPS) defines cryptographic algorithms approved for use by U.S. Federal government computer systems for hello protection of sensitive data.</span></span> <span data-ttu-id="9559d-612">啟用 FIPS 模式在 Windows server 或桌面會告知 hello OS 應僅 FIPS 驗證的密碼編譯演算法。</span><span class="sxs-lookup"><span data-stu-id="9559d-612">Enabling FIPS mode on a Windows server or desktop tells hello OS that only FIPS-validated cryptographic algorithms should be used.</span></span> <span data-ttu-id="9559d-613">如果應用程式不相容的演算法，將會中斷 hello 應用程式。</span><span class="sxs-lookup"><span data-stu-id="9559d-613">If an application uses non-compliant algorithms, hello applications will break.</span></span> <span data-ttu-id="9559d-614">以 framework 4.5.2 或更高版本，hello 應用程式時自動切換 hello 的密碼編譯演算法 toouse FIPS 相容演算法 hello 電腦處於啟用 FIPS 模式。</span><span class="sxs-lookup"><span data-stu-id="9559d-614">With.NET Framework versions 4.5.2 or higher, hello application automatically switches hello cryptography algorithms toouse FIPS-compliant algorithms when hello computer is in FIPS mode.</span></span>

   <span data-ttu-id="9559d-615">Microsoft 保留向上 tooeach 客戶 toodecide 是否 tooenable FIPS 模式。</span><span class="sxs-lookup"><span data-stu-id="9559d-615">Microsoft leaves it up tooeach customer toodecide whether tooenable FIPS mode.</span></span> <span data-ttu-id="9559d-616">我們認為沒有沒有充分的理由，不是主體 toogovernment 法規 tooenable FIPS 模式預設的客戶。</span><span class="sxs-lookup"><span data-stu-id="9559d-616">We believe there is no compelling reason for customers who are not subject toogovernment regulations tooenable FIPS mode by default.</span></span>

   <span data-ttu-id="9559d-617">**資源**</span><span class="sxs-lookup"><span data-stu-id="9559d-617">**Resources**</span></span>

* [<span data-ttu-id="9559d-618">Why We’re Not Recommending "FIPS Mode" Anymore (為什麼我們不再建議「FIPS 模式」)</span><span class="sxs-lookup"><span data-stu-id="9559d-618">Why We're Not Recommending "FIPS Mode" Anymore</span></span>](http://blogs.technet.com/b/secguide/archive/2014/04/07/why-we-re-not-recommending-fips-mode-anymore.aspx)

  <span data-ttu-id="9559d-619">此部落格文章提供 FIPS 概觀，並說明他們為什麼預設不啟用 FIPS 模式。</span><span class="sxs-lookup"><span data-stu-id="9559d-619">This blog article gives an overview of FIPS and explains why they don't enable FIPS mode by default.</span></span>
* [<span data-ttu-id="9559d-620">FIPS 140 Validation (FIPS 140 驗證)</span><span class="sxs-lookup"><span data-stu-id="9559d-620">FIPS 140 Validation</span></span>](https://technet.microsoft.com/library/cc750357.aspx)

  <span data-ttu-id="9559d-621">本文提供如何 Microsoft 產品和密碼編譯模組符合 hello FIPS 標準 hello 美國地區資訊的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="9559d-621">This article provides information on how Microsoft products and cryptographic modules comply with hello FIPS standard for hello U.S. Federal government.</span></span>
* [<span data-ttu-id="9559d-622">Windows XP 和 Windows 的更新版本中「系統密碼編譯︰使用符合 FIPS 規範的演算法進行加密，雜湊，以及簽章」安全性設定的效果</span><span class="sxs-lookup"><span data-stu-id="9559d-622">"System cryptography: Use FIPS compliant algorithms for encryption, hashing, and signing" security settings effects in Windows XP and in later versions of Windows</span></span>](https://support.microsoft.com/kb/811833)

  <span data-ttu-id="9559d-623">這篇文章討論 hello 使用 FIPS 模式中較舊的 Windows 電腦的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="9559d-623">This article talks about hello use of FIPS mode in older Windows computers.</span></span>
