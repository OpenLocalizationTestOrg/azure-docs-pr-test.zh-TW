---
title: "Blob 的 Azure 經常性存取、非經常性存取和封存儲存體 | Microsoft Docs"
description: "Azure 儲存體帳戶的經常性存取、非經常性存取和封存儲存體。"
services: storage
documentationcenter: 
author: kuhussai
manager: jwillis
editor: 
ms.assetid: eb33ed4f-1b17-4fd6-82e2-8d5372800eef
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 12/11/2017
ms.author: kuhussai
ms.openlocfilehash: be84f68a044a73673e991f04c7fe36a7787b9c3c
ms.sourcegitcommit: 7edfa9fbed0f9e274209cec6456bf4a689a4c1a6
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/17/2018
---
# <a name="azure-blob-storage-hot-cool-and-archive-storage-tiers"></a>Azure Blob 儲存體︰經常性存取、非經常性存取和封存儲存層

## <a name="overview"></a>概觀

Azure 儲存體會為 Blob 物件儲存體提供三個儲存層，所以您可根據資料使用方式，以最符合成本效益的方式進行儲存。 Azure **經常性存取儲存層** 已最佳化，可用於儲存經常存取的資料。 Azure **非經常性存取儲存層**已最佳化，可用於儲存不常存取且至少儲存 30 天的資料。 Azure **封存儲存層**最適合用於儲存很少存取且至少儲存 180 天 (有彈性的延遲需求，大約數小時) 的資料。 封存儲存層只可使用於 Blob 層級，而不可使用於儲存體帳戶層級。 非經常性存取儲存層中的資料可容忍稍微較低的可用性，但仍要求高持久性以及與經常性存取資料類似的存取時間和輸送量特性。 對於非經常性存取資料而言，稍微較低的可用性 SLA 和更高的存取成本 (相較於經常性存取資料) 是可接受的取捨，可讓儲存成本降低。 封存儲存體已離線並提供最低的儲存成本，但存取成本最高。

現今，儲存在雲端的資料迅速成長。 若要管理您不斷擴充的儲存體需求的成本，根據存取頻率和計劃性保留期來組織您的資料，進而將成本最佳化很有幫助。 就資料在存留期內的產生、處理和存取方式而言，儲存在雲端的資料可能不同。 有些資料在其存留期內會積極地存取及修改。 有些資料在其存留期的早期存取頻率很高，但存取頻率隨著資料老化而大幅下滑。 有些資料在雲端維持閒置，而且儲存後就很少存取。

上述每個資料存取案例均受惠於針對特定存取模式最佳化的不同儲存層。 使用經常性存取、非經常性存取和封存儲存層，Azure Blob 儲存體可透過各種價格模式，滿足差異化儲存層的這項需求。

## <a name="storage-accounts-that-support-tiering"></a>支援階層處理的儲存體帳戶

您只能將物件儲存體資料處理為 Blob 儲存體或一般用途 v2 (GPv2) 帳戶中的經常性存取、非經常性存取或封存層。 一般用途 v1 (GPv1) 帳戶不支援階層處理。 不過，客戶可以透過 Azure 入口網站中簡單的單鍵程序，輕鬆地將現有的 GPv1 或 Blob 儲存體帳戶轉換為 GPv2 帳戶。 GPv2 提供 blob、檔案和佇列的新價格結構，而且可供存取各種不同的其他新儲存體功能。 此外，接下來只會在 GPv2 帳戶中提供一些新功能與降價。 因此，客戶應評估使用 GPv2 帳戶，但請在檢閱所有服務的價格之後才使用這類帳戶，因為有些工作負載在 GPv2 上可能會比在 GPv1 上昂貴。 若要深入了解，請參閱 [Azure 儲存體帳戶選項](../common/storage-account-options.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json)。

Blob 儲存體和 GPv2 帳戶會在帳戶層級公開 [存取層] 屬性，這可讓您針對儲存體帳戶中未在物件層級設定儲存層的任何 Blob，將預設儲存層指定為經常性存取或非經常性存取。 對於已在物件層級設定儲存層的物件，不會套用此帳戶層。 封存層只能套用在物件層級。 您可以隨時在這些儲存層之間切換。

## <a name="hot-access-tier"></a>經常性存取層

經常性存取儲存層的儲存成本會高於非經常性存取和封存儲存層，但存取成本最低。 經常性存取儲存層的使用案例範例包括︰

* 使用中或預期會經常存取 (讀取和寫入) 的資料。
* 資料會預備好進行處理且最終移轉至非經常性存取儲存層。

## <a name="cool-access-tier"></a>非經常性存取層

相較於經常性存取儲存層，非經常性儲存層具有較低的儲存成本和較高的存取成本。 這一層適用於將保留在非經常性存取層至少 30 天的資料。 非經常性存取儲存層的使用案例範例包括︰

* 短期備份和災害復原資料集。
* 不再經常檢視，但存取時應立即可用的較舊媒體內容。
* 當收集較多資料以供未來處理時，需要以符合成本效益方式預存的大型資料集。 (例如，科學資料、來自製造工廠的原始遙測資料等長期儲存)

## <a name="archive-access-tier"></a>封存存取層

封存儲存體的儲存成本最低，而相較於經常性存取和非經常性存取儲存體，其資料擷取成本比較高。 這一層適用於可承受擷取延遲數個小時，而且將保留在封存層中至少 180 天的資料。

當 blob 位於封存儲存體時，它已離線且無法加以讀取 (中繼資料除外，其為線上且可用狀態)、複製、覆寫或修改。 您也無法製作封存儲存體中的 blob 快照。 不過，您可以使用現有的作業來刪除、列出、取得 blob 屬性/中繼資料，或變更您的 blob 層。

封存儲存層的使用案例範例包括︰

* 長期備份、封存和災害復原資料集
* 即使已處理成最終可用格式，但還是需要保存的原始資料。 (例如，轉碼成其他格式之後的原始媒體檔案)
* 需要儲存一段時間且幾乎不曾存取的相容性和封存資料。 (例如，保全攝影機錄影畫面、醫療機構的舊 X 光/MRI、金融服務的客服電話錄音和文字記錄)

### <a name="blob-rehydration"></a>Blob 解除凍結
若要閱讀封存儲存體中的資料，您必須先將 blob 層變更為經常性存取或非經常性存取。 此程序稱為解除凍結，最多可能需要 15 小時才能完成。 為了達到最佳效能，強烈建議使用大型 blob 大小。 同時解除凍結數個小型 blob 可能會增加額外時間。

在解除凍結期間，您可以查看 [封存狀態] blob 屬性，以確認是儲存層否已變更。 視目的地層而定，狀態會顯示為 "rehydrate-pending-to-hot" 或 "rehydrate-pending-to-cool"。 完成時，系統會移除封存狀態屬性，而 [存取層] blob 屬性會反映新的經常性存取或非經常性存取層。  

## <a name="blob-level-tiering"></a>Blob 層級的階層處理

Blob 層級的階層處理可讓您使用稱為[設定 Blob 層](/rest/api/storageservices/set-blob-tier)的單一作業，在物件層級變更您的資料層。 您可以隨著使用模式變更，在經常性存取、非經常性存取或封存層之間輕鬆地變更 blob 的存取層，而不必在帳戶之間移動資料。 所有的存取層變更都會立即發生，但是當 blob 從封存解除凍結時除外，這可能花費數小時的時間。 最後一個 blob 層變更的時間會透過 [存取層變更時間] blob 屬性公開。 如果 blob 位於封存層中，則可能不會遭到覆寫，因此，在此情況下不允許上傳相同的 blob。 您可以覆寫經常性存取和非經常性存取中的 blob，而在此情況下，新的 blob 會繼承已被覆寫之舊 blob 的儲存層。

三個儲存層中的 blob 都可以共存於相同的帳戶中。 任何沒有明確指派之階層的 blob 都會從帳戶存取層設定推斷階層。 如果存取層是從帳戶推斷而來，您會看到 [推斷的存取層] blob 屬性設定為"true"，而且 blob [存取層] blob 屬性符合帳戶層。 在 Azure 入口網站中，推斷的存取層屬性會顯示 blob 存取層 (例如，經常性存取 (推斷) 或非經常性存取 (推斷))。

> [!NOTE]
> 封存儲存體與 Blob 層級階層處理只支援區塊 blob。 您也無法變更具有快照集之區塊 blob 的存取層。

### <a name="blob-level-tiering-billing"></a>Blob 層級的階層處理計費

當 blob 移至存取頻率較低的階層 (經常性存取 -> 非經常性存取、經常性存取 -> 封存，或非經常性存取 -> 封存) 時，此作業會在寫入至目的地階層時計費，而且適用目的地階層的寫入作業 (每 10,000 個) 和資料寫入 (每 GB) 費用。 如果 blob 移至存取頻率較高的階層 (封存 -> 非經常性存取、封存 -> 經常性存取，或非經常性存取 -> 經常性存取)，此作業會在從來源階層讀取時計費，而且適用來源階層的讀取作業 (每 10,000 個) 和資料擷取 (每 GB) 費用。

如果帳戶層從經常性存取切換至非經常性存取，您需針對在 GPv2 帳戶中未設定存取層的所有 blob 支付寫入作業費用 (每 10,000 個)。 這在 Blob 儲存體帳戶中不收費。 如果您將 Blob 儲存體或 GPv2 帳戶從非經常性存取切換至經常性存取，您需支付讀取作業 (每 10,000 個) 和資料擷取 (每 GB) 費用。 可能也適用任何移出非經常性存取或封存層之 blob 的提早刪除費用。

### <a name="cool-and-archive-early-deletion-effective-february-1-2018"></a>非經常性存取或封存提早刪除 (2018 年 2 月 1 日生效)

除了每 GB、每月費用，任何移入非經常性存取層 (僅限 GPv2 帳戶) 的 blob 都受制於 30 天的非經常性存取提早刪除期間，而且任何移入封存層的 blob 都受制於 180 天的封存提早刪除期間。 此費用按比例計算。 例如，如果 blob 移至封存，然後在 45 天後遭到刪除或移至經常倖存取層，您需支付相當於在封存中儲存該 blob 135 (180 減去 45) 天的提早刪除費用。

## <a name="comparison-of-the-storage-tiers"></a>儲存層的比較

下表顯示經常性存取、非經常性存取和封存儲存層的比較。

| | **經常性存取儲存層** | **非經常性存取儲存層** | **封存儲存層**
| ---- | ----- | ----- | ----- |
| **可用性** | 99.9% | 99% | N/A |
| **可用性** <br> **(RA-GRS 讀取)**| 99.99% | 99.9% | N/A |
| **使用費用** | 儲存成本較高，存取和交易成本較低 | 儲存成本較低，存取和交易成本較高 | 儲存成本最低，存取和交易成本最高 |
| **最小物件大小** | N/A | N/A | N/A |
| **最小儲存持續時間** | N/A | 30 天 (僅限 GPv2) | 180 天
| **延遲** <br> **(距第一位元組時間)** | 毫秒 | 毫秒 | < 15 小時
| **擴充和效能目標** | 與一般用途儲存體帳戶相同 | 與一般用途儲存體帳戶相同 | 與一般用途儲存體帳戶相同 |

> [!NOTE]
> Blob 儲存體帳戶支援與一般用途儲存體帳戶相同的效能和延展性目標。 如需詳細資訊，請參閱 [Azure 儲存體延展性和效能目標](../common/storage-scalability-targets.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json) (英文)。

## <a name="quickstart-scenarios"></a>快速入門案例

在這一節中，我們會使用 Azure 入口網站示範下列案例︰

* 如何變更 GPv2 或 Blob 儲存體帳戶的預設帳戶存取層。
* 如何在 GPv2 或 Blob 儲存體帳戶中變更 Blob 的存取層。

### <a name="change-the-default-account-access-tier-of-a-gpv2-or-blob-storage-account"></a>變更 GPv2 或 Blob 儲存體帳戶的預設帳戶存取層

1. 登入 [Azure 入口網站](https://portal.azure.com)。

2. 瀏覽至儲存體帳戶、選取 [所有資源]，然後選取您的儲存體帳戶。

3. 在 [設定] 刀鋒視窗中按一下 [組態]  ，以檢視和/或變更帳戶組態。

4. 針對您的需求選取正確的儲存層︰將 [存取層] 設定為 [非經常性存取] 或 [經常性存取]。

5. 按一下刀鋒視窗頂端的 [儲存]。

### <a name="change-the-tier-of-a-blob-in-a-gpv2-or-blob-storage-account"></a>在 GPv2 或 Blob 儲存體帳戶中變更 Blob 的存取層。

1. 登入 [Azure 入口網站](https://portal.azure.com)。

2. 若要瀏覽至儲存體帳戶，請選取 [所有資源]，選取您的儲存體帳戶，選取您的容器，然後選取您的 Blob。

3. 在 Blob 屬性刀鋒視窗中，按一下 [存取層] 下拉式功能表以選取 [經常性存取]、[非經常性存取] 或 [封存] 儲存層。

5. 按一下刀鋒視窗頂端的 [儲存]。

## <a name="faq"></a>常見問題集

**如果我想要將我的資料進行階層處理，應使用 Blob 儲存體或 GPv2 帳戶？**

建議您 GPv2，而不要使用 Blob 儲存體帳戶進行階層處理。 GPv2 支援 Blob 儲存體帳戶支援的所有功能，以及其他許多功能。 Blob 儲存體與 GPv2 之間的價格幾乎相同，但是 GPv2 帳戶將提供一些新功能和降價。 GPv1 帳戶不支援階層處理。

GPv1 與 GPv2 帳戶之間的價格結構不同，客戶在決定使用 GPv2 帳戶之前，應該仔細評估兩者。 您可以透過簡單的單鍵程序，輕鬆地將現有的 Blob 儲存體或 GPv1 帳戶轉換為 GPv2。 若要深入了解，請參閱 [Azure 儲存體帳戶選項](../common/storage-account-options.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json)。

**可以在相同帳戶中的三個 (經常性存取、非經常性存取和封存) 儲存層中儲存物件嗎？**

是。 設定於帳戶層級的 [存取層] 屬性是套用至該帳戶中所有物件的預設層 (沒有明確設定的層)。 不過，blob 層級的階層處理功能可讓您在物件層級上設定存取層，而不管帳戶上設定的存取層為何。 三個儲存層 (經常性存取、非經常性存取或封存) 中的 blob 都可能共存於相同的帳戶中。

**是否可以變更 Blob 或 GPv2 儲存體帳戶的預設儲存層？**

是，在儲存體帳戶上設定 [存取層] 屬性，即可變更預設儲存層。 變更儲存層會套用到帳戶中儲存之所有未設定明確儲存層的物件。 將儲存層從經常性存取切換至非經常性存取時，在 GPv2 帳戶中未設定存取層的所有 blob 會產生寫入作業 (每 10,000 個) 費用，而從非經常性存取變更為經常性存取時，Blob 儲存體和 GPv2 帳戶中的所有 blob 會產生讀取作業 (每 10,000 個) 和資料擷取 (每 GB) 費用。

**是否可以將我的預設帳戶存取層設定為封存？**

編號 只有經常性存取和非經常性存取儲存層可以設定為預設帳戶存取層。 封存只能設定於物件層級。

**哪些區域可以使用經常性存取、非經常性存取和封存儲存層？**

所有區域都可以使用經常性存取和非經常性存取儲存層以及 blob 層級階層處理。 封存儲存體一開始只在精選區域中提供。 如需完整清單，請參閱 [Azure 依區域提供的產品](https://azure.microsoft.com/regions/services/)。

**非經常性存取儲存層中的 Blob 與經常性存取儲存層中的 Blob 的行為有所不同嗎？**

經常性存取儲存層中的 Blob 與 GPv1、GPv2 和 Blob 儲存體帳戶中的 Blob 有相同的延遲。 非經常性存取儲存層中的 Blob 與 GPv1、GPv2 和 Blob 儲存體帳戶中的 Blob 有類似的延遲 (以毫秒為單位)。 封存儲存層中的 blob 在 GPv1、GPv2 和 Blob 儲存體帳戶中會有好幾個小時的延遲。

相較於經常性存取儲存層中儲存的 Blob，非經常性存取儲存層中的 Blob 有稍微較低的可用性服務等級 (SLA)。 如需詳細資訊，請參閱 [儲存體的 SLA](https://azure.microsoft.com/support/legal/sla/storage/v1_2/)。

**經常性存取、非經常性存取和封存層之間的作業是否相同？**

是。 經常性存取與非經常性存取之間的所有作業都完全一致。 經常性存取與非經常性存取的所有有效封存作業 (包括刪除、列出、取得 blob 屬性/中繼資料，以及設定 blob 層) 都完全一致。 無法讀取或修改封存層中的 blob。

**將 Blob 從封存層解凍至經常性存取或非經常性存取層時，我要如何知道解除凍結已完成？**

在解除凍結期間，您可以使用「取得 blob 屬性」作業來輪詢 [封存狀態] 屬性，以確認存取層變更何時完成。 視目的地層而定，狀態會顯示為 "rehydrate-pending-to-hot" 或 "rehydrate-pending-to-cool"。 完成時，系統會移除封存狀態屬性，而 [存取層] blob 屬性會反映新的經常性存取或非經常性存取層。  

**設定 blob 的存取層之後，何時會開始以適當的費率計費？**

每個 blob 一律根據 [存取層] blob 屬性所指定的存取層計費。 在 blob 上設定新的存取層時，[存取層] 屬性會對所有交易立即反映新的存取層，但是當 blob 從封存解凍至經常性存取或非經常性存取時除外，這可能花費數小時的時間。 在此情況下，您將繼續以封存費率計費，直到解除凍結完成為止，屆時 [存取層] 會反映新的存取層。 而後，您將以新的經常性存取或非經常性存取費率計費。

**如何判斷在刪除 blob 或將它移出非經常性存取或封存層時，我是否需支付提早刪除費用？**

在 30 天前和 180 天前遭到刪除或移出非經常性存取 (僅限 GPv2 帳戶) 或封存層的任何 blob，分別會產生按比例計算的提早刪除費用 ( 2018 年 2 月 1 生效)。 檢查 [存取層變更時間] blob 屬性 (該屬性提供最後一次存取層變更的戳記)，即可判斷 blob 放在非經常性存取或封存層中的時間長度。 如需詳細資訊，請參閱[非經常性存取或封存提早刪除](#cool-and-archive-early-deletion)一節。

**哪些 Azure 工具和 SDK 支援 blob 層級的階層處理和封存儲存體？**

Azure 入口網站、PowerShell 和 CLI 工具，以及 .NET、Java、Python 和 Node.js 用戶端程式庫全都支援 blob 層級的階層處理和封存儲存體。  

**我可以在經常性存取、非經常性存取和封存層中儲存多少資料？**

資料儲存體以及其他限制都設定於帳戶層級，而不是依照儲存層設計。 因此，您可以選擇在其中一層或在全部三個層中使用所有限制。 如需詳細資訊，請參閱 [Azure 儲存體延展性和效能目標](../common/storage-scalability-targets.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json) (英文)。

## <a name="next-steps"></a>後續步驟

### <a name="evaluate-hot-cool-and-archive-in-gpv2-blob-storage-accounts"></a>在 GPv2 Blob 儲存體帳戶中評估經常性存取、非經常性存取和封存

[依照區域檢查經常性存取、非經常性存取和封存的可用性](https://azure.microsoft.com/regions/#services)

[啟用 Azure 儲存體計量以評估您目前的儲存體帳戶使用量](../common/storage-enable-and-view-metrics.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json)

[依照區域檢查 Blob 儲存體和 GPv2 帳戶中的經常性存取、非經常性存取和封存價格](https://azure.microsoft.com/pricing/details/storage/)

[檢查資料傳輸價格](https://azure.microsoft.com/pricing/details/data-transfers/)
