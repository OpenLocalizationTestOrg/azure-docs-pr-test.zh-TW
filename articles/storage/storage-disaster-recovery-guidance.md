---
title: "在 Azure 儲存體中斷的 hello 事件 aaaWhat toodo |Microsoft 文件"
description: "Azure 儲存體中斷的 hello 事件中的哪些 toodo"
services: storage
documentationcenter: .net
author: robinsh
manager: timlt
editor: tysonn
ms.assetid: 8f040b0f-8926-4831-ac07-79f646f31926
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 1/19/2017
ms.author: robinsh
ms.openlocfilehash: ee7eb71311c6e453dc078ec3566267ee0c2f444a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="what-toodo-if-an-azure-storage-outage-occurs"></a><span data-ttu-id="ef33f-103">如果 Azure 儲存體中斷，就會發生何種 toodo</span><span class="sxs-lookup"><span data-stu-id="ef33f-103">What toodo if an Azure Storage outage occurs</span></span>
<span data-ttu-id="ef33f-104">Microsoft 在我們處理硬 toomake 確定我們的服務永遠都可以使用。</span><span class="sxs-lookup"><span data-stu-id="ef33f-104">At Microsoft, we work hard toomake sure our services are always available.</span></span> <span data-ttu-id="ef33f-105">有時候會因為不可抗拒之因素，而造成服務在一或多個區域內中斷。</span><span class="sxs-lookup"><span data-stu-id="ef33f-105">Sometimes, forces beyond our control impact us in ways that cause unplanned service outages in one or more regions.</span></span> <span data-ttu-id="ef33f-106">toohelp 處理這些極少數的發生次數，我們提供下列 Azure 儲存體服務的高階指引 hello。</span><span class="sxs-lookup"><span data-stu-id="ef33f-106">toohelp you handle these rare occurrences, we provide hello following high-level guidance for Azure Storage services.</span></span>

## <a name="how-tooprepare"></a><span data-ttu-id="ef33f-107">如何 tooprepare</span><span class="sxs-lookup"><span data-stu-id="ef33f-107">How tooprepare</span></span>
<span data-ttu-id="ef33f-108">每個客戶 tooprepare 重要他們自己的嚴重損壞復原計畫。</span><span class="sxs-lookup"><span data-stu-id="ef33f-108">It is critical for every customer tooprepare their own disaster recovery plan.</span></span> <span data-ttu-id="ef33f-109">您的應用程式正常運作的狀態中，從儲存體中斷 hello 投入時間 toorecover 通常涉及作業人員和自動化程序順序 tooreactivate 中。</span><span class="sxs-lookup"><span data-stu-id="ef33f-109">hello effort toorecover from a storage outage typically involves both operations personnel and automated procedures in order tooreactivate your applications in a functioning state.</span></span> <span data-ttu-id="ef33f-110">請參考您自己的災害復原計畫 toohello toobuild 下方的 Azure 文件：</span><span class="sxs-lookup"><span data-stu-id="ef33f-110">Please refer toohello Azure documentation below toobuild your own disaster recovery plan:</span></span>

* [<span data-ttu-id="ef33f-111">Azure 應用程式的災害復原和高可用性</span><span class="sxs-lookup"><span data-stu-id="ef33f-111">Disaster recovery and high availability for Azure applications</span></span>](../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md)
* [<span data-ttu-id="ef33f-112">Azure 復原技術指導</span><span class="sxs-lookup"><span data-stu-id="ef33f-112">Azure resiliency technical guidance</span></span>](../resiliency/resiliency-technical-guidance.md)
* [<span data-ttu-id="ef33f-113">Azure Site Recovery 服務</span><span class="sxs-lookup"><span data-stu-id="ef33f-113">Azure Site Recovery service</span></span>](https://azure.microsoft.com/services/site-recovery/)
* [<span data-ttu-id="ef33f-114">Azure 儲存體複寫</span><span class="sxs-lookup"><span data-stu-id="ef33f-114">Azure Storage replication</span></span>](storage-redundancy.md)
* [<span data-ttu-id="ef33f-115">Azure 備份服務</span><span class="sxs-lookup"><span data-stu-id="ef33f-115">Azure Backup service</span></span>](https://azure.microsoft.com/services/backup/)

## <a name="how-toodetect"></a><span data-ttu-id="ef33f-116">如何 toodetect</span><span class="sxs-lookup"><span data-stu-id="ef33f-116">How toodetect</span></span>
<span data-ttu-id="ef33f-117">hello 建議的方式 toodetermine hello Azure 服務狀態是 toosubscribe toohello [Azure 服務健全狀況儀表板](https://azure.microsoft.com/status/)。</span><span class="sxs-lookup"><span data-stu-id="ef33f-117">hello recommended way toodetermine hello Azure service status is toosubscribe toohello [Azure Service Health Dashboard](https://azure.microsoft.com/status/).</span></span>

## <a name="what-toodo-if-a-storage-outage-occurs"></a><span data-ttu-id="ef33f-118">如果儲存體中斷，就會發生何種 toodo</span><span class="sxs-lookup"><span data-stu-id="ef33f-118">What toodo if a Storage outage occurs</span></span>
<span data-ttu-id="ef33f-119">如果一或多個儲存體服務目前暫時無法使用一或多個區域，有兩個您 tooconsider 選項。</span><span class="sxs-lookup"><span data-stu-id="ef33f-119">If one or more Storage services are temporarily unavailable at one or more regions, there are two options for you tooconsider.</span></span> <span data-ttu-id="ef33f-120">如果您想要立即存取 tooyour 資料，請考慮選項 2。</span><span class="sxs-lookup"><span data-stu-id="ef33f-120">If you desire immediate access tooyour data, please consider Option 2.</span></span>

### <a name="option-1-wait-for-recovery"></a><span data-ttu-id="ef33f-121">選項 1︰等待復原</span><span class="sxs-lookup"><span data-stu-id="ef33f-121">Option 1: Wait for recovery</span></span>
<span data-ttu-id="ef33f-122">在此情況下，您不需要採取任何動作。</span><span class="sxs-lookup"><span data-stu-id="ef33f-122">In this case, no action on your part is required.</span></span> <span data-ttu-id="ef33f-123">我們正努力 toorestore hello Azure 服務可用性。</span><span class="sxs-lookup"><span data-stu-id="ef33f-123">We are working diligently toorestore hello Azure service availability.</span></span> <span data-ttu-id="ef33f-124">您可以監視 hello 服務狀態 hello [Azure 服務健全狀況儀表板](https://azure.microsoft.com/status/)。</span><span class="sxs-lookup"><span data-stu-id="ef33f-124">You can monitor hello service status on hello [Azure Service Health Dashboard](https://azure.microsoft.com/status/).</span></span>

### <a name="option-2-copy-data-from-secondary"></a><span data-ttu-id="ef33f-125">選項 2︰從次要區域複製資料</span><span class="sxs-lookup"><span data-stu-id="ef33f-125">Option 2: Copy data from secondary</span></span>
<span data-ttu-id="ef33f-126">如果您選擇[讀取權限的地理備援儲存體 (RA-GRS)](storage-redundancy.md#read-access-geo-redundant-storage) （建議） 使用的儲存體帳戶，您將有讀取權限 tooyour 資料從 hello 次要區域。</span><span class="sxs-lookup"><span data-stu-id="ef33f-126">If you chose [Read-access geo-redundant storage (RA-GRS)](storage-redundancy.md#read-access-geo-redundant-storage) (recommended) for your storage accounts, you will have read access tooyour data from hello secondary region.</span></span> <span data-ttu-id="ef33f-127">您可以使用工具，例如[AzCopy](storage-use-azcopy.md)， [Azure PowerShell](storage-powershell-guide-full.md)，和 hello [Azure 資料移動文件庫](https://azure.microsoft.com/blog/introducing-azure-storage-data-movement-library-preview-2/)toocopy 到另一個儲存體帳戶中的 hello 次要區域資料unimpacted 的地區，然後點，您的應用程式 toothat 儲存體帳戶的讀取和寫入的可用性。</span><span class="sxs-lookup"><span data-stu-id="ef33f-127">You can use tools such as [AzCopy](storage-use-azcopy.md), [Azure PowerShell](storage-powershell-guide-full.md), and hello [Azure Data Movement library](https://azure.microsoft.com/blog/introducing-azure-storage-data-movement-library-preview-2/) toocopy data from hello secondary region into another storage account in an unimpacted region, and then point your applications toothat storage account for both read and write availability.</span></span>

## <a name="what-tooexpect-if-a-storage-failover-occurs"></a><span data-ttu-id="ef33f-128">如果儲存體容錯移轉，就會發生何種 tooexpect</span><span class="sxs-lookup"><span data-stu-id="ef33f-128">What tooexpect if a Storage failover occurs</span></span>
<span data-ttu-id="ef33f-129">如果您選擇[異地備援儲存體 (GRS)](storage-redundancy.md#geo-redundant-storage) 或[讀取權限異地備援儲存體 (RA-GRS)](storage-redundancy.md#read-access-geo-redundant-storage) (建議)，Azure 儲存體會將您的資料持久保留在兩個區域 (主要和次要)。</span><span class="sxs-lookup"><span data-stu-id="ef33f-129">If you chose [Geo-redundant storage (GRS)](storage-redundancy.md#geo-redundant-storage) or [Read-access geo-redundant storage (RA-GRS)](storage-redundancy.md#read-access-geo-redundant-storage) (recommended), Azure Storage will keep your data durable in two regions (primary and secondary).</span></span> <span data-ttu-id="ef33f-130">在兩個區域中，Azure 儲存體會持續維護多個您資料的複本。</span><span class="sxs-lookup"><span data-stu-id="ef33f-130">In both regions, Azure Storage constantly maintains multiple replicas of your data.</span></span>

<span data-ttu-id="ef33f-131">地區的災害影響時主要區域，我們會先嘗試 toorestore hello 服務在該區域中。</span><span class="sxs-lookup"><span data-stu-id="ef33f-131">When a regional disaster affects your primary region, we will first try toorestore hello service in that region.</span></span> <span data-ttu-id="ef33f-132">相依於 hello 性質 hello 災害和其影響，在某些罕見的情況下我們可能無法 toorestore hello 主要區域。</span><span class="sxs-lookup"><span data-stu-id="ef33f-132">Dependent upon hello nature of hello disaster and its impacts, in some rare occasions we may not be able toorestore hello primary region.</span></span> <span data-ttu-id="ef33f-133">這時候，我們會執行異地複寫容錯移轉。</span><span class="sxs-lookup"><span data-stu-id="ef33f-133">At that point, we will perform a geo-failover.</span></span> <span data-ttu-id="ef33f-134">hello 跨區域資料複寫是非同步程序可包含延遲，因此您很可能尚未經過變更複寫 toohello 次要區域可能會遺失。</span><span class="sxs-lookup"><span data-stu-id="ef33f-134">hello cross-region data replication is an asynchronous process which can involve a delay, so it is possible that changes that have not yet been replicated toohello secondary region may be lost.</span></span> <span data-ttu-id="ef33f-135">您可以查詢 hello [「 上次同步處理時間 」 的儲存體帳戶](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/)tooget hello 複寫狀態的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="ef33f-135">You can query hello ["Last Sync Time" of your storage account](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/) tooget details on hello replication status.</span></span>

<span data-ttu-id="ef33f-136">幾個有關 hello 儲存體地理容錯移轉的要點：</span><span class="sxs-lookup"><span data-stu-id="ef33f-136">A couple of points regarding hello storage geo-failover experience:</span></span>

* <span data-ttu-id="ef33f-137">Hello Azure 儲存體團隊將只會觸發儲存體地理容錯移轉 – 不不需要任何客戶動作。</span><span class="sxs-lookup"><span data-stu-id="ef33f-137">Storage geo-failover will only be triggered by hello Azure Storage team – there is no customer action required.</span></span>
* <span data-ttu-id="ef33f-138">您現有的儲存體服務，如 blob、 資料表、 佇列和檔案端點將會保持相同 hello hello 容錯移轉; 之後hello DNS 項目將需要更新 toobe tooswitch 從 hello 主要區域 toohello 次要區域。</span><span class="sxs-lookup"><span data-stu-id="ef33f-138">Your existing storage service endpoints for blobs, tables, queues, and files will remain hello same after hello failover; hello DNS entry will need toobe updated tooswitch from hello primary region toohello secondary region.</span></span>
* <span data-ttu-id="ef33f-139">之前和在 hello 地理容錯移轉期間，您沒有寫入權限 tooyour 儲存體帳戶，因為 toohello hello 災害影響，但您仍然可以閱讀從 hello 次要儲存體帳戶已設定為 RA-GRS 如果。</span><span class="sxs-lookup"><span data-stu-id="ef33f-139">Before and during hello geo-failover, you won't have write access tooyour storage account due toohello impact of hello disaster but you can still read from hello secondary if your storage account has been configured as RA-GRS.</span></span>
* <span data-ttu-id="ef33f-140">當 hello 地理容錯移轉已完成並 hello 傳播 DNS 變更時，就會繼續讀取和寫入存取 tooyour 儲存體帳戶;這點使用 toowhat toobe 次要端點。</span><span class="sxs-lookup"><span data-stu-id="ef33f-140">When hello geo-failover has been completed and hello DNS changes propagated, read and write access tooyour storage account will be resumed; this points toowhat used toobe your secondary endpoint.</span></span> 
* <span data-ttu-id="ef33f-141">請注意，您就可以寫入存取，是否您有 GRS 或 RA-GRS hello 儲存體帳戶設定。</span><span class="sxs-lookup"><span data-stu-id="ef33f-141">Note that you will have write access if you have GRS or RA-GRS configured for hello storage account.</span></span> 
* <span data-ttu-id="ef33f-142">您可以查詢[「 最後一個地理容錯移轉時間 」 的儲存體帳戶](https://msdn.microsoft.com/library/azure/ee460802.aspx)tooget 更多詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="ef33f-142">You can query ["Last Geo Failover Time" of your storage account](https://msdn.microsoft.com/library/azure/ee460802.aspx) tooget more details.</span></span>
* <span data-ttu-id="ef33f-143">Hello 容錯移轉之後，儲存體帳戶可以完全正常運作，但在 「 降級 」 狀態，因為它會實際裝載於獨立包含的區域沒有地理複寫可行。</span><span class="sxs-lookup"><span data-stu-id="ef33f-143">After hello failover, your storage account will be fully functioning, but in a "degraded" status, as it is actually hosted in a standalone region with no geo-replication possible.</span></span> <span data-ttu-id="ef33f-144">toomitigate 此風險，我們將會還原 hello 原始的主要區域，然後執行地理容錯回復 toorestore hello 原始狀態。</span><span class="sxs-lookup"><span data-stu-id="ef33f-144">toomitigate this risk, we will restore hello original primary region and then do a geo-failback toorestore hello original state.</span></span> <span data-ttu-id="ef33f-145">如果 hello 原始的主要區域無法復原，我們將會配置另一個次要區域。</span><span class="sxs-lookup"><span data-stu-id="ef33f-145">If hello original primary region is unrecoverable, we will allocate another secondary region.</span></span>
  <span data-ttu-id="ef33f-146">上的 Azure 儲存體地理複寫的 hello 基礎結構的詳細資訊，請參閱 toohello hello 儲存體團隊部落格上的發行項的相關[備援選項和 RA-GRS](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/)。</span><span class="sxs-lookup"><span data-stu-id="ef33f-146">For more details on hello infrastructure of Azure Storage geo replication, please refer toohello article on hello Storage team blog about [Redundancy Options and RA-GRS](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/).</span></span>

## <a name="best-practices-for-protecting-your-data"></a><span data-ttu-id="ef33f-147">保護資料的最佳做法</span><span class="sxs-lookup"><span data-stu-id="ef33f-147">Best Practices for protecting your data</span></span>
<span data-ttu-id="ef33f-148">有一些建議的方法 tooback，定期儲存體資料。</span><span class="sxs-lookup"><span data-stu-id="ef33f-148">There are some recommended approaches tooback up your storage data on a regular basis.</span></span>

* <span data-ttu-id="ef33f-149">VM 磁碟 – 使用 hello [Azure 備份服務](https://azure.microsoft.com/services/backup/)tooback hello Azure 虛擬機器所使用的 VM 磁碟上。</span><span class="sxs-lookup"><span data-stu-id="ef33f-149">VM Disks – Use hello [Azure Backup service](https://azure.microsoft.com/services/backup/) tooback up hello VM disks used by your Azure virtual machines.</span></span>
* <span data-ttu-id="ef33f-150">區塊 blob – 建立[快照](https://msdn.microsoft.com/library/azure/hh488361.aspx)每個區塊 blob，或複製 hello blob tooanother 儲存體帳戶中另一個區域使用[AzCopy](storage-use-azcopy.md)， [Azure PowerShell](storage-powershell-guide-full.md)，或使用 hello [Azure 的資料移動文件庫](https://azure.microsoft.com/blog/introducing-azure-storage-data-movement-library-preview-2/)。</span><span class="sxs-lookup"><span data-stu-id="ef33f-150">Block blobs –Create a [snapshot](https://msdn.microsoft.com/library/azure/hh488361.aspx) of each block blob, or copy hello blobs tooanother storage account in another region using [AzCopy](storage-use-azcopy.md), [Azure PowerShell](storage-powershell-guide-full.md), or hello [Azure Data Movement library](https://azure.microsoft.com/blog/introducing-azure-storage-data-movement-library-preview-2/).</span></span>
* <span data-ttu-id="ef33f-151">使用資料表 – [AzCopy](storage-use-azcopy.md) tooexport hello 資料表資料到另一個地區內的另一個儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="ef33f-151">Tables – use [AzCopy](storage-use-azcopy.md) tooexport hello table data into another storage account in another region.</span></span>
* <span data-ttu-id="ef33f-152">檔案-使用[AzCopy](storage-use-azcopy.md)或[Azure PowerShell](storage-powershell-guide-full.md) toocopy 您檔案 tooanother 儲存體帳戶中另一個區域。</span><span class="sxs-lookup"><span data-stu-id="ef33f-152">Files – use [AzCopy](storage-use-azcopy.md) or [Azure PowerShell](storage-powershell-guide-full.md) toocopy your files tooanother storage account in another region.</span></span>

<span data-ttu-id="ef33f-153">如需建立應用程式來充分善用 hello RA-GRS 功能的相關資訊，請查看[設計高可用的應用程式使用 RA-GRS 儲存體](storage-designing-ha-apps-with-ragrs.md)</span><span class="sxs-lookup"><span data-stu-id="ef33f-153">For information about creating applications that take full advantage of hello RA-GRS feature, please check out [Designing Highly Available Applications using RA-GRS Storage](storage-designing-ha-apps-with-ragrs.md)</span></span>

