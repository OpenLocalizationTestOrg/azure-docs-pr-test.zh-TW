---
title: "Azure ML 記錄 API 參考 | Microsoft Docs"
description: "記錄 API 參考。"
services: machine-learning
author: akshaya-a
ms.author: akannava
manager: mwinkle
ms.reviewer: garyericson, jasonwhowell, mldocs
ms.service: machine-learning
ms.workload: data-services
ms.topic: article
ms.date: 09/25/2017
ms.openlocfilehash: 1906425c6657fb6232a9dc306b05f9171c9c7bef
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/11/2017
---
# <a name="logging-api-reference"></a>記錄 API 參考

Azure ML 的記錄程式庫可讓程式發出歷程記錄服務可追蹤的計量和檔案，以便稍後進行分析。 目前支援基本的計量和檔案型別，且支援的型別集會隨後續的 Python 套件版本而增加。

## <a name="uploading-metrics"></a>正在上傳計量

```python
# import logging API package
from azureml.logging import get_azureml_logger

# initialize a logger object
logger = get_azureml_logger()

# log "scalar" metrics
logger.log("simple integer value", 7)
logger.log("simple float value", 3.141592)
logger.log("simple string value", "this is a string metric")

# log a list of numerical values. 
# this automatically creates a chart in the Run History details page
logger.log("chart data points", [1, 3, 5, 10, 6, 4])
```

根據預設，所有計量都會以非同步方式提交，讓提交作業不會妨礙程式的執行。 傳送多個計量時，在罕見的情況下，這種情況可能會造成順序問題。 有一個例子，即同時記錄兩個計量，但基於某些原因，使用者想保留其實際的順序。 另一種情況是必須先追蹤計量，再執行一些已知會快速失敗的程式碼。 在這兩種情況下，解決方案是_等_到完整記錄計量，再繼續進行：

```python
# blocking call
logger.log("my metric 1", 1).wait()
logger.log("my metric 2", 2).wait()
```

## <a name="consuming-metrics"></a>使用計量

計量是按歷程記錄服務儲存，並繫結至產生它們的執行作業。 完成執行後，可使用 [執行歷程記錄] 索引標籤和下方的 CLI 命令來擷取它們 (和下方的構件)。

```azurecli
# show the last run
$ az ml history last

# list all past runs
$ az ml history list 

# show a paritcular run
$ az ml history info -r <runid>
```

## <a name="artifacts-files"></a>構件 (檔案)

除了計量外，AzureML 也能讓使用者追蹤檔案。 根據預設，會將程式的工作目錄 (計算內容中的專案資料夾) 相對並寫入 `outputs` 資料夾的所有檔案，上傳到歷程記錄服務並追蹤以稍後進行分析。 需要注意的是個別的檔案大小必須小於 512 MB。


```Python
# Log content as an artifact
logger.upload("artifact/path", "This should be the contents of artifact/path in the service")
```

## <a name="consuming-artifacts"></a>使用構件

若要列印已追蹤的構件內容，使用者可為指定的執行作業使用 [執行歷程記錄] 索引標籤，以**下載**或**升階**構件，或使用下列 CLI 命令來達到相同的效果。

```azurecli
# show all artifacts generated by a run
$ az ml history info -r <runid> -a <artifact/path>

# promote a particular artifact
$ az ml history promote -r <runid> -ap <artifact/prefix> -n <name of asset to create>
```
## <a name="next-steps"></a>後續步驟
- 逐步執行[分類 iris 教學課程，第 2 部分](tutorial-classifying-iris-part-2.md)以查看作用中的記錄 API。
- 檢閱[如何在 Azure Machine Learning Workbench 中使用執行歷程記錄和模型計量](how-to-use-run-history-model-metrics.md)，深入瞭解如何在 [執行歷程記錄] 中記錄 API。
