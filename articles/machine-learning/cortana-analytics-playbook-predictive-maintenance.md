---
title: "航太在航太工業中使用 Azure - Cortana Intelligence 解決方案進行預測性維護的範本 | Microsoft Docs"
description: "航太、公用事業和運輸中預測性維護的 Microsoft Cortana Intelligence 解決方案範本。"
services: cortana-analytics
documentationcenter: 
author: fboylu
manager: jhubbard
editor: cgronlun
ms.assetid: 2e8b66db-91eb-432b-b305-6abccca25620
ms.service: cortana-analytics
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/14/2017
ms.author: fboylu
ms.openlocfilehash: a1e7b95e6dcbf46d83ce3bf10a38d6a572f4497d
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/03/2017
---
# <a name="cortana-intelligence-solution-template-playbook-for-predictive-maintenance-in-aerospace-and-other-businesses"></a><span data-ttu-id="989be-103">航太與其他業務中預測性維護的 Cortana Intelligence 解決方案範本的腳本</span><span class="sxs-lookup"><span data-stu-id="989be-103">Cortana Intelligence Solution Template Playbook for predictive maintenance in aerospace and other businesses</span></span>
## <a name="executive-summary"></a><span data-ttu-id="989be-104">執行摘要</span><span class="sxs-lookup"><span data-stu-id="989be-104">Executive summary</span></span>
<span data-ttu-id="989be-105">預測性維護是要求最高的預測性分析應用程式之一，其優點不容置疑，包括大幅節省成本。</span><span class="sxs-lookup"><span data-stu-id="989be-105">Predictive maintenance is one of the most demanded applications of predictive analytics with unarguable benefits including tremendous amount of cost savings.</span></span> <span data-ttu-id="989be-106">本腳本旨在提供預測性維護解決方案的參考資料，著重於主要使用案例。</span><span class="sxs-lookup"><span data-stu-id="989be-106">This playbook aims at providing a reference for predictive maintenance solutions with the emphasis on major use cases.</span></span>
<span data-ttu-id="989be-107">它能夠讓讀者了解預測性維護的最常見商務案例、減輕這類解決方案之商務問題的挑戰、解決這些商務問題所需的資料，以及使用這類資料和最佳作法搭配範例解決方案架構來建置解決方案的預測性模型化技巧。</span><span class="sxs-lookup"><span data-stu-id="989be-107">It is prepared to give the reader an understanding of the most common business scenarios of predictive maintenance, challenges of qualifying business problems for such solutions, data required to solve these business problems, predictive modeling techniques to build solutions using such data and best practices with sample solution architectures.</span></span>
<span data-ttu-id="989be-108">此外，還描述了所開發預測性模型的詳細規格，例如特徵設計、模型開發和效能評估。</span><span class="sxs-lookup"><span data-stu-id="989be-108">It also describes the specifics of the predictive models developed such as feature engineering, model development and performance evaluation.</span></span> <span data-ttu-id="989be-109">基本上，本腳本結合了成功開發及部署預測性維護解決方案所需的商務和分析指導方針。</span><span class="sxs-lookup"><span data-stu-id="989be-109">In essence, this playbook brings together the business and analytical guidelines needed for a successful development and deployment of predictive maintenance solutions.</span></span> <span data-ttu-id="989be-110">這些指導方針能夠協助讀者使用 Cortana Intelligence Suite 和 (尤其是) Azure Machine Learning 建立初步解決方案，以做為其長期預測性維護策略的起點。</span><span class="sxs-lookup"><span data-stu-id="989be-110">These guidelines are prepared to help the audience create an initial solution using Cortana Intelligence Suite and specifically Azure Machine Learning as a starting point in their long-term predictive maintenance strategy.</span></span> <span data-ttu-id="989be-111">在 [Cortana Analytics](http://www.microsoft.com/server-cloud/cortana-analytics-suite/overview.aspx) 和 [Azure Machine Learning](https://azure.microsoft.com/services/machine-learning/) 頁面可取得 Cortana Intelligence Suite 和 Azure Machine Learning 相關文件。</span><span class="sxs-lookup"><span data-stu-id="989be-111">The documentation regarding Cortana Intelligence Suite and Azure Machine Learning can be found in [Cortana Analytics](http://www.microsoft.com/server-cloud/cortana-analytics-suite/overview.aspx) and [Azure Machine Learning](https://azure.microsoft.com/services/machine-learning/) pages.</span></span>

> [!TIP]
> <span data-ttu-id="989be-112">如需實作此解決方案範本的技術指南，請參閱 [預測性維護的 Cortana Intelligence 解決方案範本技術指南](cortana-analytics-technical-guide-predictive-maintenance.md)。</span><span class="sxs-lookup"><span data-stu-id="989be-112">For a technical guide to implementing this Solution Template, see [Technical guide to the Cortana Intelligence Solution Template for predictive maintenance](cortana-analytics-technical-guide-predictive-maintenance.md).</span></span>
> <span data-ttu-id="989be-113">若要下載可提供此範本架構概觀的圖表，請參閱 [預測性維護的 Cortana Intelligence 解決方案範本架構](cortana-analytics-architecture-predictive-maintenance.md)。</span><span class="sxs-lookup"><span data-stu-id="989be-113">To download a diagram that provides an architectural overview of this template, see [Architecture of the Cortana Intelligence Solution Template for predictive maintenance](cortana-analytics-architecture-predictive-maintenance.md).</span></span>
> 
> 

## <a name="playbook-overview-and-target-audience"></a><span data-ttu-id="989be-114">腳本概觀和適用對象</span><span class="sxs-lookup"><span data-stu-id="989be-114">Playbook overview and target audience</span></span>
<span data-ttu-id="989be-115">本腳本主要適用於具有各種背景且對預測性維護空間感興趣的技術和非技術讀者。</span><span class="sxs-lookup"><span data-stu-id="989be-115">This playbook is organized to benefit both technical and non-technical audience with varying backgrounds and interests in predictive maintenance space.</span></span> <span data-ttu-id="989be-116">本腳本涵蓋各種預測性維護解決方案的高階層面，以及如何加以實作的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="989be-116">The playbook covers both high-level aspects of the different types of predictive maintenance solutions and details of how to implement them.</span></span> <span data-ttu-id="989be-117">周全的內容可滿足下列兩種對象的需求：只對了解解決方案空間和應用程式類型有興趣的讀者，以及想要實作這些解決方案，因而對技術詳細資料感興趣的讀者。</span><span class="sxs-lookup"><span data-stu-id="989be-117">The content is balanced to cater both to the audience who are only interested in understanding the solution space and the type of applications as well as those who are looking to implement these solutions and are hence interested in the technical details.</span></span>

<span data-ttu-id="989be-118">本腳本的大部分內容並未假設先驗資料科學知識或專業技術。</span><span class="sxs-lookup"><span data-stu-id="989be-118">Majority of the content in this playbook does not assume prior data science knowledge or expertise.</span></span> <span data-ttu-id="989be-119">不過，本腳本的某些部分則需要稍微熟悉資料科學概念，才能夠遵循實作詳細資料。</span><span class="sxs-lookup"><span data-stu-id="989be-119">However, some parts of the playbook will require somewhat familiarity with data science concepts to be able to follow implementation details.</span></span> <span data-ttu-id="989be-120">必須具備入門級資料科學技能，才能夠完全吸收這幾節的資料。</span><span class="sxs-lookup"><span data-stu-id="989be-120">Introductory level data science skills are required to fully benefit from the material in those sections.</span></span>

<span data-ttu-id="989be-121">本腳本的前半部涵蓋預測性維護應用程式的簡介、如何限定預測性維護解決方案、包含商務問題詳細資料的常見使用案例集合、這些使用案例的相關資料，以及實作這些預測性維護解決方案的商業優勢。</span><span class="sxs-lookup"><span data-stu-id="989be-121">The first half of the playbook covers an introduction to predictive maintenance applications, how to qualify a predictive maintenance solution, a collection of common use cases with the details of the business problem, the data surrounding these use cases and the business benefits of implementing these predictive maintenance solutions.</span></span> <span data-ttu-id="989be-122">這幾節則不需具備任何預測性分析領域的技術知識。</span><span class="sxs-lookup"><span data-stu-id="989be-122">These sections don’t require any technical knowledge in the predictive analytics domain.</span></span>

<span data-ttu-id="989be-123">在本腳本的後半部中，我們將討論預測性維護應用程式的預測性模型化技巧類型，以及如何透過腳本前半部所述的使用案例中的範例來實作這些模型。</span><span class="sxs-lookup"><span data-stu-id="989be-123">In the second half of the playbook, we cover the types of predictive modeling techniques for predictive maintenance applications and how to implement these models through examples from the use cases outlined in the first half of the playbook.</span></span> <span data-ttu-id="989be-124">因此文中逐步解說資料前處理的步驟，例如資料標記和特徵設計、模型選取、訓練/測試和效能評估最佳作法。</span><span class="sxs-lookup"><span data-stu-id="989be-124">This is illustrated by going through the steps of data preprocessing such as data labeling and feature engineering, model selection, training/testing and performance evaluation best practices.</span></span> <span data-ttu-id="989be-125">下列各節適合於技術讀者。</span><span class="sxs-lookup"><span data-stu-id="989be-125">These sections are suitable for technical audience.</span></span>

## <a name="predictive-maintenance-in-iot"></a><span data-ttu-id="989be-126">IoT 中的預測性維護</span><span class="sxs-lookup"><span data-stu-id="989be-126">Predictive maintenance in IoT</span></span>
<span data-ttu-id="989be-127">未排程的設備停機時間可能會對企業造成極度破壞性的影響。</span><span class="sxs-lookup"><span data-stu-id="989be-127">The impact of unscheduled equipment downtime can be extremely destructive for businesses.</span></span> <span data-ttu-id="989be-128">務必讓現場設備保持運作，並減少代價很高的非排程停機時間，才能達到最大使用率和效能。</span><span class="sxs-lookup"><span data-stu-id="989be-128">It is critical to keep field equipment running in order to maximize utilization and performance and by minimizing costly, unscheduled downtime.</span></span> <span data-ttu-id="989be-129">簡單來說，在現今的商務營運環境中，等待故障發生的代價極為慘痛。</span><span class="sxs-lookup"><span data-stu-id="989be-129">Simply, waiting for the failure to occur is not affordable in today’s business operations scene.</span></span> <span data-ttu-id="989be-130">為了保持競爭力，公司利用從各種管道收集來的資料，以尋求可將資產效能最大化的新方法。</span><span class="sxs-lookup"><span data-stu-id="989be-130">To remain competitive, companies look for new ways to maximize asset performance by making use of the data collected from various channels.</span></span> <span data-ttu-id="989be-131">利用採用歷史模式的預測性分析技巧來預測未來結果，是分析這類資訊的重要方法之一。</span><span class="sxs-lookup"><span data-stu-id="989be-131">One important way to analyze such information is to utilize predictive analytic techniques that use historical patterns to predict future outcomes.</span></span> <span data-ttu-id="989be-132">其中一個最受歡迎的解決方案稱為「預測性維護」，其通常可定義為但不限於預測近期內資產故障的可能性，所以可監視資產，主動識別故障並在發生故障前採取動作。</span><span class="sxs-lookup"><span data-stu-id="989be-132">One of the most popular of these solutions is called Predictive Maintenance which can generally be defined as but not limited to predicting possibility of failure of an asset in the near future so that the assets can be monitored to proactively identify failures and take action before the failures occur.</span></span> <span data-ttu-id="989be-133">這些解決方案會偵測故障模式，以判斷故障風險最大的資產。</span><span class="sxs-lookup"><span data-stu-id="989be-133">These solutions detect failure patterns to determine assets that are at the greatest risk of failure.</span></span> <span data-ttu-id="989be-134">早期找出問題有助於以更符合成本效益的方式部署有限的維護資源，並增強品質和供應鏈流程。</span><span class="sxs-lookup"><span data-stu-id="989be-134">This early identification of issues helps deploy limited maintenance resources in a more cost-effective way and enhance quality and supply chain processes.</span></span>

<span data-ttu-id="989be-135">隨著物聯網 (IoT) 應用程式的興起，預測性維護逐漸受到業界關注，因為資料收集和處理技術已臻成熟，足以即時或分批產生、傳輸、儲存和分析所有種類的資料。</span><span class="sxs-lookup"><span data-stu-id="989be-135">With the rise of the Internet of Things (IoT) applications, predictive maintenance has been gaining increasing attention in the industry as the data collection and processing technologies has matured enough to generate, transmit, store and analyze all kinds of data in batches or in real-time.</span></span> <span data-ttu-id="989be-136">這類技術能夠利用進階分析解決方案、預測性維護解決方案，輕鬆開發和部署端對端解決方案，以提供公認最大的優勢。</span><span class="sxs-lookup"><span data-stu-id="989be-136">Such technologies enable easy development and deployment of end-to-end solutions with advanced analytics solutions, with predictive maintenance solutions providing arguably the largest benefit.</span></span>

<span data-ttu-id="989be-137">預測性維護領域中的商務問題包羅萬象，包括因為非預期的故障以及對複雜商務環境中的問題根本原因見解有限所引起的高營運風險。</span><span class="sxs-lookup"><span data-stu-id="989be-137">Business problems in the predictive maintenance domain range from high operational risk due to unexpected failures and limited insight into the root cause of problems in complex business environments.</span></span> <span data-ttu-id="989be-138">這些問題大多可以歸類成下列幾個商務問題：</span><span class="sxs-lookup"><span data-stu-id="989be-138">The majority of these problems can be categorized to fall under the following business questions:</span></span>

* <span data-ttu-id="989be-139">設備在近期內故障的機率為何？</span><span class="sxs-lookup"><span data-stu-id="989be-139">What is the probability that a piece of equipment fails in the near future?</span></span>
* <span data-ttu-id="989be-140">設備的剩餘使用年限為何？</span><span class="sxs-lookup"><span data-stu-id="989be-140">What is the remaining useful life of the equipment?</span></span>
* <span data-ttu-id="989be-141">故障原因為何以及應執行哪些維護動作來修正這些問題？</span><span class="sxs-lookup"><span data-stu-id="989be-141">What are the causes of failures and what maintenance actions should be performed to fix these issues?</span></span>

<span data-ttu-id="989be-142">利用預測性維護來回答這些問題，企業可以︰</span><span class="sxs-lookup"><span data-stu-id="989be-142">By utilizing predictive maintenance to answer these questions, businesses can:</span></span>

* <span data-ttu-id="989be-143">在故障發生前發現故障情況，以降低營運風險並提高資產報酬率</span><span class="sxs-lookup"><span data-stu-id="989be-143">Reduce operational risk and increase rate of return on assets by spotting failures before they occurred</span></span>
* <span data-ttu-id="989be-144">減少不必要的以時間為基礎的維護作業並控制維護成本</span><span class="sxs-lookup"><span data-stu-id="989be-144">Reduce unnecessary time-based maintenance operations and control cost of maintenance</span></span>
* <span data-ttu-id="989be-145">改善整體品牌形象、消除不良名聲以及客戶流失所造成的銷售損失</span><span class="sxs-lookup"><span data-stu-id="989be-145">Improve overall brand image, eliminate bad publicity and resulting lost sales from customer attrition.</span></span>
* <span data-ttu-id="989be-146">藉由預測再訂購點來降低庫存量，進而降低庫存成本</span><span class="sxs-lookup"><span data-stu-id="989be-146">Lower inventory costs by reducing inventory levels by predicting the reorder point</span></span>
* <span data-ttu-id="989be-147">探索與各種維護問題有關連的模式</span><span class="sxs-lookup"><span data-stu-id="989be-147">Discover patterns connected to various maintenance problems</span></span>

<span data-ttu-id="989be-148">預測性維護方案可提供給企業一些關鍵效能指標，例如：用來監視即時資產狀況的健康狀態分數、資產的剩餘壽命預估、主動維護活動的建議，以及更換零件的預估訂單日期。</span><span class="sxs-lookup"><span data-stu-id="989be-148">Predictive maintenance solutions can provide businesses with key performance indicators such as health scores to monitor real-time asset condition, an estimate of the remaining lifespan of assets, recommendation for proactive maintenance activities and estimated order dates for replacement of parts.</span></span>

## <a name="qualification-criteria-for-predictive-maintenance"></a><span data-ttu-id="989be-149">預測性維護的限定準則</span><span class="sxs-lookup"><span data-stu-id="989be-149">Qualification criteria for predictive maintenance</span></span>
<span data-ttu-id="989be-150">在此務必強調，預測性維護不一定能有效解決所有的使用案例或商務問題。</span><span class="sxs-lookup"><span data-stu-id="989be-150">It is important to emphasize that not all use cases or business problems can be effectively solved by predictive maintenance.</span></span> <span data-ttu-id="989be-151">重要限定準則包括問題是否具預測性本質、存在明確的動作路徑以便在事先偵測到故障時避開，而最重要的是，可取得品質足以支援使用案例的資料。</span><span class="sxs-lookup"><span data-stu-id="989be-151">Important qualification criteria include whether the problem is predictive in nature, that a clear path of action exists in order to prevent failures when they are detected beforehand and most importantly, data with sufficient quality to support the use case is available.</span></span> <span data-ttu-id="989be-152">在這裡，我們著重於建置成功預測性維護解決方案的資料需求。</span><span class="sxs-lookup"><span data-stu-id="989be-152">Here, we focus on the data requirements for building a successful predictive maintenance solution.</span></span>

<span data-ttu-id="989be-153">建立預測性模型時，我們會使用歷程記錄資料來訓練模型，而後該模型可辨識隱藏的模式並進一步在未來的資料中識別出這些模式。</span><span class="sxs-lookup"><span data-stu-id="989be-153">When building predictive models, we use historical data to train the model which can then recognize hidden patterns and further identify these patterns in the future data.</span></span> <span data-ttu-id="989be-154">這些模型是以依特徵描述的範例和預測目標進行訓練。</span><span class="sxs-lookup"><span data-stu-id="989be-154">These models are trained with examples described by their features and the target of prediction.</span></span> <span data-ttu-id="989be-155">經過訓練的模型應該只會查看新範例的特徵，進而在目標上進行預測。</span><span class="sxs-lookup"><span data-stu-id="989be-155">The trained model is expected to make predictions on the target by only looking at the features of the new examples.</span></span> <span data-ttu-id="989be-156">請務必記得模型會擷取特徵和預測目標之間的關聯性。</span><span class="sxs-lookup"><span data-stu-id="989be-156">It is crucial that the model capture the relationship between features and the target of prediction.</span></span> <span data-ttu-id="989be-157">為了訓練有效的機器學習模型，我們需要訓練資料 (包括對預測目標有實際預測能力的特徵)，這表示資料應預期精確的預測與相關的預測的目標的預測能力的。</span><span class="sxs-lookup"><span data-stu-id="989be-157">In order to train an effective machine learning model, we need training data which includes features that actually have predictive power towards the target of prediction meaning the data should be relevant to the prediction goal to expect accurate predictions.</span></span>

<span data-ttu-id="989be-158">舉例來說，如果目標是要預測列車輪子的故障，則訓練資料應包含輪子相關特徵 (例如可反映輪子健康狀態、里程數、裝載貨物等的遙測資料)。</span><span class="sxs-lookup"><span data-stu-id="989be-158">For example, if the target is to predict failures of train wheels, the training data should contain wheel-related features (e.g. telemetry reflecting the health status of wheels, the mileage, car load, etc.).</span></span> <span data-ttu-id="989be-159">不過，如果目標是要預測訓練引擎失敗，我們可能需要另一組具有引擎相關特徵的訓練資料。</span><span class="sxs-lookup"><span data-stu-id="989be-159">However, if the target is to predict train engine failures, we probably need another set of training data that has engine-related features.</span></span> <span data-ttu-id="989be-160">在建立預測性模型之前，我們希望商務專家能了解資料相關性需求，並提供選取相關資料子集以供分析所需的領域知識。</span><span class="sxs-lookup"><span data-stu-id="989be-160">Before building predictive models, we expect the business expert to understand the data relevancy requirement and provide the domain knowledge that is needed to select relevant subsets of data for the analysis.</span></span>

<span data-ttu-id="989be-161">在限定適用於預測性維護解決方案的商務問題時，我們會尋找三個基本資料來源：</span><span class="sxs-lookup"><span data-stu-id="989be-161">There are three essential data sources we look for when qualifying a business problem to be suitable for a predictive maintenance solution:</span></span>

1. <span data-ttu-id="989be-162">故障歷程記錄：在預測性維護應用程式中，故障事件通常非常罕見。</span><span class="sxs-lookup"><span data-stu-id="989be-162">Failure History: Typically, in predictive maintenance applications, failure events are very rare.</span></span> <span data-ttu-id="989be-163">不過，在建立可預測故障的預測性模型時，此演算法需要透過訓練程序來了解正常運作模式和故障模式。</span><span class="sxs-lookup"><span data-stu-id="989be-163">However, when building predictive models that predict failures, the algorithm needs to learn the normal operation pattern as well as the failure pattern through the training process.</span></span> <span data-ttu-id="989be-164">因此，訓練資料一定要在兩個類別中包含足量的範例，才能夠了解這兩個不同的模式。</span><span class="sxs-lookup"><span data-stu-id="989be-164">Hence, it is essential that the training data contains sufficient number of examples in both categories in order to learn these two different patterns.</span></span> <span data-ttu-id="989be-165">基於這個理由，我們要求資料有足量的故障事件。</span><span class="sxs-lookup"><span data-stu-id="989be-165">For that reason, we require that data has sufficient number of failure events.</span></span> <span data-ttu-id="989be-166">在維護記錄和零件更換歷程記錄中可以找到故障事件，或是訓練資料中的異常狀況也可做為領域專家所認同的故障。</span><span class="sxs-lookup"><span data-stu-id="989be-166">Failure events can be found in maintenance records and parts replacement history or anomalies in the training data can also be used as failures as identified by the domain experts.</span></span>
2. <span data-ttu-id="989be-167">維護/維修歷程記錄：預測性維護解決方案的基本資料來源是資產的詳細維護歷程記錄，其中包含所更換的零組件相關資訊、所執行的預防性維護活動等等。請務必記得擷取這些事件，因為這些事件會影響降低模式，而缺少這項資訊將會造成誤導的結果。</span><span class="sxs-lookup"><span data-stu-id="989be-167">Maintenance/Repair History: An essential source of data for predictive maintenance solutions is the detailed maintenance history of the asset containing information about the components replaced, preventive maintenance activates performed, etc. It is extremely important to capture these events as these affect the degradation patterns and absence of this information causes misleading results.</span></span>
3. <span data-ttu-id="989be-168">機器狀況：為了預測機器在故障前將會多持續幾天 (小時、英哩、交易等)，我們假設機器的健康狀態在其作業期間將會隨著時間降低。</span><span class="sxs-lookup"><span data-stu-id="989be-168">Machine Conditions: In order to predict how many more days (hours, miles, transactions, etc.) a machine lasts before it fails, we assume the machine’s health status degrades over time during its operation.</span></span> <span data-ttu-id="989be-169">因此，我們預期資料會包含隨時間變化的特徵，以擷取此老化模式以及任何會導致降低的異常狀況。</span><span class="sxs-lookup"><span data-stu-id="989be-169">Therefore, we expect the data to contain time-varying features that capture this aging pattern and any anomalies that leads to degradation.</span></span> <span data-ttu-id="989be-170">在 IoT 應用程式中，來自不同感應器的遙測資料就是一個很好的例子。</span><span class="sxs-lookup"><span data-stu-id="989be-170">In IoT applications, the telemetry data from different sensors represent one good example.</span></span> <span data-ttu-id="989be-171">為了預測機器是否即將在某個時間範圍內故障，在理想的情況下，資料應在實際故障事件之前擷取這個時間範圍的效能降低趨勢。</span><span class="sxs-lookup"><span data-stu-id="989be-171">In order to predict if a machine is going to fail within a time frame, ideally the data should capture degrading trend during this time frame before the actual failure event.</span></span>

<span data-ttu-id="989be-172">此外，我們需要與預測目標資產的運作情況直接相關的資料。</span><span class="sxs-lookup"><span data-stu-id="989be-172">Additionally, we require data that is directly related to the operating conditions of the target asset of prediction.</span></span> <span data-ttu-id="989be-173">目標是根據商務需求與資料可用性來決定。</span><span class="sxs-lookup"><span data-stu-id="989be-173">The decision of target is based on both business needs and data availability.</span></span> <span data-ttu-id="989be-174">以列車輪子故障預測為例，我們可能會預測「輪子是否即將故障」或「整列火車是否即將故障」。</span><span class="sxs-lookup"><span data-stu-id="989be-174">Taking the train wheel failure prediction as an example, we may predict "if the wheel is going to have a failure" or "if the whole train is going have a failure".</span></span> <span data-ttu-id="989be-175">第一項預測的目標為比較特定的零組件，而第二項預測的目標為火車故障。</span><span class="sxs-lookup"><span data-stu-id="989be-175">The first one targets a more specific component whereas the second one targets failure of the train.</span></span> <span data-ttu-id="989be-176">第二項預測是比較一般的問題，其所需的資料元素比第一項預測更分散，以致更難以建立模型。</span><span class="sxs-lookup"><span data-stu-id="989be-176">The second one is a more general question that requires a lot more dispersed data elements than the first one, making it harder to build a model.</span></span> <span data-ttu-id="989be-177">相反地，只是藉由查看概括火車狀況資料來嘗試預測輪子故障並不可行，因為該資料不包含零組件層級的資訊。</span><span class="sxs-lookup"><span data-stu-id="989be-177">Conversely, trying to predict wheel failures just by looking at the high-level train condition data may not be feasible as it does not contain information at the component level.</span></span> <span data-ttu-id="989be-178">一般而言，預測特定故障事件比預測一般故障事件更加合理。</span><span class="sxs-lookup"><span data-stu-id="989be-178">In general, it is more sensible to predict specific failure events than more general ones.</span></span>

<span data-ttu-id="989be-179">有關故障歷程記錄資料的常見問題之一是「需要多少個故障事件才能訓練模型且多少個事件才算「足夠？</span><span class="sxs-lookup"><span data-stu-id="989be-179">One common question that is usually asked about failure history data is "How many failure events are required to train a model and how many is considered as "enough"?</span></span> <span data-ttu-id="989be-180">」 該問題沒有明確的答案，因為在許多預測性分析案例中，資料品質通常會支配什麼是可接受的答案。</span><span class="sxs-lookup"><span data-stu-id="989be-180">There is no clear answer to that question as in many predictive analytics scenarios, it is usually the quality of the data that dictates what is acceptable.</span></span> <span data-ttu-id="989be-181">如果資料集不包含與故障預測相關的特徵，則即使有許多故障事件，也不可能建立良好的模型。</span><span class="sxs-lookup"><span data-stu-id="989be-181">If the dataset does not include features that are relevant to failure prediction, then even if there are many failure events, building a good model may not be possible.</span></span> <span data-ttu-id="989be-182">不過，經驗法則是故障事件愈多，模型就會愈好，而概略估計需要多少個故障範例是極為內容和資料相依的測量方法。</span><span class="sxs-lookup"><span data-stu-id="989be-182">However, the rule of thumb is that the more the failure events the better the model is and a rough estimate of how many failure examples are required is a very context and data-dependent measure.</span></span> <span data-ttu-id="989be-183">此問題將會在處理不平衡資料集的章節中進行討論，而我們會提出幾個建議方法來對付沒有足量故障的問題。</span><span class="sxs-lookup"><span data-stu-id="989be-183">This issue is discussed in the section for handling imbalanced datasets where we propose methods to cope with the problem of not having enough failures.</span></span>

## <a name="sample-use-cases"></a><span data-ttu-id="989be-184">範例使用案例</span><span class="sxs-lookup"><span data-stu-id="989be-184">Sample use cases</span></span>
<span data-ttu-id="989be-185">本節著重於好幾個產業 (如航太、公用事業和運輸) 的各種預測性維護使用案例。</span><span class="sxs-lookup"><span data-stu-id="989be-185">This section focuses on a collection of predictive maintenance use cases from several industries such as Aerospace, Utilities and Transportation.</span></span> <span data-ttu-id="989be-186">每個小節深入探索從這些領域收集的使用案例，並討論商務問題、商務問題相關資料以及預測性維護解決方案的優點。</span><span class="sxs-lookup"><span data-stu-id="989be-186">Each subsection drills into the use-cases collected from these areas and discusses a business problem, the data surrounding the business problem and the benefits of a predictive maintenance solution.</span></span>

### <a name="aerospace"></a><span data-ttu-id="989be-187">航太</span><span class="sxs-lookup"><span data-stu-id="989be-187">Aerospace</span></span>
#### <a name="use-case-1-flight-delay-and-cancellations"></a><span data-ttu-id="989be-188">使用案例 1：航班延誤和取消</span><span class="sxs-lookup"><span data-stu-id="989be-188">Use Case 1: Flight delay and cancellations</span></span>
##### <a name="business-problem-and-data-sources"></a><span data-ttu-id="989be-189">*商務問題和資料來源*</span><span class="sxs-lookup"><span data-stu-id="989be-189">*Business problem and data sources*</span></span>
<span data-ttu-id="989be-190">航空公司所面臨的其中一個主要商務問題，就是與因機械問題而延誤航班相關的重大成本。</span><span class="sxs-lookup"><span data-stu-id="989be-190">One of the major business problems that airlines face is the significant costs that are associated with flights being delayed due to mechanical problems.</span></span> <span data-ttu-id="989be-191">如果無法修復機械故障，甚至可能會取消航班。</span><span class="sxs-lookup"><span data-stu-id="989be-191">If the mechanical failures cannot be repaired, flights may even be canceled.</span></span> <span data-ttu-id="989be-192">這會付出極大的代價，因為延誤會造成排程和作業問題、導致信譽不佳和客戶不滿，以及其衍生他許多問題。</span><span class="sxs-lookup"><span data-stu-id="989be-192">This is extremely costly as delays create problems in scheduling and operations, causes bad reputation and customer dissatisfaction along with many other problems.</span></span> <span data-ttu-id="989be-193">航空公司對於事先預測這類機械故障特別感興趣，讓他們可以減少航班延誤或取消情況。</span><span class="sxs-lookup"><span data-stu-id="989be-193">Airlines are particularly interested in predicting such mechanical failures in advance so that they can reduce flight delays or cancellations.</span></span> <span data-ttu-id="989be-194">這些案例的預測性維護解決方案的目標在於根據相關的資料來源 (例如維護歷程記錄和飛行路線資訊)，預測班機延誤或取消的機率。</span><span class="sxs-lookup"><span data-stu-id="989be-194">The goal of the predictive maintenance solution for these cases is to predict the probability of an aircraft being delayed or canceled, based on relevant data sources such as maintenance history and flight route information.</span></span> <span data-ttu-id="989be-195">這個使用案例的兩個主要資料來源是班機航段和頁面記錄檔。</span><span class="sxs-lookup"><span data-stu-id="989be-195">The two major data sources for this use case are the flight legs and page logs.</span></span> <span data-ttu-id="989be-196">班機航段資料包括有關飛行路線的詳細資訊，例如：起飛和抵達的日期和時間、起飛和抵達的機場等。頁面記錄檔資料包括維護人員所記錄的一系列錯誤和維護代碼。</span><span class="sxs-lookup"><span data-stu-id="989be-196">Flight leg data includes data about the flight route details such as the date and time of departure and arrival, departure and arrival airports, etc. Page log data includes a series of error and maintenance codes that are recorded by the maintenance personnel.</span></span>

##### <a name="business-value-of-the-predictive-model"></a><span data-ttu-id="989be-197">*預測性模型的商業價值*</span><span class="sxs-lookup"><span data-stu-id="989be-197">*Business value of the predictive model*</span></span>
<span data-ttu-id="989be-198">使用可用的歷程記錄資料，透過多類別演算法來建立預測性模型，以預測在接下來 24 小時內會導致航班延誤或取消的機械問題。</span><span class="sxs-lookup"><span data-stu-id="989be-198">Using the available historical data, a predictive model was built using a multi-classification algorithm to predict the type of mechanical issue which results in a delay or cancellation of a flight within the next 24 hours.</span></span> <span data-ttu-id="989be-199">藉由這項預測，可採取必要的維護動作來降低執行班機勤務時的風險，因而避免延誤或取消情形。</span><span class="sxs-lookup"><span data-stu-id="989be-199">By making this prediction, necessary maintenance actions can be taken to mitigate the risk while an aircraft is being serviced and thus prevent possible delays or cancellations.</span></span> <span data-ttu-id="989be-200">使用 Azure Machine Learning Web 服務，可以將預測性模型順暢而輕鬆地整合到航空公司的現有作業平台。</span><span class="sxs-lookup"><span data-stu-id="989be-200">Using Azure Machine Learning web service, the predictive models can seamlessly and easily be integrated into airlines’ existing operating platforms.</span></span> 

#### <a name="use-case-2-aircraft-component-failure"></a><span data-ttu-id="989be-201">使用案例 2：飛機零組件故障</span><span class="sxs-lookup"><span data-stu-id="989be-201">Use Case 2: Aircraft component failure</span></span>
##### <a name="business-problem-and-data-sources"></a><span data-ttu-id="989be-202">*商務問題和資料來源*</span><span class="sxs-lookup"><span data-stu-id="989be-202">*Business problem and data sources*</span></span>
<span data-ttu-id="989be-203">飛機引擎是非常敏感且昂貴的設備部分，而更換引擎零件是航空業界最常見的維護工作。</span><span class="sxs-lookup"><span data-stu-id="989be-203">Aircraft engines are very sensitive and expensive pieces of equipment and engine part replacements are among the most common maintenance tasks in the airline industry.</span></span> <span data-ttu-id="989be-204">航空公司的維護解決方案需要審慎管理零組件存貨的可用性、遞送和規劃。</span><span class="sxs-lookup"><span data-stu-id="989be-204">Maintenance solutions for airlines require careful management of component stock availability, delivery and planning.</span></span> <span data-ttu-id="989be-205">能夠蒐集零組件可靠性的情報消息，將使投資成本大幅降低。</span><span class="sxs-lookup"><span data-stu-id="989be-205">Being able to gather intelligence on component reliability leads to substantial reduction on investment costs.</span></span> <span data-ttu-id="989be-206">這個使用案例的主要資料來源是從飛機上數個感應器收集來的遙測資料，可提供飛機狀況的資訊。</span><span class="sxs-lookup"><span data-stu-id="989be-206">The major data source for this use case is telemetry data collected from a number of sensors in the aircraft providing information on the condition of the aircraft.</span></span> <span data-ttu-id="989be-207">維護記錄也會用來識別零組件發生故障和更換的時間。</span><span class="sxs-lookup"><span data-stu-id="989be-207">Maintenance records were also used to identify when component failures occurred and replacements were made.</span></span>

##### <a name="business-value-of-the-predictive-model"></a><span data-ttu-id="989be-208">預測性模型的商業價值</span><span class="sxs-lookup"><span data-stu-id="989be-208">Business value of the predictive model</span></span>
<span data-ttu-id="989be-209">已建立一個多類別的分類模型，可預測下個月內特定零組件引起故障的機率。</span><span class="sxs-lookup"><span data-stu-id="989be-209">A multi-class classification model was built that predicts the probability of a failure due to a certain component within the next month.</span></span> <span data-ttu-id="989be-210">航空公司可以運用這些解決方案，來降低零組件維修成本、改善零組件存貨可用性、降低相關資產的庫存量及改善維護計劃。</span><span class="sxs-lookup"><span data-stu-id="989be-210">By employing these solutions, airlines can reduce component repair costs, improve component stock availability, reduce inventory levels of related assets and improve maintenance planning.</span></span>

### <a name="utilities"></a><span data-ttu-id="989be-211">公用事業</span><span class="sxs-lookup"><span data-stu-id="989be-211">Utilities</span></span>
#### <a name="use-case-1-atm-cash-dispense-failure"></a><span data-ttu-id="989be-212">使用案例 1：ATM 現金提領失敗</span><span class="sxs-lookup"><span data-stu-id="989be-212">Use Case 1: ATM cash dispense failure</span></span>
##### <a name="business-problem-and-data-sources"></a><span data-ttu-id="989be-213">*商務問題和資料來源*</span><span class="sxs-lookup"><span data-stu-id="989be-213">*Business problem and data sources*</span></span>
<span data-ttu-id="989be-214">資產密集產業的經營者常表示其企業的主要營運風險就是其資產的非預期故障。</span><span class="sxs-lookup"><span data-stu-id="989be-214">Executives in asset intensive industries often state that primary operational risk to their businesses is unexpected failures of their assets.</span></span> <span data-ttu-id="989be-215">舉例而說，機器故障 (例如銀行業的 ATM) 是經常發生的常見問題。</span><span class="sxs-lookup"><span data-stu-id="989be-215">As an example, failure of machinery such as ATMs in banking industry is a very common problem that occurs frequently.</span></span> <span data-ttu-id="989be-216">這幾種問題讓這類機器的操作人員非常渴望擁有預測性維護解決方案。</span><span class="sxs-lookup"><span data-stu-id="989be-216">These types of problems make predictive maintenance solutions very desirable for operators of such machinery.</span></span> <span data-ttu-id="989be-217">在此使用案例中，預測問題用來計算 ATM 現金提款交易將會因為提款機故障 (例如卡紙或零件故障) 而中斷的機率。</span><span class="sxs-lookup"><span data-stu-id="989be-217">In this use-case, prediction problem is to calculate the probability that an ATM cash withdrawal transaction gets interrupted due to a failure in the cash dispenser such as a paper jam or a part failure.</span></span> <span data-ttu-id="989be-218">這個案例的主要資料來源是在提領現金鈔票時會收集測量數據的感應器讀數，以及收集一段時間的維護記錄。</span><span class="sxs-lookup"><span data-stu-id="989be-218">Major data sources for this case are sensor readings that collect measurements while cash notes are being dispensed and also maintenance records collected over time.</span></span> <span data-ttu-id="989be-219">感應器資料包含完成的每筆交易的感應器讀數，以及提領的每張鈔票的感應器讀數。</span><span class="sxs-lookup"><span data-stu-id="989be-219">Sensor data included sensor readings per each transaction completed and also sensor readings per each note dispensed.</span></span> <span data-ttu-id="989be-220">感應器讀數提供了一些測量數據，例如鈔票之間的間隔，厚度、鈔票送達距離等等。維護資料包含錯誤代碼與維修資訊。</span><span class="sxs-lookup"><span data-stu-id="989be-220">The sensor readings provided measurements such as gaps between notes, thickness, note arrival distance etc. Maintenance data included error codes and repair information.</span></span> <span data-ttu-id="989be-221">這些資料用來找出失敗案例。</span><span class="sxs-lookup"><span data-stu-id="989be-221">These were used to identify failure cases.</span></span>

##### <a name="business-value-of-the-predictive-model"></a><span data-ttu-id="989be-222">*預測性模型的商業價值*</span><span class="sxs-lookup"><span data-stu-id="989be-222">*Business value of the predictive model*</span></span>
<span data-ttu-id="989be-223">已建立兩個預測性模型，可預測現金提款交易失敗以及交易期間內提領的個別鈔票失敗。</span><span class="sxs-lookup"><span data-stu-id="989be-223">Two predictive models were built to predict failures in the cash withdrawal transactions and failures in the individual notes dispensed during a transaction.</span></span> <span data-ttu-id="989be-224">能夠事先預測交易失敗，即可主動檢修 ATM 以避免發生故障。</span><span class="sxs-lookup"><span data-stu-id="989be-224">By being able to predict transaction failures beforehand, ATMs can be serviced proactively to prevent failures from occurring.</span></span> <span data-ttu-id="989be-225">此外，透過鈔票失敗預測，如果交易可能在完成前因為鈔票提領失敗而失敗，最好是停止程序並警告客戶此交易未完成，而不是在發生錯誤後等待維護服務人員抵達，這可能會導致客戶更加不滿。</span><span class="sxs-lookup"><span data-stu-id="989be-225">Also, with note failure prediction, if a transaction is likely to fail before it is complete due to a note dispense failure, it may be best to stop the process and warn the customer for incomplete transaction rather than waiting for the maintenance service to arrive after the error occurs which may lead to larger customer dissatisfaction.</span></span>

#### <a name="use-case-2-wind-turbine-failures"></a><span data-ttu-id="989be-226">使用案例 2：風力渦輪機故障</span><span class="sxs-lookup"><span data-stu-id="989be-226">Use Case 2: Wind turbine failures</span></span>
##### <a name="business-problem-and-data-sources"></a><span data-ttu-id="989be-227">*商務問題和資料來源*</span><span class="sxs-lookup"><span data-stu-id="989be-227">*Business problem and data sources*</span></span>
<span data-ttu-id="989be-228">隨著環保意識的提升，風力渦輪機已成為主要的能源產生來源之一，它們通常需花費數百萬美元。</span><span class="sxs-lookup"><span data-stu-id="989be-228">With the raise of environmental awareness, wind turbines have become one of the major sources of energy generation and they usually cost millions of dollars.</span></span> <span data-ttu-id="989be-229">風力渦輪機的其中一個重要零組件是配有許多感應器的發電機馬達，可協助監視渦輪機狀況和狀態。</span><span class="sxs-lookup"><span data-stu-id="989be-229">One of the key components of wind turbines is the generator motor which is equipped with many sensors that helps to monitor turbine conditions and status.</span></span> <span data-ttu-id="989be-230">感應器讀數包含可用來建立預測性模型的寶貴資訊，可供預測重要的關鍵效能指標 (KPI)，例如風力渦輪機零組件的平均故障時間。</span><span class="sxs-lookup"><span data-stu-id="989be-230">The sensor readings contain valuable information which can be used to build a predictive model to predict critical Key Performance Indicators (KPIs) such as mean time to failure for components of the wind turbine.</span></span> <span data-ttu-id="989be-231">這個使用案例的資料來自位於三個不同廠區位置的多部風力渦輪機。</span><span class="sxs-lookup"><span data-stu-id="989be-231">Data for this use case comes from multiple wind turbines that are located in three different farm locations.</span></span> <span data-ttu-id="989be-232">每隔 10 秒會從每部渦輪機上近一百台的感應器記錄測量數據 (為期一年)。</span><span class="sxs-lookup"><span data-stu-id="989be-232">Measurements from close to a hundred sensors from each turbine were recorded every 10 seconds for one year.</span></span> <span data-ttu-id="989be-233">這些讀數包括一些測量數據，例如溫度、發電機速度、渦輪機電力和發電機繞組。</span><span class="sxs-lookup"><span data-stu-id="989be-233">These readings include measurements such as temperature, generator speed, turbine power and generator winding.</span></span>

##### <a name="business-value-of-the-predictive-model"></a><span data-ttu-id="989be-234">*預測性模型的商業價值*</span><span class="sxs-lookup"><span data-stu-id="989be-234">*Business value of the predictive model*</span></span>
<span data-ttu-id="989be-235">已建立一些預測性模型，可估計發電機和溫度感應器的剩餘使用年限。</span><span class="sxs-lookup"><span data-stu-id="989be-235">Predictive models were built to estimate remaining useful life for generators and temperature sensors.</span></span> <span data-ttu-id="989be-236">透過預測故障機率，維護技術人員可以著重於可能不久就會故障的可疑渦輪機，進而補強以時間為基礎的維護制度。</span><span class="sxs-lookup"><span data-stu-id="989be-236">By predicting the probability of failure, maintenance technicians can focus on suspicious turbines that are likely to fail soon to complement time-based maintenance regimes.</span></span>
<span data-ttu-id="989be-237">此外，預測性模型深入分析不同因素對故障機率的貢獻程度，協助企業進一步了解問題的根本原因。</span><span class="sxs-lookup"><span data-stu-id="989be-237">Additionally, predictive models bring insight to the level of contribution for different factors to the probability of a failure which helps business to have a better understanding of the root cause of the problems.</span></span>

#### <a name="use-case-3-circuit-breaker-failures"></a><span data-ttu-id="989be-238">使用案例 3：斷路器故障</span><span class="sxs-lookup"><span data-stu-id="989be-238">Use Case 3: Circuit breaker failures</span></span>
##### <a name="business-problem-and-data-sources"></a><span data-ttu-id="989be-239">*商務問題和資料來源*</span><span class="sxs-lookup"><span data-stu-id="989be-239">*Business problem and data sources*</span></span>
<span data-ttu-id="989be-240">電力和天然氣運作 (包括電能的產生、配送和銷售) 需要大量維護，以確保電力線路隨時都能運作，進而保證將能源配送到每戶人家。</span><span class="sxs-lookup"><span data-stu-id="989be-240">Electricity and gas operations that include generation, distribution and sale of electrical energy require significant amount of maintenance to ensure power lines are operational at all times to guarantee delivery of energy to households.</span></span> <span data-ttu-id="989be-241">這類運作失敗極為嚴重，因為在發生電力問題的區域中幾乎每個實體都會受到影響。</span><span class="sxs-lookup"><span data-stu-id="989be-241">Failure of such operations is critical as almost every entity is effected by power problems in the regions that they occur.</span></span> <span data-ttu-id="989be-242">斷路器對於這類運作而言非常重要，因為在發生問題和簡短電路的情況下，斷路器會切斷電流，以免電力線路發生任何損壞。</span><span class="sxs-lookup"><span data-stu-id="989be-242">Circuit breakers are critical for such operations as they are a piece of equipment that cut electrical current in case of problems and short circuits to prevent any damage to power lines from happening.</span></span> <span data-ttu-id="989be-243">這個使用案例的商務問題是要根據指定的維護記錄、命令歷程記錄和技術規格來預測斷路器故障。</span><span class="sxs-lookup"><span data-stu-id="989be-243">The business problem for this use case is to predict circuit breaker failures given maintenance logs, command history and technical specifications.</span></span>

<span data-ttu-id="989be-244">這個案例的三個主要資料來源是維護記錄 (包括校正性、預防性和有系統的動作)、運作資料 (包括傳送至斷路器的自動和手動命令，例如開啟和關閉動作)，以及每個斷路器的屬性相關技術規格資料。例如製造年份、位置、型號等。</span><span class="sxs-lookup"><span data-stu-id="989be-244">Three major data sources for this case are maintenance logs that include corrective, preventive and systematic actions, operational data that includes automatic and manual commands send to circuit breakers such as for open and close actions and technical specification data about the properties of each circuit breaker such as year made, location, model, etc.</span></span>

##### <a name="business-value-of-the-predictive-model"></a><span data-ttu-id="989be-245">*預測性模型的商業價值*</span><span class="sxs-lookup"><span data-stu-id="989be-245">*Business value of the predictive model*</span></span>
<span data-ttu-id="989be-246">預測性維護解決方案有助於降低維修成本及提高設備 (例如斷路器) 的生命週期。</span><span class="sxs-lookup"><span data-stu-id="989be-246">Predictive maintenance solutions help reduce repair costs and increase the lifecycle of equipment such as circuit breakers.</span></span> <span data-ttu-id="989be-247">這些模型也有助於改善電力網路的品質，因為這些模型提前提供的警告可減少非預期的故障，而使服務中斷情形變少。</span><span class="sxs-lookup"><span data-stu-id="989be-247">These models also help improve the quality of the power network since models provide warnings ahead of time that reduce unexpected failures which lead to fewer interruptions to the service.</span></span>

#### <a name="use-case-4-elevator-door-failures"></a><span data-ttu-id="989be-248">使用案例 4：電梯門故障</span><span class="sxs-lookup"><span data-stu-id="989be-248">Use Case 4: Elevator door failures</span></span>
##### <a name="business-problem-and-data-sources"></a><span data-ttu-id="989be-249">*商務問題和資料來源*</span><span class="sxs-lookup"><span data-stu-id="989be-249">*Business problem and data sources*</span></span>
<span data-ttu-id="989be-250">大多數的電梯公司通常都有數百萬部電梯在世界各地運作。</span><span class="sxs-lookup"><span data-stu-id="989be-250">Most large elevator companies typically have millions of elevators running around the world.</span></span> <span data-ttu-id="989be-251">為了取得競爭優勢，他們會著重於客戶最為關切的可靠性。</span><span class="sxs-lookup"><span data-stu-id="989be-251">To gain a competitive edge, they focus on reliability which is what matters most to their customers.</span></span> <span data-ttu-id="989be-252">利用物聯網的潛力，將其電梯連接到雲端並從電梯感應器和系統蒐集資料，即可將資料轉換成珍貴的商業智慧，其提供競爭對手尚未可用的預測性和先佔式維護，進而大幅改善運作。</span><span class="sxs-lookup"><span data-stu-id="989be-252">Drawing on the potential of the Internet of Things, by connecting their elevators to the cloud and gathering data from elevator sensors and systems, they are able to transform data into valuable business intelligence which vastly improves operations by offering predictive and preemptive maintenance that is not something that is available to the competitors yet.</span></span> <span data-ttu-id="989be-253">這個案例的商務需求是要提供一個知識庫預測性應用程式，用來預測電梯門故障的可能原因。</span><span class="sxs-lookup"><span data-stu-id="989be-253">The business requirement for this case is to provide a knowledge base predictive application that predicts the potential causes of door failures.</span></span> <span data-ttu-id="989be-254">這項實作所需的資料包含三個部分：電梯靜態特徵 (例如識別碼，合約維護頻率、建築類型等)、使用量資訊 (例如電梯門循環次數、平均關門時間等) 以及故障歷程記錄 (也就是過去的故障記錄及其原因)。</span><span class="sxs-lookup"><span data-stu-id="989be-254">The required data for this implementation consists of three parts which are elevator static features (e.g. identifiers, contract maintenance frequency, building type, etc.), usage information (e.g. number of door cycles, average door close time, etc.) and failure history (i.e. historical failure records and their causes).</span></span>

<span data-ttu-id="989be-255">已使用 Azure Machine Learning 建立一個多類別羅吉斯迴歸模型，並以整合式靜態特徵和使用量資料做為特徵，以及以過去故障記錄的原因做為類別標籤來解決預測問題。</span><span class="sxs-lookup"><span data-stu-id="989be-255">A multiclass logistic regression model was built with Azure Machine Learning to solve the prediction problem, with the integrated static features and usage data as features, and the causes of historical failure records as class labels.</span></span> <span data-ttu-id="989be-256">現場技術人員所用行動裝置上的應用程式將使用此預測性模型來協助提升工作效率。</span><span class="sxs-lookup"><span data-stu-id="989be-256">This predictive model is consumed by an app on a mobile device which is used by field technicians to help improve working efficiency.</span></span> <span data-ttu-id="989be-257">當技術人員到現場維修電梯時，他們可以參考此應用程式，以取得建議原因和儘速修復電梯門的最佳維護動作程序。</span><span class="sxs-lookup"><span data-stu-id="989be-257">When a technician goes on site to repair an elevator, he/she can refer to this app for recommended causes and best courses of maintenance actions to fix the elevator doors as fast as possible.</span></span>

### <a name="transportation-and-logistics"></a><span data-ttu-id="989be-258">運輸和物流</span><span class="sxs-lookup"><span data-stu-id="989be-258">Transportation and logistics</span></span>
#### <a name="use-case-1-brake-disc-failures"></a><span data-ttu-id="989be-259">使用案例 1：煞車碟盤故障</span><span class="sxs-lookup"><span data-stu-id="989be-259">Use Case 1: Brake disc failures</span></span>
##### <a name="business-problem-and-data-sources"></a><span data-ttu-id="989be-260">*商務問題和資料來源*</span><span class="sxs-lookup"><span data-stu-id="989be-260">*Business problem and data sources*</span></span>
<span data-ttu-id="989be-261">車輛的一般維護原則包括校正性和預防性維護。</span><span class="sxs-lookup"><span data-stu-id="989be-261">Typical maintenance policies for vehicles include corrective and preventive maintenance.</span></span> <span data-ttu-id="989be-262">校正性維護意指在發生可能對駕駛造成嚴重不便的故障之後修復車輛，因而造成非預期的機能失常和浪費在造訪技師的時間。</span><span class="sxs-lookup"><span data-stu-id="989be-262">Corrective maintenance implies that the vehicle is repaired after a failure has occurred which can cause a severe inconvenience to the driver as a result of an unexpected malfunction and the time wasted on a visit to mechanic.</span></span> <span data-ttu-id="989be-263">大部分的車輛也會受限於預防性維護原則，該原則要求依照排程執行某些檢查，其中不會考慮到汽車子系統的實際狀況。</span><span class="sxs-lookup"><span data-stu-id="989be-263">Most vehicles are also subject to a preventive maintenance policy, which requires performing certain inspections at a schedule which does not take into account the actual condition of the car subsystems.</span></span> <span data-ttu-id="989be-264">這些方法均無法成功地完全排除問題。</span><span class="sxs-lookup"><span data-stu-id="989be-264">None of these approaches are successful in fully eliminating problems.</span></span> <span data-ttu-id="989be-265">這裡提供的特定使用案例是一項煞車碟盤故障預測，該預測是以透過汽車輪胎系統中安裝的感應器所收集的資料為基礎，而這些感應器會追蹤過去的行駛模式和汽車所處的其他狀況。</span><span class="sxs-lookup"><span data-stu-id="989be-265">The specific use case here is brake disc failure prediction based on data collected through sensors installed in the tire system of a car which keeps track of historical driving patterns and other conditions that the car is exposed to.</span></span> <span data-ttu-id="989be-266">這個案例的最重要資料來源為測量加速、煞車模式、行駛距離、速度等的感應器資料。這項資訊若搭配其他靜態資訊 (如汽車特徵)，有助於建置一組可用於預測性模型中的理想預測值。</span><span class="sxs-lookup"><span data-stu-id="989be-266">The most important data source for this case is the sensor data that measure, for instance, accelerations, braking patterns, driving distances, velocity, etc. This information, coupled with other static information such as car features, help build a good set of predictors that can be used in a predictive model.</span></span> <span data-ttu-id="989be-267">另一組必備資訊是從零件訂單資料庫 (用來保留汽車在保養廠進行保養時的備用零件訂單日期與數量) 推斷而來的故障資料。</span><span class="sxs-lookup"><span data-stu-id="989be-267">Another set of essential information is the failure data which is inferred from the part order database (used to keep the spare part order dates and quantities as cars are being serviced in the dealerships).</span></span>

##### <a name="business-value-of-the-predictive-model"></a><span data-ttu-id="989be-268">*預測性模型的商業價值*</span><span class="sxs-lookup"><span data-stu-id="989be-268">*Business value of the predictive model*</span></span>
<span data-ttu-id="989be-269">此處預測方法的商業價值很豐厚。</span><span class="sxs-lookup"><span data-stu-id="989be-269">The business value of a predictive approach here is substantial.</span></span> <span data-ttu-id="989be-270">預測性維護系統可以根據預測性模型來安排進廠保養時間。</span><span class="sxs-lookup"><span data-stu-id="989be-270">A predictive maintenance system can schedule a visit to the dealer based on a predictive model.</span></span> <span data-ttu-id="989be-271">此模型可以代表汽車目前狀況和行駛歷程記錄的感應資訊為基礎。</span><span class="sxs-lookup"><span data-stu-id="989be-271">The model can be based on sensory information that is representing the current condition of the car and the driving history.</span></span> <span data-ttu-id="989be-272">這種方法可以將非預期故障的風險降至最低，但非預期故障也可能會發生在下一次定期保養之前。</span><span class="sxs-lookup"><span data-stu-id="989be-272">This approach can minimize the risk of unexpected failures, which may as well occur before the next periodic maintenance.</span></span>
<span data-ttu-id="989be-273">此外，也可以減少不必要的預防性維護。</span><span class="sxs-lookup"><span data-stu-id="989be-273">It can also reduce the amount of unnecessary preventive maintenance.</span></span> <span data-ttu-id="989be-274">駕駛可以主動獲知在幾週內可能需要更換零件，並將該資訊提供給保養廠。</span><span class="sxs-lookup"><span data-stu-id="989be-274">Driver can proactively be informed that a change of parts might be necessary in a few weeks and supply the dealer with that information.</span></span> <span data-ttu-id="989be-275">然後保養廠可以為該駕駛事先準備個別的保養套組。</span><span class="sxs-lookup"><span data-stu-id="989be-275">The dealer could then prepare an individual maintenance package for the driver in advance.</span></span>

#### <a name="use-case-2-subway-train-door-failures"></a><span data-ttu-id="989be-276">使用案例 2：地鐵列車門故障</span><span class="sxs-lookup"><span data-stu-id="989be-276">Use Case 2: Subway train door failures</span></span>
##### <a name="business-problem-and-data-sources"></a><span data-ttu-id="989be-277">*商務問題和資料來源*</span><span class="sxs-lookup"><span data-stu-id="989be-277">*Business problem and data sources*</span></span>
<span data-ttu-id="989be-278">列車的車門故障是地鐵誤點和營運問題的主要原因之一。</span><span class="sxs-lookup"><span data-stu-id="989be-278">One of the major reasons of delays and problems on subway operations is door failures of train cars.</span></span> <span data-ttu-id="989be-279">預測列車的車門是否故障，或是能夠預測下一次發生車門故障的天數，極有遠見。</span><span class="sxs-lookup"><span data-stu-id="989be-279">Predicting if a train car may have a door failure, or being able to forecast the number of days till the next door failure, is extremely important foresight.</span></span> <span data-ttu-id="989be-280">這提供了最佳化列車車門保養及降低列車停擺時間的機會。</span><span class="sxs-lookup"><span data-stu-id="989be-280">It provides the opportunity to optimize train door servicing and reduce the train's down time.</span></span>

#### <a name="data-sources"></a><span data-ttu-id="989be-281">資料來源</span><span class="sxs-lookup"><span data-stu-id="989be-281">Data sources</span></span>
<span data-ttu-id="989be-282">此使用案例中有三個資料來源</span><span class="sxs-lookup"><span data-stu-id="989be-282">Three sources of data in this use-case are</span></span> 

* <span data-ttu-id="989be-283">**列車事件資料**，這是列車事件的歷程記錄，</span><span class="sxs-lookup"><span data-stu-id="989be-283">**train event data**, which is the historical records of train events,</span></span> 
* <span data-ttu-id="989be-284">**維護資料** ，例如維護類型、工單類型和優先順序代碼，</span><span class="sxs-lookup"><span data-stu-id="989be-284">**maintenance data** such as maintenance types, work order types, and priority codes,</span></span>  
* <span data-ttu-id="989be-285">**故障記錄**。</span><span class="sxs-lookup"><span data-stu-id="989be-285">**records of failures**.</span></span>

##### <a name="business-value-of-the-predictive-model"></a><span data-ttu-id="989be-286">*預測性模型的商業價值*</span><span class="sxs-lookup"><span data-stu-id="989be-286">*Business value of the predictive model*</span></span>
<span data-ttu-id="989be-287">已建立兩個模型，分別使用二元分類來預測隔天故障機率，以及使用迴歸來預測下次發生故障的天數。</span><span class="sxs-lookup"><span data-stu-id="989be-287">Two models were built to predict next day failure probability using binary classification and days till failure using regression.</span></span> <span data-ttu-id="989be-288">與先前的案例類似，這些模型可補強定期維護制度，進而創造出提升服務品質和提高客戶滿意度的大好機會。</span><span class="sxs-lookup"><span data-stu-id="989be-288">Similar to the earlier cases, the models create tremendous opportunity to improve quality of service and increase customer satisfaction by complementing the regular maintenance regimes.</span></span>

## <a name="data-preparation"></a><span data-ttu-id="989be-289">資料準備</span><span class="sxs-lookup"><span data-stu-id="989be-289">Data preparation</span></span>
### <a name="data-sources"></a><span data-ttu-id="989be-290">資料來源</span><span class="sxs-lookup"><span data-stu-id="989be-290">Data sources</span></span>
<span data-ttu-id="989be-291">預測性維護問題的常見資料元素可彙總如下：</span><span class="sxs-lookup"><span data-stu-id="989be-291">The common data elements for predictive maintenance problems can be summarized as follows:</span></span>

* <span data-ttu-id="989be-292">故障歷程記錄：機器或機器內零組件的故障歷程記錄。</span><span class="sxs-lookup"><span data-stu-id="989be-292">Failure history: The failure history of a machine or component within the machine.</span></span>
* <span data-ttu-id="989be-293">維護歷程記錄：機器的維修歷程記錄，例如錯誤代碼、之前維護活動或零組件替換。</span><span class="sxs-lookup"><span data-stu-id="989be-293">Maintenance history: The repair history of a machine, e.g. error codes, previous maintenance activities or component replacements.</span></span>
* <span data-ttu-id="989be-294">機器狀況和使用量：機器的運作狀況，例如從感應器收集的資料。</span><span class="sxs-lookup"><span data-stu-id="989be-294">Machine conditions and usage: The operating conditions of a machine e.g. data collected from sensors.</span></span>
* <span data-ttu-id="989be-295">機器特徵：機器的特徵，例如引擎大小、廠牌和型號、地點。</span><span class="sxs-lookup"><span data-stu-id="989be-295">Machine features: The features of a machine, e.g. engine size, make and model, location.</span></span>
* <span data-ttu-id="989be-296">操作者特徵：操作者的特徵，例如性別、過去經驗。</span><span class="sxs-lookup"><span data-stu-id="989be-296">Operator features: The features of the operator, e.g. gender, past experience.</span></span>

<span data-ttu-id="989be-297">故障歷程記錄通常有可能包含在維修歷程記錄中，例如以特殊錯誤代碼或備用零件的訂單日期形式呈現。</span><span class="sxs-lookup"><span data-stu-id="989be-297">It is possible and usually the case that failure history is contained in maintenance history such as in the form of special error codes or order dates for spare parts.</span></span> <span data-ttu-id="989be-298">在這些情況下，可以從維護資料擷取故障資料。</span><span class="sxs-lookup"><span data-stu-id="989be-298">In those cases, failures can be extracted from the maintenance data.</span></span> <span data-ttu-id="989be-299">此外，不同的商業領域可能有各種會影響故障模式的其他資料來源，這裡並未一一列出。</span><span class="sxs-lookup"><span data-stu-id="989be-299">Additionally, different business domains may have a variety of other data sources that influence failure patterns which are not listed here exhaustively.</span></span> <span data-ttu-id="989be-300">在建立預測性模型時請教各領域專家，應可找出這些資料來源。</span><span class="sxs-lookup"><span data-stu-id="989be-300">These should be identified by consulting the domain experts when building predictive models.</span></span>

<span data-ttu-id="989be-301">上述使用案例中的某些資料元素範例包括：</span><span class="sxs-lookup"><span data-stu-id="989be-301">Some examples of above data elements from use cases are:</span></span>

<span data-ttu-id="989be-302">故障歷程記錄：航班延誤日期、飛機零組件故障日期和類型、ATM 現金提款交易失敗、列車/電梯門故障、煞車碟盤更換訂單日期、風力渦輪機故障日期和斷路器命令失敗。</span><span class="sxs-lookup"><span data-stu-id="989be-302">Failure history: fight delay dates, aircraft component failure dates and types, ATM cash withdrawal transaction failures, train/elevator door failures, brake disk replacement order dates, wind turbine failure dates and circuit breaker command failures.</span></span>

<span data-ttu-id="989be-303">維護歷程記錄：航班錯誤記錄檔、ATM 交易錯誤記錄檔、列車維護記錄 (包括維護類型、簡短描述等) 和斷路器維護記錄。</span><span class="sxs-lookup"><span data-stu-id="989be-303">Maintenance history: Flight error logs, ATM transaction error logs, train maintenance records including maintenance type, short description etc. and circuit breaker maintenance records.</span></span>

<span data-ttu-id="989be-304">機器狀況和使用量：飛行路線和時間、從飛機引擎收集的感應器資料、ATM 交易的感應器讀數、列車事件資料、從風力渦輪機、電梯和連線汽車收集的感應器讀數。</span><span class="sxs-lookup"><span data-stu-id="989be-304">Machine conditions and usage: Flight routes and times, sensor data collected from aircraft engines, sensor readings from ATM transactions, train events data, sensor readings from wind turbines, elevators and connected cars.</span></span>

<span data-ttu-id="989be-305">機器特徵：斷路器技術規格 (例如電壓等級)、地理位置或汽車特徵 (例如廠牌、型號、引擎大小、輪胎類型、生產設備等)。</span><span class="sxs-lookup"><span data-stu-id="989be-305">Machine features: Circuit breaker technical specifications such as voltage levels, geolocation or car features such as make, model, engine size, tire types, production facility etc.</span></span>

<span data-ttu-id="989be-306">根據上述的資料來源，我們在預測性維護領域中觀察到的兩種主要資料類型為暫時資料和靜態資料。</span><span class="sxs-lookup"><span data-stu-id="989be-306">Given the above data sources, the two main data types we observe in predictive maintenance domain are temporal data and static data.</span></span>
<span data-ttu-id="989be-307">故障歷程記錄、機器狀況、維修歷程記錄、使用量歷程記錄幾乎都附有時間戳記，以指出每一筆資料的收集時間。</span><span class="sxs-lookup"><span data-stu-id="989be-307">Failure history, machine conditions, repair history, usage history almost always come with time-stamps indicating the time of collection for each piece of data.</span></span> <span data-ttu-id="989be-308">一般而言，機器特徵和操作者特徵屬於靜態資料，因為它們通常會描述機器的技術規格或操作者的屬性。</span><span class="sxs-lookup"><span data-stu-id="989be-308">Machine features and operator features in general are static since they usually describe the technical specifications of machines or operator’s properties.</span></span> <span data-ttu-id="989be-309">這些特徵可能會隨著時間改變，若是如此，則應將它們視為具有時間戳記的資料來源。</span><span class="sxs-lookup"><span data-stu-id="989be-309">It is possible for these features to change over time and if so they should be treated as time stamped data sources.</span></span>

### <a name="merging-data-sources"></a><span data-ttu-id="989be-310">合併資料來源</span><span class="sxs-lookup"><span data-stu-id="989be-310">Merging data sources</span></span>
<span data-ttu-id="989be-311">在進入任何類型的特徵設計或標記程序之前，我們必須先以建立特徵所需的形式來準備我們的資料。</span><span class="sxs-lookup"><span data-stu-id="989be-311">Before getting into any type of feature engineering or labeling process, we need to first prepare our data in the form required to create features from.</span></span> <span data-ttu-id="989be-312">最終目標是要針對每個資產的每個時間單位產生一筆記錄，並將其特徵和標籤饋入機器學習演算法中。</span><span class="sxs-lookup"><span data-stu-id="989be-312">The ultimate goal is to generate a record for each time unit for each asset with its features and labels to be fed into the machine learning algorithm.</span></span> <span data-ttu-id="989be-313">若要準備明確的最終資料集，則必須採取一些前處理步驟。</span><span class="sxs-lookup"><span data-stu-id="989be-313">In order to prepare that clean final data set, some pre-processing steps should be taken.</span></span> <span data-ttu-id="989be-314">第一個步驟是將資料收集期間分割成數個時間單位，而每一筆記錄會屬於某項資產的某一個時間單位。</span><span class="sxs-lookup"><span data-stu-id="989be-314">First step is to divide the duration of data collection into time units where each record belongs to a time unit for an asset.</span></span> <span data-ttu-id="989be-315">資料收集可以也分割成其他單位 (例如動作)，不過為了簡單起見，我們將使用時間單位進行其餘的說明。</span><span class="sxs-lookup"><span data-stu-id="989be-315">Data collection can also be divided into other units such as actions, however for simplicity we use time units for the rest of the explanations.</span></span>

<span data-ttu-id="989be-316">根據資料準備的效率以及在不同時間單位之間的資產狀況中觀察到的變更或領域特有的其他因素，時間的度量單位可以是秒、分鐘、小時、天、月、週期、英哩或交易。</span><span class="sxs-lookup"><span data-stu-id="989be-316">The measurement unit for time can be in seconds, minutes, hours, days, months, cycles, miles or transactions depending on the efficiency of data preparation and the changes observed in the conditions of the asset from a time unit to the other or other factors specific to the domain.</span></span> <span data-ttu-id="989be-317">換句話說，時間單位不一定要與資料收集的頻率相同，因為在許多情況下，資料可能不會顯示單位之間的差異。</span><span class="sxs-lookup"><span data-stu-id="989be-317">In other words, the time unit does not have to be the same as the frequency of data collection as in many cases data may not show any difference from one unit to the other.</span></span> <span data-ttu-id="989be-318">比方說，如果每隔 10 秒收集一次溫度值，則為整個分析挑選 10 秒的時間單位會使範例數目不當擴大，而不需提供任何其他資訊。</span><span class="sxs-lookup"><span data-stu-id="989be-318">For example, if temperature values were being collected every 10 seconds, picking a time unit of 10 seconds for the whole analysis inflates the number of examples without providing any additional information.</span></span> <span data-ttu-id="989be-319">比較好的策略會是使用一小時的平均值做為範例。</span><span class="sxs-lookup"><span data-stu-id="989be-319">Better strategy would be to use average over an hour as an example.</span></span>

<span data-ttu-id="989be-320">前一節說明的可能資料來源的一般資料結構描述範例如下：</span><span class="sxs-lookup"><span data-stu-id="989be-320">Example generic data schemas for the possible data sources explained in the earlier section are:</span></span>

<span data-ttu-id="989be-321">維護記錄：這些是已執行的維護動作記錄。</span><span class="sxs-lookup"><span data-stu-id="989be-321">Maintenance records: These are the records of maintenance actions performed.</span></span> <span data-ttu-id="989be-322">原始維護資料通常附有資產識別碼和時間戳記，以及當時執行維護活動的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="989be-322">The raw maintenance data usually comes with an Asset ID and time stamp with information about what maintenance activities have been performed at that time.</span></span> <span data-ttu-id="989be-323">如果出現這種原始資料，維護活動必須轉譯成類別資料行，而每個類別會對應至某個維護動作類型。</span><span class="sxs-lookup"><span data-stu-id="989be-323">In case of such raw data, maintenance activities need to be translated into categorical columns with each category corresponding to a maintenance action type.</span></span> <span data-ttu-id="989be-324">維護記錄的基本資料結構描述包含資產識別碼、時間和維護動作資料行。</span><span class="sxs-lookup"><span data-stu-id="989be-324">The basic data schema for maintenance records would include asset ID, time and maintenance action columns.</span></span>

<span data-ttu-id="989be-325">故障記錄：這些是屬於預測目標的記錄，我們稱之為故障或故障原因。</span><span class="sxs-lookup"><span data-stu-id="989be-325">Failure records: These are the records that belong to the target of prediction which we call failures or failure reason.</span></span> <span data-ttu-id="989be-326">這些可以是依特定商務狀況所定義的特定錯誤代碼或故障事件。</span><span class="sxs-lookup"><span data-stu-id="989be-326">These can be specific error codes or events of failures defined by specific business condition.</span></span> <span data-ttu-id="989be-327">在某些情況下，資料會包含多個錯誤代碼，其中一些會對應至感興趣的故障。</span><span class="sxs-lookup"><span data-stu-id="989be-327">In some cases, data includes multiple error codes some of which correspond to failures of interest.</span></span> <span data-ttu-id="989be-328">並非所有的錯誤都是預測的目標，因此其他錯誤通常用來建構可能與故障相互關聯的特徵。</span><span class="sxs-lookup"><span data-stu-id="989be-328">Not all errors are target of prediction so other errors are usually used to construct features that may correlate with failures.</span></span> <span data-ttu-id="989be-329">故障記錄的基本資料結構描述會包含資產識別碼、時間和故障或故障原因 (如果可取得原因) 資料行。</span><span class="sxs-lookup"><span data-stu-id="989be-329">The basic data schema for failure records would include asset ID, time and failure or failure reason columns if reason is available.</span></span>

<span data-ttu-id="989be-330">機器狀況：這些是有關機器運作狀況的監視資料 (最好是即時資料)。</span><span class="sxs-lookup"><span data-stu-id="989be-330">Machine conditions: These are preferably real-time monitoring data about the operating conditions of the data.</span></span> <span data-ttu-id="989be-331">比方說，機門故障，開門和關門時間是有關機門目前狀況的良好指標。</span><span class="sxs-lookup"><span data-stu-id="989be-331">For example, for door failures, door opening and closing times are good indicators about the current condition of doors.</span></span> <span data-ttu-id="989be-332">機器狀況的基本資料結構描述包含資產識別碼、時間和狀況值資料行。</span><span class="sxs-lookup"><span data-stu-id="989be-332">The basic data schema for machine conditions would include asset ID, time and condition value columns.</span></span>

<span data-ttu-id="989be-333">機器和操作者資料：機器和操作者資料可以合併成一個結構描述，以識別哪一項資產是由哪一個操作者操作以及資產和操作者屬性。</span><span class="sxs-lookup"><span data-stu-id="989be-333">Machine and operator data: Machine and operator data can be merged into one schema to identify which asset was operated by which operator along with asset and operator properties.</span></span> <span data-ttu-id="989be-334">例如，汽車通常是由駕駛所擁有，其屬性包含年齡、駕駛經驗等。如果此資料會隨著時間改變，這項資料也應該包含時間資料行，並應視為不同的功能產生的資料的時間。</span><span class="sxs-lookup"><span data-stu-id="989be-334">For example, a car is usually owned by a driver with attributes such as age, driving experience etc. If this data changes over time, this data should also include a time column and should be treated as time varying data for feature generation.</span></span> <span data-ttu-id="989be-335">機器狀況的基本資料結構描述包含資產識別碼、資產特徵、操作者識別碼和操作者特徵。</span><span class="sxs-lookup"><span data-stu-id="989be-335">The basic data schema for machine conditions would include asset ID, asset features, operator ID and operator features.</span></span>

<span data-ttu-id="989be-336">將機器狀況資料表與資產識別碼和時間欄位上的故障記錄進行左聯結，即可產生標記和特徵產生前的最後一個資料表。</span><span class="sxs-lookup"><span data-stu-id="989be-336">The final table before labeling and feature generation can be generated by left joining machine conditions table with failure records on Asset ID and time fields.</span></span> <span data-ttu-id="989be-337">然後這個資料表會與資產識別碼和時間欄位上的維修記錄聯結，最後再與資產識別碼上的機器和操作者特徵聯結。</span><span class="sxs-lookup"><span data-stu-id="989be-337">This table can then be joined with maintenance records on Asset ID and Time fields and finally with machine and operator features on Asset ID.</span></span> <span data-ttu-id="989be-338">第一個左聯結會在機器運作正常時讓故障資料行維持 null 值，而這些 null 值可由正常運作的指標值插補。</span><span class="sxs-lookup"><span data-stu-id="989be-338">The first left join leaves null values for failure column when machine is in normal operation, these can be imputed by an indicator value for normal operation.</span></span> <span data-ttu-id="989be-339">此故障資料行將用於建立預測性模型的標籤。</span><span class="sxs-lookup"><span data-stu-id="989be-339">This failure column is used to create labels for the predictive model.</span></span>

### <a name="feature-engineering"></a><span data-ttu-id="989be-340">特徵設計</span><span class="sxs-lookup"><span data-stu-id="989be-340">Feature engineering</span></span>
<span data-ttu-id="989be-341">模型化的第一個步驟就是特徵設計。</span><span class="sxs-lookup"><span data-stu-id="989be-341">The first step in modeling is feature engineering.</span></span> <span data-ttu-id="989be-342">特徵產生的原則就是使用截至特定時間點所收集的歷程記錄資料，在概念上描述和摘要說明機器在該時間點的健康狀況。</span><span class="sxs-lookup"><span data-stu-id="989be-342">The idea of feature generation is to conceptually describe and abstract a machine’s health condition at a given time using historical data that was collected up to that point in time.</span></span> <span data-ttu-id="989be-343">在下一節中，我們將提供可用於預測性維護的技巧類型概觀，以及如何針對每種技巧進行標記。</span><span class="sxs-lookup"><span data-stu-id="989be-343">In the next section, we provide an overview of the type of techniques that can be used for predictive maintenance and how the labeling is done for each technique.</span></span> <span data-ttu-id="989be-344">應使用的確切技巧取決於資料和商務問題。</span><span class="sxs-lookup"><span data-stu-id="989be-344">The exact technique that should be used depends on the data and business problem.</span></span> <span data-ttu-id="989be-345">不過，以下所述的特徵設計方法可當作建立特徵的基準。</span><span class="sxs-lookup"><span data-stu-id="989be-345">However, the feature engineering methods described below can be used as baseline for creating features.</span></span> <span data-ttu-id="989be-346">我們會接著討論應從附有時間戳記的資料來源建構的延隔時間特徵，以及從靜態資料來源建立的靜態特徵，並提供使用案例中的範例。</span><span class="sxs-lookup"><span data-stu-id="989be-346">Below, we discuss lag features that should be constructed from data sources that come with time-stamps and also static features created from static data sources and provide examples from the use cases.</span></span>

#### <a name="lag-features"></a><span data-ttu-id="989be-347">延隔時間特徵</span><span class="sxs-lookup"><span data-stu-id="989be-347">Lag features</span></span>
<span data-ttu-id="989be-348">如先前所述，在預測性維護中，歷程記錄資料通常附有時間戳記，以指出每一筆資料的收集時間。</span><span class="sxs-lookup"><span data-stu-id="989be-348">As mentioned earlier, in predictive maintenance, historical data usually comes with timestamps indicating the time of collection for each piece of data.</span></span> <span data-ttu-id="989be-349">有許多方法可從附有時間戳記資料的資料建立特徵。</span><span class="sxs-lookup"><span data-stu-id="989be-349">There are many ways of creating features from the data that comes with timestamped data.</span></span> <span data-ttu-id="989be-350">在這一節中，我們會討論用於預測性維護的其中一些方法。</span><span class="sxs-lookup"><span data-stu-id="989be-350">In this section, we discuss some of these methods used for predictive maintenance.</span></span> <span data-ttu-id="989be-351">不過，我們不會只受限於這些方法。</span><span class="sxs-lookup"><span data-stu-id="989be-351">However, we are not limited by these methods alone.</span></span> <span data-ttu-id="989be-352">因為特徵設計被視為預測性模型中最具創意的領域之一，所以可能有許多其他方式可用來建立特徵。</span><span class="sxs-lookup"><span data-stu-id="989be-352">Since feature engineering is considered to be one of the most creative areas of predictive modeling, there could be many other ways to create features.</span></span> <span data-ttu-id="989be-353">我們在此提供了某些一般技巧。</span><span class="sxs-lookup"><span data-stu-id="989be-353">Here, we provide some general techniques.</span></span>

##### <a name="rolling-aggregates"></a><span data-ttu-id="989be-354">*滾動彙總*</span><span class="sxs-lookup"><span data-stu-id="989be-354">*Rolling aggregates*</span></span>
<span data-ttu-id="989be-355">對於資產的每一筆記錄，我們選擇大小為 "W" 的滾動時段，這也就是我們想要計算歷程記錄彙總的時間單位數。</span><span class="sxs-lookup"><span data-stu-id="989be-355">For each record of an asset, we pick a rolling window of size "W" which is the number of units of time that we would like to compute historical aggregates for.</span></span> <span data-ttu-id="989be-356">然後，我們會使用該記錄的日期之前的 W 個期間，計算滾動彙總特徵。</span><span class="sxs-lookup"><span data-stu-id="989be-356">We then compute rolling aggregate features using the W periods before the date of that record.</span></span> <span data-ttu-id="989be-357">滾動彙總的範例包括：滾動計數、平均值、標準差、以標準差為基礎的離群值、CUSUM 量值、時段的最小和最大值。</span><span class="sxs-lookup"><span data-stu-id="989be-357">Some example rolling aggregates can be rolling counts, means, standard deviations, outliers based on standard deviations, CUSUM measures, minimum and maximum values for the window.</span></span> <span data-ttu-id="989be-358">還有另一個有趣的技巧，就是使用以異常偵測演算法偵測資料異常的演算法來擷取趨勢變更、尖峰和層級變更。</span><span class="sxs-lookup"><span data-stu-id="989be-358">Another interesting technique is to capture trend changes, spikes and level changes using algorithms that detect anomalies in data using anomaly detection algorithms.</span></span>

<span data-ttu-id="989be-359">如需示範，請參閱圖 1，我們以藍線表示針對每個時間單位的資產所記錄的感應器值，並標示 W = 3 時位於 t<sub>1</sub> 和 t<sub>2</sub> 之記錄 (分別以橘色和綠色群組表示) 的滾動平均特徵計算。</span><span class="sxs-lookup"><span data-stu-id="989be-359">For demonstration, see Figure 1 where we represent sensor values recorded for an asset for each unit of time with the blue lines and mark the rolling average feature calculation for W=3 for the records at t<sub>1</sub> and t<sub>2</sub> which are indicated by orange and green groupings respectively.</span></span>

![圖 1.](media/cortana-analytics-playbook-predictive-maintenance/rolling-aggregate-features.png)

<span data-ttu-id="989be-362">圖 1.</span><span class="sxs-lookup"><span data-stu-id="989be-362">Figure 1.</span></span> <span data-ttu-id="989be-363">滾動彙總特徵</span><span class="sxs-lookup"><span data-stu-id="989be-363">Rolling aggregate features</span></span>

<span data-ttu-id="989be-364">舉例來說，飛機零組件故障時，上一週、過去三天和過去一天的感應器值會用來建立滾動平均值、標準差及總和特徵。</span><span class="sxs-lookup"><span data-stu-id="989be-364">As examples, for aircraft component failure, sensor values from last week, last three days and last day were used to create rolling means, standard deviation and sum features.</span></span> <span data-ttu-id="989be-365">同樣地，ATM 故障時，則會使用原始感應器值和滾動平均值、中間值、值域、標準差、超過三個標準差的離群值數目、CUMSUM 上限和下限特徵。</span><span class="sxs-lookup"><span data-stu-id="989be-365">Similarly, for ATM failures, both raw sensor values and rolling means, median, range, standard deviations, number of outliers beyond three standard deviations, upper and lower CUMSUM features were used.</span></span>

<span data-ttu-id="989be-366">對於航班延誤預測，則會使用上一週的錯誤代碼計數來建立特徵。</span><span class="sxs-lookup"><span data-stu-id="989be-366">For flight delay prediction, counts of error codes from last week were used to create features.</span></span> <span data-ttu-id="989be-367">對於列車門故障，則會使用過去一天的事件計數、過去 2 週的事件計數和過去 15 天的事件計數變異來建立延隔時間特徵。</span><span class="sxs-lookup"><span data-stu-id="989be-367">For train door failures, counts of the events on the last day, counts of events over the previous 2 weeks and variance of counts of events of the previous 15 days were used to create lag features.</span></span> <span data-ttu-id="989be-368">維護相關事件採用了相同的計算方式。</span><span class="sxs-lookup"><span data-stu-id="989be-368">Same counting was used for maintenance-related events.</span></span>

<span data-ttu-id="989be-369">此外，透過挑選非常大的 W (例如，</span><span class="sxs-lookup"><span data-stu-id="989be-369">Additionally, by picking a W that is very large (ex.</span></span> <span data-ttu-id="989be-370">年)，就能查看資產的完整歷程記錄 (例如計算所有維護記錄、故障等)，</span><span class="sxs-lookup"><span data-stu-id="989be-370">years), it is possible to look at the whole history of an asset such as counting all maintenance records, failures etc.</span></span> <span data-ttu-id="989be-371">直到記錄的時間為止。</span><span class="sxs-lookup"><span data-stu-id="989be-371">up until the time of the record.</span></span> <span data-ttu-id="989be-372">這個方法用於計算過去三年的斷路器故障。</span><span class="sxs-lookup"><span data-stu-id="989be-372">This method was used for counting circuit breaker failures for the last three years.</span></span> <span data-ttu-id="989be-373">同樣對於列車故障，所有維護事件都會計算在內，以建立一個可擷取長期維護效果的特徵。</span><span class="sxs-lookup"><span data-stu-id="989be-373">Also for train failures, all maintenance events were counted to create a feature to capture the long-term maintenance effects.</span></span>

##### <a name="tumbling-aggregates"></a><span data-ttu-id="989be-374">*輪轉彙總*</span><span class="sxs-lookup"><span data-stu-id="989be-374">*Tumbling aggregates*</span></span>
<span data-ttu-id="989be-375">針對資產的每個標記記錄，我們挑選了一個大小為 "W-<sub>k</sub>" 的時段，其中 k 是我們想要為其建立延隔時間特徵之大小 "W" 的數量或時段。</span><span class="sxs-lookup"><span data-stu-id="989be-375">For each labeled record of an asset, we pick a window of size "W-<sub>k</sub>" where k is the number or windows of size "W" that we want to create lag features for.</span></span> <span data-ttu-id="989be-376">可為 "k" 挑選較大的數目以擷取長期降低模式，或挑選較小的數目以擷取短期效果。</span><span class="sxs-lookup"><span data-stu-id="989be-376">"k" can be picked as a large number to capture long-term degradation patterns or a small number to capture short-term effects.</span></span> <span data-ttu-id="989be-377">我們接著使用 k 個輪轉時段 W-<sub>k</sub> 、W-<sub>(k-1)</sub> ...... W-<sub>2</sub>、W-<sub>1</sub> 來建立記錄日期和時間之前期間的彙總特徵 (請參閱圖 2)。</span><span class="sxs-lookup"><span data-stu-id="989be-377">We then use k tumbling windows W-<sub>k</sub> , W-<sub>(k-1)</sub>, …, W-<sub>2</sub> , W-<sub>1</sub> to create aggregate features for the periods before the record date and time (see Figure 2).</span></span> <span data-ttu-id="989be-378">這些也是圖 2 中未擷取之時間單位的記錄層級滾動時段，但概念與圖 1 相同，其中 t<sub>2</sub> 也會用來示範滾動效果。</span><span class="sxs-lookup"><span data-stu-id="989be-378">These are also rolling windows at the record level for a time unit which is not captured in Figure 2 but the idea is the same as in Figure 1 where t<sub>2</sub> is also used to demonstrate the rolling effect.</span></span>

![圖 2.](media/cortana-analytics-playbook-predictive-maintenance/tumbling-aggregate-features.png)

<span data-ttu-id="989be-381">圖 2.</span><span class="sxs-lookup"><span data-stu-id="989be-381">Figure 2.</span></span> <span data-ttu-id="989be-382">輪轉彙總特徵</span><span class="sxs-lookup"><span data-stu-id="989be-382">Tumbling aggregate features</span></span>

<span data-ttu-id="989be-383">以風力渦輪機為例，使用 W=1 和 k=3 個月來建立過去 3 個月內每個月的延隔時間特徵 (使用最大和最小離群值)。</span><span class="sxs-lookup"><span data-stu-id="989be-383">As an example, for wind turbines, W=1 and k=3 months were used to create lag features for each of the last 3 months using top and bottom outliers.</span></span>

#### <a name="static-features"></a><span data-ttu-id="989be-384">靜態特徵</span><span class="sxs-lookup"><span data-stu-id="989be-384">Static features</span></span>
<span data-ttu-id="989be-385">這些是設備的技術規格，例如製造日期、型號、位置等等。雖然延隔時間特徵本質上多半為數值，而靜態特徵通常會變成模型中的類別變數。</span><span class="sxs-lookup"><span data-stu-id="989be-385">These are technical specifications of the equipment such as manufacture date, model number, location, etc. While lag features are mostly numeric in nature, static features usually become categorical variables in the models.</span></span> <span data-ttu-id="989be-386">舉例來說，會使用斷路器屬性 (例如電壓、電流和電力規則以及變壓器類型、電源等)。</span><span class="sxs-lookup"><span data-stu-id="989be-386">As an example, circuit breaker properties such as voltage, current and power specifications along with transformer types, power sources etc. were used.</span></span> <span data-ttu-id="989be-387">對於煞車碟盤故障，輪圈類型 (例如是否為合金或鋼材) 會當作一些靜態特徵使用。</span><span class="sxs-lookup"><span data-stu-id="989be-387">For brake disc failures, the type of tire wheels such as if they are alloy or steel were used as some of the static features.</span></span>

<span data-ttu-id="989be-388">在特徵產生期間，應執行其他一些重要步驟，例如處理遺失值和正規化。</span><span class="sxs-lookup"><span data-stu-id="989be-388">During feature generation, some other important steps such as handling missing values and normalization should be performed.</span></span> <span data-ttu-id="989be-389">遺失值插補和資料正規化的方法都有很多種，此處將不會加以討論。</span><span class="sxs-lookup"><span data-stu-id="989be-389">There are numerous methods of missing value imputation and also data normalization which is not discussed here.</span></span> <span data-ttu-id="989be-390">不過，嘗試不同的方法來看看是否可能提升預測效能，則是非常實用。</span><span class="sxs-lookup"><span data-stu-id="989be-390">However, it is beneficial to try different methods to see if an increase in prediction performance is possible.</span></span>

<span data-ttu-id="989be-391">當時間單位為 1 天時，上一節所述的特徵設計步驟後面的最終特徵資料表應該類似下列範例資料結構描述：</span><span class="sxs-lookup"><span data-stu-id="989be-391">The final feature table after feature engineering steps discussed in the earlier section should resemble the following example data schema when time unit is a day:</span></span>

| <span data-ttu-id="989be-392">資產識別碼</span><span class="sxs-lookup"><span data-stu-id="989be-392">Asset ID</span></span> | <span data-ttu-id="989be-393">時間</span><span class="sxs-lookup"><span data-stu-id="989be-393">Time</span></span> | <span data-ttu-id="989be-394">特徵資料行</span><span class="sxs-lookup"><span data-stu-id="989be-394">Feature Columns</span></span> | <span data-ttu-id="989be-395">標籤</span><span class="sxs-lookup"><span data-stu-id="989be-395">Label</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="989be-396">1</span><span class="sxs-lookup"><span data-stu-id="989be-396">1</span></span> |<span data-ttu-id="989be-397">第 1 天</span><span class="sxs-lookup"><span data-stu-id="989be-397">Day 1</span></span> | | |
| <span data-ttu-id="989be-398">1</span><span class="sxs-lookup"><span data-stu-id="989be-398">1</span></span> |<span data-ttu-id="989be-399">第 2 天</span><span class="sxs-lookup"><span data-stu-id="989be-399">Day 2</span></span> | | |
| <span data-ttu-id="989be-400">...</span><span class="sxs-lookup"><span data-stu-id="989be-400">...</span></span> |<span data-ttu-id="989be-401">...</span><span class="sxs-lookup"><span data-stu-id="989be-401">...</span></span> | | |
| <span data-ttu-id="989be-402">2</span><span class="sxs-lookup"><span data-stu-id="989be-402">2</span></span> |<span data-ttu-id="989be-403">第 1 天</span><span class="sxs-lookup"><span data-stu-id="989be-403">Day 1</span></span> | | |
| <span data-ttu-id="989be-404">2</span><span class="sxs-lookup"><span data-stu-id="989be-404">2</span></span> |<span data-ttu-id="989be-405">第 2 天</span><span class="sxs-lookup"><span data-stu-id="989be-405">Day 2</span></span> | | |
| <span data-ttu-id="989be-406">...</span><span class="sxs-lookup"><span data-stu-id="989be-406">...</span></span> |<span data-ttu-id="989be-407">...</span><span class="sxs-lookup"><span data-stu-id="989be-407">...</span></span> | | |

## <a name="modeling-techniques"></a><span data-ttu-id="989be-408">模型化技巧</span><span class="sxs-lookup"><span data-stu-id="989be-408">Modeling techniques</span></span>
<span data-ttu-id="989be-409">預測性維護是非常豐富的領域，通常會採用可從許多不同角度的預測性模型觀點著手的商務問題。</span><span class="sxs-lookup"><span data-stu-id="989be-409">Predictive Maintenance is a very rich domain often employing business questions which may be approached from many different angles of the predictive modeling perspective.</span></span> <span data-ttu-id="989be-410">在後續各節中，我們會提供一些主要技巧，以便將可利用預測性維護解決方案回答的不同商務問題模型化。</span><span class="sxs-lookup"><span data-stu-id="989be-410">In the next sections, we provide main techniques that are used to model different business questions that can be answered with predictive maintenance solutions.</span></span> <span data-ttu-id="989be-411">雖有相似之處，但每個模型都有自己用來建構標籤 (後面詳加說明) 的方法。</span><span class="sxs-lookup"><span data-stu-id="989be-411">Although there are similarities, each model has its own way of constructing labels which are described in detail.</span></span> <span data-ttu-id="989be-412">此外，您可以參考 Azure Machine Learning 提供的範例實驗中包含的測性維護範本。</span><span class="sxs-lookup"><span data-stu-id="989be-412">As an accompanying resource, you can refer to the predictive maintenance template that is included in the sample experiments provided within Azure Machine Learning.</span></span> <span data-ttu-id="989be-413">我們將在 [資源] 區段中提供此範本的線上內容連結。</span><span class="sxs-lookup"><span data-stu-id="989be-413">The links to the online material for this template are provided in the resources section.</span></span> <span data-ttu-id="989be-414">您可以看到如何應用上面討論的一些特徵設計技巧以及將在後續各節中說明的模型化技巧，透過 Azure Machine Learning 來預測飛機引擎故障。</span><span class="sxs-lookup"><span data-stu-id="989be-414">You can see how some of the feature engineering techniques discussed above and the modeling technique that is described in the next sections are applied to predict aircraft engine failures using Azure Machine Learning.</span></span>

### <a name="binary-classification-for-predictive-maintenance"></a><span data-ttu-id="989be-415">預測性維護的二元分類</span><span class="sxs-lookup"><span data-stu-id="989be-415">Binary classification for predictive maintenance</span></span>
<span data-ttu-id="989be-416">預測性維護的二元分類可用來預測在未來某個期間內設備會故障的機率。</span><span class="sxs-lookup"><span data-stu-id="989be-416">Binary Classification for predictive maintenance is used to predict the probability that equipment fails within a future time period.</span></span> <span data-ttu-id="989be-417">此期間是根據商務規則和既有資料來決定。</span><span class="sxs-lookup"><span data-stu-id="989be-417">The time period is determined by and based on business rules and the data at hand.</span></span> <span data-ttu-id="989be-418">某些共同期間是購買備用零件來更換可能受損零組件所需的最小前置時間，或是部署維護資源來執行維護例行工作所需的時間，以便修正可能在該期間內發生的問題。</span><span class="sxs-lookup"><span data-stu-id="989be-418">Some common time periods are minimum lead time required to purchase spare parts to replace likely to damage components or time required to deploy maintenance resources to perform maintenance routines to fix the problem that is likely to occur within that time period.</span></span> <span data-ttu-id="989be-419">我們將這個未來水平期間稱為 "X"。</span><span class="sxs-lookup"><span data-stu-id="989be-419">We call this future horizon period "X".</span></span>

<span data-ttu-id="989be-420">為了使用二元分類，我們必須識別兩種範例類型 (我們稱之為肯定和否定)。</span><span class="sxs-lookup"><span data-stu-id="989be-420">In order to use binary classification, we need to identify two types of examples which we call positive and negative.</span></span> <span data-ttu-id="989be-421">每個範例都是一筆記錄，其屬於資產的某個時間單位，可透過特徵設計 (使用歷程記錄和先前所述的其他資料來源) 在概念上描述和摘要說明截至該時間單位為止的運作狀況。</span><span class="sxs-lookup"><span data-stu-id="989be-421">Each example is a record that belongs to a time unit for an asset conceptually describing and abstracting its operating conditions up to that time unit through feature engineering using historical and other data sources described earlier.</span></span> <span data-ttu-id="989be-422">在預測性維護的二元分類內容中，肯定類型表示故障 (標籤 1)，而否定類型表示正常作業 (標籤 = 0)，其中的標籤屬於「類別」類型。</span><span class="sxs-lookup"><span data-stu-id="989be-422">In the context of binary classification for predictive maintenance, positive type denotes failures (label 1) and negative type denotes normal operations (label = 0) where labels are of type categorical.</span></span> <span data-ttu-id="989be-423">其目標在於尋找一個模型，以便將每個新範例識別為在接下來 X 個時間單位內可能會故障或運作正常。</span><span class="sxs-lookup"><span data-stu-id="989be-423">The goal is to find a model that identifies each new example as likely to fail or operate normally within the next X units of time.</span></span>

#### <a name="label-construction"></a><span data-ttu-id="989be-424">標籤建構</span><span class="sxs-lookup"><span data-stu-id="989be-424">Label construction</span></span>
<span data-ttu-id="989be-425">若要建立一個預測性模型來回答「資產在接下來 X 個時間單位內會故障的機率為何？」這個問題，請取用資產故障前的 X 筆記錄並將其標記為「即將故障」(標籤 = 1)，而將其他所有記錄標記為「正常」(標籤 = 0)，即可完成標記。</span><span class="sxs-lookup"><span data-stu-id="989be-425">In order to create a predictive model to answer the question "What is the probability that the asset fails in the next X units of time?", labeling is done by taking X records prior to the failure of an asset and labeling them as "about to fail" (label = 1) while labeling all other records as "normal" (label =0).</span></span> <span data-ttu-id="989be-426">在此方法中，標籤為類別變數 (請參閱圖 3)。</span><span class="sxs-lookup"><span data-stu-id="989be-426">In this method, labels are categorical variables (see Figure 3).</span></span>

![圖 3.](media/cortana-analytics-playbook-predictive-maintenance/labelling-for-binary-classification.png)

<span data-ttu-id="989be-429">圖 3.</span><span class="sxs-lookup"><span data-stu-id="989be-429">Figure 3.</span></span> <span data-ttu-id="989be-430">二元分類的標記方式</span><span class="sxs-lookup"><span data-stu-id="989be-430">Labeling for binary classification</span></span>

<span data-ttu-id="989be-431">對於航班延誤和取消，會挑選一天做為 X 來預測接下來 24 小時內的延誤。</span><span class="sxs-lookup"><span data-stu-id="989be-431">For flight delays and cancellations, X is picked as one day to predict delays in the next 24 hours.</span></span> <span data-ttu-id="989be-432">故障前 24 小時內的所有航班已都標記為 1。</span><span class="sxs-lookup"><span data-stu-id="989be-432">All flights that are within 24 hours before failures were labeled as 1s.</span></span> <span data-ttu-id="989be-433">對於 ATM 現金提領失敗，會建立二元分類模型來預測交易在接下來 10 分鐘內失敗的機率，也可預測後續 100 張鈔票提領失敗的機率。</span><span class="sxs-lookup"><span data-stu-id="989be-433">For ATM cash dispense failures, two binary classification models were built to predict the failure probability of a transaction in the next 10 minutes and also to predict the probability of failure in the next 100 notes dispensed.</span></span> <span data-ttu-id="989be-434">若為第一個模型，在失敗的最後 10 分鐘內發生的所有交易都會被標記為 1。</span><span class="sxs-lookup"><span data-stu-id="989be-434">All transactions that happened within the last 10 minutes of the failure are labeled as 1 for the first model.</span></span> <span data-ttu-id="989be-435">若為第二個模型，在失敗的最後 100 張鈔票內提領的所有鈔票都會被標記為 1。</span><span class="sxs-lookup"><span data-stu-id="989be-435">And all notes dispensed within the last 100 notes of a failure were labeled as 1 for the second model.</span></span> <span data-ttu-id="989be-436">斷路器故障時的工作是要預測下一個斷路器命令會失敗的機率，在此情況下會選擇一個未來命令做為 X。</span><span class="sxs-lookup"><span data-stu-id="989be-436">For circuit breaker failures, the task is to predict the probability that the next circuit breaker command fails in which case X is chosen to be one future command.</span></span> <span data-ttu-id="989be-437">對於列車門故障，已建立二元分類模型來預測在接下來 7 天內的故障。</span><span class="sxs-lookup"><span data-stu-id="989be-437">For train door failures, the binary classification model was built to predict failures within the next 7 days.</span></span> <span data-ttu-id="989be-438">對於風力渦輪機故障，已選擇 3 個月做為 X。</span><span class="sxs-lookup"><span data-stu-id="989be-438">For wind turbine failures, X was chosen as 3 months.</span></span>

<span data-ttu-id="989be-439">風力渦輪機和列車門案例也會用於迴歸分析，以使用相同的資料來預測剩餘使用年限 (但是利用下一節中說明的不同標記策略)。</span><span class="sxs-lookup"><span data-stu-id="989be-439">Wind turbine and train door cases are also used for regression analysis to predict remaining useful life using the same data but by utilizing a different labeling strategy which is explained in the next section.</span></span>

### <a name="regression-for-predictive-maintenance"></a><span data-ttu-id="989be-440">預測性維護的迴歸</span><span class="sxs-lookup"><span data-stu-id="989be-440">Regression for predictive maintenance</span></span>
<span data-ttu-id="989be-441">預測性維護中的迴歸模型用來計算資產的剩餘使用年限 (RUL)，其已定義為資產在發生下一次故障前可運作的時間量。</span><span class="sxs-lookup"><span data-stu-id="989be-441">Regression models in predictive maintenance are used to compute the remaining useful life (RUL) of an asset which is defined as the amount of time that the asset is operational before the next failure occurs.</span></span> <span data-ttu-id="989be-442">與二元分類相同，每個範例都是一筆記錄，其屬於資產的時間單位 "Y"。</span><span class="sxs-lookup"><span data-stu-id="989be-442">Same as binary classification, each example is a record that belongs to a time unit "Y" for an asset.</span></span> <span data-ttu-id="989be-443">不過，在迴歸的內容中，目標在於尋找一個模型，以將每個新範例的剩餘使用年限計算為一個連續的數字，而這就是故障前剩餘的一段時間。</span><span class="sxs-lookup"><span data-stu-id="989be-443">However, in the context of regression, the goal is to find a model that calculates the remaining useful life of each new example as a continuous number which is the period of time remaining before the failure.</span></span> <span data-ttu-id="989be-444">我們認為這段期間是 Y 的某個倍數。測量每個範例在下一次故障前的剩餘時間量，也可以計算該範例的剩餘使用年限。</span><span class="sxs-lookup"><span data-stu-id="989be-444">We call this time period some multiple of Y. Each example also has a remaining useful life which can be calculated by measuring the amount of time remaining for that example before the next failure.</span></span>

#### <a name="label-construction"></a><span data-ttu-id="989be-445">標籤建構</span><span class="sxs-lookup"><span data-stu-id="989be-445">Label construction</span></span>
<span data-ttu-id="989be-446">假設有一個問題：「設備的剩餘使用年限為何？</span><span class="sxs-lookup"><span data-stu-id="989be-446">Given the question "What is the remaining useful life of the equipment?</span></span>
<span data-ttu-id="989be-447">」，取用故障前的每筆記錄並藉由計算下一次故障前剩餘多少個時間單位來加以標記，即可建構迴歸模型的標籤。</span><span class="sxs-lookup"><span data-stu-id="989be-447">", labels for the regression model can be constructed by taking each record prior to the failure and labeling them by calculating how many units of time remain before the next failure.</span></span> <span data-ttu-id="989be-448">在此方法中，標籤為連續變數 (請參閱圖 4)。</span><span class="sxs-lookup"><span data-stu-id="989be-448">In this method, labels are continuous variables (See Figure 4).</span></span>

![圖 4.](media/cortana-analytics-playbook-predictive-maintenance/labelling-for-regression.png)

<span data-ttu-id="989be-451">圖 4.</span><span class="sxs-lookup"><span data-stu-id="989be-451">Figure 4.</span></span> <span data-ttu-id="989be-452">迴歸的標記方式</span><span class="sxs-lookup"><span data-stu-id="989be-452">Labeling for regression</span></span>

<span data-ttu-id="989be-453">不同於二元分類，進行迴歸時，資料中沒有任何故障記錄的資產無法用於模型化，因為標記是以參照失敗點來完成，而且若不知道資產在故障前存留多久時間，便無法進行其計算。</span><span class="sxs-lookup"><span data-stu-id="989be-453">Different than binary classification, for regression, assets without any failures in the data cannot be used for modeling as labeling is done in reference to a failure point and its calculation is not possible without knowing how long the asset survived before failure.</span></span> <span data-ttu-id="989be-454">這個問題可由另一個稱為「存活分析」的統計技巧來得到最妥善的解決。</span><span class="sxs-lookup"><span data-stu-id="989be-454">This issue is best addressed by another statistical technique called Survival Analysis.</span></span>
<span data-ttu-id="989be-455">我們不會在本腳本中討論存活分析，因為將此技巧套用至資料會隨時間變化且間隔頻繁的預測性維護使用案例時，有可能會更加複雜。</span><span class="sxs-lookup"><span data-stu-id="989be-455">We are not going to discuss Survival Analysis in this playbook because of the potential complications that may arise when applying the technique to predictive maintenance use cases that involve time-varying data with frequent intervals.</span></span>

### <a name="multi-class-classification-for-predictive-maintenance"></a><span data-ttu-id="989be-456">預測性維護的多類別分類</span><span class="sxs-lookup"><span data-stu-id="989be-456">Multi-class classification for predictive maintenance</span></span>
<span data-ttu-id="989be-457">預測性維護的多類別分類可用來預測兩種未來結果。</span><span class="sxs-lookup"><span data-stu-id="989be-457">Multi-class classification for predictive maintenance can be used to predict two future outcomes.</span></span> <span data-ttu-id="989be-458">第一種是要將資產指派給多個可能期間中的其中一個，讓每個資產有故障的時間範圍。</span><span class="sxs-lookup"><span data-stu-id="989be-458">The first one is to assign an asset to one of the multiple possible periods of time to give a range of time to failure for each asset.</span></span> <span data-ttu-id="989be-459">第二種是要識別在未來期間內因為多個根本原因中的其中一個而發生故障的可能性。</span><span class="sxs-lookup"><span data-stu-id="989be-459">The second one is to identify the likelihood of failure in a future period due to one of the multiple root causes.</span></span> <span data-ttu-id="989be-460">這可讓具備此知識的維護人員可以預先處理問題。</span><span class="sxs-lookup"><span data-stu-id="989be-460">That allows maintenance personnel who are equipped with this knowledge to handle the problems in advance.</span></span> <span data-ttu-id="989be-461">另一個多類別模型化技巧則著重於判斷特定失敗的最可能根本原因。</span><span class="sxs-lookup"><span data-stu-id="989be-461">Another multi-class modeling technique focuses on determining the most likely root cause of a given a failure.</span></span> <span data-ttu-id="989be-462">這可針對為了修復故障所要採取的最上層維護動作，提供一些建議。</span><span class="sxs-lookup"><span data-stu-id="989be-462">This allows recommendations to be given for the top maintenance actions to be taken in order to fix a failure.</span></span>
<span data-ttu-id="989be-463">由於具備根原因的排名清單及其相關聯的修復動作，</span><span class="sxs-lookup"><span data-stu-id="989be-463">By having a ranked list of root causes and associated repair actions,</span></span>  
<span data-ttu-id="989be-464">技術人員可以更有效率地在失敗之後採取其第一個修復動作。</span><span class="sxs-lookup"><span data-stu-id="989be-464">technicians can be more effective in taking their first repair actions after failures.</span></span>

#### <a name="label-construction"></a><span data-ttu-id="989be-465">標籤建構</span><span class="sxs-lookup"><span data-stu-id="989be-465">Label construction</span></span>
<span data-ttu-id="989be-466">假設有以下兩個問題：「資產在接下來 "aZ" 個時間單位內故障的機率為何 (其中 "a" 是期間數)」和「資產在接下來 X 個時間單位內會由於問題 "P<sub>i</sub>" 而故障的機率為何 (其中 "i" 是可能根本原因數目)」，請以下列方式對這些技巧進行標記。</span><span class="sxs-lookup"><span data-stu-id="989be-466">Given the two questions which are "What is the probability that an asset fails in the next "aZ" units of time where "a" is the number of periods" and "What is the probability that the asset fails in the next X units of time due to problem "P<sub>i</sub>" where "i" is the number of possible root causes, labeling is done in the following way for these to techniques.</span></span>

<span data-ttu-id="989be-467">針對第一個問題，取用資產故障前的 aZ 筆記錄並使用時間值區 (3Z、2Z、Z) 做為其標籤來加以標記，而將其他所有記錄標記為「正常」(標籤 = 0)，即可完成標記。</span><span class="sxs-lookup"><span data-stu-id="989be-467">For the first question, labeling is done by taking aZ records prior to the failure of an asset and labeling them using buckets of time (3Z, 2Z, Z) as their labels while labeling all other records as "normal" (label =0).</span></span> <span data-ttu-id="989be-468">在此方法中，標籤為類別變數 (請參閱圖 5)。</span><span class="sxs-lookup"><span data-stu-id="989be-468">In this method, label is categorical variable (See Figure 5).</span></span>

![圖 5.](media/cortana-analytics-playbook-predictive-maintenance/labelling-for-multiclass-classification-for-failure-time-prediction.png)

<span data-ttu-id="989be-471">圖 5.</span><span class="sxs-lookup"><span data-stu-id="989be-471">Figure 5.</span></span> <span data-ttu-id="989be-472">故障時間預測的多類別分類標記方式</span><span class="sxs-lookup"><span data-stu-id="989be-472">Labeling for multiclass classification for failure time prediction</span></span>

<span data-ttu-id="989be-473">針對第一個問題，取用資產故障前的 X 筆記錄並將其標記為「即將由於問題 P<sub>i</sub> 而失敗」(標籤 = P<sub>i</sub>)，而將其他所有記錄標記為「正常」(標籤 = 0)，即可完成標記。</span><span class="sxs-lookup"><span data-stu-id="989be-473">For the second question, labeling is done by taking X records prior to the failure of an asset and labeling them as "about to fail due to problem P<sub>i</sub>" (label = P<sub>i</sub>) while labeling all other records as "normal" (label =0).</span></span> <span data-ttu-id="989be-474">在此方法中，標籤為類別變數 (請參閱圖 6)。</span><span class="sxs-lookup"><span data-stu-id="989be-474">In this method, labels are categorical variables (See Figure 6).</span></span>

![圖 6.](media/cortana-analytics-playbook-predictive-maintenance/labelling-for-multiclass-classification-for-root-cause-prediction.png)

<span data-ttu-id="989be-477">圖 6.</span><span class="sxs-lookup"><span data-stu-id="989be-477">Figure 6.</span></span> <span data-ttu-id="989be-478">根本原因預測的多類別分類標記方式</span><span class="sxs-lookup"><span data-stu-id="989be-478">Labeling for multiclass classification for root cause prediction</span></span>

<span data-ttu-id="989be-479">此模型將指派因為每個 P<sub>i</sub> 的故障機率，以及沒有故障的機率。</span><span class="sxs-lookup"><span data-stu-id="989be-479">The model assigns a failure probability due to each P<sub>i</sub> as well as the probability of no failure.</span></span> <span data-ttu-id="989be-480">這些機率可依大小排序，以便預設未來最可能發生的問題。</span><span class="sxs-lookup"><span data-stu-id="989be-480">These probabilities can be ordered by magnitude to allow prediction of the problems that are most likely to occur in the future.</span></span> <span data-ttu-id="989be-481">飛機零組件故障使用案例已結構化為多類別分類問題。</span><span class="sxs-lookup"><span data-stu-id="989be-481">Aircraft component failure use case was structured as a multiclass classification problem.</span></span> <span data-ttu-id="989be-482">這可預測在下個月內由於兩個不同壓力閥零組件造成故障的機率。</span><span class="sxs-lookup"><span data-stu-id="989be-482">This enables the prediction of the probabilities of failure due to two different pressure valve components occurring within the next month.</span></span>

<span data-ttu-id="989be-483">對於故障後的建議維護動作，標記作業不需要挑選未來水平期間。</span><span class="sxs-lookup"><span data-stu-id="989be-483">For recommending maintenance actions after failures, labeling does not require a future horizon to be picked.</span></span> <span data-ttu-id="989be-484">這是因為此模型不會預測未來故障，但只是預測發生故障後最可能的根本原因。</span><span class="sxs-lookup"><span data-stu-id="989be-484">This is because the model is not predicting failure in the future but it is just predicting the most likely root cause once the failure has already happened.</span></span> <span data-ttu-id="989be-485">電梯門故障屬於第三個案例，其目標是要預測故障的原因 (假設有運作狀況的歷程記錄資料)。</span><span class="sxs-lookup"><span data-stu-id="989be-485">Elevator door failures fall into the third case where the goal is to predict the cause of the failure given historical data on operating conditions.</span></span> <span data-ttu-id="989be-486">此模型會接著用來預測故障發生後最可能的根本原因。</span><span class="sxs-lookup"><span data-stu-id="989be-486">This model is then used to predict the most likely root causes after a failure has occurred.</span></span> <span data-ttu-id="989be-487">此模型的主要優點之一就是將協助沒有經驗的技術人員輕鬆地診斷和修正問題，否則需要數年的經驗才能解決問題。</span><span class="sxs-lookup"><span data-stu-id="989be-487">One key benefit of this model is that it helps inexperienced technicians to easily diagnose and fix problems that would otherwise need years’ worth of experience.</span></span>

## <a name="training-validation-and-testing-methods-in-predictive-maintenance"></a><span data-ttu-id="989be-488">預測性維護中的訓練、驗證及測試方法</span><span class="sxs-lookup"><span data-stu-id="989be-488">Training, validation and testing methods in predictive maintenance</span></span>
<span data-ttu-id="989be-489">在預測性維護中，類似於任何其他包含時間戳記資料的解決方案空間，典型訓練和測試例行工作必須考慮隨時間變化的層面，才能更妥善概括看不見的未來資料。</span><span class="sxs-lookup"><span data-stu-id="989be-489">In predictive maintenance, similar to any other solution space containing timestamped data, the typical training and testing routine needs to take account the time varying aspects to better generalize on unseen future data.</span></span>

### <a name="cross-validation"></a><span data-ttu-id="989be-490">交叉驗證</span><span class="sxs-lookup"><span data-stu-id="989be-490">Cross validation</span></span>
<span data-ttu-id="989be-491">許多機器學習演算法相依於可大幅改變模型效能的超參數數目。</span><span class="sxs-lookup"><span data-stu-id="989be-491">Many machine learning algorithms depend on a number of hyperparameters that can change model performance significantly.</span></span> <span data-ttu-id="989be-492">在訓練模型時，不會自動計算這些超參數的最佳值，但是應該由資料科學家指定。</span><span class="sxs-lookup"><span data-stu-id="989be-492">The optimal values of these hyperparameters are not computed automatically when training the model, but should be specified by data scientist.</span></span> <span data-ttu-id="989be-493">尋找良好超參數值的方法有好幾種。</span><span class="sxs-lookup"><span data-stu-id="989be-493">There are several ways of finding good values of hyperparameters.</span></span> <span data-ttu-id="989be-494">最常見的方法是 "k-fold cross-validation"，可隨機將範例分割成 "k" 疊。</span><span class="sxs-lookup"><span data-stu-id="989be-494">The most common one is "k-fold cross-validation" which splits the examples randomly into "k" folds.</span></span> <span data-ttu-id="989be-495">對於每組超參數值，學習演算法會執行 k 次。</span><span class="sxs-lookup"><span data-stu-id="989be-495">For each set of hyperparameters values, learning algorithm is run k times.</span></span> <span data-ttu-id="989be-496">在每次反覆運算時，目前這疊中的範例會做為驗證集，而其餘的範例則會做為訓練集。</span><span class="sxs-lookup"><span data-stu-id="989be-496">At each iteration, the examples in the current fold are used as a validation set, the rest of the examples are used as a training set.</span></span> <span data-ttu-id="989be-497">此演算法會透過訓練範例進行訓練，而效能計量則會透過驗證範例進行計算。</span><span class="sxs-lookup"><span data-stu-id="989be-497">The algorithm trains over training examples and the performance metrics are computed over validation examples.</span></span> <span data-ttu-id="989be-498">在每一組超參數值的這個迴圈結束時，我們會計算 k 個效能計量值的平均值，並選擇具有最佳平均效能的超參數值。</span><span class="sxs-lookup"><span data-stu-id="989be-498">At the end of this loop for each set of hyperparameter values, we compute average of the k performance metric values and choose hyperparameter values that have the best average performance.</span></span>

<span data-ttu-id="989be-499">如先前所述，在預測性維護問題中，會將資料記錄成來自數個資料來源之事件的時間序列。</span><span class="sxs-lookup"><span data-stu-id="989be-499">As mentioned before, in predictive maintenance problems, data is recorded as a time series of events that come from several data sources.</span></span> <span data-ttu-id="989be-500">這些記錄可以根據標記記錄或範例的時間來排序。</span><span class="sxs-lookup"><span data-stu-id="989be-500">These records can be ordered according to the time of labeling a record or an example.</span></span> <span data-ttu-id="989be-501">因此，如果我們將資料集隨機分割成訓練和驗證集，則有些訓練範例的時間會晚於某些驗證範例。</span><span class="sxs-lookup"><span data-stu-id="989be-501">Hence, if we split the dataset randomly into training and validation set, some of the training examples are later in time than some of validation examples.</span></span> <span data-ttu-id="989be-502">這會導致根據模型訓練前到來的資料來預估超參數值的未來效能。</span><span class="sxs-lookup"><span data-stu-id="989be-502">This results in estimating future performance of hyperparameter values based on the data that arrived before model was trained.</span></span> <span data-ttu-id="989be-503">這些估計可能過於樂觀，尤其是在時間序列不固定並隨著時間改變其行為的時候。</span><span class="sxs-lookup"><span data-stu-id="989be-503">These estimations might be overly optimistic, especially if time-series are not stationary and change their behavior over time.</span></span> <span data-ttu-id="989be-504">因此，所選的超參數值可能不是最理想的。</span><span class="sxs-lookup"><span data-stu-id="989be-504">As a result, chosen hyperparameter values might be sub-optimal.</span></span>

<span data-ttu-id="989be-505">尋找理想超參數值的更好方法就是以時間相依方式將範例分割成訓練和驗證集，讓所有驗證範例的時間晚於所有訓練範例。</span><span class="sxs-lookup"><span data-stu-id="989be-505">A better way of finding good values of hyperparameters is to split the examples into training and validation set in a time-dependent way, such that all validation examples are later in time than all training examples.</span></span> <span data-ttu-id="989be-506">然後，針對每一組超參數值，我們會透過訓練集來訓練演算法、透過相同的驗證集來測量模型的效能，並選擇可顯示最佳效能的超參數值。</span><span class="sxs-lookup"><span data-stu-id="989be-506">Then, for each set of values of hyperparameters we train the algorithm over training set, measure model’s performance over the same validation set and choose hyperparameter values that show the best performance.</span></span> <span data-ttu-id="989be-507">當時間序列資料不固定並隨著時間演化時，訓練/驗證分割所選的超參數值會導致「模型」的未來效能優於交叉驗證隨機選擇的值。</span><span class="sxs-lookup"><span data-stu-id="989be-507">When time-series data is not stationary and evolves over time, the hyperparameter values chosen by train/validation split lead to a better future "model's performance than with the values chosen randomly by cross-validation.</span></span>

<span data-ttu-id="989be-508">使用經由訓練/驗證分割或交叉驗證找到的最佳超參數值，透過整個資料來訓練學習演算法，就會產生最終模型。</span><span class="sxs-lookup"><span data-stu-id="989be-508">The final model is generated by training a learning algorithm over entire data using the best hyperparameter values that are found by using training/validation split or cross-validation.</span></span>

### <a name="testing-for-model-performance"></a><span data-ttu-id="989be-509">測試模型效能</span><span class="sxs-lookup"><span data-stu-id="989be-509">Testing for model performance</span></span>
<span data-ttu-id="989be-510">建立模型之後，我們必須估計其在新資料上的未來效能。</span><span class="sxs-lookup"><span data-stu-id="989be-510">After building a model we need to estimate its future performance on new data.</span></span> <span data-ttu-id="989be-511">最簡單的估計值可能是訓練資料的模型效能。</span><span class="sxs-lookup"><span data-stu-id="989be-511">The simplest estimate could be the performance of the model over the training data.</span></span> <span data-ttu-id="989be-512">但此估計值過於樂觀，因為此模型是針對用來估計效能的資料所量身打造。</span><span class="sxs-lookup"><span data-stu-id="989be-512">But this estimate is overly optimistic, because the model is tailored to the data that is used to estimate performance.</span></span> <span data-ttu-id="989be-513">透過驗證集計算的超參數值效能計量，或經由交叉驗證計算的平均效能計量，可能是比較理想的估計。</span><span class="sxs-lookup"><span data-stu-id="989be-513">A better estimate could be a performance metric of hyperparameter values computed over the validation set or an average performance metric computed from cross-validation.</span></span> <span data-ttu-id="989be-514">但是基於如先前所述的相同原因，這些估計仍然過於樂觀。</span><span class="sxs-lookup"><span data-stu-id="989be-514">But for the same reasons as previously stated, these estimations are still overly optimistic.</span></span> <span data-ttu-id="989be-515">我們需要更實際的方法來測量模型效能。</span><span class="sxs-lookup"><span data-stu-id="989be-515">We need more realistic approaches for measuring model performance.</span></span>

<span data-ttu-id="989be-516">其中一種方法就是隨機將資料分割成訓練、驗證和測試集。</span><span class="sxs-lookup"><span data-stu-id="989be-516">One way is to split the data randomly into training, validation and test sets.</span></span> <span data-ttu-id="989be-517">訓練和驗證集用來選取超參數值，並利用這些值來訓練模型。</span><span class="sxs-lookup"><span data-stu-id="989be-517">The training and validation sets are used to select values of hyperparameters and train the model with them.</span></span> <span data-ttu-id="989be-518">模型的效能是透過測試集進行測量。</span><span class="sxs-lookup"><span data-stu-id="989be-518">The performance of the model is measured over the test set.</span></span>

<span data-ttu-id="989be-519">預測性維護的另一種相關方法就是以時間相依方式將範例分割成訓練、驗證和測試集，讓所有測試範例的時間晚於所有訓練和驗證範例。</span><span class="sxs-lookup"><span data-stu-id="989be-519">Another way which is relevant to predictive maintenance, is to split the examples into training, validation and test sets in a time-dependent way, such that all test examples are later in time than all training and validation examples.</span></span> <span data-ttu-id="989be-520">在分割之後，會如先前所述產生模型和測量效能。</span><span class="sxs-lookup"><span data-stu-id="989be-520">After the split, model generation and performance measurement are done the same as described earlier.</span></span>

<span data-ttu-id="989be-521">當時間序列固定且易於預測時，這兩種方法會產生類似的未來效能估計。</span><span class="sxs-lookup"><span data-stu-id="989be-521">When time-series are stationary and easy to predict both approaches generate similar estimations of future performance.</span></span> <span data-ttu-id="989be-522">當時間序列不固定且/或難以預測時，第二種方法會產生比第一種方法更確實的未來效能估計。</span><span class="sxs-lookup"><span data-stu-id="989be-522">But when time-series are non-stationary and/or hard to predict, the second approach will generate more realistic estimates of future performance than the first one.</span></span>

### <a name="time-dependent-split"></a><span data-ttu-id="989be-523">時間相依分割</span><span class="sxs-lookup"><span data-stu-id="989be-523">Time-dependent split</span></span>
<span data-ttu-id="989be-524">最好的作法是，我們會在這一節中深入探討如何實作時間相依分割。</span><span class="sxs-lookup"><span data-stu-id="989be-524">As a best practice, in this section we take a closer look at how to implement time-dependent split.</span></span> <span data-ttu-id="989be-525">我們會說明訓練與測試集之間的時間相依雙向分割，不過訓練與驗證集的時間相依分割應可套用完全相同的邏輯。</span><span class="sxs-lookup"><span data-stu-id="989be-525">We describe a time-dependent two-way split between training and test sets, however exactly the same logic should be applied for time-dependent split for training and validation sets.</span></span>

<span data-ttu-id="989be-526">假設我們有一連串的時間戳記事件，例如來自各種感應器的測量資料。</span><span class="sxs-lookup"><span data-stu-id="989be-526">Suppose we have a stream of timestamped events such as measurements from various sensors.</span></span> <span data-ttu-id="989be-527">系統會針對包含多個事件的時間範圍，定義訓練和測試範例的特徵以及其標籤。</span><span class="sxs-lookup"><span data-stu-id="989be-527">Features of training and test examples, as well as their labels, are defined over timeframes that contain multiple events.</span></span>
<span data-ttu-id="989be-528">例如，對於二元分類，如〈特徵設計〉和〈模型化技巧〉章節所述，會根據過去的事件建立特徵，並根據未來 "X" 個時間單位內的未來事件建立標籤。</span><span class="sxs-lookup"><span data-stu-id="989be-528">For example, for binary classification, as described in Feature Engineering and Modeling Techniques sections, features are created based on the past events and labels are created based on future events within "X" units of time in the future.</span></span> <span data-ttu-id="989be-529">因此，範例的標記時間範圍會晚於其特徵的時間範圍。</span><span class="sxs-lookup"><span data-stu-id="989be-529">Thus, the labeling timeframe of an example comes later then the timeframe of its features.</span></span> <span data-ttu-id="989be-530">對於時間相依分割，我們會挑選一個時間點，我們將在此時間點使用截至該點為止的歷程記錄資料，透過微調的超參數來訓練模型。</span><span class="sxs-lookup"><span data-stu-id="989be-530">For time- dependent split, we pick a point in time at which we train a model with tuned hyperparameters by using historical data up to that point.</span></span> <span data-ttu-id="989be-531">為了避免超出訓練截止日的未來標籤外洩至訓練資料中，我們會選擇最新的時間範圍，以將訓練範例標記為訓練截止日前的 X 個時間單位。</span><span class="sxs-lookup"><span data-stu-id="989be-531">To prevent leakage of future labels that are beyond the training cut-off into training data, we choose the latest timeframe to label training examples to be X units before the training cut-off date.</span></span> <span data-ttu-id="989be-532">在圖 7 中，每個實心圓都代表最終特徵資料集中的一列，其特徵和標籤都是根據上述的方法進行計算。</span><span class="sxs-lookup"><span data-stu-id="989be-532">In Figure 7, each solid circle represents a row in the final feature data set for which the features and labels are computed according to the method described above.</span></span> <span data-ttu-id="989be-533">因此，此圖顯示在實作 X=2 和 W=3 的時間相依分割時，應該進入訓練和測試集的記錄：</span><span class="sxs-lookup"><span data-stu-id="989be-533">Given that, the figure shows the records that should go into training and testing sets when implementing time-dependent split for X=2 and W=3:</span></span>

![圖 7.](media/cortana-analytics-playbook-predictive-maintenance/time-dependent-split-for-binary-classification.png)

<span data-ttu-id="989be-536">圖 7.</span><span class="sxs-lookup"><span data-stu-id="989be-536">Figure 7.</span></span> <span data-ttu-id="989be-537">二元分類的時間相依分割</span><span class="sxs-lookup"><span data-stu-id="989be-537">Time-dependent split for binary classification</span></span>

<span data-ttu-id="989be-538">綠色方塊表示屬於可用於訓練之時間單位的記錄。</span><span class="sxs-lookup"><span data-stu-id="989be-538">The green squares represent the records belonging to the time units that can be used for training.</span></span> <span data-ttu-id="989be-539">如先前所述，最終特徵資料表中的每個訓練範例是在訓練截止日之前，藉由查看過去 3 期特徵產生和未來 2 期標記方式所產生。</span><span class="sxs-lookup"><span data-stu-id="989be-539">As explained earlier, each training example in the final feature table is generated by looking at past 3 periods for feature generation and 2 future periods for labeling before the training day cut-off.</span></span> <span data-ttu-id="989be-540">當訓練集中的範例未來 2 期有任何部分超出訓練截止日時，我們就不會使用這些範例，因為我們假設我們無法看到超出訓練截止日的資料。</span><span class="sxs-lookup"><span data-stu-id="989be-540">We do not use examples in the training set when any part of the 2 future periods for that example is beyond the training cut-off since we assume that we do not have visibility beyond the training cut-off.</span></span> <span data-ttu-id="989be-541">由於該條件約束，黑色範例代表最終標記資料集的記錄，而這些記錄不該使用於訓練資料集。</span><span class="sxs-lookup"><span data-stu-id="989be-541">Due to that constraint, black examples represent the records of the final labeled dataset that should not be used in the training data set.</span></span> <span data-ttu-id="989be-542">這些記錄不會使用於測試資料，因為它們是在訓練截止日之前，而且其標記時間範圍將部分取決於訓練時間範圍，但情況不該如此，因為我們想要完全區隔訓練與測試的標記時間範圍，以防止標籤資訊外洩。</span><span class="sxs-lookup"><span data-stu-id="989be-542">These records won’t be used in testing data either since they are before the training cut-off and their labeling timeframes partially depend on the training timeframe which should not be the case as we would like to completely separate labeling timeframes for training and testing to prevent label information leakage.</span></span>

<span data-ttu-id="989be-543">這個技巧可讓接近訓練截止日的訓練與測試範例之間，用於產生特徵的資料重疊。</span><span class="sxs-lookup"><span data-stu-id="989be-543">This technique allows for overlap in the data used for feature generation between training and testing examples that are close to the training cut-off.</span></span> <span data-ttu-id="989be-544">根據資料的可用性而定，不使用測試集中任何在訓練截止的 W 個時間單位內的範例，甚至可以完成更嚴格的區隔。</span><span class="sxs-lookup"><span data-stu-id="989be-544">Depending on data availability, an even more severe separation can be accomplished by not using any of the examples in the test set that are within W time units of the training cut-off.</span></span>

<span data-ttu-id="989be-545">從我們的工作，我們發現外洩問題對於用來預測剩餘使用年限的迴歸模型的影響更嚴重，而且使用隨機區隔會導致極端過適。</span><span class="sxs-lookup"><span data-stu-id="989be-545">From our work, we found that regression models used for predicting remaining useful life are more severely affected by the leakage problem and using a random split leads to extreme overfitting.</span></span> <span data-ttu-id="989be-546">同樣地，在迴歸問題中，分割應該如下：屬於訓練截止前故障之資產的記錄應該使用於訓練集，而屬於截止後故障之資產的記錄則應該使用於測試集。</span><span class="sxs-lookup"><span data-stu-id="989be-546">Similarly, in regression problems, the split should be such that records belonging to assets with failures before training cut off should be used for the training set and assets that have failures after the cut-off should be used for testing set.</span></span>

<span data-ttu-id="989be-547">在一般方法中，另一個分割訓練與測試資料的重要最佳作法，就是採用依資產識別碼分割，如此一來，用於訓練的資產就不會用於測試，因為測試的概念是要確定使用新資產來進行預測時，模型可提供確實的結果。</span><span class="sxs-lookup"><span data-stu-id="989be-547">As a general method, another important best practice for splitting data for training and testing is to use a split by asset ID so that none of the assets that were used in training are used for testing since the idea of testing is to make sure that when a new asset is used to make predictions on, the model provides realistic results.</span></span>

### <a name="handling-imbalanced-data"></a><span data-ttu-id="989be-548">處理不平衡的資料</span><span class="sxs-lookup"><span data-stu-id="989be-548">Handling imbalanced data</span></span>
<span data-ttu-id="989be-549">在分類問題中，如果有更多的一個類別比其他的範例資料是要平衡。</span><span class="sxs-lookup"><span data-stu-id="989be-549">In classification problems, if there are more examples of one class than of the others, the data is said to be imbalanced.</span></span> <span data-ttu-id="989be-550">在理想情況下，我們希望訓練資料中每個類別都有足夠的代表性資料，才能夠區分不同的類別。</span><span class="sxs-lookup"><span data-stu-id="989be-550">Ideally, we would like to have enough representatives of each class in the training data to be able to differentiate between different classes.</span></span> <span data-ttu-id="989be-551">如果一個類別少於 10% 的資料，我們就可以說資料不平衡，我們稱之為不具代表性的資料集少數類別。</span><span class="sxs-lookup"><span data-stu-id="989be-551">If one class is less than 10% of the data, we can say that the data is imbalanced and we call the underrepresented dataset minority class.</span></span> <span data-ttu-id="989be-552">我們在許多案例中都發現不平衡的資料集，也就是說：相較於資料集中的其他類別，有一個類別嚴重不具代表性，例如僅佔資料點的 0.001%。</span><span class="sxs-lookup"><span data-stu-id="989be-552">Drastically, in many cases we find imbalanced datasets where one class is severely underrepresented compared to others for example by only constituting 0.001% of the data points.</span></span> <span data-ttu-id="989be-553">在許多領域 (包括詐騙偵測、網路入侵和預測性維護) 中，類別不平衡是個問題，也就是說在構成少數類別範例之資產的生命週期中通常很少會出現失敗。</span><span class="sxs-lookup"><span data-stu-id="989be-553">Class imbalance is a problem in many domains including fraud detection, network intrusion and predictive maintenance where failures are usually rare occurrences in the lifetime of the assets which make up the minority class examples.</span></span>

<span data-ttu-id="989be-554">在類別不平衡的情況下，大多數標準學習演算法的效能都會受到影響，因為其目標在於將整體錯誤率降到最低。</span><span class="sxs-lookup"><span data-stu-id="989be-554">In case of class imbalance, performance of most standard learning algorithms is compromised as they aim to minimize the overall error rate.</span></span> <span data-ttu-id="989be-555">例如，在具有 99% 否定類別範例和 1% 肯定類別範例的資料集中，我們只需將所有執行個體標記為否定，即可取得 99% 的精確度。</span><span class="sxs-lookup"><span data-stu-id="989be-555">For example, for a data set with 99% negative class examples and 1% positive class examples, we can get 99% accuracy by simply labeling all instances as negative.</span></span> <span data-ttu-id="989be-556">不過，這會讓所有的肯定範例歸類錯誤，所以即使精確度計量非常高，此演算法也不算是有用的演算法。</span><span class="sxs-lookup"><span data-stu-id="989be-556">However, this misclassifies all positive examples so the algorithm is not a useful one although the accuracy metric is very high.</span></span> <span data-ttu-id="989be-557">因此，傳統評估計量資訊 (例如錯誤率的整體精確度) 還不足以進行不平衡的學習。</span><span class="sxs-lookup"><span data-stu-id="989be-557">Consequently, conventional evaluation metrics such as overall accuracy on error rate, are not sufficient in case of imbalanced learning.</span></span> <span data-ttu-id="989be-558">在不平衡的資料集案例中，會使用其他計量 (例如精確度、召回、F1 分數和已調整成本的 ROC 曲線) 進行評估，我們將在〈評估計量〉一節中討論。</span><span class="sxs-lookup"><span data-stu-id="989be-558">Other metrics, such as precision, recall, F1 scores and cost adjusted ROC curves are used for evaluations in case of imbalanced datasets which is discussed in the Evaluation Metrics section.</span></span>

<span data-ttu-id="989be-559">不過，有一些方法可協助矯正類別不平衡問題。</span><span class="sxs-lookup"><span data-stu-id="989be-559">However, there are some methods that help remedy class imbalance problem.</span></span> <span data-ttu-id="989be-560">取樣技巧和成本導向學習是兩大主要方法。</span><span class="sxs-lookup"><span data-stu-id="989be-560">The two major ones are sampling techniques and cost sensitive learning.</span></span>

#### <a name="sampling-methods"></a><span data-ttu-id="989be-561">取樣方法</span><span class="sxs-lookup"><span data-stu-id="989be-561">Sampling methods</span></span>
<span data-ttu-id="989be-562">在不平衡的學習中使用取樣方法，包括經由一些機制修改資料集，以便提供平衡的資料集。</span><span class="sxs-lookup"><span data-stu-id="989be-562">The use of sampling methods in imbalanced learning consists of modification of the dataset by some mechanisms in order to provide a balanced dataset.</span></span> <span data-ttu-id="989be-563">雖然有許多不同的取樣技巧，但最直接的取樣方法是隨機超取樣和低取樣。</span><span class="sxs-lookup"><span data-stu-id="989be-563">Although there are a lot of different sampling techniques, most straight forward ones are random oversampling and under sampling.</span></span>

<span data-ttu-id="989be-564">簡單來說，隨機超取樣就是從少數類別中選取一個隨機樣本，複製這些範例，然後將它們加入至訓練資料集。</span><span class="sxs-lookup"><span data-stu-id="989be-564">Simply stated, random oversampling is selecting a random sample from minority class, replicating these examples and adding them to training data set.</span></span> <span data-ttu-id="989be-565">這會增加少數類別中的範例總數，最終讓不同類別的範例數達到平衡。</span><span class="sxs-lookup"><span data-stu-id="989be-565">This increases the number of total examples in minority class and eventually balance the number of examples of different classes.</span></span> <span data-ttu-id="989be-566">超取樣的其中一個危險性，就是某些範例的多個執行個體可能會導致分類器變得太特定，以致發生過適情況。</span><span class="sxs-lookup"><span data-stu-id="989be-566">One danger of oversampling is that multiple instances of certain examples can cause the classifier to become too specific leading to overfitting.</span></span>
<span data-ttu-id="989be-567">這會導致高訓練精確度，但看不見的測試資料的效能可能很差。</span><span class="sxs-lookup"><span data-stu-id="989be-567">This would result in high training accuracy but performance on the unseen testing data may be very poor.</span></span> <span data-ttu-id="989be-568">相反地，隨機低取樣就是從多數類別中選取一個隨機樣本，並從訓練資料集中移除這些範例。</span><span class="sxs-lookup"><span data-stu-id="989be-568">Conversely, random under sampling is selecting a random sample from majority class and removing those examples from training data set.</span></span> <span data-ttu-id="989be-569">不過，從多數類別中移除範例可能會導致分類器錯過屬於多數類別的重要概念。</span><span class="sxs-lookup"><span data-stu-id="989be-569">However, removing examples from majority class may cause the classifier to miss important concepts pertaining to the majority class.</span></span> <span data-ttu-id="989be-570">在混合式取樣中，少數類別會超取樣，而多數類別則會低取樣，同時也是另一個可行的方法。</span><span class="sxs-lookup"><span data-stu-id="989be-570">Hybrid sampling where minority class is oversampled and majority class is under sampled at the same time is another viable approach.</span></span> <span data-ttu-id="989be-571">其他還有許多更複雜的取樣技巧可使用，而適用於類別不平衡的有效取樣方法是很熱門的研究領域，經常受到各方的注意和貢獻。</span><span class="sxs-lookup"><span data-stu-id="989be-571">There are many other more sophisticated sampling techniques are available and effective sampling methods for class imbalance is a popular research area receiving constant attention and contributions from many channels.</span></span> <span data-ttu-id="989be-572">使用不同的技巧來決定最有效的方法，通常會留待資料科學家進行研究，而最有效的方法會與資料屬性高度相依。</span><span class="sxs-lookup"><span data-stu-id="989be-572">Use of different techniques to decide on the most effective ones is usually left to the data scientist to research and experiment and are highly dependent on the data properties.</span></span> <span data-ttu-id="989be-573">此外，請務必確定取樣方法只會套用到訓練集，但不會套用到測試集。</span><span class="sxs-lookup"><span data-stu-id="989be-573">Additionally, it is important to make sure that sampling methods are applied only to the training set but not the test set.</span></span>

#### <a name="cost-sensitive-learning"></a><span data-ttu-id="989be-574">成本導向學習</span><span class="sxs-lookup"><span data-stu-id="989be-574">Cost sensitive learning</span></span>
<span data-ttu-id="989be-575">在預測性維護中，構成少數類別的失敗比一般範例更有意思，因此重點通常在於演算法處理失敗的效能。</span><span class="sxs-lookup"><span data-stu-id="989be-575">In predictive maintenance, failures which constitute the minority class are of more interest than normal examples and thus the focus is on the performance of the algorithm on failures is usually the focus.</span></span> <span data-ttu-id="989be-576">這通常稱為將不同類別的元素歸類錯誤的不平等損失或不對稱成本，其中將肯定錯誤地預測為否定的成本比將否定錯誤地預測為肯定的成本還要高。</span><span class="sxs-lookup"><span data-stu-id="989be-576">This is commonly referred as unequal loss or asymmetric costs of misclassifying elements of different classes wherein incorrectly predicting a positive as negative can cost more than vice versa.</span></span> <span data-ttu-id="989be-577">想用的分類器應該能夠對少數類別提供很高的預測精確度，但不會嚴重影響到多數類別的精確度。</span><span class="sxs-lookup"><span data-stu-id="989be-577">The desired classifier should be able to give high prediction accuracy over the minority class, without severely compromising on the accuracy for the majority class.</span></span>

<span data-ttu-id="989be-578">有數種方法能夠達成此目的。</span><span class="sxs-lookup"><span data-stu-id="989be-578">There are several ways this can be achieved.</span></span> <span data-ttu-id="989be-579">將高成本指派給少數類別歸類錯誤，並嘗試將整體成本降到最低，即可有效處理不平等損失的問題。</span><span class="sxs-lookup"><span data-stu-id="989be-579">By assigning a high cost to misclassification of the minority class, and trying to minimize the overall cost, the problem of unequal loses can be effectively dealt with.</span></span> <span data-ttu-id="989be-580">有些機器學習演算法原本就會使用此概念，例如 SVM(支援向量機器)，其在訓練期間可以合併肯定和否定範例的成本。</span><span class="sxs-lookup"><span data-stu-id="989be-580">Some machine learning algorithms use this idea inherently such as SVMs (Support Vector Machines) where cost of positive and negative examples can be incorporated during training time.</span></span> <span data-ttu-id="989be-581">同樣地，使用提升 (Boosting) 方法通常會在資料不平衡的情況中顯示良好的效能，例如促進式決策樹演算法。</span><span class="sxs-lookup"><span data-stu-id="989be-581">Similarly, boosting methods are used and usually show good performance in case of imbalanced data such as boosted decision tree algorithms.</span></span>

## <a name="evaluation-metrics"></a><span data-ttu-id="989be-582">評估計量</span><span class="sxs-lookup"><span data-stu-id="989be-582">Evaluation metrics</span></span>
<span data-ttu-id="989be-583">如先前所述，類別不平衡會導致效能不佳，由於在少數類別案例中，演算法傾向於將多數類別範例做更妥善的歸類，因為當多數類別標記正確時，歸類錯誤總數會大幅改善。</span><span class="sxs-lookup"><span data-stu-id="989be-583">As mentioned earlier, class imbalance causes poor performance as algorithms tend to classify majority class examples better in expense of minority class cases as the total misclassification error is much improved when majority class is labeled correctly.</span></span> <span data-ttu-id="989be-584">這會導致召回率很低，而當企業的誤判成本非常高時，就會變成更大的問題。</span><span class="sxs-lookup"><span data-stu-id="989be-584">This causes low recall rates and becomes a larger problem when the cost of false alarms to the business is very high.</span></span> <span data-ttu-id="989be-585">精確度是最受歡迎的計量，可用來描述分類器的效能。</span><span class="sxs-lookup"><span data-stu-id="989be-585">Accuracy is the most popular metric used for describing a classifier’s performance.</span></span> <span data-ttu-id="989be-586">但是如上所述，精確度無效而且不會反映分類器功能的真實效能，因為它對於資料分佈非常敏感。</span><span class="sxs-lookup"><span data-stu-id="989be-586">However as explained above accuracy is ineffective and do not reflect the real performance of a classifier’s functionality as it is very sensitive to data distributions.</span></span> <span data-ttu-id="989be-587">所以改用其他評估計量來評估不平衡的學習問題。</span><span class="sxs-lookup"><span data-stu-id="989be-587">Instead, other evaluation metrics are used to assess imbalanced learning problems.</span></span> <span data-ttu-id="989be-588">在這些情況下，精確度、召回和 F1 分數應該是評估預測性維護模型效能時應該先查看的計量。</span><span class="sxs-lookup"><span data-stu-id="989be-588">In those cases, precision, recall and F1 scores should be the initial metrics to look at when evaluating predictive maintenance model performance.</span></span> <span data-ttu-id="989be-589">在預測性維護中，召回率代表模型在測試集中正確找出多少個失敗。</span><span class="sxs-lookup"><span data-stu-id="989be-589">In predictive maintenance, recall rates denote how many of the failures in the test set were correctly identified by the model.</span></span> <span data-ttu-id="989be-590">較高的召回率表示模型成功攔截真正的失敗。</span><span class="sxs-lookup"><span data-stu-id="989be-590">Higher recall rates mean the model is successful in catching the true failures.</span></span> <span data-ttu-id="989be-591">精確度計量與誤判率相關，較低的精確率對應於較高的誤判率。</span><span class="sxs-lookup"><span data-stu-id="989be-591">Precision metric relates to the rate of false alarms where lower precision rates correspond to higher false alarms.</span></span> <span data-ttu-id="989be-592">F1 分數認為精確度和召回率的最佳值是 1，最差值是 0。</span><span class="sxs-lookup"><span data-stu-id="989be-592">F1 score considers both precision and recall rates with best value being 1 and worst being 0.</span></span>

<span data-ttu-id="989be-593">此外，在二元分類中，評估效能時，十分位數資料表和增益圖都非常有幫助。</span><span class="sxs-lookup"><span data-stu-id="989be-593">Moreover, for binary classification, decile tables and lift charts are very informative when evaluating performance.</span></span> <span data-ttu-id="989be-594">它們只著重於肯定類別 (失敗)，而且比起只看 ROC (接收端操作特性) 曲線上的固定運算點，其提供的演算法效能圖片更為複雜。</span><span class="sxs-lookup"><span data-stu-id="989be-594">They focus only on the positive class (failures) and provide a more complex picture of the algorithm performance than what is seen by looking at just a fixed operating point on the ROC (Receiver Operating Characteristic) curve.</span></span>
<span data-ttu-id="989be-595">根據模型在決定最後一個標籤之前所預測的失敗機率來排序測試範例，便可取得十分位數資料表。</span><span class="sxs-lookup"><span data-stu-id="989be-595">Decile tables are obtained by ordering the test examples according to their predicted probabilities of failures computed by the model before thresholding to decide on the final label.</span></span> <span data-ttu-id="989be-596">經過排序的範例接著會以十分位數分組 (即 10% 範例的機率最大，然後是 20%、30% 等等)。</span><span class="sxs-lookup"><span data-stu-id="989be-596">The ordered samples are then grouped in deciles (i.e. the 10% samples with largest probability and then 20%, 30% and so on).</span></span> <span data-ttu-id="989be-597">計算每個十分位數的真陽性率與其隨機基線 (也就是 0.1、0.2...) 之間的比率，即可估計演算法效能在每個十分位數的變更方式。</span><span class="sxs-lookup"><span data-stu-id="989be-597">By computing the ratio between true positive rate of each decile and its random baseline (i.e. 0.1, 0.2 ..) one can estimate how the algorithm performance changes at each decile.</span></span> <span data-ttu-id="989be-598">增益圖可用來繪製十分位數值，做法是繪製所有十分位數的十分位數真陽性率與隨機真陽性率配對。</span><span class="sxs-lookup"><span data-stu-id="989be-598">Lift charts are used to plot decile values by plotting decile true positive rate versus random true positive rate pairs for all deciles.</span></span> <span data-ttu-id="989be-599">通常，第一個十分位數會是結果的焦點，因為我們可在此看到最大的增益值。</span><span class="sxs-lookup"><span data-stu-id="989be-599">Usually, the first deciles are the focus of the results since here we see the largest gains.</span></span> <span data-ttu-id="989be-600">此外，第一個十分位數使用於預測性維護時，也可被視為「有風險」的代表性資料。</span><span class="sxs-lookup"><span data-stu-id="989be-600">First deciles can also be seen as representative for "at risk" when used for predictive maintenance.</span></span>

## <a name="sample-solution-architecture"></a><span data-ttu-id="989be-601">範例解決方案架構</span><span class="sxs-lookup"><span data-stu-id="989be-601">Sample solution architecture</span></span>
<span data-ttu-id="989be-602">部署預測性維護解決方案時，我們對於可提供以下連續循環的端對端解決方案很感興趣：資料擷取、資料儲存 (用於訓練模型)、特徵產生、結果的預測何視覺化，以及警示產生機制 (例如資產監視儀表板)。</span><span class="sxs-lookup"><span data-stu-id="989be-602">When deploying a predictive maintenance solution, we are interested in an end to end solution that provides a continuous cycle of data ingestion, data storage for model training, feature generation, prediction and visualization of the results along with an alert generating mechanism such as an asset monitoring dashboard.</span></span> <span data-ttu-id="989be-603">我們想要一個資料管線，可以連續自動化方式對使用者提供未來深入解析資訊。</span><span class="sxs-lookup"><span data-stu-id="989be-603">We want a data pipeline that provides future insights to the user in a continuous automated manner.</span></span> <span data-ttu-id="989be-604">下面圖 8 說明這類 IoT 資料管線的範例預測性維護架構。</span><span class="sxs-lookup"><span data-stu-id="989be-604">An example predictive maintenance architecture for such an IoT data pipeline is illustrated in Figure 8 below.</span></span> <span data-ttu-id="989be-605">在此架構中，即時遙測資料會收集到可儲存串流資料的事件中樞。</span><span class="sxs-lookup"><span data-stu-id="989be-605">In the architecture, real-time telemetry is collected into an Event Hub which stores streaming data.</span></span> <span data-ttu-id="989be-606">此資料會經由串流分析擷取，以便進行即時資料處理，例如產生特徵。</span><span class="sxs-lookup"><span data-stu-id="989be-606">This data is ingested by stream analytics for real-time processing of data such as feature generation.</span></span> <span data-ttu-id="989be-607">然後特徵可用來呼叫預測性模型 Web 服務，而結果會顯示在儀表板上。</span><span class="sxs-lookup"><span data-stu-id="989be-607">The features are then used to call the predictive model web service and results are displayed on the dashboard.</span></span> <span data-ttu-id="989be-608">在此同時，擷取的資料也會儲存在歷程記錄資料庫中，並與外部資料來源 (例如內部部署資料庫) 合併，以建立模型化的訓練範例。</span><span class="sxs-lookup"><span data-stu-id="989be-608">At the same time, ingested data is also stored in an historical database and merged with external data sources such as on-premises data bases to create training examples for modeling.</span></span>
<span data-ttu-id="989be-609">相同的資料倉儲可用於範例的批次計分及儲存結果，而後再次用於在儀表板上提供預測性報告。</span><span class="sxs-lookup"><span data-stu-id="989be-609">Same data warehouses can be used for batch scoring of the examples and storing of the results which can again be used to provide predictive reports on the dashboard.</span></span>

![圖 8.](media/cortana-analytics-playbook-predictive-maintenance/example-solution-architecture-for-predictive-maintenance.png)

<span data-ttu-id="989be-612">圖 8.</span><span class="sxs-lookup"><span data-stu-id="989be-612">Figure 8.</span></span> <span data-ttu-id="989be-613">預測性維護的範例解決方案架構</span><span class="sxs-lookup"><span data-stu-id="989be-613">Example solution architecture for predictive maintenance</span></span>

<span data-ttu-id="989be-614">如需此架構的每個元件的詳細資訊，請參閱 [Azure](https://azure.microsoft.com/) 文件。</span><span class="sxs-lookup"><span data-stu-id="989be-614">For more information about each of the components of the architecture please refer to [Azure](https://azure.microsoft.com/) documentation.</span></span>

