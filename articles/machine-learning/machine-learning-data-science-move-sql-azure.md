---
title: "移動資料至 Azure 機器學習的 Azure SQL Database | Microsoft Docs"
description: "建立 SQL 資料表以及將資料載入 SQL 資料表"
services: machine-learning
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: 50f8b862-4d32-44b2-a1e2-4fbc8024acaa
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/29/2017
ms.author: bradsev
ms.openlocfilehash: dfd1649b666c3793339f8624bdf77aa92cca4e88
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/29/2017
---
# <a name="move-data-to-an-azure-sql-database-for-azure-machine-learning"></a><span data-ttu-id="08535-103">移動資料至 Azure 機器學習的 Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="08535-103">Move data to an Azure SQL Database for Azure Machine Learning</span></span>
<span data-ttu-id="08535-104">本主題概述從一般檔案 (CSV 或 TSV 格式) 或儲存在內部部署 SQL Server 中的資料，將資料移動至 Azure SQL 資料庫的選項。</span><span class="sxs-lookup"><span data-stu-id="08535-104">This topic outlines the options for moving data either from flat files (CSV or TSV formats) or from data stored in an on-premises SQL Server to an Azure SQL database.</span></span> <span data-ttu-id="08535-105">將資料移到雲端的這些工作是 Team Data Science Process 的一部分。</span><span class="sxs-lookup"><span data-stu-id="08535-105">These tasks for moving data to the cloud are part of the Team Data Science Process.</span></span>

<span data-ttu-id="08535-106">如需概述用來將資料移至機器學習服務的內部部署 SQL Server 之選項的主題，請參閱[移動資料至 Azure 虛擬機器上的 SQL Server](machine-learning-data-science-move-sql-server-virtual-machine.md)。</span><span class="sxs-lookup"><span data-stu-id="08535-106">For a topic that outlines the options for moving data to an on-premises SQL Server for Machine Learning, see [Move data to SQL Server on an Azure virtual machine](machine-learning-data-science-move-sql-server-virtual-machine.md).</span></span>

<span data-ttu-id="08535-107">下列 **功能表** 所連結的主題會說明如何將資料內嵌至目標環境，以在 Team Data Science Process (TDSP) 期間儲存和處理該資料。</span><span class="sxs-lookup"><span data-stu-id="08535-107">The following **menu** links to topics that describe how to ingest data into target environments where the data can be stored and processed during the Team Data Science Process (TDSP).</span></span>

[!INCLUDE [cap-ingest-data-selector](../../includes/cap-ingest-data-selector.md)]

<span data-ttu-id="08535-108">下表摘要說明移動資料至 Azure SQL Database 的選項。</span><span class="sxs-lookup"><span data-stu-id="08535-108">The following table summarizes the options for moving data to an Azure SQL Database.</span></span>

| <span data-ttu-id="08535-109"><b>來源</b></span><span class="sxs-lookup"><span data-stu-id="08535-109"><b>SOURCE</b></span></span> | <span data-ttu-id="08535-110"><b>目的地：Azure SQL Database</b></span><span class="sxs-lookup"><span data-stu-id="08535-110"><b>DESTINATION: Azure SQL Database</b></span></span> |
| --- | --- |
| <span data-ttu-id="08535-111"><b>一般檔案 (CSV 或 TSV 格式)</b></span><span class="sxs-lookup"><span data-stu-id="08535-111"><b>Flat file (CSV or TSV formatted)</b></span></span> |<span data-ttu-id="08535-112"><a href="#bulk-insert-sql-query">大量插入 SQL 查詢</span><span class="sxs-lookup"><span data-stu-id="08535-112"><a href="#bulk-insert-sql-query">Bulk Insert SQL Query</span></span> |
| <span data-ttu-id="08535-113"><b>內部部署 SQL Server</b></span><span class="sxs-lookup"><span data-stu-id="08535-113"><b>On-premises SQL Server</b></span></span> |<span data-ttu-id="08535-114">1.<a href="#export-flat-file">匯出至一般檔案</span><span class="sxs-lookup"><span data-stu-id="08535-114">1. <a href="#export-flat-file">Export to Flat File</span></span><br> <span data-ttu-id="08535-115">2.<a href="#insert-tables-bcp">SQL Database 移轉精靈</span><span class="sxs-lookup"><span data-stu-id="08535-115">2. <a href="#insert-tables-bcp">SQL Database Migration Wizard</span></span><br> <span data-ttu-id="08535-116">3.<a href="#db-migration">資料庫備份和還原</span><span class="sxs-lookup"><span data-stu-id="08535-116">3. <a href="#db-migration">Database back up and restore</span></span><br> <span data-ttu-id="08535-117">4.<a href="#adf">Azure Data Factory</span><span class="sxs-lookup"><span data-stu-id="08535-117">4. <a href="#adf">Azure Data Factory</span></span> |

## <span data-ttu-id="08535-118"><a name="prereqs"></a>必要條件</span><span class="sxs-lookup"><span data-stu-id="08535-118"><a name="prereqs"></a>Prerequisites</span></span>
<span data-ttu-id="08535-119">此處概述的程序要求您須擁有：</span><span class="sxs-lookup"><span data-stu-id="08535-119">The procedures outlined here require that you have:</span></span>

* <span data-ttu-id="08535-120">**Azure 訂用帳戶**。</span><span class="sxs-lookup"><span data-stu-id="08535-120">An **Azure subscription**.</span></span> <span data-ttu-id="08535-121">如果您沒有訂用帳戶，可以註冊 [免費試用](https://azure.microsoft.com/pricing/free-trial/)。</span><span class="sxs-lookup"><span data-stu-id="08535-121">If you do not have a subscription, you can sign up for a [free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>
* <span data-ttu-id="08535-122">**Azure 儲存體帳戶**。</span><span class="sxs-lookup"><span data-stu-id="08535-122">An **Azure storage account**.</span></span> <span data-ttu-id="08535-123">在本教學課程中，您會使用 Azure 儲存體帳戶來儲存資料。</span><span class="sxs-lookup"><span data-stu-id="08535-123">You use an Azure storage account for storing the data in this tutorial.</span></span> <span data-ttu-id="08535-124">如果您沒有 Azure 儲存體帳戶，請參閱 [建立儲存體帳戶](../storage/common/storage-create-storage-account.md#create-a-storage-account) 一文。</span><span class="sxs-lookup"><span data-stu-id="08535-124">If you don't have an Azure storage account, see the [Create a storage account](../storage/common/storage-create-storage-account.md#create-a-storage-account) article.</span></span> <span data-ttu-id="08535-125">建立儲存體帳戶之後，您必須取得用來存取儲存體的帳戶金鑰。</span><span class="sxs-lookup"><span data-stu-id="08535-125">After you have created the storage account, you need to obtain the account key used to access the storage.</span></span> <span data-ttu-id="08535-126">請參閱[管理儲存體存取金鑰](../storage/common/storage-create-storage-account.md#manage-your-storage-access-keys)。</span><span class="sxs-lookup"><span data-stu-id="08535-126">See [Manage your storage access keys](../storage/common/storage-create-storage-account.md#manage-your-storage-access-keys).</span></span>
* <span data-ttu-id="08535-127">存取 **Azure SQL Database**。</span><span class="sxs-lookup"><span data-stu-id="08535-127">Access to an **Azure SQL Database**.</span></span> <span data-ttu-id="08535-128">如果您必須設定 Azure SQL Database， [開始使用 Microsoft Azure SQL Database](../sql-database/sql-database-get-started.md) 一文中提供如何佈建 Azure SQL Database 之新執行個體的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="08535-128">If you must set up an Azure SQL Database, [Getting Started with Microsoft Azure SQL Database](../sql-database/sql-database-get-started.md) provides information on how to provision a new instance of an Azure SQL Database.</span></span>
* <span data-ttu-id="08535-129">已在本機上安裝和設定 **Azure PowerShell** 。</span><span class="sxs-lookup"><span data-stu-id="08535-129">Installed and configured **Azure PowerShell** locally.</span></span> <span data-ttu-id="08535-130">如需指示，請參閱 [如何安裝和設定 Azure PowerShell](/powershell/azure/overview)。</span><span class="sxs-lookup"><span data-stu-id="08535-130">For instructions, see [How to install and configure Azure PowerShell](/powershell/azure/overview).</span></span>

<span data-ttu-id="08535-131">**資料**：移轉程序會使用 [NYC 計程車資料集](http://chriswhong.com/open-data/foil_nyc_taxi/)進行示範。</span><span class="sxs-lookup"><span data-stu-id="08535-131">**Data**: The migration processes are demonstrated using the [NYC Taxi dataset](http://chriswhong.com/open-data/foil_nyc_taxi/).</span></span> <span data-ttu-id="08535-132">在 Azure Blob 儲存體上，NYC 計程車資料集包含且提供有關車程資料與費用的相關資訊：[NYC 計程車資料](http://www.andresmh.com/nyctaxitrips/)。</span><span class="sxs-lookup"><span data-stu-id="08535-132">The NYC Taxi dataset contains information on trip data and fairs and is available on Azure blob storage: [NYC Taxi Data](http://www.andresmh.com/nyctaxitrips/).</span></span> <span data-ttu-id="08535-133">這些檔案的範例和說明都會在 [NYC 計程車車程資料集說明](machine-learning-data-science-process-sql-walkthrough.md#dataset)中提供。</span><span class="sxs-lookup"><span data-stu-id="08535-133">A sample and description of these files are provided in [NYC Taxi Trips Dataset Description](machine-learning-data-science-process-sql-walkthrough.md#dataset).</span></span>

<span data-ttu-id="08535-134">您可以將上述程序調整為自己的資料集，或者遵循上述步驟使用 NYC 計程車資料集。</span><span class="sxs-lookup"><span data-stu-id="08535-134">You can either adapt the procedures described here to a set of your own data or follow the steps as described by using the NYC Taxi dataset.</span></span> <span data-ttu-id="08535-135">若要將 NYC 計程車資料集上傳至您的內部部署 SQL Server 資料庫，請遵循[大量匯入資料至 SQL Server 資料庫](machine-learning-data-science-process-sql-walkthrough.md#dbload)中概述的程序進行。</span><span class="sxs-lookup"><span data-stu-id="08535-135">To upload the NYC Taxi dataset into your on-premises SQL Server database, follow the procedure outlined in [Bulk Import Data into SQL Server Database](machine-learning-data-science-process-sql-walkthrough.md#dbload).</span></span> <span data-ttu-id="08535-136">這些指示適用於 Azure 虛擬機器上的 SQL Server，但將資料上傳至內部部署 SQL Server 的程序是相同的。</span><span class="sxs-lookup"><span data-stu-id="08535-136">These instructions are for a SQL Server on an Azure Virtual Machine, but the procedure for uploading to the on-premises SQL Server is the same.</span></span>

## <span data-ttu-id="08535-137"><a name="file-to-azure-sql-database"></a> 從一般檔案來源移動資料至 Azure SQL 資料庫</span><span class="sxs-lookup"><span data-stu-id="08535-137"><a name="file-to-azure-sql-database"></a> Moving data from a flat file source to an Azure SQL database</span></span>
<span data-ttu-id="08535-138">一般檔案 (CSV 或 TSV 格式) 中的資料可以透過大量插入 SQL 查詢移動至 Azure SQL Database。</span><span class="sxs-lookup"><span data-stu-id="08535-138">Data in flat files (CSV or TSV formatted) can be moved to an Azure SQL database using a Bulk Insert SQL Query.</span></span>

### <span data-ttu-id="08535-139"><a name="bulk-insert-sql-query"></a> 大量插入 SQL 查詢</span><span class="sxs-lookup"><span data-stu-id="08535-139"><a name="bulk-insert-sql-query"></a> Bulk Insert SQL Query</span></span>
<span data-ttu-id="08535-140">程序中使用大量插入 SQL 查詢的步驟，與從一般檔案來源移動資料至 Azure VM 上的 SQL Server 各節涵蓋之步驟類似。</span><span class="sxs-lookup"><span data-stu-id="08535-140">The steps for the procedure using the Bulk Insert SQL Query are similar to those covered in the sections for moving data from a flat file source to SQL Server on an Azure VM.</span></span> <span data-ttu-id="08535-141">如需詳細資料，請參閱 [大量插入 SQL 查詢](machine-learning-data-science-move-sql-server-virtual-machine.md#insert-tables-bulkquery)。</span><span class="sxs-lookup"><span data-stu-id="08535-141">For details, see [Bulk Insert SQL Query](machine-learning-data-science-move-sql-server-virtual-machine.md#insert-tables-bulkquery).</span></span>

## <span data-ttu-id="08535-142"><a name="sql-on-prem-to-sazure-sql-database"></a> 從內部部署 SQL Server 將資料移至 Azure SQL 資料庫</span><span class="sxs-lookup"><span data-stu-id="08535-142"><a name="sql-on-prem-to-sazure-sql-database"></a> Moving Data from on-premises SQL Server to an Azure SQL database</span></span>
<span data-ttu-id="08535-143">如果來源資料儲存在內部部署的 SQL Server，則移動資料至 Azure SQL 資料庫就擁有各種可能性：</span><span class="sxs-lookup"><span data-stu-id="08535-143">If the source data is stored in an on-premises SQL Server, there are various possibilities for moving the data to an Azure SQL database:</span></span>

1. [<span data-ttu-id="08535-144">匯出至一般檔案</span><span class="sxs-lookup"><span data-stu-id="08535-144">Export to Flat File</span></span>](#export-flat-file)
2. [<span data-ttu-id="08535-145">SQL Database 移轉精靈</span><span class="sxs-lookup"><span data-stu-id="08535-145">SQL Database Migration Wizard</span></span>](#insert-tables-bcp)
3. [<span data-ttu-id="08535-146">資料庫備份和還原</span><span class="sxs-lookup"><span data-stu-id="08535-146">Database back up and restore</span></span>](#db-migration)
4. [<span data-ttu-id="08535-147">Azure Data Factory</span><span class="sxs-lookup"><span data-stu-id="08535-147">Azure Data Factory</span></span>](#adf)

<span data-ttu-id="08535-148">前三個步驟與涵蓋這些相同程序的 [移動資料至 Azure 虛擬機器上的 SQL Server](machine-learning-data-science-move-sql-server-virtual-machine.md) 中各節所說明的程序非常類似。</span><span class="sxs-lookup"><span data-stu-id="08535-148">The steps for the first three are very similar to those sections in [Move data to SQL Server on an Azure virtual machine](machine-learning-data-science-move-sql-server-virtual-machine.md) that cover these same procedures.</span></span> <span data-ttu-id="08535-149">下列指示會提供該主題的適當章節連結。</span><span class="sxs-lookup"><span data-stu-id="08535-149">Links to the appropriate sections in that topic are provided in the following instructions.</span></span>

### <span data-ttu-id="08535-150"><a name="export-flat-file"></a>匯出至一般檔案</span><span class="sxs-lookup"><span data-stu-id="08535-150"><a name="export-flat-file"></a>Export to Flat File</span></span>
<span data-ttu-id="08535-151">此匯出為一般檔案的步驟與 [匯出為一般檔案](machine-learning-data-science-move-sql-server-virtual-machine.md#export-flat-file)中所說明的步驟類似。</span><span class="sxs-lookup"><span data-stu-id="08535-151">The steps for this exporting to a flat file are similar to those covered in [Export to Flat File](machine-learning-data-science-move-sql-server-virtual-machine.md#export-flat-file).</span></span>

### <span data-ttu-id="08535-152"><a name="insert-tables-bcp"></a>SQL Database 移轉精靈</span><span class="sxs-lookup"><span data-stu-id="08535-152"><a name="insert-tables-bcp"></a>SQL Database Migration Wizard</span></span>
<span data-ttu-id="08535-153">使用 [SQL Database 移轉精靈] 的步驟與 [ [SQL Database 移轉精靈](machine-learning-data-science-move-sql-server-virtual-machine.md#sql-migration)] 所說明的步驟類似。</span><span class="sxs-lookup"><span data-stu-id="08535-153">The steps for using the SQL Database Migration Wizard are similar to those covered in [SQL Database Migration Wizard](machine-learning-data-science-move-sql-server-virtual-machine.md#sql-migration).</span></span>

### <span data-ttu-id="08535-154"><a name="db-migration"></a>資料庫備份和還原</span><span class="sxs-lookup"><span data-stu-id="08535-154"><a name="db-migration"></a>Database back up and restore</span></span>
<span data-ttu-id="08535-155">使用資料庫備份和還原的步驟與 [資料庫備份和還原](machine-learning-data-science-move-sql-server-virtual-machine.md#sql-backup)所說明的步驟類似。</span><span class="sxs-lookup"><span data-stu-id="08535-155">The steps for using database back up and restore are similar to those covered in [Database back up and restore](machine-learning-data-science-move-sql-server-virtual-machine.md#sql-backup).</span></span>

### <span data-ttu-id="08535-156"><a name="adf"></a>Azure Data Factory</span><span class="sxs-lookup"><span data-stu-id="08535-156"><a name="adf"></a>Azure Data Factory</span></span>
<span data-ttu-id="08535-157">[使用 Azure Data Factory 將資料從內部部署 SQL Server 移至 SQL Azure](machine-learning-data-science-move-sql-azure-adf.md) 主題會提供使用 Azure Data Factory (ADF) 將資料移至 Azure SQL 資料庫的程序。</span><span class="sxs-lookup"><span data-stu-id="08535-157">The procedure for moving data to an Azure SQL database with Azure Data Factory (ADF) is provided in the topic [Move data from an on-premises SQL server to SQL Azure with Azure Data Factory](machine-learning-data-science-move-sql-azure-adf.md).</span></span> <span data-ttu-id="08535-158">本主題說明如何使用 ADF，透過 Azure Blob 儲存體將資料從內部部署的 SQL Server 資料庫移動至 Azure SQL 資料庫。</span><span class="sxs-lookup"><span data-stu-id="08535-158">This topic shows how to move data from an on-premises SQL Server database to an Azure SQL database via Azure Blob Storage using ADF.</span></span>

<span data-ttu-id="08535-159">若同時存取內部部署和雲端資源的混合式案例需要持續移轉資料，或是資料有交易、需要修改，或者在移轉時新增了商務邏輯，請考慮使用 ADF。</span><span class="sxs-lookup"><span data-stu-id="08535-159">Consider using ADF when data needs to be continually migrated in a hybrid scenario that accesses both on-premises and cloud resources, and when the data is transacted or needs to be modified or have business logic added to it when being migrated.</span></span> <span data-ttu-id="08535-160">ADF 允許使用定期管理資料移動的簡易 JSON 指令碼，來進行排程和監視的工作。</span><span class="sxs-lookup"><span data-stu-id="08535-160">ADF allows for the scheduling and monitoring of jobs using simple JSON scripts that manage the movement of data on a periodic basis.</span></span> <span data-ttu-id="08535-161">ADF 也有其他功能，例如支援複雜作業。</span><span class="sxs-lookup"><span data-stu-id="08535-161">ADF also has other capabilities such as support for complex operations.</span></span>
