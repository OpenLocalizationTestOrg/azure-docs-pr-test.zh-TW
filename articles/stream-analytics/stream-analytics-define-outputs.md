---
title: "串流分析輸出︰儲存體、分析的選項 | Microsoft Docs"
description: "深入了解串流分析資料輸出的選項 (包括使用於分析結果的 Power BI)。"
keywords: "資料轉換, 分析結果, 資料儲存體選項"
services: stream-analytics,documentdb,sql-database,event-hubs,service-bus,storage
documentationcenter: 
author: samacha
manager: jhubbard
editor: cgronlun
ms.assetid: ba6697ac-e90f-4be3-bafd-5cfcf4bd8f1f
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 03/28/2017
ms.author: samacha
ms.openlocfilehash: 0e9afcc015c5bdfa19db717033dd17faddb93d32
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/29/2017
---
# <a name="stream-analytics-outputs-options-for-storage-analysis"></a><span data-ttu-id="33d0a-104">串流分析輸出︰儲存體、分析的選項</span><span class="sxs-lookup"><span data-stu-id="33d0a-104">Stream Analytics outputs: Options for storage, analysis</span></span>
<span data-ttu-id="33d0a-105">當您在編寫串流分析工作時，請考慮產生資料的取用方式。</span><span class="sxs-lookup"><span data-stu-id="33d0a-105">When authoring a Stream Analytics job, consider how the resulting data will be consumed.</span></span> <span data-ttu-id="33d0a-106">您要如何檢視串流分析工作的結果，並將儲存於何處？</span><span class="sxs-lookup"><span data-stu-id="33d0a-106">How will you view the results of the Stream Analytics job and where will you store it?</span></span>

<span data-ttu-id="33d0a-107">為了要啟用各種應用程式模式，Azure 串流分析針對儲存輸出及檢視分析結果提供了數種不同的選項。</span><span class="sxs-lookup"><span data-stu-id="33d0a-107">In order to enable a variety of application patterns, Azure Stream Analytics has different options for storing output and viewing analysis results.</span></span> <span data-ttu-id="33d0a-108">這讓您能輕鬆地檢視工作輸出，還讓您對於資料倉儲和其他用途之工作輸出的取用及儲存方式更有彈性。</span><span class="sxs-lookup"><span data-stu-id="33d0a-108">This makes it easy to view job output and gives you flexibility in the consumption and storage of the job output for data warehousing and other purposes.</span></span> <span data-ttu-id="33d0a-109">任何在工作中設定的輸出，都必須在工作開始之前，以及在事件開始運作之前就已經存在。</span><span class="sxs-lookup"><span data-stu-id="33d0a-109">Any output configured in the job must exist before the job is started and events start flowing.</span></span> <span data-ttu-id="33d0a-110">例如，如果您把 Blob 儲存體當做輸出來使用，工作就不會自動建立儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="33d0a-110">For example, if you use Blob storage as an output, the job will not create a storage account automatically.</span></span> <span data-ttu-id="33d0a-111">使用者必須在 Azure 串流分析工作開始之前建立儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="33d0a-111">It needs to be created by the user before the ASA job is started.</span></span>

## <a name="azure-data-lake-store"></a><span data-ttu-id="33d0a-112">Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="33d0a-112">Azure Data Lake Store</span></span>
<span data-ttu-id="33d0a-113">串流分析支援 [Azure Data Lake Store](https://azure.microsoft.com/services/data-lake-store/)。</span><span class="sxs-lookup"><span data-stu-id="33d0a-113">Stream Analytics supports [Azure Data Lake Store](https://azure.microsoft.com/services/data-lake-store/).</span></span> <span data-ttu-id="33d0a-114">此儲存體可讓您存放任何大小、類型和擷取速度的資料，以便進行運作和探究分析。</span><span class="sxs-lookup"><span data-stu-id="33d0a-114">This storage enables you to store data of any size, type and ingestion speed for operational and exploratory analytics.</span></span> <span data-ttu-id="33d0a-115">此外，串流分析需要經過授權，才能存取 Data Lake Store。</span><span class="sxs-lookup"><span data-stu-id="33d0a-115">Further, Stream Analytics needs to be authorized to access the Data Lake Store.</span></span> <span data-ttu-id="33d0a-116">如需有關授權，以及如何註冊 Data Lake Store (如有需要) 的詳細資料，請參閱 [Data Lake 輸出](stream-analytics-data-lake-output.md)文章。</span><span class="sxs-lookup"><span data-stu-id="33d0a-116">Details on authorization and how to sign up for the Data Lake Store (if needed) are discussed in the [Data Lake output article](stream-analytics-data-lake-output.md).</span></span>

### <a name="authorize-an-azure-data-lake-store"></a><span data-ttu-id="33d0a-117">授權 Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="33d0a-117">Authorize an Azure Data Lake Store</span></span>
<span data-ttu-id="33d0a-118">在 Azure 入口網站中選取 Data Lake Storage 作為輸出時，系統會提示您授權與現有 Data Lake Store 的連線。</span><span class="sxs-lookup"><span data-stu-id="33d0a-118">When Data Lake Storage is selected as an output in the Azure portal, you will be prompted to authorize a connection to an existing Data Lake Store.</span></span>  

![授權 Data Lake Store](./media/stream-analytics-define-outputs/06-stream-analytics-define-outputs.png)  

<span data-ttu-id="33d0a-120">接著請填寫 Data Lake Store 輸出的屬性，如下所示︰</span><span class="sxs-lookup"><span data-stu-id="33d0a-120">Then fill out the properties for the Data Lake Store output as seen below:</span></span>

![授權 Data Lake Store](./media/stream-analytics-define-outputs/07-stream-analytics-define-outputs.png)  

<span data-ttu-id="33d0a-122">下表列出建立 Data Lake Store 輸出所需的屬性名稱及其描述。</span><span class="sxs-lookup"><span data-stu-id="33d0a-122">The table below lists the property names and their description needed for creating a Data Lake Store output.</span></span>

<table>
<tbody>
<tr>
<td><span data-ttu-id="33d0a-123"><B>屬性名稱</B></span><span class="sxs-lookup"><span data-stu-id="33d0a-123"><B>PROPERTY NAME</B></span></span></td>
<td><span data-ttu-id="33d0a-124"><B>說明</B></span><span class="sxs-lookup"><span data-stu-id="33d0a-124"><B>DESCRIPTION</B></span></span></td>
</tr>
<tr>
<td><span data-ttu-id="33d0a-125">輸出別名</span><span class="sxs-lookup"><span data-stu-id="33d0a-125">Output Alias</span></span></td>
<td><span data-ttu-id="33d0a-126">此為易記名稱，用於在查詢中將查詢輸出指向這個 Data Lake Store。</span><span class="sxs-lookup"><span data-stu-id="33d0a-126">This is a friendly name used in queries to direct the query output to this Data Lake Store.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="33d0a-127">帳戶名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-127">Account Name</span></span></td>
<td><span data-ttu-id="33d0a-128">您傳送輸出的 Data Lake Storage 帳戶名稱。</span><span class="sxs-lookup"><span data-stu-id="33d0a-128">The name of the Data Lake Storage account where you are sending your output.</span></span> <span data-ttu-id="33d0a-129">您將看到 Data Lake Store 帳戶的下拉式清單，登入入口網站的使用者可存取該下拉式清單。</span><span class="sxs-lookup"><span data-stu-id="33d0a-129">You will be presented with a drop down list of Data Lake Store accounts to which the user logged in to the portal has access to.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="33d0a-130">路徑前置詞模式 [<I>選用</I>]</span><span class="sxs-lookup"><span data-stu-id="33d0a-130">Path Prefix Pattern [<I>optional</I>]</span></span></td>
<td><span data-ttu-id="33d0a-131">用來在指定的 Data Lake Store 帳戶中寫入檔案的檔案路徑。</span><span class="sxs-lookup"><span data-stu-id="33d0a-131">The file path used to write your files within the specified Data Lake Store Account.</span></span> <BR><span data-ttu-id="33d0a-132">{date}、{time}</span><span class="sxs-lookup"><span data-stu-id="33d0a-132">{date}, {time}</span></span><BR><span data-ttu-id="33d0a-133">範例 1：folder1/logs/{date}/{time}</span><span class="sxs-lookup"><span data-stu-id="33d0a-133">Example 1: folder1/logs/{date}/{time}</span></span><BR><span data-ttu-id="33d0a-134">範例 2：folder1/logs/{date}</span><span class="sxs-lookup"><span data-stu-id="33d0a-134">Example 2: folder1/logs/{date}</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="33d0a-135">日期格式 [<I>選用</I>]</span><span class="sxs-lookup"><span data-stu-id="33d0a-135">Date Format [<I>optional</I>]</span></span></td>
<td><span data-ttu-id="33d0a-136">如果前置詞路徑中使用日期權杖，您可以選取組織檔案要用的日期格式。</span><span class="sxs-lookup"><span data-stu-id="33d0a-136">If the date token is used in the prefix path, you can select the date format in which your files are organized.</span></span> <span data-ttu-id="33d0a-137">範例：YYYY/MM/DD</span><span class="sxs-lookup"><span data-stu-id="33d0a-137">Example: YYYY/MM/DD</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="33d0a-138">時間格式 [<I>選用</I>]</span><span class="sxs-lookup"><span data-stu-id="33d0a-138">Time Format [<I>optional</I>]</span></span></td>
<td><span data-ttu-id="33d0a-139">如果前置詞路徑中使用時間權杖，請指定組織檔案要用的時間格式。</span><span class="sxs-lookup"><span data-stu-id="33d0a-139">If the time token is used in the prefix path, specify the time format in which your files are organized.</span></span> <span data-ttu-id="33d0a-140">目前唯一支援的值為 HH。</span><span class="sxs-lookup"><span data-stu-id="33d0a-140">Currently the only supported value is HH.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="33d0a-141">事件序列化格式</span><span class="sxs-lookup"><span data-stu-id="33d0a-141">Event Serialization Format</span></span></td>
<td><span data-ttu-id="33d0a-142">輸出資料的序列化格式。</span><span class="sxs-lookup"><span data-stu-id="33d0a-142">Serialization format for output data.</span></span> <span data-ttu-id="33d0a-143">支援 JSON、CSV 和 Avro。</span><span class="sxs-lookup"><span data-stu-id="33d0a-143">JSON, CSV, and Avro are supported.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="33d0a-144">編碼</span><span class="sxs-lookup"><span data-stu-id="33d0a-144">Encoding</span></span></td>
<td><span data-ttu-id="33d0a-145">若為 CSV 或 JSON 格式，必須指定編碼。</span><span class="sxs-lookup"><span data-stu-id="33d0a-145">If CSV or JSON format, an encoding must be specified.</span></span> <span data-ttu-id="33d0a-146">UTF-8 是目前唯一支援的編碼格式。</span><span class="sxs-lookup"><span data-stu-id="33d0a-146">UTF-8 is the only supported encoding format at this time.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="33d0a-147">分隔符號</span><span class="sxs-lookup"><span data-stu-id="33d0a-147">Delimiter</span></span></td>
<td><span data-ttu-id="33d0a-148">僅適用於 CSV 序列化。</span><span class="sxs-lookup"><span data-stu-id="33d0a-148">Only applicable for CSV serialization.</span></span> <span data-ttu-id="33d0a-149">串流分析可支援多種序列化 CSV 資料常用的分隔符號。</span><span class="sxs-lookup"><span data-stu-id="33d0a-149">Stream Analytics supports a number of common delimiters for serializing CSV data.</span></span> <span data-ttu-id="33d0a-150">支援的值是逗號、分號、空格、索引標籤和分隔號。</span><span class="sxs-lookup"><span data-stu-id="33d0a-150">Supported values are comma, semicolon, space, tab and vertical bar.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="33d0a-151">格式</span><span class="sxs-lookup"><span data-stu-id="33d0a-151">Format</span></span></td>
<td><span data-ttu-id="33d0a-152">僅適用於 JSON 序列化。</span><span class="sxs-lookup"><span data-stu-id="33d0a-152">Only applicable for JSON serialization.</span></span> <span data-ttu-id="33d0a-153">分隔的行會指定輸出的格式化方式為利用新行分隔每個 JSON 物件。</span><span class="sxs-lookup"><span data-stu-id="33d0a-153">Line separated specifies that the output will be formatted by having each JSON object separated by a new line.</span></span> <span data-ttu-id="33d0a-154">陣列會指定輸出將會格式化為 JSON 物件的陣列。</span><span class="sxs-lookup"><span data-stu-id="33d0a-154">Array specifies that the output will be formatted as an array of JSON objects.</span></span></td>
</tr>
</tbody>
</table>

### <a name="renew-data-lake-store-authorization"></a><span data-ttu-id="33d0a-155">更新 Data Lake Store 授權</span><span class="sxs-lookup"><span data-stu-id="33d0a-155">Renew Data Lake Store Authorization</span></span>
<span data-ttu-id="33d0a-156">如果您在建立工作之後或上次驗證過後變更了密碼，則需要重新驗證您的 Data Lake Store 帳戶。</span><span class="sxs-lookup"><span data-stu-id="33d0a-156">You will need to re-authenticate your Data Lake Store account if its password has changed since your job was created or last authenticated.</span></span>

![授權 Data Lake Store](./media/stream-analytics-define-outputs/08-stream-analytics-define-outputs.png)  

## <a name="sql-database"></a><span data-ttu-id="33d0a-158">SQL Database</span><span class="sxs-lookup"><span data-stu-id="33d0a-158">SQL Database</span></span>
<span data-ttu-id="33d0a-159">[Azure SQL Database](https://azure.microsoft.com/services/sql-database/) 做為資料輸出。</span><span class="sxs-lookup"><span data-stu-id="33d0a-159">[Azure SQL Database](https://azure.microsoft.com/services/sql-database/) can be used as an output for data that is relational in nature or for applications that depend on content being hosted in a relational database.</span></span> <span data-ttu-id="33d0a-160">串流分析工作會寫入至 Azure SQL Database 中的現有資料表。</span><span class="sxs-lookup"><span data-stu-id="33d0a-160">Stream Analytics jobs will write to an existing table in an Azure SQL Database.</span></span>  <span data-ttu-id="33d0a-161">請注意，資料表結構描述必須完全符合工作輸出的欄位及其類型。</span><span class="sxs-lookup"><span data-stu-id="33d0a-161">Note that the table schema must exactly match the fields and their types being output from your job.</span></span> <span data-ttu-id="33d0a-162">您也可以透過 SQL Database 輸出選項，將 [Azure SQL 資料倉儲](https://azure.microsoft.com/documentation/services/sql-data-warehouse/) 指定為輸出 (這是一個預覽功能)。</span><span class="sxs-lookup"><span data-stu-id="33d0a-162">An [Azure SQL Data Warehouse](https://azure.microsoft.com/documentation/services/sql-data-warehouse/) can also be specified as an output via the SQL Database output option as well (this is a preview feature).</span></span> <span data-ttu-id="33d0a-163">下表列出屬性名稱及其描述以建立 SQL Database 輸出。</span><span class="sxs-lookup"><span data-stu-id="33d0a-163">The table below lists the property names and their description for creating a SQL Database output.</span></span>

| <span data-ttu-id="33d0a-164">屬性名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-164">Property Name</span></span> | <span data-ttu-id="33d0a-165">說明</span><span class="sxs-lookup"><span data-stu-id="33d0a-165">Description</span></span> |
| --- | --- |
| <span data-ttu-id="33d0a-166">輸出別名</span><span class="sxs-lookup"><span data-stu-id="33d0a-166">Output Alias</span></span> |<span data-ttu-id="33d0a-167">此為易記名稱，用於在查詢中將查詢輸出指向這個資料庫。</span><span class="sxs-lookup"><span data-stu-id="33d0a-167">This is a friendly name used in queries to direct the query output to this database.</span></span> |
| <span data-ttu-id="33d0a-168">資料庫</span><span class="sxs-lookup"><span data-stu-id="33d0a-168">Database</span></span> |<span data-ttu-id="33d0a-169">您傳送輸出的資料庫名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-169">The name of the database where you are sending your output</span></span> |
| <span data-ttu-id="33d0a-170">伺服器名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-170">Server Name</span></span> |<span data-ttu-id="33d0a-171">SQL Database 伺服器名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-171">The SQL Database server name</span></span> |
| <span data-ttu-id="33d0a-172">使用者名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-172">Username</span></span> |<span data-ttu-id="33d0a-173">具有寫入資料庫存取權限的使用者名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-173">The Username which has access to write to the database</span></span> |
| <span data-ttu-id="33d0a-174">密碼</span><span class="sxs-lookup"><span data-stu-id="33d0a-174">Password</span></span> |<span data-ttu-id="33d0a-175">連接到資料庫的密碼</span><span class="sxs-lookup"><span data-stu-id="33d0a-175">The password to connect to the database</span></span> |
| <span data-ttu-id="33d0a-176">資料表</span><span class="sxs-lookup"><span data-stu-id="33d0a-176">Table</span></span> |<span data-ttu-id="33d0a-177">將在其中寫入輸出的資料表名稱。</span><span class="sxs-lookup"><span data-stu-id="33d0a-177">The table name where the output will be written.</span></span> <span data-ttu-id="33d0a-178">資料表名稱會區分大小寫，且資料表的結構描述應該完全符合工作輸出所產生的欄位數目和其類型。</span><span class="sxs-lookup"><span data-stu-id="33d0a-178">The table name is case sensitive and the schema of this table should match exactly to the number of fields and their types being generated by your job output.</span></span> |

> [!NOTE]
> <span data-ttu-id="33d0a-179">目前「串流分析」中的工作輸出支援 Azure SQL Database 提供項目。</span><span class="sxs-lookup"><span data-stu-id="33d0a-179">Currently the Azure SQL Database offering is supported for a job output in Stream Analytics.</span></span> <span data-ttu-id="33d0a-180">不過，不支援執行已連結資料庫之 SQL Server 的「Azure 虛擬機器」。</span><span class="sxs-lookup"><span data-stu-id="33d0a-180">However, an Azure Virtual Machine running SQL Server with a database attached is not supported.</span></span> <span data-ttu-id="33d0a-181">這在未來的版本中有可能變更。</span><span class="sxs-lookup"><span data-stu-id="33d0a-181">This is subject to change in future releases.</span></span>
> 
> 

## <a name="blob-storage"></a><span data-ttu-id="33d0a-182">Blob 儲存體</span><span class="sxs-lookup"><span data-stu-id="33d0a-182">Blob storage</span></span>
<span data-ttu-id="33d0a-183">若要將大量非結構化資料儲存於雲端，Blob 儲存體提供具有成本效益且可擴充的解決方案。</span><span class="sxs-lookup"><span data-stu-id="33d0a-183">Blob storage offers a cost-effective and scalable solution for storing large amounts of unstructured data in the cloud.</span></span>  <span data-ttu-id="33d0a-184">如需 Azure Blob 儲存體及其使用方式的簡介，請參閱 [如何使用 Blob](../storage/blobs/storage-dotnet-how-to-use-blobs.md)中的文件。</span><span class="sxs-lookup"><span data-stu-id="33d0a-184">For an introduction on Azure Blob storage and its usage, see the documentation at [How to use Blobs](../storage/blobs/storage-dotnet-how-to-use-blobs.md).</span></span>

<span data-ttu-id="33d0a-185">下表列出屬性名稱及其描述以建立 blob 輸出。</span><span class="sxs-lookup"><span data-stu-id="33d0a-185">The table below lists the property names and their description for creating a blob output.</span></span>

<table>
<tbody>
<tr>
<td><span data-ttu-id="33d0a-186">屬性名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-186">PROPERTY NAME</span></span></td>
<td><span data-ttu-id="33d0a-187">說明</span><span class="sxs-lookup"><span data-stu-id="33d0a-187">DESCRIPTION</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="33d0a-188">輸出別名</span><span class="sxs-lookup"><span data-stu-id="33d0a-188">Output Alias</span></span></td>
<td><span data-ttu-id="33d0a-189">此為易記名稱，用於在查詢中將查詢輸出指向這個 blob 儲存體。</span><span class="sxs-lookup"><span data-stu-id="33d0a-189">This is a friendly name used in queries to direct the query output to this blob storage.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="33d0a-190">儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="33d0a-190">Storage Account</span></span></td>
<td><span data-ttu-id="33d0a-191">您傳送輸出的儲存體帳戶名稱。</span><span class="sxs-lookup"><span data-stu-id="33d0a-191">The name of the storage account where you are sending your output.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="33d0a-192">儲存體帳戶金鑰</span><span class="sxs-lookup"><span data-stu-id="33d0a-192">Storage Account Key</span></span></td>
<td><span data-ttu-id="33d0a-193">與儲存體帳戶相關聯的密碼金鑰。</span><span class="sxs-lookup"><span data-stu-id="33d0a-193">The secret key associated with the storage account.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="33d0a-194">儲存體容器</span><span class="sxs-lookup"><span data-stu-id="33d0a-194">Storage Container</span></span></td>
<td><span data-ttu-id="33d0a-195">容器提供邏輯分組給儲存在 Microsoft Azure Blob 服務中的 blob。</span><span class="sxs-lookup"><span data-stu-id="33d0a-195">Containers provide a logical grouping for blobs stored in the Microsoft Azure Blob service.</span></span> <span data-ttu-id="33d0a-196">當您將 blob 上傳至 Blob 服務時，您必須指定該 blob 的容器。</span><span class="sxs-lookup"><span data-stu-id="33d0a-196">When you upload a blob to the Blob service, you must specify a container for that blob.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="33d0a-197">路徑前置詞模式 [選用]</span><span class="sxs-lookup"><span data-stu-id="33d0a-197">Path Prefix Pattern [optional]</span></span></td>
<td><span data-ttu-id="33d0a-198">用來在指定容器中寫入 Blob 的檔案路徑。</span><span class="sxs-lookup"><span data-stu-id="33d0a-198">The file path used to write your blobs within the specified container.</span></span><BR><span data-ttu-id="33d0a-199">在該路徑內，您也可以選擇使用下列 2 個變數的一或多個執行個體來指定 blob 的寫入頻率：</span><span class="sxs-lookup"><span data-stu-id="33d0a-199">Within the path, you may choose to use one or more instances of the following 2 variables to specify the frequency that blobs are written:</span></span><BR><span data-ttu-id="33d0a-200">{date}、{time}</span><span class="sxs-lookup"><span data-stu-id="33d0a-200">{date}, {time}</span></span><BR><span data-ttu-id="33d0a-201">範例 1：cluster1/logs/{date}/{time}</span><span class="sxs-lookup"><span data-stu-id="33d0a-201">Example 1: cluster1/logs/{date}/{time}</span></span><BR><span data-ttu-id="33d0a-202">範例 2：cluster1/logs/{date}</span><span class="sxs-lookup"><span data-stu-id="33d0a-202">Example 2: cluster1/logs/{date}</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="33d0a-203">日期格式 [選用]</span><span class="sxs-lookup"><span data-stu-id="33d0a-203">Date Format [optional]</span></span></td>
<td><span data-ttu-id="33d0a-204">如果前置詞路徑中使用日期權杖，您可以選取組織檔案要用的日期格式。</span><span class="sxs-lookup"><span data-stu-id="33d0a-204">If the date token is used in the prefix path, you can select the date format in which your files are organized.</span></span> <span data-ttu-id="33d0a-205">範例：YYYY/MM/DD</span><span class="sxs-lookup"><span data-stu-id="33d0a-205">Example: YYYY/MM/DD</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="33d0a-206">時間格式 [選用]</span><span class="sxs-lookup"><span data-stu-id="33d0a-206">Time Format [optional]</span></span></td>
<td><span data-ttu-id="33d0a-207">如果前置詞路徑中使用時間權杖，請指定組織檔案要用的時間格式。</span><span class="sxs-lookup"><span data-stu-id="33d0a-207">If the time token is used in the prefix path, specify the time format in which your files are organized.</span></span> <span data-ttu-id="33d0a-208">目前唯一支援的值為 HH。</span><span class="sxs-lookup"><span data-stu-id="33d0a-208">Currently the only supported value is HH.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="33d0a-209">事件序列化格式</span><span class="sxs-lookup"><span data-stu-id="33d0a-209">Event Serialization Format</span></span></td>
<td><span data-ttu-id="33d0a-210">輸出資料的序列化格式。</span><span class="sxs-lookup"><span data-stu-id="33d0a-210">Serialization format for output data.</span></span>  <span data-ttu-id="33d0a-211">支援 JSON、CSV 和 Avro。</span><span class="sxs-lookup"><span data-stu-id="33d0a-211">JSON, CSV, and Avro are supported.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="33d0a-212">編碼</span><span class="sxs-lookup"><span data-stu-id="33d0a-212">Encoding</span></span></td>
<td><span data-ttu-id="33d0a-213">若為 CSV 或 JSON 格式，必須指定編碼。</span><span class="sxs-lookup"><span data-stu-id="33d0a-213">If CSV or JSON format, an encoding must be specified.</span></span> <span data-ttu-id="33d0a-214">UTF-8 是目前唯一支援的編碼格式。</span><span class="sxs-lookup"><span data-stu-id="33d0a-214">UTF-8 is the only supported encoding format at this time.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="33d0a-215">分隔符號</span><span class="sxs-lookup"><span data-stu-id="33d0a-215">Delimiter</span></span></td>
<td><span data-ttu-id="33d0a-216">僅適用於 CSV 序列化。</span><span class="sxs-lookup"><span data-stu-id="33d0a-216">Only applicable for CSV serialization.</span></span> <span data-ttu-id="33d0a-217">串流分析可支援多種序列化 CSV 資料常用的分隔符號。</span><span class="sxs-lookup"><span data-stu-id="33d0a-217">Stream Analytics supports a number of common delimiters for serializing CSV data.</span></span> <span data-ttu-id="33d0a-218">支援的值是逗號、分號、空格、索引標籤和分隔號。</span><span class="sxs-lookup"><span data-stu-id="33d0a-218">Supported values are comma, semicolon, space, tab and vertical bar.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="33d0a-219">格式</span><span class="sxs-lookup"><span data-stu-id="33d0a-219">Format</span></span></td>
<td><span data-ttu-id="33d0a-220">僅適用於 JSON 序列化。</span><span class="sxs-lookup"><span data-stu-id="33d0a-220">Only applicable for JSON serialization.</span></span> <span data-ttu-id="33d0a-221">分隔的行會指定輸出的格式化方式為利用新行分隔每個 JSON 物件。</span><span class="sxs-lookup"><span data-stu-id="33d0a-221">Line separated specifies that the output will be formatted by having each JSON object separated by a new line.</span></span> <span data-ttu-id="33d0a-222">陣列會指定輸出將會格式化為 JSON 物件的陣列。</span><span class="sxs-lookup"><span data-stu-id="33d0a-222">Array specifies that the output will be formatted as an array of JSON objects.</span></span> <span data-ttu-id="33d0a-223">只有在作業停止或串流分析已移動到下一個時間範圍時，才會關閉這個陣列。</span><span class="sxs-lookup"><span data-stu-id="33d0a-223">This array will be closed only when the job stops or Stream Analytics has moved on to the next time window.</span></span> <span data-ttu-id="33d0a-224">一般情況下，最好使用分行的 JSON，因為它不需要任何特殊處理，同時仍會寫入輸出檔案。</span><span class="sxs-lookup"><span data-stu-id="33d0a-224">In general, it is preferable to use line separated JSON, since it doesn't require any special handling while the output file is still being written to.</span></span></td>
</tr>
</tbody>
</table>

## <a name="event-hub"></a><span data-ttu-id="33d0a-225">事件中樞</span><span class="sxs-lookup"><span data-stu-id="33d0a-225">Event Hub</span></span>
<span data-ttu-id="33d0a-226">[事件中樞](https://azure.microsoft.com/services/event-hubs/) 是具高延展性的發佈-訂閱事件擷取器。</span><span class="sxs-lookup"><span data-stu-id="33d0a-226">[Event Hubs](https://azure.microsoft.com/services/event-hubs/) is a highly scalable publish-subscribe event ingestor.</span></span> <span data-ttu-id="33d0a-227">它每秒可以收集數百萬個事件。</span><span class="sxs-lookup"><span data-stu-id="33d0a-227">It can collect millions of events per second.</span></span>  <span data-ttu-id="33d0a-228">事件中樞做為輸出的其中一個使用時機，就是當串流分析工作的輸出將成為另一個串流工作的輸入時。</span><span class="sxs-lookup"><span data-stu-id="33d0a-228">One use of an Event Hub as output is when the output of a Stream Analytics job will be the input of another streaming job.</span></span>

<span data-ttu-id="33d0a-229">設定事件中樞串流做為輸出時，需要幾個參數。</span><span class="sxs-lookup"><span data-stu-id="33d0a-229">There are a few parameters that are needed to configure Event Hub data streams as an output.</span></span>

| <span data-ttu-id="33d0a-230">屬性名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-230">Property Name</span></span> | <span data-ttu-id="33d0a-231">說明</span><span class="sxs-lookup"><span data-stu-id="33d0a-231">Description</span></span> |
| --- | --- |
| <span data-ttu-id="33d0a-232">輸出別名</span><span class="sxs-lookup"><span data-stu-id="33d0a-232">Output Alias</span></span> |<span data-ttu-id="33d0a-233">此為易記名稱，用於在查詢中將查詢輸出指向這個事件中樞。</span><span class="sxs-lookup"><span data-stu-id="33d0a-233">This is a friendly name used in queries to direct the query output to this Event Hub.</span></span> |
| <span data-ttu-id="33d0a-234">服務匯流排 命名空間</span><span class="sxs-lookup"><span data-stu-id="33d0a-234">Service Bus Namespace</span></span> |<span data-ttu-id="33d0a-235">服務匯流排命名空間是一個容器，包含一組訊息實體。</span><span class="sxs-lookup"><span data-stu-id="33d0a-235">A Service Bus namespace is a container for a set of messaging entities.</span></span> <span data-ttu-id="33d0a-236">建立新的事件中樞時，也會建立服務匯流排命名空間</span><span class="sxs-lookup"><span data-stu-id="33d0a-236">When you created a new Event Hub, you also created a Service Bus namespace</span></span> |
| <span data-ttu-id="33d0a-237">事件中樞</span><span class="sxs-lookup"><span data-stu-id="33d0a-237">Event Hub</span></span> |<span data-ttu-id="33d0a-238">事件中樞輸出的名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-238">The name of your Event Hub output</span></span> |
| <span data-ttu-id="33d0a-239">事件中樞原則名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-239">Event Hub Policy Name</span></span> |<span data-ttu-id="33d0a-240">共用的存取原則，可以在事件中樞的 [設定] 索引標籤上建立。每一個共用存取原則會有名稱、權限 (由您設定) 和存取金鑰</span><span class="sxs-lookup"><span data-stu-id="33d0a-240">The shared access policy, which can be created on the Event Hub Configure tab. Each shared access policy will have a name, permissions that you set, and access keys</span></span> |
| <span data-ttu-id="33d0a-241">事件中樞原則金鑰</span><span class="sxs-lookup"><span data-stu-id="33d0a-241">Event Hub Policy Key</span></span> |<span data-ttu-id="33d0a-242">用來驗證服務匯流排命名空間之存取權的共用存取金鑰</span><span class="sxs-lookup"><span data-stu-id="33d0a-242">The Shared Access key used to authenticate access to the Service Bus namespace</span></span> |
| <span data-ttu-id="33d0a-243">資料分割索引鍵資料行 [選用]</span><span class="sxs-lookup"><span data-stu-id="33d0a-243">Partition Key Column [optional]</span></span> |<span data-ttu-id="33d0a-244">這個資料行包含事件中樞輸出的資料分割索引鍵。</span><span class="sxs-lookup"><span data-stu-id="33d0a-244">This column contains the partition key for Event Hub output.</span></span> |
| <span data-ttu-id="33d0a-245">事件序列化格式</span><span class="sxs-lookup"><span data-stu-id="33d0a-245">Event Serialization Format</span></span> |<span data-ttu-id="33d0a-246">輸出資料的序列化格式。</span><span class="sxs-lookup"><span data-stu-id="33d0a-246">Serialization format for output data.</span></span>  <span data-ttu-id="33d0a-247">支援 JSON、CSV 和 Avro。</span><span class="sxs-lookup"><span data-stu-id="33d0a-247">JSON, CSV, and Avro are supported.</span></span> |
| <span data-ttu-id="33d0a-248">編碼</span><span class="sxs-lookup"><span data-stu-id="33d0a-248">Encoding</span></span> |<span data-ttu-id="33d0a-249">對於 CSV 和 JSON 而言，UTF-8 是目前唯一支援的編碼格式</span><span class="sxs-lookup"><span data-stu-id="33d0a-249">For CSV and JSON, UTF-8 is the only supported encoding format at this time</span></span> |
| <span data-ttu-id="33d0a-250">分隔符號</span><span class="sxs-lookup"><span data-stu-id="33d0a-250">Delimiter</span></span> |<span data-ttu-id="33d0a-251">僅適用於 CSV 序列化。</span><span class="sxs-lookup"><span data-stu-id="33d0a-251">Only applicable for CSV serialization.</span></span> <span data-ttu-id="33d0a-252">串流分析可支援多種以 CSV 格式序列化資料常用的分隔符號。</span><span class="sxs-lookup"><span data-stu-id="33d0a-252">Stream Analytics supports a number of common delimiters for serializing data in CSV format.</span></span> <span data-ttu-id="33d0a-253">支援的值是逗號、分號、空格、索引標籤和分隔號。</span><span class="sxs-lookup"><span data-stu-id="33d0a-253">Supported values are comma, semicolon, space, tab and vertical bar.</span></span> |
| <span data-ttu-id="33d0a-254">格式</span><span class="sxs-lookup"><span data-stu-id="33d0a-254">Format</span></span> |<span data-ttu-id="33d0a-255">僅適用於 JSON 類型。</span><span class="sxs-lookup"><span data-stu-id="33d0a-255">Only applicable for JSON type.</span></span> <span data-ttu-id="33d0a-256">分隔的行會指定輸出的格式化方式為利用新行分隔每個 JSON 物件。</span><span class="sxs-lookup"><span data-stu-id="33d0a-256">Line separated specifies that the output will be formatted by having each JSON object separated by a new line.</span></span> <span data-ttu-id="33d0a-257">陣列會指定輸出將會格式化為 JSON 物件的陣列。</span><span class="sxs-lookup"><span data-stu-id="33d0a-257">Array specifies that the output will be formatted as an array of JSON objects.</span></span> |

## <a name="power-bi"></a><span data-ttu-id="33d0a-258">Power BI</span><span class="sxs-lookup"><span data-stu-id="33d0a-258">Power BI</span></span>
<span data-ttu-id="33d0a-259">[Power BI](https://powerbi.microsoft.com/) 當做串流分析工作的輸出，來為分析結果提供豐富的視覺體驗。</span><span class="sxs-lookup"><span data-stu-id="33d0a-259">[Power BI](https://powerbi.microsoft.com/) can be used as an output for a Stream Analytics job to provide for a rich visualization experience of analysis results.</span></span> <span data-ttu-id="33d0a-260">這項功能可以用於可運作的儀表板、產生報告，以及度量驅動的報告。</span><span class="sxs-lookup"><span data-stu-id="33d0a-260">This capability can be used for operational dashboards, report generation and metric driven reporting.</span></span>

### <a name="authorize-a-power-bi-account"></a><span data-ttu-id="33d0a-261">授權 Power BI 帳戶</span><span class="sxs-lookup"><span data-stu-id="33d0a-261">Authorize a Power BI account</span></span>
1. <span data-ttu-id="33d0a-262">在 Azure 入口網站中選取 Power BI 作為輸出時，您將會收到提示，要授權現有的 Power BI 使用者或建立新的 Power BI 帳戶。</span><span class="sxs-lookup"><span data-stu-id="33d0a-262">When Power BI is selected as an output in the Azure portal, you will be prompted to authorize an existing Power BI User or to create a new Power BI account.</span></span>  
   
   ![授權 Power BI 使用者](./media/stream-analytics-define-outputs/01-stream-analytics-define-outputs.png)  
2. <span data-ttu-id="33d0a-264">如果您尚未擁有帳戶，請建立新帳戶，然後按一下 [立即授權]。</span><span class="sxs-lookup"><span data-stu-id="33d0a-264">Create a new account if you don’t yet have one, then click Authorize Now.</span></span>  <span data-ttu-id="33d0a-265">會顯示類似下列的畫面：</span><span class="sxs-lookup"><span data-stu-id="33d0a-265">A screen like the following is presented.</span></span>  
   
   ![Azure 帳戶 Power BI](./media/stream-analytics-define-outputs/02-stream-analytics-define-outputs.png)  
3. <span data-ttu-id="33d0a-267">在此步驟中，請提供工作或學校帳戶以授權 Power BI 輸出。</span><span class="sxs-lookup"><span data-stu-id="33d0a-267">In this step, provide the work or school account for authorizing the Power BI output.</span></span> <span data-ttu-id="33d0a-268">如果您尚未註冊 Power BI，請選擇 [立即註冊]。</span><span class="sxs-lookup"><span data-stu-id="33d0a-268">If you are not already signed up for Power BI, choose Sign up now.</span></span> <span data-ttu-id="33d0a-269">您用於 Power BI 的工作或學校帳戶可能與您目前用來登入的 Azure 訂用帳戶不同。</span><span class="sxs-lookup"><span data-stu-id="33d0a-269">The work or school account you use for Power BI could be different from the Azure subscription account which you are currently logged in with.</span></span>

### <a name="configure-the-power-bi-output-properties"></a><span data-ttu-id="33d0a-270">設定 Power BI 輸出屬性</span><span class="sxs-lookup"><span data-stu-id="33d0a-270">Configure the Power BI output properties</span></span>
<span data-ttu-id="33d0a-271">驗證 Power BI 帳戶之後，您可以設定 Power BI 輸出的屬性。</span><span class="sxs-lookup"><span data-stu-id="33d0a-271">Once you have the Power BI account authenticated, you can configure the properties for your Power BI output.</span></span> <span data-ttu-id="33d0a-272">下表是設定 Power BI 輸出的屬性名稱清單及其描述。</span><span class="sxs-lookup"><span data-stu-id="33d0a-272">The table below is the list of property names and their description to configure your Power BI output.</span></span>

| <span data-ttu-id="33d0a-273">屬性名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-273">Property Name</span></span> | <span data-ttu-id="33d0a-274">說明</span><span class="sxs-lookup"><span data-stu-id="33d0a-274">Description</span></span> |
| --- | --- |
| <span data-ttu-id="33d0a-275">輸出別名</span><span class="sxs-lookup"><span data-stu-id="33d0a-275">Output Alias</span></span> |<span data-ttu-id="33d0a-276">此為易記名稱，用於在查詢中將查詢輸出指向這個 Power BI 輸出。</span><span class="sxs-lookup"><span data-stu-id="33d0a-276">This is a friendly name used in queries to direct the query output to this PowerBI output.</span></span> |
| <span data-ttu-id="33d0a-277">群組工作區</span><span class="sxs-lookup"><span data-stu-id="33d0a-277">Group Workspace</span></span> |<span data-ttu-id="33d0a-278">若要與其他 Power BI 使用者共用資料，您可以選取 Power BI 帳戶內的群組，若您不希望寫入群組，請選擇「我的工作區」。</span><span class="sxs-lookup"><span data-stu-id="33d0a-278">To enable sharing data with other Power BI users you can select groups inside your Power BI account or choose “My Workspace” if you do not want to write to a group.</span></span>  <span data-ttu-id="33d0a-279">更新現有的群組需要更新 Power BI 驗證。</span><span class="sxs-lookup"><span data-stu-id="33d0a-279">Updating an existing group requires renewing the Power BI authentication.</span></span> |
| <span data-ttu-id="33d0a-280">資料集名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-280">Dataset Name</span></span> |<span data-ttu-id="33d0a-281">提供 Power BI 輸出需要使用的資料集名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-281">Provide a dataset name that it is desired for the Power BI output to use</span></span> |
| <span data-ttu-id="33d0a-282">資料表名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-282">Table Name</span></span> |<span data-ttu-id="33d0a-283">提供 Power BI 輸出資料集的資料表名稱。</span><span class="sxs-lookup"><span data-stu-id="33d0a-283">Provide a table name under the dataset of the Power BI output.</span></span> <span data-ttu-id="33d0a-284">目前，串流分析工作的 Power BI 輸出中，一個資料集只能有一個資料表</span><span class="sxs-lookup"><span data-stu-id="33d0a-284">Currently, Power BI output from Stream Analytics jobs can only have one table in a dataset</span></span> |

<span data-ttu-id="33d0a-285">如需設定 Power BI 輸出和儀表板的逐步解說，請參閱 [Azure 串流分析與 Power BI](stream-analytics-power-bi-dashboard.md) 文章。</span><span class="sxs-lookup"><span data-stu-id="33d0a-285">For a walk-through of configuring a Power BI output and dashboard, please see the [Azure Stream Analytics & Power BI](stream-analytics-power-bi-dashboard.md) article.</span></span>

> [!NOTE]
> <span data-ttu-id="33d0a-286">未在 Power BI 儀表板中明確建立資料集和資料表。</span><span class="sxs-lookup"><span data-stu-id="33d0a-286">Do not explicitly create the dataset and table in the Power BI dashboard.</span></span> <span data-ttu-id="33d0a-287">當工作開始並將輸出提取至 Power BI 時，就會自動填入資料集和資料表。</span><span class="sxs-lookup"><span data-stu-id="33d0a-287">The dataset and table will be automatically populated when the job is started and the job starts pumping output into Power BI.</span></span> <span data-ttu-id="33d0a-288">請注意，如果工作查詢沒有產生任何結果，將不會建立資料集和資料表。</span><span class="sxs-lookup"><span data-stu-id="33d0a-288">Note that if the job query doesn’t generate any results, the dataset and table will not be created.</span></span> <span data-ttu-id="33d0a-289">也請注意，如果 Power BI 已經具有與串流分析工作中提供的名稱相同的資料集和資料表，可能會覆寫現有的資料。</span><span class="sxs-lookup"><span data-stu-id="33d0a-289">Also be aware that if Power BI already had a dataset and table with the same name as the one provided in this Stream Analytics job, the existing data will be overwritten.</span></span>
> 
> 

### <a name="schema-creation"></a><span data-ttu-id="33d0a-290">建立結構描述</span><span class="sxs-lookup"><span data-stu-id="33d0a-290">Schema Creation</span></span>
<span data-ttu-id="33d0a-291">如果 Power BI 資料集和資料表尚不存在，則 Azure 串流分析會代表使用者建立一個。</span><span class="sxs-lookup"><span data-stu-id="33d0a-291">Azure Stream Analytics creates a Power BI dataset and table on behalf of the user if one does not already exist.</span></span> <span data-ttu-id="33d0a-292">在其他情況下，則會以新的值更新資料表。目前的限制是一個資料集內只能存在一個資料表。</span><span class="sxs-lookup"><span data-stu-id="33d0a-292">In all other cases, the table is updated with new values.Currently, there is a the limitation that only one table can exist within a dataset.</span></span>

### <a name="data-type-conversion-from-asa-to-power-bi"></a><span data-ttu-id="33d0a-293">從 ASA 至 Power BI 的資料類型轉換</span><span class="sxs-lookup"><span data-stu-id="33d0a-293">Data type conversion from ASA to Power BI</span></span>
<span data-ttu-id="33d0a-294">如果輸出結構描述變更，則 Azure 串流分析會在執行階段動態更新資料模型。</span><span class="sxs-lookup"><span data-stu-id="33d0a-294">Azure Stream Analytics updates the data model dynamically at runtime if the output schema changes.</span></span> <span data-ttu-id="33d0a-295">所有資料行名稱變更、資料行類型變更以及資料行新增或移除都會加以追蹤。</span><span class="sxs-lookup"><span data-stu-id="33d0a-295">Column name changes, column type changes, and the addition or removal of columns are all tracked.</span></span>

<span data-ttu-id="33d0a-296">如果 POWER BI 資料集和資料表不存在，此資料表包含從[串流分析資料類型](https://msdn.microsoft.com/library/azure/dn835065.aspx)至 Power BI [實體資料模型 (EDM) 類型](https://powerbi.microsoft.com/documentation/powerbi-developer-walkthrough-push-data/)的資料類型轉換。</span><span class="sxs-lookup"><span data-stu-id="33d0a-296">This table covers the data type conversions from [Stream Analytics data types](https://msdn.microsoft.com/library/azure/dn835065.aspx) to Power BIs [Entity Data Model (EDM) types](https://powerbi.microsoft.com/documentation/powerbi-developer-walkthrough-push-data/) if a POWER BI dataset and table do not exist.</span></span>


<span data-ttu-id="33d0a-297">從串流分析</span><span class="sxs-lookup"><span data-stu-id="33d0a-297">From Stream Analytics</span></span> | <span data-ttu-id="33d0a-298">至 Power BI</span><span class="sxs-lookup"><span data-stu-id="33d0a-298">To Power BI</span></span>
-----|-----|------------
<span data-ttu-id="33d0a-299">bigint</span><span class="sxs-lookup"><span data-stu-id="33d0a-299">bigint</span></span> | <span data-ttu-id="33d0a-300">Int64</span><span class="sxs-lookup"><span data-stu-id="33d0a-300">Int64</span></span>
<span data-ttu-id="33d0a-301">nvarchar(max)</span><span class="sxs-lookup"><span data-stu-id="33d0a-301">nvarchar(max)</span></span> | <span data-ttu-id="33d0a-302">String</span><span class="sxs-lookup"><span data-stu-id="33d0a-302">String</span></span>
<span data-ttu-id="33d0a-303">datetime</span><span class="sxs-lookup"><span data-stu-id="33d0a-303">datetime</span></span> | <span data-ttu-id="33d0a-304">DateTime</span><span class="sxs-lookup"><span data-stu-id="33d0a-304">Datetime</span></span>
<span data-ttu-id="33d0a-305">float</span><span class="sxs-lookup"><span data-stu-id="33d0a-305">float</span></span> | <span data-ttu-id="33d0a-306">兩倍</span><span class="sxs-lookup"><span data-stu-id="33d0a-306">Double</span></span>
<span data-ttu-id="33d0a-307">記錄陣列</span><span class="sxs-lookup"><span data-stu-id="33d0a-307">Record array</span></span> | <span data-ttu-id="33d0a-308">字串類型、常數值 “IRecord” 或 “IArray”</span><span class="sxs-lookup"><span data-stu-id="33d0a-308">String type, Constant value “IRecord” or “IArray”</span></span>

### <a name="schema-update"></a><span data-ttu-id="33d0a-309">更新結構描述</span><span class="sxs-lookup"><span data-stu-id="33d0a-309">Schema Update</span></span>
<span data-ttu-id="33d0a-310">串流分析會根據輸出中的第一組事件來推斷資料模型結構描述。</span><span class="sxs-lookup"><span data-stu-id="33d0a-310">Stream Analytics infers the data model schema based on the first set of events in the output.</span></span> <span data-ttu-id="33d0a-311">之後會視需要更新資料模型結構描述，以容納原始結構描述放不下的連入事件。</span><span class="sxs-lookup"><span data-stu-id="33d0a-311">Later, if necessary, the data model schema is updated to accommodate incoming events that may not fit into the original schema.</span></span>

<span data-ttu-id="33d0a-312">應該避免 `SELECT *` 查詢，以防止跨越資料列的動態結構描述更新。</span><span class="sxs-lookup"><span data-stu-id="33d0a-312">The `SELECT *` query should be avoided to prevent dynamic schema update across rows.</span></span> <span data-ttu-id="33d0a-313">除了潛在的效能影響以外，也可能導致結果所花費的時間不定。</span><span class="sxs-lookup"><span data-stu-id="33d0a-313">In addition to potential performance implications, it could also result in indeterminacy of the time taken for the results.</span></span> <span data-ttu-id="33d0a-314">應選取必須顯示在 Power BI 儀表板上的確切欄位。</span><span class="sxs-lookup"><span data-stu-id="33d0a-314">The exact fields that need to be shown on Power BI dashboard should be selected.</span></span> <span data-ttu-id="33d0a-315">此外，資料值應該與所選的資料類型相符。</span><span class="sxs-lookup"><span data-stu-id="33d0a-315">Additionally, the data values should be compliant with the chosen data type.</span></span>


<span data-ttu-id="33d0a-316">先前/目前</span><span class="sxs-lookup"><span data-stu-id="33d0a-316">Previous/Current</span></span> | <span data-ttu-id="33d0a-317">Int64</span><span class="sxs-lookup"><span data-stu-id="33d0a-317">Int64</span></span> | <span data-ttu-id="33d0a-318">String</span><span class="sxs-lookup"><span data-stu-id="33d0a-318">String</span></span> | <span data-ttu-id="33d0a-319">DateTime</span><span class="sxs-lookup"><span data-stu-id="33d0a-319">Datetime</span></span> | <span data-ttu-id="33d0a-320">兩倍</span><span class="sxs-lookup"><span data-stu-id="33d0a-320">Double</span></span>
-----------------|-------|--------|----------|-------
<span data-ttu-id="33d0a-321">Int64</span><span class="sxs-lookup"><span data-stu-id="33d0a-321">Int64</span></span> | <span data-ttu-id="33d0a-322">Int64</span><span class="sxs-lookup"><span data-stu-id="33d0a-322">Int64</span></span> | <span data-ttu-id="33d0a-323">String</span><span class="sxs-lookup"><span data-stu-id="33d0a-323">String</span></span> | <span data-ttu-id="33d0a-324">String</span><span class="sxs-lookup"><span data-stu-id="33d0a-324">String</span></span> | <span data-ttu-id="33d0a-325">兩倍</span><span class="sxs-lookup"><span data-stu-id="33d0a-325">Double</span></span>
<span data-ttu-id="33d0a-326">兩倍</span><span class="sxs-lookup"><span data-stu-id="33d0a-326">Double</span></span> | <span data-ttu-id="33d0a-327">兩倍</span><span class="sxs-lookup"><span data-stu-id="33d0a-327">Double</span></span> | <span data-ttu-id="33d0a-328">String</span><span class="sxs-lookup"><span data-stu-id="33d0a-328">String</span></span> | <span data-ttu-id="33d0a-329">String</span><span class="sxs-lookup"><span data-stu-id="33d0a-329">String</span></span> | <span data-ttu-id="33d0a-330">兩倍</span><span class="sxs-lookup"><span data-stu-id="33d0a-330">Double</span></span>
<span data-ttu-id="33d0a-331">String</span><span class="sxs-lookup"><span data-stu-id="33d0a-331">String</span></span> | <span data-ttu-id="33d0a-332">String</span><span class="sxs-lookup"><span data-stu-id="33d0a-332">String</span></span> | <span data-ttu-id="33d0a-333">String</span><span class="sxs-lookup"><span data-stu-id="33d0a-333">String</span></span> | <span data-ttu-id="33d0a-334">String</span><span class="sxs-lookup"><span data-stu-id="33d0a-334">String</span></span> |  | <span data-ttu-id="33d0a-335">String</span><span class="sxs-lookup"><span data-stu-id="33d0a-335">String</span></span> | 
<span data-ttu-id="33d0a-336">DateTime</span><span class="sxs-lookup"><span data-stu-id="33d0a-336">Datetime</span></span> | <span data-ttu-id="33d0a-337">String</span><span class="sxs-lookup"><span data-stu-id="33d0a-337">String</span></span> | <span data-ttu-id="33d0a-338">String</span><span class="sxs-lookup"><span data-stu-id="33d0a-338">String</span></span> |  <span data-ttu-id="33d0a-339">DateTime</span><span class="sxs-lookup"><span data-stu-id="33d0a-339">Datetime</span></span> | <span data-ttu-id="33d0a-340">String</span><span class="sxs-lookup"><span data-stu-id="33d0a-340">String</span></span>


### <a name="renew-power-bi-authorization"></a><span data-ttu-id="33d0a-341">更新 Power BI 授權</span><span class="sxs-lookup"><span data-stu-id="33d0a-341">Renew Power BI Authorization</span></span>
<span data-ttu-id="33d0a-342">如果您在建立工作之後或上次驗證過後變更了密碼，則需要重新驗證您的 Power BI 帳戶。</span><span class="sxs-lookup"><span data-stu-id="33d0a-342">You will need to re-authenticate your Power BI account if its password has changed since your job was created or last authenticated.</span></span> <span data-ttu-id="33d0a-343">如果您在 Azure Active Directory (AAD) 租用戶上設定 Multi-Factor Authentication (MFA)，則也需要每 2 週更新一次 Power BI 授權。</span><span class="sxs-lookup"><span data-stu-id="33d0a-343">If Multi-Factor Authentication (MFA) is configured on your Azure Active Directory (AAD) tenant you will also need to renew Power BI authorization every 2 weeks.</span></span> <span data-ttu-id="33d0a-344">此問題發生時的徵兆就是沒有工作輸出，且作業記錄檔中出現「驗證使用者錯誤」：</span><span class="sxs-lookup"><span data-stu-id="33d0a-344">A symptom of this issue is no job output and an "Authenticate user error" in the Operation Logs:</span></span>

  ![Power BI 重新整理權杖錯誤](./media/stream-analytics-define-outputs/03-stream-analytics-define-outputs.png)  

<span data-ttu-id="33d0a-346">若要解決這個問題，請停止執行工作並移至 Power BI 輸出。</span><span class="sxs-lookup"><span data-stu-id="33d0a-346">To resolve this issue, stop your running job and go to your Power BI output.</span></span>  <span data-ttu-id="33d0a-347">按一下 [更新授權] 連結，並從 [上次停止時間] 重新啟動您的工作以避免資料遺失。</span><span class="sxs-lookup"><span data-stu-id="33d0a-347">Click the “Renew authorization” link, and restart your job from the Last Stopped Time to avoid data loss.</span></span>

  ![Power BI 更新授權](./media/stream-analytics-define-outputs/04-stream-analytics-define-outputs.png)  

## <a name="table-storage"></a><span data-ttu-id="33d0a-349">資料表儲存體</span><span class="sxs-lookup"><span data-stu-id="33d0a-349">Table Storage</span></span>
<span data-ttu-id="33d0a-350">[Azure 表格儲存體](../storage/common/storage-introduction.md)提供高可用性且可大幅擴充的儲存體，可讓應用程式自動調整來滿足使用者需求。</span><span class="sxs-lookup"><span data-stu-id="33d0a-350">[Azure Table storage](../storage/common/storage-introduction.md)  offers highly available, massively scalable storage, so that an application can automatically scale to meet user demand.</span></span> <span data-ttu-id="33d0a-351">資料表儲存體是 Microsoft 的 NoSQL 索引鍵/屬性存放區，其中可以使用結構化資料，但結構描述的限制較少。</span><span class="sxs-lookup"><span data-stu-id="33d0a-351">Table storage is Microsoft’s NoSQL key/attribute store which one can leverage for structured data with less constraints on the schema.</span></span> <span data-ttu-id="33d0a-352">使用 Azure 資料表儲存資料時，資料可長期儲存而且調閱方便。</span><span class="sxs-lookup"><span data-stu-id="33d0a-352">Azure Table storage can be used to store data for persistence and efficient retrieval.</span></span>

<span data-ttu-id="33d0a-353">下表列出屬性名稱及其描述以建立資料表輸出。</span><span class="sxs-lookup"><span data-stu-id="33d0a-353">The table below lists the property names and their description for creating a table output.</span></span>

| <span data-ttu-id="33d0a-354">屬性名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-354">Property Name</span></span> | <span data-ttu-id="33d0a-355">說明</span><span class="sxs-lookup"><span data-stu-id="33d0a-355">Description</span></span> |
| --- | --- |
| <span data-ttu-id="33d0a-356">輸出別名</span><span class="sxs-lookup"><span data-stu-id="33d0a-356">Output Alias</span></span> |<span data-ttu-id="33d0a-357">此為易記名稱，用於在查詢中將查詢輸出指向這個資料表儲存體。</span><span class="sxs-lookup"><span data-stu-id="33d0a-357">This is a friendly name used in queries to direct the query output to this table storage.</span></span> |
| <span data-ttu-id="33d0a-358">儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="33d0a-358">Storage Account</span></span> |<span data-ttu-id="33d0a-359">您傳送輸出的儲存體帳戶名稱。</span><span class="sxs-lookup"><span data-stu-id="33d0a-359">The name of the storage account where you are sending your output.</span></span> |
| <span data-ttu-id="33d0a-360">儲存體帳戶金鑰</span><span class="sxs-lookup"><span data-stu-id="33d0a-360">Storage Account Key</span></span> |<span data-ttu-id="33d0a-361">與儲存體帳戶相關聯的存取金鑰。</span><span class="sxs-lookup"><span data-stu-id="33d0a-361">The access key associated with the storage account.</span></span> |
| <span data-ttu-id="33d0a-362">資料表名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-362">Table Name</span></span> |<span data-ttu-id="33d0a-363">資料表的名稱。</span><span class="sxs-lookup"><span data-stu-id="33d0a-363">The name of the table.</span></span> <span data-ttu-id="33d0a-364">如果資料表不存在，將會建立資料表。</span><span class="sxs-lookup"><span data-stu-id="33d0a-364">The table will get created if it does not exist.</span></span> |
| <span data-ttu-id="33d0a-365">資料分割索引鍵</span><span class="sxs-lookup"><span data-stu-id="33d0a-365">Partition Key</span></span> |<span data-ttu-id="33d0a-366">包含資料分割索引鍵的輸出資料行名稱。</span><span class="sxs-lookup"><span data-stu-id="33d0a-366">The name of the output column containing the partition key.</span></span> <span data-ttu-id="33d0a-367">在構成實體主索引鍵第一個部分的指定資料表內，資料分割索引鍵是資料分割的唯一識別碼。</span><span class="sxs-lookup"><span data-stu-id="33d0a-367">The partition key is a unique identifier for the partition within a given table that forms the first part of an entity's primary key.</span></span> <span data-ttu-id="33d0a-368">大小最高為 1 KB 的字串值。</span><span class="sxs-lookup"><span data-stu-id="33d0a-368">It is a string value that may be up to 1 KB in size.</span></span> |
| <span data-ttu-id="33d0a-369">列索引鍵</span><span class="sxs-lookup"><span data-stu-id="33d0a-369">Row Key</span></span> |<span data-ttu-id="33d0a-370">包含資料列索引鍵的輸出資料行名稱。</span><span class="sxs-lookup"><span data-stu-id="33d0a-370">The name of the output column containing the row key.</span></span> <span data-ttu-id="33d0a-371">資料列索引鍵是指定資料分割內實體的唯一識別碼。</span><span class="sxs-lookup"><span data-stu-id="33d0a-371">The row key is a unique identifier for an entity within a given partition.</span></span> <span data-ttu-id="33d0a-372">它可構成實體主索引鍵的第二個部分。</span><span class="sxs-lookup"><span data-stu-id="33d0a-372">It forms the second part of an entity’s primary key.</span></span> <span data-ttu-id="33d0a-373">資料列索引鍵是大小可能高達 1 KB 的字串值。</span><span class="sxs-lookup"><span data-stu-id="33d0a-373">The row key is a string value that may be up to 1 KB in size.</span></span> |
| <span data-ttu-id="33d0a-374">批次大小</span><span class="sxs-lookup"><span data-stu-id="33d0a-374">Batch Size</span></span> |<span data-ttu-id="33d0a-375">批次作業的記錄數目。</span><span class="sxs-lookup"><span data-stu-id="33d0a-375">The number of records for a batch operation.</span></span> <span data-ttu-id="33d0a-376">預設值通常足以應付大部分的工作，如需修改此設定的詳細資訊，請參閱 [資料表批次作業規格](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.table.tablebatchoperation.aspx) 。</span><span class="sxs-lookup"><span data-stu-id="33d0a-376">Typically the default is sufficient for most jobs, refer to the [Table Batch Operation spec](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.table.tablebatchoperation.aspx) for more details on modifying this setting.</span></span> |

## <a name="service-bus-queues"></a><span data-ttu-id="33d0a-377">服務匯流排佇列</span><span class="sxs-lookup"><span data-stu-id="33d0a-377">Service Bus Queues</span></span>
<span data-ttu-id="33d0a-378">[服務匯流排佇列](https://msdn.microsoft.com/library/azure/hh367516.aspx) 會採用「先進先出」(FIFO) 訊息傳遞機制。</span><span class="sxs-lookup"><span data-stu-id="33d0a-378">[Service Bus Queues](https://msdn.microsoft.com/library/azure/hh367516.aspx) offer a First In, First Out (FIFO) message delivery to one or more competing consumers.</span></span> <span data-ttu-id="33d0a-379">通常會預期由接收者依訊息加入佇列的時間順序來接收和處理訊息，而且每則訊息只能由一個訊息取用者接收和處理。</span><span class="sxs-lookup"><span data-stu-id="33d0a-379">Typically, messages are expected to be received and processed by the receivers in the temporal order in which they were added to the queue, and each message is received and processed by only one message consumer.</span></span>

<span data-ttu-id="33d0a-380">下表列出屬性名稱及其描述以建立佇列輸出。</span><span class="sxs-lookup"><span data-stu-id="33d0a-380">The table below lists the property names and their description for creating a Queue output.</span></span>

| <span data-ttu-id="33d0a-381">屬性名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-381">Property Name</span></span> | <span data-ttu-id="33d0a-382">說明</span><span class="sxs-lookup"><span data-stu-id="33d0a-382">Description</span></span> |
| --- | --- |
| <span data-ttu-id="33d0a-383">輸出別名</span><span class="sxs-lookup"><span data-stu-id="33d0a-383">Output Alias</span></span> |<span data-ttu-id="33d0a-384">此為易記名稱，用於在查詢中將查詢輸出指向這個服務匯流排佇列。</span><span class="sxs-lookup"><span data-stu-id="33d0a-384">This is a friendly name used in queries to direct the query output to this Service Bus Queue.</span></span> |
| <span data-ttu-id="33d0a-385">服務匯流排 命名空間</span><span class="sxs-lookup"><span data-stu-id="33d0a-385">Service Bus Namespace</span></span> |<span data-ttu-id="33d0a-386">服務匯流排命名空間是一個容器，包含一組訊息實體。</span><span class="sxs-lookup"><span data-stu-id="33d0a-386">A Service Bus namespace is a container for a set of messaging entities.</span></span> |
| <span data-ttu-id="33d0a-387">佇列名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-387">Queue Name</span></span> |<span data-ttu-id="33d0a-388">服務匯流排佇列的名稱。</span><span class="sxs-lookup"><span data-stu-id="33d0a-388">The name of the Service Bus Queue.</span></span> |
| <span data-ttu-id="33d0a-389">佇列原則名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-389">Queue Policy Name</span></span> |<span data-ttu-id="33d0a-390">當您建立佇列時，您也可以在 [佇列設定] 索引標籤上建立共用的存取原則。每一個共用存取原則會有名稱、權限 (由您設定) 和存取金鑰。</span><span class="sxs-lookup"><span data-stu-id="33d0a-390">When you create a Queue, you can also create shared access policies on the Queue Configure tab. Each shared access policy will have a name, permissions that you set, and access keys.</span></span> |
| <span data-ttu-id="33d0a-391">佇列原則金鑰</span><span class="sxs-lookup"><span data-stu-id="33d0a-391">Queue Policy Key</span></span> |<span data-ttu-id="33d0a-392">用來驗證服務匯流排命名空間之存取權的共用存取金鑰</span><span class="sxs-lookup"><span data-stu-id="33d0a-392">The Shared Access key used to authenticate access to the Service Bus namespace</span></span> |
| <span data-ttu-id="33d0a-393">事件序列化格式</span><span class="sxs-lookup"><span data-stu-id="33d0a-393">Event Serialization Format</span></span> |<span data-ttu-id="33d0a-394">輸出資料的序列化格式。</span><span class="sxs-lookup"><span data-stu-id="33d0a-394">Serialization format for output data.</span></span>  <span data-ttu-id="33d0a-395">支援 JSON、CSV 和 Avro。</span><span class="sxs-lookup"><span data-stu-id="33d0a-395">JSON, CSV, and Avro are supported.</span></span> |
| <span data-ttu-id="33d0a-396">編碼</span><span class="sxs-lookup"><span data-stu-id="33d0a-396">Encoding</span></span> |<span data-ttu-id="33d0a-397">對於 CSV 和 JSON 而言，UTF-8 是目前唯一支援的編碼格式</span><span class="sxs-lookup"><span data-stu-id="33d0a-397">For CSV and JSON, UTF-8 is the only supported encoding format at this time</span></span> |
| <span data-ttu-id="33d0a-398">分隔符號</span><span class="sxs-lookup"><span data-stu-id="33d0a-398">Delimiter</span></span> |<span data-ttu-id="33d0a-399">僅適用於 CSV 序列化。</span><span class="sxs-lookup"><span data-stu-id="33d0a-399">Only applicable for CSV serialization.</span></span> <span data-ttu-id="33d0a-400">串流分析可支援多種以 CSV 格式序列化資料常用的分隔符號。</span><span class="sxs-lookup"><span data-stu-id="33d0a-400">Stream Analytics supports a number of common delimiters for serializing data in CSV format.</span></span> <span data-ttu-id="33d0a-401">支援的值是逗號、分號、空格、索引標籤和分隔號。</span><span class="sxs-lookup"><span data-stu-id="33d0a-401">Supported values are comma, semicolon, space, tab and vertical bar.</span></span> |
| <span data-ttu-id="33d0a-402">格式</span><span class="sxs-lookup"><span data-stu-id="33d0a-402">Format</span></span> |<span data-ttu-id="33d0a-403">僅適用於 JSON 類型。</span><span class="sxs-lookup"><span data-stu-id="33d0a-403">Only applicable for JSON type.</span></span> <span data-ttu-id="33d0a-404">分隔的行會指定輸出的格式化方式為利用新行分隔每個 JSON 物件。</span><span class="sxs-lookup"><span data-stu-id="33d0a-404">Line separated specifies that the output will be formatted by having each JSON object separated by a new line.</span></span> <span data-ttu-id="33d0a-405">陣列會指定輸出將會格式化為 JSON 物件的陣列。</span><span class="sxs-lookup"><span data-stu-id="33d0a-405">Array specifies that the output will be formatted as an array of JSON objects.</span></span> |

## <a name="service-bus-topics"></a><span data-ttu-id="33d0a-406">服務匯流排主題</span><span class="sxs-lookup"><span data-stu-id="33d0a-406">Service Bus Topics</span></span>
<span data-ttu-id="33d0a-407">「服務匯流排佇列」提供從傳送者到接收者的一對一通訊方法，而 [服務匯流排主題](https://msdn.microsoft.com/library/azure/hh367516.aspx) 則是提供一對多的通訊形式。</span><span class="sxs-lookup"><span data-stu-id="33d0a-407">While Service Bus Queues provide a one to one communication method from sender to receiver, [Service Bus Topics](https://msdn.microsoft.com/library/azure/hh367516.aspx) provide a one-to-many form of communication.</span></span>

<span data-ttu-id="33d0a-408">下表列出屬性名稱及其描述以建立資料表輸出。</span><span class="sxs-lookup"><span data-stu-id="33d0a-408">The table below lists the property names and their description for creating a table output.</span></span>

| <span data-ttu-id="33d0a-409">屬性名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-409">Property Name</span></span> | <span data-ttu-id="33d0a-410">說明</span><span class="sxs-lookup"><span data-stu-id="33d0a-410">Description</span></span> |
| --- | --- |
| <span data-ttu-id="33d0a-411">輸出別名</span><span class="sxs-lookup"><span data-stu-id="33d0a-411">Output Alias</span></span> |<span data-ttu-id="33d0a-412">此為易記名稱，用於在查詢中將查詢輸出指向這個服務匯流排主題。</span><span class="sxs-lookup"><span data-stu-id="33d0a-412">This is a friendly name used in queries to direct the query output to this Service Bus Topic.</span></span> |
| <span data-ttu-id="33d0a-413">服務匯流排 命名空間</span><span class="sxs-lookup"><span data-stu-id="33d0a-413">Service Bus Namespace</span></span> |<span data-ttu-id="33d0a-414">服務匯流排命名空間是一個容器，包含一組訊息實體。</span><span class="sxs-lookup"><span data-stu-id="33d0a-414">A Service Bus namespace is a container for a set of messaging entities.</span></span> <span data-ttu-id="33d0a-415">建立新的事件中樞時，也會建立服務匯流排命名空間</span><span class="sxs-lookup"><span data-stu-id="33d0a-415">When you created a new Event Hub, you also created a Service Bus namespace</span></span> |
| <span data-ttu-id="33d0a-416">主題名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-416">Topic Name</span></span> |<span data-ttu-id="33d0a-417">主題為訊息實體，類似於事件中樞和佇列。</span><span class="sxs-lookup"><span data-stu-id="33d0a-417">Topics are messaging entities, similar to event hubs and queues.</span></span> <span data-ttu-id="33d0a-418">它們可以收集各種裝置和服務的事件資料流。</span><span class="sxs-lookup"><span data-stu-id="33d0a-418">They're designed to collect event streams from a number of different devices and services.</span></span> <span data-ttu-id="33d0a-419">建立主題時也會給予其特定名稱。</span><span class="sxs-lookup"><span data-stu-id="33d0a-419">When a topic is created, it is also given a specific name.</span></span> <span data-ttu-id="33d0a-420">除非已建立訂用帳戶，否則傳送至主題的訊息將無法使用，所以請確保該主題內有一或多個訂用帳戶</span><span class="sxs-lookup"><span data-stu-id="33d0a-420">The messages sent to a Topic will not be available unless a subscription is created, so ensure there are one or more subscriptions under the topic</span></span> |
| <span data-ttu-id="33d0a-421">主題原則名稱</span><span class="sxs-lookup"><span data-stu-id="33d0a-421">Topic Policy Name</span></span> |<span data-ttu-id="33d0a-422">當您建立主題時，您也可以在 [主題設定] 索引標籤上建立共用的存取原則。每一個共用存取原則會有名稱、權限 (由您設定) 和存取金鑰</span><span class="sxs-lookup"><span data-stu-id="33d0a-422">When you create a Topic, you can also create shared access policies on the Topic Configure tab. Each shared access policy will have a name, permissions that you set, and access keys</span></span> |
| <span data-ttu-id="33d0a-423">主題原則金鑰</span><span class="sxs-lookup"><span data-stu-id="33d0a-423">Topic Policy Key</span></span> |<span data-ttu-id="33d0a-424">用來驗證服務匯流排命名空間之存取權的共用存取金鑰</span><span class="sxs-lookup"><span data-stu-id="33d0a-424">The Shared Access key used to authenticate access to the Service Bus namespace</span></span> |
| <span data-ttu-id="33d0a-425">事件序列化格式</span><span class="sxs-lookup"><span data-stu-id="33d0a-425">Event Serialization Format</span></span> |<span data-ttu-id="33d0a-426">輸出資料的序列化格式。</span><span class="sxs-lookup"><span data-stu-id="33d0a-426">Serialization format for output data.</span></span>  <span data-ttu-id="33d0a-427">支援 JSON、CSV 和 Avro。</span><span class="sxs-lookup"><span data-stu-id="33d0a-427">JSON, CSV, and Avro are supported.</span></span> |
| <span data-ttu-id="33d0a-428">編碼</span><span class="sxs-lookup"><span data-stu-id="33d0a-428">Encoding</span></span> |<span data-ttu-id="33d0a-429">若為 CSV 或 JSON 格式，必須指定編碼。</span><span class="sxs-lookup"><span data-stu-id="33d0a-429">If CSV or JSON format, an encoding must be specified.</span></span> <span data-ttu-id="33d0a-430">UTF-8 是目前唯一支援的編碼格式</span><span class="sxs-lookup"><span data-stu-id="33d0a-430">UTF-8 is the only supported encoding format at this time</span></span> |
| <span data-ttu-id="33d0a-431">分隔符號</span><span class="sxs-lookup"><span data-stu-id="33d0a-431">Delimiter</span></span> |<span data-ttu-id="33d0a-432">僅適用於 CSV 序列化。</span><span class="sxs-lookup"><span data-stu-id="33d0a-432">Only applicable for CSV serialization.</span></span> <span data-ttu-id="33d0a-433">串流分析可支援多種以 CSV 格式序列化資料常用的分隔符號。</span><span class="sxs-lookup"><span data-stu-id="33d0a-433">Stream Analytics supports a number of common delimiters for serializing data in CSV format.</span></span> <span data-ttu-id="33d0a-434">支援的值是逗號、分號、空格、索引標籤和分隔號。</span><span class="sxs-lookup"><span data-stu-id="33d0a-434">Supported values are comma, semicolon, space, tab and vertical bar.</span></span> |

## <a name="azure-cosmos-db"></a><span data-ttu-id="33d0a-435">Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="33d0a-435">Azure Cosmos DB</span></span>
<span data-ttu-id="33d0a-436">[Azure Cosmos DB](https://azure.microsoft.com/services/documentdb/) 是完全受管理的 NoSQL 文件資料庫服務，不僅提供透過無結構描述資料進行的查詢和交易、既可預測又可靠的效能，還能讓您進行快速的開發。</span><span class="sxs-lookup"><span data-stu-id="33d0a-436">[Azure Cosmos DB](https://azure.microsoft.com/services/documentdb/) is a fully-managed NoSQL document database service that offers query and transactions over schema-free data, predictable and reliable performance, and rapid development.</span></span>

<span data-ttu-id="33d0a-437">以下清單詳細說明用於建立 Azure Cosmos DB 輸出的屬性名稱及其描述。</span><span class="sxs-lookup"><span data-stu-id="33d0a-437">The below list details the property names and their description for creating an Azure Cosmos DB output.</span></span>

* <span data-ttu-id="33d0a-438">**輸出別名**：在您的 ASA 查詢中參照此輸出時所用的別名。</span><span class="sxs-lookup"><span data-stu-id="33d0a-438">**Output Alias** – An alias to refer this output in your ASA query</span></span>  
* <span data-ttu-id="33d0a-439">**帳戶名稱**：Cosmos DB 帳戶的名稱或端點 URI。</span><span class="sxs-lookup"><span data-stu-id="33d0a-439">**Account Name** – The name or endpoint URI of the Cosmos DB account.</span></span>  
* <span data-ttu-id="33d0a-440">**帳戶金鑰**：Cosmos DB 帳戶的共用存取金鑰。</span><span class="sxs-lookup"><span data-stu-id="33d0a-440">**Account Key** – The shared access key for the Cosmos DB account.</span></span>  
* <span data-ttu-id="33d0a-441">**資料庫**：Cosmos DB 資料庫名稱。</span><span class="sxs-lookup"><span data-stu-id="33d0a-441">**Database** – The Cosmos DB database name.</span></span>  
* <span data-ttu-id="33d0a-442">**集合名稱模式**：要使用之集合的集合名稱或其模式。</span><span class="sxs-lookup"><span data-stu-id="33d0a-442">**Collection Name Pattern** – The collection name or their pattern for the collections to be used.</span></span> <span data-ttu-id="33d0a-443">您可以使用選用的 {partition} 語彙基元來建構集合名稱的格式，其中的資料分割會從 0 開始。</span><span class="sxs-lookup"><span data-stu-id="33d0a-443">The collection name format can be constructed using the optional {partition} token, where partitions start from 0.</span></span> <span data-ttu-id="33d0a-444">以下是有效的範例輸入：</span><span class="sxs-lookup"><span data-stu-id="33d0a-444">Following are sample valid inputs:</span></span>  
  <span data-ttu-id="33d0a-445">1\) MyCollection – 必須要有一個名為 “MyCollection” 的集合存在。</span><span class="sxs-lookup"><span data-stu-id="33d0a-445">1\) MyCollection – One collection named “MyCollection” must exist.</span></span>  
  <span data-ttu-id="33d0a-446">2\) MyCollection{partition} – 這些集合必須存在 – "MyCollection0”、“MyCollection1”、“MyCollection2” 等，依此類推。</span><span class="sxs-lookup"><span data-stu-id="33d0a-446">2\) MyCollection{partition} – Such collections must exist– "MyCollection0”, “MyCollection1”, “MyCollection2” and so on.</span></span>  
* <span data-ttu-id="33d0a-447">**資料分割索引鍵** - 選擇性。</span><span class="sxs-lookup"><span data-stu-id="33d0a-447">**Partition Key** – Optional.</span></span> <span data-ttu-id="33d0a-448">只有當您在集合名稱模式中使用 {parition} 語彙基元時，才需要此索引鍵。</span><span class="sxs-lookup"><span data-stu-id="33d0a-448">This is only needed if you are using a {parition} token in your collection name pattern.</span></span> <span data-ttu-id="33d0a-449">輸出事件中的欄位名稱會用來為跨集合的資料分割輸出指定索引鍵。</span><span class="sxs-lookup"><span data-stu-id="33d0a-449">The name of the field in output events used to specify the key for partitioning output across collections.</span></span> <span data-ttu-id="33d0a-450">若為單一集合輸出，則可使用任何任意的輸出欄，例如 PartitionId。</span><span class="sxs-lookup"><span data-stu-id="33d0a-450">For single collection output, any arbitrary output column can be used e.g. PartitionId.</span></span>  
* <span data-ttu-id="33d0a-451">**文件識別碼** ：可省略。</span><span class="sxs-lookup"><span data-stu-id="33d0a-451">**Document ID** – Optional.</span></span> <span data-ttu-id="33d0a-452">輸出事件中的欄位名稱會用來指定主索引鍵，此為插入或更新作業的依據。</span><span class="sxs-lookup"><span data-stu-id="33d0a-452">The name of the field in output events used to specify the primary key on which insert or update operations are based.</span></span>  


## <a name="get-help"></a><span data-ttu-id="33d0a-453">取得說明</span><span class="sxs-lookup"><span data-stu-id="33d0a-453">Get help</span></span>
<span data-ttu-id="33d0a-454">如需進一步的協助，請參閱我們的 [Azure Stream Analytics 論壇](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics)</span><span class="sxs-lookup"><span data-stu-id="33d0a-454">For further assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics)</span></span>

## <a name="next-steps"></a><span data-ttu-id="33d0a-455">後續步驟</span><span class="sxs-lookup"><span data-stu-id="33d0a-455">Next steps</span></span>
<span data-ttu-id="33d0a-456">以上就是串流分析 (物聯網資料串流分析專用的受管理服務) 的簡介。</span><span class="sxs-lookup"><span data-stu-id="33d0a-456">You've been introduced to Stream Analytics, a managed service for streaming analytics on data from the Internet of Things.</span></span> <span data-ttu-id="33d0a-457">若要深入了解此服務，請參閱：</span><span class="sxs-lookup"><span data-stu-id="33d0a-457">To learn more about this service, see:</span></span>

* [<span data-ttu-id="33d0a-458">開始使用 Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="33d0a-458">Get started using Azure Stream Analytics</span></span>](stream-analytics-real-time-fraud-detection.md)
* [<span data-ttu-id="33d0a-459">調整 Azure Stream Analytics 工作</span><span class="sxs-lookup"><span data-stu-id="33d0a-459">Scale Azure Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="33d0a-460">Azure Stream Analytics 查詢語言參考</span><span class="sxs-lookup"><span data-stu-id="33d0a-460">Azure Stream Analytics Query Language Reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="33d0a-461">Azure 串流分析管理 REST API 參考</span><span class="sxs-lookup"><span data-stu-id="33d0a-461">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)

<!--Link references-->
[stream.analytics.developer.guide]: ../stream-analytics-developer-guide.md
[stream.analytics.scale.jobs]: stream-analytics-scale-jobs.md
[stream.analytics.introduction]: stream-analytics-introduction.md
[stream.analytics.get.started]: stream-analytics-real-time-fraud-detection.md
[stream.analytics.query.language.reference]: http://go.microsoft.com/fwlink/?LinkID=513299
[stream.analytics.rest.api.reference]: http://go.microsoft.com/fwlink/?LinkId=517301
