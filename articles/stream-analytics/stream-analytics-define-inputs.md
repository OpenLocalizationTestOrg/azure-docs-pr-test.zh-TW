---
title: "資料連線：來自事件資料流的資料流輸入 | Microsoft Docs"
description: "深入了解設定資料連接 tooStream 呼叫 '輸入' 的分析。 輸入包括來自事件的資料流，以及參考資料。"
keywords: "資料流, 資料連線, 事件資料流"
services: stream-analytics
documentationcenter: 
author: samacha
manager: jhubbard
editor: cgronlun
ms.assetid: 8155823c-9dd8-4a6b-8393-34452d299b68
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 07/05/2017
ms.author: samacha
ms.openlocfilehash: be2008f159061c5c9be9d0314c27fa67193e3269
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="data-connection-learn-about-data-stream-inputs-from-events-toostream-analytics"></a><span data-ttu-id="b835e-105">資料連接： 了解資料中的事件 tooStream 分析的資料流輸入</span><span class="sxs-lookup"><span data-stu-id="b835e-105">Data connection: Learn about data stream inputs from events tooStream Analytics</span></span>
<span data-ttu-id="b835e-106">hello 資料連接 tooa 資料流分析工作會從資料來源，也就是參考的 tooas hello 作業的事件資料流*輸入*。</span><span class="sxs-lookup"><span data-stu-id="b835e-106">hello data connection tooa Stream Analytics job is a stream of events from a data source, which is referred tooas hello job's *input*.</span></span> <span data-ttu-id="b835e-107">串流分析與 Azure 資料流來源的整合性極佳，來源包括 [Azure 事件中樞](https://azure.microsoft.com/services/event-hubs/)、[Azure IoT 中樞](https://azure.microsoft.com/services/iot-hub/)和 [Azure Blob 儲存體](https://azure.microsoft.com/services/storage/blobs/)。</span><span class="sxs-lookup"><span data-stu-id="b835e-107">Stream Analytics has first-class integration with Azure data stream sources, including [Azure Event Hubs](https://azure.microsoft.com/services/event-hubs/), [Azure IoT Hub](https://azure.microsoft.com/services/iot-hub/), and [Azure Blob storage](https://azure.microsoft.com/services/storage/blobs/).</span></span> <span data-ttu-id="b835e-108">這些輸入來源可以是從 hello 相同 Azure 訂用帳戶以分析工作，或從不同的訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="b835e-108">These input sources can be from hello same Azure subscription as your analytics job, or from a different subscription.</span></span>

## <a name="data-input-types-data-stream-and-reference-data"></a><span data-ttu-id="b835e-109">資料輸入類型：資料流和參考資料</span><span class="sxs-lookup"><span data-stu-id="b835e-109">Data input types: Data stream and reference data</span></span>
<span data-ttu-id="b835e-110">資料推入 tooa 資料來源，因為它有 hello 資料流分析工作所耗用，而且即時處理。</span><span class="sxs-lookup"><span data-stu-id="b835e-110">As data is pushed tooa data source, it's consumed by hello Stream Analytics job and processed in real time.</span></span> <span data-ttu-id="b835e-111">輸入分為兩種類型：資料流輸入和參考資料輸入。</span><span class="sxs-lookup"><span data-stu-id="b835e-111">Inputs are divided into two types: data stream inputs and reference data inputs.</span></span>

### <a name="data-stream-inputs"></a><span data-ttu-id="b835e-112">資料流輸入</span><span class="sxs-lookup"><span data-stu-id="b835e-112">Data stream inputs</span></span>
<span data-ttu-id="b835e-113">資料流是一段時間內發生的無限制事件序列。</span><span class="sxs-lookup"><span data-stu-id="b835e-113">A data stream is an unbounded sequence of events over time.</span></span> <span data-ttu-id="b835e-114">串流分析作業必須包含至少一個資料流輸入。</span><span class="sxs-lookup"><span data-stu-id="b835e-114">Stream Analytics jobs must include at least one data stream input.</span></span> <span data-ttu-id="b835e-115">支援將事件中樞、IoT 中樞和 Blob 儲存體當成資料流輸入來源。</span><span class="sxs-lookup"><span data-stu-id="b835e-115">Event Hubs, IoT Hub, and Blob storage are supported as data stream input sources.</span></span> <span data-ttu-id="b835e-116">事件中心是使用的 toocollect 事件資料流，從多個裝置和服務。</span><span class="sxs-lookup"><span data-stu-id="b835e-116">Event hubs are used toocollect event streams from multiple devices and services.</span></span> <span data-ttu-id="b835e-117">這些資料流可能包括社交媒體活動摘要、股票交易資訊或來自感應器的資料。</span><span class="sxs-lookup"><span data-stu-id="b835e-117">These streams might include social media activity feeds, stock trade information, or data from sensors.</span></span> <span data-ttu-id="b835e-118">IoT 中樞是從連接的裝置在物聯網 (IoT) 案例中的最佳化的 toocollect 資料。</span><span class="sxs-lookup"><span data-stu-id="b835e-118">IoT hubs are optimized toocollect data from connected devices in Internet of Things (IoT) scenarios.</span></span>  <span data-ttu-id="b835e-119">Blob 儲存體可作為輸入來源，將大量資料內嵌為資料流，例如記錄檔。</span><span class="sxs-lookup"><span data-stu-id="b835e-119">Blob storage can be used as an input source for ingesting bulk data as a stream, such as log files.</span></span>  

### <a name="reference-data"></a><span data-ttu-id="b835e-120">參考資料</span><span class="sxs-lookup"><span data-stu-id="b835e-120">Reference data</span></span>
<span data-ttu-id="b835e-121">串流分析也支援稱為「參考資料」的輸入。</span><span class="sxs-lookup"><span data-stu-id="b835e-121">Stream Analytics also supports input known as *reference data*.</span></span> <span data-ttu-id="b835e-122">這是靜態或緩慢變更的輔助資料。</span><span class="sxs-lookup"><span data-stu-id="b835e-122">This is auxiliary data that is either static or that changes slowly.</span></span> <span data-ttu-id="b835e-123">通常用來執行相互關聯和查閱。</span><span class="sxs-lookup"><span data-stu-id="b835e-123">It's typically used for performing correlation and lookups.</span></span> <span data-ttu-id="b835e-124">例如，您可能會聯結資料 hello 參考資料中的 hello 資料資料流輸入 toodata 就像您會執行 SQL 聯結 toolook 靜態值。</span><span class="sxs-lookup"><span data-stu-id="b835e-124">For example, you might join data in hello data stream input toodata in hello reference data, much as you would perform a SQL join toolook up static values.</span></span> <span data-ttu-id="b835e-125">Azure Blob 儲存體正在 hello 只支援輸入的參考資料來源。</span><span class="sxs-lookup"><span data-stu-id="b835e-125">Azure Blob storage is currently hello only supported input source for reference data.</span></span> <span data-ttu-id="b835e-126">參考資料來源 blob 受到 too100 MB 的大小。</span><span class="sxs-lookup"><span data-stu-id="b835e-126">Reference data source blobs are limited too100 MB in size.</span></span>

<span data-ttu-id="b835e-127">如何 toocreate 參考資料輸入，請參閱的 toolearn[使用參考資料](stream-analytics-use-reference-data.md)。</span><span class="sxs-lookup"><span data-stu-id="b835e-127">toolearn how toocreate reference data inputs, see [Use Reference Data](stream-analytics-use-reference-data.md).</span></span>  

## <a name="create-data-stream-input-from-event-hubs"></a><span data-ttu-id="b835e-128">從事件中樞建立資料流輸入</span><span class="sxs-lookup"><span data-stu-id="b835e-128">Create data stream input from Event Hubs</span></span>

<span data-ttu-id="b835e-129">Azure 事件中樞提供高延展性的發佈-訂閱事件擷取器。</span><span class="sxs-lookup"><span data-stu-id="b835e-129">Azure Event Hubs provides highly scalable publish-subscribe event ingestors.</span></span> <span data-ttu-id="b835e-130">事件中心可以收集數百萬個每秒的事件，如此您可以處理及分析 hello 連接的裝置和應用程式所產生的資料量很大。</span><span class="sxs-lookup"><span data-stu-id="b835e-130">An event hub can collect millions of events per second, so that you can process and analyze hello massive amounts of data produced by your connected devices and applications.</span></span> <span data-ttu-id="b835e-131">事件中樞搭配串流分析，一起為您提供端對端解決方案來分析即時資料 -- 事件中樞可讓您即時將事件傳送到 Azure，而 Stream Analytics 作業可以即時處理這些事件。</span><span class="sxs-lookup"><span data-stu-id="b835e-131">Event Hubs and Stream Analytics together provide you with an end-to-end solution for real-time analytics—Event Hubs let you feed events into Azure in real time, and Stream Analytics jobs can process those events in real time.</span></span> <span data-ttu-id="b835e-132">例如，您可以傳送網頁點選、 感應器讀數或線上記錄事件 tooEvent 集線器。</span><span class="sxs-lookup"><span data-stu-id="b835e-132">For example, you can send web clicks, sensor readings, or online log events tooEvent Hubs.</span></span> <span data-ttu-id="b835e-133">然後，您可以建立資料流分析工作 toouse 事件中心為 hello 即時篩選、 彙總，以及相互關聯的輸入的資料流。</span><span class="sxs-lookup"><span data-stu-id="b835e-133">You can then create Stream Analytics jobs toouse Event Hubs as hello input data streams for real-time filtering, aggregating, and correlation.</span></span>

<span data-ttu-id="b835e-134">hello 預設來自事件中心在 Stream Analytics 中的事件時間戳記是 hello hello 事件的時間戳記抵達 hello 事件中心是`EventEnqueuedUtcTime`。</span><span class="sxs-lookup"><span data-stu-id="b835e-134">hello default timestamp of events coming from Event Hubs in Stream Analytics is hello timestamp that hello event arrived in hello event hub, which is `EventEnqueuedUtcTime`.</span></span> <span data-ttu-id="b835e-135">tooprocess hello hello 事件裝載中使用時間戳記資料流的形式的資料，您必須使用 hello [TIMESTAMP BY](https://msdn.microsoft.com/library/azure/dn834998.aspx)關鍵字。</span><span class="sxs-lookup"><span data-stu-id="b835e-135">tooprocess hello data as a stream using a timestamp in hello event payload, you must use hello [TIMESTAMP BY](https://msdn.microsoft.com/library/azure/dn834998.aspx) keyword.</span></span>

### <a name="consumer-groups"></a><span data-ttu-id="b835e-136">用戶群組</span><span class="sxs-lookup"><span data-stu-id="b835e-136">Consumer groups</span></span>
<span data-ttu-id="b835e-137">您應該設定每個資料流分析事件中樞輸入的 toohave 它自己的取用者群組。</span><span class="sxs-lookup"><span data-stu-id="b835e-137">You should configure each Stream Analytics event hub input toohave its own consumer group.</span></span> <span data-ttu-id="b835e-138">當作業包含自我聯結或有多個輸入時，某些輸入可能由下游的多個讀取器所讀取。</span><span class="sxs-lookup"><span data-stu-id="b835e-138">When a job contains a self-join or when it has multiple inputs, some input might be read by more than one reader downstream.</span></span> <span data-ttu-id="b835e-139">這種情況下會影響單一取用者群組中的讀取器的 hello 數目。</span><span class="sxs-lookup"><span data-stu-id="b835e-139">This situation impacts hello number of readers in a single consumer group.</span></span> <span data-ttu-id="b835e-140">tooavoid 超過 hello 事件中心限制的每個取用者群組，每個資料分割的五個讀取器，它是最佳的作法 toodesignate 取用者群組的每個資料流分析工作。</span><span class="sxs-lookup"><span data-stu-id="b835e-140">tooavoid exceeding hello Event Hubs limit of five readers per consumer group per partition, it's a best practice toodesignate a consumer group for each Stream Analytics job.</span></span> <span data-ttu-id="b835e-141">另外也限制每一個事件中樞最多有 20 個取用者群組。</span><span class="sxs-lookup"><span data-stu-id="b835e-141">There is also a limit of 20 consumer groups per event hub.</span></span> <span data-ttu-id="b835e-142">如需詳細資訊，請參閱[事件中樞程式設計指南](../event-hubs/event-hubs-programming-guide.md)。</span><span class="sxs-lookup"><span data-stu-id="b835e-142">For more information, see [Event Hubs Programming Guide](../event-hubs/event-hubs-programming-guide.md).</span></span>

### <a name="configure-an-event-hub-as-a-data-stream-input"></a><span data-ttu-id="b835e-143">將事件中樞設定為資料流輸入</span><span class="sxs-lookup"><span data-stu-id="b835e-143">Configure an event hub as a data stream input</span></span>
<span data-ttu-id="b835e-144">hello 下列資料表說明每個屬性在 hello**新輸入**刀鋒視窗中 hello Azure 入口網站，當您設定事件中心做為輸入。</span><span class="sxs-lookup"><span data-stu-id="b835e-144">hello following table explains each property in hello **New input** blade in hello Azure portal when you configure an event hub as input.</span></span>

| <span data-ttu-id="b835e-145">屬性</span><span class="sxs-lookup"><span data-stu-id="b835e-145">Property</span></span> | <span data-ttu-id="b835e-146">說明</span><span class="sxs-lookup"><span data-stu-id="b835e-146">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b835e-147">**輸入別名**</span><span class="sxs-lookup"><span data-stu-id="b835e-147">**Input alias**</span></span> |<span data-ttu-id="b835e-148">這個輸入您在 hello 工作查詢 tooreference 中使用的易記名稱。</span><span class="sxs-lookup"><span data-stu-id="b835e-148">A friendly name that you use in hello job's query tooreference this input.</span></span> |
| <span data-ttu-id="b835e-149">**服務匯流排命名空間**</span><span class="sxs-lookup"><span data-stu-id="b835e-149">**Service bus namespace**</span></span> |<span data-ttu-id="b835e-150">Azure 服務匯流排命名空間，是一組訊息實體的容器。</span><span class="sxs-lookup"><span data-stu-id="b835e-150">An Azure Service Bus namespace, which is a container for a set of messaging entities.</span></span> <span data-ttu-id="b835e-151">建立新的事件中樞時，也會建立服務匯流排命名空間。</span><span class="sxs-lookup"><span data-stu-id="b835e-151">When you create a new event hub, you also create a Service Bus namespace.</span></span> |
| <span data-ttu-id="b835e-152">**事件中樞名稱**</span><span class="sxs-lookup"><span data-stu-id="b835e-152">**Event hub name**</span></span> |<span data-ttu-id="b835e-153">hello 的 hello 事件中樞 toouse 做為輸入的名稱。</span><span class="sxs-lookup"><span data-stu-id="b835e-153">hello name of hello event hub toouse as input.</span></span> |
| <span data-ttu-id="b835e-154">**事件中樞原則名稱**</span><span class="sxs-lookup"><span data-stu-id="b835e-154">**Event hub policy name**</span></span> |<span data-ttu-id="b835e-155">提供存取 toohello 事件中樞的 hello 共用存取原則。</span><span class="sxs-lookup"><span data-stu-id="b835e-155">hello shared access policy that provides access toohello event hub.</span></span> <span data-ttu-id="b835e-156">每一個共用存取原則都會有名稱、權限 (由您設定) 和存取金鑰。</span><span class="sxs-lookup"><span data-stu-id="b835e-156">Each shared access policy has a name, permissions that you set, and access keys.</span></span> |
| <span data-ttu-id="b835e-157">**事件中樞取用者群組** (選用)</span><span class="sxs-lookup"><span data-stu-id="b835e-157">**Event hub consumer group** (optional)</span></span> |<span data-ttu-id="b835e-158">hello 取用者群組 toouse tooingest 資料從 hello 事件中樞。</span><span class="sxs-lookup"><span data-stu-id="b835e-158">hello consumer group toouse tooingest data from hello event hub.</span></span> <span data-ttu-id="b835e-159">如果取用者未不指定任何群組，hello 資料流分析工作會使用 hello 預設取用者群組。</span><span class="sxs-lookup"><span data-stu-id="b835e-159">If no consumer group is specified, hello Stream Analytics job uses hello default consumer group.</span></span> <span data-ttu-id="b835e-160">建議讓每一個串流分析作業使用不同的取用者群組。</span><span class="sxs-lookup"><span data-stu-id="b835e-160">We recommend that you use a distinct consumer group for each Stream Analytics job.</span></span> |
| <span data-ttu-id="b835e-161">**事件序列化格式**</span><span class="sxs-lookup"><span data-stu-id="b835e-161">**Event serialization format**</span></span> |<span data-ttu-id="b835e-162">hello 序列化格式 （JSON、 CSV 或 Avro） hello 內送資料流。</span><span class="sxs-lookup"><span data-stu-id="b835e-162">hello serialization format (JSON, CSV, or Avro) of hello incoming data stream.</span></span> |
| <span data-ttu-id="b835e-163">**編碼**</span><span class="sxs-lookup"><span data-stu-id="b835e-163">**Encoding**</span></span> | <span data-ttu-id="b835e-164">Utf-8 是目前只支援 hello 編碼格式。</span><span class="sxs-lookup"><span data-stu-id="b835e-164">UTF-8 is currently hello only supported encoding format.</span></span> |

<span data-ttu-id="b835e-165">當您的資料來自於事件中樞時，您會有存取 toohello 下列中繼資料資料流分析查詢中的欄位：</span><span class="sxs-lookup"><span data-stu-id="b835e-165">When your data comes from an event hub, you have access toohello following metadata fields in your Stream Analytics query:</span></span>

| <span data-ttu-id="b835e-166">屬性</span><span class="sxs-lookup"><span data-stu-id="b835e-166">Property</span></span> | <span data-ttu-id="b835e-167">說明</span><span class="sxs-lookup"><span data-stu-id="b835e-167">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b835e-168">**EventProcessedUtcTime**</span><span class="sxs-lookup"><span data-stu-id="b835e-168">**EventProcessedUtcTime**</span></span> |<span data-ttu-id="b835e-169">hello 日期和時間 hello 事件已處理的資料流分析。</span><span class="sxs-lookup"><span data-stu-id="b835e-169">hello date and time that hello event was processed by Stream Analytics.</span></span> |
| <span data-ttu-id="b835e-170">**EventEnqueuedUtcTime**</span><span class="sxs-lookup"><span data-stu-id="b835e-170">**EventEnqueuedUtcTime**</span></span> |<span data-ttu-id="b835e-171">hello 日期和時間 hello 事件已收到事件中心。</span><span class="sxs-lookup"><span data-stu-id="b835e-171">hello date and time that hello event was received by Event Hubs.</span></span> |
| <span data-ttu-id="b835e-172">**PartitionId**</span><span class="sxs-lookup"><span data-stu-id="b835e-172">**PartitionId**</span></span> |<span data-ttu-id="b835e-173">hello hello 輸入配接器的以零為起始的資料分割識別碼。</span><span class="sxs-lookup"><span data-stu-id="b835e-173">hello zero-based partition ID for hello input adapter.</span></span> |

<span data-ttu-id="b835e-174">例如，使用這些欄位，您就可以撰寫類似下列範例中的 hello 的查詢：</span><span class="sxs-lookup"><span data-stu-id="b835e-174">For example, using these fields, you can write a query like hello following example:</span></span>

````
SELECT
    EventProcessedUtcTime,
    EventEnqueuedUtcTime,
    PartitionId
FROM Input
````

## <a name="create-data-stream-input-from-iot-hub"></a><span data-ttu-id="b835e-175">從 IoT 中樞建立資料流輸入</span><span class="sxs-lookup"><span data-stu-id="b835e-175">Create data stream input from IoT Hub</span></span>
<span data-ttu-id="b835e-176">Azure IoT 中樞是已針對 IoT 案例最佳化的高延展性發佈/訂閱事件擷取器。</span><span class="sxs-lookup"><span data-stu-id="b835e-176">Azure Iot Hub is a highly scalable publish-subscribe event ingestor optimized for IoT scenarios.</span></span>

<span data-ttu-id="b835e-177">hello 預設時間戳記的事件來自 IoT 中心在 Stream Analytics 是 hello hello 事件的時間戳記到達在 hello IoT 中樞是`EventEnqueuedUtcTime`。</span><span class="sxs-lookup"><span data-stu-id="b835e-177">hello default timestamp of events coming from an IoT hub in Stream Analytics is hello timestamp that hello event arrived in hello IoT hub, which is `EventEnqueuedUtcTime`.</span></span> <span data-ttu-id="b835e-178">tooprocess hello hello 事件裝載中使用時間戳記資料流的形式的資料，您必須使用 hello [TIMESTAMP BY](https://msdn.microsoft.com/library/azure/dn834998.aspx)關鍵字。</span><span class="sxs-lookup"><span data-stu-id="b835e-178">tooprocess hello data as a stream using a timestamp in hello event payload, you must use hello [TIMESTAMP BY](https://msdn.microsoft.com/library/azure/dn834998.aspx) keyword.</span></span>

> [!NOTE]
> <span data-ttu-id="b835e-179">傳送的訊息必須附上 `DeviceClient` 屬性才能處理。</span><span class="sxs-lookup"><span data-stu-id="b835e-179">Only messages sent with a `DeviceClient` property can be processed.</span></span>
> 
> 

### <a name="consumer-groups"></a><span data-ttu-id="b835e-180">用戶群組</span><span class="sxs-lookup"><span data-stu-id="b835e-180">Consumer groups</span></span>
<span data-ttu-id="b835e-181">您應該設定每個資料流分析 IoT 中樞輸入的 toohave 它自己的取用者群組。</span><span class="sxs-lookup"><span data-stu-id="b835e-181">You should configure each Stream Analytics IoT hub input toohave its own consumer group.</span></span> <span data-ttu-id="b835e-182">當作業包含自我聯結或有多個輸入時，某些輸入可能由下游的多個讀取器所讀取。</span><span class="sxs-lookup"><span data-stu-id="b835e-182">When a job contains a self-join or when it has multiple inputs, some input might be read by more than one reader downstream.</span></span> <span data-ttu-id="b835e-183">這種情況下會影響單一取用者群組中的讀取器的 hello 數目。</span><span class="sxs-lookup"><span data-stu-id="b835e-183">This situation impacts hello number of readers in a single consumer group.</span></span> <span data-ttu-id="b835e-184">tooavoid 超過 hello Azure IoT 中樞限制的每個取用者群組，每個資料分割的五個讀取器，它是最佳的作法 toodesignate 取用者群組的每個資料流分析工作。</span><span class="sxs-lookup"><span data-stu-id="b835e-184">tooavoid exceeding hello Azure IoT Hub limit of five readers per consumer group per partition, it's a best practice toodesignate a consumer group for each Stream Analytics job.</span></span>

### <a name="configure-an-iot-hub-as-a-data-stream-input"></a><span data-ttu-id="b835e-185">將 IoT 中樞設定為資料流輸入</span><span class="sxs-lookup"><span data-stu-id="b835e-185">Configure an IoT hub as a data stream input</span></span>
<span data-ttu-id="b835e-186">hello 下列資料表說明每個屬性在 hello**新輸入**hello IoT 中樞設定做為輸入時，Azure 入口網站中的刀鋒視窗。</span><span class="sxs-lookup"><span data-stu-id="b835e-186">hello following table explains each property in hello **New input** blade in hello Azure portal when you configure an IoT hub as input.</span></span>

| <span data-ttu-id="b835e-187">屬性</span><span class="sxs-lookup"><span data-stu-id="b835e-187">Property</span></span> | <span data-ttu-id="b835e-188">說明</span><span class="sxs-lookup"><span data-stu-id="b835e-188">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b835e-189">**輸入別名**</span><span class="sxs-lookup"><span data-stu-id="b835e-189">**Input alias**</span></span> |<span data-ttu-id="b835e-190">這個輸入您在 hello 工作查詢 tooreference 中使用的易記名稱。</span><span class="sxs-lookup"><span data-stu-id="b835e-190">A friendly name that you use in hello job's query tooreference this input.</span></span>|
| <span data-ttu-id="b835e-191">**IoT 中樞**</span><span class="sxs-lookup"><span data-stu-id="b835e-191">**IoT hub**</span></span> |<span data-ttu-id="b835e-192">hello 的 hello IoT 中樞 toouse 做為輸入的名稱。</span><span class="sxs-lookup"><span data-stu-id="b835e-192">hello name of hello IoT hub toouse as input.</span></span> |
| <span data-ttu-id="b835e-193">**端點**</span><span class="sxs-lookup"><span data-stu-id="b835e-193">**Endpoint**</span></span> |<span data-ttu-id="b835e-194">hello hello IoT 中樞端點。</span><span class="sxs-lookup"><span data-stu-id="b835e-194">hello endpoint for hello IoT hub.</span></span>|
| <span data-ttu-id="b835e-195">**共用存取原則名稱**</span><span class="sxs-lookup"><span data-stu-id="b835e-195">**Shared access policy name**</span></span> |<span data-ttu-id="b835e-196">提供存取 toohello IoT 中樞的 hello 共用存取原則。</span><span class="sxs-lookup"><span data-stu-id="b835e-196">hello shared access policy that provides access toohello IoT hub.</span></span> <span data-ttu-id="b835e-197">每一個共用存取原則都會有名稱、權限 (由您設定) 和存取金鑰。</span><span class="sxs-lookup"><span data-stu-id="b835e-197">Each shared access policy has a name, permissions that you set, and access keys.</span></span> |
| <span data-ttu-id="b835e-198">**共用存取原則金鑰**</span><span class="sxs-lookup"><span data-stu-id="b835e-198">**Shared access policy key**</span></span> |<span data-ttu-id="b835e-199">使用 tooauthorize 存取 toohello IoT 中樞的 hello 共用的存取金鑰。</span><span class="sxs-lookup"><span data-stu-id="b835e-199">hello shared access key used tooauthorize access toohello IoT hub.</span></span> |
| <span data-ttu-id="b835e-200">**取用者群組** (選用)</span><span class="sxs-lookup"><span data-stu-id="b835e-200">**Consumer group** (optional)</span></span> |<span data-ttu-id="b835e-201">hello 取用者群組 toouse tooingest 資料 hello IoT 中樞。</span><span class="sxs-lookup"><span data-stu-id="b835e-201">hello consumer group toouse tooingest data from hello IoT hub.</span></span> <span data-ttu-id="b835e-202">如果取用者未不指定任何群組，資料流分析工作會使用 hello 預設取用者群組。</span><span class="sxs-lookup"><span data-stu-id="b835e-202">If no consumer group is specified, a Stream Analytics job uses hello default consumer group.</span></span> <span data-ttu-id="b835e-203">建議讓每一個串流分析作業使用不同的取用者群組。</span><span class="sxs-lookup"><span data-stu-id="b835e-203">We recommend that you use a different consumer group for each Stream Analytics job.</span></span> |
| <span data-ttu-id="b835e-204">**事件序列化格式**</span><span class="sxs-lookup"><span data-stu-id="b835e-204">**Event serialization format**</span></span> |<span data-ttu-id="b835e-205">hello 序列化格式 （JSON、 CSV 或 Avro） hello 內送資料流。</span><span class="sxs-lookup"><span data-stu-id="b835e-205">hello serialization format (JSON, CSV, or Avro) of hello incoming data stream.</span></span> |
| <span data-ttu-id="b835e-206">**編碼**</span><span class="sxs-lookup"><span data-stu-id="b835e-206">**Encoding**</span></span> |<span data-ttu-id="b835e-207">Utf-8 是目前只支援 hello 編碼格式。</span><span class="sxs-lookup"><span data-stu-id="b835e-207">UTF-8 is currently hello only supported encoding format.</span></span> |

<span data-ttu-id="b835e-208">當您的資料來自 IoT 中樞時，您會有存取 toohello 下列中繼資料資料流分析查詢中的欄位：</span><span class="sxs-lookup"><span data-stu-id="b835e-208">When your data comes from an IoT hub, you have access toohello following metadata fields in your Stream Analytics query:</span></span>

| <span data-ttu-id="b835e-209">屬性</span><span class="sxs-lookup"><span data-stu-id="b835e-209">Property</span></span> | <span data-ttu-id="b835e-210">說明</span><span class="sxs-lookup"><span data-stu-id="b835e-210">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b835e-211">**EventProcessedUtcTime**</span><span class="sxs-lookup"><span data-stu-id="b835e-211">**EventProcessedUtcTime**</span></span> |<span data-ttu-id="b835e-212">hello 事件處理的 hello 日期和時間。</span><span class="sxs-lookup"><span data-stu-id="b835e-212">hello date and time that hello event was processed.</span></span> |
| <span data-ttu-id="b835e-213">**EventEnqueuedUtcTime**</span><span class="sxs-lookup"><span data-stu-id="b835e-213">**EventEnqueuedUtcTime**</span></span> |<span data-ttu-id="b835e-214">hello 日期和時間 hello 事件已收到 hello IoT 中樞。</span><span class="sxs-lookup"><span data-stu-id="b835e-214">hello date and time that hello event was received by hello IoT hub.</span></span> |
| <span data-ttu-id="b835e-215">**PartitionId**</span><span class="sxs-lookup"><span data-stu-id="b835e-215">**PartitionId**</span></span> |<span data-ttu-id="b835e-216">hello hello 輸入配接器的以零為起始的資料分割識別碼。</span><span class="sxs-lookup"><span data-stu-id="b835e-216">hello zero-based partition ID for hello input adapter.</span></span> |
| <span data-ttu-id="b835e-217">**IoTHub.MessageId**</span><span class="sxs-lookup"><span data-stu-id="b835e-217">**IoTHub.MessageId**</span></span> | <span data-ttu-id="b835e-218">識別碼中使用過 toocorrelate 雙向通訊 IoT 中樞。</span><span class="sxs-lookup"><span data-stu-id="b835e-218">An ID that's used toocorrelate two-way communication in IoT hub.</span></span> |
| <span data-ttu-id="b835e-219">**IoTHub.CorrelationId**</span><span class="sxs-lookup"><span data-stu-id="b835e-219">**IoTHub.CorrelationId**</span></span> |<span data-ttu-id="b835e-220">IoT 中樞內用於訊息回應和回饋的識別碼。</span><span class="sxs-lookup"><span data-stu-id="b835e-220">An ID that's used in message responses and feedback in IoT hub.</span></span> |
| <span data-ttu-id="b835e-221">**IoTHub.ConnectionDeviceId**</span><span class="sxs-lookup"><span data-stu-id="b835e-221">**IoTHub.ConnectionDeviceId**</span></span> |<span data-ttu-id="b835e-222">hello 驗證識別碼使用 toosend 這則訊息。</span><span class="sxs-lookup"><span data-stu-id="b835e-222">hello authentication ID used toosend this message.</span></span> <span data-ttu-id="b835e-223">這個值是由 hello IoT 中樞，加上戳記 servicebound 訊息上。</span><span class="sxs-lookup"><span data-stu-id="b835e-223">This value is stamped on servicebound messages by hello IoT hub.</span></span> |
| <span data-ttu-id="b835e-224">**IoTHub.ConnectionDeviceGenerationId**</span><span class="sxs-lookup"><span data-stu-id="b835e-224">**IoTHub.ConnectionDeviceGenerationId**</span></span> |<span data-ttu-id="b835e-225">hello 產生識別碼 hello 進行驗證裝置所使用的 toosend 這則訊息。</span><span class="sxs-lookup"><span data-stu-id="b835e-225">hello generation ID of hello authenticated device that was used toosend this message.</span></span> <span data-ttu-id="b835e-226">這個值是由 hello IoT 中樞，加上戳記 servicebound 訊息上。</span><span class="sxs-lookup"><span data-stu-id="b835e-226">This value is stamped on servicebound messages by hello IoT hub.</span></span> |
| <span data-ttu-id="b835e-227">**IoTHub.EnqueuedTime**</span><span class="sxs-lookup"><span data-stu-id="b835e-227">**IoTHub.EnqueuedTime**</span></span> |<span data-ttu-id="b835e-228">收到 hello 訊息 hello IoT 中樞的 hello 時間。</span><span class="sxs-lookup"><span data-stu-id="b835e-228">hello time when hello message was received by hello IoT hub.</span></span> |
| <span data-ttu-id="b835e-229">**IoTHub.StreamId**</span><span class="sxs-lookup"><span data-stu-id="b835e-229">**IoTHub.StreamId**</span></span> |<span data-ttu-id="b835e-230">自訂事件屬性，新增的 hello 寄件者裝置。</span><span class="sxs-lookup"><span data-stu-id="b835e-230">A custom event property added by hello sender device.</span></span> |


## <a name="create-data-stream-input-from-blob-storage"></a><span data-ttu-id="b835e-231">從 Blob 儲存體建立資料流輸入</span><span class="sxs-lookup"><span data-stu-id="b835e-231">Create data stream input from Blob storage</span></span>
<span data-ttu-id="b835e-232">含有大量非結構化的資料 toostore hello 雲端中的情況下，Azure Blob 儲存體提供符合成本效益且可擴充的方案。</span><span class="sxs-lookup"><span data-stu-id="b835e-232">For scenarios with large quantities of unstructured data toostore in hello cloud, Azure Blob storage offers a cost-effective and scalable solution.</span></span> <span data-ttu-id="b835e-233">Blob 儲存體中的資料通常被視為待用資料。</span><span class="sxs-lookup"><span data-stu-id="b835e-233">Data in Blob storage is usually considered data at rest.</span></span> <span data-ttu-id="b835e-234">但可以由串流分析當作資料流來處理。</span><span class="sxs-lookup"><span data-stu-id="b835e-234">However, it can be processed as a data stream by Stream Analytics.</span></span> <span data-ttu-id="b835e-235">記錄處理是透過串流分析來處理 Blob 儲存體輸入的常見情節。</span><span class="sxs-lookup"><span data-stu-id="b835e-235">A typical scenario for Blob storage inputs with Stream Analytics is log processing.</span></span> <span data-ttu-id="b835e-236">在此案例中，已從系統擷取遙測資料，需要 toobe 剖析和處理 tooextract 有意義的資料。</span><span class="sxs-lookup"><span data-stu-id="b835e-236">In this scenario, telemetry data has been captured from a system and needs toobe parsed and processed tooextract meaningful data.</span></span>

<span data-ttu-id="b835e-237">hello 預設 Blob 存放區中的事件資料流分析的時間戳記是上次修改 hello blob 的 hello 時間戳記，也就是`BlobLastModifiedUtcTime`。</span><span class="sxs-lookup"><span data-stu-id="b835e-237">hello default timestamp of Blob storage events in Stream Analytics is hello timestamp that hello blob was last modified, which is `BlobLastModifiedUtcTime`.</span></span> <span data-ttu-id="b835e-238">tooprocess hello hello 事件裝載中使用時間戳記資料流的形式的資料，您必須使用 hello [TIMESTAMP BY](https://msdn.microsoft.com/library/azure/dn834998.aspx)關鍵字。</span><span class="sxs-lookup"><span data-stu-id="b835e-238">tooprocess hello data as a stream using a timestamp in hello event payload, you must use hello [TIMESTAMP BY](https://msdn.microsoft.com/library/azure/dn834998.aspx) keyword.</span></span>

<span data-ttu-id="b835e-239">CSV 格式輸入*需要*標頭資料列 toodefine hello 資料集欄位。</span><span class="sxs-lookup"><span data-stu-id="b835e-239">CSV-formatted inputs *require* a header row toodefine fields for hello data set.</span></span> <span data-ttu-id="b835e-240">此外，所有標題列欄位都必須是唯一的。</span><span class="sxs-lookup"><span data-stu-id="b835e-240">In addition, all header row fields must be unique.</span></span>

> [!NOTE]
> <span data-ttu-id="b835e-241">Stream Analytics 不支援加入內容 tooan 現有的 blob。</span><span class="sxs-lookup"><span data-stu-id="b835e-241">Stream Analytics does not support adding content tooan existing blob.</span></span> <span data-ttu-id="b835e-242">Stream Analytics 檢視 blob 的一次，並不會處理 hello 作業具有讀取 hello 資料之後進行 hello blob 中的任何變更。</span><span class="sxs-lookup"><span data-stu-id="b835e-242">Stream Analytics will view a blob only once, and any changes that occur in hello blob after hello job has read hello data are not processed.</span></span> <span data-ttu-id="b835e-243">最佳作法是為 tooupload hello 的所有資料一次，而不加入事件 toothat blob 存放區。</span><span class="sxs-lookup"><span data-stu-id="b835e-243">A best practice is tooupload all hello data once and then not add events toothat blob store.</span></span>
> 

### <a name="configure-blob-storage-as-a-data-stream-input"></a><span data-ttu-id="b835e-244">將 Blob 儲存體設定為資料流輸入</span><span class="sxs-lookup"><span data-stu-id="b835e-244">Configure Blob storage as a data stream input</span></span>

<span data-ttu-id="b835e-245">hello 下列資料表說明每個屬性在 hello**新輸入**hello Azure 入口網站，當您設定做為輸入的 Blob 儲存體中的刀鋒視窗。</span><span class="sxs-lookup"><span data-stu-id="b835e-245">hello following table explains each property in hello **New input** blade in hello Azure portal when you configure Blob storage as input.</span></span>

| <span data-ttu-id="b835e-246">屬性</span><span class="sxs-lookup"><span data-stu-id="b835e-246">Property</span></span> | <span data-ttu-id="b835e-247">說明</span><span class="sxs-lookup"><span data-stu-id="b835e-247">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b835e-248">**輸入別名**</span><span class="sxs-lookup"><span data-stu-id="b835e-248">**Input alias**</span></span> | <span data-ttu-id="b835e-249">這個輸入您在 hello 工作查詢 tooreference 中使用的易記名稱。</span><span class="sxs-lookup"><span data-stu-id="b835e-249">A friendly name that you use in hello job's query tooreference this input.</span></span> |
| <span data-ttu-id="b835e-250">**儲存體帳戶**</span><span class="sxs-lookup"><span data-stu-id="b835e-250">**Storage account**</span></span> | <span data-ttu-id="b835e-251">hello hello hello blob 檔案的所在位置的儲存體帳戶名稱。</span><span class="sxs-lookup"><span data-stu-id="b835e-251">hello name of hello storage account where hello blob files are located.</span></span> |
| <span data-ttu-id="b835e-252">**儲存體帳戶金鑰**</span><span class="sxs-lookup"><span data-stu-id="b835e-252">**Storage account key**</span></span> | <span data-ttu-id="b835e-253">hello 秘密金鑰與 hello 儲存體帳戶相關聯。</span><span class="sxs-lookup"><span data-stu-id="b835e-253">hello secret key associated with hello storage account.</span></span> |
| <span data-ttu-id="b835e-254">**容器**</span><span class="sxs-lookup"><span data-stu-id="b835e-254">**Container**</span></span> | <span data-ttu-id="b835e-255">hello blob 輸入 hello 容器。</span><span class="sxs-lookup"><span data-stu-id="b835e-255">hello container for hello blob input.</span></span> <span data-ttu-id="b835e-256">容器提供 blob 儲存在 hello Microsoft Azure Blob 服務中的邏輯分組。</span><span class="sxs-lookup"><span data-stu-id="b835e-256">Containers provide a logical grouping for blobs stored in hello Microsoft Azure Blob service.</span></span> <span data-ttu-id="b835e-257">當您上傳 blob toohello Azure Blob 儲存體服務時，您必須指定該 blob 的容器。</span><span class="sxs-lookup"><span data-stu-id="b835e-257">When you upload a blob toohello Azure Blob storage service, you must specify a container for that blob.</span></span> |
| <span data-ttu-id="b835e-258">**路徑模式** (選用)</span><span class="sxs-lookup"><span data-stu-id="b835e-258">**Path pattern** (optional)</span></span> | <span data-ttu-id="b835e-259">toolocate hello blob hello 指定容器內使用 hello 檔案路徑。</span><span class="sxs-lookup"><span data-stu-id="b835e-259">hello file path used toolocate hello blobs within hello specified container.</span></span> <span data-ttu-id="b835e-260">Hello 路徑內，您可以指定一或多個執行個體的下列三個變數的 hello: `{date}`， `{time}`，或`{partition}`</span><span class="sxs-lookup"><span data-stu-id="b835e-260">Within hello path, you can specify one or more instances of hello following three variables: `{date}`, `{time}`, or `{partition}`</span></span><br/><br/><span data-ttu-id="b835e-261">範例 1：`cluster1/logs/{date}/{time}/{partition}`</span><span class="sxs-lookup"><span data-stu-id="b835e-261">Example 1: `cluster1/logs/{date}/{time}/{partition}`</span></span><br/><br/><span data-ttu-id="b835e-262">範例 2：`cluster1/logs/{date}`</span><span class="sxs-lookup"><span data-stu-id="b835e-262">Example 2: `cluster1/logs/{date}`</span></span><br/><br/><span data-ttu-id="b835e-263">hello`*`字元不是允許的值為 hello 路徑前置詞。</span><span class="sxs-lookup"><span data-stu-id="b835e-263">hello `*` character is not an allowed value for hello path prefix.</span></span> <span data-ttu-id="b835e-264">僅允許有效的 <a HREF="https://msdn.microsoft.com/library/azure/dd135715.aspx">Azure blob 字元</a>。</span><span class="sxs-lookup"><span data-stu-id="b835e-264">Only valid <a HREF="https://msdn.microsoft.com/library/azure/dd135715.aspx">Azure blob characters</a> are allowed.</span></span> |
| <span data-ttu-id="b835e-265">**日期格式** (選用)</span><span class="sxs-lookup"><span data-stu-id="b835e-265">**Date format** (optional)</span></span> | <span data-ttu-id="b835e-266">如果您使用 hello 路徑中的 hello 日期變數，hello 檔會組織中的 hello 的日期格式。</span><span class="sxs-lookup"><span data-stu-id="b835e-266">If you use hello date variable in hello path, hello date format in which hello files are organized.</span></span> <span data-ttu-id="b835e-267">範例： `YYYY/MM/DD`</span><span class="sxs-lookup"><span data-stu-id="b835e-267">Example: `YYYY/MM/DD`</span></span> |
| <span data-ttu-id="b835e-268">**時間格式** (選用)</span><span class="sxs-lookup"><span data-stu-id="b835e-268">**Time format** (optional)</span></span> |  <span data-ttu-id="b835e-269">如果您使用 hello 時間變數 hello 路徑中，hello 檔會組織中的 hello 的時間格式。</span><span class="sxs-lookup"><span data-stu-id="b835e-269">If you use hello time variable in hello path, hello time format in which hello files are organized.</span></span> <span data-ttu-id="b835e-270">目前僅支援 hello 的值是`HH`。</span><span class="sxs-lookup"><span data-stu-id="b835e-270">Currently hello only supported value is `HH`.</span></span> |
| <span data-ttu-id="b835e-271">**事件序列化格式**</span><span class="sxs-lookup"><span data-stu-id="b835e-271">**Event serialization format**</span></span> | <span data-ttu-id="b835e-272">hello 序列化格式 （JSON、 CSV 或 Avro） 為傳入的資料流。</span><span class="sxs-lookup"><span data-stu-id="b835e-272">hello serialization format (JSON, CSV, or Avro) for incoming data streams.</span></span> |
| <span data-ttu-id="b835e-273">**編碼**</span><span class="sxs-lookup"><span data-stu-id="b835e-273">**Encoding**</span></span> | <span data-ttu-id="b835e-274">如需 CSV 和 JSON，utf-8 目前是 hello 才支援編碼格式。</span><span class="sxs-lookup"><span data-stu-id="b835e-274">For CSV and JSON, UTF-8 is currently hello only supported encoding format.</span></span> |

<span data-ttu-id="b835e-275">當您的資料來自 Blob 儲存體來源時，您會有存取 toohello 下列中繼資料資料流分析查詢中的欄位：</span><span class="sxs-lookup"><span data-stu-id="b835e-275">When your data comes from a Blob storage source, you have access toohello following metadata fields in your Stream Analytics query:</span></span>

| <span data-ttu-id="b835e-276">屬性</span><span class="sxs-lookup"><span data-stu-id="b835e-276">Property</span></span> | <span data-ttu-id="b835e-277">說明</span><span class="sxs-lookup"><span data-stu-id="b835e-277">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b835e-278">**BlobName**</span><span class="sxs-lookup"><span data-stu-id="b835e-278">**BlobName**</span></span> |<span data-ttu-id="b835e-279">來自 hello hello hello 事件的輸入 blob 名稱。</span><span class="sxs-lookup"><span data-stu-id="b835e-279">hello name of hello input blob that hello event came from.</span></span> |
| <span data-ttu-id="b835e-280">**EventProcessedUtcTime**</span><span class="sxs-lookup"><span data-stu-id="b835e-280">**EventProcessedUtcTime**</span></span> |<span data-ttu-id="b835e-281">hello 日期和時間 hello 事件已處理的資料流分析。</span><span class="sxs-lookup"><span data-stu-id="b835e-281">hello date and time that hello event was processed by Stream Analytics.</span></span> |
| <span data-ttu-id="b835e-282">**BlobLastModifiedUtcTime**</span><span class="sxs-lookup"><span data-stu-id="b835e-282">**BlobLastModifiedUtcTime**</span></span> |<span data-ttu-id="b835e-283">上次修改該 hello blob hello 日期和時間。</span><span class="sxs-lookup"><span data-stu-id="b835e-283">hello date and time that hello blob was last modified.</span></span> |
| <span data-ttu-id="b835e-284">**PartitionId**</span><span class="sxs-lookup"><span data-stu-id="b835e-284">**PartitionId**</span></span> |<span data-ttu-id="b835e-285">hello hello 輸入配接器的以零為起始的資料分割識別碼。</span><span class="sxs-lookup"><span data-stu-id="b835e-285">hello zero-based partition ID for hello input adapter.</span></span> |

<span data-ttu-id="b835e-286">例如，使用這些欄位，您就可以撰寫類似下列範例中的 hello 的查詢：</span><span class="sxs-lookup"><span data-stu-id="b835e-286">For example, using these fields, you can write a query like hello following example:</span></span>

````
SELECT
    BlobName,
    EventProcessedUtcTime,
    BlobLastModifiedUtcTime
FROM Input
````

## <a name="get-help"></a><span data-ttu-id="b835e-287">取得說明</span><span class="sxs-lookup"><span data-stu-id="b835e-287">Get help</span></span>
<span data-ttu-id="b835e-288">如需進一步的協助，請參閱我們的 [Azure Stream Analytics 論壇](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics)。</span><span class="sxs-lookup"><span data-stu-id="b835e-288">For further assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="b835e-289">後續步驟</span><span class="sxs-lookup"><span data-stu-id="b835e-289">Next steps</span></span>
<span data-ttu-id="b835e-290">您已經了解自己串流分析工作的資料連線選項。</span><span class="sxs-lookup"><span data-stu-id="b835e-290">You've learned about data connection options in Azure for your Stream Analytics jobs.</span></span> <span data-ttu-id="b835e-291">toolearn 有關資料流分析的詳細資訊，請參閱：</span><span class="sxs-lookup"><span data-stu-id="b835e-291">toolearn more about Stream Analytics, see:</span></span>

* [<span data-ttu-id="b835e-292">開始使用 Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="b835e-292">Get started using Azure Stream Analytics</span></span>](stream-analytics-real-time-fraud-detection.md)
* [<span data-ttu-id="b835e-293">調整 Azure Stream Analytics 工作</span><span class="sxs-lookup"><span data-stu-id="b835e-293">Scale Azure Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="b835e-294">Azure Stream Analytics 查詢語言參考</span><span class="sxs-lookup"><span data-stu-id="b835e-294">Azure Stream Analytics Query Language Reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="b835e-295">Azure 串流分析管理 REST API 參考</span><span class="sxs-lookup"><span data-stu-id="b835e-295">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)

<!--Link references-->
[stream.analytics.developer.guide]: ../stream-analytics-developer-guide.md
[stream.analytics.scale.jobs]: stream-analytics-scale-jobs.md
[stream.analytics.introduction]: stream-analytics-introduction.md
[stream.analytics.get.started]: stream-analytics-real-time-fraud-detection.md
[stream.analytics.query.language.reference]: http://go.microsoft.com/fwlink/?LinkID=513299
[stream.analytics.rest.api.reference]: http://go.microsoft.com/fwlink/?LinkId=517301
