---
title: "從已完成的作業和工作將結果或記錄保存至資料存放區 - Azure Batch | Microsoft Docs"
description: "深入了解從 Batch 工作和作業保存輸出資料的不同選項。 您可以將資料保存到 Azure 儲存體，或是另一個資料存放區。"
services: batch
author: tamram
manager: timlt
editor: 
ms.assetid: 16e12d0e-958c-46c2-a6b8-7843835d830e
ms.service: batch
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: big-compute
ms.date: 06/16/2017
ms.author: tamram
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 3ca93e823f02b1483ed290cf89de191937d1e2c3
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/11/2017
---
# <a name="persist-job-and-task-output"></a><span data-ttu-id="2fe4e-104">持續作業及工作輸出</span><span class="sxs-lookup"><span data-stu-id="2fe4e-104">Persist job and task output</span></span>

[!INCLUDE [batch-task-output-include](../../includes/batch-task-output-include.md)]

<span data-ttu-id="2fe4e-105">工作輸出的一些常見範例包括：</span><span class="sxs-lookup"><span data-stu-id="2fe4e-105">Some common examples of task output include:</span></span>

- <span data-ttu-id="2fe4e-106">工作處理輸入資料時，會建立檔案。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-106">Files created when the task processes input data.</span></span>
- <span data-ttu-id="2fe4e-107">與工作執行相關聯的記錄檔。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-107">Log files associated with task execution.</span></span> 

<span data-ttu-id="2fe4e-108">本文說明保存工作輸出的各種選項，以及每個選項最合適的情節。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-108">This article describes various options for persisting task output and the scenarios for which each option is most appropriate.</span></span>   

## <a name="about-the-batch-file-conventions-standard"></a><span data-ttu-id="2fe4e-109">關於 Batch 檔案慣例標準</span><span class="sxs-lookup"><span data-stu-id="2fe4e-109">About the Batch File Conventions standard</span></span>

<span data-ttu-id="2fe4e-110">Batch 會定義一組選擇性的慣例，可在 Azure 儲存體中命名工作輸出檔案。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-110">Batch defines an optional set of conventions for naming task output files in Azure Storage.</span></span> <span data-ttu-id="2fe4e-111">[Batch 檔案慣例標準](https://github.com/Azure/azure-sdk-for-net/tree/vs17Dev/src/SDKs/Batch/Support/FileConventions#conventions) 描述這些慣例。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-111">The [Batch File Conventions standard](https://github.com/Azure/azure-sdk-for-net/tree/vs17Dev/src/SDKs/Batch/Support/FileConventions#conventions) describes these conventions.</span></span> <span data-ttu-id="2fe4e-112">檔案慣例標準會以作業和工作名稱作為基礎，針對給定之輸出檔案，決定 Azure 儲存體中的目的地容器和 blob 路徑的名稱。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-112">The File Conventions standard determines the names of the destination container and blob path in Azure Storage for a given output file based on the names of the job and task.</span></span>

<span data-ttu-id="2fe4e-113">您可決定是否要使用檔案慣例標準來命名輸出資料檔案。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-113">It's up to you whether you decide to use the File Conventions standard for naming your output data files.</span></span> <span data-ttu-id="2fe4e-114">您也可以任何方式命名目的地容器和 blob。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-114">You can also name the destination container and blob however you wish.</span></span> <span data-ttu-id="2fe4e-115">如果您要針對命名輸出檔案使用檔案慣例標準，您的輸出檔案就可在 [Azure 入口網站][portal]中檢視。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-115">If you do use the File Conventions standard for naming output files, then your output files are available for viewing in the [Azure portal][portal].</span></span>

<span data-ttu-id="2fe4e-116">您可以使用幾個不同的方式來使用檔案慣例標準：</span><span class="sxs-lookup"><span data-stu-id="2fe4e-116">There are a few different ways that you can use the File Conventions standard:</span></span>

- <span data-ttu-id="2fe4e-117">如果您要使用 Batch 服務 API 來保存輸出檔案，可以選擇根據檔案慣例標準來命名目的地容器和 blob。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-117">If you are using the Batch service API to persist output files, you can choose to name destination containers and blobs according to the File Conventions standard.</span></span> <span data-ttu-id="2fe4e-118">Batch 服務 API 可讓您保存用戶端程式碼中的輸出檔案，而不需修改工作應用程式。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-118">The Batch service API enables you to persist output files from client code, without modifying your task application.</span></span>
- <span data-ttu-id="2fe4e-119">如果您要使用 .NET 進行開發，可以使用[適用於 .NET 的 Batch 檔案慣例程式庫][nuget_package]。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-119">If you are developing with .NET, you can use the [Azure Batch File Conventions library for .NET][nuget_package].</span></span> <span data-ttu-id="2fe4e-120">使用此程式庫的優點，是它可支援查詢您的輸出檔案 (根據其識別碼或用途)。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-120">An advantage of using this library is that it supports querying your output files according to their ID or purpose.</span></span> <span data-ttu-id="2fe4e-121">內建查詢功能可讓您從用戶端應用程式或從其他工作輕鬆存取輸出檔案。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-121">The built-in querying functionality makes it easy to access output files from a client application or from other tasks.</span></span> <span data-ttu-id="2fe4e-122">不過，必須修改您的工作應用程式，才能呼叫檔案慣例程式庫。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-122">However, your task application must be modified to call File Conventions library.</span></span> <span data-ttu-id="2fe4e-123">如需詳細資訊，請參閱[適用於 .NET 的檔案慣例程式庫](https://msdn.microsoft.com/library/microsoft.azure.batch.conventions.files.aspx)的參考。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-123">For more information, see the reference for the [File Conventions library for .NET](https://msdn.microsoft.com/library/microsoft.azure.batch.conventions.files.aspx).</span></span>
- <span data-ttu-id="2fe4e-124">如果您要使用 .NET 以外的語言進行開發，可以在您的應用程式中實作檔案慣例標準。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-124">If you are developing with a language other than .NET, you can implement the File Conventions standard in your application.</span></span>

## <a name="design-considerations-for-persisting-output"></a><span data-ttu-id="2fe4e-125">保存輸出的設計考量</span><span class="sxs-lookup"><span data-stu-id="2fe4e-125">Design considerations for persisting output</span></span> 

<span data-ttu-id="2fe4e-126">設計 Batch 方案的時候，請考慮與作業和工作輸出相關的下列因素。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-126">When designing your Batch solution, consider the following factors related to job and task outputs.</span></span>

* <span data-ttu-id="2fe4e-127">**計算節點存留期**：計算節點通常是過渡性的，尤其是在啟用自動調整的集區中。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-127">**Compute node lifetime**: Compute nodes are often transient, especially in autoscale-enabled pools.</span></span> <span data-ttu-id="2fe4e-128">只有當節點存在時，才能取得在該節點上執行的工作輸出，且僅能在您針對該工作所設定的保留期內才能取得。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-128">Output from a task that runs on a node is available only while the node exists, and only within the file retention period you've set for the task.</span></span> <span data-ttu-id="2fe4e-129">如果工作所產生的輸出是在工作完成之後可能需要的，工作就必須將其輸出檔案上傳至持久的存放區，例如 Azure 儲存體。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-129">If a task produces output that may be needed after the task is complete, then the task must upload its output files to a durable store such as Azure Storage.</span></span>

* <span data-ttu-id="2fe4e-130">**輸出儲存體**：建議使用 Azure 儲存體作為工作輸出的資料存放區，但是您可以使用任何持久的儲存體。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-130">**Output storage**: Azure Storage is recommended as a data store for task output, but you can use any durable storage.</span></span> <span data-ttu-id="2fe4e-131">Azure 儲存體的寫入工作輸出已整合到 Batch 服務 API。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-131">Writing task output to Azure Storage is integrated into the Batch service API.</span></span> <span data-ttu-id="2fe4e-132">如果您使用的是另一種持久儲存體，必須將應用程式邏輯寫入，才能自行保存工作輸出。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-132">If you use another form of durable storage, you'll need to write the application logic to persist task output yourself.</span></span>   

* <span data-ttu-id="2fe4e-133">**輸出擷取**：如果您已保存工作輸出，就可以從集區中的計算節點，或從 Azure 儲存體或另一個資料存放區直接擷取工作輸出。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-133">**Output retrieval**: You can retrieve task output directly from the compute nodes in your pool, or from Azure Storage or another data store if you have persisted task output.</span></span> <span data-ttu-id="2fe4e-134">若要直接從計算節點擷取工作的輸出，您需要檔案名稱和該檔案在節點上的輸出位置。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-134">To retrieve a task's output directly from a compute node, you need the file name and its output location on the node.</span></span> <span data-ttu-id="2fe4e-135">如果您將工作輸出保存到 Azure 儲存體，就需要 Azure 儲存體中的檔案完整路徑，才能下載輸出檔案與 Azure 儲存體 SDK。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-135">If you persist task output to Azure Storage, then you need the full path to the file in Azure Storage to download the output files with the Azure Storage SDK.</span></span>

* <span data-ttu-id="2fe4e-136">**檢視輸出**：當您在 Azure 入口網站中瀏覽至 Batch 工作並選取 [節點上的檔案] 時，系統將會顯示與該工作相關聯的所有檔案，而不只是您感興趣的輸出檔案。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-136">**Viewing output**: When you navigate to a Batch task in the Azure portal and select **Files on node**, you are presented with all files associated with the task, not just the output files you're interested in.</span></span> <span data-ttu-id="2fe4e-137">同樣地，只有當運算節點存在時，且僅在您針對該工作設定的保留期內，才能取得該節點的檔案。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-137">Again, files on compute nodes are available only while the node exists and only within the file retention time you've set for the task.</span></span> <span data-ttu-id="2fe4e-138">若要檢視您已保存到 Azure 儲存體的工作輸出，可以使用 Azure 入口網站或 Azure 儲存體用戶端應用程式，例如 [Azure 儲存體總管][storage_explorer]。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-138">To view task output that you've persisted to Azure Storage, you can use the Azure portal or an Azure Storage client application such as the [Azure Storage Explorer][storage_explorer].</span></span> <span data-ttu-id="2fe4e-139">若要使用入口網站或其他工具檢視 Azure 儲存體中的輸出資料，您必須知道檔案的位置，並直接瀏覽至該位置。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-139">To view output data in Azure Storage with the portal or another tool, you must know the file's location and navigate to it directly.</span></span>

## <a name="options-for-persisting-output"></a><span data-ttu-id="2fe4e-140">保存輸出的選項</span><span class="sxs-lookup"><span data-stu-id="2fe4e-140">Options for persisting output</span></span>

<span data-ttu-id="2fe4e-141">依您的情節而定，可採取幾個不同的方法來保存工作輸出：</span><span class="sxs-lookup"><span data-stu-id="2fe4e-141">Depending on your scenario, there are a few different approaches you can take to persist task output:</span></span>

- <span data-ttu-id="2fe4e-142">使用 Batch 服務 API。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-142">Use the Batch service API.</span></span>  
- <span data-ttu-id="2fe4e-143">使用適用於 .NET 的 Batch 檔案慣例程式庫。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-143">Use the Batch File Conventions library for .NET.</span></span>  
- <span data-ttu-id="2fe4e-144">實作應用程式中的 Batch 檔案慣例標準。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-144">Implement the Batch File Conventions standard in your application.</span></span>
- <span data-ttu-id="2fe4e-145">實作自訂檔案移動解決方案。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-145">Implement a custom file movement solution.</span></span>

<span data-ttu-id="2fe4e-146">下列各節更詳細說明每一種方法。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-146">The following sections describe each approach in more detail.</span></span>

### <a name="use-the-batch-service-api"></a><span data-ttu-id="2fe4e-147">使用 Batch 服務 API</span><span class="sxs-lookup"><span data-stu-id="2fe4e-147">Use the Batch service API</span></span>

<span data-ttu-id="2fe4e-148">在 2017-05-01 版中，當您[將工作新增至作業](https://docs.microsoft.com/rest/api/batchservice/add-a-task-to-a-job)或[將工作集合新增至作業](https://docs.microsoft.com/rest/api/batchservice/add-a-collection-of-tasks-to-a-job)時，Batch 服務會新增支援在 Azure 儲存體中指定工作資料的輸出檔案。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-148">With version 2017-05-01, the Batch service adds support for specifying output files in Azure Storage for task data when you [add a task to a job](https://docs.microsoft.com/rest/api/batchservice/add-a-task-to-a-job) or [add a collection of tasks to a job](https://docs.microsoft.com/rest/api/batchservice/add-a-collection-of-tasks-to-a-job).</span></span>

<span data-ttu-id="2fe4e-149">Batch 服務 API 支援從使用虛擬機器設定建立的集區，將工作資料保存到 Azure 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-149">The Batch service API supports persisting task data to an Azure Storage account from pools created with the virtual machine configuration.</span></span> <span data-ttu-id="2fe4e-150">您可以使用 Batch 服務 API 來保存工作資料，而不需要修改您工作所執行的應用程式。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-150">With the Batch service API, you can persist task data without modifying the application that your task runs.</span></span> <span data-ttu-id="2fe4e-151">您可以選擇性地遵循 [Batch 檔案慣例標準](https://github.com/Azure/azure-sdk-for-net/tree/vs17Dev/src/SDKs/Batch/Support/FileConventions#conventions)將您保存到 Azure 儲存體的檔案命名。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-151">You can optionally adhere to the [Batch File Conventions standard](https://github.com/Azure/azure-sdk-for-net/tree/vs17Dev/src/SDKs/Batch/Support/FileConventions#conventions) for naming the files that you persist to Azure Storage.</span></span> 

<span data-ttu-id="2fe4e-152">使用 Batch 服務 API 來保存工作輸出的時機：</span><span class="sxs-lookup"><span data-stu-id="2fe4e-152">Use the Batch service API to persist task output when:</span></span>

- <span data-ttu-id="2fe4e-153">您需要保存的資料，是來自使用虛擬機器設定在集區中建立的 Batch 工作和作業管理員工作。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-153">You want to persist data from Batch tasks and job manager tasks in pools created with the virtual machine configuration.</span></span>
- <span data-ttu-id="2fe4e-154">您需要將資料保存到具有任意名稱的 Azure 儲存體容器。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-154">You want to persist data to an Azure Storage container with an arbitrary name.</span></span>
- <span data-ttu-id="2fe4e-155">您需要將資料保存到根據 [Batch 檔案慣例標準](https://github.com/Azure/azure-sdk-for-net/tree/vs17Dev/src/SDKs/Batch/Support/FileConventions#conventions)命名的 Azure 儲存體容器。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-155">You want to persist data to an Azure Storage container named according to the [Batch File Conventions standard](https://github.com/Azure/azure-sdk-for-net/tree/vs17Dev/src/SDKs/Batch/Support/FileConventions#conventions).</span></span> 

> [!NOTE]
> <span data-ttu-id="2fe4e-156">Batch 服務 API 不支援的保存資料，是來自使用雲端服務設定建立之集區中執行的工作。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-156">The Batch service API does not support persisting data from tasks running in pools created with the cloud service configuration.</span></span> <span data-ttu-id="2fe4e-157">如需從執行雲端服務設定之集區保存工作輸出的相關資訊，請參閱[使用適用於 .NET 的 Batch 檔案慣例程式庫，將作業和工作資料保存到 Azure 儲存體](batch-task-output-file-conventions.md)</span><span class="sxs-lookup"><span data-stu-id="2fe4e-157">For information about persisting task output from pools running the cloud services configuration, see [Persist job and task data to Azure Storage with the Batch File Conventions library for .NET to persist ](batch-task-output-file-conventions.md)</span></span>
> 
> 

<span data-ttu-id="2fe4e-158">如需有關使用 Batch 服務 API 保存工作輸出的詳細資訊，請參閱[使用 Batch 服務 API 將工作資料保存到 Azure 儲存體](batch-task-output-files.md)。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-158">For more information on persisting task output with the Batch service API, see [Persist task data to Azure Storage with the Batch service API](batch-task-output-files.md).</span></span> <span data-ttu-id="2fe4e-159">另請參閱 GitHub 上的 [PersistOutputs][github_persistoutputs] 範例專案，示範如何使用適用於 .NET 的 Batch 用戶端程式庫，將工作輸出保存到永久儲存體。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-159">Also see the [PersistOutputs][github_persistoutputs] sample project on GitHub, which demonstrates how to use the Batch client library for .NET to persist task output to durable storage.</span></span>

### <a name="use-the-batch-file-conventions-library-for-net"></a><span data-ttu-id="2fe4e-160">使用適用於 .NET 的 Batch 檔案慣例程式庫</span><span class="sxs-lookup"><span data-stu-id="2fe4e-160">Use the Batch File Conventions library for .NET</span></span>

<span data-ttu-id="2fe4e-161">使用 C# 和 .NET 建置 Batch 解決方案的開發人員可以使用 [適用於 .NET 的檔案慣例][nuget_package] ，根據 [Batch 檔案慣例標準](https://github.com/Azure/azure-sdk-for-net/tree/vs17Dev/src/SDKs/Batch/Support/FileConventions#conventions)，將工作資料保存至 Azure 儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-161">Developers building Batch solutions with C# and .NET can use the [File Conventions library for .NET][nuget_package] to persist task data to an Azure Storage account, according to the [Batch File Conventions standard](https://github.com/Azure/azure-sdk-for-net/tree/vs17Dev/src/SDKs/Batch/Support/FileConventions#conventions).</span></span> <span data-ttu-id="2fe4e-162">檔案慣例程式庫可處理將輸出檔案移動至 Azure 儲存體，並使用已知方法命名目的地容器和 blob。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-162">The File Conventions library handles moving output files to Azure Storage and naming destination containers and blobs in a well-known way.</span></span>

<span data-ttu-id="2fe4e-163">檔案慣例程式庫支援依識別碼或用途查詢輸出檔案，讓您不需要完整的檔案 URI，就可以輕鬆地找到它們。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-163">The File Conventions library supports querying output files by either ID or purpose, making it easy to locate them without needing the complete file URIs.</span></span> 

<span data-ttu-id="2fe4e-164">使用適用於 .NET 的 Batch 檔案慣例程式庫保存工作輸出的時機：</span><span class="sxs-lookup"><span data-stu-id="2fe4e-164">Use the Batch File Conventions library for .NET to persist task output when:</span></span>

- <span data-ttu-id="2fe4e-165">您在工作還在執行時，想要將資料串流至 Azure 儲存體。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-165">You want to stream data to Azure Storage while the task is still running.</span></span>
- <span data-ttu-id="2fe4e-166">您想要保存的資料是在使用雲端服務設定或虛擬機器設定建立的集區中。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-166">You want to persist data from pools created with either the cloud service configuration or the virtual machine configuration.</span></span>
- <span data-ttu-id="2fe4e-167">用戶端應用程式或作業中的其他工作必須依識別碼或依用途來尋找及下載工作輸出檔案。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-167">Your client application or other tasks in the job needs to locate and download task output files by ID or by purpose.</span></span> 
- <span data-ttu-id="2fe4e-168">您想要執行檢查點或提前上傳初始結果。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-168">You want to perform check-pointing or early upload of initial results.</span></span>
- <span data-ttu-id="2fe4e-169">您想要在 Azure 入口網站中檢視工作輸出。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-169">You want to view task output in the Azure portal.</span></span>

<span data-ttu-id="2fe4e-170">如需使用適用於 .NET 的檔案慣例程式庫來保存工作輸出的詳細資訊，請參閱[使用適用於 .NET 的 Batch 檔案慣例程式庫，將作業和工作資料保存到 Azure 儲存體](batch-task-output-file-conventions.md)。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-170">For more information on persisting task output with the File Conventions library for .NET, see [Persist job and task data to Azure Storage with the Batch File Conventions library for .NET to persist ](batch-task-output-file-conventions.md).</span></span> <span data-ttu-id="2fe4e-171">另請參閱 GitHub 上的 [PersistOutputs][github_persistoutputs] 範例專案，示範如何使用適用於 .NET 的檔案慣例程式庫，將工作輸出保存到永久儲存體。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-171">Also see the [PersistOutputs][github_persistoutputs] sample project on GitHub, which demonstrates how to use the File Conventions library for .NET to persist task output to durable storage.</span></span>

<span data-ttu-id="2fe4e-172">GitHub 上的 [PersistOutputs][github_persistoutputs] 範例專案會示範如何使用適用於 .NET 的 Batch 用戶端程式庫，將工作輸出保存到永久儲存體。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-172">The [PersistOutputs][github_persistoutputs] sample project on GitHub demonstrates how to use the Batch client library for .NET to persist task output to durable storage.</span></span>

### <a name="implement-the-batch-file-conventions-standard"></a><span data-ttu-id="2fe4e-173">實作 Batch 檔案慣例標準</span><span class="sxs-lookup"><span data-stu-id="2fe4e-173">Implement the Batch File Conventions standard</span></span>

<span data-ttu-id="2fe4e-174">如果您要使用 .NET 以外的語言，可以在您自己的應用程式中實作 [Batch 檔案慣例標準](https://github.com/Azure/azure-sdk-for-net/tree/vs17Dev/src/SDKs/Batch/Support/FileConventions#conventions)。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-174">If you are using a language other than .NET, you can implement the [Batch File Conventions standard](https://github.com/Azure/azure-sdk-for-net/tree/vs17Dev/src/SDKs/Batch/Support/FileConventions#conventions) in your own application.</span></span> 

<span data-ttu-id="2fe4e-175">當您需要經過證實的命名配置，或當想要在 Azure 入口網站中檢視工作輸出時，建議您自行實作檔案慣例命名標準。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-175">You may want to implement the File Conventions naming standard yourself when you want a proven naming scheme, or when you want to view task output in the Azure portal.</span></span>

### <a name="implement-a-custom-file-movement-solution"></a><span data-ttu-id="2fe4e-176">實作自訂檔案移動解決方案</span><span class="sxs-lookup"><span data-stu-id="2fe4e-176">Implement a custom file movement solution</span></span>

<span data-ttu-id="2fe4e-177">您也可以實作自己的完整檔案移動解決方案。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-177">You can also implement your own complete file movement solution.</span></span> <span data-ttu-id="2fe4e-178">使用這個方法的時機：</span><span class="sxs-lookup"><span data-stu-id="2fe4e-178">Use this approach when:</span></span>

- <span data-ttu-id="2fe4e-179">您想要將工作資料保存到 Azure 儲存體以外的資料存放區。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-179">You want to persist task data to a data store other than Azure Storage.</span></span> <span data-ttu-id="2fe4e-180">若要將檔案上傳至諸如 Azure SQL 或 Azure Data Lake 等資料存放區，您可以建立自訂指令碼或可執行檔，以上傳至該位置。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-180">To upload files to a data store like Azure SQL or Azure DataLake, you can create a custom script or executable to upload to that location.</span></span> <span data-ttu-id="2fe4e-181">接著，您在執行主要可執行檔之後，可以在命令列上呼叫它。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-181">You can then call it on the command line after running your primary executable.</span></span> <span data-ttu-id="2fe4e-182">例如，在 Windows 節點上，您可能會呼叫這兩個命令：`doMyWork.exe && uploadMyFilesToSql.exe`</span><span class="sxs-lookup"><span data-stu-id="2fe4e-182">For example, on a Windows node, you might call these two commands: `doMyWork.exe && uploadMyFilesToSql.exe`</span></span>
- <span data-ttu-id="2fe4e-183">您想要執行檢查點或提前上傳初始結果。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-183">You want to perform check-pointing or early upload of initial results.</span></span>
- <span data-ttu-id="2fe4e-184">您需要保持更精確地控制錯誤處理。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-184">You want to maintain granular control over error handling.</span></span> <span data-ttu-id="2fe4e-185">例如，如果您想要使用工作相依性動作，以特定的工作結束代碼作為基礎來採取某些上傳動作，您將需要實作自己的解決方案。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-185">For example, you may want to implement your own solution if you want to use task dependency actions to take certain upload actions based on specific task exit codes.</span></span> <span data-ttu-id="2fe4e-186">如需有關工作相依性動作的詳細資訊，請參閱[建立工作相依性，以執行相依於其他工作的工作](batch-task-dependencies.md)。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-186">For more information on task dependency actions, see [Create task dependencies to run tasks that depend on other tasks](batch-task-dependencies.md).</span></span> 

## <a name="next-steps"></a><span data-ttu-id="2fe4e-187">後續步驟</span><span class="sxs-lookup"><span data-stu-id="2fe4e-187">Next steps</span></span>

- <span data-ttu-id="2fe4e-188">使用 Batch 服務 API 中的新功能進行瀏覽，可保存[使用 Batch 服務 API 將工作資料保存到 Azure 儲存體](batch-task-output-files.md)中的工作資料。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-188">Explore using the new features in the Batch service API to persist task data in [Persist task data to Azure Storage with the Batch service API](batch-task-output-files.md).</span></span>
- <span data-ttu-id="2fe4e-189">在[使用適用於 .NET 的 Batch 檔案慣例程式庫，將作業和工作資料保存到 Azure 儲存體](batch-task-output-file-conventions.md)中，了解如何使用適用於 .NET 的檔案慣例程式庫。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-189">Learn about using the Batch File Conventions library for .NET in [Persist job and task data to Azure Storage with the Batch File Conventions library for .NET to persist ](batch-task-output-file-conventions.md).</span></span>
- <span data-ttu-id="2fe4e-190">請參閱 GitHub 上的 [PersistOutputs][github_persistoutputs] 範例專案，示範如何使用適用於 .NET 的 Batch 用戶端程式庫和適用於 .NET 的檔案慣例程式庫，將工作輸出保存到永久儲存體。</span><span class="sxs-lookup"><span data-stu-id="2fe4e-190">See the [PersistOutputs][github_persistoutputs] sample project on GitHub, which demonstrates how to use both the Batch client library for .NET and the File Conventions library for .NET to persist task output to durable storage.</span></span>

[nuget_package]: https://www.nuget.org/packages/Microsoft.Azure.Batch.Conventions.Files
[portal]: https://portal.azure.com
[storage_explorer]: http://storageexplorer.com/
