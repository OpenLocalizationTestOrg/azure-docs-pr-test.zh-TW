---
title: "在 Azure 中的 IP 位址類型 | Microsoft Docs"
description: "了解 Azure 中的公用和私人 IP 位址。"
services: virtual-network
documentationcenter: na
author: jimdial
manager: carmonm
editor: tysonn
tags: azure-resource-manager
ms.assetid: 610b911c-f358-4cfe-ad82-8b61b87c3b7e
ms.service: virtual-network
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/27/2016
ms.author: jdial
ms.openlocfilehash: 144f4ea213b8ed0a3530495e185f489155c474c9
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/29/2017
---
# <a name="ip-address-types-and-allocation-methods-in-azure"></a><span data-ttu-id="0564e-103">Azure 中的 IP 位址類型及配置方法</span><span class="sxs-lookup"><span data-stu-id="0564e-103">IP address types and allocation methods in Azure</span></span>
<span data-ttu-id="0564e-104">您可以將 IP 位址指派給 Azure 資源，來與其他 Azure 資源、內部部署網路和網際網路進行通訊。</span><span class="sxs-lookup"><span data-stu-id="0564e-104">You can assign IP addresses to Azure resources to communicate with other Azure resources, your on-premises network, and the Internet.</span></span> <span data-ttu-id="0564e-105">您可以在 Azure 中使用兩種類型的 IP 位址：</span><span class="sxs-lookup"><span data-stu-id="0564e-105">There are two types of IP addresses you can use in Azure:</span></span>

* <span data-ttu-id="0564e-106">**公用 IP 位址**：用於與網際網路通訊，包括 Azure 公眾對應服務</span><span class="sxs-lookup"><span data-stu-id="0564e-106">**Public IP addresses**: Used for communication with the Internet, including Azure public-facing services</span></span>
* <span data-ttu-id="0564e-107">**私人 IP 位址**：用於 Azure 虛擬網路 (VNet) 內的通訊，而當您使用 VPN 閘道或 ExpressRoute 電路將網路擴充至 Azure 時，則使用於內部部署網路內的通訊。</span><span class="sxs-lookup"><span data-stu-id="0564e-107">**Private IP addresses**: Used for communication within an Azure virtual network (VNet), and your on-premises network when you use a VPN gateway or ExpressRoute circuit to extend your network to Azure.</span></span>

> [!NOTE]
> <span data-ttu-id="0564e-108">Azure 建立和處理資源的部署模型有二種：[Resource Manager 和傳統](../resource-manager-deployment-model.md)。</span><span class="sxs-lookup"><span data-stu-id="0564e-108">Azure has two different deployment models for creating and working with resources:  [Resource Manager and classic](../resource-manager-deployment-model.md).</span></span>  <span data-ttu-id="0564e-109">本文涵蓋之內容包括使用 Resource Manager 部署模型，Microsoft 建議大部分的新部署使用此模型，而不是[傳統部署模型](virtual-network-ip-addresses-overview-classic.md)。</span><span class="sxs-lookup"><span data-stu-id="0564e-109">This article covers using the Resource Manager deployment model, which Microsoft recommends for most new deployments instead of the [classic deployment model](virtual-network-ip-addresses-overview-classic.md).</span></span>
> 

<span data-ttu-id="0564e-110">如果您熟悉傳統部署模型，請參閱 [傳統與 Resource Manager 之間的 IP 定址差異](virtual-network-ip-addresses-overview-classic.md#differences-between-resource-manager-and-classic-deployments)。</span><span class="sxs-lookup"><span data-stu-id="0564e-110">If you are familiar with the classic deployment model, check the [differences in IP addressing between classic and Resource Manager](virtual-network-ip-addresses-overview-classic.md#differences-between-resource-manager-and-classic-deployments).</span></span>

## <a name="public-ip-addresses"></a><span data-ttu-id="0564e-111">公用 IP 位址</span><span class="sxs-lookup"><span data-stu-id="0564e-111">Public IP addresses</span></span>
<span data-ttu-id="0564e-112">Azure 資源可透過公用 IP 位址來與網際網路和 Azure 公眾對應服務 (例如 [Azure Redis 快取](https://azure.microsoft.com/services/cache/)、[Azure 事件中樞](https://azure.microsoft.com/services/event-hubs/)、[SQL Database](../sql-database/sql-database-technical-overview.md) 和 [Azure 儲存體](../storage/common/storage-introduction.md)) 進行通訊。</span><span class="sxs-lookup"><span data-stu-id="0564e-112">Public IP addresses allow Azure resources to communicate with Internet and Azure public-facing services such as [Azure Redis Cache](https://azure.microsoft.com/services/cache/), [Azure Event Hubs](https://azure.microsoft.com/services/event-hubs/), [SQL databases](../sql-database/sql-database-technical-overview.md), and [Azure storage](../storage/common/storage-introduction.md).</span></span>

<span data-ttu-id="0564e-113">在 Azure 資源管理員中， [公用 IP](resource-groups-networking.md#public-ip-address) 位址是有自己的屬性的資源。</span><span class="sxs-lookup"><span data-stu-id="0564e-113">In Azure Resource Manager, a [public IP](resource-groups-networking.md#public-ip-address) address is a resource that has its own properties.</span></span> <span data-ttu-id="0564e-114">您可以將公用 IP 位址資源與下列任何資源建立關聯：</span><span class="sxs-lookup"><span data-stu-id="0564e-114">You can associate a public IP address resource with any of the following resources:</span></span>

* <span data-ttu-id="0564e-115">虛擬機器 (VM)</span><span class="sxs-lookup"><span data-stu-id="0564e-115">Virtual machines (VM)</span></span>
* <span data-ttu-id="0564e-116">網際網路對應負載平衡器</span><span class="sxs-lookup"><span data-stu-id="0564e-116">Internet-facing load balancers</span></span>
* <span data-ttu-id="0564e-117">VPN 閘道</span><span class="sxs-lookup"><span data-stu-id="0564e-117">VPN gateways</span></span>
* <span data-ttu-id="0564e-118">應用程式閘道</span><span class="sxs-lookup"><span data-stu-id="0564e-118">Application gateways</span></span>

### <a name="allocation-method"></a><span data-ttu-id="0564e-119">配置方法</span><span class="sxs-lookup"><span data-stu-id="0564e-119">Allocation method</span></span>
<span data-ttu-id="0564e-120">有兩種方法可將 IP 位址配置給公用 IP 資源：「動態」或「靜態」。</span><span class="sxs-lookup"><span data-stu-id="0564e-120">There are two methods in which an IP address is allocated to a *public* IP resource - *dynamic* or *static*.</span></span> <span data-ttu-id="0564e-121">預設配置方法是「動態」 ，此方法 **不會** 在建立 IP 位址時進行配置。</span><span class="sxs-lookup"><span data-stu-id="0564e-121">The default allocation method is *dynamic*, where an IP address is **not** allocated at the time of its creation.</span></span> <span data-ttu-id="0564e-122">相反地，公用 IP 位址會在您啟動 (或建立) 相關聯的資源 (例如 VM 或負載平衡器) 時進行配置。</span><span class="sxs-lookup"><span data-stu-id="0564e-122">Instead, the public IP address is allocated when you start (or create) the associated resource (like a VM or load balancer).</span></span> <span data-ttu-id="0564e-123">此 IP 位址會在您停止 (或刪除) 資源時釋出 。</span><span class="sxs-lookup"><span data-stu-id="0564e-123">The IP address is released when you stop (or delete) the resource.</span></span> <span data-ttu-id="0564e-124">這會導致 IP 位址在您停止並啟動資源時變更。</span><span class="sxs-lookup"><span data-stu-id="0564e-124">This causes the IP address to change when you stop and start a resource.</span></span>

<span data-ttu-id="0564e-125">若要確保相關聯資源的 IP 位址維持不變，您可以明確地將配置方法設定為「靜態」 。</span><span class="sxs-lookup"><span data-stu-id="0564e-125">To ensure the IP address for the associated resource remains the same, you can set the allocation method explicitly to *static*.</span></span> <span data-ttu-id="0564e-126">在此情況下會立即指派 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="0564e-126">In this case an IP address is assigned immediately.</span></span> <span data-ttu-id="0564e-127">只有在您刪除資源或將其配置方法變更為「動態」 時，才會釋出 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="0564e-127">It is released only when you delete the resource or change its allocation method to *dynamic*.</span></span>

> [!NOTE]
> <span data-ttu-id="0564e-128">即使將配置方法設定為「靜態」，您也無法指定已指派給「公用 IP 資源」的實際 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="0564e-128">Even when you set the allocation method to *static*, you cannot specify the actual IP address assigned to the *public IP resource*.</span></span> <span data-ttu-id="0564e-129">相反地，它是從建立資源的 Azure 位置中可用的 IP 位址集區進行配置。</span><span class="sxs-lookup"><span data-stu-id="0564e-129">Instead, it gets allocated from a pool of available IP addresses in the Azure location the resource is created in.</span></span>
>

<span data-ttu-id="0564e-130">靜態公用 IP 位址通常用於下列案例：</span><span class="sxs-lookup"><span data-stu-id="0564e-130">Static public IP addresses are commonly used in the following scenarios:</span></span>

* <span data-ttu-id="0564e-131">使用者必須更新防火牆規則才能與您的 Azure 資源進行通訊。</span><span class="sxs-lookup"><span data-stu-id="0564e-131">End-users need to update firewall rules to communicate with your Azure resources.</span></span>
* <span data-ttu-id="0564e-132">DNS 名稱解析，其中當 IP 位址發生變更時將需要更新 A 記錄。</span><span class="sxs-lookup"><span data-stu-id="0564e-132">DNS name resolution, where a change in IP address would require updating A records.</span></span>
* <span data-ttu-id="0564e-133">您的 Azure 資源與其他使用 IP 位址型安全性模型的應用程式或服務進行通訊。</span><span class="sxs-lookup"><span data-stu-id="0564e-133">Your Azure resources communicate with other apps or services that use an IP address-based security model.</span></span>
* <span data-ttu-id="0564e-134">您使用已連結到 IP 位址的 SSL 憑證。</span><span class="sxs-lookup"><span data-stu-id="0564e-134">You use SSL certificates linked to an IP address.</span></span>

> [!NOTE]
> <span data-ttu-id="0564e-135">將公用 IP 位址 (動態/靜態) 配置給 Azure 資源的 IP 範圍清單已發佈於 [Azure 資料中心 IP 範圍](https://www.microsoft.com/download/details.aspx?id=41653)。</span><span class="sxs-lookup"><span data-stu-id="0564e-135">The list of IP ranges from which public IP addresses (dynamic/static) are allocated to Azure resources is published at [Azure Datacenter IP ranges](https://www.microsoft.com/download/details.aspx?id=41653).</span></span>
>

### <a name="dns-hostname-resolution"></a><span data-ttu-id="0564e-136">DNS 主機名稱解析</span><span class="sxs-lookup"><span data-stu-id="0564e-136">DNS hostname resolution</span></span>
<span data-ttu-id="0564e-137">您可以指定公用 IP 資源的 DNS 網域名稱標籤，以建立 domainnamelabel.location.cloudapp.azure.com 與 Azure 受管理 DNS 伺服器中的公用 IP 位址的對應。</span><span class="sxs-lookup"><span data-stu-id="0564e-137">You can specify a DNS domain name label for a public IP resource, which creates a mapping for *domainnamelabel*.*location*.cloudapp.azure.com to the public IP address in the Azure-managed DNS servers.</span></span> <span data-ttu-id="0564e-138">比方說，如果您建立公用 IP 資源並以 **contoso** 作為**美國西部** Azure 位置中的domainnamelabel，則完整網域名稱 (FQDN) **contoso.westus.cloudapp.azure.com** 會解析為資源的公用 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="0564e-138">For instance, if you create a public IP resource with **contoso** as a *domainnamelabel* in the **West US** Azure *location*, the fully-qualified domain name (FQDN) **contoso.westus.cloudapp.azure.com** will resolve to the public IP address of the resource.</span></span> <span data-ttu-id="0564e-139">您可以使用此 FQDN 來建立自訂網域 CNAME 記錄，其指向 Azure 中的公用 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="0564e-139">You can use this FQDN to create a custom domain CNAME record pointing to the public IP address in Azure.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="0564e-140">所建立的每個網域名稱標籤必須是 Azure 位置中唯一的。</span><span class="sxs-lookup"><span data-stu-id="0564e-140">Each domain name label created must be unique within its Azure location.</span></span>  
>

### <a name="virtual-machines"></a><span data-ttu-id="0564e-141">虛擬機器</span><span class="sxs-lookup"><span data-stu-id="0564e-141">Virtual machines</span></span>
<span data-ttu-id="0564e-142">您可以藉由將公用 IP 位址指派給其**網路介面**，以建立其與 [Windows](../virtual-machines/windows/overview.md) 或 [Linux](../virtual-machines/virtual-machines-linux-about.md) VM 的關聯。</span><span class="sxs-lookup"><span data-stu-id="0564e-142">You can associate a public IP address with a [Windows](../virtual-machines/windows/overview.md) or [Linux](../virtual-machines/virtual-machines-linux-about.md) VM by assigning it to its **network interface**.</span></span> <span data-ttu-id="0564e-143">如果 VM 有多個網路介面，您可以只將它指派給「主要」網路介面。</span><span class="sxs-lookup"><span data-stu-id="0564e-143">In the case of a VM with multiple network interfaces, you can assign it to the *primary* network interface only.</span></span> <span data-ttu-id="0564e-144">您可以將動態或靜態公用 IP 位址指派給 VM。</span><span class="sxs-lookup"><span data-stu-id="0564e-144">You can assign either a dynamic or a static public IP address to a VM.</span></span>

### <a name="internet-facing-load-balancers"></a><span data-ttu-id="0564e-145">網際網路對應負載平衡器</span><span class="sxs-lookup"><span data-stu-id="0564e-145">Internet-facing load balancers</span></span>
<span data-ttu-id="0564e-146">您可以將公用 IP 位址指派給負載平衡器 [前端](../load-balancer/load-balancer-overview.md)組態，以建立其與 **Azure Load Balancer** 的關聯。</span><span class="sxs-lookup"><span data-stu-id="0564e-146">You can associate a public IP address with an [Azure Load Balancer](../load-balancer/load-balancer-overview.md), by assigning it to the load balancer **frontend** configuration.</span></span> <span data-ttu-id="0564e-147">此公用 IP 位址可做為負載平衡的虛擬 IP 位址 (VIP)。</span><span class="sxs-lookup"><span data-stu-id="0564e-147">This public IP address serves as a load-balanced virtual IP address (VIP).</span></span> <span data-ttu-id="0564e-148">您可以將動態或靜態公用 IP 位址指派給負載平衡器前端。</span><span class="sxs-lookup"><span data-stu-id="0564e-148">You can assign either a dynamic or a static public IP address to a load balancer front-end.</span></span> <span data-ttu-id="0564e-149">您也可以將多個公用 IP 位址指派給一個負載平衡器前端，以實現 [多重 VIP](../load-balancer/load-balancer-multivip.md) 案例 (例如具有多個 SSL 架構網站的多租用戶環境)。</span><span class="sxs-lookup"><span data-stu-id="0564e-149">You can also assign multiple public IP addresses to a load balancer front-end, which enables [multi-VIP](../load-balancer/load-balancer-multivip.md) scenarios like a multi-tenant environment with SSL-based websites.</span></span>

### <a name="vpn-gateways"></a><span data-ttu-id="0564e-150">VPN 閘道</span><span class="sxs-lookup"><span data-stu-id="0564e-150">VPN gateways</span></span>
<span data-ttu-id="0564e-151">[Azure VPN 閘道](../vpn-gateway/vpn-gateway-about-vpngateways.md) 用來將 Azure 虛擬網路 (VNet) 連接到其他 Azure Vnet 或內部部署網路。</span><span class="sxs-lookup"><span data-stu-id="0564e-151">[Azure VPN Gateway](../vpn-gateway/vpn-gateway-about-vpngateways.md) is used to connect an Azure virtual network (VNet) to other Azure VNets or to an on-premises network.</span></span> <span data-ttu-id="0564e-152">您需要將公用 IP 位址指派給其 **IP 設定** ，以便啟用與遠端網路的通訊。</span><span class="sxs-lookup"><span data-stu-id="0564e-152">You need to assign a public IP address to its **IP configuration** to enable it to communicate with the remote network.</span></span> <span data-ttu-id="0564e-153">您目前只可以將 *動態* 公用 IP 位址指派給 VPN 閘道。</span><span class="sxs-lookup"><span data-stu-id="0564e-153">Currently, you can only assign a *dynamic* public IP address to a VPN gateway.</span></span>

### <a name="application-gateways"></a><span data-ttu-id="0564e-154">應用程式閘道</span><span class="sxs-lookup"><span data-stu-id="0564e-154">Application gateways</span></span>
<span data-ttu-id="0564e-155">您可以將公用 IP 位址指派給閘道的 [前端](../application-gateway/application-gateway-introduction.md)組態，以建立其與 Azure **應用程式閘道** 的關聯。</span><span class="sxs-lookup"><span data-stu-id="0564e-155">You can associate a public IP address with an Azure [Application Gateway](../application-gateway/application-gateway-introduction.md), by assigning it to the gateway's **frontend** configuration.</span></span> <span data-ttu-id="0564e-156">此公用 IP 位址可做為負載平衡的 VIP。</span><span class="sxs-lookup"><span data-stu-id="0564e-156">This public IP address serves as a load-balanced VIP.</span></span> <span data-ttu-id="0564e-157">您目前只可以將「動態」  公用 IP 位址指派給應用程式閘道前端組態。</span><span class="sxs-lookup"><span data-stu-id="0564e-157">Currently, you can only assign a *dynamic* public IP address to an application gateway frontend configuration.</span></span>

### <a name="at-a-glance"></a><span data-ttu-id="0564e-158">快速總覽</span><span class="sxs-lookup"><span data-stu-id="0564e-158">At-a-glance</span></span>
<span data-ttu-id="0564e-159">下表顯示特定的屬性，公用 IP 位址可透過它關聯到最上層資源，以及顯示可以使用的可能配置方法 (動態或靜態)。</span><span class="sxs-lookup"><span data-stu-id="0564e-159">The table below shows the specific property through which a public IP address can be associated to a top-level resource, and the possible allocation methods (dynamic or static) that can be used.</span></span>

| <span data-ttu-id="0564e-160">最上層資源</span><span class="sxs-lookup"><span data-stu-id="0564e-160">Top-level resource</span></span> | <span data-ttu-id="0564e-161">IP 位址關聯</span><span class="sxs-lookup"><span data-stu-id="0564e-161">IP Address association</span></span> | <span data-ttu-id="0564e-162">動態</span><span class="sxs-lookup"><span data-stu-id="0564e-162">Dynamic</span></span> | <span data-ttu-id="0564e-163">靜態</span><span class="sxs-lookup"><span data-stu-id="0564e-163">Static</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="0564e-164">虛擬機器</span><span class="sxs-lookup"><span data-stu-id="0564e-164">Virtual machine</span></span> |<span data-ttu-id="0564e-165">Linux</span><span class="sxs-lookup"><span data-stu-id="0564e-165">Network interface</span></span> |<span data-ttu-id="0564e-166">是</span><span class="sxs-lookup"><span data-stu-id="0564e-166">Yes</span></span> |<span data-ttu-id="0564e-167">是</span><span class="sxs-lookup"><span data-stu-id="0564e-167">Yes</span></span> |
| <span data-ttu-id="0564e-168">負載平衡器</span><span class="sxs-lookup"><span data-stu-id="0564e-168">Load balancer</span></span> |<span data-ttu-id="0564e-169">前端組態</span><span class="sxs-lookup"><span data-stu-id="0564e-169">Front end configuration</span></span> |<span data-ttu-id="0564e-170">是</span><span class="sxs-lookup"><span data-stu-id="0564e-170">Yes</span></span> |<span data-ttu-id="0564e-171">是</span><span class="sxs-lookup"><span data-stu-id="0564e-171">Yes</span></span> |
| <span data-ttu-id="0564e-172">VPN 閘道</span><span class="sxs-lookup"><span data-stu-id="0564e-172">VPN gateway</span></span> |<span data-ttu-id="0564e-173">閘道 IP 組態</span><span class="sxs-lookup"><span data-stu-id="0564e-173">Gateway IP configuration</span></span> |<span data-ttu-id="0564e-174">是</span><span class="sxs-lookup"><span data-stu-id="0564e-174">Yes</span></span> |<span data-ttu-id="0564e-175">否</span><span class="sxs-lookup"><span data-stu-id="0564e-175">No</span></span> |
| <span data-ttu-id="0564e-176">前端</span><span class="sxs-lookup"><span data-stu-id="0564e-176">Application gateway</span></span> |<span data-ttu-id="0564e-177">前端組態</span><span class="sxs-lookup"><span data-stu-id="0564e-177">Front end configuration</span></span> |<span data-ttu-id="0564e-178">是</span><span class="sxs-lookup"><span data-stu-id="0564e-178">Yes</span></span> |<span data-ttu-id="0564e-179">否</span><span class="sxs-lookup"><span data-stu-id="0564e-179">No</span></span> |

## <a name="private-ip-addresses"></a><span data-ttu-id="0564e-180">私人 IP 位址</span><span class="sxs-lookup"><span data-stu-id="0564e-180">Private IP addresses</span></span>
<span data-ttu-id="0564e-181">私人 IP 位址可讓 Azure 資源透過 VPN 閘道或 ExpressRoute 電路，與 [虛擬網路](virtual-networks-overview.md) 中或內部部署網路中的其他資源進行通訊，而不必使用可網際網路連線的 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="0564e-181">Private IP addresses allow Azure resources to communicate with other resources in a [virtual network](virtual-networks-overview.md) or an on-premises network through a VPN gateway or ExpressRoute circuit, without using an Internet-reachable IP address.</span></span>

<span data-ttu-id="0564e-182">在 Azure Resource Manager 部署模型中，私人 IP 位址會與下列 Azure 資源類型相關聯。</span><span class="sxs-lookup"><span data-stu-id="0564e-182">In the Azure Resource Manager deployment model, a private IP address is associated to the following types of Azure resources:</span></span>

* <span data-ttu-id="0564e-183">VM</span><span class="sxs-lookup"><span data-stu-id="0564e-183">VMs</span></span>
* <span data-ttu-id="0564e-184">內部負載平衡器 (ILB)</span><span class="sxs-lookup"><span data-stu-id="0564e-184">Internal load balancers (ILBs)</span></span>
* <span data-ttu-id="0564e-185">應用程式閘道</span><span class="sxs-lookup"><span data-stu-id="0564e-185">Application gateways</span></span>

### <a name="allocation-method"></a><span data-ttu-id="0564e-186">配置方法</span><span class="sxs-lookup"><span data-stu-id="0564e-186">Allocation method</span></span>
<span data-ttu-id="0564e-187">私人 IP 位址是從附加資源的子網路位址範圍進行配置。</span><span class="sxs-lookup"><span data-stu-id="0564e-187">A private IP address is allocated from the address range of the subnet to which the resource is attached.</span></span> <span data-ttu-id="0564e-188">子網路本身的位址範圍是 VNet 位址範圍的一部分。</span><span class="sxs-lookup"><span data-stu-id="0564e-188">The address range of the subnet itself is a part of the VNet's address range.</span></span>

<span data-ttu-id="0564e-189">私人 IP 位址有兩種配置方法：「動態」或「靜態」。</span><span class="sxs-lookup"><span data-stu-id="0564e-189">There are two methods in which a private IP address is allocated: *dynamic* or *static*.</span></span> <span data-ttu-id="0564e-190">預設配置方法是「動態」 ，此方法會從資源的子網路自動配置 IP 位址 (使用 DHCP)。</span><span class="sxs-lookup"><span data-stu-id="0564e-190">The default allocation method is *dynamic*, where the IP address is automatically allocated from the resource's subnet (using DHCP).</span></span> <span data-ttu-id="0564e-191">此 IP 位址可在您停止並啟動資源時變更。</span><span class="sxs-lookup"><span data-stu-id="0564e-191">This IP address can change when you stop and start the resource.</span></span>

<span data-ttu-id="0564e-192">您可以將配置方法設定為「靜態」  以確保 IP 位址維持不變。</span><span class="sxs-lookup"><span data-stu-id="0564e-192">You can set the allocation method to *static* to ensure the IP address remains the same.</span></span> <span data-ttu-id="0564e-193">在此情況下，您也需要提供屬於資源子網路的有效 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="0564e-193">In this case, you also need to provide a valid IP address that is part of the resource's subnet.</span></span>

<span data-ttu-id="0564e-194">靜態私人 IP 位址通常用於：</span><span class="sxs-lookup"><span data-stu-id="0564e-194">Static private IP addresses are commonly used for:</span></span>

* <span data-ttu-id="0564e-195">做為網域控制站或 DNS 伺服器的 VM。</span><span class="sxs-lookup"><span data-stu-id="0564e-195">VMs that act as domain controllers or DNS servers.</span></span>
* <span data-ttu-id="0564e-196">需要使用 IP 位址的防火牆規則的資源。</span><span class="sxs-lookup"><span data-stu-id="0564e-196">Resources that require firewall rules using IP addresses.</span></span>
* <span data-ttu-id="0564e-197">其他應用程式/資源透過 IP 位址存取的資源。</span><span class="sxs-lookup"><span data-stu-id="0564e-197">Resources accessed by other apps/resources through an IP address.</span></span>

### <a name="virtual-machines"></a><span data-ttu-id="0564e-198">虛擬機器</span><span class="sxs-lookup"><span data-stu-id="0564e-198">Virtual machines</span></span>
<span data-ttu-id="0564e-199">私人 IP 位址會指派給 [Windows](../virtual-machines/windows/overview.md) 或 [Linux](../virtual-machines/virtual-machines-linux-about.md) VM 的**網路介面**。</span><span class="sxs-lookup"><span data-stu-id="0564e-199">A private IP address is assigned to the **network interface** of a [Windows](../virtual-machines/windows/overview.md) or [Linux](../virtual-machines/virtual-machines-linux-about.md) VM.</span></span> <span data-ttu-id="0564e-200">如果是多重網路介面 VM，每個介面都會取得指派的私人 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="0564e-200">In case of a multi-network interface VM, each interface gets a private IP address assigned.</span></span> <span data-ttu-id="0564e-201">您可以將網路介面的配置方法指定為動態或靜態。</span><span class="sxs-lookup"><span data-stu-id="0564e-201">You can specify the allocation method as either dynamic or static for a network interface.</span></span>

#### <a name="internal-dns-hostname-resolution-for-vms"></a><span data-ttu-id="0564e-202">內部 DNS 主機名稱解析 (適用於 VM)</span><span class="sxs-lookup"><span data-stu-id="0564e-202">Internal DNS hostname resolution (for VMs)</span></span>
<span data-ttu-id="0564e-203">除非明確設定自訂 DNS 伺服器，否則所有 Azure VM 預設都會設定 [Azure 受管理 DNS 伺服器](virtual-networks-name-resolution-for-vms-and-role-instances.md#azure-provided-name-resolution) 。</span><span class="sxs-lookup"><span data-stu-id="0564e-203">All Azure VMs are configured with [Azure-managed DNS servers](virtual-networks-name-resolution-for-vms-and-role-instances.md#azure-provided-name-resolution) by default, unless you explicitly configure custom DNS servers.</span></span> <span data-ttu-id="0564e-204">這些 DNS 伺服器會針對位於相同 VNet 的 VM 提供內部名稱解析。</span><span class="sxs-lookup"><span data-stu-id="0564e-204">These DNS servers provide internal name resolution for VMs that reside within the same VNet.</span></span>

<span data-ttu-id="0564e-205">當您建立 VM 時，會將主機名稱與其私人 IP 位址的對應加入至 Azure 受管理 DNS 伺服器。</span><span class="sxs-lookup"><span data-stu-id="0564e-205">When you create a VM, a mapping for the hostname to its private IP address is added to the Azure-managed DNS servers.</span></span> <span data-ttu-id="0564e-206">如果是多重網路介面 VM，主機名稱會對應至主要網路介面的私人 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="0564e-206">In case of a multi-network interface VM, the hostname is mapped to the private IP address of the primary network interface.</span></span>

<span data-ttu-id="0564e-207">使用 Azure 受管理 DNS 伺服器設定的 VM，能夠將其 VNet 內所有 VM 的主機名稱解析為其私人 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="0564e-207">VMs configured with Azure-managed DNS servers will be able to resolve the hostnames of all VMs within their VNet to their private IP addresses.</span></span>

### <a name="internal-load-balancers-ilb--application-gateways"></a><span data-ttu-id="0564e-208">內部負載平衡器 (ILB) 與應用程式閘道</span><span class="sxs-lookup"><span data-stu-id="0564e-208">Internal load balancers (ILB) & Application gateways</span></span>
<span data-ttu-id="0564e-209">您可以將私人 IP 位址指派給 [Azure 內部負載平衡器](../load-balancer/load-balancer-internal-overview.md) (ILB) 或 [Azure 應用程式閘道](../application-gateway/application-gateway-introduction.md)的**前端**組態。</span><span class="sxs-lookup"><span data-stu-id="0564e-209">You can assign a private IP address to the **front end** configuration of an [Azure Internal Load Balancer](../load-balancer/load-balancer-internal-overview.md) (ILB) or an [Azure Application Gateway](../application-gateway/application-gateway-introduction.md).</span></span> <span data-ttu-id="0564e-210">此私人 IP 位址可做為內部端點，只能存取其虛擬網路 (VNet) 內的資源與連線到 VNet 的遠端網路。</span><span class="sxs-lookup"><span data-stu-id="0564e-210">This private IP address serves as an internal endpoint, accessible only to the resources within its virtual network (VNet) and the remote networks connected to the VNet.</span></span> <span data-ttu-id="0564e-211">您可以將動態或靜態私人 IP 位址指派給前端組態。</span><span class="sxs-lookup"><span data-stu-id="0564e-211">You can assign either a dynamic or static private IP address to the front end configuration.</span></span>

### <a name="at-a-glance"></a><span data-ttu-id="0564e-212">快速總覽</span><span class="sxs-lookup"><span data-stu-id="0564e-212">At-a-glance</span></span>
<span data-ttu-id="0564e-213">下表顯示特定的屬性，私人 IP 位址可透過它關聯到最上層資源，以及顯示可以使用的可能配置方法 (動態或靜態)。</span><span class="sxs-lookup"><span data-stu-id="0564e-213">The table below shows the specific property through which a private IP address can be associated to a top-level resource, and the possible allocation methods (dynamic or static) that can be used.</span></span>

| <span data-ttu-id="0564e-214">最上層資源</span><span class="sxs-lookup"><span data-stu-id="0564e-214">Top-level resource</span></span> | <span data-ttu-id="0564e-215">IP 位址關聯</span><span class="sxs-lookup"><span data-stu-id="0564e-215">IP address association</span></span> | <span data-ttu-id="0564e-216">動態</span><span class="sxs-lookup"><span data-stu-id="0564e-216">Dynamic</span></span> | <span data-ttu-id="0564e-217">靜態</span><span class="sxs-lookup"><span data-stu-id="0564e-217">Static</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="0564e-218">虛擬機器</span><span class="sxs-lookup"><span data-stu-id="0564e-218">Virtual machine</span></span> |<span data-ttu-id="0564e-219">Linux</span><span class="sxs-lookup"><span data-stu-id="0564e-219">Network interface</span></span> |<span data-ttu-id="0564e-220">是</span><span class="sxs-lookup"><span data-stu-id="0564e-220">Yes</span></span> |<span data-ttu-id="0564e-221">是</span><span class="sxs-lookup"><span data-stu-id="0564e-221">Yes</span></span> |
| <span data-ttu-id="0564e-222">負載平衡器</span><span class="sxs-lookup"><span data-stu-id="0564e-222">Load balancer</span></span> |<span data-ttu-id="0564e-223">前端組態</span><span class="sxs-lookup"><span data-stu-id="0564e-223">Front end configuration</span></span> |<span data-ttu-id="0564e-224">是</span><span class="sxs-lookup"><span data-stu-id="0564e-224">Yes</span></span> |<span data-ttu-id="0564e-225">是</span><span class="sxs-lookup"><span data-stu-id="0564e-225">Yes</span></span> |
| <span data-ttu-id="0564e-226">前端</span><span class="sxs-lookup"><span data-stu-id="0564e-226">Application gateway</span></span> |<span data-ttu-id="0564e-227">前端組態</span><span class="sxs-lookup"><span data-stu-id="0564e-227">Front end configuration</span></span> |<span data-ttu-id="0564e-228">是</span><span class="sxs-lookup"><span data-stu-id="0564e-228">Yes</span></span> |<span data-ttu-id="0564e-229">是</span><span class="sxs-lookup"><span data-stu-id="0564e-229">Yes</span></span> |

## <a name="limits"></a><span data-ttu-id="0564e-230">限制</span><span class="sxs-lookup"><span data-stu-id="0564e-230">Limits</span></span>
<span data-ttu-id="0564e-231">加諸於 IP 位址上的限制，如在 Azure 中的完整[網路限制](../azure-subscription-service-limits.md#networking-limits)所示。</span><span class="sxs-lookup"><span data-stu-id="0564e-231">The limits imposed on IP addressing are indicated in the full set of [limits for networking](../azure-subscription-service-limits.md#networking-limits) in Azure.</span></span> <span data-ttu-id="0564e-232">這些限制是針對每一區域和每一訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="0564e-232">These limits are per region and per subscription.</span></span> <span data-ttu-id="0564e-233">您可以 [連絡支援人員](https://portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade) ，以根據您的業務需求將預設上限調升到最高上限。</span><span class="sxs-lookup"><span data-stu-id="0564e-233">You can [contact support](https://portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade) to increase the default limits up to the maximum limits based on your business needs.</span></span>

## <a name="pricing"></a><span data-ttu-id="0564e-234">價格</span><span class="sxs-lookup"><span data-stu-id="0564e-234">Pricing</span></span>
<span data-ttu-id="0564e-235">公用 IP 位址可能需要少許費用。</span><span class="sxs-lookup"><span data-stu-id="0564e-235">Public IP addresses may have a nominal charge.</span></span> <span data-ttu-id="0564e-236">若要深入了解 IP 位址的價格，請參閱 [IP 位址價格](https://azure.microsoft.com/pricing/details/ip-addresses)頁面。</span><span class="sxs-lookup"><span data-stu-id="0564e-236">To learn more about IP address pricing in Azure, review the [IP address pricing](https://azure.microsoft.com/pricing/details/ip-addresses) page.</span></span>

## <a name="next-steps"></a><span data-ttu-id="0564e-237">後續步驟</span><span class="sxs-lookup"><span data-stu-id="0564e-237">Next steps</span></span>
* [<span data-ttu-id="0564e-238">使用 Azure 入口網站部署使用靜態公用 IP 的 VM</span><span class="sxs-lookup"><span data-stu-id="0564e-238">Deploy a VM with a static public IP using the Azure portal</span></span>](virtual-network-deploy-static-pip-arm-portal.md)
* [<span data-ttu-id="0564e-239">使用範本部署使用靜態公用 IP 的 VM</span><span class="sxs-lookup"><span data-stu-id="0564e-239">Deploy a VM with a static public IP using a template</span></span>](virtual-network-deploy-static-pip-arm-template.md)
* [<span data-ttu-id="0564e-240">部署使用靜態私人 IP 位址的 VM</span><span class="sxs-lookup"><span data-stu-id="0564e-240">Deploy a VM with a static private IP address using the Azure portal</span></span>](virtual-networks-static-private-ip-arm-pportal.md)
