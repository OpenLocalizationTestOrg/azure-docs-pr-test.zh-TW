---
title: "建立、變更或刪除 Azure 公用 IP 位置 | Microsoft Docs"
description: "了解如何建立、變更或刪除公用 IP 位址。"
services: virtual-network
documentationcenter: na
author: jimdial
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: bb71abaf-b2d9-4147-b607-38067a10caf6
ms.service: virtual-network
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/24/2017
ms.author: jdial
ms.openlocfilehash: 9a51cd703266e330550a2a2f4e6a4d46722fec09
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/03/2017
---
# <a name="create-change-or-delete-a-public-ip-address"></a><span data-ttu-id="14d00-103">建立、變更或刪除公用 IP 位址</span><span class="sxs-lookup"><span data-stu-id="14d00-103">Create, change, or delete a public IP address</span></span>

<span data-ttu-id="14d00-104">了解公用 IP 位址，以及如何建立、變更和刪除公用 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="14d00-104">Learn about a public IP address and how to create, change, and delete one.</span></span> <span data-ttu-id="14d00-105">公用 IP 位址是可加以設定的資源。</span><span class="sxs-lookup"><span data-stu-id="14d00-105">A public IP address is a resource with its own configurable settings.</span></span> <span data-ttu-id="14d00-106">將公用 IP 位址指派給其他 Azure 資源，能夠：</span><span class="sxs-lookup"><span data-stu-id="14d00-106">Assigning a public IP address to other Azure resources enables:</span></span>
- <span data-ttu-id="14d00-107">對以下資源進行輸入網際網路連線：Azure 虛擬機器 (VM)、Azure 虛擬機器擴展集、Azure VPN 閘道、應用程式閘道和網際網路面向的 Azure Load Balancer。</span><span class="sxs-lookup"><span data-stu-id="14d00-107">Inbound Internet connectivity to resources such as Azure Virtual Machines (VM), Azure Virtual Machine Scale Sets, Azure VPN Gateway, Application gateways, and Internet-facing Azure Load Balancers.</span></span> <span data-ttu-id="14d00-108">如果沒有指派的公用 IP 位址，Azure 資源無法從網際網路接收輸入的通訊。</span><span class="sxs-lookup"><span data-stu-id="14d00-108">Azure resources cannot receive inbound communication from the Internet without an assigned public IP address.</span></span> <span data-ttu-id="14d00-109">某些 Azure 資源本質上就可透過公用 IP 位址存取，而其他資源必須有指派的公用 IP 位址，才可以從網際網路存取。</span><span class="sxs-lookup"><span data-stu-id="14d00-109">While some Azure resources are inherently accessible through public IP addresses, other resources must have public IP addresses assigned to them to be accessible from the Internet.</span></span>
- <span data-ttu-id="14d00-110">使用可預測 IP 位址對網際網路進行輸出連線。</span><span class="sxs-lookup"><span data-stu-id="14d00-110">Outbound connectivity to the Internet using a predictable IP address.</span></span> <span data-ttu-id="14d00-111">例如，虛擬機器不需有指派的公用 IP 位址，即可對網際網路進行輸出通訊，但其位址是由 Azure 網路位址轉譯。</span><span class="sxs-lookup"><span data-stu-id="14d00-111">For example, a virtual machine can communicate outbound to the Internet without a public IP address assigned to it, but its address is network address translated by Azure to an unpredictable public address.</span></span> <span data-ttu-id="14d00-112">指派公用 IP 位址給資源，可讓您知道輸出連線所使用的 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="14d00-112">Assigning a public IP address to a resource enables you to know which IP address is used for the outbound connection.</span></span> <span data-ttu-id="14d00-113">雖然可預測，但位址可能根據選擇的指派方法而有所變更。</span><span class="sxs-lookup"><span data-stu-id="14d00-113">Though predictable, the address can change, depending on the assignment method chosen.</span></span> <span data-ttu-id="14d00-114">如需詳細資訊，請參閱＜[建立公用 IP 位址](#create-a-public-ip-address)＞。</span><span class="sxs-lookup"><span data-stu-id="14d00-114">For more information, see [Create a public IP address](#create-a-public-ip-address).</span></span> <span data-ttu-id="14d00-115">若要深入了解 Azure 資源的輸出連線，請閱讀[了解輸出連線](../load-balancer/load-balancer-outbound-connections.md?toc=%2fazure%2fvirtual-network%2ftoc.json)一文。</span><span class="sxs-lookup"><span data-stu-id="14d00-115">To learn more about outbound connections from Azure resources, read the [Understand outbound connections](../load-balancer/load-balancer-outbound-connections.md?toc=%2fazure%2fvirtual-network%2ftoc.json) article.</span></span>

## <a name="before-you-begin"></a><span data-ttu-id="14d00-116">開始之前</span><span class="sxs-lookup"><span data-stu-id="14d00-116">Before you begin</span></span>

<span data-ttu-id="14d00-117">在完成本文任一節的任何步驟之前，請先完成下列工作︰</span><span class="sxs-lookup"><span data-stu-id="14d00-117">Complete the following tasks before completing any steps in any section of this article:</span></span>

- <span data-ttu-id="14d00-118">檢閱 [Azure 限制](../azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#azure-resource-manager-virtual-networking-limits)一文，以了解公用 IP 位址的限制。</span><span class="sxs-lookup"><span data-stu-id="14d00-118">Review the [Azure limits](../azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#azure-resource-manager-virtual-networking-limits) article to learn about limits for public IP addresses.</span></span>
- <span data-ttu-id="14d00-119">使用 Azure 帳戶來登入 Azure [入口網站](https://portal.azure.com)、Azure 命令列介面 (CLI) 或 Azure PowerShell。</span><span class="sxs-lookup"><span data-stu-id="14d00-119">Log in to the Azure [portal](https://portal.azure.com), Azure command-line interface (CLI), or Azure PowerShell with an Azure account.</span></span> <span data-ttu-id="14d00-120">如果您還沒有 Azure 帳戶，請註冊[免費試用帳戶](https://azure.microsoft.com/free)。</span><span class="sxs-lookup"><span data-stu-id="14d00-120">If you don't already have an Azure account, sign up for a [free trial account](https://azure.microsoft.com/free).</span></span>
- <span data-ttu-id="14d00-121">如果您使用 PowerShell 命令來完成本文中的工作，請[安裝和設定 Azure PowerShell](/powershell/azureps-cmdlets-docs?toc=%2fazure%2fvirtual-network%2ftoc.json)。</span><span class="sxs-lookup"><span data-stu-id="14d00-121">If using PowerShell commands to complete tasks in this article, [install and configure Azure PowerShell](/powershell/azureps-cmdlets-docs?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span> <span data-ttu-id="14d00-122">請確定您已安裝最新版的 Azure PowerShell commandlet。</span><span class="sxs-lookup"><span data-stu-id="14d00-122">Ensure you have the most recent version of the Azure PowerShell commandlets installed.</span></span> <span data-ttu-id="14d00-123">若要取得 PowerShell 命令的說明 (包含範例)，請輸入 `get-help <command> -full`。</span><span class="sxs-lookup"><span data-stu-id="14d00-123">To get help for PowerShell commands, with examples, type `get-help <command> -full`.</span></span>
- <span data-ttu-id="14d00-124">如果您使用 Azure 命令列介面 (CLI) 命令來完成本文中的工作，請[安裝和設定 Azure CLI](/cli/azure/install-azure-cli?toc=%2fazure%2fvirtual-network%2ftoc.json)。</span><span class="sxs-lookup"><span data-stu-id="14d00-124">If using Azure command-line interface (CLI) commands to complete tasks in this article, [install and configure the Azure CLI](/cli/azure/install-azure-cli?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span> <span data-ttu-id="14d00-125">請確定您已安裝最新版的 Azure CLI。</span><span class="sxs-lookup"><span data-stu-id="14d00-125">Ensure you have the most recent version of the Azure CLI installed.</span></span> <span data-ttu-id="14d00-126">若要取得 CLI 命令的說明，請輸入 `az <command> --help`。</span><span class="sxs-lookup"><span data-stu-id="14d00-126">To get help for CLI commands, type `az <command> --help`.</span></span> <span data-ttu-id="14d00-127">您可以不安裝 CLI 及其必要條件，而是改用 Azure Cloud Shell。</span><span class="sxs-lookup"><span data-stu-id="14d00-127">Rather than installing the CLI and its pre-requisites, you can use the Azure Cloud Shell.</span></span> <span data-ttu-id="14d00-128">Azure Cloud Shell 是免費的 Bash Shell，您可以直接在 Azure 入口網站內執行。</span><span class="sxs-lookup"><span data-stu-id="14d00-128">The Azure Cloud Shell is a free Bash shell that you can run directly within the Azure portal.</span></span> <span data-ttu-id="14d00-129">它具有預先安裝和設定的 Azure CLI，可與您的帳戶搭配使用。</span><span class="sxs-lookup"><span data-stu-id="14d00-129">It has the Azure CLI preinstalled and configured to use with your account.</span></span> <span data-ttu-id="14d00-130">若要使用 Cloud Shell，請按一下[入口網站](https://portal.azure.com)頂端的 Cloud Shell (**> _**) 按鈕。</span><span class="sxs-lookup"><span data-stu-id="14d00-130">To use the Cloud Shell, click the Cloud Shell **>_** button at the top of the [portal](https://portal.azure.com).</span></span>

<span data-ttu-id="14d00-131">公用 IP 位址需要少許費用。</span><span class="sxs-lookup"><span data-stu-id="14d00-131">Public IP addresses have a nominal charge.</span></span> <span data-ttu-id="14d00-132">若要檢視價格，請閱讀 [IP 位址價格](https://azure.microsoft.com/pricing/details/ip-addresses)頁面。</span><span class="sxs-lookup"><span data-stu-id="14d00-132">To view the pricing, read the [IP address pricing](https://azure.microsoft.com/pricing/details/ip-addresses) page.</span></span> 

## <a name="create-a-public-ip-address"></a><span data-ttu-id="14d00-133">建立公用 IP 位址</span><span class="sxs-lookup"><span data-stu-id="14d00-133">Create a public IP address</span></span>

1. <span data-ttu-id="14d00-134">使用具備您訂用帳戶網路參與者角色 (最低) 權限的帳戶登入 [Azure 入口網站](https://portal.azure.com)。</span><span class="sxs-lookup"><span data-stu-id="14d00-134">Log in to the [Azure portal](https://portal.azure.com) with an account that is assigned (at a minimum) permissions for the Network Contributor role for your subscription.</span></span> <span data-ttu-id="14d00-135">請閱讀 [Azure 角色型存取控制的內建角色](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor)一文，深入了解如何將角色和權限指派給帳戶。</span><span class="sxs-lookup"><span data-stu-id="14d00-135">Read the [Built-in roles for Azure role-based access control](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor) article to learn more about assigning roles and permissions to accounts.</span></span>
2. <span data-ttu-id="14d00-136">在 Azure 入口網站頂端包含「搜尋資源」文字的方塊中，輸入「公用 ip 位址」。</span><span class="sxs-lookup"><span data-stu-id="14d00-136">In the box that contains the text *Search resources* at the top of the Azure portal, type *public ip address*.</span></span> <span data-ttu-id="14d00-137">當「公用 IP 位址」出現於搜尋結果時，按一下它。</span><span class="sxs-lookup"><span data-stu-id="14d00-137">When **Public IP addresses** appears in the search results, click it.</span></span>
3. <span data-ttu-id="14d00-138">在顯示的 [公用 IP 位址] 刀鋒視窗中按一下 [+ 新增]。</span><span class="sxs-lookup"><span data-stu-id="14d00-138">Click **+ Add** in the **Public IP address** blade that appears.</span></span>
4. <span data-ttu-id="14d00-139">在顯示的 [建立公用 IP 位址] 刀鋒視窗中輸入或選取下列設定的值，然後按一下 [建立]：</span><span class="sxs-lookup"><span data-stu-id="14d00-139">Enter or select values for the following settings in the **Create public IP address** blade that appears, then click **Create**:</span></span>

    |<span data-ttu-id="14d00-140">設定</span><span class="sxs-lookup"><span data-stu-id="14d00-140">Setting</span></span>|<span data-ttu-id="14d00-141">必要？</span><span class="sxs-lookup"><span data-stu-id="14d00-141">Required?</span></span>|<span data-ttu-id="14d00-142">詳細資料</span><span class="sxs-lookup"><span data-stu-id="14d00-142">Details</span></span>|
    |---|---|---|
    |<span data-ttu-id="14d00-143">名稱</span><span class="sxs-lookup"><span data-stu-id="14d00-143">Name</span></span>|<span data-ttu-id="14d00-144">是</span><span class="sxs-lookup"><span data-stu-id="14d00-144">Yes</span></span>|<span data-ttu-id="14d00-145">名稱必須是您選取的資源群組中唯一的名稱。</span><span class="sxs-lookup"><span data-stu-id="14d00-145">The name must be unique within the resource group you select.</span></span>|
    |<span data-ttu-id="14d00-146">IP 版本</span><span class="sxs-lookup"><span data-stu-id="14d00-146">IP Version</span></span>|<span data-ttu-id="14d00-147">是</span><span class="sxs-lookup"><span data-stu-id="14d00-147">Yes</span></span>| <span data-ttu-id="14d00-148">選取 IPv4 或 IPv6。</span><span class="sxs-lookup"><span data-stu-id="14d00-148">Select IPv4 or IPv6.</span></span> <span data-ttu-id="14d00-149">公用的 IPv4 位址可指派給數個 Azure 資源，而 IPv6 公用 IP 位址只可指派給網際網路面向的負載平衡器。</span><span class="sxs-lookup"><span data-stu-id="14d00-149">While public IPv4 addresses can be assigned to several Azure resources, an IPv6 public IP address can only be assigned to an Internet-facing load balancer.</span></span> <span data-ttu-id="14d00-150">負載平衡器可將 IPv6 的流量負載分散到 Azure 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="14d00-150">The load balancer can load balance IPv6 traffic to Azure virtual machines.</span></span> <span data-ttu-id="14d00-151">深入了解[將 IPv6 流量負載分散到虛擬機器](../load-balancer/load-balancer-ipv6-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json)。</span><span class="sxs-lookup"><span data-stu-id="14d00-151">Learn more about [load balancing IPv6 traffic to virtual machines](../load-balancer/load-balancer-ipv6-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span>
    |<span data-ttu-id="14d00-152">IP 位址指派</span><span class="sxs-lookup"><span data-stu-id="14d00-152">IP address assignment</span></span>|<span data-ttu-id="14d00-153">是</span><span class="sxs-lookup"><span data-stu-id="14d00-153">Yes</span></span>|<span data-ttu-id="14d00-154">**動態︰**只有在公用 IP 位址與 VM 所連結的 NIC 相關聯且該 VM 第一次啟動之後，才會指派動態位址。</span><span class="sxs-lookup"><span data-stu-id="14d00-154">**Dynamic:** Dynamic addresses are assigned only after the public IP address is associated to a NIC attached to a VM and the VM is started for the first time.</span></span> <span data-ttu-id="14d00-155">如果連結 NIC 的 VM 已停止 (已解除配置)，則可變更動態位址。</span><span class="sxs-lookup"><span data-stu-id="14d00-155">Dynamic addresses can change if the VM the NIC is attached to is stopped (deallocated).</span></span> <span data-ttu-id="14d00-156">如果 VM 已重新啟動或停止 (但未解除配置)，則位址維持不變。</span><span class="sxs-lookup"><span data-stu-id="14d00-156">The address remains the same if the VM is rebooted or stopped (but not deallocated).</span></span> <span data-ttu-id="14d00-157">**靜態︰**建立公用 IP 位址時會指派靜態位址。</span><span class="sxs-lookup"><span data-stu-id="14d00-157">**Static:** Static addresses are assigned when the public IP address is created.</span></span> <span data-ttu-id="14d00-158">即使 VM 處於已停止 (已解除配置) 狀態，靜態位址也不會變更。</span><span class="sxs-lookup"><span data-stu-id="14d00-158">Static addresses do not change even if the VM is put in the stopped (deallocated) state.</span></span> <span data-ttu-id="14d00-159">只有在刪除 NIC 後才會釋出位址。</span><span class="sxs-lookup"><span data-stu-id="14d00-159">The address is only released when the NIC is deleted.</span></span> <span data-ttu-id="14d00-160">您可以在建立 NIC 之後，變更指派方法。</span><span class="sxs-lookup"><span data-stu-id="14d00-160">You can change the assignment method after the NIC is created.</span></span> <span data-ttu-id="14d00-161">如果您選取 IPv6 作為 **IP 版本**，唯一可用的指派方法為**動態**。</span><span class="sxs-lookup"><span data-stu-id="14d00-161">If you select IPv6 for the **IP version**, the only available assignment method is **Dynamic**.</span></span>|
    |<span data-ttu-id="14d00-162">閒置逾時 (分鐘)</span><span class="sxs-lookup"><span data-stu-id="14d00-162">Idle timeout (minutes)</span></span>|<span data-ttu-id="14d00-163">否</span><span class="sxs-lookup"><span data-stu-id="14d00-163">No</span></span>|<span data-ttu-id="14d00-164">不需依賴用戶端傳送保持連線訊息，讓 TCP 或 HTTP 連線保持開啟的分鐘數。</span><span class="sxs-lookup"><span data-stu-id="14d00-164">How many minutes to keep a TCP or HTTP connection open without relying on clients to send keep-alive messages.</span></span> <span data-ttu-id="14d00-165">如果您選取 IPv6 作為 **IP 版本**，則無法變更此值。</span><span class="sxs-lookup"><span data-stu-id="14d00-165">If you select IPv6 for **IP Version**, this value can't be changed.</span></span> |
    |<span data-ttu-id="14d00-166">DNS 名稱標籤</span><span class="sxs-lookup"><span data-stu-id="14d00-166">DNS name label</span></span>|<span data-ttu-id="14d00-167">否</span><span class="sxs-lookup"><span data-stu-id="14d00-167">No</span></span>|<span data-ttu-id="14d00-168">在您建立名稱的 Azure 位置 (跨越所有訂用帳戶和所有位置) 中必須是唯一的。</span><span class="sxs-lookup"><span data-stu-id="14d00-168">Must be unique within the Azure location you create the name in (across all subscriptions and all customers).</span></span> <span data-ttu-id="14d00-169">Azure 公用 DNS 服務會自動登錄名稱和 IP 位址，以便您連線至具有此名稱的資源。</span><span class="sxs-lookup"><span data-stu-id="14d00-169">The Azure public DNS service automatically registers the name and IP address so you can connect to a resource with the name.</span></span> <span data-ttu-id="14d00-170">Azure 會將 *location.cloudapp.azure.com* (其中 location 是您選取的位置) 附加至您提供的名稱，以建立完整的 DNS 名稱。</span><span class="sxs-lookup"><span data-stu-id="14d00-170">Azure appends *location.cloudapp.azure.com* (where location is the location you select) to the name you provide to create the fully qualified DNS name.</span></span> <span data-ttu-id="14d00-171">如果您選擇兩個位址版本都建立，則會指派相同的 DNS 名稱給 IPv4 和 IPv6 位址。</span><span class="sxs-lookup"><span data-stu-id="14d00-171">If you choose to create both address versions, the same DNS name is assigned to both the IPv4 and IPv6 addresses.</span></span> <span data-ttu-id="14d00-172">Azure DNS 服務包含 IPV4 A 和 IPv6 AAAA 名稱記錄，並且會在查詢 DNS 名稱時回應這兩個記錄。</span><span class="sxs-lookup"><span data-stu-id="14d00-172">The Azure DNS service contains both IPv4 A and IPv6 AAAA name records and responds with both records when the DNS name is looked up.</span></span> <span data-ttu-id="14d00-173">用戶端選擇要與哪一個位址 (IPv4 或 IPv6) 通訊。</span><span class="sxs-lookup"><span data-stu-id="14d00-173">The client chooses which address (IPv4 or IPv6) to communicate with.</span></span>|
    |<span data-ttu-id="14d00-174">建立 IPv6 (或 IPv4) 位址</span><span class="sxs-lookup"><span data-stu-id="14d00-174">Create an IPv6 (or IPv4) address</span></span>|<span data-ttu-id="14d00-175">否</span><span class="sxs-lookup"><span data-stu-id="14d00-175">No</span></span>| <span data-ttu-id="14d00-176">顯示 IPv6 或 IPv4 取決於您選取的 **IP 版本**。</span><span class="sxs-lookup"><span data-stu-id="14d00-176">Whether IPv6 or IPv4 is displayed is dependent on what you select for **IP Version**.</span></span> <span data-ttu-id="14d00-177">例如，如果您選取 **IPv4** 作為 **IP 版本**，則此處會顯示 **IPv6**。</span><span class="sxs-lookup"><span data-stu-id="14d00-177">For example, if you select **IPv4** for **IP Version**, **IPv6** is displayed here.</span></span>
    |<span data-ttu-id="14d00-178">名稱 (僅在您核取 [建立 IPv6 (或 IPv4) 位址] 核取方塊時顯示)</span><span class="sxs-lookup"><span data-stu-id="14d00-178">Name (Only visible if you checked the **Create an IPv6 (or IPv4) address** checkbox)</span></span>|<span data-ttu-id="14d00-179">是 (如果您選取 [建立 IPv6] \(或 IPv4) 核取方塊)。</span><span class="sxs-lookup"><span data-stu-id="14d00-179">Yes, if you select the **Create an IPv6** (or IPv4) checkbox.</span></span>|<span data-ttu-id="14d00-180">該名稱必須與此清單中的第一個**名稱**不同。</span><span class="sxs-lookup"><span data-stu-id="14d00-180">The name must be different than the name you enter for the first **Name** in this list.</span></span> <span data-ttu-id="14d00-181">如果您選擇同時建立 IPv4 和 IPv6 位址，則入口網站會建立兩個個別的公用 IP 位址資源，並各指派一個 IP 位址版本。</span><span class="sxs-lookup"><span data-stu-id="14d00-181">If you choose to create both an IPv4 and an IPv6 address, the portal creates two separate public IP address resources, one with each IP address version assigned to it.</span></span>|
    |<span data-ttu-id="14d00-182">IP 位址指派 (僅在您核取 [建立 IPv6 (或 IPv4) 位址] 核取方塊時顯示)</span><span class="sxs-lookup"><span data-stu-id="14d00-182">IP address assignment (Only visible if you checked the **Create an IPv6 (or IPv4) address** checkbox)</span></span>|<span data-ttu-id="14d00-183">是 (如果您選取 [建立 IPv6] \(或 IPv4) 核取方塊)。</span><span class="sxs-lookup"><span data-stu-id="14d00-183">Yes, if you select the **Create an IPv6** (or IPv4) checkbox.</span></span>|<span data-ttu-id="14d00-184">如果核取方塊顯示**建立 IPv4 位址**，表示您可以選擇指派方法。</span><span class="sxs-lookup"><span data-stu-id="14d00-184">If the checkbox says **Create an IPv4 address**, you can select an assignment method.</span></span> <span data-ttu-id="14d00-185">如果核取方塊顯示**建立 IPv6 位址**，表示您無法選擇指派方法，因為指派方法必須為**動態**。</span><span class="sxs-lookup"><span data-stu-id="14d00-185">If the checkbox says **Create an IPv6 address**, you cannot select an assignment method, as it must be **Dynamic**.</span></span>|
    |<span data-ttu-id="14d00-186">訂用帳戶</span><span class="sxs-lookup"><span data-stu-id="14d00-186">Subscription</span></span>|<span data-ttu-id="14d00-187">是</span><span class="sxs-lookup"><span data-stu-id="14d00-187">Yes</span></span>|<span data-ttu-id="14d00-188">所在的[訂用帳戶](../azure-glossary-cloud-terminology.md?toc=%2fazure%2fvirtual-network%2ftoc.json#subscription)必須與您想要與公用 IP 位址建立關聯的資源相同。</span><span class="sxs-lookup"><span data-stu-id="14d00-188">Must exist in the same [subscription](../azure-glossary-cloud-terminology.md?toc=%2fazure%2fvirtual-network%2ftoc.json#subscription) as the resource you want to associate the public IP address to.</span></span>|
    |<span data-ttu-id="14d00-189">資源群組</span><span class="sxs-lookup"><span data-stu-id="14d00-189">Resource group</span></span>|<span data-ttu-id="14d00-190">是</span><span class="sxs-lookup"><span data-stu-id="14d00-190">Yes</span></span>|<span data-ttu-id="14d00-191">所在的[資源群組](../azure-glossary-cloud-terminology.md?toc=%2fazure%2fvirtual-network%2ftoc.json#resource-group)可以與您想要與公用 IP 位址建立關聯的資源相同或不同。</span><span class="sxs-lookup"><span data-stu-id="14d00-191">Can exist in the same, or different, [resource group](../azure-glossary-cloud-terminology.md?toc=%2fazure%2fvirtual-network%2ftoc.json#resource-group) as the resource you want to associate the public IP address to.</span></span>|
    |<span data-ttu-id="14d00-192">位置</span><span class="sxs-lookup"><span data-stu-id="14d00-192">Location</span></span>|<span data-ttu-id="14d00-193">是</span><span class="sxs-lookup"><span data-stu-id="14d00-193">Yes</span></span>|<span data-ttu-id="14d00-194">所在的[位置](https://azure.microsoft.com/regions) (也稱為區域) 必須與您想要與公用 IP 位址建立關聯的資源相同。</span><span class="sxs-lookup"><span data-stu-id="14d00-194">Must exist in the same [location](https://azure.microsoft.com/regions), also referred to as region, as the resource you want to associate the public IP address to.</span></span>|

<span data-ttu-id="14d00-195">**命令**</span><span class="sxs-lookup"><span data-stu-id="14d00-195">**Commands**</span></span>

<span data-ttu-id="14d00-196">雖然入口網站提供建立兩個公用 IP 位址資源 (一個 IPv4 和一個 IPv6) 的選項，但下列的 CLI 和 PowerShell 命令則是會以其中一個 IP 版本的位址建立一個資源。</span><span class="sxs-lookup"><span data-stu-id="14d00-196">Though the portal provides the option to create two public IP address resources (one IPv4 and one IPv6), the following CLI and PowerShell commands create one resource with an address for one IP version or the other.</span></span> <span data-ttu-id="14d00-197">如果您想要兩個公用 IP 位址資源 (每個 IP 版本各一個)，您必須執行該命令兩次，並針對公用 IP 位址資源指定不同名稱和版本。</span><span class="sxs-lookup"><span data-stu-id="14d00-197">If you want two public IP address resources, one for each IP version, you must run the command twice, specifying different names and versions for the public IP address resources.</span></span> 

|<span data-ttu-id="14d00-198">工具</span><span class="sxs-lookup"><span data-stu-id="14d00-198">Tool</span></span>|<span data-ttu-id="14d00-199">命令</span><span class="sxs-lookup"><span data-stu-id="14d00-199">Command</span></span>|
|---|---|
|<span data-ttu-id="14d00-200">CLI</span><span class="sxs-lookup"><span data-stu-id="14d00-200">CLI</span></span>|[<span data-ttu-id="14d00-201">az network public-ip create</span><span class="sxs-lookup"><span data-stu-id="14d00-201">az network public-ip create</span></span>](/cli/azure/network/public-ip?toc=%2fazure%2fvirtual-network%2ftoc.json#create)|
|<span data-ttu-id="14d00-202">PowerShell</span><span class="sxs-lookup"><span data-stu-id="14d00-202">PowerShell</span></span>|[<span data-ttu-id="14d00-203">New-AzureRmPublicIpAddress</span><span class="sxs-lookup"><span data-stu-id="14d00-203">New-AzureRmPublicIpAddress</span></span>](/powershell/module/azurerm.network/new-azurermpublicipaddress)|

## <a name="view-change-settings-for-or-delete-a-public-ip-address"></a><span data-ttu-id="14d00-204">檢視、變更公用 IP 位址的設定，或刪除公用 IP 位址</span><span class="sxs-lookup"><span data-stu-id="14d00-204">View, change settings for, or delete a public IP address</span></span>

1. <span data-ttu-id="14d00-205">使用具備您訂用帳戶網路參與者角色 (最低) 權限的帳戶登入 [Azure 入口網站](https://portal.azure.com)。</span><span class="sxs-lookup"><span data-stu-id="14d00-205">Log in to the [Azure portal](https://portal.azure.com) with an account that is assigned (at a minimum) permissions for the Network Contributor role for your subscription.</span></span> <span data-ttu-id="14d00-206">請閱讀 [Azure 角色型存取控制的內建角色](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor)一文，深入了解如何將角色和權限指派給帳戶。</span><span class="sxs-lookup"><span data-stu-id="14d00-206">Read the [Built-in roles for Azure role-based access control](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor) article to learn more about assigning roles and permissions to accounts.</span></span>
2. <span data-ttu-id="14d00-207">在 Azure 入口網站頂端包含「搜尋資源」文字的方塊中，輸入「公用 ip 位址」。</span><span class="sxs-lookup"><span data-stu-id="14d00-207">In the box that contains the text *Search resources* at the top of the Azure portal, type *public ip address*.</span></span> <span data-ttu-id="14d00-208">當「公用 IP 位址」出現於搜尋結果時，按一下它。</span><span class="sxs-lookup"><span data-stu-id="14d00-208">When **Public IP addresses** appears in the search results, click it.</span></span>
3. <span data-ttu-id="14d00-209">在顯示的 [公用 IP 位址] 刀鋒視窗中，按一下您要檢視、變更設定，或刪除的公用 IP 位址名稱。</span><span class="sxs-lookup"><span data-stu-id="14d00-209">In the **Public IP addresses** blade that appears, click the name of the public IP address you want to view, change settings for, or delete.</span></span>
4. <span data-ttu-id="14d00-210">在針對公用 IP 位址顯示的刀鋒視窗中，根據您要檢視、刪除或變更公用 IP 位址，完成下列其中一個選項。</span><span class="sxs-lookup"><span data-stu-id="14d00-210">In the blade that appears for the public IP address, complete one of the following options depending on whether you want to view, delete, or change the public IP address.</span></span>
    - <span data-ttu-id="14d00-211">**檢視**：刀鋒視窗的 [概觀] 區段會顯示公用 IP 位址的主要設定，例如和該位址關聯的網路介面 (如果位址與網路介面關聯)。</span><span class="sxs-lookup"><span data-stu-id="14d00-211">**View**: The **Overview** section of the blade shows key settings for the public IP address, such as the network interface it's associated to (if the address is associated to a network interface).</span></span> <span data-ttu-id="14d00-212">入口網站不會顯示位址版本 (IPv4 或 IPv6)。</span><span class="sxs-lookup"><span data-stu-id="14d00-212">The portal does not display the version of the address (IPv4 or IPv6).</span></span> <span data-ttu-id="14d00-213">若要檢視版本資訊，請使用 PowerShell 或 CLI 命令來檢視公用 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="14d00-213">To view the version information, use the PowerShell or CLI command to view the public IP address.</span></span> <span data-ttu-id="14d00-214">如果 IP 位址版本是 IPv6 時，指派的位址不會顯示在入口網站、PowerShell 或 CLI 。</span><span class="sxs-lookup"><span data-stu-id="14d00-214">If the IP address version is IPv6, the assigned address is not displayed by the portal, PowerShell, or the CLI.</span></span> 
    - <span data-ttu-id="14d00-215">**刪除**：若要刪除公用 IP 位址，請在刀鋒視窗的 [概觀] 區段中按一下 [刪除]。</span><span class="sxs-lookup"><span data-stu-id="14d00-215">**Delete**: To delete the public IP address, click **Delete** in the **Overview** section of the blade.</span></span> <span data-ttu-id="14d00-216">如果位址目前與 IP 組態相關聯，則無法加以刪除。</span><span class="sxs-lookup"><span data-stu-id="14d00-216">If the address is currently associated to an IP configuration, it cannot be deleted.</span></span> <span data-ttu-id="14d00-217">如果位址目前與組態相關聯，請按一下 [解除關聯] 來解除位址與 IP 組態的關聯。</span><span class="sxs-lookup"><span data-stu-id="14d00-217">If the address is currently associated with a configuration, click **Dissociate** to dissociate the address from the IP configuration.</span></span>
    - <span data-ttu-id="14d00-218">**變更**：按一下 [組態]。</span><span class="sxs-lookup"><span data-stu-id="14d00-218">**Change**: Click **Configuration**.</span></span> <span data-ttu-id="14d00-219">使用[建立公用 IP 位址](#create-a-public-ip-address)一節中步驟 4 的資訊來變更設定。</span><span class="sxs-lookup"><span data-stu-id="14d00-219">Change settings using the information in step 4 of the [Create a public IP address](#create-a-public-ip-address) section of this article.</span></span> <span data-ttu-id="14d00-220">若要將 IPv4 位址的指派從靜態變更為動態，您必須先解除公用 IPv4 位址與相關聯 IP 組態的關聯。</span><span class="sxs-lookup"><span data-stu-id="14d00-220">To change the assignment for an IPv4 address from static to dynamic, you must first dissociate the public IPv4 address from the IP configuration it's associated to.</span></span> <span data-ttu-id="14d00-221">您可以接著將指派方法變更為動態，然後按一下 [關聯] 讓 IP 位址與相同 IP 組態、不同組態建立關聯，您也可以讓它解除關聯。</span><span class="sxs-lookup"><span data-stu-id="14d00-221">You can then change the assignment method to dynamic and click **Associate** to associate the IP address to the same IP configuration, a different configuration, or you can leave it dissociated.</span></span> <span data-ttu-id="14d00-222">若要解除公用 IP 位址的關聯，請在 [概觀] 區段中，按一下 [解除關聯]。</span><span class="sxs-lookup"><span data-stu-id="14d00-222">To dissociate a public IP address, in the **Overview** section, click **Dissociate**.</span></span>

>[!WARNING]
><span data-ttu-id="14d00-223">當您將指派方法從靜態變更為動態時，您會遺失已指派給公用 IP 位址的 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="14d00-223">When you change the assignment method from static to dynamic, you lose the IP address that was assigned to the public IP address.</span></span> <span data-ttu-id="14d00-224">雖然 Azure 公用 DNS 伺服器會維護靜態或動態位址與任何 DNS 名稱標籤 (如果您定義一個位置) 之間的對應，但是動態 IP 位址可能會在 VM 處於停止 (解除配置) 狀態後啟動時變更。</span><span class="sxs-lookup"><span data-stu-id="14d00-224">While the Azure public DNS servers maintain a mapping between static or dynamic addresses and any DNS name label (if you defined one), a dynamic IP address can change when the VM is started after being in the stopped (deallocated) state.</span></span> <span data-ttu-id="14d00-225">若要防止位址變更，請指派靜態 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="14d00-225">To prevent the address from changing, assign a static IP address.</span></span>

<span data-ttu-id="14d00-226">**命令**</span><span class="sxs-lookup"><span data-stu-id="14d00-226">**Commands**</span></span>

|<span data-ttu-id="14d00-227">工具</span><span class="sxs-lookup"><span data-stu-id="14d00-227">Tool</span></span>|<span data-ttu-id="14d00-228">命令</span><span class="sxs-lookup"><span data-stu-id="14d00-228">Command</span></span>|
|---|---|
|<span data-ttu-id="14d00-229">CLI</span><span class="sxs-lookup"><span data-stu-id="14d00-229">CLI</span></span>|<span data-ttu-id="14d00-230">[az network public-ip-list](/cli/azure/network/public-ip?toc=%2fazure%2fvirtual-network%2ftoc.json#list) 可列出公用 IP 位址、[az network public-ip-show](/cli/azure/network/public-ip?toc=%2fazure%2fvirtual-network%2ftoc.json#show) 可顯示設定；[az network public-ip update](/cli/azure/network/public-ip?toc=%2fazure%2fvirtual-network%2ftoc.json#update) 可進行更新；[az network public-ip delete](/cli/azure/network/public-ip?toc=%2fazure%2fvirtual-network%2ftoc.json#delete) 可進行刪除</span><span class="sxs-lookup"><span data-stu-id="14d00-230">[az network public-ip-list](/cli/azure/network/public-ip?toc=%2fazure%2fvirtual-network%2ftoc.json#list) to list public IP addresses, [az network public-ip-show](/cli/azure/network/public-ip?toc=%2fazure%2fvirtual-network%2ftoc.json#show) to show settings; [az network public-ip update](/cli/azure/network/public-ip?toc=%2fazure%2fvirtual-network%2ftoc.json#update) to update; [az network public-ip delete](/cli/azure/network/public-ip?toc=%2fazure%2fvirtual-network%2ftoc.json#delete) to delete</span></span>|
|<span data-ttu-id="14d00-231">PowerShell</span><span class="sxs-lookup"><span data-stu-id="14d00-231">PowerShell</span></span>|<span data-ttu-id="14d00-232">[Get-AzureRmPublicIpAddress](/powershell/module/azurerm.network/get-azurermpublicipaddress?toc=%2fazure%2fvirtual-network%2ftoc.json) 可擷取公用 IP 位址物件並檢視其設定、[Set-AzureRmPublicIpAddress](/powershell/resourcemanager/azurerm.network/set-azurermpublicipaddress?toc=%2fazure%2fvirtual-network%2ftoc.json) 可更新設定；[Remove-AzureRmPublicIpAddress](/powershell/module/azurerm.network/remove-azurermpublicipaddress) 可進行刪除</span><span class="sxs-lookup"><span data-stu-id="14d00-232">[Get-AzureRmPublicIpAddress](/powershell/module/azurerm.network/get-azurermpublicipaddress?toc=%2fazure%2fvirtual-network%2ftoc.json) to retrieve a public IP address object and view its settings, [Set-AzureRmPublicIpAddress](/powershell/resourcemanager/azurerm.network/set-azurermpublicipaddress?toc=%2fazure%2fvirtual-network%2ftoc.json) to update settings; [Remove-AzureRmPublicIpAddress](/powershell/module/azurerm.network/remove-azurermpublicipaddress) to delete</span></span>|

## <a name="next-steps"></a><span data-ttu-id="14d00-233">後續步驟</span><span class="sxs-lookup"><span data-stu-id="14d00-233">Next steps</span></span>
<span data-ttu-id="14d00-234">請在建立下列 Azure 資源時，指派公用 IP 位址︰</span><span class="sxs-lookup"><span data-stu-id="14d00-234">Assign public IP addresses when creating the following Azure resources:</span></span>

- <span data-ttu-id="14d00-235">[Windows](../virtual-machines/virtual-machines-windows-hero-tutorial.md?toc=%2fazure%2fvirtual-network%2ftoc.json) 或 [Linux](../virtual-machines/linux/quick-create-portal.md?toc=%2fazure%2fvirtual-network%2ftoc.json) 虛擬機器</span><span class="sxs-lookup"><span data-stu-id="14d00-235">[Windows](../virtual-machines/virtual-machines-windows-hero-tutorial.md?toc=%2fazure%2fvirtual-network%2ftoc.json) or [Linux](../virtual-machines/linux/quick-create-portal.md?toc=%2fazure%2fvirtual-network%2ftoc.json) virtual machines</span></span>
- [<span data-ttu-id="14d00-236">網際網路面向的 Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="14d00-236">Internet-facing Azure Load Balancer</span></span>](../load-balancer/load-balancer-get-started-internet-portal.md?toc=%2fazure%2fvirtual-network%2ftoc.json)
- [<span data-ttu-id="14d00-237">Azure 應用程式閘道</span><span class="sxs-lookup"><span data-stu-id="14d00-237">Azure Application Gateway</span></span>](../application-gateway/application-gateway-create-gateway-portal.md?toc=%2fazure%2fvirtual-network%2ftoc.json)
- [<span data-ttu-id="14d00-238">使用 Azure VPN 閘道的站對站連線</span><span class="sxs-lookup"><span data-stu-id="14d00-238">Site-to-site connection using an Azure VPN Gateway</span></span>](../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal.md?toc=%2fazure%2fvirtual-network%2ftoc.json)
- [<span data-ttu-id="14d00-239">Azure 虛擬機器擴展集</span><span class="sxs-lookup"><span data-stu-id="14d00-239">Azure Virtual Machine Scale Set</span></span>](../virtual-machine-scale-sets/virtual-machine-scale-sets-portal-create.md?toc=%2fazure%2fvirtual-network%2ftoc.json)
