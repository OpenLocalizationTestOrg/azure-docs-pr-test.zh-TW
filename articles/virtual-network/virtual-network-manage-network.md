---
title: "建立、變更或刪除 Azure 虛擬網路 | Microsoft Docs"
description: "了解如何在 Azure 中建立、變更或刪除虛擬網路。"
services: virtual-network
documentationcenter: na
author: jimdial
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/10/2017
ms.author: jdial
ms.openlocfilehash: 74aace2136136c25bc56327d38cfbab168265401
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/18/2017
---
# <a name="create-change-or-delete-a-virtual-network"></a><span data-ttu-id="7f825-103">建立、變更或刪除虛擬網路</span><span class="sxs-lookup"><span data-stu-id="7f825-103">Create, change, or delete a virtual network</span></span>

<span data-ttu-id="7f825-104">了解如何建立和刪除虛擬網路以及變更現有虛擬網路的設定，例如 DNS 伺服器和 IP 位址空間。</span><span class="sxs-lookup"><span data-stu-id="7f825-104">Learn how to create and delete a virtual network and change settings, like DNS servers and IP address spaces, for an existing virtual network.</span></span>

<span data-ttu-id="7f825-105">虛擬網路是您的網路在雲端中的身分。</span><span class="sxs-lookup"><span data-stu-id="7f825-105">A virtual network is a representation of your own network in the cloud.</span></span> <span data-ttu-id="7f825-106">虛擬網路是專屬於您訂用帳戶的 Azure 雲端。</span><span class="sxs-lookup"><span data-stu-id="7f825-106">A virtual network is a logical isolation of the Azure cloud that is dedicated to your Azure subscription.</span></span> <span data-ttu-id="7f825-107">對於您建立的每個虛擬網路，您可以：</span><span class="sxs-lookup"><span data-stu-id="7f825-107">For each virtual network that you create, you can:</span></span>
- <span data-ttu-id="7f825-108">選擇要指派的位址空間。</span><span class="sxs-lookup"><span data-stu-id="7f825-108">Choose an address space to assign.</span></span> <span data-ttu-id="7f825-109">位址空間包含使用無類別網域間路由 (CIDR) 表示法所定義的一或多個位址範圍，例如 10.0.0.0/16。</span><span class="sxs-lookup"><span data-stu-id="7f825-109">An address space consists of one or more address ranges that are defined by using Classless Inter-Domain Routing (CIDR) notation, like 10.0.0.0/16.</span></span>
- <span data-ttu-id="7f825-110">選擇使用 Azure 所提供的 DNS 伺服器，或您自己的 DNS 伺服器。</span><span class="sxs-lookup"><span data-stu-id="7f825-110">Choose to use the Azure-provided DNS server, or use your own DNS server.</span></span> <span data-ttu-id="7f825-111">系統會對連線至虛擬網路的所有資源指派此 DNS 伺服器，以解析虛擬網路中的名稱。</span><span class="sxs-lookup"><span data-stu-id="7f825-111">All resources that are connected to the virtual network are assigned this DNS server to resolve names within the virtual network.</span></span>
- <span data-ttu-id="7f825-112">將虛擬網路分成多個子網路，讓每個子網路都有自己的位址範圍 (在虛擬網路的位址空間內)。</span><span class="sxs-lookup"><span data-stu-id="7f825-112">Segment the virtual network into subnets, each with its own address range, within the address space of the virtual network.</span></span> <span data-ttu-id="7f825-113">若要了解如何建立、變更和刪除子網路，請參閱[新增、變更或刪除子網路](virtual-network-manage-subnet.md)。</span><span class="sxs-lookup"><span data-stu-id="7f825-113">To learn how to create, change, and delete subnets, see [Add, change, or delete subnets](virtual-network-manage-subnet.md).</span></span>

<span data-ttu-id="7f825-114">本文會說明如何使用 Azure Resource Manager 部署模型來建立、變更和刪除虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="7f825-114">This article explains how to create, change, and delete virtual networks by using the Azure Resource Manager deployment model.</span></span>

## <span data-ttu-id="7f825-115"><a name="before"></a>開始之前</span><span class="sxs-lookup"><span data-stu-id="7f825-115"><a name="before"></a>Before you begin</span></span>

<span data-ttu-id="7f825-116">在開始本文所述的工作之前，請先完成下列必要條件：</span><span class="sxs-lookup"><span data-stu-id="7f825-116">Before you begin the tasks that are described in this article, complete the following prerequisites:</span></span>

- <span data-ttu-id="7f825-117">如果您不熟悉虛擬網路，建議您檢閱[建立您的第一個 Azure 虛擬網路](virtual-network-get-started-vnet-subnet.md)中的練習。</span><span class="sxs-lookup"><span data-stu-id="7f825-117">If you're new to working with virtual networks, we recommend that you review the exercise in [Create your first Azure virtual network](virtual-network-get-started-vnet-subnet.md).</span></span> <span data-ttu-id="7f825-118">這個練習有助您更加熟悉虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="7f825-118">This exercise can help you become more familiar with virtual networks.</span></span>
- <span data-ttu-id="7f825-119">若要深入了解虛擬網路的限制，請檢閱 [Azure 限制](../azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#azure-resource-manager-virtual-networking-limits)。</span><span class="sxs-lookup"><span data-stu-id="7f825-119">To learn about limits for virtual networks, review [Azure limits](../azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#azure-resource-manager-virtual-networking-limits).</span></span>
- <span data-ttu-id="7f825-120">使用您的 Azure 帳戶，登入 Azure 入口網站、Azure 命令列工具 (Azure CLI) 或 Azure PowerShell。</span><span class="sxs-lookup"><span data-stu-id="7f825-120">Sign in to the Azure portal, the Azure command-line tool (Azure CLI), or Azure PowerShell by using your Azure account.</span></span> <span data-ttu-id="7f825-121">如果您沒有 Azure 帳戶，請註冊[免費試用帳戶](https://azure.microsoft.com/free)。</span><span class="sxs-lookup"><span data-stu-id="7f825-121">If you don't have an Azure account, sign up for a [free trial account](https://azure.microsoft.com/free).</span></span>
- <span data-ttu-id="7f825-122">如果您打算使用 Azure PowerShell 命令來完成本文所述的工作，您必須先[安裝並設定 Azure PowerShell](/powershell/azureps-cmdlets-docs?toc=%2fazure%2fvirtual-network%2ftoc.json)。</span><span class="sxs-lookup"><span data-stu-id="7f825-122">If you plan to use PowerShell commands to complete the tasks described in this article, you must first [install and configure Azure PowerShell](/powershell/azureps-cmdlets-docs?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span> <span data-ttu-id="7f825-123">請確定您已安裝最新版的 Azure PowerShell Cmdlet。</span><span class="sxs-lookup"><span data-stu-id="7f825-123">Ensure that you have the most recent version of the Azure PowerShell cmdlets installed.</span></span> <span data-ttu-id="7f825-124">若要取得範例中 PowerShell 命令的說明，請輸入 `get-help <command> -full`。</span><span class="sxs-lookup"><span data-stu-id="7f825-124">To get help for PowerShell commands in the examples, enter `get-help <command> -full`.</span></span>
- <span data-ttu-id="7f825-125">如果您打算使用 Azure CLI 命令來完成本文所述的工作，您必須先[安裝和設定 Azure CLI](/cli/azure/install-azure-cli?toc=%2fazure%2fvirtual-network%2ftoc.json)。</span><span class="sxs-lookup"><span data-stu-id="7f825-125">If you plan to use Azure CLI commands to complete the tasks described in this article, you must first [install and configure Azure CLI](/cli/azure/install-azure-cli?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span> <span data-ttu-id="7f825-126">請確定您已安裝最新版的 Azure CLI。</span><span class="sxs-lookup"><span data-stu-id="7f825-126">Ensure that you have the most recent version of Azure CLI installed.</span></span> <span data-ttu-id="7f825-127">若要取得 Azure CLI 命令的說明，請輸入`az <command> --help`。</span><span class="sxs-lookup"><span data-stu-id="7f825-127">To get help with Azure CLI commands, enter `az <command> --help`.</span></span>


## <span data-ttu-id="7f825-128"><a name="create-vnet"></a>建立虛擬網路</span><span class="sxs-lookup"><span data-stu-id="7f825-128"><a name="create-vnet"></a>Create a virtual network</span></span>

<span data-ttu-id="7f825-129">若要建立虛擬網路：</span><span class="sxs-lookup"><span data-stu-id="7f825-129">To create a virtual network:</span></span>

1. <span data-ttu-id="7f825-130">請使用已指派訂用帳戶網路參與者角色權限 (至少) 的帳戶來登入[入口網站](https://portal.azure.com)。</span><span class="sxs-lookup"><span data-stu-id="7f825-130">Sign in to the [portal](https://portal.azure.com) with an account that is assigned permissions for the Network Contributor role (at a minimum) for your subscription.</span></span> <span data-ttu-id="7f825-131">若要深入了解如何將角色和權限指派給帳戶，請參閱 [Azure 角色型存取控制的內建角色](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor)。</span><span class="sxs-lookup"><span data-stu-id="7f825-131">To learn more about assigning roles and permissions to accounts, see [Built-in roles for Azure role-based access control](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor).</span></span>
2. <span data-ttu-id="7f825-132">按一下 [新增]  >  [網路]  >  [虛擬網路]。</span><span class="sxs-lookup"><span data-stu-id="7f825-132">Click **New** > **Networking** > **Virtual network**.</span></span>
3. <span data-ttu-id="7f825-133">在 [虛擬網路] 刀鋒視窗的 [選取部署模型] 方塊中，讓 [Resource Manager] 保持選取狀態，然後按一下 [建立]。</span><span class="sxs-lookup"><span data-stu-id="7f825-133">On the **Virtual network** blade, in the **Select a deployment model** box, leave **Resource Manager** selected, and then click **Create**.</span></span>
4. <span data-ttu-id="7f825-134">在 [建立虛擬網路] 刀鋒視窗上，輸入或選取下列設定的值，然後按一下 [建立]：</span><span class="sxs-lookup"><span data-stu-id="7f825-134">On the **Create virtual network** blade, enter or select values for the following settings, then click **Create**:</span></span>
    - <span data-ttu-id="7f825-135">**名稱**：您選取用來建立虛擬網路的[資源群組](../azure-glossary-cloud-terminology.md?toc=%2fazure%2fvirtual-network%2ftoc.json#resource-group)名稱必須是唯一的。</span><span class="sxs-lookup"><span data-stu-id="7f825-135">**Name**: The name must be unique in the [resource group](../azure-glossary-cloud-terminology.md?toc=%2fazure%2fvirtual-network%2ftoc.json#resource-group) that you select to create the virtual network in.</span></span> <span data-ttu-id="7f825-136">虛擬網路建立後，就不能再變更其名稱。</span><span class="sxs-lookup"><span data-stu-id="7f825-136">You cannot change the name after the virtual network is created.</span></span> <span data-ttu-id="7f825-137">您可以隨著時間建立多個虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="7f825-137">You can create multiple virtual networks over time.</span></span> <span data-ttu-id="7f825-138">如需命名建議，請參閱[命名慣例](/azure/architecture/best-practices/naming-conventions.md?toc=%2fazure%2fvirtual-network%2ftoc.json#naming-rules-and-restrictions)。</span><span class="sxs-lookup"><span data-stu-id="7f825-138">For naming suggestions, see [Naming conventions](/azure/architecture/best-practices/naming-conventions.md?toc=%2fazure%2fvirtual-network%2ftoc.json#naming-rules-and-restrictions).</span></span> <span data-ttu-id="7f825-139">下列命名慣例有協助於輕鬆管理多個虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="7f825-139">Following a naming convention can help make it easier to manage multiple virtual networks.</span></span>
    - <span data-ttu-id="7f825-140">**位址空間**︰以 CIDR 表示法來指定位址空間。</span><span class="sxs-lookup"><span data-stu-id="7f825-140">**Address space**: Specify the address space in CIDR notation.</span></span> <span data-ttu-id="7f825-141">您可以定義公用或私人的位址空間 (RFC 1918)。</span><span class="sxs-lookup"><span data-stu-id="7f825-141">The address space you define can be public or private (RFC 1918).</span></span> <span data-ttu-id="7f825-142">不論您定義的是公用或私人的位址空間，您都只能從虛擬網路、互連的虛擬網路，以及任何已連線到虛擬網路的內部部署網路來連線到位址空間。</span><span class="sxs-lookup"><span data-stu-id="7f825-142">Whether you define the address space as public or private, the address space is reachable only from within the virtual network, from interconnected virtual networks, and from any on-premises networks that you have connected to the virtual network.</span></span> <span data-ttu-id="7f825-143">您無法新增下列位址空間︰</span><span class="sxs-lookup"><span data-stu-id="7f825-143">You cannot add the following address spaces:</span></span>
        - <span data-ttu-id="7f825-144">224.0.0.0/4 (多點傳送)</span><span class="sxs-lookup"><span data-stu-id="7f825-144">224.0.0.0/4 (Multicast)</span></span>
        - <span data-ttu-id="7f825-145">255.255.255.255/32 (廣播)</span><span class="sxs-lookup"><span data-stu-id="7f825-145">255.255.255.255/32 (Broadcast)</span></span>
        - <span data-ttu-id="7f825-146">127.0.0.0/8 (回送)</span><span class="sxs-lookup"><span data-stu-id="7f825-146">127.0.0.0/8 (Loopback)</span></span>
        - <span data-ttu-id="7f825-147">169.254.0.0/16 (連結-本機)</span><span class="sxs-lookup"><span data-stu-id="7f825-147">169.254.0.0/16 (Link-local)</span></span>
        - <span data-ttu-id="7f825-148">168.63.129.16/32 (內部 DNS)</span><span class="sxs-lookup"><span data-stu-id="7f825-148">168.63.129.16/32 (Internal DNS)</span></span>

      <span data-ttu-id="7f825-149">雖然在建立虛擬網路時，只能定義一個位址空間，但您可以在虛擬網路建立後新增更多位址空間。</span><span class="sxs-lookup"><span data-stu-id="7f825-149">Although you can define only one address space when you create the virtual network, you can add more address spaces after the virtual network is created.</span></span> <span data-ttu-id="7f825-150">若要了解如何將位址空間新增至現有的虛擬網路，請參閱本文中的[新增或移除地址空間](#add-address-spaces)。</span><span class="sxs-lookup"><span data-stu-id="7f825-150">To learn how to add an address space to an existing virtual network, see [Add or remove an address space](#add-address-spaces) in this article.</span></span>

      >[!WARNING]
      ><span data-ttu-id="7f825-151">如果虛擬網路具有與另一個虛擬網路或內部部署網路重疊的位址空間，就無法連接線這兩個網路。</span><span class="sxs-lookup"><span data-stu-id="7f825-151">If a virtual network has address spaces that overlap with another virtual network or on-premises network, the two networks cannot be connected.</span></span> <span data-ttu-id="7f825-152">在您定義位址空間之前，請考慮未來是否想要將虛擬網路連線到其他虛擬網路或內部部署網路。</span><span class="sxs-lookup"><span data-stu-id="7f825-152">Before you define an address space, consider whether you might want to connect the virtual network to other virtual networks or on-premises networks in the future.</span></span>
      >
      >

    - <span data-ttu-id="7f825-153">**子網路名稱**：子網路名稱在虛擬網路內必須是唯一的。</span><span class="sxs-lookup"><span data-stu-id="7f825-153">**Subnet name**: The subnet name must be unique within the virtual network.</span></span> <span data-ttu-id="7f825-154">子網路建立後，就不能再變更子網路名稱。</span><span class="sxs-lookup"><span data-stu-id="7f825-154">You cannot change the subnet name after the subnet is created.</span></span> <span data-ttu-id="7f825-155">當您在建立虛擬網路時，即使虛擬網路不一定要擁有任何子網路，但入口網站仍會要求您定義一個子網路。</span><span class="sxs-lookup"><span data-stu-id="7f825-155">The portal requires that you define one subnet when you create a virtual network, even though a virtual network isn't required to have any subnets.</span></span> <span data-ttu-id="7f825-156">當您在入口網站中建立虛擬網路時，您只能定義一個子網路。</span><span class="sxs-lookup"><span data-stu-id="7f825-156">In the portal, you can define only one subnet when you create a virtual network.</span></span> <span data-ttu-id="7f825-157">建立虛擬網路之後，您可以將更多子網路新增至虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="7f825-157">You can add more subnets to the virtual network later, after the virtual network is created.</span></span> <span data-ttu-id="7f825-158">若要在虛擬網路中新增子網路，請參閱[建立、變更或刪除子網路](virtual-network-manage-subnet.md)中的[建立子網路](virtual-network-manage-subnet.md#create-subnet)。</span><span class="sxs-lookup"><span data-stu-id="7f825-158">To add a subnet to a virtual network, see [Create a subnet](virtual-network-manage-subnet.md#create-subnet) in [Create, change, or delete subnets](virtual-network-manage-subnet.md).</span></span> <span data-ttu-id="7f825-159">您可以使用 Azure CLI 或 PowerShell，建立具有多個子網路的虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="7f825-159">You can create a virtual network that has multiple subnets by using Azure CLI or PowerShell.</span></span>

      >[!TIP]
      ><span data-ttu-id="7f825-160">有時候，系統管理員會建立不同的子網路來篩選或控制在子網路之間傳送的流量。</span><span class="sxs-lookup"><span data-stu-id="7f825-160">Sometimes, admins create different subnets to filter or control traffic routing between the subnets.</span></span> <span data-ttu-id="7f825-161">在定義子網路之前，請先考慮您想要如何篩選和路由傳送子網路之間的流量。</span><span class="sxs-lookup"><span data-stu-id="7f825-161">Before you define subnets, consider how you might want to filter and route traffic between your subnets.</span></span> <span data-ttu-id="7f825-162">若要深入了解如何篩選子網路之間的流量，請參閱[網路安全性群組](virtual-networks-nsg.md)。</span><span class="sxs-lookup"><span data-stu-id="7f825-162">To learn more about filtering traffic between subnets, see [Network security groups](virtual-networks-nsg.md).</span></span> <span data-ttu-id="7f825-163">Azure 會自動路由傳送子網路之間的流量，但您可以覆寫 Azure 預設路由。</span><span class="sxs-lookup"><span data-stu-id="7f825-163">Azure automatically routes traffic between subnets, but you can override Azure default routes.</span></span> <span data-ttu-id="7f825-164">若要深入了解如何覆寫 Azure 預設子網路流量路由，請參閱[使用者定義的路由](virtual-networks-udr-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="7f825-164">To learn how to override Azure default subnet traffic routing, see [User-defined routes](virtual-networks-udr-overview.md).</span></span>
      >

    - <span data-ttu-id="7f825-165">**子網路位址範圍**︰此範圍必須位於您針對虛擬網路輸入的位址空間內。</span><span class="sxs-lookup"><span data-stu-id="7f825-165">**Subnet address range**: The range must be within the address space you entered for the virtual network.</span></span> <span data-ttu-id="7f825-166">您可以指定的最小範圍是 /29，此範圍可提供八個 IP 位址供子網路使用。</span><span class="sxs-lookup"><span data-stu-id="7f825-166">The smallest range you can specify is /29, which provides eight IP addresses for the subnet.</span></span> <span data-ttu-id="7f825-167">為了符合通訊協定的規定，Azure 會保留每個子網路中的第一個和最後一個位址。</span><span class="sxs-lookup"><span data-stu-id="7f825-167">Azure reserves the first and last address in each subnet for protocol conformance.</span></span> <span data-ttu-id="7f825-168">Azure 還會保留三個位址供 Azure 服務使用。</span><span class="sxs-lookup"><span data-stu-id="7f825-168">Three additional addresses are reserved for Azure service usage.</span></span> <span data-ttu-id="7f825-169">因此，使用 /29 子網路位址範圍的虛擬網路只有三個可用的 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="7f825-169">As a result, a virtual network with a subnet address range of /29 has only three usable IP addresses.</span></span> <span data-ttu-id="7f825-170">如果您打算將虛擬網路連線至 VPN 閘道，則必須建立一個閘道子網路。</span><span class="sxs-lookup"><span data-stu-id="7f825-170">If you plan to connect a virtual network to a VPN gateway, you must create a gateway subnet.</span></span> <span data-ttu-id="7f825-171">深入了解[閘道子網路位址範圍的具體考量](../vpn-gateway/vpn-gateway-about-vpn-gateway-settings.md?toc=%2fazure%2fvirtual-network%2ftoc.json#gwsub)。</span><span class="sxs-lookup"><span data-stu-id="7f825-171">Learn more about [specific address range considerations for gateway subnets](../vpn-gateway/vpn-gateway-about-vpn-gateway-settings.md?toc=%2fazure%2fvirtual-network%2ftoc.json#gwsub).</span></span> <span data-ttu-id="7f825-172">若符合特定條件，您可以在子網路建立好之後變更其位址範圍。</span><span class="sxs-lookup"><span data-stu-id="7f825-172">You can change the address range after the subnet is created, under specific conditions.</span></span> <span data-ttu-id="7f825-173">若要了解如何變更子網路的位址範圍，請參閱[新增、變更或刪除子網路](virtual-network-manage-subnet.md)中的[變更子網路設定](#change-subnet)。</span><span class="sxs-lookup"><span data-stu-id="7f825-173">To learn how to change a subnet address range, see [Change subnet settings](#change-subnet) in [Add, change, or delete subnets](virtual-network-manage-subnet.md).</span></span>
    - <span data-ttu-id="7f825-174">**訂用帳戶**︰選取[訂用帳戶](../azure-glossary-cloud-terminology.md?toc=%2fazure%2fvirtual-network%2ftoc.json#subscription)。</span><span class="sxs-lookup"><span data-stu-id="7f825-174">**Subscription**: Select a [subscription](../azure-glossary-cloud-terminology.md?toc=%2fazure%2fvirtual-network%2ftoc.json#subscription).</span></span> <span data-ttu-id="7f825-175">您無法在多個 Azure 訂用帳戶中使用相同的虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="7f825-175">You cannot use the same virtual network in more than one Azure subscription.</span></span> <span data-ttu-id="7f825-176">不過，您可以將一個訂用帳戶中的虛擬網路連線至其他訂用帳戶中的虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="7f825-176">However, you can connect a virtual network in one subscription to virtual networks in other subscriptions.</span></span> <span data-ttu-id="7f825-177">若要連線不同訂用帳戶中的虛擬網路，請使用 Azure VPN 閘道或虛擬網路對等互連。</span><span class="sxs-lookup"><span data-stu-id="7f825-177">To connect virtual networks in different subscriptions, use Azure VPN Gateway or virtual network peering.</span></span> <span data-ttu-id="7f825-178">您連線到虛擬網路的任何 Azure 資源必須與虛擬網路位於相同的訂用帳戶中。</span><span class="sxs-lookup"><span data-stu-id="7f825-178">Any Azure resource that you connect to the virtual network must be in the same subscription as the virtual network.</span></span>
    - <span data-ttu-id="7f825-179">**資源群組**：選取現有[資源群組](../azure-resource-manager/resource-group-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json#resource-groups)或建立新的資源群組。</span><span class="sxs-lookup"><span data-stu-id="7f825-179">**Resource group**: Select an existing [resource group](../azure-resource-manager/resource-group-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json#resource-groups) or create a new one.</span></span> <span data-ttu-id="7f825-180">您連線到虛擬網路的 Azure 資源，可以位於與虛擬網路相同或不同的資源群組中。</span><span class="sxs-lookup"><span data-stu-id="7f825-180">An Azure resource that you connect to the virtual network can be in the same resource group as the virtual network or in a different resource group.</span></span>
    - <span data-ttu-id="7f825-181">**位置**︰選取 Azure [位置](https://azure.microsoft.com/regions/) (也稱為區域)。</span><span class="sxs-lookup"><span data-stu-id="7f825-181">**Location**: Select an Azure [location](https://azure.microsoft.com/regions/), also known as a region.</span></span> <span data-ttu-id="7f825-182">虛擬網路只能位於一個 Azure 位置。</span><span class="sxs-lookup"><span data-stu-id="7f825-182">A virtual network can be in only one Azure location.</span></span> <span data-ttu-id="7f825-183">不過，您可以使用 VPN 閘道，將某個位置的虛擬網路連線至其他位置的虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="7f825-183">However, you can connect a virtual network in one location to a virtual network in another location by using a VPN gateway.</span></span> <span data-ttu-id="7f825-184">您連線到虛擬網路的任何 Azure 資源必須與虛擬網路位於相同的位置。</span><span class="sxs-lookup"><span data-stu-id="7f825-184">Any Azure resource that you connect to the virtual network must be in the same location as the virtual network.</span></span>

<span data-ttu-id="7f825-185">**命令**</span><span class="sxs-lookup"><span data-stu-id="7f825-185">**Commands**</span></span>

|<span data-ttu-id="7f825-186">工具</span><span class="sxs-lookup"><span data-stu-id="7f825-186">Tool</span></span>|<span data-ttu-id="7f825-187">命令</span><span class="sxs-lookup"><span data-stu-id="7f825-187">Command</span></span>|
|---|---|
|<span data-ttu-id="7f825-188">Azure CLI</span><span class="sxs-lookup"><span data-stu-id="7f825-188">Azure CLI</span></span>|[<span data-ttu-id="7f825-189">az network vnet create</span><span class="sxs-lookup"><span data-stu-id="7f825-189">az network vnet create</span></span>](/cli/azure/network/vnet?toc=%2fazure%2fvirtual-network%2ftoc.json#create)|
|<span data-ttu-id="7f825-190">PowerShell</span><span class="sxs-lookup"><span data-stu-id="7f825-190">PowerShell</span></span>|[<span data-ttu-id="7f825-191">New-AzureRmVirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="7f825-191">New-AzureRmVirtualNetwork</span></span>](/powershell/module/azurerm.network/new-azurermvirtualnetwork?toc=%2fazure%2fvirtual-network%2ftoc.json)|

## <span data-ttu-id="7f825-192"><a name = "view-vnet"></a>檢視虛擬網路與設定</span><span class="sxs-lookup"><span data-stu-id="7f825-192"><a name = "view-vnet"></a>View virtual networks and settings</span></span>

<span data-ttu-id="7f825-193">若要檢視虛擬網路和設定：</span><span class="sxs-lookup"><span data-stu-id="7f825-193">To view virtual networks and settings:</span></span>

1. <span data-ttu-id="7f825-194">請使用已指派訂用帳戶網路參與者角色權限 (至少) 的帳戶來登入[入口網站](https://portal.azure.com)。</span><span class="sxs-lookup"><span data-stu-id="7f825-194">Sign in to the [portal](https://portal.azure.com) with an account that is assigned permissions for the Network Contributor role (at a minimum) for your subscription.</span></span> <span data-ttu-id="7f825-195">若要深入了解如何將角色和權限指派給帳戶，請參閱 [Azure 角色型存取控制的內建角色](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor)。</span><span class="sxs-lookup"><span data-stu-id="7f825-195">To learn more about assigning roles and permissions to accounts, see [Built-in roles for Azure role-based access control](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor).</span></span>
2. <span data-ttu-id="7f825-196">在入口網站的搜尋方塊中，輸入「虛擬網路」。</span><span class="sxs-lookup"><span data-stu-id="7f825-196">In the portal search box, enter **virtual networks**.</span></span> <span data-ttu-id="7f825-197">按一下搜尋結果中出現的「虛擬網路」。</span><span class="sxs-lookup"><span data-stu-id="7f825-197">In the search results, click **Virtual networks**.</span></span>
3. <span data-ttu-id="7f825-198">在 [虛擬網路] 刀鋒視窗中，按一下您想要檢視設定的虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="7f825-198">On the **Virtual networks** blade, click the virtual network that you want to view settings for.</span></span>
4. <span data-ttu-id="7f825-199">您所選虛擬網路的刀鋒視窗上會列出下列設定︰</span><span class="sxs-lookup"><span data-stu-id="7f825-199">The following settings are listed on the blade for the virtual network you selected:</span></span>
    - <span data-ttu-id="7f825-200">**概觀**︰提供虛擬網路的相關資訊，包括位址空間和 DNS 伺服器。</span><span class="sxs-lookup"><span data-stu-id="7f825-200">**Overview**: Provides information about the virtual network, including address space and DNS servers.</span></span> <span data-ttu-id="7f825-201">下列螢幕擷取畫面顯示名為 **MyVNet** 之虛擬網路的概觀設定：</span><span class="sxs-lookup"><span data-stu-id="7f825-201">The following screenshot shows the overview settings for a virtual network named **MyVNet**:</span></span>

        ![網路介面概觀](./media/virtual-network-manage-network/vnet-overview.png)

      <span data-ttu-id="7f825-203">在 [概觀] 刀鋒視窗上，您可以將虛擬網路移至不同的訂用帳戶或資源群組。</span><span class="sxs-lookup"><span data-stu-id="7f825-203">On the **Overview** blade, you can move a virtual network to a different subscription or resource group.</span></span> <span data-ttu-id="7f825-204">若要了解如何移動虛擬網路，請參閱[將資源移到不同的資源群組或訂用帳戶](../azure-resource-manager/resource-group-move-resources.md?toc=%2fazure%2fvirtual-network%2ftoc.json)。</span><span class="sxs-lookup"><span data-stu-id="7f825-204">To learn how to move a virtual network, see [Move resources to a different resource group or subscription](../azure-resource-manager/resource-group-move-resources.md?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span> <span data-ttu-id="7f825-205">該文會列出必要條件，以及如何使用 Azure 入口網站、PowerShell 和 Azure CLI 來移動資源。</span><span class="sxs-lookup"><span data-stu-id="7f825-205">The article lists prerequisites, and how to move resources by using the Azure portal, PowerShell, and Azure CLI.</span></span> <span data-ttu-id="7f825-206">所有連線至虛擬網路的資源都必須隨著虛擬網路移動。</span><span class="sxs-lookup"><span data-stu-id="7f825-206">All resources that are connected to the virtual network must move with the virtual network.</span></span>
    - <span data-ttu-id="7f825-207">**位址空間**︰這裡會列出指派給虛擬網路的位址空間。</span><span class="sxs-lookup"><span data-stu-id="7f825-207">**Address space**: The address spaces that are assigned to the virtual network are listed.</span></span> <span data-ttu-id="7f825-208">若要了解如何新增和移除位址空間，請完成本文的[新增或移除位址空間](#address-spaces)中的步驟。</span><span class="sxs-lookup"><span data-stu-id="7f825-208">To learn how to add and remove an address space, complete the steps in [Add or remove an address space](#address-spaces) in this article.</span></span>
    - <span data-ttu-id="7f825-209">**已連線的裝置**︰這裡會列出任何與虛擬網路連線的資源。</span><span class="sxs-lookup"><span data-stu-id="7f825-209">**Connected devices**: Any resources that are connected to the virtual network are listed.</span></span> <span data-ttu-id="7f825-210">在上述螢幕擷取畫面中，有三個網路介面和一個負載平衡器連線到虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="7f825-210">In the preceding screenshot, three network interfaces and one load balancer are connected to the virtual network.</span></span> <span data-ttu-id="7f825-211">您建立並連線到虛擬網路的任何新資源都會在此列出。</span><span class="sxs-lookup"><span data-stu-id="7f825-211">Any new resources that you create and connect to the virtual network are listed.</span></span> <span data-ttu-id="7f825-212">如果您刪除已連線到虛擬網路的資源，清單中就不會再顯示該資源。</span><span class="sxs-lookup"><span data-stu-id="7f825-212">If you delete a resource that was connected to the virtual network, it no longer appears in the list.</span></span>
    - <span data-ttu-id="7f825-213">**子網路**︰虛擬網路中現存的子網路清單會在此顯示。</span><span class="sxs-lookup"><span data-stu-id="7f825-213">**Subnets**: A list of subnets that exist within the virtual network is shown.</span></span> <span data-ttu-id="7f825-214">若要了解如何新增和移除子網路，請參閱[新增、變更或刪除子網路](virtual-network-manage-subnet.md)的[建立子網路](virtual-network-manage-subnet.md#create-subnet)和[刪除子網路](virtual-network-manage-subnet.md#delete-subnet)。</span><span class="sxs-lookup"><span data-stu-id="7f825-214">To learn how to add and remove a subnet, see [Create a subnet](virtual-network-manage-subnet.md#create-subnet) and [Delete a subnet](virtual-network-manage-subnet.md#delete-subnet) in [Add, change, or delete subnets](virtual-network-manage-subnet.md).</span></span>
    - <span data-ttu-id="7f825-215">**DNS 伺服器**︰您可以指定由 Azure 的內部 DNS 伺服器或自訂 DNS 伺服器來為連線到虛擬網路的裝置提供名稱解析。</span><span class="sxs-lookup"><span data-stu-id="7f825-215">**DNS servers**: You can specify whether the Azure internal DNS server or a custom DNS server provides name resolution for devices that are connected to the virtual network.</span></span> <span data-ttu-id="7f825-216">在使用 Azure 入口網站建立虛擬網路時，虛擬網路預設會使用 Azure 的 DNS 伺服器來解析名稱。</span><span class="sxs-lookup"><span data-stu-id="7f825-216">When you create a virtual network by using the Azure portal, Azure's DNS servers are used for name resolution within a virtual network, by default.</span></span> <span data-ttu-id="7f825-217">若要修改 DNS 伺服器，請完成本文的[新增、變更或移除 DNS 伺服器](#dns-servers)中的步驟。</span><span class="sxs-lookup"><span data-stu-id="7f825-217">To modify the DNS servers, complete the steps in [Add, change, or remove a DNS server](#dns-servers) in this article.</span></span>
    - <span data-ttu-id="7f825-218">**對等互連**︰如果訂用帳戶中已有對等互連，這裡便會列出。</span><span class="sxs-lookup"><span data-stu-id="7f825-218">**Peerings**: If there are existing peerings in the subscription, they are listed here.</span></span> <span data-ttu-id="7f825-219">您可以檢視現有對等互連的設定，也可以建立、變更或刪除對等互連。</span><span class="sxs-lookup"><span data-stu-id="7f825-219">You can view settings for existing peerings, or create, change, or delete peerings.</span></span> <span data-ttu-id="7f825-220">若要深入了解對等互連，請參閱[虛擬網路對等互連](virtual-network-peering-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="7f825-220">To learn more about peerings, see [Virtual network peering](virtual-network-peering-overview.md).</span></span>
    - <span data-ttu-id="7f825-221">**屬性**︰顯示虛擬網路的相關設定，包括虛擬網路的資源識別碼及其所在的訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="7f825-221">**Properties**: Displays settings about the virtual network, including the virtual network's resource ID and the Azure subscription it is in.</span></span>
    - <span data-ttu-id="7f825-222">**圖表**︰此圖表會以視覺方式來呈現所有連線到虛擬網路的裝置。</span><span class="sxs-lookup"><span data-stu-id="7f825-222">**Diagram**: The diagram provides a visual representation of all devices that are connected to the virtual network.</span></span> <span data-ttu-id="7f825-223">此圖表包含有關裝置的一些重要資訊。</span><span class="sxs-lookup"><span data-stu-id="7f825-223">The diagram has some key information about the devices.</span></span> <span data-ttu-id="7f825-224">若要在此檢視中管理裝置，請在圖表中按一下裝置。</span><span class="sxs-lookup"><span data-stu-id="7f825-224">To manage a device in this view, in the diagram, click the device.</span></span>
    - <span data-ttu-id="7f825-225">**一般 Azure 設定**：若要深入了解 Azure 的一般設定，請參閱下列資訊：</span><span class="sxs-lookup"><span data-stu-id="7f825-225">**Common Azure settings**: To learn more about common Azure settings, see the following information:</span></span>
        *   [<span data-ttu-id="7f825-226">活動記錄檔</span><span class="sxs-lookup"><span data-stu-id="7f825-226">Activity log</span></span>](../azure-resource-manager/resource-group-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json#activity-logs)
        *   [<span data-ttu-id="7f825-227">存取控制 (IAM)</span><span class="sxs-lookup"><span data-stu-id="7f825-227">Access control (IAM)</span></span>](../azure-resource-manager/resource-group-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json#access-control)
        *   [<span data-ttu-id="7f825-228">標記</span><span class="sxs-lookup"><span data-stu-id="7f825-228">Tags</span></span>](../azure-resource-manager/resource-group-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json#tags)
        *   [<span data-ttu-id="7f825-229">鎖定</span><span class="sxs-lookup"><span data-stu-id="7f825-229">Locks</span></span>](../azure-resource-manager/resource-group-lock-resources.md?toc=%2fazure%2fvirtual-network%2ftoc.json)
        *   [<span data-ttu-id="7f825-230">自動化指令碼</span><span class="sxs-lookup"><span data-stu-id="7f825-230">Automation script</span></span>](../azure-resource-manager/resource-manager-export-template.md?toc=%2fazure%2fvirtual-network%2ftoc.json#export-the-template-from-resource-group)

<span data-ttu-id="7f825-231">**命令**</span><span class="sxs-lookup"><span data-stu-id="7f825-231">**Commands**</span></span>

|<span data-ttu-id="7f825-232">工具</span><span class="sxs-lookup"><span data-stu-id="7f825-232">Tool</span></span>|<span data-ttu-id="7f825-233">命令</span><span class="sxs-lookup"><span data-stu-id="7f825-233">Command</span></span>|
|---|---|
|<span data-ttu-id="7f825-234">Azure CLI</span><span class="sxs-lookup"><span data-stu-id="7f825-234">Azure CLI</span></span>|[<span data-ttu-id="7f825-235">az network vnet show</span><span class="sxs-lookup"><span data-stu-id="7f825-235">az network vnet show</span></span>](/cli/azure/network/vnet?toc=%2fazure%2fvirtual-network%2ftoc.json#show)|
|<span data-ttu-id="7f825-236">PowerShell</span><span class="sxs-lookup"><span data-stu-id="7f825-236">PowerShell</span></span>|[<span data-ttu-id="7f825-237">Get-AzureRmVirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="7f825-237">Get-AzureRmVirtualNetwork</span></span>](/powershell/module/azurerm.network/get-azurermvirtualnetwork/?toc=%2fazure%2fvirtual-network%2ftoc.json)|


## <span data-ttu-id="7f825-238"><a name="add-address-spaces"></a>新增或移除位址空間</span><span class="sxs-lookup"><span data-stu-id="7f825-238"><a name="add-address-spaces"></a>Add or remove an address space</span></span>

<span data-ttu-id="7f825-239">您可以新增和移除虛擬網路的位址空間。</span><span class="sxs-lookup"><span data-stu-id="7f825-239">You can add and remove address spaces for a virtual network.</span></span> <span data-ttu-id="7f825-240">位址空間必須以 CIDR 表示法來指定，而且同一個虛擬網路中的位址空間不能重疊。</span><span class="sxs-lookup"><span data-stu-id="7f825-240">An address space must be specified in CIDR notation, and cannot overlap with other address spaces within the same virtual network.</span></span> <span data-ttu-id="7f825-241">您可以定義公用或私人的位址空間 (RFC 1918)。</span><span class="sxs-lookup"><span data-stu-id="7f825-241">The address spaces you define can be public or private (RFC 1918).</span></span> <span data-ttu-id="7f825-242">不論您定義的是公用或私人的位址空間，您都只能從虛擬網路、互連的虛擬網路，以及任何已連線到虛擬網路的內部部署網路來連線到位址空間。</span><span class="sxs-lookup"><span data-stu-id="7f825-242">Whether you define the address space as public or private, the address space is reachable only from within the virtual network, from interconnected virtual networks, and from any on-premises networks that you have connected to the virtual network.</span></span> <span data-ttu-id="7f825-243">您無法新增下列位址空間︰</span><span class="sxs-lookup"><span data-stu-id="7f825-243">You cannot add the following address spaces:</span></span>

- <span data-ttu-id="7f825-244">224.0.0.0/4 (多點傳送)</span><span class="sxs-lookup"><span data-stu-id="7f825-244">224.0.0.0/4 (Multicast)</span></span>
- <span data-ttu-id="7f825-245">255.255.255.255/32 (廣播)</span><span class="sxs-lookup"><span data-stu-id="7f825-245">255.255.255.255/32 (Broadcast)</span></span>
- <span data-ttu-id="7f825-246">127.0.0.0/8 (回送)</span><span class="sxs-lookup"><span data-stu-id="7f825-246">127.0.0.0/8 (Loopback)</span></span>
- <span data-ttu-id="7f825-247">169.254.0.0/16 (連結-本機)</span><span class="sxs-lookup"><span data-stu-id="7f825-247">169.254.0.0/16 (Link-local)</span></span>
- <span data-ttu-id="7f825-248">168.63.129.16/32 (內部 DNS)</span><span class="sxs-lookup"><span data-stu-id="7f825-248">168.63.129.16/32 (Internal DNS)</span></span>

<span data-ttu-id="7f825-249">若要新增或移除位址空間：</span><span class="sxs-lookup"><span data-stu-id="7f825-249">To add or remove an address space:</span></span>

1. <span data-ttu-id="7f825-250">請使用已指派訂用帳戶網路參與者角色權限 (至少) 的帳戶來登入[入口網站](https://portal.azure.com)。</span><span class="sxs-lookup"><span data-stu-id="7f825-250">Sign in to the [portal](https://portal.azure.com) with an account that is assigned permissions for the Network Contributor role (at a minimum) for your subscription.</span></span> <span data-ttu-id="7f825-251">若要深入了解如何將角色和權限指派給帳戶，請參閱 [Azure 角色型存取控制的內建角色](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor)。</span><span class="sxs-lookup"><span data-stu-id="7f825-251">To learn more about assigning roles and permissions to accounts, see [Built-in roles for Azure role-based access control](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor).</span></span>
2. <span data-ttu-id="7f825-252">在入口網站的搜尋方塊中，輸入「虛擬網路」。</span><span class="sxs-lookup"><span data-stu-id="7f825-252">In the portal search box, enter **virtual networks**.</span></span> <span data-ttu-id="7f825-253">在搜尋結果中，選取「虛擬網路」。</span><span class="sxs-lookup"><span data-stu-id="7f825-253">In the search results, select **Virtual networks**.</span></span>
3. <span data-ttu-id="7f825-254">在 [虛擬網路] 刀鋒視窗上，按一下您要新增或移除位址空間的虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="7f825-254">On the **Virtual networks** blade, click the virtual network for which you want to add or remove an address space.</span></span>
4. <span data-ttu-id="7f825-255">在 [虛擬網路] 刀鋒視窗中，按一下 [設定] 之下的 [位址空間]。</span><span class="sxs-lookup"><span data-stu-id="7f825-255">On the virtual network blade, under **SETTINGS**, click **Address space**.</span></span>
5. <span data-ttu-id="7f825-256">在位址空間的刀鋒視窗中，完成下列其中一個選項：</span><span class="sxs-lookup"><span data-stu-id="7f825-256">On the blade for the address space, complete one of the following options:</span></span>
    - <span data-ttu-id="7f825-257">**新增位址空間**︰輸入新的位址空間。</span><span class="sxs-lookup"><span data-stu-id="7f825-257">**Add an address space**: Enter the new address space.</span></span> <span data-ttu-id="7f825-258">此位址空間不能與虛擬網路已定義的現有位址空間重疊。</span><span class="sxs-lookup"><span data-stu-id="7f825-258">The address space cannot overlap with an existing address space that is defined for the virtual network.</span></span>
    - <span data-ttu-id="7f825-259">**移除地址空間**︰以滑鼠右鍵按一下位址空間，然後按一下 [移除]。</span><span class="sxs-lookup"><span data-stu-id="7f825-259">**Remove an address space**: Right-click an address space, and then click **Remove**.</span></span> <span data-ttu-id="7f825-260">如果位址空間有現存的子網路，您就無法移除該位址空間。</span><span class="sxs-lookup"><span data-stu-id="7f825-260">If a subnet exists in the address space, you cannot remove the address space.</span></span> <span data-ttu-id="7f825-261">若要移除位址空間，您必須先刪除位址空間中存在的任何子網路 (以及連線至子網路的任何資源)。</span><span class="sxs-lookup"><span data-stu-id="7f825-261">To remove an address space, you must first delete any subnets (and any resources that are connected to the subnets) that exist in the address space.</span></span>
6. <span data-ttu-id="7f825-262">按一下 [儲存] 。</span><span class="sxs-lookup"><span data-stu-id="7f825-262">Click **Save**.</span></span>

<span data-ttu-id="7f825-263">**命令**</span><span class="sxs-lookup"><span data-stu-id="7f825-263">**Commands**</span></span>

|<span data-ttu-id="7f825-264">工具</span><span class="sxs-lookup"><span data-stu-id="7f825-264">Tool</span></span>|<span data-ttu-id="7f825-265">命令</span><span class="sxs-lookup"><span data-stu-id="7f825-265">Command</span></span>|
|---|---|
|<span data-ttu-id="7f825-266">Azure CLI</span><span class="sxs-lookup"><span data-stu-id="7f825-266">Azure CLI</span></span>|<span data-ttu-id="7f825-267">僅限 Resource Manager</span><span class="sxs-lookup"><span data-stu-id="7f825-267">Resource Manager only</span></span>|[<span data-ttu-id="7f825-268">az network vnet update</span><span class="sxs-lookup"><span data-stu-id="7f825-268">az network vnet update</span></span>](/cli/azure/network/vnet?toc=%2fazure%2fvirtual-network%2ftoc.json#update)|
|<span data-ttu-id="7f825-269">PowerShell</span><span class="sxs-lookup"><span data-stu-id="7f825-269">PowerShell</span></span>|[<span data-ttu-id="7f825-270">Set-AzureRmVirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="7f825-270">Set-AzureRmVirtualNetwork</span></span>](/powershell/module/azurerm.network/set-azurermvirtualnetwork?toc=%2fazure%2fvirtual-network%2ftoc.json)|

## <span data-ttu-id="7f825-271"><a name="dns-servers"></a>新增、變更或移除 DNS 伺服器</span><span class="sxs-lookup"><span data-stu-id="7f825-271"><a name="dns-servers"></a>Add, change, or remove a DNS server</span></span>

<span data-ttu-id="7f825-272">所有連線至虛擬網路的 VM 會向您為虛擬網路指定的 DNS 伺服器註冊。</span><span class="sxs-lookup"><span data-stu-id="7f825-272">All VMs that are connected to the virtual network register with the DNS servers that you specify for the virtual network.</span></span> <span data-ttu-id="7f825-273">他們也可使用指定的 DNS 伺服器進行名稱解析。</span><span class="sxs-lookup"><span data-stu-id="7f825-273">They also use the specified DNS server for name resolution.</span></span> <span data-ttu-id="7f825-274">VM 中的每個網路介面 (NIC) 都可以有自己的 DNS 伺服器設定。</span><span class="sxs-lookup"><span data-stu-id="7f825-274">Each network interface (NIC) in a VM can have its own DNS server settings.</span></span> <span data-ttu-id="7f825-275">如果 NIC 有自己的 DNS 伺服器設定，其設定就會覆寫虛擬網路的 DNS 伺服器設定。</span><span class="sxs-lookup"><span data-stu-id="7f825-275">If a NIC has its own DNS server settings, they override the DNS server settings for the virtual network.</span></span> <span data-ttu-id="7f825-276">若要深入了解 NIC DNS 設定，請參閱[網路介面工作和設定](virtual-network-network-interface.md#change-dns-servers)。</span><span class="sxs-lookup"><span data-stu-id="7f825-276">To learn more about NIC DNS settings, see [Network interface tasks and settings](virtual-network-network-interface.md#change-dns-servers).</span></span> <span data-ttu-id="7f825-277">若要深入了解 Azure 雲端服務中 VM 和角色執行個體的名稱解析，請參閱 [VM 和角色執行個體的名稱解析](virtual-networks-name-resolution-for-vms-and-role-instances.md)。</span><span class="sxs-lookup"><span data-stu-id="7f825-277">To learn more about name resolution for VMs and role instances in Azure Cloud Services, see [Name resolution for VMs and role instances](virtual-networks-name-resolution-for-vms-and-role-instances.md).</span></span> <span data-ttu-id="7f825-278">若要新增、變更或移除 DNS 伺服器：</span><span class="sxs-lookup"><span data-stu-id="7f825-278">To add, change, or remove a DNS server:</span></span>

1. <span data-ttu-id="7f825-279">請使用已指派訂用帳戶網路參與者角色權限 (至少) 的帳戶來登入[入口網站](https://portal.azure.com)。</span><span class="sxs-lookup"><span data-stu-id="7f825-279">Sign in to the [portal](https://portal.azure.com) with an account that is assigned permissions for the Network Contributor role (at a minimum) for your subscription.</span></span> <span data-ttu-id="7f825-280">若要深入了解如何將角色和權限指派給帳戶，請參閱 [Azure 角色型存取控制的內建角色](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor)。</span><span class="sxs-lookup"><span data-stu-id="7f825-280">To learn more about assigning roles and permissions to accounts, see [Built-in roles for Azure role-based access control](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor).</span></span>
2. <span data-ttu-id="7f825-281">在入口網站的搜尋方塊中，輸入「虛擬網路」。</span><span class="sxs-lookup"><span data-stu-id="7f825-281">In the portal search box, type **virtual networks**.</span></span> <span data-ttu-id="7f825-282">在搜尋結果中，選取「虛擬網路」。</span><span class="sxs-lookup"><span data-stu-id="7f825-282">In the search results, select **Virtual networks**.</span></span>
3. <span data-ttu-id="7f825-283">在 [虛擬網路] 刀鋒視窗上，按一下您想要變更 DNS 設定的虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="7f825-283">On the **Virtual networks** blade, click the virtual network you want to change DNS settings for.</span></span>
4. <span data-ttu-id="7f825-284">在 [虛擬網路] 刀鋒視窗上，按一下 [設定] 之下的 [DNS 伺服器]。</span><span class="sxs-lookup"><span data-stu-id="7f825-284">On the virtual network blade, under **SETTINGS**, click **DNS servers**.</span></span>
5. <span data-ttu-id="7f825-285">在列出 DNS 伺服器的刀鋒視窗上，選取下列其中一個選項︰</span><span class="sxs-lookup"><span data-stu-id="7f825-285">Select one of the following options on the blade that lists DNS servers:</span></span>
    - <span data-ttu-id="7f825-286">**預設值 (由 Azure 提供)**︰所有資源名稱和私人 IP 位址都會自動向 Azure DNS 伺服器進行註冊。</span><span class="sxs-lookup"><span data-stu-id="7f825-286">**Default (Azure-provided)**: All resource names and private IP addresses are automatically registered to the Azure DNS servers.</span></span> <span data-ttu-id="7f825-287">您可以在連線到相同虛擬網路的任何資源之間解析名稱。</span><span class="sxs-lookup"><span data-stu-id="7f825-287">You can resolve names between any resources that are connected to the same virtual network.</span></span> <span data-ttu-id="7f825-288">您無法使用此選項來跨虛擬網路解析名稱。</span><span class="sxs-lookup"><span data-stu-id="7f825-288">You cannot use this option to resolve names across virtual networks.</span></span> <span data-ttu-id="7f825-289">若要跨虛擬網路解析名稱，您必須使用自訂 DNS 伺服器。</span><span class="sxs-lookup"><span data-stu-id="7f825-289">To resolve names across virtual networks, you must use a custom DNS server.</span></span>
    - <span data-ttu-id="7f825-290">**自訂**︰您可以為虛擬網路新增一或多部伺服器，數量可達 Azure 的限制。</span><span class="sxs-lookup"><span data-stu-id="7f825-290">**Custom**: You can add one or more servers, up to the Azure limit for a virtual network.</span></span> <span data-ttu-id="7f825-291">若要深入了解 DNS 伺服器限制，請參閱 [Azure 限制](../azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#virtual-networking-limits-classic)。</span><span class="sxs-lookup"><span data-stu-id="7f825-291">To learn more about DNS server limits, see [Azure limits](../azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#virtual-networking-limits-classic).</span></span> <span data-ttu-id="7f825-292">您有下列選擇：</span><span class="sxs-lookup"><span data-stu-id="7f825-292">You have the following options:</span></span>
        - <span data-ttu-id="7f825-293">**新增地址**︰將伺服器新增至虛擬網路 DNS 伺服器清單。</span><span class="sxs-lookup"><span data-stu-id="7f825-293">**Add an address**: Adds the server to your virtual network DNS servers list.</span></span> <span data-ttu-id="7f825-294">此選項也會向 Azure 註冊 DNS 伺服器。</span><span class="sxs-lookup"><span data-stu-id="7f825-294">This option also registers the DNS server with Azure.</span></span> <span data-ttu-id="7f825-295">如果您已向 Azure 註冊 DNS 伺服器，即可在清單中選取該 DNS 伺服器。</span><span class="sxs-lookup"><span data-stu-id="7f825-295">If you've already registered a DNS server with Azure, you can select that DNS server in the list.</span></span>
        - <span data-ttu-id="7f825-296">**移除位址**︰在您想要移除的伺服器旁，按一下 **X**。刪除伺服器只會從此虛擬網路清單中移除伺服器。</span><span class="sxs-lookup"><span data-stu-id="7f825-296">**Remove an address**: Next to the server that you want to remove, click **X**. Deleting the server removes the server only from this virtual network list.</span></span> <span data-ttu-id="7f825-297">DNS 伺服器會在 Azure 中保持登錄狀態，以便您其他的虛擬網路使用。</span><span class="sxs-lookup"><span data-stu-id="7f825-297">The DNS server remains registered in Azure for your other virtual networks to use.</span></span>
        - <span data-ttu-id="7f825-298">**將 DNS 伺服器位址重新排序**︰請務必要確認，您為環境所列出的 DNS 伺服器順序是正確的。</span><span class="sxs-lookup"><span data-stu-id="7f825-298">**Reorder DNS server addresses**: It's important to verify that you list your DNS servers in the correct order for your environment.</span></span> <span data-ttu-id="7f825-299">DNS 伺服器清單會依其指定的順序來使用。</span><span class="sxs-lookup"><span data-stu-id="7f825-299">DNS server lists are used in the order that they are specified.</span></span> <span data-ttu-id="7f825-300">它們不會當作循環配置資源設定運作。</span><span class="sxs-lookup"><span data-stu-id="7f825-300">They do not work as a round-robin setup.</span></span> <span data-ttu-id="7f825-301">如果清單上的第一部 DNS 伺服器是可以連線的，用戶端就會使用該 DNS 伺服器，而不管該 DNS 伺服器是否有正常運作。</span><span class="sxs-lookup"><span data-stu-id="7f825-301">If the first DNS server in the list can be reached, the client uses that DNS server, regardless of whether the DNS server is functioning properly.</span></span> <span data-ttu-id="7f825-302">請移除所有列出的 DNS 伺服器，再以您想要的順序重新新增。</span><span class="sxs-lookup"><span data-stu-id="7f825-302">Remove all the DNS servers that are listed, and then add them back in the order that you want.</span></span>
        - <span data-ttu-id="7f825-303">**變更位址**：將清單中的 DNS 伺服器醒目提示，然後輸入新名稱。</span><span class="sxs-lookup"><span data-stu-id="7f825-303">**Change an address**: Highlight the DNS server in the list, and then enter the new name.</span></span>
6. <span data-ttu-id="7f825-304">按一下 [儲存] 。</span><span class="sxs-lookup"><span data-stu-id="7f825-304">Click **Save**.</span></span>
7. <span data-ttu-id="7f825-305">將連線到虛擬網路的 VM 重新啟動，讓這些 VM 獲得新的 DNS 伺服器設定。</span><span class="sxs-lookup"><span data-stu-id="7f825-305">Restart the VMs that are connected to the virtual network, so they are assigned the new DNS server settings.</span></span> <span data-ttu-id="7f825-306">這些 VM 會繼續使用其目前的 DNS 設定，直到您將其重新啟動。</span><span class="sxs-lookup"><span data-stu-id="7f825-306">VMs continue to use their current DNS settings until they are restarted.</span></span>

<span data-ttu-id="7f825-307">**命令**</span><span class="sxs-lookup"><span data-stu-id="7f825-307">**Commands**</span></span>

|<span data-ttu-id="7f825-308">工具</span><span class="sxs-lookup"><span data-stu-id="7f825-308">Tool</span></span>|<span data-ttu-id="7f825-309">命令</span><span class="sxs-lookup"><span data-stu-id="7f825-309">Command</span></span>|
|---|---|
|<span data-ttu-id="7f825-310">Azure CLI</span><span class="sxs-lookup"><span data-stu-id="7f825-310">Azure CLI</span></span>|[<span data-ttu-id="7f825-311">az network vnet update</span><span class="sxs-lookup"><span data-stu-id="7f825-311">az network vnet update</span></span>](/cli/azure/network/vnet?toc=%2fazure%2fvirtual-network%2ftoc.json#update)|
|<span data-ttu-id="7f825-312">PowerShell</span><span class="sxs-lookup"><span data-stu-id="7f825-312">PowerShell</span></span>|[<span data-ttu-id="7f825-313">Set-AzureRmVirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="7f825-313">Set-AzureRmVirtualNetwork</span></span>](/powershell/module/azurerm.network/set-azurermvirtualnetwork?toc=%2fazure%2fvirtual-network%2ftoc.json)|

## <span data-ttu-id="7f825-314"><a name="delete-vnet"></a>刪除虛擬網路</span><span class="sxs-lookup"><span data-stu-id="7f825-314"><a name="delete-vnet"></a>Delete a virtual network</span></span>

<span data-ttu-id="7f825-315">您只能刪除未連線任何資源的虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="7f825-315">You can delete a virtual network only if there are no resources connected to it.</span></span> <span data-ttu-id="7f825-316">如果有資源連線至虛擬網路中的任何子網路，您必須先刪除虛擬網路中所有子網路的已連線資源。</span><span class="sxs-lookup"><span data-stu-id="7f825-316">If there are resources connected to any subnet within the virtual network, you must first delete the resources that are connected to all subnets within the virtual network.</span></span> <span data-ttu-id="7f825-317">不同資源的資源刪除步驟也各異。</span><span class="sxs-lookup"><span data-stu-id="7f825-317">The steps you take to delete a resource vary depending on the resource.</span></span> <span data-ttu-id="7f825-318">若要了解如何刪除已連線至子網路的資源，請閱讀您想要刪除之各個資源類型的適用文件。</span><span class="sxs-lookup"><span data-stu-id="7f825-318">To learn how to delete resources that are connected to subnets, read the documentation for each resource type you want to delete.</span></span> <span data-ttu-id="7f825-319">若要刪除虛擬網路：</span><span class="sxs-lookup"><span data-stu-id="7f825-319">To delete a virtual network:</span></span>

1. <span data-ttu-id="7f825-320">使用 (至少) 具備您訂用帳戶網路參與者角色權限的帳戶來登入[入口網站](https://portal.azure.com)。</span><span class="sxs-lookup"><span data-stu-id="7f825-320">Sign in to the [portal](https://portal.azure.com) with an account that is assigned (at a minimum) permissions for the Network Contributor role for your subscription.</span></span> <span data-ttu-id="7f825-321">若要深入了解如何將角色和權限指派給帳戶，請參閱 [Azure 角色型存取控制的內建角色](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor)。</span><span class="sxs-lookup"><span data-stu-id="7f825-321">To learn more about assigning roles and permissions to accounts, see [Built-in roles for Azure role-based access control](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor).</span></span>
2. <span data-ttu-id="7f825-322">在入口網站的搜尋方塊中，輸入「虛擬網路」。</span><span class="sxs-lookup"><span data-stu-id="7f825-322">In the portal search box, enter **virtual networks**.</span></span> <span data-ttu-id="7f825-323">按一下搜尋結果中出現的「虛擬網路」。</span><span class="sxs-lookup"><span data-stu-id="7f825-323">In the search results, click **Virtual networks**.</span></span>
3. <span data-ttu-id="7f825-324">在 [虛擬網路] 刀鋒視窗上，選取您要刪除的虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="7f825-324">On the **Virtual networks** blade, select the virtual network you want to delete.</span></span>
4. <span data-ttu-id="7f825-325">在 [虛擬網路] 刀鋒視窗上，若要確認沒有任何裝置連線到虛擬網路，請在 [設定] 之下，按一下 [已連線的裝置]。</span><span class="sxs-lookup"><span data-stu-id="7f825-325">On the virtual network blade, to confirm that there are no devices connected to the virtual network, under **SETTINGS**, click **Connected devices**.</span></span> <span data-ttu-id="7f825-326">如果有已連線的裝置，您必須先將其刪除，才能刪除虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="7f825-326">If there are connected devices, you must delete them before you can delete the virtual network.</span></span> <span data-ttu-id="7f825-327">如果沒有已連線的裝置，請按一下 [概觀]。</span><span class="sxs-lookup"><span data-stu-id="7f825-327">If there are no connected devices, click **Overview**.</span></span>
5. <span data-ttu-id="7f825-328">在刀鋒視窗頂端，按一下 [刪除] 圖示。</span><span class="sxs-lookup"><span data-stu-id="7f825-328">At the top of the blade, click the **Delete** icon.</span></span>
6. <span data-ttu-id="7f825-329">若要確認刪除虛擬網路，請按一下 [是]。</span><span class="sxs-lookup"><span data-stu-id="7f825-329">To confirm the deletion of the virtual network, click **Yes**.</span></span>


<span data-ttu-id="7f825-330">**命令**</span><span class="sxs-lookup"><span data-stu-id="7f825-330">**Commands**</span></span>

|<span data-ttu-id="7f825-331">工具</span><span class="sxs-lookup"><span data-stu-id="7f825-331">Tool</span></span>|<span data-ttu-id="7f825-332">命令</span><span class="sxs-lookup"><span data-stu-id="7f825-332">Command</span></span>|
|---|---|
|<span data-ttu-id="7f825-333">Azure CLI</span><span class="sxs-lookup"><span data-stu-id="7f825-333">Azure CLI</span></span>|[<span data-ttu-id="7f825-334">azure network vnet delete</span><span class="sxs-lookup"><span data-stu-id="7f825-334">azure network vnet delete</span></span>](/cli/azure/network/vnet?toc=%2fazure%2fvirtual-network%2ftoc.json#delete)|
|<span data-ttu-id="7f825-335">PowerShell</span><span class="sxs-lookup"><span data-stu-id="7f825-335">PowerShell</span></span>|[<span data-ttu-id="7f825-336">Remove-AzureRmVirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="7f825-336">Remove-AzureRmVirtualNetwork</span></span>](/powershell/module/azurerm.network/remove-azurermvirtualnetwork?toc=%2fazure%2fvirtual-network%2ftoc.json)|


## <span data-ttu-id="7f825-337"><a name="next-steps"></a>接續步驟</span><span class="sxs-lookup"><span data-stu-id="7f825-337"><a name="next-steps"></a>Next steps</span></span>

- <span data-ttu-id="7f825-338">若要建立 VM 並將它連線到虛擬網路，請參閱[建立虛擬網路並連線 VM](virtual-network-get-started-vnet-subnet.md#create-vms)。</span><span class="sxs-lookup"><span data-stu-id="7f825-338">To create a VM and then connect it to a virtual network, see [Create a virtual network and connect VMs](virtual-network-get-started-vnet-subnet.md#create-vms).</span></span>
- <span data-ttu-id="7f825-339">若要篩選虛擬網路之間的網路流量，請參閱[建立網路安全性群組](virtual-networks-create-nsg-arm-pportal.md)。</span><span class="sxs-lookup"><span data-stu-id="7f825-339">To filter network traffic between subnets within a virtual network, see [Create network security groups](virtual-networks-create-nsg-arm-pportal.md).</span></span>
- <span data-ttu-id="7f825-340">若要讓兩個虛擬交換器對等互連，請參閱[建立虛擬網路對等互連](virtual-network-create-peering.md#portal)。</span><span class="sxs-lookup"><span data-stu-id="7f825-340">To peer a virtual network to another virtual network, see [Create a virtual network peering](virtual-network-create-peering.md#portal).</span></span>
- <span data-ttu-id="7f825-341">若要了解用於將虛擬網路連線到內部部署網路的選項，請參閱[關於 VPN 閘道](../vpn-gateway/vpn-gateway-about-vpngateways.md?toc=%2fazure%2fvirtual-network%2ftoc.json#diagrams)。</span><span class="sxs-lookup"><span data-stu-id="7f825-341">To learn about options for connecting a virtual network to an on-premises network, see [About VPN Gateway](../vpn-gateway/vpn-gateway-about-vpngateways.md?toc=%2fazure%2fvirtual-network%2ftoc.json#diagrams).</span></span>
