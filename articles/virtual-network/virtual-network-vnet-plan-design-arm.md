---
title: "aaaAzure 虛擬網路 (VNet) 計劃和設計指南 |Microsoft 文件"
description: "了解如何 tooplan 和設計 Azure 中的虛擬網路根據隔離、 連接及位置需求。"
services: virtual-network
documentationcenter: na
author: jimdial
manager: carmonm
editor: tysonn
ms.assetid: 3a4a9aea-7608-4d2e-bb3c-40de2e537200
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 02/08/2016
ms.author: jdial
ms.openlocfilehash: f3ffadf8cf254f64b1f86b44f90315d2bc679f63
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="plan-and-design-azure-virtual-networks"></a><span data-ttu-id="c7aeb-103">規劃和設計 Azure 虛擬網路</span><span class="sxs-lookup"><span data-stu-id="c7aeb-103">Plan and design Azure Virtual Networks</span></span>
<span data-ttu-id="c7aeb-104">建立與 VNet tooexperiment 很簡單，但有可能是因為，您會透過時間 toosupport hello 生產環境需求，您的組織中部署多個 Vnet。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-104">Creating a VNet tooexperiment with is easy enough, but chances are, you will deploy multiple VNets over time toosupport hello production needs of your organization.</span></span> <span data-ttu-id="c7aeb-105">以一些規劃和設計，您將會是能 toodeploy Vnet，並且 hello 資源，您需要更有效地連接。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-105">With some planning and design, you will be able toodeploy VNets and connect hello resources you need more effectively.</span></span> <span data-ttu-id="c7aeb-106">如果您不熟悉的 Vnet，建議您[深入了解 Vnet](virtual-networks-overview.md)和[如何 toodeploy](virtual-networks-create-vnet-arm-pportal.md)一個才能繼續。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-106">If you are not familiar with VNets, it's recommended that you [learn about VNets](virtual-networks-overview.md) and [how toodeploy](virtual-networks-create-vnet-arm-pportal.md) one before proceeding.</span></span>

## <a name="plan"></a><span data-ttu-id="c7aeb-107">規劃</span><span class="sxs-lookup"><span data-stu-id="c7aeb-107">Plan</span></span>
<span data-ttu-id="c7aeb-108">徹底了解 Azure 訂用帳戶、區域和網路資源是成功的關鍵。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-108">A thorough understanding of Azure subscriptions, regions, and network resources is critical for success.</span></span> <span data-ttu-id="c7aeb-109">您可以使用以下考量事項 hello 清單做為起點。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-109">You can use hello list of considerations below as a starting point.</span></span> <span data-ttu-id="c7aeb-110">一旦您了解這些考量，您可以定義 hello 需求，您的網路設計。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-110">Once you understand those considerations, you can define hello requirements for your network design.</span></span>

### <a name="considerations"></a><span data-ttu-id="c7aeb-111">考量</span><span class="sxs-lookup"><span data-stu-id="c7aeb-111">Considerations</span></span>
<span data-ttu-id="c7aeb-112">之前回應 hello 規劃以下的問題，請考慮下列 hello:</span><span class="sxs-lookup"><span data-stu-id="c7aeb-112">Before answering hello planning questions below, consider hello following:</span></span>

* <span data-ttu-id="c7aeb-113">您在 Azure 中建立的所有項目都是由一或多個資源所組成。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-113">Everything you create in Azure is composed of one or more resources.</span></span> <span data-ttu-id="c7aeb-114">虛擬機器 (VM) 是資源，hello 網路介面卡 (NIC) 的 VM 所使用的是資源、 hello NIC 使用公用 IP 位址是資源，hello VNet hello NIC 已連線的 toois 資源。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-114">A virtual machine (VM) is a resource, hello network adapter interface (NIC) used by a VM is a resource, hello public IP address used by a NIC is a resource, hello VNet hello NIC is connected toois a resource.</span></span>
* <span data-ttu-id="c7aeb-115">您可在 [Azure 區域](https://azure.microsoft.com/regions/#services) 和訂用帳戶中建立資源。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-115">You create resources within an [Azure region](https://azure.microsoft.com/regions/#services) and subscription.</span></span> <span data-ttu-id="c7aeb-116">資源只能連接的 tooa 虛擬網路 hello 中已有相同的地區和訂用帳戶 hello 資源。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-116">Resources can only be connected tooa virtual network that exists in hello same region and subscription hello resource is in.</span></span>
* <span data-ttu-id="c7aeb-117">您可以使用，以連接虛擬網路 tooeach 其他：</span><span class="sxs-lookup"><span data-stu-id="c7aeb-117">You can connect virtual networks tooeach other by using:</span></span>
    * <span data-ttu-id="c7aeb-118">**[虛擬網路對等互連](virtual-network-peering-overview.md)**: hello 虛擬網路必須存在於 hello 相同 Azure 區域。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-118">**[Virtual network peering](virtual-network-peering-overview.md)**: hello virtual networks must exist in hello same Azure region.</span></span> <span data-ttu-id="c7aeb-119">如同 hello 資源是已連線的 toohello，所以虛擬網路中的資源之間的頻寬是 hello 相同相同虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-119">Bandwidth between resources in peered virtual networks is hello same as if hello resources were connected toohello same virtual network.</span></span>
    * <span data-ttu-id="c7aeb-120">**Azure [VPN 閘道](../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md)**: hello 虛擬網路可以位於 hello 相同，或不同 Azure 區域。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-120">**An Azure [VPN Gateway](../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md)**: hello virtual networks can exist in hello same, or different Azure regions.</span></span> <span data-ttu-id="c7aeb-121">透過 VPN 閘道連線的虛擬網路中的資源之間的頻寬會受到 hello 頻寬的 hello VPN 閘道。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-121">Bandwidth between resources in virtual networks connected through a VPN Gateway is limited by hello bandwidth of hello VPN Gateway.</span></span>
* <span data-ttu-id="c7aeb-122">您可以將 Vnet tooyour 在內部部署網路連線使用其中一種 hello[連線選項](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti)Azure 中可用。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-122">You can connect VNets tooyour on-premises network by using one of hello [connectivity options](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti) available in Azure.</span></span>
* <span data-ttu-id="c7aeb-123">不同的資源可以群組在一起在[資源群組](../azure-resource-manager/resource-group-overview.md#resource-groups)，讓您更容易 toomanage hello 資源做為一個單位。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-123">Different resources can be grouped together in [resource groups](../azure-resource-manager/resource-group-overview.md#resource-groups), making it easier toomanage hello resource as a unit.</span></span> <span data-ttu-id="c7aeb-124">資源群組可以包含多個區域的資源，只要 hello 資源所屬 toohello 相同訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-124">A resource group can contain resources from multiple regions, as long as hello resources belong toohello same subscription.</span></span>

### <a name="define-requirements"></a><span data-ttu-id="c7aeb-125">定義需求</span><span class="sxs-lookup"><span data-stu-id="c7aeb-125">Define requirements</span></span>
<span data-ttu-id="c7aeb-126">使用下方的 hello 問題做為起點，您的 Azure 網路設計。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-126">Use hello questions below as a starting point for your Azure network design.</span></span>    

1. <span data-ttu-id="c7aeb-127">哪些 Azure 位置將您使用 toohost Vnet 嗎？</span><span class="sxs-lookup"><span data-stu-id="c7aeb-127">What Azure locations will you use toohost VNets?</span></span>
2. <span data-ttu-id="c7aeb-128">您需要這些 Azure 位置之間的 tooprovide 通訊嗎？</span><span class="sxs-lookup"><span data-stu-id="c7aeb-128">Do you need tooprovide communication between these Azure locations?</span></span>
3. <span data-ttu-id="c7aeb-129">您 Azure VNet(s) 與您在內部部署資料中心之間需要 tooprovide 通訊？</span><span class="sxs-lookup"><span data-stu-id="c7aeb-129">Do you need tooprovide communication between your Azure VNet(s) and your on-premises datacenter(s)?</span></span>
4. <span data-ttu-id="c7aeb-130">您的解決方式需要多少個基礎結構即服務 (IaaS) VM、雲端服務角色和 Web 應用程式？</span><span class="sxs-lookup"><span data-stu-id="c7aeb-130">How many Infrastructure as a Service (IaaS) VMs, cloud services roles, and web apps do you need for your solution?</span></span>
5. <span data-ttu-id="c7aeb-131">您需要 tooisolate 流量根據 Vm （也就是前端 web 伺服器和後端資料庫伺服器） 的群組嗎？</span><span class="sxs-lookup"><span data-stu-id="c7aeb-131">Do you need tooisolate traffic based on groups of VMs (i.e. front end web servers and back end database servers)?</span></span>
6. <span data-ttu-id="c7aeb-132">您需要使用虛擬應用裝置 toocontrol 流量的流程嗎？</span><span class="sxs-lookup"><span data-stu-id="c7aeb-132">Do you need toocontrol traffic flow using virtual appliances?</span></span>
7. <span data-ttu-id="c7aeb-133">執行工作的使用者需要不同組的使用權限 toodifferent Azure 資源？</span><span class="sxs-lookup"><span data-stu-id="c7aeb-133">Do users need different sets of permissions toodifferent Azure resources?</span></span>

### <a name="understand-vnet-and-subnet-properties"></a><span data-ttu-id="c7aeb-134">了解 VNet 和子網路屬性</span><span class="sxs-lookup"><span data-stu-id="c7aeb-134">Understand VNet and subnet properties</span></span>
<span data-ttu-id="c7aeb-135">VNet 和子網路資源有助於定義在 Azure 中執行之工作負載的安全性範圍。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-135">VNet and subnets resources help define a security boundary for workloads running in Azure.</span></span> <span data-ttu-id="c7aeb-136">VNET 可由一組位址空間集合所界定 (此集合定義為 CIDR 區塊)。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-136">A VNet is characterized by a collection of address spaces, defined as CIDR blocks.</span></span>

> [!NOTE]
> <span data-ttu-id="c7aeb-137">網路管理員都熟悉 CIDR 標記法。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-137">Network administrators are familiar with CIDR notation.</span></span> <span data-ttu-id="c7aeb-138">如果您不熟悉 CIDR，請 [深入了解](http://whatismyipaddress.com/cidr)。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-138">If you are not familiar with CIDR, [learn more about it](http://whatismyipaddress.com/cidr).</span></span>
>
>

<span data-ttu-id="c7aeb-139">Vnet 包含下列屬性的 hello。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-139">VNets contain hello following properties.</span></span>

| <span data-ttu-id="c7aeb-140">屬性</span><span class="sxs-lookup"><span data-stu-id="c7aeb-140">Property</span></span> | <span data-ttu-id="c7aeb-141">說明</span><span class="sxs-lookup"><span data-stu-id="c7aeb-141">Description</span></span> | <span data-ttu-id="c7aeb-142">條件約束</span><span class="sxs-lookup"><span data-stu-id="c7aeb-142">Constraints</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c7aeb-143">**name**</span><span class="sxs-lookup"><span data-stu-id="c7aeb-143">**name**</span></span> |<span data-ttu-id="c7aeb-144">VNet 名稱</span><span class="sxs-lookup"><span data-stu-id="c7aeb-144">VNet name</span></span> |<span data-ttu-id="c7aeb-145">向上 too80 字元的字串。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-145">String of up too80 characters.</span></span> <span data-ttu-id="c7aeb-146">可以包含字母、數字、底線、句號或連字號。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-146">May contain letters, numbers, underscore, periods, or hyphens.</span></span> <span data-ttu-id="c7aeb-147">必須以字母或數字開頭。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-147">Must start with a letter or number.</span></span> <span data-ttu-id="c7aeb-148">必須以字母、數字或底線結尾。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-148">Must end with a letter, number, or underscore.</span></span> <span data-ttu-id="c7aeb-149">可以包含大寫或小寫字母。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-149">Can contains upper or lower case letters.</span></span> |
| <span data-ttu-id="c7aeb-150">**位置**</span><span class="sxs-lookup"><span data-stu-id="c7aeb-150">**location**</span></span> |<span data-ttu-id="c7aeb-151">Azure 位置 （也參考的 tooas 地區）。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-151">Azure location (also referred tooas region).</span></span> |<span data-ttu-id="c7aeb-152">必須 hello 的其中一個有效的 Azure 位置。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-152">Must be one of hello valid Azure locations.</span></span> |
| <span data-ttu-id="c7aeb-153">**addressSpace**</span><span class="sxs-lookup"><span data-stu-id="c7aeb-153">**addressSpace**</span></span> |<span data-ttu-id="c7aeb-154">位址首碼 hello VNet 以 CIDR 標記法所組成的集合。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-154">Collection of address prefixes that make up hello VNet in CIDR notation.</span></span> |<span data-ttu-id="c7aeb-155">必須是有效的 CIDR 位址區塊陣列，包括公用 IP 位址範圍。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-155">Must be an array of valid CIDR address blocks, including public IP address ranges.</span></span> |
| <span data-ttu-id="c7aeb-156">**子網路**</span><span class="sxs-lookup"><span data-stu-id="c7aeb-156">**subnets**</span></span> |<span data-ttu-id="c7aeb-157">組成 hello VNet 的子網路的集合</span><span class="sxs-lookup"><span data-stu-id="c7aeb-157">Collection of subnets that make up hello VNet</span></span> |<span data-ttu-id="c7aeb-158">請參閱 hello 下的子網路內容表。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-158">see hello subnet properties table below.</span></span> |
| <span data-ttu-id="c7aeb-159">**dhcpOptions**</span><span class="sxs-lookup"><span data-stu-id="c7aeb-159">**dhcpOptions**</span></span> |<span data-ttu-id="c7aeb-160">包含名為 **dnsServers**之單一必要屬性的物件。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-160">Object that contains a single required property named **dnsServers**.</span></span> | |
| <span data-ttu-id="c7aeb-161">**dnsServers**</span><span class="sxs-lookup"><span data-stu-id="c7aeb-161">**dnsServers**</span></span> |<span data-ttu-id="c7aeb-162">使用的 hello VNet DNS 伺服器的陣列。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-162">Array of DNS servers used by hello VNet.</span></span> <span data-ttu-id="c7aeb-163">如果未指定任何伺服器，則會使用 Azure 內部名稱解析。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-163">If no server is specified, Azure internal name resolution is used.</span></span> |<span data-ttu-id="c7aeb-164">必須是 too10 DNS 伺服器 IP 位址所組成的陣列。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-164">Must be an array of up too10 DNS servers, by IP address.</span></span> |

<span data-ttu-id="c7aeb-165">子網路是 VNET 的子資源，而且有助於使用 IP 位址首碼來定義 CIDR 區塊內位址空間的區段。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-165">A subnet is a child resource of a VNet, and helps define segments of address spaces within a CIDR block, using IP address prefixes.</span></span> <span data-ttu-id="c7aeb-166">Nic 可以加入 toosubnets，並已連線的 tooVMs，提供各種工作負載的連線。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-166">NICs can be added toosubnets, and connected tooVMs, providing connectivity for various workloads.</span></span>

<span data-ttu-id="c7aeb-167">子網路包含下列屬性的 hello。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-167">Subnets contain hello following properties.</span></span>

| <span data-ttu-id="c7aeb-168">屬性</span><span class="sxs-lookup"><span data-stu-id="c7aeb-168">Property</span></span> | <span data-ttu-id="c7aeb-169">說明</span><span class="sxs-lookup"><span data-stu-id="c7aeb-169">Description</span></span> | <span data-ttu-id="c7aeb-170">條件約束</span><span class="sxs-lookup"><span data-stu-id="c7aeb-170">Constraints</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c7aeb-171">**name**</span><span class="sxs-lookup"><span data-stu-id="c7aeb-171">**name**</span></span> |<span data-ttu-id="c7aeb-172">子網路名稱</span><span class="sxs-lookup"><span data-stu-id="c7aeb-172">Subnet name</span></span> |<span data-ttu-id="c7aeb-173">向上 too80 字元的字串。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-173">String of up too80 characters.</span></span> <span data-ttu-id="c7aeb-174">可以包含字母、數字、底線、句號或連字號。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-174">May contain letters, numbers, underscore, periods, or hyphens.</span></span> <span data-ttu-id="c7aeb-175">必須以字母或數字開頭。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-175">Must start with a letter or number.</span></span> <span data-ttu-id="c7aeb-176">必須以字母、數字或底線結尾。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-176">Must end with a letter, number, or underscore.</span></span> <span data-ttu-id="c7aeb-177">可以包含大寫或小寫字母。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-177">Can contains upper or lower case letters.</span></span> |
| <span data-ttu-id="c7aeb-178">**位置**</span><span class="sxs-lookup"><span data-stu-id="c7aeb-178">**location**</span></span> |<span data-ttu-id="c7aeb-179">Azure 位置 （也參考的 tooas 地區）。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-179">Azure location (also referred tooas region).</span></span> |<span data-ttu-id="c7aeb-180">必須 hello 的其中一個有效的 Azure 位置。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-180">Must be one of hello valid Azure locations.</span></span> |
| <span data-ttu-id="c7aeb-181">**addressPrefix**</span><span class="sxs-lookup"><span data-stu-id="c7aeb-181">**addressPrefix**</span></span> |<span data-ttu-id="c7aeb-182">Hello 子網路，以 CIDR 標記法所組成的單一位址首碼</span><span class="sxs-lookup"><span data-stu-id="c7aeb-182">Single address prefix that make up hello subnet in CIDR notation</span></span> |<span data-ttu-id="c7aeb-183">必須是單一屬於下列其中一個 hello VNet 位址空間 CIDR 區塊。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-183">Must be a single CIDR block that is part of one of hello VNet's address spaces.</span></span> |
| <span data-ttu-id="c7aeb-184">**networkSecurityGroup**</span><span class="sxs-lookup"><span data-stu-id="c7aeb-184">**networkSecurityGroup**</span></span> |<span data-ttu-id="c7aeb-185">NSG 套用 toohello 子網路</span><span class="sxs-lookup"><span data-stu-id="c7aeb-185">NSG applied toohello subnet</span></span> | |
| <span data-ttu-id="c7aeb-186">**routeTable**</span><span class="sxs-lookup"><span data-stu-id="c7aeb-186">**routeTable**</span></span> |<span data-ttu-id="c7aeb-187">路由表套用 toohello 子網路</span><span class="sxs-lookup"><span data-stu-id="c7aeb-187">Route table applied toohello subnet</span></span> | |
| <span data-ttu-id="c7aeb-188">**ipConfigurations**</span><span class="sxs-lookup"><span data-stu-id="c7aeb-188">**ipConfigurations**</span></span> |<span data-ttu-id="c7aeb-189">Nic 已連線的 toohello 子網路所使用的 IP 組態物件的集合</span><span class="sxs-lookup"><span data-stu-id="c7aeb-189">Collection of IP configuration objects used by NICs connected toohello subnet</span></span> | |

### <a name="name-resolution"></a><span data-ttu-id="c7aeb-190">名稱解析</span><span class="sxs-lookup"><span data-stu-id="c7aeb-190">Name resolution</span></span>
<span data-ttu-id="c7aeb-191">根據預設，使用您的 VNet [Azure 提供名稱解析](virtual-networks-name-resolution-for-vms-and-role-instances.md)tooresolve 名稱置於 hello VNet，而是放 hello 公用網際網路。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-191">By default, your VNet uses [Azure-provided name resolution](virtual-networks-name-resolution-for-vms-and-role-instances.md) tooresolve names inside hello VNet, and on hello public Internet.</span></span> <span data-ttu-id="c7aeb-192">不過，如果您連接您的 Vnet tooyour 在內部部署資料中心，您需要 tooprovide[您自己的 DNS 伺服器](virtual-networks-name-resolution-for-vms-and-role-instances.md)tooresolve 網路之間的名稱。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-192">However, if you connect your VNets tooyour on-premises data centers, you need tooprovide [your own DNS server](virtual-networks-name-resolution-for-vms-and-role-instances.md) tooresolve names between your networks.</span></span>  

### <a name="limits"></a><span data-ttu-id="c7aeb-193">限制</span><span class="sxs-lookup"><span data-stu-id="c7aeb-193">Limits</span></span>
<span data-ttu-id="c7aeb-194">檢閱在 hello hello 網路限制[Azure 限制](../azure-subscription-service-limits.md#networking-limits)您的設計不會與任何 hello 限制相衝突的發行項 tooensure。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-194">Review hello networking limits in hello [Azure limits](../azure-subscription-service-limits.md#networking-limits) article tooensure that your design doesn't conflict with any of hello limits.</span></span> <span data-ttu-id="c7aeb-195">您可以開啟支援票證來提高部分限制。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-195">Some limits can be increased by opening a support ticket.</span></span>

### <a name="role-based-access-control-rbac"></a><span data-ttu-id="c7aeb-196">角色型存取控制 (RBAC)</span><span class="sxs-lookup"><span data-stu-id="c7aeb-196">Role-Based Access Control (RBAC)</span></span>
<span data-ttu-id="c7aeb-197">您可以使用[Azure rbac 進行](../active-directory/role-based-access-built-in-roles.md)toocontrol hello 層級的存取不同的使用者可能會在 Azure 中設有 toodifferent 資源。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-197">You can use [Azure RBAC](../active-directory/role-based-access-built-in-roles.md) toocontrol hello level of access different users may have toodifferent resources in Azure.</span></span> <span data-ttu-id="c7aeb-198">如此一來您可以隔離您根據其需求的小組所完成的 hello 工作。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-198">That way you can segregate hello work done by your team based on their needs.</span></span>

<span data-ttu-id="c7aeb-199">因為虛擬網路的遠端而言，使用者在 hello**網路參與者**角色擁有完整控制權 Azure 資源管理員虛擬網路資源。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-199">As far as virtual networks are concerned, users in hello **Network Contributor** role have full control over Azure Resource Manager virtual network resources.</span></span> <span data-ttu-id="c7aeb-200">同樣地，使用者在 hello**傳統網路參與者**角色擁有完整控制權傳統虛擬網路資源。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-200">Similarly, users in hello **Classic Network Contributor** role have full control over classic virtual network resources.</span></span>

> [!NOTE]
> <span data-ttu-id="c7aeb-201">您也可以[建立您自己的角色](../active-directory/role-based-access-control-configure.md)tooseparate 您的系統管理需求。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-201">You can also [create your own roles](../active-directory/role-based-access-control-configure.md) tooseparate your administrative needs.</span></span>
>
>

## <a name="design"></a><span data-ttu-id="c7aeb-202">設計</span><span class="sxs-lookup"><span data-stu-id="c7aeb-202">Design</span></span>
<span data-ttu-id="c7aeb-203">一旦您知道 hello 答案 toohello 問題中 hello[規劃](#Plan)區段中，檢閱 hello 以下，然後再定義您的 Vnet。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-203">Once you know hello answers toohello questions in hello [Plan](#Plan) section, review hello following before defining your VNets.</span></span>

### <a name="number-of-subscriptions-and-vnets"></a><span data-ttu-id="c7aeb-204">訂用帳戶和 VNet 數目</span><span class="sxs-lookup"><span data-stu-id="c7aeb-204">Number of subscriptions and VNets</span></span>
<span data-ttu-id="c7aeb-205">您應該考慮建立多個 Vnet hello 下列案例中：</span><span class="sxs-lookup"><span data-stu-id="c7aeb-205">You should consider creating multiple VNets in hello following scenarios:</span></span>

* <span data-ttu-id="c7aeb-206">**Vm 需要放在不同的 Azure 位置 toobe**。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-206">**VMs that need toobe placed in different Azure locations**.</span></span> <span data-ttu-id="c7aeb-207">Azure 中的 Vnet 有區域性。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-207">VNets in Azure are regional.</span></span> <span data-ttu-id="c7aeb-208">不能跨區使用。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-208">They cannot span locations.</span></span> <span data-ttu-id="c7aeb-209">因此您需要至少一個 VNet，針對每個您想 toohost Vm 中的 Azure 位置。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-209">Therefore you need at least one VNet for each Azure location you want toohost VMs in.</span></span>
* <span data-ttu-id="c7aeb-210">**需要 toobe 彼此完全隔離的工作負載**。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-210">**Workloads that need toobe completely isolated from one another**.</span></span> <span data-ttu-id="c7aeb-211">您可以建立個別的 Vnet，而該甚至使用 hello 相同的 IP 位址空間，從另一個 tooisolate 不同的工作負載。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-211">You can create separate VNets, that even use hello same IP address spaces, tooisolate different workloads from one another.</span></span>

<span data-ttu-id="c7aeb-212">請記住，上面您所看到的 hello 限制是每個區域，每個訂閱。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-212">Keep in mind that hello limits you see above are per region, per subscription.</span></span> <span data-ttu-id="c7aeb-213">這表示您可以使用多個訂用帳戶 tooincrease hello 限制的資源，您可以在 Azure 中維護。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-213">That means you can use multiple subscriptions tooincrease hello limit of resources you can maintain in Azure.</span></span> <span data-ttu-id="c7aeb-214">您可以使用站對站 VPN 或 ExpressRoute 電路，tooconnect Vnet 不同訂用帳戶中。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-214">You can use a site-to-site VPN, or an ExpressRoute circuit, tooconnect VNets in different subscriptions.</span></span>

### <a name="subscription-and-vnet-design-patterns"></a><span data-ttu-id="c7aeb-215">訂用帳戶和 VNet 設計模式</span><span class="sxs-lookup"><span data-stu-id="c7aeb-215">Subscription and VNet design patterns</span></span>
<span data-ttu-id="c7aeb-216">hello 表顯示一些常見設計模式中使用的訂閱和 Vnet。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-216">hello table below shows some common design patterns for using subscriptions and VNets.</span></span>

| <span data-ttu-id="c7aeb-217">案例</span><span class="sxs-lookup"><span data-stu-id="c7aeb-217">Scenario</span></span> | <span data-ttu-id="c7aeb-218">圖表</span><span class="sxs-lookup"><span data-stu-id="c7aeb-218">Diagram</span></span> | <span data-ttu-id="c7aeb-219">優點</span><span class="sxs-lookup"><span data-stu-id="c7aeb-219">Pros</span></span> | <span data-ttu-id="c7aeb-220">缺點</span><span class="sxs-lookup"><span data-stu-id="c7aeb-220">Cons</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="c7aeb-221">單一訂用帳戶，每個應用程式有兩個 Vnet</span><span class="sxs-lookup"><span data-stu-id="c7aeb-221">Single subscription, two VNets per app</span></span> |![單一訂用帳戶](./media/virtual-network-vnet-plan-design-arm/figure1.png) |<span data-ttu-id="c7aeb-223">只有一個訂用帳戶 toomanage。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-223">Only one subscription toomanage.</span></span> |<span data-ttu-id="c7aeb-224">每個 Azure 區域的 VNet 數目上限。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-224">Maximum number of VNets per Azure region.</span></span> <span data-ttu-id="c7aeb-225">您之後會需要更多訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-225">You need more subscriptions after that.</span></span> <span data-ttu-id="c7aeb-226">檢閱 hello [Azure 限制](../azure-subscription-service-limits.md#networking-limits)文件以取得詳細資料。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-226">Review hello [Azure limits](../azure-subscription-service-limits.md#networking-limits) article for details.</span></span> |
| <span data-ttu-id="c7aeb-227">每個應用程式有一個訂用帳戶，每個應用程式有兩個 VNet</span><span class="sxs-lookup"><span data-stu-id="c7aeb-227">One subscription per app, two VNets per app</span></span> |![單一訂用帳戶](./media/virtual-network-vnet-plan-design-arm/figure2.png) |<span data-ttu-id="c7aeb-229">每個訂用帳戶只使用兩個 VNet。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-229">Uses only two VNets per subscription.</span></span> |<span data-ttu-id="c7aeb-230">更難 toomanage 有太多應用程式時。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-230">Harder toomanage when there are too many apps.</span></span> |
| <span data-ttu-id="c7aeb-231">每個業務單位有一個訂用帳戶，每個應用程式有兩個 VNet。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-231">One subscription per business unit, two VNets per app.</span></span> |![單一訂用帳戶](./media/virtual-network-vnet-plan-design-arm/figure3.png) |<span data-ttu-id="c7aeb-233">平衡訂用帳戶與 VNet 的數目。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-233">Balance between number of subscriptions and VNets.</span></span> |<span data-ttu-id="c7aeb-234">每個業務單位 (訂用帳戶) 的 VNet 數目上限。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-234">Maximum number of VNets per business unit (subscription).</span></span> <span data-ttu-id="c7aeb-235">檢閱 hello [Azure 限制](../azure-subscription-service-limits.md#networking-limits)文件以取得詳細資料。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-235">Review hello [Azure limits](../azure-subscription-service-limits.md#networking-limits) article for details.</span></span> |
| <span data-ttu-id="c7aeb-236">每個業務單位有一個訂用帳戶，每個應用程式群組有兩個 VNet。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-236">One subscription per business unit, two VNets per group of apps.</span></span> |![單一訂用帳戶](./media/virtual-network-vnet-plan-design-arm/figure4.png) |<span data-ttu-id="c7aeb-238">平衡訂用帳戶與 VNet 的數目。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-238">Balance between number of subscriptions and VNets.</span></span> |<span data-ttu-id="c7aeb-239">必須使用子網路和 NSG 隔離應用程式。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-239">Apps must be isolated by using subnets and NSGs.</span></span> |

### <a name="number-of-subnets"></a><span data-ttu-id="c7aeb-240">子網路數目</span><span class="sxs-lookup"><span data-stu-id="c7aeb-240">Number of subnets</span></span>
<span data-ttu-id="c7aeb-241">您應該考慮下列案例的 hello 在 VNet 中的多個子網路：</span><span class="sxs-lookup"><span data-stu-id="c7aeb-241">You should consider multiple subnets in a VNet in hello following scenarios:</span></span>

* <span data-ttu-id="c7aeb-242">**子網路中的所有 NIC 沒有足夠的私人 IP 位址**。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-242">**Not enough private IP addresses for all NICs in a subnet**.</span></span> <span data-ttu-id="c7aeb-243">如果您的子網路位址空間未包含足夠的 IP 位址的 Nic hello 子網路中的 hello 數目，您需要 toocreate 多個子網路。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-243">If your subnet address space does not contain enough IP addresses for hello number of NICs in hello subnet, you need toocreate multiple subnets.</span></span> <span data-ttu-id="c7aeb-244">請注意，Azure 會保留 5 從無法使用每個子網路的私人 IP 位址： hello 前和最後一個 hello 位址空間 （hello 子網路位址及多點傳送） 和 3 的地址 toobe 用於內部 （DHCP 和 DNS） 位址。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-244">Keep in mind that Azure reserves 5 private IP addresses from each subnet that cannot be used: hello first and last addresses of hello address space (for hello subnet address, and multicast) and 3 addresses toobe used internally (for DHCP and DNS purposes).</span></span>
* <span data-ttu-id="c7aeb-245">**安全性**。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-245">**Security**.</span></span> <span data-ttu-id="c7aeb-246">您可以使用多層結構，然後套用不同的工作負載的 Vm 與其他的子網路 tooseparate 群組[網路安全性群組 (Nsg)](virtual-networks-nsg.md#subnets)用於這些子網路。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-246">You can use subnets tooseparate groups of VMs from one another for workloads that have a multi-layer structure, and apply different [network security groups (NSGs)](virtual-networks-nsg.md#subnets) for those subnets.</span></span>
* <span data-ttu-id="c7aeb-247">**混合式連線**。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-247">**Hybrid connectivity**.</span></span> <span data-ttu-id="c7aeb-248">您也可以使用 VPN 閘道與 ExpressRoute 電路[連接](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti)Vnet tooone 另一個，和 tooyour 內部部署資料中心。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-248">You can use VPN gateways and ExpressRoute circuits too[connect](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti) your VNets tooone another, and tooyour on-premises data center(s).</span></span> <span data-ttu-id="c7aeb-249">VPN 閘道和 ExpressRoute 電路都需要建立自己 toobe 的子網路。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-249">VPN gateways and ExpressRoute circuits require a subnet of their own toobe created.</span></span>
* <span data-ttu-id="c7aeb-250">**虛擬應用裝置**。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-250">**Virtual appliances**.</span></span> <span data-ttu-id="c7aeb-251">您可以在 Azure VNet 中使用虛擬應用裝置，例如防火牆、WAN 加速器或 VPN 閘道。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-251">You can use a virtual appliance, such as a firewall, WAN accelerator, or VPN gateway in an Azure VNet.</span></span> <span data-ttu-id="c7aeb-252">當您這樣做時，您需要太[路由傳送流量](virtual-networks-udr-overview.md)toothose 應用裝置並將它們隔離在自己的子網路。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-252">When you do so, you need too[route traffic](virtual-networks-udr-overview.md) toothose appliances and isolate them in their own subnet.</span></span>

### <a name="subnet-and-nsg-design-patterns"></a><span data-ttu-id="c7aeb-253">子網路和 NSG 設計模式</span><span class="sxs-lookup"><span data-stu-id="c7aeb-253">Subnet and NSG design patterns</span></span>
<span data-ttu-id="c7aeb-254">hello 表顯示一些常見設計模式中的使用子網路。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-254">hello table below shows some common design patterns for using subnets.</span></span>

| <span data-ttu-id="c7aeb-255">案例</span><span class="sxs-lookup"><span data-stu-id="c7aeb-255">Scenario</span></span> | <span data-ttu-id="c7aeb-256">圖表</span><span class="sxs-lookup"><span data-stu-id="c7aeb-256">Diagram</span></span> | <span data-ttu-id="c7aeb-257">優點</span><span class="sxs-lookup"><span data-stu-id="c7aeb-257">Pros</span></span> | <span data-ttu-id="c7aeb-258">缺點</span><span class="sxs-lookup"><span data-stu-id="c7aeb-258">Cons</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="c7aeb-259">單一子網路，每個應用程式層的每個應用程式有多個 NSG</span><span class="sxs-lookup"><span data-stu-id="c7aeb-259">Single subnet, NSGs per application layer, per app</span></span> |![單一子網路](./media/virtual-network-vnet-plan-design-arm/figure5.png) |<span data-ttu-id="c7aeb-261">只有一個子網路 toomanage。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-261">Only one subnet toomanage.</span></span> |<span data-ttu-id="c7aeb-262">多個 Nsg 需要 tooisolate 每個應用程式。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-262">Multiple NSGs necessary tooisolate each application.</span></span> |
| <span data-ttu-id="c7aeb-263">每個應用程式有一個子網路，每個應用程式層有多個 NSG</span><span class="sxs-lookup"><span data-stu-id="c7aeb-263">One subnet per app, NSGs per application layer</span></span> |![每個應用程式的子網路](./media/virtual-network-vnet-plan-design-arm/figure6.png) |<span data-ttu-id="c7aeb-265">較少的 Nsg toomanage。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-265">Fewer NSGs toomanage.</span></span> |<span data-ttu-id="c7aeb-266">多重子網路 toomanage。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-266">Multiple subnets toomanage.</span></span> |
| <span data-ttu-id="c7aeb-267">每個應用程式層有一個子網路，每個應用程式有多個 NSG。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-267">One subnet per application layer, NSGs per app.</span></span> |![每一層級的子網路](./media/virtual-network-vnet-plan-design-arm/figure7.png) |<span data-ttu-id="c7aeb-269">平衡子網路與 NSG 的數目。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-269">Balance between number of subnets and NSGs.</span></span> |<span data-ttu-id="c7aeb-270">每個訂用帳戶的 NSG 數目上限。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-270">Maximum number of NSGs per subscription.</span></span> <span data-ttu-id="c7aeb-271">檢閱 hello [Azure 限制](../azure-subscription-service-limits.md#networking-limits)文件以取得詳細資料。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-271">Review hello [Azure limits](../azure-subscription-service-limits.md#networking-limits) article for details.</span></span> |
| <span data-ttu-id="c7aeb-272">每個應用程式層的每個應用程式有一個子網路，每個子網路有多個 NSG</span><span class="sxs-lookup"><span data-stu-id="c7aeb-272">One subnet per application layer, per app, NSGs per subnet</span></span> |![每個應用程式的每個層級的子網路](./media/virtual-network-vnet-plan-design-arm/figure8.png) |<span data-ttu-id="c7aeb-274">NSG 數目可能比較少。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-274">Possibly smaller number of NSGs.</span></span> |<span data-ttu-id="c7aeb-275">多重子網路 toomanage。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-275">Multiple subnets toomanage.</span></span> |

## <a name="sample-design"></a><span data-ttu-id="c7aeb-276">設計範例</span><span class="sxs-lookup"><span data-stu-id="c7aeb-276">Sample design</span></span>
<span data-ttu-id="c7aeb-277">tooillustrate hello 應用程式的此篇文章中的 hello 資訊，請考慮下列案例中的 hello。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-277">tooillustrate hello application of hello information in this article, consider hello following scenario.</span></span>

<span data-ttu-id="c7aeb-278">您任職的公司在北美洲有 2 個資料中心，在歐洲也有兩個資料中心。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-278">You work for a company that has 2 data centers in North America, and two data centers Europe.</span></span> <span data-ttu-id="c7aeb-279">識別 6 不同維護此客戶對向應用程式 2 不同商務單位您想為試驗 toomigrate tooAzure。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-279">You identified 6 different customer facing applications maintained by 2 different business units that you want toomigrate tooAzure as a pilot.</span></span> <span data-ttu-id="c7aeb-280">hello hello 應用程式的基本架構如下所示：</span><span class="sxs-lookup"><span data-stu-id="c7aeb-280">hello basic architecture for hello applications are as follows:</span></span>

* <span data-ttu-id="c7aeb-281">App1、App2、App3 和 App4 是在執行 Ubuntu 的 Linux 伺服器上裝載的 Web 應用程式。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-281">App1, App2, App3, and App4 are web applications hosted on Linux servers running Ubuntu.</span></span> <span data-ttu-id="c7aeb-282">每個應用程式連接 tooa 個別的應用程式伺服器裝載在 Linux 伺服器上的 RESTful 服務。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-282">Each application connects tooa separate application server that hosts RESTful services on Linux servers.</span></span> <span data-ttu-id="c7aeb-283">hello RESTful 服務連接 tooa 後端 MySQL 資料庫。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-283">hello RESTful services connect tooa back end MySQL database.</span></span>
* <span data-ttu-id="c7aeb-284">App5 和 App6 是在執行 Windows Server 2012 R2 的 Windows 伺服器上裝載的 Web 應用程式。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-284">App5 and App6 are web applications hosted on Windows servers running Windows Server 2012 R2.</span></span> <span data-ttu-id="c7aeb-285">每個應用程式連接 tooa 後端 SQL Server 資料庫。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-285">Each application connects tooa back end SQL Server database.</span></span>
* <span data-ttu-id="c7aeb-286">所有應用程式目前裝載於其中一個在北美的 hello 公司的資料中心。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-286">All apps are currently hosted in one of hello company's data centers in North America.</span></span>
* <span data-ttu-id="c7aeb-287">hello 在內部部署資料中心使用 hello 10.0.0.0/8 位址空間。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-287">hello on-premises data centers use hello 10.0.0.0/8 address space.</span></span>

<span data-ttu-id="c7aeb-288">您需要 toodesign 符合下列需求的 hello 的虛擬網路解決方案：</span><span class="sxs-lookup"><span data-stu-id="c7aeb-288">You need toodesign a virtual network solution that meets hello following requirements:</span></span>

* <span data-ttu-id="c7aeb-289">每個業務單位不應該受其他業務單位的資源耗用量所影響。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-289">Each business unit should not be affected by resource consumption of other business units.</span></span>
* <span data-ttu-id="c7aeb-290">您應該更容易 Vnet 和子網路 toomake 管理 hello 量降到最低。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-290">You should minimize hello amount of VNets and subnets toomake management easier.</span></span>
* <span data-ttu-id="c7aeb-291">每個業務單位應該具有適用於所有應用程式的單一測試/開發 VNet。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-291">Each business unit should have a single test/development VNet used for all applications.</span></span>
* <span data-ttu-id="c7aeb-292">每個應用程式會裝載於每個大陸 (北美洲與歐洲) 的 2 個不同 Azure 資料中心。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-292">Each application is hosted in 2 different Azure data centers per continent (North America and Europe).</span></span>
* <span data-ttu-id="c7aeb-293">每個應用程式會彼此完全隔離。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-293">Each application is completely isolated from each other.</span></span>
* <span data-ttu-id="c7aeb-294">透過 hello 網際網路客戶可以存取每個應用程式使用 HTTP。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-294">Each application can be accessed by customers over hello Internet using HTTP.</span></span>
* <span data-ttu-id="c7aeb-295">使用者已連線的 toohello 在內部部署資料中心可以存取每個應用程式使用加密的通道。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-295">Each application can be accessed by users connected toohello on-premises data centers by using an encrypted tunnel.</span></span>
* <span data-ttu-id="c7aeb-296">連接 tooon 內部部署資料中心應該使用現有的 VPN 裝置。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-296">Connection tooon-premises data centers should use existing VPN devices.</span></span>
* <span data-ttu-id="c7aeb-297">hello 公司的網路群組必須有一個 hello VNet 組態的完整控制權。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-297">hello company's networking group should have full control over hello VNet configuration.</span></span>
* <span data-ttu-id="c7aeb-298">每個業務單位中的開發人員應該只能夠 toodeploy Vm tooexisting 子網路。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-298">Developers in each business unit should only be able toodeploy VMs tooexisting subnets.</span></span>
* <span data-ttu-id="c7aeb-299">將移轉所有的應用程式，因為它們是 tooAzure (增益 shift)。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-299">All applications will be migrated as they are tooAzure (lift-and-shift).</span></span>
* <span data-ttu-id="c7aeb-300">每個位置中的 hello 資料庫應該複寫 tooother Azure 位置一天一次。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-300">hello databases in each location should replicate tooother Azure locations once a day.</span></span>
* <span data-ttu-id="c7aeb-301">每個應用程式應使用 5 個前端 Web 伺服器、2 個應用程式伺服器 (必要時) 以及 2 個資料庫伺服器。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-301">Each application should use 5 front end web servers, 2 application servers (when necessary), and 2 database servers.</span></span>

### <a name="plan"></a><span data-ttu-id="c7aeb-302">規劃</span><span class="sxs-lookup"><span data-stu-id="c7aeb-302">Plan</span></span>
<span data-ttu-id="c7aeb-303">您應該開始您計畫在 hello hello 問題要回答的設計[定義需求](#Define-requirements)區段如下所示。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-303">You should start your design planning by answering hello question in hello [Define requirements](#Define-requirements) section as shown below.</span></span>

1. <span data-ttu-id="c7aeb-304">哪些 Azure 位置將您使用 toohost Vnet 嗎？</span><span class="sxs-lookup"><span data-stu-id="c7aeb-304">What Azure locations will you use toohost VNets?</span></span>

    <span data-ttu-id="c7aeb-305">北美洲的 2 個位置，以及歐洲的 2 個位置。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-305">2 locations in North America, and 2 locations in Europe.</span></span> <span data-ttu-id="c7aeb-306">您應該挑選 hello 您現有的內部部署資料中心的實體位置為基礎。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-306">You should pick those based on hello physical location of your existing on-premises data centers.</span></span> <span data-ttu-id="c7aeb-307">如此一來您的連線，從實體位置 tooAzure 會有更好的延遲。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-307">That way your connection from your physical locations tooAzure will have a better latency.</span></span>
2. <span data-ttu-id="c7aeb-308">您需要這些 Azure 位置之間的 tooprovide 通訊嗎？</span><span class="sxs-lookup"><span data-stu-id="c7aeb-308">Do you need tooprovide communication between these Azure locations?</span></span>

    <span data-ttu-id="c7aeb-309">是。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-309">Yes.</span></span> <span data-ttu-id="c7aeb-310">因為 hello 資料庫必須為複寫的 tooall 位置。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-310">Since hello databases must be replicated tooall locations.</span></span>
3. <span data-ttu-id="c7aeb-311">您 Azure VNet(s) 與您在內部部署資料中心之間需要 tooprovide 通訊？</span><span class="sxs-lookup"><span data-stu-id="c7aeb-311">Do you need tooprovide communication between your Azure VNet(s) and your on-premises data center(s)?</span></span>

    <span data-ttu-id="c7aeb-312">是。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-312">Yes.</span></span> <span data-ttu-id="c7aeb-313">因為使用者連接 toohello 在內部部署資料中心必須透過加密通道能夠 tooaccess hello 應用程式。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-313">Since users connected toohello on-premises data centers must be able tooaccess hello applications through an encrypted tunnel.</span></span>
4. <span data-ttu-id="c7aeb-314">您的解決方案需要多少部 IaaS VM？</span><span class="sxs-lookup"><span data-stu-id="c7aeb-314">How many IaaS VMs do you need for your solution?</span></span>

    <span data-ttu-id="c7aeb-315">200 部 IaaS VM。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-315">200 IaaS VMs.</span></span> <span data-ttu-id="c7aeb-316">App1、App2、App3 和 App4 各需要 5 部 Web 伺服器、2 部應用程式伺服器，以及 2 部資料庫伺服器。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-316">App1, App2, App3, and App4 require 5 web servers each, 2 applications servers each, and 2 database servers each.</span></span> <span data-ttu-id="c7aeb-317">總計每個應用程式有 9 部 IaaS VM，或 36 部 IaaS VM。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-317">That's a total of 9 IaaS VMs per application, or 36 IaaS VMs.</span></span> <span data-ttu-id="c7aeb-318">App5 和 App6 各需要 5 部 Web 伺服器和 2 部資料庫伺服器。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-318">App5 and App6 require 5 web servers and 2 database servers each.</span></span> <span data-ttu-id="c7aeb-319">總計每個應用程式有 7 部 IaaS VM，或 14 部 IaaS VM。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-319">That's a total of 7 IaaS VMs per application, or 14 IaaS VMs.</span></span> <span data-ttu-id="c7aeb-320">因此，每個 Azure 區域中的所有應用程式需要 50 部 IaaS VM。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-320">Therefore, you need 50 IaaS VMs for all applications in each Azure region.</span></span> <span data-ttu-id="c7aeb-321">因為我們需要 toouse 4 區域，將會是 200 的 IaaS Vm。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-321">Since we need toouse 4 regions, there will be 200 IaaS VMs.</span></span>

    <span data-ttu-id="c7aeb-322">您也將您的 Azure IaaS Vm 與內部部署網路之間需要 tooprovide DNS 伺服器在每個 VNet，或您的內部部署資料中心 tooresolve 名稱。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-322">You will also need tooprovide DNS servers in each VNet, or in your on-premises data centers tooresolve name between your Azure IaaS VMs and your on-premises network.</span></span>
5. <span data-ttu-id="c7aeb-323">您需要 tooisolate 流量根據 Vm （也就是前端 web 伺服器和後端資料庫伺服器） 的群組嗎？</span><span class="sxs-lookup"><span data-stu-id="c7aeb-323">Do you need tooisolate traffic based on groups of VMs (i.e. front end web servers and back end database servers)?</span></span>

    <span data-ttu-id="c7aeb-324">是。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-324">Yes.</span></span> <span data-ttu-id="c7aeb-325">每個應用程式應該彼此完全隔離，而且每個應用程式層也應該隔離。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-325">Each application should be completely isolated from each other, and each application layer should also be isolated.</span></span>
6. <span data-ttu-id="c7aeb-326">您需要使用虛擬應用裝置 toocontrol 流量的流程嗎？</span><span class="sxs-lookup"><span data-stu-id="c7aeb-326">Do you need toocontrol traffic flow using virtual appliances?</span></span>

    <span data-ttu-id="c7aeb-327">否。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-327">No.</span></span> <span data-ttu-id="c7aeb-328">虛擬應用裝置可以是使用的 tooprovide 更多控制流量的流程，包括更多詳細的資料平面記錄。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-328">Virtual appliances can be used tooprovide more control over traffic flow, including more detailed data plane logging.</span></span>
7. <span data-ttu-id="c7aeb-329">執行工作的使用者需要不同組的使用權限 toodifferent Azure 資源？</span><span class="sxs-lookup"><span data-stu-id="c7aeb-329">Do users need different sets of permissions toodifferent Azure resources?</span></span>

    <span data-ttu-id="c7aeb-330">是。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-330">Yes.</span></span> <span data-ttu-id="c7aeb-331">hello 網路小組需要完整控制權 hello 虛擬網路設定，而開發人員應該只能夠 toodeploy 它們 Vm toopre 現有子網路。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-331">hello networking team needs full control on hello virtual networking settings, while developers should only be able toodeploy their VMs toopre-existing subnets.</span></span>

### <a name="design"></a><span data-ttu-id="c7aeb-332">設計</span><span class="sxs-lookup"><span data-stu-id="c7aeb-332">Design</span></span>
<span data-ttu-id="c7aeb-333">您應該遵循 hello 設計指定訂用帳戶、 Vnet、 子網路和 Nsg。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-333">You should follow hello design specifying subscriptions, VNets, subnets, and NSGs.</span></span> <span data-ttu-id="c7aeb-334">我們會在此討論 NSG，但您應該先深入了解 [NSG](virtual-networks-nsg.md) ，再完成您的設計。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-334">We will discuss NSGs here, but you should learn more about [NSGs](virtual-networks-nsg.md) before finishing your design.</span></span>

<span data-ttu-id="c7aeb-335">**訂用帳戶和 VNet 數目**</span><span class="sxs-lookup"><span data-stu-id="c7aeb-335">**Number of subscriptions and VNets**</span></span>

<span data-ttu-id="c7aeb-336">相關的 toosubscriptions 與 Vnet hello 下列需求︰</span><span class="sxs-lookup"><span data-stu-id="c7aeb-336">hello following requirements are related toosubscriptions and VNets:</span></span>

* <span data-ttu-id="c7aeb-337">每個業務單位不應該受其他業務單位的資源耗用量所影響。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-337">Each business unit should not be affected by resource consumption of other business units.</span></span>
* <span data-ttu-id="c7aeb-338">您應該 Vnet 和子網路的 hello 數量降到最低。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-338">You should minimize hello amount of VNets and subnets.</span></span>
* <span data-ttu-id="c7aeb-339">每個業務單位應該具有適用於所有應用程式的單一測試/開發 VNet。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-339">Each business unit should have a single test/development VNet used for all applications.</span></span>
* <span data-ttu-id="c7aeb-340">每個應用程式會裝載於每個大陸 (北美洲與歐洲) 的 2 個不同 Azure 資料中心。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-340">Each application is hosted in 2 different Azure data centers per continent (North America and Europe).</span></span>

<span data-ttu-id="c7aeb-341">根據上述需求，每個業務單位都需有一個訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-341">Based on those requirements, you need a subscription for each business unit.</span></span> <span data-ttu-id="c7aeb-342">如此一來，業務單位的資源耗用量就不會計入其他業務單位的限制。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-342">That way, consumption of resources from a business unit will not count towards limits for other business units.</span></span> <span data-ttu-id="c7aeb-343">因為您想要 Vnet toominimize hello 數目，您應該考慮使用 hello 和**一個訂用帳戶每個業務單位，每個群組的應用程式的兩個 Vnet**模式如下所示。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-343">And since you want toominimize hello number of VNets, you should consider using hello **one subscription per business unit, two VNets per group of apps** pattern as seen below.</span></span>

![單一訂用帳戶](./media/virtual-network-vnet-plan-design-arm/figure9.png)

<span data-ttu-id="c7aeb-345">您也會需要為每個 VNet 的 toospecify hello 位址空間。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-345">You also need toospecify hello address space for each VNet.</span></span> <span data-ttu-id="c7aeb-346">因為您需要 hello 之間的連線內部部署資料中心 hello Azure 區域 hello 用於 Azure Vnet 的位址空間不衝突與 hello 與內部網路，並使用每個 VNet hello 位址空間應互不衝突與其他現有的 Vnet。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-346">Since you need connectivity between hello on-premises data centers and hello Azure regions, hello address space used for Azure VNets cannot clash with hello on-premises network, and hello address space used by each VNet should not clash with other existing VNets.</span></span> <span data-ttu-id="c7aeb-347">您可以使用這些需求 hello hello toosatisfy 表中的位址空間。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-347">You could use hello address spaces in hello table below toosatisfy these requirements.</span></span>  

| <span data-ttu-id="c7aeb-348">**訂用帳戶**</span><span class="sxs-lookup"><span data-stu-id="c7aeb-348">**Subscription**</span></span> | <span data-ttu-id="c7aeb-349">**VNet**</span><span class="sxs-lookup"><span data-stu-id="c7aeb-349">**VNet**</span></span> | <span data-ttu-id="c7aeb-350">**Azure 區域**</span><span class="sxs-lookup"><span data-stu-id="c7aeb-350">**Azure region**</span></span> | <span data-ttu-id="c7aeb-351">**位址空間**</span><span class="sxs-lookup"><span data-stu-id="c7aeb-351">**Address space**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="c7aeb-352">BU1</span><span class="sxs-lookup"><span data-stu-id="c7aeb-352">BU1</span></span> |<span data-ttu-id="c7aeb-353">ProdBU1US1</span><span class="sxs-lookup"><span data-stu-id="c7aeb-353">ProdBU1US1</span></span> |<span data-ttu-id="c7aeb-354">美國西部</span><span class="sxs-lookup"><span data-stu-id="c7aeb-354">West US</span></span> |<span data-ttu-id="c7aeb-355">172.16.0.0/16</span><span class="sxs-lookup"><span data-stu-id="c7aeb-355">172.16.0.0/16</span></span> |
| <span data-ttu-id="c7aeb-356">BU1</span><span class="sxs-lookup"><span data-stu-id="c7aeb-356">BU1</span></span> |<span data-ttu-id="c7aeb-357">ProdBU1US2</span><span class="sxs-lookup"><span data-stu-id="c7aeb-357">ProdBU1US2</span></span> |<span data-ttu-id="c7aeb-358">美國東部</span><span class="sxs-lookup"><span data-stu-id="c7aeb-358">East US</span></span> |<span data-ttu-id="c7aeb-359">172.17.0.0/16</span><span class="sxs-lookup"><span data-stu-id="c7aeb-359">172.17.0.0/16</span></span> |
| <span data-ttu-id="c7aeb-360">BU1</span><span class="sxs-lookup"><span data-stu-id="c7aeb-360">BU1</span></span> |<span data-ttu-id="c7aeb-361">ProdBU1EU1</span><span class="sxs-lookup"><span data-stu-id="c7aeb-361">ProdBU1EU1</span></span> |<span data-ttu-id="c7aeb-362">北歐</span><span class="sxs-lookup"><span data-stu-id="c7aeb-362">North Europe</span></span> |<span data-ttu-id="c7aeb-363">172.18.0.0/16</span><span class="sxs-lookup"><span data-stu-id="c7aeb-363">172.18.0.0/16</span></span> |
| <span data-ttu-id="c7aeb-364">BU1</span><span class="sxs-lookup"><span data-stu-id="c7aeb-364">BU1</span></span> |<span data-ttu-id="c7aeb-365">ProdBU1EU2</span><span class="sxs-lookup"><span data-stu-id="c7aeb-365">ProdBU1EU2</span></span> |<span data-ttu-id="c7aeb-366">西歐</span><span class="sxs-lookup"><span data-stu-id="c7aeb-366">West Europe</span></span> |<span data-ttu-id="c7aeb-367">172.19.0.0/16</span><span class="sxs-lookup"><span data-stu-id="c7aeb-367">172.19.0.0/16</span></span> |
| <span data-ttu-id="c7aeb-368">BU1</span><span class="sxs-lookup"><span data-stu-id="c7aeb-368">BU1</span></span> |<span data-ttu-id="c7aeb-369">TestDevBU1</span><span class="sxs-lookup"><span data-stu-id="c7aeb-369">TestDevBU1</span></span> |<span data-ttu-id="c7aeb-370">美國西部</span><span class="sxs-lookup"><span data-stu-id="c7aeb-370">West US</span></span> |<span data-ttu-id="c7aeb-371">172.20.0.0/16</span><span class="sxs-lookup"><span data-stu-id="c7aeb-371">172.20.0.0/16</span></span> |
| <span data-ttu-id="c7aeb-372">BU2</span><span class="sxs-lookup"><span data-stu-id="c7aeb-372">BU2</span></span> |<span data-ttu-id="c7aeb-373">TestDevBU2</span><span class="sxs-lookup"><span data-stu-id="c7aeb-373">TestDevBU2</span></span> |<span data-ttu-id="c7aeb-374">美國西部</span><span class="sxs-lookup"><span data-stu-id="c7aeb-374">West US</span></span> |<span data-ttu-id="c7aeb-375">172.21.0.0/16</span><span class="sxs-lookup"><span data-stu-id="c7aeb-375">172.21.0.0/16</span></span> |
| <span data-ttu-id="c7aeb-376">BU2</span><span class="sxs-lookup"><span data-stu-id="c7aeb-376">BU2</span></span> |<span data-ttu-id="c7aeb-377">ProdBU2US1</span><span class="sxs-lookup"><span data-stu-id="c7aeb-377">ProdBU2US1</span></span> |<span data-ttu-id="c7aeb-378">美國西部</span><span class="sxs-lookup"><span data-stu-id="c7aeb-378">West US</span></span> |<span data-ttu-id="c7aeb-379">172.22.0.0/16</span><span class="sxs-lookup"><span data-stu-id="c7aeb-379">172.22.0.0/16</span></span> |
| <span data-ttu-id="c7aeb-380">BU2</span><span class="sxs-lookup"><span data-stu-id="c7aeb-380">BU2</span></span> |<span data-ttu-id="c7aeb-381">ProdBU2US2</span><span class="sxs-lookup"><span data-stu-id="c7aeb-381">ProdBU2US2</span></span> |<span data-ttu-id="c7aeb-382">美國東部</span><span class="sxs-lookup"><span data-stu-id="c7aeb-382">East US</span></span> |<span data-ttu-id="c7aeb-383">172.23.0.0/16</span><span class="sxs-lookup"><span data-stu-id="c7aeb-383">172.23.0.0/16</span></span> |
| <span data-ttu-id="c7aeb-384">BU2</span><span class="sxs-lookup"><span data-stu-id="c7aeb-384">BU2</span></span> |<span data-ttu-id="c7aeb-385">ProdBU2EU1</span><span class="sxs-lookup"><span data-stu-id="c7aeb-385">ProdBU2EU1</span></span> |<span data-ttu-id="c7aeb-386">北歐</span><span class="sxs-lookup"><span data-stu-id="c7aeb-386">North Europe</span></span> |<span data-ttu-id="c7aeb-387">172.24.0.0/16</span><span class="sxs-lookup"><span data-stu-id="c7aeb-387">172.24.0.0/16</span></span> |
| <span data-ttu-id="c7aeb-388">BU2</span><span class="sxs-lookup"><span data-stu-id="c7aeb-388">BU2</span></span> |<span data-ttu-id="c7aeb-389">ProdBU2EU2</span><span class="sxs-lookup"><span data-stu-id="c7aeb-389">ProdBU2EU2</span></span> |<span data-ttu-id="c7aeb-390">西歐</span><span class="sxs-lookup"><span data-stu-id="c7aeb-390">West Europe</span></span> |<span data-ttu-id="c7aeb-391">172.25.0.0/16</span><span class="sxs-lookup"><span data-stu-id="c7aeb-391">172.25.0.0/16</span></span> |

<span data-ttu-id="c7aeb-392">**子網路數和 NSG 的數目**</span><span class="sxs-lookup"><span data-stu-id="c7aeb-392">**Number of subnets and NSGs**</span></span>

<span data-ttu-id="c7aeb-393">相關的 toosubnets 和 Nsg hello 下列需求︰</span><span class="sxs-lookup"><span data-stu-id="c7aeb-393">hello following requirements are related toosubnets and NSGs:</span></span>

* <span data-ttu-id="c7aeb-394">您應該 Vnet 和子網路的 hello 數量降到最低。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-394">You should minimize hello amount of VNets and subnets.</span></span>
* <span data-ttu-id="c7aeb-395">每個應用程式會彼此完全隔離。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-395">Each application is completely isolated from each other.</span></span>
* <span data-ttu-id="c7aeb-396">透過 hello 網際網路客戶可以存取每個應用程式使用 HTTP。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-396">Each application can be accessed by customers over hello Internet using HTTP.</span></span>
* <span data-ttu-id="c7aeb-397">使用者已連線的 toohello 在內部部署資料中心可以存取每個應用程式使用加密的通道。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-397">Each application can be accessed by users connected toohello on-premises data centers by using an encrypted tunnel.</span></span>
* <span data-ttu-id="c7aeb-398">連接 tooon 內部部署資料中心應該使用現有的 VPN 裝置。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-398">Connection tooon-premises data centers should use existing VPN devices.</span></span>
* <span data-ttu-id="c7aeb-399">每個位置中的 hello 資料庫應該複寫 tooother Azure 位置一天一次。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-399">hello databases in each location should replicate tooother Azure locations once a day.</span></span>

<span data-ttu-id="c7aeb-400">根據這些需求，您就無法使用應用程式層，每一個子網路，並使用 Nsg toofilter 流量，每個應用程式。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-400">Based on those requirements, you could use one subnet per application layer, and use NSGs toofilter traffic per application.</span></span> <span data-ttu-id="c7aeb-401">如此一來，每個 VNet 只有 3 個子網路 (前端、應用程式層和資料層)，而每個子網路的每個應用程式有一個 NSG。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-401">That way, you only have 3 subnets in each VNet (front end, application layer, and data layer) and one NSG per application per subnet.</span></span> <span data-ttu-id="c7aeb-402">在此情況下，您應該考慮使用 hello**一個子網路，每個應用程式層，每個應用程式的 Nsg**設計模式。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-402">In this case, you should consider using hello **one subnet per application layer, NSGs per app** design pattern.</span></span> <span data-ttu-id="c7aeb-403">hello 下圖代表 hello hello 設計模式的 hello 使用**ProdBU1US1** VNet。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-403">hello figure below shows hello use of hello design pattern representing hello **ProdBU1US1** VNet.</span></span>

![每一層級一個子網路，每一層級的每個應用程式一個 NSG](./media/virtual-network-vnet-plan-design-arm/figure11.png)

<span data-ttu-id="c7aeb-405">不過，您也需要 toocreate 額外的子網路的 hello hello Vnet，與您在內部部署資料中心之間的 VPN 連線能力。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-405">However, you also need toocreate an extra subnet for hello VPN connectivity between hello VNets, and your on-premises data centers.</span></span> <span data-ttu-id="c7aeb-406">而且您必須針對每個子網路的 toospecify hello 位址空間。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-406">And you need toospecify hello address space for each subnet.</span></span> <span data-ttu-id="c7aeb-407">hello 下圖顯示的範例解決方案**ProdBU1US1** VNet。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-407">hello figure below shows a sample solution for **ProdBU1US1** VNet.</span></span> <span data-ttu-id="c7aeb-408">您會為每個 VNet 複寫此案例。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-408">You would replicate this scenario for each VNet.</span></span> <span data-ttu-id="c7aeb-409">每個顏色都代表不同的應用程式。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-409">Each color represents a different application.</span></span>

![VNet 範例](./media/virtual-network-vnet-plan-design-arm/figure10.png)

<span data-ttu-id="c7aeb-411">**存取控制**</span><span class="sxs-lookup"><span data-stu-id="c7aeb-411">**Access Control**</span></span>

<span data-ttu-id="c7aeb-412">hello 以下是相關的 tooaccess 控制項：</span><span class="sxs-lookup"><span data-stu-id="c7aeb-412">hello following requirements are related tooaccess control:</span></span>

* <span data-ttu-id="c7aeb-413">hello 公司的網路群組必須有一個 hello VNet 組態的完整控制權。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-413">hello company's networking group should have full control over hello VNet configuration.</span></span>
* <span data-ttu-id="c7aeb-414">每個業務單位中的開發人員應該只能夠 toodeploy Vm tooexisting 子網路。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-414">Developers in each business unit should only be able toodeploy VMs tooexisting subnets.</span></span>

<span data-ttu-id="c7aeb-415">根據這些需求，您可以加入使用者從網路內建小組 toohello hello**網路參與者**每個訂用帳戶; 中的角色和應用程式開發人員建立 hello 自訂的角色，每個訂用帳戶提供這些權限 tooadd Vm tooexisting 子網路。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-415">Based on those requirements, you could add users from hello networking team toohello built-in **Network Contributor** role in each subscription; and create a custom role for hello application developers in each subscription giving them rights tooadd VMs tooexisting subnets.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c7aeb-416">後續步驟</span><span class="sxs-lookup"><span data-stu-id="c7aeb-416">Next steps</span></span>
* <span data-ttu-id="c7aeb-417">[部署虛擬網路](virtual-networks-create-vnet-arm-template-click.md) 。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-417">[Deploy a virtual network](virtual-networks-create-vnet-arm-template-click.md) based on a scenario.</span></span>
* <span data-ttu-id="c7aeb-418">了解如何太[負載平衡](../load-balancer/load-balancer-overview.md)IaaS Vm 和[管理透過多個 Azure 區域路由](../traffic-manager/traffic-manager-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-418">Understand how too[load balance](../load-balancer/load-balancer-overview.md) IaaS VMs and [manage routing over multiple Azure regions](../traffic-manager/traffic-manager-overview.md).</span></span>
* <span data-ttu-id="c7aeb-419">深入了解[Nsg 及如何 tooplan 和設計](virtual-networks-nsg.md)NSG 方案。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-419">Learn more about [NSGs and how tooplan and design](virtual-networks-nsg.md) an NSG solution.</span></span>
* <span data-ttu-id="c7aeb-420">深入了解您的 [跨單位和 VNet 連線選項](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti)。</span><span class="sxs-lookup"><span data-stu-id="c7aeb-420">Learn more about your [cross-premises and VNet connectivity options](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti).</span></span>
