---
title: "能源需求預測技術指南 | Microsoft Docs"
description: "具有能源需求預測之 Microsoft Cortana Intelligence 的解決方案範本技術指南。"
services: cortana-analytics
documentationcenter: 
author: yijichen
manager: ilanr9
editor: yijichen
ms.assetid: 7f1a866b-79b7-4b97-ae3e-bc6bebe8c756
ms.service: cortana-analytics
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/16/2016
ms.author: inqiu;yijichen;ilanr9
ms.openlocfilehash: c3bbef8fee018dc54e7d3edb86e3f9434999bdae
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/11/2017
---
# <a name="technical-guide-to-the-cortana-intelligence-solution-template-for-demand-forecast-in-energy"></a><span data-ttu-id="5e20e-103">能源需求預測之 Cortana Intelligence 解決方案範本的技術指南</span><span class="sxs-lookup"><span data-stu-id="5e20e-103">Technical guide to the Cortana Intelligence Solution Template for demand forecast in energy</span></span>
## <a name="overview"></a><span data-ttu-id="5e20e-104">**概觀**</span><span class="sxs-lookup"><span data-stu-id="5e20e-104">**Overview**</span></span>
<span data-ttu-id="5e20e-105">解決方案範本的設計是要加速在 Cortana Intelligence 套件之上建置 E2E 示範的程序。</span><span class="sxs-lookup"><span data-stu-id="5e20e-105">Solution Templates are designed to accelerate the process of building an E2E demo on top of Cortana Intelligence Suite.</span></span> <span data-ttu-id="5e20e-106">已部署的範本會以所需的 Cortana Intelligence 元件佈建您的訂用帳戶，並建立兩者間的關聯性。</span><span class="sxs-lookup"><span data-stu-id="5e20e-106">A deployed template will provision your subscription with necessary Cortana Intelligence component and build the relationships between.</span></span> <span data-ttu-id="5e20e-107">它也會在資料管線上植入從資料模擬應用程式所產生的範例資料。</span><span class="sxs-lookup"><span data-stu-id="5e20e-107">It also seeds the data pipeline with sample data getting generated from a data simulation application.</span></span> <span data-ttu-id="5e20e-108">從提供的連結下載資料模擬器並將它安裝在本機電腦上；如需使用模擬器的指示，請參閱 readme.txt 檔案。</span><span class="sxs-lookup"><span data-stu-id="5e20e-108">Download the data simulator from the link provided and install it on your local machine, refer to the readme.txt file for instruction on using the simulator.</span></span> <span data-ttu-id="5e20e-109">由模擬器產生的資料將會產生資料管線，並開始產生機器學習服務預測，然後您可以在 Power BI 儀表板上將其視覺化。</span><span class="sxs-lookup"><span data-stu-id="5e20e-109">Data generated from the simulator will hydrate the data pipeline and start generating machine learning prediction which can then be visualized on the Power BI dashboard.</span></span>

<span data-ttu-id="5e20e-110">您可以在 [這裡](https://gallery.cortanaintelligence.com/SolutionTemplate/Demand-Forecasting-for-Energy-1)</span><span class="sxs-lookup"><span data-stu-id="5e20e-110">The solution template can be found [here](https://gallery.cortanaintelligence.com/SolutionTemplate/Demand-Forecasting-for-Energy-1)</span></span>

<span data-ttu-id="5e20e-111">部署程序將引導您完成數個步驟來設定解決方案的認證。</span><span class="sxs-lookup"><span data-stu-id="5e20e-111">The deployment process will guide you through several steps to set up your solution credentials.</span></span> <span data-ttu-id="5e20e-112">務必記錄這些認證，例如您在部署期間提供的解決方案名稱、使用者名稱和密碼。</span><span class="sxs-lookup"><span data-stu-id="5e20e-112">Make sure you record these credentials such as solution name, username, and password you provide during the deployment.</span></span>

<span data-ttu-id="5e20e-113">這份文件的目標在於說明參考架構與隨著此方案範本佈建在您的訂用帳戶的不同元件。</span><span class="sxs-lookup"><span data-stu-id="5e20e-113">The goal of this document is to explain the reference architecture and different components provisioned in your subscription as part of this Solution Template.</span></span> <span data-ttu-id="5e20e-114">文件也會示範如何使用您自己的實際資料來取代範例資料，以便看到您自己的資料的見解/預測。</span><span class="sxs-lookup"><span data-stu-id="5e20e-114">The document also talks about how to replace the sample data, with real data of your own to be able to see insights/predictions from you won data.</span></span> <span data-ttu-id="5e20e-115">此外，文件將說明如果想要以您自己的資料自訂解決方案，您需要修改的解決方案範本部份。</span><span class="sxs-lookup"><span data-stu-id="5e20e-115">Additionally, the document talks about the parts of the Solution Template that would need to be modified if you want to customize the solution with your own data.</span></span> <span data-ttu-id="5e20e-116">最後會提供如何建置此方案範本的 Power BI 儀表板的指示。</span><span class="sxs-lookup"><span data-stu-id="5e20e-116">Instructions on how to build the Power BI dashboard for this Solution Template are provided at the end.</span></span>

## <a name="big-picture"></a><span data-ttu-id="5e20e-117">**概觀**</span><span class="sxs-lookup"><span data-stu-id="5e20e-117">**Big Picture**</span></span>
![](media/cortana-analytics-technical-guide-demand-forecast/ca-topologies-energy-forecasting.png)

### <a name="architecture-explained"></a><span data-ttu-id="5e20e-118">所說明的架構</span><span class="sxs-lookup"><span data-stu-id="5e20e-118">Architecture Explained</span></span>
<span data-ttu-id="5e20e-119">部署方案時，會啟動 Cortana Analytics 套件中的各種 Azure 服務 (也就是事件中樞、串流分析、HDInsight、Data Factory、機器學習服務等)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-119">When the solution is deployed, various Azure services within Cortana Analytics Suite are activated (*i.e.* Event Hub, Stream Analytics, HDInsight, Data Factory, Machine Learning, *etc.*).</span></span> <span data-ttu-id="5e20e-120">上述架構圖顯示概括而言如何從端對端建構能源需求預測解決方案範本。</span><span class="sxs-lookup"><span data-stu-id="5e20e-120">The architecture diagram above shows, at a high level, how the Demand Forecasting for Energy Solution Template is constructed from end-to-end.</span></span> <span data-ttu-id="5e20e-121">您將可以調查這些服務，方法是在隨著解決方案部署而建立的解決方案範本圖表上按一下。</span><span class="sxs-lookup"><span data-stu-id="5e20e-121">You will be able to investigate these services by clicking on them on the solution template diagram created with the deployment of the solution.</span></span> <span data-ttu-id="5e20e-122">下列章節說明每個片段。</span><span class="sxs-lookup"><span data-stu-id="5e20e-122">The following sections describe each piece.</span></span>

## <a name="data-source-and-ingestion"></a><span data-ttu-id="5e20e-123">**資料來源及擷取**</span><span class="sxs-lookup"><span data-stu-id="5e20e-123">**Data Source and Ingestion**</span></span>
### <a name="synthetic-data-source"></a><span data-ttu-id="5e20e-124">綜合資料來源</span><span class="sxs-lookup"><span data-stu-id="5e20e-124">Synthetic Data Source</span></span>
<span data-ttu-id="5e20e-125">針對此範本，使用的資料來源是從桌面應用程式產生，您將會下載應用程式並於部署成功後在本機執行。</span><span class="sxs-lookup"><span data-stu-id="5e20e-125">For this template the data source used is generated from a desktop application that you will download and run locally after successful deployment.</span></span> <span data-ttu-id="5e20e-126">當您在解決方案範本圖表上選取稱為「能源預測資料模擬器」的第一個節點時，可以在屬性列中找到下載及安裝此應用程式的指示。</span><span class="sxs-lookup"><span data-stu-id="5e20e-126">You will find the instructions to download and install this application in the properties bar when you select the first node called Energy Forecasting Data Simulator on the solution template diagram.</span></span> <span data-ttu-id="5e20e-127">此應用程式會將在解決方案流程的其餘部分使用的資料點或事件送入 [Azure 事件中樞](#azure-event-hub) 服務。</span><span class="sxs-lookup"><span data-stu-id="5e20e-127">This application feeds the [Azure Event Hub](#azure-event-hub) service with data points, or events, that will be used in the rest of the solution flow.</span></span>

<span data-ttu-id="5e20e-128">只有當它在您的電腦上執行時，事件產生應用程式才會填入 Azure 事件中樞。</span><span class="sxs-lookup"><span data-stu-id="5e20e-128">The event generation application will populate the Azure Event Hub only while it's executing on your computer.</span></span>

### <a name="azure-event-hub"></a><span data-ttu-id="5e20e-129">Azure 事件中樞</span><span class="sxs-lookup"><span data-stu-id="5e20e-129">Azure Event Hub</span></span>
<span data-ttu-id="5e20e-130">[Azure 事件中樞](https://azure.microsoft.com/services/event-hubs/) 服務是上述的綜合資料來源所提供的輸入收件者。</span><span class="sxs-lookup"><span data-stu-id="5e20e-130">The [Azure Event Hub](https://azure.microsoft.com/services/event-hubs/) service is the recipient of the input provided by the Synthetic Data Source described above.</span></span>

## <a name="data-preparation-and-analysis"></a><span data-ttu-id="5e20e-131">**資料準備和分析**</span><span class="sxs-lookup"><span data-stu-id="5e20e-131">**Data Preparation and Analysis**</span></span>
### <a name="azure-stream-analytics"></a><span data-ttu-id="5e20e-132">Azure 串流分析</span><span class="sxs-lookup"><span data-stu-id="5e20e-132">Azure Stream Analytics</span></span>
<span data-ttu-id="5e20e-133">[Azure 串流分析](https://azure.microsoft.com/services/stream-analytics/)服務用來為來自 [Azure 事件中樞](#azure-event-hub)服務的輸入串流提供近乎即時的分析，並將結果發佈到 [Power BI](https://powerbi.microsoft.com) 儀表板，以及將所有未經處理的內送事件保存至 [Azure 儲存體](https://azure.microsoft.com/services/storage/)服務，供 [Azure Data Factory](https://azure.microsoft.com/documentation/services/data-factory/) 服務後續處理。</span><span class="sxs-lookup"><span data-stu-id="5e20e-133">The [Azure Stream Analytics](https://azure.microsoft.com/services/stream-analytics/) service is used to provide near real-time analytics on the input stream from the [Azure Event Hub](#azure-event-hub) service and publish results onto a [Power BI](https://powerbi.microsoft.com) dashboard as well as archiving all raw incoming events to the [Azure Storage](https://azure.microsoft.com/services/storage/) service for later processing by the [Azure Data Factory](https://azure.microsoft.com/documentation/services/data-factory/) service.</span></span>

### <a name="hd-insights-custom-aggregation"></a><span data-ttu-id="5e20e-134">HD Insights 自訂彙總</span><span class="sxs-lookup"><span data-stu-id="5e20e-134">HD Insights Custom Aggregation</span></span>
<span data-ttu-id="5e20e-135">Azure HD Insight 服務用來執行 [Hive](http://blogs.msdn.com/b/bigdatasupport/archive/2013/11/11/get-started-with-hive-on-hdinsight.aspx) 指令碼 (由 Azure Data Factory 協調)，以提供使用 Azure 串流分析服務封存的原始事件的彙總。</span><span class="sxs-lookup"><span data-stu-id="5e20e-135">The Azure HD Insight service is used to run [Hive](http://blogs.msdn.com/b/bigdatasupport/archive/2013/11/11/get-started-with-hive-on-hdinsight.aspx) scripts (orchestrated by Azure Data Factory) to provide aggregations on the raw events that were archived using the Azure Stream Analytics service.</span></span>

### <a name="azure-machine-learning"></a><span data-ttu-id="5e20e-136">Azure Machine Learning</span><span class="sxs-lookup"><span data-stu-id="5e20e-136">Azure Machine Learning</span></span>
<span data-ttu-id="5e20e-137">使用 [Azure Machine Learning](https://azure.microsoft.com/services/machine-learning/) 服務 (由 Azure Data Factory 協調) 預測特定區域 (提供所收到輸入資料) 的未來用電量。</span><span class="sxs-lookup"><span data-stu-id="5e20e-137">The [Azure Machine Learning](https://azure.microsoft.com/services/machine-learning/) service is used (orchestrated by Azure Data Factory) to make forecast on future power consumption of a particular region given the inputs received.</span></span>

## <a name="data-publishing"></a><span data-ttu-id="5e20e-138">**資料發佈**</span><span class="sxs-lookup"><span data-stu-id="5e20e-138">**Data Publishing**</span></span>
### <a name="azure-sql-database-service"></a><span data-ttu-id="5e20e-139">Azure SQL Database 服務</span><span class="sxs-lookup"><span data-stu-id="5e20e-139">Azure SQL Database Service</span></span>
<span data-ttu-id="5e20e-140">[Azure SQL Database](https://azure.microsoft.com/services/sql-database/) 服務用來儲存 (由 Azure Data Factory 管理) Azure Machine Learning 服務收到的預測，供 [Power BI](https://powerbi.microsoft.com) 儀表板中取用。</span><span class="sxs-lookup"><span data-stu-id="5e20e-140">The [Azure SQL Database](https://azure.microsoft.com/services/sql-database/) service is used to store (managed by Azure Data Factory) the predictions received by the Azure Machine Learning service that will be consumed in the [Power BI](https://powerbi.microsoft.com) dashboard.</span></span>

## <a name="data-consumption"></a><span data-ttu-id="5e20e-141">**資料耗用量**</span><span class="sxs-lookup"><span data-stu-id="5e20e-141">**Data Consumption**</span></span>
### <a name="power-bi"></a><span data-ttu-id="5e20e-142">Power BI</span><span class="sxs-lookup"><span data-stu-id="5e20e-142">Power BI</span></span>
<span data-ttu-id="5e20e-143">[Power BI](https://powerbi.microsoft.com) 服務用來顯示儀表板，其中包含 [Azure 串流分析](https://azure.microsoft.com/services/stream-analytics/)服務提供的彙總，以及利用 [Azure Machine Learning](https://azure.microsoft.com/services/machine-learning/) 服務產生並儲存在 [Azure SQL Database](https://azure.microsoft.com/services/sql-database/) 中的需求預測結果。</span><span class="sxs-lookup"><span data-stu-id="5e20e-143">The [Power BI](https://powerbi.microsoft.com) service is used to show a dashboard that contains aggregations provided by the [Azure Stream Analytics](https://azure.microsoft.com/services/stream-analytics/) service as well as demand forecast results stored in [Azure SQL Database](https://azure.microsoft.com/services/sql-database/) that were produced using the [Azure Machine Learning](https://azure.microsoft.com/services/machine-learning/) service.</span></span> <span data-ttu-id="5e20e-144">如需如何建置此方案範本的 Power BI 儀表板的指示，請參閱下一節。</span><span class="sxs-lookup"><span data-stu-id="5e20e-144">For Instructions on how to build the Power BI dashboard for this Solution Template, refer to the section below.</span></span>

## <a name="how-to-bring-in-your-own-data"></a><span data-ttu-id="5e20e-145">**如何帶入您自己的資料**</span><span class="sxs-lookup"><span data-stu-id="5e20e-145">**How to bring in your own data**</span></span>
<span data-ttu-id="5e20e-146">本節說明如何將您自己的資料帶入 Azure，以及對於您放入這個架構的資料，需要變更哪些區域。</span><span class="sxs-lookup"><span data-stu-id="5e20e-146">This section describes how to bring your own data to Azure, and what areas would require changes for the data you bring into this architecture.</span></span>

<span data-ttu-id="5e20e-147">您放入的任何資料集不太可能會符合用於這個解決方案範本的資料集。</span><span class="sxs-lookup"><span data-stu-id="5e20e-147">It's unlikely that any dataset you bring would match the dataset used for this solution template.</span></span> <span data-ttu-id="5e20e-148">了解您的資料與需求對於您如何修改此範本以搭配您自己的資料非常重要。</span><span class="sxs-lookup"><span data-stu-id="5e20e-148">Understanding your data and the requirements will be crucial in how you modify this template to work with your own data.</span></span> <span data-ttu-id="5e20e-149">如果這是您第一次使用 Azure Machine Learning 服務，您可以使用 [如何建立您的第一個實驗](machine-learning/machine-learning-create-experiment.md)中的範例來取得簡介。</span><span class="sxs-lookup"><span data-stu-id="5e20e-149">If this is your first exposure to the Azure Machine Learning service, you can get an introduction to it by using the example in [How to create your first experiment](machine-learning/machine-learning-create-experiment.md).</span></span>

<span data-ttu-id="5e20e-150">下列各節將討論推出新資料集將需要修改的範本區段。</span><span class="sxs-lookup"><span data-stu-id="5e20e-150">The following sections will discuss the sections of the template that will require modifications when a new dataset is introduced.</span></span>

### <a name="azure-event-hub"></a><span data-ttu-id="5e20e-151">Azure 事件中樞</span><span class="sxs-lookup"><span data-stu-id="5e20e-151">Azure Event Hub</span></span>
<span data-ttu-id="5e20e-152">[Azure 事件中樞](https://azure.microsoft.com/services/event-hubs/) 服務非常廣泛，因而資料可以以 CSV 或 JSON 格式張貼至中樞。</span><span class="sxs-lookup"><span data-stu-id="5e20e-152">The [Azure Event Hub](https://azure.microsoft.com/services/event-hubs/) service is very generic, such that data can be posted to the hub in either CSV or JSON format.</span></span> <span data-ttu-id="5e20e-153">Azure 事件中樞中未發生任何特殊處理，但務必了解提供給它的資料。</span><span class="sxs-lookup"><span data-stu-id="5e20e-153">No special processing occurs in the Azure Event Hub, but it is important you understand the data that is fed into it.</span></span>

<span data-ttu-id="5e20e-154">這份文件不會描述如何內嵌您的資料，但您可以使用[事件中樞 API](event-hubs/event-hubs-programming-guide.md)，輕鬆地將事件或資料傳送到 Azure 事件中樞。</span><span class="sxs-lookup"><span data-stu-id="5e20e-154">This document does not describe how to ingest your data, but one can easily send events or data to an Azure Event Hub, using the [Event Hub API](event-hubs/event-hubs-programming-guide.md).</span></span>

### <a name="azure-stream-analytics"></a><span data-ttu-id="5e20e-155">Azure 串流分析</span><span class="sxs-lookup"><span data-stu-id="5e20e-155">Azure Stream Analytics</span></span>
<span data-ttu-id="5e20e-156">[Azure 串流分析](https://azure.microsoft.com/services/stream-analytics/) 服務用來提供近乎即時分析，方法是從資料串流讀取並輸出資料至任意數目的來源。</span><span class="sxs-lookup"><span data-stu-id="5e20e-156">The [Azure Stream Analytics](https://azure.microsoft.com/services/stream-analytics/) service is used to provide near real-time analytics by reading from data streams and outputting data to any number of sources.</span></span>

<span data-ttu-id="5e20e-157">針對能源需求預測的解決方案範本，Azure 串流分析查詢包含兩個子查詢，每個均從 Azure 事件中樞服務取用事件做為輸入，並且輸出至兩個不同的位置。</span><span class="sxs-lookup"><span data-stu-id="5e20e-157">For the Demand Forecasting for Energy Solution Template, the Azure Stream Analytics query consists of two sub-queries, each consuming events from the Azure Event Hub service as inputs and having outputs to two distinct locations.</span></span> <span data-ttu-id="5e20e-158">這些輸出包含一個 Power BI 資料集和一個 Azure 儲存體位置。</span><span class="sxs-lookup"><span data-stu-id="5e20e-158">These outputs consist of one Power BI dataset and one Azure Storage location.</span></span>

<span data-ttu-id="5e20e-159">可以透過以下方式找到 [Azure 串流分析](https://azure.microsoft.com/services/stream-analytics/) 查詢：</span><span class="sxs-lookup"><span data-stu-id="5e20e-159">The [Azure Stream Analytics](https://azure.microsoft.com/services/stream-analytics/) query can be found by:</span></span>

* <span data-ttu-id="5e20e-160">登入 [Azure 管理入口網站](https://manage.windowsazure.com/)</span><span class="sxs-lookup"><span data-stu-id="5e20e-160">Logging into the [Azure management portal](https://manage.windowsazure.com/)</span></span>
* <span data-ttu-id="5e20e-161">找出部署解決方案時所產生的串流分析作業 ![](media/cortana-analytics-technical-guide-demand-forecast/icon-stream-analytics.png)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-161">Locating the stream analytics jobs ![](media/cortana-analytics-technical-guide-demand-forecast/icon-stream-analytics.png) that were generated when the solution was deployed.</span></span> <span data-ttu-id="5e20e-162">一個用於將資料推送至 Blob 儲存體 (例如 mytest1streaming432822asablob)，另一種用於將資料推送至 Power BI (例如 mytest1streaming432822asapbi)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-162">One is for pushing data to blob storage (e.g. mytest1streaming432822asablob) and the other one is for pushing data to Power BI (e.g. mytest1streaming432822asapbi).</span></span>
* <span data-ttu-id="5e20e-163">選取</span><span class="sxs-lookup"><span data-stu-id="5e20e-163">Selecting</span></span>

  * <span data-ttu-id="5e20e-164">[輸入] 以檢視查詢輸入</span><span class="sxs-lookup"><span data-stu-id="5e20e-164">***INPUTS*** to view the query input</span></span>
  * <span data-ttu-id="5e20e-165">[查詢] 以檢視查詢本身</span><span class="sxs-lookup"><span data-stu-id="5e20e-165">***QUERY*** to view the query itself</span></span>
  * <span data-ttu-id="5e20e-166">[輸出] 以檢視不同的輸出</span><span class="sxs-lookup"><span data-stu-id="5e20e-166">***OUTPUTS*** to view the different outputs</span></span>

<span data-ttu-id="5e20e-167">Azure 串流分析查詢建構的相關資訊可在 MSDN 上的 [串流分析查詢參考](https://msdn.microsoft.com/library/azure/dn834998.aspx) 中找到。</span><span class="sxs-lookup"><span data-stu-id="5e20e-167">Information about Azure Stream Analytics query construction can be found in the [Stream Analytics Query Reference](https://msdn.microsoft.com/library/azure/dn834998.aspx) on MSDN.</span></span>

<span data-ttu-id="5e20e-168">在此解決方案中，會將資料集 (具有近乎即時的內送資料串流相關分析資訊) 輸出到 Power BI 儀表板的 Azure 串流分析作業會在這個解決方案範本中提供。</span><span class="sxs-lookup"><span data-stu-id="5e20e-168">In this solution, the Azure Stream Analytics job which outputs dataset with near real-time analytics information about the incoming data stream to a Power BI dashboard is provided as part of this solution template.</span></span> <span data-ttu-id="5e20e-169">因為對於內送資料格式具有隱含知識，必須根據您的資料格式變更這些查詢。</span><span class="sxs-lookup"><span data-stu-id="5e20e-169">Because there's implicit knowledge about the incoming data format, these queries would need to be altered based on your data format.</span></span>

<span data-ttu-id="5e20e-170">其他 Azure 串流分析作業會將所有[事件中樞](https://azure.microsoft.com/services/event-hubs/)事件輸出到 [Azure 儲存體](https://azure.microsoft.com/services/storage/)，因為會將完整的事件資訊串流至儲存體，因此不論資料格式為何都不需進行修改。</span><span class="sxs-lookup"><span data-stu-id="5e20e-170">The other Azure Stream Analytics job outputs all [Event Hub](https://azure.microsoft.com/services/event-hubs/) events to [Azure Storage](https://azure.microsoft.com/services/storage/) and hence requires no alteration regardless of your data format as the full event information is streamed to storage.</span></span>

### <a name="azure-data-factory"></a><span data-ttu-id="5e20e-171">Azure Data Factory</span><span class="sxs-lookup"><span data-stu-id="5e20e-171">Azure Data Factory</span></span>
<span data-ttu-id="5e20e-172">[Azure Data Factory](https://azure.microsoft.com/documentation/services/data-factory/) 服務會協調資料的移動和處理。</span><span class="sxs-lookup"><span data-stu-id="5e20e-172">The [Azure Data Factory](https://azure.microsoft.com/documentation/services/data-factory/) service orchestrates the movement and processing of data.</span></span> <span data-ttu-id="5e20e-173">在能源需求預測解決方案範本中，Data Factory 包含十二個[管線](data-factory/data-factory-create-pipelines.md)，這些管線會使用各種技術來移動和處理資料。</span><span class="sxs-lookup"><span data-stu-id="5e20e-173">In the Demand Forecasting for Energy Solution Template the data factory is made up of twelve [pipelines](data-factory/data-factory-create-pipelines.md) that move and process the data using various technologies.</span></span>

  <span data-ttu-id="5e20e-174">您可以開啟隨著解決方案部署建立的解決方案範本圖表底端的 Data Factory 節點，以存取您的 Data Factory。</span><span class="sxs-lookup"><span data-stu-id="5e20e-174">You can access your data factory by opening the Data Factory node at the bottom of the solution template diagram created with the deployment of the solution.</span></span> <span data-ttu-id="5e20e-175">這樣會帶您前往 Azure 管理入口網站上的 Data Factory。</span><span class="sxs-lookup"><span data-stu-id="5e20e-175">This will take you to the data factory on your Azure management portal.</span></span> <span data-ttu-id="5e20e-176">如果您在您的資料集下看到錯誤，您可以忽略這些，錯誤是因為在啟動資料產生器之前即已部署 Data Factory。</span><span class="sxs-lookup"><span data-stu-id="5e20e-176">If you see errors under your datasets, you can ignore those as they are due to data factory being deployed before the data generator was started.</span></span> <span data-ttu-id="5e20e-177">這些錯誤不會防止您的 Data Factory 運作。</span><span class="sxs-lookup"><span data-stu-id="5e20e-177">Those errors do not prevent your data factory from functioning.</span></span>

<span data-ttu-id="5e20e-178">本節將討論 [Azure Data Factory](https://azure.microsoft.com/documentation/services/data-factory/) 中包含的必要[管線](data-factory/data-factory-create-pipelines.md)和[活動](data-factory/data-factory-create-pipelines.md)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-178">This section discusses the necessary [pipelines](data-factory/data-factory-create-pipelines.md) and [activities](data-factory/data-factory-create-pipelines.md) contained in the [Azure Data Factory](https://azure.microsoft.com/documentation/services/data-factory/).</span></span> <span data-ttu-id="5e20e-179">以下是解決方案的圖表檢視。</span><span class="sxs-lookup"><span data-stu-id="5e20e-179">Below is the diagram view of the solution.</span></span>

![](media/cortana-analytics-technical-guide-demand-forecast/ADF2.png)

<span data-ttu-id="5e20e-180">此 Factory 的五個管線包含 [Hive](http://blogs.msdn.com/b/bigdatasupport/archive/2013/11/11/get-started-with-hive-on-hdinsight.aspx) 指令碼，用來分割及彙總資料。</span><span class="sxs-lookup"><span data-stu-id="5e20e-180">Five of the pipelines of this factory contain [Hive](http://blogs.msdn.com/b/bigdatasupport/archive/2013/11/11/get-started-with-hive-on-hdinsight.aspx) scripts that are used to partition and aggregate the data.</span></span> <span data-ttu-id="5e20e-181">如上述，指令碼將會位在安裝期間建立的 [Azure 儲存體](https://azure.microsoft.com/services/storage/) 帳戶中。</span><span class="sxs-lookup"><span data-stu-id="5e20e-181">When noted, the scripts will be located in the [Azure Storage](https://azure.microsoft.com/services/storage/) account created during setup.</span></span> <span data-ttu-id="5e20e-182">其位置會是：demandforecasting\\\\script\\\\hive\\\\ (或 https://[解決方案名稱].blob.core.windows.net/demandforecasting)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-182">Their location will be: demandforecasting\\\\script\\\\hive\\\\ (or https://[Your solution name].blob.core.windows.net/demandforecasting).</span></span>

<span data-ttu-id="5e20e-183">類似於 [Azure 串流分析](#azure-stream-analytics-1)查詢，[Hive](http://blogs.msdn.com/b/bigdatasupport/archive/2013/11/11/get-started-with-hive-on-hdinsight.aspx) 指令碼的對於內送資料格式具有隱含知識，必須根據您的資料格式和[特徵設計](machine-learning/machine-learning-feature-selection-and-engineering.md)需求來變更這些查詢。</span><span class="sxs-lookup"><span data-stu-id="5e20e-183">Similar to the [Azure Stream Analytics](#azure-stream-analytics-1) queries, the [Hive](http://blogs.msdn.com/b/bigdatasupport/archive/2013/11/11/get-started-with-hive-on-hdinsight.aspx) scripts have implicit knowledge about the incoming data format, these queries would need to be altered based on your data format and [feature engineering](machine-learning/machine-learning-feature-selection-and-engineering.md) requirements.</span></span>

#### <a name="aggregatedemanddatato1hrpipeline"></a><span data-ttu-id="5e20e-184">*AggregateDemandDataTo1HrPipeline*</span><span class="sxs-lookup"><span data-stu-id="5e20e-184">*AggregateDemandDataTo1HrPipeline*</span></span>
<span data-ttu-id="5e20e-185">這個[管線](data-factory/data-factory-create-pipelines.md)管線包含單一活動 - 使用 [HDInsightLinkedService](https://msdn.microsoft.com/library/azure/dn893526.aspx) 的 [HDInsightHive](data-factory/data-factory-hive-activity.md) 活動，它會執行 [Hive](http://blogs.msdn.com/b/bigdatasupport/archive/2013/11/11/get-started-with-hive-on-hdinsight.aspx) 指令碼，透過 Azure 串流分析作業將分站層級中每 10 秒流入的需求資料，彙總到每小時區域層級，並放入 [Azure 儲存體](https://azure.microsoft.com/services/storage/)中。</span><span class="sxs-lookup"><span data-stu-id="5e20e-185">This [pipeline](data-factory/data-factory-create-pipelines.md) pipeline contains a single activity - an [HDInsightHive](data-factory/data-factory-hive-activity.md) activity using a [HDInsightLinkedService](https://msdn.microsoft.com/library/azure/dn893526.aspx) that runs a [Hive](http://blogs.msdn.com/b/bigdatasupport/archive/2013/11/11/get-started-with-hive-on-hdinsight.aspx) script to aggregate the every 10 seconds streamed in demand data in substation level to hourly region level and put in [Azure Storage](https://azure.microsoft.com/services/storage/) through the Azure Stream Analytics job.</span></span>

<span data-ttu-id="5e20e-186">此資料分割工作的 [Hive](http://blogs.msdn.com/b/bigdatasupport/archive/2013/11/11/get-started-with-hive-on-hdinsight.aspx) 指令碼為 AggregateDemandRegion1Hr.hql</span><span class="sxs-lookup"><span data-stu-id="5e20e-186">The [Hive](http://blogs.msdn.com/b/bigdatasupport/archive/2013/11/11/get-started-with-hive-on-hdinsight.aspx) script for this partitioning task is ***AggregateDemandRegion1Hr.hql***</span></span>

#### <a name="loadhistorydemanddatapipeline"></a><span data-ttu-id="5e20e-187">*LoadHistoryDemandDataPipeline*</span><span class="sxs-lookup"><span data-stu-id="5e20e-187">*LoadHistoryDemandDataPipeline*</span></span>
<span data-ttu-id="5e20e-188">這個[管線](data-factory/data-factory-create-pipelines.md)包含兩個活動︰</span><span class="sxs-lookup"><span data-stu-id="5e20e-188">This [pipeline](data-factory/data-factory-create-pipelines.md) contains two activities:</span></span>

* <span data-ttu-id="5e20e-189">使用 [HDInsightLinkedService](https://msdn.microsoft.com/library/azure/dn893526.aspx) 的 [HDInsightHive](data-factory/data-factory-hive-activity.md) 活動，它會執行 Hive 指令碼，在 Azure 串流分析作業期間將分站層級中的每小時歷程需求資料，彙總到每小時區域層級，並放入 Azure 儲存體中</span><span class="sxs-lookup"><span data-stu-id="5e20e-189">[HDInsightHive](data-factory/data-factory-hive-activity.md) activity using a [HDInsightLinkedService](https://msdn.microsoft.com/library/azure/dn893526.aspx) that runs a  Hive script to aggregate the hourly history demand data in substation level to hourly region level and put in Azure Storage during the Azure Stream Analytics job</span></span>
* <span data-ttu-id="5e20e-190">[複製](https://msdn.microsoft.com/library/azure/dn835035.aspx) 活動，會將彙總資料從 Azure 儲存體 Blob 移至解決方案範本安裝期間所佈建的 Azure SQL Database。</span><span class="sxs-lookup"><span data-stu-id="5e20e-190">[Copy](https://msdn.microsoft.com/library/azure/dn835035.aspx) activity that moves the aggregated data from Azure Storage blob to the Azure SQL Database that was provisioned as part of the solution template installation.</span></span>

<span data-ttu-id="5e20e-191">此工作的 [Hive](http://blogs.msdn.com/b/bigdatasupport/archive/2013/11/11/get-started-with-hive-on-hdinsight.aspx) 指令碼為 AggregateDemandHistoryRegion.hql。</span><span class="sxs-lookup"><span data-stu-id="5e20e-191">The [Hive](http://blogs.msdn.com/b/bigdatasupport/archive/2013/11/11/get-started-with-hive-on-hdinsight.aspx) script for this task is ***AggregateDemandHistoryRegion.hql***.</span></span>

#### <a name="mlscoringregionxpipeline"></a><span data-ttu-id="5e20e-192">*MLScoringRegionXPipeline*</span><span class="sxs-lookup"><span data-stu-id="5e20e-192">*MLScoringRegionXPipeline*</span></span>
<span data-ttu-id="5e20e-193">這些[管線](data-factory/data-factory-create-pipelines.md)包含數個活動，而且其最終結果為來自與這個方案範本相關聯的 Azure Machine Learning 實驗評分的預測。</span><span class="sxs-lookup"><span data-stu-id="5e20e-193">These [pipelines](data-factory/data-factory-create-pipelines.md) contain several activities and whose end result is the scored predictions from the Azure Machine Learning experiment associated with this solution template.</span></span> <span data-ttu-id="5e20e-194">這些管線幾乎完全相同，差別在於它們各自只會處理不同區域 (由傳入 ADF 管線的不同 RegionID 所完成) 以及每個區域的 hive 指令碼。</span><span class="sxs-lookup"><span data-stu-id="5e20e-194">They are almost identical except each of them only handles the different region which is being done by different RegionID passed in the ADF pipeline and the hive script for each region.</span></span>  
<span data-ttu-id="5e20e-195">包含在此的活動為：</span><span class="sxs-lookup"><span data-stu-id="5e20e-195">The activities contained in this are:</span></span>

* <span data-ttu-id="5e20e-196">使用 [HDInsightLinkedService](https://msdn.microsoft.com/library/azure/dn893526.aspx) 的 [HDInsightHive](data-factory/data-factory-hive-activity.md) 活動，它會執行 Hive 指令碼來執行 Azure Machine Learning 實驗所需的彙總及特徵設計。</span><span class="sxs-lookup"><span data-stu-id="5e20e-196">[HDInsightHive](data-factory/data-factory-hive-activity.md) activity using a [HDInsightLinkedService](https://msdn.microsoft.com/library/azure/dn893526.aspx) that runs a  Hive script to perform aggregations and feature engineering necessary for the Azure Machine Learning experiment.</span></span> <span data-ttu-id="5e20e-197">此工作的 Hive 指令碼是個別的 PrepareMLInputRegionX.hql。</span><span class="sxs-lookup"><span data-stu-id="5e20e-197">The Hive scripts for this task are respective ***PrepareMLInputRegionX.hql***.</span></span>
* <span data-ttu-id="5e20e-198">[複製](https://msdn.microsoft.com/library/azure/dn835035.aspx)活動，它會將來自 [HDInsightHive](data-factory/data-factory-hive-activity.md) 活動的結果移動至可供 [AzureMLBatchScoring](https://msdn.microsoft.com/library/azure/dn894009.aspx) 活動存取的單一 Azure 儲存體 Blob。</span><span class="sxs-lookup"><span data-stu-id="5e20e-198">[Copy](https://msdn.microsoft.com/library/azure/dn835035.aspx) activity that moves the results from the [HDInsightHive](data-factory/data-factory-hive-activity.md) activity to a single Azure Storage blob that can be access by the  [AzureMLBatchScoring](https://msdn.microsoft.com/library/azure/dn894009.aspx) activity.</span></span>
* <span data-ttu-id="5e20e-199">[AzureMLBatchScoring](https://msdn.microsoft.com/library/azure/dn894009.aspx) 活動會導致將結果放入單一 Azure 儲存體 Blob。</span><span class="sxs-lookup"><span data-stu-id="5e20e-199">[AzureMLBatchScoring](https://msdn.microsoft.com/library/azure/dn894009.aspx) activity that calls the Azure Machine Learning experiment which results in the results being put in a single Azure Storage blob.</span></span>

#### <a name="copyscoredresultregionxpipeline"></a><span data-ttu-id="5e20e-200">*CopyScoredResultRegionXPipeline*</span><span class="sxs-lookup"><span data-stu-id="5e20e-200">*CopyScoredResultRegionXPipeline*</span></span>
<span data-ttu-id="5e20e-201">這些[管線](data-factory/data-factory-create-pipelines.md)包含單一活動 - [複製](https://msdn.microsoft.com/library/azure/dn835035.aspx)活動，它會將 Azure Machine Learning 實驗的結果從個別 ***MLScoringRegionXPipeline*** 移動至隨著解決方案範本安裝佈建的 Azure SQL Database。</span><span class="sxs-lookup"><span data-stu-id="5e20e-201">These [pipelines](data-factory/data-factory-create-pipelines.md) contain a single activity - a [Copy](https://msdn.microsoft.com/library/azure/dn835035.aspx) activity that moves the results of the Azure Machine Learning experiment from the respective ***MLScoringRegionXPipeline*** to the Azure SQL Database that was provisioned as part of the solution template installation.</span></span>

#### <a name="copyaggdemandpipeline"></a><span data-ttu-id="5e20e-202">*CopyAggDemandPipeline*</span><span class="sxs-lookup"><span data-stu-id="5e20e-202">*CopyAggDemandPipeline*</span></span>
<span data-ttu-id="5e20e-203">這個[管線](data-factory/data-factory-create-pipelines.md)包含單一活動 - [複製](https://msdn.microsoft.com/library/azure/dn835035.aspx)活動，它會將彙總的持續需求資料從 ***LoadHistoryDemandDataPipeline*** 移動至隨著解決方案範本安裝佈建的 Azure SQL Database。</span><span class="sxs-lookup"><span data-stu-id="5e20e-203">This [pipelines](data-factory/data-factory-create-pipelines.md) contain a single activity - a [Copy](https://msdn.microsoft.com/library/azure/dn835035.aspx) activity that moves the aggregated ongoing demand data from ***LoadHistoryDemandDataPipeline*** to the Azure SQL Database that was provisioned as part of the solution template installation.</span></span>

#### <a name="copyregiondatapipeline-copysubstationdatapipeline-copytopologydatapipeline"></a><span data-ttu-id="5e20e-204">*CopyRegionDataPipeline、CopySubstationDataPipeline、CopyTopologyDataPipeline*</span><span class="sxs-lookup"><span data-stu-id="5e20e-204">*CopyRegionDataPipeline, CopySubstationDataPipeline, CopyTopologyDataPipeline*</span></span>
<span data-ttu-id="5e20e-205">這些[管線](data-factory/data-factory-create-pipelines.md)包含單一活動 - [複製](https://msdn.microsoft.com/library/azure/dn835035.aspx)活動，它會將安裝解決方案範本時上傳至 Azure 儲存體 Blob 的區域/分站/Topologygeo 參考資料，移動到安裝解決方案範本時所佈建的 Azure SQL Database。</span><span class="sxs-lookup"><span data-stu-id="5e20e-205">These [pipelines](data-factory/data-factory-create-pipelines.md) contain a single activity - a [Copy](https://msdn.microsoft.com/library/azure/dn835035.aspx) activity that moves the reference data of Region/Substation/Topologygeo that are uploaded to Azure Storage blob as part of the solution template installation to the Azure SQL Database that was provisioned as part of the solution template installation.</span></span>

### <a name="azure-machine-learning"></a><span data-ttu-id="5e20e-206">Azure Machine Learning</span><span class="sxs-lookup"><span data-stu-id="5e20e-206">Azure Machine Learning</span></span>
<span data-ttu-id="5e20e-207">用於此解決方案範本的 [Azure Machine Learning](https://azure.microsoft.com/services/machine-learning/) 實驗會提供區域需求預測。</span><span class="sxs-lookup"><span data-stu-id="5e20e-207">The [Azure Machine Learning](https://azure.microsoft.com/services/machine-learning/) experiment used for this solution template provides the prediction of demand of region.</span></span> <span data-ttu-id="5e20e-208">實驗因取用的資料集而不同，因而需要特別針對帶入的資料進行修改或取代。</span><span class="sxs-lookup"><span data-stu-id="5e20e-208">The experiment is specific to the data set consumed and therefore will require modification or replacement specific to the data that is brought in.</span></span>

## <a name="monitor-progress"></a><span data-ttu-id="5e20e-209">**監視進度**</span><span class="sxs-lookup"><span data-stu-id="5e20e-209">**Monitor Progress**</span></span>
<span data-ttu-id="5e20e-210">一旦資料產生器啟動，管線會開始合成，解決方案的不同元件會遵循 Data Factory 發出的命令開始動作。</span><span class="sxs-lookup"><span data-stu-id="5e20e-210">Once the Data Generator is launched, the pipeline begins to get hydrated and the different components of your solution start kicking into action following the commands issued by the Data Factory.</span></span> <span data-ttu-id="5e20e-211">您有兩種方式可以監視管線。</span><span class="sxs-lookup"><span data-stu-id="5e20e-211">There are two ways you can monitor the pipeline.</span></span>

1. <span data-ttu-id="5e20e-212">檢查 Azure Blob 儲存體中的資料。</span><span class="sxs-lookup"><span data-stu-id="5e20e-212">Check the data from Azure Blob Storage.</span></span>

    <span data-ttu-id="5e20e-213">其中一個串流分析作業會將原始內送資料寫入 blob 儲存體。</span><span class="sxs-lookup"><span data-stu-id="5e20e-213">One of the Stream Analytics job writes the raw incoming data to blob storage.</span></span> <span data-ttu-id="5e20e-214">如果您從成功部署解決方案的畫面按一下解決方案的 [Azure Blob 儲存體]元件，然後在右窗格中按一下 [開啟]，系統會帶您前往 [Azure 管理入口網站](https://portal.azure.com)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-214">If you click on **Azure Blob Storage** component of your solution from the screen you successfully deployed the solution and then click **Open** in the right panel, it will take you to the [Azure management portal](https://portal.azure.com).</span></span> <span data-ttu-id="5e20e-215">到達那裡之後，按一下 [Blob]。</span><span class="sxs-lookup"><span data-stu-id="5e20e-215">Once there, click on **Blobs**.</span></span> <span data-ttu-id="5e20e-216">在接下來的面板中，您會看到容器的清單。</span><span class="sxs-lookup"><span data-stu-id="5e20e-216">In the next panel, you will see a list of Containers.</span></span> <span data-ttu-id="5e20e-217">按一下 [energysadata]。</span><span class="sxs-lookup"><span data-stu-id="5e20e-217">Click on **"energysadata"**.</span></span> <span data-ttu-id="5e20e-218">在接下來的面板中，您會看到 [demandongoing] 資料夾。</span><span class="sxs-lookup"><span data-stu-id="5e20e-218">In the next panel, you will see the **"demandongoing"** folder.</span></span> <span data-ttu-id="5e20e-219">在 rawdata 資料夾內，您會看到具有如 date=2016-01-28 等等名稱的資料夾。如果您看到這些資料夾，則表示原始資料已經成功在您的電腦上產生並儲存在 blob 儲存體。</span><span class="sxs-lookup"><span data-stu-id="5e20e-219">Inside the rawdata folder, you will see folders with names such as date=2016-01-28 etc. If you see these folders, it indicates that the raw data is successfully being generated on your computer and stored in blob storage.</span></span> <span data-ttu-id="5e20e-220">您應該會在這些資料夾中看到具有有限大小 (MB) 的檔案。</span><span class="sxs-lookup"><span data-stu-id="5e20e-220">You should see files that should have finite sizes in MB in those folders.</span></span>
2. <span data-ttu-id="5e20e-221">檢查 Azure SQL Database 中的資料。</span><span class="sxs-lookup"><span data-stu-id="5e20e-221">Check the data from Azure SQL Database.</span></span>

    <span data-ttu-id="5e20e-222">管線的最後一個步驟是將資料 (例如從機器學習的預測) 寫入至 SQL Database。</span><span class="sxs-lookup"><span data-stu-id="5e20e-222">The last step of the pipeline is to write data (e.g. predictions from machine learning) into SQL Database.</span></span> <span data-ttu-id="5e20e-223">您可能必須等候最多 2 個小時，資料才會出現在 SQL Database。</span><span class="sxs-lookup"><span data-stu-id="5e20e-223">You might have to wait a maximum of 2 hours for the data to appear in SQL Database.</span></span> <span data-ttu-id="5e20e-224">監視您的 SQL Database 中有多少資料可用的其中一個方法是透過 [Azure 管理入口網站](https://manage.windowsazure.com/)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-224">One way to monitor how much data is available in your SQL Database is through [Azure management portal](https://manage.windowsazure.com/).</span></span> <span data-ttu-id="5e20e-225">在左側面板找到並按一下 SQL DATABASES![](media/cortana-analytics-technical-guide-demand-forecast/SQLicon2.png)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-225">On the left panel locate SQL DATABASES![](media/cortana-analytics-technical-guide-demand-forecast/SQLicon2.png)  and click it.</span></span> <span data-ttu-id="5e20e-226">然後找到您的資料庫 (亦即 demo123456db) 並且按一下它。</span><span class="sxs-lookup"><span data-stu-id="5e20e-226">Then locate your database (i.e. demo123456db) and click on it.</span></span> <span data-ttu-id="5e20e-227">在下一個頁面的 [連接至您的資料庫] 區段下方，按一下 [對您的 SQL Database 執行 Transact-SQL 查詢]。</span><span class="sxs-lookup"><span data-stu-id="5e20e-227">On the next page under **"Connect to your database"** section, click **"Run Transact-SQL queries against your SQL database"**.</span></span>

    <span data-ttu-id="5e20e-228">在這裡，您可以按一下 [新增查詢] 並查詢資料列數目 (例如，從 DemandRealHourly 選取 count(*)。隨著資料庫成長，資料表中的資料列數目應該會增加)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-228">Here, you can click on New Query and query for the number of rows (e.g. "select count(*) from DemandRealHourly)" As your database grows, the number of rows in the table should increase.)</span></span>
3. <span data-ttu-id="5e20e-229">檢查 Power BI 儀表板中的資料。</span><span class="sxs-lookup"><span data-stu-id="5e20e-229">Check the data from Power BI dashboard.</span></span>

    <span data-ttu-id="5e20e-230">您可以設定 Power BI 最忙碌路徑儀表板以監視未經處理的內送資料。</span><span class="sxs-lookup"><span data-stu-id="5e20e-230">You can set up Power BI hot path dashboard to monitor the raw incoming data.</span></span> <span data-ttu-id="5e20e-231">請遵循＜Power BI 儀表板＞一節中的指示。</span><span class="sxs-lookup"><span data-stu-id="5e20e-231">Please follow the instruction in the "Power BI Dashboard" section.</span></span>

## <a name="power-bi-dashboard"></a><span data-ttu-id="5e20e-232">**Power BI 儀表板**</span><span class="sxs-lookup"><span data-stu-id="5e20e-232">**Power BI Dashboard**</span></span>
### <a name="overview"></a><span data-ttu-id="5e20e-233">概觀</span><span class="sxs-lookup"><span data-stu-id="5e20e-233">Overview</span></span>
<span data-ttu-id="5e20e-234">本節說明如何設定 Power BI 儀表板，以視覺化方式檢視來自 Azure 串流分析 (熱路徑) 的即時資料，以及來自 Azure 機器學習 (冷路徑) 的預測結果。</span><span class="sxs-lookup"><span data-stu-id="5e20e-234">This section describes how to set up Power BI dashboard to visualize your real time data from Azure stream analytics (hot path), as well as forecast results from Azure machine learning (cold path).</span></span>

### <a name="setup-hot-path-dashboard"></a><span data-ttu-id="5e20e-235">設定最忙碌路徑儀表板</span><span class="sxs-lookup"><span data-stu-id="5e20e-235">Setup Hot Path Dashboard</span></span>
<span data-ttu-id="5e20e-236">下列步驟將引導您如何以視覺化方式檢視解決方案部署時所產生串流分析作業的即時資料輸出。</span><span class="sxs-lookup"><span data-stu-id="5e20e-236">The following steps will guide you how to visualize real time data output from Stream Analytics jobs that were generated at the time of solution deployment.</span></span> <span data-ttu-id="5e20e-237">需要 [Power BI 線上版](http://www.powerbi.com/) 帳戶，才能執行下列步驟。</span><span class="sxs-lookup"><span data-stu-id="5e20e-237">A [Power BI online](http://www.powerbi.com/) account is required to perform the following steps.</span></span> <span data-ttu-id="5e20e-238">如果您沒有帳戶，您可以 [建立一個](https://powerbi.microsoft.com/pricing)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-238">If you don't have an account, you can [create one](https://powerbi.microsoft.com/pricing).</span></span>

1. <span data-ttu-id="5e20e-239">在 Azure 串流分析 (ASA) 中加入 Power BI 輸出。</span><span class="sxs-lookup"><span data-stu-id="5e20e-239">Add Power BI output in Azure Stream Analytics (ASA).</span></span>

   * <span data-ttu-id="5e20e-240">您必須依照 [Azure 串流分析及 Power BI：適用於串流資料即時可見度的即時分析儀表板](stream-analytics/stream-analytics-power-bi-dashboard.md)中的指示，將 Azure 串流分析作業的輸出設定為 Power BI 儀表板。</span><span class="sxs-lookup"><span data-stu-id="5e20e-240">You will need to follow the instructions in [Azure Stream Analytics & Power BI: A real-time analytics dashboard for real-time visibility of streaming data](stream-analytics/stream-analytics-power-bi-dashboard.md) to set up the output of your Azure Stream Analytics job as your Power BI dashboard.</span></span>
   * <span data-ttu-id="5e20e-241">找出 [Azure 管理入口網站](https://manage.windowsazure.com)中的串流分析作業。</span><span class="sxs-lookup"><span data-stu-id="5e20e-241">Locate the stream analytics job in your [Azure management portal](https://manage.windowsazure.com).</span></span> <span data-ttu-id="5e20e-242">作業名稱應該是︰您的解決方案名稱+"streamingjob"+隨機數字+"asapbi" (也就是 demostreamingjob123456asapbi)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-242">The name of the job should be: YourSolutionName+"streamingjob"+random number+"asapbi" (i.e. demostreamingjob123456asapbi).</span></span>
   * <span data-ttu-id="5e20e-243">針對 ASA 工作加入 PowerBI 輸出。</span><span class="sxs-lookup"><span data-stu-id="5e20e-243">Add a PowerBI output for the ASA job.</span></span> <span data-ttu-id="5e20e-244">將 [輸出別名] 設定為 **‘PBIoutput’**。</span><span class="sxs-lookup"><span data-stu-id="5e20e-244">Set the **Output Alias** as **‘PBIoutput’**.</span></span> <span data-ttu-id="5e20e-245">將 [資料集名稱] 和 [資料表名稱] 命名為 **‘EnergyStreamData’**。</span><span class="sxs-lookup"><span data-stu-id="5e20e-245">Set your **Dataset Name** and **Table Name** as **‘EnergyStreamData’**.</span></span> <span data-ttu-id="5e20e-246">新增了輸出之後，按一下頁面底部的 [啟動]  以啟動串流分析作業。</span><span class="sxs-lookup"><span data-stu-id="5e20e-246">Once you have added the output, click **"Start"** at the bottom of the page to start the Stream Analytics job.</span></span> <span data-ttu-id="5e20e-247">您應該會收到確認訊息 (例如，「串流分析作業 myteststreamingjob12345asablob 啟動成功」)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-247">You should get a confirmation message (*e.g.*, "Starting stream analytics job myteststreamingjob12345asablob succeeded").</span></span>
2. <span data-ttu-id="5e20e-248">登入 [Power BI 線上版](http://www.powerbi.com)</span><span class="sxs-lookup"><span data-stu-id="5e20e-248">Log in to [Power BI online](http://www.powerbi.com)</span></span>

   * <span data-ttu-id="5e20e-249">在 [我的工作區] 中的左側面板 [資料集] 區段中，您應該可以看到新的資料集出現在 Power BI 的左面板上。</span><span class="sxs-lookup"><span data-stu-id="5e20e-249">On the left panel Datasets section in My Workspace, you should be able to see a new dataset showing on the left panel of Power BI.</span></span> <span data-ttu-id="5e20e-250">這是您在上一個步驟中從 Azure 串流分析推入的串流資料。</span><span class="sxs-lookup"><span data-stu-id="5e20e-250">This is the streaming data you pushed from Azure Stream Analytics in the previous step.</span></span>
   * <span data-ttu-id="5e20e-251">請確定 [視覺效果]  窗格開啟，並顯示在螢幕的右邊。</span><span class="sxs-lookup"><span data-stu-id="5e20e-251">Make sure the ***Visualizations*** pane is open and is shown on the right side of the screen.</span></span>
3. <span data-ttu-id="5e20e-252">建立 [依時間戳記的需求] 磚︰</span><span class="sxs-lookup"><span data-stu-id="5e20e-252">Create the "Demand by Timestamp" tile:</span></span>

   * <span data-ttu-id="5e20e-253">在左側面板 [資料集] 區段中按一下資料集 ‘EnergyStreamData’  。</span><span class="sxs-lookup"><span data-stu-id="5e20e-253">Click dataset **‘EnergyStreamData’** on the left panel Datasets section.</span></span>
   * <span data-ttu-id="5e20e-254">按一下 [折線圖] 圖示 ![](media/cortana-analytics-technical-guide-demand-forecast/PowerBIpic8.png)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-254">Click **"Line Chart"** icon ![](media/cortana-analytics-technical-guide-demand-forecast/PowerBIpic8.png).</span></span>
   * <span data-ttu-id="5e20e-255">按一下 [欄位]  面板中的 ’EnergyStreamData’。</span><span class="sxs-lookup"><span data-stu-id="5e20e-255">Click ‘EnergyStreamData’ in **Fields** panel.</span></span>
   * <span data-ttu-id="5e20e-256">按一下 [時間戳記]  ，並確定它顯示在 [座標軸] 底下。</span><span class="sxs-lookup"><span data-stu-id="5e20e-256">Click **“Timestamp”** and make sure it shows under "Axis".</span></span> <span data-ttu-id="5e20e-257">按一下 [載入]  ，並確定它顯示在 [值] 底下。</span><span class="sxs-lookup"><span data-stu-id="5e20e-257">Click **“Load”** and make sure it shows under "Values".</span></span>
   * <span data-ttu-id="5e20e-258">按一下上方的 [儲存]  並將報告命名為 “EnergyStreamDataReport”。</span><span class="sxs-lookup"><span data-stu-id="5e20e-258">Click **SAVE** on the top and name the report as “EnergyStreamDataReport”.</span></span> <span data-ttu-id="5e20e-259">名為 “EnergyStreamDataReport” 的報告會顯示在左側 [導覽] 窗格的 [報告] 區段中。</span><span class="sxs-lookup"><span data-stu-id="5e20e-259">The report named “EnergyStreamDataReport” will be shown in Reports section in the Navigator pane on left.</span></span>
   * <span data-ttu-id="5e20e-260">按一下此折線圖右上角的 [釘選視覺]![](media/cortana-analytics-technical-guide-demand-forecast/PowerBIpic6.png) 圖示，[釘選至儀表板] 視窗就會出現以供您選擇儀表板。</span><span class="sxs-lookup"><span data-stu-id="5e20e-260">Click **“Pin Visual”**![](media/cortana-analytics-technical-guide-demand-forecast/PowerBIpic6.png) icon on top right corner of this line chart, a "Pin to Dashboard" window may show up for you to choose a dashboard.</span></span> <span data-ttu-id="5e20e-261">請選取 [EnergyStreamDataReport]，然後按一下 [釘選]。</span><span class="sxs-lookup"><span data-stu-id="5e20e-261">Please select "EnergyStreamDataReport", then click "Pin".</span></span>
   * <span data-ttu-id="5e20e-262">在儀表板上將滑鼠停留在此磚中，按一下右上角的 [編輯] 圖示可將其標題變更為「依時間戳記的需求」</span><span class="sxs-lookup"><span data-stu-id="5e20e-262">Hover the mouse over this tile on the dashboard, click "edit" icon on top right corner to change its title as "Demand by Timestamp"</span></span>
4. <span data-ttu-id="5e20e-263">根據適當的資料集建立其他儀表板圖格。</span><span class="sxs-lookup"><span data-stu-id="5e20e-263">Create other dashboard tiles based on appropriate datasets.</span></span> <span data-ttu-id="5e20e-264">最終的儀表板檢視如下所示。</span><span class="sxs-lookup"><span data-stu-id="5e20e-264">The final dashboard view is shown below.</span></span>
     ![](media/cortana-analytics-technical-guide-demand-forecast/PBIFullScreen.png)

### <a name="setup-cold-path-dashboard"></a><span data-ttu-id="5e20e-265">設定冷路徑儀表板</span><span class="sxs-lookup"><span data-stu-id="5e20e-265">Setup Cold Path Dashboard</span></span>
<span data-ttu-id="5e20e-266">在冷路徑資料管線中，基本目標是取得每個區域的需求預測。</span><span class="sxs-lookup"><span data-stu-id="5e20e-266">In cold path data pipeline, the essential goal is to get the demand forecast of each region.</span></span> <span data-ttu-id="5e20e-267">Power BI 會連接到 Azure SQL Database 做為其資料來源，即預測結果的儲存位置。</span><span class="sxs-lookup"><span data-stu-id="5e20e-267">Power BI connects to an Azure SQL database as its data source, where the prediction results are stored.</span></span>

> [!NOTE]
> 1) <span data-ttu-id="5e20e-268">需要幾個小時的時間才能收集足夠用於儀表板的預測結果。</span><span class="sxs-lookup"><span data-stu-id="5e20e-268">It takes few hours to collect enough forecast results for the dashboard.</span></span> <span data-ttu-id="5e20e-269">建議您在啟動資料產生器後的 2 到 3 個小時再開始此程序。</span><span class="sxs-lookup"><span data-stu-id="5e20e-269">We recommend you start this process 2-3 hours after you lunch the data generator.</span></span> <span data-ttu-id="5e20e-270">2) 在此步驟中，必要條件就是下載並安裝免費版軟體 [Power BI 桌面版](https://powerbi.microsoft.com/desktop)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-270">2) In this step, the prerequisite is to download and install the free software [Power BI desktop](https://powerbi.microsoft.com/desktop).</span></span>
>
>

1. <span data-ttu-id="5e20e-271">取得資料庫認證。</span><span class="sxs-lookup"><span data-stu-id="5e20e-271">Get the database credentials.</span></span>

   <span data-ttu-id="5e20e-272">在移至後續步驟之前，您將需要 **資料庫伺服器名稱、資料庫名稱、使用者名稱和密碼** 。</span><span class="sxs-lookup"><span data-stu-id="5e20e-272">You will need **database server name, database name, user name and password** before moving to next steps.</span></span> <span data-ttu-id="5e20e-273">以下是引導您如何尋找的步驟。</span><span class="sxs-lookup"><span data-stu-id="5e20e-273">Here are the steps to guide you how to find them.</span></span>

   * <span data-ttu-id="5e20e-274">一旦您的解決方案範本圖表上的 [Azure SQL Database] 變成綠色，請按一下它，然後按一下 [開啟]。</span><span class="sxs-lookup"><span data-stu-id="5e20e-274">Once **"Azure SQL Database"** on your solution template diagram turns green, click it and then click **"Open"**.</span></span> <span data-ttu-id="5e20e-275">您將會前往 Azure 管理入口網站，而且您的資料庫資訊頁面也會開啟。</span><span class="sxs-lookup"><span data-stu-id="5e20e-275">You will be guided to Azure management portal and your database information page will be opened as well.</span></span>
   * <span data-ttu-id="5e20e-276">在該頁面上，您可以找到 [資料庫] 區段。</span><span class="sxs-lookup"><span data-stu-id="5e20e-276">On the page, you can find a "Database" section.</span></span> <span data-ttu-id="5e20e-277">它會列出您已建立的資料庫。</span><span class="sxs-lookup"><span data-stu-id="5e20e-277">It lists out the database you have created.</span></span> <span data-ttu-id="5e20e-278">您的資料庫名稱應該是 **「您的解決方案名稱 + 隨機數字 + 'db'」** (例如 "mytest12345db")。</span><span class="sxs-lookup"><span data-stu-id="5e20e-278">The name of your database should be **"Your Solution Name + Random Number + 'db'"** (e.g. "mytest12345db").</span></span>
   * <span data-ttu-id="5e20e-279">按一下您的資料庫，在新的快顯面板上方，就可以找到您的資料庫伺服器名稱。</span><span class="sxs-lookup"><span data-stu-id="5e20e-279">Click your database, in the new pop out panel, you can find your database server name on the top.</span></span> <span data-ttu-id="5e20e-280">您的資料庫伺服器名稱應該是**「您的解決方案名稱 + 隨機數字 + 'database.windows.net,1433'」** (例如 "mytest12345.database.windows.net,1433")。</span><span class="sxs-lookup"><span data-stu-id="5e20e-280">Your database server name should be **"Your Solution Name + Random Number + 'database.windows.net,1433'"** (e.g. "mytest12345.database.windows.net,1433").</span></span>
   * <span data-ttu-id="5e20e-281">您的資料庫**使用者名稱**和**密碼**使用解決方案部署期間記錄的相同使用者名稱和密碼。</span><span class="sxs-lookup"><span data-stu-id="5e20e-281">Your database **username** and **password** are the same as the username and password previously recorded during deployment of the solution.</span></span>
2. <span data-ttu-id="5e20e-282">更新冷路徑 Power BI 檔案的資料來源</span><span class="sxs-lookup"><span data-stu-id="5e20e-282">Update the data source of the cold path Power BI file</span></span>

   * <span data-ttu-id="5e20e-283">確定您已安裝最新版本的 [Power BI Desktop](https://powerbi.microsoft.com/desktop)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-283">Make sure you have installed the latest version of [Power BI desktop](https://powerbi.microsoft.com/desktop).</span></span>
   * <span data-ttu-id="5e20e-284">在您下載的 **"DemandForecastingDataGeneratorv1.0"** 資料夾中，按兩下 **‘Power BI Template\DemandForecastPowerBI.pbix’** 檔案。</span><span class="sxs-lookup"><span data-stu-id="5e20e-284">In the **"DemandForecastingDataGeneratorv1.0"** folder you downloaded, double click the **‘Power BI Template\DemandForecastPowerBI.pbix’** file.</span></span> <span data-ttu-id="5e20e-285">初始的視覺效果是根據虛擬資料所形成。</span><span class="sxs-lookup"><span data-stu-id="5e20e-285">The initial visualizations are based on dummy data.</span></span> <span data-ttu-id="5e20e-286">**注意：**如果您看到錯誤訊息，請確定您已安裝最新版本的 Power BI Desktop。</span><span class="sxs-lookup"><span data-stu-id="5e20e-286">**Note:** If you see an error massage, please make sure you have installed the latest version of Power BI Desktop.</span></span>

     <span data-ttu-id="5e20e-287">一旦開啟，請在檔案的頂端按一下 [編輯查詢] 。</span><span class="sxs-lookup"><span data-stu-id="5e20e-287">Once you open it, on the top of the file, click **‘Edit Queries’**.</span></span> <span data-ttu-id="5e20e-288">在快顯視窗中，按兩下右面板上的 [來源]  。</span><span class="sxs-lookup"><span data-stu-id="5e20e-288">In the pop out window, double click **‘Source’** on the right panel.</span></span>
     ![](media/cortana-analytics-technical-guide-demand-forecast/PowerBIpic1.png)
   * <span data-ttu-id="5e20e-289">在快顯視窗中，將 [伺服器]和 [資料庫] 取代為您自己的伺服器和資料庫名稱，然後按一下 [確定]。</span><span class="sxs-lookup"><span data-stu-id="5e20e-289">In the pop out window, replace **"Server"** and **"Database"** with your own server and database names, and then click **"OK"**.</span></span> <span data-ttu-id="5e20e-290">針對伺服器名稱，請確定您指定連接埠 1433 (**YourSoutionName.database.windows.net, 1433**)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-290">For server name, make sure you specify the port 1433 (**YourSolutionName.database.windows.net, 1433**).</span></span> <span data-ttu-id="5e20e-291">忽略畫面上出現的警告訊息。</span><span class="sxs-lookup"><span data-stu-id="5e20e-291">Ignore the warning messages that appear on the screen.</span></span>
   * <span data-ttu-id="5e20e-292">在下一個快顯視窗中，您會在左側窗格上看到兩個選項 ([Windows] 和 [資料庫])。</span><span class="sxs-lookup"><span data-stu-id="5e20e-292">In the next pop out window, you'll see two options on the left pane (**Windows** and **Database**).</span></span> <span data-ttu-id="5e20e-293">按一下 [資料庫]，填入您的 [使用者名稱] 和 [密碼] \(這是當您首次部署解決方案並建立 Azure SQL Database 時輸入的使用者名稱和密碼)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-293">Click **"Database"**, fill in your **"Username"** and **"Password"** (this is the username and password you entered when you first deployed the solution and created an Azure SQL database).</span></span> <span data-ttu-id="5e20e-294">在 [選取要套用這些設定的層級] 中，請勾選資料庫層級選項。</span><span class="sxs-lookup"><span data-stu-id="5e20e-294">In ***Select which level to apply these settings to***, check database level option.</span></span> <span data-ttu-id="5e20e-295">然後按一下 [連接] 。</span><span class="sxs-lookup"><span data-stu-id="5e20e-295">Then click **"Connect"**.</span></span>
   * <span data-ttu-id="5e20e-296">一旦引導您回到上一頁，請關閉視窗。</span><span class="sxs-lookup"><span data-stu-id="5e20e-296">Once you're guided back to the previous page, close the window.</span></span> <span data-ttu-id="5e20e-297">訊息將會蹦現 - 按一下 [套用] 。</span><span class="sxs-lookup"><span data-stu-id="5e20e-297">A message will pop out - click **Apply**.</span></span> <span data-ttu-id="5e20e-298">最後，按一下 [儲存]  按鈕以儲存變更。</span><span class="sxs-lookup"><span data-stu-id="5e20e-298">Lastly, click the **Save** button to save the changes.</span></span> <span data-ttu-id="5e20e-299">您的 Power BI 檔案現在已建立與伺服器的連線。</span><span class="sxs-lookup"><span data-stu-id="5e20e-299">Your Power BI file has now established connection to the server.</span></span> <span data-ttu-id="5e20e-300">如果視覺效果是空的，請確定將視覺效果上的選取範圍都清除，以將所有資料視覺化，成法是按一下圖例右上角的橡皮擦圖示。</span><span class="sxs-lookup"><span data-stu-id="5e20e-300">If your visualizations are empty, make sure you clear the selections on the visualizations to visualize all the data by clicking the eraser icon on the upper right corner of the legends.</span></span> <span data-ttu-id="5e20e-301">使用重新整理按鈕在視覺效果上反映新的資料。</span><span class="sxs-lookup"><span data-stu-id="5e20e-301">Use the refresh button to reflect new data on the visualizations.</span></span> <span data-ttu-id="5e20e-302">最初，您只會在視覺效果上看到種子資料，因為 Data Factory 排定為每 3 個小時重新整理。</span><span class="sxs-lookup"><span data-stu-id="5e20e-302">Initially, you will only see the seed data on your visualizations as the data factory is scheduled to refresh every 3 hours.</span></span> <span data-ttu-id="5e20e-303">3 小時後，當您重新整理資料時，您會看到新的預測反映在視覺效果中。</span><span class="sxs-lookup"><span data-stu-id="5e20e-303">After 3 hours, you will see new predictions reflected in your visualizations when you refresh the data.</span></span>
3. <span data-ttu-id="5e20e-304">(選擇性) 將冷路徑儀表板發佈至 [Power BI 線上版](http://www.powerbi.com/)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-304">(Optional) Publish the cold path dashboard to [Power BI online](http://www.powerbi.com/).</span></span> <span data-ttu-id="5e20e-305">請注意，這個步驟需要 Power BI 帳戶 (或 Office 365 帳戶)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-305">Note that this step needs a Power BI account (or Office 365 account).</span></span>

   * <span data-ttu-id="5e20e-306">按一下 [發佈]，幾秒鐘後會出現一個視窗顯示「發佈至 Power BI 成功!」，</span><span class="sxs-lookup"><span data-stu-id="5e20e-306">Click **"Publish"** and few seconds later a window appears displaying "Publishing to Power BI Success!"</span></span> <span data-ttu-id="5e20e-307">並帶有綠色核取記號。</span><span class="sxs-lookup"><span data-stu-id="5e20e-307">with a green check mark.</span></span> <span data-ttu-id="5e20e-308">按一下 [在 Power BI 中開啟 demoprediction.pbix] 下方的連結。</span><span class="sxs-lookup"><span data-stu-id="5e20e-308">Click the link below "Open demoprediction.pbix in Power BI".</span></span> <span data-ttu-id="5e20e-309">若要尋找詳細的指示，請參閱[從 Power BI Desktop 發佈](https://support.powerbi.com/knowledgebase/articles/461278-publish-from-power-bi-desktop)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-309">To find detailed instructions, see [Publish from Power BI Desktop](https://support.powerbi.com/knowledgebase/articles/461278-publish-from-power-bi-desktop).</span></span>
   * <span data-ttu-id="5e20e-310">若要建立新儀表板：在左側窗格中按一下 [儀表板] 區段旁的 **+** 號。</span><span class="sxs-lookup"><span data-stu-id="5e20e-310">To create a new dashboard: click the **+** sign next to the **Dashboards** section on the left pane.</span></span> <span data-ttu-id="5e20e-311">為這個新的儀表板輸入名稱「需求預測示範」。</span><span class="sxs-lookup"><span data-stu-id="5e20e-311">Enter the name "Demand Forecasting Demo" for this new dashboard.</span></span>
   * <span data-ttu-id="5e20e-312">一旦您開啟報告，請按一下 ![](media/cortana-analytics-technical-guide-demand-forecast/PowerBIpic6.png)，將所有視覺效果釘選到儀表板。</span><span class="sxs-lookup"><span data-stu-id="5e20e-312">Once you open the report, click ![](media/cortana-analytics-technical-guide-demand-forecast/PowerBIpic6.png) to pin all the visualizations to your dashboard.</span></span> <span data-ttu-id="5e20e-313">若要尋找詳細的指示，請參閱 [從報告將磚釘選至 Power BI 儀表板](https://support.powerbi.com/knowledgebase/articles/430323-pin-a-tile-to-a-power-bi-dashboard-from-a-report)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-313">To find detailed instructions, see [Pin a tile to a Power BI dashboard from a report](https://support.powerbi.com/knowledgebase/articles/430323-pin-a-tile-to-a-power-bi-dashboard-from-a-report).</span></span>
     <span data-ttu-id="5e20e-314">前往儀表板頁面並調整視覺效果的大小和位置，以及編輯其標題。</span><span class="sxs-lookup"><span data-stu-id="5e20e-314">Go to the dashboard page and adjust the size and location of your visualizations and edit their titles.</span></span> <span data-ttu-id="5e20e-315">若要尋找如何編輯您的磚的詳細說明，請參閱 [編輯磚 -- 調整大小、移動、重新命名、釘選、刪除、加入超連結](https://powerbi.microsoft.com/documentation/powerbi-service-edit-a-tile-in-a-dashboard/#rename)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-315">To find detailed instructions on how to edit your tiles, see [Edit a tile -- resize, move, rename, pin, delete, add hyperlink](https://powerbi.microsoft.com/documentation/powerbi-service-edit-a-tile-in-a-dashboard/#rename).</span></span> <span data-ttu-id="5e20e-316">以下是具有釘選了一些冷路徑視覺效果的範例儀表板。</span><span class="sxs-lookup"><span data-stu-id="5e20e-316">Here is an example dashboard with some cold path visualizations pinned to it.</span></span>

     ![](media/cortana-analytics-technical-guide-demand-forecast/PowerBIpic7.png)
4. <span data-ttu-id="5e20e-317">(選擇性) 排程資料來源的重新整理。</span><span class="sxs-lookup"><span data-stu-id="5e20e-317">(Optional) Schedule refresh of the data source.</span></span>

   * <span data-ttu-id="5e20e-318">若要排程資料的重新整理，請將滑鼠移到 **EnergyBPI-Final** 資料集，按一下 ![](media/cortana-analytics-technical-guide-demand-forecast/PowerBIpic3.png)，然後選擇 [排程重新整理]。</span><span class="sxs-lookup"><span data-stu-id="5e20e-318">To schedule refresh of the data, hover your mouse over the **EnergyBPI-Final** dataset, click ![](media/cortana-analytics-technical-guide-demand-forecast/PowerBIpic3.png) and then choose **Schedule Refresh**.</span></span>
     <span data-ttu-id="5e20e-319">**附註：**如果您看到警告訊息，請按一下 [編輯認證]，並確定您的資料庫認證與步驟 1 中所述相同。</span><span class="sxs-lookup"><span data-stu-id="5e20e-319">**Note:** If you see a warning massage, click **Edit Credentials** and make sure your database credentials are the same as those described in step 1.</span></span>

     ![](media/cortana-analytics-technical-guide-demand-forecast/PowerBIpic4.png)
   * <span data-ttu-id="5e20e-320">展開 **排程重新整理** 一節。</span><span class="sxs-lookup"><span data-stu-id="5e20e-320">Expand the **Schedule Refresh** section.</span></span> <span data-ttu-id="5e20e-321">開啟「將您的資料保持最新」。</span><span class="sxs-lookup"><span data-stu-id="5e20e-321">Turn on "keep your data up-to-date".</span></span>
   * <span data-ttu-id="5e20e-322">根據您的需求排程重新整理。</span><span class="sxs-lookup"><span data-stu-id="5e20e-322">Schedule the refresh based on your needs.</span></span> <span data-ttu-id="5e20e-323">若要尋找詳細資訊，請參閱 [Power BI 中的資料重新整理](https://powerbi.microsoft.com/documentation/powerbi-refresh-data/)。</span><span class="sxs-lookup"><span data-stu-id="5e20e-323">To find more information, see [Data refresh in Power BI](https://powerbi.microsoft.com/documentation/powerbi-refresh-data/).</span></span>

## <a name="how-to-delete-your-solution"></a><span data-ttu-id="5e20e-324">**如何刪除解決方案**</span><span class="sxs-lookup"><span data-stu-id="5e20e-324">**How to delete your solution**</span></span>
<span data-ttu-id="5e20e-325">請確定您在未積極使用解決方案時有停止資料產生器，因為執行資料產生器將會產生較高的成本。</span><span class="sxs-lookup"><span data-stu-id="5e20e-325">Please ensure that you stop the data generator when not actively using the solution as running the data generator will incur higher costs.</span></span> <span data-ttu-id="5e20e-326">如果不使用解決方案，請將其刪除。</span><span class="sxs-lookup"><span data-stu-id="5e20e-326">Please delete the solution if you are not using it.</span></span> <span data-ttu-id="5e20e-327">刪除解決方案時，將會刪除您在部署解決方案時於訂用帳戶中佈建的所有元件。</span><span class="sxs-lookup"><span data-stu-id="5e20e-327">Deleting your solution will delete all the components provisioned in your subscription when you deployed the solution.</span></span> <span data-ttu-id="5e20e-328">如果要刪除解決方案，請在解決方案範本左側面板中按一下該解決方案的名稱，然後按一下 [刪除]。</span><span class="sxs-lookup"><span data-stu-id="5e20e-328">To delete the solution click on your solution name in the left panel of the solution template and click on delete.</span></span>

## <a name="cost-estimation-tools"></a><span data-ttu-id="5e20e-329">**成本估計工具**</span><span class="sxs-lookup"><span data-stu-id="5e20e-329">**Cost Estimation Tools**</span></span>
<span data-ttu-id="5e20e-330">下列兩項工具可協助您進一步了解在您的訂用帳戶中執行能源需求預測解決方案範本所牽涉的總成本：</span><span class="sxs-lookup"><span data-stu-id="5e20e-330">The following two tools are available to help you better understand the total costs involved in running the Demand Forecasting for Energy Solution Template in your subscription:</span></span>

* [<span data-ttu-id="5e20e-331">Microsoft Azure Cost Estimator Tool (線上版)</span><span class="sxs-lookup"><span data-stu-id="5e20e-331">Microsoft Azure Cost Estimator Tool (online)</span></span>](https://azure.microsoft.com/pricing/calculator/)
* [<span data-ttu-id="5e20e-332">Microsoft Azure Cost Estimator Tool (桌面版)</span><span class="sxs-lookup"><span data-stu-id="5e20e-332">Microsoft Azure Cost Estimator Tool (desktop)</span></span>](http://www.microsoft.com/download/details.aspx?id=43376)

## <a name="acknowledgements"></a><span data-ttu-id="5e20e-333">**通知**</span><span class="sxs-lookup"><span data-stu-id="5e20e-333">**Acknowledgements**</span></span>
<span data-ttu-id="5e20e-334">本文是 Microsoft 的資料科學家 Yijing Chen 與軟體工程師 Qiu Min 所撰寫。</span><span class="sxs-lookup"><span data-stu-id="5e20e-334">This article is authored by data scientist Yijing Chen and software engineer Qiu Min at Microsoft.</span></span>
