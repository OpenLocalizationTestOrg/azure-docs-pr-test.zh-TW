---
title: "建立獨立的 Azure 自動化帳戶 | Microsoft Docs"
description: "引導您在 Azure 自動化中建立、測試和舉例使用安全性主體驗證的逐步解說教學課程。"
services: automation
documentationcenter: 
author: mgoedtel
manager: carmonm
editor: 
ms.assetid: 2f783441-15c7-4ea0-ba27-d7daa39b1dd3
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 08/18/2017
ms.author: magoedte
ms.openlocfilehash: 6eadfb0c3f91c1f2c7783d70604b45d5dc9912a3
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/18/2017
---
# <a name="create-a-standalone-azure-automation-account"></a><span data-ttu-id="8c029-103">建立獨立的 Azure 自動化帳戶</span><span class="sxs-lookup"><span data-stu-id="8c029-103">Create a standalone Azure Automation account</span></span>
<span data-ttu-id="8c029-104">如果您想要評估並了解 Azure 自動化，但不包含其他管理解決方案或與 OMS Log Analytics 整合，本主題說明如何從 Azure 入口網站建立自動化帳戶，以提供 Runbook 作業的進階監視。</span><span class="sxs-lookup"><span data-stu-id="8c029-104">This topic shows you how to create an Automation account from the Azure portal if you want to evaluate and learn Azure Automation without including the additional management solutions or integration with OMS Log Analytics to provide advanced monitoring of runbook jobs.</span></span>  <span data-ttu-id="8c029-105">您可以新增這些管理解決方案，或在未來的任何時間點與 Log Analytics 整合。</span><span class="sxs-lookup"><span data-stu-id="8c029-105">You can add those management solutions or integrate with Log Analytics at any point in the future.</span></span>  <span data-ttu-id="8c029-106">使用自動化帳戶，您可以驗證在 Azure Resource Manager 或 Azure 傳統部署中管理資源的 Runbook。</span><span class="sxs-lookup"><span data-stu-id="8c029-106">With the Automation account, you are able to authenticate runbooks managing resources in either Azure Resource Manager or Azure classic deployment.</span></span>

<span data-ttu-id="8c029-107">當您在 Azure 入口網站中建立自動化帳戶時，它會自動建立：</span><span class="sxs-lookup"><span data-stu-id="8c029-107">When you create an Automation account in the Azure portal, it automatically creates:</span></span>

* <span data-ttu-id="8c029-108">執行身分帳戶，以在 Azure Active Directory 中建立新的服務主體、憑證，以及指派參與者角色型存取控制 (RBAC)，其使用 Runbook 來管理 Resource Manager 資源。</span><span class="sxs-lookup"><span data-stu-id="8c029-108">Run As account, which creates a new service principal in Azure Active Directory, a certificate, and assigns the Contributor role-based access control (RBAC), which is used to manage Resource Manager resources using runbooks.</span></span>   
* <span data-ttu-id="8c029-109">傳統執行身分帳戶 (藉由上傳管理憑證)，其使用 Runbook 來管理傳統資源。</span><span class="sxs-lookup"><span data-stu-id="8c029-109">Classic Run As account by uploading a management certificate, which is used to manage  classic resources using runbooks.</span></span>  

<span data-ttu-id="8c029-110">這個帳戶可為您簡化程序，協助您快速開始建置和部署 Runbook 以支援您的自動化需求。</span><span class="sxs-lookup"><span data-stu-id="8c029-110">This simplifies the process for you and helps you quickly start building and deploying runbooks to support your automation needs.</span></span>  

## <a name="permissions-required-to-create-automation-account"></a><span data-ttu-id="8c029-111">建立自動化帳戶所需的權限</span><span class="sxs-lookup"><span data-stu-id="8c029-111">Permissions required to create Automation account</span></span>
<span data-ttu-id="8c029-112">若要建立或更新自動化帳戶，您必須具有下列特定權限，才能完成本主題。</span><span class="sxs-lookup"><span data-stu-id="8c029-112">To create or update an Automation account, you must have the following specific privileges and permissions required to complete this topic.</span></span>   
 
* <span data-ttu-id="8c029-113">若要建立自動化帳戶，您的 AD 使用者帳戶必須新增至具備與 Microsoft.Automation 資源的擁有者角色同等權限的角色 (如[Azure 自動化中的角色型存取控制](automation-role-based-access-control.md)一文所述)。</span><span class="sxs-lookup"><span data-stu-id="8c029-113">In order to create an Automation account, your AD user account needs to be added to a role with permissions equivalent to the Owner role for Microsoft.Automation resources as outlined in article [Role-based access control in Azure Automation](automation-role-based-access-control.md).</span></span>  
* <span data-ttu-id="8c029-114">如果應用程式註冊設定為 [是]，Azure AD 租用戶中的非系統管理使用者可以[註冊 AD 應用程式](../azure-resource-manager/resource-group-create-service-principal-portal.md#check-azure-subscription-permissions)。</span><span class="sxs-lookup"><span data-stu-id="8c029-114">If the App registrations setting is set to **Yes**, non-admin users in your Azure AD tenant can [register AD applications](../azure-resource-manager/resource-group-create-service-principal-portal.md#check-azure-subscription-permissions).</span></span>  <span data-ttu-id="8c029-115">如果應用程式註冊設定為 [否]，則執行此動作的使用者必須是 Azure AD 中的全域管理員。</span><span class="sxs-lookup"><span data-stu-id="8c029-115">If the app registrations setting is set to **No**, the user performing this action must be a global administrator in Azure AD.</span></span> 

<span data-ttu-id="8c029-116">若您在新增至訂用帳戶的全域管理員/共同管理員角色之前，並非訂用帳戶 Active Directory 執行個體的成員，系統會將您以來賓身分新增至 Active Directory。</span><span class="sxs-lookup"><span data-stu-id="8c029-116">If you are not a member of the subscription’s Active Directory instance before you are added to the global administrator/co-administrator role of the subscription, you are added to Active Directory as a guest.</span></span> <span data-ttu-id="8c029-117">在此情況下，您會在 [新增自動化帳戶] 刀鋒視窗中看到</span><span class="sxs-lookup"><span data-stu-id="8c029-117">In this situation, you receive a “You do not have permissions to create…”</span></span> <span data-ttu-id="8c029-118">「您沒有權限建立...」的警告。</span><span class="sxs-lookup"><span data-stu-id="8c029-118">warning on the **Add Automation Account** blade.</span></span> <span data-ttu-id="8c029-119">新增至全域管理員/共同管理員角色的使用者可以先從訂用帳戶的 Active Directory 執行個體中移除並重新新增，使其成為 Active Directory 中的完整使用者。</span><span class="sxs-lookup"><span data-stu-id="8c029-119">Users who were added to the global administrator/co-administrator role first can be removed from the subscription's Active Directory instance and readded to make them a full User in Active Directory.</span></span> <span data-ttu-id="8c029-120">若要確認這種情況，請從 Azure 入口網站的 [Azure Active Directory] 窗格，選取 [使用者和群組]、選取 [所有使用者]，然後在選取特定使用者之後，選取 [設定檔]。</span><span class="sxs-lookup"><span data-stu-id="8c029-120">To verify this situation, from the **Azure Active Directory** pane in the Azure portal, select **Users and groups**, select **All users** and, after you select the specific user, select **Profile**.</span></span> <span data-ttu-id="8c029-121">使用者設定檔之下 [使用者類型] 屬性的值不得等於 [來賓]。</span><span class="sxs-lookup"><span data-stu-id="8c029-121">The value of the **User type** attribute under the users profile should not equal **Guest**.</span></span>

## <a name="create-a-new-automation-account-from-the-azure-portal"></a><span data-ttu-id="8c029-122">從 Azure 入口網站建立新的自動化帳戶</span><span class="sxs-lookup"><span data-stu-id="8c029-122">Create a new Automation Account from the Azure portal</span></span>
<span data-ttu-id="8c029-123">在本節中，執行下列步驟以在 Azure 入口網站中建立 Azure 自動化帳戶。</span><span class="sxs-lookup"><span data-stu-id="8c029-123">In this section, perform the following steps to create an Azure Automation account in the Azure portal.</span></span>    

1. <span data-ttu-id="8c029-124">以訂用帳戶管理員角色成員和訂用帳戶共同管理員的帳戶登入 Azure 入口網站。</span><span class="sxs-lookup"><span data-stu-id="8c029-124">Sign in to the Azure portal with an account that is a member of the Subscription Admins role and co-administrator of the subscription.</span></span>
2. <span data-ttu-id="8c029-125">按一下 [新增] 。</span><span class="sxs-lookup"><span data-stu-id="8c029-125">Click **New**.</span></span><br><br> <span data-ttu-id="8c029-126">![在 Azure 入口網站中選取 [新增] 選項](media/automation-offering-get-started/automation-portal-martketplacestart.png)</span><span class="sxs-lookup"><span data-stu-id="8c029-126">![Select New option in Azure portal](media/automation-offering-get-started/automation-portal-martketplacestart.png)</span></span><br>  
3. <span data-ttu-id="8c029-127">搜尋**自動化**，然後在搜尋結果中選取 [自動化與控制]*。</span><span class="sxs-lookup"><span data-stu-id="8c029-127">Search for **Automation** and then in the search results select **Automation & Control***.</span></span><br><br> <span data-ttu-id="8c029-128">![在 Marketplace 中搜尋並選取自動化](media/automation-create-standalone-account/automation-marketplace-select-create-automationacct.png)</span><span class="sxs-lookup"><span data-stu-id="8c029-128">![Search and select Automation from Marketplace](media/automation-create-standalone-account/automation-marketplace-select-create-automationacct.png)</span></span><br> 
3. <span data-ttu-id="8c029-129">在 [自動化帳戶] 刀鋒視窗中，按一下 [新增]。</span><span class="sxs-lookup"><span data-stu-id="8c029-129">In the Automation Accounts blade, click **Add**.</span></span><br><br><span data-ttu-id="8c029-130">![加入自動化帳戶](media/automation-create-standalone-account/automation-create-automationacct-properties.png)</span><span class="sxs-lookup"><span data-stu-id="8c029-130">![Add Automation Account](media/automation-create-standalone-account/automation-create-automationacct-properties.png)</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="8c029-131">如果您在 [新增自動化帳戶] 刀鋒視窗中看到下列警告，這是因為您的帳戶不是訂用帳戶管理員角色的成員和訂用帳戶的共同管理員。</span><span class="sxs-lookup"><span data-stu-id="8c029-131">If you see the following warning in the **Add Automation Account** blade, it is because your account is not a member of the Subscription Admins role and co-admin of the subscription.</span></span><br><br><span data-ttu-id="8c029-132">![加入自動化帳戶警告](media/automation-create-standalone-account/create-account-without-perms.png)</span><span class="sxs-lookup"><span data-stu-id="8c029-132">![Add Automation Account Warning](media/automation-create-standalone-account/create-account-without-perms.png)</span></span>
   > 
   > 
4. <span data-ttu-id="8c029-133">在 [新增自動化帳戶] 刀鋒視窗的 [名稱] 方塊中，輸入新的自動化帳戶的名稱。</span><span class="sxs-lookup"><span data-stu-id="8c029-133">In the **Add Automation Account** blade, in the **Name** box type in a name for your new Automation account.</span></span>
5. <span data-ttu-id="8c029-134">如果您有多個訂用帳戶，請針對新的自動化帳戶、新的或現有的**資源群組**和 Azure 資料中心的**位置**指定一個訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="8c029-134">If you have more than one subscription, specify one for the new account, a new or existing **Resource group** and an Azure datacenter **Location**.</span></span>
6. <span data-ttu-id="8c029-135">確認已為 [建立 Azure 執行身分帳戶] 選項選取 [是] 這個值，然後按一下 [建立] 按鈕。</span><span class="sxs-lookup"><span data-stu-id="8c029-135">Verify the value **Yes** is selected for the **Create Azure Run As account** option, and click the **Create** button.</span></span>  
   
   > [!NOTE]
   > <span data-ttu-id="8c029-136">如果您選取選項 [否] 以選擇不要建立執行身分帳戶，則會在 [新增自動化帳戶] 刀鋒視窗中看到一則警告訊息。</span><span class="sxs-lookup"><span data-stu-id="8c029-136">If you choose to not create the Run As account by selecting the option **No**, you are  presented with a warning message in the **Add Automation Account** blade.</span></span>  <span data-ttu-id="8c029-137">雖然此帳戶建立於 Azure 入口網站中，但在傳統或 Resource Manager 訂用帳戶目錄服務內沒有對應的驗證身分識別，因此無法存取您訂用帳戶中的資源。</span><span class="sxs-lookup"><span data-stu-id="8c029-137">While the account is created in the Azure portal, it doesn't have a corresponding authentication identity within your classic or Resource Manager subscription directory service and therefore, no access to resources in your subscription.</span></span>  <span data-ttu-id="8c029-138">這會導致所有參考此帳戶的 Runbook 均無法進行驗證，也無法對這些部署模型中的資源執行工作。</span><span class="sxs-lookup"><span data-stu-id="8c029-138">This prevents any runbooks referencing this account from being able to authenticate and perform tasks against resources in those deployment models.</span></span>
   > 
   > <span data-ttu-id="8c029-139">![加入自動化帳戶警告](media/automation-create-standalone-account/create-account-decline-create-runas-msg.png)</span><span class="sxs-lookup"><span data-stu-id="8c029-139">![Add Automation Account Warning](media/automation-create-standalone-account/create-account-decline-create-runas-msg.png)</span></span><br>
   > <span data-ttu-id="8c029-140">若未建立服務主體，則不會指派參與者角色。</span><span class="sxs-lookup"><span data-stu-id="8c029-140">When the service principal is not created the Contributor role is not assigned.</span></span>
   > 

7. <span data-ttu-id="8c029-141">在 Azure 建立自動化帳戶時，您可以在功能表的 [通知]  底下追蹤進度。</span><span class="sxs-lookup"><span data-stu-id="8c029-141">While Azure creates the Automation account, you can track the progress under **Notifications** from the menu.</span></span>

### <a name="resources-included"></a><span data-ttu-id="8c029-142">包含的資源</span><span class="sxs-lookup"><span data-stu-id="8c029-142">Resources included</span></span>
<span data-ttu-id="8c029-143">順利建立自動化帳戶時，系統會自動為您建立幾項資源。</span><span class="sxs-lookup"><span data-stu-id="8c029-143">When the Automation account is successfully created, several resources are automatically created for you.</span></span>  <span data-ttu-id="8c029-144">下表摘要說明執行身分帳戶的資源。</span><span class="sxs-lookup"><span data-stu-id="8c029-144">The following table summarizes resources for the Run As account.</span></span><br>

| <span data-ttu-id="8c029-145">資源</span><span class="sxs-lookup"><span data-stu-id="8c029-145">Resource</span></span> | <span data-ttu-id="8c029-146">說明</span><span class="sxs-lookup"><span data-stu-id="8c029-146">Description</span></span> |
| --- | --- |
| <span data-ttu-id="8c029-147">AzureAutomationTutorial Runbook</span><span class="sxs-lookup"><span data-stu-id="8c029-147">AzureAutomationTutorial Runbook</span></span> |<span data-ttu-id="8c029-148">此為圖形化 Runbook 範例，示範如何使用執行身分帳戶進行驗證以及取得所有 Resource Manager 資源。</span><span class="sxs-lookup"><span data-stu-id="8c029-148">An example Graphical runbook that demonstrates how to authenticate using the Run As account and gets all the Resource Manager resources.</span></span> |
| <span data-ttu-id="8c029-149">AzureAutomationTutorialScript Runbook</span><span class="sxs-lookup"><span data-stu-id="8c029-149">AzureAutomationTutorialScript Runbook</span></span> |<span data-ttu-id="8c029-150">此為 PowerShell Runbook 範例，示範如何使用執行身分帳戶進行驗證以及取得 Resource Manager 資源。</span><span class="sxs-lookup"><span data-stu-id="8c029-150">An example PowerShell runbook that demonstrates how to authenticate using the Run As account and gets all the Resource Manager resources.</span></span> |
| <span data-ttu-id="8c029-151">AzureRunAsCertificate</span><span class="sxs-lookup"><span data-stu-id="8c029-151">AzureRunAsCertificate</span></span> |<span data-ttu-id="8c029-152">在建立自動化帳戶期間自動建立，或使用下列適用於現有帳戶的 PowerShell 指令碼建立的憑證資產。</span><span class="sxs-lookup"><span data-stu-id="8c029-152">Certificate asset automatically created during Automation account creation or using the PowerShell script below for an existing account.</span></span>  <span data-ttu-id="8c029-153">它可讓您向 Azure 進行驗證，以便從 Runbook 管理 Azure Resource Manager 資源。</span><span class="sxs-lookup"><span data-stu-id="8c029-153">It allows you to authenticate with Azure so that you can manage Azure Resource Manager resources from runbooks.</span></span>  <span data-ttu-id="8c029-154">此憑證有一年的有效期。</span><span class="sxs-lookup"><span data-stu-id="8c029-154">This certificate has a one-year lifespan.</span></span> |
| <span data-ttu-id="8c029-155">AzureRunAsConnection</span><span class="sxs-lookup"><span data-stu-id="8c029-155">AzureRunAsConnection</span></span> |<span data-ttu-id="8c029-156">在建立自動化帳戶期間自動建立，或使用下列適用於現有帳戶的 PowerShell 指令碼建立的連線資產。</span><span class="sxs-lookup"><span data-stu-id="8c029-156">Connection asset automatically created during Automation account creation or using the PowerShell script below for an existing account.</span></span> |

<span data-ttu-id="8c029-157">下表摘要說明傳統執行身分帳戶的資源。</span><span class="sxs-lookup"><span data-stu-id="8c029-157">The following table summarizes resources for the Classic Run As account.</span></span><br>

| <span data-ttu-id="8c029-158">資源</span><span class="sxs-lookup"><span data-stu-id="8c029-158">Resource</span></span> | <span data-ttu-id="8c029-159">說明</span><span class="sxs-lookup"><span data-stu-id="8c029-159">Description</span></span> |
| --- | --- |
| <span data-ttu-id="8c029-160">AzureClassicAutomationTutorial Runbook</span><span class="sxs-lookup"><span data-stu-id="8c029-160">AzureClassicAutomationTutorial Runbook</span></span> |<span data-ttu-id="8c029-161">此為圖形化 Runbook 範例，可使用傳統執行身分帳戶 (憑證) 取得訂用帳戶中的所有傳統 VM，然後輸出 VM 名稱和狀態。</span><span class="sxs-lookup"><span data-stu-id="8c029-161">An example Graphical runbook, which gets all the Classic VMs in a subscription using the Classic Run As Account (certificate) and then outputs the VM name and status.</span></span> |
| <span data-ttu-id="8c029-162">AzureClassicAutomationTutorial 指令碼 Runbook</span><span class="sxs-lookup"><span data-stu-id="8c029-162">AzureClassicAutomationTutorial Script Runbook</span></span> |<span data-ttu-id="8c029-163">此為 PowerShell Runbook 範例，可使用傳統執行身分帳戶 (憑證) 取得訂用帳戶中的所有傳統 VM，然後輸出 VM 名稱和狀態。</span><span class="sxs-lookup"><span data-stu-id="8c029-163">An example PowerShell runbook, which gets all the Classic VMs in a subscription using the Classic Run As Account (certificate) and then outputs the VM name and status.</span></span> |
| <span data-ttu-id="8c029-164">AzureClassicRunAsCertificate</span><span class="sxs-lookup"><span data-stu-id="8c029-164">AzureClassicRunAsCertificate</span></span> |<span data-ttu-id="8c029-165">自動建立的憑證資產，其用來向 Azure 進行驗證，以便從 Runbook 管理 Azure 傳統資源。</span><span class="sxs-lookup"><span data-stu-id="8c029-165">Certificate asset automatically created that is used to authenticate with Azure so that you can manage Azure classic resources from runbooks.</span></span>  <span data-ttu-id="8c029-166">此憑證有一年的有效期。</span><span class="sxs-lookup"><span data-stu-id="8c029-166">This certificate has a one-year lifespan.</span></span> |
| <span data-ttu-id="8c029-167">AzureClassicRunAsConnection</span><span class="sxs-lookup"><span data-stu-id="8c029-167">AzureClassicRunAsConnection</span></span> |<span data-ttu-id="8c029-168">自動建立的連線資產，其用來向 Azure 進行驗證，以便從 Runbook 管理 Azure 傳統資源。</span><span class="sxs-lookup"><span data-stu-id="8c029-168">Connection asset automatically created that is used to authenticate with Azure so that you can manage Azure classic resources from runbooks.</span></span> |


## <a name="next-steps"></a><span data-ttu-id="8c029-169">後續步驟</span><span class="sxs-lookup"><span data-stu-id="8c029-169">Next steps</span></span>
* <span data-ttu-id="8c029-170">若要深入了解圖形化編寫，請參閱 [Azure 自動化中的圖形化編寫](automation-graphical-authoring-intro.md)。</span><span class="sxs-lookup"><span data-stu-id="8c029-170">To learn more about Graphical Authoring, see [Graphical authoring in Azure Automation](automation-graphical-authoring-intro.md).</span></span>
* <span data-ttu-id="8c029-171">若要開始使用 PowerShell Runbook，請參閱[我的第一個 PowerShell Runbook](automation-first-runbook-textual-powershell.md)。</span><span class="sxs-lookup"><span data-stu-id="8c029-171">To get started with PowerShell runbooks, see [My first PowerShell runbook](automation-first-runbook-textual-powershell.md).</span></span>
* <span data-ttu-id="8c029-172">若要開始使用 PowerShell 工作流程 Runbook，請參閱 [我的第一個 PowerShell 工作流程 Runbook](automation-first-runbook-textual.md)。</span><span class="sxs-lookup"><span data-stu-id="8c029-172">To get started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md).</span></span>