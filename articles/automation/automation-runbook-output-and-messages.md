---
title: "Azure 自動化中的 Runbook 輸出與訊息 | Microsoft Docs"
description: "描述如何在 Azure 自動化中建立及擷取 Runbook 的輸出與錯誤訊息。"
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 13a414f5-0e2c-4be2-9558-a3e3ec84b6b2
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 11/11/2016
ms.author: magoedte;bwren
ms.openlocfilehash: 6f01f97e38aa271034741c8a5e2f8057ab61fcd7
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/11/2017
---
# <a name="runbook-output-and-messages-in-azure-automation"></a><span data-ttu-id="c281b-103">Azure 自動化中的 Runbook 輸出與訊息</span><span class="sxs-lookup"><span data-stu-id="c281b-103">Runbook output and messages in Azure Automation</span></span>
<span data-ttu-id="c281b-104">大部分的 Azure 自動化 Runbook 會有某種形式的輸出，例如向使用者提供錯誤訊息，或供其他工作流程使用的複雜物件。</span><span class="sxs-lookup"><span data-stu-id="c281b-104">Most Azure Automation runbooks will have some form of output such as an error message to the user or a complex object intended to be consumed by another workflow.</span></span> <span data-ttu-id="c281b-105">Windows PowerShell 提供 [多個資料流](http://blogs.technet.com/heyscriptingguy/archive/2014/03/30/understanding-streams-redirection-and-write-host-in-powershell.aspx) 從指令碼或工作流程傳送輸出。</span><span class="sxs-lookup"><span data-stu-id="c281b-105">Windows PowerShell provides [multiple streams](http://blogs.technet.com/heyscriptingguy/archive/2014/03/30/understanding-streams-redirection-and-write-host-in-powershell.aspx) to send output from a script or workflow.</span></span> <span data-ttu-id="c281b-106">Azure 自動化會以不同的方式使用這些資料流，而在您建立 Runbook 時，應遵循使用每個資料流的最佳作法。</span><span class="sxs-lookup"><span data-stu-id="c281b-106">Azure Automation works with each of these streams differently, and you should follow best practices for how to use each when you are creating a runbook.</span></span>

<span data-ttu-id="c281b-107">下表提供每個資料流的簡短描述，以及它們在 Azure 管理入口網站中，執行已發佈的 Runbook 和 [測試 Runbook](automation-testing-runbook.md)時的行為。</span><span class="sxs-lookup"><span data-stu-id="c281b-107">The following table provides a brief description of each of the streams and their behavior in the Azure Management Portal both when running a published runbook and when [testing a runbook](automation-testing-runbook.md).</span></span> <span data-ttu-id="c281b-108">後續各節將提供每個資料流的進一步詳細資料。</span><span class="sxs-lookup"><span data-stu-id="c281b-108">Further details on each stream are provided in subsequent sections.</span></span>

| <span data-ttu-id="c281b-109">Stream</span><span class="sxs-lookup"><span data-stu-id="c281b-109">Stream</span></span> | <span data-ttu-id="c281b-110">說明</span><span class="sxs-lookup"><span data-stu-id="c281b-110">Description</span></span> | <span data-ttu-id="c281b-111">Published</span><span class="sxs-lookup"><span data-stu-id="c281b-111">Published</span></span> | <span data-ttu-id="c281b-112">測試</span><span class="sxs-lookup"><span data-stu-id="c281b-112">Test</span></span> |
|:--- |:--- |:--- |:--- |
| <span data-ttu-id="c281b-113">輸出</span><span class="sxs-lookup"><span data-stu-id="c281b-113">Output</span></span> |<span data-ttu-id="c281b-114">要供其他 Runbook 使用的物件。</span><span class="sxs-lookup"><span data-stu-id="c281b-114">Objects intended to be consumed by other runbooks.</span></span> |<span data-ttu-id="c281b-115">寫入工作歷程記錄。</span><span class="sxs-lookup"><span data-stu-id="c281b-115">Written to the job history.</span></span> |<span data-ttu-id="c281b-116">在 [測試輸出] 窗格中顯示。</span><span class="sxs-lookup"><span data-stu-id="c281b-116">Displayed in the Test Output Pane.</span></span> |
| <span data-ttu-id="c281b-117">警告</span><span class="sxs-lookup"><span data-stu-id="c281b-117">Warning</span></span> |<span data-ttu-id="c281b-118">適用於使用者的警告訊息。</span><span class="sxs-lookup"><span data-stu-id="c281b-118">Warning message intended for the user.</span></span> |<span data-ttu-id="c281b-119">寫入工作歷程記錄。</span><span class="sxs-lookup"><span data-stu-id="c281b-119">Written to the job history.</span></span> |<span data-ttu-id="c281b-120">在 [測試輸出] 窗格中顯示。</span><span class="sxs-lookup"><span data-stu-id="c281b-120">Displayed in the Test Output Pane.</span></span> |
| <span data-ttu-id="c281b-121">錯誤</span><span class="sxs-lookup"><span data-stu-id="c281b-121">Error</span></span> |<span data-ttu-id="c281b-122">適用於使用者的錯誤訊息。</span><span class="sxs-lookup"><span data-stu-id="c281b-122">Error message intended for the user.</span></span> <span data-ttu-id="c281b-123">與例外狀況不同，Runbook 預設會在出現錯誤訊息後繼續執行。</span><span class="sxs-lookup"><span data-stu-id="c281b-123">Unlike an exception, the runbook continues after an error message by default.</span></span> |<span data-ttu-id="c281b-124">寫入工作歷程記錄。</span><span class="sxs-lookup"><span data-stu-id="c281b-124">Written to the job history.</span></span> |<span data-ttu-id="c281b-125">在 [測試輸出] 窗格中顯示。</span><span class="sxs-lookup"><span data-stu-id="c281b-125">Displayed in the Test Output Pane.</span></span> |
| <span data-ttu-id="c281b-126">詳細資訊</span><span class="sxs-lookup"><span data-stu-id="c281b-126">Verbose</span></span> |<span data-ttu-id="c281b-127">提供一般或偵錯資訊的訊息。</span><span class="sxs-lookup"><span data-stu-id="c281b-127">Messages providing general or debugging information.</span></span> |<span data-ttu-id="c281b-128">只有為 Runbook 開啟詳細記錄時才會寫入工作歷程記錄。</span><span class="sxs-lookup"><span data-stu-id="c281b-128">Written to job history only if verbose logging is turned on for the runbook.</span></span> |<span data-ttu-id="c281b-129">只有在 Runbook 中將 $VerbosePreference 設為 Continue 時，才會在 [測試輸出] 窗格中顯示。</span><span class="sxs-lookup"><span data-stu-id="c281b-129">Displayed in the Test Output pane only if $VerbosePreference is set to Continue in the runbook.</span></span> |
| <span data-ttu-id="c281b-130">進度</span><span class="sxs-lookup"><span data-stu-id="c281b-130">Progress</span></span> |<span data-ttu-id="c281b-131">在 Runbook 中的每個活動之前與之後自動產生記錄。</span><span class="sxs-lookup"><span data-stu-id="c281b-131">Records automatically generated before and after each activity in the runbook.</span></span> <span data-ttu-id="c281b-132">Runbook 不應嘗試建立它自己的進度記錄，因為它們是供互動式使用者使用。</span><span class="sxs-lookup"><span data-stu-id="c281b-132">The runbook should not attempt to create its own progress records since they are intended for an interactive user.</span></span> |<span data-ttu-id="c281b-133">只有為 Runbook 開啟進度記錄時才寫入工作歷程記錄。</span><span class="sxs-lookup"><span data-stu-id="c281b-133">Written to job history only if progress logging is turned on for the runbook.</span></span> |<span data-ttu-id="c281b-134">不會在 [測試輸出] 窗格中顯示。</span><span class="sxs-lookup"><span data-stu-id="c281b-134">Not displayed in the Test Output Pane.</span></span> |
| <span data-ttu-id="c281b-135">偵錯</span><span class="sxs-lookup"><span data-stu-id="c281b-135">Debug</span></span> |<span data-ttu-id="c281b-136">適用於互動式使用者的訊息。</span><span class="sxs-lookup"><span data-stu-id="c281b-136">Messages intended for an interactive user.</span></span> <span data-ttu-id="c281b-137">不應在 Runbook 中使用。</span><span class="sxs-lookup"><span data-stu-id="c281b-137">Should not be used in runbooks.</span></span> |<span data-ttu-id="c281b-138">不會寫入工作歷程記錄。</span><span class="sxs-lookup"><span data-stu-id="c281b-138">Not written to job history.</span></span> |<span data-ttu-id="c281b-139">不會寫入 [測試輸出] 窗格。</span><span class="sxs-lookup"><span data-stu-id="c281b-139">Not written to Test Output Pane.</span></span> |

## <a name="output-stream"></a><span data-ttu-id="c281b-140">輸出資料流</span><span class="sxs-lookup"><span data-stu-id="c281b-140">Output stream</span></span>
<span data-ttu-id="c281b-141">「輸出資料流」適用於指令碼或工作流程正確執行時所建立之物件的輸出。</span><span class="sxs-lookup"><span data-stu-id="c281b-141">The Output stream is intended for output of objects created by a script or workflow when it runs correctly.</span></span> <span data-ttu-id="c281b-142">在 Azure 自動化中，此資料流主要用於由 [呼叫目前 Runbook 的父 Runbook](automation-child-runbooks.md)所使用的物件。</span><span class="sxs-lookup"><span data-stu-id="c281b-142">In Azure Automation, this stream is primarily used for objects intended to be consumed by [parent runbooks that call the current runbook](automation-child-runbooks.md).</span></span> <span data-ttu-id="c281b-143">當您從父 Runbook [呼叫 Runbook 內嵌](automation-child-runbooks.md#invoking-a-child-runbook-using-inline-execution)時，它會將輸出串流的資料傳回給父代。</span><span class="sxs-lookup"><span data-stu-id="c281b-143">When you [call a runbook inline](automation-child-runbooks.md#invoking-a-child-runbook-using-inline-execution) from a parent runbook, it returns data from the output stream to the parent.</span></span> <span data-ttu-id="c281b-144">如果您知道 Runbook 絕對不會被另一個 Runbook 呼叫時，您應該只使用輸出資料流將一般資訊傳達給使用者。</span><span class="sxs-lookup"><span data-stu-id="c281b-144">You should only use the output stream to communicate general information back to the user if you know the runbook will never be called by another runbook.</span></span> <span data-ttu-id="c281b-145">但最佳的作法一般是使用 [詳細資訊資料流](#Verbose) 將一般資訊傳達給使用者。</span><span class="sxs-lookup"><span data-stu-id="c281b-145">As a best practice, however, you should typically use the [Verbose Stream](#Verbose) to communicate general information to the user.</span></span>

<span data-ttu-id="c281b-146">您可以使用 [Write-Output](http://technet.microsoft.com/library/hh849921.aspx) ，或將物件放在 Runbook 中它自己所屬的那一行，來將資料寫入到輸出資料流。</span><span class="sxs-lookup"><span data-stu-id="c281b-146">You can write data to the output stream using [Write-Output](http://technet.microsoft.com/library/hh849921.aspx) or by putting the object on its own line in the runbook.</span></span>

    #The following lines both write an object to the output stream.
    Write-Output –InputObject $object
    $object

### <a name="output-from-a-function"></a><span data-ttu-id="c281b-147">從函式輸出</span><span class="sxs-lookup"><span data-stu-id="c281b-147">Output from a function</span></span>
<span data-ttu-id="c281b-148">當您在您的 Runbook 所包括之函式的輸出資料流中寫入時，會將輸出傳遞回 Runbook。</span><span class="sxs-lookup"><span data-stu-id="c281b-148">When you write to the output stream in a function that is included in your runbook, the output is passed back to the runbook.</span></span> <span data-ttu-id="c281b-149">如果 Runbook 將該輸出指派給變數，則不會將它寫入至輸出資料流。</span><span class="sxs-lookup"><span data-stu-id="c281b-149">If the runbook assigns that output to a variable, then it is not written to the output stream.</span></span> <span data-ttu-id="c281b-150">若從函式中寫入至任何其他資料流，將會寫入至 Runbook 的相對應資料流。</span><span class="sxs-lookup"><span data-stu-id="c281b-150">Writing to any other streams from within the function will write to the corresponding stream for the runbook.</span></span>

<span data-ttu-id="c281b-151">請考慮以下的 Runbook 範例。</span><span class="sxs-lookup"><span data-stu-id="c281b-151">Consider the following sample runbook.</span></span>

    Workflow Test-Runbook
    {
        Write-Verbose "Verbose outside of function" -Verbose
        Write-Output "Output outside of function"
        $functionOutput = Test-Function
        $functionOutput

    Function Test-Function
     {
        Write-Verbose "Verbose inside of function" -Verbose
        Write-Output "Output inside of function"
      }
    }


<span data-ttu-id="c281b-152">Runbook 工作的輸出資料流會是：</span><span class="sxs-lookup"><span data-stu-id="c281b-152">The output stream for the runbook job would be:</span></span>

    Output inside of function
    Output outside of function

<span data-ttu-id="c281b-153">Runbook 工作的詳細資訊資料流會是：</span><span class="sxs-lookup"><span data-stu-id="c281b-153">The verbose stream for the runbook job would be:</span></span>

    Verbose outside of function
    Verbose inside of function

<span data-ttu-id="c281b-154">在您發佈 Runbook 之後，並在加以啟動之前，您還必須在 Runbook 設定中開啟詳細資訊記錄，以取得詳細資訊資料流的輸出。</span><span class="sxs-lookup"><span data-stu-id="c281b-154">Once you have published the runbook and before you start it, you must also turn on Verbose logging in the runbook settings in order to get the Verbose stream output.</span></span>

### <a name="declaring-output-data-type"></a><span data-ttu-id="c281b-155">宣告輸出資料類型</span><span class="sxs-lookup"><span data-stu-id="c281b-155">Declaring output data type</span></span>
<span data-ttu-id="c281b-156">工作流程可使用 [OutputType](http://technet.microsoft.com/library/hh847785.aspx)屬性指定其輸出的資料類型。</span><span class="sxs-lookup"><span data-stu-id="c281b-156">A workflow can specify the data type of its output using the [OutputType attribute](http://technet.microsoft.com/library/hh847785.aspx).</span></span> <span data-ttu-id="c281b-157">這個屬性在執行階段沒有任何作用，但它會在設計時向 Runbook 作者提供 Runbook 之預期輸出的指示。</span><span class="sxs-lookup"><span data-stu-id="c281b-157">This attribute has no effect during runtime, but it provides an indication to the runbook author at design time of the expected output of the runbook.</span></span> <span data-ttu-id="c281b-158">隨著 Runbook 的工具組持續發展，在設計時宣告輸出資料類型的重要性也隨之提升。</span><span class="sxs-lookup"><span data-stu-id="c281b-158">As the toolset for runbooks continues to evolve, the importance of declaring output data types at design time will increase in importance.</span></span> <span data-ttu-id="c281b-159">如此一來，在任何您建立的 Runbook 中包含此宣告是最佳作法。</span><span class="sxs-lookup"><span data-stu-id="c281b-159">As a result, it is a best practice to include this declaration in any runbooks that you create.</span></span>

<span data-ttu-id="c281b-160">以下是範例輸出類型清單：</span><span class="sxs-lookup"><span data-stu-id="c281b-160">Here is a list of example output types:</span></span>

* <span data-ttu-id="c281b-161">System.String</span><span class="sxs-lookup"><span data-stu-id="c281b-161">System.String</span></span>
* <span data-ttu-id="c281b-162">System.Int32</span><span class="sxs-lookup"><span data-stu-id="c281b-162">System.Int32</span></span>
* <span data-ttu-id="c281b-163">System.Collections.Hashtable</span><span class="sxs-lookup"><span data-stu-id="c281b-163">System.Collections.Hashtable</span></span>
* <span data-ttu-id="c281b-164">Microsoft.Azure.Commands.Compute.Models.PSVirtualMachine</span><span class="sxs-lookup"><span data-stu-id="c281b-164">Microsoft.Azure.Commands.Compute.Models.PSVirtualMachine</span></span>

<span data-ttu-id="c281b-165">以下範例 Runbook 會輸出字串物件，並包含其輸出類型的宣告。</span><span class="sxs-lookup"><span data-stu-id="c281b-165">The following sample runbook outputs a string object and includes a declaration of its output type.</span></span> <span data-ttu-id="c281b-166">如果您的 Runbook 會輸出特定類型的陣列，那麼您仍應指定類型而非陣列類型。</span><span class="sxs-lookup"><span data-stu-id="c281b-166">If your runbook outputs an array of a certain type, then you should still specify the type as opposed to an array of the type.</span></span>

    Workflow Test-Runbook
    {
       [OutputType([string])]

       $output = "This is some string output."
       Write-Output $output
    }

<span data-ttu-id="c281b-167">若要在圖形化或圖形化 PowerShell 工作流程 Runbook 中宣告輸出類型，您可以選取 [輸入及輸出] 功能表選項，然後輸入輸出類型的名稱。</span><span class="sxs-lookup"><span data-stu-id="c281b-167">To declare an output type in Grapical or Graphical PowerShell Workflow runbooks, you can select the **Input and Output** menu option and type in the name of the output type.</span></span>  <span data-ttu-id="c281b-168">我們建議您使用完整的 .NET 類別名稱，以便在從父 Runbook 參考此名稱時可以輕鬆地找到。</span><span class="sxs-lookup"><span data-stu-id="c281b-168">We recommend you use the full .NET class name to make it easily identifiable when referencing it from a parent runbook.</span></span>  <span data-ttu-id="c281b-169">這會將該類別的所有屬性公開至 Runbook 中的資料匯流排，並在將其用於條件式邏輯、記錄及參考以做為 Runbook 中其他活動的值時提供很大的彈性。</span><span class="sxs-lookup"><span data-stu-id="c281b-169">This exposes all the properties of that class to the data bus in the runbook and provides a lot of flexibility when using them for conditional logic, logging, and referencing as values for other activities in the runbook.</span></span><br> <span data-ttu-id="c281b-170">![Runbook 輸入和輸出選項](media/automation-runbook-output-and-messages/runbook-menu-input-and-output-option.png)</span><span class="sxs-lookup"><span data-stu-id="c281b-170">![Runbook Input and Output option](media/automation-runbook-output-and-messages/runbook-menu-input-and-output-option.png)</span></span>

<span data-ttu-id="c281b-171">在下列範例中，我們用兩個圖形化 Runbook 來示範這項功能。</span><span class="sxs-lookup"><span data-stu-id="c281b-171">In the following example, we have two graphical runbooks to demonstrate this feature.</span></span>  <span data-ttu-id="c281b-172">如果我們套用模組化 Runbook 設計模型，我們會將一個 Runbook 做為「驗證 Runbook 範本」  ，以使用執行身分帳戶來管理使用 Azure 進行的驗證。</span><span class="sxs-lookup"><span data-stu-id="c281b-172">If we apply the modular runbook design model, we have one runbook which serves as the *Authentication Runbook template* managing authentication with Azure using the Run As account.</span></span>  <span data-ttu-id="c281b-173">我們的第二個 Runbook 通常會執行核心邏輯以自動執行指定的案例，而在此情況下，此 Runbook 將會執行「驗證 Runbook 範本」，並將結果顯示於 [測試] 輸出窗格中。</span><span class="sxs-lookup"><span data-stu-id="c281b-173">Our second runbook, which would normally perform the core logic to automate a given scenario, in this case is going to execute the *Authentication Runbook template* and display the results to your **Test** output pane.</span></span>  <span data-ttu-id="c281b-174">在正常情況下，我們會讓此 Runbook 針對運用子 Runbook 輸出的資源執行某些工作。</span><span class="sxs-lookup"><span data-stu-id="c281b-174">Under normal circumstances, we would have this runbook do something against a resource leveraging the output from the child runbook.</span></span>    

<span data-ttu-id="c281b-175">以下是 **AuthenticateTo-Azure** Runbook 的基本邏輯。</span><span class="sxs-lookup"><span data-stu-id="c281b-175">Here is the basic logic of the **AuthenticateTo-Azure** runbook.</span></span><br> <span data-ttu-id="c281b-176">![驗證 Runbook 範本範例](media/automation-runbook-output-and-messages/runbook-authentication-template.png)時的行為。</span><span class="sxs-lookup"><span data-stu-id="c281b-176">![Authenticate Runbook Template Example](media/automation-runbook-output-and-messages/runbook-authentication-template.png).</span></span>  

<span data-ttu-id="c281b-177">它包含輸出類型 Microsoft.Azure.Commands.Profile.Models.PSAzureContext，其將會傳回驗證設定檔屬性。</span><span class="sxs-lookup"><span data-stu-id="c281b-177">It includes the output type *Microsoft.Azure.Commands.Profile.Models.PSAzureContext*, which will return the authentication profile properties.</span></span><br> <span data-ttu-id="c281b-178">![Runbook 輸出類型範例](media/automation-runbook-output-and-messages/runbook-input-and-output-add-blade.png)</span><span class="sxs-lookup"><span data-stu-id="c281b-178">![Runbook Output Type Example](media/automation-runbook-output-and-messages/runbook-input-and-output-add-blade.png)</span></span> 

<span data-ttu-id="c281b-179">雖然此 Runbook 非常簡單，但這裡有一個要對外呼叫的組態項目。</span><span class="sxs-lookup"><span data-stu-id="c281b-179">While this runbook is very straight forward, there is one configuration item to call out here.</span></span>  <span data-ttu-id="c281b-180">最後一個活動正在執行 **Write-Output** Cmdlet，並使用該 Cmdlet 所需之 **Inputobject** 參數的 PowerShell 運算式，將設定檔資料寫入 $_ 變數。</span><span class="sxs-lookup"><span data-stu-id="c281b-180">The last activity is executing the **Write-Output** cmdlet and writes the profile data to a $_ variable using a PowerShell expression for the **Inputobject** parameter, which is required for that cmdlet.</span></span>  

<span data-ttu-id="c281b-181">對於此範例中名為 Test-ChildOutputType 的第二個 Runbook，我們只有兩個活動。</span><span class="sxs-lookup"><span data-stu-id="c281b-181">For the second runbook in this example, named *Test-ChildOutputType*, we simply have two activities.</span></span><br> <span data-ttu-id="c281b-182">![範例子輸出類型 Runbook](media/automation-runbook-output-and-messages/runbook-display-authentication-results-example.png)</span><span class="sxs-lookup"><span data-stu-id="c281b-182">![Example Child Output Type Runbook](media/automation-runbook-output-and-messages/runbook-display-authentication-results-example.png)</span></span> 

<span data-ttu-id="c281b-183">第一個活動會呼叫 **AuthenticateTo-Azure** Runbook，第二個活動則會使用**活動輸出**的**資料來源**和**欄位路徑**值 **Context.Subscription.SubscriptionName** 來執行 **Write-Verbose** Cmdlet，這會指定 **AuthenticateTo-Azure** Runbook 的內容輸出。</span><span class="sxs-lookup"><span data-stu-id="c281b-183">The first activity calls the **AuthenticateTo-Azure** runbook and the second activity is running the **Write-Verbose** cmdlet with the **Data source** of **Activity output** and the value for **Field path** is **Context.Subscription.SubscriptionName**, which is specifying the context output from the **AuthenticateTo-Azure** runbook.</span></span><br> <span data-ttu-id="c281b-184">![Write-Verbose Cmdlet 參數的資料來源](media/automation-runbook-output-and-messages/runbook-write-verbose-parameters-config.png)</span><span class="sxs-lookup"><span data-stu-id="c281b-184">![Write-Verbose cmdlet Parameter Data Source](media/automation-runbook-output-and-messages/runbook-write-verbose-parameters-config.png)</span></span>    

<span data-ttu-id="c281b-185">產生的輸出是訂用帳戶的名稱。</span><span class="sxs-lookup"><span data-stu-id="c281b-185">The resulting output is the name of the subscription.</span></span><br> ![Test-ChildOutputType Runbook 結果](media/automation-runbook-output-and-messages/runbook-test-childoutputtype-results.png)

<span data-ttu-id="c281b-187">關於輸出類型控制項行為的一個附註。</span><span class="sxs-lookup"><span data-stu-id="c281b-187">One note about the behavior of the Output Type control.</span></span>  <span data-ttu-id="c281b-188">當您在 [輸入與輸出屬性] 刀鋒視窗的 [輸出類型] 欄位中輸入值時，您必須在輸入之後按一下控制項以外的地方，讓控制項能夠辨識您的輸入。</span><span class="sxs-lookup"><span data-stu-id="c281b-188">When you type a value in the Output Type field on the Input and Output properties blade, you have to click outside of the control  after you type it, in order for your entry to be recognized by the control.</span></span>  

## <a name="message-streams"></a><span data-ttu-id="c281b-189">訊息資料流</span><span class="sxs-lookup"><span data-stu-id="c281b-189">Message streams</span></span>
<span data-ttu-id="c281b-190">與輸出資料流不同，訊息資料流的用意在於將資訊傳達給使用者。</span><span class="sxs-lookup"><span data-stu-id="c281b-190">Unlike the output stream, message streams are intended to communicate information to the user.</span></span> <span data-ttu-id="c281b-191">有多個訊息資料流適用於不同類型的資訊，且 Azure 自動化以不同的方式處理每個資料流。</span><span class="sxs-lookup"><span data-stu-id="c281b-191">There are multiple message streams for different kinds of information, and each is handled differently by Azure Automation.</span></span>

### <a name="warning-and-error-streams"></a><span data-ttu-id="c281b-192">警告和錯誤資料流</span><span class="sxs-lookup"><span data-stu-id="c281b-192">Warning and error streams</span></span>
<span data-ttu-id="c281b-193">警告和錯誤資料流適用於記錄在 Runbook 中發生的問題。</span><span class="sxs-lookup"><span data-stu-id="c281b-193">The Warning and Error streams are intended to log problems that occur in a runbook.</span></span> <span data-ttu-id="c281b-194">當 Runbook 執行時，會將它們寫入工作歷程記錄，並且會在 Runbook 測試時包含在 Azure 管理入口網站中的 [測試輸出] 窗格中。</span><span class="sxs-lookup"><span data-stu-id="c281b-194">They are written to the job history when a runbook is executed, and are included in the Test Output Pane in the Azure Management Portal when a runbook is tested.</span></span> <span data-ttu-id="c281b-195">根據預設，Runbook 將在出現警告或錯誤後繼續執行。</span><span class="sxs-lookup"><span data-stu-id="c281b-195">By default, the runbook will continue executing after a warning or error.</span></span> <span data-ttu-id="c281b-196">建立訊息之前，您可以藉由在 Runbook 中設定 [喜好設定變數](#PreferenceVariables) ，指定 Runbook 應該在警告或錯誤時暫停。</span><span class="sxs-lookup"><span data-stu-id="c281b-196">You can specify that the runbook should be suspended on a warning or error by setting a [preference variable](#PreferenceVariables) in the runbook before creating the message.</span></span> <span data-ttu-id="c281b-197">例如，若要讓 Runbook 在發生錯誤時暫停 (就像發生例外狀況時一樣)，請將 **$ErrorActionPreference** 設定為 Stop。</span><span class="sxs-lookup"><span data-stu-id="c281b-197">For example, to cause a runbook to suspend on an error as it would an exception, set **$ErrorActionPreference** to Stop.</span></span>

<span data-ttu-id="c281b-198">使用 [Write-Warning](https://technet.microsoft.com/library/hh849931.aspx) 或 [Write-Error](http://technet.microsoft.com/library/hh849962.aspx) Cmdlet 來建立警告或錯誤訊息。</span><span class="sxs-lookup"><span data-stu-id="c281b-198">Create a warning or error message using the [Write-Warning](https://technet.microsoft.com/library/hh849931.aspx) or [Write-Error](http://technet.microsoft.com/library/hh849962.aspx) cmdlet.</span></span> <span data-ttu-id="c281b-199">活動也可能會被寫入這些資料流。</span><span class="sxs-lookup"><span data-stu-id="c281b-199">Activities may also write to these streams.</span></span>

    #The following lines create a warning message and then an error message that will suspend the runbook.

    $ErrorActionPreference = "Stop"
    Write-Warning –Message "This is a warning message."
    Write-Error –Message "This is an error message that will stop the runbook because of the preference variable."

### <a name="verbose-stream"></a><span data-ttu-id="c281b-200">詳細資訊資料流</span><span class="sxs-lookup"><span data-stu-id="c281b-200">Verbose stream</span></span>
<span data-ttu-id="c281b-201">詳細資訊訊息流是 Runbook 作業的一般相關資訊。</span><span class="sxs-lookup"><span data-stu-id="c281b-201">The Verbose message stream is for general information about the runbook operation.</span></span> <span data-ttu-id="c281b-202">由於 [偵錯資料流](#Debug) 無法在 Runbook 中使用，因此詳細資訊資料流應用於偵錯資訊。</span><span class="sxs-lookup"><span data-stu-id="c281b-202">Since the [Debug Stream](#Debug) is not available in a runbook, verbose messages should be used for debug information.</span></span> <span data-ttu-id="c281b-203">根據預設，已發佈 Runbook 的詳細訊息不會儲存在工作歷程記錄中。</span><span class="sxs-lookup"><span data-stu-id="c281b-203">By default, verbose messages from published runbooks will not be stored in the job history.</span></span> <span data-ttu-id="c281b-204">若要儲存詳細訊息，請在 Azure 管理入口網站中 Runbook 的 [設定] 索引標籤上，將 已發佈的 Runbook 設為 [記錄詳細記錄]。</span><span class="sxs-lookup"><span data-stu-id="c281b-204">To store verbose messages, configure published runbooks to Log Verbose Records on the Configure tab of the runbook in the Azure Management Portal.</span></span> <span data-ttu-id="c281b-205">在大部分情況下，您應該保留預設設定，亦即基於效能考量，不記錄 Runbook 的詳細資訊記錄。</span><span class="sxs-lookup"><span data-stu-id="c281b-205">In most cases, you should keep the default setting of not logging verbose records for a runbook for performance reasons.</span></span> <span data-ttu-id="c281b-206">只有在疑難排解或偵錯 Runbook 時才開啟此選項。</span><span class="sxs-lookup"><span data-stu-id="c281b-206">Turn on this option only to troubleshoot or debug a runbook.</span></span>

<span data-ttu-id="c281b-207">[測試 Runbook](automation-testing-runbook.md)時，即使 Runbook 設為記錄詳細記錄，也不會顯示詳細訊息。</span><span class="sxs-lookup"><span data-stu-id="c281b-207">When [testing a runbook](automation-testing-runbook.md), verbose messages are not displayed even if the runbook is configured to log verbose records.</span></span> <span data-ttu-id="c281b-208">若要在 [測試 Runbook](automation-testing-runbook.md)時顯示詳細訊息，您必須將 $VerbosePreference 設為 Continue。</span><span class="sxs-lookup"><span data-stu-id="c281b-208">To display verbose messages while [testing a runbook](automation-testing-runbook.md), you must set the $VerbosePreference variable to Continue.</span></span> <span data-ttu-id="c281b-209">設定該變數後，詳細訊息會顯示在 Azure 入口網站的 [測試輸出] 窗格中。</span><span class="sxs-lookup"><span data-stu-id="c281b-209">With that variable set, verbose messages will be displayed in the Test Output Pane of the Azure portal.</span></span>

<span data-ttu-id="c281b-210">使用 [Write-Verbose](http://technet.microsoft.com/library/hh849951.aspx) Cmdlet 建立詳細訊息。</span><span class="sxs-lookup"><span data-stu-id="c281b-210">Create a verbose message using the [Write-Verbose](http://technet.microsoft.com/library/hh849951.aspx) cmdlet.</span></span>

    #The following line creates a verbose message.

    Write-Verbose –Message "This is a verbose message."

### <a name="debug-stream"></a><span data-ttu-id="c281b-211">偵錯資料流</span><span class="sxs-lookup"><span data-stu-id="c281b-211">Debug stream</span></span>
<span data-ttu-id="c281b-212">偵錯資料流適用於互動式使用者，且不應用於 Runbook。</span><span class="sxs-lookup"><span data-stu-id="c281b-212">The Debug stream is intended for use with an interactive user and should not be used in runbooks.</span></span>

## <a name="progress-records"></a><span data-ttu-id="c281b-213">進度記錄</span><span class="sxs-lookup"><span data-stu-id="c281b-213">Progress records</span></span>
<span data-ttu-id="c281b-214">如果您設定 Runbook 來記錄進度記錄 (在 Azure 入口網站中 Runbook 的 [設定] 索引標籤上)，則會在執行每一個活動之前和之後，將記錄寫入到工作歷程記錄。</span><span class="sxs-lookup"><span data-stu-id="c281b-214">If you configure a runbook to log progress records (on the Configure tab of the runbook in the Azure portal), then a record will be written to the job history before and after each activity is run.</span></span> <span data-ttu-id="c281b-215">在大部分情況下，您應該保留預設設定，亦即不記錄 Runbook 的進度記錄以獲得最高效能。</span><span class="sxs-lookup"><span data-stu-id="c281b-215">In most cases, you should keep the default setting of not logging progress records for a runbook in order to maximize performance.</span></span> <span data-ttu-id="c281b-216">只有在疑難排解或偵錯 Runbook 時才開啟此選項。</span><span class="sxs-lookup"><span data-stu-id="c281b-216">Turn on this option only to troubleshoot or debug a runbook.</span></span> <span data-ttu-id="c281b-217">測試 Runbook 時，即使 Runbook 設為記錄進度記錄，也不會顯示進度訊息。</span><span class="sxs-lookup"><span data-stu-id="c281b-217">When testing a runbook, progress messages are not displayed even if the runbook is configured to log progress records.</span></span>

<span data-ttu-id="c281b-218">[Write-Progress](http://technet.microsoft.com/library/hh849902.aspx) Cmdlet 在 Runbook 中無效，因為它是用來和互動式使用者搭配使用。</span><span class="sxs-lookup"><span data-stu-id="c281b-218">The [Write-Progress](http://technet.microsoft.com/library/hh849902.aspx) cmdlet is not valid in a runbook, since this is intended for use with an interactive user.</span></span>

## <a name="preference-variables"></a><span data-ttu-id="c281b-219">喜好設定變數</span><span class="sxs-lookup"><span data-stu-id="c281b-219">Preference variables</span></span>
<span data-ttu-id="c281b-220">Windows PowerShell 使用 [喜好設定變數](http://technet.microsoft.com/library/hh847796.aspx) 決定如何回應傳送至不同輸出資料流的資料。</span><span class="sxs-lookup"><span data-stu-id="c281b-220">Windows PowerShell uses [preference variables](http://technet.microsoft.com/library/hh847796.aspx) to determine how to respond to data sent to different output streams.</span></span> <span data-ttu-id="c281b-221">您可以在 Runbook 中設定這些變數，控制如何回應傳送到不同資料流的資料。</span><span class="sxs-lookup"><span data-stu-id="c281b-221">You can set these variables in a runbook to control how it will respond to data sent into different streams.</span></span>

<span data-ttu-id="c281b-222">下表列出可用於 Runbook 的喜好設定變數及其有效值和預設值。</span><span class="sxs-lookup"><span data-stu-id="c281b-222">The following table lists the preference variables that can be used in runbooks with their valid and default values.</span></span> <span data-ttu-id="c281b-223">請注意，本表只包含 Runbook 中的有效值</span><span class="sxs-lookup"><span data-stu-id="c281b-223">Note that this table only includes the values that are valid in a runbook.</span></span> <span data-ttu-id="c281b-224">其他的值是在 Azure 自動化外部的 Windows PowerShell 中使用喜好設定變數時的有效值。</span><span class="sxs-lookup"><span data-stu-id="c281b-224">Additional values are valid for the preference variables when used in Windows PowerShell outside of Azure Automation.</span></span>

| <span data-ttu-id="c281b-225">變數</span><span class="sxs-lookup"><span data-stu-id="c281b-225">Variable</span></span> | <span data-ttu-id="c281b-226">預設值</span><span class="sxs-lookup"><span data-stu-id="c281b-226">Default Value</span></span> | <span data-ttu-id="c281b-227">有效值</span><span class="sxs-lookup"><span data-stu-id="c281b-227">Valid Values</span></span> |
|:--- |:--- |:--- |
| <span data-ttu-id="c281b-228">WarningPreference</span><span class="sxs-lookup"><span data-stu-id="c281b-228">WarningPreference</span></span> |<span data-ttu-id="c281b-229">Continue</span><span class="sxs-lookup"><span data-stu-id="c281b-229">Continue</span></span> |<span data-ttu-id="c281b-230">Stop</span><span class="sxs-lookup"><span data-stu-id="c281b-230">Stop</span></span><br><span data-ttu-id="c281b-231">Continue</span><span class="sxs-lookup"><span data-stu-id="c281b-231">Continue</span></span><br><span data-ttu-id="c281b-232">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="c281b-232">SilentlyContinue</span></span> |
| <span data-ttu-id="c281b-233">ErrorActionPreference</span><span class="sxs-lookup"><span data-stu-id="c281b-233">ErrorActionPreference</span></span> |<span data-ttu-id="c281b-234">Continue</span><span class="sxs-lookup"><span data-stu-id="c281b-234">Continue</span></span> |<span data-ttu-id="c281b-235">Stop</span><span class="sxs-lookup"><span data-stu-id="c281b-235">Stop</span></span><br><span data-ttu-id="c281b-236">Continue</span><span class="sxs-lookup"><span data-stu-id="c281b-236">Continue</span></span><br><span data-ttu-id="c281b-237">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="c281b-237">SilentlyContinue</span></span> |
| <span data-ttu-id="c281b-238">VerbosePreference</span><span class="sxs-lookup"><span data-stu-id="c281b-238">VerbosePreference</span></span> |<span data-ttu-id="c281b-239">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="c281b-239">SilentlyContinue</span></span> |<span data-ttu-id="c281b-240">Stop</span><span class="sxs-lookup"><span data-stu-id="c281b-240">Stop</span></span><br><span data-ttu-id="c281b-241">Continue</span><span class="sxs-lookup"><span data-stu-id="c281b-241">Continue</span></span><br><span data-ttu-id="c281b-242">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="c281b-242">SilentlyContinue</span></span> |

<span data-ttu-id="c281b-243">下表列出 Runbook 中有效之喜好設定變數值的行為。</span><span class="sxs-lookup"><span data-stu-id="c281b-243">The following table lists the behavior for the preference variable values that are valid in runbooks.</span></span>

| <span data-ttu-id="c281b-244">值</span><span class="sxs-lookup"><span data-stu-id="c281b-244">Value</span></span> | <span data-ttu-id="c281b-245">行為</span><span class="sxs-lookup"><span data-stu-id="c281b-245">Behavior</span></span> |
|:--- |:--- |
| <span data-ttu-id="c281b-246">Continue</span><span class="sxs-lookup"><span data-stu-id="c281b-246">Continue</span></span> |<span data-ttu-id="c281b-247">記錄訊息並繼續執行 Runbook。</span><span class="sxs-lookup"><span data-stu-id="c281b-247">Logs the message and continues executing the runbook.</span></span> |
| <span data-ttu-id="c281b-248">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="c281b-248">SilentlyContinue</span></span> |<span data-ttu-id="c281b-249">繼續執行 Runbook 但不記錄訊息。</span><span class="sxs-lookup"><span data-stu-id="c281b-249">Continues executing the runbook without logging the message.</span></span> <span data-ttu-id="c281b-250">這有忽略訊息的作用。</span><span class="sxs-lookup"><span data-stu-id="c281b-250">This has the effect of ignoring the message.</span></span> |
| <span data-ttu-id="c281b-251">Stop</span><span class="sxs-lookup"><span data-stu-id="c281b-251">Stop</span></span> |<span data-ttu-id="c281b-252">記錄訊息並暫停 Runbook。</span><span class="sxs-lookup"><span data-stu-id="c281b-252">Logs the message and suspends the runbook.</span></span> |

## <a name="retrieving-runbook-output-and-messages"></a><span data-ttu-id="c281b-253">擷取 Runbook 輸出和訊息</span><span class="sxs-lookup"><span data-stu-id="c281b-253">Retrieving runbook output and messages</span></span>
### <a name="azure-portal"></a><span data-ttu-id="c281b-254">Azure 入口網站</span><span class="sxs-lookup"><span data-stu-id="c281b-254">Azure portal</span></span>
<span data-ttu-id="c281b-255">您可以從 Runbook 的 [工作] 索引標籤，在 Azure 入口網站中檢視 Runbook 工作詳細資料。</span><span class="sxs-lookup"><span data-stu-id="c281b-255">You can view the details of a runbook job in the Azure portal from the Jobs tab of a runbook.</span></span> <span data-ttu-id="c281b-256">除了工作和任何例外狀況 (如果發生) 的一般資訊，工作的 [摘要] 也會顯示輸入參數和 [輸出資料流](#Output) 。</span><span class="sxs-lookup"><span data-stu-id="c281b-256">The Summary of the job will display the input parameters and the [Output Stream](#Output) in addition to general information about the job and any exceptions if they occurred.</span></span> <span data-ttu-id="c281b-257">除了[詳細串流](#Verbose)和[進度記錄](#Progress)之外 (如果設定 Runbook 來記錄詳細資訊和進度記錄)，「歷程記錄」還會包含來自[輸出串流](#Output)和[警告和錯誤串流](#WarningError)的訊息。</span><span class="sxs-lookup"><span data-stu-id="c281b-257">The History will include messages from the [Output Stream](#Output) and [Warning and Error Streams](#WarningError) in addition to the [Verbose Stream](#Verbose) and [Progress Records](#Progress) if the runbook is configured to log verbose and progress records.</span></span>

### <a name="windows-powershell"></a><span data-ttu-id="c281b-258">Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="c281b-258">Windows PowerShell</span></span>
<span data-ttu-id="c281b-259">在 Windows PowerShell中，您可以使用 [Get-AzureAutomationJobOutput](https://msdn.microsoft.com/library/mt603476.aspx) Cmdlet 從 Runbook 擷取輸出與訊息。</span><span class="sxs-lookup"><span data-stu-id="c281b-259">In Windows PowerShell, you can retrieve output and messages from a runbook using the [Get-AzureAutomationJobOutput](https://msdn.microsoft.com/library/mt603476.aspx) cmdlet.</span></span> <span data-ttu-id="c281b-260">這個 Cmdlet 需要工作的識別碼，而且具有稱為 Stream 的參數，可讓您指定要傳回的資料流。</span><span class="sxs-lookup"><span data-stu-id="c281b-260">This cmdlet requires the ID of the job and has a parameter called Stream where you specify which stream to return.</span></span> <span data-ttu-id="c281b-261">您可以指定「Any」來傳回工作的所有資料流。</span><span class="sxs-lookup"><span data-stu-id="c281b-261">You can specify Any to return all streams for the job.</span></span>

<span data-ttu-id="c281b-262">下列範例會啟動 Runbook 範例，然後等候它完成。</span><span class="sxs-lookup"><span data-stu-id="c281b-262">The following example starts a sample runbook and then waits for it to complete.</span></span> <span data-ttu-id="c281b-263">完成後，將會從工作收集其輸出資料流。</span><span class="sxs-lookup"><span data-stu-id="c281b-263">Once completed, its output stream is collected from the job.</span></span>

    $job = Start-AzureRmAutomationRunbook -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAccount" –Name "Test-Runbook"

    $doLoop = $true
    While ($doLoop) {
       $job = Get-AzureRmAutomationJob -ResourceGroupName "ResourceGroup01" `
       –AutomationAccountName "MyAutomationAccount" -Id $job.JobId
       $status = $job.Status
       $doLoop = (($status -ne "Completed") -and ($status -ne "Failed") -and ($status -ne "Suspended") -and ($status -ne "Stopped")
    }

    Get-AzureRmAutomationJobOutput -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAccount" -Id $job.JobId –Stream Output

### <a name="graphical-authoring"></a><span data-ttu-id="c281b-264">圖形化編寫</span><span class="sxs-lookup"><span data-stu-id="c281b-264">Graphical Authoring</span></span>
<span data-ttu-id="c281b-265">對於圖形化 Runbook，額外的記錄功能會以活動等級追蹤的形式提供。</span><span class="sxs-lookup"><span data-stu-id="c281b-265">For graphical runbooks, extra logging is available in the form of activity-level tracing.</span></span>  <span data-ttu-id="c281b-266">追蹤有兩種等級：基本及詳細。</span><span class="sxs-lookup"><span data-stu-id="c281b-266">There are two levels of tracing: Basic and Detailed.</span></span>  <span data-ttu-id="c281b-267">在基本追蹤中，您可以看到 Runbook 中每個活動的開始及結束時間，以及任何活動重試作業的相關資訊，例如嘗試次數及活動開始時間。</span><span class="sxs-lookup"><span data-stu-id="c281b-267">In Basic tracing, you can see the start and end time of each activity in the runbook plus information related to any activity retries, such as number of attempts and start time of the activity.</span></span>  <span data-ttu-id="c281b-268">在詳細追蹤中，您會得到基本追蹤的結果，加上每個活動的輸入及輸出資料。</span><span class="sxs-lookup"><span data-stu-id="c281b-268">In Detailed tracing, you get Basic tracing plus input and output data for each activity.</span></span>  <span data-ttu-id="c281b-269">請注意，目前的追蹤記錄是利用詳細資訊資料流來寫入的，因此當您啟用追蹤時，必須啟用詳細資訊記錄功能。</span><span class="sxs-lookup"><span data-stu-id="c281b-269">Note that currently the trace records are written using the verbose stream, so you must enable Verbose logging when you enable tracing.</span></span>  <span data-ttu-id="c281b-270">對於已啟用追蹤功能的圖形化 Runbook，就不需要記錄進度記錄，因為基本追蹤有同樣的效果，且提供更有用的資訊。</span><span class="sxs-lookup"><span data-stu-id="c281b-270">For graphical runbooks with tracing enabled there is no need to log progress records, because the Basic tracing serves the same purpose and is more informative.</span></span>

![圖形化編寫的工作串流檢視](media/automation-runbook-output-and-messages/job-streams-view-blade.png)

<span data-ttu-id="c281b-272">您可以在上方的螢幕擷取畫面中，看到當您為圖形化 Runbook 啟用詳細資訊記錄及追蹤功能時，生產工作串流檢視會提供更多的資訊。</span><span class="sxs-lookup"><span data-stu-id="c281b-272">You can see from the above screenshot that when you enable Verbose logging and tracing for Graphical runbooks, much more information is available in the production Job Streams view.</span></span>  <span data-ttu-id="c281b-273">這些額外的資訊在您排解 Runbook 相關的生產問題時是不可或缺的，因此您應該只為這個目的來啟用該功能，而不是隨時啟用。</span><span class="sxs-lookup"><span data-stu-id="c281b-273">This extra information can be essential for troubleshooting production problems with a runbook, and therefore you should only enable it for that purpose and not as a general practice.</span></span>    
<span data-ttu-id="c281b-274">追蹤記錄的數量可以非常多。</span><span class="sxs-lookup"><span data-stu-id="c281b-274">The Trace records can be especially numerous.</span></span>  <span data-ttu-id="c281b-275">只要利用圖形化 Runbook 追蹤功能，您就可以為每個活動取得二到四個記錄，視您之前是設定基本追蹤還是詳細追蹤而定。</span><span class="sxs-lookup"><span data-stu-id="c281b-275">With Graphical runbook tracing you can get two to four records per activity depending on whether you have configured Basic or Detailed tracing.</span></span>  <span data-ttu-id="c281b-276">除非您需要這項資訊來追蹤 Runbook 的進度以便疑難排解，我們建議您關閉追蹤功能。</span><span class="sxs-lookup"><span data-stu-id="c281b-276">Unless you need this information to track the progress of a runbook for troubleshooting, you might want to keep Tracing turned off.</span></span>

<span data-ttu-id="c281b-277">**如要啟用活動等級的追蹤功能，請執行下列步驟。**</span><span class="sxs-lookup"><span data-stu-id="c281b-277">**To enable activity-level tracing, perform the following steps.**</span></span>

1. <span data-ttu-id="c281b-278">在 Azure 入口網站中，開啟您的自動化帳戶。</span><span class="sxs-lookup"><span data-stu-id="c281b-278">In the Azure Portal, open your Automation account.</span></span>
2. <span data-ttu-id="c281b-279">按一下 [Runbook]  磚以開啟 Runbook 的清單。</span><span class="sxs-lookup"><span data-stu-id="c281b-279">Click on the **Runbooks** tile to open the list of runbooks.</span></span>
3. <span data-ttu-id="c281b-280">在 [Runbook] 刀鋒視窗中，按一下您 Runbook 清單的某圖形化 Runbook 來選取它。</span><span class="sxs-lookup"><span data-stu-id="c281b-280">On the Runbooks blade, click to select a graphical runbook from your list of runbooks.</span></span>
4. <span data-ttu-id="c281b-281">在已選取 Runbook 的 [設定] 刀鋒視窗中，按一下 [記錄和追蹤] 。</span><span class="sxs-lookup"><span data-stu-id="c281b-281">On the Settings blade for the selected runbook, click **Logging and Tracing**.</span></span>
5. <span data-ttu-id="c281b-282">在 [記錄和追蹤] 刀鋒視窗中，按一下 [記錄詳細資訊記錄] 下方的 [開啟] 來啟用詳細資訊記錄功能，然後在 [活動層級追蹤] 下方，根據您所需的追蹤層級，將追蹤層級變更為 [基本] 或 [詳細]。</span><span class="sxs-lookup"><span data-stu-id="c281b-282">On the Logging and Tracing blade, under Log verbose records, click **On** to enable verbose logging and udner Activity-level tracing, change the trace level to **Basic** or **Detailed** based on the level of tracing you require.</span></span><br>
   
   ![圖形化編寫的 [記錄和追蹤] 刀鋒視窗](media/automation-runbook-output-and-messages/logging-and-tracing-settings-blade.png)

### <a name="microsoft-operations-management-suite-oms-log-analytics"></a><span data-ttu-id="c281b-284">Microsoft Operations Management Suite (OMS) Log Analytics</span><span class="sxs-lookup"><span data-stu-id="c281b-284">Microsoft Operations Management Suite (OMS) Log Analytics</span></span>
<span data-ttu-id="c281b-285">「自動化」可以將 Runebook 工作狀態和工作資料流傳送到您的 Microsoft Operations Management Suite (OMS) Log Analytics 工作區。</span><span class="sxs-lookup"><span data-stu-id="c281b-285">Automation can send runbook job status and job streams to your Microsoft Operations Management Suite (OMS) Log Analytics workspace.</span></span>  <span data-ttu-id="c281b-286">透過 Log Analytics，您可以：</span><span class="sxs-lookup"><span data-stu-id="c281b-286">With Log Analytics you can,</span></span>

* <span data-ttu-id="c281b-287">針對自動化工作取得深入解析</span><span class="sxs-lookup"><span data-stu-id="c281b-287">Get insight on your Automation jobs</span></span> 
* <span data-ttu-id="c281b-288">根據您的 Runbook 工作狀態 (例如已失敗或已暫停) 觸發電子郵件或警示</span><span class="sxs-lookup"><span data-stu-id="c281b-288">Trigger an email or alert based on your runbook job status (e.g. failed or suspended)</span></span> 
* <span data-ttu-id="c281b-289">撰寫工作資料流之間的進階查詢</span><span class="sxs-lookup"><span data-stu-id="c281b-289">Write advanced queries across your job streams</span></span> 
* <span data-ttu-id="c281b-290">在自動化帳戶之間相互關聯工作</span><span class="sxs-lookup"><span data-stu-id="c281b-290">Correlate jobs across Automation accounts</span></span> 
* <span data-ttu-id="c281b-291">視覺化一段時間的工作歷程記錄</span><span class="sxs-lookup"><span data-stu-id="c281b-291">Visualize your job history over time</span></span>    

<span data-ttu-id="c281b-292">如需如何設定與 Log Analytics 整合以收集、相互關聯及處理作業資料的詳細資訊，請參閱[從自動化將作業狀態和作業串流轉送到 Log Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md)。</span><span class="sxs-lookup"><span data-stu-id="c281b-292">For more information on how to configure integration with Log Analytics to collect, correlate and act on job data, see [Forward job status and job streams from Automation to Log Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="c281b-293">後續步驟</span><span class="sxs-lookup"><span data-stu-id="c281b-293">Next steps</span></span>
* <span data-ttu-id="c281b-294">若要深入了解 Runbook 執行方式、如何監視 Runbook 工作，以及其他技術性詳細資料，請參閱 [追蹤 Runbook 工作](automation-runbook-execution.md)</span><span class="sxs-lookup"><span data-stu-id="c281b-294">To learn more about runbook execution, how to monitor runbook jobs, and other technical details, see [Track a runbook job](automation-runbook-execution.md)</span></span>
* <span data-ttu-id="c281b-295">若要了解如何設計和使用子 Runbook，請參閱 [Azure 自動化中的子 Runbook](automation-child-runbooks.md)</span><span class="sxs-lookup"><span data-stu-id="c281b-295">To understand how to design and use child runbooks, see [Child runbooks in Azure Automation](automation-child-runbooks.md)</span></span>

