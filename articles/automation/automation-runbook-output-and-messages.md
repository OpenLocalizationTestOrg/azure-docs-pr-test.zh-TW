---
title: "aaaRunbook 輸出和在 Azure 自動化中的訊息 |Microsoft 文件"
description: "描述如何 toocreate 並擷取輸出和錯誤訊息從 Azure 自動化中的 runbook。"
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 13a414f5-0e2c-4be2-9558-a3e3ec84b6b2
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 11/11/2016
ms.author: magoedte;bwren
ms.openlocfilehash: c1505fa889473766bfa47e43aaed2449d60ad851
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="runbook-output-and-messages-in-azure-automation"></a><span data-ttu-id="4432f-103">Azure 自動化中的 Runbook 輸出與訊息</span><span class="sxs-lookup"><span data-stu-id="4432f-103">Runbook output and messages in Azure Automation</span></span>
<span data-ttu-id="4432f-104">大部分的 Azure 自動化 runbook 將會有某種形式的輸出，例如錯誤訊息 toohello 使用者，或供其他工作流程使用 toobe 的複雜物件。</span><span class="sxs-lookup"><span data-stu-id="4432f-104">Most Azure Automation runbooks will have some form of output such as an error message toohello user or a complex object intended toobe consumed by another workflow.</span></span> <span data-ttu-id="4432f-105">Windows PowerShell 提供[多個資料流](http://blogs.technet.com/heyscriptingguy/archive/2014/03/30/understanding-streams-redirection-and-write-host-in-powershell.aspx)toosend 輸出指令碼或工作流程。</span><span class="sxs-lookup"><span data-stu-id="4432f-105">Windows PowerShell provides [multiple streams](http://blogs.technet.com/heyscriptingguy/archive/2014/03/30/understanding-streams-redirection-and-write-host-in-powershell.aspx) toosend output from a script or workflow.</span></span> <span data-ttu-id="4432f-106">Azure 自動化以不同的運作與每個資料流，以及您應該遵循最佳作法 toouse 每個當您建立 runbook。</span><span class="sxs-lookup"><span data-stu-id="4432f-106">Azure Automation works with each of these streams differently, and you should follow best practices for how toouse each when you are creating a runbook.</span></span>

<span data-ttu-id="4432f-107">hello 下表提供簡短描述每個 hello 資料流和 hello Azure 管理入口網站中的行為在執行已發佈的 runbook 和[測試 runbook](automation-testing-runbook.md)。</span><span class="sxs-lookup"><span data-stu-id="4432f-107">hello following table provides a brief description of each of hello streams and their behavior in hello Azure Management Portal both when running a published runbook and when [testing a runbook](automation-testing-runbook.md).</span></span> <span data-ttu-id="4432f-108">後續各節將提供每個資料流的進一步詳細資料。</span><span class="sxs-lookup"><span data-stu-id="4432f-108">Further details on each stream are provided in subsequent sections.</span></span>

| <span data-ttu-id="4432f-109">Stream</span><span class="sxs-lookup"><span data-stu-id="4432f-109">Stream</span></span> | <span data-ttu-id="4432f-110">說明</span><span class="sxs-lookup"><span data-stu-id="4432f-110">Description</span></span> | <span data-ttu-id="4432f-111">Published</span><span class="sxs-lookup"><span data-stu-id="4432f-111">Published</span></span> | <span data-ttu-id="4432f-112">測試</span><span class="sxs-lookup"><span data-stu-id="4432f-112">Test</span></span> |
|:--- |:--- |:--- |:--- |
| <span data-ttu-id="4432f-113">輸出</span><span class="sxs-lookup"><span data-stu-id="4432f-113">Output</span></span> |<span data-ttu-id="4432f-114">供 toobe 其他 runbook 使用的物件。</span><span class="sxs-lookup"><span data-stu-id="4432f-114">Objects intended toobe consumed by other runbooks.</span></span> |<span data-ttu-id="4432f-115">寫入 toohello 作業歷程記錄。</span><span class="sxs-lookup"><span data-stu-id="4432f-115">Written toohello job history.</span></span> |<span data-ttu-id="4432f-116">顯示在 hello 測試輸出窗格中。</span><span class="sxs-lookup"><span data-stu-id="4432f-116">Displayed in hello Test Output Pane.</span></span> |
| <span data-ttu-id="4432f-117">警告</span><span class="sxs-lookup"><span data-stu-id="4432f-117">Warning</span></span> |<span data-ttu-id="4432f-118">適用於 hello 使用者的警告訊息。</span><span class="sxs-lookup"><span data-stu-id="4432f-118">Warning message intended for hello user.</span></span> |<span data-ttu-id="4432f-119">寫入 toohello 作業歷程記錄。</span><span class="sxs-lookup"><span data-stu-id="4432f-119">Written toohello job history.</span></span> |<span data-ttu-id="4432f-120">顯示在 hello 測試輸出窗格中。</span><span class="sxs-lookup"><span data-stu-id="4432f-120">Displayed in hello Test Output Pane.</span></span> |
| <span data-ttu-id="4432f-121">錯誤</span><span class="sxs-lookup"><span data-stu-id="4432f-121">Error</span></span> |<span data-ttu-id="4432f-122">適用於 hello 使用者的錯誤訊息。</span><span class="sxs-lookup"><span data-stu-id="4432f-122">Error message intended for hello user.</span></span> <span data-ttu-id="4432f-123">不同於例外狀況，hello runbook 預設會繼續執行之後錯誤訊息。</span><span class="sxs-lookup"><span data-stu-id="4432f-123">Unlike an exception, hello runbook continues after an error message by default.</span></span> |<span data-ttu-id="4432f-124">寫入 toohello 作業歷程記錄。</span><span class="sxs-lookup"><span data-stu-id="4432f-124">Written toohello job history.</span></span> |<span data-ttu-id="4432f-125">顯示在 hello 測試輸出窗格中。</span><span class="sxs-lookup"><span data-stu-id="4432f-125">Displayed in hello Test Output Pane.</span></span> |
| <span data-ttu-id="4432f-126">詳細資訊</span><span class="sxs-lookup"><span data-stu-id="4432f-126">Verbose</span></span> |<span data-ttu-id="4432f-127">提供一般或偵錯資訊的訊息。</span><span class="sxs-lookup"><span data-stu-id="4432f-127">Messages providing general or debugging information.</span></span> |<span data-ttu-id="4432f-128">如果詳細資訊記錄已為 hello runbook 撰寫只 toojob 歷程記錄。</span><span class="sxs-lookup"><span data-stu-id="4432f-128">Written toojob history only if verbose logging is turned on for hello runbook.</span></span> |<span data-ttu-id="4432f-129">Hello 測試輸出窗格中顯示，只有當 $VerbosePreference tooContinue hello runbook 中設定。</span><span class="sxs-lookup"><span data-stu-id="4432f-129">Displayed in hello Test Output pane only if $VerbosePreference is set tooContinue in hello runbook.</span></span> |
| <span data-ttu-id="4432f-130">Progress</span><span class="sxs-lookup"><span data-stu-id="4432f-130">Progress</span></span> |<span data-ttu-id="4432f-131">自動產生 hello runbook 中每個活動之前和之後的記錄。</span><span class="sxs-lookup"><span data-stu-id="4432f-131">Records automatically generated before and after each activity in hello runbook.</span></span> <span data-ttu-id="4432f-132">hello runbook 不應嘗試 toocreate 它自己的進度記錄因為它們供互動式使用者。</span><span class="sxs-lookup"><span data-stu-id="4432f-132">hello runbook should not attempt toocreate its own progress records since they are intended for an interactive user.</span></span> |<span data-ttu-id="4432f-133">如果進度記錄已為 hello runbook 撰寫只 toojob 歷程記錄。</span><span class="sxs-lookup"><span data-stu-id="4432f-133">Written toojob history only if progress logging is turned on for hello runbook.</span></span> |<span data-ttu-id="4432f-134">不會顯示在 hello 測試輸出窗格。</span><span class="sxs-lookup"><span data-stu-id="4432f-134">Not displayed in hello Test Output Pane.</span></span> |
| <span data-ttu-id="4432f-135">偵錯</span><span class="sxs-lookup"><span data-stu-id="4432f-135">Debug</span></span> |<span data-ttu-id="4432f-136">適用於互動式使用者的訊息。</span><span class="sxs-lookup"><span data-stu-id="4432f-136">Messages intended for an interactive user.</span></span> <span data-ttu-id="4432f-137">不應在 Runbook 中使用。</span><span class="sxs-lookup"><span data-stu-id="4432f-137">Should not be used in runbooks.</span></span> |<span data-ttu-id="4432f-138">不會寫入 toojob 歷程記錄。</span><span class="sxs-lookup"><span data-stu-id="4432f-138">Not written toojob history.</span></span> |<span data-ttu-id="4432f-139">不會寫入 tooTest 輸出窗格。</span><span class="sxs-lookup"><span data-stu-id="4432f-139">Not written tooTest Output Pane.</span></span> |

## <a name="output-stream"></a><span data-ttu-id="4432f-140">輸出資料流</span><span class="sxs-lookup"><span data-stu-id="4432f-140">Output stream</span></span>
<span data-ttu-id="4432f-141">hello 輸出資料流適用於正確執行時，指令碼或工作流程所建立之物件的輸出。</span><span class="sxs-lookup"><span data-stu-id="4432f-141">hello Output stream is intended for output of objects created by a script or workflow when it runs correctly.</span></span> <span data-ttu-id="4432f-142">在 Azure 自動化中，這個資料流主要用於所耗用的主要物件 toobe[父呼叫 hello 目前 runbook 的 runbook](automation-child-runbooks.md)。</span><span class="sxs-lookup"><span data-stu-id="4432f-142">In Azure Automation, this stream is primarily used for objects intended toobe consumed by [parent runbooks that call hello current runbook](automation-child-runbooks.md).</span></span> <span data-ttu-id="4432f-143">當您[呼叫 runbook 內嵌](automation-child-runbooks.md#invoking-a-child-runbook-using-inline-execution)從父 runbook，它會傳回資料從 hello 輸出資料流 toohello 父代。</span><span class="sxs-lookup"><span data-stu-id="4432f-143">When you [call a runbook inline](automation-child-runbooks.md#invoking-a-child-runbook-using-inline-execution) from a parent runbook, it returns data from hello output stream toohello parent.</span></span> <span data-ttu-id="4432f-144">如果您知道 hello runbook 永遠不會被另一個 runbook 呼叫，您應該只使用 hello 輸出資料流 toocommunicate 的一般資訊後 toohello 使用者。</span><span class="sxs-lookup"><span data-stu-id="4432f-144">You should only use hello output stream toocommunicate general information back toohello user if you know hello runbook will never be called by another runbook.</span></span> <span data-ttu-id="4432f-145">最佳做法，不過，您通常應該使用 hello [Verbose Stream](#Verbose) toocommunicate 的一般資訊 toohello 使用者。</span><span class="sxs-lookup"><span data-stu-id="4432f-145">As a best practice, however, you should typically use hello [Verbose Stream](#Verbose) toocommunicate general information toohello user.</span></span>

<span data-ttu-id="4432f-146">您可以撰寫資料 toohello 輸出資料流使用[Write-output](http://technet.microsoft.com/library/hh849921.aspx)或將 hello 物件放入的 hello runbook 中的那一行。</span><span class="sxs-lookup"><span data-stu-id="4432f-146">You can write data toohello output stream using [Write-Output](http://technet.microsoft.com/library/hh849921.aspx) or by putting hello object on its own line in hello runbook.</span></span>

    #hello following lines both write an object toohello output stream.
    Write-Output –InputObject $object
    $object

### <a name="output-from-a-function"></a><span data-ttu-id="4432f-147">從函式輸出</span><span class="sxs-lookup"><span data-stu-id="4432f-147">Output from a function</span></span>
<span data-ttu-id="4432f-148">當您撰寫 toohello 輸出資料流中包括您在 runbook 中的函式時，hello 輸出會傳遞後 toohello runbook。</span><span class="sxs-lookup"><span data-stu-id="4432f-148">When you write toohello output stream in a function that is included in your runbook, hello output is passed back toohello runbook.</span></span> <span data-ttu-id="4432f-149">如果 hello runbook 將指派該輸出 tooa 變數，然後不會寫入 toohello 輸出資料流。</span><span class="sxs-lookup"><span data-stu-id="4432f-149">If hello runbook assigns that output tooa variable, then it is not written toohello output stream.</span></span> <span data-ttu-id="4432f-150">撰寫 tooany hello 函式內來自其他資料流將寫入 toohello hello runbook 的對應資料流。</span><span class="sxs-lookup"><span data-stu-id="4432f-150">Writing tooany other streams from within hello function will write toohello corresponding stream for hello runbook.</span></span>

<span data-ttu-id="4432f-151">請考慮下列 runbook 範例的 hello。</span><span class="sxs-lookup"><span data-stu-id="4432f-151">Consider hello following sample runbook.</span></span>

    Workflow Test-Runbook
    {
        Write-Verbose "Verbose outside of function" -Verbose
        Write-Output "Output outside of function"
        $functionOutput = Test-Function
        $functionOutput

    Function Test-Function
     {
        Write-Verbose "Verbose inside of function" -Verbose
        Write-Output "Output inside of function"
      }
    }


<span data-ttu-id="4432f-152">hello hello runbook 工作的輸出資料流將是：</span><span class="sxs-lookup"><span data-stu-id="4432f-152">hello output stream for hello runbook job would be:</span></span>

    Output inside of function
    Output outside of function

<span data-ttu-id="4432f-153">hello hello runbook 工作的詳細資訊資料流將是：</span><span class="sxs-lookup"><span data-stu-id="4432f-153">hello verbose stream for hello runbook job would be:</span></span>

    Verbose outside of function
    Verbose inside of function

<span data-ttu-id="4432f-154">一旦發行 hello runbook 和您在開始之前，您也必須開啟登入順序 tooget hello 詳細資料流輸出中的 hello runbook 設定的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="4432f-154">Once you have published hello runbook and before you start it, you must also turn on Verbose logging in hello runbook settings in order tooget hello Verbose stream output.</span></span>

### <a name="declaring-output-data-type"></a><span data-ttu-id="4432f-155">宣告輸出資料類型</span><span class="sxs-lookup"><span data-stu-id="4432f-155">Declaring output data type</span></span>
<span data-ttu-id="4432f-156">工作流程可以指定其輸出使用 hello hello 資料型別[OutputType 屬性](http://technet.microsoft.com/library/hh847785.aspx)。</span><span class="sxs-lookup"><span data-stu-id="4432f-156">A workflow can specify hello data type of its output using hello [OutputType attribute](http://technet.microsoft.com/library/hh847785.aspx).</span></span> <span data-ttu-id="4432f-157">這個屬性在執行階段中，沒有任何作用，但是它提供指示 toohello runbook 作者在設計階段的 hello runbook 的 hello 預期輸出。</span><span class="sxs-lookup"><span data-stu-id="4432f-157">This attribute has no effect during runtime, but it provides an indication toohello runbook author at design time of hello expected output of hello runbook.</span></span> <span data-ttu-id="4432f-158">隨著 hello runbook 工具組的持續 tooevolve，hello 重要性的設計階段宣告輸出資料型別提升的重要性。</span><span class="sxs-lookup"><span data-stu-id="4432f-158">As hello toolset for runbooks continues tooevolve, hello importance of declaring output data types at design time will increase in importance.</span></span> <span data-ttu-id="4432f-159">如此一來，它會是最佳作法 tooinclude 這個宣告中您所建立的任何 runbook。</span><span class="sxs-lookup"><span data-stu-id="4432f-159">As a result, it is a best practice tooinclude this declaration in any runbooks that you create.</span></span>

<span data-ttu-id="4432f-160">以下是範例輸出類型清單：</span><span class="sxs-lookup"><span data-stu-id="4432f-160">Here is a list of example output types:</span></span>

* <span data-ttu-id="4432f-161">System.String</span><span class="sxs-lookup"><span data-stu-id="4432f-161">System.String</span></span>
* <span data-ttu-id="4432f-162">System.Int32</span><span class="sxs-lookup"><span data-stu-id="4432f-162">System.Int32</span></span>
* <span data-ttu-id="4432f-163">System.Collections.Hashtable</span><span class="sxs-lookup"><span data-stu-id="4432f-163">System.Collections.Hashtable</span></span>
* <span data-ttu-id="4432f-164">Microsoft.Azure.Commands.Compute.Models.PSVirtualMachine</span><span class="sxs-lookup"><span data-stu-id="4432f-164">Microsoft.Azure.Commands.Compute.Models.PSVirtualMachine</span></span>

<span data-ttu-id="4432f-165">hello 下列 runbook 範例輸出字串物件，並包含其輸出類型的宣告。</span><span class="sxs-lookup"><span data-stu-id="4432f-165">hello following sample runbook outputs a string object and includes a declaration of its output type.</span></span> <span data-ttu-id="4432f-166">如果您的 runbook 會輸出特定類型的陣列，則您仍應指定 hello 類型為相對於的 tooan hello 類型陣列。</span><span class="sxs-lookup"><span data-stu-id="4432f-166">If your runbook outputs an array of a certain type, then you should still specify hello type as opposed tooan array of hello type.</span></span>

    Workflow Test-Runbook
    {
       [OutputType([string])]

       $output = "This is some string output."
       Write-Output $output
    }

<span data-ttu-id="4432f-167">toodeclare Grapical 或圖形化 PowerShell 工作流程 runbook 中的輸出類型，您可以選取 hello**輸入和輸出**功能表選項，並輸入 hello 名稱 hello 的輸出類型。</span><span class="sxs-lookup"><span data-stu-id="4432f-167">toodeclare an output type in Grapical or Graphical PowerShell Workflow runbooks, you can select hello **Input and Output** menu option and type in hello name of hello output type.</span></span>  <span data-ttu-id="4432f-168">我們建議您改用 hello 完整.NET 類別名稱 toomake 參考從父 runbook 時容易辨識它。</span><span class="sxs-lookup"><span data-stu-id="4432f-168">We recommend you use hello full .NET class name toomake it easily identifiable when referencing it from a parent runbook.</span></span>  <span data-ttu-id="4432f-169">這會公開該類別 toohello 資料匯流排的 hello runbook 中的所有 hello 屬性，並提供很大的彈性，它們使用的條件式邏輯記錄，並參考做為 hello runbook 中的其他活動的值時。</span><span class="sxs-lookup"><span data-stu-id="4432f-169">This exposes all hello properties of that class toohello data bus in hello runbook and provides a lot of flexibility when using them for conditional logic, logging, and referencing as values for other activities in hello runbook.</span></span><br> <span data-ttu-id="4432f-170">![Runbook 輸入和輸出選項](media/automation-runbook-output-and-messages/runbook-menu-input-and-output-option.png)</span><span class="sxs-lookup"><span data-stu-id="4432f-170">![Runbook Input and Output option](media/automation-runbook-output-and-messages/runbook-menu-input-and-output-option.png)</span></span>

<span data-ttu-id="4432f-171">在下列範例的 hello，我們有兩個圖形化 runbook toodemonstrate 這項功能。</span><span class="sxs-lookup"><span data-stu-id="4432f-171">In hello following example, we have two graphical runbooks toodemonstrate this feature.</span></span>  <span data-ttu-id="4432f-172">如果我們套用 hello 模組化 runbook 設計模型時，我們有一個 runbook 會做為 hello*驗證 Runbook 範本*管理與 Azure 中，使用驗證 hello 執行身分帳戶。</span><span class="sxs-lookup"><span data-stu-id="4432f-172">If we apply hello modular runbook design model, we have one runbook which serves as hello *Authentication Runbook template* managing authentication with Azure using hello Run As account.</span></span>  <span data-ttu-id="4432f-173">我們第二個 runbook，通常會執行 hello 的核心邏輯 tooautomate 特定案例，在此情況下即將 tooexecute hello*驗證 Runbook 範本*並顯示 hello 結果 tooyour**測試**輸出窗格。</span><span class="sxs-lookup"><span data-stu-id="4432f-173">Our second runbook, which would normally perform hello core logic tooautomate a given scenario, in this case is going tooexecute hello *Authentication Runbook template* and display hello results tooyour **Test** output pane.</span></span>  <span data-ttu-id="4432f-174">在一般情況下，我們必須執行一些動作根據資源運用 hello 輸出 hello 子系 runbook 從這個 runbook。</span><span class="sxs-lookup"><span data-stu-id="4432f-174">Under normal circumstances, we would have this runbook do something against a resource leveraging hello output from hello child runbook.</span></span>    

<span data-ttu-id="4432f-175">以下是 hello 基本邏輯的 hello **AuthenticateTo Azure** runbook。</span><span class="sxs-lookup"><span data-stu-id="4432f-175">Here is hello basic logic of hello **AuthenticateTo-Azure** runbook.</span></span><br> <span data-ttu-id="4432f-176">![驗證 Runbook 範本範例](media/automation-runbook-output-and-messages/runbook-authentication-template時的行為。png)時的行為。</span><span class="sxs-lookup"><span data-stu-id="4432f-176">![Authenticate Runbook Template Example](media/automation-runbook-output-and-messages/runbook-authentication-template.png).</span></span>  

<span data-ttu-id="4432f-177">它包含 hello 輸出類型*Microsoft.Azure.Commands.Profile.Models.PSAzureContext*，這會傳回 hello 驗證設定檔屬性。</span><span class="sxs-lookup"><span data-stu-id="4432f-177">It includes hello output type *Microsoft.Azure.Commands.Profile.Models.PSAzureContext*, which will return hello authentication profile properties.</span></span><br> <span data-ttu-id="4432f-178">![Runbook 輸出類型範例](media/automation-runbook-output-and-messages/runbook-input-and-output-add-blade.png)</span><span class="sxs-lookup"><span data-stu-id="4432f-178">![Runbook Output Type Example](media/automation-runbook-output-and-messages/runbook-input-and-output-add-blade.png)</span></span> 

<span data-ttu-id="4432f-179">雖然此 runbook 是很直接的還有一個組態項目 toocall 這裡。</span><span class="sxs-lookup"><span data-stu-id="4432f-179">While this runbook is very straight forward, there is one configuration item toocall out here.</span></span>  <span data-ttu-id="4432f-180">hello 最後一個活動執行 hello **Write-output** cmdlet，並寫入 hello 設定檔資料 tooa $_ 變數使用的 PowerShell 運算式 hello **Inputobject**參數，所需的指令程式。</span><span class="sxs-lookup"><span data-stu-id="4432f-180">hello last activity is executing hello **Write-Output** cmdlet and writes hello profile data tooa $_ variable using a PowerShell expression for hello **Inputobject** parameter, which is required for that cmdlet.</span></span>  

<span data-ttu-id="4432f-181">Hello 第二個 runbook 在這個範例中，名為*測試 ChildOutputType*，我們只需要兩個活動。</span><span class="sxs-lookup"><span data-stu-id="4432f-181">For hello second runbook in this example, named *Test-ChildOutputType*, we simply have two activities.</span></span><br> <span data-ttu-id="4432f-182">![範例子輸出類型 Runbook](media/automation-runbook-output-and-messages/runbook-display-authentication-results-example.png)</span><span class="sxs-lookup"><span data-stu-id="4432f-182">![Example Child Output Type Runbook](media/automation-runbook-output-and-messages/runbook-display-authentication-results-example.png)</span></span> 

<span data-ttu-id="4432f-183">hello 第一個活動呼叫 hello **AuthenticateTo Azure** runbook 和 hello 的第二個活動執行 hello **Write-verbose** cmdlet 搭配 hello**資料來源**的**活動輸出**和 hello 值**欄位路徑**是**Context.Subscription.SubscriptionName**，這指定 hello hello 內容輸出**AuthenticateTo Azure** runbook。</span><span class="sxs-lookup"><span data-stu-id="4432f-183">hello first activity calls hello **AuthenticateTo-Azure** runbook and hello second activity is running hello **Write-Verbose** cmdlet with hello **Data source** of **Activity output** and hello value for **Field path** is **Context.Subscription.SubscriptionName**, which is specifying hello context output from hello **AuthenticateTo-Azure** runbook.</span></span><br> <span data-ttu-id="4432f-184">![Write-Verbose Cmdlet 參數的資料來源](media/automation-runbook-output-and-messages/runbook-write-verbose-parameters-config.png)</span><span class="sxs-lookup"><span data-stu-id="4432f-184">![Write-Verbose cmdlet Parameter Data Source](media/automation-runbook-output-and-messages/runbook-write-verbose-parameters-config.png)</span></span>    

<span data-ttu-id="4432f-185">hello 產生的輸出是 hello hello 訂用帳戶名稱。</span><span class="sxs-lookup"><span data-stu-id="4432f-185">hello resulting output is hello name of hello subscription.</span></span><br> ![Test-ChildOutputType Runbook 結果](media/automation-runbook-output-and-messages/runbook-test-childoutputtype-results.png)

<span data-ttu-id="4432f-187">一個注意事項 hello hello 輸出型別控制行為的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="4432f-187">One note about hello behavior of hello Output Type control.</span></span>  <span data-ttu-id="4432f-188">當您輸入中的 hello 輸入 hello 輸出型別欄位中的值與輸出屬性刀鋒視窗時，輸入，為了讓您 hello 控制項所辨識的項目 toobe 之後有 tooclick hello 控制之外。</span><span class="sxs-lookup"><span data-stu-id="4432f-188">When you type a value in hello Output Type field on hello Input and Output properties blade, you have tooclick outside of hello control  after you type it, in order for your entry toobe recognized by hello control.</span></span>  

## <a name="message-streams"></a><span data-ttu-id="4432f-189">訊息資料流</span><span class="sxs-lookup"><span data-stu-id="4432f-189">Message streams</span></span>
<span data-ttu-id="4432f-190">不同於 hello 輸出資料流，訊息資料流是預定的 toocommunicate 資訊 toohello 使用者。</span><span class="sxs-lookup"><span data-stu-id="4432f-190">Unlike hello output stream, message streams are intended toocommunicate information toohello user.</span></span> <span data-ttu-id="4432f-191">有多個訊息資料流適用於不同類型的資訊，且 Azure 自動化以不同的方式處理每個資料流。</span><span class="sxs-lookup"><span data-stu-id="4432f-191">There are multiple message streams for different kinds of information, and each is handled differently by Azure Automation.</span></span>

### <a name="warning-and-error-streams"></a><span data-ttu-id="4432f-192">警告和錯誤資料流</span><span class="sxs-lookup"><span data-stu-id="4432f-192">Warning and error streams</span></span>
<span data-ttu-id="4432f-193">hello 警告和錯誤資料流是 runbook 中發生的預定的 toolog 問題。</span><span class="sxs-lookup"><span data-stu-id="4432f-193">hello Warning and Error streams are intended toolog problems that occur in a runbook.</span></span> <span data-ttu-id="4432f-194">當 runbook 執行時，並測試 runbook 時包含 hello Azure 管理入口網站中的 hello 測試輸出窗格中將它們寫入 toohello 作業歷程記錄。</span><span class="sxs-lookup"><span data-stu-id="4432f-194">They are written toohello job history when a runbook is executed, and are included in hello Test Output Pane in hello Azure Management Portal when a runbook is tested.</span></span> <span data-ttu-id="4432f-195">根據預設，hello runbook 將會繼續在警告或錯誤後執行。</span><span class="sxs-lookup"><span data-stu-id="4432f-195">By default, hello runbook will continue executing after a warning or error.</span></span> <span data-ttu-id="4432f-196">您可以指定該 hello runbook 應該在警告或錯誤暫停藉由設定[喜好設定變數](#PreferenceVariables)建立 hello 訊息之前的 hello runbook 中。</span><span class="sxs-lookup"><span data-stu-id="4432f-196">You can specify that hello runbook should be suspended on a warning or error by setting a [preference variable](#PreferenceVariables) in hello runbook before creating hello message.</span></span> <span data-ttu-id="4432f-197">例如，toocause runbook toosuspend 在發生錯誤一樣例外狀況，設定**$ErrorActionPreference** tooStop。</span><span class="sxs-lookup"><span data-stu-id="4432f-197">For example, toocause a runbook toosuspend on an error as it would an exception, set **$ErrorActionPreference** tooStop.</span></span>

<span data-ttu-id="4432f-198">建立警告或錯誤訊息，使用 hello [Write-warning](https://technet.microsoft.com/library/hh849931.aspx)或[Write-error](http://technet.microsoft.com/library/hh849962.aspx) cmdlet。</span><span class="sxs-lookup"><span data-stu-id="4432f-198">Create a warning or error message using hello [Write-Warning](https://technet.microsoft.com/library/hh849931.aspx) or [Write-Error](http://technet.microsoft.com/library/hh849962.aspx) cmdlet.</span></span> <span data-ttu-id="4432f-199">活動也可能會撰寫 toothese 資料流。</span><span class="sxs-lookup"><span data-stu-id="4432f-199">Activities may also write toothese streams.</span></span>

    #hello following lines create a warning message and then an error message that will suspend hello runbook.

    $ErrorActionPreference = "Stop"
    Write-Warning –Message "This is a warning message."
    Write-Error –Message "This is an error message that will stop hello runbook because of hello preference variable."

### <a name="verbose-stream"></a><span data-ttu-id="4432f-200">詳細資訊資料流</span><span class="sxs-lookup"><span data-stu-id="4432f-200">Verbose stream</span></span>
<span data-ttu-id="4432f-201">hello 詳細資訊訊息串流是 hello runbook 作業的相關的一般資訊。</span><span class="sxs-lookup"><span data-stu-id="4432f-201">hello Verbose message stream is for general information about hello runbook operation.</span></span> <span data-ttu-id="4432f-202">因為 hello[偵錯資料流](#Debug)無法在 runbook 中使用，詳細訊息應該使用偵錯資訊。</span><span class="sxs-lookup"><span data-stu-id="4432f-202">Since hello [Debug Stream](#Debug) is not available in a runbook, verbose messages should be used for debug information.</span></span> <span data-ttu-id="4432f-203">根據預設，已發佈 runbook 的詳細訊息不會儲存在 hello 作業歷程記錄。</span><span class="sxs-lookup"><span data-stu-id="4432f-203">By default, verbose messages from published runbooks will not be stored in hello job history.</span></span> <span data-ttu-id="4432f-204">toostore 詳細訊息，hello hello Azure 管理入口網站中的 hello runbook 的 [設定] 索引標籤上設定已發行的 runbook tooLog 詳細記錄。</span><span class="sxs-lookup"><span data-stu-id="4432f-204">toostore verbose messages, configure published runbooks tooLog Verbose Records on hello Configure tab of hello runbook in hello Azure Management Portal.</span></span> <span data-ttu-id="4432f-205">在大部分情況下，您應該保留 hello 預設設定，不記錄 runbook 基於效能考量的詳細資訊記錄。</span><span class="sxs-lookup"><span data-stu-id="4432f-205">In most cases, you should keep hello default setting of not logging verbose records for a runbook for performance reasons.</span></span> <span data-ttu-id="4432f-206">開啟這個選項只有 tootroubleshoot 或偵錯 runbook。</span><span class="sxs-lookup"><span data-stu-id="4432f-206">Turn on this option only tootroubleshoot or debug a runbook.</span></span>

<span data-ttu-id="4432f-207">當[測試 runbook](automation-testing-runbook.md)，即使 hello runbook 設定的 toolog 詳細資訊記錄，不會顯示詳細訊息。</span><span class="sxs-lookup"><span data-stu-id="4432f-207">When [testing a runbook](automation-testing-runbook.md), verbose messages are not displayed even if hello runbook is configured toolog verbose records.</span></span> <span data-ttu-id="4432f-208">toodisplay 時的詳細資訊訊息[測試 runbook](automation-testing-runbook.md)，您必須設定 hello $VerbosePreference 變數 tooContinue。</span><span class="sxs-lookup"><span data-stu-id="4432f-208">toodisplay verbose messages while [testing a runbook](automation-testing-runbook.md), you must set hello $VerbosePreference variable tooContinue.</span></span> <span data-ttu-id="4432f-209">設定該變數會在 hello 的 hello Azure 入口網站的 [測試輸出] 窗格中顯示詳細訊息。</span><span class="sxs-lookup"><span data-stu-id="4432f-209">With that variable set, verbose messages will be displayed in hello Test Output Pane of hello Azure portal.</span></span>

<span data-ttu-id="4432f-210">建立使用 hello 的詳細資訊訊息[Write-verbose](http://technet.microsoft.com/library/hh849951.aspx) cmdlet。</span><span class="sxs-lookup"><span data-stu-id="4432f-210">Create a verbose message using hello [Write-Verbose](http://technet.microsoft.com/library/hh849951.aspx) cmdlet.</span></span>

    #hello following line creates a verbose message.

    Write-Verbose –Message "This is a verbose message."

### <a name="debug-stream"></a><span data-ttu-id="4432f-211">偵錯資料流</span><span class="sxs-lookup"><span data-stu-id="4432f-211">Debug stream</span></span>
<span data-ttu-id="4432f-212">hello 偵錯資料流適用於互動式使用者，並且不應該在 runbook 中使用。</span><span class="sxs-lookup"><span data-stu-id="4432f-212">hello Debug stream is intended for use with an interactive user and should not be used in runbooks.</span></span>

## <a name="progress-records"></a><span data-ttu-id="4432f-213">進度記錄</span><span class="sxs-lookup"><span data-stu-id="4432f-213">Progress records</span></span>
<span data-ttu-id="4432f-214">如果您設定 runbook toolog 進度記錄 （在 hello 的 hello Azure 入口網站中的 hello runbook 設定索引標籤），則記錄會將寫入 toohello 作業歷程記錄之前和之後每個活動執行。</span><span class="sxs-lookup"><span data-stu-id="4432f-214">If you configure a runbook toolog progress records (on hello Configure tab of hello runbook in hello Azure portal), then a record will be written toohello job history before and after each activity is run.</span></span> <span data-ttu-id="4432f-215">在大部分情況下，您應該保留不記錄 runbook 的進度記錄順序 toomaximize 效能的 hello 預設設定。</span><span class="sxs-lookup"><span data-stu-id="4432f-215">In most cases, you should keep hello default setting of not logging progress records for a runbook in order toomaximize performance.</span></span> <span data-ttu-id="4432f-216">開啟這個選項只有 tootroubleshoot 或偵錯 runbook。</span><span class="sxs-lookup"><span data-stu-id="4432f-216">Turn on this option only tootroubleshoot or debug a runbook.</span></span> <span data-ttu-id="4432f-217">在測試 runbook 時，即使 hello runbook 設定的 toolog 進度記錄，將不會顯示進度訊息。</span><span class="sxs-lookup"><span data-stu-id="4432f-217">When testing a runbook, progress messages are not displayed even if hello runbook is configured toolog progress records.</span></span>

<span data-ttu-id="4432f-218">hello [Write-progress](http://technet.microsoft.com/library/hh849902.aspx)指令程式中不是有效的 runbook，因為這供互動式使用者。</span><span class="sxs-lookup"><span data-stu-id="4432f-218">hello [Write-Progress](http://technet.microsoft.com/library/hh849902.aspx) cmdlet is not valid in a runbook, since this is intended for use with an interactive user.</span></span>

## <a name="preference-variables"></a><span data-ttu-id="4432f-219">喜好設定變數</span><span class="sxs-lookup"><span data-stu-id="4432f-219">Preference variables</span></span>
<span data-ttu-id="4432f-220">Windows PowerShell 會使用[喜好設定變數](http://technet.microsoft.com/library/hh847796.aspx)toodetermine toorespond toodata 傳送 toodifferent 輸出資料流的方式。</span><span class="sxs-lookup"><span data-stu-id="4432f-220">Windows PowerShell uses [preference variables](http://technet.microsoft.com/library/hh847796.aspx) toodetermine how toorespond toodata sent toodifferent output streams.</span></span> <span data-ttu-id="4432f-221">您可以設定這些變數在它將如何回應傳送到不同的資料流的 toodata runbook toocontrol。</span><span class="sxs-lookup"><span data-stu-id="4432f-221">You can set these variables in a runbook toocontrol how it will respond toodata sent into different streams.</span></span>

<span data-ttu-id="4432f-222">hello 下表列出可用於 runbook 及其有效值和預設值的 hello 喜好設定變數。</span><span class="sxs-lookup"><span data-stu-id="4432f-222">hello following table lists hello preference variables that can be used in runbooks with their valid and default values.</span></span> <span data-ttu-id="4432f-223">請注意，本表只包含 runbook 中有效的 hello 值。</span><span class="sxs-lookup"><span data-stu-id="4432f-223">Note that this table only includes hello values that are valid in a runbook.</span></span> <span data-ttu-id="4432f-224">其他的值為 hello 喜好設定變數在 Azure 自動化之外的 Windows PowerShell 中使用時的有效值。</span><span class="sxs-lookup"><span data-stu-id="4432f-224">Additional values are valid for hello preference variables when used in Windows PowerShell outside of Azure Automation.</span></span>

| <span data-ttu-id="4432f-225">變數</span><span class="sxs-lookup"><span data-stu-id="4432f-225">Variable</span></span> | <span data-ttu-id="4432f-226">預設值</span><span class="sxs-lookup"><span data-stu-id="4432f-226">Default Value</span></span> | <span data-ttu-id="4432f-227">有效值</span><span class="sxs-lookup"><span data-stu-id="4432f-227">Valid Values</span></span> |
|:--- |:--- |:--- |
| <span data-ttu-id="4432f-228">WarningPreference</span><span class="sxs-lookup"><span data-stu-id="4432f-228">WarningPreference</span></span> |<span data-ttu-id="4432f-229">Continue</span><span class="sxs-lookup"><span data-stu-id="4432f-229">Continue</span></span> |<span data-ttu-id="4432f-230">Stop</span><span class="sxs-lookup"><span data-stu-id="4432f-230">Stop</span></span><br><span data-ttu-id="4432f-231">Continue</span><span class="sxs-lookup"><span data-stu-id="4432f-231">Continue</span></span><br><span data-ttu-id="4432f-232">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="4432f-232">SilentlyContinue</span></span> |
| <span data-ttu-id="4432f-233">ErrorActionPreference</span><span class="sxs-lookup"><span data-stu-id="4432f-233">ErrorActionPreference</span></span> |<span data-ttu-id="4432f-234">Continue</span><span class="sxs-lookup"><span data-stu-id="4432f-234">Continue</span></span> |<span data-ttu-id="4432f-235">Stop</span><span class="sxs-lookup"><span data-stu-id="4432f-235">Stop</span></span><br><span data-ttu-id="4432f-236">Continue</span><span class="sxs-lookup"><span data-stu-id="4432f-236">Continue</span></span><br><span data-ttu-id="4432f-237">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="4432f-237">SilentlyContinue</span></span> |
| <span data-ttu-id="4432f-238">VerbosePreference</span><span class="sxs-lookup"><span data-stu-id="4432f-238">VerbosePreference</span></span> |<span data-ttu-id="4432f-239">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="4432f-239">SilentlyContinue</span></span> |<span data-ttu-id="4432f-240">Stop</span><span class="sxs-lookup"><span data-stu-id="4432f-240">Stop</span></span><br><span data-ttu-id="4432f-241">Continue</span><span class="sxs-lookup"><span data-stu-id="4432f-241">Continue</span></span><br><span data-ttu-id="4432f-242">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="4432f-242">SilentlyContinue</span></span> |

<span data-ttu-id="4432f-243">hello 下表列出 hello 喜好設定變數值 runbook 中有效的 hello 行為。</span><span class="sxs-lookup"><span data-stu-id="4432f-243">hello following table lists hello behavior for hello preference variable values that are valid in runbooks.</span></span>

| <span data-ttu-id="4432f-244">值</span><span class="sxs-lookup"><span data-stu-id="4432f-244">Value</span></span> | <span data-ttu-id="4432f-245">行為</span><span class="sxs-lookup"><span data-stu-id="4432f-245">Behavior</span></span> |
|:--- |:--- |
| <span data-ttu-id="4432f-246">Continue</span><span class="sxs-lookup"><span data-stu-id="4432f-246">Continue</span></span> |<span data-ttu-id="4432f-247">Hello 訊息記錄，並繼續執行 hello runbook。</span><span class="sxs-lookup"><span data-stu-id="4432f-247">Logs hello message and continues executing hello runbook.</span></span> |
| <span data-ttu-id="4432f-248">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="4432f-248">SilentlyContinue</span></span> |<span data-ttu-id="4432f-249">繼續執行 hello runbook 而不記錄 hello 訊息。</span><span class="sxs-lookup"><span data-stu-id="4432f-249">Continues executing hello runbook without logging hello message.</span></span> <span data-ttu-id="4432f-250">這有 hello 作法會忽略 hello 訊息。</span><span class="sxs-lookup"><span data-stu-id="4432f-250">This has hello effect of ignoring hello message.</span></span> |
| <span data-ttu-id="4432f-251">停止</span><span class="sxs-lookup"><span data-stu-id="4432f-251">Stop</span></span> |<span data-ttu-id="4432f-252">Hello 訊息記錄，並擱置 hello runbook。</span><span class="sxs-lookup"><span data-stu-id="4432f-252">Logs hello message and suspends hello runbook.</span></span> |

## <a name="retrieving-runbook-output-and-messages"></a><span data-ttu-id="4432f-253">擷取 Runbook 輸出和訊息</span><span class="sxs-lookup"><span data-stu-id="4432f-253">Retrieving runbook output and messages</span></span>
### <a name="azure-portal"></a><span data-ttu-id="4432f-254">Azure 入口網站</span><span class="sxs-lookup"><span data-stu-id="4432f-254">Azure portal</span></span>
<span data-ttu-id="4432f-255">您可以在 hello hello runbook 的 [工作] 索引標籤從 Azure 入口網站中檢視 runbook 工作的 hello 詳細資料。</span><span class="sxs-lookup"><span data-stu-id="4432f-255">You can view hello details of a runbook job in hello Azure portal from hello Jobs tab of a runbook.</span></span> <span data-ttu-id="4432f-256">hello hello 工作的摘要會顯示 hello 輸入的參數和 hello[輸出資料流](#Output)在加法 toogeneral hello 工作和資訊任何發生的例外狀況。</span><span class="sxs-lookup"><span data-stu-id="4432f-256">hello Summary of hello job will display hello input parameters and hello [Output Stream](#Output) in addition toogeneral information about hello job and any exceptions if they occurred.</span></span> <span data-ttu-id="4432f-257">hello 歷程記錄會包含來自 hello 訊息[輸出資料流](#Output)和[Warning and Error Streams](#WarningError)中新增 toohello [Verbose Stream](#Verbose)和[進度記錄](#Progress)hello runbook 是否已設定的 toolog 詳細資訊和進度記錄。</span><span class="sxs-lookup"><span data-stu-id="4432f-257">hello History will include messages from hello [Output Stream](#Output) and [Warning and Error Streams](#WarningError) in addition toohello [Verbose Stream](#Verbose) and [Progress Records](#Progress) if hello runbook is configured toolog verbose and progress records.</span></span>

### <a name="windows-powershell"></a><span data-ttu-id="4432f-258">Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="4432f-258">Windows PowerShell</span></span>
<span data-ttu-id="4432f-259">在 Windows PowerShell 中擷取輸出和訊息從 runbook 使用 hello [Get-azureautomationjoboutput](https://msdn.microsoft.com/library/mt603476.aspx) cmdlet。</span><span class="sxs-lookup"><span data-stu-id="4432f-259">In Windows PowerShell, you can retrieve output and messages from a runbook using hello [Get-AzureAutomationJobOutput](https://msdn.microsoft.com/library/mt603476.aspx) cmdlet.</span></span> <span data-ttu-id="4432f-260">此 cmdlet 需要 hello hello 作業的識別碼，而且具有參數稱為您用來指定哪些資料流 tooreturn 資料流。</span><span class="sxs-lookup"><span data-stu-id="4432f-260">This cmdlet requires hello ID of hello job and has a parameter called Stream where you specify which stream tooreturn.</span></span> <span data-ttu-id="4432f-261">您可以指定任何 tooreturn hello 作業的所有資料流。</span><span class="sxs-lookup"><span data-stu-id="4432f-261">You can specify Any tooreturn all streams for hello job.</span></span>

<span data-ttu-id="4432f-262">下列範例中的 hello 範例 runbook，然後等候它開始 toocomplete。</span><span class="sxs-lookup"><span data-stu-id="4432f-262">hello following example starts a sample runbook and then waits for it toocomplete.</span></span> <span data-ttu-id="4432f-263">完成後，從 hello 工作收集其輸出資料流。</span><span class="sxs-lookup"><span data-stu-id="4432f-263">Once completed, its output stream is collected from hello job.</span></span>

    $job = Start-AzureRmAutomationRunbook -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAccount" –Name "Test-Runbook"

    $doLoop = $true
    While ($doLoop) {
       $job = Get-AzureRmAutomationJob -ResourceGroupName "ResourceGroup01" `
       –AutomationAccountName "MyAutomationAccount" -Id $job.JobId
       $status = $job.Status
       $doLoop = (($status -ne "Completed") -and ($status -ne "Failed") -and ($status -ne "Suspended") -and ($status -ne "Stopped")
    }

    Get-AzureRmAutomationJobOutput -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAccount" -Id $job.JobId –Stream Output

### <a name="graphical-authoring"></a><span data-ttu-id="4432f-264">圖形化編寫</span><span class="sxs-lookup"><span data-stu-id="4432f-264">Graphical Authoring</span></span>
<span data-ttu-id="4432f-265">圖形化 runbook，額外的記錄會提供活動層級追蹤 hello 形式。</span><span class="sxs-lookup"><span data-stu-id="4432f-265">For graphical runbooks, extra logging is available in hello form of activity-level tracing.</span></span>  <span data-ttu-id="4432f-266">追蹤有兩種等級：基本及詳細。</span><span class="sxs-lookup"><span data-stu-id="4432f-266">There are two levels of tracing: Basic and Detailed.</span></span>  <span data-ttu-id="4432f-267">在基本追蹤中，您可以查看 hello 啟動以及 hello runbook 會加上資訊中每個活動的結束時間相關 tooany 活動重試嘗試次數等 hello 活動開始時間。</span><span class="sxs-lookup"><span data-stu-id="4432f-267">In Basic tracing, you can see hello start and end time of each activity in hello runbook plus information related tooany activity retries, such as number of attempts and start time of hello activity.</span></span>  <span data-ttu-id="4432f-268">在詳細追蹤中，您會得到基本追蹤的結果，加上每個活動的輸入及輸出資料。</span><span class="sxs-lookup"><span data-stu-id="4432f-268">In Detailed tracing, you get Basic tracing plus input and output data for each activity.</span></span>  <span data-ttu-id="4432f-269">請注意，目前 hello 追蹤記錄會寫入使用 hello 詳細資料流，因此您必須啟用詳細資訊記錄，當您啟用追蹤。</span><span class="sxs-lookup"><span data-stu-id="4432f-269">Note that currently hello trace records are written using hello verbose stream, so you must enable Verbose logging when you enable tracing.</span></span>  <span data-ttu-id="4432f-270">啟用追蹤的圖形化 runbook 無須 toolog 進度記錄，因為 hello 基本追蹤做 hello 相同的目的，而且更有用的資訊。</span><span class="sxs-lookup"><span data-stu-id="4432f-270">For graphical runbooks with tracing enabled there is no need toolog progress records, because hello Basic tracing serves hello same purpose and is more informative.</span></span>

![圖形化編寫的工作串流檢視](media/automation-runbook-output-and-messages/job-streams-view-blade.png)

<span data-ttu-id="4432f-272">您可以從上述螢幕擷取畫面的 hello 了，當您啟用記錄和追蹤的圖形化 runbook 的詳細資訊，更多的資訊會顯示在 hello 實際執行的工作資料流檢視。</span><span class="sxs-lookup"><span data-stu-id="4432f-272">You can see from hello above screenshot that when you enable Verbose logging and tracing for Graphical runbooks, much more information is available in hello production Job Streams view.</span></span>  <span data-ttu-id="4432f-273">這些額外的資訊在您排解 Runbook 相關的生產問題時是不可或缺的，因此您應該只為這個目的來啟用該功能，而不是隨時啟用。</span><span class="sxs-lookup"><span data-stu-id="4432f-273">This extra information can be essential for troubleshooting production problems with a runbook, and therefore you should only enable it for that purpose and not as a general practice.</span></span>    
<span data-ttu-id="4432f-274">hello 追蹤記錄可以是許多特別。</span><span class="sxs-lookup"><span data-stu-id="4432f-274">hello Trace records can be especially numerous.</span></span>  <span data-ttu-id="4432f-275">使用圖形化 runbook 追蹤您可以取得每個活動，根據是否您有設定基本或詳細追蹤的兩個 toofour 記錄。</span><span class="sxs-lookup"><span data-stu-id="4432f-275">With Graphical runbook tracing you can get two toofour records per activity depending on whether you have configured Basic or Detailed tracing.</span></span>  <span data-ttu-id="4432f-276">除非您需要資訊 tootrack hello 處理 runbook 的疑難排解時，您可能想的 tookeep 追蹤已關閉。</span><span class="sxs-lookup"><span data-stu-id="4432f-276">Unless you need this information tootrack hello progress of a runbook for troubleshooting, you might want tookeep Tracing turned off.</span></span>

<span data-ttu-id="4432f-277">**tooenable 活動層級追蹤，執行下列步驟的 hello。**</span><span class="sxs-lookup"><span data-stu-id="4432f-277">**tooenable activity-level tracing, perform hello following steps.**</span></span>

1. <span data-ttu-id="4432f-278">在 hello Azure 入口網站，開啟您的自動化帳戶。</span><span class="sxs-lookup"><span data-stu-id="4432f-278">In hello Azure Portal, open your Automation account.</span></span>
2. <span data-ttu-id="4432f-279">按一下 hello **Runbook**磚 tooopen hello runbook 的清單。</span><span class="sxs-lookup"><span data-stu-id="4432f-279">Click on hello **Runbooks** tile tooopen hello list of runbooks.</span></span>
3. <span data-ttu-id="4432f-280">在 hello Runbook 刀鋒視窗中，按一下 tooselect 從您的 runbook 清單圖形化 runbook。</span><span class="sxs-lookup"><span data-stu-id="4432f-280">On hello Runbooks blade, click tooselect a graphical runbook from your list of runbooks.</span></span>
4. <span data-ttu-id="4432f-281">在 hello 設定刀鋒視窗中的 hello 選取 runbook，按一下  **Logging and Tracing**。</span><span class="sxs-lookup"><span data-stu-id="4432f-281">On hello Settings blade for hello selected runbook, click **Logging and Tracing**.</span></span>
5. <span data-ttu-id="4432f-282">在 hello Logging and Tracing 刀鋒視窗中，在記錄檔的詳細資訊記錄，按一下 **上**tooenable 詳細資訊記錄和 udner 活動層級追蹤變更 hello 追蹤層級太**基本**或**詳細資料**根據 hello 您要求的追蹤層級。</span><span class="sxs-lookup"><span data-stu-id="4432f-282">On hello Logging and Tracing blade, under Log verbose records, click **On** tooenable verbose logging and udner Activity-level tracing, change hello trace level too**Basic** or **Detailed** based on hello level of tracing you require.</span></span><br>
   
   ![圖形化編寫的 [記錄和追蹤] 刀鋒視窗](media/automation-runbook-output-and-messages/logging-and-tracing-settings-blade.png)

### <a name="microsoft-operations-management-suite-oms-log-analytics"></a><span data-ttu-id="4432f-284">Microsoft Operations Management Suite (OMS) Log Analytics</span><span class="sxs-lookup"><span data-stu-id="4432f-284">Microsoft Operations Management Suite (OMS) Log Analytics</span></span>
<span data-ttu-id="4432f-285">自動化可以傳送 runbook 工作狀態和作業資料流 tooyour Microsoft Operations Management Suite (OMS) 記錄分析工作區。</span><span class="sxs-lookup"><span data-stu-id="4432f-285">Automation can send runbook job status and job streams tooyour Microsoft Operations Management Suite (OMS) Log Analytics workspace.</span></span>  <span data-ttu-id="4432f-286">透過 Log Analytics，您可以：</span><span class="sxs-lookup"><span data-stu-id="4432f-286">With Log Analytics you can,</span></span>

* <span data-ttu-id="4432f-287">針對自動化工作取得深入解析</span><span class="sxs-lookup"><span data-stu-id="4432f-287">Get insight on your Automation jobs</span></span> 
* <span data-ttu-id="4432f-288">根據您的 Runbook 工作狀態 (例如已失敗或已暫停) 觸發電子郵件或警示</span><span class="sxs-lookup"><span data-stu-id="4432f-288">Trigger an email or alert based on your runbook job status (e.g. failed or suspended)</span></span> 
* <span data-ttu-id="4432f-289">撰寫工作資料流之間的進階查詢</span><span class="sxs-lookup"><span data-stu-id="4432f-289">Write advanced queries across your job streams</span></span> 
* <span data-ttu-id="4432f-290">在自動化帳戶之間相互關聯工作</span><span class="sxs-lookup"><span data-stu-id="4432f-290">Correlate jobs across Automation accounts</span></span> 
* <span data-ttu-id="4432f-291">視覺化一段時間的工作歷程記錄</span><span class="sxs-lookup"><span data-stu-id="4432f-291">Visualize your job history over time</span></span>    

<span data-ttu-id="4432f-292">如需有關如何使用記錄分析 toocollect tooconfigure 整合相互關聯，並處理的作業資料的詳細資訊，請參閱[自動化 tooLog 分析 (OMS) 從轉寄工作狀態和作業資料流](automation-manage-send-joblogs-log-analytics.md)。</span><span class="sxs-lookup"><span data-stu-id="4432f-292">For more information on how tooconfigure integration with Log Analytics toocollect, correlate and act on job data, see [Forward job status and job streams from Automation tooLog Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="4432f-293">後續步驟</span><span class="sxs-lookup"><span data-stu-id="4432f-293">Next steps</span></span>
* <span data-ttu-id="4432f-294">深入了解 runbook 執行時，如何 toomonitor runbook 作業和其他技術的詳細資訊，請參閱 toolearn[追蹤 runbook 工作](automation-runbook-execution.md)</span><span class="sxs-lookup"><span data-stu-id="4432f-294">toolearn more about runbook execution, how toomonitor runbook jobs, and other technical details, see [Track a runbook job](automation-runbook-execution.md)</span></span>
* <span data-ttu-id="4432f-295">如何 toodesign 和使用的子系 runbook，請參閱的 toounderstand [Azure 自動化中的子 runbook](automation-child-runbooks.md)</span><span class="sxs-lookup"><span data-stu-id="4432f-295">toounderstand how toodesign and use child runbooks, see [Child runbooks in Azure Automation](automation-child-runbooks.md)</span></span>

