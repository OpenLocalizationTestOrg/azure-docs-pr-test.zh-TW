---
title: "針對常見的 Azure 自動化問題進行疑難排解 | Microsoft Docs"
description: "本文提供相關資訊，以便針對常見 Azure 自動化錯誤進行疑難排解和修正。"
services: automation
documentationcenter: 
author: mgoedtel
manager: stevenka
editor: tysonn
tags: top-support-issue
keywords: "自動化錯誤, 疑難排解, 問題"
ms.assetid: 5f3cfe61-70b0-4e9c-b892-d02daaeee07d
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/26/2017
ms.author: sngun; v-reagie
ms.openlocfilehash: 64548d91e98754210cc5185d9d759141cc0621d3
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/11/2017
---
# <a name="troubleshooting-common-issues-in-azure-automation"></a><span data-ttu-id="6904b-104">針對 Azure 自動化中的常見問題進行疑難排解</span><span class="sxs-lookup"><span data-stu-id="6904b-104">Troubleshooting common issues in Azure Automation</span></span> 
<span data-ttu-id="6904b-105">本文提供針對您在 Azure 自動化中可能遇到的一些常見錯誤進行疑難排解的協助，並且建議可能的解決方法。</span><span class="sxs-lookup"><span data-stu-id="6904b-105">This article provides help troubleshooting common errors you might experience in Azure Automation and suggests possible solutions to resolve them.</span></span>

## <a name="authentication-errors-when-working-with-azure-automation-runbooks"></a><span data-ttu-id="6904b-106">使用 Azure 自動化 Runbook 時的驗證錯誤</span><span class="sxs-lookup"><span data-stu-id="6904b-106">Authentication errors when working with Azure Automation runbooks</span></span>
### <a name="scenario-sign-in-to-azure-account-failed"></a><span data-ttu-id="6904b-107">案例：登入 Azure 帳戶失敗</span><span class="sxs-lookup"><span data-stu-id="6904b-107">Scenario: Sign in to Azure Account failed</span></span>
<span data-ttu-id="6904b-108">**錯誤：**使用 Add-AzureAccount 或 Login-AzureRmAccount Cmdlet 時，收到錯誤「Unknown_user_type：未知的使用者類型」。</span><span class="sxs-lookup"><span data-stu-id="6904b-108">**Error:** You receive the error "Unknown_user_type: Unknown User Type" when working with the Add-AzureAccount or Login-AzureRmAccount cmdlets.</span></span>

<span data-ttu-id="6904b-109">**錯誤的原因：** 如果認證資產名稱無效，或您用來設定「自動化」認證資產的使用者名稱和密碼無效，就會發生此錯誤。</span><span class="sxs-lookup"><span data-stu-id="6904b-109">**Reason for the error:** This error occurs if the credential asset name is not valid or if the username and password that you used to setup the Automation credential asset are not valid.</span></span>

<span data-ttu-id="6904b-110">**疑難排解秘訣：** 為了判斷錯誤原因，請執行下列步驟：</span><span class="sxs-lookup"><span data-stu-id="6904b-110">**Troubleshooting tips:** In order to determine what's wrong, take the following steps:</span></span>  

1. <span data-ttu-id="6904b-111">請確定您沒有任何特殊字元，包括用來連接到 Azure 的「自動化」認證資產名稱中的 **@** 符號。</span><span class="sxs-lookup"><span data-stu-id="6904b-111">Make sure that you don’t have any special characters, including the **@** character in the Automation credential asset name that you are using to connect to Azure.</span></span>  
2. <span data-ttu-id="6904b-112">請檢查您可以使用儲存在本機 PowerShell ISE 編輯器中的 Azure 自動化認證的使用者名稱和密碼。</span><span class="sxs-lookup"><span data-stu-id="6904b-112">Check that you can use the username and password that are stored in the Azure Automation credential in your local PowerShell ISE editor.</span></span> <span data-ttu-id="6904b-113">您可以藉由在 PowerShell ISE 中執行下列 Cmdlet 來完成這項操作：</span><span class="sxs-lookup"><span data-stu-id="6904b-113">You can do this by running the following cmdlets in the PowerShell ISE:</span></span>  

        $Cred = Get-Credential  
        #Using Azure Service Management   
        Add-AzureAccount –Credential $Cred  
        #Using Azure Resource Manager  
        Login-AzureRmAccount –Credential $Cred
3. <span data-ttu-id="6904b-114">如果您的驗證在本機失敗，這表示您尚未正確設定 Azure Active Directory 認證。</span><span class="sxs-lookup"><span data-stu-id="6904b-114">If your authentication fails locally, this means that you haven’t set up your Azure Active Directory credentials properly.</span></span> <span data-ttu-id="6904b-115">請參閱 [Authenticating to Azure using Azure Active Directory (使用 Azure Active Directory 對 Azure 進行驗證)](https://azure.microsoft.com/blog/azure-automation-authenticating-to-azure-using-azure-active-directory/) 部落格文章，以正確設定 Azure Active Directory 帳戶。</span><span class="sxs-lookup"><span data-stu-id="6904b-115">Refer to [Authenticating to Azure using Azure Active Directory](https://azure.microsoft.com/blog/azure-automation-authenticating-to-azure-using-azure-active-directory/) blog post to get the Azure Active Directory account set up correctly.</span></span>  

### <a name="scenario-unable-to-find-the-azure-subscription"></a><span data-ttu-id="6904b-116">案例：找不到 Azure 訂用帳戶</span><span class="sxs-lookup"><span data-stu-id="6904b-116">Scenario: Unable to find the Azure subscription</span></span>
<span data-ttu-id="6904b-117">**錯誤︰**使用 Select-AzureSubscription 或 Select-AzureRmSubscription Cmdlet 時，收到錯誤訊息「找不到名為 ``<subscription name>`` 的訂用帳戶」。</span><span class="sxs-lookup"><span data-stu-id="6904b-117">**Error:** You receive the error "The subscription named ``<subscription name>`` cannot be found" when working with the Select-AzureSubscription or Select-AzureRmSubscription cmdlets.</span></span>

<span data-ttu-id="6904b-118">**錯誤的原因：** 如果訂用帳戶名稱無效，或嘗試取得訂用帳戶詳細資料的 Azure Active Directory 使用者沒有被設定為訂用帳戶的系統管理員，就會發生此錯誤。</span><span class="sxs-lookup"><span data-stu-id="6904b-118">**Reason for the error:** This error occurs if the subscription name is not valid or if the Azure Active Directory user who is trying to get the subscription details is not configured as an admin of the subscription.</span></span>

<span data-ttu-id="6904b-119">**疑難排解秘訣：** 如要判斷您是否已正確地向 Azure 驗證自己的身分，以及您是否有您嘗試選取之訂用帳戶的存取權，請執行下列步驟：</span><span class="sxs-lookup"><span data-stu-id="6904b-119">**Troubleshooting tips:** In order to determine if you have properly authenticated to Azure and have access to the subscription you are trying to select, take the following steps:</span></span>  

1. <span data-ttu-id="6904b-120">確認您在執行 **Select-AzureSubscription** Cmdlet 之前，已經執行 **Add-AzureAccount**。</span><span class="sxs-lookup"><span data-stu-id="6904b-120">Make sure that you run the **Add-AzureAccount** before running the **Select-AzureSubscription** cmdlet.</span></span>  
2. <span data-ttu-id="6904b-121">如果您仍然看到此錯誤訊息，請修改您的程式碼，方法是在 **Add-AzureAccount** Cmdlet 之後新增 **Get-AzureSubscription** Cmdlet，然後執行此程式碼。</span><span class="sxs-lookup"><span data-stu-id="6904b-121">If you still see this error message, modify your code by adding the **Get-AzureSubscription** cmdlet following the **Add-AzureAccount** cmdlet and then execute the code.</span></span>  <span data-ttu-id="6904b-122">現在，請確認 Get-AzureSubscription 的輸出是否包含您的訂用帳戶詳細資料。</span><span class="sxs-lookup"><span data-stu-id="6904b-122">Now verify if the output of Get-AzureSubscription contains your subscription details.</span></span>  

   * <span data-ttu-id="6904b-123">如果您在輸出中未看到任何訂用帳戶詳細資料，這表示訂用帳戶尚未初始化。</span><span class="sxs-lookup"><span data-stu-id="6904b-123">If you don't see any subscription details in the output, this means that the subscription isn’t initialized yet.</span></span>  
   * <span data-ttu-id="6904b-124">如果您的確在輸出中看到訂用帳戶詳細資料，請利用 **Select-AzureSubscription** Cmdlet 來確認您使用的是正確的訂用帳戶名稱或 ID。</span><span class="sxs-lookup"><span data-stu-id="6904b-124">If you do see the subscription details in the output, confirm that you are using the correct subscription name or ID with the **Select-AzureSubscription** cmdlet.</span></span>   

### <a name="scenario-authentication-to-azure-failed-because-multi-factor-authentication-is-enabled"></a><span data-ttu-id="6904b-125">案例：對 Azure 的驗證失敗，因為已啟用多重要素驗證</span><span class="sxs-lookup"><span data-stu-id="6904b-125">Scenario: Authentication to Azure failed because multi-factor authentication is enabled</span></span>
<span data-ttu-id="6904b-126">**錯誤：** 使用您的 Azure 使用者名稱和密碼向 Azure 進行驗證時，收到「Add-AzureAccount：AADSTS50079：需要強式驗證註冊 (proof-up)」錯誤。</span><span class="sxs-lookup"><span data-stu-id="6904b-126">**Error:** You receive the error “Add-AzureAccount: AADSTS50079: Strong authentication enrollment (proof-up) is required” when authenticating to Azure with your Azure username and password.</span></span>

<span data-ttu-id="6904b-127">**錯誤的原因：** 如果您的 Azure 帳戶使用多重要素驗證，您就無法使用 Azure Active Directory 使用者來向 Azure 進行驗證。</span><span class="sxs-lookup"><span data-stu-id="6904b-127">**Reason for the error:** If you have multi-factor authentication on your Azure account, you can't use an Azure Active Directory user to authenticate to Azure.</span></span>  <span data-ttu-id="6904b-128">相反地，您必須使用憑證或服務主體來向 Azure 驗證。</span><span class="sxs-lookup"><span data-stu-id="6904b-128">Instead, you need to use a certificate or a service principal to authenticate to Azure.</span></span>

<span data-ttu-id="6904b-129">**疑難排解秘訣：**如要搭配 Azure 服務管理的 Cmdlet 來使用憑證，請參閱[建立及新增憑證來管理 Azure 服務](http://blogs.technet.com/b/orchestrator/archive/2014/04/11/managing-azure-services-with-the-microsoft-azure-automation-preview-service.aspx)</span><span class="sxs-lookup"><span data-stu-id="6904b-129">**Troubleshooting tips:** To use a certificate with the Azure Service Management cmdlets, refer to [creating and adding a certificate to manage Azure services.](http://blogs.technet.com/b/orchestrator/archive/2014/04/11/managing-azure-services-with-the-microsoft-azure-automation-preview-service.aspx)</span></span> <span data-ttu-id="6904b-130">若要搭配 Azure Resource Manager Cmdlet 來使用服務主體，請參閱[使用 Azure 入口網站來建立服務主體](../azure-resource-manager/resource-group-create-service-principal-portal.md)和[使用 Azure Resource Manager 驗證服務主體](../azure-resource-manager/resource-group-authenticate-service-principal.md)</span><span class="sxs-lookup"><span data-stu-id="6904b-130">To use a service principal with Azure Resource Manager cmdlets, refer to [creating service principal using Azure portal](../azure-resource-manager/resource-group-create-service-principal-portal.md) and [authenticating a service principal with Azure Resource Manager.](../azure-resource-manager/resource-group-authenticate-service-principal.md)</span></span>

## <a name="common-errors-when-working-with-runbooks"></a><span data-ttu-id="6904b-131">使用 Runbook 時的常見錯誤</span><span class="sxs-lookup"><span data-stu-id="6904b-131">Common errors when working with runbooks</span></span>
### <a name="scenario-the-runbook-job-start-was-attempted-three-times-but-it-failed-to-start-each-time"></a><span data-ttu-id="6904b-132">案例：已嘗試啟動 Runbook 作業三次，但無法每次都能啟動</span><span class="sxs-lookup"><span data-stu-id="6904b-132">Scenario: The runbook job start was attempted three times, but it failed to start each time</span></span>
<span data-ttu-id="6904b-133">**錯誤：**Runbook 失敗，錯誤為「作業已嘗試三次但失敗」。</span><span class="sxs-lookup"><span data-stu-id="6904b-133">**Error:** Your runbook fails with the error "“The job was tried three times but it failed."</span></span>

<span data-ttu-id="6904b-134">**錯誤原因：**這個錯誤可能是下列原因所造成：</span><span class="sxs-lookup"><span data-stu-id="6904b-134">**Reason for the error:** This error can be caused by the following reasons:</span></span>  

1. <span data-ttu-id="6904b-135">記憶體限制。</span><span class="sxs-lookup"><span data-stu-id="6904b-135">Memory Limit.</span></span>  <span data-ttu-id="6904b-136">我們已記載配置給沙箱[自動化服務限制](../azure-subscription-service-limits.md#automation-limits)的記憶體數量限制；因此，如果使用的記憶體超過 400 MB 記憶體，則作業可能會失敗。</span><span class="sxs-lookup"><span data-stu-id="6904b-136">We have documented limits on how much memory allocated to a Sandbox  [Automation service limits](../azure-subscription-service-limits.md#automation-limits) so a job may fail it if is using more than 400 MB of memory.</span></span> 

2. <span data-ttu-id="6904b-137">模組不相容。</span><span class="sxs-lookup"><span data-stu-id="6904b-137">Module Incompatible.</span></span>  <span data-ttu-id="6904b-138">如果模組相依性不正確，可能會發生這個錯誤；而且不正確時，您的 Runbook 通常會傳回「找不到命令」或「無法繫結參數」訊息。</span><span class="sxs-lookup"><span data-stu-id="6904b-138">This can occur if module dependencies are not correct and if they are not, your runbook will typically return a “Command not found” or "Cannot bind parameter" message.</span></span> 

<span data-ttu-id="6904b-139">**疑難排解秘訣：** 下列任何一個解決方案都可以修正此問題：</span><span class="sxs-lookup"><span data-stu-id="6904b-139">**Troubleshooting tips:** Any of the following solutions will fix the problem:</span></span>  

* <span data-ttu-id="6904b-140">在記憶體限制內運作的建議方法是分割多個 Runbook 之間的工作負載、不要處理記憶體中的太多資料、不要寫入來自 Runbook 的不必要輸出，或考慮您寫入 PowerShell 工作流程 Runbook 的檢查點數目。</span><span class="sxs-lookup"><span data-stu-id="6904b-140">Suggested methods to work within the memory limit are to split the workload between multiple runbooks, not process as much data in memory, not to write unnecessary output from your runbooks, or consider how many checkpoints you write into your PowerShell workflow runbooks.</span></span>  

* <span data-ttu-id="6904b-141">您需要遵循[如何更新 Azure 自動化中的 Azure PowerShell 模組](automation-update-azure-modules.md)步驟來更新 Azure 模組。</span><span class="sxs-lookup"><span data-stu-id="6904b-141">You need to update your Azure modules by following the steps [How to update Azure PowerShell modules in Azure Automation](automation-update-azure-modules.md).</span></span>  


### <a name="scenario-runbook-fails-because-of-deserialized-object"></a><span data-ttu-id="6904b-142">案例：Runbook 因還原序列化物件而失敗</span><span class="sxs-lookup"><span data-stu-id="6904b-142">Scenario: Runbook fails because of deserialized object</span></span>
<span data-ttu-id="6904b-143">**錯誤：``<ParameterName>``您的 Runbook 失敗且具有錯誤「無法繫結參數** 。</span><span class="sxs-lookup"><span data-stu-id="6904b-143">**Error:** Your runbook fails with the error "Cannot bind parameter ``<ParameterName>``.</span></span> <span data-ttu-id="6904b-144">無法將類型還原序列化 ``<ParameterType>`` 的 ``<ParameterType>`` 值轉換為類型 ``<ParameterType>``」。</span><span class="sxs-lookup"><span data-stu-id="6904b-144">Cannot convert the ``<ParameterType>`` value of type Deserialized ``<ParameterType>`` to type ``<ParameterType>``".</span></span>

<span data-ttu-id="6904b-145">**錯誤的原因：** 如果您的 Runbook 是 PowerShell 工作流程，它會以還原序列化格式儲存複雜物件，以在暫止工作流程時保存 Runbook 狀態。</span><span class="sxs-lookup"><span data-stu-id="6904b-145">**Reason for the error:** If your runbook is a PowerShell Workflow, it stores complex objects in a deserialized format in order to persist your runbook state if the workflow is suspended.</span></span>  

<span data-ttu-id="6904b-146">**疑難排解秘訣：**</span><span class="sxs-lookup"><span data-stu-id="6904b-146">**Troubleshooting tips:**</span></span>  
<span data-ttu-id="6904b-147">下列三個解決方案的任何一個可以修正此問題：</span><span class="sxs-lookup"><span data-stu-id="6904b-147">Any of the following three solutions will fix this problem:</span></span>

1. <span data-ttu-id="6904b-148">如果您要將複雜物件從某個 Cmdlet 傳送到另一個 Cmdlet，請將這些 Cmdlet 包裝在 InlineScript 中。</span><span class="sxs-lookup"><span data-stu-id="6904b-148">If you are piping complex objects from one cmdlet to another, wrap these cmdlets in an InlineScript.</span></span>  
2. <span data-ttu-id="6904b-149">從複雜物件傳遞您需要的名稱或值，而非傳遞整個物件。</span><span class="sxs-lookup"><span data-stu-id="6904b-149">Pass the name or value that you need from the complex object instead of passing the entire object.</span></span>  
3. <span data-ttu-id="6904b-150">使用 PowerShell Runbook，而不是 PowerShell 工作流程 Runbook。</span><span class="sxs-lookup"><span data-stu-id="6904b-150">Use a PowerShell runbook instead of a PowerShell Workflow runbook.</span></span>  

### <a name="scenario-runbook-job-failed-because-the-allocated-quota-exceeded"></a><span data-ttu-id="6904b-151">案例：Runbook 作業失敗，因為超過已配置的配額</span><span class="sxs-lookup"><span data-stu-id="6904b-151">Scenario: Runbook job failed because the allocated quota exceeded</span></span>
<span data-ttu-id="6904b-152">**錯誤：** 您的 Runbook 作業失敗且有錯誤「這個訂用帳戶的每月總計作業執行時間的配額已觸達」。</span><span class="sxs-lookup"><span data-stu-id="6904b-152">**Error:** Your runbook job fails with the error "The quota for the monthly total job run time has been reached for this subscription".</span></span>

<span data-ttu-id="6904b-153">**錯誤的原因：** 當作業執行超過您的帳戶的 500 分鐘免費配額時，會發生此錯誤。</span><span class="sxs-lookup"><span data-stu-id="6904b-153">**Reason for the error:** This error occurs when the job execution exceeds the 500-minute free quota for your account.</span></span> <span data-ttu-id="6904b-154">這個配額會套用至所有類型的作業執行工作，例如，測試作業、從入口網站中開始作業、使用 Webhook 執行作業，使用 Azure 入口網站或您的資料中心排程作業以執行。</span><span class="sxs-lookup"><span data-stu-id="6904b-154">This quota applies to all types of job execution tasks such as testing a job, starting a job from the portal, executing a job by using webhooks and scheduling a job to execute by using either the Azure portal or in your datacenter.</span></span> <span data-ttu-id="6904b-155">若要深入了解自動化的價格，請參閱 [自動化價格](https://azure.microsoft.com/pricing/details/automation/)。</span><span class="sxs-lookup"><span data-stu-id="6904b-155">To learn more about pricing for Automation see [Automation pricing](https://azure.microsoft.com/pricing/details/automation/).</span></span>

<span data-ttu-id="6904b-156">**疑難排解秘訣：** 如果您每個月想要使用超過 500 分鐘的處理時間，您必須將您的訂用帳戶從免費層變更為基本層。</span><span class="sxs-lookup"><span data-stu-id="6904b-156">**Troubleshooting tips:** If you want to use more than 500 minutes of processing per month you will need to change your subscription from the Free tier to the Basic tier.</span></span> <span data-ttu-id="6904b-157">您可以採取下列步驟，升級至基本層：</span><span class="sxs-lookup"><span data-stu-id="6904b-157">You can upgrade to the Basic tier by taking the following steps:</span></span>  

1. <span data-ttu-id="6904b-158">登入您的 Azure 訂用帳戶：</span><span class="sxs-lookup"><span data-stu-id="6904b-158">Sign in to your Azure subscription</span></span>  
2. <span data-ttu-id="6904b-159">選取您想要升級的自動化帳戶</span><span class="sxs-lookup"><span data-stu-id="6904b-159">Select the Automation account you wish to upgrade</span></span>  
3. <span data-ttu-id="6904b-160">按一下 [設定] > [定價層和使用方式] > [定價層]</span><span class="sxs-lookup"><span data-stu-id="6904b-160">Click on **Settings** > **Pricing tier and Usage** > **Pricing tier**</span></span>  
4. <span data-ttu-id="6904b-161">在 [選擇定價層] 刀鋒視窗中，選取 [基本]</span><span class="sxs-lookup"><span data-stu-id="6904b-161">On the **Choose your pricing tier** blade, select **Basic**</span></span>    

### <a name="scenario-cmdlet-not-recognized-when-executing-a-runbook"></a><span data-ttu-id="6904b-162">案例：執行 Runbook 時，無法辨識 Cmdlet</span><span class="sxs-lookup"><span data-stu-id="6904b-162">Scenario: Cmdlet not recognized when executing a runbook</span></span>
<span data-ttu-id="6904b-163">**錯誤：``<cmdlet name>``您的 Runbook 作業失敗，且出現「**：無法辨識 ``<cmdlet name>`` 詞彙是否為 Cmdlet、函式、指令檔或可執行程式的名稱」錯誤。</span><span class="sxs-lookup"><span data-stu-id="6904b-163">**Error:** Your runbook job fails with the error "``<cmdlet name>``: The term ``<cmdlet name>`` is not recognized as the name of a cmdlet, function, script file, or operable program."</span></span>

<span data-ttu-id="6904b-164">**錯誤的原因：** 當 PowerShell 引擎找不到您在 Runbook 中使用的 Cmdlet 時，就會發生此錯誤。</span><span class="sxs-lookup"><span data-stu-id="6904b-164">**Reason for the error:** This error is caused when the PowerShell engine cannot find the cmdlet you are using in your runbook.</span></span>  <span data-ttu-id="6904b-165">這可能是因為包含 Cmdlet 的模組不在此帳戶、與 Runbook 名稱有名稱衝突，或 Cmdlet 也存在於另一個模組且自動化無法解析名稱。</span><span class="sxs-lookup"><span data-stu-id="6904b-165">This could be because the module containing the cmdlet is missing from the account, there is a name conflict with a runbook name, or the cmdlet also exists in another module and Automation cannot resolve the name.</span></span>

<span data-ttu-id="6904b-166">**疑難排解秘訣：** 下列任何一個解決方案都可以修正此問題：</span><span class="sxs-lookup"><span data-stu-id="6904b-166">**Troubleshooting tips:** Any of the following solutions will fix the problem:</span></span>  

* <span data-ttu-id="6904b-167">請檢查是否輸入正確的 Cmdlet 名稱。</span><span class="sxs-lookup"><span data-stu-id="6904b-167">Check that you have entered the cmdlet name correctly.</span></span>  
* <span data-ttu-id="6904b-168">請確定 Cmdlet 存在於您的自動化帳戶中且沒有衝突。</span><span class="sxs-lookup"><span data-stu-id="6904b-168">Make sure the cmdlet exists in your Automation account and that there are no conflicts.</span></span> <span data-ttu-id="6904b-169">如要確認 Cmdlet 是否存在，請以編輯模式開啟 Runbook，然後搜尋您想要在程式庫中尋找的 Cmdlet，或執行 **Get-Command ``<CommandName>``**。</span><span class="sxs-lookup"><span data-stu-id="6904b-169">To verify if the cmdlet is present, open a runbook in edit mode and search for the cmdlet you want to find in the library or run **Get-Command ``<CommandName>``**.</span></span>  <span data-ttu-id="6904b-170">一旦驗證 Cmdlet 可用於帳戶，且與其他 Cmdlet 或 Runbook 沒有名稱衝突，將其加入至畫布，並確保您在 Runbook 中使用有效的參數集。</span><span class="sxs-lookup"><span data-stu-id="6904b-170">Once you have validated that the cmdlet is available to the account, and that there are no name conflicts with other cmdlets or runbooks, add it to the canvas and ensure that you are using a valid parameter set in your runbook.</span></span>  
* <span data-ttu-id="6904b-171">如果有名稱衝突，而且 Cmdlet 可以在兩個不同的模組中使用，您可以使用 Cmdlet 的完整名稱來解決此問題。</span><span class="sxs-lookup"><span data-stu-id="6904b-171">If you do have a name conflict and the cmdlet is available in two different modules, you can resolve this by using the fully qualified name for the cmdlet.</span></span> <span data-ttu-id="6904b-172">例如，您可以使用 **ModuleName\CmdletName**。</span><span class="sxs-lookup"><span data-stu-id="6904b-172">For example, you can use **ModuleName\CmdletName**.</span></span>  
* <span data-ttu-id="6904b-173">如果您是以混合式背景工作角色群組身分在內部部署環境中執行 Runbook，則請確定 module/cmdlet 是安裝在裝載混合式背景工作角色的電腦上。</span><span class="sxs-lookup"><span data-stu-id="6904b-173">If you are executing the runbook on-premises in a hybrid worker group, then make sure that the module/cmdlet is installed on the machine that hosts the hybrid worker.</span></span>

### <a name="scenario-a-long-running-runbook-consistently-fails-with-the-exception-the-job-cannot-continue-running-because-it-was-repeatedly-evicted-from-the-same-checkpoint"></a><span data-ttu-id="6904b-174">案例：長時間執行的 Runbook 不斷失敗，且伴隨例外狀況：「工作無法繼續執行，因為它不斷在相同的檢查點遭到撤銷」。</span><span class="sxs-lookup"><span data-stu-id="6904b-174">Scenario: A long running runbook consistently fails with the exception: "The job cannot continue running because it was repeatedly evicted from the same checkpoint".</span></span>
<span data-ttu-id="6904b-175">**錯誤的原因：**這是故意設計的行為，原因是針對 Azure 自動化中程序的「公平共用」監視，也就是如果 Runbook 的執行時間超過 3 小時，就會自動暫停。</span><span class="sxs-lookup"><span data-stu-id="6904b-175">**Reason for the error:** This is by design behavior due to the "Fair Share" monitoring of processes within Azure Automation, which automatically suspends a runbook if it executes longer than 3 hours.</span></span> <span data-ttu-id="6904b-176">不過，傳回的錯誤訊息不會提供「接下來該怎麼辦」的選項。</span><span class="sxs-lookup"><span data-stu-id="6904b-176">However, the error message returned does not provide "what next" options.</span></span> <span data-ttu-id="6904b-177">有許多原因能造成 Runbook 暫停，</span><span class="sxs-lookup"><span data-stu-id="6904b-177">A runbook can be suspended for a number of reasons.</span></span> <span data-ttu-id="6904b-178">而大多數是因為發生錯誤。</span><span class="sxs-lookup"><span data-stu-id="6904b-178">Suspends happen mostly due to errors.</span></span> <span data-ttu-id="6904b-179">舉例來說，Runbook 中未攔截到的例外狀況、網路失敗，或是執行 Runbook 的 Runbook Worker 當機，都會造成 Runbook 暫停，並讓 Runbook 要繼續執行時從上一個檢查點開始。</span><span class="sxs-lookup"><span data-stu-id="6904b-179">For example, an uncaught exception in a runbook, a network failure, or a crash on the Runbook Worker running the runbook, will all cause the runbook to be suspended and start from its last checkpoint when resumed.</span></span>

<span data-ttu-id="6904b-180">**疑難排解秘訣：** 能避免此問題的已記載解決方案，就是在工作流程中使用檢查點。</span><span class="sxs-lookup"><span data-stu-id="6904b-180">**Troubleshooting tips:** The documented solution to avoid this issue is to use Checkpoints in a workflow.</span></span>  <span data-ttu-id="6904b-181">如要深入了解，請參閱 [了解 PowerShell 工作流程](automation-powershell-workflow.md#checkpoints)。</span><span class="sxs-lookup"><span data-stu-id="6904b-181">To learn more refer to [Learning PowerShell Workflows](automation-powershell-workflow.md#checkpoints).</span></span>  <span data-ttu-id="6904b-182">如需對於「公平共用」及檢查點更詳細的說明，請參閱這篇部落格文章：[在 Runbook 中使用檢查點](https://azure.microsoft.com/en-us/blog/azure-automation-reliable-fault-tolerant-runbook-execution-using-checkpoints/)。</span><span class="sxs-lookup"><span data-stu-id="6904b-182">A more thorough explanation of "Fair Share" and Checkpoint can be found in this blog article [Using Checkpoints in Runbooks](https://azure.microsoft.com/en-us/blog/azure-automation-reliable-fault-tolerant-runbook-execution-using-checkpoints/).</span></span>

## <a name="common-errors-when-importing-modules"></a><span data-ttu-id="6904b-183">匯入模組時的常見錯誤</span><span class="sxs-lookup"><span data-stu-id="6904b-183">Common errors when importing modules</span></span>
### <a name="scenario-module-fails-to-import-or-cmdlets-cant-be-executed-after-importing"></a><span data-ttu-id="6904b-184">案例：無法匯入模組，或無法在匯入之後執行 Cmdlet</span><span class="sxs-lookup"><span data-stu-id="6904b-184">Scenario: Module fails to import or cmdlets can't be executed after importing</span></span>
<span data-ttu-id="6904b-185">**錯誤：** 模組無法匯入，或是匯入成功，但沒有擷取到任何 Cmdlet。</span><span class="sxs-lookup"><span data-stu-id="6904b-185">**Error:** A module fails to import or imports successfully, but no cmdlets are extracted.</span></span>

<span data-ttu-id="6904b-186">**錯誤的原因：** 可能讓模組無法成功匯入 Azure 自動化的部分常見原因：</span><span class="sxs-lookup"><span data-stu-id="6904b-186">**Reason for the error:** Some common reasons that a module might not successfully import to Azure Automation are:</span></span>  

* <span data-ttu-id="6904b-187">結構不符合自動化所需要的結構。</span><span class="sxs-lookup"><span data-stu-id="6904b-187">The structure does not match the structure that Automation needs it to be in.</span></span>  
* <span data-ttu-id="6904b-188">此模組是相依於尚未部署到您的自動化帳戶的另一個模組。</span><span class="sxs-lookup"><span data-stu-id="6904b-188">The module is dependent on another module that has not been deployed to your Automation account.</span></span>  
* <span data-ttu-id="6904b-189">模組在資料夾中遺失其相依性。</span><span class="sxs-lookup"><span data-stu-id="6904b-189">The module is missing its dependencies in the folder.</span></span>  
* <span data-ttu-id="6904b-190">您使用 **New-AzureRmAutomationModule** Cmdlet 來上傳模組，但您尚未提供完整的儲存體路徑，或是尚未使用可公開存取的 URL 來載入模組。</span><span class="sxs-lookup"><span data-stu-id="6904b-190">The **New-AzureRmAutomationModule** cmdlet is being used to upload the module, and you have not given the full storage path or have not loaded the module by using a publicly accessible URL.</span></span>  

<span data-ttu-id="6904b-191">**疑難排解秘訣：**</span><span class="sxs-lookup"><span data-stu-id="6904b-191">**Troubleshooting tips:**</span></span>  
<span data-ttu-id="6904b-192">下列任何一個解決方案都可以修正此問題：</span><span class="sxs-lookup"><span data-stu-id="6904b-192">Any of the following solutions will fix the problem:</span></span>  

* <span data-ttu-id="6904b-193">確認模組依照下列格式：</span><span class="sxs-lookup"><span data-stu-id="6904b-193">Make sure that the module follows the following format:</span></span>  
  <span data-ttu-id="6904b-194">ModuleName.Zip **->** ModuleName 或版本號碼 **->** (ModuleName.psm1、ModuleName.psd1)</span><span class="sxs-lookup"><span data-stu-id="6904b-194">ModuleName.Zip **->** ModuleName or Version Number **->** (ModuleName.psm1, ModuleName.psd1)</span></span>
* <span data-ttu-id="6904b-195">開啟 .psd1 檔案，並且查看該模組是否有任何相依性。</span><span class="sxs-lookup"><span data-stu-id="6904b-195">Open the .psd1 file and see if the module has any dependencies.</span></span>  <span data-ttu-id="6904b-196">如果有，請將這些模組上傳至自動化帳戶。</span><span class="sxs-lookup"><span data-stu-id="6904b-196">If it does, upload these modules to the Automation account.</span></span>  
* <span data-ttu-id="6904b-197">請確定任何參考的 .dll 會出現在模組資料夾。</span><span class="sxs-lookup"><span data-stu-id="6904b-197">Make sure that any referenced .dlls are present in the module folder.</span></span>  

## <a name="common-errors-when-working-with-desired-state-configuration-dsc"></a><span data-ttu-id="6904b-198">使用 Desired State Configuration (DSC) 時的常見錯誤</span><span class="sxs-lookup"><span data-stu-id="6904b-198">Common errors when working with Desired State Configuration (DSC)</span></span>
### <a name="scenario-node-is-in-failed-status-with-a-not-found-error"></a><span data-ttu-id="6904b-199">案例：節點處於失敗狀態，並發生「找不到」錯誤</span><span class="sxs-lookup"><span data-stu-id="6904b-199">Scenario: Node is in failed status with a “Not found” error</span></span>
<span data-ttu-id="6904b-200">**錯誤：**節點回報「失敗」狀態，包含「嘗試從伺服器 https://``<url>``//accounts/``<account-id>``/Nodes(AgentId=``<agent-id>``)/GetDscAction 取得動作失敗，因為找不到有效組態 ``<guid>``」錯誤。</span><span class="sxs-lookup"><span data-stu-id="6904b-200">**Error:** The node has a report with **Failed** status and containing the error "The attempt to get the action from server https://``<url>``//accounts/``<account-id>``/Nodes(AgentId=``<agent-id>``)/GetDscAction failed because a valid configuration ``<guid>`` cannot be found.”</span></span>

<span data-ttu-id="6904b-201">**錯誤的原因：** 此錯誤通常在您將節點指派給組態名稱 (例如 ABC)，而不是指派給節點組態名稱 (例如 ABC.WebServer) 時發生。</span><span class="sxs-lookup"><span data-stu-id="6904b-201">**Reason for the error:** This error typically occurs when the node is assigned to a configuration name (e.g. ABC) instead of a node configuration name (e.g. ABC.WebServer).</span></span>  

<span data-ttu-id="6904b-202">**疑難排解秘訣：**</span><span class="sxs-lookup"><span data-stu-id="6904b-202">**Troubleshooting tips:**</span></span>  

* <span data-ttu-id="6904b-203">請確定您會使用「節點組態名稱」而不是「組態名稱」來指派節點。</span><span class="sxs-lookup"><span data-stu-id="6904b-203">Make sure that you are assigning the node with "node configuration name" and not the "configuration name".</span></span>  
* <span data-ttu-id="6904b-204">您可以使用 Azure 入口網站或使用 PowerShell Cmdlet，將節點組態指派至節點。</span><span class="sxs-lookup"><span data-stu-id="6904b-204">You can assign a node configuration to a node using Azure portal or with a PowerShell cmdlet.</span></span>

  * <span data-ttu-id="6904b-205">如要使用 Azure 入口網站來將節點組態指派給節點，請開啟 [DSC 節點] 刀鋒視窗、選取某個節點，然後按一下 [指派節點組態] 按鈕。</span><span class="sxs-lookup"><span data-stu-id="6904b-205">In order to assign a node configuration to a node using Azure portal, open the **DSC Nodes** blade, then select a node and click on **Assign node configuration** button.</span></span>  
  * <span data-ttu-id="6904b-206">如要使用 PowerShell Cmdlet 來將節點組態指派給節點，請使用 **Set-AzureRmAutomationDscNode** Cmdlet</span><span class="sxs-lookup"><span data-stu-id="6904b-206">In order to assign a node configuration to a node using PowerShell cmdlet, use **Set-AzureRmAutomationDscNode** cmdlet</span></span>

### <a name="scenario--no-node-configurations-mof-files-were-produced-when-a-configuration-is-compiled"></a><span data-ttu-id="6904b-207">案例：編譯組態時沒有產生任何節點組態 (MOF 檔案)</span><span class="sxs-lookup"><span data-stu-id="6904b-207">Scenario:  No node configurations (MOF files) were produced when a configuration is compiled</span></span>
<span data-ttu-id="6904b-208">**錯誤：** 您的 DSC 編譯作業作已暫停，錯誤訊息：「編譯已順利完成，但是沒有產生任何節點組態 .mofs」。</span><span class="sxs-lookup"><span data-stu-id="6904b-208">**Error:** Your DSC compilation job suspends with the error: “Compilation completed successfully, but no node configuration .mofs were generated”.</span></span>

<span data-ttu-id="6904b-209">**錯誤的原因：**DSC 組態中緊接在 **Node** 關鍵字後面的運算式評估為 $null 時，則不會產生任何節點組態。</span><span class="sxs-lookup"><span data-stu-id="6904b-209">**Reason for the error:** When the expression following the **Node** keyword in the DSC configuration evaluates to $null then no node configurations will be produced.</span></span>    

<span data-ttu-id="6904b-210">**疑難排解秘訣：**</span><span class="sxs-lookup"><span data-stu-id="6904b-210">**Troubleshooting tips:**</span></span>  
<span data-ttu-id="6904b-211">下列任何一個解決方案都可以修正此問題：</span><span class="sxs-lookup"><span data-stu-id="6904b-211">Any of the following solutions will fix the problem:</span></span>  

* <span data-ttu-id="6904b-212">請確定組態定義中「Node」  關鍵字後方的運算式，不會被評估為 $null。</span><span class="sxs-lookup"><span data-stu-id="6904b-212">Make sure that the expression next to the **Node** keyword in the configuration definition is not evaluating to $null.</span></span>  
* <span data-ttu-id="6904b-213">如果您在編譯組態時傳遞 ConfigurationData，請確定您傳遞的是組態向 [ConfigurationData](automation-dsc-compile.md#configurationdata)要求的預期值。</span><span class="sxs-lookup"><span data-stu-id="6904b-213">If you are passing ConfigurationData when compiling the configuration, make sure that you are passing the expected values that the configuration requires from [ConfigurationData](automation-dsc-compile.md#configurationdata).</span></span>

### <a name="scenario--the-dsc-node-report-becomes-stuck-in-progress-state"></a><span data-ttu-id="6904b-214">案例：DSC 節點報告會停留在「進行中」狀態</span><span class="sxs-lookup"><span data-stu-id="6904b-214">Scenario:  The DSC node report becomes stuck “in progress” state</span></span>
<span data-ttu-id="6904b-215">**錯誤：** DSC 代理程式輸出「找不到體指定屬性值的執行個體」。</span><span class="sxs-lookup"><span data-stu-id="6904b-215">**Error:** DSC Agent outputs “No instance found with given property values.”</span></span>

<span data-ttu-id="6904b-216">**錯誤的原因：** 您已經將 WMF 版本升級，且擁有損毀的 WMI。</span><span class="sxs-lookup"><span data-stu-id="6904b-216">**Reason for the error:** You have upgraded your WMF version and have corrupted WMI.</span></span>  

<span data-ttu-id="6904b-217">**疑難排解秘訣：**請依照 [DSC known issues and limitations (DSC 已知問題和限制)](https://msdn.microsoft.com/powershell/wmf/5.0/limitation_dsc) 中的指示來修正問題。</span><span class="sxs-lookup"><span data-stu-id="6904b-217">**Troubleshooting tips:** Follow the instructions in the [DSC known issues and limitations](https://msdn.microsoft.com/powershell/wmf/5.0/limitation_dsc) to fix the issue.</span></span>

### <a name="scenario--unable-to-use-a-credential-in-a-dsc-configuration"></a><span data-ttu-id="6904b-218">案例：無法在 DSC 組態中使用認證</span><span class="sxs-lookup"><span data-stu-id="6904b-218">Scenario:  Unable to use a credential in a DSC configuration</span></span>
<span data-ttu-id="6904b-219">**錯誤：``<some resource name>``您的 DSC 編譯作業已暫停，錯誤訊息：「System.InvalidOperationException 處理**  類型的屬性 'Credential' 時發生錯誤：只有在 PSDscAllowPlainTextPassword 設為 True 時，才允許轉換加密密碼並儲存為純文字」。</span><span class="sxs-lookup"><span data-stu-id="6904b-219">**Error:** Your DSC compilation job was suspended with the error: “System.InvalidOperationException error processing property 'Credential' of type ``<some resource name>``: Converting and storing an encrypted password as plaintext is allowed only if PSDscAllowPlainTextPassword is set to true”.</span></span>

<span data-ttu-id="6904b-220">**錯誤的原因：**您已在組態中使用認證，但沒有提供適當的 **ConfigurationData**，以便把每個節點組態的 **PSDscAllowPlainTextPassword** 設定為 True。</span><span class="sxs-lookup"><span data-stu-id="6904b-220">**Reason for the error:** You have used a credential in a configuration but didn’t provide proper **ConfigurationData** to set **PSDscAllowPlainTextPassword** to true for each node configuration.</span></span>  

<span data-ttu-id="6904b-221">**疑難排解秘訣：**</span><span class="sxs-lookup"><span data-stu-id="6904b-221">**Troubleshooting tips:**</span></span>  

* <span data-ttu-id="6904b-222">請確認傳入適當的 **ConfigurationData**，以便把組態中提到的每個節點組態的 **PSDscAllowPlainTextPassword** 設定為 True。</span><span class="sxs-lookup"><span data-stu-id="6904b-222">Make sure to pass in the proper **ConfigurationData** to set **PSDscAllowPlainTextPassword** to true for each node configuration mentioned in the configuration.</span></span> <span data-ttu-id="6904b-223">如需詳細資訊，請參閱 [Azure Automation DSC 中的資產](automation-dsc-compile.md#assets)。</span><span class="sxs-lookup"><span data-stu-id="6904b-223">For more information, refer to [assets in Azure Automation DSC](automation-dsc-compile.md#assets).</span></span>

## <a name="next-steps"></a><span data-ttu-id="6904b-224">後續步驟</span><span class="sxs-lookup"><span data-stu-id="6904b-224">Next steps</span></span>
<span data-ttu-id="6904b-225">如果您已遵循上述的疑難排解步驟，但找不到答案，您可以檢閱以下額外的支援選項。</span><span class="sxs-lookup"><span data-stu-id="6904b-225">If you have followed the troubleshooting steps above and can't find the answer, you can review the additional support options below.</span></span>

* <span data-ttu-id="6904b-226">取得 Azure 專家協助。</span><span class="sxs-lookup"><span data-stu-id="6904b-226">Get help from Azure experts.</span></span> <span data-ttu-id="6904b-227">請將您的問題提交至 [MSDN Azure 或 Stack Overflow 論壇](https://azure.microsoft.com/support/forums/)。</span><span class="sxs-lookup"><span data-stu-id="6904b-227">Submit your issue to the [MSDN Azure or Stack Overflow forums.](https://azure.microsoft.com/support/forums/).</span></span>
* <span data-ttu-id="6904b-228">提出 Azure 支援事件。</span><span class="sxs-lookup"><span data-stu-id="6904b-228">File an Azure support incident.</span></span> <span data-ttu-id="6904b-229">請移至 [Azure 支援網站](https://azure.microsoft.com/support/options/)，然後在 [技術及帳務支援] 下方按一下 [取得支援]。</span><span class="sxs-lookup"><span data-stu-id="6904b-229">Go to the [Azure Support site](https://azure.microsoft.com/support/options/) and click **Get support** under **Technical and billing support**.</span></span>
* <span data-ttu-id="6904b-230">如果您在尋找 Azure 自動化 Runbook 解決方案或整合模組，請在 [指令碼中心](https://azure.microsoft.com/documentation/scripts/) 提出指令碼要求。</span><span class="sxs-lookup"><span data-stu-id="6904b-230">Post a Script Request on [Script Center](https://azure.microsoft.com/documentation/scripts/) if you are looking for an Azure Automation runbook solution or an integration module.</span></span>
* <span data-ttu-id="6904b-231">請在 [User Voice](https://feedback.azure.com/forums/34192--general-feedback)上張貼 Azure 自動化的意見反應或功能要求。</span><span class="sxs-lookup"><span data-stu-id="6904b-231">Post feedback or feature requests for Azure Automation on [User Voice](https://feedback.azure.com/forums/34192--general-feedback).</span></span>
