---
title: "aaaMy 第一個圖形化 Azure 自動化中的 runbook |Microsoft 文件"
description: "教學課程會引導您進行 hello 建立、 測試和發佈的簡單圖形化 runbook。"
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: 
keywords: "runbook, runbook 範本, runbook 自動化, azure runbook"
ms.assetid: dcb88f19-ed2b-4372-9724-6625cd287c8a
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 05/17/2017
ms.author: magoedte;bwren
ms.openlocfilehash: 964cf8bae75ca597959bfc39b2b07c22bbc9acb5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="my-first-graphical-runbook"></a><span data-ttu-id="5c858-104">我的第一個圖形化 Runbook</span><span class="sxs-lookup"><span data-stu-id="5c858-104">My first graphical runbook</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="5c858-105">圖形化</span><span class="sxs-lookup"><span data-stu-id="5c858-105">Graphical</span></span>](automation-first-runbook-graphical.md)
> * [<span data-ttu-id="5c858-106">PowerShell</span><span class="sxs-lookup"><span data-stu-id="5c858-106">PowerShell</span></span>](automation-first-runbook-textual-powershell.md)
> * [<span data-ttu-id="5c858-107">PowerShell 工作流程</span><span class="sxs-lookup"><span data-stu-id="5c858-107">PowerShell Workflow</span></span>](automation-first-runbook-textual.md)
> 
> 

<span data-ttu-id="5c858-108">本教學課程將引導您完成建立 hello[圖形化 runbook](automation-runbook-types.md#graphical-runbooks) Azure 自動化中。</span><span class="sxs-lookup"><span data-stu-id="5c858-108">This tutorial walks you through hello creation of a [graphical runbook](automation-runbook-types.md#graphical-runbooks) in Azure Automation.</span></span>  <span data-ttu-id="5c858-109">我們開始測試，我們會說明如何 tootrack hello hello runbook 工作的狀態時，發行的簡易 runbook。</span><span class="sxs-lookup"><span data-stu-id="5c858-109">We start with a simple runbook that tests and publishes while we explain how tootrack hello status of hello runbook job.</span></span>  <span data-ttu-id="5c858-110">然後我們修改 hello runbook tooactually 管理在此情況下啟動 Azure 虛擬機器的 Azure 資源。</span><span class="sxs-lookup"><span data-stu-id="5c858-110">Then we modify hello runbook tooactually manage Azure resources, in this case starting an Azure virtual machine.</span></span>  <span data-ttu-id="5c858-111">然後我們完成 hello 教學課程，讓 hello runbook 更強固的加入 runbook 的參數和條件式連結。</span><span class="sxs-lookup"><span data-stu-id="5c858-111">Then we complete hello tutorial by making hello runbook more robust by adding runbook parameters and conditional links.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="5c858-112">必要條件</span><span class="sxs-lookup"><span data-stu-id="5c858-112">Prerequisites</span></span>
<span data-ttu-id="5c858-113">toocomplete 本教學課程中，您必須遵循的 hello。</span><span class="sxs-lookup"><span data-stu-id="5c858-113">toocomplete this tutorial, you will need hello following.</span></span>

* <span data-ttu-id="5c858-114">Azure 訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="5c858-114">Azure subscription.</span></span>  <span data-ttu-id="5c858-115">如果您沒有這類帳戶，可以[啟用自己的 MSDN 訂戶權益<a href="/pricing/free-account/" target="_blank">或](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/)[註冊免費帳戶](https://azure.microsoft.com/free/)。</span><span class="sxs-lookup"><span data-stu-id="5c858-115">If you don't have one yet, you can [activate your MSDN subscriber benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) or <a href="/pricing/free-account/" target="_blank">[sign up for a free account](https://azure.microsoft.com/free/).</span></span>
* <span data-ttu-id="5c858-116">[Azure 自動化帳戶](automation-sec-configure-azure-runas-account.md)toohold hello runbook 並驗證 tooAzure 資源。</span><span class="sxs-lookup"><span data-stu-id="5c858-116">[Azure Automation account](automation-sec-configure-azure-runas-account.md) toohold hello runbook and authenticate tooAzure resources.</span></span>  <span data-ttu-id="5c858-117">此帳戶必須具有權限 toostart，停止 hello 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="5c858-117">This account must have permission toostart and stop hello virtual machine.</span></span>
* <span data-ttu-id="5c858-118">Azure 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="5c858-118">An Azure virtual machine.</span></span>  <span data-ttu-id="5c858-119">我們將會停止並啟動這台電腦，因此它不應該是生產環境。</span><span class="sxs-lookup"><span data-stu-id="5c858-119">We will stop and start this machine so it should not be production.</span></span>

## <a name="step-1---create-runbook"></a><span data-ttu-id="5c858-120">步驟 1 - 建立 Runbook</span><span class="sxs-lookup"><span data-stu-id="5c858-120">Step 1 - Create runbook</span></span>
<span data-ttu-id="5c858-121">我們先建立輸出的 hello 文字的簡單 runbook *Hello World*。</span><span class="sxs-lookup"><span data-stu-id="5c858-121">We start by creating a simple runbook that outputs hello text *Hello World*.</span></span>

1. <span data-ttu-id="5c858-122">在 hello Azure 入口網站，開啟您的自動化帳戶。</span><span class="sxs-lookup"><span data-stu-id="5c858-122">In hello Azure portal, open your Automation account.</span></span>  
   <span data-ttu-id="5c858-123">hello 自動化帳戶 頁面可讓您快速檢視 hello 資源此帳戶中。</span><span class="sxs-lookup"><span data-stu-id="5c858-123">hello Automation account page gives you a quick view of hello resources in this account.</span></span>  <span data-ttu-id="5c858-124">您應該已經有一些資產。</span><span class="sxs-lookup"><span data-stu-id="5c858-124">You should already have some Assets.</span></span>  <span data-ttu-id="5c858-125">其中大部分都是會自動包含在新的自動化帳戶的 hello 模組。</span><span class="sxs-lookup"><span data-stu-id="5c858-125">Most of those are hello modules that are automatically included in a new Automation account.</span></span>  <span data-ttu-id="5c858-126">您也應該擁有 hello 認證資產中所述 hello[必要條件](#prerequisites)。</span><span class="sxs-lookup"><span data-stu-id="5c858-126">You should also have hello Credential asset that's mentioned in hello [prerequisites](#prerequisites).</span></span>
2. <span data-ttu-id="5c858-127">按一下 hello **Runbook**磚 tooopen hello runbook 的清單。</span><span class="sxs-lookup"><span data-stu-id="5c858-127">Click hello **Runbooks** tile tooopen hello list of runbooks.</span></span><br> <span data-ttu-id="5c858-128">![Runbook 控制項](media/automation-first-runbook-graphical/runbooks-resources-tile.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-128">![Runbooks control](media/automation-first-runbook-graphical/runbooks-resources-tile.png)</span></span>
3. <span data-ttu-id="5c858-129">建立新的 runbook 上 hello 即可**新增 runbook**  按鈕，然後**建立新的 runbook**。</span><span class="sxs-lookup"><span data-stu-id="5c858-129">Create a new runbook by clicking on hello **Add a runbook** button and then **Create a new runbook**.</span></span>
4. <span data-ttu-id="5c858-130">Hello runbook hello 命名*MyFirstRunbook 圖形*。</span><span class="sxs-lookup"><span data-stu-id="5c858-130">Give hello runbook hello name *MyFirstRunbook-Graphical*.</span></span>
5. <span data-ttu-id="5c858-131">在此情況下，我們會 toocreate[圖形化 runbook](automation-graphical-authoring-intro.md)因此選取**圖形**如**Runbook 類型**。</span><span class="sxs-lookup"><span data-stu-id="5c858-131">In this case, we're going toocreate a [graphical runbook](automation-graphical-authoring-intro.md) so select **Graphical** for **Runbook type**.</span></span><br> <span data-ttu-id="5c858-132">![新的 Runbook](media/automation-first-runbook-graphical/create-new-runbook.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-132">![New runbook](media/automation-first-runbook-graphical/create-new-runbook.png)</span></span><br>
6. <span data-ttu-id="5c858-133">按一下**建立**toocreate hello runbook 和開啟 hello 圖形化編輯器。</span><span class="sxs-lookup"><span data-stu-id="5c858-133">Click **Create** toocreate hello runbook and open hello graphical editor.</span></span>

## <a name="step-2---add-activities-toohello-runbook"></a><span data-ttu-id="5c858-134">步驟 2-新增活動 toohello runbook</span><span class="sxs-lookup"><span data-stu-id="5c858-134">Step 2 - Add activities toohello runbook</span></span>
<span data-ttu-id="5c858-135">hello 左邊 hello hello 編輯器的程式庫控制項，可讓您 tooselect 活動 tooadd tooyour runbook。</span><span class="sxs-lookup"><span data-stu-id="5c858-135">hello Library control on hello left side of hello editor allows you tooselect activities tooadd tooyour runbook.</span></span>  <span data-ttu-id="5c858-136">我們會 tooadd **Write-output** cmdlet toooutput 文字從 hello runbook。</span><span class="sxs-lookup"><span data-stu-id="5c858-136">We're going tooadd a **Write-Output** cmdlet toooutput text from hello runbook.</span></span>

1. <span data-ttu-id="5c858-137">Hello 程式庫控制項，在中，按一下 hello [搜尋] 文字方塊以及類型**Write-output**。</span><span class="sxs-lookup"><span data-stu-id="5c858-137">In hello Library control, click in hello search textbox and type **Write-Output**.</span></span>  <span data-ttu-id="5c858-138">hello 搜尋結果將會顯示如下。</span><span class="sxs-lookup"><span data-stu-id="5c858-138">hello search results will be displayed below.</span></span> <br> <span data-ttu-id="5c858-139">![Microsoft.PowerShell.Utility](media/automation-first-runbook-graphical/search-powershell-cmdlet-writeoutput.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-139">![Microsoft.PowerShell.Utility](media/automation-first-runbook-graphical/search-powershell-cmdlet-writeoutput.png)</span></span>
2. <span data-ttu-id="5c858-140">捲動 toohello hello 清單的底部。</span><span class="sxs-lookup"><span data-stu-id="5c858-140">Scroll down toohello bottom of hello list.</span></span>  <span data-ttu-id="5c858-141">您可以請按滑鼠右鍵**Write-output**選取**新增 toocanvas**或按一下 hello 橢圓形下一個 toohello 指令程式，然後選取**新增 toocanvas**。</span><span class="sxs-lookup"><span data-stu-id="5c858-141">You can either right-click **Write-Output** and select **Add toocanvas** or click hello ellipse next toohello cmdlet and then select **Add toocanvas**.</span></span>
3. <span data-ttu-id="5c858-142">按一下 hello **Write-output** hello 畫布上的活動。</span><span class="sxs-lookup"><span data-stu-id="5c858-142">Click hello **Write-Output** activity on hello canvas.</span></span>  <span data-ttu-id="5c858-143">這會開啟 hello 組態控制刀鋒視窗中，可讓您 tooconfigure hello 活動。</span><span class="sxs-lookup"><span data-stu-id="5c858-143">This opens hello Configuration control blade, which allows you tooconfigure hello activity.</span></span>
4. <span data-ttu-id="5c858-144">hello**標籤**預設 toohello hello cmdlet 名稱，但我們可以將它變更 toosomething 更易懂。</span><span class="sxs-lookup"><span data-stu-id="5c858-144">hello **Label** defaults toohello name of hello cmdlet, but we can change it toosomething more friendly.</span></span> <span data-ttu-id="5c858-145">它也變更*寫入 Hello World toooutput*。</span><span class="sxs-lookup"><span data-stu-id="5c858-145">Change it too*Write Hello World toooutput*.</span></span>
5. <span data-ttu-id="5c858-146">按一下**參數**tooprovide hello cmdlet 參數的值。</span><span class="sxs-lookup"><span data-stu-id="5c858-146">Click **Parameters** tooprovide values for hello cmdlet's parameters.</span></span>  
   <span data-ttu-id="5c858-147">部分指令程式有多個參數集，而且您需要 tooselect 哪些您的一個 toouse。</span><span class="sxs-lookup"><span data-stu-id="5c858-147">Some cmdlets have multiple parameter sets, and you need tooselect which you one toouse.</span></span> <span data-ttu-id="5c858-148">在此情況下， **Write-output**設有只有一個參數，因此您不需要 tooselect 其中一個。</span><span class="sxs-lookup"><span data-stu-id="5c858-148">In this case, **Write-Output** has only one parameter set, so you don't need tooselect one.</span></span> <br> <span data-ttu-id="5c858-149">![Write-Output 屬性](media/automation-first-runbook-graphical/write-output-properties-b.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-149">![Write-Output properties](media/automation-first-runbook-graphical/write-output-properties-b.png)</span></span>
6. <span data-ttu-id="5c858-150">選取 hello **InputObject**參數。</span><span class="sxs-lookup"><span data-stu-id="5c858-150">Select hello **InputObject** parameter.</span></span>  <span data-ttu-id="5c858-151">這是我們可以在此指定 hello 文字 toosend toohello 輸出資料流 hello 參數。</span><span class="sxs-lookup"><span data-stu-id="5c858-151">This is hello parameter where we specify hello text toosend toohello output stream.</span></span>
7. <span data-ttu-id="5c858-152">在 hello**資料來源**下拉式清單中，選取**PowerShell 運算式**。</span><span class="sxs-lookup"><span data-stu-id="5c858-152">In hello **Data source** dropdown, select **PowerShell expression**.</span></span>  <span data-ttu-id="5c858-153">hello**資料來源**下拉式清單提供不同的來源，您會使用 toopopulate 參數值。</span><span class="sxs-lookup"><span data-stu-id="5c858-153">hello **Data source** dropdown provides different sources that you use toopopulate a parameter value.</span></span>  
   <span data-ttu-id="5c858-154">您可以使用來自這類來源的輸出，例如另一個活動、自動化資產或 PowerShell 運算式。</span><span class="sxs-lookup"><span data-stu-id="5c858-154">You can use output from such sources such as another activity, an Automation asset, or a PowerShell expression.</span></span>  <span data-ttu-id="5c858-155">在此情況下，我們只是想 toooutput hello 文字*Hello World*。</span><span class="sxs-lookup"><span data-stu-id="5c858-155">In this case, we just want toooutput hello text *Hello World*.</span></span> <span data-ttu-id="5c858-156">我們可以使用 PowerShell 運算式，並指定字串。</span><span class="sxs-lookup"><span data-stu-id="5c858-156">We can use a PowerShell expression and specify a string.</span></span>
8. <span data-ttu-id="5c858-157">在 hello**運算式**方塊中，輸入*"Hello World"* ，然後按一下**確定**兩次 tooreturn toohello 畫布。</span><span class="sxs-lookup"><span data-stu-id="5c858-157">In hello **Expression** box, type *"Hello World"* and then click **OK** twice tooreturn toohello canvas.</span></span><br> <span data-ttu-id="5c858-158">![PowerShell Expression](media/automation-first-runbook-graphical/expression-hello-world.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-158">![PowerShell Expression](media/automation-first-runbook-graphical/expression-hello-world.png)</span></span>
9. <span data-ttu-id="5c858-159">按一下以儲存 hello runbook**儲存**。</span><span class="sxs-lookup"><span data-stu-id="5c858-159">Save hello runbook by clicking **Save**.</span></span><br> <span data-ttu-id="5c858-160">![儲存 Runbook](media/automation-first-runbook-graphical/runbook-toolbar-save-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-160">![Save runbook](media/automation-first-runbook-graphical/runbook-toolbar-save-revised20165.png)</span></span>

## <a name="step-3---test-hello-runbook"></a><span data-ttu-id="5c858-161">步驟 3-測試 hello runbook</span><span class="sxs-lookup"><span data-stu-id="5c858-161">Step 3 - Test hello runbook</span></span>
<span data-ttu-id="5c858-162">我們發行 hello runbook toomake 之前它可用在生產環境中，我們想要 tootest 它 toomake 確定它是否正常運作。</span><span class="sxs-lookup"><span data-stu-id="5c858-162">Before we publish hello runbook toomake it available in production, we want tootest it toomake sure that it works properly.</span></span>  <span data-ttu-id="5c858-163">測試 Runbook 時，您會執行其 **草稿** 版本，並以互動方式檢視其輸出。</span><span class="sxs-lookup"><span data-stu-id="5c858-163">When you test a runbook, you run its **Draft** version and view its output interactively.</span></span>

1. <span data-ttu-id="5c858-164">按一下**測試窗格**tooopen hello 測試刀鋒視窗。</span><span class="sxs-lookup"><span data-stu-id="5c858-164">Click **Test pane** tooopen hello Test blade.</span></span><br> <span data-ttu-id="5c858-165">![測試窗格](media/automation-first-runbook-graphical/runbook-toolbar-test-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-165">![Test pane](media/automation-first-runbook-graphical/runbook-toolbar-test-revised20165.png)</span></span>
2. <span data-ttu-id="5c858-166">按一下**啟動**toostart hello 測試。</span><span class="sxs-lookup"><span data-stu-id="5c858-166">Click **Start** toostart hello test.</span></span>  <span data-ttu-id="5c858-167">這應該是 hello 才啟用選項。</span><span class="sxs-lookup"><span data-stu-id="5c858-167">This should be hello only enabled option.</span></span>
3. <span data-ttu-id="5c858-168">A [runbook 工作](automation-runbook-execution.md)建立 hello 窗格中顯示及其狀態。</span><span class="sxs-lookup"><span data-stu-id="5c858-168">A [runbook job](automation-runbook-execution.md) is created and its status displayed in hello pane.</span></span>  
   <span data-ttu-id="5c858-169">做為啟動 hello 作業狀態*排入佇列*表示它正在等待在 hello 雲端 toobecome 可用的 runbook worker。</span><span class="sxs-lookup"><span data-stu-id="5c858-169">hello job status starts as *Queued* indicating that it is waiting for a runbook worker in hello cloud toobecome available.</span></span>  <span data-ttu-id="5c858-170">然後移動太*起始*背景工作宣告 hello 作業時，然後*執行*hello runbook 實際開始執行時。</span><span class="sxs-lookup"><span data-stu-id="5c858-170">It then moves too*Starting* when a worker claims hello job, and then *Running* when hello runbook actually starts running.</span></span>  
4. <span data-ttu-id="5c858-171">當 hello runbook 作業完成時，會顯示其輸出。</span><span class="sxs-lookup"><span data-stu-id="5c858-171">When hello runbook job completes, its output is displayed.</span></span> <span data-ttu-id="5c858-172">在我們的情況中，我們應該會看到 Hello World。</span><span class="sxs-lookup"><span data-stu-id="5c858-172">In our case, we should see *Hello World*.</span></span><br> <span data-ttu-id="5c858-173">![](media/automation-first-runbook-graphical/runbook-test-results.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-173">![Hello World](media/automation-first-runbook-graphical/runbook-test-results.png)</span></span>
5. <span data-ttu-id="5c858-174">關閉 hello 測試刀鋒視窗 tooreturn toohello 畫布。</span><span class="sxs-lookup"><span data-stu-id="5c858-174">Close hello Test blade tooreturn toohello canvas.</span></span>

## <a name="step-4---publish-and-start-hello-runbook"></a><span data-ttu-id="5c858-175">步驟 4-發佈和啟動 hello runbook</span><span class="sxs-lookup"><span data-stu-id="5c858-175">Step 4 - Publish and start hello runbook</span></span>
<span data-ttu-id="5c858-176">我們建立的 hello runbook 仍處於草稿模式。</span><span class="sxs-lookup"><span data-stu-id="5c858-176">hello runbook that we created is still in Draft mode.</span></span> <span data-ttu-id="5c858-177">我們需要 toopublish 前我們可以在生產環境中執行它。</span><span class="sxs-lookup"><span data-stu-id="5c858-177">We need toopublish it before we can run it in production.</span></span>  <span data-ttu-id="5c858-178">當您發行的 runbook 時，您以覆寫現有已發佈版本 hello hello 草稿版本。</span><span class="sxs-lookup"><span data-stu-id="5c858-178">When you publish a runbook, you overwrite hello existing Published version with hello Draft version.</span></span>  <span data-ttu-id="5c858-179">在我們的案例中，我們已發佈版本還沒有因為我們剛才建立 hello runbook。</span><span class="sxs-lookup"><span data-stu-id="5c858-179">In our case, we don't have a Published version yet because we just created hello runbook.</span></span>

1. <span data-ttu-id="5c858-180">按一下**發行**toopublish hello runbook，然後**是**出現提示時。</span><span class="sxs-lookup"><span data-stu-id="5c858-180">Click **Publish** toopublish hello runbook and then **Yes** when prompted.</span></span><br> <span data-ttu-id="5c858-181">![](media/automation-first-runbook-graphical/runbook-toolbar-publish-revised20166.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-181">![Publish](media/automation-first-runbook-graphical/runbook-toolbar-publish-revised20166.png)</span></span>
2. <span data-ttu-id="5c858-182">當您捲動左的 tooview hello runbook 在 hello **Runbook**刀鋒視窗中，顯示**撰寫狀態**的**發佈**。</span><span class="sxs-lookup"><span data-stu-id="5c858-182">If you scroll left tooview hello runbook in hello **Runbooks** blade, it shows an **Authoring Status** of **Published**.</span></span>
3. <span data-ttu-id="5c858-183">捲軸背景 toohello 右 tooview hello 刀鋒視窗的**MyFirstRunbook**。</span><span class="sxs-lookup"><span data-stu-id="5c858-183">Scroll back toohello right tooview hello blade for **MyFirstRunbook**.</span></span>  
   <span data-ttu-id="5c858-184">hello hello 頂端的選項讓我們 toostart hello runbook、 排程在未來，hello toostart 或建立[webhook](automation-webhooks.md)讓它可以啟動透過 HTTP 呼叫。</span><span class="sxs-lookup"><span data-stu-id="5c858-184">hello options across hello top allow us toostart hello runbook, schedule it toostart at some time in hello future, or create a [webhook](automation-webhooks.md) so it can be started through an HTTP call.</span></span>
4. <span data-ttu-id="5c858-185">我們只是想 toostart hello runbook 因此按一下**啟動**然後**是**出現提示時。</span><span class="sxs-lookup"><span data-stu-id="5c858-185">We just want toostart hello runbook so click **Start** and then **Yes** when prompted.</span></span><br> <span data-ttu-id="5c858-186">![啟動 Runbook](media/automation-first-runbook-graphical/runbook-controls-start-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-186">![Start runbook](media/automation-first-runbook-graphical/runbook-controls-start-revised20165.png)</span></span>
5. <span data-ttu-id="5c858-187">作業刀鋒視窗會開啟供我們建立的 hello runbook 工作。</span><span class="sxs-lookup"><span data-stu-id="5c858-187">A job blade is opened for hello runbook job that we created.</span></span>  <span data-ttu-id="5c858-188">我們可以關閉此刀鋒視窗中，但在此情況下我們維持開啟，因此我們可以觀看 hello 作業的進度。</span><span class="sxs-lookup"><span data-stu-id="5c858-188">We can close this blade, but in this case we leave it open so we can watch hello job's progress.</span></span>
6. <span data-ttu-id="5c858-189">中會顯示 hello 作業狀態**工作摘要**和相符項目 hello 我們了解我們所測試 hello runbook 時的狀態。</span><span class="sxs-lookup"><span data-stu-id="5c858-189">hello job status is shown in **Job Summary** and matches hello statuses that we saw when we tested hello runbook.</span></span><br> <span data-ttu-id="5c858-190">![工作摘要](media/automation-first-runbook-graphical/runbook-job-summary.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-190">![Job Summary](media/automation-first-runbook-graphical/runbook-job-summary.png)</span></span>
7. <span data-ttu-id="5c858-191">一次 hello runbook 狀態顯示*已完成*，按一下 **輸出**。</span><span class="sxs-lookup"><span data-stu-id="5c858-191">Once hello runbook status shows *Completed*, click **Output**.</span></span> <span data-ttu-id="5c858-192">hello**輸出**刀鋒視窗會開啟，而且我們可以看到我們*Hello World* hello 窗格中。</span><span class="sxs-lookup"><span data-stu-id="5c858-192">hello **Output** blade is opened, and we can see our *Hello World* in hello pane.</span></span><br> <span data-ttu-id="5c858-193">![工作摘要](media/automation-first-runbook-graphical/runbook-job-output.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-193">![Job Summary](media/automation-first-runbook-graphical/runbook-job-output.png)</span></span>  
8. <span data-ttu-id="5c858-194">關閉 hello 輸出刀鋒視窗。</span><span class="sxs-lookup"><span data-stu-id="5c858-194">Close hello Output blade.</span></span>
9. <span data-ttu-id="5c858-195">按一下**所有記錄檔**tooopen hello 資料流刀鋒視窗中的 hello runbook 工作。</span><span class="sxs-lookup"><span data-stu-id="5c858-195">Click **All Logs** tooopen hello Streams blade for hello runbook job.</span></span>  <span data-ttu-id="5c858-196">我們應該只會看到*Hello World*在 hello 輸出資料流，但這會顯示 runbook 作業，例如 Verbose 和錯誤的其他資料流 hello runbook 是否寫入 toothem。</span><span class="sxs-lookup"><span data-stu-id="5c858-196">We should only see *Hello World* in hello output stream, but this can show other streams for a runbook job such as Verbose and Error if hello runbook writes toothem.</span></span><br> <span data-ttu-id="5c858-197">![工作摘要](media/automation-first-runbook-graphical/runbook-job-AllLogs.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-197">![Job Summary](media/automation-first-runbook-graphical/runbook-job-AllLogs.png)</span></span>
10. <span data-ttu-id="5c858-198">關閉刀鋒視窗中的所有記錄 hello 和 hello 作業 刀鋒視窗 tooreturn toohello MyFirstRunbook 刀鋒視窗。</span><span class="sxs-lookup"><span data-stu-id="5c858-198">Close hello All Logs blade and hello Job blade tooreturn toohello MyFirstRunbook blade.</span></span>
11. <span data-ttu-id="5c858-199">按一下**作業**tooopen hello 作業刀鋒視窗，這個 runbook。</span><span class="sxs-lookup"><span data-stu-id="5c858-199">Click **Jobs** tooopen hello Jobs blade for this runbook.</span></span>  <span data-ttu-id="5c858-200">這會列出這個 runbook 所建立的所有 hello 作業。</span><span class="sxs-lookup"><span data-stu-id="5c858-200">This lists all hello jobs created by this runbook.</span></span> <span data-ttu-id="5c858-201">我們只能看到列出因為我們只執行 hello 作業一次一項作業。</span><span class="sxs-lookup"><span data-stu-id="5c858-201">We should only see one job listed since we only ran hello job once.</span></span><br> <span data-ttu-id="5c858-202">![作業](media/automation-first-runbook-graphical/runbook-control-jobs.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-202">![Jobs](media/automation-first-runbook-graphical/runbook-control-jobs.png)</span></span>
12. <span data-ttu-id="5c858-203">您可以按一下此工作 tooopen hello 我們開始 hello runbook 時，我們會檢視的相同 [工作] 窗格。</span><span class="sxs-lookup"><span data-stu-id="5c858-203">You can click this job tooopen hello same Job pane that we viewed when we started hello runbook.</span></span>  <span data-ttu-id="5c858-204">這可讓您 toogo 回時間和檢視 hello 詳細資料中針對特定 runbook 所建立的任何作業。</span><span class="sxs-lookup"><span data-stu-id="5c858-204">This allows you toogo back in time and view hello details of any job that was created for a particular runbook.</span></span>

## <a name="step-5---create-variable-assets"></a><span data-ttu-id="5c858-205">步驟 5 - 建立變數資產</span><span class="sxs-lookup"><span data-stu-id="5c858-205">Step 5 - Create variable assets</span></span>
<span data-ttu-id="5c858-206">我們已經測試並發行我們 Runbook，但是到目前為止，它似乎並不實用。</span><span class="sxs-lookup"><span data-stu-id="5c858-206">We've tested and published our runbook, but so far it doesn't do anything useful.</span></span> <span data-ttu-id="5c858-207">我們想要 toohave 它管理的 Azure 資源。</span><span class="sxs-lookup"><span data-stu-id="5c858-207">We want toohave it manage Azure resources.</span></span>  <span data-ttu-id="5c858-208">我們設定 hello runbook tooauthenticate 之前，我們會建立變數 toohold hello 訂用帳戶 ID，而且我們設定在步驟 6 中的 hello 活動 tooauthenticate 之後參考它。</span><span class="sxs-lookup"><span data-stu-id="5c858-208">Before we configure hello runbook tooauthenticate, we  create a variable toohold hello subscription ID and reference it after we set up hello activity tooauthenticate in step 6 below.</span></span>  <span data-ttu-id="5c858-209">包括參考 toohello 訂用帳戶內容，讓您 tooeasily 工作在多個訂用帳戶之間。</span><span class="sxs-lookup"><span data-stu-id="5c858-209">Including a reference toohello subscription context allows you tooeasily work between multiple subscriptions.</span></span>  <span data-ttu-id="5c858-210">繼續之前，請從 hello 關閉 hello 瀏覽窗格的 [訂閱] 選項複製訂用帳戶 ID。</span><span class="sxs-lookup"><span data-stu-id="5c858-210">Before proceeding, copy your subscription ID from hello Subscriptions option off hello Navigation pane.</span></span>  

1. <span data-ttu-id="5c858-211">在 hello 自動化帳戶刀鋒視窗中，按一下 hello**資產**磚與 hello**資產**開啟刀鋒視窗。</span><span class="sxs-lookup"><span data-stu-id="5c858-211">In hello Automation Accounts blade, click hello **Assets** tile and hello **Assets** blade is opened.</span></span>
2. <span data-ttu-id="5c858-212">在 hello 資產刀鋒視窗中，按一下 hello**變數**磚。</span><span class="sxs-lookup"><span data-stu-id="5c858-212">In hello Assets blade, click hello **Variables** tile.</span></span>
3. <span data-ttu-id="5c858-213">在 hello 變數刀鋒視窗中，按一下 **加入變數**。</span><span class="sxs-lookup"><span data-stu-id="5c858-213">On hello Variables blade, click **Add a variable**.</span></span><br><span data-ttu-id="5c858-214">![自動化變數](media/automation-first-runbook-graphical/create-new-subscriptionid-variable.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-214">![Automation Variable](media/automation-first-runbook-graphical/create-new-subscriptionid-variable.png)</span></span>
4. <span data-ttu-id="5c858-215">在 hello 新變數 刀鋒視窗，在 hello**名稱**方塊中，輸入**AzureSubscriptionId**在 hello**值**中，輸入您的訂用帳戶識別碼。</span><span class="sxs-lookup"><span data-stu-id="5c858-215">In hello New variable blade, in hello **Name** box, enter **AzureSubscriptionId** and in hello **Value** box enter your Subscription ID.</span></span>  <span data-ttu-id="5c858-216">保留*字串*hello**類型**hello 的預設值和**加密**。</span><span class="sxs-lookup"><span data-stu-id="5c858-216">Keep *string* for hello **Type** and hello default value for **Encryption**.</span></span>  
5. <span data-ttu-id="5c858-217">按一下**建立**toocreate hello 變數。</span><span class="sxs-lookup"><span data-stu-id="5c858-217">Click **Create** toocreate hello variable.</span></span>  

## <a name="step-6---add-authentication-toomanage-azure-resources"></a><span data-ttu-id="5c858-218">步驟 6-新增驗證 toomanage Azure 資源</span><span class="sxs-lookup"><span data-stu-id="5c858-218">Step 6 - Add authentication toomanage Azure resources</span></span>
<span data-ttu-id="5c858-219">既然我們已經有變數 toohold 我們訂用帳戶 ID，我們可以使用 hello 執行身分認證的參照的 tooin hello 設定我們 runbook tooauthenticate[必要條件](#prerequisites)。</span><span class="sxs-lookup"><span data-stu-id="5c858-219">Now that we have a variable toohold our subscription ID, we can configure our runbook tooauthenticate with hello Run As credentials that are referred tooin hello [prerequisites](#prerequisites).</span></span>  <span data-ttu-id="5c858-220">方法是新增 hello Azure 執行身分連線**資產**和**新增 AzureRMAccount** cmdlet toohello 畫布。</span><span class="sxs-lookup"><span data-stu-id="5c858-220">We do that by adding hello Azure Run As connection **Asset** and **Add-AzureRMAccount** cmdlet toohello canvas.</span></span>  

1. <span data-ttu-id="5c858-221">開啟 hello 圖形化編輯器，依序按一下**編輯**hello MyFirstRunbook 刀鋒視窗上。</span><span class="sxs-lookup"><span data-stu-id="5c858-221">Open hello graphical editor by clicking **Edit** on hello MyFirstRunbook blade.</span></span><br> <span data-ttu-id="5c858-222">![編輯 Runbook](media/automation-first-runbook-graphical/runbook-controls-edit-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-222">![Edit runbook](media/automation-first-runbook-graphical/runbook-controls-edit-revised20165.png)</span></span>
2. <span data-ttu-id="5c858-223">我們不需要 hello**寫入 Hello World toooutput**失效，所以它以滑鼠右鍵按一下並選取**刪除**。</span><span class="sxs-lookup"><span data-stu-id="5c858-223">We don't need hello **Write Hello World toooutput** anymore, so right-click it and select **Delete**.</span></span>
3. <span data-ttu-id="5c858-224">在 hello 程式庫控制項，依序展開**連線**並加入**AzureRunAsConnection** toohello 畫布上選取**新增 toocanvas**。</span><span class="sxs-lookup"><span data-stu-id="5c858-224">In hello Library control, expand **Connections** and add **AzureRunAsConnection** toohello canvas by selecting **Add toocanvas**.</span></span>
4. <span data-ttu-id="5c858-225">Hello 畫布上選取**AzureRunAsConnection** hello 組態控制在窗格中，輸入**取得執行做為連接**在 hello**標籤**文字方塊。</span><span class="sxs-lookup"><span data-stu-id="5c858-225">On hello canvas, select **AzureRunAsConnection** and in hello Configuration control pane, type **Get Run As Connection** in hello **Label** textbox.</span></span>  <span data-ttu-id="5c858-226">這是 hello 連線</span><span class="sxs-lookup"><span data-stu-id="5c858-226">This is hello connection</span></span>
5. <span data-ttu-id="5c858-227">在 hello 程式庫控制項，輸入**新增 AzureRmAccount** hello 搜尋 文字方塊中。</span><span class="sxs-lookup"><span data-stu-id="5c858-227">In hello Library control, type **Add-AzureRmAccount** in hello search textbox.</span></span>
6. <span data-ttu-id="5c858-228">新增**新增 AzureRmAccount** toohello 畫布。</span><span class="sxs-lookup"><span data-stu-id="5c858-228">Add **Add-AzureRmAccount** toohello canvas.</span></span><br> <span data-ttu-id="5c858-229">![](media/automation-first-runbook-graphical/search-powershell-cmdlet-addazurermaccount.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-229">![Add-AzureRMAccount](media/automation-first-runbook-graphical/search-powershell-cmdlet-addazurermaccount.png)</span></span>
7. <span data-ttu-id="5c858-230">將滑鼠停留在**取得執行做為連接**直到 hello 底部 hello 圖形上會出現一個圓圈。</span><span class="sxs-lookup"><span data-stu-id="5c858-230">Hover over **Get Run As Connection** until a circle appears on hello bottom of hello shape.</span></span> <span data-ttu-id="5c858-231">按一下 hello 圓形，然後拖曳 hello 箭號太**新增 AzureRmAccount**。</span><span class="sxs-lookup"><span data-stu-id="5c858-231">Click hello circle and drag hello arrow too**Add-AzureRmAccount**.</span></span>  <span data-ttu-id="5c858-232">您所建立的 hello 箭號是*連結*。</span><span class="sxs-lookup"><span data-stu-id="5c858-232">hello arrow that you created is a *link*.</span></span>  <span data-ttu-id="5c858-233">hello runbook 以開始**取得執行做為連接**，然後執行**新增 AzureRmAccount**。</span><span class="sxs-lookup"><span data-stu-id="5c858-233">hello runbook starts with **Get Run As Connection** and then run **Add-AzureRmAccount**.</span></span><br> <span data-ttu-id="5c858-234">![建立活動之間的連結](media/automation-first-runbook-graphical/runbook-link-auth-activities.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-234">![Create link between activities](media/automation-first-runbook-graphical/runbook-link-auth-activities.png)</span></span>
8. <span data-ttu-id="5c858-235">Hello 畫布上選取**新增 AzureRmAccount** hello 組態控制窗格類型和**登入 tooAzure**在 hello**標籤**文字方塊。</span><span class="sxs-lookup"><span data-stu-id="5c858-235">On hello canvas, select **Add-AzureRmAccount** and in hello Configuration control pane type **Login tooAzure** in hello **Label** textbox.</span></span>
9. <span data-ttu-id="5c858-236">按一下**參數**和 hello 活動參數設定刀鋒視窗隨即出現。</span><span class="sxs-lookup"><span data-stu-id="5c858-236">Click **Parameters** and hello Activity Parameter Configuration blade appears.</span></span>
10. <span data-ttu-id="5c858-237">**新增 AzureRmAccount**有多個參數集，因此我們需要一個 tooselect 之前，我們可以提供參數值。</span><span class="sxs-lookup"><span data-stu-id="5c858-237">**Add-AzureRmAccount** has multiple parameter sets, so we need tooselect one before we can provide parameter values.</span></span>  <span data-ttu-id="5c858-238">按一下**參數設定**]，然後選取 [hello **ServicePrincipalCertificatewithSubscriptionId**參數集。</span><span class="sxs-lookup"><span data-stu-id="5c858-238">Click **Parameter Set** and then select hello **ServicePrincipalCertificatewithSubscriptionId** parameter set.</span></span>
11. <span data-ttu-id="5c858-239">一旦您選取 hello 參數集時，會顯示 hello 參數在 hello 活動參數設定 刀鋒視窗。</span><span class="sxs-lookup"><span data-stu-id="5c858-239">Once you select hello parameter set, hello parameters are displayed in hello Activity Parameter Configuration blade.</span></span>  <span data-ttu-id="5c858-240">按一下 [APPLICATIONID]。</span><span class="sxs-lookup"><span data-stu-id="5c858-240">Click **APPLICATIONID**.</span></span><br> <span data-ttu-id="5c858-241">![加入 Azure RM 帳戶參數](media/automation-first-runbook-graphical/add-azurermaccount-params.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-241">![Add Azure RM account parameters](media/automation-first-runbook-graphical/add-azurermaccount-params.png)</span></span>
12. <span data-ttu-id="5c858-242">在 hello 參數值刀鋒視窗中，選取 **活動輸出**hello**資料來源**並選取**取得執行做為連接**從 hello 清單中，在 hello**欄位路徑**文字方塊中的型別**ApplicationId**，然後按一下**確定**。</span><span class="sxs-lookup"><span data-stu-id="5c858-242">In hello Parameter Value blade, select **Activity output** for hello **Data source** and select **Get Run As Connection** from hello list, in hello **Field path** textbox type **ApplicationId**, and then click **OK**.</span></span>  <span data-ttu-id="5c858-243">我們會指定 hello 屬性 hello 欄位路徑 hello 名稱，因為 hello 活動會輸出具有多個屬性的物件。</span><span class="sxs-lookup"><span data-stu-id="5c858-243">We are specifying hello name of hello property for hello Field path because hello activity outputs an object with multiple properties.</span></span>
13. <span data-ttu-id="5c858-244">按一下**CERTIFICATETHUMBPRINT**，然後在 hello 參數值刀鋒視窗中，選取**活動輸出**hello**資料來源**。</span><span class="sxs-lookup"><span data-stu-id="5c858-244">Click **CERTIFICATETHUMBPRINT**, and in hello Parameter Value blade, select **Activity output** for hello **Data source**.</span></span>  <span data-ttu-id="5c858-245">選取**取得執行做為連接**從 hello 清單中，在 hello**欄位路徑**文字方塊中的型別**CertificateThumbprint**，然後按一下 **[確定]**。</span><span class="sxs-lookup"><span data-stu-id="5c858-245">Select **Get Run As Connection** from hello list, in hello **Field path** textbox type **CertificateThumbprint**, and then click **OK**.</span></span>
14. <span data-ttu-id="5c858-246">按一下**SERVICEPRINCIPAL**，然後在 hello 參數值刀鋒視窗中，選取**ConstantValue** hello**資料來源**，按一下 hello 選項**True**，然後按一下**確定**。</span><span class="sxs-lookup"><span data-stu-id="5c858-246">Click **SERVICEPRINCIPAL**, and in hello Parameter Value blade, select **ConstantValue** for hello **Data source**, click hello option **True**, and then click **OK**.</span></span>
15. <span data-ttu-id="5c858-247">按一下**TENANTID**，然後在 hello 參數值刀鋒視窗中，選取**活動輸出**hello**資料來源**。</span><span class="sxs-lookup"><span data-stu-id="5c858-247">Click **TENANTID**, and in hello Parameter Value blade, select **Activity output** for hello **Data source**.</span></span>  <span data-ttu-id="5c858-248">選取**取得執行做為連接**從 hello 清單中，在 hello**欄位路徑**文字方塊中的型別**TenantId**，然後按一下 **[確定]**兩次。</span><span class="sxs-lookup"><span data-stu-id="5c858-248">Select **Get Run As Connection** from hello list, in hello **Field path** textbox type **TenantId**, and then click **OK** twice.</span></span>  
16. <span data-ttu-id="5c858-249">在 hello 程式庫控制項，輸入**組 AzureRmContext** hello 搜尋 文字方塊中。</span><span class="sxs-lookup"><span data-stu-id="5c858-249">In hello Library control, type **Set-AzureRmContext** in hello search textbox.</span></span>
17. <span data-ttu-id="5c858-250">新增**組 AzureRmContext** toohello 畫布。</span><span class="sxs-lookup"><span data-stu-id="5c858-250">Add **Set-AzureRmContext** toohello canvas.</span></span>
18. <span data-ttu-id="5c858-251">Hello 畫布上選取**組 AzureRmContext** hello 組態控制窗格類型和**指定訂用帳戶 Id**在 hello**標籤**文字方塊。</span><span class="sxs-lookup"><span data-stu-id="5c858-251">On hello canvas, select **Set-AzureRmContext** and in hello Configuration control pane type **Specify Subscription Id** in hello **Label** textbox.</span></span>
19. <span data-ttu-id="5c858-252">按一下**參數**和 hello 活動參數設定刀鋒視窗隨即出現。</span><span class="sxs-lookup"><span data-stu-id="5c858-252">Click **Parameters** and hello Activity Parameter Configuration blade appears.</span></span>
20. <span data-ttu-id="5c858-253">**設定 AzureRmContext**有多個參數集，因此我們需要一個 tooselect 之前，我們可以提供參數值。</span><span class="sxs-lookup"><span data-stu-id="5c858-253">**Set-AzureRmContext** has multiple parameter sets, so we need tooselect one before we can provide parameter values.</span></span>  <span data-ttu-id="5c858-254">按一下**參數設定**]，然後選取 [hello **SubscriptionId**參數集。</span><span class="sxs-lookup"><span data-stu-id="5c858-254">Click **Parameter Set** and then select hello **SubscriptionId** parameter set.</span></span>  
21. <span data-ttu-id="5c858-255">一旦您選取 hello 參數集時，會顯示 hello 參數在 hello 活動參數設定 刀鋒視窗。</span><span class="sxs-lookup"><span data-stu-id="5c858-255">Once you select hello parameter set, hello parameters are displayed in hello Activity Parameter Configuration blade.</span></span>  <span data-ttu-id="5c858-256">按一下 [SubscriptionID] </span><span class="sxs-lookup"><span data-stu-id="5c858-256">Click **SubscriptionID**</span></span>
22. <span data-ttu-id="5c858-257">在 hello 參數值刀鋒視窗中，選取 **變數資產**hello**資料來源**選取**AzureSubscriptionId**從 hello 清單，然後按一下**確定**兩次。</span><span class="sxs-lookup"><span data-stu-id="5c858-257">In hello Parameter Value blade, select **Variable Asset** for hello **Data source** and select **AzureSubscriptionId** from hello list and then click **OK** twice.</span></span>   
23. <span data-ttu-id="5c858-258">將滑鼠停留在**登入 tooAzure**直到 hello 底部 hello 圖形上會出現一個圓圈。</span><span class="sxs-lookup"><span data-stu-id="5c858-258">Hover over **Login tooAzure** until a circle appears on hello bottom of hello shape.</span></span> <span data-ttu-id="5c858-259">按一下 hello 圓形，然後拖曳 hello 箭號太**指定訂用帳戶 Id**。</span><span class="sxs-lookup"><span data-stu-id="5c858-259">Click hello circle and drag hello arrow too**Specify Subscription Id**.</span></span>

<span data-ttu-id="5c858-260">您的 runbook 看起來應該像 hello 遵循此時：</span><span class="sxs-lookup"><span data-stu-id="5c858-260">Your runbook should look like hello following at this point:</span></span> <br>![Runbook 驗證組態](media/automation-first-runbook-graphical/runbook-auth-config.png)

## <a name="step-7---add-activity-toostart-a-virtual-machine"></a><span data-ttu-id="5c858-262">步驟 7-新增活動 toostart 虛擬機器</span><span class="sxs-lookup"><span data-stu-id="5c858-262">Step 7 - Add activity toostart a virtual machine</span></span>
<span data-ttu-id="5c858-263">我們在這裡新增**開始 AzureRmVM**活動 toostart 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="5c858-263">Here we add a **Start-AzureRmVM** activity toostart a virtual machine.</span></span>  <span data-ttu-id="5c858-264">您可以挑選任何虛擬機器，您的 Azure 訂閱，而且現在您硬，名稱為 hello cmdlet。</span><span class="sxs-lookup"><span data-stu-id="5c858-264">You can pick any virtual machine in your Azure subscription, and for now you hardcode that name into hello cmdlet.</span></span>

1. <span data-ttu-id="5c858-265">在 hello 程式庫控制項，輸入**開始 AzureRm** hello 搜尋 文字方塊中。</span><span class="sxs-lookup"><span data-stu-id="5c858-265">In hello Library control, type **Start-AzureRm** in hello search textbox.</span></span>
2. <span data-ttu-id="5c858-266">新增**開始 AzureRmVM** toohello 畫布，然後按一下並拖曳它下方**指定訂用帳戶 Id**。</span><span class="sxs-lookup"><span data-stu-id="5c858-266">Add **Start-AzureRmVM** toohello canvas and then click and drag it underneath **Specify Subscription Id**.</span></span>
3. <span data-ttu-id="5c858-267">將滑鼠停留在**指定訂用帳戶 Id**直到 hello 底部 hello 圖形上會出現一個圓圈。</span><span class="sxs-lookup"><span data-stu-id="5c858-267">Hover over **Specify Subscription Id** until a circle appears on hello bottom of hello shape.</span></span>  <span data-ttu-id="5c858-268">按一下 hello 圓形，然後拖曳 hello 箭號太**開始 AzureRmVM**。</span><span class="sxs-lookup"><span data-stu-id="5c858-268">Click hello circle and drag hello arrow too**Start-AzureRmVM**.</span></span>
4. <span data-ttu-id="5c858-269">選取 [Start-AzureRmVM]。</span><span class="sxs-lookup"><span data-stu-id="5c858-269">Select **Start-AzureRmVM**.</span></span>  <span data-ttu-id="5c858-270">按一下**參數**然後**參數設定**tooview hello 設定**開始 AzureRmVM**。</span><span class="sxs-lookup"><span data-stu-id="5c858-270">Click **Parameters** and then **Parameter Set** tooview hello sets for **Start-AzureRmVM**.</span></span>  <span data-ttu-id="5c858-271">選取 hello **ResourceGroupNameParameterSetName**參數集。</span><span class="sxs-lookup"><span data-stu-id="5c858-271">Select hello **ResourceGroupNameParameterSetName** parameter set.</span></span> <span data-ttu-id="5c858-272">請注意，[ResourceGroupName] 和 [名稱] 旁邊具有驚嘆號。</span><span class="sxs-lookup"><span data-stu-id="5c858-272">Note that **ResourceGroupName** and **Name** have exclamation points next them.</span></span>  <span data-ttu-id="5c858-273">這表示它們是必要的參數。</span><span class="sxs-lookup"><span data-stu-id="5c858-273">This indicates that they are required parameters.</span></span>  <span data-ttu-id="5c858-274">也請注意這兩者應該是字串值。</span><span class="sxs-lookup"><span data-stu-id="5c858-274">Also note both expect string values.</span></span>
5. <span data-ttu-id="5c858-275">選取 [Start-AzureRmVM] 。</span><span class="sxs-lookup"><span data-stu-id="5c858-275">Select **Name**.</span></span>  <span data-ttu-id="5c858-276">選取**PowerShell 運算式**hello**資料來源**和 hello 名稱中的 hello 虛擬機器以我們開始此 runbook 的雙引號括住的類型。</span><span class="sxs-lookup"><span data-stu-id="5c858-276">Select **PowerShell expression** for hello **Data source** and type in hello name of hello virtual machine surrounded with double quotes that we start with this runbook.</span></span>  <span data-ttu-id="5c858-277">按一下 [確定] 。</span><span class="sxs-lookup"><span data-stu-id="5c858-277">Click **OK**.</span></span><br><span data-ttu-id="5c858-278">![Start-AzureRmVM 名稱參數值](media/automation-first-runbook-graphical/runbook-startvm-nameparameter.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-278">![Start-AzureRmVM Name Parameter Value](media/automation-first-runbook-graphical/runbook-startvm-nameparameter.png)</span></span>
6. <span data-ttu-id="5c858-279">選取 [ResourceGroupName]。</span><span class="sxs-lookup"><span data-stu-id="5c858-279">Select **ResourceGroupName**.</span></span> <span data-ttu-id="5c858-280">使用**PowerShell 運算式**hello**資料來源**和 hello 名稱中的 hello 資源群組以雙引號括住的類型。</span><span class="sxs-lookup"><span data-stu-id="5c858-280">Use **PowerShell expression** for hello **Data source** and type in hello name of hello resource group surrounded with double quotes.</span></span>  <span data-ttu-id="5c858-281">按一下 [確定] 。</span><span class="sxs-lookup"><span data-stu-id="5c858-281">Click **OK**.</span></span><br> <span data-ttu-id="5c858-282">![Start-AzureRmVM 參數](media/automation-first-runbook-graphical/startazurermvm-params.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-282">![Start-AzureRmVM Parameters](media/automation-first-runbook-graphical/startazurermvm-params.png)</span></span>
7. <span data-ttu-id="5c858-283">以便我們可以測試 hello runbook，請按一下 [測試] 窗格。</span><span class="sxs-lookup"><span data-stu-id="5c858-283">Click Test pane so that we can test hello runbook.</span></span>
8. <span data-ttu-id="5c858-284">按一下**啟動**toostart hello 測試。</span><span class="sxs-lookup"><span data-stu-id="5c858-284">Click **Start** toostart hello test.</span></span>  <span data-ttu-id="5c858-285">在完成時，請檢查該 hello 虛擬機器已啟動。</span><span class="sxs-lookup"><span data-stu-id="5c858-285">Once it completes, check that hello virtual machine was started.</span></span>

<span data-ttu-id="5c858-286">您的 runbook 看起來應該像 hello 遵循此時：</span><span class="sxs-lookup"><span data-stu-id="5c858-286">Your runbook should look like hello following at this point:</span></span> <br>![Runbook 驗證組態](media/automation-first-runbook-graphical/runbook-startvm.png)

## <a name="step-8---add-additional-input-parameters-toohello-runbook"></a><span data-ttu-id="5c858-288">步驟 8-新增額外的輸入的參數 toohello runbook</span><span class="sxs-lookup"><span data-stu-id="5c858-288">Step 8 - Add additional input parameters toohello runbook</span></span>
<span data-ttu-id="5c858-289">我們 runbook 目前啟動 hello 的虛擬機器在 hello 我們 hello 中指定的資源群組中**開始 AzureRmVM** cmdlet。</span><span class="sxs-lookup"><span data-stu-id="5c858-289">Our runbook currently starts hello virtual machine in hello resource group that we specified in hello **Start-AzureRmVM** cmdlet.</span></span>  <span data-ttu-id="5c858-290">我們的 runbook 會是我們無法同時指定 hello runbook 啟動時的更實用。</span><span class="sxs-lookup"><span data-stu-id="5c858-290">Our runbook would be more useful if we could specify both when hello runbook is started.</span></span>  <span data-ttu-id="5c858-291">我們現在加入輸入的參數 toohello runbook tooprovide 該功能。</span><span class="sxs-lookup"><span data-stu-id="5c858-291">We now add input parameters toohello runbook tooprovide that functionality.</span></span>

1. <span data-ttu-id="5c858-292">開啟 hello 圖形化編輯器，依序按一下**編輯**上 hello **MyFirstRunbook**窗格。</span><span class="sxs-lookup"><span data-stu-id="5c858-292">Open hello graphical editor by clicking **Edit** on hello **MyFirstRunbook** pane.</span></span>
2. <span data-ttu-id="5c858-293">按一下**輸入和輸出**然後**加入輸入**tooopen hello Runbook 輸入參數 窗格。</span><span class="sxs-lookup"><span data-stu-id="5c858-293">Click **Input and output** and then **Add input** tooopen hello Runbook Input Parameter pane.</span></span><br> <span data-ttu-id="5c858-294">![Runbook 輸入和輸出](media/automation-first-runbook-graphical/runbook-toolbar-InputandOutput-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-294">![Runbook Input and Output](media/automation-first-runbook-graphical/runbook-toolbar-InputandOutput-revised20165.png)</span></span>
3. <span data-ttu-id="5c858-295">指定*VMName* hello**名稱**。</span><span class="sxs-lookup"><span data-stu-id="5c858-295">Specify *VMName* for hello **Name**.</span></span>  <span data-ttu-id="5c858-296">保留*字串*hello**類型**，但變更**強制**太*是*。</span><span class="sxs-lookup"><span data-stu-id="5c858-296">Keep *string* for hello **Type**, but change **Mandatory** too*Yes*.</span></span>  <span data-ttu-id="5c858-297">按一下 [確定] 。</span><span class="sxs-lookup"><span data-stu-id="5c858-297">Click **OK**.</span></span>
4. <span data-ttu-id="5c858-298">建立第二個必要的輸入的參數，呼叫*ResourceGroupName* ，然後按一下**確定**tooclose hello**輸入和輸出**窗格。</span><span class="sxs-lookup"><span data-stu-id="5c858-298">Create a second mandatory input parameter called *ResourceGroupName* and then click **OK** tooclose hello **Input and Output** pane.</span></span><br> <span data-ttu-id="5c858-299">![Runbook 輸入參數](media/automation-first-runbook-graphical/start-azurermvm-params-outputs.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-299">![Runbook Input Parameters](media/automation-first-runbook-graphical/start-azurermvm-params-outputs.png)</span></span>
5. <span data-ttu-id="5c858-300">選取 hello**開始 AzureRmVM**活動，然後按一下**參數**。</span><span class="sxs-lookup"><span data-stu-id="5c858-300">Select hello **Start-AzureRmVM** activity and then click **Parameters**.</span></span>
6. <span data-ttu-id="5c858-301">變更 hello**資料來源**如**名稱**太**Runbook 輸入**，然後選取  **VMName**。</span><span class="sxs-lookup"><span data-stu-id="5c858-301">Change hello **Data source** for **Name** too**Runbook input** and then select **VMName**.</span></span><br>
7. <span data-ttu-id="5c858-302">變更 hello**資料來源**如**ResourceGroupName**太**Runbook 輸入**，然後選取  **ResourceGroupName**。</span><span class="sxs-lookup"><span data-stu-id="5c858-302">Change hello **Data source** for **ResourceGroupName** too**Runbook input** and then select **ResourceGroupName**.</span></span><br> <span data-ttu-id="5c858-303">![Start-AzureVM 參數](media/automation-first-runbook-graphical/start-azurermvm-params-runbookinput.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-303">![Start-AzureVM Parameters](media/automation-first-runbook-graphical/start-azurermvm-params-runbookinput.png)</span></span>
8. <span data-ttu-id="5c858-304">儲存 hello runbook 並開啟 hello 測試窗格。</span><span class="sxs-lookup"><span data-stu-id="5c858-304">Save hello runbook and open hello Test pane.</span></span>  <span data-ttu-id="5c858-305">請注意，您可以現在提供值給 hello hello 測試中使用兩個輸入的變數。</span><span class="sxs-lookup"><span data-stu-id="5c858-305">Note that you can now provide values for hello two input variables that you use in hello test.</span></span>
9. <span data-ttu-id="5c858-306">關閉 hello 測試窗格。</span><span class="sxs-lookup"><span data-stu-id="5c858-306">Close hello Test pane.</span></span>
10. <span data-ttu-id="5c858-307">按一下**發行**toopublish hello 新版 hello runbook。</span><span class="sxs-lookup"><span data-stu-id="5c858-307">Click **Publish** toopublish hello new version of hello runbook.</span></span>
11. <span data-ttu-id="5c858-308">停止 hello hello 上一個步驟中啟動的虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="5c858-308">Stop hello virtual machine that you started in hello previous step.</span></span>
12. <span data-ttu-id="5c858-309">按一下**啟動**toostart hello runbook。</span><span class="sxs-lookup"><span data-stu-id="5c858-309">Click **Start** toostart hello runbook.</span></span>  <span data-ttu-id="5c858-310">型別在 hello **VMName**和**ResourceGroupName**要 toostart hello 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="5c858-310">Type in hello **VMName** and **ResourceGroupName** for hello virtual machine that you're going toostart.</span></span><br> <span data-ttu-id="5c858-311">![Start Runbook](media/automation-first-runbook-graphical/runbook-start-inputparams.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-311">![Start Runbook](media/automation-first-runbook-graphical/runbook-start-inputparams.png)</span></span>
13. <span data-ttu-id="5c858-312">Hello runbook 完成時，請檢查該 hello 虛擬機器已啟動。</span><span class="sxs-lookup"><span data-stu-id="5c858-312">When hello runbook completes, check that hello virtual machine was started.</span></span>

## <a name="step-9---create-a-conditional-link"></a><span data-ttu-id="5c858-313">步驟 9 - 建立條件式連結</span><span class="sxs-lookup"><span data-stu-id="5c858-313">Step 9 - Create a conditional link</span></span>
<span data-ttu-id="5c858-314">我們現在修改 hello runbook，使它只會嘗試 toostart hello 虛擬機器未啟動。</span><span class="sxs-lookup"><span data-stu-id="5c858-314">We now modify hello runbook so that it only attempts toostart hello virtual machine if it is not already started.</span></span>  <span data-ttu-id="5c858-315">您可以加入**Get AzureRmVM**取得 hello hello 虛擬機器的執行個體層級狀態的 cmdlet toohello runbook。</span><span class="sxs-lookup"><span data-stu-id="5c858-315">You do this by adding a **Get-AzureRmVM** cmdlet toohello runbook that gets hello instance level status of hello virtual machine.</span></span> <span data-ttu-id="5c858-316">接著您將新增的 PowerShell 工作流程程式碼模組稱為**取得狀態**PowerShell 的程式碼片段，碼 toodetermine hello 虛擬機器狀態是否正在執行或已停止。</span><span class="sxs-lookup"><span data-stu-id="5c858-316">Then you add a PowerShell Workflow code module called **Get Status** with a snippet of PowerShell code toodetermine if hello virtual machine state is running or stopped.</span></span>  <span data-ttu-id="5c858-317">條件式連結從 hello**取得狀態**模組只會執行**開始 AzureRmVM**如果停止 hello 目前執行中狀態。</span><span class="sxs-lookup"><span data-stu-id="5c858-317">A conditional link from hello **Get Status** module only runs **Start-AzureRmVM** if hello current running state is stopped.</span></span>  <span data-ttu-id="5c858-318">最後，我們會輸出訊息 tooinform 您 hello VM 是否已成功啟動或不使用 hello PowerShell Write-output cmdlet。</span><span class="sxs-lookup"><span data-stu-id="5c858-318">Finally, we output a message tooinform you if hello VM was successfully started or not using hello PowerShell Write-Output cmdlet.</span></span>

1. <span data-ttu-id="5c858-319">開啟**MyFirstRunbook** hello 圖形化編輯器中。</span><span class="sxs-lookup"><span data-stu-id="5c858-319">Open **MyFirstRunbook** in hello graphical editor.</span></span>
2. <span data-ttu-id="5c858-320">移除 hello 連結之間**指定訂用帳戶 Id**和**開始 AzureRmVM**按一下它，然後按 hello*刪除*索引鍵。</span><span class="sxs-lookup"><span data-stu-id="5c858-320">Remove hello link between **Specify Subscription Id** and **Start-AzureRmVM** by clicking on it and then pressing hello *Delete* key.</span></span>
3. <span data-ttu-id="5c858-321">在 hello 程式庫控制項，輸入**Get AzureRm** hello 搜尋 文字方塊中。</span><span class="sxs-lookup"><span data-stu-id="5c858-321">In hello Library control, type **Get-AzureRm** in hello search textbox.</span></span>
4. <span data-ttu-id="5c858-322">新增**Get AzureRmVM** toohello 畫布。</span><span class="sxs-lookup"><span data-stu-id="5c858-322">Add **Get-AzureRmVM** toohello canvas.</span></span>
5. <span data-ttu-id="5c858-323">選取**Get AzureRmVM**然後**參數設定**tooview hello 設定**Get AzureRmVM**。</span><span class="sxs-lookup"><span data-stu-id="5c858-323">Select **Get-AzureRmVM** and then **Parameter Set** tooview hello sets for **Get-AzureRmVM**.</span></span>  <span data-ttu-id="5c858-324">選取 hello **GetVirtualMachineInResourceGroupNameParamSet**參數集。</span><span class="sxs-lookup"><span data-stu-id="5c858-324">Select hello **GetVirtualMachineInResourceGroupNameParamSet** parameter set.</span></span>  <span data-ttu-id="5c858-325">請注意，[ResourceGroupName] 和 [名稱] 旁邊具有驚嘆號。</span><span class="sxs-lookup"><span data-stu-id="5c858-325">Note that **ResourceGroupName** and **Name** have exclamation points next them.</span></span>  <span data-ttu-id="5c858-326">這表示它們是必要的參數。</span><span class="sxs-lookup"><span data-stu-id="5c858-326">This indicates that they are required parameters.</span></span>  <span data-ttu-id="5c858-327">也請注意這兩者應該是字串值。</span><span class="sxs-lookup"><span data-stu-id="5c858-327">Also note both expect string values.</span></span>
6. <span data-ttu-id="5c858-328">在 [名稱] 的 [資料來源] 底下，選取 [Runbook 輸入]，然後選取 [VMName]。</span><span class="sxs-lookup"><span data-stu-id="5c858-328">Under **Data source** for **Name**, select **Runbook input** and then select **VMName**.</span></span>  <span data-ttu-id="5c858-329">按一下 [確定] 。</span><span class="sxs-lookup"><span data-stu-id="5c858-329">Click **OK**.</span></span>
7. <span data-ttu-id="5c858-330">在 [ResourceGroupName] 的 [資料來源] 底下，選取 [Runbook 輸入]，然後選取 [ResourceGroupName]。</span><span class="sxs-lookup"><span data-stu-id="5c858-330">Under **Data source** for **ResourceGroupName**, select **Runbook input** and then select **ResourceGroupName**.</span></span>  <span data-ttu-id="5c858-331">按一下 [確定] 。</span><span class="sxs-lookup"><span data-stu-id="5c858-331">Click **OK**.</span></span>
8. <span data-ttu-id="5c858-332">在 狀態 的 資料來源 底下，選取 常數值，然後按一下True。</span><span class="sxs-lookup"><span data-stu-id="5c858-332">Under **Data source** for **Status**, select **Constant value** and then click  **True**.</span></span>  <span data-ttu-id="5c858-333">按一下 [確定] 。</span><span class="sxs-lookup"><span data-stu-id="5c858-333">Click **OK**.</span></span>  
9. <span data-ttu-id="5c858-334">建立連結，以從**指定訂用帳戶 Id**太**Get AzureRmVM**。</span><span class="sxs-lookup"><span data-stu-id="5c858-334">Create a link from **Specify Subscription Id** too**Get-AzureRmVM**.</span></span>
10. <span data-ttu-id="5c858-335">在 hello 程式庫控制項中展開**Runbook 控制**並加入**程式碼**toohello 畫布。</span><span class="sxs-lookup"><span data-stu-id="5c858-335">In hello library control, expand **Runbook Control** and add **Code** toohello canvas.</span></span>  
11. <span data-ttu-id="5c858-336">建立連結，以從**Get AzureRmVM**太**程式碼**。</span><span class="sxs-lookup"><span data-stu-id="5c858-336">Create a link from **Get-AzureRmVM** too**Code**.</span></span>  
12. <span data-ttu-id="5c858-337">按一下**程式碼**和 hello 組態在窗格中，變更標籤太**取得狀態**。</span><span class="sxs-lookup"><span data-stu-id="5c858-337">Click **Code** and in hello Configuration pane, change label too**Get Status**.</span></span>
13. <span data-ttu-id="5c858-338">選取**程式碼**參數和 hello**程式碼編輯器**刀鋒視窗隨即出現。</span><span class="sxs-lookup"><span data-stu-id="5c858-338">Select **Code** parameter, and hello **Code Editor** blade appears.</span></span>  
14. <span data-ttu-id="5c858-339">在 hello 程式碼編輯器中，貼上下列程式碼片段的 hello:</span><span class="sxs-lookup"><span data-stu-id="5c858-339">In hello code editor, paste hello following snippet of code:</span></span>
    
     ```
     $StatusesJson = $ActivityOutput['Get-AzureRmVM'].StatusesText
     $Statuses = ConvertFrom-Json $StatusesJson
     $StatusOut =""
     foreach ($Status in $Statuses){
     if($Status.Code -eq "Powerstate/running"){$StatusOut = "running"}
     elseif ($Status.Code -eq "Powerstate/deallocated") {$StatusOut = "stopped"}
     }
     $StatusOut
     ```
15. <span data-ttu-id="5c858-340">建立連結，以從**取得狀態**太**開始 AzureRmVM**。</span><span class="sxs-lookup"><span data-stu-id="5c858-340">Create a link from **Get Status** too**Start-AzureRmVM**.</span></span><br> <span data-ttu-id="5c858-341">![程式碼模組的 Runbook](media/automation-first-runbook-graphical/runbook-startvm-get-status.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-341">![Runbook with Code Module](media/automation-first-runbook-graphical/runbook-startvm-get-status.png)</span></span>  
16. <span data-ttu-id="5c858-342">選取 hello 連結，並在 hello 設定窗格中，變更**套用條件**太**是**。</span><span class="sxs-lookup"><span data-stu-id="5c858-342">Select hello link and in hello Configuration pane, change **Apply condition** too**Yes**.</span></span>   <span data-ttu-id="5c858-343">請注意 hello 連結會開啟 tooa 虛線一行指出 hello 目標活動只能執行是否 hello 條件解析 tootrue。</span><span class="sxs-lookup"><span data-stu-id="5c858-343">Note hello link turns tooa dashed line indicating that hello target activity only runs if hello condition resolves tootrue.</span></span>  
17. <span data-ttu-id="5c858-344">Hello**條件運算式**，型別*$ActivityOutput [' 取得狀態 ']-eq"Stopped"*。</span><span class="sxs-lookup"><span data-stu-id="5c858-344">For hello **Condition expression**, type *$ActivityOutput['Get Status'] -eq "Stopped"*.</span></span>  <span data-ttu-id="5c858-345">**開始 AzureRmVM**現在僅執行如果 hello 虛擬機器已停止。</span><span class="sxs-lookup"><span data-stu-id="5c858-345">**Start-AzureRmVM** now only runs if hello virtual machine is stopped.</span></span>
18. <span data-ttu-id="5c858-346">在 hello 程式庫控制項，依序展開**Cmdlet**然後**Microsoft.PowerShell.Utility**。</span><span class="sxs-lookup"><span data-stu-id="5c858-346">In hello Library control, expand **Cmdlets** and then **Microsoft.PowerShell.Utility**.</span></span>
19. <span data-ttu-id="5c858-347">新增**Write-output** toohello 畫布兩次。</span><span class="sxs-lookup"><span data-stu-id="5c858-347">Add **Write-Output** toohello canvas twice.</span></span><br> <span data-ttu-id="5c858-348">![Write-Output 的 Runbook](media/automation-first-runbook-graphical/runbook-startazurermvm-complete.png)</span><span class="sxs-lookup"><span data-stu-id="5c858-348">![Runbook with Write-Output](media/automation-first-runbook-graphical/runbook-startazurermvm-complete.png)</span></span>
20. <span data-ttu-id="5c858-349">Hello 上第一個**Write-output**控制，請按一下**參數**並變更 hello**標籤**值太*通知 VM 啟動*。</span><span class="sxs-lookup"><span data-stu-id="5c858-349">On hello first **Write-Output** control, click **Parameters** and change hello **Label** value too*Notify VM Started*.</span></span>
21. <span data-ttu-id="5c858-350">如**InputObject**，變更**資料來源**太**PowerShell 運算式**hello 運算式中的類型和*"$VMName 已順利啟動。 」*.</span><span class="sxs-lookup"><span data-stu-id="5c858-350">For **InputObject**, change **Data source** too**PowerShell expression** and type in hello expression *"$VMName successfully started."*.</span></span>
22. <span data-ttu-id="5c858-351">Hello 上第二個**Write-output**控制，請按一下**參數**並變更 hello**標籤**值太*通知 VM 啟動失敗*</span><span class="sxs-lookup"><span data-stu-id="5c858-351">On hello second **Write-Output** control, click **Parameters** and change hello **Label** value too*Notify VM Start Failed*</span></span>
23. <span data-ttu-id="5c858-352">如**InputObject**，變更**資料來源**太**PowerShell 運算式**hello 運算式中的類型和*"$VMName 無法啟動。 」*.</span><span class="sxs-lookup"><span data-stu-id="5c858-352">For **InputObject**, change **Data source** too**PowerShell expression** and type in hello expression *"$VMName could not start."*.</span></span>
24. <span data-ttu-id="5c858-353">建立連結，以從**開始 AzureRmVM**太**通知 VM 啟動**和**通知 VM 啟動失敗**。</span><span class="sxs-lookup"><span data-stu-id="5c858-353">Create a link from **Start-AzureRmVM** too**Notify VM Started** and **Notify VM Start Failed**.</span></span>
25. <span data-ttu-id="5c858-354">選取 hello 連結太**通知 VM 啟動**並變更**套用條件**太**True**。</span><span class="sxs-lookup"><span data-stu-id="5c858-354">Select hello link too**Notify VM Started** and change **Apply condition** too**True**.</span></span>
26. <span data-ttu-id="5c858-355">Hello**條件運算式**，型別*$ActivityOutput [' 開始-AzureRmVM']。IsSuccessStatusCode-eq $true*。</span><span class="sxs-lookup"><span data-stu-id="5c858-355">For hello **Condition expression**, type *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -eq $true*.</span></span>  <span data-ttu-id="5c858-356">此寫入輸出控制現在僅執行 hello 虛擬機器已順利啟動。</span><span class="sxs-lookup"><span data-stu-id="5c858-356">This Write-Output control now only runs if hello virtual machine is successfully started.</span></span>
27. <span data-ttu-id="5c858-357">選取 hello 連結太**通知 VM 啟動失敗**並變更**套用條件**太**True**。</span><span class="sxs-lookup"><span data-stu-id="5c858-357">Select hello link too**Notify VM Start Failed** and change **Apply condition** too**True**.</span></span>
28. <span data-ttu-id="5c858-358">Hello**條件運算式**，型別*$ActivityOutput [' 開始-AzureRmVM']。IsSuccessStatusCode ne $true*。</span><span class="sxs-lookup"><span data-stu-id="5c858-358">For hello **Condition expression**, type *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -ne $true*.</span></span>  <span data-ttu-id="5c858-359">此寫入輸出現在控制才會執行，如果未成功啟動 hello 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="5c858-359">This Write-Output control now only runs if hello virtual machine is not successfully started.</span></span>
29. <span data-ttu-id="5c858-360">儲存 hello runbook 並開啟 hello 測試窗格。</span><span class="sxs-lookup"><span data-stu-id="5c858-360">Save hello runbook and open hello Test pane.</span></span>
30. <span data-ttu-id="5c858-361">啟動 hello runbook 與 hello 虛擬機器已停止，並開始時間。</span><span class="sxs-lookup"><span data-stu-id="5c858-361">Start hello runbook with hello virtual machine stopped, and it should start.</span></span>

## <a name="next-steps"></a><span data-ttu-id="5c858-362">後續步驟</span><span class="sxs-lookup"><span data-stu-id="5c858-362">Next steps</span></span>
* <span data-ttu-id="5c858-363">toolearn 詳細資料圖形化撰寫，請參閱[Azure 自動化中的圖形化撰寫](automation-graphical-authoring-intro.md)</span><span class="sxs-lookup"><span data-stu-id="5c858-363">toolearn more about Graphical Authoring, see [Graphical authoring in Azure Automation](automation-graphical-authoring-intro.md)</span></span>
* <span data-ttu-id="5c858-364">請參閱 < 開始使用 PowerShell runbook tooget[我的第一個 PowerShell runbook](automation-first-runbook-textual-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="5c858-364">tooget started with PowerShell runbooks, see [My first PowerShell runbook](automation-first-runbook-textual-powershell.md)</span></span>
* <span data-ttu-id="5c858-365">tooget 開始使用 PowerShell 工作流程 runbook，請參閱[我的第一個 PowerShell 工作流程 runbook](automation-first-runbook-textual.md)</span><span class="sxs-lookup"><span data-stu-id="5c858-365">tooget started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md)</span></span>

