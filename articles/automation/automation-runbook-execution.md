---
title: "在 Azure 自動化中的 aaaRunbook 執行 |Microsoft 文件"
description: "描述如何在 Azure 自動化 runbook 處理的 hello 詳細資料。"
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: d10c8ce2-2c0b-4ea7-ba3c-d20e09b2c9ca
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/17/2017
ms.author: bwren
ms.openlocfilehash: bdb535675443353d44640bc7773de3f9dac5e42c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="runbook-execution-in-azure-automation"></a><span data-ttu-id="8092f-103">Azure 自動化中的 Runbook 執行</span><span class="sxs-lookup"><span data-stu-id="8092f-103">Runbook execution in Azure Automation</span></span>
<span data-ttu-id="8092f-104">當您在 Azure 自動化中啟動 Runbook 時即會建立一個工作。</span><span class="sxs-lookup"><span data-stu-id="8092f-104">When you start a runbook in Azure Automation, a job is created.</span></span> <span data-ttu-id="8092f-105">工作是 Runbook 的單一執行個體。</span><span class="sxs-lookup"><span data-stu-id="8092f-105">A job is a single execution instance of a runbook.</span></span> <span data-ttu-id="8092f-106">Azure 自動化背景工作會指派 toorun 每項工作。</span><span class="sxs-lookup"><span data-stu-id="8092f-106">An Azure Automation worker is assigned toorun each job.</span></span> <span data-ttu-id="8092f-107">雖然背景工作是由多個 Azure 帳戶共用，來自不同自動化帳戶的工作會彼此隔離。</span><span class="sxs-lookup"><span data-stu-id="8092f-107">While workers are shared by multiple Azure accounts, jobs from different Automation accounts are isolated from one another.</span></span> <span data-ttu-id="8092f-108">適用於您作業沒有控制哪一個背景工作服務 hello 要求。</span><span class="sxs-lookup"><span data-stu-id="8092f-108">You do not have control over which worker services hello request for your job.</span></span>  <span data-ttu-id="8092f-109">單一 Runbook 一次可以執行多個工作。</span><span class="sxs-lookup"><span data-stu-id="8092f-109">A single runbook can have multiple jobs running at one time.</span></span> <span data-ttu-id="8092f-110">當您在 hello Azure 入口網站中檢視 runbook 的 hello 清單時，它會列出 hello 的每個 runbook 已啟動的所有工作的狀態。</span><span class="sxs-lookup"><span data-stu-id="8092f-110">When you view hello list of runbooks in hello Azure portal, it lists hello status of all jobs that were started for each runbook.</span></span> <span data-ttu-id="8092f-111">您可以檢視 hello 每個 runbook 的工作清單中的每個訂單 tootrack hello 狀態。</span><span class="sxs-lookup"><span data-stu-id="8092f-111">You can view hello list of jobs for each runbook in order tootrack hello status of each.</span></span> <span data-ttu-id="8092f-112">如需 hello 不同工作狀態的說明，請參閱[作業狀態](#job-statuses)。</span><span class="sxs-lookup"><span data-stu-id="8092f-112">For a description of hello different job statuses, see [Job Statuses](#job-statuses).</span></span>

<span data-ttu-id="8092f-113">hello 下列圖表顯示 hello 生命週期的 runbook 工作的[圖形化 runbook](automation-runbook-types.md#graphical-runbooks)和[PowerShell 工作流程 runbook](automation-runbook-types.md#powershell-workflow-runbooks)。</span><span class="sxs-lookup"><span data-stu-id="8092f-113">hello following diagram shows hello lifecycle of a runbook job for [Graphical runbooks](automation-runbook-types.md#graphical-runbooks) and [PowerShell Workflow runbooks](automation-runbook-types.md#powershell-workflow-runbooks).</span></span>

![工作狀態 -PowerShell 工作流程](./media/automation-runbook-execution/job-statuses.png)

<span data-ttu-id="8092f-115">hello 下列圖表顯示 hello 生命週期的 runbook 工作的[PowerShell runbook](automation-runbook-types.md#powershell-runbooks)。</span><span class="sxs-lookup"><span data-stu-id="8092f-115">hello following diagram shows hello lifecycle of a runbook job for [PowerShell runbooks](automation-runbook-types.md#powershell-runbooks).</span></span>

![工作狀態 - PowerShell 指令碼](./media/automation-runbook-execution/job-statuses-script.png)

<span data-ttu-id="8092f-117">您的工作具有存取 tooyour Azure 藉由連接 tooyour Azure 訂用帳戶的資源。</span><span class="sxs-lookup"><span data-stu-id="8092f-117">Your jobs have access tooyour Azure resources by making a connection tooyour Azure subscription.</span></span> <span data-ttu-id="8092f-118">它們才有存取 tooresources 在資料中心，這些資源可供從 hello 公用雲端存取。</span><span class="sxs-lookup"><span data-stu-id="8092f-118">They only have access tooresources in your data center if those resources are accessible from hello public cloud.</span></span>

## <a name="job-statuses"></a><span data-ttu-id="8092f-119">工作狀態</span><span class="sxs-lookup"><span data-stu-id="8092f-119">Job statuses</span></span>
<span data-ttu-id="8092f-120">hello 下表描述作業可能會有的 hello 不同狀態。</span><span class="sxs-lookup"><span data-stu-id="8092f-120">hello following table describes hello different statuses that are possible for a job.</span></span>

| <span data-ttu-id="8092f-121">狀態</span><span class="sxs-lookup"><span data-stu-id="8092f-121">Status</span></span> | <span data-ttu-id="8092f-122">說明</span><span class="sxs-lookup"><span data-stu-id="8092f-122">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="8092f-123">Completed</span><span class="sxs-lookup"><span data-stu-id="8092f-123">Completed</span></span> |<span data-ttu-id="8092f-124">hello 作業已順利完成。</span><span class="sxs-lookup"><span data-stu-id="8092f-124">hello job completed successfully.</span></span> |
| <span data-ttu-id="8092f-125">Failed</span><span class="sxs-lookup"><span data-stu-id="8092f-125">Failed</span></span> |<span data-ttu-id="8092f-126">如[圖形化和 PowerShell 工作流程 runbook](automation-runbook-types.md)，hello runbook 失敗 toocompile。</span><span class="sxs-lookup"><span data-stu-id="8092f-126">For [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md), hello runbook failed toocompile.</span></span>  <span data-ttu-id="8092f-127">如[PowerShell 指令碼 runbook](automation-runbook-types.md)、 hello runbook 失敗 toostart 或 hello 工作時發生例外狀況。</span><span class="sxs-lookup"><span data-stu-id="8092f-127">For [PowerShell Script runbooks](automation-runbook-types.md), hello runbook failed toostart or hello job encountered an exception.</span></span> |
| <span data-ttu-id="8092f-128">處理失敗，正在等候資源</span><span class="sxs-lookup"><span data-stu-id="8092f-128">Failed, waiting for resources</span></span> |<span data-ttu-id="8092f-129">hello 工作失敗，因為它已達到 hello[公平分享](#fairshare)限制三次，並從啟動 hello 相同的檢查點或從 hello hello runbook 的每次啟動。</span><span class="sxs-lookup"><span data-stu-id="8092f-129">hello job failed because it reached hello [fair share](#fairshare) limit three times and started from hello same checkpoint or from hello start of hello runbook each time.</span></span> |
| <span data-ttu-id="8092f-130">已排入佇列</span><span class="sxs-lookup"><span data-stu-id="8092f-130">Queued</span></span> |<span data-ttu-id="8092f-131">hello 工作正在等候資源上提供自動化背景工作 toocome，讓它可以啟動。</span><span class="sxs-lookup"><span data-stu-id="8092f-131">hello job is waiting for resources on an Automation worker toocome available so that it can be started.</span></span> |
| <span data-ttu-id="8092f-132">啟動中</span><span class="sxs-lookup"><span data-stu-id="8092f-132">Starting</span></span> |<span data-ttu-id="8092f-133">hello 作業已指派 tooa 工作者、 hello 系統處於啟動它的 hello 程序。</span><span class="sxs-lookup"><span data-stu-id="8092f-133">hello job has been assigned tooa worker, and hello system is in hello process of starting it.</span></span> |
| <span data-ttu-id="8092f-134">繼續中</span><span class="sxs-lookup"><span data-stu-id="8092f-134">Resuming</span></span> |<span data-ttu-id="8092f-135">hello 系統是處於 hello 的暫停後繼續 hello 工作的程序。</span><span class="sxs-lookup"><span data-stu-id="8092f-135">hello system is in hello process of resuming hello job after it was suspended.</span></span> |
| <span data-ttu-id="8092f-136">執行中</span><span class="sxs-lookup"><span data-stu-id="8092f-136">Running</span></span> |<span data-ttu-id="8092f-137">hello 作業正在執行。</span><span class="sxs-lookup"><span data-stu-id="8092f-137">hello job is running.</span></span> |
| <span data-ttu-id="8092f-138">執行中，正在等候資源</span><span class="sxs-lookup"><span data-stu-id="8092f-138">Running, waiting for resources</span></span> |<span data-ttu-id="8092f-139">hello 作業已卸載，因為它已達到 hello[公平分享](#fairshare)限制。</span><span class="sxs-lookup"><span data-stu-id="8092f-139">hello job has been unloaded because it reached hello [fair share](#fairshare) limit.</span></span> <span data-ttu-id="8092f-140">作業很快會從其上一個檢查點繼續。</span><span class="sxs-lookup"><span data-stu-id="8092f-140">It resumes shortly from its last checkpoint.</span></span> |
| <span data-ttu-id="8092f-141">已停止</span><span class="sxs-lookup"><span data-stu-id="8092f-141">Stopped</span></span> |<span data-ttu-id="8092f-142">在完成前 hello 使用者 hello 作業已停止。</span><span class="sxs-lookup"><span data-stu-id="8092f-142">hello job was stopped by hello user before it was completed.</span></span> |
| <span data-ttu-id="8092f-143">停止中</span><span class="sxs-lookup"><span data-stu-id="8092f-143">Stopping</span></span> |<span data-ttu-id="8092f-144">hello 系統是處於停止 hello 作業的 hello 程序。</span><span class="sxs-lookup"><span data-stu-id="8092f-144">hello system is in hello process of stopping hello job.</span></span> |
| <span data-ttu-id="8092f-145">暫止</span><span class="sxs-lookup"><span data-stu-id="8092f-145">Suspended</span></span> |<span data-ttu-id="8092f-146">hello 作業已暫停 hello 使用者、 hello 系統或 hello runbook 中的命令。</span><span class="sxs-lookup"><span data-stu-id="8092f-146">hello job was suspended by hello user, by hello system, or by a command in hello runbook.</span></span> <span data-ttu-id="8092f-147">已暫停的作業能重新啟動，並從其最後一個檢查點或是 hello 開頭 hello runbook 如果它沒有檢查點繼續。</span><span class="sxs-lookup"><span data-stu-id="8092f-147">A job that is suspended can be started again and resume from its last checkpoint or from hello beginning of hello runbook if it doesn't have checkpoints.</span></span> <span data-ttu-id="8092f-148">例外狀況發生時，hello runbook 只會暫停 hello 系統。</span><span class="sxs-lookup"><span data-stu-id="8092f-148">hello runbook will only be suspended by hello system when an exception occurs.</span></span> <span data-ttu-id="8092f-149">根據預設，ErrorActionPreference 設定太**繼續**，這表示該 hello 作業會繼續執行在發生錯誤。</span><span class="sxs-lookup"><span data-stu-id="8092f-149">By default, ErrorActionPreference is set too**Continue**, meaning that hello job keeps running on an error.</span></span> <span data-ttu-id="8092f-150">如果此喜好設定變數設定得**停止**，然後 hello 作業會發生錯誤時暫停。</span><span class="sxs-lookup"><span data-stu-id="8092f-150">If this preference variable is set too**Stop**, then hello job suspends on an error.</span></span>  <span data-ttu-id="8092f-151">適用於太[圖形化和 PowerShell 工作流程 runbook](automation-runbook-types.md)只。</span><span class="sxs-lookup"><span data-stu-id="8092f-151">Applies too[Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |
| <span data-ttu-id="8092f-152">暫停中</span><span class="sxs-lookup"><span data-stu-id="8092f-152">Suspending</span></span> |<span data-ttu-id="8092f-153">hello 系統嘗試進行 toosuspend hello hello hello 使用者要求作業。</span><span class="sxs-lookup"><span data-stu-id="8092f-153">hello system is attempting toosuspend hello job at hello request of hello user.</span></span> <span data-ttu-id="8092f-154">在暫停之前 hello runbook 必須達到其下一個檢查點。</span><span class="sxs-lookup"><span data-stu-id="8092f-154">hello runbook must reach its next checkpoint before it can be suspended.</span></span> <span data-ttu-id="8092f-155">如果它已通過其最後一個檢查點，則可在暫停之前完成。</span><span class="sxs-lookup"><span data-stu-id="8092f-155">If it already passed its last checkpoint, then it completes before it can be suspended.</span></span>  <span data-ttu-id="8092f-156">適用於太[圖形化和 PowerShell 工作流程 runbook](automation-runbook-types.md)只。</span><span class="sxs-lookup"><span data-stu-id="8092f-156">Applies too[Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |

## <a name="viewing-job-status-from-hello-azure-portal"></a><span data-ttu-id="8092f-157">檢視工作狀態從 hello Azure 入口網站</span><span class="sxs-lookup"><span data-stu-id="8092f-157">Viewing job status from hello Azure portal</span></span>
<span data-ttu-id="8092f-158">您可以檢視所有 runbook 工作的摘要的狀態或向下鑽研到特定 runbook 工作 hello Azure 入口網站中，或藉由設定整合與您 Microsoft Operations Management Suite (OMS) 的記錄分析工作區 tooforward runbook 的作業狀態的詳細資料，工作資料流。</span><span class="sxs-lookup"><span data-stu-id="8092f-158">You can view a summarized status of all runbook jobs or drill into details of a specific runbook job in hello Azure portal or by configuring integration with your Microsoft Operations Management Suite (OMS) Log Analytics workspace tooforward runbook job status and job streams.</span></span>  <span data-ttu-id="8092f-159">如需整合與 OMS 記錄分析的詳細資訊，請參閱[自動化 tooLog 分析 (OMS) 從轉寄工作狀態和作業資料流](automation-manage-send-joblogs-log-analytics.md)。</span><span class="sxs-lookup"><span data-stu-id="8092f-159">For more information about integrating with OMS Log Analytics, see [Forward job status and job streams from Automation tooLog Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span></span>  

### <a name="automation-runbook-jobs-summary"></a><span data-ttu-id="8092f-160">自動化 Runbook 作業摘要</span><span class="sxs-lookup"><span data-stu-id="8092f-160">Automation runbook jobs summary</span></span>
<span data-ttu-id="8092f-161">在您選取的自動化帳戶的權限的 hello，您可以看到所有選取的自動化帳戶下的 hello runbook 工作的摘要**工作統計資料**磚。</span><span class="sxs-lookup"><span data-stu-id="8092f-161">On hello right of your selected Automation account, you can see a summary of all of hello runbook jobs for a selected Automation account under **Job Statistics** tile.</span></span><br><br> <span data-ttu-id="8092f-162">![[作業統計資料] 圖格](./media/automation-runbook-execution/automation-account-job-status-summary.png)。</span><span class="sxs-lookup"><span data-stu-id="8092f-162">![Job Statistics tile](./media/automation-runbook-execution/automation-account-job-status-summary.png).</span></span><br> <span data-ttu-id="8092f-163">這個磚會顯示計數和執行所有作業的 hello 作業狀態的圖形表示。</span><span class="sxs-lookup"><span data-stu-id="8092f-163">This tile displays a count and graphical representation of hello job status for all jobs executed.</span></span>  

<span data-ttu-id="8092f-164">按一下 hello 磚顯示 hello**作業**刀鋒視窗，其中包含所有已執行的工作、 狀態、 工作執行與開始與完成時間的彙總的清單。</span><span class="sxs-lookup"><span data-stu-id="8092f-164">Clicking on hello tile presents hello **Jobs** blade, which includes a summarized list of all jobs executed, with status, job execution, and start and completion times.</span></span><br><br> <span data-ttu-id="8092f-165">![自動化帳戶的 [作業] 刀鋒視窗](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span><span class="sxs-lookup"><span data-stu-id="8092f-165">![Automation account Jobs blade](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span></span><br><br>  <span data-ttu-id="8092f-166">您可以篩選 hello 工作清單中選取**篩選作業**和篩選之特定 runbook 工作狀態、 或 hello 下拉式清單中，從 hello 日期/時間範圍 toosearch 內。</span><span class="sxs-lookup"><span data-stu-id="8092f-166">You can filter hello list of jobs by selecting **Filter jobs**  and filter on a specific runbook, job status, or from hello drop-down list, hello date/time range toosearch within.</span></span><br><br> <span data-ttu-id="8092f-167">![篩選作業狀態](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span><span class="sxs-lookup"><span data-stu-id="8092f-167">![Filter Job status](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span></span>

<span data-ttu-id="8092f-168">或者，您可以檢視特定 runbook 工作摘要詳細資料，從 hello 選取該 runbook **Runbook**刀鋒視窗，然後選取 hello 與自動化帳戶中的**作業**磚。</span><span class="sxs-lookup"><span data-stu-id="8092f-168">Alternatively, you can view job summary details for a specific runbook by selecting that runbook from hello **Runbooks** blade in your Automation account, and then select hello **Jobs** tile.</span></span>  <span data-ttu-id="8092f-169">這顯現出 hello**作業**刀鋒視窗中，並從該處您可以按一下 hello 作業記錄 tooview 其詳細資料與輸出。</span><span class="sxs-lookup"><span data-stu-id="8092f-169">This presents hello **Jobs** blade, and from there you can click on hello job record tooview its detail and output.</span></span><br><br> <span data-ttu-id="8092f-170">![自動化帳戶的 [作業] 刀鋒視窗](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span><span class="sxs-lookup"><span data-stu-id="8092f-170">![Automation account Jobs blade](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span></span><br> 

### <a name="job-summary"></a><span data-ttu-id="8092f-171">工作摘要</span><span class="sxs-lookup"><span data-stu-id="8092f-171">Job Summary</span></span>
<span data-ttu-id="8092f-172">您可以檢視所有已針對特定 runbook 和最新狀態建立的 hello 工作的清單。</span><span class="sxs-lookup"><span data-stu-id="8092f-172">You can view a list of all of hello jobs that have been created for a particular runbook and their most recent status.</span></span> <span data-ttu-id="8092f-173">您可以篩選此清單依工作狀態及 hello hello 的日期範圍將 toohello 作業最後變更。</span><span class="sxs-lookup"><span data-stu-id="8092f-173">You can filter this list by job status and hello range of dates for hello last change toohello job.</span></span> <span data-ttu-id="8092f-174">tooview 其詳細的資訊及輸出，請按一下 hello 作業名稱。</span><span class="sxs-lookup"><span data-stu-id="8092f-174">tooview its detailed information and output, click on hello name of a job.</span></span> <span data-ttu-id="8092f-175">hello hello 工作的詳細的檢視包含 hello hello 提供 toothat 工作的 runbook 參數的值。</span><span class="sxs-lookup"><span data-stu-id="8092f-175">hello detailed view of hello job includes hello values for hello runbook parameters that were provided toothat job.</span></span>

<span data-ttu-id="8092f-176">您可以使用下列步驟執行 runbook 的 tooview hello 作業 hello。</span><span class="sxs-lookup"><span data-stu-id="8092f-176">You can use hello following steps tooview hello jobs for a runbook.</span></span>

1. <span data-ttu-id="8092f-177">在 hello Azure 入口網站，選取 **自動化**，然後選取 hello 的自動化帳戶的名稱。</span><span class="sxs-lookup"><span data-stu-id="8092f-177">In hello Azure portal, select **Automation** and then select hello name of an Automation account.</span></span>
2. <span data-ttu-id="8092f-178">從 hello 中樞，選取**Runbook**然後在 hello **Runbook**刀鋒視窗從 hello 清單中選取 runbook。</span><span class="sxs-lookup"><span data-stu-id="8092f-178">From hello hub, select **Runbooks** and then on hello **Runbooks** blade select a runbook from hello list.</span></span>
3. <span data-ttu-id="8092f-179">在 hello 刀鋒視窗中的 hello 選取 runbook，按一下 hello**作業**磚。</span><span class="sxs-lookup"><span data-stu-id="8092f-179">On hello blade for hello selected runbook, click hello **Jobs** tile.</span></span>
4. <span data-ttu-id="8092f-180">按一下其中一個 hello 清單中的 hello 作業，然後在 hello runbook 工作的詳細資料 刀鋒視窗，您可以檢視其詳細資料與輸出。</span><span class="sxs-lookup"><span data-stu-id="8092f-180">Click on one of hello jobs in hello list and on hello runbook job details blade you can view its detail and output.</span></span>

## <a name="retrieving-job-status-using-windows-powershell"></a><span data-ttu-id="8092f-181">使用 Windows PowerShell 擷取工作狀態</span><span class="sxs-lookup"><span data-stu-id="8092f-181">Retrieving job status using Windows PowerShell</span></span>
<span data-ttu-id="8092f-182">您可以使用 hello [Get AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) runbook 和 hello 詳細資料的特定作業所建立的 tooretrieve hello 作業。</span><span class="sxs-lookup"><span data-stu-id="8092f-182">You can use hello [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) tooretrieve hello jobs created for a runbook and hello details of a particular job.</span></span> <span data-ttu-id="8092f-183">如果您使用 Windows PowerShell 啟動 runbook[開始 AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx)，則它會傳回 hello 產生的作業。</span><span class="sxs-lookup"><span data-stu-id="8092f-183">If you start a runbook with Windows PowerShell using [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx), then it returns hello resulting job.</span></span> <span data-ttu-id="8092f-184">使用[Get AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)輸出 tooget 工作的輸出。</span><span class="sxs-lookup"><span data-stu-id="8092f-184">Use [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)Output tooget a job’s output.</span></span>

<span data-ttu-id="8092f-185">hello 下列範例命令擷取範例 runbook 的 hello 最後一個作業並顯示其狀態、 hello 值為 hello runbook 參數，提供與 hello 來自 hello 工作的輸出。</span><span class="sxs-lookup"><span data-stu-id="8092f-185">hello following sample commands retrieve hello last job for a sample runbook and displays its status, hello values provided for hello runbook parameters, and hello output from hello job.</span></span>

    $job = (Get-AzureRmAutomationJob –AutomationAccountName "MyAutomationAccount" `
    –RunbookName "Test-Runbook" -ResourceGroupName "ResourceGroup01" | sort LastModifiedDate –desc)[0]
    $job.Status
    $job.JobParameters
    Get-AzureRmAutomationJobOutput -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAcct" -Id $job.JobId –Stream Output

## <a name="fair-share"></a><span data-ttu-id="8092f-186">公平共用</span><span class="sxs-lookup"><span data-stu-id="8092f-186">Fair share</span></span>
<span data-ttu-id="8092f-187">在 hello 雲端中的所有 runbook 之間的順序 tooshare 資源，Azure 自動化會暫時卸除任何作業已執行三個小時之後。</span><span class="sxs-lookup"><span data-stu-id="8092f-187">In order tooshare resources among all runbooks in hello cloud, Azure Automation will temporarily unload any job after it has been running for three hours.</span></span>  <span data-ttu-id="8092f-188">在此期間，[以 PowerShell 為基礎的 Runbook](automation-runbook-types.md#powershell-runbooks) 的作業會停止，而且不會重新啟動。</span><span class="sxs-lookup"><span data-stu-id="8092f-188">During this time, jobs for [PowerShell-based runbooks](automation-runbook-types.md#powershell-runbooks) are stopped and will not be restarted.</span></span>  <span data-ttu-id="8092f-189">hello 作業狀態顯示**已停止**。</span><span class="sxs-lookup"><span data-stu-id="8092f-189">hello job status shows **Stopped**.</span></span>  <span data-ttu-id="8092f-190">這種類型的 runbook 永遠重新啟動從 hello 開頭因為它們不支援檢查點。</span><span class="sxs-lookup"><span data-stu-id="8092f-190">This type of runbook is always restarted from hello beginning since they don't support checkpoints.</span></span>  

<span data-ttu-id="8092f-191">[以 PowerShell 工作流程為基礎的 Runbook](automation-runbook-types.md#powershell-workflow-runbooks) 將會從其最後一個[檢查點](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints)繼續。</span><span class="sxs-lookup"><span data-stu-id="8092f-191">[PowerShell-Workflow-based runbooks](automation-runbook-types.md#powershell-workflow-runbooks) will be resumed from their last [checkpoint](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints).</span></span>  <span data-ttu-id="8092f-192">執行三個小時之後, hello 將會暫止 runbook 工作 hello 服務和其狀態顯示**執行，等待資源**。</span><span class="sxs-lookup"><span data-stu-id="8092f-192">After running three hours, hello runbook job will be suspended by hello service and its status shows **Running, waiting for resources**.</span></span>  <span data-ttu-id="8092f-193">可以使用沙箱時，hello runbook 將會自動重新啟動 hello 自動化服務並繼續從 hello 最後一個檢查點。</span><span class="sxs-lookup"><span data-stu-id="8092f-193">When a sandbox becomes available, hello runbook will be automatically restarted by hello Automation service and resumes from hello last checkpoint.</span></span>  <span data-ttu-id="8092f-194">這是 PowerShell 工作流程的正常暫停/重新啟動行為。</span><span class="sxs-lookup"><span data-stu-id="8092f-194">This is normal PowerShell-Workflow behavior for suspend/restart.</span></span>  <span data-ttu-id="8092f-195">如果 hello runbook 再次超過三個小時的執行階段，hello 程序會重複，toothree 時間。</span><span class="sxs-lookup"><span data-stu-id="8092f-195">If hello runbook again exceeds three hours of runtime, hello process repeats, up toothree times.</span></span>  <span data-ttu-id="8092f-196">Hello 第三個重新啟動之後，如果 hello runbook 仍有未完成三個小時內，則 hello runbook 工作已失敗，而且 hello 作業狀態顯示**失敗，等待資源**。</span><span class="sxs-lookup"><span data-stu-id="8092f-196">After hello third restart, if hello runbook still has not completed in three hours, then hello runbook job is failed, and hello job status shows **Failed, waiting for resources**.</span></span>  <span data-ttu-id="8092f-197">在此情況下，您會收到 hello 遵循 hello 失敗的例外狀況。</span><span class="sxs-lookup"><span data-stu-id="8092f-197">In this case, you receive hello following exception with hello failure.</span></span>

<span data-ttu-id="8092f-198">*hello 作業無法繼續執行，因為它已重複收回 hello 從相同的檢查點。請確定您的 Runbook 在未保存其狀態的情況下，不會長時間執行作業。*</span><span class="sxs-lookup"><span data-stu-id="8092f-198">*hello job cannot continue running because it was repeatedly evicted from hello same checkpoint. Please make sure your Runbook does not perform lengthy operations without persisting its state.*</span></span>

<span data-ttu-id="8092f-199">這會是無限期而無法完成，runbook 執行的 tooprotect hello 服務，它們並非能夠 toomake 它 toohello 再次卸載，否則下一個檢查點。</span><span class="sxs-lookup"><span data-stu-id="8092f-199">This is tooprotect hello service from runbooks running indefinitely without completing, as they are not able toomake it toohello next checkpoint without being unloaded again.</span></span>

<span data-ttu-id="8092f-200">如果 hello runbook 沒有檢查點，或者 hello 作業在卸載之前未到達 hello 第一個檢查點，然後重新啟動從 hello 開頭。</span><span class="sxs-lookup"><span data-stu-id="8092f-200">If hello runbook has no checkpoints or hello job had not reached hello first checkpoint before being unloaded, then it restarts from hello beginning.</span></span>  

<span data-ttu-id="8092f-201">當您建立 runbook 時，您應該確保兩個檢查點之間的任何活動不會超過三小時一次該 hello 時間 toorun。</span><span class="sxs-lookup"><span data-stu-id="8092f-201">When you create a runbook, you should ensure that hello time toorun any activities between two checkpoints does not exceed three hours.</span></span> <span data-ttu-id="8092f-202">您可能需要 tooadd 檢查點 tooyour runbook tooensure，它不會達到這三個小時的限制或分解長時間執行的作業。</span><span class="sxs-lookup"><span data-stu-id="8092f-202">You may need tooadd checkpoints tooyour runbook tooensure that it does not reach this three hour limit or break up long running operations.</span></span> <span data-ttu-id="8092f-203">例如，您的 Runbook 可能在大型 SQL 資料庫上執行重新索引。</span><span class="sxs-lookup"><span data-stu-id="8092f-203">For example, your runbook might perform a reindex on a large SQL database.</span></span> <span data-ttu-id="8092f-204">如果此單一操作未完成內 hello 公平共用限制 hello 作業會卸載然後 hello 從頭重新啟動。</span><span class="sxs-lookup"><span data-stu-id="8092f-204">If this single operation does not complete within hello fair share limit, then hello job are unloaded and restarted from hello beginning.</span></span> <span data-ttu-id="8092f-205">在此情況下，您應該 hello 重新索引操作分成多個步驟，例如一次重新一個資料表分割，然後再插入檢查點之後每個作業，以便 hello 作業無法繼續 hello 最後一個作業 toocomplete 之後。</span><span class="sxs-lookup"><span data-stu-id="8092f-205">In this case, you should break up hello reindex operation into multiple steps, such as reindexing one table at a time, and then insert a checkpoint after each operation so that hello job could resume after hello last operation toocomplete.</span></span>

## <a name="next-steps"></a><span data-ttu-id="8092f-206">後續步驟</span><span class="sxs-lookup"><span data-stu-id="8092f-206">Next steps</span></span>
* <span data-ttu-id="8092f-207">toolearn hello 不同的方法可以使用的 toostart 在 Azure 自動化 runbook 詳細資料請參閱[Azure 自動化中啟動 runbook](automation-starting-a-runbook.md)</span><span class="sxs-lookup"><span data-stu-id="8092f-207">toolearn more about hello different methods that can be used toostart a runbook in Azure Automation, see [Starting a runbook in Azure Automation](automation-starting-a-runbook.md)</span></span>

