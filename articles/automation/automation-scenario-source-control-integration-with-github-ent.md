---
title: "aaaAzure 自動化原始檔控制整合與 GitHub Enterprise |Microsoft 文件"
description: "Hello 詳細說明的方式使用 GitHub Enterprise tooconfigure 整合原始檔控制的自動化 runbook。"
services: automation
documentationCenter: 
authors: mgoedtel
manager: jwhit
editor: 
ms.assetid: e01d817c-7d38-421c-adf5-647a4b526eb4
ms.service: automation
ms.workload: infrastructure-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: magoedte
ms.openlocfilehash: 915d36ccabb72fdee1dba663049a0b331249cd73
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="azure-automation-scenario---automation-source-control-integration-with-github-enterprise"></a><span data-ttu-id="2b83f-103">Azure 自動化案例 - 自動化原始檔控制與 GitHub Enterprise 的整合</span><span class="sxs-lookup"><span data-stu-id="2b83f-103">Azure Automation scenario - Automation source control integration with GitHub Enterprise</span></span>

<span data-ttu-id="2b83f-104">自動化目前支援原始檔控制整合，可讓您 tooassociate 您自動化帳戶 tooa GitHub 原始檔控制儲存機制中的 runbook。</span><span class="sxs-lookup"><span data-stu-id="2b83f-104">Automation currently supports source control integration, which allows you tooassociate runbooks in your Automation account tooa GitHub source control repository.</span></span>  <span data-ttu-id="2b83f-105">不過，部署的客戶[GitHub Enterprise](https://enterprise.github.com/home) toosupport 其 DevOps 做法，也會想 toouse 它 toomanage hello 生命週期的 runbook 會開發 tooautomate 商務程序和服務管理作業。</span><span class="sxs-lookup"><span data-stu-id="2b83f-105">However, customers who have deployed [GitHub Enterprise](https://enterprise.github.com/home) toosupport their DevOps practices, also want toouse it toomanage hello lifecycle of runbooks that are developed tooautomate business processes and service management operations.</span></span>  

<span data-ttu-id="2b83f-106">在此案例中，您在 Windows 電腦設定為 Hybrid Runbook Worker 安裝 Git 工具 hello Azure 資源管理員模組與您資料中心。</span><span class="sxs-lookup"><span data-stu-id="2b83f-106">In this scenario, you have a Windows computer in your data center configured as a Hybrid Runbook Worker with hello Azure Resource Manager modules and Git tools installed.</span></span>  <span data-ttu-id="2b83f-107">hello 混合式背景工作電腦有 hello 本機 Git 儲存機制的複製品。</span><span class="sxs-lookup"><span data-stu-id="2b83f-107">hello Hybrid worker machine has a clone of hello local Git repository.</span></span>  <span data-ttu-id="2b83f-108">Hello runbook hello 混合式背景工作上執行時，hello Git 目錄同步處理和 hello runbook 檔案內容匯入至 hello 自動化帳戶。</span><span class="sxs-lookup"><span data-stu-id="2b83f-108">When hello runbook is run on hello hybrid worker, hello Git directory is synchronized and hello runbook file contents are imported into hello Automation account.</span></span>

<span data-ttu-id="2b83f-109">本文說明如何註冊您的 Azure 自動化環境中的此設定 tooset。</span><span class="sxs-lookup"><span data-stu-id="2b83f-109">This article describes how tooset up this configuration in your Azure Automation environment.</span></span> <span data-ttu-id="2b83f-110">我們一開始設定自動化以 hello 安全性認證，runbook 必須 toosupport 此案例中，且部署的混合式 Runbook Worker 在您的資料中心 toorun hello runbook 及存取您的企業 GitHub 儲存機制 toosynchronizerunbook 與您的自動化帳戶。</span><span class="sxs-lookup"><span data-stu-id="2b83f-110">We start by configuring Automation with hello security credentials, runbooks required toosupport this scenario, and deployment of a Hybrid Runbook Worker in your data center toorun hello runbooks and access your GitHub Enterprise repository toosynchronize runbooks with your Automation account.</span></span>  


## <a name="getting-hello-scenario"></a><span data-ttu-id="2b83f-111">取得 hello 案例</span><span class="sxs-lookup"><span data-stu-id="2b83f-111">Getting hello scenario</span></span>

<span data-ttu-id="2b83f-112">此案例包含兩個您可以直接從 hello 匯入的 PowerShell runbook [Runbook 庫](automation-runbook-gallery.md)在 hello Azure 入口網站，或從 hello 下載[PowerShell 資源庫](https://www.powershellgallery.com)。</span><span class="sxs-lookup"><span data-stu-id="2b83f-112">This scenario consists of two PowerShell runbooks that you can import directly from hello [Runbook Gallery](automation-runbook-gallery.md) in hello Azure portal or download from hello [PowerShell Gallery](https://www.powershellgallery.com).</span></span>

### <a name="runbooks"></a><span data-ttu-id="2b83f-113">Runbook</span><span class="sxs-lookup"><span data-stu-id="2b83f-113">Runbooks</span></span>

<span data-ttu-id="2b83f-114">Runbook</span><span class="sxs-lookup"><span data-stu-id="2b83f-114">Runbook</span></span> | <span data-ttu-id="2b83f-115">說明</span><span class="sxs-lookup"><span data-stu-id="2b83f-115">Description</span></span>| 
--------|------------|
<span data-ttu-id="2b83f-116">Export-RunAsCertificateToHybridWorker</span><span class="sxs-lookup"><span data-stu-id="2b83f-116">Export-RunAsCertificateToHybridWorker</span></span> | <span data-ttu-id="2b83f-117">Runbook 會從自動化帳戶 tooa hybrid worker 匯出 RunAs 認證，讓 runbook 在 hello 背景工作上的可以驗證搭配 Azure 順序 tooimport runbook 中到 hello 自動化帳戶。</span><span class="sxs-lookup"><span data-stu-id="2b83f-117">Runbook exports a RunAs certificate from an Automation account tooa hybrid worker so that runbooks on hello worker can authenticate with Azure in order tooimport runbooks into hello Automation account.</span></span>| 
<span data-ttu-id="2b83f-118">Sync-LocalGitFolderToAutomationAccount</span><span class="sxs-lookup"><span data-stu-id="2b83f-118">Sync-LocalGitFolderToAutomationAccount</span></span> | <span data-ttu-id="2b83f-119">Runbook 的同步 hello hello 混合式電腦上的本機 Git 資料夾，然後再將 hello runbook 檔案 (*.ps1) 匯入 hello 自動化帳戶。</span><span class="sxs-lookup"><span data-stu-id="2b83f-119">Runbook syncs hello local Git folder on hello hybrid machine and then import hello runbook files (*.ps1) into hello Automation account.</span></span>|

### <a name="credentials"></a><span data-ttu-id="2b83f-120">認證</span><span class="sxs-lookup"><span data-stu-id="2b83f-120">Credentials</span></span>

<span data-ttu-id="2b83f-121">認證</span><span class="sxs-lookup"><span data-stu-id="2b83f-121">Credential</span></span> | <span data-ttu-id="2b83f-122">說明</span><span class="sxs-lookup"><span data-stu-id="2b83f-122">Description</span></span>|
-----------|------------|
<span data-ttu-id="2b83f-123">GitHRWCredential</span><span class="sxs-lookup"><span data-stu-id="2b83f-123">GitHRWCredential</span></span> | <span data-ttu-id="2b83f-124">認證資產建立 toocontain hello 使用者名稱和密碼的使用者與權限 toohello 混合式背景工作。</span><span class="sxs-lookup"><span data-stu-id="2b83f-124">Credential asset you create toocontain hello username and password for a user with permissions toohello hybrid worker.</span></span>|

## <a name="installing-and-configuring-this-scenario"></a><span data-ttu-id="2b83f-125">安裝和設定此案例</span><span class="sxs-lookup"><span data-stu-id="2b83f-125">Installing and configuring this scenario</span></span>

### <a name="prerequisites"></a><span data-ttu-id="2b83f-126">必要條件</span><span class="sxs-lookup"><span data-stu-id="2b83f-126">Prerequisites</span></span>

1. <span data-ttu-id="2b83f-127">hello 同步 LocalGitFolderToAutomationAccount runbook 會驗證使用 hello [Azure 執行身分帳戶](automation-sec-configure-azure-runas-account.md)。</span><span class="sxs-lookup"><span data-stu-id="2b83f-127">hello Sync-LocalGitFolderToAutomationAccount runbook authenticates using hello [Azure Run As account](automation-sec-configure-azure-runas-account.md).</span></span> 

2. <span data-ttu-id="2b83f-128">Microsoft Operations Management Suite (OMS) 工作區以 hello Azure 自動化方案已啟用和設定也是必要的。</span><span class="sxs-lookup"><span data-stu-id="2b83f-128">A Microsoft Operations Management Suite (OMS) workspace with hello Azure Automation solution enabled and configured is also required.</span></span>  <span data-ttu-id="2b83f-129">如果沒有一個 hello 自動化帳戶使用 tooinstall 相關聯，並且設定此案例中，則會建立並為您設定，當您執行 hello**新增 OnPremiseHybridWorker.ps1**從 hello 混合式的指令碼runbook worker。</span><span class="sxs-lookup"><span data-stu-id="2b83f-129">If you do not have one that is associated with hello Automation account used tooinstall and configure this scenario, it is created and configured for you when you execute hello **New-OnPremiseHybridWorker.ps1** script from hello hybrid runbook worker.</span></span>        

    > [!NOTE]
    > <span data-ttu-id="2b83f-130">目前 hello 下列區域只支援自動化整合與 OMS-**澳洲東南部**，**美國東部 2**，**東南亞**，和**西歐洲**。</span><span class="sxs-lookup"><span data-stu-id="2b83f-130">Currently hello following regions only support Automation integration with OMS - **Australia Southeast**, **East US 2**, **Southeast Asia**, and **West Europe**.</span></span> 

3. <span data-ttu-id="2b83f-131">電腦可做為專用的混合式 Runbook 背景工作，也會裝載 hello GitHub 軟體並維護 hello runbook 檔案 (*runbook*.ps1) hello 檔案系統 toosynchronize 之間 GitHub 上的來源目錄中，您自動化帳戶。</span><span class="sxs-lookup"><span data-stu-id="2b83f-131">A computer that can serve as a dedicated Hybrid Runbook Worker that will also host hello GitHub software and maintain hello runbook files (*runbook*.ps1) in a source directory on hello file system toosynchronize between GitHub and your Automation account.</span></span>

### <a name="import-and-publish-hello-runbooks"></a><span data-ttu-id="2b83f-132">匯入及發行 runbook hello</span><span class="sxs-lookup"><span data-stu-id="2b83f-132">Import and publish hello runbooks</span></span>

<span data-ttu-id="2b83f-133">tooimport hello*匯出 RunAsCertificateToHybridWorker*和*同步 LocalGitFolderToAutomationAccount* hello Runbook 資源庫，從您的自動化帳戶 hello Azure 入口網站中的 runbook請依照下列中的 hello 程序[hello Runbook 庫匯入 Runbook](automation-runbook-gallery.md#to-import-a-runbook-from-the-runbook-gallery-with-the-azure-portal)。</span><span class="sxs-lookup"><span data-stu-id="2b83f-133">tooimport hello *Export-RunAsCertificateToHybridWorker* and *Sync-LocalGitFolderToAutomationAccount* runbooks from hello Runbook Gallery from your Automation account in hello Azure portal, follow hello procedures in [Import Runbook from hello Runbook Gallery](automation-runbook-gallery.md#to-import-a-runbook-from-the-runbook-gallery-with-the-azure-portal).</span></span> <span data-ttu-id="2b83f-134">它們已成功匯入您的自動化帳戶之後，請發佈 hello runbook。</span><span class="sxs-lookup"><span data-stu-id="2b83f-134">Publish hello runbooks after they have been successfully imported into your Automation account.</span></span>

### <a name="deploy-and-configure-hybrid-runbook-worker"></a><span data-ttu-id="2b83f-135">部署和設定 Hybrid Runbook Worker</span><span class="sxs-lookup"><span data-stu-id="2b83f-135">Deploy and Configure Hybrid Runbook Worker</span></span>

<span data-ttu-id="2b83f-136">如果您沒有已部署在您的資料中心 Hybrid Runbook Worker，您應該檢閱 hello 需求，並遵循 hello 自動化的安裝步驟，使用中的 hello 程序[Azure 自動化 Hybrid Runbook Worker-自動安裝和組態](automation-hybrid-runbook-worker.md#automated-deployment)。</span><span class="sxs-lookup"><span data-stu-id="2b83f-136">If you do not have a Hybrid Runbook Worker already deployed in your data center, you should review hello requirements and follow hello automated installation steps using hello procedure in [Azure Automation Hybrid Runbook Workers - Automate Install and Configuration](automation-hybrid-runbook-worker.md#automated-deployment).</span></span>  <span data-ttu-id="2b83f-137">一旦您已順利安裝 hello 混合式背景工作，在電腦上，執行 hello 下列步驟 toocomplete 其組態 toosupport 這種情況。</span><span class="sxs-lookup"><span data-stu-id="2b83f-137">Once you have successfully installed hello hybrid worker on a computer, perform hello following steps toocomplete its configuration toosupport this scenario.</span></span>

1. <span data-ttu-id="2b83f-138">Toohello 電腦主控 hello 混合式 Runbook 背景工作角色上使用具有本機系統管理權限的帳戶登入，並建立目錄 toohold hello Git runbook 檔。</span><span class="sxs-lookup"><span data-stu-id="2b83f-138">Sign on toohello computer hosting hello Hybrid Runbook Worker role with an account that has local administrative rights and create a directory toohold hello Git runbook files.</span></span>  <span data-ttu-id="2b83f-139">複製 hello 內部 Git 儲存機制 toohello 目錄。</span><span class="sxs-lookup"><span data-stu-id="2b83f-139">Clone  hello internal Git repository toohello directory.</span></span>
2. <span data-ttu-id="2b83f-140">如果您沒有建立 RunAs 帳戶或您想要 toocreate 新建一個專門用於此用途，從 hello Azure 入口網站瀏覽 tooAutomation 帳戶中，選取您的自動化帳戶並建立[認證資產](automation-credentials.md)，包含 hello 使用者名稱和密碼之使用者的權限 toohello 混合式背景工作。</span><span class="sxs-lookup"><span data-stu-id="2b83f-140">If you do not already have a RunAs account created or you want toocreate a new one dedicated for this purpose, from hello Azure portal navigate tooAutomation accounts, select your Automation account and create a [credential asset](automation-credentials.md) that contains hello username and password for a user with permissions toohello hybrid worker.</span></span>  
3. <span data-ttu-id="2b83f-141">從您的自動化帳戶[編輯 hello runbook](automation-edit-textual-runbook.md)**匯出 RunAsCertificateToHybridWorker**和修改 hello hello 變數值*$Password*具有強式密碼。  </span><span class="sxs-lookup"><span data-stu-id="2b83f-141">From your Automation account, [edit hello runbook](automation-edit-textual-runbook.md)  **Export-RunAsCertificateToHybridWorker** and modify hello value for hello variable *$Password* with a strong password.</span></span>  <span data-ttu-id="2b83f-142">修改 hello 值之後，請按一下**發行**hello runbook toohave hello 草稿版本發行。</span><span class="sxs-lookup"><span data-stu-id="2b83f-142">After you modify hello value, click **Publish** toohave hello draft version of hello runbook published.</span></span> 
5. <span data-ttu-id="2b83f-143">啟動 hello runbook**匯出 RunAsCertificateToHybridWorker**，並在 hello**啟動 Runbook**刀鋒視窗中的，在 hello 選項**回合設定**選取 hello 選項**Hybrid Worker**在 hello 下拉式清單選取 hello Hybrid worker 群組您稍早在此案例建立。</span><span class="sxs-lookup"><span data-stu-id="2b83f-143">Start hello runbook **Export-RunAsCertificateToHybridWorker**, and in hello **Start Runbook** blade, under hello option **Run settings** select hello option **Hybrid Worker** and in hello drop-down list select hello Hybrid worker group you created earlier for this scenario.</span></span>  

    <span data-ttu-id="2b83f-144">這會匯出憑證 toohello 混合式背景工作，讓 runbook 在 hello 背景工作上的可以驗證搭配 Azure 使用中訂單 toomanage hello 執行身分連接 （在此案例-匯入 runbook toohello 自動化帳戶的特定） 的 Azure 資源。</span><span class="sxs-lookup"><span data-stu-id="2b83f-144">This exports a certificate toohello hybrid worker so that runbooks on hello worker can authenticate with Azure using hello Run As connection in order toomanage Azure resources (in particular for this scenario - import runbooks toohello Automation account).</span></span>

4. <span data-ttu-id="2b83f-145">從您的自動化帳戶選取 hello 稍早建立的 Hybrid worker 群組和[指定的 RunAs 帳戶](automation-hrw-run-runbooks.md#runas-account)hello Hybrid worker 群組，以及選擇您剛或已建立的 hello 認證資產。</span><span class="sxs-lookup"><span data-stu-id="2b83f-145">From your Automation account, select hello Hybrid worker group created earlier and [specify a RunAs account](automation-hrw-run-runbooks.md#runas-account) for hello Hybrid worker group, and chose hello credential asset you just or already have created.</span></span>  <span data-ttu-id="2b83f-146">如此可確保該 hello 同步 runbook 可以執行 Git 命令。</span><span class="sxs-lookup"><span data-stu-id="2b83f-146">This assures that hello Sync runbook can run Git commands.</span></span> 
5. <span data-ttu-id="2b83f-147">啟動 hello runbook**同步 LocalGitFolderToAutomationAccount**，提供 hello 下列必要的輸入的參數值在 hello**啟動 Runbook**刀鋒視窗中的，在 hello 選項**執行設定**選取 hello 選項**Hybrid Worker**和 hello 下拉式清單選取 hello Hybrid worker 群組您稍早建立此案例中：</span><span class="sxs-lookup"><span data-stu-id="2b83f-147">Start hello runbook **Sync-LocalGitFolderToAutomationAccount**, provide hello following required input parameter values and in hello **Start Runbook** blade, under hello option **Run settings** select hello option **Hybrid Worker** and in hello drop-down list select hello Hybrid worker group you created earlier for this scenario:</span></span>
    * <span data-ttu-id="2b83f-148">*ResourceGroup* -hello 您與您的自動化帳戶相關聯的資源群組的名稱</span><span class="sxs-lookup"><span data-stu-id="2b83f-148">*ResourceGroup* - hello name of your resource group associated with your Automation account</span></span>
    * <span data-ttu-id="2b83f-149">*AutomationAccountName* -hello 的自動化帳戶名稱</span><span class="sxs-lookup"><span data-stu-id="2b83f-149">*AutomationAccountName* - hello name of your Automation account</span></span>
    * <span data-ttu-id="2b83f-150">*GitPath* -hello 本機資料夾或 hello Hybrid Runbook Worker Git 設定 toopull 最新變更的位置上的檔案</span><span class="sxs-lookup"><span data-stu-id="2b83f-150">*GitPath* - hello local folder or file on hello Hybrid Runbook Worker where Git is set up toopull latest changes into</span></span>

    <span data-ttu-id="2b83f-151">將同步 hello 上的本機 Git 資料夾 hello 混合式背景工作電腦，並從 hello 來源目錄 toohello 自動化帳戶，然後匯入 hello.ps1 檔案。</span><span class="sxs-lookup"><span data-stu-id="2b83f-151">This will sync hello local Git folder on hello hybrid worker computer and then import hello .ps1 files from hello source directory toohello Automation account.</span></span>

    ![Start Sync-LocalGitFolderToAutomationAccount Runbook](media/automation-scenario-source-control-integration-with-github-ent/start-runbook-synclocalgitfoldertoautoacct.png)<br>

7. <span data-ttu-id="2b83f-153">Hello runbook 工作摘要詳細資料檢視選取從 hello **Runbook**刀鋒視窗，然後選取 hello 與自動化帳戶中的**作業**磚。</span><span class="sxs-lookup"><span data-stu-id="2b83f-153">View job summary details for hello runbook by selecting it from hello **Runbooks** blade in your Automation account, and then select hello **Jobs** tile.</span></span>  <span data-ttu-id="2b83f-154">確認已成功完成選取 hello**所有記錄檔**磚和檢閱 hello 詳細的記錄檔資料流。</span><span class="sxs-lookup"><span data-stu-id="2b83f-154">Confirm it completed successfully by selecting hello **All logs** tile and reviewing hello detailed log stream.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="2b83f-155">後續步驟</span><span class="sxs-lookup"><span data-stu-id="2b83f-155">Next steps</span></span>

-  <span data-ttu-id="2b83f-156">tooknow 深入了解 runbook 類型、 其優點和限制，請參閱[Azure 自動化 runbook 類型](automation-runbook-types.md)</span><span class="sxs-lookup"><span data-stu-id="2b83f-156">tooknow more about runbook types, their advantages and limitations, see [Azure Automation runbook types](automation-runbook-types.md)</span></span>
-  <span data-ttu-id="2b83f-157">如需 PowerShell 指令碼支援功能的詳細資訊，請參閱 [Azure 自動化中的原生 PowerShell 指令碼支援](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span><span class="sxs-lookup"><span data-stu-id="2b83f-157">For more information on PowerShell script support feature, see [Native PowerShell script support in Azure Automation](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span></span>
