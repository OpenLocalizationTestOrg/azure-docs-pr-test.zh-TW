---
title: "aaaAzure 虛擬機器擴展集概觀 |Microsoft 文件"
description: "深入了解 Azure 虛擬機器擴展集"
services: virtual-machine-scale-sets
documentationcenter: 
author: gbowerman
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 76ac7fd7-2e05-4762-88ca-3b499e87906e
ms.service: virtual-machine-scale-sets
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 07/03/2017
ms.author: guybo
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 788b2d1636e0bf4ef3fbf94aed9b3303c5fafa82
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="what-are-virtual-machine-scale-sets-in-azure"></a><span data-ttu-id="79104-103">什麼是 Azure 中的虛擬機器擴展集？</span><span class="sxs-lookup"><span data-stu-id="79104-103">What are virtual machine scale sets in Azure?</span></span>
<span data-ttu-id="79104-104">虛擬機器擴展集是 Azure 計算資源，您可以使用 toodeploy 和管理一組相同的 Vm。</span><span class="sxs-lookup"><span data-stu-id="79104-104">Virtual machine scale sets are an Azure compute resource that you can use toodeploy and manage a set of identical VMs.</span></span> <span data-ttu-id="79104-105">並將所有的 Vm 設定 hello 相同、 規模集是設計的 toosupport 自動調整，則為 true，而且沒有預先佈建的 Vm 需要。</span><span class="sxs-lookup"><span data-stu-id="79104-105">With all VMs configured hello same, scale sets are designed toosupport true autoscale, and no pre-provisioning of VMs is required.</span></span> <span data-ttu-id="79104-106">因此，您更輕鬆 toobuild 中大規模服務 big compute、 大型資料，以及進行容器化工作負載為目標。</span><span class="sxs-lookup"><span data-stu-id="79104-106">So it's easier toobuild large-scale services that target big compute, big data, and containerized workloads.</span></span>

<span data-ttu-id="79104-107">需要 tooscale 計算資源，且在標尺的應用程式的作業會隱含地平衡容錯網域和更新網域。</span><span class="sxs-lookup"><span data-stu-id="79104-107">For applications that need tooscale compute resources out and in, scale operations are implicitly balanced across fault and update domains.</span></span> <span data-ttu-id="79104-108">如進一步介紹 tooscale 設定，請參閱 toohello [Azure 部落格通知](https://azure.microsoft.com/blog/azure-virtual-machine-scale-sets-ga/)。</span><span class="sxs-lookup"><span data-stu-id="79104-108">For a further introduction tooscale sets, refer toohello [Azure blog announcement](https://azure.microsoft.com/blog/azure-virtual-machine-scale-sets-ga/).</span></span>

<span data-ttu-id="79104-109">如需擴展集的詳細資訊，請觀看下列影片：</span><span class="sxs-lookup"><span data-stu-id="79104-109">For more information about scale sets, watch these videos:</span></span>

* [<span data-ttu-id="79104-110">Mark Russinovich 講述 Azure 擴展集</span><span class="sxs-lookup"><span data-stu-id="79104-110">Mark Russinovich talks Azure scale sets</span></span>](https://channel9.msdn.com/Blogs/Regular-IT-Guy/Mark-Russinovich-Talks-Azure-Scale-Sets/)  
* [<span data-ttu-id="79104-111">Guy Bowerman 與虛擬機器擴展集</span><span class="sxs-lookup"><span data-stu-id="79104-111">Virtual Machine Scale Sets with Guy Bowerman</span></span>](https://channel9.msdn.com/Shows/Cloud+Cover/Episode-191-Virtual-Machine-Scale-Sets-with-Guy-Bowerman)

## <a name="creating-and-managing-scale-sets"></a><span data-ttu-id="79104-112">建立和管理擴展集</span><span class="sxs-lookup"><span data-stu-id="79104-112">Creating and managing scale sets</span></span>
<span data-ttu-id="79104-113">您可以建立在擴展集在 hello [Azure 入口網站](https://portal.azure.com)選取**新**輸入**標尺**hello 搜尋列上。</span><span class="sxs-lookup"><span data-stu-id="79104-113">You can create a scale set in hello [Azure portal](https://portal.azure.com) by selecting **new** and typing **scale** on hello search bar.</span></span> <span data-ttu-id="79104-114">**虛擬機器規模集**列出 hello 結果中。</span><span class="sxs-lookup"><span data-stu-id="79104-114">**Virtual machine scale set** is listed in hello results.</span></span> <span data-ttu-id="79104-115">從該處，您可以填寫必要的 hello 欄位 toocustomize 和部署規模集。</span><span class="sxs-lookup"><span data-stu-id="79104-115">From there, you can fill in hello required fields toocustomize and deploy your scale set.</span></span> <span data-ttu-id="79104-116">您也可以選項 tooset hello 入口網站的 CPU 使用量為基礎的基本的自動調整規模規則。</span><span class="sxs-lookup"><span data-stu-id="79104-116">You also have options tooset up basic autoscale rules based on CPU usage in hello portal.</span></span>

<span data-ttu-id="79104-117">您可以使用 JSON 範本和 [REST API](https://msdn.microsoft.com/library/mt589023.aspx) 來定義和部署擴展集，如同個別的 Azure Resource Manager VM 一樣。</span><span class="sxs-lookup"><span data-stu-id="79104-117">You can define and deploy scale sets by using JSON templates and [REST APIs](https://msdn.microsoft.com/library/mt589023.aspx), just like individual Azure Resource Manager VMs.</span></span> <span data-ttu-id="79104-118">因此，您可以使用任何標準 Azure Resource Manager 部署方法。</span><span class="sxs-lookup"><span data-stu-id="79104-118">Therefore, you can use any standard Azure Resource Manager deployment methods.</span></span> <span data-ttu-id="79104-119">如需範本的詳細資訊，請參閱 [編寫 Azure Resource Manager 範本](../azure-resource-manager/resource-group-authoring-templates.md)。</span><span class="sxs-lookup"><span data-stu-id="79104-119">For more information about templates, see [Authoring Azure Resource Manager templates](../azure-resource-manager/resource-group-authoring-templates.md).</span></span>

<span data-ttu-id="79104-120">您可以找到一組範例範本的虛擬機器規模集中 hello [Azure 快速入門範本 GitHub 儲存機制](https://github.com/Azure/azure-quickstart-templates)。</span><span class="sxs-lookup"><span data-stu-id="79104-120">You can find a set of example templates for virtual machine scale sets in hello [Azure Quickstart templates GitHub repository](https://github.com/Azure/azure-quickstart-templates).</span></span> <span data-ttu-id="79104-121">(尋找範本**vmss** hello 標題中。)</span><span class="sxs-lookup"><span data-stu-id="79104-121">(Look for templates with **vmss** in hello title.)</span></span>

<span data-ttu-id="79104-122">如需 hello 快速入門範本範例，hello 讀我檔案，每個範本中的 「 部署 tooAzure 」 按鈕連結 toohello 入口網站部署功能。</span><span class="sxs-lookup"><span data-stu-id="79104-122">For hello Quickstart template examples, a "Deploy tooAzure" button in hello readme for each template links toohello portal deployment feature.</span></span> <span data-ttu-id="79104-123">toodeploy hello 小數位數設定、 按一下 [hello] 按鈕，然後填入 hello 入口網站中所需的任何參數。</span><span class="sxs-lookup"><span data-stu-id="79104-123">toodeploy hello scale set, click hello button and then fill in any parameters that are required in hello portal.</span></span> 

## <a name="scaling-a-scale-set-out-and-in"></a><span data-ttu-id="79104-124">相應放大和相應縮小擴展集</span><span class="sxs-lookup"><span data-stu-id="79104-124">Scaling a scale set out and in</span></span>
<span data-ttu-id="79104-125">您可以變更在擴展集 hello Azure 入口網站中，依序按一下 hello hello 容量**調整**區段**設定**。</span><span class="sxs-lookup"><span data-stu-id="79104-125">You can change hello capacity of a scale set in hello Azure portal by clicking hello **Scaling** section under **Settings**.</span></span> 

<span data-ttu-id="79104-126">toochange 標尺 hello 命令列上設定容量，請使用 hello**標尺**命令[Azure CLI](https://github.com/Azure/azure-cli)。</span><span class="sxs-lookup"><span data-stu-id="79104-126">toochange scale set capacity on hello command line, use hello **scale** command in [Azure CLI](https://github.com/Azure/azure-cli).</span></span> <span data-ttu-id="79104-127">例如，使用此命令 tooset 10 部 Vm 的小數位數組 tooa 容量：</span><span class="sxs-lookup"><span data-stu-id="79104-127">For example, use this command tooset a scale set tooa capacity of 10 VMs:</span></span>

```bash
az vmss scale -g resourcegroupname -n scalesetname --new-capacity 10 
```

<span data-ttu-id="79104-128">tooset hello Vm 數目的小數位數中使用 PowerShell 設定，請使用 hello**更新 AzureRmVmss**命令：</span><span class="sxs-lookup"><span data-stu-id="79104-128">tooset hello number of VMs in a scale set by using PowerShell, use hello **Update-AzureRmVmss** command:</span></span>

```PowerShell
$vmss = Get-AzureRmVmss -ResourceGroupName resourcegroupname -VMScaleSetName scalesetname  
$vmss.Sku.Capacity = 10
Update-AzureRmVmss -ResourceGroupName resourcegroupname -Name scalesetname -VirtualMachineScaleSet $vmss
```

<span data-ttu-id="79104-129">tooincrease 或減少 hello 數小數位數中的虛擬機器使用 Azure Resource Manager 範本設定，變更 hello**容量**屬性後再重新部署的 hello 範本。</span><span class="sxs-lookup"><span data-stu-id="79104-129">tooincrease or decrease hello number of virtual machines in a scale set by using an Azure Resource Manager template, change hello **capacity** property and redeploy hello template.</span></span> <span data-ttu-id="79104-130">這種可讓 Azure 自動調整規模，或您自己自訂的縮放層級如果您需要 Azure 自動調整 toodefine 自訂縮放比例事件不支援的 toowrite 輕鬆 toointegrate 規模集。</span><span class="sxs-lookup"><span data-stu-id="79104-130">This simplicity makes it easy toointegrate scale sets with Azure Autoscale, or toowrite your own custom scaling layer if you need toodefine custom scale events that Azure Autoscale does not support.</span></span> 

<span data-ttu-id="79104-131">如果您重新部署的 Azure Resource Manager 範本 toochange hello 容量時，您可以定義較小包含的範本只 hello **SKU**屬性封包以 hello 更新容量。</span><span class="sxs-lookup"><span data-stu-id="79104-131">If you are redeploying an Azure Resource Manager template toochange hello capacity, you can define a much smaller template that includes only hello **SKU** property packet with hello updated capacity.</span></span> <span data-ttu-id="79104-132">[以下是範例](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing)。</span><span class="sxs-lookup"><span data-stu-id="79104-132">[Here's an example](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing).</span></span>

## <a name="autoscale"></a><span data-ttu-id="79104-133">Autoscale</span><span class="sxs-lookup"><span data-stu-id="79104-133">Autoscale</span></span>

<span data-ttu-id="79104-134">建立 hello Azure 入口網站中時，擴展集，可以選擇性地設定自動調整設定。</span><span class="sxs-lookup"><span data-stu-id="79104-134">A scale set can be optionally configured with autoscale settings when it's created in hello Azure portal.</span></span> <span data-ttu-id="79104-135">hello Vm 數目可以再提高或降低根據平均 CPU 使用量。</span><span class="sxs-lookup"><span data-stu-id="79104-135">hello number of VMs can then be increased or decreased based on average CPU usage.</span></span> 

<span data-ttu-id="79104-136">許多 hello 調整集範本中 hello [Azure 快速入門範本](https://github.com/Azure/azure-quickstart-templates)定義自動調整規模設定。</span><span class="sxs-lookup"><span data-stu-id="79104-136">Many of hello scale set templates in hello [Azure Quickstart templates](https://github.com/Azure/azure-quickstart-templates) define autoscale settings.</span></span> <span data-ttu-id="79104-137">您也可以加入現有的擴展集自動調整規模設定 tooan。</span><span class="sxs-lookup"><span data-stu-id="79104-137">You can also add autoscale settings tooan existing scale set.</span></span> <span data-ttu-id="79104-138">例如，此 Azure PowerShell 指令碼將 CPU 型自動調整規模 tooa 規模集：</span><span class="sxs-lookup"><span data-stu-id="79104-138">For example, this Azure PowerShell script adds CPU-based autoscale tooa scale set:</span></span>

```PowerShell

$subid = "yoursubscriptionid"
$rgname = "yourresourcegroup"
$vmssname = "yourscalesetname"
$location = "yourlocation" # e.g. southcentralus

$rule1 = New-AzureRmAutoscaleRule -MetricName "Percentage CPU" -MetricResourceId /subscriptions/$subid/resourceGroups/$rgname/providers/Microsoft.Compute/virtualMachineScaleSets/$vmssname -Operator GreaterThan -MetricStatistic Average -Threshold 60 -TimeGrain 00:01:00 -TimeWindow 00:05:00 -ScaleActionCooldown 00:05:00 -ScaleActionDirection Increase -ScaleActionValue 1
$rule2 = New-AzureRmAutoscaleRule -MetricName "Percentage CPU" -MetricResourceId /subscriptions/$subid/resourceGroups/$rgname/providers/Microsoft.Compute/virtualMachineScaleSets/$vmssname -Operator LessThan -MetricStatistic Average -Threshold 30 -TimeGrain 00:01:00 -TimeWindow 00:05:00 -ScaleActionCooldown 00:05:00 -ScaleActionDirection Decrease -ScaleActionValue 1
$profile1 = New-AzureRmAutoscaleProfile -DefaultCapacity 2 -MaximumCapacity 10 -MinimumCapacity 2 -Rules $rule1,$rule2 -Name "autoprofile1"
Add-AzureRmAutoscaleSetting -Location $location -Name "autosetting1" -ResourceGroup $rgname -TargetResourceId /subscriptions/$subid/resourceGroups/$rgname/providers/Microsoft.Compute/virtualMachineScaleSets/$vmssname -AutoscaleProfiles $profile1
```

<span data-ttu-id="79104-139">您可以找到有效的度量 tooscale 清單上[支援的 Azure 監視的度量](../monitoring-and-diagnostics/monitoring-supported-metrics.md)下 hello 標題"Microsoft.Compute/virtualMachineScaleSets。 」</span><span class="sxs-lookup"><span data-stu-id="79104-139">You can find a list of valid metrics tooscale on in [Supported metrics with Azure Monitor](../monitoring-and-diagnostics/monitoring-supported-metrics.md) under hello heading "Microsoft.Compute/virtualMachineScaleSets."</span></span> <span data-ttu-id="79104-140">也可以使用，包括排程為基礎的自動調整規模，以及與警示系統使用 webhook toointegrate 更進階的自動調整規模選項。</span><span class="sxs-lookup"><span data-stu-id="79104-140">More advanced autoscale options are also available, including schedule-based autoscale and using webhooks toointegrate with alert systems.</span></span>

## <a name="monitoring-your-scale-set"></a><span data-ttu-id="79104-141">監視擴展集</span><span class="sxs-lookup"><span data-stu-id="79104-141">Monitoring your scale set</span></span>
<span data-ttu-id="79104-142">hello [Azure 入口網站](https://portal.azure.com)清單縮放設定，並顯示其屬性。</span><span class="sxs-lookup"><span data-stu-id="79104-142">hello [Azure portal](https://portal.azure.com) lists scale sets and shows their properties.</span></span> <span data-ttu-id="79104-143">hello 入口網站也支援管理作業。</span><span class="sxs-lookup"><span data-stu-id="79104-143">hello portal also supports management operations.</span></span> <span data-ttu-id="79104-144">您可以同時針對擴展集和擴展集內的個別 VM 執行管理作業。</span><span class="sxs-lookup"><span data-stu-id="79104-144">You can perform management operations on both scale sets and individual VMs within a scale set.</span></span> <span data-ttu-id="79104-145">hello 入口網站也提供可自訂的資源使用量圖表。</span><span class="sxs-lookup"><span data-stu-id="79104-145">hello portal also provides a customizable resource usage graph.</span></span> 

<span data-ttu-id="79104-146">如果您需要 toosee 或編輯 hello 基礎的 Azure 資源的 JSON 定義時，您也可以使用[Azure 資源總管](https://resources.azure.com)。</span><span class="sxs-lookup"><span data-stu-id="79104-146">If you need toosee or edit hello underlying JSON definition of an Azure resource, you can also use [Azure Resource Explorer](https://resources.azure.com).</span></span> <span data-ttu-id="79104-147">小數位數均為 hello Microsoft.Compute Azure 資源提供者下的資源。</span><span class="sxs-lookup"><span data-stu-id="79104-147">Scale sets are a resource under hello Microsoft.Compute Azure resource provider.</span></span> <span data-ttu-id="79104-148">從這個站台，您可以看到它們展開 hello 下列連結：</span><span class="sxs-lookup"><span data-stu-id="79104-148">From this site, you can see them by expanding hello following links:</span></span>

<span data-ttu-id="79104-149">訂用帳戶 > 您的訂用帳戶 > resourceGroups > 提供者 > Microsoft.Compute > virtualMachineScaleSets > 您的擴展集 > 等等</span><span class="sxs-lookup"><span data-stu-id="79104-149">**Subscriptions** > **your subscription** > **resourceGroups** > **providers** > **Microsoft.Compute** > **virtualMachineScaleSets** > **your scale set** > etc.</span></span>

## <a name="scale-set-scenarios"></a><span data-ttu-id="79104-150">擴展集案例</span><span class="sxs-lookup"><span data-stu-id="79104-150">Scale set scenarios</span></span>
<span data-ttu-id="79104-151">本節列出一些典型的擴展集案例。</span><span class="sxs-lookup"><span data-stu-id="79104-151">This section lists some typical scale set scenarios.</span></span> <span data-ttu-id="79104-152">某些較高階的 Azure 服務 (例如 Batch、Service Fabric 和 Container Service) 會使用這些案例。</span><span class="sxs-lookup"><span data-stu-id="79104-152">Some higher-level Azure services (like Batch, Service Fabric, and Container Service) use these scenarios.</span></span>

* <span data-ttu-id="79104-153">**使用 RDP 或 SSH tooconnect tooscale 設定執行個體**： 規模集建立內部虛擬網路，且 hello 規模集中的個別 Vm 依預設不會配置的公用 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="79104-153">**Use RDP or SSH tooconnect tooscale set instances**: A scale set is created inside a virtual network, and individual VMs in hello scale set are not allocated public IP addresses by default.</span></span> <span data-ttu-id="79104-154">此原則可避免 hello 費用，以及管理負擔的配置不同的公用 IP 位址 tooall hello 節點計算方格中。</span><span class="sxs-lookup"><span data-stu-id="79104-154">This policy avoids hello expense and management overhead of allocating separate public IP addresses tooall hello nodes in your compute grid.</span></span> <span data-ttu-id="79104-155">如果您需要直接外部連接 tooscale 設定 Vm，您可以設定小數位數組 tooautomatically 指派公用 IP 位址 toonew Vm。</span><span class="sxs-lookup"><span data-stu-id="79104-155">If you do need direct external connections tooscale set VMs, you can configure a scale set tooautomatically assign public IP addresses toonew VMs.</span></span> <span data-ttu-id="79104-156">或者您可以從其他資源連線 tooVMs 虛擬網路中可獲配置的公用 IP 位址，例如，負載平衡器和獨立虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="79104-156">Alternatively you can connect tooVMs from other resources in your virtual network that can be allocated public IP addresses, for example, load balancers and standalone virtual machines.</span></span> 
* <span data-ttu-id="79104-157">**使用 NAT 規則連線 tooVMs**： 您可以建立公用 IP 位址、 將它指派 tooa 負載平衡器，並定義傳入的 NAT 集區。</span><span class="sxs-lookup"><span data-stu-id="79104-157">**Connect tooVMs by using NAT rules**: You can create a public IP address, assign it tooa load balancer, and define an inbound NAT pool.</span></span> <span data-ttu-id="79104-158">這些動作將 hello IP 位址 tooa 的連接埠上的 VM hello 規模集中的連接埠對應。</span><span class="sxs-lookup"><span data-stu-id="79104-158">These actions map ports on hello IP address tooa port on a VM in hello scale set.</span></span> <span data-ttu-id="79104-159">例如：</span><span class="sxs-lookup"><span data-stu-id="79104-159">For example:</span></span>
  
  | <span data-ttu-id="79104-160">來源</span><span class="sxs-lookup"><span data-stu-id="79104-160">Source</span></span> | <span data-ttu-id="79104-161">來源連接埠</span><span class="sxs-lookup"><span data-stu-id="79104-161">Source port</span></span> | <span data-ttu-id="79104-162">目的地</span><span class="sxs-lookup"><span data-stu-id="79104-162">Destination</span></span> | <span data-ttu-id="79104-163">目的地連接埠</span><span class="sxs-lookup"><span data-stu-id="79104-163">Destination port</span></span> |
  | --- | --- | --- | --- |
  |  <span data-ttu-id="79104-164">公用 IP</span><span class="sxs-lookup"><span data-stu-id="79104-164">Public IP</span></span> |<span data-ttu-id="79104-165">連接埠 50000</span><span class="sxs-lookup"><span data-stu-id="79104-165">Port 50000</span></span> |<span data-ttu-id="79104-166">vmss\_0</span><span class="sxs-lookup"><span data-stu-id="79104-166">vmss\_0</span></span> |<span data-ttu-id="79104-167">連接埠 22</span><span class="sxs-lookup"><span data-stu-id="79104-167">Port 22</span></span> |
  |  <span data-ttu-id="79104-168">公用 IP</span><span class="sxs-lookup"><span data-stu-id="79104-168">Public IP</span></span> |<span data-ttu-id="79104-169">連接埠 50001</span><span class="sxs-lookup"><span data-stu-id="79104-169">Port 50001</span></span> |<span data-ttu-id="79104-170">vmss\_1</span><span class="sxs-lookup"><span data-stu-id="79104-170">vmss\_1</span></span> |<span data-ttu-id="79104-171">連接埠 22</span><span class="sxs-lookup"><span data-stu-id="79104-171">Port 22</span></span> |
  |  <span data-ttu-id="79104-172">公用 IP</span><span class="sxs-lookup"><span data-stu-id="79104-172">Public IP</span></span> |<span data-ttu-id="79104-173">連接埠 50002</span><span class="sxs-lookup"><span data-stu-id="79104-173">Port 50002</span></span> |<span data-ttu-id="79104-174">vmss\_2</span><span class="sxs-lookup"><span data-stu-id="79104-174">vmss\_2</span></span> |<span data-ttu-id="79104-175">連接埠 22</span><span class="sxs-lookup"><span data-stu-id="79104-175">Port 22</span></span> |
  
   <span data-ttu-id="79104-176">在[本例](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-linux-nat)，NAT 規則會定義的 tooenable 規模集中的 SSH 連線 tooevery VM，使用單一公用 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="79104-176">In [this example](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-linux-nat), NAT rules are defined tooenable an SSH connection tooevery VM in a scale set, by using a single public IP address.</span></span>
  
   <span data-ttu-id="79104-177">[這個範例](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-windows-nat)未透過 RDP 和 Windows hello 相同。</span><span class="sxs-lookup"><span data-stu-id="79104-177">[This example](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-windows-nat) does hello same with RDP and Windows.</span></span>
* <span data-ttu-id="79104-178">**使用 「 jumpbox 」 連線 tooVMs**： 如果您在相同虛擬網路，hello hello 中建立 小數位數，以及獨立 VM 獨立 VM 和 hello 擴展集 VM 可以連接的 tooone 另一個使用其內部 IP 位址時，所定義的 hello 虛擬網路或子網路。</span><span class="sxs-lookup"><span data-stu-id="79104-178">**Connect tooVMs by using a "jumpbox"**: If you create a scale set and a standalone VM in hello same virtual network, hello standalone VM and hello scale set VM can connect tooone another by using their internal IP addresses, as defined by hello virtual network or subnet.</span></span> <span data-ttu-id="79104-179">如果您建立的公用 IP 位址，並將它指派 toohello 獨立 VM，您可以使用 RDP 或 SSH tooconnect toohello 獨立 VM。</span><span class="sxs-lookup"><span data-stu-id="79104-179">If you create a public IP address and assign it toohello standalone VM, you can use RDP or SSH tooconnect toohello standalone VM.</span></span> <span data-ttu-id="79104-180">您可以連接從機器 tooyour 規模設定執行個體。</span><span class="sxs-lookup"><span data-stu-id="79104-180">You can then connect from that machine tooyour scale set instances.</span></span> <span data-ttu-id="79104-181">此時您可能會發現，簡易擴展集在本質上比在預設組態中設定了公用 IP 位址的獨立 VM 來得安全。</span><span class="sxs-lookup"><span data-stu-id="79104-181">You might notice at this point that a simple scale set is inherently more secure than a simple standalone VM with a public IP address in its default configuration.</span></span>
  
   <span data-ttu-id="79104-182">例如，[此範本](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-linux-jumpbox)會部署具有一部獨立 VM 的簡單擴展集。</span><span class="sxs-lookup"><span data-stu-id="79104-182">For example, [this template](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-linux-jumpbox) deploys a simple scale set with a standalone VM.</span></span> 
* <span data-ttu-id="79104-183">**負載平衡 tooscale 集執行個體**： 如果您想 toodeliver 工作 tooa 運算叢集的 Vm 使用的循環配置資源方法，您可以設定 Azure 負載平衡器與第 4 層負載平衡規則據以。</span><span class="sxs-lookup"><span data-stu-id="79104-183">**Load balancing tooscale set instances**: If you want toodeliver work tooa compute cluster of VMs by using a round-robin approach, you can configure an Azure load balancer with layer-4 load-balancing rules accordingly.</span></span> <span data-ttu-id="79104-184">您可以定義探查您應用程式正在執行 ping tooverify 連接埠與指定的通訊協定、 間隔和要求路徑。</span><span class="sxs-lookup"><span data-stu-id="79104-184">You can define probes tooverify that your application is running by pinging ports with a specified protocol, interval, and request path.</span></span> <span data-ttu-id="79104-185">[Azure 應用程式閘道](https://azure.microsoft.com/services/application-gateway/)也支援擴展集，以及第 7 層和更複雜的負載平衡案例。</span><span class="sxs-lookup"><span data-stu-id="79104-185">[Azure Application Gateway](https://azure.microsoft.com/services/application-gateway/) also supports scale sets, along with layer-7 and more sophisticated load-balancing scenarios.</span></span>
  
   <span data-ttu-id="79104-186">[這個範例](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-ubuntu-web-ssl)建立執行 Apache web 伺服器，並使用每個 VM 收到負載平衡器 toobalance hello 負載規模集。</span><span class="sxs-lookup"><span data-stu-id="79104-186">[This example](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-ubuntu-web-ssl) creates a scale set that runs Apache web servers, and it uses a load balancer toobalance hello load that each VM receives.</span></span> <span data-ttu-id="79104-187">（看看 hello Microsoft.Network/loadBalancers 資源類型和 networkProfile extensionProfile virtualMachineScaleSet 中的）。</span><span class="sxs-lookup"><span data-stu-id="79104-187">(Look at hello Microsoft.Network/loadBalancers resource type and networkProfile and extensionProfile in virtualMachineScaleSet.)</span></span>

   <span data-ttu-id="79104-188">[此 Linux 範例](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-ubuntu-app-gateway)和[此 Windows 範例](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-windows-app-gateway)均使用應用程式閘道。</span><span class="sxs-lookup"><span data-stu-id="79104-188">[This Linux example](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-ubuntu-app-gateway) and [this Windows example](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-windows-app-gateway) use Application Gateway.</span></span>  

* <span data-ttu-id="79104-189">**在 PaaS 叢集管理員中，將擴展集部署為計算叢集**：擴展集有時會被稱為新一代的背景工作角色。</span><span class="sxs-lookup"><span data-stu-id="79104-189">**Deploying a scale set as a compute cluster in a PaaS cluster manager**: Scale sets are sometimes described as a next-generation worker role.</span></span> <span data-ttu-id="79104-190">有效的描述，但它未風險 hello 令人混淆的小數位數的設定功能與 Azure 雲端服務功能。</span><span class="sxs-lookup"><span data-stu-id="79104-190">Though a valid description, it does run hello risk of confusing scale set features with Azure Cloud Services features.</span></span> <span data-ttu-id="79104-191">就某方面來說，擴展集提供了真正的背景工作角色或背景工作資源。</span><span class="sxs-lookup"><span data-stu-id="79104-191">In a sense, scale sets provide a true worker role or worker resource.</span></span> <span data-ttu-id="79104-192">因為它們是不會隨平台/執行階段而改變、可自訂且整合至 Azure Resource Manager IaaS 的一般化計算資源。</span><span class="sxs-lookup"><span data-stu-id="79104-192">They are a generalized compute resource that is platform/runtime independent, is customizable, and integrates into Azure Resource Manager IaaS.</span></span>
  
   <span data-ttu-id="79104-193">雲端服務背景工作角色的平台/執行階段支援有限 (僅限 Windows 平台映像)。</span><span class="sxs-lookup"><span data-stu-id="79104-193">A Cloud Services worker role is limited in terms of platform/runtime support (Windows platform images only).</span></span> <span data-ttu-id="79104-194">但它也包含一些服務，例如 VIP 交換、可設定的升級設定，以及執行階段/應用程式部署特定設定。</span><span class="sxs-lookup"><span data-stu-id="79104-194">But it also includes services such as VIP swap, configurable upgrade settings, and runtime/app deployment-specific settings.</span></span> <span data-ttu-id="79104-195">這些服務「尚未」在擴展集中提供，或由其他較高層級的 PaaS 服務 (例如 Azure Service Fabric) 傳遞。</span><span class="sxs-lookup"><span data-stu-id="79104-195">These services are not *yet* available in scale sets, or they're delivered by other higher-level PaaS services like Azure Service Fabric.</span></span> <span data-ttu-id="79104-196">您可以將擴展集視為可支援 PaaS 的基礎結構。</span><span class="sxs-lookup"><span data-stu-id="79104-196">You can look at scale sets as an infrastructure that supports PaaS.</span></span> <span data-ttu-id="79104-197">[Service Fabric](https://azure.microsoft.com/services/service-fabric/) 之類的 PaaS 解決方案會建置在這個基礎結構上。</span><span class="sxs-lookup"><span data-stu-id="79104-197">PaaS solutions like [Service Fabric](https://azure.microsoft.com/services/service-fabric/) build on this infrastructure.</span></span>
  
   <span data-ttu-id="79104-198">在這個方法的[此範例](https://github.com/Azure/azure-quickstart-templates/tree/master/101-acs-dcos)中，[Azure Container Service](https://azure.microsoft.com/services/container-service/) 會根據具有容器協調器的擴展集來部署叢集。</span><span class="sxs-lookup"><span data-stu-id="79104-198">In [this example](https://github.com/Azure/azure-quickstart-templates/tree/master/101-acs-dcos) of this approach, [Azure Container Service](https://azure.microsoft.com/services/container-service/) deploys a cluster based on scale sets with a container orchestrator.</span></span>

## <a name="scale-set-performance-and-scale-guidance"></a><span data-ttu-id="79104-199">擴展集的效能和調整指南</span><span class="sxs-lookup"><span data-stu-id="79104-199">Scale set performance and scale guidance</span></span>
* <span data-ttu-id="79104-200">擴展集支援 too1，000 Vm 上。</span><span class="sxs-lookup"><span data-stu-id="79104-200">A scale set supports up too1,000 VMs.</span></span> <span data-ttu-id="79104-201">如果您建立並上傳您自己自訂的 VM 映像，hello 限制為 100。</span><span class="sxs-lookup"><span data-stu-id="79104-201">If you create and upload your own custom VM images, hello limit is 100.</span></span> <span data-ttu-id="79104-202">如需大型擴展集的使用考量，請參閱[使用大型的虛擬機器擴展集](virtual-machine-scale-sets-placement-groups.md)。</span><span class="sxs-lookup"><span data-stu-id="79104-202">For considerations in using large scale sets, see [Working with large virtual machine scale sets](virtual-machine-scale-sets-placement-groups.md).</span></span>
* <span data-ttu-id="79104-203">您不需要 toopre-建立 Azure 儲存體帳戶 toouse 規模集。</span><span class="sxs-lookup"><span data-stu-id="79104-203">You do not have toopre-create Azure storage accounts toouse scale sets.</span></span> <span data-ttu-id="79104-204">小數位數設定支援 Azure 受管理磁碟、 變換正負號的每個儲存體帳戶的磁碟的 hello 數目的相關效能問題。</span><span class="sxs-lookup"><span data-stu-id="79104-204">Scale sets support Azure managed disks, which negate performance concerns about hello number of disks per storage account.</span></span> <span data-ttu-id="79104-205">如需詳細資訊，請參閱 [Azure 虛擬機器擴展集和受控磁碟](virtual-machine-scale-sets-managed-disks.md)。</span><span class="sxs-lookup"><span data-stu-id="79104-205">For more information, see [Azure virtual machine scale sets and managed disks](virtual-machine-scale-sets-managed-disks.md).</span></span>
* <span data-ttu-id="79104-206">請考慮使用 Azure 進階儲存體而非 Azure 儲存體，來提升 VM 佈建時間的速度和可預測性，並改善 IO 效能。</span><span class="sxs-lookup"><span data-stu-id="79104-206">Consider using Azure Premium Storage instead of Azure Storage for faster, more predictable VM provisioning times and improved I/O performance.</span></span>
* <span data-ttu-id="79104-207">在您要部署的 hello 區域中的 hello 核心配額限制您可以建立的 Vm 的 hello 數目。</span><span class="sxs-lookup"><span data-stu-id="79104-207">hello core quota in hello region in which you are deploying limits hello number of VMs you can create.</span></span> <span data-ttu-id="79104-208">您需要 toocontact 客戶支援 tooincrease 您計算的配額限制，即使您目前有高限制的 Azure 雲端服務搭配使用的核心。</span><span class="sxs-lookup"><span data-stu-id="79104-208">You might need toocontact Customer Support tooincrease your compute quota limit, even if you have a high limit of cores for use with Azure Cloud Services today.</span></span> <span data-ttu-id="79104-209">tooquery 配額限制，請執行下列 Azure CLI 命令： `azure vm list-usage`。</span><span class="sxs-lookup"><span data-stu-id="79104-209">tooquery your quota, run this Azure CLI command: `azure vm list-usage`.</span></span> <span data-ttu-id="79104-210">或者，執行此 PowerShell 命令︰`Get-AzureRmVMUsage`。</span><span class="sxs-lookup"><span data-stu-id="79104-210">Or, run this PowerShell command: `Get-AzureRmVMUsage`.</span></span>

## <a name="frequently-asked-questions-for-scale-sets"></a><span data-ttu-id="79104-211">擴展集的常見問題集</span><span class="sxs-lookup"><span data-stu-id="79104-211">Frequently asked questions for scale sets</span></span>
<span data-ttu-id="79104-212">**問：**</span><span class="sxs-lookup"><span data-stu-id="79104-212">**Q.**</span></span> <span data-ttu-id="79104-213">擴展集內可以有多少部 VM？</span><span class="sxs-lookup"><span data-stu-id="79104-213">How many VMs can I have in a scale set?</span></span>

<span data-ttu-id="79104-214">**答：**</span><span class="sxs-lookup"><span data-stu-id="79104-214">**A.**</span></span> <span data-ttu-id="79104-215">擴展集可以有 0 too1、 000 Vm 為基礎平台映像，或 0 too100 Vm 為基礎的自訂映像。</span><span class="sxs-lookup"><span data-stu-id="79104-215">A scale set can have 0 too1,000 VMs based on platform images, or 0 too100 VMs based on custom images.</span></span> 

<span data-ttu-id="79104-216">**問：**</span><span class="sxs-lookup"><span data-stu-id="79104-216">**Q.**</span></span> <span data-ttu-id="79104-217">在擴展集內是否支援資料磁碟？</span><span class="sxs-lookup"><span data-stu-id="79104-217">Are data disks supported within scale sets?</span></span>

<span data-ttu-id="79104-218">**答：**</span><span class="sxs-lookup"><span data-stu-id="79104-218">**A.**</span></span> <span data-ttu-id="79104-219">是。</span><span class="sxs-lookup"><span data-stu-id="79104-219">Yes.</span></span> <span data-ttu-id="79104-220">擴展集可以定義適用於 hello 集中 tooall Vm 連接的資料磁碟組態。</span><span class="sxs-lookup"><span data-stu-id="79104-220">A scale set can define an attached data disks configuration that applies tooall VMs in hello set.</span></span> <span data-ttu-id="79104-221">如需詳細資訊，請參閱 [Azure 擴展集和連結的資料磁碟](virtual-machine-scale-sets-attached-disks.md)。</span><span class="sxs-lookup"><span data-stu-id="79104-221">For more information, see [Azure scale sets and attached data disks](virtual-machine-scale-sets-attached-disks.md).</span></span> <span data-ttu-id="79104-222">其他用於儲存資料的選項包括：</span><span class="sxs-lookup"><span data-stu-id="79104-222">Other options for storing data include:</span></span>

* <span data-ttu-id="79104-223">Azure 檔案 (SMB 共用磁碟機)</span><span class="sxs-lookup"><span data-stu-id="79104-223">Azure files (SMB shared drives)</span></span>
* <span data-ttu-id="79104-224">OS 磁碟機</span><span class="sxs-lookup"><span data-stu-id="79104-224">OS drive</span></span>
* <span data-ttu-id="79104-225">暫存磁碟機 (本機，未受 Azure 儲存體支援)</span><span class="sxs-lookup"><span data-stu-id="79104-225">Temp drive (local, not backed by Azure Storage)</span></span>
* <span data-ttu-id="79104-226">Azure 資料服務 (例如 Azure 資料表、Azure Blob)</span><span class="sxs-lookup"><span data-stu-id="79104-226">Azure data service (for example, Azure tables, Azure blobs)</span></span>
* <span data-ttu-id="79104-227">外部資料服務 (例如遠端資料庫)</span><span class="sxs-lookup"><span data-stu-id="79104-227">External data service (for example, remote database)</span></span>

<span data-ttu-id="79104-228">**問：**</span><span class="sxs-lookup"><span data-stu-id="79104-228">**Q.**</span></span> <span data-ttu-id="79104-229">哪些 Azure 區域支援擴展集？</span><span class="sxs-lookup"><span data-stu-id="79104-229">Which Azure regions support scale sets?</span></span>

<span data-ttu-id="79104-230">**答：**</span><span class="sxs-lookup"><span data-stu-id="79104-230">**A.**</span></span> <span data-ttu-id="79104-231">所有區域都支援擴展集。</span><span class="sxs-lookup"><span data-stu-id="79104-231">All regions support scale sets.</span></span>

<span data-ttu-id="79104-232">**問：**</span><span class="sxs-lookup"><span data-stu-id="79104-232">**Q.**</span></span> <span data-ttu-id="79104-233">如何使用自訂映像建立擴展集？</span><span class="sxs-lookup"><span data-stu-id="79104-233">How do I create a scale set by using a custom image?</span></span>

<span data-ttu-id="79104-234">**答：**</span><span class="sxs-lookup"><span data-stu-id="79104-234">**A.**</span></span> <span data-ttu-id="79104-235">根據自訂映像 VHD 建立受控磁碟，並在擴展集範本中參考它。</span><span class="sxs-lookup"><span data-stu-id="79104-235">Create a managed disk based on your custom image VHD and reference it in your scale set template.</span></span> <span data-ttu-id="79104-236">[以下是範例](https://github.com/chagarw/MDPP/tree/master/101-vmss-custom-os)。</span><span class="sxs-lookup"><span data-stu-id="79104-236">[Here's an example](https://github.com/chagarw/MDPP/tree/master/101-vmss-custom-os).</span></span>

<span data-ttu-id="79104-237">**問：**</span><span class="sxs-lookup"><span data-stu-id="79104-237">**Q.**</span></span> <span data-ttu-id="79104-238">如果我降低我的小數位數會從 20 too15，Vm 會移除設定產能？</span><span class="sxs-lookup"><span data-stu-id="79104-238">If I reduce my scale set capacity from 20 too15, which VMs are removed?</span></span>

<span data-ttu-id="79104-239">**答：**</span><span class="sxs-lookup"><span data-stu-id="79104-239">**A.**</span></span> <span data-ttu-id="79104-240">虛擬機器會移除從 hello 擴展集更新網域和故障網域 toomaximize 可用性之間的平均。</span><span class="sxs-lookup"><span data-stu-id="79104-240">Virtual machines are removed from hello scale set evenly across update domains and fault domains toomaximize availability.</span></span> <span data-ttu-id="79104-241">以最高識別碼會先移除的 hello 的 Vm。</span><span class="sxs-lookup"><span data-stu-id="79104-241">VMs with hello highest IDs are removed first.</span></span>

<span data-ttu-id="79104-242">**問：**</span><span class="sxs-lookup"><span data-stu-id="79104-242">**Q.**</span></span> <span data-ttu-id="79104-243">如果再增加從 15 too18 hello 容量？</span><span class="sxs-lookup"><span data-stu-id="79104-243">What if I then increase hello capacity from 15 too18?</span></span>

<span data-ttu-id="79104-244">**答：**</span><span class="sxs-lookup"><span data-stu-id="79104-244">**A.**</span></span> <span data-ttu-id="79104-245">如果您增加容量 too18 時，會建立 3 個新 Vm。</span><span class="sxs-lookup"><span data-stu-id="79104-245">If you increase capacity too18, then 3 new VMs are created.</span></span> <span data-ttu-id="79104-246">每次從 hello 前一個最高值 （例如 20、 21、 22），會遞增 hello VM 執行個體識別碼。</span><span class="sxs-lookup"><span data-stu-id="79104-246">Each time, hello VM instance ID is incremented from hello previous highest value (for example, 20, 21, 22).</span></span> <span data-ttu-id="79104-247">VM 會平衡分散到容錯網域和更新網域。</span><span class="sxs-lookup"><span data-stu-id="79104-247">VMs are balanced across fault domains and update domains.</span></span>

<span data-ttu-id="79104-248">**問：**</span><span class="sxs-lookup"><span data-stu-id="79104-248">**Q.**</span></span> <span data-ttu-id="79104-249">在擴展集內使用多個延伸模組時，是否可以強制執行「執行順序」？</span><span class="sxs-lookup"><span data-stu-id="79104-249">When I'm using multiple extensions in a scale set, can I enforce an execution sequence?</span></span>

<span data-ttu-id="79104-250">**答：**</span><span class="sxs-lookup"><span data-stu-id="79104-250">**A.**</span></span> <span data-ttu-id="79104-251">Hello customScript 延伸模組，但無法直接管理，您的指令碼可以等候另一個延伸模組 toofinish。</span><span class="sxs-lookup"><span data-stu-id="79104-251">Not directly, but for hello customScript extension, your script can wait for another extension toofinish.</span></span> <span data-ttu-id="79104-252">您可以取得其他指示上 hello 部落格文章中的擴充功能順序[在 Azure VM 規模集的擴充功能順序](https://msftstack.wordpress.com/2016/05/12/extension-sequencing-in-azure-vm-scale-sets/)。</span><span class="sxs-lookup"><span data-stu-id="79104-252">You can get additional guidance on extension sequencing in hello blog post [Extension Sequencing in Azure VM Scale Sets](https://msftstack.wordpress.com/2016/05/12/extension-sequencing-in-azure-vm-scale-sets/).</span></span>

<span data-ttu-id="79104-253">**問：**</span><span class="sxs-lookup"><span data-stu-id="79104-253">**Q.**</span></span> <span data-ttu-id="79104-254">擴展集是否可與 Azure 可用性設定組組搭配使用？</span><span class="sxs-lookup"><span data-stu-id="79104-254">Do scale sets work with Azure availability sets?</span></span>

<span data-ttu-id="79104-255">**答：**</span><span class="sxs-lookup"><span data-stu-id="79104-255">**A.**</span></span> <span data-ttu-id="79104-256">是。</span><span class="sxs-lookup"><span data-stu-id="79104-256">Yes.</span></span> <span data-ttu-id="79104-257">擴展集是隱含的可用性設定組，具有 5 個容錯網域和 5 個更新網域。</span><span class="sxs-lookup"><span data-stu-id="79104-257">A scale set is an implicit availability set with 5 fault domains and 5 update domains.</span></span> <span data-ttu-id="79104-258">小數位數的 100 個以上的 Vm 設定跨多個*放置群組*，這是對等 toomultiple 可用性設定組。</span><span class="sxs-lookup"><span data-stu-id="79104-258">Scale sets of more than 100 VMs span multiple *placement groups*, which are equivalent toomultiple availability sets.</span></span> <span data-ttu-id="79104-259">如需放置群組的詳細資訊，請參閱[使用大型的虛擬機器擴展集](virtual-machine-scale-sets-placement-groups.md)。</span><span class="sxs-lookup"><span data-stu-id="79104-259">For more information about placement groups, see [Working with large virtual machine scale sets](virtual-machine-scale-sets-placement-groups.md).</span></span> <span data-ttu-id="79104-260">Vm 的可用性設定組中可能存在 hello 相同虛擬網路的 Vm 規模集。</span><span class="sxs-lookup"><span data-stu-id="79104-260">An availability set of VMs can exist in hello same virtual network as a scale set of VMs.</span></span> <span data-ttu-id="79104-261">常見組態是 tooput 控制節點 （這通常需要唯一的組態） 的 Vm 的可用性中設定，並將資料節點放在 hello 規模集。</span><span class="sxs-lookup"><span data-stu-id="79104-261">A common configuration is tooput control node VMs (which often require unique configuration) in an availability set and put data nodes in hello scale set.</span></span>

<span data-ttu-id="79104-262">您可以找到有關小數位數的多個答案 tooquestions 設定中 hello [Azure 虛擬機器規模設定常見問題集](virtual-machine-scale-sets-faq.md)。</span><span class="sxs-lookup"><span data-stu-id="79104-262">You can find more answers tooquestions about scale sets in hello [Azure virtual machine scale sets FAQ](virtual-machine-scale-sets-faq.md).</span></span>
