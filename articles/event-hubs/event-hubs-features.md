---
title: "aaaAzure 事件中心功能概觀 |Microsoft 文件"
description: "Azure 事件中樞功能的概觀和詳細資料"
services: event-hubs
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 
ms.service: event-hubs
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/17/2017
ms.author: sethm
ms.openlocfilehash: 8094e48abc8455ed725d4d5d3f9895f431441e2b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="event-hubs-features-overview"></a><span data-ttu-id="96133-103">事件中樞功能概觀</span><span class="sxs-lookup"><span data-stu-id="96133-103">Event Hubs features overview</span></span>

<span data-ttu-id="96133-104">事件中樞是可調整的事件處理服務，它會擷取和處理大量的事件和資料，具有低延遲和高可靠性。</span><span class="sxs-lookup"><span data-stu-id="96133-104">Azure Event Hubs is a scalable event processing service that ingests and processes large volumes of events and data, with low latency and high reliability.</span></span> <span data-ttu-id="96133-105">請參閱[事件中心是什麼？](event-hubs-what-is-event-hubs.md)的 hello 服務的高階概觀。</span><span class="sxs-lookup"><span data-stu-id="96133-105">See [What is Event Hubs?](event-hubs-what-is-event-hubs.md) for a high-level overview of hello service.</span></span>

<span data-ttu-id="96133-106">這篇文章會根據在 hello hello 資訊[概觀](event-hubs-what-is-event-hubs.md)，並提供有關事件中心元件和功能的技術和實作詳細資料。</span><span class="sxs-lookup"><span data-stu-id="96133-106">This article builds on hello information in hello [overview](event-hubs-what-is-event-hubs.md), and provides technical and implementation details about Event Hubs components and features.</span></span>

## <a name="event-publishers"></a><span data-ttu-id="96133-107">事件發佈者</span><span class="sxs-lookup"><span data-stu-id="96133-107">Event publishers</span></span>

<span data-ttu-id="96133-108">傳送資料 tooan 事件中心是事件產生者的任何實體或*事件發行者*。</span><span class="sxs-lookup"><span data-stu-id="96133-108">Any entity that sends data tooan event hub is an event producer, or *event publisher*.</span></span> <span data-ttu-id="96133-109">事件發佈者可以使用 HTTPS 或 AMQP 1.0 發佈事件。</span><span class="sxs-lookup"><span data-stu-id="96133-109">Event publishers can publish events using HTTPS or AMQP 1.0.</span></span> <span data-ttu-id="96133-110">事件發行者使用共用存取簽章 (SAS) 權杖的 tooidentify 本身 tooan 事件中樞，並可以有唯一的識別，或使用一般的 SAS 權杖。</span><span class="sxs-lookup"><span data-stu-id="96133-110">Event publishers use a Shared Access Signature (SAS) token tooidentify themselves tooan event hub, and can have a unique identity, or use a common SAS token.</span></span>

### <a name="publishing-an-event"></a><span data-ttu-id="96133-111">發佈事件</span><span class="sxs-lookup"><span data-stu-id="96133-111">Publishing an event</span></span>

<span data-ttu-id="96133-112">您可以透過 AMQP 1.0 或 HTTPS 來發佈事件。</span><span class="sxs-lookup"><span data-stu-id="96133-112">You can publish an event via AMQP 1.0 or HTTPS.</span></span> <span data-ttu-id="96133-113">事件中心提供[用戶端程式庫和類別](event-hubs-dotnet-framework-api-overview.md)發行的.NET 用戶端事件 tooan 事件中樞。</span><span class="sxs-lookup"><span data-stu-id="96133-113">Event Hubs provides [client libraries and classes](event-hubs-dotnet-framework-api-overview.md) for publishing events tooan event hub from .NET clients.</span></span> <span data-ttu-id="96133-114">對於其他執行階段和平台，您可以使用任何 AMQP 1.0 用戶端 (如 [Apache Qpid](http://qpid.apache.org/))。</span><span class="sxs-lookup"><span data-stu-id="96133-114">For other runtimes and platforms, you can use any AMQP 1.0 client, such as [Apache Qpid](http://qpid.apache.org/).</span></span> <span data-ttu-id="96133-115">您可以單獨發佈事件，或以批次方式進行。</span><span class="sxs-lookup"><span data-stu-id="96133-115">You can publish events individually, or batched.</span></span> <span data-ttu-id="96133-116">不論是單一事件或批次，單次發行 (事件資料執行個體) 的上限為 256KB。</span><span class="sxs-lookup"><span data-stu-id="96133-116">A single publication (event data instance) has a limit of 256 KB, regardless of whether it is a single event or a batch.</span></span> <span data-ttu-id="96133-117">發佈大於此臨界值的事件會導致錯誤。</span><span class="sxs-lookup"><span data-stu-id="96133-117">Publishing events larger than this threshold results in an error.</span></span> <span data-ttu-id="96133-118">它是 「 發行者 」 toobe hello 事件中心內的資料分割感知的最佳作法，並指定 tooonly*資料分割索引鍵*（hello 下一節中引進），或其透過 SAS 權杖的身分識別。</span><span class="sxs-lookup"><span data-stu-id="96133-118">It is a best practice for publishers toobe unaware of partitions within hello event hub and tooonly specify a *partition key* (introduced in hello next section), or their identity via their SAS token.</span></span>

<span data-ttu-id="96133-119">hello 選擇 toouse AMQP 或 HTTPS 為 toohello 特定使用案例。</span><span class="sxs-lookup"><span data-stu-id="96133-119">hello choice toouse AMQP or HTTPS is specific toohello usage scenario.</span></span> <span data-ttu-id="96133-120">在加法 tootransport 層級安全性 (TLS) 或 SSL/TLS，AMQP 還需要 hello 建立持續性的雙向通訊端。</span><span class="sxs-lookup"><span data-stu-id="96133-120">AMQP requires hello establishment of a persistent bidirectional socket in addition tootransport level security (TLS) or SSL/TLS.</span></span> <span data-ttu-id="96133-121">AMQP 時，有較高的網路成本初始化 hello 工作階段，不過 HTTPS 需要額外的 SSL 負荷的每個要求。</span><span class="sxs-lookup"><span data-stu-id="96133-121">AMQP has higher network costs when initializing hello session, however HTTPS requires additional SSL overhead for every request.</span></span> <span data-ttu-id="96133-122">對於頻繁的發行者，AMQP 的效能較高。</span><span class="sxs-lookup"><span data-stu-id="96133-122">AMQP has higher performance for frequent publishers.</span></span>

![事件中樞](./media/event-hubs-features/partition_keys.png)

<span data-ttu-id="96133-124">事件中心，可確保共用的資料分割索引鍵值的所有事件所都傳遞順序，以及 toohello 中相同資料分割。</span><span class="sxs-lookup"><span data-stu-id="96133-124">Event Hubs ensures that all events sharing a partition key value are delivered in order, and toohello same partition.</span></span> <span data-ttu-id="96133-125">如果發行者原則中使用資料分割索引鍵，然後 hello hello 發行者的身分識別和 hello hello 資料分割索引鍵的值必須符合。</span><span class="sxs-lookup"><span data-stu-id="96133-125">If partition keys are used with publisher policies, then hello identity of hello publisher and hello value of hello partition key must match.</span></span> <span data-ttu-id="96133-126">否則便會發生錯誤。</span><span class="sxs-lookup"><span data-stu-id="96133-126">Otherwise, an error occurs.</span></span>

### <a name="publisher-policy"></a><span data-ttu-id="96133-127">發佈者原則</span><span class="sxs-lookup"><span data-stu-id="96133-127">Publisher policy</span></span>

<span data-ttu-id="96133-128">事件中樞可讓您透過發佈者 原則更精確地控制事件發佈者。</span><span class="sxs-lookup"><span data-stu-id="96133-128">Event Hubs enables granular control over event publishers through *publisher policies*.</span></span> <span data-ttu-id="96133-129">發行者原則是專門設計的執行階段功能 toofacilitate 大量獨立事件發行者。</span><span class="sxs-lookup"><span data-stu-id="96133-129">Publisher policies are run-time features designed toofacilitate large numbers of independent event publishers.</span></span> <span data-ttu-id="96133-130">使用發行者原則，每個發行者使用它自己的唯一識別碼發佈事件 tooan 事件中心時使用下列機制 hello:</span><span class="sxs-lookup"><span data-stu-id="96133-130">With publisher policies, each publisher uses its own unique identifier when publishing events tooan event hub, using hello following mechanism:</span></span>

```
//[my namespace].servicebus.windows.net/[event hub name]/publishers/[my publisher name]
```

<span data-ttu-id="96133-131">您不需要事先，toocreate 發行者名稱，但它們必須符合 hello SAS 權杖發行事件時，在訂單 tooensure 獨立發行者的身分識別時使用。</span><span class="sxs-lookup"><span data-stu-id="96133-131">You don't have toocreate publisher names ahead of time, but they must match hello SAS token used when publishing an event, in order tooensure independent publisher identities.</span></span> <span data-ttu-id="96133-132">當使用發行者原則，hello **PartitionKey**設定 toohello 發行者名稱的值。</span><span class="sxs-lookup"><span data-stu-id="96133-132">When using publisher policies, hello **PartitionKey** value is set toohello publisher name.</span></span> <span data-ttu-id="96133-133">toowork 正常運作，這些值必須相符。</span><span class="sxs-lookup"><span data-stu-id="96133-133">toowork properly, these values must match.</span></span>

## <a name="capture"></a><span data-ttu-id="96133-134">擷取</span><span class="sxs-lookup"><span data-stu-id="96133-134">Capture</span></span>

<span data-ttu-id="96133-135">[事件中心擷取](event-hubs-capture-overview.md)可讓您 tooautomatically 擷取 hello 事件中心中的資料流，並將它儲存 tooyour 選擇 Blob 儲存體帳戶，或 Azure 資料湖服務帳戶。</span><span class="sxs-lookup"><span data-stu-id="96133-135">[Event Hubs Capture](event-hubs-capture-overview.md) enables you tooautomatically capture hello streaming data in Event Hubs and save it tooyour choice of either a Blob storage account, or an Azure Data Lake Service account.</span></span> <span data-ttu-id="96133-136">您可以從 hello Azure 入口網站中啟用擷取，並指定最小值和時間視窗 tooperform hello 擷取。</span><span class="sxs-lookup"><span data-stu-id="96133-136">You can enable Capture from hello Azure portal, and specify a minimum size and time window tooperform hello capture.</span></span> <span data-ttu-id="96133-137">使用擷取的事件中樞，您指定您自己的 Azure Blob 儲存體帳戶和容器，或 Azure 資料湖服務帳戶，也就是使用的 toostore hello 擷取的資料。</span><span class="sxs-lookup"><span data-stu-id="96133-137">Using Event Hubs Capture, you specify your own Azure Blob Storage account and container, or Azure Data Lake Service account, which is used toostore hello captured data.</span></span> <span data-ttu-id="96133-138">擷取的資料會寫入 hello Apache Avro 格式。</span><span class="sxs-lookup"><span data-stu-id="96133-138">Captured data is written in hello Apache Avro format.</span></span>

## <a name="partitions"></a><span data-ttu-id="96133-139">分割數</span><span class="sxs-lookup"><span data-stu-id="96133-139">Partitions</span></span>

<span data-ttu-id="96133-140">事件中心提供訊息串流透過分割式取用者模式中的每一個取用者只會讀取的特定子集或資料分割，hello 訊息資料流。</span><span class="sxs-lookup"><span data-stu-id="96133-140">Event Hubs provides message streaming through a partitioned consumer pattern in which each consumer only reads a specific subset, or partition, of hello message stream.</span></span> <span data-ttu-id="96133-141">此模式能水平擴充事件處理規模，並提供佇列和主題缺少的其他串流導向功能。</span><span class="sxs-lookup"><span data-stu-id="96133-141">This pattern enables horizontal scale for event processing and provides other stream-focused features that are unavailable in queues and topics.</span></span>

<span data-ttu-id="96133-142">資料分割是經過排序且保存在事件中樞內的事件序列。</span><span class="sxs-lookup"><span data-stu-id="96133-142">A partition is an ordered sequence of events that is held in an event hub.</span></span> <span data-ttu-id="96133-143">較新的事件送達時，會加入此序列的 toohello 結尾。</span><span class="sxs-lookup"><span data-stu-id="96133-143">As newer events arrive, they are added toohello end of this sequence.</span></span> <span data-ttu-id="96133-144">您可以將資料分割視為一種「認可記錄」。</span><span class="sxs-lookup"><span data-stu-id="96133-144">A partition can be thought of as a "commit log."</span></span>

![事件中樞](./media/event-hubs-features/partition.png)

<span data-ttu-id="96133-146">事件中樞會保留資料的 hello 事件中樞中的所有資料分割適用於已設定的保留時間。</span><span class="sxs-lookup"><span data-stu-id="96133-146">Event Hubs retains data for a configured retention time that applies across all partitions in hello event hub.</span></span> <span data-ttu-id="96133-147">事件會隨著時間經過而到期，因此您無法明確地予以刪除。</span><span class="sxs-lookup"><span data-stu-id="96133-147">Events expire on a time basis; you cannot explicitly delete them.</span></span> <span data-ttu-id="96133-148">資料分割各自獨立，只包含其本身的資料序列，通常會以不同的速度成長。</span><span class="sxs-lookup"><span data-stu-id="96133-148">Because partitions are independent and contain their own sequence of data, they often grow at different rates.</span></span>

![事件中樞](./media/event-hubs-features/multiple_partitions.png)

<span data-ttu-id="96133-150">hello 資料分割數目指定在建立，而且必須介於 2 到 32 之間。</span><span class="sxs-lookup"><span data-stu-id="96133-150">hello number of partitions is specified at creation and must be between 2 and 32.</span></span> <span data-ttu-id="96133-151">hello 資料分割計數就無法變更，，因此設定資料分割計數時，您應該考慮長期的小數位數。</span><span class="sxs-lookup"><span data-stu-id="96133-151">hello partition count is not changeable, so you should consider long-term scale when setting partition count.</span></span> <span data-ttu-id="96133-152">資料分割是與取用應用程式所需 toohello 下游平行處理原則的資料組織機制。</span><span class="sxs-lookup"><span data-stu-id="96133-152">Partitions are a data organization mechanism that relates toohello downstream parallelism required in consuming applications.</span></span> <span data-ttu-id="96133-153">hello 事件中心的資料分割數目直接關係 toohello 數目的並行讀取器中，您預期 toohave。</span><span class="sxs-lookup"><span data-stu-id="96133-153">hello number of partitions in an event hub directly relates toohello number of concurrent readers you expect toohave.</span></span> <span data-ttu-id="96133-154">您可以增加 hello 32 以外的資料分割數目連絡 hello 事件中心小組。</span><span class="sxs-lookup"><span data-stu-id="96133-154">You can increase hello number of partitions beyond 32 by contacting hello Event Hubs team.</span></span>

<span data-ttu-id="96133-155">雖然資料分割可以識別，而且可以傳送 toodirectly，不建議直接傳送 tooa 磁碟分割。</span><span class="sxs-lookup"><span data-stu-id="96133-155">While partitions are identifiable and can be sent toodirectly, sending directly tooa partition is not recommended.</span></span> <span data-ttu-id="96133-156">相反地，您可以使用較高的層級建構 hello 中導入[事件發行者](#event-publishers)和[容量](#capacity)區段。</span><span class="sxs-lookup"><span data-stu-id="96133-156">Instead, you can use higher level constructs introduced in hello [Event publisher](#event-publishers) and [Capacity](#capacity) sections.</span></span> 

<span data-ttu-id="96133-157">資料分割會填入一連串的事件資料，其中包含 hello 主體 hello 事件、 使用者定義的屬性包，以及中繼資料，例如它 hello 資料分割中的位移和 hello 串流序列中的編號。</span><span class="sxs-lookup"><span data-stu-id="96133-157">Partitions are filled with a sequence of event data which contains hello body of hello event, a user-defined property bag, and metadata such as its offset in hello partition and its number in hello stream sequence.</span></span>

<span data-ttu-id="96133-158">如需有關資料分割和 hello 取捨可用性和可靠性的詳細資訊，請參閱 hello[事件中心程式設計指南](event-hubs-programming-guide.md#partition-key)和 hello[可用性和事件中心的一致性](event-hubs-availability-and-consistency.md)發行項.</span><span class="sxs-lookup"><span data-stu-id="96133-158">For more information about partitions and hello trade-off between availability and reliability, see hello [Event Hubs programming guide](event-hubs-programming-guide.md#partition-key) and hello [Availability and consistency in Event Hubs](event-hubs-availability-and-consistency.md) article.</span></span>

### <a name="partition-key"></a><span data-ttu-id="96133-159">資料分割索引鍵</span><span class="sxs-lookup"><span data-stu-id="96133-159">Partition key</span></span>

<span data-ttu-id="96133-160">您可以使用[資料分割索引鍵](event-hubs-programming-guide.md#partition-key)toomap 內送事件資料至特定的資料分割的資料組織 hello 用途。</span><span class="sxs-lookup"><span data-stu-id="96133-160">You can use a [partition key](event-hubs-programming-guide.md#partition-key) toomap incoming event data into specific partitions for hello purpose of data organization.</span></span> <span data-ttu-id="96133-161">hello 資料分割索引鍵是寄件者提供的值傳遞至事件中心。</span><span class="sxs-lookup"><span data-stu-id="96133-161">hello partition key is a sender-supplied value passed into an event hub.</span></span> <span data-ttu-id="96133-162">它會處理透過靜態雜湊函式，會建立 hello 資料分割指派。</span><span class="sxs-lookup"><span data-stu-id="96133-162">It is processed through a static hashing function, which creates hello partition assignment.</span></span> <span data-ttu-id="96133-163">如果您在發佈事件時未指定資料分割索引鍵，系統會使用循環配置資源指派。</span><span class="sxs-lookup"><span data-stu-id="96133-163">If you don't specify a partition key when publishing an event, a round-robin assignment is used.</span></span>

<span data-ttu-id="96133-164">hello 事件發行者只會知道其資料分割索引鍵，不 hello 分割 toowhich hello 事件發行。</span><span class="sxs-lookup"><span data-stu-id="96133-164">hello event publisher is only aware of its partition key, not hello partition toowhich hello events are published.</span></span> <span data-ttu-id="96133-165">此種減少方式的索引鍵和資料分割，以隔離就不需要太多有關 hello 下游處理 tooknow hello 寄件者。</span><span class="sxs-lookup"><span data-stu-id="96133-165">This decoupling of key and partition insulates hello sender from needing tooknow too much about hello downstream processing.</span></span> <span data-ttu-id="96133-166">每個裝置或使用者唯一識別適當的資料分割索引鍵，但是其他屬性，例如地理位置也可以使用的 toogroup 相關事件至單一資料分割。</span><span class="sxs-lookup"><span data-stu-id="96133-166">A per-device or user unique identity makes a good partition key, but other attributes such as geography can also be used toogroup related events into a single partition.</span></span>

## <a name="sas-tokens"></a><span data-ttu-id="96133-167">SAS 權杖</span><span class="sxs-lookup"><span data-stu-id="96133-167">SAS tokens</span></span>

<span data-ttu-id="96133-168">事件中心採用*共用存取簽章*，所提供在 hello 命名空間和事件中心層級。</span><span class="sxs-lookup"><span data-stu-id="96133-168">Event Hubs uses *Shared Access Signatures*, which are available at hello namespace and event hub level.</span></span> <span data-ttu-id="96133-169">SAS 權杖可自 SAS 金鑰產生，它是經過特定格式編碼的 URL SHA 雜湊。</span><span class="sxs-lookup"><span data-stu-id="96133-169">A SAS token is generated from a SAS key and is an SHA hash of a URL, encoded in a specific format.</span></span> <span data-ttu-id="96133-170">使用 hello 名稱 hello 金鑰 （原則） 和 hello 語彙基元，事件中心可以重新產生 hello 雜湊，因此驗證 hello 寄件者。</span><span class="sxs-lookup"><span data-stu-id="96133-170">Using hello name of hello key (policy) and hello token, Event Hubs can regenerate hello hash and thus authenticate hello sender.</span></span> <span data-ttu-id="96133-171">一般而言，建立的事件發佈者 SAS 權杖只具備特定事件中樞的**傳送**權限。</span><span class="sxs-lookup"><span data-stu-id="96133-171">Normally, SAS tokens for event publishers are created with only **send** privileges on a specific event hub.</span></span> <span data-ttu-id="96133-172">此 SAS 權杖 URL 機制是 hello 發行者原則中介紹的發行者識別的 hello 基礎。</span><span class="sxs-lookup"><span data-stu-id="96133-172">This SAS token URL mechanism is hello basis for publisher identification introduced in hello publisher policy.</span></span> <span data-ttu-id="96133-173">如需使用 SAS 的詳細資訊，請參閱[使用服務匯流排的共用存取簽章驗證](../service-bus-messaging/service-bus-sas.md)。</span><span class="sxs-lookup"><span data-stu-id="96133-173">For more information about working with SAS, see [Shared Access Signature Authentication with Service Bus](../service-bus-messaging/service-bus-sas.md).</span></span>

## <a name="event-consumers"></a><span data-ttu-id="96133-174">事件取用者</span><span class="sxs-lookup"><span data-stu-id="96133-174">Event consumers</span></span>

<span data-ttu-id="96133-175">任何從事件中樞讀取事件資料的實體就稱為「事件取用者」。</span><span class="sxs-lookup"><span data-stu-id="96133-175">Any entity that reads event data from an event hub is an *event consumer*.</span></span> <span data-ttu-id="96133-176">透過 hello AMQP 1.0 工作階段的所有事件中心取用者都連接，並透過 hello 工作階段傳遞事件可用時。</span><span class="sxs-lookup"><span data-stu-id="96133-176">All Event Hubs consumers connect via hello AMQP 1.0 session and events are delivered through hello session as they become available.</span></span> <span data-ttu-id="96133-177">hello 用戶端不需要 toopoll 資料可用性。</span><span class="sxs-lookup"><span data-stu-id="96133-177">hello client does not need toopoll for data availability.</span></span>

### <a name="consumer-groups"></a><span data-ttu-id="96133-178">用戶群組</span><span class="sxs-lookup"><span data-stu-id="96133-178">Consumer groups</span></span>

<span data-ttu-id="96133-179">事件中心的 hello 發佈/訂閱機制透過啟用*取用者群組*。</span><span class="sxs-lookup"><span data-stu-id="96133-179">hello publish/subscribe mechanism of Event Hubs is enabled through *consumer groups*.</span></span> <span data-ttu-id="96133-180">取用者群組是檢視整個事件中樞 (狀態、位置或位移) 的窗口。</span><span class="sxs-lookup"><span data-stu-id="96133-180">A consumer group is a view (state, position, or offset) of an entire event hub.</span></span> <span data-ttu-id="96133-181">取用者群組可讓多個取用應用程式 tooeach 擁有 hello 事件資料流，並依自己的步調獨立 tooread hello 資料流的不同檢視，和他們自己的位移。</span><span class="sxs-lookup"><span data-stu-id="96133-181">Consumer groups enable multiple consuming applications tooeach have a separate view of hello event stream, and tooread hello stream independently at their own pace and with their own offsets.</span></span>

<span data-ttu-id="96133-182">在資料流處理架構，每一個下游應用程式等同 tooa 取用者群組。</span><span class="sxs-lookup"><span data-stu-id="96133-182">In a stream processing architecture, each downstream application equates tooa consumer group.</span></span> <span data-ttu-id="96133-183">如果您想 toowrite 事件資料 toolong 長期的儲存體，該儲存體寫入器應用程式是取用者群組。</span><span class="sxs-lookup"><span data-stu-id="96133-183">If you want toowrite event data toolong-term storage, then that storage writer application is a consumer group.</span></span> <span data-ttu-id="96133-184">複雜的事件處理可以由另一個獨立的取用者群組來執行。</span><span class="sxs-lookup"><span data-stu-id="96133-184">Complex event processing can then be performed by another, separate consumer group.</span></span> <span data-ttu-id="96133-185">您只能透過取用者群組來存取資料分割。</span><span class="sxs-lookup"><span data-stu-id="96133-185">You can only access partitions through a consumer group.</span></span> <span data-ttu-id="96133-186">每一取用者群組的一個分割區上最多可以有 5 個並行讀取器；不過，**建議在每一取用者群組的一個分割區上只有一個作用中的接收器**。</span><span class="sxs-lookup"><span data-stu-id="96133-186">There can be at most 5 concurrent readers on a partition per consumer group; however **it is recommended that there is only one active receiver on a partition per consumer group**.</span></span> <span data-ttu-id="96133-187">事件中心，會有預設取用者群組，而且您可以建立標準層次事件中心 too20 取用者群組。</span><span class="sxs-lookup"><span data-stu-id="96133-187">There is always a default consumer group in an event hub, and you can create up too20 consumer groups for a Standard tier event hub.</span></span>

<span data-ttu-id="96133-188">hello 如下 hello 取用者群組 URI 慣例的範例：</span><span class="sxs-lookup"><span data-stu-id="96133-188">hello following are examples of hello consumer group URI convention:</span></span>

```http
//[my namespace].servicebus.windows.net/[event hub name]/[Consumer Group #1]
//[my namespace].servicebus.windows.net/[event hub name]/[Consumer Group #2]
```

<span data-ttu-id="96133-189">hello 下圖顯示 hello 事件中心資料流處理架構：</span><span class="sxs-lookup"><span data-stu-id="96133-189">hello following figure shows hello Event Hubs stream processing architecture:</span></span>

![事件中樞](./media/event-hubs-features/event_hubs_architecture.png)

### <a name="stream-offsets"></a><span data-ttu-id="96133-191">串流位移</span><span class="sxs-lookup"><span data-stu-id="96133-191">Stream offsets</span></span>

<span data-ttu-id="96133-192">*位移*hello 位置上的磁碟分割內的事件。</span><span class="sxs-lookup"><span data-stu-id="96133-192">An *offset* is hello position of an event within a partition.</span></span> <span data-ttu-id="96133-193">您可以將位移視為用戶端指標。</span><span class="sxs-lookup"><span data-stu-id="96133-193">You can think of an offset as a client-side cursor.</span></span> <span data-ttu-id="96133-194">hello 位移是一個位元組的 hello 事件編號。</span><span class="sxs-lookup"><span data-stu-id="96133-194">hello offset is a byte numbering of hello event.</span></span> <span data-ttu-id="96133-195">此位移可讓事件取用者 （讀取器） toospecify 希望從中讀取事件 toobegin hello 事件資料流中的點。</span><span class="sxs-lookup"><span data-stu-id="96133-195">This offset enables an event consumer (reader) toospecify a point in hello event stream from which they want toobegin reading events.</span></span> <span data-ttu-id="96133-196">您可以指定 hello 位移為時間戳記或位移值。</span><span class="sxs-lookup"><span data-stu-id="96133-196">You can specify hello offset as a timestamp or as an offset value.</span></span> <span data-ttu-id="96133-197">取用者負責儲存 hello 事件中心服務之外自己位移的值。</span><span class="sxs-lookup"><span data-stu-id="96133-197">Consumers are responsible for storing their own offset values outside of hello Event Hubs service.</span></span> <span data-ttu-id="96133-198">在資料分割內，每個事件都含有一個位移。</span><span class="sxs-lookup"><span data-stu-id="96133-198">Within a partition, each event includes an offset.</span></span>

![事件中樞](./media/event-hubs-features/partition_offset.png)

### <a name="checkpointing"></a><span data-ttu-id="96133-200">檢查點</span><span class="sxs-lookup"><span data-stu-id="96133-200">Checkpointing</span></span>

<span data-ttu-id="96133-201">*設立檢查點* 是讀取器在資料分割事件序列中標記或認可其位置的程序。</span><span class="sxs-lookup"><span data-stu-id="96133-201">*Checkpointing* is a process by which readers mark or commit their position within a partition event sequence.</span></span> <span data-ttu-id="96133-202">檢查點檢查 hello 責任 hello 取用者與取用者群組內每個分割區為基礎，就會發生。</span><span class="sxs-lookup"><span data-stu-id="96133-202">Checkpointing is hello responsibility of hello consumer and occurs on a per-partition basis within a consumer group.</span></span> <span data-ttu-id="96133-203">此的責任表示，每個取用者群組、 每個資料分割讀取器必須追蹤 hello 事件資料流，其目前位置，並將它視為 hello 資料流完成時，可以通知 hello 服務。</span><span class="sxs-lookup"><span data-stu-id="96133-203">This responsibility means that for each consumer group, each partition reader must keep track of its current position in hello event stream, and can inform hello service when it considers hello data stream complete.</span></span>

<span data-ttu-id="96133-204">如果讀取器會中斷從資料分割，當它重新連線時開始讀取先前已提交 hello 最後一個讀取器該分割的取用者群組中的 hello 檢查點。</span><span class="sxs-lookup"><span data-stu-id="96133-204">If a reader disconnects from a partition, when it reconnects it begins reading at hello checkpoint that was previously submitted by hello last reader of that partition in that consumer group.</span></span> <span data-ttu-id="96133-205">當 hello 讀取器連接時，它會傳遞這個位移的 toohello 事件中樞 toospecify hello 位置在哪一個 toostart 讀取。</span><span class="sxs-lookup"><span data-stu-id="96133-205">When hello reader connects, it passes this offset toohello event hub toospecify hello location at which toostart reading.</span></span> <span data-ttu-id="96133-206">如此一來，您可以使用檢查點 tooboth 事件標示為 「 完成 」，下游應用程式和 tooprovide 復原，如果在不同電腦上執行的讀取器之間的容錯移轉，就會發生。</span><span class="sxs-lookup"><span data-stu-id="96133-206">In this way, you can use checkpointing tooboth mark events as "complete" by downstream applications, and tooprovide resiliency if a failover between readers running on different machines occurs.</span></span> <span data-ttu-id="96133-207">它藉由指定較低的位移，從這個檢查點程序是可能 tooreturn tooolder 資料。</span><span class="sxs-lookup"><span data-stu-id="96133-207">It is possible tooreturn tooolder data by specifying a lower offset from this checkpointing process.</span></span> <span data-ttu-id="96133-208">透過這項機制，檢查點可提供容錯移轉彈性，並支援事件串流重播。</span><span class="sxs-lookup"><span data-stu-id="96133-208">Through this mechanism, checkpointing enables both failover resiliency and event stream replay.</span></span>

### <a name="common-consumer-tasks"></a><span data-ttu-id="96133-209">常見的取用者工作</span><span class="sxs-lookup"><span data-stu-id="96133-209">Common consumer tasks</span></span>

<span data-ttu-id="96133-210">所有事件中樞取用者都會透過 AMQP 1.0 工作階段 (狀態感知的雙向通訊通道) 來連線。</span><span class="sxs-lookup"><span data-stu-id="96133-210">All Event Hubs consumers connect via an AMQP 1.0 session, a state-aware bidirectional communication channel.</span></span> <span data-ttu-id="96133-211">每個資料分割有 AMQP 1.0 工作階段，可促進 hello 傳輸的資料分割所隔離的事件。</span><span class="sxs-lookup"><span data-stu-id="96133-211">Each partition has an AMQP 1.0 session that facilitates hello transport of events segregated by partition.</span></span>

#### <a name="connect-tooa-partition"></a><span data-ttu-id="96133-212">連接 tooa 磁碟分割</span><span class="sxs-lookup"><span data-stu-id="96133-212">Connect tooa partition</span></span>

<span data-ttu-id="96133-213">連線時 toopartitions，它是常見的作法 toouse 租用機制 toocoordinate 讀取器連接 toospecific 資料分割。</span><span class="sxs-lookup"><span data-stu-id="96133-213">When connecting toopartitions, it is common practice toouse a leasing mechanism toocoordinate reader connections toospecific partitions.</span></span> <span data-ttu-id="96133-214">如此一來，它可能會取用者群組 toohave 只能有一個作用中讀取器中的每個資料分割。</span><span class="sxs-lookup"><span data-stu-id="96133-214">This way, it is possible for every partition in a consumer group toohave only one active reader.</span></span> <span data-ttu-id="96133-215">檢查點，租用及管理讀取器已經過簡化使用 hello [EventProcessorHost](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost) .NET 用戶端類別。</span><span class="sxs-lookup"><span data-stu-id="96133-215">Checkpointing, leasing, and managing readers are simplified by using hello [EventProcessorHost](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost) class for .NET clients.</span></span> <span data-ttu-id="96133-216">hello 事件處理器主機是智慧型取用者代理程式。</span><span class="sxs-lookup"><span data-stu-id="96133-216">hello Event Processor Host is an intelligent consumer agent.</span></span>

#### <a name="read-events"></a><span data-ttu-id="96133-217">讀取事件</span><span class="sxs-lookup"><span data-stu-id="96133-217">Read events</span></span>

<span data-ttu-id="96133-218">特定資料分割開啟 AMQP 1.0 工作階段和連結後，事件會由 hello 事件中心服務傳遞 toohello AMQP 1.0 用戶端。</span><span class="sxs-lookup"><span data-stu-id="96133-218">After an AMQP 1.0 session and link is opened for a specific partition, events are delivered toohello AMQP 1.0 client by hello Event Hubs service.</span></span> <span data-ttu-id="96133-219">相較於以提取為基礎的機制 (如 HTTP GET)，這個傳遞機制能產生更高的輸送量和較低的延遲。</span><span class="sxs-lookup"><span data-stu-id="96133-219">This delivery mechanism enables higher throughput and lower latency than pull-based mechanisms such as HTTP GET.</span></span> <span data-ttu-id="96133-220">當事件傳送 toohello 用戶端，每個事件資料執行個體包含重要的中繼資料，例如所使用的 toofacilitate hello 事件序列上的檢查點的 hello 位移和序號數目。</span><span class="sxs-lookup"><span data-stu-id="96133-220">As events are sent toohello client, each event data instance contains important metadata such as hello offset and sequence number that are used toofacilitate checkpointing on hello event sequence.</span></span>

<span data-ttu-id="96133-221">事件資料︰</span><span class="sxs-lookup"><span data-stu-id="96133-221">Event data:</span></span>
* <span data-ttu-id="96133-222">Offset</span><span class="sxs-lookup"><span data-stu-id="96133-222">Offset</span></span>
* <span data-ttu-id="96133-223">序號</span><span class="sxs-lookup"><span data-stu-id="96133-223">Sequence number</span></span>
* <span data-ttu-id="96133-224">內文</span><span class="sxs-lookup"><span data-stu-id="96133-224">Body</span></span>
* <span data-ttu-id="96133-225">使用者屬性</span><span class="sxs-lookup"><span data-stu-id="96133-225">User properties</span></span>
* <span data-ttu-id="96133-226">系統屬性</span><span class="sxs-lookup"><span data-stu-id="96133-226">System properties</span></span>

<span data-ttu-id="96133-227">它是您的責任 toomanage hello 位移。</span><span class="sxs-lookup"><span data-stu-id="96133-227">It is your responsibility toomanage hello offset.</span></span>

## <a name="capacity"></a><span data-ttu-id="96133-228">容量</span><span class="sxs-lookup"><span data-stu-id="96133-228">Capacity</span></span>

<span data-ttu-id="96133-229">事件中心具有高度可調整的平行架構，有數個關鍵因素 tooconsider 時調整大小和擴充。</span><span class="sxs-lookup"><span data-stu-id="96133-229">Event Hubs has a highly scalable parallel architecture and there are several key factors tooconsider when sizing and scaling.</span></span>

### <a name="throughput-units"></a><span data-ttu-id="96133-230">輸送量單位</span><span class="sxs-lookup"><span data-stu-id="96133-230">Throughput units</span></span>

<span data-ttu-id="96133-231">事件中心 hello 輸送量容量由*輸送量單位*。</span><span class="sxs-lookup"><span data-stu-id="96133-231">hello throughput capacity of Event Hubs is controlled by *throughput units*.</span></span> <span data-ttu-id="96133-232">輸送量單位是預先購買的容量單位。</span><span class="sxs-lookup"><span data-stu-id="96133-232">Throughput units are pre-purchased units of capacity.</span></span> <span data-ttu-id="96133-233">單一輸送量單位包括 hello 下列容量：</span><span class="sxs-lookup"><span data-stu-id="96133-233">A single throughput unit includes hello following capacity:</span></span>

* <span data-ttu-id="96133-234">每秒 （何者先） 的第二個或 1000年事件 too1 MB 總輸入：</span><span class="sxs-lookup"><span data-stu-id="96133-234">Ingress: Up too1 MB per second or 1000 events per second (whichever comes first)</span></span>
* <span data-ttu-id="96133-235">向上 too2 MB，每秒輸出：</span><span class="sxs-lookup"><span data-stu-id="96133-235">Egress: Up too2 MB per second</span></span>

<span data-ttu-id="96133-236">輸入已超出 hello 購買的輸送量單位的 hello 產能，節流和[ServerBusyException](/dotnet/api/microsoft.servicebus.messaging.serverbusyexception)傳回。</span><span class="sxs-lookup"><span data-stu-id="96133-236">Beyond hello capacity of hello purchased throughput units, ingress is throttled and a [ServerBusyException](/dotnet/api/microsoft.servicebus.messaging.serverbusyexception) is returned.</span></span> <span data-ttu-id="96133-237">輸出不會產生節流例外狀況，但仍會限制的 toohello 容量的 hello 購買的輸送量單位。</span><span class="sxs-lookup"><span data-stu-id="96133-237">Egress does not produce throttling exceptions, but is still limited toohello capacity of hello purchased throughput units.</span></span> <span data-ttu-id="96133-238">如果您收到發佈速率例外狀況或預期 toosee 較高的輸出，是確定 toocheck hello 命名空間已購買的輸送量單位數量。</span><span class="sxs-lookup"><span data-stu-id="96133-238">If you receive publishing rate exceptions or are expecting toosee higher egress, be sure toocheck how many throughput units you have purchased for hello namespace.</span></span> <span data-ttu-id="96133-239">您可以管理 hello 輸送量單位**標尺**刀鋒視窗中的 hello 命名空間中 hello [Azure 入口網站](https://portal.azure.com)。</span><span class="sxs-lookup"><span data-stu-id="96133-239">You can manage throughput units on hello **Scale** blade of hello namespaces in hello [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="96133-240">您也可以管理輸送量單位以程式設計方式使用 hello[事件中心 Api](event-hubs-api-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="96133-240">You can also manage throughput units programmatically using hello [Event Hubs APIs](event-hubs-api-overview.md).</span></span>

<span data-ttu-id="96133-241">輸送量單位是以每小時計費，採預先購買制。</span><span class="sxs-lookup"><span data-stu-id="96133-241">Throughput units are billed per hour and are pre-purchased.</span></span> <span data-ttu-id="96133-242">一經購買，您至少必須支付一個小時的輸送量單位費用。</span><span class="sxs-lookup"><span data-stu-id="96133-242">Once purchased, throughput units are billed for a minimum of one hour.</span></span> <span data-ttu-id="96133-243">Too20 輸送量單位可以購買事件中樞命名空間和 hello 命名空間中所有事件中心都共用。</span><span class="sxs-lookup"><span data-stu-id="96133-243">Up too20 throughput units can be purchased for an Event Hubs namespace and are shared across all Event Hubs in hello namespace.</span></span>

<span data-ttu-id="96133-244">可以連絡 Azure 支援人員，20，too100 輸送量單位，向上的區塊中購買更多的輸送量單位。</span><span class="sxs-lookup"><span data-stu-id="96133-244">More throughput units can be purchased in blocks of 20, up too100 throughput units, by contacting Azure support.</span></span> <span data-ttu-id="96133-245">之後，您還可以購買以 100 個輸送量為單位的區塊。</span><span class="sxs-lookup"><span data-stu-id="96133-245">Beyond that, you can also purchase blocks of 100 throughput units.</span></span>

<span data-ttu-id="96133-246">我們建議您衡量輸送量單位和資料分割 tooachieve 最佳規模。</span><span class="sxs-lookup"><span data-stu-id="96133-246">We recommend that you balance throughput units and partitions tooachieve optimal scale.</span></span> <span data-ttu-id="96133-247">每個資料分割有一個輸送量單位的規模上限。</span><span class="sxs-lookup"><span data-stu-id="96133-247">A single partition has a maximum scale of one throughput unit.</span></span> <span data-ttu-id="96133-248">hello 輸送量單元數目應該要小於或等於 toohello 事件中心中的資料分割數目。</span><span class="sxs-lookup"><span data-stu-id="96133-248">hello number of throughput units should be less than or equal toohello number of partitions in an event hub.</span></span>

<span data-ttu-id="96133-249">如需詳細的事件中樞價格資訊，請參閱[事件中樞價格](https://azure.microsoft.com/pricing/details/event-hubs/)。</span><span class="sxs-lookup"><span data-stu-id="96133-249">For detailed Event Hubs pricing information, see [Event Hubs pricing](https://azure.microsoft.com/pricing/details/event-hubs/).</span></span>

## <a name="next-steps"></a><span data-ttu-id="96133-250">後續步驟</span><span class="sxs-lookup"><span data-stu-id="96133-250">Next steps</span></span>

<span data-ttu-id="96133-251">如需有關事件中心的詳細資訊，請造訪下列連結查看 hello:</span><span class="sxs-lookup"><span data-stu-id="96133-251">For more information about Event Hubs, visit hello following links:</span></span>

* <span data-ttu-id="96133-252">開始使用[事件中樞教學課程][Event Hubs tutorial]</span><span class="sxs-lookup"><span data-stu-id="96133-252">Get started with an [Event Hubs tutorial][Event Hubs tutorial]</span></span>
* [<span data-ttu-id="96133-253">事件中樞程式設計指南</span><span class="sxs-lookup"><span data-stu-id="96133-253">Event Hubs programming guide</span></span>](event-hubs-programming-guide.md)
* [<span data-ttu-id="96133-254">事件中樞的可用性和一致性</span><span class="sxs-lookup"><span data-stu-id="96133-254">Availability and consistency in Event Hubs</span></span>](event-hubs-availability-and-consistency.md)
* [<span data-ttu-id="96133-255">事件中樞常見問題集</span><span class="sxs-lookup"><span data-stu-id="96133-255">Event Hubs FAQ</span></span>](event-hubs-faq.md)
* <span data-ttu-id="96133-256">[事件中樞範例][]</span><span class="sxs-lookup"><span data-stu-id="96133-256">[Event Hubs samples][]</span></span>

[Event Hubs tutorial]: event-hubs-dotnet-standard-getstarted-send.md
[事件中樞範例]: https://github.com/Azure/azure-event-hubs/tree/master/samples
