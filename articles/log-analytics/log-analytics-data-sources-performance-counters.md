---
title: "在 Azure Log Analytics 中收集並分析效能計數器 | Microsoft Docs"
description: "Log Analytics 會收集效能計數器以分析 Windows 和 Linux 代理程式的效能。  本文說明如何設定 Windows 和 Linux 代理程式的效能計數器收集、儲存在 OMS 儲存機制中的相關詳細資料，以及如何在 OMS 入口網站中分析這些資料。"
services: log-analytics
documentationcenter: 
author: mgoedtel
manager: carmonm
editor: tysonn
ms.assetid: 20e145e4-2ace-4cd9-b252-71fb4f94099e
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/12/2017
ms.author: magoedte
ms.openlocfilehash: 953bb453b0a9635627fbbb6c3913d0cd757101c7
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/03/2017
---
# <a name="windows-and-linux-performance-data-sources-in-log-analytics"></a><span data-ttu-id="88a95-104">Log Analytics 中的 Windows 和 Linux 效能資料來源</span><span class="sxs-lookup"><span data-stu-id="88a95-104">Windows and Linux performance data sources in Log Analytics</span></span>
<span data-ttu-id="88a95-105">Windows 和 Linux 的效能計數器可讓您深入了解硬體元件、作業系統及應用程式的效能。</span><span class="sxs-lookup"><span data-stu-id="88a95-105">Performance counters in Windows and Linux provide insight into the performance of hardware components, operating systems, and applications.</span></span>  <span data-ttu-id="88a95-106">Log Analytics 可收集效能計數器，以頻繁間隔進行接近即時 (NRT) 的分析，並彙總較長期分析和報告所需的效能資料。</span><span class="sxs-lookup"><span data-stu-id="88a95-106">Log Analytics can collect performance counters at frequent intervals for Near Real Time (NRT) analysis in addition to aggregating performance data for longer term analysis and reporting.</span></span>

![效能計數器](media/log-analytics-data-sources-performance-counters/overview.png)

## <a name="configuring-performance-counters"></a><span data-ttu-id="88a95-108">設定效能計數器</span><span class="sxs-lookup"><span data-stu-id="88a95-108">Configuring Performance counters</span></span>
<span data-ttu-id="88a95-109">在 OMS 入口網站中，從 [Log Analytics [設定] 中的 [資料] 功能表](log-analytics-data-sources.md#configuring-data-sources)設定效能計數器。</span><span class="sxs-lookup"><span data-stu-id="88a95-109">Configure  Performance counters in the OMS portal from the [Data menu in Log Analytics Settings](log-analytics-data-sources.md#configuring-data-sources).</span></span>

<span data-ttu-id="88a95-110">當您第一次為新的 OMS 工作區設定 Windows 或 Linux 效能計數器時，系統會提供選項，讓您快速建立數個常用的計數器。</span><span class="sxs-lookup"><span data-stu-id="88a95-110">When you first configure Windows or Linux Performance counters for a new OMS workspace, you are given the option to quickly create several common counters.</span></span>  <span data-ttu-id="88a95-111">這些計數器旁邊皆會列出核取方塊。</span><span class="sxs-lookup"><span data-stu-id="88a95-111">They are listed with a checkbox next to each.</span></span>  <span data-ttu-id="88a95-112">確認已核取所有想一開始就建立的計數器，然後按一下 **[Add the selected performance counters]** \ (加入選取的效能計數器) 。</span><span class="sxs-lookup"><span data-stu-id="88a95-112">Ensure that any counters you want to initially create are checked and then click **Add the selected performance counters**.</span></span>

<span data-ttu-id="88a95-113">對於 Windows 效能計數器，您可以選擇每個效能計數器的特定執行個體。</span><span class="sxs-lookup"><span data-stu-id="88a95-113">For Windows performance counters, you can choose a specific instance for each performance counter.</span></span> <span data-ttu-id="88a95-114">對於 Linux 效能計數器，您選擇的每個計數器的執行個體會套用至父計數器的所有子計數器。</span><span class="sxs-lookup"><span data-stu-id="88a95-114">For Linux performance counters, the instance of each counter that you choose applies to all child counters of the parent counter.</span></span> <span data-ttu-id="88a95-115">下表顯示可用於 Linux 和 Windows 效能計數器的常見執行個體。</span><span class="sxs-lookup"><span data-stu-id="88a95-115">The following table shows the common instances available to both Linux and Windows performance counters.</span></span>

| <span data-ttu-id="88a95-116">執行個體名稱</span><span class="sxs-lookup"><span data-stu-id="88a95-116">Instance name</span></span> | <span data-ttu-id="88a95-117">說明</span><span class="sxs-lookup"><span data-stu-id="88a95-117">Description</span></span> |
| --- | --- |
| <span data-ttu-id="88a95-118">\_總計</span><span class="sxs-lookup"><span data-stu-id="88a95-118">\_Total</span></span> |<span data-ttu-id="88a95-119">所有執行個體的總數</span><span class="sxs-lookup"><span data-stu-id="88a95-119">Total of all the instances</span></span> |
| \* |<span data-ttu-id="88a95-120">所有執行個體</span><span class="sxs-lookup"><span data-stu-id="88a95-120">All instances</span></span> |
| <span data-ttu-id="88a95-121">(/&#124;/var)</span><span class="sxs-lookup"><span data-stu-id="88a95-121">(/&#124;/var)</span></span> |<span data-ttu-id="88a95-122">比對名為 / 或 /var 的執行個體</span><span class="sxs-lookup"><span data-stu-id="88a95-122">Matches instances named: / or /var</span></span> |

### <a name="windows-performance-counters"></a><span data-ttu-id="88a95-123">Windows 效能計數器</span><span class="sxs-lookup"><span data-stu-id="88a95-123">Windows performance counters</span></span>

![設定 Windows 效能計數器](media/log-analytics-data-sources-performance-counters/configure-windows.png)

<span data-ttu-id="88a95-125">請遵循此程序以加入要收集的新 Windows 效能計數器。</span><span class="sxs-lookup"><span data-stu-id="88a95-125">Follow this procedure to add a new Windows performance counter to collect.</span></span>

1. <span data-ttu-id="88a95-126">在文字方塊中輸入計數器名稱，格式為 *object(instance)\counter*。</span><span class="sxs-lookup"><span data-stu-id="88a95-126">Type the name of the counter in the text box in the format *object(instance)\counter*.</span></span>  <span data-ttu-id="88a95-127">開始輸入時，您就會看到符合的常用計數器清單。</span><span class="sxs-lookup"><span data-stu-id="88a95-127">When you start typing, you are presented with a matching list of common counters.</span></span>  <span data-ttu-id="88a95-128">您可以從清單中選取計數器，或自行輸入。</span><span class="sxs-lookup"><span data-stu-id="88a95-128">You can either select a counter from the list or type in one of your own.</span></span>  <span data-ttu-id="88a95-129">您也可以指定 *object\counter*，以傳回特定計數器的所有執行個體。</span><span class="sxs-lookup"><span data-stu-id="88a95-129">You can also return all instances for a particular counter by specifying *object\counter*.</span></span>  

    <span data-ttu-id="88a95-130">從具名執行個體收集 SQL Server 效能計數器時，所有具名執行個體的計數器會以 MSSQL$ 作為開頭，後面接著執行個體的名稱。</span><span class="sxs-lookup"><span data-stu-id="88a95-130">When collecting SQL Server performance counters from named instances, all named instance counters start with *MSSQL$* and followed by the name of the instance.</span></span>  <span data-ttu-id="88a95-131">例如，若要從具名 SQL 執行個體 INST2 的資料庫效能物件收集所有資料庫的「記錄快取命中率」計數器，請指定 `MSSQL$INST2:Databases(*)\Log Cache Hit Ratio`。</span><span class="sxs-lookup"><span data-stu-id="88a95-131">For example, to collect the Log Cache Hit Ratio counter for all databases from the Database performance object for named SQL instance INST2, specify `MSSQL$INST2:Databases(*)\Log Cache Hit Ratio`.</span></span>

2. <span data-ttu-id="88a95-132">按一下 **+** 或按 **Enter**，將計數器新增至清單。</span><span class="sxs-lookup"><span data-stu-id="88a95-132">Click **+** or press **Enter** to add the counter to the list.</span></span>
3. <span data-ttu-id="88a95-133">新增計數器時，它會以 10 秒作為 [取樣間隔時間] 的預設值。</span><span class="sxs-lookup"><span data-stu-id="88a95-133">When you add a counter, it uses the default of 10 seconds for its **Sample Interval**.</span></span>  <span data-ttu-id="88a95-134">如果您想要降低所收集之效能資料的儲存需求，可以將此值變更為最多 1800 秒 (30 分鐘)。</span><span class="sxs-lookup"><span data-stu-id="88a95-134">You can change this to a higher value of up to 1800 seconds (30 minutes) if you want to reduce the storage requirements of the collected performance data.</span></span>
4. <span data-ttu-id="88a95-135">加入所要的計數器後，請按一下畫面頂端的 [儲存]  按鈕以儲存設定。</span><span class="sxs-lookup"><span data-stu-id="88a95-135">When you're done adding counters, click the **Save** button at the top of the screen to save the configuration.</span></span>

### <a name="linux-performance-counters"></a><span data-ttu-id="88a95-136">Linux 效能計數器</span><span class="sxs-lookup"><span data-stu-id="88a95-136">Linux performance counters</span></span>

![設定 Linux 效能計數器](media/log-analytics-data-sources-performance-counters/configure-linux.png)

<span data-ttu-id="88a95-138">請遵循此程序以加入要收集的新 Linux 效能計數器。</span><span class="sxs-lookup"><span data-stu-id="88a95-138">Follow this procedure to add a new Linux performance counter to collect.</span></span>

1. <span data-ttu-id="88a95-139">根據預設，所有組態變更都會自動發送給所有代理程式。</span><span class="sxs-lookup"><span data-stu-id="88a95-139">By default, all configuration changes are automatically pushed to all agents.</span></span>  <span data-ttu-id="88a95-140">若是 Linux 代理程式，組態檔會傳送給 Fluentd 資料收集器。</span><span class="sxs-lookup"><span data-stu-id="88a95-140">For Linux agents, a configuration file is sent to the Fluentd data collector.</span></span>  <span data-ttu-id="88a95-141">如果您想在每個 Linux 代理程式上手動修改這個檔案，請取消核取 [將下列設定套用至我的 Linux 機器] 方塊，並遵循下列指引。</span><span class="sxs-lookup"><span data-stu-id="88a95-141">If you wish to modify this file manually on each Linux agent, then uncheck the box *Apply below configuration to my Linux machines* and follow the guidance below.</span></span>
2. <span data-ttu-id="88a95-142">在文字方塊中輸入計數器名稱，格式為 *object(instance)\counter*。</span><span class="sxs-lookup"><span data-stu-id="88a95-142">Type the name of the counter in the text box in the format *object(instance)\counter*.</span></span>  <span data-ttu-id="88a95-143">開始輸入時，您就會看到符合的常用計數器清單。</span><span class="sxs-lookup"><span data-stu-id="88a95-143">When you start typing, you are presented with a matching list of common counters.</span></span>  <span data-ttu-id="88a95-144">您可以從清單中選取計數器，或自行輸入。</span><span class="sxs-lookup"><span data-stu-id="88a95-144">You can either select a counter from the list or type in one of your own.</span></span>  
3. <span data-ttu-id="88a95-145">按一下 **+** 或按 **Enter**，將計數器新增至物件的其他計數器清單。</span><span class="sxs-lookup"><span data-stu-id="88a95-145">Click **+** or press **Enter** to add the counter to the list of other counters for the object.</span></span>
4. <span data-ttu-id="88a95-146">物件的所有計數器都會使用相同的 [取樣間隔時間] 。</span><span class="sxs-lookup"><span data-stu-id="88a95-146">All counters for an object use the same **Sample Interval**.</span></span>  <span data-ttu-id="88a95-147">預設值為 10 秒。</span><span class="sxs-lookup"><span data-stu-id="88a95-147">The default is 10 seconds.</span></span>  <span data-ttu-id="88a95-148">如果您想要降低所收集之效能資料的儲存空間需求，請將此值變更為最多 1800 秒 (30 分鐘)。</span><span class="sxs-lookup"><span data-stu-id="88a95-148">You change this to a higher value of up to 1800 seconds (30 minutes) if you want to reduce the storage requirements of the collected performance data.</span></span>
5. <span data-ttu-id="88a95-149">加入所要的計數器後，請按一下畫面頂端的 [儲存]  按鈕以儲存設定。</span><span class="sxs-lookup"><span data-stu-id="88a95-149">When you're done adding counters, click the **Save** button at the top of the screen to save the configuration.</span></span>

#### <a name="configure-linux-performance-counters-in-configuration-file"></a><span data-ttu-id="88a95-150">在組態檔中設定 Linux 效能計數器</span><span class="sxs-lookup"><span data-stu-id="88a95-150">Configure Linux performance counters in configuration file</span></span>
<span data-ttu-id="88a95-151">除了使用 OMS 入口網站設定 Linux 效能計數器，您還可以選擇在 Linux 代理程式上編輯組態檔。</span><span class="sxs-lookup"><span data-stu-id="88a95-151">Instead of configuring Linux performance counters using the OMS portal, you have the option of editing configuration files on the Linux agent.</span></span>  <span data-ttu-id="88a95-152">要收集的效能計量是由 **/etc/opt/microsoft/omsagent/\<工作區識別碼\>/conf/omsagent.conf** 中的組態所控制。</span><span class="sxs-lookup"><span data-stu-id="88a95-152">Performance metrics to collect are controlled by the configuration in **/etc/opt/microsoft/omsagent/\<workspace id\>/conf/omsagent.conf**.</span></span>

<span data-ttu-id="88a95-153">要收集之效能計量的每個物件或類別都應該當成單一 `<source>` 元素定義於組態檔中。</span><span class="sxs-lookup"><span data-stu-id="88a95-153">Each object, or category, of performance metrics to collect should be defined in the configuration file as a single `<source>` element.</span></span> <span data-ttu-id="88a95-154">語法遵循下面的模式。</span><span class="sxs-lookup"><span data-stu-id="88a95-154">The syntax follows the pattern below.</span></span>

    <source>
      type oms_omi  
      object_name "Processor"
      instance_regex ".*"
      counter_name_regex ".*"
      interval 30s
    </source>


<span data-ttu-id="88a95-155">下表說明此元素中的參數。</span><span class="sxs-lookup"><span data-stu-id="88a95-155">The parameters in this element are described in the following table.</span></span>

| <span data-ttu-id="88a95-156">參數</span><span class="sxs-lookup"><span data-stu-id="88a95-156">Parameters</span></span> | <span data-ttu-id="88a95-157">說明</span><span class="sxs-lookup"><span data-stu-id="88a95-157">Description</span></span> |
|:--|:--|
| <span data-ttu-id="88a95-158">object\_name</span><span class="sxs-lookup"><span data-stu-id="88a95-158">object\_name</span></span> | <span data-ttu-id="88a95-159">收集的物件名稱。</span><span class="sxs-lookup"><span data-stu-id="88a95-159">Object name for the collection.</span></span> |
| <span data-ttu-id="88a95-160">instance\_regex</span><span class="sxs-lookup"><span data-stu-id="88a95-160">instance\_regex</span></span> |  <span data-ttu-id="88a95-161">此「規則運算式」定義要收集的執行個體。</span><span class="sxs-lookup"><span data-stu-id="88a95-161">A *regular expression* defining which instances to collect.</span></span> <span data-ttu-id="88a95-162">值 `.*` 指定所有執行個體。</span><span class="sxs-lookup"><span data-stu-id="88a95-162">The value: `.*` specifies all instances.</span></span> <span data-ttu-id="88a95-163">若只要收集 \_Total 執行個體的處理器計量，您可以指定 `_Total`。</span><span class="sxs-lookup"><span data-stu-id="88a95-163">To collect processor metrics for only the \_Total instance, you could specify `_Total`.</span></span> <span data-ttu-id="88a95-164">若只要收集 crond 或 sshd 執行個體的程序計量，您可以指定：`(crond\\</span><span class="sxs-lookup"><span data-stu-id="88a95-164">To collect process metrics for only the crond or sshd instances, you could specify: `(crond\\</span></span>|<span data-ttu-id="88a95-165">sshd)\`。</span><span class="sxs-lookup"><span data-stu-id="88a95-165">sshd)\`.</span></span> |
| <span data-ttu-id="88a95-166">counter\_name\_regex</span><span class="sxs-lookup"><span data-stu-id="88a95-166">counter\_name\_regex</span></span> | <span data-ttu-id="88a95-167">此「規則運算式」定義要收集的計數器 (針對物件)。</span><span class="sxs-lookup"><span data-stu-id="88a95-167">A *regular expression* defining which counters (for the object) to collect.</span></span> <span data-ttu-id="88a95-168">若要收集物件的所有計數器，請指定︰ `.*`。</span><span class="sxs-lookup"><span data-stu-id="88a95-168">To collect all counters for the object, specify: `.*`.</span></span> <span data-ttu-id="88a95-169">若只要收集記憶體物件的交換空間計數器，舉例來說，您可以指定︰`.+Swap.+`</span><span class="sxs-lookup"><span data-stu-id="88a95-169">To collect only swap space counters for the memory object, for example, you could specify: `.+Swap.+`</span></span> |
| <span data-ttu-id="88a95-170">interval</span><span class="sxs-lookup"><span data-stu-id="88a95-170">interval</span></span> | <span data-ttu-id="88a95-171">物件計數器的收集頻率。</span><span class="sxs-lookup"><span data-stu-id="88a95-171">Frequency at which the object's counters are collected.</span></span> |


<span data-ttu-id="88a95-172">下表列出您可以在組態檔中指定的物件和計數器。</span><span class="sxs-lookup"><span data-stu-id="88a95-172">The following table lists the objects and counters that you can specify in the configuration file.</span></span>  <span data-ttu-id="88a95-173">還有其他計數器適用於特定應用程式，如[在 Log Analytics 中收集 Linux 應用程式的效能計數器](log-analytics-data-sources-linux-applications.md)中所述。</span><span class="sxs-lookup"><span data-stu-id="88a95-173">There are additional counters available for certain applications as described in [Collect performance counters for Linux applications in Log Analytics](log-analytics-data-sources-linux-applications.md).</span></span>

| <span data-ttu-id="88a95-174">物件名稱</span><span class="sxs-lookup"><span data-stu-id="88a95-174">Object Name</span></span> | <span data-ttu-id="88a95-175">計數器名稱</span><span class="sxs-lookup"><span data-stu-id="88a95-175">Counter Name</span></span> |
|:--|:--|
| <span data-ttu-id="88a95-176">Logical Disk</span><span class="sxs-lookup"><span data-stu-id="88a95-176">Logical Disk</span></span> | <span data-ttu-id="88a95-177">% Free Inodes</span><span class="sxs-lookup"><span data-stu-id="88a95-177">% Free Inodes</span></span> |
| <span data-ttu-id="88a95-178">Logical Disk</span><span class="sxs-lookup"><span data-stu-id="88a95-178">Logical Disk</span></span> | <span data-ttu-id="88a95-179">% Free Space</span><span class="sxs-lookup"><span data-stu-id="88a95-179">% Free Space</span></span> |
| <span data-ttu-id="88a95-180">Logical Disk</span><span class="sxs-lookup"><span data-stu-id="88a95-180">Logical Disk</span></span> | <span data-ttu-id="88a95-181">% Used Inodes</span><span class="sxs-lookup"><span data-stu-id="88a95-181">% Used Inodes</span></span> |
| <span data-ttu-id="88a95-182">Logical Disk</span><span class="sxs-lookup"><span data-stu-id="88a95-182">Logical Disk</span></span> | <span data-ttu-id="88a95-183">% Used Space</span><span class="sxs-lookup"><span data-stu-id="88a95-183">% Used Space</span></span> |
| <span data-ttu-id="88a95-184">Logical Disk</span><span class="sxs-lookup"><span data-stu-id="88a95-184">Logical Disk</span></span> | <span data-ttu-id="88a95-185">Disk Read Bytes/sec </span><span class="sxs-lookup"><span data-stu-id="88a95-185">Disk Read Bytes/sec</span></span> |
| <span data-ttu-id="88a95-186">Logical Disk</span><span class="sxs-lookup"><span data-stu-id="88a95-186">Logical Disk</span></span> | <span data-ttu-id="88a95-187">Disk Reads/sec </span><span class="sxs-lookup"><span data-stu-id="88a95-187">Disk Reads/sec</span></span> |
| <span data-ttu-id="88a95-188">Logical Disk</span><span class="sxs-lookup"><span data-stu-id="88a95-188">Logical Disk</span></span> | <span data-ttu-id="88a95-189">Disk Transfers/sec</span><span class="sxs-lookup"><span data-stu-id="88a95-189">Disk Transfers/sec</span></span> |
| <span data-ttu-id="88a95-190">Logical Disk</span><span class="sxs-lookup"><span data-stu-id="88a95-190">Logical Disk</span></span> | <span data-ttu-id="88a95-191">Disk Write Bytes/sec</span><span class="sxs-lookup"><span data-stu-id="88a95-191">Disk Write Bytes/sec</span></span> |
| <span data-ttu-id="88a95-192">Logical Disk</span><span class="sxs-lookup"><span data-stu-id="88a95-192">Logical Disk</span></span> | <span data-ttu-id="88a95-193">Disk Writes/sec</span><span class="sxs-lookup"><span data-stu-id="88a95-193">Disk Writes/sec</span></span> |
| <span data-ttu-id="88a95-194">Logical Disk</span><span class="sxs-lookup"><span data-stu-id="88a95-194">Logical Disk</span></span> | <span data-ttu-id="88a95-195">Free Megabytes</span><span class="sxs-lookup"><span data-stu-id="88a95-195">Free Megabytes</span></span> |
| <span data-ttu-id="88a95-196">Logical Disk</span><span class="sxs-lookup"><span data-stu-id="88a95-196">Logical Disk</span></span> | <span data-ttu-id="88a95-197">Logical Disk Bytes/sec</span><span class="sxs-lookup"><span data-stu-id="88a95-197">Logical Disk Bytes/sec</span></span> |
| <span data-ttu-id="88a95-198">記憶體</span><span class="sxs-lookup"><span data-stu-id="88a95-198">Memory</span></span> | <span data-ttu-id="88a95-199">% Available Memory</span><span class="sxs-lookup"><span data-stu-id="88a95-199">% Available Memory</span></span> |
| <span data-ttu-id="88a95-200">記憶體</span><span class="sxs-lookup"><span data-stu-id="88a95-200">Memory</span></span> | <span data-ttu-id="88a95-201">% Available Swap Space</span><span class="sxs-lookup"><span data-stu-id="88a95-201">% Available Swap Space</span></span> |
| <span data-ttu-id="88a95-202">記憶體</span><span class="sxs-lookup"><span data-stu-id="88a95-202">Memory</span></span> | <span data-ttu-id="88a95-203">% Used Memory</span><span class="sxs-lookup"><span data-stu-id="88a95-203">% Used Memory</span></span> |
| <span data-ttu-id="88a95-204">記憶體</span><span class="sxs-lookup"><span data-stu-id="88a95-204">Memory</span></span> | <span data-ttu-id="88a95-205">% Used Swap Space</span><span class="sxs-lookup"><span data-stu-id="88a95-205">% Used Swap Space</span></span> |
| <span data-ttu-id="88a95-206">記憶體</span><span class="sxs-lookup"><span data-stu-id="88a95-206">Memory</span></span> | <span data-ttu-id="88a95-207">Available MBytes Memory</span><span class="sxs-lookup"><span data-stu-id="88a95-207">Available MBytes Memory</span></span> |
| <span data-ttu-id="88a95-208">記憶體</span><span class="sxs-lookup"><span data-stu-id="88a95-208">Memory</span></span> | <span data-ttu-id="88a95-209">Available MBytes Swap</span><span class="sxs-lookup"><span data-stu-id="88a95-209">Available MBytes Swap</span></span> |
| <span data-ttu-id="88a95-210">記憶體</span><span class="sxs-lookup"><span data-stu-id="88a95-210">Memory</span></span> | <span data-ttu-id="88a95-211">Page Reads/sec</span><span class="sxs-lookup"><span data-stu-id="88a95-211">Page Reads/sec</span></span> |
| <span data-ttu-id="88a95-212">記憶體</span><span class="sxs-lookup"><span data-stu-id="88a95-212">Memory</span></span> | <span data-ttu-id="88a95-213">Page Writes/sec</span><span class="sxs-lookup"><span data-stu-id="88a95-213">Page Writes/sec</span></span> |
| <span data-ttu-id="88a95-214">記憶體</span><span class="sxs-lookup"><span data-stu-id="88a95-214">Memory</span></span> | <span data-ttu-id="88a95-215">Pages/sec</span><span class="sxs-lookup"><span data-stu-id="88a95-215">Pages/sec</span></span> |
| <span data-ttu-id="88a95-216">記憶體</span><span class="sxs-lookup"><span data-stu-id="88a95-216">Memory</span></span> | <span data-ttu-id="88a95-217">Used MBytes Swap Space</span><span class="sxs-lookup"><span data-stu-id="88a95-217">Used MBytes Swap Space</span></span> |
| <span data-ttu-id="88a95-218">記憶體</span><span class="sxs-lookup"><span data-stu-id="88a95-218">Memory</span></span> | <span data-ttu-id="88a95-219">Used Memory MBytes</span><span class="sxs-lookup"><span data-stu-id="88a95-219">Used Memory MBytes</span></span> |
| <span data-ttu-id="88a95-220">網路</span><span class="sxs-lookup"><span data-stu-id="88a95-220">Network</span></span> | <span data-ttu-id="88a95-221">Total Bytes Transmitted</span><span class="sxs-lookup"><span data-stu-id="88a95-221">Total Bytes Transmitted</span></span> |
| <span data-ttu-id="88a95-222">網路</span><span class="sxs-lookup"><span data-stu-id="88a95-222">Network</span></span> | <span data-ttu-id="88a95-223">Total Bytes Received</span><span class="sxs-lookup"><span data-stu-id="88a95-223">Total Bytes Received</span></span> |
| <span data-ttu-id="88a95-224">網路</span><span class="sxs-lookup"><span data-stu-id="88a95-224">Network</span></span> | <span data-ttu-id="88a95-225">Total Bytes</span><span class="sxs-lookup"><span data-stu-id="88a95-225">Total Bytes</span></span> |
| <span data-ttu-id="88a95-226">網路</span><span class="sxs-lookup"><span data-stu-id="88a95-226">Network</span></span> | <span data-ttu-id="88a95-227">Total Packets Transmitted</span><span class="sxs-lookup"><span data-stu-id="88a95-227">Total Packets Transmitted</span></span> |
| <span data-ttu-id="88a95-228">網路</span><span class="sxs-lookup"><span data-stu-id="88a95-228">Network</span></span> | <span data-ttu-id="88a95-229">Total Packets Received</span><span class="sxs-lookup"><span data-stu-id="88a95-229">Total Packets Received</span></span> |
| <span data-ttu-id="88a95-230">網路</span><span class="sxs-lookup"><span data-stu-id="88a95-230">Network</span></span> | <span data-ttu-id="88a95-231">Total Rx Errors</span><span class="sxs-lookup"><span data-stu-id="88a95-231">Total Rx Errors</span></span> |
| <span data-ttu-id="88a95-232">網路</span><span class="sxs-lookup"><span data-stu-id="88a95-232">Network</span></span> | <span data-ttu-id="88a95-233">Total Tx Errors</span><span class="sxs-lookup"><span data-stu-id="88a95-233">Total Tx Errors</span></span> |
| <span data-ttu-id="88a95-234">網路</span><span class="sxs-lookup"><span data-stu-id="88a95-234">Network</span></span> | <span data-ttu-id="88a95-235">Total Collisions</span><span class="sxs-lookup"><span data-stu-id="88a95-235">Total Collisions</span></span> |
| <span data-ttu-id="88a95-236">Physical Disk</span><span class="sxs-lookup"><span data-stu-id="88a95-236">Physical Disk</span></span> | <span data-ttu-id="88a95-237">Avg.</span><span class="sxs-lookup"><span data-stu-id="88a95-237">Avg.</span></span> <span data-ttu-id="88a95-238">Disk sec/Read</span><span class="sxs-lookup"><span data-stu-id="88a95-238">Disk sec/Read</span></span> |
| <span data-ttu-id="88a95-239">Physical Disk</span><span class="sxs-lookup"><span data-stu-id="88a95-239">Physical Disk</span></span> | <span data-ttu-id="88a95-240">Avg.</span><span class="sxs-lookup"><span data-stu-id="88a95-240">Avg.</span></span> <span data-ttu-id="88a95-241">Disk sec/Transfer</span><span class="sxs-lookup"><span data-stu-id="88a95-241">Disk sec/Transfer</span></span> |
| <span data-ttu-id="88a95-242">Physical Disk</span><span class="sxs-lookup"><span data-stu-id="88a95-242">Physical Disk</span></span> | <span data-ttu-id="88a95-243">Avg.</span><span class="sxs-lookup"><span data-stu-id="88a95-243">Avg.</span></span> <span data-ttu-id="88a95-244">Disk sec/Write</span><span class="sxs-lookup"><span data-stu-id="88a95-244">Disk sec/Write</span></span> |
| <span data-ttu-id="88a95-245">Physical Disk</span><span class="sxs-lookup"><span data-stu-id="88a95-245">Physical Disk</span></span> | <span data-ttu-id="88a95-246">Physical Disk Bytes/sec</span><span class="sxs-lookup"><span data-stu-id="88a95-246">Physical Disk Bytes/sec</span></span> |
| <span data-ttu-id="88a95-247">Process</span><span class="sxs-lookup"><span data-stu-id="88a95-247">Process</span></span> | <span data-ttu-id="88a95-248">Pct Privileged Time</span><span class="sxs-lookup"><span data-stu-id="88a95-248">Pct Privileged Time</span></span> |
| <span data-ttu-id="88a95-249">Process</span><span class="sxs-lookup"><span data-stu-id="88a95-249">Process</span></span> | <span data-ttu-id="88a95-250">Pct User Time</span><span class="sxs-lookup"><span data-stu-id="88a95-250">Pct User Time</span></span> |
| <span data-ttu-id="88a95-251">Process</span><span class="sxs-lookup"><span data-stu-id="88a95-251">Process</span></span> | <span data-ttu-id="88a95-252">Used Memory kBytes</span><span class="sxs-lookup"><span data-stu-id="88a95-252">Used Memory kBytes</span></span> |
| <span data-ttu-id="88a95-253">Process</span><span class="sxs-lookup"><span data-stu-id="88a95-253">Process</span></span> | <span data-ttu-id="88a95-254">Virtual Shared Memory</span><span class="sxs-lookup"><span data-stu-id="88a95-254">Virtual Shared Memory</span></span> |
| <span data-ttu-id="88a95-255">處理器</span><span class="sxs-lookup"><span data-stu-id="88a95-255">Processor</span></span> | <span data-ttu-id="88a95-256">% DPC Time</span><span class="sxs-lookup"><span data-stu-id="88a95-256">% DPC Time</span></span> |
| <span data-ttu-id="88a95-257">處理器</span><span class="sxs-lookup"><span data-stu-id="88a95-257">Processor</span></span> | <span data-ttu-id="88a95-258">% Idle Time</span><span class="sxs-lookup"><span data-stu-id="88a95-258">% Idle Time</span></span> |
| <span data-ttu-id="88a95-259">處理器</span><span class="sxs-lookup"><span data-stu-id="88a95-259">Processor</span></span> | <span data-ttu-id="88a95-260">% Interrupt Time</span><span class="sxs-lookup"><span data-stu-id="88a95-260">% Interrupt Time</span></span> |
| <span data-ttu-id="88a95-261">處理器</span><span class="sxs-lookup"><span data-stu-id="88a95-261">Processor</span></span> | <span data-ttu-id="88a95-262">% IO Wait Time</span><span class="sxs-lookup"><span data-stu-id="88a95-262">% IO Wait Time</span></span> |
| <span data-ttu-id="88a95-263">處理器</span><span class="sxs-lookup"><span data-stu-id="88a95-263">Processor</span></span> | <span data-ttu-id="88a95-264">% Nice Time</span><span class="sxs-lookup"><span data-stu-id="88a95-264">% Nice Time</span></span> |
| <span data-ttu-id="88a95-265">處理器</span><span class="sxs-lookup"><span data-stu-id="88a95-265">Processor</span></span> | <span data-ttu-id="88a95-266">% Privileged Time</span><span class="sxs-lookup"><span data-stu-id="88a95-266">% Privileged Time</span></span> |
| <span data-ttu-id="88a95-267">處理器</span><span class="sxs-lookup"><span data-stu-id="88a95-267">Processor</span></span> | <span data-ttu-id="88a95-268">% Processor Time</span><span class="sxs-lookup"><span data-stu-id="88a95-268">% Processor Time</span></span> |
| <span data-ttu-id="88a95-269">處理器</span><span class="sxs-lookup"><span data-stu-id="88a95-269">Processor</span></span> | <span data-ttu-id="88a95-270">% User Time</span><span class="sxs-lookup"><span data-stu-id="88a95-270">% User Time</span></span> |
| <span data-ttu-id="88a95-271">系統</span><span class="sxs-lookup"><span data-stu-id="88a95-271">System</span></span> | <span data-ttu-id="88a95-272">Free Physical Memory</span><span class="sxs-lookup"><span data-stu-id="88a95-272">Free Physical Memory</span></span> |
| <span data-ttu-id="88a95-273">系統</span><span class="sxs-lookup"><span data-stu-id="88a95-273">System</span></span> | <span data-ttu-id="88a95-274">Free Space in Paging Files</span><span class="sxs-lookup"><span data-stu-id="88a95-274">Free Space in Paging Files</span></span> |
| <span data-ttu-id="88a95-275">系統</span><span class="sxs-lookup"><span data-stu-id="88a95-275">System</span></span> | <span data-ttu-id="88a95-276">Free Virtual Memory</span><span class="sxs-lookup"><span data-stu-id="88a95-276">Free Virtual Memory</span></span> |
| <span data-ttu-id="88a95-277">系統</span><span class="sxs-lookup"><span data-stu-id="88a95-277">System</span></span> | <span data-ttu-id="88a95-278">處理序</span><span class="sxs-lookup"><span data-stu-id="88a95-278">Processes</span></span> |
| <span data-ttu-id="88a95-279">系統</span><span class="sxs-lookup"><span data-stu-id="88a95-279">System</span></span> | <span data-ttu-id="88a95-280">Size Stored In Paging Files</span><span class="sxs-lookup"><span data-stu-id="88a95-280">Size Stored In Paging Files</span></span> |
| <span data-ttu-id="88a95-281">系統</span><span class="sxs-lookup"><span data-stu-id="88a95-281">System</span></span> | <span data-ttu-id="88a95-282">Uptime</span><span class="sxs-lookup"><span data-stu-id="88a95-282">Uptime</span></span> |
| <span data-ttu-id="88a95-283">系統</span><span class="sxs-lookup"><span data-stu-id="88a95-283">System</span></span> | <span data-ttu-id="88a95-284">使用者</span><span class="sxs-lookup"><span data-stu-id="88a95-284">Users</span></span> |


<span data-ttu-id="88a95-285">以下是效能計量的預設組態。</span><span class="sxs-lookup"><span data-stu-id="88a95-285">Following is the default configuration for performance metrics.</span></span>

    <source>
      type oms_omi
      object_name "Physical Disk"
      instance_regex ".*"
      counter_name_regex ".*"
      interval 5m
    </source>

    <source>
      type oms_omi
      object_name "Logical Disk"
      instance_regex ".*
      counter_name_regex ".*"
      interval 5m
    </source>

    <source>
      type oms_omi
      object_name "Processor"
      instance_regex ".*
      counter_name_regex ".*"
      interval 30s
    </source>

    <source>
      type oms_omi
      object_name "Memory"
      instance_regex ".*"
      counter_name_regex ".*"
      interval 30s
    </source>

## <a name="data-collection"></a><span data-ttu-id="88a95-286">資料收集</span><span class="sxs-lookup"><span data-stu-id="88a95-286">Data collection</span></span>
<span data-ttu-id="88a95-287">只要代理程式有安裝相關計數器，Log Analytics 就會依照其指定的取樣間隔時間，收集全部代理程式上所有指定的效能計數器。</span><span class="sxs-lookup"><span data-stu-id="88a95-287">Log Analytics collects all specified performance counters at their specified sample interval on all agents that have that counter installed.</span></span>  <span data-ttu-id="88a95-288">資料不彙總，在 OMS 訂用帳戶的指定期間，所有記錄搜尋檢視中都會提供未經處理資料。</span><span class="sxs-lookup"><span data-stu-id="88a95-288">The data is not aggregated, and the raw data is available in all log search views for the duration specified by your OMS subscription.</span></span>

## <a name="performance-record-properties"></a><span data-ttu-id="88a95-289">效能記錄屬性</span><span class="sxs-lookup"><span data-stu-id="88a95-289">Performance record properties</span></span>
<span data-ttu-id="88a95-290">效能記錄都具有 **Perf** 類型以及下表中的屬性。</span><span class="sxs-lookup"><span data-stu-id="88a95-290">Performance records have a type of **Perf** and have the properties in the following table.</span></span>

| <span data-ttu-id="88a95-291">屬性</span><span class="sxs-lookup"><span data-stu-id="88a95-291">Property</span></span> | <span data-ttu-id="88a95-292">說明</span><span class="sxs-lookup"><span data-stu-id="88a95-292">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="88a95-293">電腦</span><span class="sxs-lookup"><span data-stu-id="88a95-293">Computer</span></span> |<span data-ttu-id="88a95-294">收集事件的來源電腦。</span><span class="sxs-lookup"><span data-stu-id="88a95-294">Computer that the event was collected from.</span></span> |
| <span data-ttu-id="88a95-295">CounterName</span><span class="sxs-lookup"><span data-stu-id="88a95-295">CounterName</span></span> |<span data-ttu-id="88a95-296">效能計數器的名稱</span><span class="sxs-lookup"><span data-stu-id="88a95-296">Name of the performance counter</span></span> |
| <span data-ttu-id="88a95-297">CounterPath</span><span class="sxs-lookup"><span data-stu-id="88a95-297">CounterPath</span></span> |<span data-ttu-id="88a95-298">計數器的完整路徑，格式為 \\\\\<電腦>\\object(instance)\\counter。</span><span class="sxs-lookup"><span data-stu-id="88a95-298">Full path of the counter in the form \\\\\<Computer>\\object(instance)\\counter.</span></span> |
| <span data-ttu-id="88a95-299">CounterValue</span><span class="sxs-lookup"><span data-stu-id="88a95-299">CounterValue</span></span> |<span data-ttu-id="88a95-300">計數器的數值。</span><span class="sxs-lookup"><span data-stu-id="88a95-300">Numeric value of the counter.</span></span> |
| <span data-ttu-id="88a95-301">InstanceName</span><span class="sxs-lookup"><span data-stu-id="88a95-301">InstanceName</span></span> |<span data-ttu-id="88a95-302">事件執行個體的名稱。</span><span class="sxs-lookup"><span data-stu-id="88a95-302">Name of the event instance.</span></span>  <span data-ttu-id="88a95-303">如果沒有執行個體即為空白。</span><span class="sxs-lookup"><span data-stu-id="88a95-303">Empty if no instance.</span></span> |
| <span data-ttu-id="88a95-304">ObjectName</span><span class="sxs-lookup"><span data-stu-id="88a95-304">ObjectName</span></span> |<span data-ttu-id="88a95-305">效能物件的名稱</span><span class="sxs-lookup"><span data-stu-id="88a95-305">Name of the performance object</span></span> |
| <span data-ttu-id="88a95-306">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="88a95-306">SourceSystem</span></span> |<span data-ttu-id="88a95-307">收集資料的來源代理程式類型。</span><span class="sxs-lookup"><span data-stu-id="88a95-307">Type of agent the data was collected from.</span></span> <br><br><span data-ttu-id="88a95-308">OpsManager – Windows 代理程式，直接連接或 SCOM</span><span class="sxs-lookup"><span data-stu-id="88a95-308">OpsManager – Windows agent, either direct connect or SCOM</span></span> <br> <span data-ttu-id="88a95-309">Linux – 所有的 Linux 代理程式</span><span class="sxs-lookup"><span data-stu-id="88a95-309">Linux – All Linux agents</span></span>  <br> <span data-ttu-id="88a95-310">AzureStorage – Azure 診斷</span><span class="sxs-lookup"><span data-stu-id="88a95-310">AzureStorage – Azure Diagnostics</span></span> |
| <span data-ttu-id="88a95-311">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="88a95-311">TimeGenerated</span></span> |<span data-ttu-id="88a95-312">資料取樣的日期和時間。</span><span class="sxs-lookup"><span data-stu-id="88a95-312">Date and time the data was sampled.</span></span> |

## <a name="sizing-estimates"></a><span data-ttu-id="88a95-313">大小估計值</span><span class="sxs-lookup"><span data-stu-id="88a95-313">Sizing estimates</span></span>
 <span data-ttu-id="88a95-314">特定計數器集合的約略估計是依照每個執行個體 10 秒間隔，每天約 1 MB。</span><span class="sxs-lookup"><span data-stu-id="88a95-314">A rough estimate for collection of a particular counter at 10-second intervals is about 1 MB per day per instance.</span></span>  <span data-ttu-id="88a95-315">您可以使用下列公式，評估特定計數器的儲存需求。</span><span class="sxs-lookup"><span data-stu-id="88a95-315">You can estimate the storage requirements of a particular counter with the following formula.</span></span>

    1 MB x (number of counters) x (number of agents) x (number of instances)

## <a name="log-searches-with-performance-records"></a><span data-ttu-id="88a95-316">記錄搜尋與效能記錄</span><span class="sxs-lookup"><span data-stu-id="88a95-316">Log searches with Performance records</span></span>
<span data-ttu-id="88a95-317">下表提供擷取效能記錄的不同記錄搜尋範例。</span><span class="sxs-lookup"><span data-stu-id="88a95-317">The following table provides different examples of log searches that retrieve Performance records.</span></span>

| <span data-ttu-id="88a95-318">查詢</span><span class="sxs-lookup"><span data-stu-id="88a95-318">Query</span></span> | <span data-ttu-id="88a95-319">說明</span><span class="sxs-lookup"><span data-stu-id="88a95-319">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="88a95-320">Type=Perf</span><span class="sxs-lookup"><span data-stu-id="88a95-320">Type=Perf</span></span> |<span data-ttu-id="88a95-321">所有效能資料</span><span class="sxs-lookup"><span data-stu-id="88a95-321">All Performance data</span></span> |
| <span data-ttu-id="88a95-322">Type=Perf Computer="MyComputer"</span><span class="sxs-lookup"><span data-stu-id="88a95-322">Type=Perf Computer="MyComputer"</span></span> |<span data-ttu-id="88a95-323">來自特定電腦的所有效能資料</span><span class="sxs-lookup"><span data-stu-id="88a95-323">All Performance data from a particular computer</span></span> |
| <span data-ttu-id="88a95-324">Type=Perf CounterName="Current Disk Queue Length"</span><span class="sxs-lookup"><span data-stu-id="88a95-324">Type=Perf CounterName="Current Disk Queue Length"</span></span> |<span data-ttu-id="88a95-325">來自特定計數器的所有效能資料</span><span class="sxs-lookup"><span data-stu-id="88a95-325">All Performance data for a particular counter</span></span> |
| <span data-ttu-id="88a95-326">Type=Perf (ObjectName=Processor) CounterName="% Processor Time" InstanceName=_Total &#124; measure Avg(Average) as AVGCPU  by Computer</span><span class="sxs-lookup"><span data-stu-id="88a95-326">Type=Perf (ObjectName=Processor) CounterName="% Processor Time" InstanceName=_Total &#124; measure Avg(Average) as AVGCPU  by Computer</span></span> |<span data-ttu-id="88a95-327">所有電腦的平均 CPU 使用率</span><span class="sxs-lookup"><span data-stu-id="88a95-327">Average CPU Utilization across all computers</span></span> |
| <span data-ttu-id="88a95-328">Type=Perf (CounterName="% Processor Time") &#124;  measure max(Max) by Computer</span><span class="sxs-lookup"><span data-stu-id="88a95-328">Type=Perf (CounterName="% Processor Time") &#124;  measure max(Max) by Computer</span></span> |<span data-ttu-id="88a95-329">所有電腦的最大 CPU 使用率</span><span class="sxs-lookup"><span data-stu-id="88a95-329">Maximum CPU Utilization across all computers</span></span> |
| <span data-ttu-id="88a95-330">Type=Perf ObjectName=LogicalDisk CounterName="Current Disk Queue Length" Computer="MyComputerName" &#124; measure Avg(Average) by InstanceName</span><span class="sxs-lookup"><span data-stu-id="88a95-330">Type=Perf ObjectName=LogicalDisk CounterName="Current Disk Queue Length" Computer="MyComputerName" &#124; measure Avg(Average) by InstanceName</span></span> |<span data-ttu-id="88a95-331">指定電腦之所有執行個體的平均目前磁碟佇列長度</span><span class="sxs-lookup"><span data-stu-id="88a95-331">Average Current Disk Queue length across all  the instances of a given computer</span></span> |
| <span data-ttu-id="88a95-332">Type=Perf CounterName="DiskTransfers/sec" &#124; measure percentile95(Average) by Computer</span><span class="sxs-lookup"><span data-stu-id="88a95-332">Type=Perf CounterName="DiskTransfers/sec" &#124; measure percentile95(Average) by Computer</span></span> |<span data-ttu-id="88a95-333">所有電腦之第 95 個百分位數的 Disk Transfers/Sec</span><span class="sxs-lookup"><span data-stu-id="88a95-333">95th Percentile of Disk Transfers/Sec across all computers</span></span> |
| <span data-ttu-id="88a95-334">Type=Perf CounterName="% Processor Time" InstanceName="_Total"  &#124; measure avg(CounterValue) by Computer Interval 1HOUR</span><span class="sxs-lookup"><span data-stu-id="88a95-334">Type=Perf CounterName="% Processor Time" InstanceName="_Total"  &#124; measure avg(CounterValue) by Computer Interval 1HOUR</span></span> |<span data-ttu-id="88a95-335">所有電腦每小時平均 CPU 使用率</span><span class="sxs-lookup"><span data-stu-id="88a95-335">Hourly average of CPU usage across all computers</span></span> |
| <span data-ttu-id="88a95-336">Type=Perf Computer="MyComputer" CounterName=%* InstanceName=_Total &#124; measure percentile70(CounterValue) by CounterName Interval 1HOUR</span><span class="sxs-lookup"><span data-stu-id="88a95-336">Type=Perf Computer="MyComputer" CounterName=%* InstanceName=_Total &#124; measure percentile70(CounterValue) by CounterName Interval 1HOUR</span></span> |<span data-ttu-id="88a95-337">特定電腦每小時每個 % 百分比計數器的 70 個百分位數</span><span class="sxs-lookup"><span data-stu-id="88a95-337">Hourly 70 percentile of every % percent counter for a particular computer</span></span> |
| <span data-ttu-id="88a95-338">Type=Perf CounterName="% Processor Time" InstanceName="_Total"  (Computer="MyComputer") &#124; measure min(CounterValue), avg(CounterValue), percentile75(CounterValue), max(CounterValue) by Computer Interval 1HOUR</span><span class="sxs-lookup"><span data-stu-id="88a95-338">Type=Perf CounterName="% Processor Time" InstanceName="_Total"  (Computer="MyComputer") &#124; measure min(CounterValue), avg(CounterValue), percentile75(CounterValue), max(CounterValue) by Computer Interval 1HOUR</span></span> |<span data-ttu-id="88a95-339">特定電腦每小時平均、最小、最大和 75 個百分位數的 CPU 使用量</span><span class="sxs-lookup"><span data-stu-id="88a95-339">Hourly average, minimum, maximum, and 75-percentile CPU usage for a specific computer</span></span> |
| <span data-ttu-id="88a95-340">Type=Perf ObjectName="MSSQL$INST2:Databases" InstanceName=master</span><span class="sxs-lookup"><span data-stu-id="88a95-340">Type=Perf ObjectName="MSSQL$INST2:Databases" InstanceName=master</span></span> | <span data-ttu-id="88a95-341">資料庫效能物件中的所有效能資料適用於來自具名 SQL Server 執行個體 INST2 的 master 資料庫。</span><span class="sxs-lookup"><span data-stu-id="88a95-341">All Performance data from the Database performance object for the master database from the named SQL Server instance INST2.</span></span>  

>[!NOTE]
> <span data-ttu-id="88a95-342">如果您的工作區已升級為[新的 Log Analytics 查詢語言](log-analytics-log-search-upgrade.md)，則以上查詢會變更如下。</span><span class="sxs-lookup"><span data-stu-id="88a95-342">If your workspace has been upgraded to the [new Log Analytics query language](log-analytics-log-search-upgrade.md), then the above queries would change to the following.</span></span>

> | <span data-ttu-id="88a95-343">查詢</span><span class="sxs-lookup"><span data-stu-id="88a95-343">Query</span></span> | <span data-ttu-id="88a95-344">說明</span><span class="sxs-lookup"><span data-stu-id="88a95-344">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="88a95-345">Perf</span><span class="sxs-lookup"><span data-stu-id="88a95-345">Perf</span></span> |<span data-ttu-id="88a95-346">所有效能資料</span><span class="sxs-lookup"><span data-stu-id="88a95-346">All Performance data</span></span> |
| <span data-ttu-id="88a95-347">Perf &#124; where Computer == "MyComputer"</span><span class="sxs-lookup"><span data-stu-id="88a95-347">Perf &#124; where Computer == "MyComputer"</span></span> |<span data-ttu-id="88a95-348">來自特定電腦的所有效能資料</span><span class="sxs-lookup"><span data-stu-id="88a95-348">All Performance data from a particular computer</span></span> |
| <span data-ttu-id="88a95-349">Perf &#124; where CounterName == "Current Disk Queue Length"</span><span class="sxs-lookup"><span data-stu-id="88a95-349">Perf &#124; where CounterName == "Current Disk Queue Length"</span></span> |<span data-ttu-id="88a95-350">來自特定計數器的所有效能資料</span><span class="sxs-lookup"><span data-stu-id="88a95-350">All Performance data for a particular counter</span></span> |
| <span data-ttu-id="88a95-351">Perf &#124; where ObjectName == "Processor" and CounterName == "% Processor Time" and InstanceName == "_Total" &#124; summarize AVGCPU = avg(Average) by Computer</span><span class="sxs-lookup"><span data-stu-id="88a95-351">Perf &#124; where ObjectName == "Processor" and CounterName == "% Processor Time" and InstanceName == "_Total" &#124; summarize AVGCPU = avg(Average) by Computer</span></span> |<span data-ttu-id="88a95-352">所有電腦的平均 CPU 使用率</span><span class="sxs-lookup"><span data-stu-id="88a95-352">Average CPU Utilization across all computers</span></span> |
| <span data-ttu-id="88a95-353">Perf &#124; where CounterName == "% Processor Time" &#124; summarize AggregatedValue = max(Max) by Computer</span><span class="sxs-lookup"><span data-stu-id="88a95-353">Perf &#124; where CounterName == "% Processor Time" &#124; summarize AggregatedValue = max(Max) by Computer</span></span> |<span data-ttu-id="88a95-354">所有電腦的最大 CPU 使用率</span><span class="sxs-lookup"><span data-stu-id="88a95-354">Maximum CPU Utilization across all computers</span></span> |
| <span data-ttu-id="88a95-355">Perf &#124; where ObjectName == "LogicalDisk" and CounterName == "Current Disk Queue Length" and Computer == "MyComputerName" &#124; summarize AggregatedValue = avg(Average) by InstanceName</span><span class="sxs-lookup"><span data-stu-id="88a95-355">Perf &#124; where ObjectName == "LogicalDisk" and CounterName == "Current Disk Queue Length" and Computer == "MyComputerName" &#124; summarize AggregatedValue = avg(Average) by InstanceName</span></span> |<span data-ttu-id="88a95-356">指定電腦之所有執行個體的平均目前磁碟佇列長度</span><span class="sxs-lookup"><span data-stu-id="88a95-356">Average Current Disk Queue length across all  the instances of a given computer</span></span> |
| <span data-ttu-id="88a95-357">Perf &#124; where CounterName == "DiskTransfers/sec" &#124; summarize AggregatedValue = percentile(Average, 95) by Computer</span><span class="sxs-lookup"><span data-stu-id="88a95-357">Perf &#124; where CounterName == "DiskTransfers/sec" &#124; summarize AggregatedValue = percentile(Average, 95) by Computer</span></span> |<span data-ttu-id="88a95-358">所有電腦之第 95 個百分位數的 Disk Transfers/Sec</span><span class="sxs-lookup"><span data-stu-id="88a95-358">95th Percentile of Disk Transfers/Sec across all computers</span></span> |
| <span data-ttu-id="88a95-359">Perf &#124; where CounterName == "% Processor Time" and InstanceName == "_Total" &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), Computer</span><span class="sxs-lookup"><span data-stu-id="88a95-359">Perf &#124; where CounterName == "% Processor Time" and InstanceName == "_Total" &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), Computer</span></span> |<span data-ttu-id="88a95-360">所有電腦每小時平均 CPU 使用率</span><span class="sxs-lookup"><span data-stu-id="88a95-360">Hourly average of CPU usage across all computers</span></span> |
| <span data-ttu-id="88a95-361">Perf &#124; where Computer == "MyComputer" and CounterName startswith_cs "%" and InstanceName == "_Total" &#124; summarize AggregatedValue = percentile(CounterValue, 70) by bin(TimeGenerated, 1h), CounterName</span><span class="sxs-lookup"><span data-stu-id="88a95-361">Perf &#124; where Computer == "MyComputer" and CounterName startswith_cs "%" and InstanceName == "_Total" &#124; summarize AggregatedValue = percentile(CounterValue, 70) by bin(TimeGenerated, 1h), CounterName</span></span> | <span data-ttu-id="88a95-362">特定電腦每小時每個 % 百分比計數器的 70 個百分位數</span><span class="sxs-lookup"><span data-stu-id="88a95-362">Hourly 70 percentile of every % percent counter for a particular computer</span></span> |
| <span data-ttu-id="88a95-363">Perf &#124; where CounterName == "% Processor Time" and InstanceName == "_Total" and Computer == "MyComputer" &#124; summarize ["min(CounterValue)"] = min(CounterValue), ["avg(CounterValue)"] = avg(CounterValue), ["percentile75(CounterValue)"] = percentile(CounterValue, 75), ["max(CounterValue)"] = max(CounterValue) by bin(TimeGenerated, 1h), Computer</span><span class="sxs-lookup"><span data-stu-id="88a95-363">Perf &#124; where CounterName == "% Processor Time" and InstanceName == "_Total" and Computer == "MyComputer" &#124; summarize ["min(CounterValue)"] = min(CounterValue), ["avg(CounterValue)"] = avg(CounterValue), ["percentile75(CounterValue)"] = percentile(CounterValue, 75), ["max(CounterValue)"] = max(CounterValue) by bin(TimeGenerated, 1h), Computer</span></span> |<span data-ttu-id="88a95-364">特定電腦每小時平均、最小、最大和 75 個百分位數的 CPU 使用量</span><span class="sxs-lookup"><span data-stu-id="88a95-364">Hourly average, minimum, maximum, and 75-percentile CPU usage for a specific computer</span></span> |
| <span data-ttu-id="88a95-365">Perf &#124; where ObjectName == "MSSQL$INST2:Databases" and InstanceName == "master"</span><span class="sxs-lookup"><span data-stu-id="88a95-365">Perf &#124; where ObjectName == "MSSQL$INST2:Databases" and InstanceName == "master"</span></span> | <span data-ttu-id="88a95-366">資料庫效能物件中的所有效能資料適用於來自具名 SQL Server 執行個體 INST2 的 master 資料庫。</span><span class="sxs-lookup"><span data-stu-id="88a95-366">All Performance data from the Database performance object for the master database from the named SQL Server instance INST2.</span></span>  

## <a name="viewing-performance-data"></a><span data-ttu-id="88a95-367">檢視效能資料</span><span class="sxs-lookup"><span data-stu-id="88a95-367">Viewing performance data</span></span>
<span data-ttu-id="88a95-368">在執行效能資料的記錄搜尋時，預設會顯示 [清單] 檢視。</span><span class="sxs-lookup"><span data-stu-id="88a95-368">When you run a log search for performance data, the **List** view is displayed by default.</span></span>  <span data-ttu-id="88a95-369">若要以圖形形式檢視資料，請按一下 [計量]。</span><span class="sxs-lookup"><span data-stu-id="88a95-369">To view the data in graphical form, click **Metrics**.</span></span>  <span data-ttu-id="88a95-370">如需詳細的圖形檢視，請按一下計數器旁的 **+**。</span><span class="sxs-lookup"><span data-stu-id="88a95-370">For a detailed graphical view, click the **+** next to a counter.</span></span>  

![摺疊的計量檢視](media/log-analytics-data-sources-performance-counters/metricscollapsed.png)

<span data-ttu-id="88a95-372">若要彙總記錄搜尋中的效能資料，請參閱[在 OMS 中隨需彙總和視覺化度量](http://blogs.technet.microsoft.com/msoms/2016/02/26/on-demand-metric-aggregation-and-visualization-in-oms/)。</span><span class="sxs-lookup"><span data-stu-id="88a95-372">To aggregate performance data in a log search, see [On-demand metric aggregation and visualization in OMS](http://blogs.technet.microsoft.com/msoms/2016/02/26/on-demand-metric-aggregation-and-visualization-in-oms/).</span></span>


## <a name="next-steps"></a><span data-ttu-id="88a95-373">後續步驟</span><span class="sxs-lookup"><span data-stu-id="88a95-373">Next steps</span></span>
* <span data-ttu-id="88a95-374">[從 Linux 應用程式收集效能計數器](log-analytics-data-sources-linux-applications.md)，包括 MySQL 和 Apache HTTP Server。</span><span class="sxs-lookup"><span data-stu-id="88a95-374">[Collect performance counters from Linux applications](log-analytics-data-sources-linux-applications.md) including MySQL and Apache HTTP Server.</span></span>
* <span data-ttu-id="88a95-375">了解 [記錄搜尋](log-analytics-log-searches.md) ，其可分析從資料來源和方案所收集的資料。</span><span class="sxs-lookup"><span data-stu-id="88a95-375">Learn about [log searches](log-analytics-log-searches.md) to analyze the data collected from data sources and solutions.</span></span>  
* <span data-ttu-id="88a95-376">將收集的資料匯出至 [Power BI](log-analytics-powerbi.md) 以進行其他視覺效果和分析。</span><span class="sxs-lookup"><span data-stu-id="88a95-376">Export collected data to [Power BI](log-analytics-powerbi.md) for additional visualizations and analysis.</span></span>
