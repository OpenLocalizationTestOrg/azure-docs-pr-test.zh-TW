---
title: "aaaNetwork 中 Azure 記錄分析的效能監視器解決方案 |Microsoft 文件"
description: "網路效能監視器中 Azure Log Analytics 可協助您監視您網路中靠近即時單次 toodetect hello 效能，並找出網路效能瓶頸。"
services: log-analytics
documentationcenter: 
author: bandersmsft
manager: carmonm
editor: 
ms.assetid: 5b9c9c83-3435-488c-b4f6-7653003ae18a
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: banders
ms.openlocfilehash: e074948221fdd003c640861d759c4ce69ced1cd7
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/06/2017
---
# <a name="network-performance-monitor-solution-in-log-analytics"></a><span data-ttu-id="7106f-103">Log Analytics 中的網路效能監視器解決方案</span><span class="sxs-lookup"><span data-stu-id="7106f-103">Network Performance Monitor solution in Log Analytics</span></span>

![網路效能監控符號](./media/log-analytics-network-performance-monitor/npm-symbol.png)

<span data-ttu-id="7106f-105">本文件說明如何 tooset 向上和向下使用 hello 網路效能監視器方案中記錄分析，可協助您監視您網路中靠近即時單次 toodetect hello 效能，並找出網路效能瓶頸。</span><span class="sxs-lookup"><span data-stu-id="7106f-105">This document describes how tooset-up and use hello Network Performance Monitor solution in Log Analytics, which helps you monitor hello performance of your networks-in near real-time-toodetect and locate network performance bottlenecks.</span></span> <span data-ttu-id="7106f-106">以 hello 網路效能監視器方案，您可以監視 hello 中斷和子網路或伺服器的兩個網路之間的延遲。</span><span class="sxs-lookup"><span data-stu-id="7106f-106">With hello Network Performance Monitor solution, you can monitor hello loss and latency between two networks, subnets or servers.</span></span> <span data-ttu-id="7106f-107">網路效能監視器會偵測網路問題，例如流量 blackholing、 路由錯誤，以及傳統網路監視的方法不能 toodetect 的問題。</span><span class="sxs-lookup"><span data-stu-id="7106f-107">Network Performance Monitor detects network issues like traffic blackholing, routing errors, and issues that conventional network monitoring methods are not able toodetect.</span></span> <span data-ttu-id="7106f-108">網路效能監視器會產生警示，並違反網路連結的臨界值時發生通知。</span><span class="sxs-lookup"><span data-stu-id="7106f-108">Network Performance Monitor generates alerts and notifies as and when a threshold is breached for a network link.</span></span> <span data-ttu-id="7106f-109">這些閾值可以自動學習 hello 系統或您可以設定它們 toouse 自訂警示規則。</span><span class="sxs-lookup"><span data-stu-id="7106f-109">These thresholds can be learned automatically by hello system or you can configure them toouse custom alert rules.</span></span> <span data-ttu-id="7106f-110">網路效能監視器可確保及時偵測的網路效能問題和當地語系化 hello 問題 tooa 特定網路區段或裝置 hello 來源。</span><span class="sxs-lookup"><span data-stu-id="7106f-110">Network Performance Monitor ensures timely detection of network performance issues and localizes hello source of hello problem tooa particular network segment or device.</span></span>

<span data-ttu-id="7106f-111">您可以偵測到與 hello 方案儀表板會顯示摘要的資訊，包括最近使用的網路健全狀況事件、 狀況不良的網路連結和子網路連結遇到高的封包中斷和延遲的網路相關的網路問題。</span><span class="sxs-lookup"><span data-stu-id="7106f-111">You can detect network issues with hello solution dashboard which displays summarized information about your network including recent network health events, unhealthy network links, and subnetwork links that are facing high packet loss and latency.</span></span> <span data-ttu-id="7106f-112">您可以向下鑽研功能網路連結 tooview hello 目前健全狀況狀態的子網路連結，以及節點對節點連結。</span><span class="sxs-lookup"><span data-stu-id="7106f-112">You can drill-down into a network link tooview hello current health status of subnetwork links as well as node-to-node links.</span></span> <span data-ttu-id="7106f-113">您也可以檢視 hello 的中斷和延遲在 hello 網路、 子網路及節點對節點層級的歷史趨勢。</span><span class="sxs-lookup"><span data-stu-id="7106f-113">You can also view hello historical trend of loss and latency at hello network, subnetwork, and node-to-node level.</span></span> <span data-ttu-id="7106f-114">您可以藉由檢視封包遺失和延遲的歷史趨勢圖表來偵測暫時性網路問題，並找出拓撲圖上的網路瓶頸。</span><span class="sxs-lookup"><span data-stu-id="7106f-114">You can detect transient network issues by viewing historical trend charts for packet loss and latency and locate network bottlenecks on a topology map.</span></span> <span data-ttu-id="7106f-115">hello 互動式拓撲圖表可讓您 toovisualize hello 躍點的躍點的網路路由，並判斷 hello hello 問題來源。</span><span class="sxs-lookup"><span data-stu-id="7106f-115">hello interactive topology graph allows you toovisualize hello hop-by-hop network routes and determine hello source of hello problem.</span></span> <span data-ttu-id="7106f-116">像任何其他方案，您可以使用各種分析記錄搜尋需求 toocreate 自訂報告根據網路效能監視器所收集的 hello 資料。</span><span class="sxs-lookup"><span data-stu-id="7106f-116">Like any other solutions, you can use Log Search for various analytics requirements toocreate custom reports based on hello data collected by Network Performance Monitor.</span></span>

<span data-ttu-id="7106f-117">hello 解決方案使用綜合交易當做主要機制 toodetect 網路錯誤。</span><span class="sxs-lookup"><span data-stu-id="7106f-117">hello solution uses synthetic transactions as a primary mechanism toodetect network faults.</span></span> <span data-ttu-id="7106f-118">因此，您可以使用它，而不需考慮特定網路裝置的廠商或模型。</span><span class="sxs-lookup"><span data-stu-id="7106f-118">So, you can use it without regard for a specific network device's vendor or model.</span></span> <span data-ttu-id="7106f-119">其適用於內部部署、雲端 (IaaS) 和混合式環境。</span><span class="sxs-lookup"><span data-stu-id="7106f-119">It works across on-premises, cloud (IaaS), and hybrid environments.</span></span> <span data-ttu-id="7106f-120">hello 方案會自動探索 hello 網路拓撲和網路中的各種路由。</span><span class="sxs-lookup"><span data-stu-id="7106f-120">hello solution automatically discovers hello network topology and various routes in your network.</span></span>

<span data-ttu-id="7106f-121">一般網路監視產品著重在監視 hello 網路裝置 （路由器、 交換器等等） 的健全狀況，但不是提供深入了解 hello 實際品質之間沒有網路效能監視器中的兩個點的網路連線。</span><span class="sxs-lookup"><span data-stu-id="7106f-121">Typical network monitoring products focus on monitoring hello network device (routers, switches etc.) health but do not provide insights into hello actual quality of network connectivity between two points, which Network Performance Monitor does.</span></span>

### <a name="using-hello-solution-standalone"></a><span data-ttu-id="7106f-122">使用 hello 方案獨立</span><span class="sxs-lookup"><span data-stu-id="7106f-122">Using hello solution standalone</span></span>
<span data-ttu-id="7106f-123">如果您想 toomonitor hello 品質重要的工作負載之間的網路連線時，網路、 資料中心或站台，然後您可以使用 hello 網路效能監視器方案本身 toomonitor 之間的連線健全狀況：</span><span class="sxs-lookup"><span data-stu-id="7106f-123">If you want toomonitor hello quality of network connections between their critical workloads, networks, datacenters or office sites, then you can use hello Network Performance Monitor solution by itself toomonitor connectivity health between:</span></span>

* <span data-ttu-id="7106f-124">使用公用或私人網路連接的多個資料中心或公司網站</span><span class="sxs-lookup"><span data-stu-id="7106f-124">multiple datacenters or office sites that are connected using a public or private network</span></span>
* <span data-ttu-id="7106f-125">執行企業營運應用程式的重要工作負載</span><span class="sxs-lookup"><span data-stu-id="7106f-125">critical workloads that are running line of business applications</span></span>
* <span data-ttu-id="7106f-126">公用雲端服務，例如 Microsoft Azure 或 Amazon Web Services (AWS) 和內部部署網路，如果您有 IaaS (VM) 使用，而且您有閘道設定 tooallow 在內部部署網路和雲端網路之間的通訊</span><span class="sxs-lookup"><span data-stu-id="7106f-126">public cloud services like Microsoft Azure or Amazon Web Services (AWS) and on-premises networks, if you have IaaS (VM) available and you have gateways configured tooallow communication between on-premises networks and cloud networks</span></span>
* <span data-ttu-id="7106f-127">當您使用 ExpressRoute 時的 Azure 與內部部署網路</span><span class="sxs-lookup"><span data-stu-id="7106f-127">Azure and on-premises networks when you use Express Route</span></span>

### <a name="using-hello-solution-with-other-networking-tools"></a><span data-ttu-id="7106f-128">搭配其他網路功能的工具使用 hello 方案</span><span class="sxs-lookup"><span data-stu-id="7106f-128">Using hello solution with other networking tools</span></span>
<span data-ttu-id="7106f-129">如果您想 toomonitor 企業營運應用程式，您可以使用網路效能監視器方案 hello 附屬方案 tooother 網路工具。</span><span class="sxs-lookup"><span data-stu-id="7106f-129">If you want toomonitor a line of business application, you can use hello Network Performance Monitor solution as a companion solution tooother network tools.</span></span> <span data-ttu-id="7106f-130">較慢的網路可能會導致 tooslow 應用程式和網路效能監視器可協助您調查應用程式基礎網路問題所造成的效能問題。</span><span class="sxs-lookup"><span data-stu-id="7106f-130">A slow network can lead tooslow applications and Network Performance Monitor can help you investigate application performance issues that are caused by underlying networking issues.</span></span> <span data-ttu-id="7106f-131">Hello 方案不需要任何存取 toonetwork 裝置，因為 hello 應用程式系統管理員不需要 toorely hello 網路如何影響應用程式的相關網路小組 tooprovide 資訊。</span><span class="sxs-lookup"><span data-stu-id="7106f-131">Because hello solution does not require any access toonetwork devices, hello application administrator doesn't need toorely on a networking team tooprovide information about how hello network is affecting applications.</span></span>

<span data-ttu-id="7106f-132">此外，如果您已投資在其他網路監視工具，然後 hello 方案可以補充這些工具因為大部分傳統網路監視解決方案不提供端對端網路效能計量，例如中斷和延遲的深入剖析。</span><span class="sxs-lookup"><span data-stu-id="7106f-132">Also, if you already invest in other network monitoring tools, then hello solution can complement those tools because most traditional network monitoring solutions do not provide insights into end-to-end network performance metrics like loss and latency.</span></span>  <span data-ttu-id="7106f-133">hello 網路效能監視器解決方案可協助填滿，兩者的差異。</span><span class="sxs-lookup"><span data-stu-id="7106f-133">hello Network Performance Monitor solution can help fill that gap.</span></span>

## <a name="installing-and-configuring-agents-for-hello-solution"></a><span data-ttu-id="7106f-134">安裝和設定 hello 解決方案的代理程式</span><span class="sxs-lookup"><span data-stu-id="7106f-134">Installing and configuring agents for hello solution</span></span>
<span data-ttu-id="7106f-135">使用 hello 基本程序 tooinstall 代理程式在[連接的 Windows 電腦 tooLog 分析](log-analytics-windows-agents.md)和[Operations Manager 連線 tooLog 分析](log-analytics-om-agents.md)。</span><span class="sxs-lookup"><span data-stu-id="7106f-135">Use hello basic processes tooinstall agents at [Connect Windows computers tooLog Analytics](log-analytics-windows-agents.md) and [Connect Operations Manager tooLog Analytics](log-analytics-om-agents.md).</span></span>

> [!NOTE]
> <span data-ttu-id="7106f-136">您將需要足夠的資料 toodiscover tooinstall 至少 2 toohave 順序中的代理程式，並監視您的網路資源。</span><span class="sxs-lookup"><span data-stu-id="7106f-136">You'll need tooinstall at least 2 agents in order toohave enough data toodiscover and monitor your network resources.</span></span> <span data-ttu-id="7106f-137">否則，hello 方案會保留在 「 設定 」 狀態，直到您安裝及設定其他代理程式。</span><span class="sxs-lookup"><span data-stu-id="7106f-137">Otherwise, hello solution will remain in a configuring state until you install and configure additional agents.</span></span>
>
>

### <a name="where-tooinstall-hello-agents"></a><span data-ttu-id="7106f-138">其中 tooinstall hello 代理程式</span><span class="sxs-lookup"><span data-stu-id="7106f-138">Where tooinstall hello agents</span></span>
<span data-ttu-id="7106f-139">安裝代理程式之前，請考慮網路拓撲 hello 和 hello 的哪些部分網路您想要 toomonitor。</span><span class="sxs-lookup"><span data-stu-id="7106f-139">Before you install agents, consider hello topology of your network and what parts of hello network you want toomonitor.</span></span> <span data-ttu-id="7106f-140">我們建議您安裝您想 toomonitor 每個子網路的多個代理程式。</span><span class="sxs-lookup"><span data-stu-id="7106f-140">We recommend that you install more than one agent for each subnet that you want toomonitor.</span></span> <span data-ttu-id="7106f-141">換句話說，針對您想 toomonitor 每個子網路，選擇兩個或多個伺服器或 Vm 並且 hello 代理程式上安裝它們。</span><span class="sxs-lookup"><span data-stu-id="7106f-141">In other words, for every subnet that you want toomonitor, choose two or more servers or VMs and install hello agent on them.</span></span>

<span data-ttu-id="7106f-142">如果您不確定 hello 網路拓撲，請與您想要 toomonitor hello 網路效能的任務工作負載的伺服器上安裝 hello 代理程式。</span><span class="sxs-lookup"><span data-stu-id="7106f-142">If you are unsure about hello topology of your network, install hello agents on servers with critical workloads where you want toomonitor hello network performance.</span></span> <span data-ttu-id="7106f-143">例如，您可以 Web 伺服器和執行 SQL Server 的伺服器之間的網路連線的 tookeep 追蹤。</span><span class="sxs-lookup"><span data-stu-id="7106f-143">For example, you might want tookeep track of a network connection between a Web server and a server running SQL Server.</span></span> <span data-ttu-id="7106f-144">在此範例中，您會在兩部伺服器上安裝代理程式。</span><span class="sxs-lookup"><span data-stu-id="7106f-144">In this example, you'd install an agent on both servers.</span></span>

<span data-ttu-id="7106f-145">代理程式監視主機本身未 hello 主機之間的網路連線 （連結）。</span><span class="sxs-lookup"><span data-stu-id="7106f-145">Agents monitor network connectivity (links) between hosts -- not hello hosts themselves.</span></span> <span data-ttu-id="7106f-146">因此，toomonitor 網路連結，您必須在該連結的兩個端點上安裝代理程式。</span><span class="sxs-lookup"><span data-stu-id="7106f-146">So, toomonitor a network link, you must install agents on both endpoints of that link.</span></span>

### <a name="configure-agents"></a><span data-ttu-id="7106f-147">設定代理程式</span><span class="sxs-lookup"><span data-stu-id="7106f-147">Configure agents</span></span>

<span data-ttu-id="7106f-148">如果您想要針對綜合交易的 toouse hello ICMP 通訊協定，您需要下列防火牆規則，就能夠可靠地使用 ICMP tooenable hello:</span><span class="sxs-lookup"><span data-stu-id="7106f-148">If you intend toouse hello ICMP protocol for synthetic transactions, you need tooenable hello following firewall rules for reliably utilizing ICMP:</span></span>

```
netsh advfirewall firewall add rule name="NPMDICMPV4Echo" protocol="icmpv4:8,any" dir=in action=allow
netsh advfirewall firewall add rule name="NPMDICMPV6Echo" protocol="icmpv6:128,any" dir=in action=allow
netsh advfirewall firewall add rule name="NPMDICMPV4DestinationUnreachable" protocol="icmpv4:3,any" dir=in action=allow
netsh advfirewall firewall add rule name="NPMDICMPV6DestinationUnreachable" protocol="icmpv6:1,any" dir=in action=allow
netsh advfirewall firewall add rule name="NPMDICMPV4TimeExceeded" protocol="icmpv4:11,any" dir=in action=allow
netsh advfirewall firewall add rule name="NPMDICMPV6TimeExceeded" protocol="icmpv6:3,any" dir=in action=allow
```


<span data-ttu-id="7106f-149">如果您想 toouse hello TCP 通訊協定您會需要為這些代理程式可通訊的電腦 tooensure tooopen 防火牆連接埠。</span><span class="sxs-lookup"><span data-stu-id="7106f-149">If you intend toouse hello TCP protocol you need tooopen firewall ports for those computers tooensure that agents can communicate.</span></span> <span data-ttu-id="7106f-150">您需要 toodownload，然後執行 hello [EnableRules.ps1 PowerShell 指令碼](https://gallery.technet.microsoft.com/OMS-Network-Performance-04a66634)不使用任何參數，以系統管理權限的 PowerShell 視窗中。</span><span class="sxs-lookup"><span data-stu-id="7106f-150">You need toodownload and then run hello [EnableRules.ps1 PowerShell script](https://gallery.technet.microsoft.com/OMS-Network-Performance-04a66634) without any parameters in a PowerShell window with administrative privileges.</span></span>

<span data-ttu-id="7106f-151">hello 指令碼會建立 hello 網路效能監視器所需的登錄機碼，它會建立 Windows 防火牆規則 tooallow 代理程式 toocreate TCP 連線彼此。</span><span class="sxs-lookup"><span data-stu-id="7106f-151">hello script creates registry keys required by hello Network Performance Monitor and it creates Windows firewall rules tooallow agents toocreate TCP connections with each other.</span></span> <span data-ttu-id="7106f-152">hello hello 指令碼所建立的登錄機碼也會指定是否 toolog hello 偵錯記錄檔和 hello hello 記錄檔案的路徑。</span><span class="sxs-lookup"><span data-stu-id="7106f-152">hello registry keys created by hello script also specify whether toolog hello debug logs and hello path for hello logs file.</span></span> <span data-ttu-id="7106f-153">它也會定義用於通訊的 hello 代理程式 TCP 通訊埠。</span><span class="sxs-lookup"><span data-stu-id="7106f-153">It also defines hello agent TCP port used for communication.</span></span> <span data-ttu-id="7106f-154">這些索引鍵的 hello 值會自動設定 hello 指令碼，所以您不應手動變更這些金鑰。</span><span class="sxs-lookup"><span data-stu-id="7106f-154">hello values for these keys are automatically set by hello script, so you should not manually change these keys.</span></span>

<span data-ttu-id="7106f-155">8084 hello 連接埠預設開啟的。</span><span class="sxs-lookup"><span data-stu-id="7106f-155">hello port opened by default is 8084.</span></span> <span data-ttu-id="7106f-156">您可以藉由提供 hello 參數使用自訂連接埠`portNumber`toohello 指令碼。</span><span class="sxs-lookup"><span data-stu-id="7106f-156">You can use a custom port by providing hello parameter `portNumber` toohello script.</span></span> <span data-ttu-id="7106f-157">不過，hello 相同的連接埠應 hello 的所有電腦上執行 hello 指令碼的位置。</span><span class="sxs-lookup"><span data-stu-id="7106f-157">However, hello same port should be used on all hello computers where hello script is run.</span></span>

> [!NOTE]
> <span data-ttu-id="7106f-158">hello EnableRules.ps1 指令碼只能在 hello hello 指令碼執行所在的電腦上設定 Windows 防火牆規則。</span><span class="sxs-lookup"><span data-stu-id="7106f-158">hello EnableRules.ps1 script configures Windows firewall rules only on hello computer where hello script is run.</span></span> <span data-ttu-id="7106f-159">如果您有網路防火牆，您應該要確定它可讓目的地為 hello TCP 連接埠正在使用網路效能監視器的流量。</span><span class="sxs-lookup"><span data-stu-id="7106f-159">If you have a network firewall, you should make sure that it allows traffic destined for hello TCP port being used by Network Performance Monitor.</span></span>
>
>

## <a name="configuring-hello-solution"></a><span data-ttu-id="7106f-160">設定 hello 解決方案</span><span class="sxs-lookup"><span data-stu-id="7106f-160">Configuring hello solution</span></span>
<span data-ttu-id="7106f-161">使用下列資訊 tooinstall hello 並設定 hello 方案。</span><span class="sxs-lookup"><span data-stu-id="7106f-161">Use hello following information tooinstall and configure hello solution.</span></span>

1. <span data-ttu-id="7106f-162">hello 網路效能監視器方案取得資料，從執行 Windows Server 2008 SP 1 或更新版本的電腦或 Windows 7 SP1 或更新版本中，這是 hello 相同 hello Microsoft Monitoring Agent (MMA) 的需求。</span><span class="sxs-lookup"><span data-stu-id="7106f-162">hello Network Performance Monitor solution acquires data from computers running Windows Server 2008 SP 1 or later or Windows 7 SP1 or later, which are hello same requirements as hello Microsoft Monitoring Agent (MMA).</span></span> <span data-ttu-id="7106f-163">NPM 代理程式也可以在 Windows 桌面/用戶端作業系統 (Windows 10、Windows 8.1、Windows 8 和 Windows 7) 上執行。</span><span class="sxs-lookup"><span data-stu-id="7106f-163">NPM agents can also run on Windows desktop/client operating systems (Windows 10, Windows 8.1, Windows 8 and Windows 7).</span></span>
    >[!NOTE]
    ><span data-ttu-id="7106f-164">Windows server 作業系統的 hello 代理程式支援 TCP 和 ICMP 視為綜合交易的 hello 通訊協定。</span><span class="sxs-lookup"><span data-stu-id="7106f-164">hello agents for Windows server operating systems support both TCP and ICMP as hello protocols for synthetic transaction.</span></span> <span data-ttu-id="7106f-165">不過，Windows 用戶端作業系統的 hello 代理程式只會支援 ICMP 做為綜合交易的 hello 通訊協定。</span><span class="sxs-lookup"><span data-stu-id="7106f-165">However, hello agents for Windows client operating systems only support ICMP as hello protocol for synthetic transaction.</span></span>

2. <span data-ttu-id="7106f-166">新增 hello 網路效能監視器方案 tooyour 從工作區[Azure marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.NetworkMonitoringOMS?tab=Overview)或使用 hello 程序中所述[hello 解決方案資源庫中的新增記錄分析解決方案](log-analytics-add-solutions.md)。</span><span class="sxs-lookup"><span data-stu-id="7106f-166">Add hello Network Performance Monitor solution tooyour workspace from [Azure marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.NetworkMonitoringOMS?tab=Overview) or by using hello process described in [Add Log Analytics solutions from hello Solutions Gallery](log-analytics-add-solutions.md).</span></span>  
   <span data-ttu-id="7106f-167">![網路效能監視器符號](./media/log-analytics-network-performance-monitor/npm-symbol.png)</span><span class="sxs-lookup"><span data-stu-id="7106f-167">![Network Performance Monitor symbol](./media/log-analytics-network-performance-monitor/npm-symbol.png)</span></span>
3. <span data-ttu-id="7106f-168">在 hello OMS 入口網站，您會看到標題為新的圖格**網路效能監視器**hello 訊息*解決方案需要其他設定*。</span><span class="sxs-lookup"><span data-stu-id="7106f-168">In hello OMS portal, you'll see a new tile titled **Network Performance Monitor** with hello message *Solution requires additional configuration*.</span></span> <span data-ttu-id="7106f-169">您將需要 tooconfigure hello 方案 tooadd 型網路的子網路，而且探索到的代理程式的節點。</span><span class="sxs-lookup"><span data-stu-id="7106f-169">You'll need tooconfigure hello solution tooadd networks based on subnetworks and nodes that are discovered by agents.</span></span> <span data-ttu-id="7106f-170">按一下**網路效能監視器**toostart 設定 hello 預設網路。</span><span class="sxs-lookup"><span data-stu-id="7106f-170">Click **Network Performance Monitor** toostart configuring hello default network.</span></span>  
   <span data-ttu-id="7106f-171">![方案需要額外設定](./media/log-analytics-network-performance-monitor/npm-config.png)</span><span class="sxs-lookup"><span data-stu-id="7106f-171">![solution requires additional configuration](./media/log-analytics-network-performance-monitor/npm-config.png)</span></span>

### <a name="configure-hello-solution-with-a-default-network"></a><span data-ttu-id="7106f-172">使用預設網路設定 hello 方案</span><span class="sxs-lookup"><span data-stu-id="7106f-172">Configure hello solution with a default network</span></span>
<span data-ttu-id="7106f-173">在 hello 組態 頁面中，您會看到單一網路，名為**預設**。</span><span class="sxs-lookup"><span data-stu-id="7106f-173">On hello configuration page, you'll see a single network named **Default**.</span></span> <span data-ttu-id="7106f-174">您尚未定義任何網路，當所有 hello 自動探索子網路會都放置在 hello 預設網路。</span><span class="sxs-lookup"><span data-stu-id="7106f-174">When you haven't defined any networks, all hello automatically-discovered subnets are placed in hello Default network.</span></span>

<span data-ttu-id="7106f-175">每當您建立網路時，您會加入子網路 tooit 和子網路從 hello 預設網路中移除。</span><span class="sxs-lookup"><span data-stu-id="7106f-175">Whenever you create a network, you add a subnet tooit and that subnet is removed from hello Default network.</span></span> <span data-ttu-id="7106f-176">如果您刪除網路時，其所有子網路會自動傳回 toohello 預設網路。</span><span class="sxs-lookup"><span data-stu-id="7106f-176">If you delete a network, all its subnets are automatically returned toohello Default network.</span></span>

<span data-ttu-id="7106f-177">換句話說，hello 預設網路是所有 hello 子網路不包含任何使用者定義的網路中的 hello 容器。</span><span class="sxs-lookup"><span data-stu-id="7106f-177">In other words, hello Default network is hello container for all hello subnets that are not contained in any user-defined network.</span></span> <span data-ttu-id="7106f-178">您無法編輯或刪除 hello 預設網路。</span><span class="sxs-lookup"><span data-stu-id="7106f-178">You cannot edit or delete hello Default network.</span></span> <span data-ttu-id="7106f-179">一定會保持在 hello 系統中。</span><span class="sxs-lookup"><span data-stu-id="7106f-179">It always remains in hello system.</span></span> <span data-ttu-id="7106f-180">不果，您可以視需要建立任意數量的網路。</span><span class="sxs-lookup"><span data-stu-id="7106f-180">However, you can create as many networks as you need.</span></span>

<span data-ttu-id="7106f-181">在大部分情況下，組織中的 hello 子網路會排列在一個以上的網路和您應該建立一個或多個網路 toologically 群組您的子網路。</span><span class="sxs-lookup"><span data-stu-id="7106f-181">In most cases, hello subnets in your organization will be arranged in more than one network and you should create one or more networks toologically group your subnets.</span></span>

### <a name="create-new-networks"></a><span data-ttu-id="7106f-182">建立新網路</span><span class="sxs-lookup"><span data-stu-id="7106f-182">Create new networks</span></span>
<span data-ttu-id="7106f-183">網路效能監視器中的網路是子網路的容器。</span><span class="sxs-lookup"><span data-stu-id="7106f-183">A network in Network Performance Monitor is a container for subnets.</span></span> <span data-ttu-id="7106f-184">您可以使用任何名稱，並新增子網路 toohello 網路建立網路。</span><span class="sxs-lookup"><span data-stu-id="7106f-184">You can create a network with any name that you want and add subnets toohello network.</span></span> <span data-ttu-id="7106f-185">例如，您可以建立名為的網路*Building1* ，然後新增子網路，或者您可以建立網路，名為*DMZ*然後加入所有屬於 toodemilitarized 區域 toothis 網路的子網路。</span><span class="sxs-lookup"><span data-stu-id="7106f-185">For example, you can create a network named *Building1* and then add subnets, or you can create a network named *DMZ* and then add all subnets belonging toodemilitarized zone toothis network.</span></span>

#### <a name="toocreate-a-new-network"></a><span data-ttu-id="7106f-186">toocreate 新網路</span><span class="sxs-lookup"><span data-stu-id="7106f-186">toocreate a new network</span></span>
1. <span data-ttu-id="7106f-187">按一下**新增網路**，然後輸入 hello 網路名稱和描述。</span><span class="sxs-lookup"><span data-stu-id="7106f-187">Click **Add network** and then type hello network name and description.</span></span>
2. <span data-ttu-id="7106f-188">選取一或多個子網路，然後按一下新增。</span><span class="sxs-lookup"><span data-stu-id="7106f-188">Select one or more subnets, and then click **Add**.</span></span>
3. <span data-ttu-id="7106f-189">按一下**儲存**toosave hello 組態。</span><span class="sxs-lookup"><span data-stu-id="7106f-189">Click **Save** toosave hello configuration.</span></span>  
   <span data-ttu-id="7106f-190">![新增網路](./media/log-analytics-network-performance-monitor/npm-add-network.png)</span><span class="sxs-lookup"><span data-stu-id="7106f-190">![add network](./media/log-analytics-network-performance-monitor/npm-add-network.png)</span></span>

### <a name="wait-for-data-aggregation"></a><span data-ttu-id="7106f-191">等候資料彙總</span><span class="sxs-lookup"><span data-stu-id="7106f-191">Wait for data aggregation</span></span>
<span data-ttu-id="7106f-192">儲存第一次的 hello 組態之後，hello 方案就會開始收集代理程式的安裝位置的 hello 節點之間的網路封包中斷和延遲資訊。</span><span class="sxs-lookup"><span data-stu-id="7106f-192">After you've saved hello configuration for first time, hello solution starts collecting network packet loss and latency information between hello nodes where agents are installed.</span></span> <span data-ttu-id="7106f-193">此程序可能需要一些時間，有時候超過 30 分鐘。</span><span class="sxs-lookup"><span data-stu-id="7106f-193">This process can take a while, sometimes over 30 minutes.</span></span> <span data-ttu-id="7106f-194">在此狀態，hello hello 概觀 頁面中的網路效能監視器磚會顯示訊息，指出*程序中的資料彙總*。</span><span class="sxs-lookup"><span data-stu-id="7106f-194">During this state, hello Network Performance Monitor tile in hello overview page displays a message stating *Data aggregation in process*.</span></span>

![資料彙總進行中](./media/log-analytics-network-performance-monitor/npm-aggregation.png)

<span data-ttu-id="7106f-196">當已上傳 hello 資料時，您會看到 hello 網路效能監視器磚更新顯示的資料。</span><span class="sxs-lookup"><span data-stu-id="7106f-196">When hello data has been uploaded, you'll see hello Network Performance Monitor tile updated showing data.</span></span>

![網路效能監視器圖格](./media/log-analytics-network-performance-monitor/npm-tile.png)

<span data-ttu-id="7106f-198">按一下 hello 磚 tooview hello 網路效能監視器儀表板。</span><span class="sxs-lookup"><span data-stu-id="7106f-198">Click hello tile tooview hello Network Performance Monitor dashboard.</span></span>

![網路效能監視器儀表板](./media/log-analytics-network-performance-monitor/npm-dash01.png)

### <a name="edit-monitoring-settings-for-subnets"></a><span data-ttu-id="7106f-200">編輯子網路的監視設定</span><span class="sxs-lookup"><span data-stu-id="7106f-200">Edit monitoring settings for subnets</span></span>
<span data-ttu-id="7106f-201">至少一個代理程式安裝所在的所有子網路會列在 hello**網路結構**hello 組態頁面中的索引標籤。</span><span class="sxs-lookup"><span data-stu-id="7106f-201">All subnets where at least one agent was installed are listed on hello **Subnetworks** tab in hello configuration page.</span></span>

#### <a name="tooenable-or-disable-monitoring-for-particular-subnetworks"></a><span data-ttu-id="7106f-202">tooenable 或停用監視的特定子網路</span><span class="sxs-lookup"><span data-stu-id="7106f-202">tooenable or disable monitoring for particular subnetworks</span></span>
1. <span data-ttu-id="7106f-203">選取或清除 hello 方塊的下一個 toohello**子網路識別碼**然後確定**用於監視**呈選取狀態或已清除，視需要。</span><span class="sxs-lookup"><span data-stu-id="7106f-203">Select or clear hello box next toohello **subnetwork ID** and then ensure that **Use for Monitoring** is selected or cleared, as appropriate.</span></span> <span data-ttu-id="7106f-204">您可以選取或清除多個子網路。</span><span class="sxs-lookup"><span data-stu-id="7106f-204">You can select or clear multiple subnets.</span></span> <span data-ttu-id="7106f-205">停用時，子網路未受監視當 hello 代理程式將會更新的 toostop ping 其他代理程式。</span><span class="sxs-lookup"><span data-stu-id="7106f-205">When disabled, subnetworks are not monitored as hello agents will be updated toostop pinging other agents.</span></span>
2. <span data-ttu-id="7106f-206">選擇您想要 toomonitor 特定子網路選取 hello 清單，然後將移 hello 子網路的 hello 節點 hello hello 清單包含未受監視和受監視節點之間的必要的節點。</span><span class="sxs-lookup"><span data-stu-id="7106f-206">Choose hello nodes that you want toomonitor for a particular subnetwork by selecting hello subnetwork from hello list and moving hello required nodes between hello lists containing unmonitored and monitored nodes.</span></span>
   <span data-ttu-id="7106f-207">您可以新增自訂**描述**toohello 子網路，如果您願意的話。</span><span class="sxs-lookup"><span data-stu-id="7106f-207">You can add a custom **description** toohello subnetwork, if you like.</span></span>
3. <span data-ttu-id="7106f-208">按一下**儲存**toosave hello 組態。</span><span class="sxs-lookup"><span data-stu-id="7106f-208">Click **Save** toosave hello configuration.</span></span>  
   <span data-ttu-id="7106f-209">![編輯子網路](./media/log-analytics-network-performance-monitor/npm-edit-subnet.png)</span><span class="sxs-lookup"><span data-stu-id="7106f-209">![edit subnet](./media/log-analytics-network-performance-monitor/npm-edit-subnet.png)</span></span>

### <a name="choose-nodes-toomonitor"></a><span data-ttu-id="7106f-210">選擇節點 toomonitor</span><span class="sxs-lookup"><span data-stu-id="7106f-210">Choose nodes toomonitor</span></span>
<span data-ttu-id="7106f-211">已在其上安裝代理程式的所有 hello 節點會都列出 hello**節點** 索引標籤。</span><span class="sxs-lookup"><span data-stu-id="7106f-211">All hello nodes that have an agent installed on them are listed in hello **Nodes** tab.</span></span>

#### <a name="tooenable-or-disable-monitoring-for-nodes"></a><span data-ttu-id="7106f-212">tooenable 或停用監視節點</span><span class="sxs-lookup"><span data-stu-id="7106f-212">tooenable or disable monitoring for nodes</span></span>
1. <span data-ttu-id="7106f-213">選取或清除您想 toomonitor 或停止監視 hello 節點。</span><span class="sxs-lookup"><span data-stu-id="7106f-213">Select or clear hello nodes that you want toomonitor or stop monitoring.</span></span>
2. <span data-ttu-id="7106f-214">視需要按一下 [用於監視]，或加以清除。</span><span class="sxs-lookup"><span data-stu-id="7106f-214">Click **Use for Monitoring**, or clear it, as appropriate.</span></span>
3. <span data-ttu-id="7106f-215">按一下 [儲存] 。</span><span class="sxs-lookup"><span data-stu-id="7106f-215">Click **Save**.</span></span>  
   <span data-ttu-id="7106f-216">![啟用節點監視](./media/log-analytics-network-performance-monitor/npm-enable-node-monitor.png)</span><span class="sxs-lookup"><span data-stu-id="7106f-216">![enable node monitoring](./media/log-analytics-network-performance-monitor/npm-enable-node-monitor.png)</span></span>

### <a name="set-monitoring-rules"></a><span data-ttu-id="7106f-217">設定監視規則</span><span class="sxs-lookup"><span data-stu-id="7106f-217">Set monitoring rules</span></span>
<span data-ttu-id="7106f-218">網路效能監視會產生關於 hello 節點或子網路或網路連結，在達到閾值時的一組之間的連線健全狀況事件。</span><span class="sxs-lookup"><span data-stu-id="7106f-218">Network Performance Monitor generates health events about hello connectivity between a pair of nodes or subnetwork or network links when a threshold is breached.</span></span> <span data-ttu-id="7106f-219">這些閾值可以自動學習 hello 系統，或設定自訂的警示規則。</span><span class="sxs-lookup"><span data-stu-id="7106f-219">These thresholds can be learned automatically by hello system or you can configure them custom alert rules.</span></span>

<span data-ttu-id="7106f-220">hello*預設規則*hello 系統由和它建立健全狀況事件時遺失或任何兩個網路或子網路之間的延遲連結漏洞 hello 系統已了解臨界值。</span><span class="sxs-lookup"><span data-stu-id="7106f-220">hello *Default rule* is created by hello system and it creates a health event whenever loss or latency between any pair of networks or subnetwork links breaches hello system-learned threshold.</span></span> <span data-ttu-id="7106f-221">您可以選擇 toodisable hello 預設規則，並建立自訂的監視規則</span><span class="sxs-lookup"><span data-stu-id="7106f-221">You can choose toodisable hello default rule and create custom monitoring rules</span></span>

#### <a name="toocreate-custom-monitoring-rules"></a><span data-ttu-id="7106f-222">toocreate 自訂監視規則</span><span class="sxs-lookup"><span data-stu-id="7106f-222">toocreate custom monitoring rules</span></span>
1. <span data-ttu-id="7106f-223">按一下**加入規則**在 hello**監視器**索引標籤，然後輸入 hello 規則名稱和描述。</span><span class="sxs-lookup"><span data-stu-id="7106f-223">Click **Add Rule** in hello **Monitor** tab and enter hello rule name and description.</span></span>
2. <span data-ttu-id="7106f-224">您可以選取網路或子網路連結 toomonitor hello 的組 hello 清單中。</span><span class="sxs-lookup"><span data-stu-id="7106f-224">Select hello pair of network or subnetwork links toomonitor from hello lists.</span></span>
3. <span data-ttu-id="7106f-225">第一次選取 hello 網路中的 hello 第一個子網路/s 感興趣的包含從 hello 網路下拉式清單中，然後選取 hello 子網路/s 從 hello 對應子網路 下拉式清單。</span><span class="sxs-lookup"><span data-stu-id="7106f-225">First select hello network in which hello first subnetwork/s of interest is contained from hello network dropdown, and then select hello subnetwork/s from hello corresponding subnetwork dropdown.</span></span>
   <span data-ttu-id="7106f-226">選取**所有的子網路**如果您想 toomonitor 所有 hello 中的網路連結的子網路。</span><span class="sxs-lookup"><span data-stu-id="7106f-226">Select **All subnetworks** if you want toomonitor all hello subnetworks in a network link.</span></span> <span data-ttu-id="7106f-227">同樣地選取 hello 感興趣其他子網路/s。</span><span class="sxs-lookup"><span data-stu-id="7106f-227">Similarly select hello other subnetwork/s of interest.</span></span> <span data-ttu-id="7106f-228">而且，您可以按一下**新增例外狀況**tooexclude 監視特定的子網路連結從 hello 選取您所做。</span><span class="sxs-lookup"><span data-stu-id="7106f-228">And, you can click **Add Exception** tooexclude monitoring for particular subnetwork links from hello selection you've made.</span></span>
4. <span data-ttu-id="7106f-229">在 ICMP 和 TCP 通訊協定之間選擇，供您用來執行綜合交易。</span><span class="sxs-lookup"><span data-stu-id="7106f-229">Choose between ICMP and TCP protocols for executing synthetic transactions.</span></span>
5. <span data-ttu-id="7106f-230">如果您不想 toocreate 健全狀況事件的 hello 您所選取的項目，然後清除**啟用此規則涵蓋 hello 連結上的健全狀況監視**。</span><span class="sxs-lookup"><span data-stu-id="7106f-230">If you don't want toocreate health events for hello items you've selected, then clear **Enable health monitoring on hello links covered by this rule**.</span></span>
6. <span data-ttu-id="7106f-231">選擇監視條件。</span><span class="sxs-lookup"><span data-stu-id="7106f-231">Choose monitoring conditions.</span></span>
   <span data-ttu-id="7106f-232">您可以輸入臨界值，以設定健康狀態事件產生的自訂臨界值。</span><span class="sxs-lookup"><span data-stu-id="7106f-232">You can set custom thresholds for health event generation by typing threshold values.</span></span> <span data-ttu-id="7106f-233">每當 hello hello 條件值超出其 hello 選的網路/子網路對選取的閾值時，會產生健全狀況事件。</span><span class="sxs-lookup"><span data-stu-id="7106f-233">Whenever hello value of hello condition goes above its selected threshold for hello selected network/subnetwork pair, a health event is generated.</span></span>
7. <span data-ttu-id="7106f-234">按一下**儲存**toosave hello 組態。</span><span class="sxs-lookup"><span data-stu-id="7106f-234">Click **Save** toosave hello configuration.</span></span>  
   <span data-ttu-id="7106f-235">![建立自訂監視規則](./media/log-analytics-network-performance-monitor/npm-monitor-rule.png)</span><span class="sxs-lookup"><span data-stu-id="7106f-235">![create custom monitoring rule](./media/log-analytics-network-performance-monitor/npm-monitor-rule.png)</span></span>

<span data-ttu-id="7106f-236">儲存監視規則之後，您可以按一下**建立警示**，使用警示管理整合該規則。</span><span class="sxs-lookup"><span data-stu-id="7106f-236">After you save a monitoring rule, you can integrate that rule with Alert Management by clicking **Create Alert**.</span></span> <span data-ttu-id="7106f-237">警示規則會自動建立 hello 搜尋查詢，以及其他必要的參數自動填滿的。</span><span class="sxs-lookup"><span data-stu-id="7106f-237">An alert rule is automatically created with hello search query and other required parameters automatically filled-in.</span></span> <span data-ttu-id="7106f-238">使用警示的規則，您可以接收電子郵件為基礎的警示，此外 toohello 現有警示 NPM 內。</span><span class="sxs-lookup"><span data-stu-id="7106f-238">Using an alert rule, you can receive email-based alerts, in addition toohello existing alerts within NPM.</span></span> <span data-ttu-id="7106f-239">警示也會使用 runbook 觸發修復動作，或可以使用 webhook 與現有的服務管理解決方案整合。</span><span class="sxs-lookup"><span data-stu-id="7106f-239">Alerts can also trigger remedial actions with runbooks or they can integrate with existing service management solutions using webhooks.</span></span> <span data-ttu-id="7106f-240">您可以按一下**管理警示**tooedit hello 警示設定。</span><span class="sxs-lookup"><span data-stu-id="7106f-240">You can click **Manage Alert** tooedit hello alert settings.</span></span>

### <a name="choose-hello-right-protocol-icmp-or-tcp"></a><span data-ttu-id="7106f-241">選擇 hello 正確的通訊協定 ICMP 或 TCP</span><span class="sxs-lookup"><span data-stu-id="7106f-241">Choose hello right protocol-ICMP or TCP</span></span>

<span data-ttu-id="7106f-242">網路效能監視器 (NPM) 會使用綜合交易 toocalculate 網路效能計量，例如封包遺失與連結的延遲。</span><span class="sxs-lookup"><span data-stu-id="7106f-242">Network Performance Monitor (NPM) uses synthetic transactions toocalculate network performance metrics like packet loss and link latency.</span></span> <span data-ttu-id="7106f-243">toounderstand 這更好，請考慮 NPM 代理程式連接的 tooone 結尾的網路連結。</span><span class="sxs-lookup"><span data-stu-id="7106f-243">toounderstand this better, consider an NPM agent connected tooone end of a network link.</span></span> <span data-ttu-id="7106f-244">此 NPM 代理程式傳送探查封包 tooa 第二個 NPM 代理程式連接的 tooanother 結尾 hello 網路。</span><span class="sxs-lookup"><span data-stu-id="7106f-244">This NPM agent sends probe packets tooa second NPM agent connected tooanother end of hello network.</span></span> <span data-ttu-id="7106f-245">hello 第二個代理程式的回覆的回應封包。</span><span class="sxs-lookup"><span data-stu-id="7106f-245">hello second agent replies with response packets.</span></span> <span data-ttu-id="7106f-246">此程序會重複幾次。</span><span class="sxs-lookup"><span data-stu-id="7106f-246">This process is repeated a few times.</span></span> <span data-ttu-id="7106f-247">藉由測量 hello 回覆和所花費時間 tooreceive 數目每個回覆，第一個 hello NPM 代理程式，評估連結延遲和封包會卸除。</span><span class="sxs-lookup"><span data-stu-id="7106f-247">By measuring hello number of replies and time taken tooreceive each reply, hello first NPM agent assesses link latency and packet drops.</span></span>

<span data-ttu-id="7106f-248">hello 格式、 大小以及這些封包的順序取決於您選擇當您建立的監視規則的 hello 通訊協定。</span><span class="sxs-lookup"><span data-stu-id="7106f-248">hello format, size and sequence of these packets is determined by hello protocol that you choose when you create monitoring rules.</span></span> <span data-ttu-id="7106f-249">Hello 封包的通訊協定為基礎，hello 中繼網路裝置 （路由器、 交換器等等） 可能會以不同方式處理這些封包。</span><span class="sxs-lookup"><span data-stu-id="7106f-249">Based on protocol of hello packets, hello intermediate network devices (routers, switches etc.) might process these packets differently.</span></span> <span data-ttu-id="7106f-250">因此，您的通訊協定選擇會影響 hello 精確度的 hello 結果。</span><span class="sxs-lookup"><span data-stu-id="7106f-250">Consequently, your protocol choice affects hello accuracy of hello results.</span></span> <span data-ttu-id="7106f-251">與您通訊協定的選擇也會決定是否部署 hello NPM 方案之後，您必須採取任何手動步驟。</span><span class="sxs-lookup"><span data-stu-id="7106f-251">And, your protocol choice also determines whether you must take any manual steps after you deploy hello NPM solution.</span></span>

<span data-ttu-id="7106f-252">NPM 提供 hello 執行綜合交易的 ICMP 和 TCP 通訊協定之間的選擇。</span><span class="sxs-lookup"><span data-stu-id="7106f-252">NPM offers you hello choice between ICMP and TCP protocols for executing synthetic transactions.</span></span>
<span data-ttu-id="7106f-253">如果您建立綜合交易規則時，您可以選擇 ICMP，hello NPM 代理程式會使用 ICMP 回應訊息 toocalculate hello 網路延遲和封包遺失。</span><span class="sxs-lookup"><span data-stu-id="7106f-253">If you choose ICMP when you create a synthetic transaction rule, hello NPM agents use ICMP ECHO messages toocalculate hello network latency and packet loss.</span></span> <span data-ttu-id="7106f-254">ICMP 回應使用 hello 相同訊息也就是傳送 hello 傳統 Ping 公用程式。</span><span class="sxs-lookup"><span data-stu-id="7106f-254">ICMP ECHO uses hello same message that is sent by hello conventional Ping utility.</span></span> <span data-ttu-id="7106f-255">當您使用 TCP 做為 hello 通訊協定時，NPM 代理程式會傳送 hello 網路上的 TCP SYN 封包。</span><span class="sxs-lookup"><span data-stu-id="7106f-255">When you use TCP as hello protocol, NPM agents send TCP SYN packet over hello network.</span></span> <span data-ttu-id="7106f-256">後面接著 TCP 交握完成，然後再移除 hello 連線使用 RST 封包。</span><span class="sxs-lookup"><span data-stu-id="7106f-256">This is followed by a TCP handshake completion and then removing hello connection using RST packets.</span></span>

#### <a name="points-tooconsider-before-choosing-hello-protocol"></a><span data-ttu-id="7106f-257">選擇 hello 通訊協定之前的點 tooconsider</span><span class="sxs-lookup"><span data-stu-id="7106f-257">Points tooconsider before choosing hello protocol</span></span>
<span data-ttu-id="7106f-258">請考量下列資訊，再選擇通訊協定 toouse hello:</span><span class="sxs-lookup"><span data-stu-id="7106f-258">Consider hello following information before you choose a protocol toouse:</span></span>

##### <a name="discovering-multiple-network-routes"></a><span data-ttu-id="7106f-259">探索多個網路路由</span><span class="sxs-lookup"><span data-stu-id="7106f-259">Discovering multiple network routes</span></span>
<span data-ttu-id="7106f-260">TCP 在探索多個路由時精確度較高，而且在每個子網路中需要的代理程式較少。</span><span class="sxs-lookup"><span data-stu-id="7106f-260">TCP is more accurate when discovering multiple routes and it needs fewer agents in each subnet.</span></span> <span data-ttu-id="7106f-261">例如，只要有一或二個使用 TCP 的代理程式，就可以探索子網路之間的所有備援路徑。</span><span class="sxs-lookup"><span data-stu-id="7106f-261">For example, one or two agents using TCP can discover all redundant paths between subnets.</span></span> <span data-ttu-id="7106f-262">不過，您會需要數個代理程式使用 ICMP tooachieve 類似的結果。</span><span class="sxs-lookup"><span data-stu-id="7106f-262">However, you need several agents using ICMP tooachieve similar results.</span></span> <span data-ttu-id="7106f-263">如果使用 ICMP，假設您在兩個子網路間有 *N* 個路由，您在來源或目標子網路就需要超過 5*N* 個代理程式。</span><span class="sxs-lookup"><span data-stu-id="7106f-263">Using ICMP, if you have *N* number of routes between two subnets you need more than 5*N* agents in either a source or destination subnet.</span></span>

##### <a name="accuracy-of-results"></a><span data-ttu-id="7106f-264">結果的精確度</span><span class="sxs-lookup"><span data-stu-id="7106f-264">Accuracy of results</span></span>
<span data-ttu-id="7106f-265">路由器和交換器通常 tooassign 較低優先順序 tooICMP 回應封包比較 tooTCP 封包。</span><span class="sxs-lookup"><span data-stu-id="7106f-265">Routers and switches tend tooassign lower priority tooICMP ECHO packets compared tooTCP packets.</span></span> <span data-ttu-id="7106f-266">在某些情況下，網路裝置大量載入時，更仔細地透過 TCP 的 hello 資料會反映 hello 中斷和應用程式所發生的延遲。</span><span class="sxs-lookup"><span data-stu-id="7106f-266">In certain situations, when network devices are heavily loaded, hello data obtained by TCP more closely reflects hello loss and latency experienced by applications.</span></span> <span data-ttu-id="7106f-267">這是因為大多數 hello 應用程式流量會透過 TCP 流動。</span><span class="sxs-lookup"><span data-stu-id="7106f-267">This occurs because most of hello application traffic flows over TCP.</span></span> <span data-ttu-id="7106f-268">在這種情況下，ICMP 提供較不精確的比較結果 tooTCP。</span><span class="sxs-lookup"><span data-stu-id="7106f-268">In such cases, ICMP provides less accurate results compared tooTCP.</span></span>

##### <a name="firewall-configuration"></a><span data-ttu-id="7106f-269">防火牆設定</span><span class="sxs-lookup"><span data-stu-id="7106f-269">Firewall configuration</span></span>
<span data-ttu-id="7106f-270">TCP 通訊協定需要 TCP 封包傳送 tooa 目的地連接埠。</span><span class="sxs-lookup"><span data-stu-id="7106f-270">TCP protocol requires that TCP packets are sent tooa destination port.</span></span> <span data-ttu-id="7106f-271">hello NPM 代理程式所使用的預設連接埠為 8084，不過您可以變更此設定代理程式時。</span><span class="sxs-lookup"><span data-stu-id="7106f-271">hello default port used by NPM agents is 8084, however you can change this when you configure agents.</span></span> <span data-ttu-id="7106f-272">因此，您需要 tooensure 您的網路防火牆或 （在 Azure) 中的 NSG 規則允許 hello 連接埠的流量。</span><span class="sxs-lookup"><span data-stu-id="7106f-272">So, you need tooensure that your network firewalls or NSG rules (in Azure) are allowing traffic on hello port.</span></span> <span data-ttu-id="7106f-273">您也需要 toomake hello 本機防火牆 hello 代理程式安裝所在的電腦上確定已設定此連接埠上的 tooallow 流量。</span><span class="sxs-lookup"><span data-stu-id="7106f-273">You also need toomake sure that hello local firewall on hello computers where agents are installed is configured tooallow traffic on this port.</span></span>

<span data-ttu-id="7106f-274">您可以使用 PowerShell 指令碼 tooconfigure 防火牆規則在執行 Windows，但是必須 tooconfigure 網路防火牆以手動方式。</span><span class="sxs-lookup"><span data-stu-id="7106f-274">You can use PowerShell scripts tooconfigure firewall rules on your computers running Windows, however you need tooconfigure your network firewall manually.</span></span>

<span data-ttu-id="7106f-275">相反地，ICMP 運作不使用連接埠。</span><span class="sxs-lookup"><span data-stu-id="7106f-275">In contrast, ICMP does not operate using port.</span></span> <span data-ttu-id="7106f-276">在大部分的企業案例中，透過 hello 防火牆 tooallow toouse 網路診斷工具，例如 hello Ping 公用程式允許 ICMP 流量。</span><span class="sxs-lookup"><span data-stu-id="7106f-276">In most enterprise scenarios, ICMP traffic is permitted through hello firewalls tooallow you toouse network diagnostics tools like hello Ping utility.</span></span> <span data-ttu-id="7106f-277">因此，如果您可以 Ping 從另一部電腦，然後您可以使用 hello ICMP 通訊協定而不以手動方式需要 tooconfigure 防火牆。</span><span class="sxs-lookup"><span data-stu-id="7106f-277">So, if you can Ping one machine from another, then you can use hello ICMP protocol without having tooconfigure firewalls manually.</span></span>

> [!NOTE]
> <span data-ttu-id="7106f-278">如果您不確定哪些通訊協定 toouse，選擇使用 ICMP toostart。</span><span class="sxs-lookup"><span data-stu-id="7106f-278">In case you are not sure what protocol toouse, choose ICMP toostart with.</span></span> <span data-ttu-id="7106f-279">如果您不滿意 hello 結果，您可以一律切換 tooTCP 更新版本。</span><span class="sxs-lookup"><span data-stu-id="7106f-279">If you are not satisfied with hello results, you can always switch tooTCP later.</span></span>


#### <a name="how-tooswitch-hello-protocol"></a><span data-ttu-id="7106f-280">如何 tooswitch hello 通訊協定</span><span class="sxs-lookup"><span data-stu-id="7106f-280">How tooswitch hello protocol</span></span>

<span data-ttu-id="7106f-281">如果您選擇 toouse ICMP 在部署期間，您可以隨時切換 tooTCP，藉由編輯 hello 預設的監視規則。</span><span class="sxs-lookup"><span data-stu-id="7106f-281">If you chose toouse ICMP during deployment, you can switch tooTCP at any time by editing hello default monitoring rule.</span></span>

##### <a name="tooedit-hello-default-monitoring-rule"></a><span data-ttu-id="7106f-282">tooedit hello 預設監視規則</span><span class="sxs-lookup"><span data-stu-id="7106f-282">tooedit hello default monitoring rule</span></span>
1.  <span data-ttu-id="7106f-283">瀏覽過**網路效能** > **監視器** > **設定** > **監視器**然後按一下**預設規則**。</span><span class="sxs-lookup"><span data-stu-id="7106f-283">Navigate too**Network Performance** > **Monitor** > **Configure** > **Monitor** and then click **Default rule**.</span></span>
2.  <span data-ttu-id="7106f-284">捲動 toohello**通訊協定**區段，然後選取您想 toouse hello 通訊協定。</span><span class="sxs-lookup"><span data-stu-id="7106f-284">Scroll toohello **Protocol** section and select hello protocol that you want toouse.</span></span>
3.  <span data-ttu-id="7106f-285">按一下**儲存**tooapply hello 設定。</span><span class="sxs-lookup"><span data-stu-id="7106f-285">Click **Save** tooapply hello setting.</span></span>

<span data-ttu-id="7106f-286">即使 hello 預設規則使用特定的通訊協定，您可以使用不同的通訊協定來建立新規則。</span><span class="sxs-lookup"><span data-stu-id="7106f-286">Even if hello default rule is using a specific protocol, you can create new rules with a different protocol.</span></span> <span data-ttu-id="7106f-287">您甚至可以建立的規則，其中一些 hello 規則使用 ICMP，而另一個則使用 TCP 的混合。</span><span class="sxs-lookup"><span data-stu-id="7106f-287">You can even create a mix of rules where some of hello rules use ICMP and another uses TCP.</span></span>




## <a name="data-collection-details"></a><span data-ttu-id="7106f-288">資料收集詳細資料</span><span class="sxs-lookup"><span data-stu-id="7106f-288">Data collection details</span></span>
<span data-ttu-id="7106f-289">TCP 是選擇 」 和 「 ICMP 回應 ICMP 回應回覆時 ICMP 會被選為 hello 通訊協定 toocollect 中斷和延遲資訊時，網路效能監視器就會使用 TCP SYN-SYNACK-通知信號交換封包。</span><span class="sxs-lookup"><span data-stu-id="7106f-289">Network Performance Monitor uses TCP SYN-SYNACK-ACK handshake packets when TCP is chosen and ICMP ECHO ICMP ECHO REPLY when ICMP is chosen as hello protocol toocollect loss and latency information.</span></span> <span data-ttu-id="7106f-290">追蹤路由，也是使用的 tooget 拓撲資訊。</span><span class="sxs-lookup"><span data-stu-id="7106f-290">Traceroute is also used tooget topology information.</span></span>

<span data-ttu-id="7106f-291">hello 下表顯示資料收集方法，以及如何針對網路效能監視器收集資料的其他詳細資料。</span><span class="sxs-lookup"><span data-stu-id="7106f-291">hello following table shows data collection methods and other details about how data is collected for Network Performance Monitor.</span></span>

| <span data-ttu-id="7106f-292">平台</span><span class="sxs-lookup"><span data-stu-id="7106f-292">platform</span></span> | <span data-ttu-id="7106f-293">直接代理程式</span><span class="sxs-lookup"><span data-stu-id="7106f-293">Direct Agent</span></span> | <span data-ttu-id="7106f-294">SCOM 代理程式</span><span class="sxs-lookup"><span data-stu-id="7106f-294">SCOM agent</span></span> | <span data-ttu-id="7106f-295">Azure 儲存體</span><span class="sxs-lookup"><span data-stu-id="7106f-295">Azure Storage</span></span> | <span data-ttu-id="7106f-296">SCOM 是否為必要項目？</span><span class="sxs-lookup"><span data-stu-id="7106f-296">SCOM required?</span></span> | <span data-ttu-id="7106f-297">透過管理群組傳送的 SCOM 代理程式資料</span><span class="sxs-lookup"><span data-stu-id="7106f-297">SCOM agent data sent via management group</span></span> | <span data-ttu-id="7106f-298">收集頻率</span><span class="sxs-lookup"><span data-stu-id="7106f-298">collection frequency</span></span> |
| --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="7106f-299">Windows</span><span class="sxs-lookup"><span data-stu-id="7106f-299">Windows</span></span> | <span data-ttu-id="7106f-300">&#8226;</span><span class="sxs-lookup"><span data-stu-id="7106f-300">&#8226;</span></span> | <span data-ttu-id="7106f-301">&#8226;</span><span class="sxs-lookup"><span data-stu-id="7106f-301">&#8226;</span></span> |  |  |  |<span data-ttu-id="7106f-302">TCP 交握/ICMP ECHO 訊息會每 5 秒進行一次，而資料會每 3 分鐘傳送一次</span><span class="sxs-lookup"><span data-stu-id="7106f-302">TCP handshakes/ICMP ECHO messages every 5 seconds, data sent every 3 minutes</span></span> |

<span data-ttu-id="7106f-303">hello 解決方案會使用綜合交易的 hello 網路 tooassess hello 健全狀況。</span><span class="sxs-lookup"><span data-stu-id="7106f-303">hello solution uses synthetic transactions tooassess hello health of hello network.</span></span> <span data-ttu-id="7106f-304">OMS 代理程式與另一個在 hello 網路 exchange TCP 封包或 ICMP 回應各種點 （取決於選取要監視的 hello 通訊協定） 一起安裝。</span><span class="sxs-lookup"><span data-stu-id="7106f-304">OMS agents installed at various point in hello network exchange TCP packets or ICMP Echo (depending on hello protocol selected for monitoring) with one another.</span></span> <span data-ttu-id="7106f-305">在 hello 過程中，代理程式了解 hello 反覆存取時間和封包遺失，如果有的話。</span><span class="sxs-lookup"><span data-stu-id="7106f-305">In hello process, agents learn hello round-trip time and packet loss, if any.</span></span> <span data-ttu-id="7106f-306">定期，每個代理程式也會執行所有 hello 必須經過測試的 hello 網路中的各種路由追蹤路由 tooother 代理程式 toofind。</span><span class="sxs-lookup"><span data-stu-id="7106f-306">Periodically, each agent also performs a trace route tooother agents toofind all hello various routes in hello network that must be tested.</span></span> <span data-ttu-id="7106f-307">使用此資料 hello 代理程式可以推算 hello 網路延遲和封包遺失數字。</span><span class="sxs-lookup"><span data-stu-id="7106f-307">Using this data, hello agents can deduce hello network latency and packet loss figures.</span></span> <span data-ttu-id="7106f-308">hello 測試會每五秒的時間和資料會彙總一段三分鐘 hello 代理程式之前將它上傳 toohello 記錄分析服務中重複。</span><span class="sxs-lookup"><span data-stu-id="7106f-308">hello tests are repeated every five seconds and data is aggregated for a period of three minutes by hello agents before uploading it toohello Log Analytics service.</span></span>

> [!NOTE]
> <span data-ttu-id="7106f-309">代理程式與對方進行通訊經常，雖然它們不會產生大量網路流量時執行 hello 測試。</span><span class="sxs-lookup"><span data-stu-id="7106f-309">Although agents communicate with each other frequently, they do not generate a lot of network traffic while conducting hello tests.</span></span> <span data-ttu-id="7106f-310">代理程式僅依賴 TCP SYN-SYNACK-通知信號交換封包 toodetermine hello 遺失和延遲-交換封包的任何資料。</span><span class="sxs-lookup"><span data-stu-id="7106f-310">Agents rely only on TCP SYN-SYNACK-ACK handshake packets toodetermine hello loss and latency -- no data packets are exchanged.</span></span> <span data-ttu-id="7106f-311">在此過程中，代理程式之間的通訊方式只在需要時與 hello 代理程式通訊拓撲已最佳化 tooreduce 網路流量。</span><span class="sxs-lookup"><span data-stu-id="7106f-311">During this process, agents communicate with each other only when needed and hello agent communication topology is optimized tooreduce network traffic.</span></span>
>
>

## <a name="using-hello-solution"></a><span data-ttu-id="7106f-312">使用 hello 解決方案</span><span class="sxs-lookup"><span data-stu-id="7106f-312">Using hello solution</span></span>
<span data-ttu-id="7106f-313">本章節將說明所有 hello 儀表板函式以及 toouse 它們。</span><span class="sxs-lookup"><span data-stu-id="7106f-313">This section explains all hello dashboard functions and how toouse them.</span></span>

### <a name="solution-overview-tile"></a><span data-ttu-id="7106f-314">解決方案概觀圖格</span><span class="sxs-lookup"><span data-stu-id="7106f-314">Solution Overview tile</span></span>
<span data-ttu-id="7106f-315">啟用 hello 網路效能監視器方案之後，在 hello OMS 的 [概觀] 頁面上的 hello 方案磚會提供 hello 網路健全狀況的快速概觀。</span><span class="sxs-lookup"><span data-stu-id="7106f-315">After you've enabled hello Network Performance Monitor solution, hello solution tile on hello OMS Overview page provides a quick overview of hello network health.</span></span> <span data-ttu-id="7106f-316">它會顯示環圈圖，顯示 hello 數目狀況良好和狀況不良的子網路連結。</span><span class="sxs-lookup"><span data-stu-id="7106f-316">It displays a doughnut chart showing hello number of healthy and unhealthy subnetwork links.</span></span> <span data-ttu-id="7106f-317">當您按一下 hello 磚時，它會開啟 hello 方案儀表板。</span><span class="sxs-lookup"><span data-stu-id="7106f-317">When you click hello tile, it opens hello solution dashboard.</span></span>

![網路效能監視器圖格](./media/log-analytics-network-performance-monitor/npm-tile.png)

### <a name="network-performance-monitor-solution-dashboard"></a><span data-ttu-id="7106f-319">網路效能監視器方案儀表板</span><span class="sxs-lookup"><span data-stu-id="7106f-319">Network Performance Monitor solution dashboard</span></span>
<span data-ttu-id="7106f-320">hello**網路摘要**刀鋒視窗會顯示 hello 網路以及其相對大小的摘要。</span><span class="sxs-lookup"><span data-stu-id="7106f-320">hello **Network Summary** blade shows a summary of hello networks along with their relative size.</span></span> <span data-ttu-id="7106f-321">後面磚顯示 hello 系統 （路徑則包含與代理程式的兩部主機和它們之間的所有 hello 躍點 hello IP 位址） 中的網路連結的子網路連結和路徑的總數目。</span><span class="sxs-lookup"><span data-stu-id="7106f-321">This is followed by tiles showing total number of network links, subnet links and paths in hello system (a path consists of hello IP addresses of two hosts with agents and all hello hops between them).</span></span>

<span data-ttu-id="7106f-322">hello**頂端網路健全狀況事件**刀鋒視窗中列出的最新的健全狀況事件和警示 hello 系統與 hello 時間因為 hello 事件已在使用中。</span><span class="sxs-lookup"><span data-stu-id="7106f-322">hello **Top Network Health Events** blade provides a list of most recent health events and alerts in hello system and hello time since hello event has been active.</span></span> <span data-ttu-id="7106f-323">每當 hello 封包遺失或在網路或子網路連結的延遲超過臨界值時，會產生健全狀況事件或警示。</span><span class="sxs-lookup"><span data-stu-id="7106f-323">A health event or alert is generated whenever hello packet loss or latency of a network or subnetwork link exceeds a threshold.</span></span>

<span data-ttu-id="7106f-324">hello**頂端狀況不良的網路連結**刀鋒視窗會顯示狀況不良的網路連結的清單。</span><span class="sxs-lookup"><span data-stu-id="7106f-324">hello **Top Unhealthy Network Links** blade shows a list of unhealthy network links.</span></span> <span data-ttu-id="7106f-325">這些是為其具有一或多個健全狀況不良事件，在 hello 時刻 hello 網路連結。</span><span class="sxs-lookup"><span data-stu-id="7106f-325">These are hello network links that have one or more adverse health event for them at hello moment.</span></span>

<span data-ttu-id="7106f-326">hello**頂端最遺失的子網路連結**和**子網路連結，以最延遲**刀鋒視窗的封包遺失顯示 hello 最上層的子網路連結，並分別的子網路連結前延遲的影響。</span><span class="sxs-lookup"><span data-stu-id="7106f-326">hello **Top Subnetwork Links with Most Loss** and **Subnetwork Links with Most Latency** blades show hello top subnetwork links by packet loss and top subnetwork links by latency respectively.</span></span> <span data-ttu-id="7106f-327">特定網路連結上可能會有高度延遲或某些數量的封包遺失。</span><span class="sxs-lookup"><span data-stu-id="7106f-327">High latency or some amount of packet loss might be expected on certain network links.</span></span> <span data-ttu-id="7106f-328">這類連結會顯示 hello 前十個清單中，但未標示為狀況不良。</span><span class="sxs-lookup"><span data-stu-id="7106f-328">Such links appear in hello top ten lists but are not marked unhealthy.</span></span>

<span data-ttu-id="7106f-329">hello**常用查詢**刀鋒視窗包含一系列擷取原始的網路直接監視資料的搜尋查詢。</span><span class="sxs-lookup"><span data-stu-id="7106f-329">hello **Common Queries** blade contains a set of search queries that fetch raw network monitoring data directly.</span></span> <span data-ttu-id="7106f-330">您可以使用這些查詢做為起點，建立自己的查詢以供自訂報告。</span><span class="sxs-lookup"><span data-stu-id="7106f-330">You can use these queries as a starting point for creating your own queries for customized reporting.</span></span>

![網路效能監視器儀表板](./media/log-analytics-network-performance-monitor/npm-dash01.png)

### <a name="drill-down-for-depth"></a><span data-ttu-id="7106f-332">深入鑽研</span><span class="sxs-lookup"><span data-stu-id="7106f-332">Drill-down for depth</span></span>
<span data-ttu-id="7106f-333">您可以按一下 hello 方案儀表板 toodrill 下拉式更深入的各種連結到任何感興趣的區域。</span><span class="sxs-lookup"><span data-stu-id="7106f-333">You can click various links on hello solution dashboard toodrill-down deeper into any area of interest.</span></span> <span data-ttu-id="7106f-334">例如，當您看到警示或 hello 儀表板上出現的狀況不良的網路連結，您可以按一下它進一步 tooinvestigate。</span><span class="sxs-lookup"><span data-stu-id="7106f-334">For example, when you see an alert or an unhealthy network link appear on hello dashboard, you can click it tooinvestigate further.</span></span> <span data-ttu-id="7106f-335">您將會進入 tooa 頁面，其中列出所有 hello 子網路連結 hello 特定的網路連結。</span><span class="sxs-lookup"><span data-stu-id="7106f-335">You'll be taken tooa page that lists all hello subnetwork links for hello particular network link.</span></span> <span data-ttu-id="7106f-336">您將會無法 toosee hello 遺失、 延遲和健全狀況狀態的每一個子網路連結，快速找出哪些子網路連結產生 hello 問題。</span><span class="sxs-lookup"><span data-stu-id="7106f-336">You will be able toosee hello loss, latency and health status of each subnetwork link and quickly find out what subnetwork links are causing hello problem.</span></span> <span data-ttu-id="7106f-337">接著，您可以按一下**檢視節點連結**toosee 所有 hello 節點 hello 狀況不良的子網路連結。</span><span class="sxs-lookup"><span data-stu-id="7106f-337">You can then click **View node links** toosee all hello node links for hello unhealthy subnet link.</span></span> <span data-ttu-id="7106f-338">然後，您可以查看個別節點的連結，而尋找 hello 狀況不良的節點連結。</span><span class="sxs-lookup"><span data-stu-id="7106f-338">Then, you can see individual node-to-node links and find hello unhealthy node links.</span></span>

<span data-ttu-id="7106f-339">您可以按一下**檢視拓撲**tooview hello 躍點的躍點的拓撲，hello hello 來源與目的節點之間的路由。</span><span class="sxs-lookup"><span data-stu-id="7106f-339">You can click **View topology** tooview hello hop-by-hop topology of hello routes between hello source and destination nodes.</span></span> <span data-ttu-id="7106f-340">hello 狀況不良的路由，或以紅色顯示躍點，讓您能夠快速識別 hello 問題 tooa 特定部分 hello 網路。</span><span class="sxs-lookup"><span data-stu-id="7106f-340">hello unhealthy routes or hops are shown in red so that you can quickly identify hello problem tooa particular portion of hello network.</span></span>

![向下鑽研資料](./media/log-analytics-network-performance-monitor/npm-drill.png)

### <a name="network-state-recorder"></a><span data-ttu-id="7106f-342">網路狀態錄製器</span><span class="sxs-lookup"><span data-stu-id="7106f-342">Network State Recorder</span></span>

<span data-ttu-id="7106f-343">每個檢視會在特定時間點顯示您網路健全狀況的快照集。</span><span class="sxs-lookup"><span data-stu-id="7106f-343">Each view displays a snapshot of your network health at a particular point in time.</span></span> <span data-ttu-id="7106f-344">依預設，會顯示 hello 最新狀態。</span><span class="sxs-lookup"><span data-stu-id="7106f-344">By default, hello most recent state is shown.</span></span> <span data-ttu-id="7106f-345">在 hello hello 頁面最上方的 hello 列會顯示 hello 點正在顯示 hello 狀態的時間。</span><span class="sxs-lookup"><span data-stu-id="7106f-345">hello bar at hello top of hello page shows hello point in time for which hello state is being displayed.</span></span> <span data-ttu-id="7106f-346">您也可以在 hello 列上按一下回網路健全狀況的時間和檢視 hello 快照中選擇 toogo**動作**。</span><span class="sxs-lookup"><span data-stu-id="7106f-346">You can choose toogo back in time and view hello snapshot of your network health by clicking on hello bar on **Actions**.</span></span> <span data-ttu-id="7106f-347">您也可以選擇 tooenable 或停用自動重新整理的任何頁面，檢視 hello 最新狀態。</span><span class="sxs-lookup"><span data-stu-id="7106f-347">You can also choose tooenable or disable auto-refresh for any page while you view hello latest state.</span></span>

![網路狀態](./media/log-analytics-network-performance-monitor/network-state.png)

#### <a name="trend-charts"></a><span data-ttu-id="7106f-349">趨勢圖</span><span class="sxs-lookup"><span data-stu-id="7106f-349">Trend charts</span></span>
<span data-ttu-id="7106f-350">在每個層級，您向下鑽研，您可以看到 hello 趨勢的中斷和延遲的網路連結。</span><span class="sxs-lookup"><span data-stu-id="7106f-350">At each level that you drill-down, you can see hello trend of loss and latency for a network link.</span></span> <span data-ttu-id="7106f-351">趨勢圖也可以用於子網路和節點連結。</span><span class="sxs-lookup"><span data-stu-id="7106f-351">Trend charts are also available for Subnetwork and Node links.</span></span> <span data-ttu-id="7106f-352">您可以在 hello hello 圖表頂端使用 hello 階段控制項變更 hello 圖形 tooplot hello 時間間隔。</span><span class="sxs-lookup"><span data-stu-id="7106f-352">You can change hello time interval for hello graph tooplot by using hello time control at hello top of hello chart.</span></span>

<span data-ttu-id="7106f-353">趨勢圖表會顯示 hello 效能的網路連結的歷程記錄檢視方塊。</span><span class="sxs-lookup"><span data-stu-id="7106f-353">Trend charts show you a historical perspective of hello performance of a network link.</span></span> <span data-ttu-id="7106f-354">某些網路問題是暫時性的本質，因此只能藉由查看 hello hello 網路的目前的狀態會永久 toocatch。</span><span class="sxs-lookup"><span data-stu-id="7106f-354">Some network issues are transient in nature and would be hard toocatch only by looking at hello current state of hello network.</span></span> <span data-ttu-id="7106f-355">這是因為問題可以快速介面，並會消失之前，只有 tooreappear 在稍後的時間。</span><span class="sxs-lookup"><span data-stu-id="7106f-355">This is because issues can surface quickly and disappear before anyone notices, only tooreappear at a later point in time.</span></span> <span data-ttu-id="7106f-356">因為這些問題通常介面應用程式回應時間，即使所有的應用程式元件會出現 toorun 順暢地解釋增加時，這類暫時性的問題可以也很難應用程式系統管理員。</span><span class="sxs-lookup"><span data-stu-id="7106f-356">Such transient issues can also be difficult for application administrators because those issues often surface as unexplained increases in application response time, even when all application components appear toorun smoothly.</span></span>

<span data-ttu-id="7106f-357">藉由查看趨勢圖表，其中 hello 問題將會顯示為網路延遲或封包遺失中突然出現尖峰，可以輕鬆地偵測這些種類的問題。</span><span class="sxs-lookup"><span data-stu-id="7106f-357">You can easily detect those kinds of issues by looking at a trend chart where hello issue will appear as a sudden spike in network latency or packet loss.</span></span>

![趨勢圖](./media/log-analytics-network-performance-monitor/npm-trend.png)

#### <a name="hop-by-hop-topology-map"></a><span data-ttu-id="7106f-359">逐一躍點的拓撲圖</span><span class="sxs-lookup"><span data-stu-id="7106f-359">Hop-by-hop topology map</span></span>
<span data-ttu-id="7106f-360">網路效能監視器顯示 hello 的互動式拓撲地圖上的兩個節點之間的路由拓撲，躍點的躍點。</span><span class="sxs-lookup"><span data-stu-id="7106f-360">Network Performance Monitor shows you hello hop-by-hop topology of routes between two nodes on an interactive topology map.</span></span> <span data-ttu-id="7106f-361">您可以檢視 hello 拓樸對應選取的節點連結，然後按一下**檢視拓撲**。</span><span class="sxs-lookup"><span data-stu-id="7106f-361">You can view hello topology map by selecting a node link and then clicking **View topology**.</span></span> <span data-ttu-id="7106f-362">此外，您可以檢視 hello 拓撲對應，即可**路徑**hello 儀表板上的磚。</span><span class="sxs-lookup"><span data-stu-id="7106f-362">Also, you can view hello topology map by clicking **Paths** tile on hello dashboard.</span></span> <span data-ttu-id="7106f-363">當您按一下**路徑**hello 儀表板，您必須 tooselect hello 從 hello 左側面板中的來源和目的地節點，然後按一下**繪製**tooplot hello hello 兩個節點之間的路由。</span><span class="sxs-lookup"><span data-stu-id="7106f-363">When you click **Paths** on hello dashboard, you'll have tooselect hello source and destination nodes from hello left hand panel and then click **Plot** tooplot hello routes between hello two nodes.</span></span>

<span data-ttu-id="7106f-364">hello 拓撲地圖會顯示多少路由 hello 之間兩個節點，而且是哪個路徑 hello 封包需要的資料。</span><span class="sxs-lookup"><span data-stu-id="7106f-364">hello topology map displays how many routes are between hello two nodes and what paths hello data packets take.</span></span> <span data-ttu-id="7106f-365">Hello 拓撲地圖上的紅色標示的網路效能瓶頸。</span><span class="sxs-lookup"><span data-stu-id="7106f-365">Network performance bottlenecks are marked in red on hello topology map.</span></span> <span data-ttu-id="7106f-366">您可以查看 hello 拓撲地圖上的紅色彩色的元素，以找出故障的網路連線或故障的網路裝置。</span><span class="sxs-lookup"><span data-stu-id="7106f-366">You can locate a faulty network connection or a faulty network device by looking at red colored elements on hello topology map.</span></span>

<span data-ttu-id="7106f-367">當您在 hello 拓撲地圖上，按一下節點或動態顯示透過它時，您會看到像 FQDN 和 IP 位址的 hello 節點的 hello 屬性。</span><span class="sxs-lookup"><span data-stu-id="7106f-367">When you click a node or hover over it on hello topology map, you'll see hello properties of hello node like FQDN and IP address.</span></span> <span data-ttu-id="7106f-368">按一下 躍點 toosee 是 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="7106f-368">Click a hop toosee it's IP address.</span></span> <span data-ttu-id="7106f-369">您可以使用 hello 可摺疊動作 窗格中的 hello 篩選器選擇 toofilter 特定路由。</span><span class="sxs-lookup"><span data-stu-id="7106f-369">You can choose toofilter particular routes by using hello filters in hello collapsible action pane.</span></span> <span data-ttu-id="7106f-370">此外，您也可以藉由隱藏 hello 中繼躍點使用 hello 動作 窗格中的 hello 滑桿來簡化 hello 網路拓撲。</span><span class="sxs-lookup"><span data-stu-id="7106f-370">And, you can also simplify hello network topologies by hiding hello intermediate hops using hello slider in hello action pane.</span></span> <span data-ttu-id="7106f-371">您可以放大或使用滑鼠滾輪超出 hello 拓撲地圖。</span><span class="sxs-lookup"><span data-stu-id="7106f-371">You can zoom-in or out of hello topology map by using your mouse wheel.</span></span>

<span data-ttu-id="7106f-372">請注意 hello 地圖中顯示該 hello 拓撲是第 3 層拓撲，而且未包含第 2 層裝置與連接。</span><span class="sxs-lookup"><span data-stu-id="7106f-372">Note that hello topology shown in hello map is layer 3 topology and doesn't contain layer 2 devices and connections.</span></span>

![逐一躍點的拓撲圖](./media/log-analytics-network-performance-monitor/npm-topology.png)

#### <a name="fault-localization"></a><span data-ttu-id="7106f-374">錯誤局部化</span><span class="sxs-lookup"><span data-stu-id="7106f-374">Fault localization</span></span>
<span data-ttu-id="7106f-375">網路效能監視器 」 是可以 toofind hello 網路瓶頸，而不需要連線 toohello 網路裝置。</span><span class="sxs-lookup"><span data-stu-id="7106f-375">Network Performance Monitor is able toofind hello network bottlenecks without connecting toohello network devices.</span></span> <span data-ttu-id="7106f-376">網路效能監視器 根據 hello 收集資料，它 hello 網路以及 hello 網路圖形上套用進階的演算法，讓 hello 的部分網路 hello 問題最可能 hello 來源的機率估計。</span><span class="sxs-lookup"><span data-stu-id="7106f-376">Based on hello data that it gathers from hello network and by applying advanced algorithms on hello network graph, Network Performance Monitor makes a probabilistic estimate of hello parts of network that are most likely hello source of hello problem.</span></span>

<span data-ttu-id="7106f-377">存取 toohops 無法使用，因為它不需要從 hello 網路裝置，例如路由器或交換器收集任何資料 toobe 時，這個方法會很有用的 toodetermine hello 網路瓶頸。</span><span class="sxs-lookup"><span data-stu-id="7106f-377">This approach is useful toodetermine hello network bottlenecks when access toohops isn't available because it doesn't require any data toobe gathered from hello network devices such as routers or switches.</span></span> <span data-ttu-id="7106f-378">當兩個節點之間的 hello 躍點不在您的系統管理控制，這是也很有用。</span><span class="sxs-lookup"><span data-stu-id="7106f-378">This is also useful when hello hops between two nodes are not in your administrative control.</span></span> <span data-ttu-id="7106f-379">例如，hello 躍點可能 ISP 路由器。</span><span class="sxs-lookup"><span data-stu-id="7106f-379">For example, hello hops may be ISP routers.</span></span>

### <a name="log-analytics-search"></a><span data-ttu-id="7106f-380">Log Analytics 搜尋</span><span class="sxs-lookup"><span data-stu-id="7106f-380">Log Analytics search</span></span>
<span data-ttu-id="7106f-381">透過 hello 網路效能監視器儀表板和向下鑽研頁面以圖形方式公開的所有資料也都會記錄分析搜尋中原本提供的。</span><span class="sxs-lookup"><span data-stu-id="7106f-381">All data that is exposed graphically through hello Network Performance Monitor dashboard and drill-down pages is also available natively in Log Analytics search.</span></span> <span data-ttu-id="7106f-382">您可以查詢 hello 資料使用 hello 搜尋查詢語言，並藉由匯出 hello 資料 tooExcel 或 power Bi 建立自訂報表。</span><span class="sxs-lookup"><span data-stu-id="7106f-382">You can query hello data using hello search query language and create custom reports by exporting hello data tooExcel or PowerBI.</span></span> <span data-ttu-id="7106f-383">hello**常用查詢**hello 儀表板中的分頁有一些有用的查詢可作為 hello 起點來建立您自己的查詢和報表。</span><span class="sxs-lookup"><span data-stu-id="7106f-383">hello **Common Queries** blade in hello dashboard has some useful queries that you can use as hello starting point for creating your own queries and reports.</span></span>

![搜尋查詢](./media/log-analytics-network-performance-monitor/npm-queries.png)

## <a name="investigate-hello-root-cause-of-a-health-alert"></a><span data-ttu-id="7106f-385">調查 hello 根本原因的健康狀態警示</span><span class="sxs-lookup"><span data-stu-id="7106f-385">Investigate hello root cause of a health alert</span></span>
<span data-ttu-id="7106f-386">既然您已閱讀網路效能監視器，讓我們看看 hello 根本原因的健全狀況事件簡單的調查。</span><span class="sxs-lookup"><span data-stu-id="7106f-386">Now that you've read about Network Performance Monitor, let's look at a simple investigation into hello root-cause for a health event.</span></span>

1. <span data-ttu-id="7106f-387">在 hello 概觀頁面上，您會取得您網路的 hello 健全狀況的快速快照集觀察 hello**網路效能監視器**磚。</span><span class="sxs-lookup"><span data-stu-id="7106f-387">On hello Overview page, you'll get a quick snapshot of hello health of your network by observing hello **Network Performance Monitor** tile.</span></span> <span data-ttu-id="7106f-388">請注意，超出 hello 6 子網路連結受監視的狀況不良 2。</span><span class="sxs-lookup"><span data-stu-id="7106f-388">Notice that out of hello 6 subnetworks links being monitored, 2 are unhealthy.</span></span> <span data-ttu-id="7106f-389">這值得調查一下。</span><span class="sxs-lookup"><span data-stu-id="7106f-389">This warrants investigation.</span></span> <span data-ttu-id="7106f-390">按一下 hello 磚 tooview hello 方案儀表板。</span><span class="sxs-lookup"><span data-stu-id="7106f-390">Click hello tile tooview hello solution dashboard.</span></span>  
   <span data-ttu-id="7106f-391">![網路效能監視器圖格](./media/log-analytics-network-performance-monitor/npm-investigation01.png)</span><span class="sxs-lookup"><span data-stu-id="7106f-391">![Network Performance Monitor tile](./media/log-analytics-network-performance-monitor/npm-investigation01.png)</span></span>
2. <span data-ttu-id="7106f-392">在 hello 範例圖，您會發現沒有健全狀況事件會處於狀況不良的網路連結。</span><span class="sxs-lookup"><span data-stu-id="7106f-392">In hello example image below, you'll notice that there is a health event a network link that is unhealthy.</span></span> <span data-ttu-id="7106f-393">您決定 tooinvestigate hello 問題，然後按一下 hello **DMZ2 DMZ1**網路連結 toofind 出 hello 問題的 hello 根。</span><span class="sxs-lookup"><span data-stu-id="7106f-393">You decide tooinvestigate hello issue and click on hello **DMZ2-DMZ1** network link toofind out hello root of hello problem.</span></span>  
   <span data-ttu-id="7106f-394">![狀況不良的網路連結範例](./media/log-analytics-network-performance-monitor/npm-investigation02.png)</span><span class="sxs-lookup"><span data-stu-id="7106f-394">![unhealthy network link example](./media/log-analytics-network-performance-monitor/npm-investigation02.png)</span></span>
3. <span data-ttu-id="7106f-395">hello 向下鑽研頁面會顯示在所有 hello 子網路連結**DMZ2 DMZ1**網路連結。</span><span class="sxs-lookup"><span data-stu-id="7106f-395">hello drill-down page shows all hello subnetwork links in **DMZ2-DMZ1** network link.</span></span> <span data-ttu-id="7106f-396">您會發現，這兩個 hello 的子網路連結，hello 延遲已越過 hello 閾值進行 hello 網路連結狀況不良。</span><span class="sxs-lookup"><span data-stu-id="7106f-396">You'll notice that for both hello subnetwork links, hello latency has crossed hello threshold making hello network link unhealthy.</span></span> <span data-ttu-id="7106f-397">您也可以查看這兩個 hello 子網路連結的 hello 延遲趨勢。</span><span class="sxs-lookup"><span data-stu-id="7106f-397">You can also see hello latency trends of both hello subnetwork links.</span></span> <span data-ttu-id="7106f-398">您可以使用在 hello 圖形 toofocus hello 上的選取控制項所需的時間範圍內的 hello 時間。</span><span class="sxs-lookup"><span data-stu-id="7106f-398">You can use hello time selection control in hello graph toofocus on hello required time range.</span></span> <span data-ttu-id="7106f-399">您可以看到 hello hello 一天的時間延遲已到達其尖峰。</span><span class="sxs-lookup"><span data-stu-id="7106f-399">You can see hello time of hello day when latency has reached its peak.</span></span> <span data-ttu-id="7106f-400">您可在稍後搜尋這個問題的時間週期 tooinvestigate hello 的 hello 記錄檔。</span><span class="sxs-lookup"><span data-stu-id="7106f-400">You can later search hello logs for this time period tooinvestigate hello issue.</span></span> <span data-ttu-id="7106f-401">按一下**檢視節點連結**toodrill 下拉式進一步。</span><span class="sxs-lookup"><span data-stu-id="7106f-401">Click **View node links** toodrill-down further.</span></span>  
   <span data-ttu-id="7106f-402">![狀況不良的子網路連結範例](./media/log-analytics-network-performance-monitor/npm-investigation03.png)</span><span class="sxs-lookup"><span data-stu-id="7106f-402">![unhealthy subnet links example](./media/log-analytics-network-performance-monitor/npm-investigation03.png)</span></span>
4. <span data-ttu-id="7106f-403">類似 toohello 前一頁，hello 特定子網路連結的 hello 向下鑽研頁面列出其構成的節點連結。</span><span class="sxs-lookup"><span data-stu-id="7106f-403">Similar toohello previous page, hello drill-down page for hello particular subnetwork link lists down its constituent node links.</span></span> <span data-ttu-id="7106f-404">您可以執行類似動作這裡 hello 上一個步驟中一樣。</span><span class="sxs-lookup"><span data-stu-id="7106f-404">You can perform similar actions  here as you did in hello previous step.</span></span> <span data-ttu-id="7106f-405">按一下**檢視拓撲**tooview hello 拓撲 hello 2 節點之間。</span><span class="sxs-lookup"><span data-stu-id="7106f-405">Click **View topology** tooview hello topology between hello 2 nodes.</span></span>  
   <span data-ttu-id="7106f-406">![狀況不良的節點連結範例](./media/log-analytics-network-performance-monitor/npm-investigation04.png)</span><span class="sxs-lookup"><span data-stu-id="7106f-406">![unhealthy node links example](./media/log-analytics-network-performance-monitor/npm-investigation04.png)</span></span>
5. <span data-ttu-id="7106f-407">Hello 拓撲地圖繪製 hello 2 選取節點之間的所有 hello 路徑。</span><span class="sxs-lookup"><span data-stu-id="7106f-407">All hello paths between hello 2 selected nodes are plotted in hello topology map.</span></span> <span data-ttu-id="7106f-408">您可以視覺化 hello 躍點的躍點拓撲的 hello 拓撲地圖上的兩個節點之間的路由。</span><span class="sxs-lookup"><span data-stu-id="7106f-408">You can visualize hello hop-by-hop topology of routes between two nodes on hello topology map.</span></span> <span data-ttu-id="7106f-409">它可讓您清楚地了解的 hello 兩個節點之間有多少的路由和哪些路徑 hello 資料封包花費的時間。</span><span class="sxs-lookup"><span data-stu-id="7106f-409">It gives you a clear picture of how many routes exist between hello two nodes and what paths hello data packets are taking.</span></span> <span data-ttu-id="7106f-410">網路效能瓶頸會標示為紅色。</span><span class="sxs-lookup"><span data-stu-id="7106f-410">Network performance bottlenecks are marked in red color.</span></span> <span data-ttu-id="7106f-411">您可以查看 hello 拓撲地圖上的紅色彩色的元素，以找出故障的網路連線或故障的網路裝置。</span><span class="sxs-lookup"><span data-stu-id="7106f-411">You can locate a faulty network connection or a faulty network device by looking at red colored elements on hello topology map.</span></span>  
   ![狀況不良的拓撲檢視範例](./media/log-analytics-network-performance-monitor/npm-investigation05.png)
6. <span data-ttu-id="7106f-413">檢閱 hello 遺失、 延遲和躍點，每個路徑中的 hello 數目 hello**動作**窗格。</span><span class="sxs-lookup"><span data-stu-id="7106f-413">hello loss, latency, and hello number of hops in each path can be reviewed in hello **Action** pane.</span></span> <span data-ttu-id="7106f-414">使用 hello 捲軸 tooview hello 路徑的詳細資料的狀況不良。</span><span class="sxs-lookup"><span data-stu-id="7106f-414">Use hello scrollbar tooview hello details of those unhealthy paths.</span></span>  <span data-ttu-id="7106f-415">使用 hello 篩選 tooselect hello 路徑使用 hello 狀況不良的躍點的繪製 hello 拓撲只 hello 選取路徑。</span><span class="sxs-lookup"><span data-stu-id="7106f-415">Use hello filters tooselect hello paths with hello unhealthy hop so that hello topology for only hello selected paths is plotted.</span></span> <span data-ttu-id="7106f-416">您可以使用您的滑鼠滾輪 toozoom 內外 hello 拓撲地圖。</span><span class="sxs-lookup"><span data-stu-id="7106f-416">You can use your mouse wheel toozoom in or out of hello topology map.</span></span>

   <span data-ttu-id="7106f-417">在影像下方的 hello 您可以清楚地看到藉由查看 hello 路徑和躍點紅色 hello hello 問題區域 toohello 特定區段的 hello 網路的根本原因。</span><span class="sxs-lookup"><span data-stu-id="7106f-417">In hello below image you can clearly see hello root-cause of hello problem areas toohello specific section of hello network by looking at hello paths and hops in red color.</span></span> <span data-ttu-id="7106f-418">Hello 拓撲 map 中的節點上按一下，就會顯示 hello hello 節點，包含 hello FQDN 和 IP 位址屬性。</span><span class="sxs-lookup"><span data-stu-id="7106f-418">Clicking on a node in hello topology map reveals hello properties of hello node, including hello FQDN, and IP address.</span></span> <span data-ttu-id="7106f-419">按一下 上一個躍點顯示 hello hello 躍點 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="7106f-419">Clicking on a hop shows hello IP address of hello hop.</span></span>  
   ![狀況不良的拓撲 - 路徑詳細資料範例](./media/log-analytics-network-performance-monitor/npm-investigation06.png)

## <a name="provide-feedback"></a><span data-ttu-id="7106f-421">提供意見反應</span><span class="sxs-lookup"><span data-stu-id="7106f-421">Provide feedback</span></span>

- <span data-ttu-id="7106f-422">**UserVoice** -您可以在網路效能監視器功能，您希望我們採取何 toowork 上張貼您的想法。</span><span class="sxs-lookup"><span data-stu-id="7106f-422">**UserVoice** - You can post your ideas for Network Performance Monitor features that you want us toowork on.</span></span> <span data-ttu-id="7106f-423">造訪 [UserVoice 頁面](https://feedback.azure.com/forums/267889-log-analytics/category/188146-network-monitoring)。</span><span class="sxs-lookup"><span data-stu-id="7106f-423">Visit our [UserVoice page](https://feedback.azure.com/forums/267889-log-analytics/category/188146-network-monitoring).</span></span>
- <span data-ttu-id="7106f-424">**加入我們的社群** - 我們竭誠歡迎新客戶加入我們的社群。</span><span class="sxs-lookup"><span data-stu-id="7106f-424">**Join our cohort** - We’re always interested in having new customers join our cohort.</span></span> <span data-ttu-id="7106f-425">它的一部分，您會取得早期存取 toonew 功能，並協助我們改善網路效能監視器。</span><span class="sxs-lookup"><span data-stu-id="7106f-425">As part of it, you'll get early access toonew features and help us improve Network Performance Monitor.</span></span> <span data-ttu-id="7106f-426">如果您想加入，請填妥這份[快速問卷調查](https://aka.ms/npmcohort)。</span><span class="sxs-lookup"><span data-stu-id="7106f-426">If you're interested in joining, fill-out this [quick survey](https://aka.ms/npmcohort).</span></span>

## <a name="next-steps"></a><span data-ttu-id="7106f-427">後續步驟</span><span class="sxs-lookup"><span data-stu-id="7106f-427">Next steps</span></span>
* <span data-ttu-id="7106f-428">[搜尋記錄](log-analytics-log-searches.md)tooview 詳細的網路效能資料記錄。</span><span class="sxs-lookup"><span data-stu-id="7106f-428">[Search logs](log-analytics-log-searches.md) tooview detailed network performance data records.</span></span>
