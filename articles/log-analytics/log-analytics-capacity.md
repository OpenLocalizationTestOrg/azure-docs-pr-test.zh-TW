---
title: "Azure Log Analytics 中的容量和效能解決方案 | Microsoft Docs"
description: "使用 Log Analytics 中的容量和效能解決方案，來協助您了解 Hyper-V 伺服器的容量。"
services: log-analytics
documentationcenter: 
author: bandersmsft
manager: carmonm
editor: 
ms.assetid: 51617a6f-ffdd-4ed2-8b74-1257149ce3d4
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: banders
ms.openlocfilehash: 5ca005127721092b8efcf0ac83cc967ab15fe72d
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/03/2017
---
# <a name="plan-hyper-v-virtual-machine-capacity-with-the-capacity-and-performance-solution-preview"></a><span data-ttu-id="17463-103">使用容量和效能解決方案來規劃 Hyper-V 虛擬機器容量 (預覽)</span><span class="sxs-lookup"><span data-stu-id="17463-103">Plan Hyper-V virtual machine capacity with the Capacity and Performance solution (Preview)</span></span>

![容量與效能符號](./media/log-analytics-capacity/capacity-solution.png)

<span data-ttu-id="17463-105">您可以使用 Log Analytics 中的容量和效能解決方案，來協助您了解 Hyper-V 伺服器的容量。</span><span class="sxs-lookup"><span data-stu-id="17463-105">You can use the Capacity and Performance solution in Log Analytics to help you understand the capacity of your Hyper-V servers.</span></span> <span data-ttu-id="17463-106">這個解決方案可顯示主機以及在這些 Hyper-V 主機上執行之 VM 的整體使用率 (CPU、記憶體和磁碟)，以讓您深入了解 Hyper-V 環境。</span><span class="sxs-lookup"><span data-stu-id="17463-106">The solution provides insights into your Hyper-V environment by showing you the overall utilization (CPU, memory, and disk) of the hosts and the VMs running on those Hyper-V hosts.</span></span> <span data-ttu-id="17463-107">系統會跨所有主機和在其上執行的 VM 來收集 CPU、記憶體和磁碟的計量。</span><span class="sxs-lookup"><span data-stu-id="17463-107">Metrics are collected for CPU, memory, and disks across all your hosts and the VMs running on them.</span></span>

<span data-ttu-id="17463-108">此解決方案：</span><span class="sxs-lookup"><span data-stu-id="17463-108">The solution:</span></span>

-   <span data-ttu-id="17463-109">顯示 CPU 和記憶體使用率最高與最低的主機</span><span class="sxs-lookup"><span data-stu-id="17463-109">Shows hosts with highest and lowest CPU and memory utilization</span></span>
-   <span data-ttu-id="17463-110">顯示 CPU 和記憶體使用率最高與最低的 VM</span><span class="sxs-lookup"><span data-stu-id="17463-110">Shows VMs with highest and lowest CPU and memory utilization</span></span>
-   <span data-ttu-id="17463-111">顯示 IOPS 和輸送量使用率最高與最低的 VM</span><span class="sxs-lookup"><span data-stu-id="17463-111">Shows VMs with highest and lowest IOPS and throughput utilization</span></span>
-   <span data-ttu-id="17463-112">顯示哪些 VM 在哪些主機上執行</span><span class="sxs-lookup"><span data-stu-id="17463-112">Shows which VMs are running on which hosts</span></span>
-   <span data-ttu-id="17463-113">顯示在叢集共用磁碟區內具有高輸送量、IOPS 和延遲的前幾大磁碟</span><span class="sxs-lookup"><span data-stu-id="17463-113">Shows the top disks with high throughput, IOPS, and latency in cluster shared volumes</span></span>
- <span data-ttu-id="17463-114">可讓您根據群組進行自訂和篩選</span><span class="sxs-lookup"><span data-stu-id="17463-114">Allows you to customize and filter based on groups</span></span>

> [!NOTE]
> <span data-ttu-id="17463-115">舊版的容量和效能解決方案稱為「容量管理」，其同時需要 System Center Operations Manager 和 System Center Virtual Machine Manager。</span><span class="sxs-lookup"><span data-stu-id="17463-115">The previous version of the Capacity and Performance solution called Capacity Management required both System Center Operations Manager and System Center Virtual Machine Manager.</span></span> <span data-ttu-id="17463-116">這個經過更新的解決方案則沒有這些相依性。</span><span class="sxs-lookup"><span data-stu-id="17463-116">This updated solution doesn't have those dependencies.</span></span>


## <a name="connected-sources"></a><span data-ttu-id="17463-117">連接的來源</span><span class="sxs-lookup"><span data-stu-id="17463-117">Connected sources</span></span>

<span data-ttu-id="17463-118">下表描述此方案支援的連接來源。</span><span class="sxs-lookup"><span data-stu-id="17463-118">The following table describes the connected sources that are supported by this solution.</span></span>

| <span data-ttu-id="17463-119">連接的來源</span><span class="sxs-lookup"><span data-stu-id="17463-119">Connected Source</span></span> | <span data-ttu-id="17463-120">支援</span><span class="sxs-lookup"><span data-stu-id="17463-120">Support</span></span> | <span data-ttu-id="17463-121">說明</span><span class="sxs-lookup"><span data-stu-id="17463-121">Description</span></span> |
|---|---|---|
| [<span data-ttu-id="17463-122">Windows 代理程式</span><span class="sxs-lookup"><span data-stu-id="17463-122">Windows agents</span></span>](log-analytics-windows-agents.md) | <span data-ttu-id="17463-123">是</span><span class="sxs-lookup"><span data-stu-id="17463-123">Yes</span></span> | <span data-ttu-id="17463-124">解決方案會從 Windows 代理程式收集容量和效能資料的資訊。</span><span class="sxs-lookup"><span data-stu-id="17463-124">The solution collects capacity and performance data information from Windows agents.</span></span> |
| [<span data-ttu-id="17463-125">Linux 代理程式</span><span class="sxs-lookup"><span data-stu-id="17463-125">Linux agents</span></span>](log-analytics-linux-agents.md) | <span data-ttu-id="17463-126">否</span><span class="sxs-lookup"><span data-stu-id="17463-126">No</span></span>    | <span data-ttu-id="17463-127">解決方案不會從直接 Linux 代理程式收集容量和效能資料的資訊。</span><span class="sxs-lookup"><span data-stu-id="17463-127">The solution does not collect capacity and performance data information from direct Linux agents.</span></span>|
| [<span data-ttu-id="17463-128">SCOM 管理群組</span><span class="sxs-lookup"><span data-stu-id="17463-128">SCOM management group</span></span>](log-analytics-om-agents.md) | <span data-ttu-id="17463-129">是</span><span class="sxs-lookup"><span data-stu-id="17463-129">Yes</span></span> |<span data-ttu-id="17463-130">解決方案會從已連線之 SCOM 管理群組中的代理程式收集容量和效能資料。</span><span class="sxs-lookup"><span data-stu-id="17463-130">The solution collects capacity and performance data from agents in a connected SCOM management group.</span></span> <span data-ttu-id="17463-131">不需要從 SCOM 代理程式直接連線到 OMS。</span><span class="sxs-lookup"><span data-stu-id="17463-131">A direct connection from the SCOM agent to OMS is not required.</span></span> <span data-ttu-id="17463-132">資料會從管理群組轉送至 OMS 儲存機制。</span><span class="sxs-lookup"><span data-stu-id="17463-132">Data is forwarded from the management group to the OMS repository.</span></span>|
| [<span data-ttu-id="17463-133">Azure 儲存體帳戶</span><span class="sxs-lookup"><span data-stu-id="17463-133">Azure storage account</span></span>](log-analytics-azure-storage.md) | <span data-ttu-id="17463-134">否</span><span class="sxs-lookup"><span data-stu-id="17463-134">No</span></span> | <span data-ttu-id="17463-135">Azure 儲存體不包含容量和效能資料。</span><span class="sxs-lookup"><span data-stu-id="17463-135">Azure storage does not include capacity and performance data.</span></span>|

## <a name="prerequisites"></a><span data-ttu-id="17463-136">必要條件</span><span class="sxs-lookup"><span data-stu-id="17463-136">Prerequisites</span></span>

- <span data-ttu-id="17463-137">Windows 或 Operations Manager 代理程式必須安裝在 Windows Server 2012 或更新版本的 Hyper-V 主機上，而非安裝在虛擬機器上。</span><span class="sxs-lookup"><span data-stu-id="17463-137">Windows or Operations Manager agents must be installed on Windows Server 2012 or higher Hyper-V hosts, not virtual machines.</span></span>


## <a name="configuration"></a><span data-ttu-id="17463-138">組態</span><span class="sxs-lookup"><span data-stu-id="17463-138">Configuration</span></span>

<span data-ttu-id="17463-139">執行下列步驟以將容量和效能解決方案新增至您的工作區。</span><span class="sxs-lookup"><span data-stu-id="17463-139">Perform the following step to add the Capacity and Performance solution to your workspace.</span></span>

- <span data-ttu-id="17463-140">使用[從方案庫加入 Log Analytics 方案](log-analytics-add-solutions.md)所述的程序，將容量和效能解決方案新增至您的 OMS 工作區。</span><span class="sxs-lookup"><span data-stu-id="17463-140">Add the Capacity and Performance solution to your OMS workspace using the process described in [Add Log Analytics solutions from the Solutions Gallery](log-analytics-add-solutions.md).</span></span>

## <a name="management-packs"></a><span data-ttu-id="17463-141">管理組件</span><span class="sxs-lookup"><span data-stu-id="17463-141">Management packs</span></span>

<span data-ttu-id="17463-142">如果 SCOM 管理群組已連線到 OMS 工作區，當您加入此方案時，下列管理組件會安裝在 SCOM 中。</span><span class="sxs-lookup"><span data-stu-id="17463-142">If your SCOM management group is connected to your OMS workspace, then the following management packs will be installed in SCOM when you add this solution.</span></span> <span data-ttu-id="17463-143">這些管理組件不需要任何設定或維護。</span><span class="sxs-lookup"><span data-stu-id="17463-143">There is no configuration or maintenance of these management packs required.</span></span>

- <span data-ttu-id="17463-144">Microsoft.IntelligencePacks.CapacityPerformance</span><span class="sxs-lookup"><span data-stu-id="17463-144">Microsoft.IntelligencePacks.CapacityPerformance</span></span>

<span data-ttu-id="17463-145">1201 事件類似︰</span><span class="sxs-lookup"><span data-stu-id="17463-145">The 1201 event resembles:</span></span>


```
New Management Pack with id:"Microsoft.IntelligencePacks.CapacityPerformance", version:"1.10.3190.0" received.
```

<span data-ttu-id="17463-146">當容量和效能解決方案更新時，其版本號碼也會變更。</span><span class="sxs-lookup"><span data-stu-id="17463-146">When the Capacity and Performance solution is updated, the version number will change.</span></span>

<span data-ttu-id="17463-147">如需有關方案管理組件如何更新的詳細資訊，請參閱 [將 Operations Manager 連接到 Log Analytics](log-analytics-om-agents.md)。</span><span class="sxs-lookup"><span data-stu-id="17463-147">For more information on how solution management packs are updated, see [Connect Operations Manager to Log Analytics](log-analytics-om-agents.md).</span></span>

## <a name="using-the-solution"></a><span data-ttu-id="17463-148">使用解決方案</span><span class="sxs-lookup"><span data-stu-id="17463-148">Using the solution</span></span>

<span data-ttu-id="17463-149">當您將容量和效能解決方案新增至工作區時，[概觀] 儀表板中會新增 [容量和效能]。</span><span class="sxs-lookup"><span data-stu-id="17463-149">When you add the Capacity and Performance solution to your workspace, the Capacity and Performance is added to the Overview dashboard.</span></span> <span data-ttu-id="17463-150">此圖格會顯示目前作用中的 Hyper-V 主機數目，以及所選時段內受監視的作用中虛擬機器數目。</span><span class="sxs-lookup"><span data-stu-id="17463-150">This tile displays a count of the number of currently active Hyper-V hosts  and the number of active virtual machines that were monitored for the time period selected.</span></span>

![[容量和效能] 圖格](./media/log-analytics-capacity/capacity-tile.png)


### <a name="review-utilization"></a><span data-ttu-id="17463-152">檢閱使用率</span><span class="sxs-lookup"><span data-stu-id="17463-152">Review utilization</span></span>

<span data-ttu-id="17463-153">按一下 [容量和效能] 圖格，即可開啟 [容量和效能] 儀表板。</span><span class="sxs-lookup"><span data-stu-id="17463-153">Click on the Capacity and Performance tile to open the Capacity and Performance dashboard.</span></span> <span data-ttu-id="17463-154">此儀表板包含下表中的資料行。</span><span class="sxs-lookup"><span data-stu-id="17463-154">The dashboard includes the columns in the following table.</span></span> <span data-ttu-id="17463-155">每個資料行最多會列出十個符合該資料行中指定範圍和時間範圍之準則的項目。</span><span class="sxs-lookup"><span data-stu-id="17463-155">Each column lists up to ten items matching that column's criteria for the specified scope and time range.</span></span> <span data-ttu-id="17463-156">您可以按一下資料行底部的 [查看全部]，或按一下資料行標頭，以執行記錄檔搜尋來傳回所有記錄。</span><span class="sxs-lookup"><span data-stu-id="17463-156">You can run a log search that returns all records by clicking **See all** at the bottom of the column or by clicking the column header.</span></span>

- <span data-ttu-id="17463-157">**主機**</span><span class="sxs-lookup"><span data-stu-id="17463-157">**Hosts**</span></span>
    - <span data-ttu-id="17463-158">**主機 CPU 使用率** 根據所選時段以圖表顯示主機電腦的 CPU 使用率趨勢和主機清單。</span><span class="sxs-lookup"><span data-stu-id="17463-158">**Host CPU Utilization** Shows a graphical trend of the CPU utilization of host computers and a list of hosts, based on the selected time period.</span></span> <span data-ttu-id="17463-159">將滑鼠暫留在折線圖上，可檢視特定時間點的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="17463-159">Hover over the line chart to view details for a specific point in time.</span></span> <span data-ttu-id="17463-160">按一下折線圖可在記錄搜尋中檢視更多詳細資料。</span><span class="sxs-lookup"><span data-stu-id="17463-160">Click the chart to view more details in log search.</span></span> <span data-ttu-id="17463-161">按一下任何主機名稱可開啟記錄搜尋並檢視所裝載 VM 的 CPU 計數器詳細資料。</span><span class="sxs-lookup"><span data-stu-id="17463-161">Click any host name to open log search and view CPU counter details for hosted VMs.</span></span>
    - <span data-ttu-id="17463-162">**主機記憶體使用率** 根據所選時段以圖表顯示主機電腦的記憶體使用率趨勢和主機清單。</span><span class="sxs-lookup"><span data-stu-id="17463-162">**Host Memory Utilization** Shows a graphical trend of the memory utilization of host computers and a list of hosts, based on the selected time period.</span></span> <span data-ttu-id="17463-163">將滑鼠暫留在折線圖上，可檢視特定時間點的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="17463-163">Hover over the line chart to view details for a specific point in time.</span></span> <span data-ttu-id="17463-164">按一下折線圖可在記錄搜尋中檢視更多詳細資料。</span><span class="sxs-lookup"><span data-stu-id="17463-164">Click the chart to view more details in log search.</span></span> <span data-ttu-id="17463-165">按一下任何主機名稱可開啟記錄搜尋並檢視所裝載 VM 的記憶體計數器詳細資料。</span><span class="sxs-lookup"><span data-stu-id="17463-165">Click any host name to open log search and view memory counter details for hosted VMs.</span></span>
- <span data-ttu-id="17463-166">**虛擬機器**</span><span class="sxs-lookup"><span data-stu-id="17463-166">**Virtual Machines**</span></span>
    - <span data-ttu-id="17463-167">**VM CPU 使用率** 根據所選時段以圖表顯示虛擬機器的 CPU 使用率趨勢和虛擬機器清單。</span><span class="sxs-lookup"><span data-stu-id="17463-167">**VM CPU Utilization** Shows a graphical trend of the CPU utilization of virtual machines and a list of virtual machines, based on the selected time period.</span></span> <span data-ttu-id="17463-168">將滑鼠暫留在折線圖上，可檢視前 3 個 VM 在特定時間點的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="17463-168">Hover over the line chart to view details for a specific point in time for the top 3 VMs.</span></span> <span data-ttu-id="17463-169">按一下折線圖可在記錄搜尋中檢視更多詳細資料。</span><span class="sxs-lookup"><span data-stu-id="17463-169">Click the chart to view more details in log search.</span></span> <span data-ttu-id="17463-170">按一下任何 VM 名稱可開啟記錄搜尋並檢視 VM 的彙總 CPU 計數器詳細資料。</span><span class="sxs-lookup"><span data-stu-id="17463-170">Click any VM name to open log search and view aggregated CPU counter details for the VM.</span></span>
    - <span data-ttu-id="17463-171">**VM 記憶體使用率**以所選時段作為基礎，用圖表顯示虛擬機器的記憶體使用率趨勢和虛擬機器清單。</span><span class="sxs-lookup"><span data-stu-id="17463-171">**VM Memory Utilization** Shows a graphical trend of the memory utilization of virtual machines and a list of virtual machines, based on the selected time period.</span></span> <span data-ttu-id="17463-172">將滑鼠暫留在折線圖上，可檢視前 3 個 VM 在特定時間點的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="17463-172">Hover over the line chart to view details for a specific point in time for the top 3 VMs.</span></span> <span data-ttu-id="17463-173">按一下折線圖可在記錄搜尋中檢視更多詳細資料。</span><span class="sxs-lookup"><span data-stu-id="17463-173">Click the chart to view more details in log search.</span></span> <span data-ttu-id="17463-174">按一下任何 VM 名稱可開啟記錄搜尋並檢視 VM 的彙總記憶體計數器詳細資料。</span><span class="sxs-lookup"><span data-stu-id="17463-174">Click any VM name to open log search and view aggregated memory counter details for the VM.</span></span>
    - <span data-ttu-id="17463-175">**VM 磁碟 IOPS 總數** 根據所選時段以圖表顯示虛擬機器的磁碟 IOPS 總數趨勢和虛擬機器清單以及各自的 IOPS。</span><span class="sxs-lookup"><span data-stu-id="17463-175">**VM Total Disk IOPS** Shows a graphical trend of the total disk IOPS for virtual machines and a list of virtual machines with the IOPS for each, based on the selected time period.</span></span> <span data-ttu-id="17463-176">將滑鼠暫留在折線圖上，可檢視前 3 個 VM 在特定時間點的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="17463-176">Hover over the line chart to view details for a specific point in time for the top 3 VMs.</span></span> <span data-ttu-id="17463-177">按一下折線圖可在記錄搜尋中檢視更多詳細資料。</span><span class="sxs-lookup"><span data-stu-id="17463-177">Click the chart to view more details in log search.</span></span> <span data-ttu-id="17463-178">按一下任何 VM 名稱可開啟記錄搜尋並檢視 VM 的彙總磁碟 IOPS 計數器詳細資料。</span><span class="sxs-lookup"><span data-stu-id="17463-178">Click any VM name to open log search and view aggregated disk IOPS counter details for the VM.</span></span>
    - <span data-ttu-id="17463-179">**VM 磁碟輸送量總數** 根據所選時段以圖表顯示虛擬機器的磁碟輸送量總數趨勢和虛擬機器清單以及各自的磁碟輸送量總數。</span><span class="sxs-lookup"><span data-stu-id="17463-179">**VM Total Disk Throughput** Shows a graphical trend of the total disk throughput for virtual machines and a list of virtual machines with the total disk throughput for each, based on the selected time period.</span></span> <span data-ttu-id="17463-180">將滑鼠暫留在折線圖上，可檢視前 3 個 VM 在特定時間點的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="17463-180">Hover over the line chart to view details for a specific point in time for the top 3 VMs.</span></span> <span data-ttu-id="17463-181">按一下折線圖可在記錄搜尋中檢視更多詳細資料。</span><span class="sxs-lookup"><span data-stu-id="17463-181">Click the chart to view more details in log search.</span></span> <span data-ttu-id="17463-182">按一下任何 VM 名稱可開啟記錄搜尋並檢視 VM 的彙總磁碟輸送量總數計數器詳細資料。</span><span class="sxs-lookup"><span data-stu-id="17463-182">Click any VM name to open log search and view aggregated total disk throughput counter details for the VM.</span></span>
- <span data-ttu-id="17463-183">**叢集共用磁碟區**</span><span class="sxs-lookup"><span data-stu-id="17463-183">**Clustered Shared Volumes**</span></span>
    - <span data-ttu-id="17463-184">**輸送量總數** 顯示叢集共用磁碟區上的讀取和寫入數總和。</span><span class="sxs-lookup"><span data-stu-id="17463-184">**Total Throughput** Shows the sum of both reads and writes on clustered shared volumes.</span></span>
    - <span data-ttu-id="17463-185">**IOPS 總數** 顯示叢集共用磁碟區上每秒輸入/輸出作業的總和。</span><span class="sxs-lookup"><span data-stu-id="17463-185">**Total IOPS** Shows the sum of input/output operations per second on clustered shared volumes.</span></span>
    - <span data-ttu-id="17463-186">**延遲總數** 顯示叢集共用磁碟區上的延遲總數。</span><span class="sxs-lookup"><span data-stu-id="17463-186">**Total Latency** Shows the total latency on clustered shared volumes.</span></span>
- <span data-ttu-id="17463-187">**主機密度** 頂端的圖格會顯示解決方案能夠使用的主機和虛擬機器總數。</span><span class="sxs-lookup"><span data-stu-id="17463-187">**Host Density** The top tile shows the total number of hosts and virtual machines available to the solution.</span></span> <span data-ttu-id="17463-188">按一下頂端的圖格，即可在記錄搜尋中檢視其他詳細資料。</span><span class="sxs-lookup"><span data-stu-id="17463-188">Click the top tile to view additional details in log search.</span></span> <span data-ttu-id="17463-189">其中也會列出所有主機和其所裝載的虛擬機器數目。</span><span class="sxs-lookup"><span data-stu-id="17463-189">Also lists all hosts and the number of virtual machines that are hosted.</span></span> <span data-ttu-id="17463-190">按一下主機即可在記錄搜尋中向下鑽研至 VM 結果。</span><span class="sxs-lookup"><span data-stu-id="17463-190">Click a host to drill into the VM results in a log search.</span></span>


![儀表板主機刀鋒視窗](./media/log-analytics-capacity/dashboard-hosts.png)

![儀表板虛擬機器刀鋒視窗](./media/log-analytics-capacity/dashboard-vms.png)


### <a name="evaluate-performance"></a><span data-ttu-id="17463-193">評估效能</span><span class="sxs-lookup"><span data-stu-id="17463-193">Evaluate performance</span></span>

<span data-ttu-id="17463-194">每個組織的生產運算環境會有明顯不同。</span><span class="sxs-lookup"><span data-stu-id="17463-194">Production computing environments differ greatly from one organization to another.</span></span> <span data-ttu-id="17463-195">此外，容量和效能的工作負載可能會取決於 VM 的執行方式以及您認為平常的事項。</span><span class="sxs-lookup"><span data-stu-id="17463-195">Also, capacity and performance workloads might depend on how your VMs are running, and what you consider normal.</span></span> <span data-ttu-id="17463-196">可協助您測量效能的特定程序很可能不適用於您的環境。</span><span class="sxs-lookup"><span data-stu-id="17463-196">Specific procedures to help you measure performance would probably not apply to your environment.</span></span> <span data-ttu-id="17463-197">因此，更為一般性的規範指引較適合提供協助。</span><span class="sxs-lookup"><span data-stu-id="17463-197">So, more generalized prescriptive guidance is better suited to help.</span></span> <span data-ttu-id="17463-198">Microsoft 發佈了各種規範指引文章，以協助您測量效能。</span><span class="sxs-lookup"><span data-stu-id="17463-198">Microsoft publishes a variety of prescriptive guidance articles to help you measure performance.</span></span>

<span data-ttu-id="17463-199">總結來說，解決方案會從各種來源 (包括效能計數器) 收集容量和效能資料。</span><span class="sxs-lookup"><span data-stu-id="17463-199">To summarize, the solution collects capacity and performance data from a variety of sources including performance counters.</span></span> <span data-ttu-id="17463-200">請使用解決方案中的各種介面所呈現的容量和效能資料，並將您的結果與[測量 Hyper-V 上的效能](https://msdn.microsoft.com/library/cc768535.aspx)文章中的結果做比較。</span><span class="sxs-lookup"><span data-stu-id="17463-200">Use that capacity and performance data that presented in various surfaces in the solution and compare your results to those at the [Measuring Performance on Hyper-V](https://msdn.microsoft.com/library/cc768535.aspx) article.</span></span> <span data-ttu-id="17463-201">雖然該文章已發佈一段時間，但其計量、考量和指導方針仍然有效。</span><span class="sxs-lookup"><span data-stu-id="17463-201">Although the article was published some time ago, the metrics, considerations, and guidelines are still valid.</span></span> <span data-ttu-id="17463-202">該文章包含其他有用資源的連結。</span><span class="sxs-lookup"><span data-stu-id="17463-202">The article contains links to other useful resources.</span></span>


## <a name="sample-log-searches"></a><span data-ttu-id="17463-203">記錄檔搜尋範例</span><span class="sxs-lookup"><span data-stu-id="17463-203">Sample log searches</span></span>

<span data-ttu-id="17463-204">下表提供此解決方案所收集和計算之容量和效能資料的記錄搜尋範例。</span><span class="sxs-lookup"><span data-stu-id="17463-204">The following table provides sample log searches for capacity and performance data collected and calculated by this solution.</span></span>

| <span data-ttu-id="17463-205">查詢</span><span class="sxs-lookup"><span data-stu-id="17463-205">Query</span></span> | <span data-ttu-id="17463-206">說明</span><span class="sxs-lookup"><span data-stu-id="17463-206">Description</span></span> |
|---|---|
| <span data-ttu-id="17463-207">所有主機記憶體組態</span><span class="sxs-lookup"><span data-stu-id="17463-207">All host memory configurations</span></span> | <code>Type=Perf ObjectName="Capacity and Performance" CounterName="Host Assigned Memory MB" &#124; measure avg(CounterValue) as MB by InstanceName</code> |
| <span data-ttu-id="17463-208">所有 VM 記憶體組態</span><span class="sxs-lookup"><span data-stu-id="17463-208">All VM memory configurations</span></span> | <code>Type=Perf ObjectName="Capacity and Performance" CounterName="VM Assigned Memory MB" &#124; measure avg(CounterValue) as MB by InstanceName</code> |
| <span data-ttu-id="17463-209">所有 VM 的磁碟 IOPS 總數細目</span><span class="sxs-lookup"><span data-stu-id="17463-209">Breakdown of Total Disk IOPS across all VMs</span></span> | <code>Type=Perf ObjectName="Capacity and Performance" (CounterName="VHD Reads/s" OR CounterName="VHD Writes/s") &#124; top 2500 &#124; measure avg(CounterValue) by CounterName, InstanceName interval 1HOUR</code> |
| <span data-ttu-id="17463-210">所有 VM 的磁碟輸送量總數細目</span><span class="sxs-lookup"><span data-stu-id="17463-210">Breakdown of Total Disk Throughput across all VMs</span></span> | <code>Type=Perf ObjectName="Capacity and Performance" (CounterName="VHD Read MB/s" OR CounterName="VHD Write MB/s") &#124; top 2500 &#124; measure avg(CounterValue) by CounterName, InstanceName interval 1HOUR</code> |
| <span data-ttu-id="17463-211">所有 CSV 的 IOPS 總數細目</span><span class="sxs-lookup"><span data-stu-id="17463-211">Breakdown of Total IOPS across all CSVs</span></span> | <code>Type=Perf ObjectName="Capacity and Performance" (CounterName="CSV Reads/s" OR CounterName="CSV Writes/s") &#124; top 2500 &#124; measure avg(CounterValue) by CounterName, InstanceName interval 1HOUR</code> |
| <span data-ttu-id="17463-212">所有 CSV 的輸送量總數細目</span><span class="sxs-lookup"><span data-stu-id="17463-212">Breakdown of Total Throughput across all CSVs</span></span> | <code>Type=Perf ObjectName="Capacity and Performance" (CounterName="CSV Read MB/s" OR CounterName="CSV Write MB/s") &#124; top 2500 &#124; measure avg(CounterValue) by CounterName, InstanceName interval 1HOUR</code> |
| <span data-ttu-id="17463-213">所有 CSV 的延遲總數細目</span><span class="sxs-lookup"><span data-stu-id="17463-213">Breakdown of Total Latency across all CSVs</span></span> | <code> Type=Perf ObjectName="Capacity and Performance" (CounterName="CSV Read Latency" OR CounterName="CSV Write Latency") &#124; top 2500 &#124; measure avg(CounterValue) by CounterName, InstanceName interval 1HOUR</code> |

>[!NOTE]
> <span data-ttu-id="17463-214">如果您的工作區已升級為[新的 Log Analytics 查詢語言](log-analytics-log-search-upgrade.md)，則以上查詢會變更如下。</span><span class="sxs-lookup"><span data-stu-id="17463-214">If your workspace has been upgraded to the [new Log Analytics query language](log-analytics-log-search-upgrade.md), then the above queries would change to the following.</span></span>

> | <span data-ttu-id="17463-215">查詢</span><span class="sxs-lookup"><span data-stu-id="17463-215">Query</span></span> | <span data-ttu-id="17463-216">說明</span><span class="sxs-lookup"><span data-stu-id="17463-216">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="17463-217">所有主機記憶體組態</span><span class="sxs-lookup"><span data-stu-id="17463-217">All host memory configurations</span></span> | <span data-ttu-id="17463-218">Perf &#124; where ObjectName == "Capacity and Performance" and CounterName == "Host Assigned Memory MB" &#124; summarize MB = avg(CounterValue) by InstanceName</span><span class="sxs-lookup"><span data-stu-id="17463-218">Perf &#124; where ObjectName == "Capacity and Performance" and CounterName == "Host Assigned Memory MB" &#124; summarize MB = avg(CounterValue) by InstanceName</span></span> |
| <span data-ttu-id="17463-219">所有 VM 記憶體組態</span><span class="sxs-lookup"><span data-stu-id="17463-219">All VM memory configurations</span></span> | <span data-ttu-id="17463-220">Perf &#124; where ObjectName == "Capacity and Performance" and CounterName == "VM Assigned Memory MB" &#124; summarize MB = avg(CounterValue) by InstanceName</span><span class="sxs-lookup"><span data-stu-id="17463-220">Perf &#124; where ObjectName == "Capacity and Performance" and CounterName == "VM Assigned Memory MB" &#124; summarize MB = avg(CounterValue) by InstanceName</span></span> |
| <span data-ttu-id="17463-221">所有 VM 的磁碟 IOPS 總數細目</span><span class="sxs-lookup"><span data-stu-id="17463-221">Breakdown of Total Disk IOPS across all VMs</span></span> | <span data-ttu-id="17463-222">Perf &#124; where ObjectName == "Capacity and Performance" and (CounterName == "VHD Reads/s" or CounterName == "VHD Writes/s") &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), CounterName, InstanceName</span><span class="sxs-lookup"><span data-stu-id="17463-222">Perf &#124; where ObjectName == "Capacity and Performance" and (CounterName == "VHD Reads/s" or CounterName == "VHD Writes/s") &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), CounterName, InstanceName</span></span> |
| <span data-ttu-id="17463-223">所有 VM 的磁碟輸送量總數細目</span><span class="sxs-lookup"><span data-stu-id="17463-223">Breakdown of Total Disk Throughput across all VMs</span></span> | <span data-ttu-id="17463-224">Perf &#124; where ObjectName == "Capacity and Performance" and (CounterName == "VHD Read MB/s" or CounterName == "VHD Write MB/s") &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), CounterName, InstanceName</span><span class="sxs-lookup"><span data-stu-id="17463-224">Perf &#124; where ObjectName == "Capacity and Performance" and (CounterName == "VHD Read MB/s" or CounterName == "VHD Write MB/s") &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), CounterName, InstanceName</span></span> |
| <span data-ttu-id="17463-225">所有 CSV 的 IOPS 總數細目</span><span class="sxs-lookup"><span data-stu-id="17463-225">Breakdown of Total IOPS across all CSVs</span></span> | <span data-ttu-id="17463-226">Perf &#124; where ObjectName == "Capacity and Performance" and (CounterName == "CSV Reads/s" or CounterName == "CSV Writes/s") &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), CounterName, InstanceName</span><span class="sxs-lookup"><span data-stu-id="17463-226">Perf &#124; where ObjectName == "Capacity and Performance" and (CounterName == "CSV Reads/s" or CounterName == "CSV Writes/s") &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), CounterName, InstanceName</span></span> |
| <span data-ttu-id="17463-227">所有 CSV 的輸送量總數細目</span><span class="sxs-lookup"><span data-stu-id="17463-227">Breakdown of Total Throughput across all CSVs</span></span> | <span data-ttu-id="17463-228">Perf &#124; where ObjectName == "Capacity and Performance" and (CounterName == "CSV Reads/s" or CounterName == "CSV Writes/s") &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), CounterName, InstanceName</span><span class="sxs-lookup"><span data-stu-id="17463-228">Perf &#124; where ObjectName == "Capacity and Performance" and (CounterName == "CSV Reads/s" or CounterName == "CSV Writes/s") &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), CounterName, InstanceName</span></span> |
| <span data-ttu-id="17463-229">所有 CSV 的延遲總數細目</span><span class="sxs-lookup"><span data-stu-id="17463-229">Breakdown of Total Latency across all CSVs</span></span> | <span data-ttu-id="17463-230">Perf &#124; where ObjectName == "Capacity and Performance" and (CounterName == "CSV Read Latency" or CounterName == "CSV Write Latency") &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), CounterName, InstanceName</span><span class="sxs-lookup"><span data-stu-id="17463-230">Perf &#124; where ObjectName == "Capacity and Performance" and (CounterName == "CSV Read Latency" or CounterName == "CSV Write Latency") &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), CounterName, InstanceName</span></span> |


## <a name="next-steps"></a><span data-ttu-id="17463-231">後續步驟</span><span class="sxs-lookup"><span data-stu-id="17463-231">Next steps</span></span>
* <span data-ttu-id="17463-232">使用 [Log Analytics 中的記錄搜尋](log-analytics-log-searches.md)，來檢視詳細的容量和效能資料。</span><span class="sxs-lookup"><span data-stu-id="17463-232">Use [Log searches in Log Analytics](log-analytics-log-searches.md) to view detailed Capacity and Performance data.</span></span>
