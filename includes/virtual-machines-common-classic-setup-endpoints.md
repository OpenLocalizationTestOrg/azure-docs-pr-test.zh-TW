
<span data-ttu-id="a565c-101">每個端點都有一個公用連接埠和一個私人連接埠：</span><span class="sxs-lookup"><span data-stu-id="a565c-101">Each endpoint has a *public port* and a *private port*:</span></span>

* <span data-ttu-id="a565c-102">hello 公用連接埠正由 hello Azure 負載平衡器 toolisten hello 網際網路從連入流量 toohello 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="a565c-102">hello public port is used by hello Azure load balancer toolisten for incoming traffic toohello virtual machine from hello Internet.</span></span>
* <span data-ttu-id="a565c-103">hello 私用連接埠是由 hello 虛擬機器 toolisten 用於連入流量，通常預定的 tooan 應用程式或服務 hello 虛擬機器上執行。</span><span class="sxs-lookup"><span data-stu-id="a565c-103">hello private port is used by hello virtual machine toolisten for incoming traffic, typically destined tooan application or service running on hello virtual machine.</span></span>

<span data-ttu-id="a565c-104">預設值為 hello IP 通訊協定，TCP 或 UDP 連接埠為已知的網路通訊協定提供當您建立端點以 hello Azure 入口網站。</span><span class="sxs-lookup"><span data-stu-id="a565c-104">Default values for hello IP protocol and TCP or UDP ports for well-known network protocols are provided when you create endpoints with hello Azure portal.</span></span> <span data-ttu-id="a565c-105">自訂端點，您將需要 toospecify hello 正確 IP 通訊協定 （TCP 或 UDP） 和 hello 公用和私用連接埠。</span><span class="sxs-lookup"><span data-stu-id="a565c-105">For custom endpoints, you'll need toospecify hello correct IP protocol (TCP or UDP) and hello public and private ports.</span></span> <span data-ttu-id="a565c-106">toodistribute 隨機跨越多部虛擬機器的連入流量，您將需要 toocreate 組成的多個端點的負載平衡集。</span><span class="sxs-lookup"><span data-stu-id="a565c-106">toodistribute incoming traffic randomly across multiple virtual machines, you'll need toocreate a load-balanced set consisting of multiple endpoints.</span></span>

<span data-ttu-id="a565c-107">建立端點後，您可以使用存取控制清單 (ACL) toodefine 規則來允許或拒絕 hello 連入流量 toohello 根據其來源 IP 位址的 hello 端點的公用連接埠。</span><span class="sxs-lookup"><span data-stu-id="a565c-107">After you create an endpoint, you can use an access control list (ACL) toodefine rules that permit or deny hello incoming traffic toohello public port of hello endpoint based on its source IP address.</span></span> <span data-ttu-id="a565c-108">不過，如果 hello 虛擬機器是在 Azure 虛擬網路，您應該改為使用網路安全性群組。</span><span class="sxs-lookup"><span data-stu-id="a565c-108">However, if hello virtual machine is in an Azure virtual network, you should use network security groups instead.</span></span> <span data-ttu-id="a565c-109">如需詳細資訊，請參閱 [關於網路安全性群組](../articles/virtual-network/virtual-networks-nsg.md)。</span><span class="sxs-lookup"><span data-stu-id="a565c-109">For details, see [About network security groups](../articles/virtual-network/virtual-networks-nsg.md).</span></span>

> [!NOTE]
> <span data-ttu-id="a565c-110">Azure 虛擬機器的防火牆組態會針對連接埠自動完成，該連接埠與 Azure 自動設定的遠端連線端點相關聯。</span><span class="sxs-lookup"><span data-stu-id="a565c-110">Firewall configuration for Azure virtual machines is done automatically for ports associated with remote connectivity endpoints that Azure sets up automatically.</span></span> <span data-ttu-id="a565c-111">指定針對所有其他端點通訊埠，不會自動進行組態 toohello 防火牆 hello 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="a565c-111">For ports specified for all other endpoints, no configuration is done automatically toohello firewall of hello virtual machine.</span></span> <span data-ttu-id="a565c-112">當您建立 hello 虛擬機器的端點時，您將需要 tooensure hello hello 虛擬機器的防火牆，也可讓 hello 流量 hello 通訊協定和私人連接埠對應 toohello 端點組態。</span><span class="sxs-lookup"><span data-stu-id="a565c-112">When you create an endpoint for hello virtual machine, you'll need tooensure that hello firewall of hello virtual machine also allows hello traffic for hello protocol and private port corresponding toohello endpoint configuration.</span></span> <span data-ttu-id="a565c-113">tooconfigure hello 防火牆，請參閱 hello 文件或 hello 虛擬機器上執行的 hello 作業系統的線上說明。</span><span class="sxs-lookup"><span data-stu-id="a565c-113">tooconfigure hello firewall, see hello documentation or on-line help for hello operating system running on hello virtual machine.</span></span>
>
>

## <a name="create-an-endpoint"></a><span data-ttu-id="a565c-114">建立端點</span><span class="sxs-lookup"><span data-stu-id="a565c-114">Create an endpoint</span></span>
1. <span data-ttu-id="a565c-115">如果您尚未這樣做，請登入 toohello [Azure 入口網站](https://portal.azure.com)。</span><span class="sxs-lookup"><span data-stu-id="a565c-115">If you haven't already done so, sign in toohello [Azure portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="a565c-116">按一下**虛擬機器**，然後按一下您想 tooconfigure hello 虛擬機器的 hello 名稱。</span><span class="sxs-lookup"><span data-stu-id="a565c-116">Click **Virtual Machines**, and then click hello name of hello virtual machine that you want tooconfigure.</span></span>
3. <span data-ttu-id="a565c-117">按一下**端點**在 hello**設定**群組。</span><span class="sxs-lookup"><span data-stu-id="a565c-117">Click **Endpoints** in hello **Settings** group.</span></span> <span data-ttu-id="a565c-118">hello**端點**頁面會列出所有的 hello 目前端點的 hello 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="a565c-118">hello **Endpoints** page lists all hello current endpoints for hello virtual machine.</span></span> <span data-ttu-id="a565c-119">Linux VM 依預設會顯示 SSH 的端點。</span><span class="sxs-lookup"><span data-stu-id="a565c-119">(This example is a Windows VM.</span></span> <span data-ttu-id="a565c-120">)</span><span class="sxs-lookup"><span data-stu-id="a565c-120">A Linux VM will by default show an endpoint for SSH.)</span></span>

   <!-- ![Endpoints](./media/virtual-machines-common-classic-setup-endpoints/endpointswindows.png) -->
   ![端點](./media/virtual-machines-common-classic-setup-endpoints/endpointsblade.png)

4. <span data-ttu-id="a565c-122">在 hello hello 端點項目的上方命令列，按一下 **新增**。</span><span class="sxs-lookup"><span data-stu-id="a565c-122">In hello command bar above hello endpoint entries, click **Add**.</span></span>
5. <span data-ttu-id="a565c-123">在 hello**加入端點**頁面上，輸入的名稱中的 hello 端點**名稱**。</span><span class="sxs-lookup"><span data-stu-id="a565c-123">On hello **Add endpoint** page, type a name for hello endpoint in **Name**.</span></span>
6. <span data-ttu-id="a565c-124">在 [通訊協定] 中選擇 [TCP] 或 [UDP]。</span><span class="sxs-lookup"><span data-stu-id="a565c-124">In **Protocol**, choose either **TCP** or **UDP**.</span></span>
7. <span data-ttu-id="a565c-125">在**公用連接埠**，輸入 hello hello 的 hello 網際網路的連入流量的連接埠號碼。</span><span class="sxs-lookup"><span data-stu-id="a565c-125">In **Public Port**, type hello port number for hello incoming traffic from hello Internet.</span></span> <span data-ttu-id="a565c-126">在**私用連接埠**，輸入 hello 的 hello 虛擬機器所接聽的連接埠號碼。</span><span class="sxs-lookup"><span data-stu-id="a565c-126">In **Private Port**, type hello port number on which hello virtual machine is listening.</span></span> <span data-ttu-id="a565c-127">這些連接埠號碼可以不同。</span><span class="sxs-lookup"><span data-stu-id="a565c-127">These port numbers can be different.</span></span> <span data-ttu-id="a565c-128">請確定該 hello hello 虛擬機器上的防火牆已設定的 tooallow hello 流量對應 toohello 通訊協定 （在步驟 6） 和私人連接埠。</span><span class="sxs-lookup"><span data-stu-id="a565c-128">Ensure that hello firewall on hello virtual machine has been configured tooallow hello traffic corresponding toohello protocol (in step 6) and private port.</span></span>
10. <span data-ttu-id="a565c-129">按一下 [確定] 。</span><span class="sxs-lookup"><span data-stu-id="a565c-129">Click **Ok**.</span></span>

<span data-ttu-id="a565c-130">hello 新端點就會列在 hello**端點**頁面。</span><span class="sxs-lookup"><span data-stu-id="a565c-130">hello new endpoint will be listed on hello **Endpoints** page.</span></span>

![端點建立成功](./media/virtual-machines-common-classic-setup-endpoints/endpointcreated.png)

## <a name="manage-hello-acl-on-an-endpoint"></a><span data-ttu-id="a565c-132">管理端點上的 ACL hello</span><span class="sxs-lookup"><span data-stu-id="a565c-132">Manage hello ACL on an endpoint</span></span>
<span data-ttu-id="a565c-133">toodefine hello 組可以傳送流量的電腦，在端點上的 hello ACL 可以限制根據來源 IP 位址的流量。</span><span class="sxs-lookup"><span data-stu-id="a565c-133">toodefine hello set of computers that can send traffic, hello ACL on an endpoint can restrict traffic based upon source IP address.</span></span> <span data-ttu-id="a565c-134">請遵循這些步驟 tooadd、 修改或移除端點 ACL。</span><span class="sxs-lookup"><span data-stu-id="a565c-134">Follow these steps tooadd, modify, or remove an ACL on an endpoint.</span></span>

> [!NOTE]
> <span data-ttu-id="a565c-135">如果 hello 端點是一組負載平衡的一部分，任何您所做變更 toohello 端點上的 ACL 是套用的 tooall 端點 hello 集合中。</span><span class="sxs-lookup"><span data-stu-id="a565c-135">If hello endpoint is part of a load-balanced set, any changes you make toohello ACL on an endpoint are applied tooall endpoints in hello set.</span></span>
>
>

<span data-ttu-id="a565c-136">如果 hello 虛擬機器是在 Azure 虛擬網路，而不是 Acl 的網路安全性群組建議。</span><span class="sxs-lookup"><span data-stu-id="a565c-136">If hello virtual machine is in an Azure virtual network, we recommend network security groups instead of ACLs.</span></span> <span data-ttu-id="a565c-137">如需詳細資訊，請參閱 [關於網路安全性群組](../articles/virtual-network/virtual-networks-nsg.md)。</span><span class="sxs-lookup"><span data-stu-id="a565c-137">For details, see [About network security groups](../articles/virtual-network/virtual-networks-nsg.md).</span></span>

1. <span data-ttu-id="a565c-138">如果您尚未這樣做，請登入 toohello Azure 入口網站。</span><span class="sxs-lookup"><span data-stu-id="a565c-138">If you haven't already done so, sign in toohello Azure portal.</span></span>
2. <span data-ttu-id="a565c-139">按一下**虛擬機器**，然後按一下您想 tooconfigure hello 虛擬機器的 hello 名稱。</span><span class="sxs-lookup"><span data-stu-id="a565c-139">Click **Virtual Machines**, and then click hello name of hello virtual machine that you want tooconfigure.</span></span>
3. <span data-ttu-id="a565c-140">按一下 [端點] 。</span><span class="sxs-lookup"><span data-stu-id="a565c-140">Click **Endpoints**.</span></span> <span data-ttu-id="a565c-141">從 hello 清單中，選取 hello 適當的端點。</span><span class="sxs-lookup"><span data-stu-id="a565c-141">From hello list, select hello appropriate endpoint.</span></span> <span data-ttu-id="a565c-142">hello ACL 清單位於 hello hello 頁面的底部。</span><span class="sxs-lookup"><span data-stu-id="a565c-142">hello ACL list is at hello bottom of hello page.</span></span>

   ![指定 ACL 詳細資料](./media/virtual-machines-common-classic-setup-endpoints/aclpreentry.png)

4. <span data-ttu-id="a565c-144">使用 hello 清單 tooadd、 刪除或編輯規則中的資料列的 acl 並變更其順序。</span><span class="sxs-lookup"><span data-stu-id="a565c-144">Use rows in hello list tooadd, delete, or edit rules for an ACL and change their order.</span></span> <span data-ttu-id="a565c-145">hello**遠端子網路**值為 hello hello Azure 負載平衡器會使用 toopermit 或拒絕 hello 流量根據其來源 IP 位址的網際網路的連入流量的 IP 位址範圍。</span><span class="sxs-lookup"><span data-stu-id="a565c-145">hello **Remote Subnet** value is an IP address range for incoming traffic from hello Internet that hello Azure load balancer uses toopermit or deny hello traffic based on its source IP address.</span></span> <span data-ttu-id="a565c-146">採用 CIDR 格式，也就是位址首碼格式是確定 toospecify hello IP 位址範圍。</span><span class="sxs-lookup"><span data-stu-id="a565c-146">Be sure toospecify hello IP address range in CIDR format, also known as address prefix format.</span></span> <span data-ttu-id="a565c-147">例如 `10.1.0.0/8`。</span><span class="sxs-lookup"><span data-stu-id="a565c-147">An example is `10.1.0.0/8`.</span></span>

 ![新增 ACL 項目](./media/virtual-machines-common-classic-setup-endpoints/newaclentry.png)


<span data-ttu-id="a565c-149">您可以使用從特定的電腦對應 tooyour 電腦上，從特定的已知位址範圍的 hello 網際網路或 toodeny 流量規則 tooallow 唯一流量。</span><span class="sxs-lookup"><span data-stu-id="a565c-149">You can use rules tooallow only traffic from specific computers corresponding tooyour computers on hello Internet or toodeny traffic from specific, known address ranges.</span></span>

<span data-ttu-id="a565c-150">hello 規則會 hello 第一個規則的開始和結束與 hello 上一個規則的順序進行評估。</span><span class="sxs-lookup"><span data-stu-id="a565c-150">hello rules are evaluated in order starting with hello first rule and ending with hello last rule.</span></span> <span data-ttu-id="a565c-151">這表示，應該從最不嚴格 toomost 嚴格排序規則。</span><span class="sxs-lookup"><span data-stu-id="a565c-151">This means that rules should be ordered from least restrictive toomost restrictive.</span></span> <span data-ttu-id="a565c-152">如需範例和詳細資訊，請參閱[什麼是網路存取控制清單](../articles/virtual-network/virtual-networks-acl.md)。</span><span class="sxs-lookup"><span data-stu-id="a565c-152">For examples and more information, see [What is a Network Access Control List](../articles/virtual-network/virtual-networks-acl.md).</span></span>
