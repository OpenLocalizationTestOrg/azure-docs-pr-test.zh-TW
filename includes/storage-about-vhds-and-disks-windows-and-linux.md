
## <a name="about-vhds"></a><span data-ttu-id="bb655-101">關於 VHD</span><span class="sxs-lookup"><span data-stu-id="bb655-101">About VHDs</span></span>

<span data-ttu-id="bb655-102">hello Azure 中使用的 Vhd 會儲存為 Azure 中的 standard 或 premium 儲存體帳戶中的分頁 blob 的.vhd 檔案。</span><span class="sxs-lookup"><span data-stu-id="bb655-102">hello VHDs used in Azure are .vhd files stored as page blobs in a standard or premium storage account in Azure.</span></span> <span data-ttu-id="bb655-103">如需分頁 Blob 的詳細資訊，請參閱 [了解區塊 Blob 和分頁 Blob](/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs/)。</span><span class="sxs-lookup"><span data-stu-id="bb655-103">For details about page blobs, see [Understanding block blobs and page blobs](/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs/).</span></span> <span data-ttu-id="bb655-104">如需進階儲存體的詳細資訊，請參閱[高效能的進階儲存體和 Azure VM](../articles/storage/common/storage-premium-storage.md)。</span><span class="sxs-lookup"><span data-stu-id="bb655-104">For details about premium storage, see [High-performance premium storage and Azure VMs](../articles/storage/common/storage-premium-storage.md).</span></span>

<span data-ttu-id="bb655-105">Azure 支援固定磁碟 VHD 格式的 hello。</span><span class="sxs-lookup"><span data-stu-id="bb655-105">Azure supports hello fixed disk VHD format.</span></span> <span data-ttu-id="bb655-106">hello 固定格式奠定 hello 出而呈線性成長 hello 檔案內的邏輯磁碟，所以該磁碟位移 X 就會儲存在 blob 位移 X。在 hello hello blob 結尾的小型頁尾會描述 hello VHD hello 屬性。</span><span class="sxs-lookup"><span data-stu-id="bb655-106">hello fixed format lays hello logical disk out linearly within hello file, so that disk offset X is stored at blob offset X. A small footer at hello end of hello blob describes hello properties of hello VHD.</span></span> <span data-ttu-id="bb655-107">通常，hello 固定的格式會因為大多數的磁碟中有大範圍未使用浪費空間。</span><span class="sxs-lookup"><span data-stu-id="bb655-107">Often, hello fixed format wastes space because most disks have large unused ranges in them.</span></span> <span data-ttu-id="bb655-108">不過，Azure 儲存.vhd 檔案是以疏鬆格式，因此接收的兩個固定的 hello 的 hello 優點和動態磁碟會在 hello 相同的時間。</span><span class="sxs-lookup"><span data-stu-id="bb655-108">However, Azure stores .vhd files in a sparse format, so you receive hello benefits of both hello fixed and dynamic disks at hello same time.</span></span> <span data-ttu-id="bb655-109">如需詳細資訊，請參閱[開始使用虛擬硬碟](https://technet.microsoft.com/library/dd979539.aspx)。</span><span class="sxs-lookup"><span data-stu-id="bb655-109">For more details, see [Getting started with virtual hard disks](https://technet.microsoft.com/library/dd979539.aspx).</span></span>

<span data-ttu-id="bb655-110">在 Azure toouse 做為來源 toocreate 磁碟或映像處於唯讀狀態中的所有.vhd 檔案。</span><span class="sxs-lookup"><span data-stu-id="bb655-110">All .vhd files in Azure that you want toouse as a source toocreate disks or images are read-only.</span></span> <span data-ttu-id="bb655-111">當您建立磁碟或映像時，Azure 會建立副本 hello.vhd 檔案。</span><span class="sxs-lookup"><span data-stu-id="bb655-111">When you create a disk or image, Azure makes copies of hello .vhd files.</span></span> <span data-ttu-id="bb655-112">這些複本可以是唯讀或讀-寫，取決於您如何使用 hello VHD。</span><span class="sxs-lookup"><span data-stu-id="bb655-112">These copies can be read-only or read-and-write, depending on how you use hello VHD.</span></span>

<span data-ttu-id="bb655-113">當您從映像建立虛擬機器時，Azure 會建立 hello hello 來源.vhd 檔案的複本的虛擬機器的磁碟。</span><span class="sxs-lookup"><span data-stu-id="bb655-113">When you create a virtual machine from an image, Azure creates a disk for hello virtual machine that is a copy of hello source .vhd file.</span></span> <span data-ttu-id="bb655-114">tooprotect 遭到意外刪除，Azure 會使用 toocreate 映像、 作業系統磁碟或資料磁碟的任何來源.vhd 檔案上的租用。</span><span class="sxs-lookup"><span data-stu-id="bb655-114">tooprotect against accidental deletion, Azure places a lease on any source .vhd file that’s used toocreate an image, an operating system disk, or a data disk.</span></span>

<span data-ttu-id="bb655-115">您可以刪除來源.vhd 檔案之前，您將需要 tooremove hello 租用的刪除 hello 磁碟或映像。</span><span class="sxs-lookup"><span data-stu-id="bb655-115">Before you can delete a source .vhd file, you’ll need tooremove hello lease by deleting hello disk or image.</span></span> <span data-ttu-id="bb655-116">toodelete 正由虛擬機器做為作業系統磁碟的.vhd 檔案，您可以刪除 hello 虛擬機器、 hello 作業系統磁碟和 hello 來源.vhd 檔案一次刪除 hello 虛擬機器並刪除所有相關聯的磁碟。</span><span class="sxs-lookup"><span data-stu-id="bb655-116">toodelete a .vhd file that is being used by a virtual machine as an operating system disk, you can delete hello virtual machine, hello operating system disk, and hello source .vhd file all at once by deleting hello virtual machine and deleting all associated disks.</span></span> <span data-ttu-id="bb655-117">不過，刪除做為資料磁碟來源的 .vhd 檔案檔案需要依設定的順序執行幾個步驟。</span><span class="sxs-lookup"><span data-stu-id="bb655-117">However, deleting a .vhd file that’s a source for a data disk requires several steps in a set order.</span></span> <span data-ttu-id="bb655-118">第一次您 hello 磁碟中的 hello 虛擬機器，然後刪除 hello 磁碟、 卸離，然後再刪除 hello.vhd 檔案。</span><span class="sxs-lookup"><span data-stu-id="bb655-118">First you detach hello disk from hello virtual machine, then delete hello disk, and then delete hello .vhd file.</span></span>

> [!WARNING]
> <span data-ttu-id="bb655-119">如果您刪除儲存體中的來源 .vhd 檔案從或刪除您的儲存體帳戶，Microsoft 便無法為您復原該資料。</span><span class="sxs-lookup"><span data-stu-id="bb655-119">If you delete a source .vhd file from storage, or delete your storage account, Microsoft can't recover that data for you.</span></span>
> 

## <a name="types-of-disks"></a><span data-ttu-id="bb655-120">磁碟類型</span><span class="sxs-lookup"><span data-stu-id="bb655-120">Types of disks</span></span> 

<span data-ttu-id="bb655-121">Azure 磁碟設計成確保可用性達 99.999%。</span><span class="sxs-lookup"><span data-stu-id="bb655-121">Azure Disks are designed for 99.999% availability.</span></span> <span data-ttu-id="bb655-122">Azure 磁碟一直提供企業級持久性，其年度失敗率為零，領先業界。</span><span class="sxs-lookup"><span data-stu-id="bb655-122">Azure Disks have consistently delivered enterprise-grade durability, with an industry-leading ZERO% Annualized Failure Rate.</span></span>

<span data-ttu-id="bb655-123">在建立磁碟時，您有兩個可供選擇的儲存體效能層級，分別是標準儲存體和進階儲存體。</span><span class="sxs-lookup"><span data-stu-id="bb655-123">There are two performance tiers for storage that you can choose from when creating your disks -- Standard Storage and Premium Storage.</span></span> <span data-ttu-id="bb655-124">此外，磁碟也有兩種類型，即非受控和受控，這兩種類型可以位於任一個效能層級。</span><span class="sxs-lookup"><span data-stu-id="bb655-124">Also, there are two types of disks -- unmanaged and managed -- and they can reside in either performance tier.</span></span>


### <a name="standard-storage"></a><span data-ttu-id="bb655-125">標準儲存體</span><span class="sxs-lookup"><span data-stu-id="bb655-125">Standard storage</span></span> 

<span data-ttu-id="bb655-126">標準儲存體是以 HDD 為後盾，既可提供符合成本效益的儲存體，又可保有效能。</span><span class="sxs-lookup"><span data-stu-id="bb655-126">Standard Storage is backed by HDDs, and delivers cost-effective storage while still being performant.</span></span> <span data-ttu-id="bb655-127">標準儲存體可複寫到一個資料中心的本機位置，或是利用主要和次要資料中心提供異地備援。</span><span class="sxs-lookup"><span data-stu-id="bb655-127">Standard storage can be replicated locally in one datacenter, or be geo-redundant with primary and secondary data centers.</span></span> <span data-ttu-id="bb655-128">如需儲存體複寫的詳細資訊，請參閱 [Azure 儲存體複寫](../articles/storage/common/storage-redundancy.md)。</span><span class="sxs-lookup"><span data-stu-id="bb655-128">For more information about storage replication, please see [Azure Storage replication](../articles/storage/common/storage-redundancy.md).</span></span> 

<span data-ttu-id="bb655-129">如需搭配使用標準儲存體與 VM 磁碟的詳細資訊，請參閱[標準儲存體和磁碟](../articles/storage/common/storage-standard-storage.md)。</span><span class="sxs-lookup"><span data-stu-id="bb655-129">For more information about using Standard Storage with VM disks, please see [Standard Storage and Disks](../articles/storage/common/storage-standard-storage.md).</span></span>

### <a name="premium-storage"></a><span data-ttu-id="bb655-130">進階儲存體</span><span class="sxs-lookup"><span data-stu-id="bb655-130">Premium storage</span></span> 

<span data-ttu-id="bb655-131">進階儲存體是以 SSD 為後盾，可針對執行時需要大量 I/O 之工作負載的 VM 提供高效能、低延遲的磁碟支援。</span><span class="sxs-lookup"><span data-stu-id="bb655-131">Premium Storage is backed by SSDs, and delivers high-performance, low-latency disk support for VMs running I/O-intensive workloads.</span></span> <span data-ttu-id="bb655-132">進階儲存體可搭配 DS、DSv2、GS、Ls 或 FS 系列的 Azure VM 使用。</span><span class="sxs-lookup"><span data-stu-id="bb655-132">You can use Premium Storage with DS, DSv2, GS, Ls, or FS series Azure VMs.</span></span> <span data-ttu-id="bb655-133">如需詳細資訊，請參閱[進階儲存體](../articles/storage/common/storage-premium-storage.md)。</span><span class="sxs-lookup"><span data-stu-id="bb655-133">For more information, please see [Premium Storage](../articles/storage/common/storage-premium-storage.md).</span></span>

### <a name="unmanaged-disks"></a><span data-ttu-id="bb655-134">非受控磁碟</span><span class="sxs-lookup"><span data-stu-id="bb655-134">Unmanaged disks</span></span>

<span data-ttu-id="bb655-135">未受管理的磁碟是 hello 的已使用的 Vm 磁碟的傳統類型。</span><span class="sxs-lookup"><span data-stu-id="bb655-135">Unmanaged disks are hello traditional type of disks that have been used by VMs.</span></span> <span data-ttu-id="bb655-136">進行這些動作，您可以建立您自己的儲存體帳戶，並指定該儲存體帳戶，當您建立 hello 磁碟。</span><span class="sxs-lookup"><span data-stu-id="bb655-136">With these, you create your own storage account and specify that storage account when you create hello disk.</span></span> <span data-ttu-id="bb655-137">您必須確定您沒有將過多的磁碟放在 toomake hello 相同的儲存體帳戶，因為您可能會超出 hello[延展性目標](../articles/storage/common/storage-scalability-targets.md)hello 儲存體帳戶 (例如，20,000 IOPS)，導致 hello Vm 進行節流處理。</span><span class="sxs-lookup"><span data-stu-id="bb655-137">You have toomake sure you don't put too many disks in hello same storage account, because you could exceed hello [scalability targets](../articles/storage/common/storage-scalability-targets.md) of hello storage account (20,000 IOPS, for example), resulting in hello VMs being throttled.</span></span> <span data-ttu-id="bb655-138">使用 unmanaged 磁碟時，您必須 toofigure 出 toomaximize hello 的一或多個儲存體帳戶 tooget hello 最佳效能 Vm 的使用方式。</span><span class="sxs-lookup"><span data-stu-id="bb655-138">With unmanaged disks, you have toofigure out how toomaximize hello use of one or more storage accounts tooget hello best performance out of your VMs.</span></span>

### <a name="managed-disks"></a><span data-ttu-id="bb655-139">受控磁碟</span><span class="sxs-lookup"><span data-stu-id="bb655-139">Managed disks</span></span> 

<span data-ttu-id="bb655-140">管理磁碟控點 hello 儲存體帳戶建立/管理 hello 背景中，並確保您沒有 tooworry hello hello 儲存體帳戶的延展性限制的相關。</span><span class="sxs-lookup"><span data-stu-id="bb655-140">Managed Disks handles hello storage account creation/management in hello background for you, and ensures that you do not have tooworry about hello scalability limits of hello storage account.</span></span> <span data-ttu-id="bb655-141">您只需要指定 hello 磁碟大小和 hello 效能層 （標準/優質），Azure 會建立，並會為您管理 hello 磁碟。</span><span class="sxs-lookup"><span data-stu-id="bb655-141">You simply specify hello disk size and hello performance tier (Standard/Premium), and Azure creates and manages hello disk for you.</span></span> <span data-ttu-id="bb655-142">即使當您新增磁碟或向上和向下調整 hello VM 時，您不需要 tooworry 需 hello 所使用的儲存體。</span><span class="sxs-lookup"><span data-stu-id="bb655-142">Even as you add disks or scale hello VM up and down, you don't have tooworry about hello storage being used.</span></span> 

<span data-ttu-id="bb655-143">您也可以管理每個 Azure 區域中，一個儲存體帳戶中的自訂映像，並使用它們 toocreate 數以百計的 Vm 中 hello 相同訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="bb655-143">You can also manage your custom images in one storage account per Azure region, and use them toocreate hundreds of VMs in hello same subscription.</span></span> <span data-ttu-id="bb655-144">如需有關管理磁碟的詳細資訊，請參閱 hello[受管理的磁碟概觀](../articles/virtual-machines/windows/managed-disks-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="bb655-144">For more information about Managed Disks, please see hello [Managed Disks Overview](../articles/virtual-machines/windows/managed-disks-overview.md).</span></span>

<span data-ttu-id="bb655-145">我們建議您針對新的 Vm，使用 Azure 受管理磁碟和您轉換您先前未受管理的磁碟 toomanaged 的磁碟，hello tootake 利用適用於管理磁碟的許多功能。</span><span class="sxs-lookup"><span data-stu-id="bb655-145">We recommend that you use Azure Managed Disks for new VMs, and that you convert your previous unmanaged disks toomanaged disks, tootake advantage of hello many features available in Managed Disks.</span></span>

### <a name="disk-comparison"></a><span data-ttu-id="bb655-146">磁碟比較</span><span class="sxs-lookup"><span data-stu-id="bb655-146">Disk comparison</span></span>

<span data-ttu-id="bb655-147">hello 下表提供高階 vs 標準比較兩者 unmanaged 和 managed 磁碟 toohelp 決定哪些 toouse。</span><span class="sxs-lookup"><span data-stu-id="bb655-147">hello following table provides a comparison of Premium vs Standard for both unmanaged and managed disks toohelp you decide what toouse.</span></span>

|    | <span data-ttu-id="bb655-148">Azure 進階磁碟</span><span class="sxs-lookup"><span data-stu-id="bb655-148">Azure Premium Disk</span></span> | <span data-ttu-id="bb655-149">Azure 標準磁碟</span><span class="sxs-lookup"><span data-stu-id="bb655-149">Azure Standard Disk</span></span> |
|--- | ------------------ | ------------------- |
| <span data-ttu-id="bb655-150">磁碟類型</span><span class="sxs-lookup"><span data-stu-id="bb655-150">Disk Type</span></span> | <span data-ttu-id="bb655-151">固態硬碟 (SSD)</span><span class="sxs-lookup"><span data-stu-id="bb655-151">Solid State Drives (SSD)</span></span> | <span data-ttu-id="bb655-152">硬碟 (HDD)</span><span class="sxs-lookup"><span data-stu-id="bb655-152">Hard Disk Drives (HDD)</span></span>  |
| <span data-ttu-id="bb655-153">概觀</span><span class="sxs-lookup"><span data-stu-id="bb655-153">Overview</span></span>  | <span data-ttu-id="bb655-154">以 SSD 為基礎，針對執行時需要大量 I/O 之工作負載的 VM 或裝載任務關鍵性生產環境的 VM，提供高效能、低延遲的磁碟支援</span><span class="sxs-lookup"><span data-stu-id="bb655-154">SSD-based high-performance, low-latency disk support for VMs running IO-intensive workloads or hosting mission critical production environment</span></span> | <span data-ttu-id="bb655-155">以 HDD 為基礎、符合成本效益的磁碟支援，適用於開發/測試 VM 案例</span><span class="sxs-lookup"><span data-stu-id="bb655-155">HDD-based cost effective disk support for Dev/Test VM scenarios</span></span> |
| <span data-ttu-id="bb655-156">案例</span><span class="sxs-lookup"><span data-stu-id="bb655-156">Scenario</span></span>  | <span data-ttu-id="bb655-157">生產環境和重視效能的工作負載</span><span class="sxs-lookup"><span data-stu-id="bb655-157">Production and performance sensitive workloads</span></span> | <span data-ttu-id="bb655-158">開發/測試、非關鍵性</span><span class="sxs-lookup"><span data-stu-id="bb655-158">Dev/Test, non-critical,</span></span> <br><span data-ttu-id="bb655-159">不常存取</span><span class="sxs-lookup"><span data-stu-id="bb655-159">Infrequent access</span></span> |
| <span data-ttu-id="bb655-160">磁碟大小</span><span class="sxs-lookup"><span data-stu-id="bb655-160">Disk Size</span></span> | <span data-ttu-id="bb655-161">P4: 32 GB (僅限受控磁碟)</span><span class="sxs-lookup"><span data-stu-id="bb655-161">P4: 32 GB (Managed Disks only)</span></span><br><span data-ttu-id="bb655-162">P6: 64 GB (僅限受控磁碟)</span><span class="sxs-lookup"><span data-stu-id="bb655-162">P6: 64 GB (Managed Disks only)</span></span><br><span data-ttu-id="bb655-163">P10：128 GB</span><span class="sxs-lookup"><span data-stu-id="bb655-163">P10: 128 GB</span></span><br><span data-ttu-id="bb655-164">P20：512 GB</span><span class="sxs-lookup"><span data-stu-id="bb655-164">P20: 512 GB</span></span><br><span data-ttu-id="bb655-165">P30：1024 GB</span><span class="sxs-lookup"><span data-stu-id="bb655-165">P30: 1024 GB</span></span><br><span data-ttu-id="bb655-166">P40：2048 GB</span><span class="sxs-lookup"><span data-stu-id="bb655-166">P40: 2048 GB</span></span><br><span data-ttu-id="bb655-167">P50：4095 GB</span><span class="sxs-lookup"><span data-stu-id="bb655-167">P50: 4095 GB</span></span> | <span data-ttu-id="bb655-168">非受控磁碟：1 GB – 4 TB (4095 GB)</span><span class="sxs-lookup"><span data-stu-id="bb655-168">Unmanaged Disks: 1 GB – 4 TB (4095 GB)</span></span> <br><br><span data-ttu-id="bb655-169">受控磁碟：</span><span class="sxs-lookup"><span data-stu-id="bb655-169">Managed Disks:</span></span><br> <span data-ttu-id="bb655-170">S4：32 GB</span><span class="sxs-lookup"><span data-stu-id="bb655-170">S4: 32 GB</span></span> <br><span data-ttu-id="bb655-171">S6：64 GB</span><span class="sxs-lookup"><span data-stu-id="bb655-171">S6: 64 GB</span></span> <br><span data-ttu-id="bb655-172">S10：128 GB</span><span class="sxs-lookup"><span data-stu-id="bb655-172">S10: 128 GB</span></span> <br><span data-ttu-id="bb655-173">S20：512 GB</span><span class="sxs-lookup"><span data-stu-id="bb655-173">S20: 512 GB</span></span> <br><span data-ttu-id="bb655-174">S30：1024 GB</span><span class="sxs-lookup"><span data-stu-id="bb655-174">S30: 1024 GB</span></span> <br><span data-ttu-id="bb655-175">S40：2048 GB</span><span class="sxs-lookup"><span data-stu-id="bb655-175">S40: 2048 GB</span></span><br><span data-ttu-id="bb655-176">S50：4095 GB</span><span class="sxs-lookup"><span data-stu-id="bb655-176">S50: 4095 GB</span></span>| 
| <span data-ttu-id="bb655-177">每一磁碟的輸送量上限</span><span class="sxs-lookup"><span data-stu-id="bb655-177">Max Throughput per Disk</span></span> | <span data-ttu-id="bb655-178">250 MB/秒</span><span class="sxs-lookup"><span data-stu-id="bb655-178">250 MB/s</span></span> | <span data-ttu-id="bb655-179">60 MB/秒</span><span class="sxs-lookup"><span data-stu-id="bb655-179">60 MB/s</span></span> | 
| <span data-ttu-id="bb655-180">每一磁碟的 IOPS 上限</span><span class="sxs-lookup"><span data-stu-id="bb655-180">Max IOPS per Disk</span></span> | <span data-ttu-id="bb655-181">7500 IOPS</span><span class="sxs-lookup"><span data-stu-id="bb655-181">7500 IOPS</span></span> | <span data-ttu-id="bb655-182">500 IOPS</span><span class="sxs-lookup"><span data-stu-id="bb655-182">500 IOPS</span></span> | 

