## <a name="configure-your-application-tooaccess-azure-storage"></a><span data-ttu-id="8a61c-101">設定您的應用程式 tooaccess Azure 儲存體</span><span class="sxs-lookup"><span data-stu-id="8a61c-101">Configure your application tooaccess Azure Storage</span></span>
<span data-ttu-id="8a61c-102">有兩種方式 tooauthenticate 您應用程式 tooaccess 存放服務：</span><span class="sxs-lookup"><span data-stu-id="8a61c-102">There are two ways tooauthenticate your application tooaccess Storage services:</span></span>

* <span data-ttu-id="8a61c-103">共用金鑰：使用僅供測試用途的共用金鑰</span><span class="sxs-lookup"><span data-stu-id="8a61c-103">Shared Key: Use Shared Key for testing purposes only</span></span>
* <span data-ttu-id="8a61c-104">共用存取簽章 (SAS)：使用適用於生產應用程式的 SAS</span><span class="sxs-lookup"><span data-stu-id="8a61c-104">Shared Access Signature (SAS): Use SAS for production applications</span></span>

### <a name="shared-key"></a><span data-ttu-id="8a61c-105">共用金鑰</span><span class="sxs-lookup"><span data-stu-id="8a61c-105">Shared Key</span></span>
<span data-ttu-id="8a61c-106">共用的金鑰驗證表示您的應用程式會使用您的帳戶名稱和帳戶金鑰 tooaccess 儲存體服務。</span><span class="sxs-lookup"><span data-stu-id="8a61c-106">Shared Key authentication means that your application will use your account name and account key tooaccess Storage services.</span></span> <span data-ttu-id="8a61c-107">基於快速顯示 hello 如何 toouse 此程式庫，我們將使用此快速入門中的共用金鑰驗證。</span><span class="sxs-lookup"><span data-stu-id="8a61c-107">For hello purposes of quickly showing how toouse this library, we will be using Shared Key authentication in this getting started.</span></span>

> [!WARNING] 
> <span data-ttu-id="8a61c-108">**共用金鑰驗證請只限於測試目的之用！**</span><span class="sxs-lookup"><span data-stu-id="8a61c-108">**Only use Shared Key authentication for testing purposes!**</span></span> <span data-ttu-id="8a61c-109">您帳戶的名稱和帳戶金鑰，讓完整讀取/寫入存取 toohello 相關聯的儲存體帳戶，將會下載您的應用程式的分散式的 tooevery 人員。</span><span class="sxs-lookup"><span data-stu-id="8a61c-109">Your account name and account key, which give full read/write access toohello associated Storage account, will be distributed tooevery person that downloads your app.</span></span> <span data-ttu-id="8a61c-110">這並「不是」  的實作方式，因為您的金鑰有可能遭到不受信任的用戶端破壞。</span><span class="sxs-lookup"><span data-stu-id="8a61c-110">This is **not** a good practice as you risk having your key compromised by untrusted clients.</span></span>
> 
> 

<span data-ttu-id="8a61c-111">使用共用金鑰驗證時，您將會建立 [連接字串](../articles/storage/common/storage-configure-connection-string.md)。</span><span class="sxs-lookup"><span data-stu-id="8a61c-111">When using Shared Key authentication, you will create a [connection string](../articles/storage/common/storage-configure-connection-string.md).</span></span> <span data-ttu-id="8a61c-112">hello 連接字串所組成：</span><span class="sxs-lookup"><span data-stu-id="8a61c-112">hello connection string is comprised of:</span></span>  

* <span data-ttu-id="8a61c-113">hello **DefaultEndpointsProtocol** -您可以選擇 HTTP 或 HTTPS。</span><span class="sxs-lookup"><span data-stu-id="8a61c-113">hello **DefaultEndpointsProtocol** - you can choose HTTP or HTTPS.</span></span> <span data-ttu-id="8a61c-114">不過，強烈建議您使用 HTTPS。</span><span class="sxs-lookup"><span data-stu-id="8a61c-114">However, using HTTPS is highly recommended.</span></span>
* <span data-ttu-id="8a61c-115">hello**帳戶名稱**-hello 的儲存體帳戶名稱</span><span class="sxs-lookup"><span data-stu-id="8a61c-115">hello **Account Name** - hello name of your storage account</span></span>
* <span data-ttu-id="8a61c-116">hello**帳戶金鑰**-在 hello [Azure 入口網站](https://portal.azure.com)，瀏覽 tooyour 儲存體帳戶，然後按一下 hello**金鑰**圖示 toofind 這項資訊。</span><span class="sxs-lookup"><span data-stu-id="8a61c-116">hello **Account Key** - On hello [Azure Portal](https://portal.azure.com), navigate tooyour storage account and click hello **Keys** icon toofind this information.</span></span>
* <span data-ttu-id="8a61c-117">(選擇性) **EndpointSuffix** - 這用於具有不同端點尾碼的儲存體服務，例如 Azure China 或 Azure 控管的區域。</span><span class="sxs-lookup"><span data-stu-id="8a61c-117">(Optional) **EndpointSuffix** - This is used for storage services in regions with different endpoint suffixes, such as Azure China or Azure Governance.</span></span>

<span data-ttu-id="8a61c-118">使用共用金鑰驗證的連接字串的範例如下︰</span><span class="sxs-lookup"><span data-stu-id="8a61c-118">Here is an example of connection string using Shared Key authentication:</span></span>

`"DefaultEndpointsProtocol=https;AccountName=your_account_name_here;AccountKey=your_account_key_here"`

### <a name="shared-access-signatures-sas"></a><span data-ttu-id="8a61c-119">共用存取簽章 (SAS)</span><span class="sxs-lookup"><span data-stu-id="8a61c-119">Shared Access Signatures (SAS)</span></span>
<span data-ttu-id="8a61c-120">行動應用程式中，hello 建議使用 hello Azure 儲存體服務針對用戶端的驗證要求的方法是使用共用存取簽章 (SAS)。</span><span class="sxs-lookup"><span data-stu-id="8a61c-120">For a mobile application, hello recommended method for authenticating a request by a client against hello Azure Storage service is by using a Shared Access Signature (SAS).</span></span> <span data-ttu-id="8a61c-121">SAS 可讓您 toogrant 用戶端存取 tooa 資源一段指定時間，與指定權限集。</span><span class="sxs-lookup"><span data-stu-id="8a61c-121">SAS allows you toogrant a client access tooa resource for a specified period of time, with a specified set of permissions.</span></span>
<span data-ttu-id="8a61c-122">Hello 儲存體帳戶擁有者，您將需要針對您的行動用戶端 tooconsume toogenerate SAS。</span><span class="sxs-lookup"><span data-stu-id="8a61c-122">As hello storage account owner, you'll need toogenerate a SAS for your mobile clients tooconsume.</span></span> <span data-ttu-id="8a61c-123">toogenerate hello SAS，您可能會想 toowrite 產生 hello SAS 散發的 toobe tooyour 用戶端的個別服務。</span><span class="sxs-lookup"><span data-stu-id="8a61c-123">toogenerate hello SAS, you'll probably want toowrite a separate service that generates hello SAS toobe distributed tooyour clients.</span></span> <span data-ttu-id="8a61c-124">為了測試用途，您可以使用 hello [Microsoft Azure 儲存體總管](http://storageexplorer.com)或 hello [Azure 入口網站](https://portal.azure.com)toogenerate SAS。</span><span class="sxs-lookup"><span data-stu-id="8a61c-124">For testing purposes, you can use hello [Microsoft Azure Storage Explorer](http://storageexplorer.com) or hello [Azure Portal](https://portal.azure.com) toogenerate a SAS.</span></span> <span data-ttu-id="8a61c-125">當您建立 hello SAS 時，您可以指定 hello 有效時間間隔的 hello 透過 SAS，以及 hello SAS 授權 toohello 用戶端 hello 權限。</span><span class="sxs-lookup"><span data-stu-id="8a61c-125">When you create hello SAS, you can specify hello time interval over which hello SAS is valid, and hello permissions that hello SAS grants toohello client.</span></span>

<span data-ttu-id="8a61c-126">hello 下列範例顯示如何 toouse 會 hello Microsoft Azure 儲存體總管 toogenerate SAS。</span><span class="sxs-lookup"><span data-stu-id="8a61c-126">hello following example shows how toouse hello Microsoft Azure Storage Explorer toogenerate a SAS.</span></span>

1. <span data-ttu-id="8a61c-127">如果您還沒有這麼做，[安裝 hello Microsoft Azure 儲存體總管](http://storageexplorer.com)</span><span class="sxs-lookup"><span data-stu-id="8a61c-127">If you haven't already, [Install hello Microsoft Azure Storage Explorer](http://storageexplorer.com)</span></span>
2. <span data-ttu-id="8a61c-128">連接 tooyour 訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="8a61c-128">Connect tooyour subscription.</span></span>
3. <span data-ttu-id="8a61c-129">按一下儲存體帳戶，然後在 hello 左下方的 hello [動作] 索引標籤上按一下。</span><span class="sxs-lookup"><span data-stu-id="8a61c-129">Click on your Storage account and click on hello "Actions" tab at hello bottom left.</span></span> <span data-ttu-id="8a61c-130">您的 SAS，請按 「 取得共用存取簽章 」 toogenerate 「 連接字串 」。</span><span class="sxs-lookup"><span data-stu-id="8a61c-130">Click "Get Shared Access Signature" toogenerate a "connection string" for your SAS.</span></span>
4. <span data-ttu-id="8a61c-131">授與讀取和寫入權限在 hello 服務、 容器和物件層級 hello hello 儲存體帳戶的 blob 服務的 SAS 連接字串範例如下。</span><span class="sxs-lookup"><span data-stu-id="8a61c-131">Here is an example of a SAS connection string that grants read and write permissions at hello service, container and object level for hello blob service of hello Storage account.</span></span>
   
   `"SharedAccessSignature=sv=2015-04-05&ss=b&srt=sco&sp=rw&se=2016-07-21T18%3A00%3A00Z&sig=3ABdLOJZosCp0o491T%2BqZGKIhafF1nlM3MzESDDD3Gg%3D;BlobEndpoint=https://youraccount.blob.core.windows.net"`

<span data-ttu-id="8a61c-132">如您所見，使用 SAS 時，您並不會在應用程式中公開您的帳戶金鑰。</span><span class="sxs-lookup"><span data-stu-id="8a61c-132">As you can see, when using a SAS, you’re not exposing your account key in your application.</span></span> <span data-ttu-id="8a61c-133">您可以進一步了解 SAS 和使用 SAS 所取出的最佳作法[共用存取簽章： 了解 hello SAS 模型](../articles/storage/common/storage-dotnet-shared-access-signature-part-1.md)。</span><span class="sxs-lookup"><span data-stu-id="8a61c-133">You can learn more about SAS and best practices for using SAS by checking out [Shared Access Signatures: Understanding hello SAS model](../articles/storage/common/storage-dotnet-shared-access-signature-part-1.md).</span></span>

