## <a name="configure-your-application-to-access-azure-storage"></a><span data-ttu-id="856d8-101">設定您的應用程式以存取 Azure 儲存體</span><span class="sxs-lookup"><span data-stu-id="856d8-101">Configure your application to access Azure Storage</span></span>
<span data-ttu-id="856d8-102">有兩種方式可驗證您的應用程式對儲存體服務的存取權：</span><span class="sxs-lookup"><span data-stu-id="856d8-102">There are two ways to authenticate your application to access Storage services:</span></span>

* <span data-ttu-id="856d8-103">共用金鑰：使用僅供測試用途的共用金鑰</span><span class="sxs-lookup"><span data-stu-id="856d8-103">Shared Key: Use Shared Key for testing purposes only</span></span>
* <span data-ttu-id="856d8-104">共用存取簽章 (SAS)：使用適用於生產應用程式的 SAS</span><span class="sxs-lookup"><span data-stu-id="856d8-104">Shared Access Signature (SAS): Use SAS for production applications</span></span>

### <a name="shared-key"></a><span data-ttu-id="856d8-105">共用金鑰</span><span class="sxs-lookup"><span data-stu-id="856d8-105">Shared Key</span></span>
<span data-ttu-id="856d8-106">共用金鑰驗證表示您的應用程式會使用您的帳戶名稱和帳戶金鑰來存取儲存體服務。</span><span class="sxs-lookup"><span data-stu-id="856d8-106">Shared Key authentication means that your application will use your account name and account key to access Storage services.</span></span> <span data-ttu-id="856d8-107">為了快速示範如何使用此程式庫，我們將在此快速入門中使用共用金鑰驗證。</span><span class="sxs-lookup"><span data-stu-id="856d8-107">For the purposes of quickly showing how to use this library, we will be using Shared Key authentication in this getting started.</span></span>

> [!WARNING] 
> <span data-ttu-id="856d8-108">**共用金鑰驗證請只限於測試目的之用！**</span><span class="sxs-lookup"><span data-stu-id="856d8-108">**Only use Shared Key authentication for testing purposes!**</span></span> <span data-ttu-id="856d8-109">您的帳戶名稱和帳戶金鑰 (會提供對相關儲存體帳戶的完整讀取/寫入權限) 將會分送給下載您的應用程式的每個人。</span><span class="sxs-lookup"><span data-stu-id="856d8-109">Your account name and account key, which give full read/write access to the associated Storage account, will be distributed to every person that downloads your app.</span></span> <span data-ttu-id="856d8-110">這並「不是」  的實作方式，因為您的金鑰有可能遭到不受信任的用戶端破壞。</span><span class="sxs-lookup"><span data-stu-id="856d8-110">This is **not** a good practice as you risk having your key compromised by untrusted clients.</span></span>
> 
> 

<span data-ttu-id="856d8-111">使用共用金鑰驗證時，您將會建立 [連接字串](../articles/storage/common/storage-configure-connection-string.md)。</span><span class="sxs-lookup"><span data-stu-id="856d8-111">When using Shared Key authentication, you will create a [connection string](../articles/storage/common/storage-configure-connection-string.md).</span></span> <span data-ttu-id="856d8-112">連接字串包含：</span><span class="sxs-lookup"><span data-stu-id="856d8-112">The connection string is comprised of:</span></span>  

* <span data-ttu-id="856d8-113">**DefaultEndpointsProtocol** - 您可以選擇 HTTP 或 HTTPS。</span><span class="sxs-lookup"><span data-stu-id="856d8-113">The **DefaultEndpointsProtocol** - you can choose HTTP or HTTPS.</span></span> <span data-ttu-id="856d8-114">不過，強烈建議您使用 HTTPS。</span><span class="sxs-lookup"><span data-stu-id="856d8-114">However, using HTTPS is highly recommended.</span></span>
* <span data-ttu-id="856d8-115">**帳戶名稱** - 您儲存體帳戶的名稱。</span><span class="sxs-lookup"><span data-stu-id="856d8-115">The **Account Name** - the name of your storage account</span></span>
* <span data-ttu-id="856d8-116">**帳戶金鑰** - 在 [Azure 入口網站](https://portal.azure.com)上，瀏覽至儲存體帳戶並按一下 [金鑰] 圖示來找出這項資訊。</span><span class="sxs-lookup"><span data-stu-id="856d8-116">The **Account Key** - On the [Azure Portal](https://portal.azure.com), navigate to your storage account and click the **Keys** icon to find this information.</span></span>
* <span data-ttu-id="856d8-117">(選擇性) **EndpointSuffix** - 這用於具有不同端點尾碼的儲存體服務，例如 Azure China 或 Azure 控管的區域。</span><span class="sxs-lookup"><span data-stu-id="856d8-117">(Optional) **EndpointSuffix** - This is used for storage services in regions with different endpoint suffixes, such as Azure China or Azure Governance.</span></span>

<span data-ttu-id="856d8-118">使用共用金鑰驗證的連接字串的範例如下︰</span><span class="sxs-lookup"><span data-stu-id="856d8-118">Here is an example of connection string using Shared Key authentication:</span></span>

`"DefaultEndpointsProtocol=https;AccountName=your_account_name_here;AccountKey=your_account_key_here"`

### <a name="shared-access-signatures-sas"></a><span data-ttu-id="856d8-119">共用存取簽章 (SAS)</span><span class="sxs-lookup"><span data-stu-id="856d8-119">Shared Access Signatures (SAS)</span></span>
<span data-ttu-id="856d8-120">對於行動應用程式，對 Azure 儲存體服務驗證用戶端所提要求的建議方法是使用共用存取簽章 (SAS)。</span><span class="sxs-lookup"><span data-stu-id="856d8-120">For a mobile application, the recommended method for authenticating a request by a client against the Azure Storage service is by using a Shared Access Signature (SAS).</span></span> <span data-ttu-id="856d8-121">SAS 可讓您授與對資源的用戶端存取權一段指定的時間，且限定於指定的權限集。</span><span class="sxs-lookup"><span data-stu-id="856d8-121">SAS allows you to grant a client access to a resource for a specified period of time, with a specified set of permissions.</span></span>
<span data-ttu-id="856d8-122">身為儲存體帳戶擁有者，您必須產生 SAS 供您行動用戶端取用。</span><span class="sxs-lookup"><span data-stu-id="856d8-122">As the storage account owner, you'll need to generate a SAS for your mobile clients to consume.</span></span> <span data-ttu-id="856d8-123">為了產生 SAS，您可能會想要撰寫個別的服務，以產生會分送給用戶端的 SAS。</span><span class="sxs-lookup"><span data-stu-id="856d8-123">To generate the SAS, you'll probably want to write a separate service that generates the SAS to be distributed to your clients.</span></span> <span data-ttu-id="856d8-124">針對測試目的，您可以使用 [Microsoft Azure 儲存體總管](http://storageexplorer.com)或 [Azure 入口網站](https://portal.azure.com)來產生 SAS。</span><span class="sxs-lookup"><span data-stu-id="856d8-124">For testing purposes, you can use the [Microsoft Azure Storage Explorer](http://storageexplorer.com) or the [Azure Portal](https://portal.azure.com) to generate a SAS.</span></span> <span data-ttu-id="856d8-125">當您建立 SAS 時，您可以指定 SAS 有效的時間間隔，和 SAS 授與給用戶端的權限。</span><span class="sxs-lookup"><span data-stu-id="856d8-125">When you create the SAS, you can specify the time interval over which the SAS is valid, and the permissions that the SAS grants to the client.</span></span>

<span data-ttu-id="856d8-126">下列範例示範如何使用 Microsoft Azure 儲存體總管來產生 SAS。</span><span class="sxs-lookup"><span data-stu-id="856d8-126">The following example shows how to use the Microsoft Azure Storage Explorer to generate a SAS.</span></span>

1. <span data-ttu-id="856d8-127">如果您還沒有這麼做， [請安裝 Microsoft Azure 儲存體總管](http://storageexplorer.com)</span><span class="sxs-lookup"><span data-stu-id="856d8-127">If you haven't already, [Install the Microsoft Azure Storage Explorer](http://storageexplorer.com)</span></span>
2. <span data-ttu-id="856d8-128">連線至您的訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="856d8-128">Connect to your subscription.</span></span>
3. <span data-ttu-id="856d8-129">按一下 [儲存體帳戶]，並按一下左下方的 [動作] 索引標籤。</span><span class="sxs-lookup"><span data-stu-id="856d8-129">Click on your Storage account and click on the "Actions" tab at the bottom left.</span></span> <span data-ttu-id="856d8-130">按一下 [取得共用存取簽章]，以產生您 SAS 的連接字串。</span><span class="sxs-lookup"><span data-stu-id="856d8-130">Click "Get Shared Access Signature" to generate a "connection string" for your SAS.</span></span>
4. <span data-ttu-id="856d8-131">以下是 SAS 連接字串的範例，會針對儲存體帳戶的 Blob 服務，授予對服務、容器和物件層級的讀取與寫入權限。</span><span class="sxs-lookup"><span data-stu-id="856d8-131">Here is an example of a SAS connection string that grants read and write permissions at the service, container and object level for the blob service of the Storage account.</span></span>
   
   `"SharedAccessSignature=sv=2015-04-05&ss=b&srt=sco&sp=rw&se=2016-07-21T18%3A00%3A00Z&sig=3ABdLOJZosCp0o491T%2BqZGKIhafF1nlM3MzESDDD3Gg%3D;BlobEndpoint=https://youraccount.blob.core.windows.net"`

<span data-ttu-id="856d8-132">如您所見，使用 SAS 時，您並不會在應用程式中公開您的帳戶金鑰。</span><span class="sxs-lookup"><span data-stu-id="856d8-132">As you can see, when using a SAS, you’re not exposing your account key in your application.</span></span> <span data-ttu-id="856d8-133">您可以參閱 [共用存取簽章：了解 SAS 模型](../articles/storage/common/storage-dotnet-shared-access-signature-part-1.md)，以進一步了解 SAS 與使用 SAS 的最佳做法。</span><span class="sxs-lookup"><span data-stu-id="856d8-133">You can learn more about SAS and best practices for using SAS by checking out [Shared Access Signatures: Understanding the SAS model](../articles/storage/common/storage-dotnet-shared-access-signature-part-1.md).</span></span>

