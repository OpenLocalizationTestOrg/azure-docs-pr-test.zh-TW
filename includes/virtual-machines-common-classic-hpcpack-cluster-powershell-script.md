



<span data-ttu-id="9424e-101">根據您的環境和選擇，hello 指令碼可以建立所有 hello 的叢集基礎結構，包括 hello Azure 虛擬網路、 儲存體帳戶、 雲端服務、 網域控制站、 遠端或本機 SQL 資料庫、 前端節點和其他叢集節點。</span><span class="sxs-lookup"><span data-stu-id="9424e-101">Depending on your environment and choices, hello script can create all hello cluster infrastructure, including hello Azure virtual network, storage accounts, cloud services, domain controller, remote or local SQL databases, head node, and additional cluster nodes.</span></span> <span data-ttu-id="9424e-102">或者，hello 指令碼可以使用預先存在的 Azure 基礎結構，並建立僅 hello HPC 叢集的節點。</span><span class="sxs-lookup"><span data-stu-id="9424e-102">Alternatively, hello script can use pre-existing Azure infrastructure and create only hello HPC cluster nodes.</span></span>

<span data-ttu-id="9424e-103">如需規劃 HPC Pack 叢集的背景資訊，請參閱 hello[產品評估及規劃](https://technet.microsoft.com/library/jj899596.aspx)和[入門](https://technet.microsoft.com/library/jj899590.aspx)hello HPC Pack 2012 R2 TechNet 文件庫中的內容。</span><span class="sxs-lookup"><span data-stu-id="9424e-103">For background information about planning an HPC Pack cluster, see hello [Product Evaluation and Planning](https://technet.microsoft.com/library/jj899596.aspx) and [Getting Started](https://technet.microsoft.com/library/jj899590.aspx) content in hello HPC Pack 2012 R2 TechNet Library.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="9424e-104">必要條件</span><span class="sxs-lookup"><span data-stu-id="9424e-104">Prerequisites</span></span>
* <span data-ttu-id="9424e-105">**Azure 訂用帳戶**： 您可以使用任一 hello Azure Global 或 Azure China 服務中的訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="9424e-105">**Azure subscription**: You can use a subscription in either hello Azure Global or Azure China service.</span></span> <span data-ttu-id="9424e-106">您的訂用帳戶限制會影響叢集節點，您可以部署的 hello 數目和類型。</span><span class="sxs-lookup"><span data-stu-id="9424e-106">Your subscription limits affect hello number and type of cluster nodes you can deploy.</span></span> <span data-ttu-id="9424e-107">如需相關資訊，請參閱 [Azure 訂用帳戶和服務限制、配額與條件約束](../articles/azure-subscription-service-limits.md)。</span><span class="sxs-lookup"><span data-stu-id="9424e-107">For information, see [Azure subscription and service limits, quotas, and constraints](../articles/azure-subscription-service-limits.md).</span></span>
* <span data-ttu-id="9424e-108">**使用 Azure PowerShell 0.8.10 Windows 用戶端電腦或更新版本安裝並設定**： 請參閱[開始使用 Azure PowerShell](/powershell/azureps-cmdlets-docs)的安裝指示和步驟 tooconnect tooyour Azure 訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="9424e-108">**Windows client computer with Azure PowerShell 0.8.10 or later installed and configured**: See [Get started with Azure PowerShell](/powershell/azureps-cmdlets-docs) for installation instructions and steps tooconnect tooyour Azure subscription.</span></span>
* <span data-ttu-id="9424e-109">**HPC Pack IaaS 部署指令碼**： 下載並解壓縮 hello 最新版 hello 指令碼從 hello [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=44949)。</span><span class="sxs-lookup"><span data-stu-id="9424e-109">**HPC Pack IaaS deployment script**: Download and unpack hello latest version of hello script from hello [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=44949).</span></span> <span data-ttu-id="9424e-110">執行檢查 hello hello 指令碼版本`New-HPCIaaSCluster.ps1 –Version`。</span><span class="sxs-lookup"><span data-stu-id="9424e-110">Check hello version of hello script by running `New-HPCIaaSCluster.ps1 –Version`.</span></span> <span data-ttu-id="9424e-111">這篇文章根據 4.5.2 版的 hello 指令碼。</span><span class="sxs-lookup"><span data-stu-id="9424e-111">This article is based on version 4.5.2 of hello script.</span></span>
* <span data-ttu-id="9424e-112">**指令碼組態檔**： 建立 hello 指令碼會使用 tooconfigure hello HPC 叢集的 XML 檔案。</span><span class="sxs-lookup"><span data-stu-id="9424e-112">**Script configuration file**: Create an XML file that hello script uses tooconfigure hello HPC cluster.</span></span> <span data-ttu-id="9424e-113">資訊與範例，請參閱本文稍後的章節，hello hello 部署指令碼及伴隨的 Manual.rtf 檔案。</span><span class="sxs-lookup"><span data-stu-id="9424e-113">For information and examples, see sections later in this article and hello file Manual.rtf that accompanies hello deployment script.</span></span>

## <a name="syntax"></a><span data-ttu-id="9424e-114">語法</span><span class="sxs-lookup"><span data-stu-id="9424e-114">Syntax</span></span>
```PowerShell
New-HPCIaaSCluster.ps1 [-ConfigFile] <String> [-AdminUserName]<String> [[-AdminPassword] <String>] [[-HPCImageName] <String>] [[-LogFile] <String>] [-Force] [-NoCleanOnFailure] [-PSSessionSkipCACheck] [<CommonParameters>]
```
> [!NOTE]
> <span data-ttu-id="9424e-115">系統管理員身分執行 hello 指令碼。</span><span class="sxs-lookup"><span data-stu-id="9424e-115">Run hello script as an administrator.</span></span>
> 
> 

### <a name="parameters"></a><span data-ttu-id="9424e-116">參數</span><span class="sxs-lookup"><span data-stu-id="9424e-116">Parameters</span></span>
* <span data-ttu-id="9424e-117">**ConfigFile**： 指定 hello hello 設定檔 toodescribe hello HPC 叢集的檔案路徑。</span><span class="sxs-lookup"><span data-stu-id="9424e-117">**ConfigFile**: Specifies hello file path of hello configuration file toodescribe hello HPC cluster.</span></span> <span data-ttu-id="9424e-118">請參閱本主題中，或在 hello hello 資料夾包含 hello 指令碼中的 Manual.rtf 檔案 hello 設定檔有關的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="9424e-118">See more about hello configuration file in this topic, or in hello file Manual.rtf in hello folder containing hello script.</span></span>
* <span data-ttu-id="9424e-119">**AdminUserName**： 指定 hello 使用者名稱。</span><span class="sxs-lookup"><span data-stu-id="9424e-119">**AdminUserName**: Specifies hello user name.</span></span> <span data-ttu-id="9424e-120">如果 hello 網域樹系由 hello 指令碼，這會成為所有 Vm 的 hello 本機系統管理員使用者名稱和 hello 網域系統管理員名稱。</span><span class="sxs-lookup"><span data-stu-id="9424e-120">If hello domain forest is created by hello script, this becomes hello local administrator user name for all VMs and hello domain administrator name.</span></span> <span data-ttu-id="9424e-121">如果 hello 網域樹系已存在，這指定 hello 網域使用者，如 hello 本機系統管理員使用者名稱 tooinstall HPC Pack 也一樣。</span><span class="sxs-lookup"><span data-stu-id="9424e-121">If hello domain forest already exists, this specifies hello domain user as hello local administrator user name tooinstall HPC Pack.</span></span>
* <span data-ttu-id="9424e-122">**AdminPassword**： 指定 hello 系統管理員的密碼。</span><span class="sxs-lookup"><span data-stu-id="9424e-122">**AdminPassword**: Specifies hello administrator’s password.</span></span> <span data-ttu-id="9424e-123">如果未指定 hello 命令列中，hello 指令碼會提示您 tooinput hello 密碼。</span><span class="sxs-lookup"><span data-stu-id="9424e-123">If not specified in hello command line, hello script prompts you tooinput hello password.</span></span>
* <span data-ttu-id="9424e-124">**HPCImageName** （選擇性）： 指定使用 toodeploy hello HPC 叢集的 hello HPC Pack VM 映像名稱。</span><span class="sxs-lookup"><span data-stu-id="9424e-124">**HPCImageName** (optional): Specifies hello HPC Pack VM image name used toodeploy hello HPC cluster.</span></span> <span data-ttu-id="9424e-125">它必須是從 hello Azure Marketplace 提供 Microsoft HPC Pack 映像。</span><span class="sxs-lookup"><span data-stu-id="9424e-125">It must be a Microsoft-provided HPC Pack image from hello Azure Marketplace.</span></span> <span data-ttu-id="9424e-126">如果未指定 （通常） ﹜ 呤 hello 指令碼會選擇最新發行的 hello [HPC Pack 2012 R2 映像](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/)。</span><span class="sxs-lookup"><span data-stu-id="9424e-126">If not specified (recommended usually), hello script chooses hello latest published [HPC Pack 2012 R2 image](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/).</span></span> <span data-ttu-id="9424e-127">hello 最新的映像為基礎的 HPC Pack 2012 R2 Update 3 安裝 Windows Server 2012 R2 Datacenter。</span><span class="sxs-lookup"><span data-stu-id="9424e-127">hello latest image is based on Windows Server 2012 R2 Datacenter with HPC Pack 2012 R2 Update 3 installed.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="9424e-128">若未指定有效的 HPC Pack 映像，部署將會失敗。</span><span class="sxs-lookup"><span data-stu-id="9424e-128">Deployment fails if you don't specify a valid HPC Pack image.</span></span>
  > 
  > 
* <span data-ttu-id="9424e-129">**記錄檔**（選擇性）： 指定 hello 部署記錄檔路徑。</span><span class="sxs-lookup"><span data-stu-id="9424e-129">**LogFile** (optional): Specifies hello deployment log file path.</span></span> <span data-ttu-id="9424e-130">如果未指定，hello 指令碼會建立 hello 執行 hello 指令碼的 hello 電腦的暫存目錄中的記錄檔。</span><span class="sxs-lookup"><span data-stu-id="9424e-130">If not specified, hello script creates a log file in hello temp directory of hello computer running hello script.</span></span>
* <span data-ttu-id="9424e-131">**強制**（選擇性）： 隱藏所有 hello 確認提示。</span><span class="sxs-lookup"><span data-stu-id="9424e-131">**Force** (optional): Suppresses all hello confirmation prompts.</span></span>
* <span data-ttu-id="9424e-132">**NoCleanOnFailure** （選擇性）： 指定不會移除該 hello 未成功部署的 Azure Vm。</span><span class="sxs-lookup"><span data-stu-id="9424e-132">**NoCleanOnFailure** (optional): Specifies that hello Azure VMs that are not successfully deployed are not removed.</span></span> <span data-ttu-id="9424e-133">手動移除這些 Vm，然後再重新執行指令碼 toocontinue hello 部署 hello，或 hello 部署可能會失敗。</span><span class="sxs-lookup"><span data-stu-id="9424e-133">Remove these VMs manually before rerunning hello script toocontinue hello deployment, or hello deployment may fail.</span></span>
* <span data-ttu-id="9424e-134">**PSSessionSkipCACheck** （選擇性）： 已使用此指令碼部署的每個雲端服務，如自我簽署的憑證自動由 Azure 產生，並且 hello 雲端服務中的所有 hello Vm 都使用與此憑證 hello 預設 Windows遠端管理 (WinRM) 憑證。</span><span class="sxs-lookup"><span data-stu-id="9424e-134">**PSSessionSkipCACheck** (optional): For every cloud service with VMs deployed by this script, a self-signed certificate is automatically generated by Azure, and all hello VMs in hello cloud service use this certificate as hello default Windows Remote Management (WinRM) certificate.</span></span> <span data-ttu-id="9424e-135">toodeploy HPC 功能，在這些 Azure Vm 中的，預設 hello 指令碼中暫時安裝這些憑證 hello 本機電腦\\受信任的根憑證授權單位存放區的 hello 用戶端電腦 toosuppress hello 「 不受信任 CA 」 安全性指令碼執行期間發生錯誤。</span><span class="sxs-lookup"><span data-stu-id="9424e-135">toodeploy HPC features in these Azure VMs, hello script by default temporarily installs these certificates in hello Local Computer\\Trusted Root Certification Authorities store of hello client computer toosuppress hello “not trusted CA” security error during script execution.</span></span> <span data-ttu-id="9424e-136">hello 指令碼完成時，會移除 hello 憑證。</span><span class="sxs-lookup"><span data-stu-id="9424e-136">hello certificates are removed when hello script finishes.</span></span> <span data-ttu-id="9424e-137">如果指定此參數，hello 憑證不會安裝在 hello 用戶端電腦上，並隱藏 hello 安全性警告。</span><span class="sxs-lookup"><span data-stu-id="9424e-137">If this parameter is specified, hello certificates are not installed in hello client computer, and hello security warning is suppressed.</span></span>
  
  > [!IMPORTANT]
  > <span data-ttu-id="9424e-138">此參數不建議用於生產部署。</span><span class="sxs-lookup"><span data-stu-id="9424e-138">This parameter is not recommended for production deployments.</span></span>
  > 
  > 

### <a name="example"></a><span data-ttu-id="9424e-139">範例</span><span class="sxs-lookup"><span data-stu-id="9424e-139">Example</span></span>
<span data-ttu-id="9424e-140">hello 下列範例會建立與使用組態檔的 HPC Pack 叢集*MyConfigFile.xml*，並指定安裝 hello 叢集系統管理員認證。</span><span class="sxs-lookup"><span data-stu-id="9424e-140">hello following example creates an HPC Pack cluster using the configuration file *MyConfigFile.xml*, and specifies administrator credentials for installing hello cluster.</span></span>

```PowerShell
.\New-HPCIaaSCluster.ps1 –ConfigFile MyConfigFile.xml -AdminUserName <username> –AdminPassword <password>
```

### <a name="additional-considerations"></a><span data-ttu-id="9424e-141">其他考量</span><span class="sxs-lookup"><span data-stu-id="9424e-141">Additional considerations</span></span>
* <span data-ttu-id="9424e-142">hello 指令碼可選擇啟用透過 hello HPC Pack web 入口網站或 hello HPC Pack REST API 提交作業。</span><span class="sxs-lookup"><span data-stu-id="9424e-142">hello script can optionally enable job submission through hello HPC Pack web portal or hello HPC Pack REST API.</span></span>
* <span data-ttu-id="9424e-143">如果您想 tooinstall 其他軟體或設定其他設定 hello 指令碼 （選擇性） 可以 hello 前端節點上執行自訂的前置和後置組態指令碼。</span><span class="sxs-lookup"><span data-stu-id="9424e-143">hello script can optionally run custom pre- and post-configuration scripts on hello head node if you want tooinstall additional software or configure other settings.</span></span>

## <a name="configuration-file"></a><span data-ttu-id="9424e-144">組態檔</span><span class="sxs-lookup"><span data-stu-id="9424e-144">Configuration file</span></span>
<span data-ttu-id="9424e-145">hello hello 部署指令碼的組態檔是 XML 檔案。</span><span class="sxs-lookup"><span data-stu-id="9424e-145">hello configuration file for hello deployment script is an XML file.</span></span> <span data-ttu-id="9424e-146">hello 結構描述檔案 HPCIaaSClusterConfig.xsd 位於 hello HPC Pack IaaS 部署指令碼資料夾中。</span><span class="sxs-lookup"><span data-stu-id="9424e-146">hello schema file HPCIaaSClusterConfig.xsd is in hello HPC Pack IaaS deployment script folder.</span></span> <span data-ttu-id="9424e-147">**IaaSClusterConfig**是根項目 hello hello 組態檔，其中包含 hello hello hello 部署指令碼資料夾中的 Manual.rtf 檔案中的詳細資料 中描述的子元素。</span><span class="sxs-lookup"><span data-stu-id="9424e-147">**IaaSClusterConfig** is hello root element of hello configuration file, which contains hello child elements described in detail in hello file Manual.rtf in hello deployment script folder.</span></span>

