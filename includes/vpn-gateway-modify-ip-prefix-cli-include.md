### <span data-ttu-id="adbd6-101"><a name="noconnection"></a>修改區域網路閘道 IP 位址首碼 - 沒有閘道連線</span><span class="sxs-lookup"><span data-stu-id="adbd6-101"><a name="noconnection"></a>To modify local network gateway IP address prefixes - no gateway connection</span></span>

<span data-ttu-id="adbd6-102">如果您沒有閘道連線，而且想要新增或移除 IP 位址首碼，您會使用與您用於建立區域網路閘道的相同命令 [az network local-gateway create](https://docs.microsoft.com/cli/azure/network/local-gateway#create)。</span><span class="sxs-lookup"><span data-stu-id="adbd6-102">If you don't have a gateway connection and you want to add or remove IP address prefixes, you use the same command that you use to create the local network gateway, [az network local-gateway create](https://docs.microsoft.com/cli/azure/network/local-gateway#create).</span></span> <span data-ttu-id="adbd6-103">您也可以使用此命令來更新 VPN 裝置的閘道 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="adbd6-103">You can also use this command to update the gateway IP address for the VPN device.</span></span> <span data-ttu-id="adbd6-104">若要覆寫目前的設定，請使用現有的區域網路閘道名稱。</span><span class="sxs-lookup"><span data-stu-id="adbd6-104">To overwrite the current settings, use the existing name of your local network gateway.</span></span> <span data-ttu-id="adbd6-105">如果您使用不同的名稱，您會建立新的區域網路閘道，而不是覆寫現有閘道。</span><span class="sxs-lookup"><span data-stu-id="adbd6-105">If you use a different name, you create a new local network gateway, instead of overwriting the existing one.</span></span>

<span data-ttu-id="adbd6-106">每次進行變更時，您都必須指定完整的首碼清單，而不只是指定您想要變更的首碼。</span><span class="sxs-lookup"><span data-stu-id="adbd6-106">Each time you make a change, the entire list of prefixes must be specified, not just the prefixes that you want to change.</span></span> <span data-ttu-id="adbd6-107">僅指定我們想要保留的首碼。</span><span class="sxs-lookup"><span data-stu-id="adbd6-107">Specify only the prefixes that you want to keep.</span></span> <span data-ttu-id="adbd6-108">在此案例中為 10.0.0.0/24 和 20.0.0.0/24</span><span class="sxs-lookup"><span data-stu-id="adbd6-108">In this case, 10.0.0.0/24 and 20.0.0.0/24</span></span>

```azurecli
az network local-gateway create --gateway-ip-address 23.99.221.164 --name Site2 --connection-name TestRG1 --local-address-prefixes 10.0.0.0/24 20.0.0.0/24
```

### <span data-ttu-id="adbd6-109"><a name="withconnection"></a>修改區域網路閘道 IP 位址首碼 - 現有閘道連線</span><span class="sxs-lookup"><span data-stu-id="adbd6-109"><a name="withconnection"></a>To modify local network gateway IP address prefixes - existing gateway connection</span></span>

<span data-ttu-id="adbd6-110">如果您有閘道連線，而且想要新增或移除 IP 位址首碼，您可以使用 [az network local-gateway update](https://docs.microsoft.com/cli/azure/network/local-gateway#update) 更新首碼。</span><span class="sxs-lookup"><span data-stu-id="adbd6-110">If you have a gateway connection and want to add or remove IP address prefixes, you can update the prefixes using [az network local-gateway update](https://docs.microsoft.com/cli/azure/network/local-gateway#update).</span></span> <span data-ttu-id="adbd6-111">這會導致您 VPN 連線的停機時間。</span><span class="sxs-lookup"><span data-stu-id="adbd6-111">This results in some downtime for your VPN connection.</span></span> <span data-ttu-id="adbd6-112">修改 IP 位址首碼時，您不需要刪除 VPN 閘道。</span><span class="sxs-lookup"><span data-stu-id="adbd6-112">When modifying the IP address prefixes, you don't need to delete the VPN gateway.</span></span>

<span data-ttu-id="adbd6-113">每次進行變更時，您都必須指定完整的首碼清單，而不只是指定您想要變更的首碼。</span><span class="sxs-lookup"><span data-stu-id="adbd6-113">Each time you make a change, the entire list of prefixes must be specified, not just the prefixes that you want to change.</span></span> <span data-ttu-id="adbd6-114">在此範例中，10.0.0.0/24 和 20.0.0.0/24 已存在。</span><span class="sxs-lookup"><span data-stu-id="adbd6-114">In this example, 10.0.0.0/24 and 20.0.0.0/24 are already present.</span></span> <span data-ttu-id="adbd6-115">我們會新增首碼 30.0.0.0/24 和 40.0.0.0/24，並且在更新時指定全部 4 個首碼。</span><span class="sxs-lookup"><span data-stu-id="adbd6-115">We add the prefixes 30.0.0.0/24 and 40.0.0.0/24 and specify all 4 of the prefixes when updating.</span></span>

```azurecli
az network local-gateway update --local-address-prefixes 10.0.0.0/24 20.0.0.0/24 30.0.0.0/24 40.0.0.0/24 --name VNet1toSite2 --connection-name TestRG1
```