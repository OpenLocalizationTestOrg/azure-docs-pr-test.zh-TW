<span data-ttu-id="055ea-101">每個使用點對站連線至 VNet 的用戶端電腦都必須安裝用戶端憑證。</span><span class="sxs-lookup"><span data-stu-id="055ea-101">Each client computer that connects to a VNet using Point-to-Site must have a client certificate installed.</span></span> <span data-ttu-id="055ea-102">用戶端憑證是從根憑證產生，並安裝在每部用戶端電腦上。</span><span class="sxs-lookup"><span data-stu-id="055ea-102">The client certificate is generated from the root certificate and installed on each client computer.</span></span> <span data-ttu-id="055ea-103">如果未安裝有效的用戶端憑證，且用戶端嘗試連線至 VNet，驗證將會失敗。</span><span class="sxs-lookup"><span data-stu-id="055ea-103">If a valid client certificate is not installed and the client tries to connect to the VNet, authentication fails.</span></span>

<span data-ttu-id="055ea-104">您可以為每個用戶端產生唯一的憑證，也可以對多個用戶端使用相同的憑證。</span><span class="sxs-lookup"><span data-stu-id="055ea-104">You can either generate a unique certificate for each client, or you can use the same certificate for multiple clients.</span></span> <span data-ttu-id="055ea-105">產生唯一用戶端憑證的優點是能夠撤銷單一憑證。</span><span class="sxs-lookup"><span data-stu-id="055ea-105">The advantage to generating unique client certificates is the ability to revoke a single certificate.</span></span> <span data-ttu-id="055ea-106">否則，如果多個用戶端使用相同的用戶端憑證，而您需要撤銷它時，就必須為所有使用該憑證進行驗證的用戶端產生並安裝新的憑證。</span><span class="sxs-lookup"><span data-stu-id="055ea-106">Otherwise, if multiple clients are using the same client certificate and you need to revoke it, you have to generate and install new certificates for all the clients that use that certificate to authenticate.</span></span>

<span data-ttu-id="055ea-107">您可以使用下列方法來產生用戶端憑證︰</span><span class="sxs-lookup"><span data-stu-id="055ea-107">You can generate client certificates using the following methods:</span></span>

- <span data-ttu-id="055ea-108">**企業憑證︰**</span><span class="sxs-lookup"><span data-stu-id="055ea-108">**Enterprise certificate:**</span></span>

  - <span data-ttu-id="055ea-109">如果您使用企業憑證解決方案，請以一般的名稱值格式 'name@yourdomain.com' 產生用戶端憑證，而不要使用 'domain name\username' 格式。</span><span class="sxs-lookup"><span data-stu-id="055ea-109">If you are using an enterprise certificate solution, generate a client certificate with the common name value format 'name@yourdomain.com', rather than the 'domain name\username' format.</span></span>
  - <span data-ttu-id="055ea-110">請確定用戶端憑證所根據的憑證範本，是以「用戶端驗證」(而不是「智慧卡登入」等) 作為使用清單中第一個項目的「使用者」憑證範本。您可以按兩下用戶端憑證，然後檢視 [詳細資料] > [增強金鑰使用方法]，來檢查憑證。</span><span class="sxs-lookup"><span data-stu-id="055ea-110">Make sure the client certificate is based on the 'User' certificate template that has 'Client Authentication' as the first item in the use list, rather than Smart Card Logon, etc. You can check the certificate by double-clicking the client certificate and viewing **Details > Enhanced Key Usage**.</span></span>

- <span data-ttu-id="055ea-111">**自我簽署的根憑證：**您務必遵循以下其中一篇 P2S 憑證文章中的步驟。</span><span class="sxs-lookup"><span data-stu-id="055ea-111">**Self-signed root certificate:** It's important that you follow the steps in one of the P2S certificate articles below.</span></span> <span data-ttu-id="055ea-112">否則，您所建立的用戶端憑證將無法與 P2S 連線相容，而且用戶端會在嘗試連線時收到錯誤訊息。</span><span class="sxs-lookup"><span data-stu-id="055ea-112">Otherwise, the client certificates you create won't be compatible with P2S connections and clients receive an error when trying to connect.</span></span> <span data-ttu-id="055ea-113">下列任一篇文章中的步驟都會產生相容的用戶端憑證：</span><span class="sxs-lookup"><span data-stu-id="055ea-113">The steps in either of the following articles generate a compatible client certificate:</span></span> 

  * <span data-ttu-id="055ea-114">[Windows 10 PowerShell 指示](../articles/vpn-gateway/vpn-gateway-certificates-point-to-site.md#clientcert)：這些指示需要 Windows 10 和 PowerShell，以產生憑證。</span><span class="sxs-lookup"><span data-stu-id="055ea-114">[Windows 10 PowerShell instructions](../articles/vpn-gateway/vpn-gateway-certificates-point-to-site.md#clientcert): These instructions require Windows 10 and PowerShell to generate certificates.</span></span> <span data-ttu-id="055ea-115">產生的憑證可以安裝在任何支援的 P2S 用戶端。</span><span class="sxs-lookup"><span data-stu-id="055ea-115">The certificates that are generated can be installed on any supported P2S client.</span></span>
  * <span data-ttu-id="055ea-116">[MakeCert 指示](../articles/vpn-gateway/vpn-gateway-certificates-point-to-site-makecert.md)：如果您無法存取 Windows 10 電腦來產生憑證，則可使用 MakeCert。</span><span class="sxs-lookup"><span data-stu-id="055ea-116">[MakeCert instructions](../articles/vpn-gateway/vpn-gateway-certificates-point-to-site-makecert.md): Use MakeCert if you don't have access to a Windows 10 computer to use to generate certificates.</span></span> <span data-ttu-id="055ea-117">MakeCert 已被取代，但您仍可使用 MakeCert 來產生憑證。</span><span class="sxs-lookup"><span data-stu-id="055ea-117">MakeCert deprecated, but you can still use MakeCert to generate certificates.</span></span> <span data-ttu-id="055ea-118">產生的憑證可以安裝在任何支援的 P2S 用戶端。</span><span class="sxs-lookup"><span data-stu-id="055ea-118">The certificates that are generated can be installed on any supported P2S client.</span></span>

  <span data-ttu-id="055ea-119">當您使用先前的指示從自我簽署根憑證產生用戶端憑證，它會自動安裝在您用來產生它的電腦上。</span><span class="sxs-lookup"><span data-stu-id="055ea-119">When you generate a client certificate from a self-signed root certificate using the preceding instructions, it's automatically installed on the computer that you used to generate it.</span></span> <span data-ttu-id="055ea-120">如果您想要在另一部用戶端電腦上安裝用戶端憑證，您需要將它匯出為 .pfx (包含整個憑證鏈結)。</span><span class="sxs-lookup"><span data-stu-id="055ea-120">If you want to install a client certificate on another client computer, you need to export it as a .pfx, along with the entire certificate chain.</span></span> <span data-ttu-id="055ea-121">這會建立一個 .pfx 檔案，其中包含用戶端驗證成功所需的根憑證資訊。</span><span class="sxs-lookup"><span data-stu-id="055ea-121">This creates a .pfx file that contains the root certificate information that is required for the client to successfully authenticate.</span></span> <span data-ttu-id="055ea-122">如需匯出憑證的步驟，請參閱[憑證 - 匯出用戶端憑證](../articles/vpn-gateway/vpn-gateway-certificates-point-to-site.md#clientexport)。</span><span class="sxs-lookup"><span data-stu-id="055ea-122">For steps to export a certificate, see [Certificates - export a client certificate](../articles/vpn-gateway/vpn-gateway-certificates-point-to-site.md#clientexport).</span></span>